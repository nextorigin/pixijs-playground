(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
(function() {
  var Console, Iced, Spine, inspect,
    __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
    __hasProp = {}.hasOwnProperty,
    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    __slice = [].slice;

  Spine = require("spine");

  Iced = require('iced-coffee-script');

  inspect = require("util").inspect;

  Console = (function(_super) {
    var DEFAULT_SETTINGS;

    __extends(Console, _super);

    Console.prototype.logPrefix = "(Playground:Console)";

    DEFAULT_SETTINGS = {
      lastVariable: '$_',
      maxLines: 8,
      maxDepth: 2,
      showHidden: false,
      colorize: false
    };

    Console.prototype.elements = {
      "button.refresh-console": "buttonRefreshConsole"
    };

    Console.prototype.addToHistory = function(s) {
      this.history.unshift(s);
      return this.historyi = -1;
    };

    Console.prototype.addToSaved = function(s) {
      this.saved += s.slice(0, -1) === '\\' ? s.slice(0, -1) : s;
      this.saved += '\n';
      return this.addToHistory(s);
    };

    Console.prototype.handleKeypress = function(e) {
      var input;
      switch (e.which) {
        case 13:
          e.preventDefault();
          input = this.input.val();
          if (input) {
            this.addToSaved(input);
            if (input.slice(0, -1) !== '\\' && !this.multiline) {
              return this.processSaved();
            }
          }
          break;
        case 27:
          e.preventDefault();
          input = this.input.val();
          if (input && this.multiline && this.saved) {
            input = this.input.val();
            this.addToSaved(input);
            this.processSaved();
          } else if (this.multiline && this.saved) {
            this.processSaved();
          }
          return this.multiline = !this.multiline;
        case 38:
          e.preventDefault();
          if (this.historyi < this.history.length - 1) {
            this.historyi += 1;
            return this.input.val(this.history[this.historyi]);
          }
          break;
        case 40:
          e.preventDefault();
          if (this.historyi > 0) {
            this.historyi += -1;
            return this.input.val(this.history[this.historyi]);
          }
      }
    };

    Console.prototype.mouseenterConsoleRefresh = function() {
      return this.buttonRefreshConsole.fadeIn(180);
    };

    Console.prototype.mouseenterKeepConsoleRefresh = function() {
      return this.buttonRefreshConsole.stop(true).fadeTo(1, 1);
    };

    Console.prototype.mouseleaveConsoleRefresh = function() {
      return this.buttonRefreshConsole.fadeOut(180);
    };

    Console.prototype.events = {
      "mouseenter aside#output": "mouseenterConsoleRefresh",
      "mouseenter button.refresh-console": "mouseenterKeepConsoleRefresh",
      "mouseleave aside#output": "mouseleaveConsoleRefresh"
    };

    function Console(options, settings) {
      var k, v, _ref;
      if (settings == null) {
        settings = {};
      }
      this.printValue = __bind(this.printValue, this);
      this.print = __bind(this.print, this);
      this.handleKeypress = __bind(this.handleKeypress, this);
      this.addToSaved = __bind(this.addToSaved, this);
      this.addToHistory = __bind(this.addToHistory, this);
      this.history = [];
      this.historyi = -1;
      this.saved = '';
      this.multiline = false;
      Console.__super__.constructor.apply(this, arguments);
      this.input.keydown(this.handleKeypress);
      this.settings = $.extend({}, DEFAULT_SETTINGS);
      if (localStorage && localStorage.settings) {
        _ref = JSON.parse(localStorage.settings);
        for (k in _ref) {
          v = _ref[k];
          this.settings[k] = v;
        }
      }
      for (k in settings) {
        if (!__hasProp.call(settings, k)) continue;
        v = settings[k];
        this.settings[k] = v;
      }
    }

    Console.prototype.lang = function(name) {
      if (name) {
        return this._lang = name;
      } else {
        return this._lang;
      }
    };

    Console.prototype.processSaved = function() {
      var compiled, e, value;
      try {
        compiled = (function() {
          switch (this.lang()) {
            case "coffee":
              return Iced.compile(this.saved, {
                bare: true
              });
            case "vanilla":
              return this.saved;
          }
        }).call(this);
        value = eval.call(window, compiled);
        window[this.settings.lastVariable] = value;
        return this.printValue(value);
      } catch (_error) {
        e = _error;
        return this.printCompileError(e);
      } finally {
        this.saved = '';
      }
    };

    Console.prototype.print = function() {
      var args, o, s;
      args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
      s = args.join(' ') || ' ';
      o = this.el.html() + s + '\n';
      this.html(o.split('\n').slice(-this.settings.maxLines).join('\n'));
      return void 0;
    };

    Console.prototype.printValue = function(value) {
      return this.print(inspect(value, this.settings.showHidden, this.settings.maxDepth, this.settings.colorize));
    };

    Console.prototype.printCompileError = function(e) {
      var output;
      if (e.stack) {
        output = e.stack;
      }
      if ((output != null ? output.split('\n')[0] : void 0) !== e.toString()) {
        output = "" + (e.toString()) + "\n" + e.stack;
      } else {
        output = e.toString();
      }
      return this.print(output);
    };

    return Console;

  })(Spine.Controller);

  module.exports = Console;

}).call(this);


},{"iced-coffee-script":20,"spine":39,"util":46}],2:[function(require,module,exports){
(function() {
  var CodeMirror, Editor, FileQueue, Iced, IcedMirror, Spine, iced, js2coffee, __iced_k, __iced_k_noop,
    __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
    __hasProp = {}.hasOwnProperty,
    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };

  iced = require('iced-runtime');
  __iced_k = __iced_k_noop = function() {};

  Spine = require('spine');

  Iced = require('iced-coffee-script');

  CodeMirror = require("codemirror");

  IcedMirror = require("codemirror-iced-coffee-script");

  js2coffee = require("js2coffee/dist/js2coffee");

  FileQueue = require('../lib/filequeue');

  Editor = (function(_super) {
    var DEFAULT_SETTINGS;

    __extends(Editor, _super);

    Editor.prototype.logPrefix = "(Playground:Editor)";

    DEFAULT_SETTINGS = {
      lastVariable: '$_'
    };

    Editor.prototype.elements = {
      "nav.sandbox": "navSandbox",
      "textarea.sandbox": "placeholder",
      "footer": "footer",
      "aside#help": "help"
    };

    Editor.prototype.toggleHelp = function() {
      if (this.help.is(":visible")) {
        return this.help.fadeOut(300);
      } else {
        return this.help.fadeIn(300);
      }
    };

    Editor.prototype.saveSettings = function() {
      var input;
      input = this.val();
      this.addToSaved(input);
      return localStorage.settings = JSON.stringify($.extend({}, this.settings, {
        assets: window.assets,
        script: this.saved
      }));
    };

    Editor.prototype.runOrStopUserScript = function(e) {
      var button;
      button = $(e.target).closest('button');
      if (button.is(".selected")) {
        this.stopUserScript();
        button.text("run!");
      } else {
        this.runUserScript();
        button.text("stop!");
      }
      return button.toggleClass("selected");
    };

    Editor.prototype.runUserScript = function() {
      var input;
      if (!(input = this.val())) {
        return;
      }
      this.addToSaved(input);
      return this.processSaved();
    };

    Editor.prototype.stopUserScript = function() {
      return window.cancelAnimationFrame(window.frame);
    };

    Editor.prototype.processSaved = function() {
      var compiled, e, value;
      this.trigger("presave");
      try {
        compiled = (function() {
          switch (this.lang()) {
            case "coffee":
              return Iced.compile(this.saved, {
                bare: true,
                runtime: "inline"
              });
            case "vanilla":
              return this.saved;
          }
        }).call(this);
        value = eval.call(window, compiled);
        window[this.settings.lastVariable] = value;
        this.console.printValue(value);
      } catch (_error) {
        e = _error;
        this.console.printCompileError(e);
      }
      return this.saved = '';
    };

    Editor.prototype.addToHistory = function(s) {
      this.history.unshift(s);
      return this.historyi = -1;
    };

    Editor.prototype.addToSaved = function(s) {
      this.saved += s.slice(0, -1) === '\\' ? s.slice(0, -1) : s;
      this.saved += '\n';
      return this.addToHistory(s);
    };

    Editor.prototype.mouseenterExampleNav = function() {
      return this.navSandbox.fadeIn(180);
    };

    Editor.prototype.mouseenterKeepExampleNav = function() {
      return this.navSandbox.stop(true).fadeTo(1, 1);
    };

    Editor.prototype.mouseleaveExampleNav = function() {
      return this.navSandbox.fadeOut(180);
    };

    Editor.prototype.switchLang = function(e) {
      var el;
      el = $(e.target).closest('button');
      if (el.is(".selected")) {
        return;
      }
      if (((el.is(".langswitch-coffee")) && this.switchToCoffee()) || this.switchToVanilla()) {
        return el.addClass("selected").siblings().removeClass("selected");
      }
    };

    Editor.prototype.lang = function(name) {
      if (name) {
        return this.trigger("langchange", this._lang = name);
      } else {
        return this._lang;
      }
    };

    Editor.prototype.events = {
      "click button.help": "toggleHelp",
      "click button.save": "saveSettings",
      "click button.run": "runOrStopUserScript",
      "click button.refresh-example": "refreshExample",
      "mouseenter .CodeMirror": "mouseenterExampleNav",
      "mouseenter nav.sandbox": "mouseenterKeepExampleNav",
      "mouseleave .CodeMirror": "mouseleaveExampleNav",
      "click button.langswitch-coffee": "switchLang",
      "click button.langswitch-vanilla": "switchLang",
      "dragover footer": "fileDragHover",
      "dragleave footer": "fileDragHover",
      "drop footer": "fileSelectHandler"
    };

    function Editor(options, settings) {
      var k, v, _ref;
      if (settings == null) {
        settings = {};
      }
      this.addToSaved = __bind(this.addToSaved, this);
      this.addToHistory = __bind(this.addToHistory, this);
      this.history = [];
      this.historyi = -1;
      this.saved = '';
      Editor.__super__.constructor.apply(this, arguments);
      this.settings = $.extend({}, DEFAULT_SETTINGS);
      if (localStorage && localStorage.settings) {
        _ref = JSON.parse(localStorage.settings);
        for (k in _ref) {
          v = _ref[k];
          this.settings[k] = v;
          switch (k) {
            case "assets":
            case "userscripts":
              window[k] = v;
          }
        }
      }
      for (k in settings) {
        if (!__hasProp.call(settings, k)) continue;
        v = settings[k];
        this.settings[k] = v;
      }
      CodeMirror.keyMap.tabSpace = {
        fallthrough: ['default'],
        Tab: function(cm) {
          var spaces;
          spaces = Array(cm.getOption("indentUnit") + 1).join(" ");
          return cm.replaceSelection(spaces, "end", "+input");
        }
      };
      this.codemirror || (this.codemirror = CodeMirror.fromTextArea(this.placeholder[0], {
        mode: "icedcoffeescript",
        theme: "monokai",
        lineNumbers: true,
        tabSize: 2,
        keyMap: "tabSpace"
      }));
      this.wrapper = $(this.codemirror.getWrapperElement());
      this.wrapper.addClass("sandbox");
      if (this.settings.script) {
        this.val(this.settings.script);
        this.scrollToEnd();
      }
    }

    Editor.prototype.render = function(examplename) {
      return this.loadExample(examplename);
    };

    Editor.prototype.val = function(value) {
      if (value) {
        return this.codemirror.doc.setValue("" + value + "\n\n\n\n");
      } else {
        return this.codemirror.doc.getValue();
      }
    };

    Editor.prototype.loadExample = function(name) {
      var example, ___iced_passed_deferral, __iced_deferrals, __iced_k;
      __iced_k = __iced_k_noop;
      ___iced_passed_deferral = iced.findDeferral(arguments);
      this.example = name;
      (function(_this) {
        return (function(__iced_k) {
          __iced_deferrals = new iced.Deferrals(__iced_k, {
            parent: ___iced_passed_deferral,
            filename: "/home/charles/source/pixijs-playground/app/controllers/editor.iced",
            funcname: "Editor.loadExample"
          });
          _this.examples[name](__iced_deferrals.defer({
            assign_fn: (function() {
              return function() {
                return example = arguments[0];
              };
            })(),
            lineno: 147
          }));
          __iced_deferrals._fulfill();
        });
      })(this)((function(_this) {
        return function() {
          _this.val(example);
          return _this.scrollToEnd();
        };
      })(this));
    };

    Editor.prototype.scrollToEnd = function() {
      return this.codemirror.scrollIntoView(this.codemirror.doc.lineCount() - 1);
    };

    Editor.prototype.refreshExample = function() {
      return this.loadExample(this.example);
    };

    Editor.prototype.clear = function() {
      return this.val("");
    };

    Editor.prototype.switchToVanilla = function() {
      var compiled, e, input;
      if (!(input = this.val())) {
        this.lang("vanilla");
        return true;
      }
      try {
        compiled = Iced.compile(input, {
          bare: true,
          runtime: "inline"
        });
        this.val(compiled);
        this.lang("vanilla");
        return true;
      } catch (_error) {
        e = _error;
        this.console.printCompileError(e);
        return false;
      }
    };

    Editor.prototype.switchToCoffee = function() {
      var compiled, e, input, output;
      if (!(input = this.val())) {
        this.lang("coffee");
        return true;
      }
      try {
        compiled = js2coffee.build(input, {
          show_src_lineno: true,
          indent: "  "
        });
        this.val("" + compiled.code);
        this.lang("coffee");
        return true;
      } catch (_error) {
        e = _error;
        output = this.console.printCompileError(e);
        this.print(output);
        return false;
      }
    };

    Editor.prototype.fileDragHover = function(e) {
      e.stopPropagation();
      e.preventDefault();
      return this.footer.toggleClass("draghover", e.type === "dragover");
    };

    Editor.prototype.fileSelectHandler = function(e) {
      var file, files, _i, _len, _results;
      this.fileDragHover(e);
      if (e.originalEvent != null) {
        e = e.originalEvent;
      }
      files = e.target.files || e.dataTransfer.files;
      _results = [];
      for (_i = 0, _len = files.length; _i < _len; _i++) {
        file = files[_i];
        _results.push(this.parseFile(file));
      }
      return _results;
    };

    Editor.prototype.parseFile = function(file) {
      var type;
      type = file.type;
      if (/(png|gif|jpeg|jpg)/.test(type)) {
        return this.parseImage(file);
      } else if (/(javascript|js|coffee|iced)/.test(type)) {
        return this.parseScript(file);
      } else {
        return this.console.print("Unknown filetype: " + type);
      }
    };

    Editor.prototype.parseImage = function(file) {
      var dataurl, name, status, value, varname, ___iced_passed_deferral, __iced_deferrals, __iced_k;
      __iced_k = __iced_k_noop;
      ___iced_passed_deferral = iced.findDeferral(arguments);
      name = file.name;
      window.assets || (window.assets = []);
      varname = "window.assets[" + window.assets.length + "]";
      this.console.print("Adding " + name + " as " + varname);
      this.fileQueue || (this.fileQueue = new FileQueue);
      (function(_this) {
        return (function(__iced_k) {
          __iced_deferrals = new iced.Deferrals(__iced_k, {
            parent: ___iced_passed_deferral,
            filename: "/home/charles/source/pixijs-playground/app/controllers/editor.iced",
            funcname: "Editor.parseImage"
          });
          _this.fileQueue.awaitRead({
            file: file
          }, __iced_deferrals.defer({
            assign_fn: (function() {
              return function() {
                status = arguments[0];
                return dataurl = arguments[1];
              };
            })(),
            lineno: 218
          }));
          __iced_deferrals._fulfill();
        });
      })(this)((function(_this) {
        return function() {
          if (status === "error") {
            return _this.log("Error: " + dataurl);
          }
          window.assets.push(dataurl);
          value = (function() {
            switch (this.lang()) {
              case "coffee":
                return "# " + name + "\nnewimage = " + varname + "\n" + (this.val().trim());
              case "vanilla":
                return "// " + name + "\nvar newimage = " + varname + "\n" + (this.val().trim());
            }
          }).call(_this);
          _this.val(value);
          return _this.codemirror.scrollIntoView(0);
        };
      })(this));
    };

    Editor.prototype.parseScript = function(file) {
      var name, status, text, value, varname, ___iced_passed_deferral, __iced_deferrals, __iced_k;
      __iced_k = __iced_k_noop;
      ___iced_passed_deferral = iced.findDeferral(arguments);
      name = file.name;
      if (window.userscripts == null) {
        window.userscripts = [];
      }
      varname = "window.userscripts[" + window.userscripts.length + "]";
      this.console.print("Adding " + name + " as " + varname);
      this.fileQueue || (this.fileQueue = new FileQueue);
      (function(_this) {
        return (function(__iced_k) {
          __iced_deferrals = new iced.Deferrals(__iced_k, {
            parent: ___iced_passed_deferral,
            filename: "/home/charles/source/pixijs-playground/app/controllers/editor.iced",
            funcname: "Editor.parseScript"
          });
          _this.fileQueue.awaitRead({
            file: file,
            readAs: "Text"
          }, __iced_deferrals.defer({
            assign_fn: (function() {
              return function() {
                status = arguments[0];
                return text = arguments[1];
              };
            })(),
            lineno: 241
          }));
          __iced_deferrals._fulfill();
        });
      })(this)((function(_this) {
        return function() {
          if (status === "error") {
            return _this.log("Error: " + text);
          }
          window.userscripts.push(text);
          value = (function() {
            switch (this.lang()) {
              case "coffee":
                return "# " + name + "\n# if this is a CommonJS module, run:\n# require.define \"module-name\": eval " + varname + "\n#\n# to save this in localStorage with the script, run:\n# app.editor.saveUserScript " + varname + "\nnewscript = " + varname + "\n" + (this.val().trim());
              case "vanilla":
                return "// " + name + "\n// if this is a CommonJS module, run:\n// require.define({\"module-name\": eval(" + varname + ")})\n//\n// to save this in localStorage with the script, run:\n// app.editor.saveUserScript(" + varname + ")\nvar newscript = " + varname + "\n" + (this.val().trim());
            }
          }).call(_this);
          _this.val(value);
          return _this.codemirror.scrollIntoView(0);
        };
      })(this));
    };

    Editor.prototype.saveUserScript = function(script) {
      var _base;
      if ((_base = this.settings).userscripts == null) {
        _base.userscripts = [];
      }
      if (__indexOf.call(this.settings.userscripts, script) < 0) {
        return this.settings.userscripts.push(script);
      }
    };

    return Editor;

  })(Spine.Controller);

  module.exports = Editor;

}).call(this);


},{"../lib/filequeue":5,"codemirror":17,"codemirror-iced-coffee-script":16,"iced-coffee-script":20,"iced-runtime":32,"js2coffee/dist/js2coffee":36,"spine":39}],3:[function(require,module,exports){
(function() {
  var PIXI, Spine, Stage, Stats, extend,
    __slice = [].slice,
    __hasProp = {}.hasOwnProperty,
    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

  Spine = require("spine");

  PIXI = require("../lib/pixi.dev.js");

  Stats = require("stats.js");

  extend = function() {
    var base, key, obj, objs, value, _i, _len;
    base = arguments[0], objs = 2 <= arguments.length ? __slice.call(arguments, 1) : [];
    for (_i = 0, _len = objs.length; _i < _len; _i++) {
      obj = objs[_i];
      for (key in obj) {
        value = obj[key];
        base[key] = value;
      }
    }
    return base;
  };

  Stage = (function(_super) {
    __extends(Stage, _super);

    Stage.prototype.logPrefix = "(Playground:Stage)";

    Stage.prototype.pixidefaults = {
      backgroundColor: 0xFFFFFF,
      transparent: false,
      antialias: false
    };

    Stage.prototype.resize = function() {};

    Stage.prototype.bindResize = function() {
      $(window).resize(this.resize);
      return $(window).on("onorientationchange", this.resize);
    };

    Stage.prototype.release = function() {
      $(window).off("resize", this.resize);
      return $(window).off("onorientationchange", this.resize);
    };

    Stage.prototype._frameFns = [];

    Stage.prototype.addFrameFn = function(fn) {
      return this._frameFns.push(fn);
    };

    Stage.prototype.removeFrameFn = function(fn) {
      return this._frameFns.splice(this._frameFns.indexOf(fn), 1);
    };

    Stage.prototype.ani = function(loopfn) {
      var recursiveloop;
      if (loopfn == null) {
        loopfn = function() {};
      }
      this.addFrameFn(loopfn);
      recursiveloop = (function(_this) {
        return function() {
          var fn, _i, _len, _ref;
          _this.stats.begin();
          _ref = _this._frameFns;
          for (_i = 0, _len = _ref.length; _i < _len; _i++) {
            fn = _ref[_i];
            fn();
          }
          _this.renderer.render(_this.stage);
          _this.frame = requestAnimFrame(recursiveloop);
          return _this.stats.end();
        };
      })(this);
      return this.frame = requestAnimFrame(recursiveloop);
    };

    function Stage(options, pixisettings) {
      if (pixisettings == null) {
        pixisettings = {};
      }
      Stage.__super__.constructor.apply(this, arguments);
      this.pixisettings = extend({}, this.pixidefaults, pixisettings);
      this.stage = new PIXI.Stage(this.pixisettings.backgroundColor);
      this.stage.width = this.el.width();
      this.stage.height = this.el.height();
      this.stage.interactive = this.pixisettings.interactive;
      window.stage = this.stage;
      window.ani = this.proxy(this.ani);
      window.PIXI = PIXI;
      this.render();
      this.bindResize();
      this.addChild = this.append;
      this.removeChildren = this.remove;
    }

    Stage.prototype.render = function() {
      this.renderer = PIXI.autoDetectRenderer(this.stage.width, this.stage.height, null, this.pixisettings.transparent, this.pixisettings.antialias);
      this.stats = new Stats;
      this.$stats = $(this.stats.domElement);
      window.renderer = this.renderer;
      window.stats = this.stats;
      this.el.append(this.renderer.view);
      this.hideStats();
      return this.el.append(this.$stats);
    };

    Stage.prototype.hideStats = function() {
      return this.$stats.css({
        display: "none"
      });
    };

    Stage.prototype.showStats = function() {
      return this.$stats.css({
        display: "block",
        position: "absolute"
      });
    };

    Stage.prototype.append = function() {
      var child, children, _i, _len;
      children = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
      for (_i = 0, _len = children.length; _i < _len; _i++) {
        child = children[_i];
        if (child.display) {
          child.stage = this;
          child = child.display;
        }
        this.stage.addChild(child);
      }
      return this;
    };

    Stage.prototype.addChild = function() {};

    Stage.prototype.remove = function() {
      var child, children, _i;
      children = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
      if (!children.length) {
        children = this.stage.children;
      }
      for (_i = children.length - 1; _i >= 0; _i += -1) {
        child = children[_i];
        if (child.display) {
          child.stage = null;
          child = child.display;
        }
        this.stage.removeChild(child);
      }
      return this;
    };

    Stage.prototype.removeChildren = function() {};

    Stage.prototype.refresh = function() {
      this.removeChildren();
      this.stats.end();
      return this.renderer.render(this.stage);
    };

    Stage.prototype.stackLevel = function(child) {
      return this.stage.children.indexOf(child.display || child);
    };

    Stage.prototype.bringToFront = function() {
      var children;
      children = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
      this.removeChildren.apply(this, children);
      return this.append.apply(this, children);
    };

    Stage.prototype.sendToBack = function() {
      var children;
      children = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
      return this.moveInStack.apply(this, __slice.call(children).concat([0]));
    };

    Stage.prototype.moveInStack = function() {
      var children, newLevel, _i;
      children = 2 <= arguments.length ? __slice.call(arguments, 0, _i = arguments.length - 1) : (_i = 0, []), newLevel = arguments[_i++];
      this.removeChildren.apply(this, children);
      return this.addChildrenAt.apply(this, __slice.call(children).concat([newLevel]));
    };

    Stage.prototype.addChildrenAt = function() {
      var child, children, newLevel, _i, _j, _k, _len, _len1;
      children = 2 <= arguments.length ? __slice.call(arguments, 0, _i = arguments.length - 1) : (_i = 0, []), newLevel = arguments[_i++];
      for (_j = 0, _len = children.length; _j < _len; _j++) {
        child = children[_j];
        if (child.display) {
          child.stage = this;
          child = child.display;
        }
      }
      for (_k = 0, _len1 = children.length; _k < _len1; _k++) {
        child = children[_k];
        this.stage.addChildAt(child.display || child, newLevel);
      }
      return this;
    };

    return Stage;

  })(Spine.Controller);

  module.exports = Stage;

}).call(this);


},{"../lib/pixi.dev.js":6,"spine":39,"stats.js":44}],4:[function(require,module,exports){
(function() {
  var Math2;

  Math2 = {
    random: function(from, to) {
      return Math.random() * (to - from) + from;
    },
    map: function(val, inputMin, inputMax, outputMin, outputMax) {
      return ((outputMax - outputMin) * ((val - inputMin) / (inputMax - inputMin))) + outputMin;
    },
    randomPlusMinus: function(chance) {
      chance = chance ? chance : 0.5;
      if (Math.random() > chance) {
        return -1;
      } else {
        return 1;
      }
    },
    randomInt: function(from, to) {
      return Math.floor(Math.random() * (++to - from) + from);
    },
    randomBool: function(chance) {
      chance = chance ? chance : 0.5;
      return Math.random() < chance;
    }
  };

  module.exports = Math2;

}).call(this);


},{}],5:[function(require,module,exports){
(function() {
  var FileQueue, iced, __iced_k, __iced_k_noop;

  iced = require('iced-runtime');
  __iced_k = __iced_k_noop = function() {};

  FileQueue = (function() {
    function FileQueue() {}

    FileQueue.prototype.enabled = true;

    FileQueue.prototype.disable = function(callback) {
      var e;
      if (this.enabled) {
        this.enabled = false;
        try {
          return callback();
        } catch (_error) {
          e = _error;
          throw e;
        } finally {
          this.enabled = true;
        }
      } else {
        return callback();
      }
    };

    FileQueue.prototype.max = 100;

    FileQueue.prototype.throttle = 0;

    FileQueue.prototype.queue = function(request) {
      var ___iced_passed_deferral, __iced_deferrals, __iced_k;
      __iced_k = __iced_k_noop;
      ___iced_passed_deferral = iced.findDeferral(arguments);
      this.pipeliner || (this.pipeliner = new Pipeliner(this.max, this.throttle));
      if (!request) {
        return this.pipeliner.queue;
      }
      (function(_this) {
        return (function(__iced_k) {
          __iced_deferrals = new iced.Deferrals(__iced_k, {
            parent: ___iced_passed_deferral,
            filename: "/home/charles/source/pixijs-playground/app/lib/filequeue.iced",
            funcname: "FileQueue.queue"
          });
          _this.pipeliner.waitInQueue(__iced_deferrals.defer({
            lineno: 21
          }));
          __iced_deferrals._fulfill();
        });
      })(this)((function(_this) {
        return function() {
          return request(_this.pipeliner.defer({
            lineno: 22,
            context: __iced_deferrals
          }));
        };
      })(this));
    };

    FileQueue.prototype.clearQueue = function() {
      this.pipeliner.queue = [];
      return this.pipeliner.n_out = 0;
    };

    FileQueue.prototype.defaults = {
      readAs: "DataURL",
      encoding: "UTF-8"
    };

    FileQueue.prototype.readFile = function(params, defaults) {
      var read, reader, settings;
      if (params == null) {
        params = {};
      }
      if (defaults == null) {
        defaults = {};
      }
      if (defaults !== true) {
        settings = $.extend({}, this.defaults, defaults, params);
      }
      reader = new FileReader;
      reader.onload = function(e) {
        return settings.success(reader.result);
      };
      reader.onerror = settings.error;
      read = (function() {
        switch (settings.readAs) {
          case "ArrayBuffer":
            return reader.readAsArrayBuffer(settings.file, settings.encoding);
          case "BinaryString":
            return reader.readAsBinaryString(settings.file, settings.encoding);
          case "DataURL":
            return reader.readAsDataURL(settings.file, settings.encoding);
          case "Text":
            return reader.readAsText(settings.file, settings.encoding);
        }
      })();
      return reader;
    };

    FileQueue.prototype.queueFile = function(params, defaults) {
      var defererror, defersuccess, e, request, rv, settings;
      if (params == null) {
        params = {};
      }
      if (defaults == null) {
        defaults = {};
      }
      rv = new iced.Rendezvous;
      settings = $.extend({}, this.defaults, defaults, params);
      defersuccess = settings.success;
      defererror = settings.error;
      settings.success = rv.id('success').defer({
        assign_fn: (function(_this) {
          return function() {
            return function() {
              return e = arguments[0];
            };
          };
        })(this)(),
        lineno: 53,
        context: __iced_deferrals
      });
      settings.error = rv.id('error').defer({
        assign_fn: (function(_this) {
          return function() {
            return function() {
              return e = arguments[0];
            };
          };
        })(this)(),
        lineno: 54,
        context: __iced_deferrals
      });
      request = function(next) {
        var reader, status, ___iced_passed_deferral, __iced_deferrals, __iced_k;
        __iced_k = __iced_k_noop;
        ___iced_passed_deferral = iced.findDeferral(arguments);
        reader = this.readFile(settings, true);
        (function(_this) {
          return (function(__iced_k) {
            __iced_deferrals = new iced.Deferrals(__iced_k, {
              parent: ___iced_passed_deferral,
              filename: "/home/charles/source/pixijs-playground/app/lib/filequeue.iced"
            });
            rv.wait(__iced_deferrals.defer({
              assign_fn: (function() {
                return function() {
                  return status = arguments[0];
                };
              })(),
              lineno: 58
            }));
            __iced_deferrals._fulfill();
          });
        })(this)((function(_this) {
          return function() {
            switch (status) {
              case 'success':
                defersuccess(reader.result);
                break;
              case 'error':
                defererror(e);
            }
            return next();
          };
        })(this));
      };
      request.abort = function(statusText) {
        var index;
        if (reader) {
          return reader.abort(statusText);
        }
        index = this.queue().indexOf(request);
        if (index > -1) {
          this.queue().splice(index, 1);
        }
        if (this.pipeliner) {
          this.pipeliner.n_out--;
        }
        return request;
      };
      if (!this.enabled) {
        return request;
      }
      this.queue(request);
      return request;
    };

    FileQueue.prototype.awaitRead = function(options, cb, queue) {
      var e, result, rv, status, ___iced_passed_deferral, __iced_deferrals, __iced_k;
      __iced_k = __iced_k_noop;
      ___iced_passed_deferral = iced.findDeferral(arguments);
      if (queue == null) {
        queue = false;
      }
      rv = new iced.Rendezvous();
      options.success = rv.id('success').defer({
        assign_fn: (function(_this) {
          return function() {
            return function() {
              return result = arguments[0];
            };
          };
        })(this)(),
        lineno: 83,
        context: __iced_deferrals
      });
      options.error = rv.id('error').defer({
        assign_fn: (function(_this) {
          return function() {
            return function() {
              return e = arguments[0];
            };
          };
        })(this)(),
        lineno: 84,
        context: __iced_deferrals
      });
      if (queue) {
        this.fileQueue(options);
      } else {
        this.readFile(options);
      }
      (function(_this) {
        return (function(__iced_k) {
          __iced_deferrals = new iced.Deferrals(__iced_k, {
            parent: ___iced_passed_deferral,
            filename: "/home/charles/source/pixijs-playground/app/lib/filequeue.iced",
            funcname: "FileQueue.awaitRead"
          });
          rv.wait(__iced_deferrals.defer({
            assign_fn: (function() {
              return function() {
                return status = arguments[0];
              };
            })(),
            lineno: 89
          }));
          __iced_deferrals._fulfill();
        });
      })(this)((function(_this) {
        return function() {
          return cb(status, result || e);
        };
      })(this));
    };

    return FileQueue;

  })();

  module.exports = FileQueue;

}).call(this);


},{"iced-runtime":32}],6:[function(require,module,exports){
/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

(function(){

	var root = this;

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

/**
 * @module PIXI
 */
var PIXI = PIXI || {};

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

/**
 * The Point object represents a location in a two-dimensional coordinate system, where x represents the horizontal axis and y represents the vertical axis.
 *
 * @class Point
 * @constructor
 * @param x {Number} position of the point
 * @param y {Number} position of the point
 */
PIXI.Point = function(x, y)
{
	/**
	 * @property x
	 * @type Number
	 * @default 0
	 */
	this.x = x || 0;

	/**
	 * @property y
	 * @type Number
	 * @default 0
	 */
	this.y = y || 0;
}

/**
 * Creates a clone of this point
 *
 * @method clone
 * @return {Point} a copy of the point
 */
PIXI.Point.prototype.clone = function()
{
	return new PIXI.Point(this.x, this.y);
}

// constructor
PIXI.Point.prototype.constructor = PIXI.Point;


/**
 * @author Mat Groves http://matgroves.com/
 */

/**
 * the Rectangle object is an area defined by its position, as indicated by its top-left corner point (x, y) and by its width and its height.
 *
 * @class Rectangle
 * @constructor
 * @param x {Number} The X coord of the upper-left corner of the rectangle
 * @param y {Number} The Y coord of the upper-left corner of the rectangle
 * @param width {Number} The overall width of this rectangle
 * @param height {Number} The overall height of this rectangle
 */
PIXI.Rectangle = function(x, y, width, height)
{
	/**
	 * @property x
	 * @type Number
	 * @default 0
	 */
	this.x = x || 0;

	/**
	 * @property y
	 * @type Number
	 * @default 0
	 */
	this.y = y || 0;

	/**
	 * @property width
	 * @type Number
	 * @default 0
	 */
	this.width = width || 0;

	/**
	 * @property height
	 * @type Number
	 * @default 0
	 */
	this.height = height || 0;
}

/**
 * Creates a clone of this Rectangle
 *
 * @method clone
 * @return {Rectangle} a copy of the rectangle
 */
PIXI.Rectangle.prototype.clone = function()
{
	return new PIXI.Rectangle(this.x, this.y, this.width, this.height);
}

/**
 * Checks if the x, and y coords passed to this function are contained within this Rectangle
 *
 * @method contains
 * @param x {Number} The X coord of the point to test
 * @param y {Number} The Y coord of the point to test
 * @return {Boolean} if the x/y coords are within this Rectangle
 */
PIXI.Rectangle.prototype.contains = function(x, y)
{
    if(this.width <= 0 || this.height <= 0)
        return false;

	var x1 = this.x;
	if(x >= x1 && x <= x1 + this.width)
	{
		var y1 = this.y;

		if(y >= y1 && y <= y1 + this.height)
		{
			return true;
		}
	}

	return false;
}

// constructor
PIXI.Rectangle.prototype.constructor = PIXI.Rectangle;


/**
 * @author Adrien Brault <adrien.brault@gmail.com>
 */

/**
 * @class Polygon
 * @constructor
 * @param points* {Array<Point>|Array<Number>|Point...|Number...} This can be an array of Points that form the polygon,
 *      a flat array of numbers that will be interpreted as [x,y, x,y, ...], or the arguments passed can be
 *      all the points of the polygon e.g. `new PIXI.Polygon(new PIXI.Point(), new PIXI.Point(), ...)`, or the
 *      arguments passed can be flat x,y values e.g. `new PIXI.Polygon(x,y, x,y, x,y, ...)` where `x` and `y` are
 *      Numbers.
 */
PIXI.Polygon = function(points)
{
    //if points isn't an array, use arguments as the array
    if(!(points instanceof Array))
        points = Array.prototype.slice.call(arguments);

    //if this is a flat array of numbers, convert it to points
    if(typeof points[0] === 'number') {
        var p = [];
        for(var i = 0, il = points.length; i < il; i+=2) {
            p.push(
                new PIXI.Point(points[i], points[i + 1])
            );
        }

        points = p;
    }

	this.points = points;
}

/**
 * Creates a clone of this polygon
 *
 * @method clone
 * @return {Polygon} a copy of the polygon
 */
PIXI.Polygon.prototype.clone = function()
{
	var points = [];
	for (var i=0; i<this.points.length; i++) {
		points.push(this.points[i].clone());
	}

	return new PIXI.Polygon(points);
}

/**
 * Checks if the x, and y coords passed to this function are contained within this polygon
 *
 * @method contains
 * @param x {Number} The X coord of the point to test
 * @param y {Number} The Y coord of the point to test
 * @return {Boolean} if the x/y coords are within this polygon
 */
PIXI.Polygon.prototype.contains = function(x, y)
{
    var inside = false;

    // use some raycasting to test hits
    // https://github.com/substack/point-in-polygon/blob/master/index.js
    for(var i = 0, j = this.points.length - 1; i < this.points.length; j = i++) {
        var xi = this.points[i].x, yi = this.points[i].y,
            xj = this.points[j].x, yj = this.points[j].y,
            intersect = ((yi > y) != (yj > y)) && (x < (xj - xi) * (y - yi) / (yj - yi) + xi);

        if(intersect) inside = !inside;
    }

    return inside;
}

// constructor
PIXI.Polygon.prototype.constructor = PIXI.Polygon;

/**
 * @author Chad Engler <chad@pantherdev.com>
 */

/**
 * The Circle object can be used to specify a hit area for displayobjects
 *
 * @class Circle
 * @constructor
 * @param x {Number} The X coord of the upper-left corner of the framing rectangle of this circle
 * @param y {Number} The Y coord of the upper-left corner of the framing rectangle of this circle
 * @param radius {Number} The radius of the circle
 */
PIXI.Circle = function(x, y, radius)
{
    /**
     * @property x
     * @type Number
     * @default 0
     */
    this.x = x || 0;

    /**
     * @property y
     * @type Number
     * @default 0
     */
    this.y = y || 0;

    /**
     * @property radius
     * @type Number
     * @default 0
     */
    this.radius = radius || 0;
}

/**
 * Creates a clone of this Circle instance
 *
 * @method clone
 * @return {Circle} a copy of the polygon
 */
PIXI.Circle.prototype.clone = function()
{
    return new PIXI.Circle(this.x, this.y, this.radius);
}

/**
 * Checks if the x, and y coords passed to this function are contained within this circle
 *
 * @method contains
 * @param x {Number} The X coord of the point to test
 * @param y {Number} The Y coord of the point to test
 * @return {Boolean} if the x/y coords are within this polygon
 */
PIXI.Circle.prototype.contains = function(x, y)
{
    if(this.radius <= 0)
        return false;

    var dx = (this.x - x),
        dy = (this.y - y),
        r2 = this.radius * this.radius;

    dx *= dx;
    dy *= dy;

    return (dx + dy <= r2);
}

// constructor
PIXI.Circle.prototype.constructor = PIXI.Circle;


/**
 * @author Chad Engler <chad@pantherdev.com>
 */

/**
 * The Ellipse object can be used to specify a hit area for displayobjects
 *
 * @class Ellipse
 * @constructor
 * @param x {Number} The X coord of the upper-left corner of the framing rectangle of this ellipse
 * @param y {Number} The Y coord of the upper-left corner of the framing rectangle of this ellipse
 * @param width {Number} The overall width of this ellipse
 * @param height {Number} The overall height of this ellipse
 */
PIXI.Ellipse = function(x, y, width, height)
{
    /**
     * @property x
     * @type Number
     * @default 0
     */
    this.x = x || 0;

    /**
     * @property y
     * @type Number
     * @default 0
     */
    this.y = y || 0;

    /**
     * @property width
     * @type Number
     * @default 0
     */
    this.width = width || 0;

    /**
     * @property height
     * @type Number
     * @default 0
     */
    this.height = height || 0;
}

/**
 * Creates a clone of this Ellipse instance
 *
 * @method clone
 * @return {Ellipse} a copy of the ellipse
 */
PIXI.Ellipse.prototype.clone = function()
{
    return new PIXI.Ellipse(this.x, this.y, this.width, this.height);
}

/**
 * Checks if the x, and y coords passed to this function are contained within this ellipse
 *
 * @method contains
 * @param x {Number} The X coord of the point to test
 * @param y {Number} The Y coord of the point to test
 * @return {Boolean} if the x/y coords are within this ellipse
 */
PIXI.Ellipse.prototype.contains = function(x, y)
{
    if(this.width <= 0 || this.height <= 0)
        return false;

    //normalize the coords to an ellipse with center 0,0
    //and a radius of 0.5
    var normx = ((x - this.x) / this.width) - 0.5,
        normy = ((y - this.y) / this.height) - 0.5;

    normx *= normx;
    normy *= normy;

    return (normx + normy < 0.25);
}

PIXI.Ellipse.getBounds = function()
{
    return new PIXI.Rectangle(this.x, this.y, this.width, this.height);
}

// constructor
PIXI.Ellipse.prototype.constructor = PIXI.Ellipse;



/*
 * A lighter version of the rad gl-matrix created by Brandon Jones, Colin MacKenzie IV
 * you both rock!
 */

function determineMatrixArrayType() {
    PIXI.Matrix = (typeof Float32Array !== 'undefined') ? Float32Array : Array;
    return PIXI.Matrix;
}

determineMatrixArrayType();

PIXI.mat3 = {};

PIXI.mat3.create = function()
{
	var matrix = new PIXI.Matrix(9);

	matrix[0] = 1;
	matrix[1] = 0;
	matrix[2] = 0;
	matrix[3] = 0;
	matrix[4] = 1;
	matrix[5] = 0;
	matrix[6] = 0;
	matrix[7] = 0;
	matrix[8] = 1;

	return matrix;
}


PIXI.mat3.identity = function(matrix)
{
	matrix[0] = 1;
	matrix[1] = 0;
	matrix[2] = 0;
	matrix[3] = 0;
	matrix[4] = 1;
	matrix[5] = 0;
	matrix[6] = 0;
	matrix[7] = 0;
	matrix[8] = 1;

	return matrix;
}


PIXI.mat4 = {};

PIXI.mat4.create = function()
{
	var matrix = new PIXI.Matrix(16);

	matrix[0] = 1;
	matrix[1] = 0;
	matrix[2] = 0;
	matrix[3] = 0;
	matrix[4] = 0;
	matrix[5] = 1;
	matrix[6] = 0;
	matrix[7] = 0;
	matrix[8] = 0;
	matrix[9] = 0;
	matrix[10] = 1;
	matrix[11] = 0;
	matrix[12] = 0;
	matrix[13] = 0;
	matrix[14] = 0;
	matrix[15] = 1;

	return matrix;
}

PIXI.mat3.multiply = function (mat, mat2, dest)
{
	if (!dest) { dest = mat; }

	// Cache the matrix values (makes for huge speed increases!)
	var a00 = mat[0], a01 = mat[1], a02 = mat[2],
	    a10 = mat[3], a11 = mat[4], a12 = mat[5],
	    a20 = mat[6], a21 = mat[7], a22 = mat[8],

	    b00 = mat2[0], b01 = mat2[1], b02 = mat2[2],
	    b10 = mat2[3], b11 = mat2[4], b12 = mat2[5],
	    b20 = mat2[6], b21 = mat2[7], b22 = mat2[8];

	dest[0] = b00 * a00 + b01 * a10 + b02 * a20;
	dest[1] = b00 * a01 + b01 * a11 + b02 * a21;
	dest[2] = b00 * a02 + b01 * a12 + b02 * a22;

	dest[3] = b10 * a00 + b11 * a10 + b12 * a20;
	dest[4] = b10 * a01 + b11 * a11 + b12 * a21;
	dest[5] = b10 * a02 + b11 * a12 + b12 * a22;

	dest[6] = b20 * a00 + b21 * a10 + b22 * a20;
	dest[7] = b20 * a01 + b21 * a11 + b22 * a21;
	dest[8] = b20 * a02 + b21 * a12 + b22 * a22;

	return dest;
}

PIXI.mat3.clone = function(mat)
{
	var matrix = new PIXI.Matrix(9);

	matrix[0] = mat[0];
	matrix[1] = mat[1];
	matrix[2] = mat[2];
	matrix[3] = mat[3];
	matrix[4] = mat[4];
	matrix[5] = mat[5];
	matrix[6] = mat[6];
	matrix[7] = mat[7];
	matrix[8] = mat[8];

	return matrix;
}

PIXI.mat3.transpose = function (mat, dest)
{
 	// If we are transposing ourselves we can skip a few steps but have to cache some values
    if (!dest || mat === dest) {
        var a01 = mat[1], a02 = mat[2],
            a12 = mat[5];

        mat[1] = mat[3];
        mat[2] = mat[6];
        mat[3] = a01;
        mat[5] = mat[7];
        mat[6] = a02;
        mat[7] = a12;
        return mat;
    }

    dest[0] = mat[0];
    dest[1] = mat[3];
    dest[2] = mat[6];
    dest[3] = mat[1];
    dest[4] = mat[4];
    dest[5] = mat[7];
    dest[6] = mat[2];
    dest[7] = mat[5];
    dest[8] = mat[8];
    return dest;
}

PIXI.mat3.toMat4 = function (mat, dest)
{
	if (!dest) { dest = PIXI.mat4.create(); }

	dest[15] = 1;
	dest[14] = 0;
	dest[13] = 0;
	dest[12] = 0;

	dest[11] = 0;
	dest[10] = mat[8];
	dest[9] = mat[7];
	dest[8] = mat[6];

	dest[7] = 0;
	dest[6] = mat[5];
	dest[5] = mat[4];
	dest[4] = mat[3];

	dest[3] = 0;
	dest[2] = mat[2];
	dest[1] = mat[1];
	dest[0] = mat[0];

	return dest;
}


/////


PIXI.mat4.create = function()
{
	var matrix = new PIXI.Matrix(16);

	matrix[0] = 1;
	matrix[1] = 0;
	matrix[2] = 0;
	matrix[3] = 0;
	matrix[4] = 0;
	matrix[5] = 1;
	matrix[6] = 0;
	matrix[7] = 0;
	matrix[8] = 0;
	matrix[9] = 0;
	matrix[10] = 1;
	matrix[11] = 0;
	matrix[12] = 0;
	matrix[13] = 0;
	matrix[14] = 0;
	matrix[15] = 1;

	return matrix;
}

PIXI.mat4.transpose = function (mat, dest)
{
	// If we are transposing ourselves we can skip a few steps but have to cache some values
	if (!dest || mat === dest)
	{
	    var a01 = mat[1], a02 = mat[2], a03 = mat[3],
	        a12 = mat[6], a13 = mat[7],
	        a23 = mat[11];

	    mat[1] = mat[4];
	    mat[2] = mat[8];
	    mat[3] = mat[12];
	    mat[4] = a01;
	    mat[6] = mat[9];
	    mat[7] = mat[13];
	    mat[8] = a02;
	    mat[9] = a12;
	    mat[11] = mat[14];
	    mat[12] = a03;
	    mat[13] = a13;
	    mat[14] = a23;
	    return mat;
	}

	dest[0] = mat[0];
	dest[1] = mat[4];
	dest[2] = mat[8];
	dest[3] = mat[12];
	dest[4] = mat[1];
	dest[5] = mat[5];
	dest[6] = mat[9];
	dest[7] = mat[13];
	dest[8] = mat[2];
	dest[9] = mat[6];
	dest[10] = mat[10];
	dest[11] = mat[14];
	dest[12] = mat[3];
	dest[13] = mat[7];
	dest[14] = mat[11];
	dest[15] = mat[15];
	return dest;
}

PIXI.mat4.multiply = function (mat, mat2, dest)
{
	if (!dest) { dest = mat; }

	// Cache the matrix values (makes for huge speed increases!)
	var a00 = mat[ 0], a01 = mat[ 1], a02 = mat[ 2], a03 = mat[3];
	var a10 = mat[ 4], a11 = mat[ 5], a12 = mat[ 6], a13 = mat[7];
	var a20 = mat[ 8], a21 = mat[ 9], a22 = mat[10], a23 = mat[11];
	var a30 = mat[12], a31 = mat[13], a32 = mat[14], a33 = mat[15];

	// Cache only the current line of the second matrix
    var b0  = mat2[0], b1 = mat2[1], b2 = mat2[2], b3 = mat2[3];
    dest[0] = b0*a00 + b1*a10 + b2*a20 + b3*a30;
    dest[1] = b0*a01 + b1*a11 + b2*a21 + b3*a31;
    dest[2] = b0*a02 + b1*a12 + b2*a22 + b3*a32;
    dest[3] = b0*a03 + b1*a13 + b2*a23 + b3*a33;

    b0 = mat2[4];
    b1 = mat2[5];
    b2 = mat2[6];
    b3 = mat2[7];
    dest[4] = b0*a00 + b1*a10 + b2*a20 + b3*a30;
    dest[5] = b0*a01 + b1*a11 + b2*a21 + b3*a31;
    dest[6] = b0*a02 + b1*a12 + b2*a22 + b3*a32;
    dest[7] = b0*a03 + b1*a13 + b2*a23 + b3*a33;

    b0 = mat2[8];
    b1 = mat2[9];
    b2 = mat2[10];
    b3 = mat2[11];
    dest[8] = b0*a00 + b1*a10 + b2*a20 + b3*a30;
    dest[9] = b0*a01 + b1*a11 + b2*a21 + b3*a31;
    dest[10] = b0*a02 + b1*a12 + b2*a22 + b3*a32;
    dest[11] = b0*a03 + b1*a13 + b2*a23 + b3*a33;

    b0 = mat2[12];
    b1 = mat2[13];
    b2 = mat2[14];
    b3 = mat2[15];
    dest[12] = b0*a00 + b1*a10 + b2*a20 + b3*a30;
    dest[13] = b0*a01 + b1*a11 + b2*a21 + b3*a31;
    dest[14] = b0*a02 + b1*a12 + b2*a22 + b3*a32;
    dest[15] = b0*a03 + b1*a13 + b2*a23 + b3*a33;

    return dest;
}

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

/**
 * The base class for all objects that are rendered on the screen.
 *
 * @class DisplayObject
 * @constructor
 */
PIXI.DisplayObject = function()
{
	this.last = this;
	this.first = this;
	/**
	 * The coordinate of the object relative to the local coordinates of the parent.
	 *
	 * @property position
	 * @type Point
	 */
	this.position = new PIXI.Point();

	/**
	 * The scale factor of the object.
	 *
	 * @property scale
	 * @type Point
	 */
	this.scale = new PIXI.Point(1,1);//{x:1, y:1};

	/**
	 * The pivot point of the displayObject that it rotates around
	 *
	 * @property pivot
	 * @type Point
	 */
	this.pivot = new PIXI.Point(0,0);

	/**
	 * The rotation of the object in radians.
	 *
	 * @property rotation
	 * @type Number
	 */
	this.rotation = 0;

	/**
	 * The opacity of the object.
	 *
	 * @property alpha
	 * @type Number
	 */	
	this.alpha = 1;

	/**
	 * The visibility of the object.
	 *
	 * @property visible
	 * @type Boolean
	 */	
	this.visible = true;

	/**
	 * This is the defined area that will pick up mouse / touch events. It is null by default.
	 * Setting it is a neat way of optimising the hitTest function that the interactionManager will use (as it will not need to hit test all the children)
	 *
	 * @property hitArea
	 * @type Rectangle|Circle|Ellipse|Polygon
	 */	
	this.hitArea = null;

	/**
	 * This is used to indicate if the displayObject should display a mouse hand cursor on rollover
	 *
	 * @property buttonMode
	 * @type Boolean
	 */
	this.buttonMode = false;

	/**
	 * Can this object be rendered
	 *
	 * @property renderable
	 * @type Boolean
	 */
	this.renderable = false;

	/**
	 * [read-only] The display object container that contains this display object.
	 *
	 * @property parent
	 * @type DisplayObjectContainer
	 * @readOnly
	 */	
	this.parent = null;

	/**
	 * [read-only] The stage the display object is connected to, or undefined if it is not connected to the stage.
	 *
	 * @property stage
	 * @type Stage
	 * @readOnly
	 */	
	this.stage = null;

	/**
	 * [read-only] The multiplied alpha of the displayobject
	 *
	 * @property worldAlpha
	 * @type Number
	 * @readOnly
	 */
	this.worldAlpha = 1;

	/**
	 * [read-only] Whether or not the object is interactive, do not toggle directly! use the `interactive` property
	 *
	 * @property _interactive
	 * @type Boolean
	 * @readOnly
	 * @private
	 */
	this._interactive = false;

	/**
	 * [read-only] Current transform of the object based on world (parent) factors
	 *
	 * @property worldTransform
	 * @type Mat3
	 * @readOnly
	 * @private
	 */
	this.worldTransform = PIXI.mat3.create()//mat3.identity();

	/**
	 * [read-only] Current transform of the object locally
	 *
	 * @property localTransform
	 * @type Mat3
	 * @readOnly
	 * @private
	 */
	this.localTransform = PIXI.mat3.create()//mat3.identity();

	/**
	 * [NYI] Unkown
	 *
	 * @property color
	 * @type Array<>
	 * @private
	 */
	this.color = [];

	/**
	 * [NYI] Holds whether or not this object is dynamic, for rendering optimization
	 *
	 * @property dynamic
	 * @type Boolean
	 * @private
	 */
	this.dynamic = true;

	// chach that puppy!
	this._sr = 0;
	this._cr = 1;


	this.filterArea = new PIXI.Rectangle(0,0,1,1);
	
	/*
	 * MOUSE Callbacks
	 */

	/**
	 * A callback that is used when the users clicks on the displayObject with their mouse
	 * @method click
	 * @param interactionData {InteractionData}
	 */

	/**
	 * A callback that is used when the user clicks the mouse down over the sprite
	 * @method mousedown
	 * @param interactionData {InteractionData}
	 */

	/**
	 * A callback that is used when the user releases the mouse that was over the displayObject
	 * for this callback to be fired the mouse must have been pressed down over the displayObject
	 * @method mouseup
	 * @param interactionData {InteractionData}
	 */

	/**
	 * A callback that is used when the user releases the mouse that was over the displayObject but is no longer over the displayObject
	 * for this callback to be fired, The touch must have started over the displayObject
	 * @method mouseupoutside
	 * @param interactionData {InteractionData}
	 */

	/**
	 * A callback that is used when the users mouse rolls over the displayObject
	 * @method mouseover
	 * @param interactionData {InteractionData}
	 */

	/**
	 * A callback that is used when the users mouse leaves the displayObject
	 * @method mouseout
	 * @param interactionData {InteractionData}
	 */


	/*
	 * TOUCH Callbacks
	 */

	/**
	 * A callback that is used when the users taps on the sprite with their finger
	 * basically a touch version of click
	 * @method tap
	 * @param interactionData {InteractionData}
	 */

	/**
	 * A callback that is used when the user touch's over the displayObject
	 * @method touchstart
	 * @param interactionData {InteractionData}
	 */

	/**
	 * A callback that is used when the user releases a touch over the displayObject
	 * @method touchend
	 * @param interactionData {InteractionData}
	 */

	/**
	 * A callback that is used when the user releases the touch that was over the displayObject
	 * for this callback to be fired, The touch must have started over the sprite
	 * @method touchendoutside
	 * @param interactionData {InteractionData}
	 */
}

// constructor
PIXI.DisplayObject.prototype.constructor = PIXI.DisplayObject;

/**
 * [Deprecated] Indicates if the sprite will have touch and mouse interactivity. It is false by default
 * Instead of using this function you can now simply set the interactive property to true or false
 *
 * @method setInteractive
 * @param interactive {Boolean}
 * @deprecated Simply set the `interactive` property directly
 */
PIXI.DisplayObject.prototype.setInteractive = function(interactive)
{
	this.interactive = interactive;
}

/**
 * Indicates if the sprite will have touch and mouse interactivity. It is false by default
 *
 * @property interactive
 * @type Boolean
 * @default false
 */
Object.defineProperty(PIXI.DisplayObject.prototype, 'interactive', {
    get: function() {
        return this._interactive;
    },
    set: function(value) {
    	this._interactive = value;
    	
    	// TODO more to be done here..
		// need to sort out a re-crawl!
		if(this.stage)this.stage.dirty = true;
    }
});

/**
 * Sets a mask for the displayObject. A mask is an object that limits the visibility of an object to the shape of the mask applied to it.
 * In PIXI a regular mask must be a PIXI.Ggraphics object. This allows for much faster masking in canvas as it utilises shape clipping.
 * To remove a mask, set this property to null.
 *
 * @property mask
 * @type Graphics
 */
Object.defineProperty(PIXI.DisplayObject.prototype, 'mask', {
    get: function() {
        return this._mask;
    },
    set: function(value) {
    	
    	
        if(value)
        {
        	if(this._mask)
	    	{
	    		value.start = this._mask.start;
	    		value.end = this._mask.end;
	    	}
    		else
    		{
		        this.addFilter(value);
		        value.renderable = false;
    		}
        }
        else
        {
        	 this.removeFilter(this._mask);
			 this._mask.renderable = true;
        }
        
        this._mask = value;
    }
});

/**
 * Sets the filters for the displayObject. 
 * * IMPORTANT: This is a webGL only feature and will be ignored by the canvas renderer.
 * To remove filters simply set this property to 'null'
 * @property filters
 * @type Array An array of filters
 */
Object.defineProperty(PIXI.DisplayObject.prototype, 'filters', {
    get: function() {
        return this._filters;
    },
    set: function(value) {
    	
        if(value)
        {
        	if(this._filters)this.removeFilter(this._filters);
	        this.addFilter(value);

		    // now put all the passes in one place..
	        var passes = [];
	        for (var i = 0; i < value.length; i++) 
	        {
	        	var filterPasses = value[i].passes;
	        	for (var j = 0; j < filterPasses.length; j++) 
	        	{
	        		passes.push(filterPasses[j]);
	        	};
	        };

	        value.start.filterPasses = passes;
        }
        else
        {
        	if(this._filters)this.removeFilter(this._filters);
        }
        
        this._filters = value;

       

        
    }
});

/*
 * Adds a filter to this displayObject
 *
 * @method addFilter
 * @param mask {Graphics} the graphics object to use as a filter
 * @private
 */
PIXI.DisplayObject.prototype.addFilter = function(data)
{
	//if(this.filter)return;
	//this.filter = true;
//	data[0].target = this;
	

	// insert a filter block..
	// TODO Onject pool thease bad boys..
	var start = new PIXI.FilterBlock();
	var end = new PIXI.FilterBlock();
	
	data.start = start;
	data.end = end;
	
	start.data = data;
	end.data = data;
	
	start.first = start.last =  this;
	end.first = end.last = this;
	
	start.open = true;
	
	start.target = this;
	
	/*
	 * insert start
	 */
	
	var childFirst = start
	var childLast = start
	var nextObject;
	var previousObject;
		
	previousObject = this.first._iPrev;
	
	if(previousObject)
	{
		nextObject = previousObject._iNext;
		childFirst._iPrev = previousObject;
		previousObject._iNext = childFirst;		
	}
	else
	{
		nextObject = this;
	}	
	
	if(nextObject)
	{
		nextObject._iPrev = childLast;
		childLast._iNext = nextObject;
	}
	
	
	// now insert the end filter block..
	
	/*
	 * insert end filter
	 */
	var childFirst = end
	var childLast = end
	var nextObject = null;
	var previousObject = null;
		
	previousObject = this.last;
	nextObject = previousObject._iNext;
	
	if(nextObject)
	{
		nextObject._iPrev = childLast;
		childLast._iNext = nextObject;
	}
	
	childFirst._iPrev = previousObject;
	previousObject._iNext = childFirst;	
	
	var updateLast = this;
	
	var prevLast = this.last;
	while(updateLast)
	{
		if(updateLast.last == prevLast)
		{
			updateLast.last = end;
		}
		updateLast = updateLast.parent;
	}
	
	this.first = start;
	
	// if webGL...
	if(this.__renderGroup)
	{
		this.__renderGroup.addFilterBlocks(start, end);
	}
	
}

/*
 * Removes the filter to this displayObject
 *
 * @method removeFilter
 * @private
 */
PIXI.DisplayObject.prototype.removeFilter = function(data)
{
	//if(!this.filter)return;
	//this.filter = false;
	console.log("YUOIO")
	// modify the list..
	var startBlock = data.start;
	
	
	var nextObject = startBlock._iNext;
	var previousObject = startBlock._iPrev;
		
	if(nextObject)nextObject._iPrev = previousObject;
	if(previousObject)previousObject._iNext = nextObject;		
	
	this.first = startBlock._iNext;
	
	// remove the end filter
	var lastBlock = data.end;
	
	var nextObject = lastBlock._iNext;
	var previousObject = lastBlock._iPrev;
		
	if(nextObject)nextObject._iPrev = previousObject;
	previousObject._iNext = nextObject;		
	
	// this is always true too!
	var tempLast =  lastBlock._iPrev;	
	// need to make sure the parents last is updated too
	var updateLast = this;
	while(updateLast.last == lastBlock)
	{
		updateLast.last = tempLast;
		updateLast = updateLast.parent;
		if(!updateLast)break;
	}
	
	// if webGL...
	if(this.__renderGroup)
	{
		this.__renderGroup.removeFilterBlocks(startBlock, lastBlock);
	}
}

/*
 * Updates the object transform for rendering
 *
 * @method updateTransform
 * @private
 */
PIXI.DisplayObject.prototype.updateTransform = function()
{
	// TODO OPTIMIZE THIS!! with dirty
	if(this.rotation !== this.rotationCache)
	{
		this.rotationCache = this.rotation;
		this._sr =  Math.sin(this.rotation);
		this._cr =  Math.cos(this.rotation);
	}	
	
	var localTransform = this.localTransform;
	var parentTransform = this.parent.worldTransform;
	var worldTransform = this.worldTransform;
	//console.log(localTransform)
	localTransform[0] = this._cr * this.scale.x;
	localTransform[1] = -this._sr * this.scale.y
	localTransform[3] = this._sr * this.scale.x;
	localTransform[4] = this._cr * this.scale.y;
	
	// TODO --> do we even need a local matrix???
	
	var px = this.pivot.x;
	var py = this.pivot.y;
   	
    // Cache the matrix values (makes for huge speed increases!)
    var a00 = localTransform[0], a01 = localTransform[1], a02 = this.position.x - localTransform[0] * px - py * localTransform[1],
        a10 = localTransform[3], a11 = localTransform[4], a12 = this.position.y - localTransform[4] * py - px * localTransform[3],

        b00 = parentTransform[0], b01 = parentTransform[1], b02 = parentTransform[2],
        b10 = parentTransform[3], b11 = parentTransform[4], b12 = parentTransform[5];

	localTransform[2] = a02
	localTransform[5] = a12
	
    worldTransform[0] = b00 * a00 + b01 * a10;
    worldTransform[1] = b00 * a01 + b01 * a11;
    worldTransform[2] = b00 * a02 + b01 * a12 + b02;

    worldTransform[3] = b10 * a00 + b11 * a10;
    worldTransform[4] = b10 * a01 + b11 * a11;
    worldTransform[5] = b10 * a02 + b11 * a12 + b12;

	// because we are using affine transformation, we can optimise the matrix concatenation process.. wooo!
	// mat3.multiply(this.localTransform, this.parent.worldTransform, this.worldTransform);
	this.worldAlpha = this.alpha * this.parent.worldAlpha;
	
	this.vcount = PIXI.visibleCount;

}

PIXI.visibleCount = 0;
/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */


/**
 * A DisplayObjectContainer represents a collection of display objects.
 * It is the base class of all display objects that act as a container for other objects.
 *
 * @class DisplayObjectContainer 
 * @extends DisplayObject
 * @constructor
 */
PIXI.DisplayObjectContainer = function()
{
	PIXI.DisplayObject.call( this );
	
	/**
	 * [read-only] The of children of this container.
	 *
	 * @property children
	 * @type Array<DisplayObject>
	 * @readOnly
	 */	
	this.children = [];
}

// constructor
PIXI.DisplayObjectContainer.prototype = Object.create( PIXI.DisplayObject.prototype );
PIXI.DisplayObjectContainer.prototype.constructor = PIXI.DisplayObjectContainer;

/**
 * Adds a child to the container.
 *
 * @method addChild
 * @param child {DisplayObject} The DisplayObject to add to the container
 */
PIXI.DisplayObjectContainer.prototype.addChild = function(child)
{
	if(child.parent != undefined)
	{
		
		//// COULD BE THIS???
		child.parent.removeChild(child);
	//	return;
	}

	child.parent = this;
	
	this.children.push(child);	
	
	// update the stage refference..
	
	if(this.stage)
	{
		var tmpChild = child;
		do
		{
			if(tmpChild.interactive)this.stage.dirty = true;
			tmpChild.stage = this.stage;
			tmpChild = tmpChild._iNext;
		}	
		while(tmpChild)
	}
	
	// LINKED LIST //
	
	// modify the list..
	var childFirst = child.first
	var childLast = child.last;
	var nextObject;
	var previousObject;
	
	// this could be wrong if there is a filter??
	if(this._filters || this._mask)
	{
		previousObject =  this.last._iPrev;
	}
	else
	{
		previousObject = this.last;
	}

	nextObject = previousObject._iNext;
	
	// always true in this case
	// need to make sure the parents last is updated too
	var updateLast = this;
	var prevLast = previousObject;
	
	while(updateLast)
	{
		if(updateLast.last == prevLast)
		{
			updateLast.last = child.last;
		}
		updateLast = updateLast.parent;
	}
	
	if(nextObject)
	{
		nextObject._iPrev = childLast;
		childLast._iNext = nextObject;
	}
	
	childFirst._iPrev = previousObject;
	previousObject._iNext = childFirst;		

	// need to remove any render groups..
	if(this.__renderGroup)
	{
		// being used by a renderTexture.. if it exists then it must be from a render texture;
		if(child.__renderGroup)child.__renderGroup.removeDisplayObjectAndChildren(child);
		// add them to the new render group..
		this.__renderGroup.addDisplayObjectAndChildren(child);
	}
	
}

/**
 * Adds a child to the container at a specified index. If the index is out of bounds an error will be thrown
 *
 * @method addChildAt
 * @param child {DisplayObject} The child to add
 * @param index {Number} The index to place the child in
 */
PIXI.DisplayObjectContainer.prototype.addChildAt = function(child, index)
{
	if(index >= 0 && index <= this.children.length)
	{
		if(child.parent != undefined)
		{
			child.parent.removeChild(child);
		}
		child.parent = this;
		
		if(this.stage)
		{
			var tmpChild = child;
			do
			{
				if(tmpChild.interactive)this.stage.dirty = true;
				tmpChild.stage = this.stage;
				tmpChild = tmpChild._iNext;
			}
			while(tmpChild)
		}
		
		// modify the list..
		var childFirst = child.first;
		var childLast = child.last;
		var nextObject;
		var previousObject;
		
		if(index == this.children.length)
		{
			previousObject =  this.last;
			var updateLast = this;
			var prevLast = this.last;
			while(updateLast)
			{
				if(updateLast.last == prevLast)
				{
					updateLast.last = child.last;
				}
				updateLast = updateLast.parent;
			}
		}
		else if(index == 0)
		{
			previousObject = this;
		}
		else
		{
			previousObject = this.children[index-1].last;
		}
		
		nextObject = previousObject._iNext;
		
		// always true in this case
		if(nextObject)
		{
			nextObject._iPrev = childLast;
			childLast._iNext = nextObject;
		}
		
		childFirst._iPrev = previousObject;
		previousObject._iNext = childFirst;		

		this.children.splice(index, 0, child);
		// need to remove any render groups..
		if(this.__renderGroup)
		{
			// being used by a renderTexture.. if it exists then it must be from a render texture;
			if(child.__renderGroup)child.__renderGroup.removeDisplayObjectAndChildren(child);
			// add them to the new render group..
			this.__renderGroup.addDisplayObjectAndChildren(child);
		}
		
	}
	else
	{
		throw new Error(child + " The index "+ index +" supplied is out of bounds " + this.children.length);
	}
}

/**
 * [NYI] Swaps the depth of 2 displayObjects
 *
 * @method swapChildren
 * @param child {DisplayObject}
 * @param child2 {DisplayObject}
 * @private
 */
PIXI.DisplayObjectContainer.prototype.swapChildren = function(child, child2)
{
	/*
	 * this funtion needs to be recoded.. 
	 * can be done a lot faster..
	 */
	return;
	
	// need to fix this function :/
	/*
	// TODO I already know this??
	var index = this.children.indexOf( child );
	var index2 = this.children.indexOf( child2 );
	
	if ( index !== -1 && index2 !== -1 ) 
	{
		// cool
		
		/*
		if(this.stage)
		{
			// this is to satisfy the webGL batching..
			// TODO sure there is a nicer way to achieve this!
			this.stage.__removeChild(child);
			this.stage.__removeChild(child2);
			
			this.stage.__addChild(child);
			this.stage.__addChild(child2);
		}
		
		// swap the positions..
		this.children[index] = child2;
		this.children[index2] = child;
		
	}
	else
	{
		throw new Error(child + " Both the supplied DisplayObjects must be a child of the caller " + this);
	}*/
}

/**
 * Returns the Child at the specified index
 *
 * @method getChildAt
 * @param index {Number} The index to get the child from
 */
PIXI.DisplayObjectContainer.prototype.getChildAt = function(index)
{
	if(index >= 0 && index < this.children.length)
	{
		return this.children[index];
	}
	else
	{
		throw new Error(child + " Both the supplied DisplayObjects must be a child of the caller " + this);
	}
}

/**
 * Removes a child from the container.
 *
 * @method removeChild
 * @param child {DisplayObject} The DisplayObject to remove
 */
PIXI.DisplayObjectContainer.prototype.removeChild = function(child)
{
	var index = this.children.indexOf( child );
	if ( index !== -1 ) 
	{
		// unlink //
		// modify the list..
		var childFirst = child.first;
		var childLast = child.last;
		
		var nextObject = childLast._iNext;
		var previousObject = childFirst._iPrev;
			
		if(nextObject)nextObject._iPrev = previousObject;
		previousObject._iNext = nextObject;		
		
		if(this.last == childLast)
		{
			var tempLast =  childFirst._iPrev;	
			// need to make sure the parents last is updated too
			var updateLast = this;
			while(updateLast.last == childLast.last)
			{
				updateLast.last = tempLast;
				updateLast = updateLast.parent;
				if(!updateLast)break;
			}
		}
		
		childLast._iNext = null;
		childFirst._iPrev = null;
		 
		// update the stage reference..
		if(this.stage)
		{
			var tmpChild = child;
			do
			{
				if(tmpChild.interactive)this.stage.dirty = true;
				tmpChild.stage = null;
				tmpChild = tmpChild._iNext;
			}	
			while(tmpChild)
		}
	
		// webGL trim
		if(child.__renderGroup)
		{
			child.__renderGroup.removeDisplayObjectAndChildren(child);
		}
		
		child.parent = undefined;
		this.children.splice( index, 1 );
	}
	else
	{
		throw new Error(child + " The supplied DisplayObject must be a child of the caller " + this);
	}
}

/*
 * Updates the container's children's transform for rendering
 *
 * @method updateTransform
 * @private
 */
PIXI.DisplayObjectContainer.prototype.updateTransform = function()
{
	if(!this.visible)return;
	
	PIXI.DisplayObject.prototype.updateTransform.call( this );
	
	for(var i=0,j=this.children.length; i<j; i++)
	{
		this.children[i].updateTransform();	
	}
}
/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

PIXI.blendModes = {};
PIXI.blendModes.NORMAL = 0;
PIXI.blendModes.SCREEN = 1;


/**
 * The SPrite object is the base for all textured objects that are rendered to the screen
 *
 * @class Sprite
 * @extends DisplayObjectContainer
 * @constructor
 * @param texture {Texture} The texture for this sprite
 * @type String
 */
PIXI.Sprite = function(texture)
{
	PIXI.DisplayObjectContainer.call( this );

	/**
	 * The anchor sets the origin point of the texture.
	 * The default is 0,0 this means the textures origin is the top left 
	 * Setting than anchor to 0.5,0.5 means the textures origin is centered
	 * Setting the anchor to 1,1 would mean the textures origin points will be the bottom right
	 *
     * @property anchor
     * @type Point
     */
	this.anchor = new PIXI.Point();

	/**
	 * The texture that the sprite is using
	 *
	 * @property texture
	 * @type Texture
	 */
	this.texture = texture;

	/**
	 * The blend mode of sprite.
	 * currently supports PIXI.blendModes.NORMAL and PIXI.blendModes.SCREEN
	 *
	 * @property blendMode
	 * @type Number
	 */
	this.blendMode = PIXI.blendModes.NORMAL;

	/**
	 * The width of the sprite (this is initially set by the texture)
	 *
	 * @property _width
	 * @type Number
	 * @private
	 */
	this._width = 0;

	/**
	 * The height of the sprite (this is initially set by the texture)
	 *
	 * @property _height
	 * @type Number
	 * @private
	 */
	this._height = 0;

	if(texture.baseTexture.hasLoaded)
	{
		this.updateFrame = true;
	}
	else
	{
		this.onTextureUpdateBind = this.onTextureUpdate.bind(this);
		this.texture.addEventListener( 'update', this.onTextureUpdateBind );
	}

	this.renderable = true;
}

// constructor
PIXI.Sprite.prototype = Object.create( PIXI.DisplayObjectContainer.prototype );
PIXI.Sprite.prototype.constructor = PIXI.Sprite;

/**
 * The width of the sprite, setting this will actually modify the scale to acheive the value set
 *
 * @property width
 * @type Number
 */
Object.defineProperty(PIXI.Sprite.prototype, 'width', {
    get: function() {
        return this.scale.x * this.texture.frame.width;
    },
    set: function(value) {
    	this.scale.x = value / this.texture.frame.width
        this._width = value;
    }
});

/**
 * The height of the sprite, setting this will actually modify the scale to acheive the value set
 *
 * @property height
 * @type Number
 */
Object.defineProperty(PIXI.Sprite.prototype, 'height', {
    get: function() {
        return  this.scale.y * this.texture.frame.height;
    },
    set: function(value) {
    	this.scale.y = value / this.texture.frame.height
        this._height = value;
    }
});

/**
 * Sets the texture of the sprite
 *
 * @method setTexture
 * @param texture {Texture} The PIXI texture that is displayed by the sprite
 */
PIXI.Sprite.prototype.setTexture = function(texture)
{
	// stop current texture;
	if(this.texture.baseTexture != texture.baseTexture)
	{
		this.textureChange = true;	
		this.texture = texture;
		
		if(this.__renderGroup)
		{
			this.__renderGroup.updateTexture(this);
		}
	}
	else
	{
		this.texture = texture;
	}
	
	this.updateFrame = true;
}

/**
 * When the texture is updated, this event will fire to update the scale and frame
 *
 * @method onTextureUpdate
 * @param event
 * @private
 */
PIXI.Sprite.prototype.onTextureUpdate = function(event)
{
	//this.texture.removeEventListener( 'update', this.onTextureUpdateBind );
	
	// so if _width is 0 then width was not set..
	if(this._width)this.scale.x = this._width / this.texture.frame.width;
	if(this._height)this.scale.y = this._height / this.texture.frame.height;
	
	this.updateFrame = true;
}

// some helper functions..

/**
 * 
 * Helper function that creates a sprite that will contain a texture from the TextureCache based on the frameId
 * The frame ids are created when a Texture packer file has been loaded
 *
 * @method fromFrame
 * @static
 * @param frameId {String} The frame Id of the texture in the cache
 * @return {Sprite} A new Sprite using a texture from the texture cache matching the frameId
 */
PIXI.Sprite.fromFrame = function(frameId)
{
	var texture = PIXI.TextureCache[frameId];
	if(!texture)throw new Error("The frameId '"+ frameId +"' does not exist in the texture cache" + this);
	return new PIXI.Sprite(texture);
}

/**
 * 
 * Helper function that creates a sprite that will contain a texture based on an image url
 * If the image is not in the texture cache it will be loaded
 *
 * @method fromImage
 * @static
 * @param imageId {String} The image url of the texture
 * @return {Sprite} A new Sprite using a texture from the texture cache matching the image id
 */
PIXI.Sprite.fromImage = function(imageId)
{
	var texture = PIXI.Texture.fromImage(imageId);
	return new PIXI.Sprite(texture);
}

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

/**
 * A MovieClip is a simple way to display an animation depicted by a list of textures.
 *
 * @class MovieClip
 * @extends Sprite
 * @constructor
 * @param textures {Array<Texture>} an array of {Texture} objects that make up the animation
 */
PIXI.MovieClip = function(textures)
{
	PIXI.Sprite.call(this, textures[0]);

	/**
	 * The array of textures that make up the animation
	 *
	 * @property textures
	 * @type Array
	 */
	this.textures = textures;

	/**
	 * The speed that the MovieClip will play at. Higher is faster, lower is slower
	 *
	 * @property animationSpeed
	 * @type Number
	 * @default 1
	 */
	this.animationSpeed = 1;

	/**
	 * Whether or not the movie clip repeats after playing.
	 *
	 * @property loop
	 * @type Boolean
	 * @default true
	 */
	this.loop = true;

	/**
	 * Function to call when a MovieClip finishes playing
	 *
	 * @property onComplete
	 * @type Function
	 */
	this.onComplete = null;

	/**
	 * [read-only] The index MovieClips current frame (this may not have to be a whole number)
	 *
	 * @property currentFrame
	 * @type Number
	 * @default 0
	 * @readOnly
	 */
	this.currentFrame = 0;

	/**
	 * [read-only] Indicates if the MovieClip is currently playing
	 *
	 * @property playing
	 * @type Boolean
	 * @readOnly
	 */
	this.playing = false;
}

// constructor
PIXI.MovieClip.prototype = Object.create( PIXI.Sprite.prototype );
PIXI.MovieClip.prototype.constructor = PIXI.MovieClip;

/**
* [read-only] totalFrames is the total number of frames in the MovieClip. This is the same as number of textures
* assigned to the MovieClip.
*
* @property totalFrames
* @type Number
* @default 0
* @readOnly
*/
Object.defineProperty( PIXI.MovieClip.prototype, 'totalFrames', {
	get: function() {

		return this.textures.length;
	}
});


/**
 * Stops the MovieClip
 *
 * @method stop
 */
PIXI.MovieClip.prototype.stop = function()
{
	this.playing = false;
}

/**
 * Plays the MovieClip
 *
 * @method play
 */
PIXI.MovieClip.prototype.play = function()
{
	this.playing = true;
}

/**
 * Stops the MovieClip and goes to a specific frame
 *
 * @method gotoAndStop
 * @param frameNumber {Number} frame index to stop at
 */
PIXI.MovieClip.prototype.gotoAndStop = function(frameNumber)
{
	this.playing = false;
	this.currentFrame = frameNumber;
	var round = (this.currentFrame + 0.5) | 0;
	this.setTexture(this.textures[round % this.textures.length]);
}

/**
 * Goes to a specific frame and begins playing the MovieClip
 *
 * @method gotoAndPlay
 * @param frameNumber {Number} frame index to start at
 */
PIXI.MovieClip.prototype.gotoAndPlay = function(frameNumber)
{
	this.currentFrame = frameNumber;
	this.playing = true;
}

/*
 * Updates the object transform for rendering
 *
 * @method updateTransform
 * @private
 */
PIXI.MovieClip.prototype.updateTransform = function()
{
	PIXI.Sprite.prototype.updateTransform.call(this);

	if(!this.playing)return;

	this.currentFrame += this.animationSpeed;

	var round = (this.currentFrame + 0.5) | 0;

	if(this.loop || round < this.textures.length)
	{
		this.setTexture(this.textures[round % this.textures.length]);
	}
	else if(round >= this.textures.length)
	{
		this.gotoAndStop(this.textures.length - 1);
		if(this.onComplete)
		{
			this.onComplete();
		}
	}
}
/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */



PIXI.FilterBlock = function()
{
	this.visible = true;
	this.renderable = true;
}
/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

/**
 * A Text Object will create a line(s) of text to split a line you can use "\n"
 *
 * @class Text
 * @extends Sprite
 * @constructor
 * @param text {String} The copy that you would like the text to display
 * @param [style] {Object} The style parameters
 * @param [style.font] {String} default "bold 20pt Arial" The style and size of the font
 * @param [style.fill="black"] {Object} A canvas fillstyle that will be used on the text eg "red", "#00FF00"
 * @param [style.align="left"] {String} An alignment of the multiline text ("left", "center" or "right")
 * @param [style.stroke] {String} A canvas fillstyle that will be used on the text stroke eg "blue", "#FCFF00"
 * @param [style.strokeThickness=0] {Number} A number that represents the thickness of the stroke. Default is 0 (no stroke)
 * @param [style.wordWrap=false] {Boolean} Indicates if word wrap should be used
 * @param [style.wordWrapWidth=100] {Number} The width at which text will wrap
 */
PIXI.Text = function(text, style)
{
    this.canvas = document.createElement("canvas");
    this.context = this.canvas.getContext("2d");
    PIXI.Sprite.call(this, PIXI.Texture.fromCanvas(this.canvas));

    this.setText(text);
    this.setStyle(style);

    this.updateText();
    this.dirty = false;
};

// constructor
PIXI.Text.prototype = Object.create(PIXI.Sprite.prototype);
PIXI.Text.prototype.constructor = PIXI.Text;

/**
 * Set the style of the text
 *
 * @method setStyle
 * @param [style] {Object} The style parameters
 * @param [style.font="bold 20pt Arial"] {String} The style and size of the font
 * @param [style.fill="black"] {Object} A canvas fillstyle that will be used on the text eg "red", "#00FF00"
 * @param [style.align="left"] {String} An alignment of the multiline text ("left", "center" or "right")
 * @param [style.stroke="black"] {String} A canvas fillstyle that will be used on the text stroke eg "blue", "#FCFF00"
 * @param [style.strokeThickness=0] {Number} A number that represents the thickness of the stroke. Default is 0 (no stroke)
 * @param [style.wordWrap=false] {Boolean} Indicates if word wrap should be used
 * @param [style.wordWrapWidth=100] {Number} The width at which text will wrap
 */
PIXI.Text.prototype.setStyle = function(style)
{
    style = style || {};
    style.font = style.font || "bold 20pt Arial";
    style.fill = style.fill || "black";
    style.align = style.align || "left";
    style.stroke = style.stroke || "black"; //provide a default, see: https://github.com/GoodBoyDigital/pixi.js/issues/136
    style.strokeThickness = style.strokeThickness || 0;
    style.wordWrap = style.wordWrap || false;
    style.wordWrapWidth = style.wordWrapWidth || 100;
    this.style = style;
    this.dirty = true;
};

/**
 * Set the copy for the text object. To split a line you can use "\n"
 *
 * @methos setText
 * @param {String} text The copy that you would like the text to display
 */
PIXI.Text.prototype.setText = function(text)
{
    this.text = text.toString() || " ";
    this.dirty = true;
};

/**
 * Renders text
 *
 * @method updateText
 * @private
 */
PIXI.Text.prototype.updateText = function()
{
	this.context.font = this.style.font;

	var outputText = this.text;

	// word wrap
	// preserve original text
	if(this.style.wordWrap)outputText = this.wordWrap(this.text);

	//split text into lines
	var lines = outputText.split(/(?:\r\n|\r|\n)/);

	//calculate text width
	var lineWidths = [];
	var maxLineWidth = 0;
	for (var i = 0; i < lines.length; i++)
	{
		var lineWidth = this.context.measureText(lines[i]).width;
		lineWidths[i] = lineWidth;
		maxLineWidth = Math.max(maxLineWidth, lineWidth);
	}
	this.canvas.width = maxLineWidth + this.style.strokeThickness;

	//calculate text height
	var lineHeight = this.determineFontHeight("font: " + this.style.font  + ";") + this.style.strokeThickness;
	this.canvas.height = lineHeight * lines.length;

	//set canvas text styles
	this.context.fillStyle = this.style.fill;
	this.context.font = this.style.font;

	this.context.strokeStyle = this.style.stroke;
	this.context.lineWidth = this.style.strokeThickness;

	this.context.textBaseline = "top";

	//draw lines line by line
	for (i = 0; i < lines.length; i++)
	{
		var linePosition = new PIXI.Point(this.style.strokeThickness / 2, this.style.strokeThickness / 2 + i * lineHeight);

		if(this.style.align == "right")
		{
			linePosition.x += maxLineWidth - lineWidths[i];
		}
		else if(this.style.align == "center")
		{
			linePosition.x += (maxLineWidth - lineWidths[i]) / 2;
		}

		if(this.style.stroke && this.style.strokeThickness)
		{
			this.context.strokeText(lines[i], linePosition.x, linePosition.y);
		}

		if(this.style.fill)
		{
			this.context.fillText(lines[i], linePosition.x, linePosition.y);
		}
	}

    this.updateTexture();
};

/**
 * Updates texture size based on canvas size
 *
 * @method updateTexture
 * @private
 */
PIXI.Text.prototype.updateTexture = function()
{
    this.texture.baseTexture.width = this.canvas.width;
    this.texture.baseTexture.height = this.canvas.height;
    this.texture.frame.width = this.canvas.width;
    this.texture.frame.height = this.canvas.height;

  	this._width = this.canvas.width;
    this._height = this.canvas.height;

    PIXI.texturesToUpdate.push(this.texture.baseTexture);
};

/**
 * Updates the transfor of this object
 *
 * @method updateTransform
 * @private
 */
PIXI.Text.prototype.updateTransform = function()
{
	if(this.dirty)
	{
		this.updateText();
		this.dirty = false;
	}

	PIXI.Sprite.prototype.updateTransform.call(this);
};

/*
 * http://stackoverflow.com/users/34441/ellisbben
 * great solution to the problem!
 *
 * @method determineFontHeight
 * @param fontStyle {Object}
 * @private
 */
PIXI.Text.prototype.determineFontHeight = function(fontStyle)
{
	// build a little reference dictionary so if the font style has been used return a
	// cached version...
	var result = PIXI.Text.heightCache[fontStyle];

	if(!result)
	{
		var body = document.getElementsByTagName("body")[0];
		var dummy = document.createElement("div");
		var dummyText = document.createTextNode("M");
		dummy.appendChild(dummyText);
		dummy.setAttribute("style", fontStyle + ';position:absolute;top:0;left:0');
		body.appendChild(dummy);

		result = dummy.offsetHeight;
		PIXI.Text.heightCache[fontStyle] = result;

		body.removeChild(dummy);
	}

	return result;
};

/**
 * Applies newlines to a string to have it optimally fit into the horizontal
 * bounds set by the Text object's wordWrapWidth property.
 *
 * @method wordWrap
 * @param text {String}
 * @private
 */
PIXI.Text.prototype.wordWrap = function(text)
{
	// Greedy wrapping algorithm that will wrap words as the line grows longer
	// than its horizontal bounds.
	var result = "";
	var lines = text.split("\n");
	for (var i = 0; i < lines.length; i++)
	{
		var spaceLeft = this.style.wordWrapWidth;
		var words = lines[i].split(" ");
		for (var j = 0; j < words.length; j++)
		{
			var wordWidth = this.context.measureText(words[j]).width;
			var wordWidthWithSpace = wordWidth + this.context.measureText(" ").width;
			if(wordWidthWithSpace > spaceLeft)
			{
				// Skip printing the newline if it's the first word of the line that is
				// greater than the word wrap width.
				if(j > 0)
				{
					result += "\n";
				}
				result += words[j] + " ";
				spaceLeft = this.style.wordWrapWidth - wordWidth;
			}
			else
			{
				spaceLeft -= wordWidthWithSpace;
				result += words[j] + " ";
			}
		}
		result += "\n";
	}
	return result;
};

/**
 * Destroys this text object
 *
 * @method destroy
 * @param destroyTexture {Boolean}
 */
PIXI.Text.prototype.destroy = function(destroyTexture)
{
	if(destroyTexture)
	{
		this.texture.destroy();
	}

};

PIXI.Text.heightCache = {};

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

/**
 * A Text Object will create a line(s) of text using bitmap font. To split a line you can use "\n", "\r" or "\r\n"
 * You can generate the fnt files using
 * http://www.angelcode.com/products/bmfont/ for windows or
 * http://www.bmglyph.com/ for mac.
 *
 * @class BitmapText
 * @extends DisplayObjectContainer
 * @constructor
 * @param text {String} The copy that you would like the text to display
 * @param style {Object} The style parameters
 * @param style.font {String} The size (optional) and bitmap font id (required) eq "Arial" or "20px Arial" (must have loaded previously)
 * @param [style.align="left"] {String} An alignment of the multiline text ("left", "center" or "right")
 */
PIXI.BitmapText = function(text, style)
{
    PIXI.DisplayObjectContainer.call(this);

    this.setText(text);
    this.setStyle(style);
    this.updateText();
    this.dirty = false

};

// constructor
PIXI.BitmapText.prototype = Object.create(PIXI.DisplayObjectContainer.prototype);
PIXI.BitmapText.prototype.constructor = PIXI.BitmapText;

/**
 * Set the copy for the text object
 *
 * @method setText
 * @param text {String} The copy that you would like the text to display
 */
PIXI.BitmapText.prototype.setText = function(text)
{
    this.text = text || " ";
    this.dirty = true;
};

/**
 * Set the style of the text
 *
 * @method setStyle
 * @param style {Object} The style parameters
 * @param style.font {String} The size (optional) and bitmap font id (required) eq "Arial" or "20px Arial" (must have loaded previously)
 * @param [style.align="left"] {String} An alignment of the multiline text ("left", "center" or "right")
 */
PIXI.BitmapText.prototype.setStyle = function(style)
{
    style = style || {};
    style.align = style.align || "left";
    this.style = style;

    var font = style.font.split(" ");
    this.fontName = font[font.length - 1];
    this.fontSize = font.length >= 2 ? parseInt(font[font.length - 2], 10) : PIXI.BitmapText.fonts[this.fontName].size;

    this.dirty = true;
};

/**
 * Renders text
 *
 * @method updateText
 * @private
 */
PIXI.BitmapText.prototype.updateText = function()
{
    var data = PIXI.BitmapText.fonts[this.fontName];
    var pos = new PIXI.Point();
    var prevCharCode = null;
    var chars = [];
    var maxLineWidth = 0;
    var lineWidths = [];
    var line = 0;
    var scale = this.fontSize / data.size;
    for(var i = 0; i < this.text.length; i++)
    {
        var charCode = this.text.charCodeAt(i);
        if(/(?:\r\n|\r|\n)/.test(this.text.charAt(i)))
        {
            lineWidths.push(pos.x);
            maxLineWidth = Math.max(maxLineWidth, pos.x);
            line++;

            pos.x = 0;
            pos.y += data.lineHeight;
            prevCharCode = null;
            continue;
        }

        var charData = data.chars[charCode];
        if(!charData) continue;

        if(prevCharCode && charData[prevCharCode])
        {
           pos.x += charData.kerning[prevCharCode];
        }
        chars.push({texture:charData.texture, line: line, charCode: charCode, position: new PIXI.Point(pos.x + charData.xOffset, pos.y + charData.yOffset)});
        pos.x += charData.xAdvance;

        prevCharCode = charCode;
    }

    lineWidths.push(pos.x);
    maxLineWidth = Math.max(maxLineWidth, pos.x);

    var lineAlignOffsets = [];
    for(i = 0; i <= line; i++)
    {
        var alignOffset = 0;
        if(this.style.align == "right")
        {
            alignOffset = maxLineWidth - lineWidths[i];
        }
        else if(this.style.align == "center")
        {
            alignOffset = (maxLineWidth - lineWidths[i]) / 2;
        }
        lineAlignOffsets.push(alignOffset);
    }

    for(i = 0; i < chars.length; i++)
    {
        var c = new PIXI.Sprite(chars[i].texture)//PIXI.Sprite.fromFrame(chars[i].charCode);
        c.position.x = (chars[i].position.x + lineAlignOffsets[chars[i].line]) * scale;
        c.position.y = chars[i].position.y * scale;
        c.scale.x = c.scale.y = scale;
        this.addChild(c);
    }

    this.width = pos.x * scale;
    this.height = (pos.y + data.lineHeight) * scale;
};

/**
 * Updates the transfor of this object
 *
 * @method updateTransform
 * @private
 */
PIXI.BitmapText.prototype.updateTransform = function()
{
	if(this.dirty)
	{
        while(this.children.length > 0)
        {
            this.removeChild(this.getChildAt(0));
        }
        this.updateText();

        this.dirty = false;
	}

	PIXI.DisplayObjectContainer.prototype.updateTransform.call(this);
};

PIXI.BitmapText.fonts = {};

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */
 
 /**
 * The interaction manager deals with mouse and touch events. Any DisplayObject can be interactive
 * This manager also supports multitouch.
 *
 * @class InteractionManager
 * @constructor
 * @param stage {Stage} The stage to handle interactions
 */
PIXI.InteractionManager = function(stage)
{
	/**
	 * a refference to the stage
	 *
	 * @property stage
	 * @type Stage
	 */
	this.stage = stage;

	/**
	 * the mouse data
	 *
	 * @property mouse
	 * @type InteractionData
	 */
	this.mouse = new PIXI.InteractionData();

	/**
	 * an object that stores current touches (InteractionData) by id reference
	 *
	 * @property touchs
	 * @type Object
	 */
	this.touchs = {};


	
	// helpers
	this.tempPoint = new PIXI.Point();
	//this.tempMatrix =  mat3.create();

	this.mouseoverEnabled = true;

	//tiny little interactiveData pool!
	this.pool = [];

	this.interactiveItems = [];
	this.interactionDOMElement = null;

	//this will make it so that you dont have to call bind all the time
	this.onMouseMove = this.onMouseMove.bind( this );
	this.onMouseDown = this.onMouseDown.bind(this);
	this.onMouseOut = this.onMouseOut.bind(this);
	this.onMouseUp = this.onMouseUp.bind(this);

	this.onTouchStart = this.onTouchStart.bind(this);
	this.onTouchEnd = this.onTouchEnd.bind(this);
	this.onTouchMove = this.onTouchMove.bind(this);
	
	
	this.last = 0;
}

// constructor
PIXI.InteractionManager.prototype.constructor = PIXI.InteractionManager;

/**
 * Collects an interactive sprite recursively to have their interactions managed
 *
 * @method collectInteractiveSprite
 * @param displayObject {DisplayObject} the displayObject to collect
 * @param iParent {DisplayObject}
 * @private
 */
PIXI.InteractionManager.prototype.collectInteractiveSprite = function(displayObject, iParent)
{
	var children = displayObject.children;
	var length = children.length;
	
	/// make an interaction tree... {item.__interactiveParent}
	for (var i = length-1; i >= 0; i--)
	{
		var child = children[i];
		
//		if(child.visible) {
			// push all interactive bits
			if(child.interactive)
			{
				iParent.interactiveChildren = true;
				//child.__iParent = iParent;
				this.interactiveItems.push(child);

				if(child.children.length > 0)
				{
					this.collectInteractiveSprite(child, child);
				}
			}
			else
			{
				child.__iParent = null;

				if(child.children.length > 0)
				{
					this.collectInteractiveSprite(child, iParent);
				}
			}
//		}
	}
}

/**
 * Sets the target for event delegation
 *
 * @method setTarget
 * @param target {WebGLRenderer|CanvasRenderer} the renderer to bind events to
 * @private
 */
PIXI.InteractionManager.prototype.setTarget = function(target)
{
	this.target = target;

	//check if the dom element has been set. If it has don't do anything
	if( this.interactionDOMElement === null ) {

		this.setTargetDomElement( target.view );
	}

 	document.body.addEventListener('mouseup',  this.onMouseUp, true);
}


/**
 * Sets the dom element which will receive mouse/touch events. This is useful for when you have other DOM
 * elements ontop of the renderers Canvas element. With this you'll be able to delegate another dom element
 * to receive those events
 *
 * @method setTargetDomElement
 * @param domElement {DOMElement} the dom element which will receive mouse and touch events
 * @private
 */
PIXI.InteractionManager.prototype.setTargetDomElement = function(domElement)
{
	//remove previouse listeners
	if( this.interactionDOMElement !== null ) 
	{
		this.interactionDOMElement.style['-ms-content-zooming'] = '';
    	this.interactionDOMElement.style['-ms-touch-action'] = '';

		this.interactionDOMElement.removeEventListener('mousemove',  this.onMouseMove, true);
		this.interactionDOMElement.removeEventListener('mousedown',  this.onMouseDown, true);
	 	this.interactionDOMElement.removeEventListener('mouseout',   this.onMouseOut, true);

	 	// aint no multi touch just yet!
		this.interactionDOMElement.removeEventListener('touchstart', this.onTouchStart, true);
		this.interactionDOMElement.removeEventListener('touchend', this.onTouchEnd, true);
		this.interactionDOMElement.removeEventListener('touchmove', this.onTouchMove, true);
	}


	if (window.navigator.msPointerEnabled) 
	{
		// time to remove some of that zoom in ja..
		domElement.style['-ms-content-zooming'] = 'none';
    	domElement.style['-ms-touch-action'] = 'none';
    
		// DO some window specific touch!
	}

	this.interactionDOMElement = domElement;

	domElement.addEventListener('mousemove',  this.onMouseMove, true);
	domElement.addEventListener('mousedown',  this.onMouseDown, true);
 	domElement.addEventListener('mouseout',   this.onMouseOut, true);

 	// aint no multi touch just yet!
	domElement.addEventListener('touchstart', this.onTouchStart, true);
	domElement.addEventListener('touchend', this.onTouchEnd, true);
	domElement.addEventListener('touchmove', this.onTouchMove, true);
}


/**
 * updates the state of interactive objects
 *
 * @method update
 * @private
 */
PIXI.InteractionManager.prototype.update = function()
{
	if(!this.target)return;
	
	// frequency of 30fps??
	var now = Date.now();
	var diff = now - this.last;
	diff = (diff * 30) / 1000;
	if(diff < 1)return;
	this.last = now;
	//
	
	// ok.. so mouse events??
	// yes for now :)
	// OPTIMSE - how often to check??
	if(this.dirty)
	{
		this.dirty = false;
		
		var len = this.interactiveItems.length;
		
		for (var i=0; i < len; i++) {
		  this.interactiveItems[i].interactiveChildren = false;
		}
		
		this.interactiveItems = [];
		
		if(this.stage.interactive)this.interactiveItems.push(this.stage);
		// go through and collect all the objects that are interactive..
		this.collectInteractiveSprite(this.stage, this.stage);
	}
	
	// loop through interactive objects!
	var length = this.interactiveItems.length;
	
	this.interactionDOMElement.style.cursor = "default";	
				
	for (var i = 0; i < length; i++)
	{
		var item = this.interactiveItems[i];
		
		
		//if(!item.visible)continue;
		
		// OPTIMISATION - only calculate every time if the mousemove function exists..
		// OK so.. does the object have any other interactive functions?
		// hit-test the clip!
		
		
		if(item.mouseover || item.mouseout || item.buttonMode)
		{
			// ok so there are some functions so lets hit test it..
			item.__hit = this.hitTest(item, this.mouse);
			this.mouse.target = item;
			// ok so deal with interactions..
			// loks like there was a hit!
			if(item.__hit)
			{
				if(item.buttonMode) this.interactionDOMElement.style.cursor = "pointer";	
				
				if(!item.__isOver)
				{
					
					if(item.mouseover)item.mouseover(this.mouse);
					item.__isOver = true;	
				}
			}
			else
			{
				if(item.__isOver)
				{
					// roll out!
					if(item.mouseout)item.mouseout(this.mouse);
					item.__isOver = false;	
				}
			}
		}
		
		// --->
	}
}

/**
 * Is called when the mouse moves accross the renderer element
 *
 * @method onMouseMove
 * @param event {Event} The DOM event of the mouse moving
 * @private
 */
PIXI.InteractionManager.prototype.onMouseMove = function(event)
{
	this.mouse.originalEvent = event || window.event; //IE uses window.event
	// TODO optimize by not check EVERY TIME! maybe half as often? //
	var rect = this.interactionDOMElement.getBoundingClientRect();
	
	this.mouse.global.x = (event.clientX - rect.left) * (this.target.width / rect.width);
	this.mouse.global.y = (event.clientY - rect.top) * ( this.target.height / rect.height);
	
	var length = this.interactiveItems.length;
	var global = this.mouse.global;
	
	
	for (var i = 0; i < length; i++)
	{
		var item = this.interactiveItems[i];
		
		if(item.mousemove)
		{
			//call the function!
			item.mousemove(this.mouse);
		}
	}
}

/**
 * Is called when the mouse button is pressed down on the renderer element
 *
 * @method onMouseDown
 * @param event {Event} The DOM event of a mouse button being pressed down
 * @private
 */
PIXI.InteractionManager.prototype.onMouseDown = function(event)
{
	this.mouse.originalEvent = event || window.event; //IE uses window.event
	
	// loop through inteaction tree...
	// hit test each item! -> 
	// get interactive items under point??
	//stage.__i
	var length = this.interactiveItems.length;
	var global = this.mouse.global;
	
	var index = 0;
	var parent = this.stage;
	
	// while 
	// hit test 
	for (var i = 0; i < length; i++)
	{
		var item = this.interactiveItems[i];
		
		if(item.mousedown || item.click)
		{
			item.__mouseIsDown = true;
			item.__hit = this.hitTest(item, this.mouse);
			
			if(item.__hit)
			{
				//call the function!
				if(item.mousedown)item.mousedown(this.mouse);
				item.__isDown = true;
				
				// just the one!
				if(!item.interactiveChildren)break;
			}
		}
	}
}


PIXI.InteractionManager.prototype.onMouseOut = function(event)
{
	var length = this.interactiveItems.length;
	
	this.interactionDOMElement.style.cursor = "default";	
				
	for (var i = 0; i < length; i++)
	{
		var item = this.interactiveItems[i];
		
		if(item.__isOver)
		{
			this.mouse.target = item;
			if(item.mouseout)item.mouseout(this.mouse);
			item.__isOver = false;	
		}
	}
}

/**
 * Is called when the mouse button is released on the renderer element
 *
 * @method onMouseUp
 * @param event {Event} The DOM event of a mouse button being released
 * @private
 */
PIXI.InteractionManager.prototype.onMouseUp = function(event)
{
	this.mouse.originalEvent = event || window.event; //IE uses window.event
	
	var global = this.mouse.global;
	
	
	var length = this.interactiveItems.length;
	var up = false;
	
	for (var i = 0; i < length; i++)
	{
		var item = this.interactiveItems[i];
		
		if(item.mouseup || item.mouseupoutside || item.click)
		{
			item.__hit = this.hitTest(item, this.mouse);
			
			if(item.__hit && !up)
			{
				//call the function!
				if(item.mouseup)
				{
					item.mouseup(this.mouse);
				}
				if(item.__isDown)
				{
					if(item.click)item.click(this.mouse);
				}
				
				if(!item.interactiveChildren)up = true;
			}
			else
			{
				if(item.__isDown)
				{
					if(item.mouseupoutside)item.mouseupoutside(this.mouse);
				}
			}
		
			item.__isDown = false;	
		}
	}
}

/**
 * Tests if the current mouse coords hit a sprite
 *
 * @method hitTest
 * @param item {DisplayObject} The displayObject to test for a hit
 * @param interactionData {InteractionData} The interactiondata object to update in the case of a hit
 * @private
 */
PIXI.InteractionManager.prototype.hitTest = function(item, interactionData)
{
	var global = interactionData.global;
	
	if(item.vcount !== PIXI.visibleCount)return false;

	var isSprite = (item instanceof PIXI.Sprite),
		worldTransform = item.worldTransform,
		a00 = worldTransform[0], a01 = worldTransform[1], a02 = worldTransform[2],
		a10 = worldTransform[3], a11 = worldTransform[4], a12 = worldTransform[5],
		id = 1 / (a00 * a11 + a01 * -a10),
		x = a11 * id * global.x + -a01 * id * global.y + (a12 * a01 - a02 * a11) * id,
		y = a00 * id * global.y + -a10 * id * global.x + (-a12 * a00 + a02 * a10) * id;

	interactionData.target = item;
	
	//a sprite or display object with a hit area defined
	if(item.hitArea && item.hitArea.contains) {
		if(item.hitArea.contains(x, y)) {
			//if(isSprite)
			interactionData.target = item;

			return true;
		}
		
		return false;
	}
	// a sprite with no hitarea defined
	else if(isSprite)
	{
		var width = item.texture.frame.width,
			height = item.texture.frame.height,
			x1 = -width * item.anchor.x,
			y1;
		
		if(x > x1 && x < x1 + width)
		{
			y1 = -height * item.anchor.y;
		
			if(y > y1 && y < y1 + height)
			{
				// set the target property if a hit is true!
				interactionData.target = item
				return true;
			}
		}
	}

	var length = item.children.length;
	
	for (var i = 0; i < length; i++)
	{
		var tempItem = item.children[i];
		var hit = this.hitTest(tempItem, interactionData);
		if(hit)
		{
			// hmm.. TODO SET CORRECT TARGET?
			interactionData.target = item
			return true;
		}
	}

	return false;	
}

/**
 * Is called when a touch is moved accross the renderer element
 *
 * @method onTouchMove
 * @param event {Event} The DOM event of a touch moving accross the renderer view
 * @private
 */
PIXI.InteractionManager.prototype.onTouchMove = function(event)
{
	var rect = this.interactionDOMElement.getBoundingClientRect();
	var changedTouches = event.changedTouches;
	
	for (var i=0; i < changedTouches.length; i++) 
	{
		var touchEvent = changedTouches[i];
		var touchData = this.touchs[touchEvent.identifier];
		touchData.originalEvent =  event || window.event;
		
		// update the touch position
		touchData.global.x = (touchEvent.clientX - rect.left) * (this.target.width / rect.width);
		touchData.global.y = (touchEvent.clientY - rect.top)  * (this.target.height / rect.height);
	}
	
	var length = this.interactiveItems.length;
	for (var i = 0; i < length; i++)
	{
		var item = this.interactiveItems[i];
		if(item.touchmove)item.touchmove(touchData);
	}
}

/**
 * Is called when a touch is started on the renderer element
 *
 * @method onTouchStart
 * @param event {Event} The DOM event of a touch starting on the renderer view
 * @private
 */
PIXI.InteractionManager.prototype.onTouchStart = function(event)
{
	var rect = this.interactionDOMElement.getBoundingClientRect();
	
	var changedTouches = event.changedTouches;
	for (var i=0; i < changedTouches.length; i++) 
	{
		var touchEvent = changedTouches[i];
		
		var touchData = this.pool.pop();
		if(!touchData)touchData = new PIXI.InteractionData();
		
		touchData.originalEvent =  event || window.event;
		
		this.touchs[touchEvent.identifier] = touchData;
		touchData.global.x = (touchEvent.clientX - rect.left) * (this.target.width / rect.width);
		touchData.global.y = (touchEvent.clientY - rect.top)  * (this.target.height / rect.height);
		
		var length = this.interactiveItems.length;
		
		for (var j = 0; j < length; j++)
		{
			var item = this.interactiveItems[j];
			
			if(item.touchstart || item.tap)
			{
				item.__hit = this.hitTest(item, touchData);
				
				if(item.__hit)
				{
					//call the function!
					if(item.touchstart)item.touchstart(touchData);
					item.__isDown = true;
					item.__touchData = touchData;
					
					if(!item.interactiveChildren)break;
				}
			}
		}
	}
}

/**
 * Is called when a touch is ended on the renderer element
 *
 * @method onTouchEnd
 * @param event {Event} The DOM event of a touch ending on the renderer view
 * @private
 */
PIXI.InteractionManager.prototype.onTouchEnd = function(event)
{
	//this.mouse.originalEvent = event || window.event; //IE uses window.event
	var rect = this.interactionDOMElement.getBoundingClientRect();
	var changedTouches = event.changedTouches;
	
	for (var i=0; i < changedTouches.length; i++) 
	{
		var touchEvent = changedTouches[i];
		var touchData = this.touchs[touchEvent.identifier];
		var up = false;
		touchData.global.x = (touchEvent.clientX - rect.left) * (this.target.width / rect.width);
		touchData.global.y = (touchEvent.clientY - rect.top)  * (this.target.height / rect.height);
		
		var length = this.interactiveItems.length;
		for (var j = 0; j < length; j++)
		{
			var item = this.interactiveItems[j];
			var itemTouchData = item.__touchData; // <-- Here!
			item.__hit = this.hitTest(item, touchData);
		
			if(itemTouchData == touchData)
			{
				// so this one WAS down...
				touchData.originalEvent =  event || window.event;
				// hitTest??
				
				if(item.touchend || item.tap)
				{
					if(item.__hit && !up)
					{
						if(item.touchend)item.touchend(touchData);
						if(item.__isDown)
						{
							if(item.tap)item.tap(touchData);
						}
						
						if(!item.interactiveChildren)up = true;
					}
					else
					{
						if(item.__isDown)
						{
							if(item.touchendoutside)item.touchendoutside(touchData);
						}
					}
					
					item.__isDown = false;
				}
				
				item.__touchData = null;
					
			}
			else
			{
				
			}
		}
		// remove the touch..
		this.pool.push(touchData);
		this.touchs[touchEvent.identifier] = null;
	}
}

/**
 * Holds all information related to an Interaction event
 *
 * @class InteractionData
 * @constructor
 */
PIXI.InteractionData = function()
{
	/**
	 * This point stores the global coords of where the touch/mouse event happened
	 *
	 * @property global 
	 * @type Point
	 */
	this.global = new PIXI.Point();
	
	// this is here for legacy... but will remove
	this.local = new PIXI.Point();

	/**
	 * The target Sprite that was interacted with
	 *
	 * @property target
	 * @type Sprite
	 */
	this.target;

	/**
	 * When passed to an event handler, this will be the original DOM Event that was captured
	 *
	 * @property originalEvent
	 * @type Event
	 */
	this.originalEvent;
}

/**
 * This will return the local coords of the specified displayObject for this InteractionData
 *
 * @method getLocalPosition
 * @param displayObject {DisplayObject} The DisplayObject that you would like the local coords off
 * @return {Point} A point containing the coords of the InteractionData position relative to the DisplayObject
 */
PIXI.InteractionData.prototype.getLocalPosition = function(displayObject)
{
	var worldTransform = displayObject.worldTransform;
	var global = this.global;
	
	// do a cheeky transform to get the mouse coords;
	var a00 = worldTransform[0], a01 = worldTransform[1], a02 = worldTransform[2],
        a10 = worldTransform[3], a11 = worldTransform[4], a12 = worldTransform[5],
        id = 1 / (a00 * a11 + a01 * -a10);
	// set the mouse coords...
	return new PIXI.Point(a11 * id * global.x + -a01 * id * global.y + (a12 * a01 - a02 * a11) * id,
							   a00 * id * global.y + -a10 * id * global.x + (-a12 * a00 + a02 * a10) * id)
}

// constructor
PIXI.InteractionData.prototype.constructor = PIXI.InteractionData;

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

/**
 * A Stage represents the root of the display tree. Everything connected to the stage is rendered
 *
 * @class Stage
 * @extends DisplayObjectContainer
 * @constructor
 * @param backgroundColor {Number} the background color of the stage, easiest way to pass this in is in hex format
 *		like: 0xFFFFFF for white
 */
PIXI.Stage = function(backgroundColor)
{
	PIXI.DisplayObjectContainer.call( this );

	/**
	 * [read-only] Current transform of the object based on world (parent) factors
	 *
	 * @property worldTransform
	 * @type Mat3
	 * @readOnly
	 * @private
	 */
	this.worldTransform = PIXI.mat3.create();

	/**
	 * Whether or not the stage is interactive
	 *
	 * @property interactive
	 * @type Boolean
	 */
	this.interactive = true;

	/**
	 * The interaction manage for this stage, manages all interactive activity on the stage
	 *
	 * @property interactive
	 * @type InteractionManager
	 */
	this.interactionManager = new PIXI.InteractionManager(this);

	/**
	 * Whether the stage is dirty and needs to have interactions updated
	 *
	 * @property dirty
	 * @type Boolean
	 * @private
	 */
	this.dirty = true;

	this.__childrenAdded = [];
	this.__childrenRemoved = [];

	//the stage is it's own stage
	this.stage = this;

	//optimize hit detection a bit
	this.stage.hitArea = new PIXI.Rectangle(0,0,100000, 100000);

	this.setBackgroundColor(backgroundColor);
	this.worldVisible = true;
}

// constructor
PIXI.Stage.prototype = Object.create( PIXI.DisplayObjectContainer.prototype );
PIXI.Stage.prototype.constructor = PIXI.Stage;

/**
 * Sets another DOM element which can receive mouse/touch interactions instead of the default Canvas element.
 * This is useful for when you have other DOM elements ontop of the Canvas element.
 *
 * @method setInteractionDelegate
 * @param domElement {DOMElement} This new domElement which will receive mouse/touch events
 */
PIXI.Stage.prototype.setInteractionDelegate = function(domElement)
{
	this.interactionManager.setTargetDomElement( domElement );
}

/*
 * Updates the object transform for rendering
 *
 * @method updateTransform
 * @private
 */
PIXI.Stage.prototype.updateTransform = function()
{
	this.worldAlpha = 1;		
	this.vcount = PIXI.visibleCount;
	
	for(var i=0,j=this.children.length; i<j; i++)
	{
		this.children[i].updateTransform();	
	}
	
	if(this.dirty)
	{
		this.dirty = false;
		// update interactive!
		this.interactionManager.dirty = true;
	}
	
	
	if(this.interactive)this.interactionManager.update();
}

/**
 * Sets the background color for the stage
 *
 * @method setBackgroundColor
 * @param backgroundColor {Number} the color of the background, easiest way to pass this in is in hex format
 *		like: 0xFFFFFF for white
 */
PIXI.Stage.prototype.setBackgroundColor = function(backgroundColor)
{
	this.backgroundColor = backgroundColor || 0x000000;
	this.backgroundColorSplit = HEXtoRGB(this.backgroundColor);
	var hex = this.backgroundColor.toString(16);
	hex = "000000".substr(0, 6 - hex.length) + hex;
	this.backgroundColorString = "#" + hex;
}

/**
 * This will return the point containing global coords of the mouse.
 *
 * @method getMousePosition
 * @return {Point} The point containing the coords of the global InteractionData position.
 */
PIXI.Stage.prototype.getMousePosition = function()
{
	return this.interactionManager.mouse.global;
}

// http://paulirish.com/2011/requestanimationframe-for-smart-animating/
// http://my.opera.com/emoller/blog/2011/12/20/requestanimationframe-for-smart-er-animating

// requestAnimationFrame polyfill by Erik Mller. fixes from Paul Irish and Tino Zijdel

// MIT license

/**
 * A polyfill for requestAnimationFrame
 *
 * @method requestAnimationFrame
 */
/**
 * A polyfill for cancelAnimationFrame
 *
 * @method cancelAnimationFrame
 */
var lastTime = 0;
var vendors = ['ms', 'moz', 'webkit', 'o'];
for(var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {
    window.requestAnimationFrame = window[vendors[x]+'RequestAnimationFrame'];
    window.cancelAnimationFrame = window[vendors[x]+'CancelAnimationFrame']
                               || window[vendors[x]+'CancelRequestAnimationFrame'];
}

if (!window.requestAnimationFrame)
    window.requestAnimationFrame = function(callback, element) {
        var currTime = new Date().getTime();
        var timeToCall = Math.max(0, 16 - (currTime - lastTime));
        var id = window.setTimeout(function() { callback(currTime + timeToCall); },
          timeToCall);
        lastTime = currTime + timeToCall;
        return id;
    };

if (!window.cancelAnimationFrame)
    window.cancelAnimationFrame = function(id) {
        clearTimeout(id);
    };

window.requestAnimFrame = window.requestAnimationFrame;

/**
 * Converts a hex color number to an [R, G, B] array
 *
 * @method HEXtoRGB
 * @param hex {Number}
 */
function HEXtoRGB(hex) {
	return [(hex >> 16 & 0xFF) / 255, ( hex >> 8 & 0xFF) / 255, (hex & 0xFF)/ 255];
}

/**
 * A polyfill for Function.prototype.bind
 *
 * @method bind
 */
if (typeof Function.prototype.bind != 'function') {
  Function.prototype.bind = (function () {
    var slice = Array.prototype.slice;
    return function (thisArg) {
      var target = this, boundArgs = slice.call(arguments, 1);

      if (typeof target != 'function') throw new TypeError();

      function bound() {
	var args = boundArgs.concat(slice.call(arguments));
	target.apply(this instanceof bound ? this : thisArg, args);
      }

      bound.prototype = (function F(proto) {
          proto && (F.prototype = proto);
          if (!(this instanceof F)) return new F;
	})(target.prototype);

      return bound;
    };
  })();
}

/**
 * A wrapper for ajax requests to be handled cross browser
 *
 * @class AjaxRequest
 * @constructor
 */
var AjaxRequest = PIXI.AjaxRequest = function()
{
	var activexmodes = ["Msxml2.XMLHTTP.6.0", "Msxml2.XMLHTTP.3.0", "Microsoft.XMLHTTP"] //activeX versions to check for in IE

	if (window.ActiveXObject)
	{ //Test for support for ActiveXObject in IE first (as XMLHttpRequest in IE7 is broken)
		for (var i=0; i<activexmodes.length; i++)
		{
			try{
				return new ActiveXObject(activexmodes[i])
			}
   			catch(e){
    			//suppress error
   			}
		}
	}
	else if (window.XMLHttpRequest) // if Mozilla, Safari etc
  	{
  		return new XMLHttpRequest()
 	}
 	else
 	{
		return false;
 	}
}

/*
 * DEBUGGING ONLY
 */
PIXI.runList = function(item)
{
	console.log(">>>>>>>>>")
	console.log("_")
	var safe = 0;
	var tmp = item.first;
	console.log(tmp);

	while(tmp._iNext)
	{
		safe++;
		tmp = tmp._iNext;
		console.log(tmp);
	//	console.log(tmp);

		if(safe > 100)
		{
			console.log("BREAK")
			break
		}
	}
}






/**
 * https://github.com/mrdoob/eventtarget.js/
 * THankS mr DOob!
 */

/**
 * Adds event emitter functionality to a class
 *
 * @class EventTarget
 * @example
 *		function MyEmitter() {
 *			PIXI.EventTarget.call(this); //mixes in event target stuff
 *		}
 *
 *		var em = new MyEmitter();
 *		em.emit({ type: 'eventName', data: 'some data' });
 */
PIXI.EventTarget = function () {

	var listeners = {};

	this.addEventListener = this.on = function ( type, listener ) {


		if ( listeners[ type ] === undefined ) {

			listeners[ type ] = [];

		}

		if ( listeners[ type ].indexOf( listener ) === - 1 ) {

			listeners[ type ].push( listener );
		}

	};

	this.dispatchEvent = this.emit = function ( event ) {

		if ( !listeners[ event.type ] || !listeners[ event.type ].length ) {

			return;

		}

		for(var i = 0, l = listeners[ event.type ].length; i < l; i++) {

			listeners[ event.type ][ i ]( event );

		}

	};

	this.removeEventListener = this.off = function ( type, listener ) {

		var index = listeners[ type ].indexOf( listener );

		if ( index !== - 1 ) {

			listeners[ type ].splice( index, 1 );

		}

	};

};

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

/**
 * This helper function will automatically detect which renderer you should be using.
 * WebGL is the preferred renderer as it is a lot fastest. If webGL is not supported by
 * the browser then this function will return a canvas renderer
 *
 * @method autoDetectRenderer
 * @static
 * @param width {Number} the width of the renderers view
 * @param height {Number} the height of the renderers view
 * @param view {Canvas} the canvas to use as a view, optional
 * @param transparent=false {Boolean} the transparency of the render view, default false
 * @param antialias=false {Boolean} sets antialias (only applicable in webGL chrome at the moment)
 *
 * antialias
 */
PIXI.autoDetectRenderer = function(width, height, view, transparent, antialias)
{
	if(!width)width = 800;
	if(!height)height = 600;

	// BORROWED from Mr Doob (mrdoob.com)
	var webgl = ( function () { try { var canvas = document.createElement( 'canvas' ); return !! window.WebGLRenderingContext && ( canvas.getContext( 'webgl' ) || canvas.getContext( 'experimental-webgl' ) ); } catch( e ) { return false; } } )();

	if(webgl)
	{
		var ie =  (navigator.userAgent.toLowerCase().indexOf('msie') != -1);
		 webgl = !ie;
	}
	
	//console.log(webgl);
	if( webgl )
	{
		return new PIXI.WebGLRenderer(width, height, view, transparent, antialias);
	}

	return	new PIXI.CanvasRenderer(width, height, view, transparent);
};



/*
	PolyK library
	url: http://polyk.ivank.net
	Released under MIT licence.

	Copyright (c) 2012 Ivan Kuckir

	Permission is hereby granted, free of charge, to any person
	obtaining a copy of this software and associated documentation
	files (the "Software"), to deal in the Software without
	restriction, including without limitation the rights to use,
	copy, modify, merge, publish, distribute, sublicense, and/or sell
	copies of the Software, and to permit persons to whom the
	Software is furnished to do so, subject to the following
	conditions:

	The above copyright notice and this permission notice shall be
	included in all copies or substantial portions of the Software.

	THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
	EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
	OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
	NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
	HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
	WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
	FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
	OTHER DEALINGS IN THE SOFTWARE.

	This is an amazing lib!

	slightly modified by mat groves (matgroves.com);
*/

PIXI.PolyK = {};

/**
 * Triangulates shapes for webGL graphic fills
 *
 * @method Triangulate
 * @namespace PolyK
 * @constructor
 */
PIXI.PolyK.Triangulate = function(p)
{
	var sign = true;

	var n = p.length>>1;
	if(n<3) return [];
	var tgs = [];
	var avl = [];
	for(var i=0; i<n; i++) avl.push(i);

	var i = 0;
	var al = n;
	while(al > 3)
	{
		var i0 = avl[(i+0)%al];
		var i1 = avl[(i+1)%al];
		var i2 = avl[(i+2)%al];

		var ax = p[2*i0],  ay = p[2*i0+1];
		var bx = p[2*i1],  by = p[2*i1+1];
		var cx = p[2*i2],  cy = p[2*i2+1];

		var earFound = false;
		if(PIXI.PolyK._convex(ax, ay, bx, by, cx, cy, sign))
		{
			earFound = true;
			for(var j=0; j<al; j++)
			{
				var vi = avl[j];
				if(vi==i0 || vi==i1 || vi==i2) continue;
				if(PIXI.PolyK._PointInTriangle(p[2*vi], p[2*vi+1], ax, ay, bx, by, cx, cy)) {earFound = false; break;}
			}
		}
		if(earFound)
		{
			tgs.push(i0, i1, i2);
			avl.splice((i+1)%al, 1);
			al--;
			i = 0;
		}
		else if(i++ > 3*al)
		{
			// need to flip flip reverse it!
			// reset!
			if(sign)
			{
				var tgs = [];
				avl = [];
				for(var i=0; i<n; i++) avl.push(i);

				i = 0;
				al = n;

				sign = false;
			}
			else
			{
				console.log("PIXI Warning: shape too complex to fill")
				return [];
			}
		}
	}
	tgs.push(avl[0], avl[1], avl[2]);
	return tgs;
}

/**
 * Checks if a point is within a triangle
 *
 * @class _PointInTriangle
 * @namespace PolyK
 * @private
 */
PIXI.PolyK._PointInTriangle = function(px, py, ax, ay, bx, by, cx, cy)
{
	var v0x = cx-ax;
	var v0y = cy-ay;
	var v1x = bx-ax;
	var v1y = by-ay;
	var v2x = px-ax;
	var v2y = py-ay;

	var dot00 = v0x*v0x+v0y*v0y;
	var dot01 = v0x*v1x+v0y*v1y;
	var dot02 = v0x*v2x+v0y*v2y;
	var dot11 = v1x*v1x+v1y*v1y;
	var dot12 = v1x*v2x+v1y*v2y;

	var invDenom = 1 / (dot00 * dot11 - dot01 * dot01);
	var u = (dot11 * dot02 - dot01 * dot12) * invDenom;
	var v = (dot00 * dot12 - dot01 * dot02) * invDenom;

	// Check if point is in triangle
	return (u >= 0) && (v >= 0) && (u + v < 1);
}

/**
 * Checks if a shape is convex
 *
 * @class _convex
 * @namespace PolyK
 * @private
 */
PIXI.PolyK._convex = function(ax, ay, bx, by, cx, cy, sign)
{
	return ((ay-by)*(cx-bx) + (bx-ax)*(cy-by) >= 0) == sign;
}

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */


PIXI.initDefaultShaders = function() 
{
	PIXI.primitiveShader = new PIXI.PrimitiveShader();
  PIXI.primitiveShader.init();

  PIXI.stripShader = new PIXI.StripShader();
  PIXI.stripShader.init();

	PIXI.defaultShader = new PIXI.PixiShader();
	PIXI.defaultShader.init();

  var gl = PIXI.gl; 
  var shaderProgram = PIXI.defaultShader.program;
 

  gl.useProgram(shaderProgram);
  
  gl.enableVertexAttribArray(PIXI.defaultShader.aVertexPosition);
  gl.enableVertexAttribArray(PIXI.defaultShader.colorAttribute);
  gl.enableVertexAttribArray(PIXI.defaultShader.aTextureCoord);
}

PIXI.activatePrimitiveShader = function()
{
  var gl = PIXI.gl;
  
  gl.useProgram(PIXI.primitiveShader.program);
  
  gl.disableVertexAttribArray(PIXI.defaultShader.aVertexPosition);
  gl.disableVertexAttribArray(PIXI.defaultShader.colorAttribute);
  gl.disableVertexAttribArray(PIXI.defaultShader.aTextureCoord);

  gl.enableVertexAttribArray(PIXI.primitiveShader.aVertexPosition);
  gl.enableVertexAttribArray(PIXI.primitiveShader.colorAttribute);
} 

PIXI.deactivatePrimitiveShader = function()
{
  var gl = PIXI.gl;

  gl.useProgram(PIXI.defaultShader.program);
  
  gl.disableVertexAttribArray(PIXI.primitiveShader.aVertexPosition);
  gl.disableVertexAttribArray(PIXI.primitiveShader.colorAttribute);

  gl.enableVertexAttribArray(PIXI.defaultShader.aVertexPosition);
  gl.enableVertexAttribArray(PIXI.defaultShader.colorAttribute);
  gl.enableVertexAttribArray(PIXI.defaultShader.aTextureCoord);

}

PIXI.activateStripShader = function()
{
  var gl = PIXI.gl;
  
  gl.useProgram(PIXI.stripShader.program);
 // gl.disableVertexAttribArray(PIXI.defaultShader.aTextureCoord);
} 

PIXI.deactivateStripShader = function()
{
  var gl = PIXI.gl;

  gl.useProgram(PIXI.defaultShader.program);
  //gl.enableVertexAttribArray(PIXI.defaultShader.aTextureCoord);
}

/*

SHADER COMPILER HELPERS
*/

PIXI.CompileVertexShader = function(gl, shaderSrc)
{
  return PIXI._CompileShader(gl, shaderSrc, gl.VERTEX_SHADER);
}

PIXI.CompileFragmentShader = function(gl, shaderSrc)
{
  return PIXI._CompileShader(gl, shaderSrc, gl.FRAGMENT_SHADER);
}

PIXI._CompileShader = function(gl, shaderSrc, shaderType)
{
  var src = shaderSrc.join("\n");
  var shader = gl.createShader(shaderType);
  gl.shaderSource(shader, src);
  gl.compileShader(shader);

  if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {
    console.log(gl.getShaderInfoLog(shader));
    return null;
  }

  return shader;
}


PIXI.compileProgram = function(vertexSrc, fragmentSrc)
{
	var gl = PIXI.gl;
	var fragmentShader = PIXI.CompileFragmentShader(gl, fragmentSrc);
	var vertexShader = PIXI.CompileVertexShader(gl, vertexSrc);
	
	var shaderProgram = gl.createProgram();
	
    gl.attachShader(shaderProgram, vertexShader);
    gl.attachShader(shaderProgram, fragmentShader);
    gl.linkProgram(shaderProgram);

    if (!gl.getProgramParameter(shaderProgram, gl.LINK_STATUS)) {
        console.log("Could not initialise shaders");
    }

	return shaderProgram;
} 

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */


PIXI.PixiShader = function()
{
	// the webGL program..
	this.program;
	
	this.fragmentSrc = [
	  "precision lowp float;",
	  "varying vec2 vTextureCoord;",
	  "varying float vColor;",
	  "uniform sampler2D uSampler;",
	  "void main(void) {",
	    "gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor;",
	  "}"
	];
	
}

PIXI.PixiShader.prototype.init = function()
{
	var program = PIXI.compileProgram(this.vertexSrc || PIXI.PixiShader.defaultVertexSrc, this.fragmentSrc)
	
	var gl = PIXI.gl;
	
    gl.useProgram(program);
	
	// get and store the uniforms for the shader
	this.uSampler = gl.getUniformLocation(program, "uSampler");
	this.projectionVector = gl.getUniformLocation(program, "projectionVector");
	this.offsetVector = gl.getUniformLocation(program, "offsetVector");
    //this.dimensions = gl.getUniformLocation(this.program, "dimensions");
    
    // get and store the attributes
    this.aVertexPosition = gl.getAttribLocation(program, "aVertexPosition");
	this.colorAttribute = gl.getAttribLocation(program, "aColor");
	this.aTextureCoord = gl.getAttribLocation(program, "aTextureCoord");
	  
    // add those custom shaders!
    for (var key in this.uniforms)
    {
       
    	// get the uniform locations..
	//	program[key] = 
        this.uniforms[key].uniformLocation = gl.getUniformLocation(program, key);

      
    }
  
	this.program = program;
}

PIXI.PixiShader.prototype.syncUniforms = function()
{
	var gl = PIXI.gl;
	
	for (var key in this.uniforms) 
    {
    	//var 
    	var type = this.uniforms[key].type;
    	
    	// need to grow this!
    	if(type == "f")
    	{
			gl.uniform1f(this.uniforms[key].uniformLocation, this.uniforms[key].value);
    	}
    	if(type == "f2")
    	{
    	//	console.log(this.program[key])
			gl.uniform2f(this.uniforms[key].uniformLocation, this.uniforms[key].value.x, this.uniforms[key].value.y);
    	}
        else if(type == "f4")
        {
           // console.log(this.uniforms[key].value)
            gl.uniform4fv(this.uniforms[key].uniformLocation, this.uniforms[key].value);
        }
    	else if(type == "mat4")
    	{
    		gl.uniformMatrix4fv(this.uniforms[key].uniformLocation, false, this.uniforms[key].value);
    	}
    	else if(type == "sampler2D")
    	{
    		// first texture...
    		var texture = this.uniforms[key].value;
    		
    		gl.activeTexture(gl.TEXTURE1);
	    	gl.bindTexture(gl.TEXTURE_2D, texture.baseTexture._glTexture);
	    	
    		gl.uniform1i(this.uniforms[key].uniformLocation, 1);
    		
    		// activate texture..
    		// gl.uniformMatrix4fv(this.program[key], false, this.uniforms[key].value);
    		// gl.uniformMatrix4fv(this.program[key], false, this.uniforms[key].value);
    	}
    }
    
}

PIXI.PixiShader.defaultVertexSrc = [
  "attribute vec2 aVertexPosition;",
  "attribute vec2 aTextureCoord;",
  "attribute float aColor;",
  
  "uniform vec2 projectionVector;",
 "uniform vec2 offsetVector;",
  "varying vec2 vTextureCoord;",
  
  "varying float vColor;",

  "const vec2 center = vec2(-1.0, 1.0);",
  "void main(void) {",
    "gl_Position = vec4( ((aVertexPosition + offsetVector) / projectionVector) + center , 0.0, 1.0);",
    "vTextureCoord = aTextureCoord;",
    "vColor = aColor;",
  "}"
];

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */


PIXI.StripShader = function()
{
	// the webGL program..
	this.program;
	
    this.fragmentSrc = [
      "precision mediump float;",
      "varying vec2 vTextureCoord;",
      "varying float vColor;",
      "uniform float alpha;",
      "uniform sampler2D uSampler;",
      "void main(void) {",
        "gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y));",
        "gl_FragColor = gl_FragColor * alpha;",
      "}"
    ];

    this.vertexSrc = [
      "attribute vec2 aVertexPosition;",
      "attribute vec2 aTextureCoord;",
      "attribute float aColor;",
      "uniform mat3 translationMatrix;",
      "uniform vec2 projectionVector;",
      "varying vec2 vTextureCoord;",
      "varying vec2 offsetVector;",
      "varying float vColor;",
      "void main(void) {",
        "vec3 v = translationMatrix * vec3(aVertexPosition, 1.0);",
        "v -= offsetVector.xyx;",
        "gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / projectionVector.y + 1.0 , 0.0, 1.0);",
        "vTextureCoord = aTextureCoord;",
        "vColor = aColor;",
      "}"
    ];
}

PIXI.StripShader.prototype.init = function()
{
	var program = PIXI.compileProgram(this.vertexSrc, this.fragmentSrc)
	
	var gl = PIXI.gl;
	
    gl.useProgram(program);

	// get and store the uniforms for the shader
	this.uSampler = gl.getUniformLocation(program, "uSampler");
	this.projectionVector = gl.getUniformLocation(program, "projectionVector");
	this.offsetVector = gl.getUniformLocation(program, "offsetVector");
	this.colorAttribute = gl.getAttribLocation(program, "aColor");
	//this.dimensions = gl.getUniformLocation(this.program, "dimensions");
	
	// get and store the attributes
	this.aVertexPosition = gl.getAttribLocation(program, "aVertexPosition");
	this.aTextureCoord = gl.getAttribLocation(program, "aTextureCoord");
	  
    this.translationMatrix = gl.getUniformLocation(program, "translationMatrix");
    this.alpha = gl.getUniformLocation(program, "alpha");
  
	this.program = program;
}

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */


PIXI.PrimitiveShader = function()
{
	// the webGL program..
	this.program;
    	
    this.fragmentSrc = [
      "precision mediump float;",
      "varying vec4 vColor;",
      "void main(void) {",
        "gl_FragColor = vColor;",
      "}"
    ];

    this.vertexSrc  = [
      "attribute vec2 aVertexPosition;",
      "attribute vec4 aColor;",
      "uniform mat3 translationMatrix;",
      "uniform vec2 projectionVector;",
      "uniform vec2 offsetVector;",
      "uniform float alpha;",
      "varying vec4 vColor;",
      "void main(void) {",
        "vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);",
        "v -= offsetVector.xyx;",
        "gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);",
        "vColor = aColor  * alpha;",
      "}"
    ];
	
}

PIXI.PrimitiveShader.prototype.init = function()
{
	var program = PIXI.compileProgram(this.vertexSrc, this.fragmentSrc);
	
	var gl = PIXI.gl;
	
  gl.useProgram(program);
	
	// get and store the uniforms for the shader
	this.projectionVector = gl.getUniformLocation(program, "projectionVector");
	this.offsetVector = gl.getUniformLocation(program, "offsetVector");
  
  // get and store the attributes
  this.aVertexPosition = gl.getAttribLocation(program, "aVertexPosition");
	this.colorAttribute = gl.getAttribLocation(program, "aColor");
	
  this.translationMatrix = gl.getUniformLocation(program, "translationMatrix");
  this.alpha = gl.getUniformLocation(program, "alpha");

	this.program = program;
}

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

/**
 * A set of functions used by the webGL renderer to draw the primitive graphics data
 *
 * @class CanvasGraphics
 */
PIXI.WebGLGraphics = function()
{
	
}

/**
 * Renders the graphics object
 *
 * @static
 * @private
 * @method renderGraphics
 * @param graphics {Graphics}
 * @param projection {Object}
 */
PIXI.WebGLGraphics.renderGraphics = function(graphics, projection)
{
	var gl = PIXI.gl;
	
	if(!graphics._webGL)graphics._webGL = {points:[], indices:[], lastIndex:0, 
										   buffer:gl.createBuffer(),
										   indexBuffer:gl.createBuffer()};
	
	if(graphics.dirty)
	{
		graphics.dirty = false;
		
		if(graphics.clearDirty)
		{
			graphics.clearDirty = false;
			
			graphics._webGL.lastIndex = 0;
			graphics._webGL.points = [];
			graphics._webGL.indices = [];
			
		}
		
		PIXI.WebGLGraphics.updateGraphics(graphics);
	}
	
	PIXI.activatePrimitiveShader();
	
	// This  could be speeded up fo sure!
	var m = PIXI.mat3.clone(graphics.worldTransform);
	
	PIXI.mat3.transpose(m);
	
	// set the matrix transform for the 
 	gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_ALPHA);

 	gl.uniformMatrix3fv(PIXI.primitiveShader.translationMatrix, false, m);
 	
	gl.uniform2f(PIXI.primitiveShader.projectionVector, projection.x, -projection.y);
	gl.uniform2f(PIXI.primitiveShader.offsetVector, -PIXI.offset.x, -PIXI.offset.y);
	
	gl.uniform1f(PIXI.primitiveShader.alpha, graphics.worldAlpha);
	gl.bindBuffer(gl.ARRAY_BUFFER, graphics._webGL.buffer);
	
	gl.vertexAttribPointer(PIXI.primitiveShader.aVertexPosition, 2, gl.FLOAT, false, 4 * 6, 0);
	gl.vertexAttribPointer(PIXI.primitiveShader.colorAttribute, 4, gl.FLOAT, false,4 * 6, 2 * 4);
	
	// set the index buffer!
	gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, graphics._webGL.indexBuffer);
	

	gl.drawElements(gl.TRIANGLE_STRIP,  graphics._webGL.indices.length, gl.UNSIGNED_SHORT, 0 );
	
	PIXI.deactivatePrimitiveShader();
	
	
	// return to default shader...
//	PIXI.activateShader(PIXI.defaultShader);
}

/**
 * Updates the graphics object
 *
 * @static
 * @private
 * @method updateGraphics
 * @param graphics {Graphics}
 */
PIXI.WebGLGraphics.updateGraphics = function(graphics)
{
	for (var i=graphics._webGL.lastIndex; i < graphics.graphicsData.length; i++) 
	{
		var data = graphics.graphicsData[i];
		
		if(data.type == PIXI.Graphics.POLY)
		{
			if(data.fill)
			{
				if(data.points.length>3) 
				PIXI.WebGLGraphics.buildPoly(data, graphics._webGL);
			}
			
			if(data.lineWidth > 0)
			{
				PIXI.WebGLGraphics.buildLine(data, graphics._webGL);
			}
		}
		else if(data.type == PIXI.Graphics.RECT)
		{
			PIXI.WebGLGraphics.buildRectangle(data, graphics._webGL);
		}
		else if(data.type == PIXI.Graphics.CIRC || data.type == PIXI.Graphics.ELIP)
		{
			PIXI.WebGLGraphics.buildCircle(data, graphics._webGL);
		}
	};
	
	graphics._webGL.lastIndex = graphics.graphicsData.length;
	
	var gl = PIXI.gl;

	graphics._webGL.glPoints = new Float32Array(graphics._webGL.points);
	
	gl.bindBuffer(gl.ARRAY_BUFFER, graphics._webGL.buffer);
	gl.bufferData(gl.ARRAY_BUFFER, graphics._webGL.glPoints, gl.STATIC_DRAW);
	
	graphics._webGL.glIndicies = new Uint16Array(graphics._webGL.indices);
	
	gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, graphics._webGL.indexBuffer);
    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, graphics._webGL.glIndicies, gl.STATIC_DRAW);
}

/**
 * Builds a rectangle to draw
 *
 * @static
 * @private
 * @method buildRectangle
 * @param graphics {Graphics}
 * @param webGLData {Object}
 */
PIXI.WebGLGraphics.buildRectangle = function(graphicsData, webGLData)
{
	// --- //
	// need to convert points to a nice regular data
	// 
	var rectData = graphicsData.points;
	var x = rectData[0];
	var y = rectData[1];
	var width = rectData[2];
	var height = rectData[3];
	
	
	if(graphicsData.fill)
	{
		var color = HEXtoRGB(graphicsData.fillColor);
		var alpha = graphicsData.fillAlpha;
		
		var r = color[0] * alpha;
		var g = color[1] * alpha;
		var b = color[2] * alpha;
	
		var verts = webGLData.points;
		var indices = webGLData.indices;
	
		var vertPos = verts.length/6;
		
		// start
		verts.push(x, y);
		verts.push(r, g, b, alpha);
		
		verts.push(x + width, y);
		verts.push(r, g, b, alpha);
		
		verts.push(x , y + height);
		verts.push(r, g, b, alpha);
		
		verts.push(x + width, y + height);
		verts.push(r, g, b, alpha);
		
		// insert 2 dead triangles..
		indices.push(vertPos, vertPos, vertPos+1, vertPos+2, vertPos+3, vertPos+3)
	}
	
	if(graphicsData.lineWidth)
	{
		graphicsData.points = [x, y,
				  x + width, y,
				  x + width, y + height,
				  x, y + height,
				  x, y];
	
		PIXI.WebGLGraphics.buildLine(graphicsData, webGLData);
	}
	
}

/**
 * Builds a circle to draw
 *
 * @static
 * @private
 * @method buildCircle
 * @param graphics {Graphics}
 * @param webGLData {Object}
 */
PIXI.WebGLGraphics.buildCircle = function(graphicsData, webGLData)
{
	// --- //
	// need to convert points to a nice regular data
	// 
	var rectData = graphicsData.points;
	var x = rectData[0];
	var y = rectData[1];
	var width = rectData[2];
	var height = rectData[3];
	
	var totalSegs = 40;
	var seg = (Math.PI * 2) / totalSegs ;
		
	if(graphicsData.fill)
	{
		var color = HEXtoRGB(graphicsData.fillColor);
		var alpha = graphicsData.fillAlpha;

		var r = color[0] * alpha;
		var g = color[1] * alpha;
		var b = color[2] * alpha;
	
		var verts = webGLData.points;
		var indices = webGLData.indices;
	
		var vecPos = verts.length/6;
		
		indices.push(vecPos);
		
		for (var i=0; i < totalSegs + 1 ; i++) 
		{
			verts.push(x,y, r, g, b, alpha);
			
			verts.push(x + Math.sin(seg * i) * width,
					   y + Math.cos(seg * i) * height,
					   r, g, b, alpha);
		
			indices.push(vecPos++, vecPos++);
		};
		
		indices.push(vecPos-1);
	}
	
	if(graphicsData.lineWidth)
	{
		graphicsData.points = [];
		
		for (var i=0; i < totalSegs + 1; i++) 
		{
			graphicsData.points.push(x + Math.sin(seg * i) * width,
									 y + Math.cos(seg * i) * height)
		};
		
		PIXI.WebGLGraphics.buildLine(graphicsData, webGLData);
	}
	
}

/**
 * Builds a line to draw
 *
 * @static
 * @private
 * @method buildLine
 * @param graphics {Graphics}
 * @param webGLData {Object}
 */
PIXI.WebGLGraphics.buildLine = function(graphicsData, webGLData)
{
	// TODO OPTIMISE!
	
	var wrap = true;
	var points = graphicsData.points;
	if(points.length == 0)return;
	
	// if the line width is an odd number add 0.5 to align to a whole pixel
	if(graphicsData.lineWidth%2)
	{
		for (var i = 0; i < points.length; i++) {
			points[i] += 0.5;
		};
	}

	// get first and last point.. figure out the middle!
	var firstPoint = new PIXI.Point( points[0], points[1] );
	var lastPoint = new PIXI.Point( points[points.length - 2], points[points.length - 1] );
	
	// if the first point is the last point - goona have issues :)
	if(firstPoint.x == lastPoint.x && firstPoint.y == lastPoint.y)
	{
		points.pop();
		points.pop();
		
		lastPoint = new PIXI.Point( points[points.length - 2], points[points.length - 1] );
		
		var midPointX = lastPoint.x + (firstPoint.x - lastPoint.x) *0.5;
		var midPointY = lastPoint.y + (firstPoint.y - lastPoint.y) *0.5;
		
		points.unshift(midPointX, midPointY);
		points.push(midPointX, midPointY)
	}
	
	var verts = webGLData.points;
	var indices = webGLData.indices;
	var length = points.length / 2;
	var indexCount = points.length;
	var indexStart = verts.length/6;
	
	// DRAW the Line
	var width = graphicsData.lineWidth / 2;
	
	// sort color
	var color = HEXtoRGB(graphicsData.lineColor);
	var alpha = graphicsData.lineAlpha;
	var r = color[0] * alpha;
	var g = color[1] * alpha;
	var b = color[2] * alpha;
	
	var p1x, p1y, p2x, p2y, p3x, p3y;
	var perpx, perpy, perp2x, perp2y, perp3x, perp3y;
	var ipx, ipy;
	var a1, b1, c1, a2, b2, c2;
	var denom, pdist, dist;
	
	p1x = points[0];
	p1y = points[1];
	
	p2x = points[2];
	p2y = points[3];
	
	perpx = -(p1y - p2y);
	perpy =  p1x - p2x;
	
	dist = Math.sqrt(perpx*perpx + perpy*perpy);
	
	perpx /= dist;
	perpy /= dist;
	perpx *= width;
	perpy *= width;
	
	// start
	verts.push(p1x - perpx , p1y - perpy,
				r, g, b, alpha);
	
	verts.push(p1x + perpx , p1y + perpy,
				r, g, b, alpha);
	
	for (var i = 1; i < length-1; i++) 
	{
		p1x = points[(i-1)*2];
		p1y = points[(i-1)*2 + 1];
		
		p2x = points[(i)*2]
		p2y = points[(i)*2 + 1]
		
		p3x = points[(i+1)*2];
		p3y = points[(i+1)*2 + 1];
		
		perpx = -(p1y - p2y);
		perpy = p1x - p2x;
		
		dist = Math.sqrt(perpx*perpx + perpy*perpy);
		perpx /= dist;
		perpy /= dist;
		perpx *= width;
		perpy *= width;

		perp2x = -(p2y - p3y);
		perp2y = p2x - p3x;
		
		dist = Math.sqrt(perp2x*perp2x + perp2y*perp2y);
		perp2x /= dist;
		perp2y /= dist;
		perp2x *= width;
		perp2y *= width;
		
		a1 = (-perpy + p1y) - (-perpy + p2y);
	    b1 = (-perpx + p2x) - (-perpx + p1x);
	    c1 = (-perpx + p1x) * (-perpy + p2y) - (-perpx + p2x) * (-perpy + p1y);
	    a2 = (-perp2y + p3y) - (-perp2y + p2y);
	    b2 = (-perp2x + p2x) - (-perp2x + p3x);
	    c2 = (-perp2x + p3x) * (-perp2y + p2y) - (-perp2x + p2x) * (-perp2y + p3y);
	 
	    denom = a1*b2 - a2*b1;

	   if(Math.abs(denom) < 0.1 )
		{
		
			denom+=10.1;
			verts.push(p2x - perpx , p2y - perpy,
				r, g, b, alpha);
	
			verts.push(p2x + perpx , p2y + perpy,
				r, g, b, alpha);
			
			continue;
		}
	    
	    px = (b1*c2 - b2*c1)/denom;
	    py = (a2*c1 - a1*c2)/denom;
		
			
		pdist = (px -p2x) * (px -p2x) + (py -p2y) + (py -p2y);
		

		if(pdist > 140 * 140)
		{
			perp3x = perpx - perp2x;
			perp3y = perpy - perp2y;
			
			dist = Math.sqrt(perp3x*perp3x + perp3y*perp3y);
			perp3x /= dist;
			perp3y /= dist;
			perp3x *= width;
			perp3y *= width;
			
			verts.push(p2x - perp3x, p2y -perp3y);
			verts.push(r, g, b, alpha);
			
			verts.push(p2x + perp3x, p2y +perp3y);
			verts.push(r, g, b, alpha);
			
			verts.push(p2x - perp3x, p2y -perp3y);
			verts.push(r, g, b, alpha);
			
			indexCount++;
		}
		else
		{

			verts.push(px , py);
			verts.push(r, g, b, alpha);
			
			verts.push(p2x - (px-p2x), p2y - (py - p2y));
			verts.push(r, g, b, alpha);
		}
	}
	
	p1x = points[(length-2)*2]
	p1y = points[(length-2)*2 + 1] 
	
	p2x = points[(length-1)*2]
	p2y = points[(length-1)*2 + 1]
	
	perpx = -(p1y - p2y)
	perpy = p1x - p2x;
	
	dist = Math.sqrt(perpx*perpx + perpy*perpy);
	perpx /= dist;
	perpy /= dist;
	perpx *= width;
	perpy *= width;
	
	verts.push(p2x - perpx , p2y - perpy)
	verts.push(r, g, b, alpha);
	
	verts.push(p2x + perpx , p2y + perpy)
	verts.push(r, g, b, alpha);
	
	indices.push(indexStart);
	
	for (var i=0; i < indexCount; i++) 
	{
		indices.push(indexStart++);
	};
	
	indices.push(indexStart-1);
}

/**
 * Builds a polygon to draw
 *
 * @static
 * @private
 * @method buildPoly
 * @param graphics {Graphics}
 * @param webGLData {Object}
 */
PIXI.WebGLGraphics.buildPoly = function(graphicsData, webGLData)
{
	var points = graphicsData.points;
	if(points.length < 6)return;
	
	// get first and last point.. figure out the middle!
	var verts = webGLData.points;
	var indices = webGLData.indices;
	
	var length = points.length / 2;
	
	// sort color
	var color = HEXtoRGB(graphicsData.fillColor);
	var alpha = graphicsData.fillAlpha;
	var r = color[0] * alpha;
	var g = color[1] * alpha;
	var b = color[2] * alpha;
	
	var triangles = PIXI.PolyK.Triangulate(points);
	
	var vertPos = verts.length / 6;
	
	for (var i=0; i < triangles.length; i+=3) 
	{
		indices.push(triangles[i] + vertPos);
		indices.push(triangles[i] + vertPos);
		indices.push(triangles[i+1] + vertPos);
		indices.push(triangles[i+2] +vertPos);
		indices.push(triangles[i+2] + vertPos);
	};
	
	for (var i = 0; i < length; i++) 
	{
		verts.push(points[i * 2], points[i * 2 + 1],
				   r, g, b, alpha);
	};
}

function HEXtoRGB(hex) {
	return [(hex >> 16 & 0xFF) / 255, ( hex >> 8 & 0xFF) / 255, (hex & 0xFF)/ 255];
}





/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

PIXI._defaultFrame = new PIXI.Rectangle(0,0,1,1);

// an instance of the gl context..
// only one at the moment :/
PIXI.gl;

/**
 * the WebGLRenderer is draws the stage and all its content onto a webGL enabled canvas. This renderer
 * should be used for browsers support webGL. This Render works by automatically managing webGLBatchs.
 * So no need for Sprite Batch's or Sprite Cloud's
 * Dont forget to add the view to your DOM or you will not see anything :)
 *
 * @class WebGLRenderer
 * @constructor
 * @param width=0 {Number} the width of the canvas view
 * @param height=0 {Number} the height of the canvas view
 * @param view {Canvas} the canvas to use as a view, optional
 * @param transparent=false {Boolean} the transparency of the render view, default false
 * @param antialias=false {Boolean} sets antialias (only applicable in chrome at the moment)
 * 
 */
PIXI.WebGLRenderer = function(width, height, view, transparent, antialias)
{
	// do a catch.. only 1 webGL renderer..

	this.transparent = !!transparent;

	this.width = width || 800;
	this.height = height || 600;

	this.view = view || document.createElement( 'canvas' ); 
    this.view.width = this.width;
	this.view.height = this.height;

	// deal with losing context..	
    var scope = this;
	this.view.addEventListener('webglcontextlost', function(event) { scope.handleContextLost(event); }, false)
	this.view.addEventListener('webglcontextrestored', function(event) { scope.handleContextRestored(event); }, false)

	this.batchs = [];

	var options = {
		alpha: this.transparent,
		antialias:!!antialias, // SPEED UP??
		premultipliedAlpha:false,
		stencil:true
	}

	//try 'experimental-webgl'
	try {
		PIXI.gl = this.gl = this.view.getContext("experimental-webgl",  options);
	} catch (e) {
		//try 'webgl'
		try {
			PIXI.gl = this.gl = this.view.getContext("webgl",  options);
		} catch (e) {
			// fail, not able to get a context
			throw new Error(" This browser does not support webGL. Try using the canvas renderer" + this);
		}
	}

    PIXI.initDefaultShaders();
 

	

   // PIXI.activateDefaultShader();

    var gl = this.gl;
    
    gl.useProgram(PIXI.defaultShader.program);


    PIXI.WebGLRenderer.gl = gl;

    this.batch = new PIXI.WebGLBatch(gl);
   	gl.disable(gl.DEPTH_TEST);
   	gl.disable(gl.CULL_FACE);

    gl.enable(gl.BLEND);
    gl.colorMask(true, true, true, this.transparent); 

    PIXI.projection = new PIXI.Point(400, 300);
    PIXI.offset = new PIXI.Point(0, 0);

    // TODO remove thease globals..

    this.resize(this.width, this.height);
    this.contextLost = false;

	//PIXI.pushShader(PIXI.defaultShader);

    this.stageRenderGroup = new PIXI.WebGLRenderGroup(this.gl, this.transparent);
  //  this.stageRenderGroup. = this.transparent
}

// constructor
PIXI.WebGLRenderer.prototype.constructor = PIXI.WebGLRenderer;

/**
 * Gets a new WebGLBatch from the pool
 *
 * @static
 * @method getBatch
 * @return {WebGLBatch}
 * @private 
 */
PIXI.WebGLRenderer.getBatch = function()
{
	if(PIXI._batchs.length == 0)
	{
		return new PIXI.WebGLBatch(PIXI.WebGLRenderer.gl);
	}
	else
	{
		return PIXI._batchs.pop();
	}
}

/**
 * Puts a batch back into the pool
 *
 * @static
 * @method returnBatch
 * @param batch {WebGLBatch} The batch to return
 * @private
 */
PIXI.WebGLRenderer.returnBatch = function(batch)
{
	batch.clean();	
	PIXI._batchs.push(batch);
}

/**
 * Renders the stage to its webGL view
 *
 * @method render
 * @param stage {Stage} the Stage element to be rendered
 */
PIXI.WebGLRenderer.prototype.render = function(stage)
{
	if(this.contextLost)return;
	
	
	// if rendering a new stage clear the batchs..
	if(this.__stage !== stage)
	{
		// TODO make this work
		// dont think this is needed any more?
		this.__stage = stage;
		this.stageRenderGroup.setRenderable(stage);
	}

	// update any textures	
	PIXI.WebGLRenderer.updateTextures();
		
	// update the scene graph	
	PIXI.visibleCount++;
	stage.updateTransform();
	
	var gl = this.gl;
	
	// -- Does this need to be set every frame? -- //
	gl.colorMask(true, true, true, this.transparent); 
	gl.viewport(0, 0, this.width, this.height);	
	
   	gl.bindFramebuffer(gl.FRAMEBUFFER, null);
		
	gl.clearColor(stage.backgroundColorSplit[0],stage.backgroundColorSplit[1],stage.backgroundColorSplit[2], !this.transparent);     
	gl.clear(gl.COLOR_BUFFER_BIT);

	// HACK TO TEST
	
	this.stageRenderGroup.backgroundColor = stage.backgroundColorSplit;
	
	PIXI.projection.x =  this.width/2;
	PIXI.projection.y =  -this.height/2;
	
	this.stageRenderGroup.render(PIXI.projection);
	
	// interaction
	// run interaction!
	if(stage.interactive)
	{
		//need to add some events!
		if(!stage._interactiveEventsAdded)
		{
			stage._interactiveEventsAdded = true;
			stage.interactionManager.setTarget(this);
		}
	}
	
	// after rendering lets confirm all frames that have been uodated..
	if(PIXI.Texture.frameUpdates.length > 0)
	{
		for (var i=0; i < PIXI.Texture.frameUpdates.length; i++) 
		{
		  	PIXI.Texture.frameUpdates[i].updateFrame = false;
		};
		
		PIXI.Texture.frameUpdates = [];
	}
}

/**
 * Updates the textures loaded into this webgl renderer
 *
 * @static
 * @method updateTextures
 * @private
 */
PIXI.WebGLRenderer.updateTextures = function()
{
	//TODO break this out into a texture manager...
	for (var i=0; i < PIXI.texturesToUpdate.length; i++) PIXI.WebGLRenderer.updateTexture(PIXI.texturesToUpdate[i]);
	for (var i=0; i < PIXI.texturesToDestroy.length; i++) PIXI.WebGLRenderer.destroyTexture(PIXI.texturesToDestroy[i]);
	PIXI.texturesToUpdate = [];
	PIXI.texturesToDestroy = [];
}

/**
 * Updates a loaded webgl texture
 *
 * @static
 * @method updateTexture
 * @param texture {Texture} The texture to update
 * @private
 */
PIXI.WebGLRenderer.updateTexture = function(texture)
{
	//TODO break this out into a texture manager...
	var gl = PIXI.gl;
	
	if(!texture._glTexture)
	{
		texture._glTexture = gl.createTexture();
	}

	if(texture.hasLoaded)
	{
		gl.bindTexture(gl.TEXTURE_2D, texture._glTexture);
	 	gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, true);

		gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, texture.source);
		gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);
		gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);

		// reguler...

		if(!texture._powerOf2)
		{
			gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
			gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);
		}
		else
		{
			gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.REPEAT);
			gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.REPEAT);
		}

		gl.bindTexture(gl.TEXTURE_2D, null);
	}
}

/**
 * Destroys a loaded webgl texture
 *
 * @method destroyTexture
 * @param texture {Texture} The texture to update
 * @private
 */
PIXI.WebGLRenderer.destroyTexture = function(texture)
{
	//TODO break this out into a texture manager...
	var gl = PIXI.gl;

	if(texture._glTexture)
	{
		texture._glTexture = gl.createTexture();
		gl.deleteTexture(gl.TEXTURE_2D, texture._glTexture);
	}
}

/**
 * resizes the webGL view to the specified width and height
 *
 * @method resize
 * @param width {Number} the new width of the webGL view
 * @param height {Number} the new height of the webGL view
 */
PIXI.WebGLRenderer.prototype.resize = function(width, height)
{
	this.width = width;
	this.height = height;

	this.view.width = width;
	this.view.height = height;

	this.gl.viewport(0, 0, this.width, this.height);	

	//var projectionMatrix = this.projectionMatrix;

	PIXI.projection.x =  this.width/2;
	PIXI.projection.y =  -this.height/2;
	
	//PIXI.size.x =  this.width/2;
	//PIXI.size.y =  -this.height/2;

//	projectionMatrix[0] = 2/this.width;
//	projectionMatrix[5] = -2/this.height;
//	projectionMatrix[12] = -1;
//	projectionMatrix[13] = 1;
}

/**
 * Handles a lost webgl context
 *
 * @method handleContextLost
 * @param event {Event}
 * @private
 */
PIXI.WebGLRenderer.prototype.handleContextLost = function(event)
{
	event.preventDefault();
	this.contextLost = true;
}

/**
 * Handles a restored webgl context
 *
 * @method handleContextRestored
 * @param event {Event}
 * @private
 */
PIXI.WebGLRenderer.prototype.handleContextRestored = function(event)
{
	this.gl = this.view.getContext("experimental-webgl",  {  	
		alpha: true
    });

	this.initShaders();	

	for(var key in PIXI.TextureCache) 
	{
        	var texture = PIXI.TextureCache[key].baseTexture;
        	texture._glTexture = null;
        	PIXI.WebGLRenderer.updateTexture(texture);
	};

	for (var i=0; i <  this.batchs.length; i++) 
	{
		this.batchs[i].restoreLostContext(this.gl)//
		this.batchs[i].dirty = true;
	};

	PIXI._restoreBatchs(this.gl);

	this.contextLost = false;
}

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

PIXI._batchs = [];

/**
 * @private
 */
PIXI._getBatch = function(gl)
{
	if(PIXI._batchs.length == 0)
	{
		return new PIXI.WebGLBatch(gl);
	}
	else
	{
		return PIXI._batchs.pop();
	}
}

/**
 * @private
 */
PIXI._returnBatch = function(batch)
{
	batch.clean();	
	PIXI._batchs.push(batch);
}

/**
 * @private
 */
PIXI._restoreBatchs = function(gl)
{
	for (var i=0; i < PIXI._batchs.length; i++) 
	{
	  PIXI._batchs[i].restoreLostContext(gl);
	};
}

/**
 * A WebGLBatch Enables a group of sprites to be drawn using the same settings.
 * if a group of sprites all have the same baseTexture and blendMode then they can be grouped into a batch.
 * All the sprites in a batch can then be drawn in one go by the GPU which is hugely efficient. ALL sprites
 * in the webGL renderer are added to a batch even if the batch only contains one sprite. Batching is handled
 * automatically by the webGL renderer. A good tip is: the smaller the number of batchs there are, the faster
 * the webGL renderer will run.
 *
 * @class WebGLBatch
 * @constructor
 * @param gl {WebGLContext} an instance of the webGL context
 */
PIXI.WebGLBatch = function(gl)
{
	this.gl = gl;
	
	this.size = 0;

	this.vertexBuffer =  gl.createBuffer();
	this.indexBuffer =  gl.createBuffer();
	this.uvBuffer =  gl.createBuffer();
	this.colorBuffer =  gl.createBuffer();
	this.blendMode = PIXI.blendModes.NORMAL;
	this.dynamicSize = 1;
}

// constructor
PIXI.WebGLBatch.prototype.constructor = PIXI.WebGLBatch;

/**
 * Cleans the batch so that is can be returned to an object pool and reused
 *
 * @method clean
 */
PIXI.WebGLBatch.prototype.clean = function()
{
	this.verticies = [];
	this.uvs = [];
	this.indices = [];
	this.colors = [];
	this.dynamicSize = 1;
	this.texture = null;
	this.last = null;
	this.size = 0;
	this.head;
	this.tail;
}

/**
 * Recreates the buffers in the event of a context loss
 *
 * @method restoreLostContext
 * @param gl {WebGLContext}
 */
PIXI.WebGLBatch.prototype.restoreLostContext = function(gl)
{
	this.gl = gl;
	this.vertexBuffer =  gl.createBuffer();
	this.indexBuffer =  gl.createBuffer();
	this.uvBuffer =  gl.createBuffer();
	this.colorBuffer =  gl.createBuffer();
}

/**
 * inits the batch's texture and blend mode based if the supplied sprite
 *
 * @method init
 * @param sprite {Sprite} the first sprite to be added to the batch. Only sprites with
 *		the same base texture and blend mode will be allowed to be added to this batch
 */	
PIXI.WebGLBatch.prototype.init = function(sprite)
{
	sprite.batch = this;
	this.dirty = true;
	this.blendMode = sprite.blendMode;
	this.texture = sprite.texture.baseTexture;
	this.head = sprite;
	this.tail = sprite;
	this.size = 1;

	this.growBatch();
}

/**
 * inserts a sprite before the specified sprite
 *
 * @method insertBefore
 * @param sprite {Sprite} the sprite to be added
 * @param nextSprite {nextSprite} the first sprite will be inserted before this sprite
 */	
PIXI.WebGLBatch.prototype.insertBefore = function(sprite, nextSprite)
{
	this.size++;

	sprite.batch = this;
	this.dirty = true;
	var tempPrev = nextSprite.__prev;
	nextSprite.__prev = sprite;
	sprite.__next = nextSprite;

	if(tempPrev)
	{
		sprite.__prev = tempPrev;
		tempPrev.__next = sprite;
	}
	else
	{
		this.head = sprite;
	}
}

/**
 * inserts a sprite after the specified sprite
 *
 * @method insertAfter
 * @param sprite {Sprite} the sprite to be added
 * @param  previousSprite {Sprite} the first sprite will be inserted after this sprite
 */	
PIXI.WebGLBatch.prototype.insertAfter = function(sprite, previousSprite)
{
	this.size++;

	sprite.batch = this;
	this.dirty = true;

	var tempNext = previousSprite.__next;
	previousSprite.__next = sprite;
	sprite.__prev = previousSprite;

	if(tempNext)
	{
		sprite.__next = tempNext;
		tempNext.__prev = sprite;
	}
	else
	{
		this.tail = sprite
	}
}

/**
 * removes a sprite from the batch
 *
 * @method remove
 * @param sprite {Sprite} the sprite to be removed
 */	
PIXI.WebGLBatch.prototype.remove = function(sprite)
{
	this.size--;

	if(this.size == 0)
	{
		sprite.batch = null;
		sprite.__prev = null;
		sprite.__next = null;
		return;
	}

	if(sprite.__prev)
	{
		sprite.__prev.__next = sprite.__next;
	}
	else
	{
		this.head = sprite.__next;
		this.head.__prev = null;
	}

	if(sprite.__next)
	{
		sprite.__next.__prev = sprite.__prev;
	}
	else
	{
		this.tail = sprite.__prev;
		this.tail.__next = null
	}

	sprite.batch = null;
	sprite.__next = null;
	sprite.__prev = null;
	this.dirty = true;
}

/**
 * Splits the batch into two with the specified sprite being the start of the new batch.
 *
 * @method split
 * @param sprite {Sprite} the sprite that indicates where the batch should be split
 * @return {WebGLBatch} the new batch
 */
PIXI.WebGLBatch.prototype.split = function(sprite)
{
	this.dirty = true;

	var batch = new PIXI.WebGLBatch(this.gl);
	batch.init(sprite);
	batch.texture = this.texture;
	batch.tail = this.tail;

	this.tail = sprite.__prev;
	this.tail.__next = null;

	sprite.__prev = null;
	// return a splite batch!

	// TODO this size is wrong!
	// need to recalculate :/ problem with a linked list!
	// unless it gets calculated in the "clean"?

	// need to loop through items as there is no way to know the length on a linked list :/
	var tempSize = 0;
	while(sprite)
	{
		tempSize++;
		sprite.batch = batch;
		sprite = sprite.__next;
	}

	batch.size = tempSize;
	this.size -= tempSize;

	return batch;
}

/**
 * Merges two batchs together
 *
 * @method merge
 * @param batch {WebGLBatch} the batch that will be merged 
 */
PIXI.WebGLBatch.prototype.merge = function(batch)
{
	this.dirty = true;

	this.tail.__next = batch.head;
	batch.head.__prev = this.tail;

	this.size += batch.size;

	this.tail = batch.tail;

	var sprite = batch.head;
	while(sprite)
	{
		sprite.batch = this;
		sprite = sprite.__next;
	}
}

/**
 * Grows the size of the batch. As the elements in the batch cannot have a dynamic size this
 * function is used to increase the size of the batch. It also creates a little extra room so
 * that the batch does not need to be resized every time a sprite is added
 *
 * @method growBatch
 */
PIXI.WebGLBatch.prototype.growBatch = function()
{
	var gl = this.gl;
	if( this.size == 1)
	{
		this.dynamicSize = 1;
	}
	else
	{
		this.dynamicSize = this.size * 1.5
	}
	// grow verts
	this.verticies = new Float32Array(this.dynamicSize * 8);

	gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexBuffer);
	gl.bufferData(gl.ARRAY_BUFFER,this.verticies , gl.DYNAMIC_DRAW);

	this.uvs  = new Float32Array( this.dynamicSize * 8 );
	gl.bindBuffer(gl.ARRAY_BUFFER, this.uvBuffer);
	gl.bufferData(gl.ARRAY_BUFFER, this.uvs , gl.DYNAMIC_DRAW);

	this.dirtyUVS = true;

	this.colors  = new Float32Array( this.dynamicSize * 4 );
	gl.bindBuffer(gl.ARRAY_BUFFER, this.colorBuffer);
	gl.bufferData(gl.ARRAY_BUFFER, this.colors , gl.DYNAMIC_DRAW);

	this.dirtyColors = true;

	this.indices = new Uint16Array(this.dynamicSize * 6); 
	var length = this.indices.length/6;

	for (var i=0; i < length; i++) 
	{
	    var index2 = i * 6;
	    var index3 = i * 4;
		this.indices[index2 + 0] = index3 + 0;
		this.indices[index2 + 1] = index3 + 1;
		this.indices[index2 + 2] = index3 + 2;
		this.indices[index2 + 3] = index3 + 0;
		this.indices[index2 + 4] = index3 + 2;
		this.indices[index2 + 5] = index3 + 3;
	};

	gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.indexBuffer);
    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, this.indices, gl.STATIC_DRAW);
}

/**
 * Refresh's all the data in the batch and sync's it with the webGL buffers
 *
 * @method refresh
 */
PIXI.WebGLBatch.prototype.refresh = function()
{
	var gl = this.gl;

	if (this.dynamicSize < this.size)
	{
		this.growBatch();
	}

	var indexRun = 0;
	var worldTransform, width, height, aX, aY, w0, w1, h0, h1, index;
	var a, b, c, d, tx, ty;

	var displayObject = this.head;

	while(displayObject)
	{
		index = indexRun * 8;

		var texture = displayObject.texture;

		var frame = texture.frame;
		var tw = texture.baseTexture.width;
		var th = texture.baseTexture.height;

		this.uvs[index + 0] = frame.x / tw;
		this.uvs[index +1] = frame.y / th;

		this.uvs[index +2] = (frame.x + frame.width) / tw;
		this.uvs[index +3] = frame.y / th;

		this.uvs[index +4] = (frame.x + frame.width) / tw;
		this.uvs[index +5] = (frame.y + frame.height) / th; 

		this.uvs[index +6] = frame.x / tw;
		this.uvs[index +7] = (frame.y + frame.height) / th;

		displayObject.updateFrame = false;

		colorIndex = indexRun * 4;
		this.colors[colorIndex] = this.colors[colorIndex + 1] = this.colors[colorIndex + 2] = this.colors[colorIndex + 3] = displayObject.worldAlpha;

		displayObject = displayObject.__next;

		indexRun ++;
	}

	this.dirtyUVS = true;
	this.dirtyColors = true;
}

/**
 * Updates all the relevant geometry and uploads the data to the GPU
 *
 * @method update
 */
PIXI.WebGLBatch.prototype.update = function()
{
	var gl = this.gl;
	var worldTransform, width, height, aX, aY, w0, w1, h0, h1, index, index2, index3

	var a, b, c, d, tx, ty;

	var indexRun = 0;

	var displayObject = this.head;
	var verticies = this.verticies;
	var uvs = this.uvs;
	var colors = this.colors;
	
	while(displayObject)
	{
		if(displayObject.vcount === PIXI.visibleCount)
		{
			width = displayObject.texture.frame.width;
			height = displayObject.texture.frame.height;

			// TODO trim??
			aX = displayObject.anchor.x;// - displayObject.texture.trim.x
			aY = displayObject.anchor.y; //- displayObject.texture.trim.y
			w0 = width * (1-aX);
			w1 = width * -aX;

			h0 = height * (1-aY);
			h1 = height * -aY;

			index = indexRun * 8;

			worldTransform = displayObject.worldTransform;

			a = worldTransform[0];
			b = worldTransform[3];
			c = worldTransform[1];
			d = worldTransform[4];
			tx = worldTransform[2];
			ty = worldTransform[5];

			verticies[index + 0 ] = a * w1 + c * h1 + tx; 
			verticies[index + 1 ] = d * h1 + b * w1 + ty;

			verticies[index + 2 ] = a * w0 + c * h1 + tx; 
			verticies[index + 3 ] = d * h1 + b * w0 + ty; 

			verticies[index + 4 ] = a * w0 + c * h0 + tx; 
			verticies[index + 5 ] = d * h0 + b * w0 + ty; 

			verticies[index + 6] =  a * w1 + c * h0 + tx; 
			verticies[index + 7] =  d * h0 + b * w1 + ty; 

			if(displayObject.updateFrame || displayObject.texture.updateFrame)
			{
				this.dirtyUVS = true;

				var texture = displayObject.texture;

				var frame = texture.frame;
				var tw = texture.baseTexture.width;
				var th = texture.baseTexture.height;

				uvs[index + 0] = frame.x / tw;
				uvs[index +1] = frame.y / th;

				uvs[index +2] = (frame.x + frame.width) / tw;
				uvs[index +3] = frame.y / th;

				uvs[index +4] = (frame.x + frame.width) / tw;
				uvs[index +5] = (frame.y + frame.height) / th; 

				uvs[index +6] = frame.x / tw;
				uvs[index +7] = (frame.y + frame.height) / th;

				displayObject.updateFrame = false;
			}

			// TODO this probably could do with some optimisation....
			if(displayObject.cacheAlpha != displayObject.worldAlpha)
			{
				displayObject.cacheAlpha = displayObject.worldAlpha;

				var colorIndex = indexRun * 4;
				colors[colorIndex] = colors[colorIndex + 1] = colors[colorIndex + 2] = colors[colorIndex + 3] = displayObject.worldAlpha;
				this.dirtyColors = true;
			}
		}
		else
		{
			index = indexRun * 8;

			verticies[index + 0 ] = verticies[index + 1 ] = verticies[index + 2 ] = verticies[index + 3 ] = verticies[index + 4 ] = verticies[index + 5 ] = verticies[index + 6] = 	verticies[index + 7] = 0;
		}

		indexRun++;
		displayObject = displayObject.__next;
   }
}

/**
 * Draws the batch to the frame buffer
 *
 * @method render
 */
PIXI.WebGLBatch.prototype.render = function(start, end)
{
	start = start || 0;

	if(end == undefined)end = this.size;
	
	if(this.dirty)
	{
		this.refresh();
		this.dirty = false;
	}

	if (this.size == 0)return;

	this.update();
	var gl = this.gl;

	//TODO optimize this!

	var shaderProgram = PIXI.defaultShader;
	
	//gl.useProgram(shaderProgram);

	// update the verts..
	gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexBuffer);
	// ok..
	gl.bufferSubData(gl.ARRAY_BUFFER, 0, this.verticies)
    gl.vertexAttribPointer(shaderProgram.aVertexPosition, 2, gl.FLOAT, false, 0, 0);
	// update the uvs
	//var isDefault = (shaderProgram == PIXI.shaderProgram)

   	gl.bindBuffer(gl.ARRAY_BUFFER, this.uvBuffer);

    if(this.dirtyUVS)
    {
    	this.dirtyUVS = false;
    	gl.bufferSubData(gl.ARRAY_BUFFER,  0, this.uvs);
    }

    gl.vertexAttribPointer(shaderProgram.aTextureCoord, 2, gl.FLOAT, false, 0, 0);

    gl.activeTexture(gl.TEXTURE0);
    gl.bindTexture(gl.TEXTURE_2D, this.texture._glTexture);

	// update color!
	gl.bindBuffer(gl.ARRAY_BUFFER, this.colorBuffer);

	if(this.dirtyColors)
    {
    	this.dirtyColors = false;
    	gl.bufferSubData(gl.ARRAY_BUFFER, 0, this.colors);
	}

    gl.vertexAttribPointer(shaderProgram.colorAttribute, 1, gl.FLOAT, false, 0, 0);
	// dont need to upload!
    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.indexBuffer);

	var len = end - start;

    // DRAW THAT this!
    gl.drawElements(gl.TRIANGLES, len * 6, gl.UNSIGNED_SHORT, start * 2 * 6 );
}

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

/**
 * A WebGLBatch Enables a group of sprites to be drawn using the same settings.
 * if a group of sprites all have the same baseTexture and blendMode then they can be
 * grouped into a batch. All the sprites in a batch can then be drawn in one go by the
 * GPU which is hugely efficient. ALL sprites in the webGL renderer are added to a batch
 * even if the batch only contains one sprite. Batching is handled automatically by the
 * webGL renderer. A good tip is: the smaller the number of batchs there are, the faster
 * the webGL renderer will run.
 *
 * @class WebGLBatch
 * @contructor
 * @param gl {WebGLContext} An instance of the webGL context
 */
PIXI.WebGLRenderGroup = function(gl, transparent)
{
	this.gl = gl;
	this.root;
	
	this.backgroundColor;
	this.transparent = transparent == undefined ? true : transparent;
	
	this.batchs = [];
	this.toRemove = [];
	console.log(this.transparent)
	this.filterManager = new PIXI.WebGLFilterManager(this.transparent);
}

// constructor
PIXI.WebGLRenderGroup.prototype.constructor = PIXI.WebGLRenderGroup;

/**
 * Add a display object to the webgl renderer
 *
 * @method setRenderable
 * @param displayObject {DisplayObject}
 * @private 
 */
PIXI.WebGLRenderGroup.prototype.setRenderable = function(displayObject)
{
	// has this changed??
	if(this.root)this.removeDisplayObjectAndChildren(this.root);
	
	displayObject.worldVisible = displayObject.visible;
	
	// soooooo //
	// to check if any batchs exist already??
	
	// TODO what if its already has an object? should remove it
	this.root = displayObject;
	this.addDisplayObjectAndChildren(displayObject);
}

/**
 * Renders the stage to its webgl view
 *
 * @method render
 * @param projection {Object}
 */
PIXI.WebGLRenderGroup.prototype.render = function(projection, buffer)
{
	PIXI.WebGLRenderer.updateTextures();
	
	var gl = this.gl;
	gl.uniform2f(PIXI.defaultShader.projectionVector, projection.x, projection.y);

	this.filterManager.begin(projection, buffer);

	
	gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_ALPHA);
	// will render all the elements in the group
	var renderable;

	for (var i=0; i < this.batchs.length; i++) 
	{
		
		renderable = this.batchs[i];
		if(renderable instanceof PIXI.WebGLBatch)
		{
			this.batchs[i].render();
			continue;
		}
		
		// render special
		this.renderSpecial(renderable, projection);
	}
	
}

/**
 * Renders a specific displayObject
 *
 * @method renderSpecific
 * @param displayObject {DisplayObject}
 * @param projection {Object}
 * @private
 */
PIXI.WebGLRenderGroup.prototype.renderSpecific = function(displayObject, projection, buffer)
{
	PIXI.WebGLRenderer.updateTextures();
	var gl = this.gl;

	gl.uniform2f(PIXI.defaultShader.projectionVector, projection.x, projection.y);

	this.filterManager.begin(projection, buffer);

	// to do!
	// render part of the scene...
	
	var startIndex;
	var startBatchIndex;
	
	var endIndex;
	var endBatchIndex;
	
	/*
	 *  LOOK FOR THE NEXT SPRITE
	 *  This part looks for the closest next sprite that can go into a batch
	 *  it keeps looking until it finds a sprite or gets to the end of the display
	 *  scene graph
	 */
	var nextRenderable = displayObject.first;
	while(nextRenderable._iNext)
	{
		if(nextRenderable.renderable && nextRenderable.__renderGroup)break;
		nextRenderable = nextRenderable._iNext;
	}
	var startBatch = nextRenderable.batch;
	//console.log(nextRenderable);
	
	//console.log(renderable)
	if(nextRenderable instanceof PIXI.Sprite)
	{
		startBatch = nextRenderable.batch;
		
		var head = startBatch.head;
		var next = head;
		
		// ok now we have the batch.. need to find the start index!
		if(head == nextRenderable)
		{
			startIndex = 0;
		}
		else
		{
			startIndex = 1;
			
			while(head.__next != nextRenderable)
			{
				startIndex++;
				head = head.__next;
			}
		}
	}
	else
	{
		startBatch = nextRenderable;
	}
	
	// Get the LAST renderable object
	var lastRenderable = displayObject.last;
	while(lastRenderable._iPrev)
	{
		if(lastRenderable.renderable && lastRenderable.__renderGroup)break;
		lastRenderable = lastRenderable._iNext;
	}
	
	if(lastRenderable instanceof PIXI.Sprite)
	{
		endBatch = lastRenderable.batch;
		
		var head = endBatch.head;
		
		if(head == lastRenderable)
		{
			endIndex = 0;
		}
		else
		{
			endIndex = 1;
			
			while(head.__next != lastRenderable)
			{
				endIndex++;
				head = head.__next;
			}
		}
	}
	else
	{
		endBatch = lastRenderable;
	}
	
	//console.log(endBatch);
	// TODO - need to fold this up a bit!
	
	if(startBatch == endBatch)
	{
		if(startBatch instanceof PIXI.WebGLBatch)
		{
			startBatch.render(startIndex, endIndex+1);
		}
		else
		{
			this.renderSpecial(startBatch, projection);
		}
		return;
	}
	
	// now we have first and last!
	startBatchIndex = this.batchs.indexOf(startBatch);
	endBatchIndex = this.batchs.indexOf(endBatch);
	
	// DO the first batch
	if(startBatch instanceof PIXI.WebGLBatch)
	{
		startBatch.render(startIndex);
	}
	else
	{
		this.renderSpecial(startBatch, projection);
	}
	
	// DO the middle batchs..
	for (var i=startBatchIndex+1; i < endBatchIndex; i++) 
	{
		renderable = this.batchs[i];
	
		if(renderable instanceof PIXI.WebGLBatch)
		{
			this.batchs[i].render();
		}
		else
		{
			this.renderSpecial(renderable, projection);
		}
	}
	
	// DO the last batch..
	if(endBatch instanceof PIXI.WebGLBatch)
	{
		endBatch.render(0, endIndex+1);
	}
	else
	{
		this.renderSpecial(endBatch, projection);
	}
}

/**
 * Renders a specific renderable
 *
 * @method renderSpecial
 * @param renderable {DisplayObject}
 * @param projection {Object}
 * @private
 */
PIXI.WebGLRenderGroup.prototype.renderSpecial = function(renderable, projection)
{
	
	var worldVisible = renderable.vcount === PIXI.visibleCount


	if(renderable instanceof PIXI.TilingSprite)
	{
		if(worldVisible)this.renderTilingSprite(renderable, projection);
	}
	else if(renderable instanceof PIXI.Strip)
	{
		if(worldVisible)this.renderStrip(renderable, projection);
	}
	else if(renderable instanceof PIXI.CustomRenderable)
	{
		if(worldVisible) renderable.renderWebGL(this, projection);
	}
	else if(renderable instanceof PIXI.Graphics)
	{
		if(worldVisible && renderable.renderable) PIXI.WebGLGraphics.renderGraphics(renderable, projection);
	}
	else if(renderable instanceof PIXI.FilterBlock)
	{
		this.handleFilterBlock(renderable, projection);
	}
}

flip = false;
var maskStack = [];
var maskPosition = 0;

//var usedMaskStack = [];

PIXI.WebGLRenderGroup.prototype.handleFilterBlock = function(filterBlock, projection)
{
	/*
	 * for now only masks are supported..
	 */
	var gl = PIXI.gl;
	
	if(filterBlock.open)
	{
		if(filterBlock.data instanceof Array)
		{
			this.filterManager.pushFilter(filterBlock);
			// ok so..
			
		}
		else
		{	
			maskPosition++;

			maskStack.push(filterBlock)
	
			gl.enable(gl.STENCIL_TEST);
			
			gl.colorMask(false, false, false, false);
			
			gl.stencilFunc(gl.ALWAYS,1,1);
			gl.stencilOp(gl.KEEP,gl.KEEP,gl.INCR);
	
			PIXI.WebGLGraphics.renderGraphics(filterBlock.data, projection);
			
			gl.colorMask(true, true, true, true);
			gl.stencilFunc(gl.NOTEQUAL,0,maskStack.length);
			gl.stencilOp(gl.KEEP,gl.KEEP,gl.KEEP);
		}
	}
	else
	{
		if(filterBlock.data instanceof Array)
		{
			this.filterManager.popFilter();
		}
		else
		{
			var maskData = maskStack.pop(filterBlock)


			if(maskData)
			{
				gl.colorMask(false, false, false, false);
			
				gl.stencilFunc(gl.ALWAYS,1,1);
				gl.stencilOp(gl.KEEP,gl.KEEP,gl.DECR);

				PIXI.WebGLGraphics.renderGraphics(maskData.data, projection);
			
				gl.colorMask(true, true, true, true);
				gl.stencilFunc(gl.NOTEQUAL,0,maskStack.length);
				gl.stencilOp(gl.KEEP,gl.KEEP,gl.KEEP);
			};

			gl.disable(gl.STENCIL_TEST);
		}
	}
}

/**
 * Updates a webgl texture
 *
 * @method updateTexture
 * @param displayObject {DisplayObject}
 * @private
 */
PIXI.WebGLRenderGroup.prototype.updateTexture = function(displayObject)
{
	
	// TODO definitely can optimse this function..
	
	this.removeObject(displayObject);
	
	/*
	 *  LOOK FOR THE PREVIOUS RENDERABLE
	 *  This part looks for the closest previous sprite that can go into a batch
	 *  It keeps going back until it finds a sprite or the stage
	 */
	var previousRenderable = displayObject.first;
	while(previousRenderable != this.root)
	{
		previousRenderable = previousRenderable._iPrev;
		if(previousRenderable.renderable && previousRenderable.__renderGroup)break;
	}
	
	/*
	 *  LOOK FOR THE NEXT SPRITE
	 *  This part looks for the closest next sprite that can go into a batch
	 *  it keeps looking until it finds a sprite or gets to the end of the display
	 *  scene graph
	 */
	var nextRenderable = displayObject.last;
	while(nextRenderable._iNext)
	{
		nextRenderable = nextRenderable._iNext;
		if(nextRenderable.renderable && nextRenderable.__renderGroup)break;
	}
	
	this.insertObject(displayObject, previousRenderable, nextRenderable);
}

/**
 * Adds filter blocks
 *
 * @method addFilterBlocks
 * @param start {FilterBlock}
 * @param end {FilterBlock}
 * @private
 */
PIXI.WebGLRenderGroup.prototype.addFilterBlocks = function(start, end)
{
	start.__renderGroup = this;
	end.__renderGroup = this;
	/*
	 *  LOOK FOR THE PREVIOUS RENDERABLE
	 *  This part looks for the closest previous sprite that can go into a batch
	 *  It keeps going back until it finds a sprite or the stage
	 */
	var previousRenderable = start;
	while(previousRenderable != this.root.first)
	{
		previousRenderable = previousRenderable._iPrev;
		if(previousRenderable.renderable && previousRenderable.__renderGroup)break;
	}
	this.insertAfter(start, previousRenderable);
		
	/*
	 *  LOOK FOR THE NEXT SPRITE
	 *  This part looks for the closest next sprite that can go into a batch
	 *  it keeps looking until it finds a sprite or gets to the end of the display
	 *  scene graph
	 */
	var previousRenderable2 = end;
	while(previousRenderable2 != this.root.first)
	{
		previousRenderable2 = previousRenderable2._iPrev;
		if(previousRenderable2.renderable && previousRenderable2.__renderGroup)break;
	}
	this.insertAfter(end, previousRenderable2);
}

/**
 * Remove filter blocks
 *
 * @method removeFilterBlocks
 * @param start {FilterBlock}
 * @param end {FilterBlock}
 * @private
 */
PIXI.WebGLRenderGroup.prototype.removeFilterBlocks = function(start, end)
{
	this.removeObject(start);
	this.removeObject(end);
}

/**
 * Adds a display object and children to the webgl context
 *
 * @method addDisplayObjectAndChildren
 * @param displayObject {DisplayObject}
 * @private
 */
PIXI.WebGLRenderGroup.prototype.addDisplayObjectAndChildren = function(displayObject)
{
	if(displayObject.__renderGroup)displayObject.__renderGroup.removeDisplayObjectAndChildren(displayObject);
	
	/*
	 *  LOOK FOR THE PREVIOUS RENDERABLE
	 *  This part looks for the closest previous sprite that can go into a batch
	 *  It keeps going back until it finds a sprite or the stage
	 */
	
	var previousRenderable = displayObject.first;
	while(previousRenderable != this.root.first)
	{
		previousRenderable = previousRenderable._iPrev;
		if(previousRenderable.renderable && previousRenderable.__renderGroup)break;
	}
	
	/*
	 *  LOOK FOR THE NEXT SPRITE
	 *  This part looks for the closest next sprite that can go into a batch
	 *  it keeps looking until it finds a sprite or gets to the end of the display
	 *  scene graph
	 */
	var nextRenderable = displayObject.last;
	while(nextRenderable._iNext)
	{
		nextRenderable = nextRenderable._iNext;
		if(nextRenderable.renderable && nextRenderable.__renderGroup)break;
	}
	
	// one the display object hits this. we can break the loop	
	
	var tempObject = displayObject.first;
	var testObject = displayObject.last._iNext;
	do	
	{
		tempObject.__renderGroup = this;
		
		if(tempObject.renderable)
		{
		
			this.insertObject(tempObject, previousRenderable, nextRenderable);
			previousRenderable = tempObject;
		}
		
		tempObject = tempObject._iNext;
	}
	while(tempObject != testObject)
}

/**
 * Removes a display object and children to the webgl context
 *
 * @method removeDisplayObjectAndChildren
 * @param displayObject {DisplayObject}
 * @private
 */
PIXI.WebGLRenderGroup.prototype.removeDisplayObjectAndChildren = function(displayObject)
{
	if(displayObject.__renderGroup != this)return;
	
//	var displayObject = displayObject.first;
	var lastObject = displayObject.last;
	do	
	{
		displayObject.__renderGroup = null;
		if(displayObject.renderable)this.removeObject(displayObject);
		displayObject = displayObject._iNext;
	}
	while(displayObject)
}

/**
 * Inserts a displayObject into the linked list
 *
 * @method insertObject
 * @param displayObject {DisplayObject}
 * @param previousObject {DisplayObject}
 * @param nextObject {DisplayObject}
 * @private
 */
PIXI.WebGLRenderGroup.prototype.insertObject = function(displayObject, previousObject, nextObject)
{
	// while looping below THE OBJECT MAY NOT HAVE BEEN ADDED
	var previousSprite = previousObject;
	var nextSprite = nextObject;
	
	/*
	 * so now we have the next renderable and the previous renderable
	 * 
	 */
	if(displayObject instanceof PIXI.Sprite)
	{
		var previousBatch
		var nextBatch
		
		if(previousSprite instanceof PIXI.Sprite)
		{
			previousBatch = previousSprite.batch;
			if(previousBatch)
			{
				if(previousBatch.texture == displayObject.texture.baseTexture && previousBatch.blendMode == displayObject.blendMode)
				{
					previousBatch.insertAfter(displayObject, previousSprite);
					return;
				}
			}
		}
		else
		{
			// TODO reword!
			previousBatch = previousSprite;
		}
	
		if(nextSprite)
		{
			if(nextSprite instanceof PIXI.Sprite)
			{
				nextBatch = nextSprite.batch;
			
				//batch may not exist if item was added to the display list but not to the webGL
				if(nextBatch)
				{
					if(nextBatch.texture == displayObject.texture.baseTexture && nextBatch.blendMode == displayObject.blendMode)
					{
						nextBatch.insertBefore(displayObject, nextSprite);
						return;
					}
					else
					{
						if(nextBatch == previousBatch)
						{
							// THERE IS A SPLIT IN THIS BATCH! //
							var splitBatch = previousBatch.split(nextSprite);
							// COOL!
							// add it back into the array	
							/*
							 * OOPS!
							 * seems the new sprite is in the middle of a batch
							 * lets split it.. 
							 */
							var batch = PIXI.WebGLRenderer.getBatch();

							var index = this.batchs.indexOf( previousBatch );
							batch.init(displayObject);
							this.batchs.splice(index+1, 0, batch, splitBatch);
							
							return;
						}
					}
				}
			}
			else
			{
				// TODO re-word!
				
				nextBatch = nextSprite;
			}
		}
		
		/*
		 * looks like it does not belong to any batch!
		 * but is also not intersecting one..
		 * time to create anew one!
		 */
		
		var batch =  PIXI.WebGLRenderer.getBatch();
		batch.init(displayObject);

		if(previousBatch) // if this is invalid it means 
		{
			var index = this.batchs.indexOf( previousBatch );
			this.batchs.splice(index+1, 0, batch);
		}
		else
		{
			this.batchs.push(batch);
		}
		
		return;
	}
	else if(displayObject instanceof PIXI.TilingSprite)
	{
		
		// add to a batch!!
		this.initTilingSprite(displayObject);
	//	this.batchs.push(displayObject);
		
	}
	else if(displayObject instanceof PIXI.Strip)
	{
		// add to a batch!!
		this.initStrip(displayObject);
	//	this.batchs.push(displayObject);
	}
	else if(displayObject)// instanceof PIXI.Graphics)
	{
		//displayObject.initWebGL(this);
		
		// add to a batch!!
		//this.initStrip(displayObject);
		//this.batchs.push(displayObject);
	}
	
	this.insertAfter(displayObject, previousSprite);
			
	// insert and SPLIT!

}

/**
 * Inserts a displayObject into the linked list
 *
 * @method insertAfter
 * @param item {DisplayObject}
 * @param displayObject {DisplayObject} The object to insert
 * @private
 */
PIXI.WebGLRenderGroup.prototype.insertAfter = function(item, displayObject)
{
	if(displayObject instanceof PIXI.Sprite)
	{
		var previousBatch = displayObject.batch;
		
		if(previousBatch)
		{
			// so this object is in a batch!
			
			// is it not? need to split the batch
			if(previousBatch.tail == displayObject)
			{
				// is it tail? insert in to batchs	
				var index = this.batchs.indexOf( previousBatch );
				this.batchs.splice(index+1, 0, item);
			}
			else
			{
				// TODO MODIFY ADD / REMOVE CHILD TO ACCOUNT FOR FILTERS (also get prev and next) //
				
				// THERE IS A SPLIT IN THIS BATCH! //
				var splitBatch = previousBatch.split(displayObject.__next);
				
				// COOL!
				// add it back into the array	
				/*
				 * OOPS!
				 * seems the new sprite is in the middle of a batch
				 * lets split it.. 
				 */
				var index = this.batchs.indexOf( previousBatch );
				this.batchs.splice(index+1, 0, item, splitBatch);
			}
		}
		else
		{
			this.batchs.push(item);
		}
	}
	else
	{
		var index = this.batchs.indexOf( displayObject );
		this.batchs.splice(index+1, 0, item);
	}
}

/**
 * Removes a displayObject from the linked list
 *
 * @method removeObject
 * @param displayObject {DisplayObject} The object to remove
 * @private
 */
PIXI.WebGLRenderGroup.prototype.removeObject = function(displayObject)
{
	// loop through children..
	// display object //
	
	// add a child from the render group..
	// remove it and all its children!
	//displayObject.cacheVisible = false;//displayObject.visible;

	/*
	 * removing is a lot quicker..
	 * 
	 */
	var batchToRemove;
	
	if(displayObject instanceof PIXI.Sprite)
	{
		// should always have a batch!
		var batch = displayObject.batch;
		if(!batch)return; // this means the display list has been altered befre rendering
		
		batch.remove(displayObject);
		
		if(batch.size==0)
		{
			batchToRemove = batch;
		}
	}
	else
	{
		batchToRemove = displayObject;
	}
	
	/*
	 * Looks like there is somthing that needs removing!
	 */
	if(batchToRemove)	
	{
		var index = this.batchs.indexOf( batchToRemove );
		if(index == -1)return;// this means it was added then removed before rendered
		
		// ok so.. check to see if you adjacent batchs should be joined.
		// TODO may optimise?
		if(index == 0 || index == this.batchs.length-1)
		{
			// wha - eva! just get of the empty batch!
			this.batchs.splice(index, 1);
			if(batchToRemove instanceof PIXI.WebGLBatch)PIXI.WebGLRenderer.returnBatch(batchToRemove);
		
			return;
		}
		
		if(this.batchs[index-1] instanceof PIXI.WebGLBatch && this.batchs[index+1] instanceof PIXI.WebGLBatch)
		{
			if(this.batchs[index-1].texture == this.batchs[index+1].texture && this.batchs[index-1].blendMode == this.batchs[index+1].blendMode)
			{
				//console.log("MERGE")
				this.batchs[index-1].merge(this.batchs[index+1]);
				
				if(batchToRemove instanceof PIXI.WebGLBatch)PIXI.WebGLRenderer.returnBatch(batchToRemove);
				PIXI.WebGLRenderer.returnBatch(this.batchs[index+1]);
				this.batchs.splice(index, 2);
				return;
			}
		}
		
		this.batchs.splice(index, 1);
		if(batchToRemove instanceof PIXI.WebGLBatch)PIXI.WebGLRenderer.returnBatch(batchToRemove);
	}
}


/**
 * Initializes a tiling sprite
 *
 * @method initTilingSprite
 * @param sprite {TilingSprite} The tiling sprite to initialize
 * @private
 */
PIXI.WebGLRenderGroup.prototype.initTilingSprite = function(sprite)
{
	var gl = this.gl;

	// make the texture tilable..
			
	sprite.verticies = new Float32Array([0, 0,
										  sprite.width, 0,
										  sprite.width,  sprite.height,
										 0,  sprite.height]);
					
	sprite.uvs = new Float32Array([0, 0,
									1, 0,
									1, 1,
									0, 1]);
				
	sprite.colors = new Float32Array([1,1,1,1]);
	
	sprite.indices =  new Uint16Array([0, 1, 3,2])//, 2]);
	
	sprite._vertexBuffer = gl.createBuffer();
	sprite._indexBuffer = gl.createBuffer();
	sprite._uvBuffer = gl.createBuffer();
	sprite._colorBuffer = gl.createBuffer();
						
	gl.bindBuffer(gl.ARRAY_BUFFER, sprite._vertexBuffer);
	gl.bufferData(gl.ARRAY_BUFFER, sprite.verticies, gl.STATIC_DRAW);

	gl.bindBuffer(gl.ARRAY_BUFFER, sprite._uvBuffer);
    gl.bufferData(gl.ARRAY_BUFFER,  sprite.uvs, gl.DYNAMIC_DRAW);

    gl.bindBuffer(gl.ARRAY_BUFFER, sprite._colorBuffer);
	gl.bufferData(gl.ARRAY_BUFFER, sprite.colors, gl.STATIC_DRAW);

    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, sprite._indexBuffer);
    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, sprite.indices, gl.STATIC_DRAW);
    
//    return ( (x > 0) && ((x & (x - 1)) == 0) );

	if(sprite.texture.baseTexture._glTexture)
	{
    	gl.bindTexture(gl.TEXTURE_2D, sprite.texture.baseTexture._glTexture);
    	gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.REPEAT);
		gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.REPEAT);
		sprite.texture.baseTexture._powerOf2 = true;
	}
	else
	{
		sprite.texture.baseTexture._powerOf2 = true;
	}
}

/**
 * Renders a Strip
 *
 * @method renderStrip
 * @param strip {Strip} The strip to render
 * @param projection {Object}
 * @private
 */
PIXI.WebGLRenderGroup.prototype.renderStrip = function(strip, projection)
{
	var gl = this.gl;

	PIXI.activateStripShader();

	var shader = PIXI.stripShader;

	var program = shader.program;
	
	var m = PIXI.mat3.clone(strip.worldTransform);
	
	PIXI.mat3.transpose(m);
	
//	console.log(projection)
	// set the matrix transform for the 
 	gl.uniformMatrix3fv(shader.translationMatrix, false, m);
	gl.uniform2f(shader.projectionVector, projection.x, projection.y);
	gl.uniform2f(shader.offsetVector, -PIXI.offset.x, -PIXI.offset.y);
	
	gl.uniform1f(shader.alpha, strip.worldAlpha);

	/*
	if(strip.blendMode == PIXI.blendModes.NORMAL)
	{
		gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_ALPHA);
	}
	else
	{
		gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_COLOR);
	}
	*/
	
	//console.log("!!")
	if(!strip.dirty)
	{	
		gl.bindBuffer(gl.ARRAY_BUFFER, strip._vertexBuffer);
		gl.bufferSubData(gl.ARRAY_BUFFER, 0, strip.verticies)
	    gl.vertexAttribPointer(shader.aVertexPosition, 2, gl.FLOAT, false, 0, 0);
		
		// update the uvs
	   	gl.bindBuffer(gl.ARRAY_BUFFER, strip._uvBuffer);
	    gl.vertexAttribPointer(shader.aTextureCoord, 2, gl.FLOAT, false, 0, 0);
			
	    gl.activeTexture(gl.TEXTURE0);
	    gl.bindTexture(gl.TEXTURE_2D, strip.texture.baseTexture._glTexture);
		
		gl.bindBuffer(gl.ARRAY_BUFFER, strip._colorBuffer);
	    gl.vertexAttribPointer(shader.colorAttribute, 1, gl.FLOAT, false, 0, 0);
		
		// dont need to upload!
	    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, strip._indexBuffer);
	}
	else
	{
		strip.dirty = false;
		gl.bindBuffer(gl.ARRAY_BUFFER, strip._vertexBuffer);
		gl.bufferData(gl.ARRAY_BUFFER, strip.verticies, gl.STATIC_DRAW)
	    gl.vertexAttribPointer(shader.aVertexPosition, 2, gl.FLOAT, false, 0, 0);
		
		// update the uvs
	   	gl.bindBuffer(gl.ARRAY_BUFFER, strip._uvBuffer);
	   	gl.bufferData(gl.ARRAY_BUFFER, strip.uvs, gl.STATIC_DRAW)
	    gl.vertexAttribPointer(shader.aTextureCoord, 2, gl.FLOAT, false, 0, 0);
			
	    gl.activeTexture(gl.TEXTURE0);
	    gl.bindTexture(gl.TEXTURE_2D, strip.texture.baseTexture._glTexture);
	//	console.log(strip.texture.baseTexture._glTexture)
		gl.bindBuffer(gl.ARRAY_BUFFER, strip._colorBuffer);
		gl.bufferData(gl.ARRAY_BUFFER, strip.colors, gl.STATIC_DRAW)
	    gl.vertexAttribPointer(shader.colorAttribute, 1, gl.FLOAT, false, 0, 0);
		
		// dont need to upload!
	    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, strip._indexBuffer);
	    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, strip.indices, gl.STATIC_DRAW);
	    
	}
	
	gl.drawElements(gl.TRIANGLE_STRIP, strip.indices.length, gl.UNSIGNED_SHORT, 0);
    
    PIXI.deactivateStripShader();
  	//gl.useProgram(PIXI.currentProgram);
}

/**
 * Renders a TilingSprite
 *
 * @method renderTilingSprite
 * @param sprite {TilingSprite} The tiling sprite to render
 * @param projectionMatrix {Object}
 * @private
 */
PIXI.WebGLRenderGroup.prototype.renderTilingSprite = function(sprite, projectionMatrix)
{
	var gl = this.gl;


	var shaderProgram = PIXI.shaderProgram;
	
	var tilePosition = sprite.tilePosition;
	var tileScale = sprite.tileScale;
	
	var offsetX =  tilePosition.x/sprite.texture.baseTexture.width;
	var offsetY =  tilePosition.y/sprite.texture.baseTexture.height;
	
	var scaleX =  (sprite.width / sprite.texture.baseTexture.width)  / tileScale.x;
	var scaleY =  (sprite.height / sprite.texture.baseTexture.height) / tileScale.y;

	sprite.uvs[0] = 0 - offsetX;
	sprite.uvs[1] = 0 - offsetY;
	
	sprite.uvs[2] = (1 * scaleX)  -offsetX;
	sprite.uvs[3] = 0 - offsetY;
	
	sprite.uvs[4] = (1 *scaleX) - offsetX;
	sprite.uvs[5] = (1 *scaleY) - offsetY;
	
	sprite.uvs[6] = 0 - offsetX;
	sprite.uvs[7] = (1 *scaleY) - offsetY;
	
	gl.bindBuffer(gl.ARRAY_BUFFER, sprite._uvBuffer);
	gl.bufferSubData(gl.ARRAY_BUFFER, 0, sprite.uvs)
	
	this.renderStrip(sprite, projectionMatrix);
}

/**
 * Initializes a strip to be rendered
 *
 * @method initStrip
 * @param strip {Strip} The strip to initialize
 * @private
 */
PIXI.WebGLRenderGroup.prototype.initStrip = function(strip)
{
	// build the strip!
	var gl = this.gl;
	var shaderProgram = this.shaderProgram;
	
	strip._vertexBuffer = gl.createBuffer();
	strip._indexBuffer = gl.createBuffer();
	strip._uvBuffer = gl.createBuffer();
	strip._colorBuffer = gl.createBuffer();
	
	gl.bindBuffer(gl.ARRAY_BUFFER, strip._vertexBuffer);
	gl.bufferData(gl.ARRAY_BUFFER, strip.verticies, gl.DYNAMIC_DRAW);

	gl.bindBuffer(gl.ARRAY_BUFFER, strip._uvBuffer);
    gl.bufferData(gl.ARRAY_BUFFER,  strip.uvs, gl.STATIC_DRAW);

    gl.bindBuffer(gl.ARRAY_BUFFER, strip._colorBuffer);
	gl.bufferData(gl.ARRAY_BUFFER, strip.colors, gl.STATIC_DRAW);

	
    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, strip._indexBuffer);
    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, strip.indices, gl.STATIC_DRAW);
}


/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */


PIXI.WebGLFilterManager = function(transparent)
{
	this.transparent = transparent;
	
	this.filterStack = [];
	this.texturePool = [];
	
	this.offsetX = 0;
	this.offsetY = 0;
	
	this.initShaderBuffers();
}

// API

PIXI.WebGLFilterManager.prototype.begin = function(projection, buffer)
{
	this.width = projection.x * 2;
	this.height = -projection.y * 2;
	this.buffer = buffer;
}

PIXI.WebGLFilterManager.prototype.pushFilter = function(filterBlock)
{
	var gl = PIXI.gl;

	// filter program
	// OPTIMISATION - the first filter is free if its a simple color change?
	this.filterStack.push(filterBlock);

	var filter = filterBlock.filterPasses[0];

	

	this.offsetX += filterBlock.target.filterArea.x;
	this.offsetY += filterBlock.target.filterArea.y;
	
	
	
	
	
	var texture = this.texturePool.pop();
	if(!texture)texture = new PIXI.FilterTexture(this.width, this.height);
	
	gl.bindTexture(gl.TEXTURE_2D,  texture.texture);
	
	this.getBounds(filterBlock.target);
		
	// addpadding?
	//displayObject.filterArea.x

	var filterArea = filterBlock.target.filterArea;

	var padidng = filter.padding;
	filterArea.x -= padidng;
	filterArea.y -= padidng;
	filterArea.width += padidng * 2;
	filterArea.height += padidng * 2;

	// cap filter to screen size..
	if(filterArea.x < 0)filterArea.x = 0;	
	if(filterArea.width > this.width)filterArea.width = this.width;
	if(filterArea.y < 0)filterArea.y = 0;	
	if(filterArea.height > this.height)filterArea.height = this.height;


	//gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA,  filterArea.width, filterArea.height, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);
	gl.bindFramebuffer(gl.FRAMEBUFFER, texture.frameBuffer);
   
  // console.log(filterArea)
	// set view port
	gl.viewport(0, 0, filterArea.width, filterArea.height);	
	
	PIXI.projection.x = filterArea.width/2;
	PIXI.projection.y = -filterArea.height/2;
	
	PIXI.offset.x = -filterArea.x; 
	PIXI.offset.y = -filterArea.y;

	//console.log(PIXI.defaultShader.projectionVector)
	// update projection
	gl.uniform2f(PIXI.defaultShader.projectionVector, filterArea.width/2, -filterArea.height/2);
	gl.uniform2f(PIXI.defaultShader.offsetVector, -filterArea.x, -filterArea.y);
	//PIXI.primitiveProgram

	gl.colorMask(true, true, true, true); 
	gl.clearColor(0,0,0, 0);     
	gl.clear(gl.COLOR_BUFFER_BIT);
	
	//filter.texture = texture;
	filterBlock._glFilterTexture = texture;

	//console.log("PUSH")
}


PIXI.WebGLFilterManager.prototype.popFilter = function()
{
	
	var gl = PIXI.gl;
	
	var filterBlock = this.filterStack.pop();



	var filterArea = filterBlock.target.filterArea;

	var texture = filterBlock._glFilterTexture;

	if(filterBlock.filterPasses.length > 1)
	{
		gl.viewport(0, 0, filterArea.width, filterArea.height);

		gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexBuffer);
	
		this.vertexArray[0] = 0;
		this.vertexArray[1] = filterArea.height;
		
		this.vertexArray[2] = filterArea.width;
		this.vertexArray[3] = filterArea.height;
		
		this.vertexArray[4] = 0;
		this.vertexArray[5] = 0;
		
		this.vertexArray[6] = filterArea.width;
		this.vertexArray[7] = 0;


		gl.bufferSubData(gl.ARRAY_BUFFER, 0, this.vertexArray);

	
		gl.bindBuffer(gl.ARRAY_BUFFER, this.uvBuffer);
		// nnow set the uvs..
		this.uvArray[2] = filterArea.width/this.width;
		this.uvArray[5] = filterArea.height/this.height;
		this.uvArray[6] = filterArea.width/this.width;
		this.uvArray[7] = filterArea.height/this.height;
		
		gl.bufferSubData(gl.ARRAY_BUFFER, 0, this.uvArray);

		var inputTexture = texture;
		var outputTexture = this.texturePool.pop();
		if(!outputTexture)outputTexture = new PIXI.FilterTexture(this.width, this.height);
		
		// need to clear this FBO as it may have some left over elements from a prvious filter.
		gl.bindFramebuffer(gl.FRAMEBUFFER, outputTexture.frameBuffer );     
		gl.clear(gl.COLOR_BUFFER_BIT);
	 
		gl.disable(gl.BLEND);
		
		for (var i = 0; i < filterBlock.filterPasses.length-1; i++) 
		{
			var filterPass = filterBlock.filterPasses[i];
	
			gl.bindFramebuffer(gl.FRAMEBUFFER, outputTexture.frameBuffer );
			
			// set texture
		    gl.activeTexture(gl.TEXTURE0);
			gl.bindTexture(gl.TEXTURE_2D, inputTexture.texture);
			
			// draw texture..
			//filterPass.applyFilterPass(filterArea.width, filterArea.height);
			this.applyFilterPass(filterPass, filterArea, filterArea.width, filterArea.height);

			// swap the textures..
			var temp = inputTexture;
			inputTexture = outputTexture;
			outputTexture = temp;
			
		};

		gl.enable(gl.BLEND);

		texture = inputTexture;
		this.texturePool.push(outputTexture);
	}

	var filter = filterBlock.filterPasses[filterBlock.filterPasses.length-1];
	
	this.offsetX -= filterArea.x;
	this.offsetY -= filterArea.y;

	
	var sizeX = this.width;
	var sizeY = this.height;
	
	var offsetX = 0;
	var offsetY = 0;
	
	var buffer = this.buffer;
	
	// time to render the filters texture to the previous scene
	if(this.filterStack.length === 0)
	{
		gl.colorMask(true, true, true, this.transparent); 
	}
	else
	{
		var currentFilter = this.filterStack[this.filterStack.length-1];
		var filterArea = currentFilter.target.filterArea;
		
		sizeX = filterArea.width;
		sizeY = filterArea.height;
		
		offsetX = filterArea.x;
		offsetY = filterArea.y;
		
		buffer =  currentFilter._glFilterTexture.frameBuffer;
	}
	
	

	// TODO need toremove thease global elements..
	PIXI.projection.x = sizeX/2;
	PIXI.projection.y = -sizeY/2;

	PIXI.offset.x = offsetX;
	PIXI.offset.y = offsetY; 
	

	var filterArea =  filterBlock.target.filterArea;
	var x = filterArea.x-offsetX;
	var y = filterArea.y-offsetY;
	
	// update the buffers..	
	// make sure to flip the y!
	gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexBuffer);
	
	this.vertexArray[0] = x;
	this.vertexArray[1] = y + filterArea.height;
	
	this.vertexArray[2] = x + filterArea.width;
	this.vertexArray[3] = y + filterArea.height;
	
	this.vertexArray[4] = x;
	this.vertexArray[5] = y;
	
	this.vertexArray[6] = x + filterArea.width;
	this.vertexArray[7] = y;

	gl.bufferSubData(gl.ARRAY_BUFFER, 0, this.vertexArray);
	
	gl.bindBuffer(gl.ARRAY_BUFFER, this.uvBuffer);

	this.uvArray[2] = filterArea.width/this.width;
	this.uvArray[5] = filterArea.height/this.height;
	this.uvArray[6] = filterArea.width/this.width;
	this.uvArray[7] = filterArea.height/this.height;
	
	gl.bufferSubData(gl.ARRAY_BUFFER, 0, this.uvArray);

	gl.viewport(0, 0, sizeX, sizeY);	
	// bind the buffer
	gl.bindFramebuffer(gl.FRAMEBUFFER, buffer );
	
	// set texture
    gl.activeTexture(gl.TEXTURE0);
	gl.bindTexture(gl.TEXTURE_2D, texture.texture);
	
	// apply!
	//filter.applyFilterPass(sizeX, sizeY);
	this.applyFilterPass(filter, filterArea, sizeX, sizeY);

	// now restore the regular shader..
    gl.useProgram(PIXI.defaultShader.program);
	gl.uniform2f(PIXI.defaultShader.projectionVector, sizeX/2, -sizeY/2);
	gl.uniform2f(PIXI.defaultShader.offsetVector, -offsetX, -offsetY);

	// return the texture to the pool
	this.texturePool.push(texture);
	filterBlock._glFilterTexture = null;	
}

PIXI.WebGLFilterManager.prototype.applyFilterPass = function(filter, filterArea, width, height)
{
	// use program
	var gl = PIXI.gl;

	if(!filter.shader)
	{
		var shader = new PIXI.PixiShader();
				
		shader.fragmentSrc = filter.fragmentSrc;
		shader.uniforms = filter.uniforms;
		shader.init();
		
		filter.shader = shader;
	}

	var shader = filter.shader;
	
	// set the shader
	gl.useProgram(shader.program);

	gl.uniform2f(shader.projectionVector, width/2, -height/2);
	gl.uniform2f(shader.offsetVector, 0,0)

	if(filter.uniforms.dimensions)
	{
		//console.log(filter.uniforms.dimensions)
		filter.uniforms.dimensions.value[0] = this.width;//width;
		filter.uniforms.dimensions.value[1] = this.height;//height;
		filter.uniforms.dimensions.value[2] = this.vertexArray[0];
		filter.uniforms.dimensions.value[3] = this.vertexArray[5];//filterArea.height;
	//	console.log(this.vertexArray[5])
	}

	shader.syncUniforms();
	
	gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexBuffer);
    gl.vertexAttribPointer(shader.aVertexPosition, 2, gl.FLOAT, false, 0, 0);
   
   	gl.bindBuffer(gl.ARRAY_BUFFER, this.uvBuffer);
    gl.vertexAttribPointer(shader.aTextureCoord, 2, gl.FLOAT, false, 0, 0);
	
    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.indexBuffer);
    
	// draw the filter...
    gl.drawElements(gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );
}

PIXI.WebGLFilterManager.prototype.initShaderBuffers = function()
{
	var gl = PIXI.gl;
	
	// create some buffers
	this.vertexBuffer = gl.createBuffer();	
	this.uvBuffer = gl.createBuffer();
	this.indexBuffer = gl.createBuffer();
	
	// bind and upload the vertexs..
	// keep a refferance to the vertexFloatData..
	this.vertexArray = new Float32Array([0.0, 0.0, 
								         1.0, 0.0, 
								         0.0, 1.0, 
								         1.0, 1.0]);
	
	gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexBuffer);
	gl.bufferData(
    gl.ARRAY_BUFFER, 
    this.vertexArray, 
    gl.STATIC_DRAW);
    
    
    // bind and upload the uv buffer
	this.uvArray = new Float32Array([0.0, 0.0, 
								     1.0, 0.0, 
								     0.0, 1.0, 
								     1.0, 1.0]);
								         
	gl.bindBuffer(gl.ARRAY_BUFFER, this.uvBuffer);
	gl.bufferData(
    gl.ARRAY_BUFFER, 
    this.uvArray, 
    gl.STATIC_DRAW);
    
	// bind and upload the index
	gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.indexBuffer);
	gl.bufferData(
    gl.ELEMENT_ARRAY_BUFFER, 
    new Uint16Array([0, 1, 2, 1, 3, 2]), 
    gl.STATIC_DRAW);
}

PIXI.WebGLFilterManager.prototype.getBounds = function(displayObject)
{
	// time to get the width and height of the object!
	var worldTransform, width, height, aX, aY, w0, w1, h0, h1, index, doTest;
	var a, b, c, d, tx, ty, x1, x2, x3, x4, y1, y2, y3, y4;

	var tempObject = displayObject.first;
	var testObject = displayObject.last._iNext;
	
	var maxX = -Infinity;
	var maxY = -Infinity;
	
	var minX = Infinity;
	var minY = Infinity;
	
	do	
	{
		// TODO can be optimized! - what if there is no scale / rotation?
		
		if(tempObject.visible)
		{
			if(tempObject instanceof PIXI.Sprite)
			{
				width = tempObject.texture.frame.width;
				height = tempObject.texture.frame.height;

				// TODO trim??
				aX = tempObject.anchor.x;
				aY = tempObject.anchor.y;
				w0 = width * (1-aX);
				w1 = width * -aX;

				h0 = height * (1-aY);
				h1 = height * -aY;

				doTest = true;
			}
			else if(tempObject instanceof PIXI.Graphics)
			{
				tempObject.updateFilterBounds();

				var bounds = tempObject.bounds;

				width = bounds.width;
				height = bounds.height;

				w0 = bounds.x
				w1 = bounds.x + bounds.width;

				h0 = bounds.y
				h1 = bounds.y + bounds.height;

				doTest = true;	
			}
		}
		
		if(doTest)
		{
			worldTransform = tempObject.worldTransform;

			a = worldTransform[0];
			b = worldTransform[3];
			c = worldTransform[1];
			d = worldTransform[4];
			tx = worldTransform[2];
			ty = worldTransform[5];

			x1 = a * w1 + c * h1 + tx; 
			y1 = d * h1 + b * w1 + ty;

			x2 = a * w0 + c * h1 + tx; 
			y2 = d * h1 + b * w0 + ty; 

			x3 = a * w0 + c * h0 + tx; 
			y3 = d * h0 + b * w0 + ty; 

			x4 =  a * w1 + c * h0 + tx; 
			y4 =  d * h0 + b * w1 + ty; 

			minX = x1 < minX ? x1 : minX;
			minX = x2 < minX ? x2 : minX;
			minX = x3 < minX ? x3 : minX;
			minX = x4 < minX ? x4 : minX;
			
			minY = y1 < minY ? y1 : minY;
			minY = y2 < minY ? y2 : minY;
			minY = y3 < minY ? y3 : minY;
			minY = y4 < minY ? y4 : minY;
			
			maxX = x1 > maxX ? x1 : maxX;
			maxX = x2 > maxX ? x2 : maxX;
			maxX = x3 > maxX ? x3 : maxX;
			maxX = x4 > maxX ? x4 : maxX;
			
			maxY = y1 > maxY ? y1 : maxY;
			maxY = y2 > maxY ? y2 : maxY;
			maxY = y3 > maxY ? y3 : maxY;
			maxY = y4 > maxY ? y4 : maxY;
		}

		doTest = false;
		tempObject = tempObject._iNext;

	}
	while(tempObject != testObject)
	
	// maximum bounds is the size of the screen..
	//minX = minX > 0 ? minX : 0;
	//minY = minY > 0 ? minY : 0;

	displayObject.filterArea.x = minX;
	displayObject.filterArea.y = minY;

//	console.log(maxX+ " : " + minX)
	displayObject.filterArea.width = maxX - minX;
	displayObject.filterArea.height = maxY - minY;
}

PIXI.FilterTexture = function(width, height)
{
	var gl = PIXI.gl;
	
    // next time to create a frame buffer and texture
	this.frameBuffer = gl.createFramebuffer();
    this.texture = gl.createTexture();

    gl.bindTexture(gl.TEXTURE_2D,  this.texture);
    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);
	gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);
	gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
	gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);
	gl.bindFramebuffer(gl.FRAMEBUFFER, this.framebuffer );
	
	gl.bindFramebuffer(gl.FRAMEBUFFER, this.frameBuffer );
	gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, this.texture, 0);
	
	this.resize(width, height);
}

PIXI.FilterTexture.prototype.resize = function(width, height)
{
	this.width = width;
	this.height = height;

	var gl = PIXI.gl;

	gl.bindTexture(gl.TEXTURE_2D,  this.texture);
	gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA,  width, height, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);
	
}
/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */


/**
 * the CanvasRenderer draws the stage and all its content onto a 2d canvas. This renderer should be used for browsers that do not support webGL.
 * Dont forget to add the view to your DOM or you will not see anything :)
 *
 * @class CanvasRenderer
 * @constructor
 * @param width=0 {Number} the width of the canvas view
 * @param height=0 {Number} the height of the canvas view
 * @param view {Canvas} the canvas to use as a view, optional
 * @param transparent=false {Boolean} the transparency of the render view, default false
 */
PIXI.CanvasRenderer = function(width, height, view, transparent)
{
	this.transparent = transparent;

	/**
	 * The width of the canvas view
	 *
	 * @property width
	 * @type Number
	 * @default 800
	 */
	this.width = width || 800;

	/**
	 * The height of the canvas view
	 *
	 * @property height
	 * @type Number
	 * @default 600
	 */
	this.height = height || 600;

	/**
	 * The canvas element that the everything is drawn to
	 *
	 * @property view
	 * @type Canvas
	 */
	this.view = view || document.createElement( 'canvas' );

	/**
	 * The canvas context that the everything is drawn to
	 * @property context
	 * @type Canvas 2d Context
	 */
	this.context = this.view.getContext("2d");

	this.refresh = true;
	// hack to enable some hardware acceleration!
	//this.view.style["transform"] = "translatez(0)";
	
    this.view.width = this.width;
	this.view.height = this.height;  
	this.count = 0;
}

// constructor
PIXI.CanvasRenderer.prototype.constructor = PIXI.CanvasRenderer;

/**
 * Renders the stage to its canvas view
 *
 * @method render
 * @param stage {Stage} the Stage element to be rendered
 */
PIXI.CanvasRenderer.prototype.render = function(stage)
{
	
	//stage.__childrenAdded = [];
	//stage.__childrenRemoved = [];
	
	// update textures if need be
	PIXI.texturesToUpdate = [];
	PIXI.texturesToDestroy = [];
	
	PIXI.visibleCount++;
	stage.updateTransform();
	
	// update the background color
	if(this.view.style.backgroundColor!=stage.backgroundColorString && !this.transparent)this.view.style.backgroundColor = stage.backgroundColorString;

	this.context.setTransform(1,0,0,1,0,0); 
	this.context.clearRect(0, 0, this.width, this.height)
    this.renderDisplayObject(stage);
    //as
   
    // run interaction!
	if(stage.interactive)
	{
		//need to add some events!
		if(!stage._interactiveEventsAdded)
		{
			stage._interactiveEventsAdded = true;
			stage.interactionManager.setTarget(this);
		}
	}
	
	// remove frame updates..
	if(PIXI.Texture.frameUpdates.length > 0)
	{
		PIXI.Texture.frameUpdates = [];
	}
	
	
}

/**
 * resizes the canvas view to the specified width and height
 *
 * @method resize
 * @param width {Number} the new width of the canvas view
 * @param height {Number} the new height of the canvas view
 */
PIXI.CanvasRenderer.prototype.resize = function(width, height)
{
	this.width = width;
	this.height = height;
	
	this.view.width = width;
	this.view.height = height;
}

/**
 * Renders a display object
 *
 * @method renderDisplayObject
 * @param displayObject {DisplayObject} The displayObject to render
 * @private
 */
PIXI.CanvasRenderer.prototype.renderDisplayObject = function(displayObject)
{
	// no loger recurrsive!
	var transform;
	var context = this.context;
	
	context.globalCompositeOperation = 'source-over';
	
	// one the display object hits this. we can break the loop	
	var testObject = displayObject.last._iNext;
	displayObject = displayObject.first;
	
	do	
	{
		transform = displayObject.worldTransform;
		
		if(!displayObject.visible)
		{
			displayObject = displayObject.last._iNext;
			continue;
		}
		
		if(!displayObject.renderable)
		{
			displayObject = displayObject._iNext;
			continue;
		}
		
		if(displayObject instanceof PIXI.Sprite)
		{
				
			var frame = displayObject.texture.frame;
			
			if(frame && frame.width && frame.height)
			{
				context.globalAlpha = displayObject.worldAlpha;
				
				context.setTransform(transform[0], transform[3], transform[1], transform[4], transform[2], transform[5]);
					
				context.drawImage(displayObject.texture.baseTexture.source, 
								   frame.x,
								   frame.y,
								   frame.width,
								   frame.height,
								   (displayObject.anchor.x) * -frame.width, 
								   (displayObject.anchor.y) * -frame.height,
								   frame.width,
								   frame.height);
			}					   
	   	}
	   	else if(displayObject instanceof PIXI.Strip)
		{
			context.setTransform(transform[0], transform[3], transform[1], transform[4], transform[2], transform[5])
			this.renderStrip(displayObject);
		}
		else if(displayObject instanceof PIXI.TilingSprite)
		{
			context.setTransform(transform[0], transform[3], transform[1], transform[4], transform[2], transform[5])
			this.renderTilingSprite(displayObject);
		}
		else if(displayObject instanceof PIXI.CustomRenderable)
		{
			context.setTransform(transform[0], transform[3], transform[1], transform[4], transform[2], transform[5]);
			displayObject.renderCanvas(this);
		}
		else if(displayObject instanceof PIXI.Graphics)
		{
			context.setTransform(transform[0], transform[3], transform[1], transform[4], transform[2], transform[5])
			PIXI.CanvasGraphics.renderGraphics(displayObject, context);
		}
		else if(displayObject instanceof PIXI.FilterBlock)
		{
			if(displayObject.data instanceof PIXI.Graphics)
 			{
				var mask = displayObject.data;

				if(displayObject.open)
				{
					context.save();
					
					var cacheAlpha = mask.alpha;
					var maskTransform = mask.worldTransform;
					
					context.setTransform(maskTransform[0], maskTransform[3], maskTransform[1], maskTransform[4], maskTransform[2], maskTransform[5])
					
					mask.worldAlpha = 0.5;
					
					context.worldAlpha = 0;
					
					PIXI.CanvasGraphics.renderGraphicsMask(mask, context);
					context.clip();
					
					mask.worldAlpha = cacheAlpha;
				}
				else
				{
					context.restore();
				}
			}
			else
			{
				// only masks supported right now!
			}
		}
	//	count++
		displayObject = displayObject._iNext;
		
		
	}
	while(displayObject != testObject)

	
}

/**
 * Renders a flat strip
 *
 * @method renderStripFlat
 * @param strip {Strip} The Strip to render
 * @private
 */
PIXI.CanvasRenderer.prototype.renderStripFlat = function(strip)
{
	var context = this.context;
	var verticies = strip.verticies;
	var uvs = strip.uvs;
	
	var length = verticies.length/2;
	this.count++;
	
	context.beginPath();
	for (var i=1; i < length-2; i++) 
	{
		
		// draw some triangles!
		var index = i*2;
		
		 var x0 = verticies[index],   x1 = verticies[index+2], x2 = verticies[index+4];
 		 var y0 = verticies[index+1], y1 = verticies[index+3], y2 = verticies[index+5];
 		 
		context.moveTo(x0, y0);
		context.lineTo(x1, y1);
		context.lineTo(x2, y2);
		
	};	
	
	context.fillStyle = "#FF0000";
	context.fill();
	context.closePath();
}

/**
 * Renders a tiling sprite
 *
 * @method renderTilingSprite
 * @param sprite {TilingSprite} The tilingsprite to render
 * @private
 */
PIXI.CanvasRenderer.prototype.renderTilingSprite = function(sprite)
{
	var context = this.context;
	
	context.globalAlpha = sprite.worldAlpha;
	
 	if(!sprite.__tilePattern) sprite.__tilePattern = context.createPattern(sprite.texture.baseTexture.source, "repeat");
 	
	context.beginPath();
	
	var tilePosition = sprite.tilePosition;
	var tileScale = sprite.tileScale;
	
    // offset
    context.scale(tileScale.x,tileScale.y);
    context.translate(tilePosition.x, tilePosition.y);
 	
	context.fillStyle = sprite.__tilePattern;
	context.fillRect(-tilePosition.x,-tilePosition.y,sprite.width / tileScale.x, sprite.height / tileScale.y);
	
	context.scale(1/tileScale.x, 1/tileScale.y);
    context.translate(-tilePosition.x, -tilePosition.y);
    
    context.closePath();
}

/**
 * Renders a strip
 *
 * @method renderStrip
 * @param strip {Strip} The Strip to render
 * @private
 */
PIXI.CanvasRenderer.prototype.renderStrip = function(strip)
{
	var context = this.context;

	// draw triangles!!
	var verticies = strip.verticies;
	var uvs = strip.uvs;
	
	var length = verticies.length/2;
	this.count++;
	for (var i=1; i < length-2; i++) 
	{
		
		// draw some triangles!
		var index = i*2;
		
		 var x0 = verticies[index],   x1 = verticies[index+2], x2 = verticies[index+4];
 		 var y0 = verticies[index+1], y1 = verticies[index+3], y2 = verticies[index+5];
 		 
  		 var u0 = uvs[index] * strip.texture.width,   u1 = uvs[index+2] * strip.texture.width, u2 = uvs[index+4]* strip.texture.width;
   		 var v0 = uvs[index+1]* strip.texture.height, v1 = uvs[index+3] * strip.texture.height, v2 = uvs[index+5]* strip.texture.height;


		context.save();
		context.beginPath();
		context.moveTo(x0, y0);
		context.lineTo(x1, y1);
		context.lineTo(x2, y2);
		context.closePath();
		
		context.clip();
		
		
        // Compute matrix transform
        var delta = u0*v1 + v0*u2 + u1*v2 - v1*u2 - v0*u1 - u0*v2;
        var delta_a = x0*v1 + v0*x2 + x1*v2 - v1*x2 - v0*x1 - x0*v2;
        var delta_b = u0*x1 + x0*u2 + u1*x2 - x1*u2 - x0*u1 - u0*x2;
        var delta_c = u0*v1*x2 + v0*x1*u2 + x0*u1*v2 - x0*v1*u2 - v0*u1*x2 - u0*x1*v2;
        var delta_d = y0*v1 + v0*y2 + y1*v2 - v1*y2 - v0*y1 - y0*v2;
        var delta_e = u0*y1 + y0*u2 + u1*y2 - y1*u2 - y0*u1 - u0*y2;
        var delta_f = u0*v1*y2 + v0*y1*u2 + y0*u1*v2 - y0*v1*u2 - v0*u1*y2 - u0*y1*v2;
		
		
		
		    
        context.transform(delta_a/delta, delta_d/delta,
                      delta_b/delta, delta_e/delta,
                      delta_c/delta, delta_f/delta);
                 
		context.drawImage(strip.texture.baseTexture.source, 0, 0);
	  	context.restore();
	};
	
}

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */


/**
 * A set of functions used by the canvas renderer to draw the primitive graphics data
 *
 * @class CanvasGraphics
 */
PIXI.CanvasGraphics = function()
{

}


/*
 * Renders the graphics object
 *
 * @static
 * @private
 * @method renderGraphics
 * @param graphics {Graphics}
 * @param context {Context2D}
 */
PIXI.CanvasGraphics.renderGraphics = function(graphics, context)
{
	var worldAlpha = graphics.worldAlpha;

	for (var i=0; i < graphics.graphicsData.length; i++)
	{
		var data = graphics.graphicsData[i];
		var points = data.points;

		context.strokeStyle = color = '#' + ('00000' + ( data.lineColor | 0).toString(16)).substr(-6);

		context.lineWidth = data.lineWidth;

		if(data.type == PIXI.Graphics.POLY)
		{
			context.beginPath();

			context.moveTo(points[0], points[1]);

			for (var j=1; j < points.length/2; j++)
			{
				context.lineTo(points[j * 2], points[j * 2 + 1]);
			}

	      	// if the first and last point are the same close the path - much neater :)
	      	if(points[0] == points[points.length-2] && points[1] == points[points.length-1])
	      	{
	      		context.closePath();
	      	}

			if(data.fill)
			{
				context.globalAlpha = data.fillAlpha * worldAlpha;
				context.fillStyle = color = '#' + ('00000' + ( data.fillColor | 0).toString(16)).substr(-6);
      			context.fill();
			}
			if(data.lineWidth)
			{
				context.globalAlpha = data.lineAlpha * worldAlpha;
      			context.stroke();
			}
		}
		else if(data.type == PIXI.Graphics.RECT)
		{

			if(data.fillColor || data.fillColor === 0)
			{
				context.globalAlpha = data.fillAlpha * worldAlpha;
				context.fillStyle = color = '#' + ('00000' + ( data.fillColor | 0).toString(16)).substr(-6);
				context.fillRect(points[0], points[1], points[2], points[3]);

			}
			if(data.lineWidth)
			{
				context.globalAlpha = data.lineAlpha * worldAlpha;
				context.strokeRect(points[0], points[1], points[2], points[3]);
			}

		}
		else if(data.type == PIXI.Graphics.CIRC)
		{
			// TODO - need to be Undefined!
      		context.beginPath();
			context.arc(points[0], points[1], points[2],0,2*Math.PI);
			context.closePath();

			if(data.fill)
			{
				context.globalAlpha = data.fillAlpha * worldAlpha;
				context.fillStyle = color = '#' + ('00000' + ( data.fillColor | 0).toString(16)).substr(-6);
      			context.fill();
			}
			if(data.lineWidth)
			{
				context.globalAlpha = data.lineAlpha * worldAlpha;
      			context.stroke();
			}
		}
		else if(data.type == PIXI.Graphics.ELIP)
		{

			// elipse code taken from: http://stackoverflow.com/questions/2172798/how-to-draw-an-oval-in-html5-canvas

			var elipseData =  data.points;

			var w = elipseData[2] * 2;
			var h = elipseData[3] * 2;

			var x = elipseData[0] - w/2;
			var y = elipseData[1] - h/2;

      		context.beginPath();

			var kappa = .5522848,
			ox = (w / 2) * kappa, // control point offset horizontal
			oy = (h / 2) * kappa, // control point offset vertical
			xe = x + w,           // x-end
			ye = y + h,           // y-end
			xm = x + w / 2,       // x-middle
			ym = y + h / 2;       // y-middle

			context.moveTo(x, ym);
			context.bezierCurveTo(x, ym - oy, xm - ox, y, xm, y);
			context.bezierCurveTo(xm + ox, y, xe, ym - oy, xe, ym);
			context.bezierCurveTo(xe, ym + oy, xm + ox, ye, xm, ye);
			context.bezierCurveTo(xm - ox, ye, x, ym + oy, x, ym);

			context.closePath();

			if(data.fill)
			{
				context.globalAlpha = data.fillAlpha * worldAlpha;
				context.fillStyle = color = '#' + ('00000' + ( data.fillColor | 0).toString(16)).substr(-6);
      			context.fill();
			}
			if(data.lineWidth)
			{
				context.globalAlpha = data.lineAlpha * worldAlpha;
      			context.stroke();
			}
		}

	};
}

/*
 * Renders a graphics mask
 *
 * @static
 * @private
 * @method renderGraphicsMask
 * @param graphics {Graphics}
 * @param context {Context2D}
 */
PIXI.CanvasGraphics.renderGraphicsMask = function(graphics, context)
{
	var worldAlpha = graphics.worldAlpha;

	var len = graphics.graphicsData.length;
	if(len === 0)return;

	if(len > 1)
	{
		len = 1;
		console.log("Pixi.js warning: masks in canvas can only mask using the first path in the graphics object")
	}

	for (var i=0; i < 1; i++)
	{
		var data = graphics.graphicsData[i];
		var points = data.points;

		if(data.type == PIXI.Graphics.POLY)
		{
			context.beginPath();
			context.moveTo(points[0], points[1]);

			for (var j=1; j < points.length/2; j++)
			{
				context.lineTo(points[j * 2], points[j * 2 + 1]);
			}

	      	// if the first and last point are the same close the path - much neater :)
	      	if(points[0] == points[points.length-2] && points[1] == points[points.length-1])
	      	{
	      		context.closePath();
	      	}

		}
		else if(data.type == PIXI.Graphics.RECT)
		{
			context.beginPath();
			context.rect(points[0], points[1], points[2], points[3]);
			context.closePath();
		}
		else if(data.type == PIXI.Graphics.CIRC)
		{
			// TODO - need to be Undefined!
      		context.beginPath();
			context.arc(points[0], points[1], points[2],0,2*Math.PI);
			context.closePath();
		}
		else if(data.type == PIXI.Graphics.ELIP)
		{

			// elipse code taken from: http://stackoverflow.com/questions/2172798/how-to-draw-an-oval-in-html5-canvas
			var elipseData =  data.points;

			var w = elipseData[2] * 2;
			var h = elipseData[3] * 2;

			var x = elipseData[0] - w/2;
			var y = elipseData[1] - h/2;

      		context.beginPath();

			var kappa = .5522848,
			ox = (w / 2) * kappa, // control point offset horizontal
			oy = (h / 2) * kappa, // control point offset vertical
			xe = x + w,           // x-end
			ye = y + h,           // y-end
			xm = x + w / 2,       // x-middle
			ym = y + h / 2;       // y-middle

			context.moveTo(x, ym);
			context.bezierCurveTo(x, ym - oy, xm - ox, y, xm, y);
			context.bezierCurveTo(xm + ox, y, xe, ym - oy, xe, ym);
			context.bezierCurveTo(xe, ym + oy, xm + ox, ye, xm, ye);
			context.bezierCurveTo(xm - ox, ye, x, ym + oy, x, ym);
			context.closePath();
		}


	};
}

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */


/**
 * The Graphics class contains a set of methods that you can use to create primitive shapes and lines.
 * It is important to know that with the webGL renderer only simple polys can be filled at this stage
 * Complex polys will not be filled. Heres an example of a complex poly: http://www.goodboydigital.com/wp-content/uploads/2013/06/complexPolygon.png
 *
 * @class Graphics
 * @extends DisplayObjectContainer
 * @constructor
 */
PIXI.Graphics = function()
{
	PIXI.DisplayObjectContainer.call( this );

	this.renderable = true;

    /**
     * The alpha of the fill of this graphics object
     *
     * @property fillAlpha
     * @type Number
     */
	this.fillAlpha = 1;

    /**
     * The width of any lines drawn
     *
     * @property lineWidth
     * @type Number
     */
	this.lineWidth = 0;

    /**
     * The color of any lines drawn
     *
     * @property lineColor
     * @type String
     */
	this.lineColor = "black";

    /**
     * Graphics data
     *
     * @property graphicsData
     * @type Array
     * @private
     */
	this.graphicsData = [];

    /**
     * Current path
     *
     * @property currentPath
     * @type Object
     * @private
     */
	this.currentPath = {points:[]};
}

// constructor
PIXI.Graphics.prototype = Object.create( PIXI.DisplayObjectContainer.prototype );
PIXI.Graphics.prototype.constructor = PIXI.Graphics;

/**
 * Specifies a line style used for subsequent calls to Graphics methods such as the lineTo() method or the drawCircle() method.
 *
 * @method lineStyle
 * @param lineWidth {Number} width of the line to draw, will update the object's stored style
 * @param color {Number} color of the line to draw, will update the object's stored style
 * @param alpha {Number} alpha of the line to draw, will update the object's stored style
 */
PIXI.Graphics.prototype.lineStyle = function(lineWidth, color, alpha)
{
	if(this.currentPath.points.length == 0)this.graphicsData.pop();

	this.lineWidth = lineWidth || 0;
	this.lineColor = color || 0;
	this.lineAlpha = (alpha == undefined) ? 1 : alpha;

	this.currentPath = {lineWidth:this.lineWidth, lineColor:this.lineColor, lineAlpha:this.lineAlpha,
						fillColor:this.fillColor, fillAlpha:this.fillAlpha, fill:this.filling, points:[], type:PIXI.Graphics.POLY};

	this.graphicsData.push(this.currentPath);
}

/**
 * Moves the current drawing position to (x, y).
 *
 * @method moveTo
 * @param x {Number} the X coord to move to
 * @param y {Number} the Y coord to move to
 */
PIXI.Graphics.prototype.moveTo = function(x, y)
{
	if(this.currentPath.points.length == 0)this.graphicsData.pop();

	this.currentPath = this.currentPath = {lineWidth:this.lineWidth, lineColor:this.lineColor, lineAlpha:this.lineAlpha,
						fillColor:this.fillColor, fillAlpha:this.fillAlpha, fill:this.filling, points:[], type:PIXI.Graphics.POLY};

	this.currentPath.points.push(x, y);

	this.graphicsData.push(this.currentPath);
}

/**
 * Draws a line using the current line style from the current drawing position to (x, y);
 * the current drawing position is then set to (x, y).
 *
 * @method lineTo
 * @param x {Number} the X coord to draw to
 * @param y {Number} the Y coord to draw to
 */
PIXI.Graphics.prototype.lineTo = function(x, y)
{
	this.currentPath.points.push(x, y);
	this.dirty = true;
}

/**
 * Specifies a simple one-color fill that subsequent calls to other Graphics methods
 * (such as lineTo() or drawCircle()) use when drawing.
 *
 * @method beginFill
 * @param color {uint} the color of the fill
 * @param alpha {Number} the alpha
 */
PIXI.Graphics.prototype.beginFill = function(color, alpha)
{
	this.filling = true;
	this.fillColor = color || 0;
	this.fillAlpha = (alpha == undefined) ? 1 : alpha;
}

/**
 * Applies a fill to the lines and shapes that were added since the last call to the beginFill() method.
 *
 * @method endFill
 */
PIXI.Graphics.prototype.endFill = function()
{
	this.filling = false;
	this.fillColor = null;
	this.fillAlpha = 1;
}

/**
 * @method drawRect
 *
 * @param x {Number} The X coord of the top-left of the rectangle
 * @param y {Number} The Y coord of the top-left of the rectangle
 * @param width {Number} The width of the rectangle
 * @param height {Number} The height of the rectangle
 */
PIXI.Graphics.prototype.drawRect = function( x, y, width, height )
{
	if(this.currentPath.points.length == 0)this.graphicsData.pop();

	this.currentPath = {lineWidth:this.lineWidth, lineColor:this.lineColor, lineAlpha:this.lineAlpha,
						fillColor:this.fillColor, fillAlpha:this.fillAlpha, fill:this.filling,
						points:[x, y, width, height], type:PIXI.Graphics.RECT};

	this.graphicsData.push(this.currentPath);
	this.dirty = true;
}

/**
 * Draws a circle.
 *
 * @method drawCircle
 * @param x {Number} The X coord of the center of the circle
 * @param y {Number} The Y coord of the center of the circle
 * @param radius {Number} The radius of the circle
 */
PIXI.Graphics.prototype.drawCircle = function( x, y, radius)
{
	if(this.currentPath.points.length == 0)this.graphicsData.pop();

	this.currentPath = {lineWidth:this.lineWidth, lineColor:this.lineColor, lineAlpha:this.lineAlpha,
						fillColor:this.fillColor, fillAlpha:this.fillAlpha, fill:this.filling,
						points:[x, y, radius, radius], type:PIXI.Graphics.CIRC};

	this.graphicsData.push(this.currentPath);
	this.dirty = true;
}

/**
 * Draws an elipse.
 *
 * @method drawElipse
 * @param x {Number}
 * @param y {Number}
 * @param width {Number}
 * @param height {Number}
 */
PIXI.Graphics.prototype.drawElipse = function( x, y, width, height)
{
	if(this.currentPath.points.length == 0)this.graphicsData.pop();

	this.currentPath = {lineWidth:this.lineWidth, lineColor:this.lineColor, lineAlpha:this.lineAlpha,
						fillColor:this.fillColor, fillAlpha:this.fillAlpha, fill:this.filling,
						points:[x, y, width, height], type:PIXI.Graphics.ELIP};

	this.graphicsData.push(this.currentPath);
	this.dirty = true;
}

/**
 * Clears the graphics that were drawn to this Graphics object, and resets fill and line style settings.
 *
 * @method clear
 */
PIXI.Graphics.prototype.clear = function()
{
	this.lineWidth = 0;
	this.filling = false;

	this.dirty = true;
	this.clearDirty = true;
	this.graphicsData = [];

	this.bounds = null//new PIXI.Rectangle();
}


PIXI.Graphics.prototype.updateFilterBounds = function()
{
	if(!this.bounds)
	{
		var minX = Infinity;
		var maxX = -Infinity;

		var minY = Infinity;
		var maxY = -Infinity;

		var points, x, y;

		for (var i = 0; i < this.graphicsData.length; i++) {
			

			var data = this.graphicsData[i];
			var type = data.type;
			var lineWidth = data.lineWidth;

			points = data.points;

			if(type === PIXI.Graphics.RECT)
			{
				x = points.x - lineWidth/2;
				y = points.y - lineWidth/2;
				var width = points.width + lineWidth;
				var height = points.height + lineWidth;

				minX = x < minX ? x : minX;
				maxX = x + width > maxX ? x + width : maxX;

				minY = y < minY ? x : minY;
				maxY = y + height > maxY ? y + height : maxY;
			}
			else if(type === PIXI.Graphics.CIRC || type === PIXI.Graphics.ELIP)
			{
				x = points.x;
				y = points.y;
				var radius = points.radius + lineWidth/2;
				
				minX = x - radius < minX ? x - radius : minX;
				maxX = x + radius > maxX ? x + radius : maxX;

				minY = y - radius < minY ? y - radius : minY;
				maxY = y + radius > maxY ? y + radius : maxY;
			}
			else
			{
				// POLY
				for (var j = 0; j < points.length; j+=2) 
				{
					
					x = points[j];
					y = points[j+1];

					minX = x-lineWidth < minX ? x-lineWidth : minX;
					maxX = x+lineWidth > maxX ? x+lineWidth : maxX;

					minY = y-lineWidth < minY ? y-lineWidth : minY;
					maxY = y+lineWidth > maxY ? y+lineWidth : maxY;
				};
			}

		};

		this.bounds = new PIXI.Rectangle(minX, minY, maxX - minX, maxY - minY);

	}

//	console.log(this.bounds);
}

// SOME TYPES:
PIXI.Graphics.POLY = 0;
PIXI.Graphics.RECT = 1;
PIXI.Graphics.CIRC = 2;
PIXI.Graphics.ELIP = 3;

/**
 * @author Mat Groves http://matgroves.com/
 */

PIXI.Strip = function(texture, width, height)
{
	PIXI.DisplayObjectContainer.call( this );
	this.texture = texture;
	this.blendMode = PIXI.blendModes.NORMAL;

	try
	{
		this.uvs = new Float32Array([0, 1,
				1, 1,
				1, 0, 0,1]);

		this.verticies = new Float32Array([0, 0,
						  0,0,
						  0,0, 0,
						  0, 0]);

		this.colors = new Float32Array([1, 1, 1, 1]);

		this.indices = new Uint16Array([0, 1, 2, 3]);
	}
	catch(error)
	{
		this.uvs = [0, 1,
				1, 1,
				1, 0, 0,1];

		this.verticies = [0, 0,
						  0,0,
						  0,0, 0,
						  0, 0];

		this.colors = [1, 1, 1, 1];

		this.indices = [0, 1, 2, 3];
	}


	/*
	this.uvs = new Float32Array()
	this.verticies = new Float32Array()
	this.colors = new Float32Array()
	this.indices = new Uint16Array()
*/
	this.width = width;
	this.height = height;

	// load the texture!
	if(texture.baseTexture.hasLoaded)
	{
		this.width   = this.texture.frame.width;
		this.height  = this.texture.frame.height;
		this.updateFrame = true;
	}
	else
	{
		this.onTextureUpdateBind = this.onTextureUpdate.bind(this);
		this.texture.addEventListener( 'update', this.onTextureUpdateBind );
	}

	this.renderable = true;
}

// constructor
PIXI.Strip.prototype = Object.create( PIXI.DisplayObjectContainer.prototype );
PIXI.Strip.prototype.constructor = PIXI.Strip;

PIXI.Strip.prototype.setTexture = function(texture)
{
	//TODO SET THE TEXTURES
	//TODO VISIBILITY

	// stop current texture
	this.texture = texture;
	this.width   = texture.frame.width;
	this.height  = texture.frame.height;
	this.updateFrame = true;
}

PIXI.Strip.prototype.onTextureUpdate = function(event)
{
	this.updateFrame = true;
}
// some helper functions..


/**
 * @author Mat Groves http://matgroves.com/
 */


PIXI.Rope = function(texture, points)
{
	PIXI.Strip.call( this, texture );
	this.points = points;

	try
	{
		this.verticies = new Float32Array( points.length * 4);
		this.uvs = new Float32Array( points.length * 4);
		this.colors = new Float32Array(  points.length * 2);
		this.indices = new Uint16Array( points.length * 2);
	}
	catch(error)
	{
		this.verticies = verticies

		this.uvs = uvs
		this.colors = colors
		this.indices = indices
	}

	this.refresh();
}


// constructor
PIXI.Rope.prototype = Object.create( PIXI.Strip.prototype );
PIXI.Rope.prototype.constructor = PIXI.Rope;

PIXI.Rope.prototype.refresh = function()
{
	var points = this.points;
	if(points.length < 1)return;

	var uvs = this.uvs
	var indices = this.indices;
	var colors = this.colors;

	var lastPoint = points[0];
	var nextPoint;
	var perp = {x:0, y:0};
	var point = points[0];

	this.count-=0.2;


	uvs[0] = 0
	uvs[1] = 1
	uvs[2] = 0
	uvs[3] = 1

	colors[0] = 1;
	colors[1] = 1;

	indices[0] = 0;
	indices[1] = 1;

	var total = points.length;

	for (var i =  1; i < total; i++)
	{

		var point = points[i];
		var index = i * 4;
		// time to do some smart drawing!
		var amount = i/(total-1)

		if(i%2)
		{
			uvs[index] = amount;
			uvs[index+1] = 0;

			uvs[index+2] = amount
			uvs[index+3] = 1

		}
		else
		{
			uvs[index] = amount
			uvs[index+1] = 0

			uvs[index+2] = amount
			uvs[index+3] = 1
		}

		index = i * 2;
		colors[index] = 1;
		colors[index+1] = 1;

		index = i * 2;
		indices[index] = index;
		indices[index + 1] = index + 1;

		lastPoint = point;
	}
}

PIXI.Rope.prototype.updateTransform = function()
{

	var points = this.points;
	if(points.length < 1)return;

	var verticies = this.verticies

	var lastPoint = points[0];
	var nextPoint;
	var perp = {x:0, y:0};
	var point = points[0];

	this.count-=0.2;

	verticies[0] = point.x + perp.x
	verticies[1] = point.y + perp.y //+ 200
	verticies[2] = point.x - perp.x
	verticies[3] = point.y - perp.y//+200
	// time to do some smart drawing!

	var total = points.length;

	for (var i =  1; i < total; i++)
	{

		var point = points[i];
		var index = i * 4;

		if(i < points.length-1)
		{
			nextPoint = points[i+1];
		}
		else
		{
			nextPoint = point
		}

		perp.y = -(nextPoint.x - lastPoint.x);
		perp.x = nextPoint.y - lastPoint.y;

		var ratio = (1 - (i / (total-1))) * 10;
				if(ratio > 1)ratio = 1;

		var perpLength = Math.sqrt(perp.x * perp.x + perp.y * perp.y);
		var num = this.texture.height/2//(20 + Math.abs(Math.sin((i + this.count) * 0.3) * 50) )* ratio;
		perp.x /= perpLength;
		perp.y /= perpLength;

		perp.x *= num;
		perp.y *= num;

		verticies[index] = point.x + perp.x
		verticies[index+1] = point.y + perp.y
		verticies[index+2] = point.x - perp.x
		verticies[index+3] = point.y - perp.y

		lastPoint = point;
	}

	PIXI.DisplayObjectContainer.prototype.updateTransform.call( this );
}

PIXI.Rope.prototype.setTexture = function(texture)
{
	// stop current texture
	this.texture = texture;
	this.updateFrame = true;
}





/**
 * @author Mat Groves http://matgroves.com/
 */

/**
 * A tiling sprite is a fast way of rendering a tiling image
 *
 * @class TilingSprite
 * @extends DisplayObjectContainer
 * @constructor
 * @param texture {Texture} the texture of the tiling sprite
 * @param width {Number}  the width of the tiling sprite
 * @param height {Number} the height of the tiling sprite
 */
PIXI.TilingSprite = function(texture, width, height)
{
	PIXI.DisplayObjectContainer.call( this );

	/**
	 * The texture that the sprite is using
	 *
	 * @property texture
	 * @type Texture
	 */
	this.texture = texture;

	/**
	 * The width of the tiling sprite
	 *
	 * @property width
	 * @type Number
	 */
	this.width = width;

	/**
	 * The height of the tiling sprite
	 *
	 * @property height
	 * @type Number
	 */
	this.height = height;

	/**
	 * The scaling of the image that is being tiled
	 *
	 * @property tileScale
	 * @type Point
	 */
	this.tileScale = new PIXI.Point(1,1);

	/**
	 * The offset position of the image that is being tiled
	 *
	 * @property tilePosition
	 * @type Point
	 */
	this.tilePosition = new PIXI.Point(0,0);

	this.renderable = true;

	this.blendMode = PIXI.blendModes.NORMAL
}

// constructor
PIXI.TilingSprite.prototype = Object.create( PIXI.DisplayObjectContainer.prototype );
PIXI.TilingSprite.prototype.constructor = PIXI.TilingSprite;

/**
 * Sets the texture of the tiling sprite
 *
 * @method setTexture
 * @param texture {Texture} The PIXI texture that is displayed by the sprite
 */
PIXI.TilingSprite.prototype.setTexture = function(texture)
{
	//TODO SET THE TEXTURES
	//TODO VISIBILITY

	// stop current texture
	this.texture = texture;
	this.updateFrame = true;
}

/**
 * When the texture is updated, this event will fire to update the frame
 *
 * @method onTextureUpdate
 * @param event
 * @private
 */
PIXI.TilingSprite.prototype.onTextureUpdate = function(event)
{
	this.updateFrame = true;
}


/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 * based on pixi impact spine implementation made by Eemeli Kelokorpi (@ekelokorpi) https://github.com/ekelokorpi
 *
 * Awesome JS run time provided by EsotericSoftware
 * https://github.com/EsotericSoftware/spine-runtimes
 *
 */

/**
 * A class that enables the you to import and run your spine animations in pixi.
 * Spine animation data needs to be loaded using the PIXI.AssetLoader or PIXI.SpineLoader before it can be used by this class
 * See example 12 (http://www.goodboydigital.com/pixijs/examples/12/) to see a working example and check out the source
 *
 * @class Spine
 * @extends DisplayObjectContainer
 * @constructor
 * @param url {String} The url of the spine anim file to be used
 */
PIXI.Spine = function (url) {
	PIXI.DisplayObjectContainer.call(this);

	this.spineData = PIXI.AnimCache[url];

	if (!this.spineData) {
		throw new Error("Spine data must be preloaded using PIXI.SpineLoader or PIXI.AssetLoader: " + url);
	}

	this.skeleton = new spine.Skeleton(this.spineData);
	this.skeleton.updateWorldTransform();

	this.stateData = new spine.AnimationStateData(this.spineData);
	this.state = new spine.AnimationState(this.stateData);

	this.slotContainers = [];

	for (var i = 0, n = this.skeleton.drawOrder.length; i < n; i++) {
		var slot = this.skeleton.drawOrder[i];
		var attachment = slot.attachment;
		var slotContainer = new PIXI.DisplayObjectContainer();
		this.slotContainers.push(slotContainer);
		this.addChild(slotContainer);
		if (!(attachment instanceof spine.RegionAttachment)) {
			continue;
		}
		var spriteName = attachment.rendererObject.name;
		var sprite = this.createSprite(slot, attachment.rendererObject);
		slot.currentSprite = sprite;
		slot.currentSpriteName = spriteName;
		slotContainer.addChild(sprite);
	}
};

PIXI.Spine.prototype = Object.create(PIXI.DisplayObjectContainer.prototype);
PIXI.Spine.prototype.constructor = PIXI.Spine;

/*
 * Updates the object transform for rendering
 *
 * @method updateTransform
 * @private
 */
PIXI.Spine.prototype.updateTransform = function () {
	this.lastTime = this.lastTime || Date.now();
	var timeDelta = (Date.now() - this.lastTime) * 0.001;
	this.lastTime = Date.now();
	this.state.update(timeDelta);
	this.state.apply(this.skeleton);
	this.skeleton.updateWorldTransform();

	var drawOrder = this.skeleton.drawOrder;
	for (var i = 0, n = drawOrder.length; i < n; i++) {
		var slot = drawOrder[i];
		var attachment = slot.attachment;
		var slotContainer = this.slotContainers[i];
		if (!(attachment instanceof spine.RegionAttachment)) {
			slotContainer.visible = false;
			continue;
		}

		if (attachment.rendererObject) {
			if (!slot.currentSpriteName || slot.currentSpriteName != attachment.name) {
				var spriteName = attachment.rendererObject.name;
				if (slot.currentSprite !== undefined) {
					slot.currentSprite.visible = false;
				}
				slot.sprites = slot.sprites || {};
				if (slot.sprites[spriteName] !== undefined) {
					slot.sprites[spriteName].visible = true;
				} else {
					var sprite = this.createSprite(slot, attachment.rendererObject);
					slotContainer.addChild(sprite);
				}
				slot.currentSprite = slot.sprites[spriteName];
				slot.currentSpriteName = spriteName;
			}
		}
		slotContainer.visible = true;

		var bone = slot.bone;

		slotContainer.position.x = bone.worldX + attachment.x * bone.m00 + attachment.y * bone.m01;
		slotContainer.position.y = bone.worldY + attachment.x * bone.m10 + attachment.y * bone.m11;
		slotContainer.scale.x = bone.worldScaleX;
		slotContainer.scale.y = bone.worldScaleY;

		slotContainer.rotation = -(slot.bone.worldRotation * Math.PI / 180);
	}

	PIXI.DisplayObjectContainer.prototype.updateTransform.call(this);
};


PIXI.Spine.prototype.createSprite = function (slot, descriptor) {
	var name = PIXI.TextureCache[descriptor.name] ? descriptor.name : descriptor.name + ".png";
	var sprite = new PIXI.Sprite(PIXI.Texture.fromFrame(name));
	sprite.scale = descriptor.scale;
	sprite.rotation = descriptor.rotation;
	sprite.anchor.x = sprite.anchor.y = 0.5;

	slot.sprites = slot.sprites || {};
	slot.sprites[descriptor.name] = sprite;
	return sprite;
};

/*
 * Awesome JS run time provided by EsotericSoftware
 *
 * https://github.com/EsotericSoftware/spine-runtimes
 *
 */

var spine = {};

spine.BoneData = function (name, parent) {
	this.name = name;
	this.parent = parent;
};
spine.BoneData.prototype = {
	length: 0,
	x: 0, y: 0,
	rotation: 0,
	scaleX: 1, scaleY: 1
};

spine.SlotData = function (name, boneData) {
	this.name = name;
	this.boneData = boneData;
};
spine.SlotData.prototype = {
	r: 1, g: 1, b: 1, a: 1,
	attachmentName: null
};

spine.Bone = function (boneData, parent) {
	this.data = boneData;
	this.parent = parent;
	this.setToSetupPose();
};
spine.Bone.yDown = false;
spine.Bone.prototype = {
	x: 0, y: 0,
	rotation: 0,
	scaleX: 1, scaleY: 1,
	m00: 0, m01: 0, worldX: 0, // a b x
	m10: 0, m11: 0, worldY: 0, // c d y
	worldRotation: 0,
	worldScaleX: 1, worldScaleY: 1,
	updateWorldTransform: function (flipX, flipY) {
		var parent = this.parent;
		if (parent != null) {
			this.worldX = this.x * parent.m00 + this.y * parent.m01 + parent.worldX;
			this.worldY = this.x * parent.m10 + this.y * parent.m11 + parent.worldY;
			this.worldScaleX = parent.worldScaleX * this.scaleX;
			this.worldScaleY = parent.worldScaleY * this.scaleY;
			this.worldRotation = parent.worldRotation + this.rotation;
		} else {
			this.worldX = this.x;
			this.worldY = this.y;
			this.worldScaleX = this.scaleX;
			this.worldScaleY = this.scaleY;
			this.worldRotation = this.rotation;
		}
		var radians = this.worldRotation * Math.PI / 180;
		var cos = Math.cos(radians);
		var sin = Math.sin(radians);
		this.m00 = cos * this.worldScaleX;
		this.m10 = sin * this.worldScaleX;
		this.m01 = -sin * this.worldScaleY;
		this.m11 = cos * this.worldScaleY;
		if (flipX) {
			this.m00 = -this.m00;
			this.m01 = -this.m01;
		}
		if (flipY) {
			this.m10 = -this.m10;
			this.m11 = -this.m11;
		}
		if (spine.Bone.yDown) {
			this.m10 = -this.m10;
			this.m11 = -this.m11;
		}
	},
	setToSetupPose: function () {
		var data = this.data;
		this.x = data.x;
		this.y = data.y;
		this.rotation = data.rotation;
		this.scaleX = data.scaleX;
		this.scaleY = data.scaleY;
	}
};

spine.Slot = function (slotData, skeleton, bone) {
	this.data = slotData;
	this.skeleton = skeleton;
	this.bone = bone;
	this.setToSetupPose();
};
spine.Slot.prototype = {
	r: 1, g: 1, b: 1, a: 1,
	_attachmentTime: 0,
	attachment: null,
	setAttachment: function (attachment) {
		this.attachment = attachment;
		this._attachmentTime = this.skeleton.time;
	},
	setAttachmentTime: function (time) {
		this._attachmentTime = this.skeleton.time - time;
	},
	getAttachmentTime: function () {
		return this.skeleton.time - this._attachmentTime;
	},
	setToSetupPose: function () {
		var data = this.data;
		this.r = data.r;
		this.g = data.g;
		this.b = data.b;
		this.a = data.a;

		var slotDatas = this.skeleton.data.slots;
		for (var i = 0, n = slotDatas.length; i < n; i++) {
			if (slotDatas[i] == data) {
				this.setAttachment(!data.attachmentName ? null : this.skeleton.getAttachmentBySlotIndex(i, data.attachmentName));
				break;
			}
		}
	}
};

spine.Skin = function (name) {
	this.name = name;
	this.attachments = {};
};
spine.Skin.prototype = {
	addAttachment: function (slotIndex, name, attachment) {
		this.attachments[slotIndex + ":" + name] = attachment;
	},
	getAttachment: function (slotIndex, name) {
		return this.attachments[slotIndex + ":" + name];
	},
	_attachAll: function (skeleton, oldSkin) {
		for (var key in oldSkin.attachments) {
			var colon = key.indexOf(":");
			var slotIndex = parseInt(key.substring(0, colon));
			var name = key.substring(colon + 1);
			var slot = skeleton.slots[slotIndex];
			if (slot.attachment && slot.attachment.name == name) {
				var attachment = this.getAttachment(slotIndex, name);
				if (attachment) slot.setAttachment(attachment);
			}
		}
	}
};

spine.Animation = function (name, timelines, duration) {
	this.name = name;
	this.timelines = timelines;
	this.duration = duration;
};
spine.Animation.prototype = {
	apply: function (skeleton, time, loop) {
		if (loop && this.duration != 0) time %= this.duration;
		var timelines = this.timelines;
		for (var i = 0, n = timelines.length; i < n; i++)
			timelines[i].apply(skeleton, time, 1);
	},
	mix: function (skeleton, time, loop, alpha) {
		if (loop && this.duration != 0) time %= this.duration;
		var timelines = this.timelines;
		for (var i = 0, n = timelines.length; i < n; i++)
			timelines[i].apply(skeleton, time, alpha);
	}
};

spine.binarySearch = function (values, target, step) {
	var low = 0;
	var high = Math.floor(values.length / step) - 2;
	if (high == 0) return step;
	var current = high >>> 1;
	while (true) {
		if (values[(current + 1) * step] <= target)
			low = current + 1;
		else
			high = current;
		if (low == high) return (low + 1) * step;
		current = (low + high) >>> 1;
	}
};
spine.linearSearch = function (values, target, step) {
	for (var i = 0, last = values.length - step; i <= last; i += step)
		if (values[i] > target) return i;
	return -1;
};

spine.Curves = function (frameCount) {
	this.curves = []; // dfx, dfy, ddfx, ddfy, dddfx, dddfy, ...
	this.curves.length = (frameCount - 1) * 6;
};
spine.Curves.prototype = {
	setLinear: function (frameIndex) {
		this.curves[frameIndex * 6] = 0/*LINEAR*/;
	},
	setStepped: function (frameIndex) {
		this.curves[frameIndex * 6] = -1/*STEPPED*/;
	},
	/** Sets the control handle positions for an interpolation bezier curve used to transition from this keyframe to the next.
	 * cx1 and cx2 are from 0 to 1, representing the percent of time between the two keyframes. cy1 and cy2 are the percent of
	 * the difference between the keyframe's values. */
	setCurve: function (frameIndex, cx1, cy1, cx2, cy2) {
		var subdiv_step = 1 / 10/*BEZIER_SEGMENTS*/;
		var subdiv_step2 = subdiv_step * subdiv_step;
		var subdiv_step3 = subdiv_step2 * subdiv_step;
		var pre1 = 3 * subdiv_step;
		var pre2 = 3 * subdiv_step2;
		var pre4 = 6 * subdiv_step2;
		var pre5 = 6 * subdiv_step3;
		var tmp1x = -cx1 * 2 + cx2;
		var tmp1y = -cy1 * 2 + cy2;
		var tmp2x = (cx1 - cx2) * 3 + 1;
		var tmp2y = (cy1 - cy2) * 3 + 1;
		var i = frameIndex * 6;
		var curves = this.curves;
		curves[i] = cx1 * pre1 + tmp1x * pre2 + tmp2x * subdiv_step3;
		curves[i + 1] = cy1 * pre1 + tmp1y * pre2 + tmp2y * subdiv_step3;
		curves[i + 2] = tmp1x * pre4 + tmp2x * pre5;
		curves[i + 3] = tmp1y * pre4 + tmp2y * pre5;
		curves[i + 4] = tmp2x * pre5;
		curves[i + 5] = tmp2y * pre5;
	},
	getCurvePercent: function (frameIndex, percent) {
		percent = percent < 0 ? 0 : (percent > 1 ? 1 : percent);
		var curveIndex = frameIndex * 6;
		var curves = this.curves;
		var dfx = curves[curveIndex];
		if (!dfx/*LINEAR*/) return percent;
		if (dfx == -1/*STEPPED*/) return 0;
		var dfy = curves[curveIndex + 1];
		var ddfx = curves[curveIndex + 2];
		var ddfy = curves[curveIndex + 3];
		var dddfx = curves[curveIndex + 4];
		var dddfy = curves[curveIndex + 5];
		var x = dfx, y = dfy;
		var i = 10/*BEZIER_SEGMENTS*/ - 2;
		while (true) {
			if (x >= percent) {
				var lastX = x - dfx;
				var lastY = y - dfy;
				return lastY + (y - lastY) * (percent - lastX) / (x - lastX);
			}
			if (i == 0) break;
			i--;
			dfx += ddfx;
			dfy += ddfy;
			ddfx += dddfx;
			ddfy += dddfy;
			x += dfx;
			y += dfy;
		}
		return y + (1 - y) * (percent - x) / (1 - x); // Last point is 1,1.
	}
};

spine.RotateTimeline = function (frameCount) {
	this.curves = new spine.Curves(frameCount);
	this.frames = []; // time, angle, ...
	this.frames.length = frameCount * 2;
};
spine.RotateTimeline.prototype = {
	boneIndex: 0,
	getFrameCount: function () {
		return this.frames.length / 2;
	},
	setFrame: function (frameIndex, time, angle) {
		frameIndex *= 2;
		this.frames[frameIndex] = time;
		this.frames[frameIndex + 1] = angle;
	},
	apply: function (skeleton, time, alpha) {
		var frames = this.frames;
		if (time < frames[0]) return; // Time is before first frame.

		var bone = skeleton.bones[this.boneIndex];

		if (time >= frames[frames.length - 2]) { // Time is after last frame.
			var amount = bone.data.rotation + frames[frames.length - 1] - bone.rotation;
			while (amount > 180)
				amount -= 360;
			while (amount < -180)
				amount += 360;
			bone.rotation += amount * alpha;
			return;
		}

		// Interpolate between the last frame and the current frame.
		var frameIndex = spine.binarySearch(frames, time, 2);
		var lastFrameValue = frames[frameIndex - 1];
		var frameTime = frames[frameIndex];
		var percent = 1 - (time - frameTime) / (frames[frameIndex - 2/*LAST_FRAME_TIME*/] - frameTime);
		percent = this.curves.getCurvePercent(frameIndex / 2 - 1, percent);

		var amount = frames[frameIndex + 1/*FRAME_VALUE*/] - lastFrameValue;
		while (amount > 180)
			amount -= 360;
		while (amount < -180)
			amount += 360;
		amount = bone.data.rotation + (lastFrameValue + amount * percent) - bone.rotation;
		while (amount > 180)
			amount -= 360;
		while (amount < -180)
			amount += 360;
		bone.rotation += amount * alpha;
	}
};

spine.TranslateTimeline = function (frameCount) {
	this.curves = new spine.Curves(frameCount);
	this.frames = []; // time, x, y, ...
	this.frames.length = frameCount * 3;
};
spine.TranslateTimeline.prototype = {
	boneIndex: 0,
	getFrameCount: function () {
		return this.frames.length / 3;
	},
	setFrame: function (frameIndex, time, x, y) {
		frameIndex *= 3;
		this.frames[frameIndex] = time;
		this.frames[frameIndex + 1] = x;
		this.frames[frameIndex + 2] = y;
	},
	apply: function (skeleton, time, alpha) {
		var frames = this.frames;
		if (time < frames[0]) return; // Time is before first frame.

		var bone = skeleton.bones[this.boneIndex];

		if (time >= frames[frames.length - 3]) { // Time is after last frame.
			bone.x += (bone.data.x + frames[frames.length - 2] - bone.x) * alpha;
			bone.y += (bone.data.y + frames[frames.length - 1] - bone.y) * alpha;
			return;
		}

		// Interpolate between the last frame and the current frame.
		var frameIndex = spine.binarySearch(frames, time, 3);
		var lastFrameX = frames[frameIndex - 2];
		var lastFrameY = frames[frameIndex - 1];
		var frameTime = frames[frameIndex];
		var percent = 1 - (time - frameTime) / (frames[frameIndex + -3/*LAST_FRAME_TIME*/] - frameTime);
		percent = this.curves.getCurvePercent(frameIndex / 3 - 1, percent);

		bone.x += (bone.data.x + lastFrameX + (frames[frameIndex + 1/*FRAME_X*/] - lastFrameX) * percent - bone.x) * alpha;
		bone.y += (bone.data.y + lastFrameY + (frames[frameIndex + 2/*FRAME_Y*/] - lastFrameY) * percent - bone.y) * alpha;
	}
};

spine.ScaleTimeline = function (frameCount) {
	this.curves = new spine.Curves(frameCount);
	this.frames = []; // time, x, y, ...
	this.frames.length = frameCount * 3;
};
spine.ScaleTimeline.prototype = {
	boneIndex: 0,
	getFrameCount: function () {
		return this.frames.length / 3;
	},
	setFrame: function (frameIndex, time, x, y) {
		frameIndex *= 3;
		this.frames[frameIndex] = time;
		this.frames[frameIndex + 1] = x;
		this.frames[frameIndex + 2] = y;
	},
	apply: function (skeleton, time, alpha) {
		var frames = this.frames;
		if (time < frames[0]) return; // Time is before first frame.

		var bone = skeleton.bones[this.boneIndex];

		if (time >= frames[frames.length - 3]) { // Time is after last frame.
			bone.scaleX += (bone.data.scaleX - 1 + frames[frames.length - 2] - bone.scaleX) * alpha;
			bone.scaleY += (bone.data.scaleY - 1 + frames[frames.length - 1] - bone.scaleY) * alpha;
			return;
		}

		// Interpolate between the last frame and the current frame.
		var frameIndex = spine.binarySearch(frames, time, 3);
		var lastFrameX = frames[frameIndex - 2];
		var lastFrameY = frames[frameIndex - 1];
		var frameTime = frames[frameIndex];
		var percent = 1 - (time - frameTime) / (frames[frameIndex + -3/*LAST_FRAME_TIME*/] - frameTime);
		percent = this.curves.getCurvePercent(frameIndex / 3 - 1, percent);

		bone.scaleX += (bone.data.scaleX - 1 + lastFrameX + (frames[frameIndex + 1/*FRAME_X*/] - lastFrameX) * percent - bone.scaleX) * alpha;
		bone.scaleY += (bone.data.scaleY - 1 + lastFrameY + (frames[frameIndex + 2/*FRAME_Y*/] - lastFrameY) * percent - bone.scaleY) * alpha;
	}
};

spine.ColorTimeline = function (frameCount) {
	this.curves = new spine.Curves(frameCount);
	this.frames = []; // time, r, g, b, a, ...
	this.frames.length = frameCount * 5;
};
spine.ColorTimeline.prototype = {
	slotIndex: 0,
	getFrameCount: function () {
		return this.frames.length / 2;
	},
	setFrame: function (frameIndex, time, x, y) {
		frameIndex *= 5;
		this.frames[frameIndex] = time;
		this.frames[frameIndex + 1] = r;
		this.frames[frameIndex + 2] = g;
		this.frames[frameIndex + 3] = b;
		this.frames[frameIndex + 4] = a;
	},
	apply: function (skeleton, time, alpha) {
		var frames = this.frames;
		if (time < frames[0]) return; // Time is before first frame.

		var slot = skeleton.slots[this.slotIndex];

		if (time >= frames[frames.length - 5]) { // Time is after last frame.
			var i = frames.length - 1;
			slot.r = frames[i - 3];
			slot.g = frames[i - 2];
			slot.b = frames[i - 1];
			slot.a = frames[i];
			return;
		}

		// Interpolate between the last frame and the current frame.
		var frameIndex = spine.binarySearch(frames, time, 5);
		var lastFrameR = frames[frameIndex - 4];
		var lastFrameG = frames[frameIndex - 3];
		var lastFrameB = frames[frameIndex - 2];
		var lastFrameA = frames[frameIndex - 1];
		var frameTime = frames[frameIndex];
		var percent = 1 - (time - frameTime) / (frames[frameIndex - 5/*LAST_FRAME_TIME*/] - frameTime);
		percent = this.curves.getCurvePercent(frameIndex / 5 - 1, percent);

		var r = lastFrameR + (frames[frameIndex + 1/*FRAME_R*/] - lastFrameR) * percent;
		var g = lastFrameG + (frames[frameIndex + 2/*FRAME_G*/] - lastFrameG) * percent;
		var b = lastFrameB + (frames[frameIndex + 3/*FRAME_B*/] - lastFrameB) * percent;
		var a = lastFrameA + (frames[frameIndex + 4/*FRAME_A*/] - lastFrameA) * percent;
		if (alpha < 1) {
			slot.r += (r - slot.r) * alpha;
			slot.g += (g - slot.g) * alpha;
			slot.b += (b - slot.b) * alpha;
			slot.a += (a - slot.a) * alpha;
		} else {
			slot.r = r;
			slot.g = g;
			slot.b = b;
			slot.a = a;
		}
	}
};

spine.AttachmentTimeline = function (frameCount) {
	this.curves = new spine.Curves(frameCount);
	this.frames = []; // time, ...
	this.frames.length = frameCount;
	this.attachmentNames = []; // time, ...
	this.attachmentNames.length = frameCount;
};
spine.AttachmentTimeline.prototype = {
	slotIndex: 0,
	getFrameCount: function () {
            return this.frames.length;
	},
	setFrame: function (frameIndex, time, attachmentName) {
		this.frames[frameIndex] = time;
		this.attachmentNames[frameIndex] = attachmentName;
	},
	apply: function (skeleton, time, alpha) {
		var frames = this.frames;
		if (time < frames[0]) return; // Time is before first frame.

		var frameIndex;
		if (time >= frames[frames.length - 1]) // Time is after last frame.
			frameIndex = frames.length - 1;
		else
			frameIndex = spine.binarySearch(frames, time, 1) - 1;

		var attachmentName = this.attachmentNames[frameIndex];
		skeleton.slots[this.slotIndex].setAttachment(!attachmentName ? null : skeleton.getAttachmentBySlotIndex(this.slotIndex, attachmentName));
	}
};

spine.SkeletonData = function () {
	this.bones = [];
	this.slots = [];
	this.skins = [];
	this.animations = [];
};
spine.SkeletonData.prototype = {
	defaultSkin: null,
	/** @return May be null. */
	findBone: function (boneName) {
		var bones = this.bones;
		for (var i = 0, n = bones.length; i < n; i++)
			if (bones[i].name == boneName) return bones[i];
		return null;
	},
	/** @return -1 if the bone was not found. */
	findBoneIndex: function (boneName) {
		var bones = this.bones;
		for (var i = 0, n = bones.length; i < n; i++)
			if (bones[i].name == boneName) return i;
		return -1;
	},
	/** @return May be null. */
	findSlot: function (slotName) {
		var slots = this.slots;
		for (var i = 0, n = slots.length; i < n; i++) {
			if (slots[i].name == slotName) return slot[i];
		}
		return null;
	},
	/** @return -1 if the bone was not found. */
	findSlotIndex: function (slotName) {
		var slots = this.slots;
		for (var i = 0, n = slots.length; i < n; i++)
			if (slots[i].name == slotName) return i;
		return -1;
	},
	/** @return May be null. */
	findSkin: function (skinName) {
		var skins = this.skins;
		for (var i = 0, n = skins.length; i < n; i++)
			if (skins[i].name == skinName) return skins[i];
		return null;
	},
	/** @return May be null. */
	findAnimation: function (animationName) {
		var animations = this.animations;
		for (var i = 0, n = animations.length; i < n; i++)
			if (animations[i].name == animationName) return animations[i];
		return null;
	}
};

spine.Skeleton = function (skeletonData) {
	this.data = skeletonData;

	this.bones = [];
	for (var i = 0, n = skeletonData.bones.length; i < n; i++) {
		var boneData = skeletonData.bones[i];
		var parent = !boneData.parent ? null : this.bones[skeletonData.bones.indexOf(boneData.parent)];
		this.bones.push(new spine.Bone(boneData, parent));
	}

	this.slots = [];
	this.drawOrder = [];
	for (var i = 0, n = skeletonData.slots.length; i < n; i++) {
		var slotData = skeletonData.slots[i];
		var bone = this.bones[skeletonData.bones.indexOf(slotData.boneData)];
		var slot = new spine.Slot(slotData, this, bone);
		this.slots.push(slot);
		this.drawOrder.push(slot);
	}
};
spine.Skeleton.prototype = {
	x: 0, y: 0,
	skin: null,
	r: 1, g: 1, b: 1, a: 1,
	time: 0,
	flipX: false, flipY: false,
	/** Updates the world transform for each bone. */
	updateWorldTransform: function () {
		var flipX = this.flipX;
		var flipY = this.flipY;
		var bones = this.bones;
		for (var i = 0, n = bones.length; i < n; i++)
			bones[i].updateWorldTransform(flipX, flipY);
	},
	/** Sets the bones and slots to their setup pose values. */
	setToSetupPose: function () {
		this.setBonesToSetupPose();
		this.setSlotsToSetupPose();
	},
	setBonesToSetupPose: function () {
		var bones = this.bones;
		for (var i = 0, n = bones.length; i < n; i++)
			bones[i].setToSetupPose();
	},
	setSlotsToSetupPose: function () {
		var slots = this.slots;
		for (var i = 0, n = slots.length; i < n; i++)
			slots[i].setToSetupPose(i);
	},
	/** @return May return null. */
	getRootBone: function () {
		return this.bones.length == 0 ? null : this.bones[0];
	},
	/** @return May be null. */
	findBone: function (boneName) {
		var bones = this.bones;
		for (var i = 0, n = bones.length; i < n; i++)
			if (bones[i].data.name == boneName) return bones[i];
		return null;
	},
	/** @return -1 if the bone was not found. */
	findBoneIndex: function (boneName) {
		var bones = this.bones;
		for (var i = 0, n = bones.length; i < n; i++)
			if (bones[i].data.name == boneName) return i;
		return -1;
	},
	/** @return May be null. */
	findSlot: function (slotName) {
		var slots = this.slots;
		for (var i = 0, n = slots.length; i < n; i++)
			if (slots[i].data.name == slotName) return slots[i];
		return null;
	},
	/** @return -1 if the bone was not found. */
	findSlotIndex: function (slotName) {
		var slots = this.slots;
		for (var i = 0, n = slots.length; i < n; i++)
			if (slots[i].data.name == slotName) return i;
		return -1;
	},
	setSkinByName: function (skinName) {
		var skin = this.data.findSkin(skinName);
		if (!skin) throw "Skin not found: " + skinName;
		this.setSkin(skin);
	},
	/** Sets the skin used to look up attachments not found in the {@link SkeletonData#getDefaultSkin() default skin}. Attachments
	 * from the new skin are attached if the corresponding attachment from the old skin was attached.
	 * @param newSkin May be null. */
	setSkin: function (newSkin) {
		if (this.skin && newSkin) newSkin._attachAll(this, this.skin);
		this.skin = newSkin;
	},
	/** @return May be null. */
	getAttachmentBySlotName: function (slotName, attachmentName) {
		return this.getAttachmentBySlotIndex(this.data.findSlotIndex(slotName), attachmentName);
	},
	/** @return May be null. */
	getAttachmentBySlotIndex: function (slotIndex, attachmentName) {
		if (this.skin) {
			var attachment = this.skin.getAttachment(slotIndex, attachmentName);
			if (attachment) return attachment;
		}
		if (this.data.defaultSkin) return this.data.defaultSkin.getAttachment(slotIndex, attachmentName);
		return null;
	},
	/** @param attachmentName May be null. */
	setAttachment: function (slotName, attachmentName) {
		var slots = this.slots;
		for (var i = 0, n = slots.size; i < n; i++) {
			var slot = slots[i];
			if (slot.data.name == slotName) {
				var attachment = null;
				if (attachmentName) {
					attachment = this.getAttachment(i, attachmentName);
					if (attachment == null) throw "Attachment not found: " + attachmentName + ", for slot: " + slotName;
				}
				slot.setAttachment(attachment);
				return;
			}
		}
		throw "Slot not found: " + slotName;
	},
	update: function (delta) {
		time += delta;
	}
};

spine.AttachmentType = {
	region: 0
};

spine.RegionAttachment = function () {
	this.offset = [];
	this.offset.length = 8;
	this.uvs = [];
	this.uvs.length = 8;
};
spine.RegionAttachment.prototype = {
	x: 0, y: 0,
	rotation: 0,
	scaleX: 1, scaleY: 1,
	width: 0, height: 0,
	rendererObject: null,
	regionOffsetX: 0, regionOffsetY: 0,
	regionWidth: 0, regionHeight: 0,
	regionOriginalWidth: 0, regionOriginalHeight: 0,
	setUVs: function (u, v, u2, v2, rotate) {
		var uvs = this.uvs;
		if (rotate) {
			uvs[2/*X2*/] = u;
			uvs[3/*Y2*/] = v2;
			uvs[4/*X3*/] = u;
			uvs[5/*Y3*/] = v;
			uvs[6/*X4*/] = u2;
			uvs[7/*Y4*/] = v;
			uvs[0/*X1*/] = u2;
			uvs[1/*Y1*/] = v2;
		} else {
			uvs[0/*X1*/] = u;
			uvs[1/*Y1*/] = v2;
			uvs[2/*X2*/] = u;
			uvs[3/*Y2*/] = v;
			uvs[4/*X3*/] = u2;
			uvs[5/*Y3*/] = v;
			uvs[6/*X4*/] = u2;
			uvs[7/*Y4*/] = v2;
		}
	},
	updateOffset: function () {
		var regionScaleX = this.width / this.regionOriginalWidth * this.scaleX;
		var regionScaleY = this.height / this.regionOriginalHeight * this.scaleY;
		var localX = -this.width / 2 * this.scaleX + this.regionOffsetX * regionScaleX;
		var localY = -this.height / 2 * this.scaleY + this.regionOffsetY * regionScaleY;
		var localX2 = localX + this.regionWidth * regionScaleX;
		var localY2 = localY + this.regionHeight * regionScaleY;
		var radians = this.rotation * Math.PI / 180;
		var cos = Math.cos(radians);
		var sin = Math.sin(radians);
		var localXCos = localX * cos + this.x;
		var localXSin = localX * sin;
		var localYCos = localY * cos + this.y;
		var localYSin = localY * sin;
		var localX2Cos = localX2 * cos + this.x;
		var localX2Sin = localX2 * sin;
		var localY2Cos = localY2 * cos + this.y;
		var localY2Sin = localY2 * sin;
		var offset = this.offset;
		offset[0/*X1*/] = localXCos - localYSin;
		offset[1/*Y1*/] = localYCos + localXSin;
		offset[2/*X2*/] = localXCos - localY2Sin;
		offset[3/*Y2*/] = localY2Cos + localXSin;
		offset[4/*X3*/] = localX2Cos - localY2Sin;
		offset[5/*Y3*/] = localY2Cos + localX2Sin;
		offset[6/*X4*/] = localX2Cos - localYSin;
		offset[7/*Y4*/] = localYCos + localX2Sin;
	},
	computeVertices: function (x, y, bone, vertices) {
		x += bone.worldX;
		y += bone.worldY;
		var m00 = bone.m00;
		var m01 = bone.m01;
		var m10 = bone.m10;
		var m11 = bone.m11;
		var offset = this.offset;
		vertices[0/*X1*/] = offset[0/*X1*/] * m00 + offset[1/*Y1*/] * m01 + x;
		vertices[1/*Y1*/] = offset[0/*X1*/] * m10 + offset[1/*Y1*/] * m11 + y;
		vertices[2/*X2*/] = offset[2/*X2*/] * m00 + offset[3/*Y2*/] * m01 + x;
		vertices[3/*Y2*/] = offset[2/*X2*/] * m10 + offset[3/*Y2*/] * m11 + y;
		vertices[4/*X3*/] = offset[4/*X3*/] * m00 + offset[5/*X3*/] * m01 + x;
		vertices[5/*X3*/] = offset[4/*X3*/] * m10 + offset[5/*X3*/] * m11 + y;
		vertices[6/*X4*/] = offset[6/*X4*/] * m00 + offset[7/*Y4*/] * m01 + x;
		vertices[7/*Y4*/] = offset[6/*X4*/] * m10 + offset[7/*Y4*/] * m11 + y;
	}
}

spine.AnimationStateData = function (skeletonData) {
	this.skeletonData = skeletonData;
	this.animationToMixTime = {};
};
spine.AnimationStateData.prototype = {
        defaultMix: 0,
	setMixByName: function (fromName, toName, duration) {
		var from = this.skeletonData.findAnimation(fromName);
		if (!from) throw "Animation not found: " + fromName;
		var to = this.skeletonData.findAnimation(toName);
		if (!to) throw "Animation not found: " + toName;
		this.setMix(from, to, duration);
	},
	setMix: function (from, to, duration) {
		this.animationToMixTime[from.name + ":" + to.name] = duration;
	},
	getMix: function (from, to) {
		var time = this.animationToMixTime[from.name + ":" + to.name];
            return time ? time : this.defaultMix;
	}
};

spine.AnimationState = function (stateData) {
	this.data = stateData;
	this.queue = [];
};
spine.AnimationState.prototype = {
	current: null,
	previous: null,
	currentTime: 0,
	previousTime: 0,
	currentLoop: false,
	previousLoop: false,
	mixTime: 0,
	mixDuration: 0,
	update: function (delta) {
		this.currentTime += delta;
		this.previousTime += delta;
		this.mixTime += delta;

		if (this.queue.length > 0) {
			var entry = this.queue[0];
			if (this.currentTime >= entry.delay) {
				this._setAnimation(entry.animation, entry.loop);
				this.queue.shift();
			}
		}
	},
	apply: function (skeleton) {
		if (!this.current) return;
		if (this.previous) {
			this.previous.apply(skeleton, this.previousTime, this.previousLoop);
			var alpha = this.mixTime / this.mixDuration;
			if (alpha >= 1) {
				alpha = 1;
				this.previous = null;
			}
			this.current.mix(skeleton, this.currentTime, this.currentLoop, alpha);
		} else
			this.current.apply(skeleton, this.currentTime, this.currentLoop);
	},
	clearAnimation: function () {
		this.previous = null;
		this.current = null;
		this.queue.length = 0;
	},
	_setAnimation: function (animation, loop) {
		this.previous = null;
		if (animation && this.current) {
			this.mixDuration = this.data.getMix(this.current, animation);
			if (this.mixDuration > 0) {
				this.mixTime = 0;
				this.previous = this.current;
				this.previousTime = this.currentTime;
				this.previousLoop = this.currentLoop;
			}
		}
		this.current = animation;
		this.currentLoop = loop;
		this.currentTime = 0;
	},
	/** @see #setAnimation(Animation, Boolean) */
	setAnimationByName: function (animationName, loop) {
		var animation = this.data.skeletonData.findAnimation(animationName);
		if (!animation) throw "Animation not found: " + animationName;
		this.setAnimation(animation, loop);
	},
	/** Set the current animation. Any queued animations are cleared and the current animation time is set to 0.
	 * @param animation May be null. */
	setAnimation: function (animation, loop) {
		this.queue.length = 0;
		this._setAnimation(animation, loop);
	},
	/** @see #addAnimation(Animation, Boolean, Number) */
	addAnimationByName: function (animationName, loop, delay) {
		var animation = this.data.skeletonData.findAnimation(animationName);
		if (!animation) throw "Animation not found: " + animationName;
		this.addAnimation(animation, loop, delay);
	},
	/** Adds an animation to be played delay seconds after the current or last queued animation.
	 * @param delay May be <= 0 to use duration of previous animation minus any mix duration plus the negative delay. */
	addAnimation: function (animation, loop, delay) {
		var entry = {};
		entry.animation = animation;
		entry.loop = loop;

		if (!delay || delay <= 0) {
			var previousAnimation = this.queue.length == 0 ? this.current : this.queue[this.queue.length - 1].animation;
			if (previousAnimation != null)
				delay = previousAnimation.duration - this.data.getMix(previousAnimation, animation) + (delay || 0);
			else
				delay = 0;
		}
		entry.delay = delay;

		this.queue.push(entry);
	},
	/** Returns true if no animation is set or if the current time is greater than the animation duration, regardless of looping. */
	isComplete: function () {
		return !this.current || this.currentTime >= this.current.duration;
	}
};

spine.SkeletonJson = function (attachmentLoader) {
	this.attachmentLoader = attachmentLoader;
};
spine.SkeletonJson.prototype = {
	scale: 1,
	readSkeletonData: function (root) {
		var skeletonData = new spine.SkeletonData();

		// Bones.
		var bones = root["bones"];
		for (var i = 0, n = bones.length; i < n; i++) {
			var boneMap = bones[i];
			var parent = null;
			if (boneMap["parent"]) {
				parent = skeletonData.findBone(boneMap["parent"]);
				if (!parent) throw "Parent bone not found: " + boneMap["parent"];
			}
			var boneData = new spine.BoneData(boneMap["name"], parent);
			boneData.length = (boneMap["length"] || 0) * this.scale;
			boneData.x = (boneMap["x"] || 0) * this.scale;
			boneData.y = (boneMap["y"] || 0) * this.scale;
			boneData.rotation = (boneMap["rotation"] || 0);
			boneData.scaleX = boneMap["scaleX"] || 1;
			boneData.scaleY = boneMap["scaleY"] || 1;
			skeletonData.bones.push(boneData);
		}

		// Slots.
		var slots = root["slots"];
		for (var i = 0, n = slots.length; i < n; i++) {
			var slotMap = slots[i];
			var boneData = skeletonData.findBone(slotMap["bone"]);
			if (!boneData) throw "Slot bone not found: " + slotMap["bone"];
			var slotData = new spine.SlotData(slotMap["name"], boneData);

			var color = slotMap["color"];
			if (color) {
				slotData.r = spine.SkeletonJson.toColor(color, 0);
				slotData.g = spine.SkeletonJson.toColor(color, 1);
				slotData.b = spine.SkeletonJson.toColor(color, 2);
				slotData.a = spine.SkeletonJson.toColor(color, 3);
			}

			slotData.attachmentName = slotMap["attachment"];

			skeletonData.slots.push(slotData);
		}

		// Skins.
		var skins = root["skins"];
		for (var skinName in skins) {
			if (!skins.hasOwnProperty(skinName)) continue;
			var skinMap = skins[skinName];
			var skin = new spine.Skin(skinName);
			for (var slotName in skinMap) {
				if (!skinMap.hasOwnProperty(slotName)) continue;
				var slotIndex = skeletonData.findSlotIndex(slotName);
				var slotEntry = skinMap[slotName];
				for (var attachmentName in slotEntry) {
					if (!slotEntry.hasOwnProperty(attachmentName)) continue;
					var attachment = this.readAttachment(skin, attachmentName, slotEntry[attachmentName]);
					if (attachment != null) skin.addAttachment(slotIndex, attachmentName, attachment);
				}
			}
			skeletonData.skins.push(skin);
			if (skin.name == "default") skeletonData.defaultSkin = skin;
		}

		// Animations.
		var animations = root["animations"];
		for (var animationName in animations) {
			if (!animations.hasOwnProperty(animationName)) continue;
			this.readAnimation(animationName, animations[animationName], skeletonData);
		}

		return skeletonData;
	},
	readAttachment: function (skin, name, map) {
		name = map["name"] || name;

		var type = spine.AttachmentType[map["type"] || "region"];

		if (type == spine.AttachmentType.region) {
			var attachment = new spine.RegionAttachment();
			attachment.x = (map["x"] || 0) * this.scale;
			attachment.y = (map["y"] || 0) * this.scale;
			attachment.scaleX = map["scaleX"] || 1;
			attachment.scaleY = map["scaleY"] || 1;
			attachment.rotation = map["rotation"] || 0;
			attachment.width = (map["width"] || 32) * this.scale;
			attachment.height = (map["height"] || 32) * this.scale;
			attachment.updateOffset();

			attachment.rendererObject = {};
			attachment.rendererObject.name = name;
			attachment.rendererObject.scale = {};
			attachment.rendererObject.scale.x = attachment.scaleX;
			attachment.rendererObject.scale.y = attachment.scaleY;
			attachment.rendererObject.rotation = -attachment.rotation * Math.PI / 180;
			return attachment;
		}

            throw "Unknown attachment type: " + type;
	},

	readAnimation: function (name, map, skeletonData) {
		var timelines = [];
		var duration = 0;

		var bones = map["bones"];
		for (var boneName in bones) {
			if (!bones.hasOwnProperty(boneName)) continue;
			var boneIndex = skeletonData.findBoneIndex(boneName);
			if (boneIndex == -1) throw "Bone not found: " + boneName;
			var boneMap = bones[boneName];

			for (var timelineName in boneMap) {
				if (!boneMap.hasOwnProperty(timelineName)) continue;
				var values = boneMap[timelineName];
				if (timelineName == "rotate") {
					var timeline = new spine.RotateTimeline(values.length);
					timeline.boneIndex = boneIndex;

					var frameIndex = 0;
					for (var i = 0, n = values.length; i < n; i++) {
						var valueMap = values[i];
						timeline.setFrame(frameIndex, valueMap["time"], valueMap["angle"]);
						spine.SkeletonJson.readCurve(timeline, frameIndex, valueMap);
						frameIndex++;
					}
					timelines.push(timeline);
					duration = Math.max(duration, timeline.frames[timeline.getFrameCount() * 2 - 2]);

				} else if (timelineName == "translate" || timelineName == "scale") {
					var timeline;
					var timelineScale = 1;
					if (timelineName == "scale")
						timeline = new spine.ScaleTimeline(values.length);
					else {
						timeline = new spine.TranslateTimeline(values.length);
						timelineScale = this.scale;
					}
					timeline.boneIndex = boneIndex;

					var frameIndex = 0;
					for (var i = 0, n = values.length; i < n; i++) {
						var valueMap = values[i];
						var x = (valueMap["x"] || 0) * timelineScale;
						var y = (valueMap["y"] || 0) * timelineScale;
						timeline.setFrame(frameIndex, valueMap["time"], x, y);
						spine.SkeletonJson.readCurve(timeline, frameIndex, valueMap);
						frameIndex++;
					}
					timelines.push(timeline);
					duration = Math.max(duration, timeline.frames[timeline.getFrameCount() * 3 - 3]);

				} else
					throw "Invalid timeline type for a bone: " + timelineName + " (" + boneName + ")";
			}
		}
		var slots = map["slots"];
		for (var slotName in slots) {
			if (!slots.hasOwnProperty(slotName)) continue;
			var slotMap = slots[slotName];
			var slotIndex = skeletonData.findSlotIndex(slotName);

			for (var timelineName in slotMap) {
				if (!slotMap.hasOwnProperty(timelineName)) continue;
				var values = slotMap[timelineName];
				if (timelineName == "color") {
					var timeline = new spine.ColorTimeline(values.length);
					timeline.slotIndex = slotIndex;

					var frameIndex = 0;
					for (var i = 0, n = values.length; i < n; i++) {
						var valueMap = values[i];
						var color = valueMap["color"];
						var r = spine.SkeletonJson.toColor(color, 0);
						var g = spine.SkeletonJson.toColor(color, 1);
						var b = spine.SkeletonJson.toColor(color, 2);
						var a = spine.SkeletonJson.toColor(color, 3);
						timeline.setFrame(frameIndex, valueMap["time"], r, g, b, a);
						spine.SkeletonJson.readCurve(timeline, frameIndex, valueMap);
						frameIndex++;
					}
					timelines.push(timeline);
					duration = Math.max(duration, timeline.frames[timeline.getFrameCount() * 5 - 5]);

				} else if (timelineName == "attachment") {
					var timeline = new spine.AttachmentTimeline(values.length);
					timeline.slotIndex = slotIndex;

					var frameIndex = 0;
					for (var i = 0, n = values.length; i < n; i++) {
						var valueMap = values[i];
						timeline.setFrame(frameIndex++, valueMap["time"], valueMap["name"]);
					}
					timelines.push(timeline);
                        duration = Math.max(duration, timeline.frames[timeline.getFrameCount() - 1]);

				} else
					throw "Invalid timeline type for a slot: " + timelineName + " (" + slotName + ")";
			}
		}
		skeletonData.animations.push(new spine.Animation(name, timelines, duration));
	}
};
spine.SkeletonJson.readCurve = function (timeline, frameIndex, valueMap) {
	var curve = valueMap["curve"];
	if (!curve) return;
	if (curve == "stepped")
		timeline.curves.setStepped(frameIndex);
	else if (curve instanceof Array)
		timeline.curves.setCurve(frameIndex, curve[0], curve[1], curve[2], curve[3]);
};
spine.SkeletonJson.toColor = function (hexString, colorIndex) {
	if (hexString.length != 8) throw "Color hexidecimal length must be 8, recieved: " + hexString;
	return parseInt(hexString.substring(colorIndex * 2, 2), 16) / 255;
};

spine.Atlas = function (atlasText, textureLoader) {
	this.textureLoader = textureLoader;
	this.pages = [];
	this.regions = [];

	var reader = new spine.AtlasReader(atlasText);
	var tuple = [];
	tuple.length = 4;
	var page = null;
	while (true) {
		var line = reader.readLine();
		if (line == null) break;
		line = reader.trim(line);
		if (line.length == 0)
			page = null;
		else if (!page) {
			page = new spine.AtlasPage();
			page.name = line;

			page.format = spine.Atlas.Format[reader.readValue()];

			reader.readTuple(tuple);
			page.minFilter = spine.Atlas.TextureFilter[tuple[0]];
			page.magFilter = spine.Atlas.TextureFilter[tuple[1]];

			var direction = reader.readValue();
			page.uWrap = spine.Atlas.TextureWrap.clampToEdge;
			page.vWrap = spine.Atlas.TextureWrap.clampToEdge;
			if (direction == "x")
				page.uWrap = spine.Atlas.TextureWrap.repeat;
			else if (direction == "y")
				page.vWrap = spine.Atlas.TextureWrap.repeat;
			else if (direction == "xy")
				page.uWrap = page.vWrap = spine.Atlas.TextureWrap.repeat;

			textureLoader.load(page, line);

			this.pages.push(page);

		} else {
			var region = new spine.AtlasRegion();
			region.name = line;
			region.page = page;

			region.rotate = reader.readValue() == "true";

			reader.readTuple(tuple);
			var x = parseInt(tuple[0]);
			var y = parseInt(tuple[1]);

			reader.readTuple(tuple);
			var width = parseInt(tuple[0]);
			var height = parseInt(tuple[1]);

			region.u = x / page.width;
			region.v = y / page.height;
			if (region.rotate) {
				region.u2 = (x + height) / page.width;
				region.v2 = (y + width) / page.height;
			} else {
				region.u2 = (x + width) / page.width;
				region.v2 = (y + height) / page.height;
			}
			region.x = x;
			region.y = y;
			region.width = Math.abs(width);
			region.height = Math.abs(height);

			if (reader.readTuple(tuple) == 4) { // split is optional
				region.splits = [parseInt(tuple[0]), parseInt(tuple[1]), parseInt(tuple[2]), parseInt(tuple[3])];

				if (reader.readTuple(tuple) == 4) { // pad is optional, but only present with splits
					region.pads = [parseInt(tuple[0]), parseInt(tuple[1]), parseInt(tuple[2]), parseInt(tuple[3])];

					reader.readTuple(tuple);
				}
			}

			region.originalWidth = parseInt(tuple[0]);
			region.originalHeight = parseInt(tuple[1]);

			reader.readTuple(tuple);
			region.offsetX = parseInt(tuple[0]);
			region.offsetY = parseInt(tuple[1]);

			region.index = parseInt(reader.readValue());

			this.regions.push(region);
		}
	}
};
spine.Atlas.prototype = {
	findRegion: function (name) {
		var regions = this.regions;
		for (var i = 0, n = regions.length; i < n; i++)
			if (regions[i].name == name) return regions[i];
		return null;
	},
	dispose: function () {
		var pages = this.pages;
		for (var i = 0, n = pages.length; i < n; i++)
			this.textureLoader.unload(pages[i].rendererObject);
	},
	updateUVs: function (page) {
		var regions = this.regions;
		for (var i = 0, n = regions.length; i < n; i++) {
			var region = regions[i];
			if (region.page != page) continue;
			region.u = region.x / page.width;
			region.v = region.y / page.height;
			if (region.rotate) {
				region.u2 = (region.x + region.height) / page.width;
				region.v2 = (region.y + region.width) / page.height;
			} else {
				region.u2 = (region.x + region.width) / page.width;
				region.v2 = (region.y + region.height) / page.height;
			}
		}
	}
};

spine.Atlas.Format = {
	alpha: 0,
	intensity: 1,
	luminanceAlpha: 2,
	rgb565: 3,
	rgba4444: 4,
	rgb888: 5,
	rgba8888: 6
};

spine.Atlas.TextureFilter = {
	nearest: 0,
	linear: 1,
	mipMap: 2,
	mipMapNearestNearest: 3,
	mipMapLinearNearest: 4,
	mipMapNearestLinear: 5,
	mipMapLinearLinear: 6
};

spine.Atlas.TextureWrap = {
	mirroredRepeat: 0,
	clampToEdge: 1,
	repeat: 2
};

spine.AtlasPage = function () {};
spine.AtlasPage.prototype = {
	name: null,
	format: null,
	minFilter: null,
	magFilter: null,
	uWrap: null,
	vWrap: null,
	rendererObject: null,
	width: 0,
	height: 0
};

spine.AtlasRegion = function () {};
spine.AtlasRegion.prototype = {
	page: null,
	name: null,
	x: 0, y: 0,
	width: 0, height: 0,
	u: 0, v: 0, u2: 0, v2: 0,
	offsetX: 0, offsetY: 0,
	originalWidth: 0, originalHeight: 0,
	index: 0,
	rotate: false,
	splits: null,
	pads: null,
};

spine.AtlasReader = function (text) {
	this.lines = text.split(/\r\n|\r|\n/);
};
spine.AtlasReader.prototype = {
	index: 0,
	trim: function (value) {
		return value.replace(/^\s+|\s+$/g, "");
	},
	readLine: function () {
		if (this.index >= this.lines.length) return null;
		return this.lines[this.index++];
	},
	readValue: function () {
		var line = this.readLine();
		var colon = line.indexOf(":");
		if (colon == -1) throw "Invalid line: " + line;
		return this.trim(line.substring(colon + 1));
	},
	/** Returns the number of tuple values read (2 or 4). */
	readTuple: function (tuple) {
		var line = this.readLine();
		var colon = line.indexOf(":");
		if (colon == -1) throw "Invalid line: " + line;
		var i = 0, lastMatch= colon + 1;
		for (; i < 3; i++) {
			var comma = line.indexOf(",", lastMatch);
			if (comma == -1) {
				if (i == 0) throw "Invalid line: " + line;
				break;
			}
			tuple[i] = this.trim(line.substr(lastMatch, comma - lastMatch));
			lastMatch = comma + 1;
		}
		tuple[i] = this.trim(line.substring(lastMatch));
		return i + 1;
	}
}

spine.AtlasAttachmentLoader = function (atlas) {
	this.atlas = atlas;
}
spine.AtlasAttachmentLoader.prototype = {
	newAttachment: function (skin, type, name) {
		switch (type) {
		case spine.AttachmentType.region:
			var region = this.atlas.findRegion(name);
			if (!region) throw "Region not found in atlas: " + name + " (" + type + ")";
			var attachment = new spine.RegionAttachment(name);
			attachment.rendererObject = region;
			attachment.setUVs(region.u, region.v, region.u2, region.v2, region.rotate);
			attachment.regionOffsetX = region.offsetX;
			attachment.regionOffsetY = region.offsetY;
			attachment.regionWidth = region.width;
			attachment.regionHeight = region.height;
			attachment.regionOriginalWidth = region.originalWidth;
			attachment.regionOriginalHeight = region.originalHeight;
			return attachment;
		}
		throw "Unknown attachment type: " + type;
	}
}

PIXI.AnimCache = {};
spine.Bone.yDown = true;

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */


/**
 * This object is one that will allow you to specify custom rendering functions based on render type
 *
 * @class CustomRenderable
 * @extends DisplayObject
 * @constructor
 */
PIXI.CustomRenderable = function()
{
	PIXI.DisplayObject.call( this );
	
	this.renderable = true;
}

// constructor
PIXI.CustomRenderable.prototype = Object.create( PIXI.DisplayObject.prototype );
PIXI.CustomRenderable.prototype.constructor = PIXI.CustomRenderable;

/**
 * If this object is being rendered by a CanvasRenderer it will call this callback
 *
 * @method renderCanvas
 * @param renderer {CanvasRenderer} The renderer instance
 */
PIXI.CustomRenderable.prototype.renderCanvas = function(renderer)
{
	// override!
}

/**
 * If this object is being rendered by a WebGLRenderer it will call this callback to initialize
 *
 * @method initWebGL
 * @param renderer {WebGLRenderer} The renderer instance
 */
PIXI.CustomRenderable.prototype.initWebGL = function(renderer)
{
	// override!
}

/**
 * If this object is being rendered by a WebGLRenderer it will call this callback
 *
 * @method renderWebGL
 * @param renderer {WebGLRenderer} The renderer instance
 */
PIXI.CustomRenderable.prototype.renderWebGL = function(renderGroup, projectionMatrix)
{
	// not sure if both needed? but ya have for now!
	// override!
}


/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

PIXI.BaseTextureCache = {};
PIXI.texturesToUpdate = [];
PIXI.texturesToDestroy = [];

/**
 * A texture stores the information that represents an image. All textures have a base texture
 *
 * @class BaseTexture
 * @uses EventTarget
 * @constructor
 * @param source {String} the source object (image or canvas)
 */
PIXI.BaseTexture = function(source)
{
	PIXI.EventTarget.call( this );

	/**
	 * [read-only] The width of the base texture set when the image has loaded
	 *
	 * @property width
	 * @type Number
	 * @readOnly
	 */
	this.width = 100;

	/**
	 * [read-only] The height of the base texture set when the image has loaded
	 *
	 * @property height
	 * @type Number
	 * @readOnly
	 */
	this.height = 100;

	/**
	 * [read-only] Describes if the base texture has loaded or not
	 *
	 * @property hasLoaded
	 * @type Boolean
	 * @readOnly
	 */
	this.hasLoaded = false;

	/**
	 * The source that is loaded to create the texture
	 *
	 * @property source
	 * @type Image
	 */
	this.source = source;

	if(!source)return;

	if(this.source instanceof Image || this.source instanceof HTMLImageElement)
	{
		if(this.source.complete)
		{
			this.hasLoaded = true;
			this.width = this.source.width;
			this.height = this.source.height;

			PIXI.texturesToUpdate.push(this);
		}
		else
		{

			var scope = this;
			this.source.onload = function(){

				scope.hasLoaded = true;
				scope.width = scope.source.width;
				scope.height = scope.source.height;

				// add it to somewhere...
				PIXI.texturesToUpdate.push(scope);
				scope.dispatchEvent( { type: 'loaded', content: scope } );
			}
			//	this.image.src = imageUrl;
		}
	}
	else
	{
		this.hasLoaded = true;
		this.width = this.source.width;
		this.height = this.source.height;

		PIXI.texturesToUpdate.push(this);
	}

	this._powerOf2 = false;
}

PIXI.BaseTexture.prototype.constructor = PIXI.BaseTexture;

/**
 * Destroys this base texture
 *
 * @method destroy
 */
PIXI.BaseTexture.prototype.destroy = function()
{
	if(this.source instanceof Image)
	{
		this.source.src = null;
	}
	this.source = null;
	PIXI.texturesToDestroy.push(this);
}

/**
 * Helper function that returns a base texture based on an image url
 * If the image is not in the base texture cache it will be  created and loaded
 *
 * @static
 * @method fromImage
 * @param imageUrl {String} The image url of the texture
 * @return BaseTexture
 */
PIXI.BaseTexture.fromImage = function(imageUrl, crossorigin)
{
	var baseTexture = PIXI.BaseTextureCache[imageUrl];
	if(!baseTexture)
	{
		// new Image() breaks tex loading in some versions of Chrome.
		// See https://code.google.com/p/chromium/issues/detail?id=238071
		var image = new Image();//document.createElement('img');
		if (crossorigin)
		{
			image.crossOrigin = '';
		}
		image.src = imageUrl;
		baseTexture = new PIXI.BaseTexture(image);
		PIXI.BaseTextureCache[imageUrl] = baseTexture;
	}

	return baseTexture;
}

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

PIXI.TextureCache = {};
PIXI.FrameCache = {};

/**
 * A texture stores the information that represents an image or part of an image. It cannot be added
 * to the display list directly. To do this use PIXI.Sprite. If no frame is provided then the whole image is used
 *
 * @class Texture
 * @uses EventTarget
 * @constructor
 * @param baseTexture {BaseTexture} The base texture source to create the texture from
 * @param frame {Rectangle} The rectangle frame of the texture to show
 */
PIXI.Texture = function(baseTexture, frame)
{
	PIXI.EventTarget.call( this );

	if(!frame)
	{
		this.noFrame = true;
		frame = new PIXI.Rectangle(0,0,1,1);
	}

	if(baseTexture instanceof PIXI.Texture)
		baseTexture = baseTexture.baseTexture;

	/**
	 * The base texture of this texture
	 *
	 * @property baseTexture
	 * @type BaseTexture
	 */
	this.baseTexture = baseTexture;

	/**
	 * The frame specifies the region of the base texture that this texture uses
	 *
	 * @property frame
	 * @type Rectangle
	 */
	this.frame = frame;

	/**
	 * The trim point
	 *
	 * @property trim
	 * @type Point
	 */
	this.trim = new PIXI.Point();

	this.scope = this;

	if(baseTexture.hasLoaded)
	{
		if(this.noFrame)frame = new PIXI.Rectangle(0,0, baseTexture.width, baseTexture.height);
		//console.log(frame)

		this.setFrame(frame);
	}
	else
	{
		var scope = this;
		baseTexture.addEventListener( 'loaded', function(){ scope.onBaseTextureLoaded()} );
	}
}

PIXI.Texture.prototype.constructor = PIXI.Texture;

/**
 * Called when the base texture is loaded
 *
 * @method onBaseTextureLoaded
 * @param event
 * @private
 */
PIXI.Texture.prototype.onBaseTextureLoaded = function(event)
{
	var baseTexture = this.baseTexture;
	baseTexture.removeEventListener( 'loaded', this.onLoaded );

	if(this.noFrame)this.frame = new PIXI.Rectangle(0,0, baseTexture.width, baseTexture.height);
	this.noFrame = false;
	this.width = this.frame.width;
	this.height = this.frame.height;

	this.scope.dispatchEvent( { type: 'update', content: this } );
}

/**
 * Destroys this texture
 *
 * @method destroy
 * @param destroyBase {Boolean} Whether to destroy the base texture as well
 */
PIXI.Texture.prototype.destroy = function(destroyBase)
{
	if(destroyBase)this.baseTexture.destroy();
}

/**
 * Specifies the rectangle region of the baseTexture
 *
 * @method setFrame
 * @param frame {Rectangle} The frame of the texture to set it to
 */
PIXI.Texture.prototype.setFrame = function(frame)
{
	this.frame = frame;
	this.width = frame.width;
	this.height = frame.height;

	if(frame.x + frame.width > this.baseTexture.width || frame.y + frame.height > this.baseTexture.height)
	{
		throw new Error("Texture Error: frame does not fit inside the base Texture dimensions " + this);
	}

	this.updateFrame = true;

	PIXI.Texture.frameUpdates.push(this);
	//this.dispatchEvent( { type: 'update', content: this } );
}

/**
 * Helper function that returns a texture based on an image url
 * If the image is not in the texture cache it will be  created and loaded
 *
 * @static
 * @method fromImage
 * @param imageUrl {String} The image url of the texture
 * @param crossorigin {Boolean} Whether requests should be treated as crossorigin
 * @return Texture
 */
PIXI.Texture.fromImage = function(imageUrl, crossorigin)
{
	var texture = PIXI.TextureCache[imageUrl];

	if(!texture)
	{
		texture = new PIXI.Texture(PIXI.BaseTexture.fromImage(imageUrl, crossorigin));
		PIXI.TextureCache[imageUrl] = texture;
	}

	return texture;
}

/**
 * Helper function that returns a texture based on a frame id
 * If the frame id is not in the texture cache an error will be thrown
 *
 * @static
 * @method fromFrame
 * @param frameId {String} The frame id of the texture
 * @return Texture
 */
PIXI.Texture.fromFrame = function(frameId)
{
	var texture = PIXI.TextureCache[frameId];
	if(!texture)throw new Error("The frameId '"+ frameId +"' does not exist in the texture cache " + this);
	return texture;
}

/**
 * Helper function that returns a texture based on a canvas element
 * If the canvas is not in the texture cache it will be  created and loaded
 *
 * @static
 * @method fromCanvas
 * @param canvas {Canvas} The canvas element source of the texture
 * @return Texture
 */
PIXI.Texture.fromCanvas = function(canvas)
{
	var	baseTexture = new PIXI.BaseTexture(canvas);
	return new PIXI.Texture(baseTexture);
}


/**
 * Adds a texture to the textureCache.
 *
 * @static
 * @method addTextureToCache
 * @param texture {Texture}
 * @param id {String} the id that the texture will be stored against.
 */
PIXI.Texture.addTextureToCache = function(texture, id)
{
	PIXI.TextureCache[id] = texture;
}

/**
 * Remove a texture from the textureCache.
 *
 * @static
 * @method removeTextureFromCache
 * @param id {String} the id of the texture to be removed
 * @return {Texture} the texture that was removed
 */
PIXI.Texture.removeTextureFromCache = function(id)
{
	var texture = PIXI.TextureCache[id]
	PIXI.TextureCache[id] = null;
	return texture;
}

// this is more for webGL.. it contains updated frames..
PIXI.Texture.frameUpdates = [];


/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

/**
 A RenderTexture is a special texture that allows any pixi displayObject to be rendered to it.

 __Hint__: All DisplayObjects (exmpl. Sprites) that renders on RenderTexture should be preloaded. 
 Otherwise black rectangles will be drawn instead.  
 
 RenderTexture takes snapshot of DisplayObject passed to render method. If DisplayObject is passed to render method, position and rotation of it will be ignored. For example:
 
	var renderTexture = new PIXI.RenderTexture(800, 600);
	var sprite = PIXI.Sprite.fromImage("spinObj_01.png");
	sprite.position.x = 800/2;
	sprite.position.y = 600/2;
	sprite.anchor.x = 0.5;
	sprite.anchor.y = 0.5;
	renderTexture.render(sprite);

 Sprite in this case will be rendered to 0,0 position. To render this sprite at center DisplayObjectContainer should be used:

	var doc = new PIXI.DisplayObjectContainer();
	doc.addChild(sprite);
	renderTexture.render(doc);  // Renders to center of renderTexture

 @class RenderTexture
 @extends Texture
 @constructor
 @param width {Number} The width of the render texture
 @param height {Number} The height of the render texture
 */
PIXI.RenderTexture = function(width, height)
{
	PIXI.EventTarget.call( this );

	this.width = width || 100;
	this.height = height || 100;

	this.indetityMatrix = PIXI.mat3.create();

	this.frame = new PIXI.Rectangle(0, 0, this.width, this.height);	

	if(PIXI.gl)
	{
		this.initWebGL();
	}
	else
	{
		this.initCanvas();
	}
}

PIXI.RenderTexture.prototype = Object.create( PIXI.Texture.prototype );
PIXI.RenderTexture.prototype.constructor = PIXI.RenderTexture;

/**
 * Initializes the webgl data for this texture
 *
 * @method initWebGL
 * @private
 */
PIXI.RenderTexture.prototype.initWebGL = function()
{
	var gl = PIXI.gl;
	this.glFramebuffer = gl.createFramebuffer();

   	gl.bindFramebuffer(gl.FRAMEBUFFER, this.glFramebuffer );

    this.glFramebuffer.width = this.width;
    this.glFramebuffer.height = this.height;	

	this.baseTexture = new PIXI.BaseTexture();

	this.baseTexture.width = this.width;
	this.baseTexture.height = this.height;

    this.baseTexture._glTexture = gl.createTexture();
    gl.bindTexture(gl.TEXTURE_2D, this.baseTexture._glTexture);

	gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA,  this.width,  this.height, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);

    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);
	gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);
	gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
	gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);

	this.baseTexture.isRender = true;

	gl.bindFramebuffer(gl.FRAMEBUFFER, this.glFramebuffer );
	gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, this.baseTexture._glTexture, 0);

	// create a projection matrix..
	this.projection = new PIXI.Point(this.width/2 , -this.height/2);

	// set the correct render function..
	this.render = this.renderWebGL;
}


PIXI.RenderTexture.prototype.resize = function(width, height)
{

	this.width = width;
	this.height = height;
	
	if(PIXI.gl)
	{
		this.projection.x = this.width/2
		this.projection.y = -this.height/2;
	
		var gl = PIXI.gl;
		gl.bindTexture(gl.TEXTURE_2D, this.baseTexture._glTexture);
		gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA,  this.width,  this.height, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);
	}
	else
	{
		
		this.frame.width = this.width
		this.frame.height = this.height;
		this.renderer.resize(this.width, this.height);
	}
}

/**
 * Initializes the canvas data for this texture
 *
 * @method initCanvas
 * @private
 */
PIXI.RenderTexture.prototype.initCanvas = function()
{
	this.renderer = new PIXI.CanvasRenderer(this.width, this.height, null, 0);

	this.baseTexture = new PIXI.BaseTexture(this.renderer.view);
	this.frame = new PIXI.Rectangle(0, 0, this.width, this.height);

	this.render = this.renderCanvas;
}

/**
 * This function will draw the display object to the texture.
 *
 * @method renderWebGL
 * @param displayObject {DisplayObject} The display object to render this texture on
 * @param clear {Boolean} If true the texture will be cleared before the displayObject is drawn
 * @private
 */
PIXI.RenderTexture.prototype.renderWebGL = function(displayObject, position, clear)
{
	var gl = PIXI.gl;

	// enable the alpha color mask..
	gl.colorMask(true, true, true, true); 

	gl.viewport(0, 0, this.width, this.height);	

	gl.bindFramebuffer(gl.FRAMEBUFFER, this.glFramebuffer );

	if(clear)
	{
		gl.clearColor(0,0,0, 0);     
		gl.clear(gl.COLOR_BUFFER_BIT);
	}

	// THIS WILL MESS WITH HIT TESTING!
	var children = displayObject.children;

	//TODO -? create a new one??? dont think so!
	var originalWorldTransform = displayObject.worldTransform;
	displayObject.worldTransform = PIXI.mat3.create();//sthis.indetityMatrix;
	// modify to flip...
	displayObject.worldTransform[4] = -1;
	displayObject.worldTransform[5] = this.projection.y * -2;

	if(position)
	{
		displayObject.worldTransform[2] = position.x;
		displayObject.worldTransform[5] -= position.y;
	}
	
	PIXI.visibleCount++;
	displayObject.vcount = PIXI.visibleCount;
	
	for(var i=0,j=children.length; i<j; i++)
	{
		children[i].updateTransform();	
	}

	var renderGroup = displayObject.__renderGroup;

	if(renderGroup)
	{
		if(displayObject == renderGroup.root)
		{
			renderGroup.render(this.projection, this.glFramebuffer);
		}
		else
		{
			renderGroup.renderSpecific(displayObject, this.projection, this.glFramebuffer);
		}
	}
	else
	{
		if(!this.renderGroup)this.renderGroup = new PIXI.WebGLRenderGroup(gl);
		this.renderGroup.setRenderable(displayObject);
		this.renderGroup.render(this.projection, this.glFramebuffer);
	}
	
	displayObject.worldTransform = originalWorldTransform;
}


/**
 * This function will draw the display object to the texture.
 *
 * @method renderCanvas
 * @param displayObject {DisplayObject} The display object to render this texture on
 * @param clear {Boolean} If true the texture will be cleared before the displayObject is drawn
 * @private
 */
PIXI.RenderTexture.prototype.renderCanvas = function(displayObject, position, clear)
{
	var children = displayObject.children;

	displayObject.worldTransform = PIXI.mat3.create();
	
	if(position)
	{
		displayObject.worldTransform[2] = position.x;
		displayObject.worldTransform[5] = position.y;
	}
	

	for(var i=0,j=children.length; i<j; i++)
	{
		children[i].updateTransform();	
	}

	if(clear)this.renderer.context.clearRect(0,0, this.width, this.height);
	
    this.renderer.renderDisplayObject(displayObject);
    
    this.renderer.context.setTransform(1,0,0,1,0,0); 
    

  //  PIXI.texturesToUpdate.push(this.baseTexture);
}

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

/**
 * A Class that loads a bunch of images / sprite sheet / bitmap font files. Once the
 * assets have been loaded they are added to the PIXI Texture cache and can be accessed
 * easily through PIXI.Texture.fromImage() and PIXI.Sprite.fromImage()
 * When all items have been loaded this class will dispatch a "onLoaded" event
 * As each individual item is loaded this class will dispatch a "onProgress" event
 *
 * @class AssetLoader
 * @constructor
 * @uses EventTarget
 * @param {Array<String>} assetURLs an array of image/sprite sheet urls that you would like loaded
 *      supported. Supported image formats include "jpeg", "jpg", "png", "gif". Supported
 *      sprite sheet data formats only include "JSON" at this time. Supported bitmap font
 *      data formats include "xml" and "fnt".
 * @param crossorigin {Boolean} Whether requests should be treated as crossorigin
 */
PIXI.AssetLoader = function(assetURLs, crossorigin)
{
	PIXI.EventTarget.call(this);

	/**
	 * The array of asset URLs that are going to be loaded
     *
	 * @property assetURLs
	 * @type Array<String>
	 */
	this.assetURLs = assetURLs;

    /**
     * Whether the requests should be treated as cross origin
     *
     * @property crossorigin
     * @type Boolean
     */
	this.crossorigin = crossorigin;

    /**
     * Maps file extension to loader types
     *
     * @property loadersByType
     * @type Object
     */
    this.loadersByType = {
        "jpg":  PIXI.ImageLoader,
        "jpeg": PIXI.ImageLoader,
        "png":  PIXI.ImageLoader,
        "gif":  PIXI.ImageLoader,
        "json": PIXI.JsonLoader,
        "anim": PIXI.SpineLoader,
        "xml":  PIXI.BitmapFontLoader,
        "fnt":  PIXI.BitmapFontLoader
    };


};

/**
 * Fired when an item has loaded
 * @event onProgress
 */

/**
 * Fired when all the assets have loaded
 * @event onComplete
 */

// constructor
PIXI.AssetLoader.prototype.constructor = PIXI.AssetLoader;

/**
 * Starts loading the assets sequentially
 *
 * @method load
 */
PIXI.AssetLoader.prototype.load = function()
{
    var scope = this;

	this.loadCount = this.assetURLs.length;

    for (var i=0; i < this.assetURLs.length; i++)
	{
		var fileName = this.assetURLs[i];
		var fileType = fileName.split(".").pop().toLowerCase();

        var loaderClass = this.loadersByType[fileType];
        if(!loaderClass)
            throw new Error(fileType + " is an unsupported file type");

        var loader = new loaderClass(fileName, this.crossorigin);

        loader.addEventListener("loaded", function()
        {
            scope.onAssetLoaded();
        });
        loader.load();
	}
};

/**
 * Invoked after each file is loaded
 *
 * @method onAssetLoaded
 * @private
 */
PIXI.AssetLoader.prototype.onAssetLoaded = function()
{
    this.loadCount--;
	this.dispatchEvent({type: "onProgress", content: this});
	if(this.onProgress) this.onProgress();

	if(this.loadCount == 0)
	{
		this.dispatchEvent({type: "onComplete", content: this});
		if(this.onComplete) this.onComplete();
	}
};


/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

/**
 * The json file loader is used to load in JSON data and parsing it
 * When loaded this class will dispatch a "loaded" event
 * If load failed this class will dispatch a "error" event
 *
 * @class JsonLoader
 * @uses EventTarget
 * @constructor
 * @param url {String} The url of the JSON file
 * @param crossorigin {Boolean} Whether requests should be treated as crossorigin
 */
PIXI.JsonLoader = function (url, crossorigin) {
	PIXI.EventTarget.call(this);

	/**
	 * The url of the bitmap font data
	 *
	 * @property url
	 * @type String
	 */
	this.url = url;

	/**
	 * Whether the requests should be treated as cross origin
	 *
	 * @property crossorigin
	 * @type Boolean
	 */
	this.crossorigin = crossorigin;

	/**
	 * [read-only] The base url of the bitmap font data
	 *
	 * @property baseUrl
	 * @type String
	 * @readOnly
	 */
	this.baseUrl = url.replace(/[^\/]*$/, "");

	/**
	 * [read-only] Whether the data has loaded yet
	 *
	 * @property loaded
	 * @type Boolean
	 * @readOnly
	 */
	this.loaded = false;

};

// constructor
PIXI.JsonLoader.prototype.constructor = PIXI.JsonLoader;

/**
 * Loads the JSON data
 *
 * @method load
 */
PIXI.JsonLoader.prototype.load = function () {
	this.ajaxRequest = new AjaxRequest();
	var scope = this;
	this.ajaxRequest.onreadystatechange = function () {
		scope.onJSONLoaded();
	};

	this.ajaxRequest.open("GET", this.url, true);
	if (this.ajaxRequest.overrideMimeType) this.ajaxRequest.overrideMimeType("application/json");
	this.ajaxRequest.send(null);
};

/**
 * Invoke when JSON file is loaded
 *
 * @method onJSONLoaded
 * @private
 */
PIXI.JsonLoader.prototype.onJSONLoaded = function () {
	if (this.ajaxRequest.readyState == 4) {
		if (this.ajaxRequest.status == 200 || window.location.href.indexOf("http") == -1) {
			this.json = JSON.parse(this.ajaxRequest.responseText);

			if(this.json.frames)
			{
				// sprite sheet
				var scope = this;
				var textureUrl = this.baseUrl + this.json.meta.image;
				var image = new PIXI.ImageLoader(textureUrl, this.crossorigin);
				var frameData = this.json.frames;

				this.texture = image.texture.baseTexture;
				image.addEventListener("loaded", function (event) {
					scope.onLoaded();
				});

				for (var i in frameData) {
					var rect = frameData[i].frame;
					if (rect) {
						PIXI.TextureCache[i] = new PIXI.Texture(this.texture, {
							x: rect.x,
							y: rect.y,
							width: rect.w,
							height: rect.h
						});
						if (frameData[i].trimmed) {
							//var realSize = frameData[i].spriteSourceSize;
							PIXI.TextureCache[i].realSize = frameData[i].spriteSourceSize;
							PIXI.TextureCache[i].trim.x = 0; // (realSize.x / rect.w)
							// calculate the offset!
						}
					}
				}

				image.load();

			}
			else if(this.json.bones)
			{
				// spine animation
				var spineJsonParser = new spine.SkeletonJson();
				var skeletonData = spineJsonParser.readSkeletonData(this.json);
				PIXI.AnimCache[this.url] = skeletonData;
				this.onLoaded();
			}
			else
			{
				this.onLoaded();
			}
		}
		else
		{
			this.onError();
		}
	}
};

/**
 * Invoke when json file loaded
 *
 * @method onLoaded
 * @private
 */
PIXI.JsonLoader.prototype.onLoaded = function () {
	this.loaded = true;
	this.dispatchEvent({
		type: "loaded",
		content: this
	});
};

/**
 * Invoke when error occured
 *
 * @method onError
 * @private
 */
PIXI.JsonLoader.prototype.onError = function () {
	this.dispatchEvent({
		type: "error",
		content: this
	});
};
/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

/**
 * The sprite sheet loader is used to load in JSON sprite sheet data
 * To generate the data you can use http://www.codeandweb.com/texturepacker and publish the "JSON" format
 * There is a free version so thats nice, although the paid version is great value for money.
 * It is highly recommended to use Sprite sheets (also know as texture atlas") as it means sprite"s can be batched and drawn together for highly increased rendering speed.
 * Once the data has been loaded the frames are stored in the PIXI texture cache and can be accessed though PIXI.Texture.fromFrameId() and PIXI.Sprite.fromFromeId()
 * This loader will also load the image file that the Spritesheet points to as well as the data.
 * When loaded this class will dispatch a "loaded" event
 *
 * @class SpriteSheetLoader
 * @uses EventTarget
 * @constructor
 * @param url {String} The url of the sprite sheet JSON file
 * @param crossorigin {Boolean} Whether requests should be treated as crossorigin
 */

PIXI.SpriteSheetLoader = function (url, crossorigin) {
	/*
	 * i use texture packer to load the assets..
	 * http://www.codeandweb.com/texturepacker
	 * make sure to set the format as "JSON"
	 */
	PIXI.EventTarget.call(this);

	/**
	 * The url of the bitmap font data
	 *
	 * @property url
	 * @type String
	 */
	this.url = url;

	/**
	 * Whether the requests should be treated as cross origin
	 *
	 * @property crossorigin
	 * @type Boolean
	 */
	this.crossorigin = crossorigin;

	/**
	 * [read-only] The base url of the bitmap font data
	 *
	 * @property baseUrl
	 * @type String
	 * @readOnly
	 */
	this.baseUrl = url.replace(/[^\/]*$/, "");

    /**
     * The texture being loaded
     *
     * @property texture
     * @type Texture
     */
    this.texture = null;

    /**
     * The frames of the sprite sheet
     *
     * @property frames
     * @type Object
     */
	this.frames = {};
};

// constructor
PIXI.SpriteSheetLoader.prototype.constructor = PIXI.SpriteSheetLoader;

/**
 * This will begin loading the JSON file
 *
 * @method load
 */
PIXI.SpriteSheetLoader.prototype.load = function () {
	var scope = this;
	var jsonLoader = new PIXI.JsonLoader(this.url, this.crossorigin);
	jsonLoader.addEventListener("loaded", function (event) {
		scope.json = event.content.json;
		scope.onJSONLoaded();
	});
	jsonLoader.load();
};

/**
 * Invoke when JSON file is loaded
 *
 * @method onJSONLoaded
 * @private
 */
PIXI.SpriteSheetLoader.prototype.onJSONLoaded = function () {
	var scope = this;
	var textureUrl = this.baseUrl + this.json.meta.image;
	var image = new PIXI.ImageLoader(textureUrl, this.crossorigin);
	var frameData = this.json.frames;

	this.texture = image.texture.baseTexture;
	image.addEventListener("loaded", function (event) {
		scope.onLoaded();
	});

	for (var i in frameData) {
		var rect = frameData[i].frame;
		if (rect) {
			PIXI.TextureCache[i] = new PIXI.Texture(this.texture, {
				x: rect.x,
				y: rect.y,
				width: rect.w,
				height: rect.h
			});
			if (frameData[i].trimmed) {
				//var realSize = frameData[i].spriteSourceSize;
				PIXI.TextureCache[i].realSize = frameData[i].spriteSourceSize;
				PIXI.TextureCache[i].trim.x = 0; // (realSize.x / rect.w)
				// calculate the offset!
			}
		}
	}

	image.load();
};
/**
 * Invoke when all files are loaded (json and texture)
 *
 * @method onLoaded
 * @private
 */
PIXI.SpriteSheetLoader.prototype.onLoaded = function () {
	this.dispatchEvent({
		type: "loaded",
		content: this
	});
};

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

/**
 * The image loader class is responsible for loading images file formats ("jpeg", "jpg", "png" and "gif")
 * Once the image has been loaded it is stored in the PIXI texture cache and can be accessed though PIXI.Texture.fromFrameId() and PIXI.Sprite.fromFromeId()
 * When loaded this class will dispatch a 'loaded' event
 *
 * @class ImageLoader
 * @uses EventTarget
 * @constructor
 * @param url {String} The url of the image
 * @param crossorigin {Boolean} Whether requests should be treated as crossorigin
 */
PIXI.ImageLoader = function(url, crossorigin)
{
    PIXI.EventTarget.call(this);

    /**
     * The texture being loaded
     *
     * @property texture
     * @type Texture
     */
    this.texture = PIXI.Texture.fromImage(url, crossorigin);

    /**
     * if the image is loaded with loadFramedSpriteSheet
     * frames will contain the sprite sheet frames
     *
     */
    this.frames = [];
};

// constructor
PIXI.ImageLoader.prototype.constructor = PIXI.ImageLoader;

/**
 * Loads image or takes it from cache
 *
 * @method load
 */
PIXI.ImageLoader.prototype.load = function()
{
    if(!this.texture.baseTexture.hasLoaded)
    {
        var scope = this;
        this.texture.baseTexture.addEventListener("loaded", function()
        {
            scope.onLoaded();
        });
    }
    else
    {
        this.onLoaded();
    }
};

/**
 * Invoked when image file is loaded or it is already cached and ready to use
 *
 * @method onLoaded
 * @private
 */
PIXI.ImageLoader.prototype.onLoaded = function()
{
    this.dispatchEvent({type: "loaded", content: this});
};

/**
 * Loads image and split it to uniform sized frames
 *
 *
 * @method loadFramedSpriteSheet
 * @param frameWidth {Number} with of each frame
 * @param frameHeight {Number} height of each frame
 * @param textureName {String} if given, the frames will be cached in <textureName>-<ord> format 
 */
PIXI.ImageLoader.prototype.loadFramedSpriteSheet = function(frameWidth, frameHeight, textureName)
{
    this.frames = [];
    var cols = Math.floor(this.texture.width / frameWidth);
    var rows = Math.floor(this.texture.height / frameHeight);

    var i=0;
    for (var y=0; y<rows; y++)
    {
        for (var x=0; x<cols; x++,i++)
        {
            var texture = new PIXI.Texture(this.texture, {
                x: x*frameWidth,
                y: y*frameHeight,
                width: frameWidth,
                height: frameHeight
            });

            this.frames.push(texture);
            if (textureName) PIXI.TextureCache[textureName+'-'+i] = texture;
        }
    }

    if(!this.texture.baseTexture.hasLoaded)
    {
        var scope = this;
        this.texture.baseTexture.addEventListener("loaded", function() {
            scope.onLoaded();
        });
    }
    else
    {
        this.onLoaded();
    }
};
/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

/**
 * The xml loader is used to load in XML bitmap font data ("xml" or "fnt")
 * To generate the data you can use http://www.angelcode.com/products/bmfont/
 * This loader will also load the image file as the data.
 * When loaded this class will dispatch a "loaded" event
 *
 * @class BitmapFontLoader
 * @uses EventTarget
 * @constructor
 * @param url {String} The url of the sprite sheet JSON file
 * @param crossorigin {Boolean} Whether requests should be treated as crossorigin
 */
PIXI.BitmapFontLoader = function(url, crossorigin)
{
    /*
     * i use texture packer to load the assets..
     * http://www.codeandweb.com/texturepacker
     * make sure to set the format as "JSON"
     */
    PIXI.EventTarget.call(this);

    /**
     * The url of the bitmap font data
     *
     * @property url
     * @type String
     */
    this.url = url;

    /**
     * Whether the requests should be treated as cross origin
     *
     * @property crossorigin
     * @type Boolean
     */
    this.crossorigin = crossorigin;

    /**
     * [read-only] The base url of the bitmap font data
     *
     * @property baseUrl
     * @type String
     * @readOnly
     */
    this.baseUrl = url.replace(/[^\/]*$/, "");

    /**
     * [read-only] The texture of the bitmap font
     *
     * @property baseUrl
     * @type String
     */
    this.texture = null;
};

// constructor
PIXI.BitmapFontLoader.prototype.constructor = PIXI.BitmapFontLoader;

/**
 * Loads the XML font data
 *
 * @method load
 */
PIXI.BitmapFontLoader.prototype.load = function()
{
    this.ajaxRequest = new XMLHttpRequest();
    var scope = this;
    this.ajaxRequest.onreadystatechange = function()
    {
        scope.onXMLLoaded();
    };

    this.ajaxRequest.open("GET", this.url, true);
    if (this.ajaxRequest.overrideMimeType) this.ajaxRequest.overrideMimeType("application/xml");
    this.ajaxRequest.send(null)
};

/**
 * Invoked when XML file is loaded, parses the data
 *
 * @method onXMLLoaded
 * @private
 */
PIXI.BitmapFontLoader.prototype.onXMLLoaded = function()
{
    if (this.ajaxRequest.readyState == 4)
    {
        if (this.ajaxRequest.status == 200 || window.location.href.indexOf("http") == -1)
        {
            var textureUrl = this.baseUrl + this.ajaxRequest.responseXML.getElementsByTagName("page")[0].attributes.getNamedItem("file").nodeValue;
            var image = new PIXI.ImageLoader(textureUrl, this.crossorigin);
            this.texture = image.texture.baseTexture;

            var data = {};
            var info = this.ajaxRequest.responseXML.getElementsByTagName("info")[0];
            var common = this.ajaxRequest.responseXML.getElementsByTagName("common")[0];
            data.font = info.attributes.getNamedItem("face").nodeValue;
            data.size = parseInt(info.attributes.getNamedItem("size").nodeValue, 10);
            data.lineHeight = parseInt(common.attributes.getNamedItem("lineHeight").nodeValue, 10);
            data.chars = {};

            //parse letters
            var letters = this.ajaxRequest.responseXML.getElementsByTagName("char");

            for (var i = 0; i < letters.length; i++)
            {
                var charCode = parseInt(letters[i].attributes.getNamedItem("id").nodeValue, 10);

                var textureRect = new PIXI.Rectangle(
                    parseInt(letters[i].attributes.getNamedItem("x").nodeValue, 10),
                    parseInt(letters[i].attributes.getNamedItem("y").nodeValue, 10),
                    parseInt(letters[i].attributes.getNamedItem("width").nodeValue, 10),
                    parseInt(letters[i].attributes.getNamedItem("height").nodeValue, 10)
                );

                data.chars[charCode] = {
                    xOffset: parseInt(letters[i].attributes.getNamedItem("xoffset").nodeValue, 10),
                    yOffset: parseInt(letters[i].attributes.getNamedItem("yoffset").nodeValue, 10),
                    xAdvance: parseInt(letters[i].attributes.getNamedItem("xadvance").nodeValue, 10),
                    kerning: {},
                    texture: PIXI.TextureCache[charCode] = new PIXI.Texture(this.texture, textureRect)

                };
            }

            //parse kernings
            var kernings = this.ajaxRequest.responseXML.getElementsByTagName("kerning");
            for (i = 0; i < kernings.length; i++)
            {
               var first = parseInt(kernings[i].attributes.getNamedItem("first").nodeValue, 10);
               var second = parseInt(kernings[i].attributes.getNamedItem("second").nodeValue, 10);
               var amount = parseInt(kernings[i].attributes.getNamedItem("amount").nodeValue, 10);

                data.chars[second].kerning[first] = amount;

            }

            PIXI.BitmapText.fonts[data.font] = data;

            var scope = this;
            image.addEventListener("loaded", function() {
                scope.onLoaded();
            });
            image.load();
        }
    }
};

/**
 * Invoked when all files are loaded (xml/fnt and texture)
 *
 * @method onLoaded
 * @private
 */
PIXI.BitmapFontLoader.prototype.onLoaded = function()
{
    this.dispatchEvent({type: "loaded", content: this});
};

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 * based on pixi impact spine implementation made by Eemeli Kelokorpi (@ekelokorpi) https://github.com/ekelokorpi
 *
 * Awesome JS run time provided by EsotericSoftware
 * https://github.com/EsotericSoftware/spine-runtimes
 *
 */

/**
 * The Spine loader is used to load in JSON spine data
 * To generate the data you need to use http://esotericsoftware.com/ and export the "JSON" format
 * Due to a clash of names  You will need to change the extension of the spine file from *.json to *.anim for it to load
 * See example 12 (http://www.goodboydigital.com/pixijs/examples/12/) to see a working example and check out the source
 * You will need to generate a sprite sheet to accompany the spine data
 * When loaded this class will dispatch a "loaded" event
 *
 * @class Spine
 * @uses EventTarget
 * @constructor
 * @param url {String} The url of the JSON file
 * @param crossorigin {Boolean} Whether requests should be treated as crossorigin
 */
PIXI.SpineLoader = function(url, crossorigin)
{
	PIXI.EventTarget.call(this);

	/**
	 * The url of the bitmap font data
	 *
	 * @property url
	 * @type String
	 */
	this.url = url;

	/**
	 * Whether the requests should be treated as cross origin
	 *
	 * @property crossorigin
	 * @type Boolean
	 */
	this.crossorigin = crossorigin;

	/**
	 * [read-only] Whether the data has loaded yet
	 *
	 * @property loaded
	 * @type Boolean
	 * @readOnly
	 */
	this.loaded = false;
}

PIXI.SpineLoader.prototype.constructor = PIXI.SpineLoader;

/**
 * Loads the JSON data
 *
 * @method load
 */
PIXI.SpineLoader.prototype.load = function () {

	var scope = this;
	var jsonLoader = new PIXI.JsonLoader(this.url, this.crossorigin);
	jsonLoader.addEventListener("loaded", function (event) {
		scope.json = event.content.json;
		scope.onJSONLoaded();
	});
	jsonLoader.load();
};

/**
 * Invoke when JSON file is loaded
 *
 * @method onJSONLoaded
 * @private
 */
PIXI.SpineLoader.prototype.onJSONLoaded = function (event) {
	var spineJsonParser = new spine.SkeletonJson();
	var skeletonData = spineJsonParser.readSkeletonData(this.json);

	PIXI.AnimCache[this.url] = skeletonData;

	this.onLoaded();
};

/**
 * Invoke when JSON file is loaded
 *
 * @method onLoaded
 * @private
 */
PIXI.SpineLoader.prototype.onLoaded = function () {
	this.loaded = true;
    this.dispatchEvent({type: "loaded", content: this});
};


/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */


/**
 * This is the base class for  creating a pixi.js filter. Currently only webGL supports filters.
 * If you want to make a custom filter this should be your base class.
 * @class AbstractFilter
 * @constructor
 * @param fragmentSrc
 * @param unifroms  
 */
PIXI.AbstractFilter = function(fragmentSrc, unifroms)
{
	/**
	* An array of passes - some filters contain a few steps this array simply stores the steps in a liniear fashion.
	* For example the blur filter has two passes blurX and blurY.
	* @property passes
	* @type Array an array of filter objects
	* @private
	*/
	this.passes = [this];


	this.dirty = true;
	this.padding = 0;

	/**
	@property uniforms
	@private
	*/
	this.uniforms = unifroms || {};
	
	this.fragmentSrc = fragmentSrc || [];
}


/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

/**
 * 
 * The ColorMatrixFilter class lets you apply a 4x4 matrix transformation on the RGBA 
 * color and alpha values of every pixel on your displayObject to produce a result 
 * with a new set of RGBA color and alpha values. Its pretty powerful!
 * @class ColorMatrixFilter
 * @contructor
 */
PIXI.ColorMatrixFilter = function()
{
	PIXI.AbstractFilter.call( this );
	
	this.passes = [this];
	
	// set the uniforms
	this.uniforms = {
		matrix: {type: 'mat4', value: [1,0,0,0,
									   0,1,0,0,
									   0,0,1,0,
									   0,0,0,1]},
	};
	
	this.fragmentSrc = [
	  "precision mediump float;",
	  "varying vec2 vTextureCoord;",
	  "varying float vColor;",
	  "uniform float invert;",
	  "uniform mat4 matrix;",
	  "uniform sampler2D uSampler;",
	  "void main(void) {",
	    "gl_FragColor = texture2D(uSampler, vTextureCoord) * matrix;",
	    "gl_FragColor = gl_FragColor * vColor;",
	  "}"
	];
	
}

PIXI.ColorMatrixFilter.prototype = Object.create( PIXI.AbstractFilter.prototype );
PIXI.ColorMatrixFilter.prototype.constructor = PIXI.ColorMatrixFilter;

/**
 * Sets the matrix of the color matrix filter
 *
 * @property matrix
 * @type Array and array of 26 numbers
 * @default [1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]
 */
Object.defineProperty(PIXI.ColorMatrixFilter.prototype, 'matrix', {
    get: function() {
        return this.uniforms.matrix.value;
    },
    set: function(value) {
    	this.uniforms.matrix.value = value;
    }
});
/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */


/**
 * 
 * This turns your displayObjects to black and white.
 * @class GreyFilter
 * @contructor
 */
PIXI.GreyFilter = function()
{
	PIXI.AbstractFilter.call( this );
	
	this.passes = [this];
	
	// set the uniforms
	this.uniforms = {
		grey: {type: 'f', value: 1},
	};
	
	this.fragmentSrc = [
	  "precision mediump float;",
	  "varying vec2 vTextureCoord;",
	  "varying float vColor;",
	  "uniform sampler2D uSampler;",
	  "uniform float grey;",
	  "void main(void) {",
	    "gl_FragColor = texture2D(uSampler, vTextureCoord);",
		"gl_FragColor.rgb = mix(gl_FragColor.rgb, vec3(0.2126*gl_FragColor.r + 0.7152*gl_FragColor.g + 0.0722*gl_FragColor.b), grey);",
	    "gl_FragColor = gl_FragColor * vColor;",
	  "}"
	];
}

PIXI.GreyFilter.prototype = Object.create( PIXI.AbstractFilter.prototype );
PIXI.GreyFilter.prototype.constructor = PIXI.GreyFilter;

/**
The strength of the grey. 1 will make the object black and white, 0 will make the object its normal color
@property grey
*/
Object.defineProperty(PIXI.GreyFilter.prototype, 'grey', {
    get: function() {
        return this.uniforms.grey.value;
    },
    set: function(value) {
    	this.uniforms.grey.value = value;
    }
});

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */


/**
 * 
 * The DisplacementFilter class uses the pixel values from the specified texture (called the displacement map) to perform a displacement of an object. 
 * You can use this filter to apply all manor of crazy warping effects
 * Currently the r property of the texture is used offset the x and the g propery of the texture is used to offset the y.
 * @class DisplacementFilter
 * @contructor
 * @param texture {Texture} The texture used for the displacemtent map * must be power of 2 texture at the moment
 */
PIXI.DisplacementFilter = function(texture)
{
	PIXI.AbstractFilter.call( this );
	
	this.passes = [this];
	texture.baseTexture._powerOf2 = true;

	// set the uniforms
	//console.log()
	this.uniforms = {
		displacementMap: {type: 'sampler2D', value:texture},
		scale:			 {type: 'f2', value:{x:30, y:30}},
		offset:			 {type: 'f2', value:{x:0, y:0}},
		mapDimensions:   {type: 'f2', value:{x:1, y:5112}},
		dimensions:   {type: 'f4', value:[0,0,0,0]}
	};
	

	if(texture.baseTexture.hasLoaded)
	{
		this.uniforms.mapDimensions.value.x = texture.width;
		this.uniforms.mapDimensions.value.y = texture.height;
	}
	else
	{
		this.boundLoadedFunction = this.onTextureLoaded.bind(this);

		texture.baseTexture.on("loaded", this.boundLoadedFunction);
	}

	this.fragmentSrc = [
	  "precision mediump float;",
	  "varying vec2 vTextureCoord;",
	  "varying float vColor;",
	  "uniform sampler2D displacementMap;",
	  "uniform sampler2D uSampler;",
	  "uniform vec2 scale;",
	  "uniform vec2 offset;",
	  "uniform vec4 dimensions;",
	  "uniform vec2 mapDimensions;",// = vec2(256.0, 256.0);",
	 // "const vec2 textureDimensions = vec2(750.0, 750.0);",
	  
	  "void main(void) {",
	  	"vec2 mapCords = vTextureCoord.xy;",
//	  	"mapCords -= ;",
	 	"mapCords += (dimensions.zw + offset)/ dimensions.xy ;",
	 	"mapCords.y *= -1.0;",
	 	"mapCords.y += 1.0;",
	  	"vec2 matSample = texture2D(displacementMap, mapCords).xy;",
		"matSample -= 0.5;",	  
	 	"matSample *= scale;",
	 	"matSample /= mapDimensions;",
	    "gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x + matSample.x, vTextureCoord.y + matSample.y));",
		"gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb, 1.0);",
		"vec2 cord = vTextureCoord;",
		
		//"gl_FragColor =  texture2D(displacementMap, cord);",
	    "gl_FragColor = gl_FragColor * vColor;",
	    
	  "}"
	];
	
}

PIXI.DisplacementFilter.prototype = Object.create( PIXI.AbstractFilter.prototype );
PIXI.DisplacementFilter.prototype.constructor = PIXI.DisplacementFilter;

PIXI.DisplacementFilter.prototype.onTextureLoaded = function()
{
	
	this.uniforms.mapDimensions.value.x = this.uniforms.displacementMap.value.width;
	this.uniforms.mapDimensions.value.y = this.uniforms.displacementMap.value.height;

	this.uniforms.displacementMap.value.baseTexture.off("loaded", this.boundLoadedFunction)

}

/**
 * The texture used for the displacemtent map * must be power of 2 texture at the moment
 *
 * @property map
 * @type Texture
 */
Object.defineProperty(PIXI.DisplacementFilter.prototype, 'map', {
    get: function() {
        return this.uniforms.displacementMap.value;
    },
    set: function(value) {
    	this.uniforms.displacementMap.value = value;
    }
});

/**
 * The multiplier used to scale the displacement result from the map calculation.
 *
 * @property scale
 * @type Point
 */
Object.defineProperty(PIXI.DisplacementFilter.prototype, 'scale', {
    get: function() {
        return this.uniforms.scale.value;
    },
    set: function(value) {
    	this.uniforms.scale.value = value;
    }
});

/**
 * The offset used to move the displacement map.
 *
 * @property offset
 * @type Point
 */
Object.defineProperty(PIXI.DisplacementFilter.prototype, 'offset', {
    get: function() {
        return this.uniforms.offset.value;
    },
    set: function(value) {
    	this.uniforms.offset.value = value;
    }
});
/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

/**
 * 
 * This filter applies a pixlate effect making display objects appear "blocky"
 * @class PixelateFilter
 * @contructor
 */
PIXI.PixelateFilter = function()
{
	PIXI.AbstractFilter.call( this );

	this.passes = [this];
	
	// set the uniforms
	this.uniforms = {
		invert: {type: 'f', value: 0},
		dimensions: {type: 'f4', value:new Float32Array([10000, 100, 10, 10])},
		pixelSize: {type: 'f2', value:{x:10, y:10}},
	};

	this.fragmentSrc = [
	  "precision mediump float;",
	  "varying vec2 vTextureCoord;",
	  "varying float vColor;",
	  "uniform vec2 testDim;",
	  "uniform vec4 dimensions;",
	  "uniform vec2 pixelSize;",
	  "uniform sampler2D uSampler;",
	  "void main(void) {",
	 	"vec2 coord = vTextureCoord;",

	 	"vec2 size = dimensions.xy/pixelSize;",

	 	"vec2 color = floor( ( vTextureCoord * size ) ) / size + pixelSize/dimensions.xy * 0.5;",
	    "gl_FragColor = texture2D(uSampler, color);",
	  "}"
	];
	

}

PIXI.PixelateFilter.prototype = Object.create( PIXI.AbstractFilter.prototype );
PIXI.PixelateFilter.prototype.constructor = PIXI.PixelateFilter;

/**
 * 
 * This a point that describes the size of the blocs. x is the width of the block and y is the the height
 * @property size
 * @type Point
 */
Object.defineProperty(PIXI.PixelateFilter.prototype, 'size', {
    get: function() {
        return this.uniforms.pixelSize.value;
    },
    set: function(value) {
    	this.dirty = true;
    	this.uniforms.pixelSize.value = value;
    }
});
/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */



PIXI.BlurXFilter = function()
{
	PIXI.AbstractFilter.call( this );
	
	this.passes = [this];
	
	// set the uniforms
	this.uniforms = {
		blur: {type: 'f', value: 1/512},
	};
	
	this.fragmentSrc = [
	  "precision mediump float;",
	  "varying vec2 vTextureCoord;",
	  "varying float vColor;",
	  "uniform float blur;",
	  "uniform sampler2D uSampler;",
	    "void main(void) {",
	  	"vec4 sum = vec4(0.0);",

	  	"sum += texture2D(uSampler, vec2(vTextureCoord.x - 4.0*blur, vTextureCoord.y)) * 0.05;",
	    "sum += texture2D(uSampler, vec2(vTextureCoord.x - 3.0*blur, vTextureCoord.y)) * 0.09;",
	    "sum += texture2D(uSampler, vec2(vTextureCoord.x - 2.0*blur, vTextureCoord.y)) * 0.12;",
	    "sum += texture2D(uSampler, vec2(vTextureCoord.x - blur, vTextureCoord.y)) * 0.15;",
	    "sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * 0.16;",
	    "sum += texture2D(uSampler, vec2(vTextureCoord.x + blur, vTextureCoord.y)) * 0.15;",
	    "sum += texture2D(uSampler, vec2(vTextureCoord.x + 2.0*blur, vTextureCoord.y)) * 0.12;",
	    "sum += texture2D(uSampler, vec2(vTextureCoord.x + 3.0*blur, vTextureCoord.y)) * 0.09;",
	    "sum += texture2D(uSampler, vec2(vTextureCoord.x + 4.0*blur, vTextureCoord.y)) * 0.05;",
	 
		"gl_FragColor = sum;",

	  "}"
	];
}

PIXI.BlurXFilter.prototype = Object.create( PIXI.AbstractFilter.prototype );
PIXI.BlurXFilter.prototype.constructor = PIXI.BlurXFilter;


Object.defineProperty(PIXI.BlurXFilter.prototype, 'blur', {
    get: function() {
        return this.uniforms.blur.value / (1/7000);
    },
    set: function(value) {
    
    	this.dirty = true;
    	this.uniforms.blur.value = (1/7000) * value;
    }
});

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */



PIXI.BlurYFilter = function()
{
	PIXI.AbstractFilter.call( this );
	
	this.passes = [this];
	
	// set the uniforms
	this.uniforms = {
		blur: {type: 'f', value: 1/512},
	};
	
	this.fragmentSrc = [
	  "precision mediump float;",
	  "varying vec2 vTextureCoord;",
	  "varying float vColor;",
	  "uniform float blur;",
	  "uniform sampler2D uSampler;",
	    "void main(void) {",
	  	"vec4 sum = vec4(0.0);",

	  	"sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 4.0*blur)) * 0.05;",
	    "sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 3.0*blur)) * 0.09;",
	    "sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 2.0*blur)) * 0.12;",
	    "sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - blur)) * 0.15;",
	    "sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * 0.16;",
	    "sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + blur)) * 0.15;",
	    "sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 2.0*blur)) * 0.12;",
	    "sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 3.0*blur)) * 0.09;",
	    "sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 4.0*blur)) * 0.05;",
	 
		"gl_FragColor = sum;",

	  "}"
	];
}

PIXI.BlurYFilter.prototype = Object.create( PIXI.AbstractFilter.prototype );
PIXI.BlurYFilter.prototype.constructor = PIXI.BlurYFilter;

Object.defineProperty(PIXI.BlurYFilter.prototype, 'blur', {
    get: function() {
        return this.uniforms.blur.value / (1/7000);
    },
    set: function(value) {
    	//this.padding = value;
    	this.uniforms.blur.value = (1/7000) * value;
    }
});

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */


/**
 * 
 * The BlurFilter applies a Gaussian blur to an object. 
 * The strength of the blur can be set for x- and y-axis separately (always relative to the stage).
 *
 * @class BlurFilter
 * @contructor
 */
PIXI.BlurFilter = function()
{
    
	this.blurXFilter = new PIXI.BlurXFilter();
	this.blurYFilter = new PIXI.BlurYFilter();

	this.passes =[this.blurXFilter, this.blurYFilter];
	
}

/**
 * Sets the strength of both the blurX and blurY properties simultaneously
 *
 * @property blur
 * @type Number the strength of the blur
 * @default 2
 */
Object.defineProperty(PIXI.BlurFilter.prototype, 'blur', {
    get: function() {
        return this.blurXFilter.blur;
    },
    set: function(value) {
  		this.blurXFilter.blur = this.blurYFilter.blur = value;
    }
});

/**
 * Sets the strength of the blurX property simultaneously
 *
 * @property blurX
 * @type Number the strength of the blurX
 * @default 2
 */
Object.defineProperty(PIXI.BlurFilter.prototype, 'blurX', {
    get: function() {
        return this.blurXFilter.blur;
    },
    set: function(value) {
    	this.blurXFilter.blur = value;
    }
});

/**
 * Sets the strength of the blurX property simultaneously
 *
 * @property blurY
 * @type Number the strength of the blurY
 * @default 2
 */
Object.defineProperty(PIXI.BlurFilter.prototype, 'blurY', {
    get: function() {
        return this.blurYFilter.blur;
    },
    set: function(value) {
    	this.blurYFilter.blur = value;
    }
});

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

/**
 * 
 * This inverts your displayObjects colors.
 * @class InvertFilter
 * @contructor
 */
PIXI.InvertFilter = function()
{
	PIXI.AbstractFilter.call( this );
	
	this.passes = [this];
	
	// set the uniforms
	this.uniforms = {
		invert: {type: 'f', value: 1},
	};
	
	this.fragmentSrc = [
	  "precision mediump float;",
	  "varying vec2 vTextureCoord;",
	  "varying float vColor;",
	  "uniform float invert;",
	  "uniform sampler2D uSampler;",
	  "void main(void) {",
	    "gl_FragColor = texture2D(uSampler, vTextureCoord);",
		"gl_FragColor.rgb = mix( (vec3(1)-gl_FragColor.rgb) * gl_FragColor.a, gl_FragColor.rgb, 1.0 - invert);",
		//"gl_FragColor.rgb = gl_FragColor.rgb  * gl_FragColor.a;",
	    "gl_FragColor = gl_FragColor * vColor;",
	  "}"
	];
	
}

PIXI.InvertFilter.prototype = Object.create( PIXI.AbstractFilter.prototype );
PIXI.InvertFilter.prototype.constructor = PIXI.InvertFilter;

/**
The strength of the invert. 1 will fully invert the colors, 0 will make the object its normal color
@property invert
*/
Object.defineProperty(PIXI.InvertFilter.prototype, 'invert', {
    get: function() {
        return this.uniforms.invert.value;
    },
    set: function(value) {
    	this.uniforms.invert.value = value;
    }
});
/**
/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */


/**
 * 
 * This applies a sepia effect to your displayObjects.
 * @class SepiaFilter
 * @contructor
 */
PIXI.SepiaFilter = function()
{
	PIXI.AbstractFilter.call( this );
	
	this.passes = [this];
	
	// set the uniforms
	this.uniforms = {
		sepia: {type: 'f', value: 1},
	};
	
	this.fragmentSrc = [
	  "precision mediump float;",
	  "varying vec2 vTextureCoord;",
	  "varying float vColor;",
	  "uniform float sepia;",
	  "uniform sampler2D uSampler;",
	 	   
	  "const mat3 sepiaMatrix = mat3(0.3588, 0.7044, 0.1368, 0.2990, 0.5870, 0.1140, 0.2392, 0.4696, 0.0912);",
	  "void main(void) {",
	    "gl_FragColor = texture2D(uSampler, vTextureCoord);",
		"gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb * sepiaMatrix, sepia);",
	    "gl_FragColor = gl_FragColor * vColor;",
	  "}"
	];
	
}

PIXI.SepiaFilter.prototype = Object.create( PIXI.AbstractFilter.prototype );
PIXI.SepiaFilter.prototype.constructor = PIXI.SepiaFilter;

/**
The strength of the sepia. 1 will apply the full sepia effect, 0 will make the object its normal color
@property sepia
*/
Object.defineProperty(PIXI.SepiaFilter.prototype, 'sepia', {
    get: function() {
        return this.uniforms.sepia.value;
    },
    set: function(value) {
    	this.uniforms.sepia.value = value;
    }
});

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

/**
 * 
 * This filter applies a pixlate effect making display objects appear "blocky"
 * @class PixelateFilter
 * @contructor
 */
PIXI.TwistFilter = function()
{
	PIXI.AbstractFilter.call( this );

	this.passes = [this];
	
	// set the uniforms
	this.uniforms = {
		radius: {type: 'f', value:0.5},
		angle: {type: 'f', value:5},
		offset: {type: 'f2', value:{x:0.5, y:0.5}},
	};

	this.fragmentSrc = [
	  "precision mediump float;",
	  "varying vec2 vTextureCoord;",
	  "varying float vColor;",
	  "uniform vec4 dimensions;",
	  "uniform sampler2D uSampler;",
	  
	  "uniform float radius;",
      "uniform float angle;",
      "uniform vec2 offset;",

	  "void main(void) {",
	 	"vec2 coord = vTextureCoord - offset;",
		"float distance = length(coord);",
	 	
	 	"if (distance < radius){",

		 	"float ratio = (radius - distance) / radius;",
		 	"float angleMod = ratio * ratio * angle;",
		 	"float s = sin(angleMod);",
		 	"float c = cos(angleMod);",
		 	"coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);",

	 	"}",

	    "gl_FragColor = texture2D(uSampler, coord+offset);",
	  "}"
	];
}

PIXI.TwistFilter.prototype = Object.create( PIXI.AbstractFilter.prototype );
PIXI.TwistFilter.prototype.constructor = PIXI.TwistFilter;

/**
 * 
 * This point describes the the offset of the twist
 * @property size
 * @type Point
 */
Object.defineProperty(PIXI.TwistFilter.prototype, 'offset', {
    get: function() {
        return this.uniforms.offset.value;
    },
    set: function(value) {
    	this.dirty = true;
    	this.uniforms.offset.value = value;
    }
});

/**
 * 
 * This radius describes size of the twist
 * @property size
 * @type Number
 */
Object.defineProperty(PIXI.TwistFilter.prototype, 'radius', {
    get: function() {
        return this.uniforms.radius.value;
    },
    set: function(value) {
    	this.dirty = true;
    	this.uniforms.radius.value = value;
    }
});

/**
 * 
 * This radius describes angle of the twist
 * @property angle
 * @type Number
 */
Object.defineProperty(PIXI.TwistFilter.prototype, 'angle', {
    get: function() {
        return this.uniforms.angle.value;
    },
    set: function(value) {
    	this.dirty = true;
    	this.uniforms.angle.value = value;
    }
});
/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */


/**
 * 
 * This turns your displayObjects to black and white.
 * @class GreyFilter
 * @contructor
 */
PIXI.ColorStepFilter = function()
{
	PIXI.AbstractFilter.call( this );
	
	this.passes = [this];
	
	// set the uniforms
	this.uniforms = {
		step: {type: 'f', value: 5},
	};
	
	this.fragmentSrc = [
	  "precision mediump float;",
	  "varying vec2 vTextureCoord;",
	  "varying float vColor;",
	  "uniform sampler2D uSampler;",
	  "uniform float step;",
	  "void main(void) {",
	    "vec4 color = texture2D(uSampler, vTextureCoord);",
	    "color = floor(color * step) / step;",
	    "gl_FragColor = color * vColor;",
	  "}"
	];
}

PIXI.ColorStepFilter.prototype = Object.create( PIXI.AbstractFilter.prototype );
PIXI.ColorStepFilter.prototype.constructor = PIXI.ColorStepFilter;

/**
The number of steps.
@property step
*/
Object.defineProperty(PIXI.ColorStepFilter.prototype, 'step', {
    get: function() {
        return this.uniforms.step.value;
    },
    set: function(value) {
    	this.uniforms.step.value = value;
    }
});

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 * original filter: https://github.com/evanw/glfx.js/blob/master/src/filters/fun/dotscreen.js
 */

/**
 * 
 * This filter applies a pixlate effect making display objects appear "blocky"
 * @class PixelateFilter
 * @contructor
 */
PIXI.DotScreenFilter = function()
{
	PIXI.AbstractFilter.call( this );

	this.passes = [this];
	
	// set the uniforms
	this.uniforms = {
		scale: {type: 'f', value:1},
		angle: {type: 'f', value:5},
		dimensions:   {type: 'f4', value:[0,0,0,0]}
	};

	this.fragmentSrc = [
	  "precision mediump float;",
	  "varying vec2 vTextureCoord;",
	  "varying float vColor;",
	  "uniform vec4 dimensions;",
	  "uniform sampler2D uSampler;",

	    "uniform float angle;",
	    "uniform float scale;",

	    "float pattern() {",
	    	"float s = sin(angle), c = cos(angle);",
	    	"vec2 tex = vTextureCoord * dimensions.xy;",
	    	"vec2 point = vec2(",
	    		"c * tex.x - s * tex.y,",
	    		"s * tex.x + c * tex.y",
	    	") * scale;",
	    	"return (sin(point.x) * sin(point.y)) * 4.0;",
	    "}",

	    "void main() {",
            "vec4 color = texture2D(uSampler, vTextureCoord);",
            "float average = (color.r + color.g + color.b) / 3.0;",
            "gl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);",
        "}",
	];
}

PIXI.DotScreenFilter.prototype = Object.create( PIXI.DotScreenFilter.prototype );
PIXI.DotScreenFilter.prototype.constructor = PIXI.DotScreenFilter;

/**
 * 
 * This describes the the scale
 * @property scale
 * @type Number
 */
Object.defineProperty(PIXI.DotScreenFilter.prototype, 'scale', {
    get: function() {
        return this.uniforms.scale.value;
    },
    set: function(value) {
    	this.dirty = true;
    	this.uniforms.scale.value = value;
    }
});

/**
 * 
 * This radius describes angle
 * @property angle
 * @type Number
 */
Object.defineProperty(PIXI.DotScreenFilter.prototype, 'angle', {
    get: function() {
        return this.uniforms.angle.value;
    },
    set: function(value) {
    	this.dirty = true;
    	this.uniforms.angle.value = value;
    }
});
/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */



PIXI.CrossHatchFilter = function()
{
	PIXI.AbstractFilter.call( this );
	
	this.passes = [this];
	
	// set the uniforms
	this.uniforms = {
		blur: {type: 'f', value: 1/512},
	};
	
	this.fragmentSrc = [
	  "precision mediump float;",
	  "varying vec2 vTextureCoord;",
	  "varying float vColor;",
	  "uniform float blur;",
	  "uniform sampler2D uSampler;",
	    "void main(void) {",
	  	
	    
		"    float lum = length(texture2D(uSampler, vTextureCoord.xy).rgb);",
		"     ",
		"    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);",
		"     ",
		"    if (lum < 1.00) {",
		"        if (mod(gl_FragCoord.x + gl_FragCoord.y, 10.0) == 0.0) {",
		"            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);",
		"        }",
		"    }",
		"     ",
		"    if (lum < 0.75) {",
		"        if (mod(gl_FragCoord.x - gl_FragCoord.y, 10.0) == 0.0) {",
		"            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);",
		"        }",
		"    }",
		"     ",
		"    if (lum < 0.50) {",
		"        if (mod(gl_FragCoord.x + gl_FragCoord.y - 5.0, 10.0) == 0.0) {",
		"            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);",
		"        }",
		"    }",
		"     ",
		"    if (lum < 0.3) {",
		"        if (mod(gl_FragCoord.x - gl_FragCoord.y - 5.0, 10.0) == 0.0) {",
		"            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);",
		"        }",
		"    }",
		"}"
	];
}

PIXI.CrossHatchFilter.prototype = Object.create( PIXI.AbstractFilter.prototype );
PIXI.CrossHatchFilter.prototype.constructor = PIXI.BlurYFilter;

Object.defineProperty(PIXI.CrossHatchFilter.prototype, 'blur', {
    get: function() {
        return this.uniforms.blur.value / (1/7000);
    },
    set: function(value) {
    	//this.padding = value;
    	this.uniforms.blur.value = (1/7000) * value;
    }
});

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */



PIXI.RGBSplitFilter = function()
{
	PIXI.AbstractFilter.call( this );
	
	this.passes = [this];
	
	// set the uniforms
	this.uniforms = {
		red: {type: 'f2', value: {x:20, y:20}},
		green: {type: 'f2', value: {x:-20, y:20}},
		blue: {type: 'f2', value: {x:20, y:-20}},
		dimensions:   {type: 'f4', value:[0,0,0,0]}
	};
	
	this.fragmentSrc = [
	  "precision mediump float;",
	  "varying vec2 vTextureCoord;",
	  "varying float vColor;",
	  "uniform vec2 red;",
	  "uniform vec2 green;",
	  "uniform vec2 blue;",
	  "uniform vec4 dimensions;",
	  "uniform sampler2D uSampler;",
	    "void main(void) {",
	  	  "gl_FragColor.r = texture2D(uSampler, vTextureCoord + red/dimensions.xy).r;",
	  	  "gl_FragColor.g = texture2D(uSampler, vTextureCoord + green/dimensions.xy).g;",
	  	  "gl_FragColor.b = texture2D(uSampler, vTextureCoord + blue/dimensions.xy).b;",
	  	  "gl_FragColor.a = texture2D(uSampler, vTextureCoord).a;",
	  "}"
	];
}

PIXI.RGBSplitFilter.prototype = Object.create( PIXI.AbstractFilter.prototype );
PIXI.RGBSplitFilter.prototype.constructor = PIXI.RGBSplitFilter;

Object.defineProperty(PIXI.RGBSplitFilter.prototype, 'angle', {
    get: function() {
        return this.uniforms.blur.value / (1/7000);
    },
    set: function(value) {
    	//this.padding = value;
    	this.uniforms.blur.value = (1/7000) * value;
    }
});

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 */

    if (typeof exports !== 'undefined') {
        if (typeof module !== 'undefined' && module.exports) {
            exports = module.exports = PIXI;
        }
        exports.PIXI = PIXI;
    } else if (typeof define !== 'undefined' && define.amd) {
        define(PIXI);
    } else {
        root.PIXI = PIXI;
    }
}).call(this);

},{}],7:[function(require,module,exports){
(function() {
  require('es5-shimify');

  require('spine');

  require('spine/lib/local');

  require('spine/lib/manager');

  require('spine/lib/route');

  require('./spine.ajax');

  require('./spine.awaitajax');

  window.Math2 = require('./Math2');

  $(function() {
    var App;
    if (window.app) {
      return;
    }
    App = require("../pixijs-playground");
    return window.app = new App({
      el: $("body")
    });
  });

}).call(this);


},{"../pixijs-playground":11,"./Math2":4,"./spine.ajax":8,"./spine.awaitajax":9,"es5-shimify":19,"spine":39,"spine/lib/local":40,"spine/lib/manager":41,"spine/lib/route":42}],8:[function(require,module,exports){
(function() {
  var Ajax, Base, Collection, Extend, Include, Model, Singleton, Spine, iced, __iced_k, __iced_k_noop,
    __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
    __hasProp = {}.hasOwnProperty,
    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    __slice = [].slice;

  iced = require('iced-runtime');
  __iced_k = __iced_k_noop = function() {};

  Spine = this.Spine || require("spine");

  Model = Spine.Model;

  Ajax = {
    getURL: function(object) {
      return object && (typeof object.url === "function" ? object.url() : void 0) || object.url;
    },
    enabled: true,
    disable: function(callback) {
      var e;
      if (this.enabled) {
        this.enabled = false;
        try {
          return callback();
        } catch (_error) {
          e = _error;
          throw e;
        } finally {
          this.enabled = true;
        }
      } else {
        return callback();
      }
    },
    max: 100,
    throttle: 0,
    queue: function(request) {
      var ___iced_passed_deferral, __iced_deferrals, __iced_k;
      __iced_k = __iced_k_noop;
      ___iced_passed_deferral = iced.findDeferral(arguments);
      this.pipeliner || (this.pipeliner = new Pipeliner(this.max, this.throttle));
      if (!request) {
        return this.pipeliner.queue;
      }
      (function(_this) {
        return (function(__iced_k) {
          __iced_deferrals = new iced.Deferrals(__iced_k, {
            parent: ___iced_passed_deferral,
            filename: "/home/charles/source/pixijs-playground/app/lib/spine.ajax.iced"
          });
          _this.pipeliner.waitInQueue(__iced_deferrals.defer({
            lineno: 29
          }));
          __iced_deferrals._fulfill();
        });
      })(this)((function(_this) {
        return function() {
          return request(_this.pipeliner.defer({
            lineno: 30,
            context: __iced_deferrals
          }));
        };
      })(this));
    },
    clearQueue: function() {
      this.pipeliner.queue = [];
      return this.pipeliner.n_out = 0;
    }
  };

  Base = (function() {
    function Base() {}

    Base.prototype.defaults = {
      contentType: 'application/json',
      dataType: 'json',
      processData: false,
      headers: {
        'X-Requested-With': 'XMLHttpRequest'
      }
    };

    Base.prototype.queue = Ajax.queue;

    Base.prototype.ajax = function(params, defaults) {
      return new $.ajax(this.ajaxSettings(params, defaults));
    };

    Base.prototype.ajaxQueue = function(params, defaults) {
      var data, defererror, defersuccess, error, request, rv, settings, statusText, xhr;
      xhr = null;
      rv = new iced.Rendezvous;
      settings = this.ajaxSettings(params, defaults);
      defersuccess = settings.success;
      defererror = settings.error;
      settings.success = rv.id('success').defer({
        assign_fn: (function(_this) {
          return function() {
            return function() {
              data = arguments[0];
              statusText = arguments[1];
              return xhr = arguments[2];
            };
          };
        })(this)(),
        lineno: 56,
        context: __iced_deferrals
      });
      settings.error = rv.id('error').defer({
        assign_fn: (function(_this) {
          return function() {
            return function() {
              xhr = arguments[0];
              statusText = arguments[1];
              return error = arguments[2];
            };
          };
        })(this)(),
        lineno: 57,
        context: __iced_deferrals
      });
      request = function(next) {
        var status, ___iced_passed_deferral, __iced_deferrals, __iced_k;
        __iced_k = __iced_k_noop;
        ___iced_passed_deferral = iced.findDeferral(arguments);
        xhr = new $.Ajax(settings);
        (function(_this) {
          return (function(__iced_k) {
            __iced_deferrals = new iced.Deferrals(__iced_k, {
              parent: ___iced_passed_deferral,
              filename: "/home/charles/source/pixijs-playground/app/lib/spine.ajax.iced"
            });
            rv.wait(__iced_deferrals.defer({
              assign_fn: (function() {
                return function() {
                  return status = arguments[0];
                };
              })(),
              lineno: 61
            }));
            __iced_deferrals._fulfill();
          });
        })(this)((function(_this) {
          return function() {
            switch (status) {
              case 'success':
                defersuccess(data, statusText, xhr);
                break;
              case 'error':
                defererror(xhr, statusText, error);
            }
            return next();
          };
        })(this));
      };
      request.abort = function(statusText) {
        var index;
        if (xhr) {
          return xhr.abort(statusText);
        }
        index = this.queue().indexOf(request);
        if (index > -1) {
          this.queue().splice(index, 1);
        }
        if (Ajax.pipeliner) {
          Ajax.pipeliner.n_out--;
        }
        return request;
      };
      if (!Ajax.enabled) {
        return request;
      }
      this.queue(request);
      return request;
    };

    Base.prototype.ajaxSettings = function(params, defaults) {
      return $.extend({}, this.defaults, defaults, params);
    };

    return Base;

  })();

  Collection = (function(_super) {
    __extends(Collection, _super);

    function Collection(model) {
      this.model = model;
      this.failResponse = __bind(this.failResponse, this);
      this.recordsResponse = __bind(this.recordsResponse, this);
    }

    Collection.prototype.find = function(id, params) {
      var record;
      record = new this.model({
        id: id
      });
      return this.ajaxQueue(params, {
        type: 'GET',
        url: Ajax.getURL(record),
        success: this.recordsResponse,
        error: this.failResponse
      });
    };

    Collection.prototype.all = function(params) {
      return this.ajaxQueue(params, {
        type: 'GET',
        url: Ajax.getURL(this.model),
        success: this.recordsResponse,
        error: this.failResponse
      });
    };

    Collection.prototype.fetch = function(params, options) {
      var id;
      if (params == null) {
        params = {};
      }
      if (options == null) {
        options = {};
      }
      if (id = params.id) {
        delete params.id;
        return this.find(id, params).done((function(_this) {
          return function(record) {
            return _this.model.refresh(record, options);
          };
        })(this));
      } else {
        return this.all(params).done((function(_this) {
          return function(records) {
            return _this.model.refresh(records, options);
          };
        })(this));
      }
    };

    Collection.prototype.recordsResponse = function(data, status, xhr) {
      return this.model.trigger('ajaxSuccess', null, status, xhr);
    };

    Collection.prototype.failResponse = function(xhr, statusText, error) {
      return this.model.trigger('ajaxError', null, xhr, statusText, error);
    };

    return Collection;

  })(Base);

  Singleton = (function(_super) {
    __extends(Singleton, _super);

    function Singleton(record) {
      this.record = record;
      this.failResponse = __bind(this.failResponse, this);
      this.recordResponse = __bind(this.recordResponse, this);
      this.model = this.record.constructor;
    }

    Singleton.prototype.reload = function(params, options) {
      return this.ajaxQueue(params, {
        type: 'GET',
        url: Ajax.getURL(this.record),
        success: this.recordResponse(options),
        error: this.failResponse(options)
      });
    };

    Singleton.prototype.create = function(params, options) {
      return this.ajaxQueue(params, {
        type: 'POST',
        data: JSON.stringify(this.record),
        url: Ajax.getURL(this.model),
        success: this.recordResponse(options),
        error: this.failResponse(options)
      });
    };

    Singleton.prototype.update = function(params, options) {
      return this.ajaxQueue(params, {
        type: 'PUT',
        data: JSON.stringify(this.record),
        url: Ajax.getURL(this.record),
        success: this.recordResponse(options),
        error: this.failResponse(options)
      });
    };

    Singleton.prototype.destroy = function(params, options) {
      return this.ajaxQueue(params, {
        type: 'DELETE',
        url: Ajax.getURL(this.record),
        success: this.recordResponse(options),
        error: this.failResponse(options)
      });
    };

    Singleton.prototype.recordResponse = function(options) {
      if (options == null) {
        options = {};
      }
      return (function(_this) {
        return function(data, status, xhr) {
          var _ref, _ref1;
          if (Spine.isBlank(data)) {
            data = false;
          } else {
            data = _this.model.fromJSON(data);
          }
          Ajax.disable(function() {
            if (data) {
              if (data.id && _this.record.id !== data.id) {
                _this.record.changeID(data.id);
              }
              return _this.record.updateAttributes(data.attributes());
            }
          });
          _this.record.trigger('ajaxSuccess', data, status, xhr);
          if ((_ref = options.success) != null) {
            _ref.apply(_this.record);
          }
          return (_ref1 = options.done) != null ? _ref1.apply(_this.record) : void 0;
        };
      })(this);
    };

    Singleton.prototype.failResponse = function(options) {
      if (options == null) {
        options = {};
      }
      return (function(_this) {
        return function(xhr, statusText, error) {
          var _ref, _ref1;
          _this.record.trigger('ajaxError', xhr, statusText, error);
          if ((_ref = options.error) != null) {
            _ref.apply(_this.record);
          }
          return (_ref1 = options.fail) != null ? _ref1.apply(_this.record) : void 0;
        };
      })(this);
    };

    return Singleton;

  })(Base);

  Model.host = '';

  Include = {
    ajax: function() {
      return new Singleton(this);
    },
    url: function() {
      var args, url;
      args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
      url = Ajax.getURL(this.constructor);
      if (url.charAt(url.length - 1) !== '/') {
        url += '/';
      }
      url += Tiger.Ajax.encode(this.id);
      args.unshift(url);
      return args.join('/');
    }
  };

  Extend = {
    ajax: function() {
      return new Collection(this);
    },
    url: function() {
      var args;
      args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
      args.unshift(this.className.toLowerCase() + 's');
      args.unshift(Model.host);
      return args.join('/');
    }
  };

  Model.Ajax = {
    extended: function() {
      this.fetch(this.ajaxFetch);
      this.change(this.ajaxChange);
      this.extend(Extend);
      return this.include(Include);
    },
    ajaxFetch: function() {
      var _ref;
      return (_ref = this.ajax()).fetch.apply(_ref, arguments);
    },
    ajaxChange: function(record, type, options) {
      if (options == null) {
        options = {};
      }
      if (options.ajax === false) {
        return;
      }
      return record.ajax()[type](options.ajax, options);
    }
  };

  Model.Ajax.Methods = {
    extended: function() {
      this.extend(Extend);
      return this.include(Include);
    }
  };

  Ajax.defaults = Base.prototype.defaults;

  Ajax.Base = Base;

  Ajax.Singleton = Singleton;

  Ajax.Collection = Collection;

  Spine.Ajax = Ajax;

  Spine.Ajax.ModelAdapter = Ajax;

  Spine.Ajax.Q = Base;

  if (typeof module !== "undefined" && module !== null) {
    module.exports = Ajax;
  }

}).call(this);


},{"iced-runtime":32,"spine":39}],9:[function(require,module,exports){
(function() {
  var Spine, awaitAjax, iced, __iced_k, __iced_k_noop;

  iced = require('iced-runtime');
  __iced_k = __iced_k_noop = function() {};

  Spine = this.Spine || require("spine");

  awaitAjax = {
    awaitAjax: function(options, cb, queue) {
      var data, rv, status, statusText, xhr, ___iced_passed_deferral, __iced_deferrals, __iced_k;
      __iced_k = __iced_k_noop;
      ___iced_passed_deferral = iced.findDeferral(arguments);
      if (queue == null) {
        queue = false;
      }
      rv = new iced.Rendezvous();
      options.success = rv.id('success').defer({
        assign_fn: (function(_this) {
          return function() {
            return function() {
              data = arguments[0];
              statusText = arguments[1];
              return xhr = arguments[2];
            };
          };
        })(this)(),
        lineno: 7,
        context: __iced_deferrals
      });
      options.error = rv.id('error').defer({
        assign_fn: (function(_this) {
          return function() {
            return function() {
              xhr = arguments[0];
              statusText = arguments[1];
              return data = arguments[2];
            };
          };
        })(this)(),
        lineno: 8,
        context: __iced_deferrals
      });
      if (queue) {
        this.Q.ajaxQueue(options);
      } else {
        new $.ajax(options);
      }
      (function(_this) {
        return (function(__iced_k) {
          __iced_deferrals = new iced.Deferrals(__iced_k, {
            parent: ___iced_passed_deferral,
            filename: "/home/charles/source/pixijs-playground/app/lib/spine.awaitajax.iced"
          });
          rv.wait(__iced_deferrals.defer({
            assign_fn: (function() {
              return function() {
                return status = arguments[0];
              };
            })(),
            lineno: 13
          }));
          __iced_deferrals._fulfill();
        });
      })(this)((function(_this) {
        return function() {
          return cb(status, xhr, statusText, data);
        };
      })(this));
    },
    awaitGet: function(options, cb, queue) {
      options.method = 'GET';
      return this.awaitAjax(options, cb, queue);
    },
    awaitPost: function(options, cb, queue) {
      options.method = 'GET';
      return this.awaitAjax(options, cb, queue);
    },
    awaitQueuedAjax: function(options, cb) {
      return this.awaitAjax(options, cb, true);
    },
    awaitQueuedGet: function(options, cb) {
      return this.awaitGet(options, cb, true);
    },
    awaitQueuedPost: function(options, cb) {
      return this.awaitPost(options, cb, true);
    }
  };

  Spine.Class.extend.call(Spine.Ajax, awaitAjax);

  if (typeof module !== "undefined" && module !== null) {
    module.exports = awaitAjax;
  }

}).call(this);


},{"iced-runtime":32,"spine":39}],10:[function(require,module,exports){
(function() {
  var Spine, exampleList, examples, iced, loadExample, name, path, __iced_k, __iced_k_noop, _fn;

  iced = require('iced-runtime');
  __iced_k = __iced_k_noop = function() {};

  Spine = require("spine");

  loadExample = function(url, autocb) {
    var data, status, statusText, xhr, ___iced_passed_deferral, __iced_deferrals, __iced_k;
    __iced_k = autocb;
    ___iced_passed_deferral = iced.findDeferral(arguments);
    (function(_this) {
      return (function(__iced_k) {
        __iced_deferrals = new iced.Deferrals(__iced_k, {
          parent: ___iced_passed_deferral,
          filename: "/home/charles/source/pixijs-playground/app/models/examples.iced"
        });
        Spine.Ajax.awaitGet({
          url: url
        }, __iced_deferrals.defer({
          assign_fn: (function() {
            return function() {
              status = arguments[0];
              xhr = arguments[1];
              statusText = arguments[2];
              return data = arguments[3];
            };
          })(),
          lineno: 4
        }));
        __iced_deferrals._fulfill();
      });
    })(this)((function(_this) {
      return function() {
        switch (status) {
          case "error":
            autocb("Error " + statusText + ": " + data);
            return;
          case "success":
            autocb(data);
            return;
        }
      };
    })(this));
  };

  exampleList = {
    bunny: "./examples/bunny.coffee",
    "bunny-short": "./examples/bunny-short.coffee",
    dragging: "./examples/dragging.coffee",
    balls: "./examples/balls.coffee",
    bunnymark: "./examples/bunnymark.coffee",
    morph: "./examples/morph.coffee",
    primitives: "./examples/primitives.coffee",
    rendertexture: "./examples/rendertexture.coffee",
    text: "./examples/text.iced",
    filters: "./examples/filters.coffee"
  };

  examples = {};

  _fn = function(path) {
    return examples[name] = function(cb) {
      return loadExample(path, cb);
    };
  };
  for (name in exampleList) {
    path = exampleList[name];
    _fn(path);
  }

  module.exports = examples;

}).call(this);


},{"iced-runtime":32,"spine":39}],11:[function(require,module,exports){
(function() {
  var Console, Editor, Playground, Spine, Stage, emoji, escapeHTML, examples,
    __hasProp = {}.hasOwnProperty,
    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

  require('./lib/setup');

  emoji = require('emoji-images');

  Spine = require('spine');

  Stage = require('./controllers/stage');

  Console = require('./controllers/console');

  Editor = require('./controllers/editor');

  examples = require('./models/examples');

  escapeHTML = function(s) {
    return s.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');
  };

  Playground = (function(_super) {
    var DEFAULT_SETTINGS;

    __extends(Playground, _super);

    Playground.prototype.logPrefix = "(Playground:App)";

    DEFAULT_SETTINGS = {
      example: "bunnymark",
      lang: "coffee"
    };

    Playground.prototype.elements = {
      "aside#output": "output",
      "section.playground": "playground",
      "button.refresh-playground": "buttonRefreshPlayground"
    };

    Playground.prototype.refreshPlayground = function() {
      var button;
      button = $("button.run");
      if (button.is(".selected")) {
        button.trigger("click", {
          target: button[0]
        });
      }
      this.stage.refresh();
      return this.$(".dg.main").add(".counter").remove();
    };

    Playground.prototype.selectExample = function(e) {
      return this.editor.render($(e.target).val());
    };

    Playground.prototype.mouseenterPlaygroundRefresh = function() {
      if (this.stage) {
        return this.buttonRefreshPlayground.fadeIn(180);
      }
    };

    Playground.prototype.mouseenterKeepPlaygroundRefresh = function() {
      return this.buttonRefreshPlayground.stop(true).fadeTo(1, 1);
    };

    Playground.prototype.mouseleavePlaygroundRefresh = function() {
      return this.buttonRefreshPlayground.fadeOut(180);
    };

    Playground.prototype.events = {
      "click button.refresh-playground": "refreshPlayground",
      "change select.examples": "selectExample",
      "mouseenter section.playground": "mouseenterPlaygroundRefresh",
      "mouseenter button.refresh-playground": "mouseenterKeepPlaygroundRefresh",
      "mouseleave section.playground": "mouseleavePlaygroundRefresh"
    };

    function Playground(options, settings) {
      var examplelist, k, name, v, _ref;
      if (settings == null) {
        settings = {};
      }
      Playground.__super__.constructor.apply(this, arguments);
      this.log("initializing");
      this.settings = $.extend({}, DEFAULT_SETTINGS);
      if (localStorage && localStorage.settings) {
        _ref = JSON.parse(localStorage.settings);
        for (k in _ref) {
          v = _ref[k];
          this.settings[k] = v;
          switch (k) {
            case "script":
              (function(v) {
                return examples["local-saved"] = function(cb) {
                  return cb(v);
                };
              })(v);
          }
        }
      }
      for (k in settings) {
        if (!__hasProp.call(settings, k)) continue;
        v = settings[k];
        this.settings[k] = v;
      }
      examplelist = (function() {
        var _results;
        _results = [];
        for (name in examples) {
          if (!__hasProp.call(examples, name)) continue;
          _results.push(name);
        }
        return _results;
      })();
      this.render(examplelist, this.settings.example);
    }

    Playground.prototype.initStage = function() {
      if (this.stage == null) {
        this.stage = new Stage({
          el: this.playground
        });
      }
      this.stage.showStats();
      return this.buttonRefreshPlayground.show();
    };

    Playground.prototype.render = function(examplelist, example) {
      if (examplelist == null) {
        examplelist = [];
      }
      this.view = (require("./views/templates")).index({
        examples: examplelist,
        example: example
      });
      this.view = emoji(this.view, "images/emoji", 20);
      this.html(this.view);
      this.console = new Console({
        el: this.output,
        input: this.$("input.repl")
      });
      this.editor = new Editor({
        el: this.el,
        examples: examples,
        console: this.console
      });
      this.editor.on("presave", this.proxy(this.initStage));
      this.editor.on("langchange", this.console.proxy(this.console.lang));
      this.editor.lang(this.settings.lang);
      if (this.stage) {
        this.refreshPlayground();
      }
      if (!(this.settings.script && this.settings.script.trim() !== "")) {
        return this.editor.render(example);
      }
    };

    Playground.prototype.langChange = function(name) {
      return this.settings.lang = name;
    };

    return Playground;

  })(Spine.Controller);

  module.exports = Playground;

}).call(this);


},{"./controllers/console":1,"./controllers/editor":2,"./controllers/stage":3,"./lib/setup":7,"./models/examples":10,"./views/templates":12,"emoji-images":18,"spine":39}],12:[function(require,module,exports){
var jade = require('@lukekarrys/jade-runtime');

var templatizer = {};



// help.jade compiled template
templatizer["help"] = function tmpl_help() {
    return '<aside id="help"><h4>Editor</h4><dl><dt>:icecream:</dt><dd>switch code to vanilla JS (compiles)</dd><dt>:coffee:</dt><dd>switch code to Iced CoffeeScript (does not compile)</dd><dt><button class="glyphicon glyphicon-refresh"></button></dt><dd>Refresh example from CoffeeScript source</dd><dt><button class="glyphicon glyphicon-floppy-disk"></button></dt><dd>Save script and assets to in-browser Local Storage</dd></dl><h4>Stage/Canvas</h4><dl><dt><button class="glyphicon glyphicon-refresh"></button></dt><dd>Remove children from stage (and stop animation)</dd></dl><h4>Console</h4><dl><dt><button class="glyphicon glyphicon-refresh"></button></dt><dd>Clear console</dd><dt>:arrow_up::arrow_down:</dt><dd>Browse REPL history</dd><dt>:leftwards_arrow_with_hook:</dt><dd>Run command</dd></dl><h4>Global variables</h4><dl class="globals"><dt>app</dt><dd>instance of this pixijs-playground webapp</dd><dt>stats</dt><dd>instance of Mr. Doob\'s&nbsp;<a href="https://github.com/mrdoob/stats.js">stats.js</a></dd><dt>frame</dt><dd>id of animation frame (useful with&nbsp;<tt>cancelAnimationFrame(frame)</tt>)</dd><dt>stage</dt><dd>current instance of&nbsp;<a href="http://www.goodboydigital.com/pixijs/docs/classes/Stage.html">PIXI.Stage</a>&nbsp;(when running)</dd><dt>renderer</dt><dd>current instance of either&nbsp;<a href="http://www.goodboydigital.com/pixijs/docs/classes/WebGLRenderer.html">PIXI.WebGLRenderer</a>&nbsp;or&nbsp;<a href="http://www.goodboydigital.com/pixijs/docs/classes/CanvasRenderer.html">PIXI.CanvasRenderer</a>, depending on the result of <tt>PIXI.autoDetectRenderer</tt> (when running)</dd><dt>ani</dt><dd><em>(function)</em> Animation Loop wrapper. Starts/ends stats, calls frame fn,\nrenders frame to stage, and loops.<pre>ani: (loopfn) ->\n  recursiveloop = ->\n    @stats.begin()\n    loopfn()\n    @renderer.render @stage\n    window.frame = requestAnimFrame recursiveloop\n    @stats.end()\n  window.frame = requestAnimFrame recursiveloop</pre></dd><a href="https://github.com/nextorigin/pixijs-playground" class="forkme"><img src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"/></a></dl></aside>';
};

// index.jade compiled template
templatizer["index"] = function tmpl_index(locals) {
    var buf = [];
    var jade_mixins = {};
    var jade_interp;
    var locals_for_with = locals || {};
    (function(example, examples, undefined) {
        buf.push('<header><h2>Pixi.js Playground</h2></header><section class="playground"></section><button class="refresh-playground glyphicon glyphicon-refresh"></button><aside id="output"></aside><input type="text" class="repl"/><span class="console-label">Console</span><textarea value="// Pixi.js Playground" class="sandbox"></textarea><select class="examples">');
        (function() {
            var $$obj = examples;
            if ("number" == typeof $$obj.length) {
                for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {
                    var name = $$obj[$index];
                    buf.push("<option" + jade.attr("value", name, true, false) + jade.attr("selected", example == name, true, false) + ">" + jade.escape((jade_interp = name) == null ? "" : jade_interp) + "</option>");
                }
            } else {
                var $$l = 0;
                for (var $index in $$obj) {
                    $$l++;
                    var name = $$obj[$index];
                    buf.push("<option" + jade.attr("value", name, true, false) + jade.attr("selected", example == name, true, false) + ">" + jade.escape((jade_interp = name) == null ? "" : jade_interp) + "</option>");
                }
            }
        }).call(this);
        buf.push('</select><button class="run">Run!</button><nav class="sandbox"><button class="help glyphicon glyphicon-question-sign"></button><button class="save glyphicon glyphicon-floppy-disk"></button><button class="langswitch-coffee selected">:coffee:</button><button class="langswitch-vanilla">:icecream:</button><button class="refresh-example glyphicon glyphicon-refresh"></button></nav><aside id="help"><h4>Editor</h4><dl><dt>:icecream:</dt><dd>switch code to vanilla JS (compiles)</dd><dt>:coffee:</dt><dd>switch code to Iced CoffeeScript (does not compile)</dd><dt><button class="glyphicon glyphicon-refresh"></button></dt><dd>Refresh example from CoffeeScript source</dd><dt><button class="glyphicon glyphicon-floppy-disk"></button></dt><dd>Save script and assets to in-browser Local Storage</dd></dl><h4>Stage/Canvas</h4><dl><dt><button class="glyphicon glyphicon-refresh"></button></dt><dd>Remove children from stage (and stop animation)</dd></dl><h4>Console</h4><dl><dt><button class="glyphicon glyphicon-refresh"></button></dt><dd>Clear console</dd><dt>:arrow_up::arrow_down:</dt><dd>Browse REPL history</dd><dt>:leftwards_arrow_with_hook:</dt><dd>Run command</dd></dl><h4>Global variables</h4><dl class="globals"><dt>app</dt><dd>instance of this pixijs-playground webapp</dd><dt>stats</dt><dd>instance of Mr. Doob\'s&nbsp;<a href="https://github.com/mrdoob/stats.js">stats.js</a></dd><dt>frame</dt><dd>id of animation frame (useful with&nbsp;<tt>cancelAnimationFrame(frame)</tt>)</dd><dt>stage</dt><dd>current instance of&nbsp;<a href="http://www.goodboydigital.com/pixijs/docs/classes/Stage.html">PIXI.Stage</a>&nbsp;(when running)</dd><dt>renderer</dt><dd>current instance of either&nbsp;<a href="http://www.goodboydigital.com/pixijs/docs/classes/WebGLRenderer.html">PIXI.WebGLRenderer</a>&nbsp;or&nbsp;<a href="http://www.goodboydigital.com/pixijs/docs/classes/CanvasRenderer.html">PIXI.CanvasRenderer</a>, depending on the result of <tt>PIXI.autoDetectRenderer</tt> (when running)</dd><dt>ani</dt><dd><em>(function)</em> Animation Loop wrapper. Starts/ends stats, calls frame fn,\nrenders frame to stage, and loops.<pre>ani: (loopfn) ->\n  recursiveloop = ->\n    @stats.begin()\n    loopfn()\n    @renderer.render @stage\n    window.frame = requestAnimFrame recursiveloop\n    @stats.end()\n  window.frame = requestAnimFrame recursiveloop</pre></dd><a href="https://github.com/nextorigin/pixijs-playground" class="forkme"><img src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"/></a></dl></aside><a id="pixi" href="//pixijs.com"></a><footer><h3>drag files here</h3><span>&copy; 2013 - 2016&nbsp;<a href="http://nextorig.in">Next Origin</a></span></footer>');
    }).call(this, "example" in locals_for_with ? locals_for_with.example : typeof example !== "undefined" ? example : undefined, "examples" in locals_for_with ? locals_for_with.examples : typeof examples !== "undefined" ? examples : undefined, "undefined" in locals_for_with ? locals_for_with.undefined : typeof undefined !== "undefined" ? undefined : undefined);
    return buf.join("");
};


module.exports = templatizer;

},{"@lukekarrys/jade-runtime":14}],13:[function(require,module,exports){
/**
 * @author sole / http://soledadpenades.com
 * @author mrdoob / http://mrdoob.com
 * @author Robert Eisele / http://www.xarg.org
 * @author Philippe / http://philippe.elsass.me
 * @author Robert Penner / http://www.robertpenner.com/easing_terms_of_use.html
 * @author Paul Lewis / http://www.aerotwist.com/
 * @author lechecacharro
 * @author Josh Faul / http://jocafa.com/
 * @author egraether / http://egraether.com/
 * @author endel / http://endel.me
 * @author Ben Delarre / http://delarre.net
 */

// Date.now shim for (ahem) Internet Explo(d|r)er
if ( Date.now === undefined ) {

	Date.now = function () {

		return new Date().valueOf();

	};

}

var TWEEN = TWEEN || ( function () {

	var _tweens = [];

	return {

		REVISION: '12',

		getAll: function () {

			return _tweens;

		},

		removeAll: function () {

			_tweens = [];

		},

		add: function ( tween ) {

			_tweens.push( tween );

		},

		remove: function ( tween ) {

			var i = _tweens.indexOf( tween );

			if ( i !== -1 ) {

				_tweens.splice( i, 1 );

			}

		},

		update: function ( time ) {

			if ( _tweens.length === 0 ) return false;

			var i = 0;

			time = time !== undefined ? time : ( typeof window !== 'undefined' && window.performance !== undefined && window.performance.now !== undefined ? window.performance.now() : Date.now() );

			while ( i < _tweens.length ) {

				if ( _tweens[ i ].update( time ) ) {

					i++;

				} else {

					_tweens.splice( i, 1 );

				}

			}

			return true;

		}
	};

} )();

TWEEN.Tween = function ( object ) {

	var _object = object;
	var _valuesStart = {};
	var _valuesEnd = {};
	var _valuesStartRepeat = {};
	var _duration = 1000;
	var _repeat = 0;
	var _yoyo = false;
	var _isPlaying = false;
	var _reversed = false;
	var _delayTime = 0;
	var _startTime = null;
	var _easingFunction = TWEEN.Easing.Linear.None;
	var _interpolationFunction = TWEEN.Interpolation.Linear;
	var _chainedTweens = [];
	var _onStartCallback = null;
	var _onStartCallbackFired = false;
	var _onUpdateCallback = null;
	var _onCompleteCallback = null;

	// Set all starting values present on the target object
	for ( var field in object ) {

		_valuesStart[ field ] = parseFloat(object[field], 10);

	}

	this.to = function ( properties, duration ) {

		if ( duration !== undefined ) {

			_duration = duration;

		}

		_valuesEnd = properties;

		return this;

	};

	this.start = function ( time ) {

		TWEEN.add( this );

		_isPlaying = true;

		_onStartCallbackFired = false;

		_startTime = time !== undefined ? time : ( typeof window !== 'undefined' && window.performance !== undefined && window.performance.now !== undefined ? window.performance.now() : Date.now() );
		_startTime += _delayTime;

		for ( var property in _valuesEnd ) {

			// check if an Array was provided as property value
			if ( _valuesEnd[ property ] instanceof Array ) {

				if ( _valuesEnd[ property ].length === 0 ) {

					continue;

				}

				// create a local copy of the Array with the start value at the front
				_valuesEnd[ property ] = [ _object[ property ] ].concat( _valuesEnd[ property ] );

			}

			_valuesStart[ property ] = _object[ property ];

			if( ( _valuesStart[ property ] instanceof Array ) === false ) {
				_valuesStart[ property ] *= 1.0; // Ensures we're using numbers, not strings
			}

			_valuesStartRepeat[ property ] = _valuesStart[ property ] || 0;

		}

		return this;

	};

	this.stop = function () {

		if ( !_isPlaying ) {
			return this;
		}

		TWEEN.remove( this );
		_isPlaying = false;
		this.stopChainedTweens();
		return this;

	};

	this.stopChainedTweens = function () {

		for ( var i = 0, numChainedTweens = _chainedTweens.length; i < numChainedTweens; i++ ) {

			_chainedTweens[ i ].stop();

		}

	};

	this.delay = function ( amount ) {

		_delayTime = amount;
		return this;

	};

	this.repeat = function ( times ) {

		_repeat = times;
		return this;

	};

	this.yoyo = function( yoyo ) {

		_yoyo = yoyo;
		return this;

	};


	this.easing = function ( easing ) {

		_easingFunction = easing;
		return this;

	};

	this.interpolation = function ( interpolation ) {

		_interpolationFunction = interpolation;
		return this;

	};

	this.chain = function () {

		_chainedTweens = arguments;
		return this;

	};

	this.onStart = function ( callback ) {

		_onStartCallback = callback;
		return this;

	};

	this.onUpdate = function ( callback ) {

		_onUpdateCallback = callback;
		return this;

	};

	this.onComplete = function ( callback ) {

		_onCompleteCallback = callback;
		return this;

	};

	this.update = function ( time ) {

		var property;

		if ( time < _startTime ) {

			return true;

		}

		if ( _onStartCallbackFired === false ) {

			if ( _onStartCallback !== null ) {

				_onStartCallback.call( _object );

			}

			_onStartCallbackFired = true;

		}

		var elapsed = ( time - _startTime ) / _duration;
		elapsed = elapsed > 1 ? 1 : elapsed;

		var value = _easingFunction( elapsed );

		for ( property in _valuesEnd ) {

			var start = _valuesStart[ property ] || 0;
			var end = _valuesEnd[ property ];

			if ( end instanceof Array ) {

				_object[ property ] = _interpolationFunction( end, value );

			} else {

                // Parses relative end values with start as base (e.g.: +10, -3)
				if ( typeof(end) === "string" ) {
					end = start + parseFloat(end, 10);
				}

				// protect against non numeric properties.
                if ( typeof(end) === "number" ) {
					_object[ property ] = start + ( end - start ) * value;
				}

			}

		}

		if ( _onUpdateCallback !== null ) {

			_onUpdateCallback.call( _object, value );

		}

		if ( elapsed == 1 ) {

			if ( _repeat > 0 ) {

				if( isFinite( _repeat ) ) {
					_repeat--;
				}

				// reassign starting values, restart by making startTime = now
				for( property in _valuesStartRepeat ) {

					if ( typeof( _valuesEnd[ property ] ) === "string" ) {
						_valuesStartRepeat[ property ] = _valuesStartRepeat[ property ] + parseFloat(_valuesEnd[ property ], 10);
					}

					if (_yoyo) {
						var tmp = _valuesStartRepeat[ property ];
						_valuesStartRepeat[ property ] = _valuesEnd[ property ];
						_valuesEnd[ property ] = tmp;
						_reversed = !_reversed;
					}
					_valuesStart[ property ] = _valuesStartRepeat[ property ];

				}

				_startTime = time + _delayTime;

				return true;

			} else {

				if ( _onCompleteCallback !== null ) {

					_onCompleteCallback.call( _object );

				}

				for ( var i = 0, numChainedTweens = _chainedTweens.length; i < numChainedTweens; i++ ) {

					_chainedTweens[ i ].start( time );

				}

				return false;

			}

		}

		return true;

	};

};


TWEEN.Easing = {

	Linear: {

		None: function ( k ) {

			return k;

		}

	},

	Quadratic: {

		In: function ( k ) {

			return k * k;

		},

		Out: function ( k ) {

			return k * ( 2 - k );

		},

		InOut: function ( k ) {

			if ( ( k *= 2 ) < 1 ) return 0.5 * k * k;
			return - 0.5 * ( --k * ( k - 2 ) - 1 );

		}

	},

	Cubic: {

		In: function ( k ) {

			return k * k * k;

		},

		Out: function ( k ) {

			return --k * k * k + 1;

		},

		InOut: function ( k ) {

			if ( ( k *= 2 ) < 1 ) return 0.5 * k * k * k;
			return 0.5 * ( ( k -= 2 ) * k * k + 2 );

		}

	},

	Quartic: {

		In: function ( k ) {

			return k * k * k * k;

		},

		Out: function ( k ) {

			return 1 - ( --k * k * k * k );

		},

		InOut: function ( k ) {

			if ( ( k *= 2 ) < 1) return 0.5 * k * k * k * k;
			return - 0.5 * ( ( k -= 2 ) * k * k * k - 2 );

		}

	},

	Quintic: {

		In: function ( k ) {

			return k * k * k * k * k;

		},

		Out: function ( k ) {

			return --k * k * k * k * k + 1;

		},

		InOut: function ( k ) {

			if ( ( k *= 2 ) < 1 ) return 0.5 * k * k * k * k * k;
			return 0.5 * ( ( k -= 2 ) * k * k * k * k + 2 );

		}

	},

	Sinusoidal: {

		In: function ( k ) {

			return 1 - Math.cos( k * Math.PI / 2 );

		},

		Out: function ( k ) {

			return Math.sin( k * Math.PI / 2 );

		},

		InOut: function ( k ) {

			return 0.5 * ( 1 - Math.cos( Math.PI * k ) );

		}

	},

	Exponential: {

		In: function ( k ) {

			return k === 0 ? 0 : Math.pow( 1024, k - 1 );

		},

		Out: function ( k ) {

			return k === 1 ? 1 : 1 - Math.pow( 2, - 10 * k );

		},

		InOut: function ( k ) {

			if ( k === 0 ) return 0;
			if ( k === 1 ) return 1;
			if ( ( k *= 2 ) < 1 ) return 0.5 * Math.pow( 1024, k - 1 );
			return 0.5 * ( - Math.pow( 2, - 10 * ( k - 1 ) ) + 2 );

		}

	},

	Circular: {

		In: function ( k ) {

			return 1 - Math.sqrt( 1 - k * k );

		},

		Out: function ( k ) {

			return Math.sqrt( 1 - ( --k * k ) );

		},

		InOut: function ( k ) {

			if ( ( k *= 2 ) < 1) return - 0.5 * ( Math.sqrt( 1 - k * k) - 1);
			return 0.5 * ( Math.sqrt( 1 - ( k -= 2) * k) + 1);

		}

	},

	Elastic: {

		In: function ( k ) {

			var s, a = 0.1, p = 0.4;
			if ( k === 0 ) return 0;
			if ( k === 1 ) return 1;
			if ( !a || a < 1 ) { a = 1; s = p / 4; }
			else s = p * Math.asin( 1 / a ) / ( 2 * Math.PI );
			return - ( a * Math.pow( 2, 10 * ( k -= 1 ) ) * Math.sin( ( k - s ) * ( 2 * Math.PI ) / p ) );

		},

		Out: function ( k ) {

			var s, a = 0.1, p = 0.4;
			if ( k === 0 ) return 0;
			if ( k === 1 ) return 1;
			if ( !a || a < 1 ) { a = 1; s = p / 4; }
			else s = p * Math.asin( 1 / a ) / ( 2 * Math.PI );
			return ( a * Math.pow( 2, - 10 * k) * Math.sin( ( k - s ) * ( 2 * Math.PI ) / p ) + 1 );

		},

		InOut: function ( k ) {

			var s, a = 0.1, p = 0.4;
			if ( k === 0 ) return 0;
			if ( k === 1 ) return 1;
			if ( !a || a < 1 ) { a = 1; s = p / 4; }
			else s = p * Math.asin( 1 / a ) / ( 2 * Math.PI );
			if ( ( k *= 2 ) < 1 ) return - 0.5 * ( a * Math.pow( 2, 10 * ( k -= 1 ) ) * Math.sin( ( k - s ) * ( 2 * Math.PI ) / p ) );
			return a * Math.pow( 2, -10 * ( k -= 1 ) ) * Math.sin( ( k - s ) * ( 2 * Math.PI ) / p ) * 0.5 + 1;

		}

	},

	Back: {

		In: function ( k ) {

			var s = 1.70158;
			return k * k * ( ( s + 1 ) * k - s );

		},

		Out: function ( k ) {

			var s = 1.70158;
			return --k * k * ( ( s + 1 ) * k + s ) + 1;

		},

		InOut: function ( k ) {

			var s = 1.70158 * 1.525;
			if ( ( k *= 2 ) < 1 ) return 0.5 * ( k * k * ( ( s + 1 ) * k - s ) );
			return 0.5 * ( ( k -= 2 ) * k * ( ( s + 1 ) * k + s ) + 2 );

		}

	},

	Bounce: {

		In: function ( k ) {

			return 1 - TWEEN.Easing.Bounce.Out( 1 - k );

		},

		Out: function ( k ) {

			if ( k < ( 1 / 2.75 ) ) {

				return 7.5625 * k * k;

			} else if ( k < ( 2 / 2.75 ) ) {

				return 7.5625 * ( k -= ( 1.5 / 2.75 ) ) * k + 0.75;

			} else if ( k < ( 2.5 / 2.75 ) ) {

				return 7.5625 * ( k -= ( 2.25 / 2.75 ) ) * k + 0.9375;

			} else {

				return 7.5625 * ( k -= ( 2.625 / 2.75 ) ) * k + 0.984375;

			}

		},

		InOut: function ( k ) {

			if ( k < 0.5 ) return TWEEN.Easing.Bounce.In( k * 2 ) * 0.5;
			return TWEEN.Easing.Bounce.Out( k * 2 - 1 ) * 0.5 + 0.5;

		}

	}

};

TWEEN.Interpolation = {

	Linear: function ( v, k ) {

		var m = v.length - 1, f = m * k, i = Math.floor( f ), fn = TWEEN.Interpolation.Utils.Linear;

		if ( k < 0 ) return fn( v[ 0 ], v[ 1 ], f );
		if ( k > 1 ) return fn( v[ m ], v[ m - 1 ], m - f );

		return fn( v[ i ], v[ i + 1 > m ? m : i + 1 ], f - i );

	},

	Bezier: function ( v, k ) {

		var b = 0, n = v.length - 1, pw = Math.pow, bn = TWEEN.Interpolation.Utils.Bernstein, i;

		for ( i = 0; i <= n; i++ ) {
			b += pw( 1 - k, n - i ) * pw( k, i ) * v[ i ] * bn( n, i );
		}

		return b;

	},

	CatmullRom: function ( v, k ) {

		var m = v.length - 1, f = m * k, i = Math.floor( f ), fn = TWEEN.Interpolation.Utils.CatmullRom;

		if ( v[ 0 ] === v[ m ] ) {

			if ( k < 0 ) i = Math.floor( f = m * ( 1 + k ) );

			return fn( v[ ( i - 1 + m ) % m ], v[ i ], v[ ( i + 1 ) % m ], v[ ( i + 2 ) % m ], f - i );

		} else {

			if ( k < 0 ) return v[ 0 ] - ( fn( v[ 0 ], v[ 0 ], v[ 1 ], v[ 1 ], -f ) - v[ 0 ] );
			if ( k > 1 ) return v[ m ] - ( fn( v[ m ], v[ m ], v[ m - 1 ], v[ m - 1 ], f - m ) - v[ m ] );

			return fn( v[ i ? i - 1 : 0 ], v[ i ], v[ m < i + 1 ? m : i + 1 ], v[ m < i + 2 ? m : i + 2 ], f - i );

		}

	},

	Utils: {

		Linear: function ( p0, p1, t ) {

			return ( p1 - p0 ) * t + p0;

		},

		Bernstein: function ( n , i ) {

			var fc = TWEEN.Interpolation.Utils.Factorial;
			return fc( n ) / fc( i ) / fc( n - i );

		},

		Factorial: ( function () {

			var a = [ 1 ];

			return function ( n ) {

				var s = 1, i;
				if ( a[ n ] ) return a[ n ];
				for ( i = n; i > 1; i-- ) s *= i;
				return a[ n ] = s;

			};

		} )(),

		CatmullRom: function ( p0, p1, p2, p3, t ) {

			var v0 = ( p2 - p0 ) * 0.5, v1 = ( p3 - p1 ) * 0.5, t2 = t * t, t3 = t * t2;
			return ( 2 * p1 - 2 * p2 + v0 + v1 ) * t3 + ( - 3 * p1 + 3 * p2 - 2 * v0 - v1 ) * t2 + v0 * t + p1;

		}

	}

};

},{}],14:[function(require,module,exports){
'use strict';

/**
 * Merge two attribute objects giving precedence
 * to values in object `b`. Classes are special-cased
 * allowing for arrays and merging/joining appropriately
 * resulting in a string.
 *
 * @param {Object} a
 * @param {Object} b
 * @return {Object} a
 * @api private
 */

exports.merge = function merge(a, b) {
  if (arguments.length === 1) {
    var attrs = a[0];
    for (var i = 1; i < a.length; i++) {
      attrs = merge(attrs, a[i]);
    }
    return attrs;
  }
  var ac = a['class'];
  var bc = b['class'];

  if (ac || bc) {
    ac = ac || [];
    bc = bc || [];
    if (!Array.isArray(ac)) ac = [ac];
    if (!Array.isArray(bc)) bc = [bc];
    a['class'] = ac.concat(bc).filter(nulls);
  }

  for (var key in b) {
    if (key != 'class') {
      a[key] = b[key];
    }
  }

  return a;
};

/**
 * Filter null `val`s.
 *
 * @param {*} val
 * @return {Boolean}
 * @api private
 */

function nulls(val) {
  return val != null && val !== '';
}

/**
 * join array as classes.
 *
 * @param {*} val
 * @return {String}
 */
exports.joinClasses = joinClasses;
function joinClasses(val) {
  return (Array.isArray(val) ? val.map(joinClasses) :
    (val && typeof val === 'object') ? Object.keys(val).filter(function (key) { return val[key]; }) :
    [val]).filter(nulls).join(' ');
}

/**
 * Render the given classes.
 *
 * @param {Array} classes
 * @param {Array.<Boolean>} escaped
 * @return {String}
 */
exports.cls = function cls(classes, escaped) {
  var buf = [];
  for (var i = 0; i < classes.length; i++) {
    if (escaped && escaped[i]) {
      buf.push(exports.escape(joinClasses([classes[i]])));
    } else {
      buf.push(joinClasses(classes[i]));
    }
  }
  var text = joinClasses(buf);
  if (text.length) {
    return ' class="' + text + '"';
  } else {
    return '';
  }
};


exports.style = function (val) {
  if (val && typeof val === 'object') {
    return Object.keys(val).map(function (style) {
      return style + ':' + val[style];
    }).join(';');
  } else {
    return val;
  }
};
/**
 * Render the given attribute.
 *
 * @param {String} key
 * @param {String} val
 * @param {Boolean} escaped
 * @param {Boolean} terse
 * @return {String}
 */
exports.attr = function attr(key, val, escaped, terse) {
  if (key === 'style') {
    val = exports.style(val);
  }
  if ('boolean' == typeof val || null == val) {
    if (val) {
      return ' ' + (terse ? key : key + '="' + key + '"');
    } else {
      return '';
    }
  } else if (0 == key.indexOf('data') && 'string' != typeof val) {
    if (JSON.stringify(val).indexOf('&') !== -1) {
      console.warn('Since Jade 2.0.0, ampersands (`&`) in data attributes ' +
                   'will be escaped to `&amp;`');
    };
    if (val && typeof val.toISOString === 'function') {
      console.warn('Jade will eliminate the double quotes around dates in ' +
                   'ISO form after 2.0.0');
    }
    return ' ' + key + "='" + JSON.stringify(val).replace(/'/g, '&apos;') + "'";
  } else if (escaped) {
    if (val && typeof val.toISOString === 'function') {
      console.warn('Jade will stringify dates in ISO form after 2.0.0');
    }
    return ' ' + key + '="' + exports.escape(val) + '"';
  } else {
    if (val && typeof val.toISOString === 'function') {
      console.warn('Jade will stringify dates in ISO form after 2.0.0');
    }
    return ' ' + key + '="' + val + '"';
  }
};

/**
 * Render the given attributes object.
 *
 * @param {Object} obj
 * @param {Object} escaped
 * @return {String}
 */
exports.attrs = function attrs(obj, terse){
  var buf = [];

  var keys = Object.keys(obj);

  if (keys.length) {
    for (var i = 0; i < keys.length; ++i) {
      var key = keys[i]
        , val = obj[key];

      if ('class' == key) {
        if (val = joinClasses(val)) {
          buf.push(' ' + key + '="' + val + '"');
        }
      } else {
        buf.push(exports.attr(key, val, false, terse));
      }
    }
  }

  return buf.join('');
};

/**
 * Escape the given string of `html`.
 *
 * @param {String} html
 * @return {String}
 * @api private
 */

var jade_encode_html_rules = {
  '&': '&amp;',
  '<': '&lt;',
  '>': '&gt;',
  '"': '&quot;'
};
var jade_match_html = /[&<>"]/g;

function jade_encode_char(c) {
  return jade_encode_html_rules[c] || c;
}

exports.escape = jade_escape;
function jade_escape(html){
  var result = String(html).replace(jade_match_html, jade_encode_char);
  if (result === '' + html) return html;
  else return result;
};

/**
 * Re-throw the given `err` in context to the
 * the jade in `filename` at the given `lineno`.
 *
 * @param {Error} err
 * @param {String} filename
 * @param {String} lineno
 * @api private
 */

exports.rethrow = function rethrow(err, filename, lineno, str){
  if (!(err instanceof Error)) throw err;
  if ((typeof window != 'undefined' || !filename) && !str) {
    err.message += ' on line ' + lineno;
    throw err;
  }
  try {
    str = str || require('fs').readFileSync(filename, 'utf8')
  } catch (ex) {
    rethrow(err, null, lineno)
  }
  var context = 3
    , lines = str.split('\n')
    , start = Math.max(lineno - context, 0)
    , end = Math.min(lines.length, lineno + context);

  // Error context
  var context = lines.slice(start, end).map(function(line, i){
    var curr = i + start + 1;
    return (curr == lineno ? '  > ' : '    ')
      + curr
      + '| '
      + line;
  }).join('\n');

  // Alter exception message
  err.path = filename;
  err.message = (filename || 'Jade') + ':' + lineno
    + '\n' + context + '\n\n' + err.message;
  throw err;
};

exports.DebugItem = function DebugItem(lineno, filename) {
  this.lineno = lineno;
  this.filename = filename;
}
},{"fs":15}],15:[function(require,module,exports){

},{}],16:[function(require,module,exports){
// Generated by CoffeeScript 1.6.3
/*
Based off sources from the following codebases:
https://github.com/pickhardt/coffeescript-codemirror-mode
https://github.com/xixixao/TeaTable/blob/master/scripts/compilers/icedcoffeescript/highlighter.coffee
*/


(function() {
  var CodeMirrorIcedCoffeeScript = function (conf) {
    var ERRORCLASS, anyIs, boundaryToken, classIdentifiers, commonConstants, commonKeywords, constantIdentifiers, constants, dedent, doubleDelimiters, doubleOperators, field, functionDeclaration, functionIdentifier, icedKeywords, identifiers, indent, indentKeywords, keywords, longComment, otherKeywords, parenConstructors, regexPrefixes, regexToken, simpleTokenMatcher, singleDelimiters, singleOperators, stringPrefixes, tokenBase, tokenFactory, tokenLexer, tripleDelimiters, wordOperators, wordRegexp;
    ERRORCLASS = 'error';
    wordRegexp = function(words) {
      return new RegExp("^((" + words.join(")|(") + "))\\b");
    };
    singleOperators = new RegExp("^[\\+\\-\\*/%&|\\^~<>!?]");
    singleDelimiters = new RegExp("^[\\(\\)@,`;\\.]");
    doubleOperators = new RegExp("^((=)|(:)|(->)|(=>)|(\\+\\+)|(\\+\\=)|(\\-\\-)|(\\-\\=)|(\\*\\*)|(\\*\\=)|(\\/\\/)|(\\/\\=)|(==)|(!=)|(<=)|(>=)|(<>)|(<<)|(>>)|(//))");
    doubleDelimiters = new RegExp("^((\\.\\.)|(\\+=)|(\\-=)|(\\*=)|(%=)|(/=)|(&=)|(\\|=)|(\\^=)|(&&=)|(\\||=))");
    tripleDelimiters = new RegExp("^((\\.\\.\\.)|(//=)|(>>=)|(<<=)|(\\*\\*=))");
    parenConstructors = new RegExp("^[\\[\\]\\{\\}]");
    constantIdentifiers = new RegExp("^[_A-Z$][_A-Z$0-9]+\\b");
    classIdentifiers = new RegExp("^[_A-Z$][_A-Za-z$0-9]*");
    identifiers = new RegExp("^[_a-z$][_A-Za-z$0-9]*");
    field = new RegExp("^@[_A-Za-z$][_A-Za-z$0-9]*");
    functionIdentifier = new RegExp("^[_a-z$][_A-Za-z$0-9]*\\s?(:|=)\\s?(\\([_A-Za-z$0-9@,=\\.\\[\\]\\s]*\\)\\s*)?((->)|(=>))");
    functionDeclaration = new RegExp("^(\\([_A-Za-z$0-9@,=\\.\\[\\]\\s]*\\)\\s*)?((->)|(=>))");
    wordOperators = wordRegexp(['and', 'or', 'not', 'is', 'isnt', 'in', 'instanceof', 'typeof']);
    indentKeywords = ['for', 'while', 'loop', 'if', 'unless', 'else', 'switch', 'try', 'catch', 'finally', 'class'];
    commonKeywords = ['break', 'by', 'continue', 'delete', 'do', 'in', 'of', 'new', 'return', 'then', 'throw', 'when', 'until', 'extends'];
    otherKeywords = wordRegexp(['debugger', 'this']);
    icedKeywords = wordRegexp(['await', 'defer']);
    keywords = wordRegexp(indentKeywords.concat(commonKeywords));
    indentKeywords = wordRegexp(indentKeywords);
    stringPrefixes = new RegExp("^('{3}|\"{3}|['\"])");
    regexPrefixes = new RegExp("^(/{3}|/)");
    commonConstants = ["Infinity", "NaN", "undefined", "null", "true", "false", "on", "off", "yes", "no"];
    constants = wordRegexp(commonConstants);
    tokenBase = function(stream, state) {
      var ch, floatLiteral, lineOffset, scopeOffset, token;
      if (stream.sol()) {
        scopeOffset = state.scopes[0].offset;
        if (stream.eatSpace()) {
          lineOffset = stream.indentation();
          if (lineOffset > scopeOffset) {
            return 'indent';
          } else if (lineOffset < scopeOffset) {
            return 'dedent';
          }
          return null;
        } else if (scopeOffset > 0) {
          dedent(stream, state);
        }
      }
      if (stream.eatSpace()) {
        return null;
      }
      ch = stream.peek();
      if (stream.match("###")) {
        state.tokenize = longComment;
        return state.tokenize(stream, state);
      }
      if (ch === "#") {
        stream.skipToEnd();
        return "comment";
      }
      if (stream.match(/^-?[0-9\.]/, false)) {
        floatLiteral = false;
        if ((stream.match(/^-?\d*\.\d+(e[\+\-]?\d+)?/i)) || (stream.match(/^-?\d+\.\d*/)) || (stream.match(/^-?\.\d+/))) {
          floatLiteral = true;
        }
        if (floatLiteral) {
          if (stream.peek() === ".") {
            stream.backUp(1);
          }
          return "number";
        }
        if ((stream.match(/^-?0x[0-9a-f]+/i)) || (stream.match(/^-?[1-9]\d*(e[\+\-]?\d+)?/)) || (stream.match(/^-?0(?![\dx])/i))) {
          return "number";
        }
      }
      if (stream.match(stringPrefixes)) {
        state.tokenize = tokenFactory(stream.current(), "string");
        return state.tokenize(stream, state);
      }
      if (stream.match(regexPrefixes)) {
        if (stream.current() !== "/" || stream.match(/^.*\//, false)) {
          state.tokenize = regexToken(stream.current(), "string-2");
          return state.tokenize(stream, state);
        } else {
          stream.backUp(1);
        }
      }
      if (stream.match(functionIdentifier, false)) {
        stream.match(identifiers);
        return "functionid";
      }
      token = simpleTokenMatcher(stream, ["functiondec", functionDeclaration, "field", field, "operator", tripleDelimiters, doubleDelimiters, "operator", doubleOperators, singleOperators, wordOperators, "punctuation", singleDelimiters, "atom", constants, "keyword", keywords, "keyword2", otherKeywords, "keyword3", icedKeywords, "constructor", parenConstructors, "constant", constantIdentifiers, "classname", classIdentifiers, "variable", identifiers]);
      if (token) {
        return token;
      }
      stream.next();
      return ERRORCLASS;
    };
    simpleTokenMatcher = function(stream, keysForPatterns) {
      var item, token, tokenMatches, _i, _len;
      token = "";
      tokenMatches = false;
      for (_i = 0, _len = keysForPatterns.length; _i < _len; _i++) {
        item = keysForPatterns[_i];
        if (typeof item === 'string') {
          if (tokenMatches) {
            break;
          }
          token = item;
          tokenMatches = false;
        } else {
          tokenMatches || (tokenMatches = stream.match(item));
        }
      }
      if (tokenMatches) {
        return token;
      } else {
        return null;
      }
    };
    tokenFactory = function(delimiter, outclass) {
      return boundaryToken(delimiter, outclass);
    };
    regexToken = function(delimiter, outclass) {
      return boundaryToken(delimiter, outclass, function(stream) {
        return stream.match(/^[igm]*\b/);
      });
    };
    boundaryToken = function(delimiter, outclass, suffix) {
      var singleline;
      singleline = delimiter.length === 1;
      return function(stream, state) {
        while (!stream.eol()) {
          stream.eatWhile(/[^'"\/\\]/);
          if (stream.eat("\\")) {
            stream.next();
            if (singleline && stream.eol()) {
              return outclass;
            }
          } else if (stream.match(delimiter)) {
            state.tokenize = tokenBase;
            if (suffix) {
              suffix(stream);
            }
            return outclass;
          } else {
            stream.eat(/['"\/]/);
          }
        }
        if (singleline) {
          if (conf.mode.singleLineStringErrors) {
            outclass = ERRORCLASS;
          } else {
            state.tokenize = tokenBase;
          }
        }
        return outclass;
      };
    };
    longComment = function(stream, state) {
      while (!stream.eol()) {
        stream.eatWhile(/[^#]/);
        if (stream.match("###")) {
          state.tokenize = tokenBase;
          break;
        }
        stream.eatWhile("#");
      }
      return "comment";
    };
    indent = function(stream, state, type) {
      var indentUnit, scope, _i, _len, _ref;
      type = type || "coffee";
      indentUnit = 0;
      if (type === "coffee") {
        _ref = state.scopes;
        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
          scope = _ref[_i];
          if (scope.type === "coffee") {
            indentUnit = scope.offset + conf.indentUnit;
            break;
          }
        }
      } else {
        indentUnit = stream.column() + stream.current().length;
      }
      return state.scopes.unshift({
        offset: indentUnit,
        type: type
      });
    };
    dedent = function(stream, state) {
      var i, scope, _i, _indent, _indent_index, _len, _ref;
      if (state.scopes.length === 1) {
        return;
      }
      if (state.scopes[0].type === "coffee") {
        _indent = stream.indentation();
        _indent_index = -1;
        _ref = state.scopes;
        for (i = _i = 0, _len = _ref.length; _i < _len; i = ++_i) {
          scope = _ref[i];
          if (_indent === scope.offset) {
            _indent_index = i;
            break;
          }
        }
        if (_indent_index === -1) {
          return true;
        }
        while (state.scopes[0].offset !== _indent) {
          state.scopes.shift();
        }
        return false;
      } else {
        state.scopes.shift();
        return false;
      }
    };
    tokenLexer = function(stream, state) {
      var current, delimiter_index, style;
      style = state.tokenize(stream, state);
      current = stream.current();
      if (current === ".") {
        style = state.tokenize(stream, state);
        current = stream.current();
        if (anyIs(["variable", "constant", "classname", "functionid"], style)) {
          return style;
        } else {
          return ERRORCLASS;
        }
      }
      if (current === "@") {
        stream.eat("@");
        return "keyword";
      }
      if (current === "return") {
        state.dedent += 1;
      }
      if (((current === "->" || current === "=>") && !state.lambda && state.scopes[0].type === "coffee" && stream.peek() === "") || style === "indent") {
        indent(stream, state);
      }
      delimiter_index = "[({".indexOf(current);
      if (delimiter_index !== -1) {
        indent(stream, state, "])}".slice(delimiter_index, delimiter_index + 1));
      }
      if (indentKeywords.exec(current)) {
        indent(stream, state);
      }
      if (current === "then") {
        dedent(stream, state);
      }
      if (style === "dedent" && dedent(stream, state)) {
        return ERRORCLASS;
      }
      delimiter_index = "])}".indexOf(current);
      if (delimiter_index !== -1 && dedent(stream, state)) {
        return ERRORCLASS;
      }
      if (state.dedent > 0 && stream.eol() && state.scopes[0].type === "coffee") {
        if (state.scopes.length > 1) {
          state.scopes.shift();
        }
        state.dedent -= 1;
      }
      return style;
    };
    anyIs = function(list, what) {
      var item, _i, _len;
      for (_i = 0, _len = list.length; _i < _len; _i++) {
        item = list[_i];
        if (item === what) {
          return true;
        }
      }
      return false;
    };
    return {
      startState: function(basecolumn) {
        return {
          tokenize: tokenBase,
          scopes: [
            {
              offset: basecolumn || 0,
              type: "coffee"
            }
          ],
          lastToken: null,
          lambda: false,
          dedent: 0
        };
      },
      token: function(stream, state) {
        var style;
        style = tokenLexer(stream, state);
        state.lastToken = {
          style: style,
          content: stream.current()
        };
        if (stream.eol() && stream.lambda) {
          state.lambda = false;
        }
        return style;
      },
      indent: function(state, textAfter) {
        if (state.tokenize !== tokenBase) {
          return 0;
        }
        return state.scopes[0].offset;
      }
    };
  };

  if (!CodeMirror && !window.CodeMirror) var CodeMirror = window.CodeMirror = require("codemirror");
  CodeMirror.defineMode("icedcoffeescript", CodeMirrorIcedCoffeeScript);
  CodeMirror.defineMIME("text/x-icedcoffeescript", "icedcoffeescript");
  if (typeof exports == "object" && typeof module == "object") module.exports = CodeMirrorIcedCoffeeScript;

}).call(this);

},{"codemirror":17}],17:[function(require,module,exports){
// CodeMirror, copyright (c) by Marijn Haverbeke and others
// Distributed under an MIT license: http://codemirror.net/LICENSE

// This is CodeMirror (http://codemirror.net), a code editor
// implemented in JavaScript on top of the browser's DOM.
//
// You can find some technical background for some of the code below
// at http://marijnhaverbeke.nl/blog/#cm-internals .

(function(mod) {
  if (typeof exports == "object" && typeof module == "object") // CommonJS
    module.exports = mod();
  else if (typeof define == "function" && define.amd) // AMD
    return define([], mod);
  else // Plain browser env
    (this || window).CodeMirror = mod();
})(function() {
  "use strict";

  // BROWSER SNIFFING

  // Kludges for bugs and behavior differences that can't be feature
  // detected are enabled based on userAgent etc sniffing.
  var userAgent = navigator.userAgent;
  var platform = navigator.platform;

  var gecko = /gecko\/\d/i.test(userAgent);
  var ie_upto10 = /MSIE \d/.test(userAgent);
  var ie_11up = /Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(userAgent);
  var ie = ie_upto10 || ie_11up;
  var ie_version = ie && (ie_upto10 ? document.documentMode || 6 : ie_11up[1]);
  var webkit = /WebKit\//.test(userAgent);
  var qtwebkit = webkit && /Qt\/\d+\.\d+/.test(userAgent);
  var chrome = /Chrome\//.test(userAgent);
  var presto = /Opera\//.test(userAgent);
  var safari = /Apple Computer/.test(navigator.vendor);
  var mac_geMountainLion = /Mac OS X 1\d\D([8-9]|\d\d)\D/.test(userAgent);
  var phantom = /PhantomJS/.test(userAgent);

  var ios = /AppleWebKit/.test(userAgent) && /Mobile\/\w+/.test(userAgent);
  // This is woefully incomplete. Suggestions for alternative methods welcome.
  var mobile = ios || /Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(userAgent);
  var mac = ios || /Mac/.test(platform);
  var chromeOS = /\bCrOS\b/.test(userAgent);
  var windows = /win/i.test(platform);

  var presto_version = presto && userAgent.match(/Version\/(\d*\.\d*)/);
  if (presto_version) presto_version = Number(presto_version[1]);
  if (presto_version && presto_version >= 15) { presto = false; webkit = true; }
  // Some browsers use the wrong event properties to signal cmd/ctrl on OS X
  var flipCtrlCmd = mac && (qtwebkit || presto && (presto_version == null || presto_version < 12.11));
  var captureRightClick = gecko || (ie && ie_version >= 9);

  // Optimize some code when these features are not used.
  var sawReadOnlySpans = false, sawCollapsedSpans = false;

  // EDITOR CONSTRUCTOR

  // A CodeMirror instance represents an editor. This is the object
  // that user code is usually dealing with.

  function CodeMirror(place, options) {
    if (!(this instanceof CodeMirror)) return new CodeMirror(place, options);

    this.options = options = options ? copyObj(options) : {};
    // Determine effective options based on given values and defaults.
    copyObj(defaults, options, false);
    setGuttersForLineNumbers(options);

    var doc = options.value;
    if (typeof doc == "string") doc = new Doc(doc, options.mode, null, options.lineSeparator);
    this.doc = doc;

    var input = new CodeMirror.inputStyles[options.inputStyle](this);
    var display = this.display = new Display(place, doc, input);
    display.wrapper.CodeMirror = this;
    updateGutters(this);
    themeChanged(this);
    if (options.lineWrapping)
      this.display.wrapper.className += " CodeMirror-wrap";
    if (options.autofocus && !mobile) display.input.focus();
    initScrollbars(this);

    this.state = {
      keyMaps: [],  // stores maps added by addKeyMap
      overlays: [], // highlighting overlays, as added by addOverlay
      modeGen: 0,   // bumped when mode/overlay changes, used to invalidate highlighting info
      overwrite: false,
      delayingBlurEvent: false,
      focused: false,
      suppressEdits: false, // used to disable editing during key handlers when in readOnly mode
      pasteIncoming: false, cutIncoming: false, // help recognize paste/cut edits in input.poll
      selectingText: false,
      draggingText: false,
      highlight: new Delayed(), // stores highlight worker timeout
      keySeq: null,  // Unfinished key sequence
      specialChars: null
    };

    var cm = this;

    // Override magic textarea content restore that IE sometimes does
    // on our hidden textarea on reload
    if (ie && ie_version < 11) setTimeout(function() { cm.display.input.reset(true); }, 20);

    registerEventHandlers(this);
    ensureGlobalHandlers();

    startOperation(this);
    this.curOp.forceUpdate = true;
    attachDoc(this, doc);

    if ((options.autofocus && !mobile) || cm.hasFocus())
      setTimeout(bind(onFocus, this), 20);
    else
      onBlur(this);

    for (var opt in optionHandlers) if (optionHandlers.hasOwnProperty(opt))
      optionHandlers[opt](this, options[opt], Init);
    maybeUpdateLineNumberWidth(this);
    if (options.finishInit) options.finishInit(this);
    for (var i = 0; i < initHooks.length; ++i) initHooks[i](this);
    endOperation(this);
    // Suppress optimizelegibility in Webkit, since it breaks text
    // measuring on line wrapping boundaries.
    if (webkit && options.lineWrapping &&
        getComputedStyle(display.lineDiv).textRendering == "optimizelegibility")
      display.lineDiv.style.textRendering = "auto";
  }

  // DISPLAY CONSTRUCTOR

  // The display handles the DOM integration, both for input reading
  // and content drawing. It holds references to DOM nodes and
  // display-related state.

  function Display(place, doc, input) {
    var d = this;
    this.input = input;

    // Covers bottom-right square when both scrollbars are present.
    d.scrollbarFiller = elt("div", null, "CodeMirror-scrollbar-filler");
    d.scrollbarFiller.setAttribute("cm-not-content", "true");
    // Covers bottom of gutter when coverGutterNextToScrollbar is on
    // and h scrollbar is present.
    d.gutterFiller = elt("div", null, "CodeMirror-gutter-filler");
    d.gutterFiller.setAttribute("cm-not-content", "true");
    // Will contain the actual code, positioned to cover the viewport.
    d.lineDiv = elt("div", null, "CodeMirror-code");
    // Elements are added to these to represent selection and cursors.
    d.selectionDiv = elt("div", null, null, "position: relative; z-index: 1");
    d.cursorDiv = elt("div", null, "CodeMirror-cursors");
    // A visibility: hidden element used to find the size of things.
    d.measure = elt("div", null, "CodeMirror-measure");
    // When lines outside of the viewport are measured, they are drawn in this.
    d.lineMeasure = elt("div", null, "CodeMirror-measure");
    // Wraps everything that needs to exist inside the vertically-padded coordinate system
    d.lineSpace = elt("div", [d.measure, d.lineMeasure, d.selectionDiv, d.cursorDiv, d.lineDiv],
                      null, "position: relative; outline: none");
    // Moved around its parent to cover visible view.
    d.mover = elt("div", [elt("div", [d.lineSpace], "CodeMirror-lines")], null, "position: relative");
    // Set to the height of the document, allowing scrolling.
    d.sizer = elt("div", [d.mover], "CodeMirror-sizer");
    d.sizerWidth = null;
    // Behavior of elts with overflow: auto and padding is
    // inconsistent across browsers. This is used to ensure the
    // scrollable area is big enough.
    d.heightForcer = elt("div", null, null, "position: absolute; height: " + scrollerGap + "px; width: 1px;");
    // Will contain the gutters, if any.
    d.gutters = elt("div", null, "CodeMirror-gutters");
    d.lineGutter = null;
    // Actual scrollable element.
    d.scroller = elt("div", [d.sizer, d.heightForcer, d.gutters], "CodeMirror-scroll");
    d.scroller.setAttribute("tabIndex", "-1");
    // The element in which the editor lives.
    d.wrapper = elt("div", [d.scrollbarFiller, d.gutterFiller, d.scroller], "CodeMirror");

    // Work around IE7 z-index bug (not perfect, hence IE7 not really being supported)
    if (ie && ie_version < 8) { d.gutters.style.zIndex = -1; d.scroller.style.paddingRight = 0; }
    if (!webkit && !(gecko && mobile)) d.scroller.draggable = true;

    if (place) {
      if (place.appendChild) place.appendChild(d.wrapper);
      else place(d.wrapper);
    }

    // Current rendered range (may be bigger than the view window).
    d.viewFrom = d.viewTo = doc.first;
    d.reportedViewFrom = d.reportedViewTo = doc.first;
    // Information about the rendered lines.
    d.view = [];
    d.renderedView = null;
    // Holds info about a single rendered line when it was rendered
    // for measurement, while not in view.
    d.externalMeasured = null;
    // Empty space (in pixels) above the view
    d.viewOffset = 0;
    d.lastWrapHeight = d.lastWrapWidth = 0;
    d.updateLineNumbers = null;

    d.nativeBarWidth = d.barHeight = d.barWidth = 0;
    d.scrollbarsClipped = false;

    // Used to only resize the line number gutter when necessary (when
    // the amount of lines crosses a boundary that makes its width change)
    d.lineNumWidth = d.lineNumInnerWidth = d.lineNumChars = null;
    // Set to true when a non-horizontal-scrolling line widget is
    // added. As an optimization, line widget aligning is skipped when
    // this is false.
    d.alignWidgets = false;

    d.cachedCharWidth = d.cachedTextHeight = d.cachedPaddingH = null;

    // Tracks the maximum line length so that the horizontal scrollbar
    // can be kept static when scrolling.
    d.maxLine = null;
    d.maxLineLength = 0;
    d.maxLineChanged = false;

    // Used for measuring wheel scrolling granularity
    d.wheelDX = d.wheelDY = d.wheelStartX = d.wheelStartY = null;

    // True when shift is held down.
    d.shift = false;

    // Used to track whether anything happened since the context menu
    // was opened.
    d.selForContextMenu = null;

    d.activeTouch = null;

    input.init(d);
  }

  // STATE UPDATES

  // Used to get the editor into a consistent state again when options change.

  function loadMode(cm) {
    cm.doc.mode = CodeMirror.getMode(cm.options, cm.doc.modeOption);
    resetModeState(cm);
  }

  function resetModeState(cm) {
    cm.doc.iter(function(line) {
      if (line.stateAfter) line.stateAfter = null;
      if (line.styles) line.styles = null;
    });
    cm.doc.frontier = cm.doc.first;
    startWorker(cm, 100);
    cm.state.modeGen++;
    if (cm.curOp) regChange(cm);
  }

  function wrappingChanged(cm) {
    if (cm.options.lineWrapping) {
      addClass(cm.display.wrapper, "CodeMirror-wrap");
      cm.display.sizer.style.minWidth = "";
      cm.display.sizerWidth = null;
    } else {
      rmClass(cm.display.wrapper, "CodeMirror-wrap");
      findMaxLine(cm);
    }
    estimateLineHeights(cm);
    regChange(cm);
    clearCaches(cm);
    setTimeout(function(){updateScrollbars(cm);}, 100);
  }

  // Returns a function that estimates the height of a line, to use as
  // first approximation until the line becomes visible (and is thus
  // properly measurable).
  function estimateHeight(cm) {
    var th = textHeight(cm.display), wrapping = cm.options.lineWrapping;
    var perLine = wrapping && Math.max(5, cm.display.scroller.clientWidth / charWidth(cm.display) - 3);
    return function(line) {
      if (lineIsHidden(cm.doc, line)) return 0;

      var widgetsHeight = 0;
      if (line.widgets) for (var i = 0; i < line.widgets.length; i++) {
        if (line.widgets[i].height) widgetsHeight += line.widgets[i].height;
      }

      if (wrapping)
        return widgetsHeight + (Math.ceil(line.text.length / perLine) || 1) * th;
      else
        return widgetsHeight + th;
    };
  }

  function estimateLineHeights(cm) {
    var doc = cm.doc, est = estimateHeight(cm);
    doc.iter(function(line) {
      var estHeight = est(line);
      if (estHeight != line.height) updateLineHeight(line, estHeight);
    });
  }

  function themeChanged(cm) {
    cm.display.wrapper.className = cm.display.wrapper.className.replace(/\s*cm-s-\S+/g, "") +
      cm.options.theme.replace(/(^|\s)\s*/g, " cm-s-");
    clearCaches(cm);
  }

  function guttersChanged(cm) {
    updateGutters(cm);
    regChange(cm);
    setTimeout(function(){alignHorizontally(cm);}, 20);
  }

  // Rebuild the gutter elements, ensure the margin to the left of the
  // code matches their width.
  function updateGutters(cm) {
    var gutters = cm.display.gutters, specs = cm.options.gutters;
    removeChildren(gutters);
    for (var i = 0; i < specs.length; ++i) {
      var gutterClass = specs[i];
      var gElt = gutters.appendChild(elt("div", null, "CodeMirror-gutter " + gutterClass));
      if (gutterClass == "CodeMirror-linenumbers") {
        cm.display.lineGutter = gElt;
        gElt.style.width = (cm.display.lineNumWidth || 1) + "px";
      }
    }
    gutters.style.display = i ? "" : "none";
    updateGutterSpace(cm);
  }

  function updateGutterSpace(cm) {
    var width = cm.display.gutters.offsetWidth;
    cm.display.sizer.style.marginLeft = width + "px";
  }

  // Compute the character length of a line, taking into account
  // collapsed ranges (see markText) that might hide parts, and join
  // other lines onto it.
  function lineLength(line) {
    if (line.height == 0) return 0;
    var len = line.text.length, merged, cur = line;
    while (merged = collapsedSpanAtStart(cur)) {
      var found = merged.find(0, true);
      cur = found.from.line;
      len += found.from.ch - found.to.ch;
    }
    cur = line;
    while (merged = collapsedSpanAtEnd(cur)) {
      var found = merged.find(0, true);
      len -= cur.text.length - found.from.ch;
      cur = found.to.line;
      len += cur.text.length - found.to.ch;
    }
    return len;
  }

  // Find the longest line in the document.
  function findMaxLine(cm) {
    var d = cm.display, doc = cm.doc;
    d.maxLine = getLine(doc, doc.first);
    d.maxLineLength = lineLength(d.maxLine);
    d.maxLineChanged = true;
    doc.iter(function(line) {
      var len = lineLength(line);
      if (len > d.maxLineLength) {
        d.maxLineLength = len;
        d.maxLine = line;
      }
    });
  }

  // Make sure the gutters options contains the element
  // "CodeMirror-linenumbers" when the lineNumbers option is true.
  function setGuttersForLineNumbers(options) {
    var found = indexOf(options.gutters, "CodeMirror-linenumbers");
    if (found == -1 && options.lineNumbers) {
      options.gutters = options.gutters.concat(["CodeMirror-linenumbers"]);
    } else if (found > -1 && !options.lineNumbers) {
      options.gutters = options.gutters.slice(0);
      options.gutters.splice(found, 1);
    }
  }

  // SCROLLBARS

  // Prepare DOM reads needed to update the scrollbars. Done in one
  // shot to minimize update/measure roundtrips.
  function measureForScrollbars(cm) {
    var d = cm.display, gutterW = d.gutters.offsetWidth;
    var docH = Math.round(cm.doc.height + paddingVert(cm.display));
    return {
      clientHeight: d.scroller.clientHeight,
      viewHeight: d.wrapper.clientHeight,
      scrollWidth: d.scroller.scrollWidth, clientWidth: d.scroller.clientWidth,
      viewWidth: d.wrapper.clientWidth,
      barLeft: cm.options.fixedGutter ? gutterW : 0,
      docHeight: docH,
      scrollHeight: docH + scrollGap(cm) + d.barHeight,
      nativeBarWidth: d.nativeBarWidth,
      gutterWidth: gutterW
    };
  }

  function NativeScrollbars(place, scroll, cm) {
    this.cm = cm;
    var vert = this.vert = elt("div", [elt("div", null, null, "min-width: 1px")], "CodeMirror-vscrollbar");
    var horiz = this.horiz = elt("div", [elt("div", null, null, "height: 100%; min-height: 1px")], "CodeMirror-hscrollbar");
    place(vert); place(horiz);

    on(vert, "scroll", function() {
      if (vert.clientHeight) scroll(vert.scrollTop, "vertical");
    });
    on(horiz, "scroll", function() {
      if (horiz.clientWidth) scroll(horiz.scrollLeft, "horizontal");
    });

    this.checkedZeroWidth = false;
    // Need to set a minimum width to see the scrollbar on IE7 (but must not set it on IE8).
    if (ie && ie_version < 8) this.horiz.style.minHeight = this.vert.style.minWidth = "18px";
  }

  NativeScrollbars.prototype = copyObj({
    update: function(measure) {
      var needsH = measure.scrollWidth > measure.clientWidth + 1;
      var needsV = measure.scrollHeight > measure.clientHeight + 1;
      var sWidth = measure.nativeBarWidth;

      if (needsV) {
        this.vert.style.display = "block";
        this.vert.style.bottom = needsH ? sWidth + "px" : "0";
        var totalHeight = measure.viewHeight - (needsH ? sWidth : 0);
        // A bug in IE8 can cause this value to be negative, so guard it.
        this.vert.firstChild.style.height =
          Math.max(0, measure.scrollHeight - measure.clientHeight + totalHeight) + "px";
      } else {
        this.vert.style.display = "";
        this.vert.firstChild.style.height = "0";
      }

      if (needsH) {
        this.horiz.style.display = "block";
        this.horiz.style.right = needsV ? sWidth + "px" : "0";
        this.horiz.style.left = measure.barLeft + "px";
        var totalWidth = measure.viewWidth - measure.barLeft - (needsV ? sWidth : 0);
        this.horiz.firstChild.style.width =
          (measure.scrollWidth - measure.clientWidth + totalWidth) + "px";
      } else {
        this.horiz.style.display = "";
        this.horiz.firstChild.style.width = "0";
      }

      if (!this.checkedZeroWidth && measure.clientHeight > 0) {
        if (sWidth == 0) this.zeroWidthHack();
        this.checkedZeroWidth = true;
      }

      return {right: needsV ? sWidth : 0, bottom: needsH ? sWidth : 0};
    },
    setScrollLeft: function(pos) {
      if (this.horiz.scrollLeft != pos) this.horiz.scrollLeft = pos;
      if (this.disableHoriz) this.enableZeroWidthBar(this.horiz, this.disableHoriz);
    },
    setScrollTop: function(pos) {
      if (this.vert.scrollTop != pos) this.vert.scrollTop = pos;
      if (this.disableVert) this.enableZeroWidthBar(this.vert, this.disableVert);
    },
    zeroWidthHack: function() {
      var w = mac && !mac_geMountainLion ? "12px" : "18px";
      this.horiz.style.height = this.vert.style.width = w;
      this.horiz.style.pointerEvents = this.vert.style.pointerEvents = "none";
      this.disableHoriz = new Delayed;
      this.disableVert = new Delayed;
    },
    enableZeroWidthBar: function(bar, delay) {
      bar.style.pointerEvents = "auto";
      function maybeDisable() {
        // To find out whether the scrollbar is still visible, we
        // check whether the element under the pixel in the bottom
        // left corner of the scrollbar box is the scrollbar box
        // itself (when the bar is still visible) or its filler child
        // (when the bar is hidden). If it is still visible, we keep
        // it enabled, if it's hidden, we disable pointer events.
        var box = bar.getBoundingClientRect();
        var elt = document.elementFromPoint(box.left + 1, box.bottom - 1);
        if (elt != bar) bar.style.pointerEvents = "none";
        else delay.set(1000, maybeDisable);
      }
      delay.set(1000, maybeDisable);
    },
    clear: function() {
      var parent = this.horiz.parentNode;
      parent.removeChild(this.horiz);
      parent.removeChild(this.vert);
    }
  }, NativeScrollbars.prototype);

  function NullScrollbars() {}

  NullScrollbars.prototype = copyObj({
    update: function() { return {bottom: 0, right: 0}; },
    setScrollLeft: function() {},
    setScrollTop: function() {},
    clear: function() {}
  }, NullScrollbars.prototype);

  CodeMirror.scrollbarModel = {"native": NativeScrollbars, "null": NullScrollbars};

  function initScrollbars(cm) {
    if (cm.display.scrollbars) {
      cm.display.scrollbars.clear();
      if (cm.display.scrollbars.addClass)
        rmClass(cm.display.wrapper, cm.display.scrollbars.addClass);
    }

    cm.display.scrollbars = new CodeMirror.scrollbarModel[cm.options.scrollbarStyle](function(node) {
      cm.display.wrapper.insertBefore(node, cm.display.scrollbarFiller);
      // Prevent clicks in the scrollbars from killing focus
      on(node, "mousedown", function() {
        if (cm.state.focused) setTimeout(function() { cm.display.input.focus(); }, 0);
      });
      node.setAttribute("cm-not-content", "true");
    }, function(pos, axis) {
      if (axis == "horizontal") setScrollLeft(cm, pos);
      else setScrollTop(cm, pos);
    }, cm);
    if (cm.display.scrollbars.addClass)
      addClass(cm.display.wrapper, cm.display.scrollbars.addClass);
  }

  function updateScrollbars(cm, measure) {
    if (!measure) measure = measureForScrollbars(cm);
    var startWidth = cm.display.barWidth, startHeight = cm.display.barHeight;
    updateScrollbarsInner(cm, measure);
    for (var i = 0; i < 4 && startWidth != cm.display.barWidth || startHeight != cm.display.barHeight; i++) {
      if (startWidth != cm.display.barWidth && cm.options.lineWrapping)
        updateHeightsInViewport(cm);
      updateScrollbarsInner(cm, measureForScrollbars(cm));
      startWidth = cm.display.barWidth; startHeight = cm.display.barHeight;
    }
  }

  // Re-synchronize the fake scrollbars with the actual size of the
  // content.
  function updateScrollbarsInner(cm, measure) {
    var d = cm.display;
    var sizes = d.scrollbars.update(measure);

    d.sizer.style.paddingRight = (d.barWidth = sizes.right) + "px";
    d.sizer.style.paddingBottom = (d.barHeight = sizes.bottom) + "px";
    d.heightForcer.style.borderBottom = sizes.bottom + "px solid transparent"

    if (sizes.right && sizes.bottom) {
      d.scrollbarFiller.style.display = "block";
      d.scrollbarFiller.style.height = sizes.bottom + "px";
      d.scrollbarFiller.style.width = sizes.right + "px";
    } else d.scrollbarFiller.style.display = "";
    if (sizes.bottom && cm.options.coverGutterNextToScrollbar && cm.options.fixedGutter) {
      d.gutterFiller.style.display = "block";
      d.gutterFiller.style.height = sizes.bottom + "px";
      d.gutterFiller.style.width = measure.gutterWidth + "px";
    } else d.gutterFiller.style.display = "";
  }

  // Compute the lines that are visible in a given viewport (defaults
  // the the current scroll position). viewport may contain top,
  // height, and ensure (see op.scrollToPos) properties.
  function visibleLines(display, doc, viewport) {
    var top = viewport && viewport.top != null ? Math.max(0, viewport.top) : display.scroller.scrollTop;
    top = Math.floor(top - paddingTop(display));
    var bottom = viewport && viewport.bottom != null ? viewport.bottom : top + display.wrapper.clientHeight;

    var from = lineAtHeight(doc, top), to = lineAtHeight(doc, bottom);
    // Ensure is a {from: {line, ch}, to: {line, ch}} object, and
    // forces those lines into the viewport (if possible).
    if (viewport && viewport.ensure) {
      var ensureFrom = viewport.ensure.from.line, ensureTo = viewport.ensure.to.line;
      if (ensureFrom < from) {
        from = ensureFrom;
        to = lineAtHeight(doc, heightAtLine(getLine(doc, ensureFrom)) + display.wrapper.clientHeight);
      } else if (Math.min(ensureTo, doc.lastLine()) >= to) {
        from = lineAtHeight(doc, heightAtLine(getLine(doc, ensureTo)) - display.wrapper.clientHeight);
        to = ensureTo;
      }
    }
    return {from: from, to: Math.max(to, from + 1)};
  }

  // LINE NUMBERS

  // Re-align line numbers and gutter marks to compensate for
  // horizontal scrolling.
  function alignHorizontally(cm) {
    var display = cm.display, view = display.view;
    if (!display.alignWidgets && (!display.gutters.firstChild || !cm.options.fixedGutter)) return;
    var comp = compensateForHScroll(display) - display.scroller.scrollLeft + cm.doc.scrollLeft;
    var gutterW = display.gutters.offsetWidth, left = comp + "px";
    for (var i = 0; i < view.length; i++) if (!view[i].hidden) {
      if (cm.options.fixedGutter && view[i].gutter)
        view[i].gutter.style.left = left;
      var align = view[i].alignable;
      if (align) for (var j = 0; j < align.length; j++)
        align[j].style.left = left;
    }
    if (cm.options.fixedGutter)
      display.gutters.style.left = (comp + gutterW) + "px";
  }

  // Used to ensure that the line number gutter is still the right
  // size for the current document size. Returns true when an update
  // is needed.
  function maybeUpdateLineNumberWidth(cm) {
    if (!cm.options.lineNumbers) return false;
    var doc = cm.doc, last = lineNumberFor(cm.options, doc.first + doc.size - 1), display = cm.display;
    if (last.length != display.lineNumChars) {
      var test = display.measure.appendChild(elt("div", [elt("div", last)],
                                                 "CodeMirror-linenumber CodeMirror-gutter-elt"));
      var innerW = test.firstChild.offsetWidth, padding = test.offsetWidth - innerW;
      display.lineGutter.style.width = "";
      display.lineNumInnerWidth = Math.max(innerW, display.lineGutter.offsetWidth - padding) + 1;
      display.lineNumWidth = display.lineNumInnerWidth + padding;
      display.lineNumChars = display.lineNumInnerWidth ? last.length : -1;
      display.lineGutter.style.width = display.lineNumWidth + "px";
      updateGutterSpace(cm);
      return true;
    }
    return false;
  }

  function lineNumberFor(options, i) {
    return String(options.lineNumberFormatter(i + options.firstLineNumber));
  }

  // Computes display.scroller.scrollLeft + display.gutters.offsetWidth,
  // but using getBoundingClientRect to get a sub-pixel-accurate
  // result.
  function compensateForHScroll(display) {
    return display.scroller.getBoundingClientRect().left - display.sizer.getBoundingClientRect().left;
  }

  // DISPLAY DRAWING

  function DisplayUpdate(cm, viewport, force) {
    var display = cm.display;

    this.viewport = viewport;
    // Store some values that we'll need later (but don't want to force a relayout for)
    this.visible = visibleLines(display, cm.doc, viewport);
    this.editorIsHidden = !display.wrapper.offsetWidth;
    this.wrapperHeight = display.wrapper.clientHeight;
    this.wrapperWidth = display.wrapper.clientWidth;
    this.oldDisplayWidth = displayWidth(cm);
    this.force = force;
    this.dims = getDimensions(cm);
    this.events = [];
  }

  DisplayUpdate.prototype.signal = function(emitter, type) {
    if (hasHandler(emitter, type))
      this.events.push(arguments);
  };
  DisplayUpdate.prototype.finish = function() {
    for (var i = 0; i < this.events.length; i++)
      signal.apply(null, this.events[i]);
  };

  function maybeClipScrollbars(cm) {
    var display = cm.display;
    if (!display.scrollbarsClipped && display.scroller.offsetWidth) {
      display.nativeBarWidth = display.scroller.offsetWidth - display.scroller.clientWidth;
      display.heightForcer.style.height = scrollGap(cm) + "px";
      display.sizer.style.marginBottom = -display.nativeBarWidth + "px";
      display.sizer.style.borderRightWidth = scrollGap(cm) + "px";
      display.scrollbarsClipped = true;
    }
  }

  // Does the actual updating of the line display. Bails out
  // (returning false) when there is nothing to be done and forced is
  // false.
  function updateDisplayIfNeeded(cm, update) {
    var display = cm.display, doc = cm.doc;

    if (update.editorIsHidden) {
      resetView(cm);
      return false;
    }

    // Bail out if the visible area is already rendered and nothing changed.
    if (!update.force &&
        update.visible.from >= display.viewFrom && update.visible.to <= display.viewTo &&
        (display.updateLineNumbers == null || display.updateLineNumbers >= display.viewTo) &&
        display.renderedView == display.view && countDirtyView(cm) == 0)
      return false;

    if (maybeUpdateLineNumberWidth(cm)) {
      resetView(cm);
      update.dims = getDimensions(cm);
    }

    // Compute a suitable new viewport (from & to)
    var end = doc.first + doc.size;
    var from = Math.max(update.visible.from - cm.options.viewportMargin, doc.first);
    var to = Math.min(end, update.visible.to + cm.options.viewportMargin);
    if (display.viewFrom < from && from - display.viewFrom < 20) from = Math.max(doc.first, display.viewFrom);
    if (display.viewTo > to && display.viewTo - to < 20) to = Math.min(end, display.viewTo);
    if (sawCollapsedSpans) {
      from = visualLineNo(cm.doc, from);
      to = visualLineEndNo(cm.doc, to);
    }

    var different = from != display.viewFrom || to != display.viewTo ||
      display.lastWrapHeight != update.wrapperHeight || display.lastWrapWidth != update.wrapperWidth;
    adjustView(cm, from, to);

    display.viewOffset = heightAtLine(getLine(cm.doc, display.viewFrom));
    // Position the mover div to align with the current scroll position
    cm.display.mover.style.top = display.viewOffset + "px";

    var toUpdate = countDirtyView(cm);
    if (!different && toUpdate == 0 && !update.force && display.renderedView == display.view &&
        (display.updateLineNumbers == null || display.updateLineNumbers >= display.viewTo))
      return false;

    // For big changes, we hide the enclosing element during the
    // update, since that speeds up the operations on most browsers.
    var focused = activeElt();
    if (toUpdate > 4) display.lineDiv.style.display = "none";
    patchDisplay(cm, display.updateLineNumbers, update.dims);
    if (toUpdate > 4) display.lineDiv.style.display = "";
    display.renderedView = display.view;
    // There might have been a widget with a focused element that got
    // hidden or updated, if so re-focus it.
    if (focused && activeElt() != focused && focused.offsetHeight) focused.focus();

    // Prevent selection and cursors from interfering with the scroll
    // width and height.
    removeChildren(display.cursorDiv);
    removeChildren(display.selectionDiv);
    display.gutters.style.height = display.sizer.style.minHeight = 0;

    if (different) {
      display.lastWrapHeight = update.wrapperHeight;
      display.lastWrapWidth = update.wrapperWidth;
      startWorker(cm, 400);
    }

    display.updateLineNumbers = null;

    return true;
  }

  function postUpdateDisplay(cm, update) {
    var viewport = update.viewport;

    for (var first = true;; first = false) {
      if (!first || !cm.options.lineWrapping || update.oldDisplayWidth == displayWidth(cm)) {
        // Clip forced viewport to actual scrollable area.
        if (viewport && viewport.top != null)
          viewport = {top: Math.min(cm.doc.height + paddingVert(cm.display) - displayHeight(cm), viewport.top)};
        // Updated line heights might result in the drawn area not
        // actually covering the viewport. Keep looping until it does.
        update.visible = visibleLines(cm.display, cm.doc, viewport);
        if (update.visible.from >= cm.display.viewFrom && update.visible.to <= cm.display.viewTo)
          break;
      }
      if (!updateDisplayIfNeeded(cm, update)) break;
      updateHeightsInViewport(cm);
      var barMeasure = measureForScrollbars(cm);
      updateSelection(cm);
      updateScrollbars(cm, barMeasure);
      setDocumentHeight(cm, barMeasure);
    }

    update.signal(cm, "update", cm);
    if (cm.display.viewFrom != cm.display.reportedViewFrom || cm.display.viewTo != cm.display.reportedViewTo) {
      update.signal(cm, "viewportChange", cm, cm.display.viewFrom, cm.display.viewTo);
      cm.display.reportedViewFrom = cm.display.viewFrom; cm.display.reportedViewTo = cm.display.viewTo;
    }
  }

  function updateDisplaySimple(cm, viewport) {
    var update = new DisplayUpdate(cm, viewport);
    if (updateDisplayIfNeeded(cm, update)) {
      updateHeightsInViewport(cm);
      postUpdateDisplay(cm, update);
      var barMeasure = measureForScrollbars(cm);
      updateSelection(cm);
      updateScrollbars(cm, barMeasure);
      setDocumentHeight(cm, barMeasure);
      update.finish();
    }
  }

  function setDocumentHeight(cm, measure) {
    cm.display.sizer.style.minHeight = measure.docHeight + "px";
    cm.display.heightForcer.style.top = measure.docHeight + "px";
    cm.display.gutters.style.height = (measure.docHeight + cm.display.barHeight + scrollGap(cm)) + "px";
  }

  // Read the actual heights of the rendered lines, and update their
  // stored heights to match.
  function updateHeightsInViewport(cm) {
    var display = cm.display;
    var prevBottom = display.lineDiv.offsetTop;
    for (var i = 0; i < display.view.length; i++) {
      var cur = display.view[i], height;
      if (cur.hidden) continue;
      if (ie && ie_version < 8) {
        var bot = cur.node.offsetTop + cur.node.offsetHeight;
        height = bot - prevBottom;
        prevBottom = bot;
      } else {
        var box = cur.node.getBoundingClientRect();
        height = box.bottom - box.top;
      }
      var diff = cur.line.height - height;
      if (height < 2) height = textHeight(display);
      if (diff > .001 || diff < -.001) {
        updateLineHeight(cur.line, height);
        updateWidgetHeight(cur.line);
        if (cur.rest) for (var j = 0; j < cur.rest.length; j++)
          updateWidgetHeight(cur.rest[j]);
      }
    }
  }

  // Read and store the height of line widgets associated with the
  // given line.
  function updateWidgetHeight(line) {
    if (line.widgets) for (var i = 0; i < line.widgets.length; ++i)
      line.widgets[i].height = line.widgets[i].node.parentNode.offsetHeight;
  }

  // Do a bulk-read of the DOM positions and sizes needed to draw the
  // view, so that we don't interleave reading and writing to the DOM.
  function getDimensions(cm) {
    var d = cm.display, left = {}, width = {};
    var gutterLeft = d.gutters.clientLeft;
    for (var n = d.gutters.firstChild, i = 0; n; n = n.nextSibling, ++i) {
      left[cm.options.gutters[i]] = n.offsetLeft + n.clientLeft + gutterLeft;
      width[cm.options.gutters[i]] = n.clientWidth;
    }
    return {fixedPos: compensateForHScroll(d),
            gutterTotalWidth: d.gutters.offsetWidth,
            gutterLeft: left,
            gutterWidth: width,
            wrapperWidth: d.wrapper.clientWidth};
  }

  // Sync the actual display DOM structure with display.view, removing
  // nodes for lines that are no longer in view, and creating the ones
  // that are not there yet, and updating the ones that are out of
  // date.
  function patchDisplay(cm, updateNumbersFrom, dims) {
    var display = cm.display, lineNumbers = cm.options.lineNumbers;
    var container = display.lineDiv, cur = container.firstChild;

    function rm(node) {
      var next = node.nextSibling;
      // Works around a throw-scroll bug in OS X Webkit
      if (webkit && mac && cm.display.currentWheelTarget == node)
        node.style.display = "none";
      else
        node.parentNode.removeChild(node);
      return next;
    }

    var view = display.view, lineN = display.viewFrom;
    // Loop over the elements in the view, syncing cur (the DOM nodes
    // in display.lineDiv) with the view as we go.
    for (var i = 0; i < view.length; i++) {
      var lineView = view[i];
      if (lineView.hidden) {
      } else if (!lineView.node || lineView.node.parentNode != container) { // Not drawn yet
        var node = buildLineElement(cm, lineView, lineN, dims);
        container.insertBefore(node, cur);
      } else { // Already drawn
        while (cur != lineView.node) cur = rm(cur);
        var updateNumber = lineNumbers && updateNumbersFrom != null &&
          updateNumbersFrom <= lineN && lineView.lineNumber;
        if (lineView.changes) {
          if (indexOf(lineView.changes, "gutter") > -1) updateNumber = false;
          updateLineForChanges(cm, lineView, lineN, dims);
        }
        if (updateNumber) {
          removeChildren(lineView.lineNumber);
          lineView.lineNumber.appendChild(document.createTextNode(lineNumberFor(cm.options, lineN)));
        }
        cur = lineView.node.nextSibling;
      }
      lineN += lineView.size;
    }
    while (cur) cur = rm(cur);
  }

  // When an aspect of a line changes, a string is added to
  // lineView.changes. This updates the relevant part of the line's
  // DOM structure.
  function updateLineForChanges(cm, lineView, lineN, dims) {
    for (var j = 0; j < lineView.changes.length; j++) {
      var type = lineView.changes[j];
      if (type == "text") updateLineText(cm, lineView);
      else if (type == "gutter") updateLineGutter(cm, lineView, lineN, dims);
      else if (type == "class") updateLineClasses(lineView);
      else if (type == "widget") updateLineWidgets(cm, lineView, dims);
    }
    lineView.changes = null;
  }

  // Lines with gutter elements, widgets or a background class need to
  // be wrapped, and have the extra elements added to the wrapper div
  function ensureLineWrapped(lineView) {
    if (lineView.node == lineView.text) {
      lineView.node = elt("div", null, null, "position: relative");
      if (lineView.text.parentNode)
        lineView.text.parentNode.replaceChild(lineView.node, lineView.text);
      lineView.node.appendChild(lineView.text);
      if (ie && ie_version < 8) lineView.node.style.zIndex = 2;
    }
    return lineView.node;
  }

  function updateLineBackground(lineView) {
    var cls = lineView.bgClass ? lineView.bgClass + " " + (lineView.line.bgClass || "") : lineView.line.bgClass;
    if (cls) cls += " CodeMirror-linebackground";
    if (lineView.background) {
      if (cls) lineView.background.className = cls;
      else { lineView.background.parentNode.removeChild(lineView.background); lineView.background = null; }
    } else if (cls) {
      var wrap = ensureLineWrapped(lineView);
      lineView.background = wrap.insertBefore(elt("div", null, cls), wrap.firstChild);
    }
  }

  // Wrapper around buildLineContent which will reuse the structure
  // in display.externalMeasured when possible.
  function getLineContent(cm, lineView) {
    var ext = cm.display.externalMeasured;
    if (ext && ext.line == lineView.line) {
      cm.display.externalMeasured = null;
      lineView.measure = ext.measure;
      return ext.built;
    }
    return buildLineContent(cm, lineView);
  }

  // Redraw the line's text. Interacts with the background and text
  // classes because the mode may output tokens that influence these
  // classes.
  function updateLineText(cm, lineView) {
    var cls = lineView.text.className;
    var built = getLineContent(cm, lineView);
    if (lineView.text == lineView.node) lineView.node = built.pre;
    lineView.text.parentNode.replaceChild(built.pre, lineView.text);
    lineView.text = built.pre;
    if (built.bgClass != lineView.bgClass || built.textClass != lineView.textClass) {
      lineView.bgClass = built.bgClass;
      lineView.textClass = built.textClass;
      updateLineClasses(lineView);
    } else if (cls) {
      lineView.text.className = cls;
    }
  }

  function updateLineClasses(lineView) {
    updateLineBackground(lineView);
    if (lineView.line.wrapClass)
      ensureLineWrapped(lineView).className = lineView.line.wrapClass;
    else if (lineView.node != lineView.text)
      lineView.node.className = "";
    var textClass = lineView.textClass ? lineView.textClass + " " + (lineView.line.textClass || "") : lineView.line.textClass;
    lineView.text.className = textClass || "";
  }

  function updateLineGutter(cm, lineView, lineN, dims) {
    if (lineView.gutter) {
      lineView.node.removeChild(lineView.gutter);
      lineView.gutter = null;
    }
    if (lineView.gutterBackground) {
      lineView.node.removeChild(lineView.gutterBackground);
      lineView.gutterBackground = null;
    }
    if (lineView.line.gutterClass) {
      var wrap = ensureLineWrapped(lineView);
      lineView.gutterBackground = elt("div", null, "CodeMirror-gutter-background " + lineView.line.gutterClass,
                                      "left: " + (cm.options.fixedGutter ? dims.fixedPos : -dims.gutterTotalWidth) +
                                      "px; width: " + dims.gutterTotalWidth + "px");
      wrap.insertBefore(lineView.gutterBackground, lineView.text);
    }
    var markers = lineView.line.gutterMarkers;
    if (cm.options.lineNumbers || markers) {
      var wrap = ensureLineWrapped(lineView);
      var gutterWrap = lineView.gutter = elt("div", null, "CodeMirror-gutter-wrapper", "left: " +
                                             (cm.options.fixedGutter ? dims.fixedPos : -dims.gutterTotalWidth) + "px");
      cm.display.input.setUneditable(gutterWrap);
      wrap.insertBefore(gutterWrap, lineView.text);
      if (lineView.line.gutterClass)
        gutterWrap.className += " " + lineView.line.gutterClass;
      if (cm.options.lineNumbers && (!markers || !markers["CodeMirror-linenumbers"]))
        lineView.lineNumber = gutterWrap.appendChild(
          elt("div", lineNumberFor(cm.options, lineN),
              "CodeMirror-linenumber CodeMirror-gutter-elt",
              "left: " + dims.gutterLeft["CodeMirror-linenumbers"] + "px; width: "
              + cm.display.lineNumInnerWidth + "px"));
      if (markers) for (var k = 0; k < cm.options.gutters.length; ++k) {
        var id = cm.options.gutters[k], found = markers.hasOwnProperty(id) && markers[id];
        if (found)
          gutterWrap.appendChild(elt("div", [found], "CodeMirror-gutter-elt", "left: " +
                                     dims.gutterLeft[id] + "px; width: " + dims.gutterWidth[id] + "px"));
      }
    }
  }

  function updateLineWidgets(cm, lineView, dims) {
    if (lineView.alignable) lineView.alignable = null;
    for (var node = lineView.node.firstChild, next; node; node = next) {
      var next = node.nextSibling;
      if (node.className == "CodeMirror-linewidget")
        lineView.node.removeChild(node);
    }
    insertLineWidgets(cm, lineView, dims);
  }

  // Build a line's DOM representation from scratch
  function buildLineElement(cm, lineView, lineN, dims) {
    var built = getLineContent(cm, lineView);
    lineView.text = lineView.node = built.pre;
    if (built.bgClass) lineView.bgClass = built.bgClass;
    if (built.textClass) lineView.textClass = built.textClass;

    updateLineClasses(lineView);
    updateLineGutter(cm, lineView, lineN, dims);
    insertLineWidgets(cm, lineView, dims);
    return lineView.node;
  }

  // A lineView may contain multiple logical lines (when merged by
  // collapsed spans). The widgets for all of them need to be drawn.
  function insertLineWidgets(cm, lineView, dims) {
    insertLineWidgetsFor(cm, lineView.line, lineView, dims, true);
    if (lineView.rest) for (var i = 0; i < lineView.rest.length; i++)
      insertLineWidgetsFor(cm, lineView.rest[i], lineView, dims, false);
  }

  function insertLineWidgetsFor(cm, line, lineView, dims, allowAbove) {
    if (!line.widgets) return;
    var wrap = ensureLineWrapped(lineView);
    for (var i = 0, ws = line.widgets; i < ws.length; ++i) {
      var widget = ws[i], node = elt("div", [widget.node], "CodeMirror-linewidget");
      if (!widget.handleMouseEvents) node.setAttribute("cm-ignore-events", "true");
      positionLineWidget(widget, node, lineView, dims);
      cm.display.input.setUneditable(node);
      if (allowAbove && widget.above)
        wrap.insertBefore(node, lineView.gutter || lineView.text);
      else
        wrap.appendChild(node);
      signalLater(widget, "redraw");
    }
  }

  function positionLineWidget(widget, node, lineView, dims) {
    if (widget.noHScroll) {
      (lineView.alignable || (lineView.alignable = [])).push(node);
      var width = dims.wrapperWidth;
      node.style.left = dims.fixedPos + "px";
      if (!widget.coverGutter) {
        width -= dims.gutterTotalWidth;
        node.style.paddingLeft = dims.gutterTotalWidth + "px";
      }
      node.style.width = width + "px";
    }
    if (widget.coverGutter) {
      node.style.zIndex = 5;
      node.style.position = "relative";
      if (!widget.noHScroll) node.style.marginLeft = -dims.gutterTotalWidth + "px";
    }
  }

  // POSITION OBJECT

  // A Pos instance represents a position within the text.
  var Pos = CodeMirror.Pos = function(line, ch) {
    if (!(this instanceof Pos)) return new Pos(line, ch);
    this.line = line; this.ch = ch;
  };

  // Compare two positions, return 0 if they are the same, a negative
  // number when a is less, and a positive number otherwise.
  var cmp = CodeMirror.cmpPos = function(a, b) { return a.line - b.line || a.ch - b.ch; };

  function copyPos(x) {return Pos(x.line, x.ch);}
  function maxPos(a, b) { return cmp(a, b) < 0 ? b : a; }
  function minPos(a, b) { return cmp(a, b) < 0 ? a : b; }

  // INPUT HANDLING

  function ensureFocus(cm) {
    if (!cm.state.focused) { cm.display.input.focus(); onFocus(cm); }
  }

  // This will be set to an array of strings when copying, so that,
  // when pasting, we know what kind of selections the copied text
  // was made out of.
  var lastCopied = null;

  function applyTextInput(cm, inserted, deleted, sel, origin) {
    var doc = cm.doc;
    cm.display.shift = false;
    if (!sel) sel = doc.sel;

    var paste = cm.state.pasteIncoming || origin == "paste";
    var textLines = doc.splitLines(inserted), multiPaste = null;
    // When pasing N lines into N selections, insert one line per selection
    if (paste && sel.ranges.length > 1) {
      if (lastCopied && lastCopied.join("\n") == inserted) {
        if (sel.ranges.length % lastCopied.length == 0) {
          multiPaste = [];
          for (var i = 0; i < lastCopied.length; i++)
            multiPaste.push(doc.splitLines(lastCopied[i]));
        }
      } else if (textLines.length == sel.ranges.length) {
        multiPaste = map(textLines, function(l) { return [l]; });
      }
    }

    // Normal behavior is to insert the new text into every selection
    for (var i = sel.ranges.length - 1; i >= 0; i--) {
      var range = sel.ranges[i];
      var from = range.from(), to = range.to();
      if (range.empty()) {
        if (deleted && deleted > 0) // Handle deletion
          from = Pos(from.line, from.ch - deleted);
        else if (cm.state.overwrite && !paste) // Handle overwrite
          to = Pos(to.line, Math.min(getLine(doc, to.line).text.length, to.ch + lst(textLines).length));
      }
      var updateInput = cm.curOp.updateInput;
      var changeEvent = {from: from, to: to, text: multiPaste ? multiPaste[i % multiPaste.length] : textLines,
                         origin: origin || (paste ? "paste" : cm.state.cutIncoming ? "cut" : "+input")};
      makeChange(cm.doc, changeEvent);
      signalLater(cm, "inputRead", cm, changeEvent);
    }
    if (inserted && !paste)
      triggerElectric(cm, inserted);

    ensureCursorVisible(cm);
    cm.curOp.updateInput = updateInput;
    cm.curOp.typing = true;
    cm.state.pasteIncoming = cm.state.cutIncoming = false;
  }

  function handlePaste(e, cm) {
    var pasted = e.clipboardData && e.clipboardData.getData("text/plain");
    if (pasted) {
      e.preventDefault();
      if (!cm.isReadOnly() && !cm.options.disableInput)
        runInOp(cm, function() { applyTextInput(cm, pasted, 0, null, "paste"); });
      return true;
    }
  }

  function triggerElectric(cm, inserted) {
    // When an 'electric' character is inserted, immediately trigger a reindent
    if (!cm.options.electricChars || !cm.options.smartIndent) return;
    var sel = cm.doc.sel;

    for (var i = sel.ranges.length - 1; i >= 0; i--) {
      var range = sel.ranges[i];
      if (range.head.ch > 100 || (i && sel.ranges[i - 1].head.line == range.head.line)) continue;
      var mode = cm.getModeAt(range.head);
      var indented = false;
      if (mode.electricChars) {
        for (var j = 0; j < mode.electricChars.length; j++)
          if (inserted.indexOf(mode.electricChars.charAt(j)) > -1) {
            indented = indentLine(cm, range.head.line, "smart");
            break;
          }
      } else if (mode.electricInput) {
        if (mode.electricInput.test(getLine(cm.doc, range.head.line).text.slice(0, range.head.ch)))
          indented = indentLine(cm, range.head.line, "smart");
      }
      if (indented) signalLater(cm, "electricInput", cm, range.head.line);
    }
  }

  function copyableRanges(cm) {
    var text = [], ranges = [];
    for (var i = 0; i < cm.doc.sel.ranges.length; i++) {
      var line = cm.doc.sel.ranges[i].head.line;
      var lineRange = {anchor: Pos(line, 0), head: Pos(line + 1, 0)};
      ranges.push(lineRange);
      text.push(cm.getRange(lineRange.anchor, lineRange.head));
    }
    return {text: text, ranges: ranges};
  }

  function disableBrowserMagic(field) {
    field.setAttribute("autocorrect", "off");
    field.setAttribute("autocapitalize", "off");
    field.setAttribute("spellcheck", "false");
  }

  // TEXTAREA INPUT STYLE

  function TextareaInput(cm) {
    this.cm = cm;
    // See input.poll and input.reset
    this.prevInput = "";

    // Flag that indicates whether we expect input to appear real soon
    // now (after some event like 'keypress' or 'input') and are
    // polling intensively.
    this.pollingFast = false;
    // Self-resetting timeout for the poller
    this.polling = new Delayed();
    // Tracks when input.reset has punted to just putting a short
    // string into the textarea instead of the full selection.
    this.inaccurateSelection = false;
    // Used to work around IE issue with selection being forgotten when focus moves away from textarea
    this.hasSelection = false;
    this.composing = null;
  };

  function hiddenTextarea() {
    var te = elt("textarea", null, null, "position: absolute; padding: 0; width: 1px; height: 1em; outline: none");
    var div = elt("div", [te], null, "overflow: hidden; position: relative; width: 3px; height: 0px;");
    // The textarea is kept positioned near the cursor to prevent the
    // fact that it'll be scrolled into view on input from scrolling
    // our fake cursor out of view. On webkit, when wrap=off, paste is
    // very slow. So make the area wide instead.
    if (webkit) te.style.width = "1000px";
    else te.setAttribute("wrap", "off");
    // If border: 0; -- iOS fails to open keyboard (issue #1287)
    if (ios) te.style.border = "1px solid black";
    disableBrowserMagic(te);
    return div;
  }

  TextareaInput.prototype = copyObj({
    init: function(display) {
      var input = this, cm = this.cm;

      // Wraps and hides input textarea
      var div = this.wrapper = hiddenTextarea();
      // The semihidden textarea that is focused when the editor is
      // focused, and receives input.
      var te = this.textarea = div.firstChild;
      display.wrapper.insertBefore(div, display.wrapper.firstChild);

      // Needed to hide big blue blinking cursor on Mobile Safari (doesn't seem to work in iOS 8 anymore)
      if (ios) te.style.width = "0px";

      on(te, "input", function() {
        if (ie && ie_version >= 9 && input.hasSelection) input.hasSelection = null;
        input.poll();
      });

      on(te, "paste", function(e) {
        if (signalDOMEvent(cm, e) || handlePaste(e, cm)) return

        cm.state.pasteIncoming = true;
        input.fastPoll();
      });

      function prepareCopyCut(e) {
        if (signalDOMEvent(cm, e)) return
        if (cm.somethingSelected()) {
          lastCopied = cm.getSelections();
          if (input.inaccurateSelection) {
            input.prevInput = "";
            input.inaccurateSelection = false;
            te.value = lastCopied.join("\n");
            selectInput(te);
          }
        } else if (!cm.options.lineWiseCopyCut) {
          return;
        } else {
          var ranges = copyableRanges(cm);
          lastCopied = ranges.text;
          if (e.type == "cut") {
            cm.setSelections(ranges.ranges, null, sel_dontScroll);
          } else {
            input.prevInput = "";
            te.value = ranges.text.join("\n");
            selectInput(te);
          }
        }
        if (e.type == "cut") cm.state.cutIncoming = true;
      }
      on(te, "cut", prepareCopyCut);
      on(te, "copy", prepareCopyCut);

      on(display.scroller, "paste", function(e) {
        if (eventInWidget(display, e) || signalDOMEvent(cm, e)) return;
        cm.state.pasteIncoming = true;
        input.focus();
      });

      // Prevent normal selection in the editor (we handle our own)
      on(display.lineSpace, "selectstart", function(e) {
        if (!eventInWidget(display, e)) e_preventDefault(e);
      });

      on(te, "compositionstart", function() {
        var start = cm.getCursor("from");
        if (input.composing) input.composing.range.clear()
        input.composing = {
          start: start,
          range: cm.markText(start, cm.getCursor("to"), {className: "CodeMirror-composing"})
        };
      });
      on(te, "compositionend", function() {
        if (input.composing) {
          input.poll();
          input.composing.range.clear();
          input.composing = null;
        }
      });
    },

    prepareSelection: function() {
      // Redraw the selection and/or cursor
      var cm = this.cm, display = cm.display, doc = cm.doc;
      var result = prepareSelection(cm);

      // Move the hidden textarea near the cursor to prevent scrolling artifacts
      if (cm.options.moveInputWithCursor) {
        var headPos = cursorCoords(cm, doc.sel.primary().head, "div");
        var wrapOff = display.wrapper.getBoundingClientRect(), lineOff = display.lineDiv.getBoundingClientRect();
        result.teTop = Math.max(0, Math.min(display.wrapper.clientHeight - 10,
                                            headPos.top + lineOff.top - wrapOff.top));
        result.teLeft = Math.max(0, Math.min(display.wrapper.clientWidth - 10,
                                             headPos.left + lineOff.left - wrapOff.left));
      }

      return result;
    },

    showSelection: function(drawn) {
      var cm = this.cm, display = cm.display;
      removeChildrenAndAdd(display.cursorDiv, drawn.cursors);
      removeChildrenAndAdd(display.selectionDiv, drawn.selection);
      if (drawn.teTop != null) {
        this.wrapper.style.top = drawn.teTop + "px";
        this.wrapper.style.left = drawn.teLeft + "px";
      }
    },

    // Reset the input to correspond to the selection (or to be empty,
    // when not typing and nothing is selected)
    reset: function(typing) {
      if (this.contextMenuPending) return;
      var minimal, selected, cm = this.cm, doc = cm.doc;
      if (cm.somethingSelected()) {
        this.prevInput = "";
        var range = doc.sel.primary();
        minimal = hasCopyEvent &&
          (range.to().line - range.from().line > 100 || (selected = cm.getSelection()).length > 1000);
        var content = minimal ? "-" : selected || cm.getSelection();
        this.textarea.value = content;
        if (cm.state.focused) selectInput(this.textarea);
        if (ie && ie_version >= 9) this.hasSelection = content;
      } else if (!typing) {
        this.prevInput = this.textarea.value = "";
        if (ie && ie_version >= 9) this.hasSelection = null;
      }
      this.inaccurateSelection = minimal;
    },

    getField: function() { return this.textarea; },

    supportsTouch: function() { return false; },

    focus: function() {
      if (this.cm.options.readOnly != "nocursor" && (!mobile || activeElt() != this.textarea)) {
        try { this.textarea.focus(); }
        catch (e) {} // IE8 will throw if the textarea is display: none or not in DOM
      }
    },

    blur: function() { this.textarea.blur(); },

    resetPosition: function() {
      this.wrapper.style.top = this.wrapper.style.left = 0;
    },

    receivedFocus: function() { this.slowPoll(); },

    // Poll for input changes, using the normal rate of polling. This
    // runs as long as the editor is focused.
    slowPoll: function() {
      var input = this;
      if (input.pollingFast) return;
      input.polling.set(this.cm.options.pollInterval, function() {
        input.poll();
        if (input.cm.state.focused) input.slowPoll();
      });
    },

    // When an event has just come in that is likely to add or change
    // something in the input textarea, we poll faster, to ensure that
    // the change appears on the screen quickly.
    fastPoll: function() {
      var missed = false, input = this;
      input.pollingFast = true;
      function p() {
        var changed = input.poll();
        if (!changed && !missed) {missed = true; input.polling.set(60, p);}
        else {input.pollingFast = false; input.slowPoll();}
      }
      input.polling.set(20, p);
    },

    // Read input from the textarea, and update the document to match.
    // When something is selected, it is present in the textarea, and
    // selected (unless it is huge, in which case a placeholder is
    // used). When nothing is selected, the cursor sits after previously
    // seen text (can be empty), which is stored in prevInput (we must
    // not reset the textarea when typing, because that breaks IME).
    poll: function() {
      var cm = this.cm, input = this.textarea, prevInput = this.prevInput;
      // Since this is called a *lot*, try to bail out as cheaply as
      // possible when it is clear that nothing happened. hasSelection
      // will be the case when there is a lot of text in the textarea,
      // in which case reading its value would be expensive.
      if (this.contextMenuPending || !cm.state.focused ||
          (hasSelection(input) && !prevInput && !this.composing) ||
          cm.isReadOnly() || cm.options.disableInput || cm.state.keySeq)
        return false;

      var text = input.value;
      // If nothing changed, bail.
      if (text == prevInput && !cm.somethingSelected()) return false;
      // Work around nonsensical selection resetting in IE9/10, and
      // inexplicable appearance of private area unicode characters on
      // some key combos in Mac (#2689).
      if (ie && ie_version >= 9 && this.hasSelection === text ||
          mac && /[\uf700-\uf7ff]/.test(text)) {
        cm.display.input.reset();
        return false;
      }

      if (cm.doc.sel == cm.display.selForContextMenu) {
        var first = text.charCodeAt(0);
        if (first == 0x200b && !prevInput) prevInput = "\u200b";
        if (first == 0x21da) { this.reset(); return this.cm.execCommand("undo"); }
      }
      // Find the part of the input that is actually new
      var same = 0, l = Math.min(prevInput.length, text.length);
      while (same < l && prevInput.charCodeAt(same) == text.charCodeAt(same)) ++same;

      var self = this;
      runInOp(cm, function() {
        applyTextInput(cm, text.slice(same), prevInput.length - same,
                       null, self.composing ? "*compose" : null);

        // Don't leave long text in the textarea, since it makes further polling slow
        if (text.length > 1000 || text.indexOf("\n") > -1) input.value = self.prevInput = "";
        else self.prevInput = text;

        if (self.composing) {
          self.composing.range.clear();
          self.composing.range = cm.markText(self.composing.start, cm.getCursor("to"),
                                             {className: "CodeMirror-composing"});
        }
      });
      return true;
    },

    ensurePolled: function() {
      if (this.pollingFast && this.poll()) this.pollingFast = false;
    },

    onKeyPress: function() {
      if (ie && ie_version >= 9) this.hasSelection = null;
      this.fastPoll();
    },

    onContextMenu: function(e) {
      var input = this, cm = input.cm, display = cm.display, te = input.textarea;
      var pos = posFromMouse(cm, e), scrollPos = display.scroller.scrollTop;
      if (!pos || presto) return; // Opera is difficult.

      // Reset the current text selection only if the click is done outside of the selection
      // and 'resetSelectionOnContextMenu' option is true.
      var reset = cm.options.resetSelectionOnContextMenu;
      if (reset && cm.doc.sel.contains(pos) == -1)
        operation(cm, setSelection)(cm.doc, simpleSelection(pos), sel_dontScroll);

      var oldCSS = te.style.cssText, oldWrapperCSS = input.wrapper.style.cssText;
      input.wrapper.style.cssText = "position: absolute"
      var wrapperBox = input.wrapper.getBoundingClientRect()
      te.style.cssText = "position: absolute; width: 30px; height: 30px; top: " + (e.clientY - wrapperBox.top - 5) +
        "px; left: " + (e.clientX - wrapperBox.left - 5) + "px; z-index: 1000; background: " +
        (ie ? "rgba(255, 255, 255, .05)" : "transparent") +
        "; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";
      if (webkit) var oldScrollY = window.scrollY; // Work around Chrome issue (#2712)
      display.input.focus();
      if (webkit) window.scrollTo(null, oldScrollY);
      display.input.reset();
      // Adds "Select all" to context menu in FF
      if (!cm.somethingSelected()) te.value = input.prevInput = " ";
      input.contextMenuPending = true;
      display.selForContextMenu = cm.doc.sel;
      clearTimeout(display.detectingSelectAll);

      // Select-all will be greyed out if there's nothing to select, so
      // this adds a zero-width space so that we can later check whether
      // it got selected.
      function prepareSelectAllHack() {
        if (te.selectionStart != null) {
          var selected = cm.somethingSelected();
          var extval = "\u200b" + (selected ? te.value : "");
          te.value = "\u21da"; // Used to catch context-menu undo
          te.value = extval;
          input.prevInput = selected ? "" : "\u200b";
          te.selectionStart = 1; te.selectionEnd = extval.length;
          // Re-set this, in case some other handler touched the
          // selection in the meantime.
          display.selForContextMenu = cm.doc.sel;
        }
      }
      function rehide() {
        input.contextMenuPending = false;
        input.wrapper.style.cssText = oldWrapperCSS
        te.style.cssText = oldCSS;
        if (ie && ie_version < 9) display.scrollbars.setScrollTop(display.scroller.scrollTop = scrollPos);

        // Try to detect the user choosing select-all
        if (te.selectionStart != null) {
          if (!ie || (ie && ie_version < 9)) prepareSelectAllHack();
          var i = 0, poll = function() {
            if (display.selForContextMenu == cm.doc.sel && te.selectionStart == 0 &&
                te.selectionEnd > 0 && input.prevInput == "\u200b")
              operation(cm, commands.selectAll)(cm);
            else if (i++ < 10) display.detectingSelectAll = setTimeout(poll, 500);
            else display.input.reset();
          };
          display.detectingSelectAll = setTimeout(poll, 200);
        }
      }

      if (ie && ie_version >= 9) prepareSelectAllHack();
      if (captureRightClick) {
        e_stop(e);
        var mouseup = function() {
          off(window, "mouseup", mouseup);
          setTimeout(rehide, 20);
        };
        on(window, "mouseup", mouseup);
      } else {
        setTimeout(rehide, 50);
      }
    },

    readOnlyChanged: function(val) {
      if (!val) this.reset();
    },

    setUneditable: nothing,

    needsContentAttribute: false
  }, TextareaInput.prototype);

  // CONTENTEDITABLE INPUT STYLE

  function ContentEditableInput(cm) {
    this.cm = cm;
    this.lastAnchorNode = this.lastAnchorOffset = this.lastFocusNode = this.lastFocusOffset = null;
    this.polling = new Delayed();
    this.gracePeriod = false;
  }

  ContentEditableInput.prototype = copyObj({
    init: function(display) {
      var input = this, cm = input.cm;
      var div = input.div = display.lineDiv;
      disableBrowserMagic(div);

      on(div, "paste", function(e) {
        if (!signalDOMEvent(cm, e)) handlePaste(e, cm);
      })

      on(div, "compositionstart", function(e) {
        var data = e.data;
        input.composing = {sel: cm.doc.sel, data: data, startData: data};
        if (!data) return;
        var prim = cm.doc.sel.primary();
        var line = cm.getLine(prim.head.line);
        var found = line.indexOf(data, Math.max(0, prim.head.ch - data.length));
        if (found > -1 && found <= prim.head.ch)
          input.composing.sel = simpleSelection(Pos(prim.head.line, found),
                                                Pos(prim.head.line, found + data.length));
      });
      on(div, "compositionupdate", function(e) {
        input.composing.data = e.data;
      });
      on(div, "compositionend", function(e) {
        var ours = input.composing;
        if (!ours) return;
        if (e.data != ours.startData && !/\u200b/.test(e.data))
          ours.data = e.data;
        // Need a small delay to prevent other code (input event,
        // selection polling) from doing damage when fired right after
        // compositionend.
        setTimeout(function() {
          if (!ours.handled)
            input.applyComposition(ours);
          if (input.composing == ours)
            input.composing = null;
        }, 50);
      });

      on(div, "touchstart", function() {
        input.forceCompositionEnd();
      });

      on(div, "input", function() {
        if (input.composing) return;
        if (cm.isReadOnly() || !input.pollContent())
          runInOp(input.cm, function() {regChange(cm);});
      });

      function onCopyCut(e) {
        if (signalDOMEvent(cm, e)) return
        if (cm.somethingSelected()) {
          lastCopied = cm.getSelections();
          if (e.type == "cut") cm.replaceSelection("", null, "cut");
        } else if (!cm.options.lineWiseCopyCut) {
          return;
        } else {
          var ranges = copyableRanges(cm);
          lastCopied = ranges.text;
          if (e.type == "cut") {
            cm.operation(function() {
              cm.setSelections(ranges.ranges, 0, sel_dontScroll);
              cm.replaceSelection("", null, "cut");
            });
          }
        }
        // iOS exposes the clipboard API, but seems to discard content inserted into it
        if (e.clipboardData && !ios) {
          e.preventDefault();
          e.clipboardData.clearData();
          e.clipboardData.setData("text/plain", lastCopied.join("\n"));
        } else {
          // Old-fashioned briefly-focus-a-textarea hack
          var kludge = hiddenTextarea(), te = kludge.firstChild;
          cm.display.lineSpace.insertBefore(kludge, cm.display.lineSpace.firstChild);
          te.value = lastCopied.join("\n");
          var hadFocus = document.activeElement;
          selectInput(te);
          setTimeout(function() {
            cm.display.lineSpace.removeChild(kludge);
            hadFocus.focus();
          }, 50);
        }
      }
      on(div, "copy", onCopyCut);
      on(div, "cut", onCopyCut);
    },

    prepareSelection: function() {
      var result = prepareSelection(this.cm, false);
      result.focus = this.cm.state.focused;
      return result;
    },

    showSelection: function(info) {
      if (!info || !this.cm.display.view.length) return;
      if (info.focus) this.showPrimarySelection();
      this.showMultipleSelections(info);
    },

    showPrimarySelection: function() {
      var sel = window.getSelection(), prim = this.cm.doc.sel.primary();
      var curAnchor = domToPos(this.cm, sel.anchorNode, sel.anchorOffset);
      var curFocus = domToPos(this.cm, sel.focusNode, sel.focusOffset);
      if (curAnchor && !curAnchor.bad && curFocus && !curFocus.bad &&
          cmp(minPos(curAnchor, curFocus), prim.from()) == 0 &&
          cmp(maxPos(curAnchor, curFocus), prim.to()) == 0)
        return;

      var start = posToDOM(this.cm, prim.from());
      var end = posToDOM(this.cm, prim.to());
      if (!start && !end) return;

      var view = this.cm.display.view;
      var old = sel.rangeCount && sel.getRangeAt(0);
      if (!start) {
        start = {node: view[0].measure.map[2], offset: 0};
      } else if (!end) { // FIXME dangerously hacky
        var measure = view[view.length - 1].measure;
        var map = measure.maps ? measure.maps[measure.maps.length - 1] : measure.map;
        end = {node: map[map.length - 1], offset: map[map.length - 2] - map[map.length - 3]};
      }

      try { var rng = range(start.node, start.offset, end.offset, end.node); }
      catch(e) {} // Our model of the DOM might be outdated, in which case the range we try to set can be impossible
      if (rng) {
        if (!gecko && this.cm.state.focused) {
          sel.collapse(start.node, start.offset);
          if (!rng.collapsed) sel.addRange(rng);
        } else {
          sel.removeAllRanges();
          sel.addRange(rng);
        }
        if (old && sel.anchorNode == null) sel.addRange(old);
        else if (gecko) this.startGracePeriod();
      }
      this.rememberSelection();
    },

    startGracePeriod: function() {
      var input = this;
      clearTimeout(this.gracePeriod);
      this.gracePeriod = setTimeout(function() {
        input.gracePeriod = false;
        if (input.selectionChanged())
          input.cm.operation(function() { input.cm.curOp.selectionChanged = true; });
      }, 20);
    },

    showMultipleSelections: function(info) {
      removeChildrenAndAdd(this.cm.display.cursorDiv, info.cursors);
      removeChildrenAndAdd(this.cm.display.selectionDiv, info.selection);
    },

    rememberSelection: function() {
      var sel = window.getSelection();
      this.lastAnchorNode = sel.anchorNode; this.lastAnchorOffset = sel.anchorOffset;
      this.lastFocusNode = sel.focusNode; this.lastFocusOffset = sel.focusOffset;
    },

    selectionInEditor: function() {
      var sel = window.getSelection();
      if (!sel.rangeCount) return false;
      var node = sel.getRangeAt(0).commonAncestorContainer;
      return contains(this.div, node);
    },

    focus: function() {
      if (this.cm.options.readOnly != "nocursor") this.div.focus();
    },
    blur: function() { this.div.blur(); },
    getField: function() { return this.div; },

    supportsTouch: function() { return true; },

    receivedFocus: function() {
      var input = this;
      if (this.selectionInEditor())
        this.pollSelection();
      else
        runInOp(this.cm, function() { input.cm.curOp.selectionChanged = true; });

      function poll() {
        if (input.cm.state.focused) {
          input.pollSelection();
          input.polling.set(input.cm.options.pollInterval, poll);
        }
      }
      this.polling.set(this.cm.options.pollInterval, poll);
    },

    selectionChanged: function() {
      var sel = window.getSelection();
      return sel.anchorNode != this.lastAnchorNode || sel.anchorOffset != this.lastAnchorOffset ||
        sel.focusNode != this.lastFocusNode || sel.focusOffset != this.lastFocusOffset;
    },

    pollSelection: function() {
      if (!this.composing && !this.gracePeriod && this.selectionChanged()) {
        var sel = window.getSelection(), cm = this.cm;
        this.rememberSelection();
        var anchor = domToPos(cm, sel.anchorNode, sel.anchorOffset);
        var head = domToPos(cm, sel.focusNode, sel.focusOffset);
        if (anchor && head) runInOp(cm, function() {
          setSelection(cm.doc, simpleSelection(anchor, head), sel_dontScroll);
          if (anchor.bad || head.bad) cm.curOp.selectionChanged = true;
        });
      }
    },

    pollContent: function() {
      var cm = this.cm, display = cm.display, sel = cm.doc.sel.primary();
      var from = sel.from(), to = sel.to();
      if (from.line < display.viewFrom || to.line > display.viewTo - 1) return false;

      var fromIndex;
      if (from.line == display.viewFrom || (fromIndex = findViewIndex(cm, from.line)) == 0) {
        var fromLine = lineNo(display.view[0].line);
        var fromNode = display.view[0].node;
      } else {
        var fromLine = lineNo(display.view[fromIndex].line);
        var fromNode = display.view[fromIndex - 1].node.nextSibling;
      }
      var toIndex = findViewIndex(cm, to.line);
      if (toIndex == display.view.length - 1) {
        var toLine = display.viewTo - 1;
        var toNode = display.lineDiv.lastChild;
      } else {
        var toLine = lineNo(display.view[toIndex + 1].line) - 1;
        var toNode = display.view[toIndex + 1].node.previousSibling;
      }

      var newText = cm.doc.splitLines(domTextBetween(cm, fromNode, toNode, fromLine, toLine));
      var oldText = getBetween(cm.doc, Pos(fromLine, 0), Pos(toLine, getLine(cm.doc, toLine).text.length));
      while (newText.length > 1 && oldText.length > 1) {
        if (lst(newText) == lst(oldText)) { newText.pop(); oldText.pop(); toLine--; }
        else if (newText[0] == oldText[0]) { newText.shift(); oldText.shift(); fromLine++; }
        else break;
      }

      var cutFront = 0, cutEnd = 0;
      var newTop = newText[0], oldTop = oldText[0], maxCutFront = Math.min(newTop.length, oldTop.length);
      while (cutFront < maxCutFront && newTop.charCodeAt(cutFront) == oldTop.charCodeAt(cutFront))
        ++cutFront;
      var newBot = lst(newText), oldBot = lst(oldText);
      var maxCutEnd = Math.min(newBot.length - (newText.length == 1 ? cutFront : 0),
                               oldBot.length - (oldText.length == 1 ? cutFront : 0));
      while (cutEnd < maxCutEnd &&
             newBot.charCodeAt(newBot.length - cutEnd - 1) == oldBot.charCodeAt(oldBot.length - cutEnd - 1))
        ++cutEnd;

      newText[newText.length - 1] = newBot.slice(0, newBot.length - cutEnd);
      newText[0] = newText[0].slice(cutFront);

      var chFrom = Pos(fromLine, cutFront);
      var chTo = Pos(toLine, oldText.length ? lst(oldText).length - cutEnd : 0);
      if (newText.length > 1 || newText[0] || cmp(chFrom, chTo)) {
        replaceRange(cm.doc, newText, chFrom, chTo, "+input");
        return true;
      }
    },

    ensurePolled: function() {
      this.forceCompositionEnd();
    },
    reset: function() {
      this.forceCompositionEnd();
    },
    forceCompositionEnd: function() {
      if (!this.composing || this.composing.handled) return;
      this.applyComposition(this.composing);
      this.composing.handled = true;
      this.div.blur();
      this.div.focus();
    },
    applyComposition: function(composing) {
      if (this.cm.isReadOnly())
        operation(this.cm, regChange)(this.cm)
      else if (composing.data && composing.data != composing.startData)
        operation(this.cm, applyTextInput)(this.cm, composing.data, 0, composing.sel);
    },

    setUneditable: function(node) {
      node.contentEditable = "false"
    },

    onKeyPress: function(e) {
      e.preventDefault();
      if (!this.cm.isReadOnly())
        operation(this.cm, applyTextInput)(this.cm, String.fromCharCode(e.charCode == null ? e.keyCode : e.charCode), 0);
    },

    readOnlyChanged: function(val) {
      this.div.contentEditable = String(val != "nocursor")
    },

    onContextMenu: nothing,
    resetPosition: nothing,

    needsContentAttribute: true
  }, ContentEditableInput.prototype);

  function posToDOM(cm, pos) {
    var view = findViewForLine(cm, pos.line);
    if (!view || view.hidden) return null;
    var line = getLine(cm.doc, pos.line);
    var info = mapFromLineView(view, line, pos.line);

    var order = getOrder(line), side = "left";
    if (order) {
      var partPos = getBidiPartAt(order, pos.ch);
      side = partPos % 2 ? "right" : "left";
    }
    var result = nodeAndOffsetInLineMap(info.map, pos.ch, side);
    result.offset = result.collapse == "right" ? result.end : result.start;
    return result;
  }

  function badPos(pos, bad) { if (bad) pos.bad = true; return pos; }

  function domToPos(cm, node, offset) {
    var lineNode;
    if (node == cm.display.lineDiv) {
      lineNode = cm.display.lineDiv.childNodes[offset];
      if (!lineNode) return badPos(cm.clipPos(Pos(cm.display.viewTo - 1)), true);
      node = null; offset = 0;
    } else {
      for (lineNode = node;; lineNode = lineNode.parentNode) {
        if (!lineNode || lineNode == cm.display.lineDiv) return null;
        if (lineNode.parentNode && lineNode.parentNode == cm.display.lineDiv) break;
      }
    }
    for (var i = 0; i < cm.display.view.length; i++) {
      var lineView = cm.display.view[i];
      if (lineView.node == lineNode)
        return locateNodeInLineView(lineView, node, offset);
    }
  }

  function locateNodeInLineView(lineView, node, offset) {
    var wrapper = lineView.text.firstChild, bad = false;
    if (!node || !contains(wrapper, node)) return badPos(Pos(lineNo(lineView.line), 0), true);
    if (node == wrapper) {
      bad = true;
      node = wrapper.childNodes[offset];
      offset = 0;
      if (!node) {
        var line = lineView.rest ? lst(lineView.rest) : lineView.line;
        return badPos(Pos(lineNo(line), line.text.length), bad);
      }
    }

    var textNode = node.nodeType == 3 ? node : null, topNode = node;
    if (!textNode && node.childNodes.length == 1 && node.firstChild.nodeType == 3) {
      textNode = node.firstChild;
      if (offset) offset = textNode.nodeValue.length;
    }
    while (topNode.parentNode != wrapper) topNode = topNode.parentNode;
    var measure = lineView.measure, maps = measure.maps;

    function find(textNode, topNode, offset) {
      for (var i = -1; i < (maps ? maps.length : 0); i++) {
        var map = i < 0 ? measure.map : maps[i];
        for (var j = 0; j < map.length; j += 3) {
          var curNode = map[j + 2];
          if (curNode == textNode || curNode == topNode) {
            var line = lineNo(i < 0 ? lineView.line : lineView.rest[i]);
            var ch = map[j] + offset;
            if (offset < 0 || curNode != textNode) ch = map[j + (offset ? 1 : 0)];
            return Pos(line, ch);
          }
        }
      }
    }
    var found = find(textNode, topNode, offset);
    if (found) return badPos(found, bad);

    // FIXME this is all really shaky. might handle the few cases it needs to handle, but likely to cause problems
    for (var after = topNode.nextSibling, dist = textNode ? textNode.nodeValue.length - offset : 0; after; after = after.nextSibling) {
      found = find(after, after.firstChild, 0);
      if (found)
        return badPos(Pos(found.line, found.ch - dist), bad);
      else
        dist += after.textContent.length;
    }
    for (var before = topNode.previousSibling, dist = offset; before; before = before.previousSibling) {
      found = find(before, before.firstChild, -1);
      if (found)
        return badPos(Pos(found.line, found.ch + dist), bad);
      else
        dist += after.textContent.length;
    }
  }

  function domTextBetween(cm, from, to, fromLine, toLine) {
    var text = "", closing = false, lineSep = cm.doc.lineSeparator();
    function recognizeMarker(id) { return function(marker) { return marker.id == id; }; }
    function walk(node) {
      if (node.nodeType == 1) {
        var cmText = node.getAttribute("cm-text");
        if (cmText != null) {
          if (cmText == "") cmText = node.textContent.replace(/\u200b/g, "");
          text += cmText;
          return;
        }
        var markerID = node.getAttribute("cm-marker"), range;
        if (markerID) {
          var found = cm.findMarks(Pos(fromLine, 0), Pos(toLine + 1, 0), recognizeMarker(+markerID));
          if (found.length && (range = found[0].find()))
            text += getBetween(cm.doc, range.from, range.to).join(lineSep);
          return;
        }
        if (node.getAttribute("contenteditable") == "false") return;
        for (var i = 0; i < node.childNodes.length; i++)
          walk(node.childNodes[i]);
        if (/^(pre|div|p)$/i.test(node.nodeName))
          closing = true;
      } else if (node.nodeType == 3) {
        var val = node.nodeValue;
        if (!val) return;
        if (closing) {
          text += lineSep;
          closing = false;
        }
        text += val;
      }
    }
    for (;;) {
      walk(from);
      if (from == to) break;
      from = from.nextSibling;
    }
    return text;
  }

  CodeMirror.inputStyles = {"textarea": TextareaInput, "contenteditable": ContentEditableInput};

  // SELECTION / CURSOR

  // Selection objects are immutable. A new one is created every time
  // the selection changes. A selection is one or more non-overlapping
  // (and non-touching) ranges, sorted, and an integer that indicates
  // which one is the primary selection (the one that's scrolled into
  // view, that getCursor returns, etc).
  function Selection(ranges, primIndex) {
    this.ranges = ranges;
    this.primIndex = primIndex;
  }

  Selection.prototype = {
    primary: function() { return this.ranges[this.primIndex]; },
    equals: function(other) {
      if (other == this) return true;
      if (other.primIndex != this.primIndex || other.ranges.length != this.ranges.length) return false;
      for (var i = 0; i < this.ranges.length; i++) {
        var here = this.ranges[i], there = other.ranges[i];
        if (cmp(here.anchor, there.anchor) != 0 || cmp(here.head, there.head) != 0) return false;
      }
      return true;
    },
    deepCopy: function() {
      for (var out = [], i = 0; i < this.ranges.length; i++)
        out[i] = new Range(copyPos(this.ranges[i].anchor), copyPos(this.ranges[i].head));
      return new Selection(out, this.primIndex);
    },
    somethingSelected: function() {
      for (var i = 0; i < this.ranges.length; i++)
        if (!this.ranges[i].empty()) return true;
      return false;
    },
    contains: function(pos, end) {
      if (!end) end = pos;
      for (var i = 0; i < this.ranges.length; i++) {
        var range = this.ranges[i];
        if (cmp(end, range.from()) >= 0 && cmp(pos, range.to()) <= 0)
          return i;
      }
      return -1;
    }
  };

  function Range(anchor, head) {
    this.anchor = anchor; this.head = head;
  }

  Range.prototype = {
    from: function() { return minPos(this.anchor, this.head); },
    to: function() { return maxPos(this.anchor, this.head); },
    empty: function() {
      return this.head.line == this.anchor.line && this.head.ch == this.anchor.ch;
    }
  };

  // Take an unsorted, potentially overlapping set of ranges, and
  // build a selection out of it. 'Consumes' ranges array (modifying
  // it).
  function normalizeSelection(ranges, primIndex) {
    var prim = ranges[primIndex];
    ranges.sort(function(a, b) { return cmp(a.from(), b.from()); });
    primIndex = indexOf(ranges, prim);
    for (var i = 1; i < ranges.length; i++) {
      var cur = ranges[i], prev = ranges[i - 1];
      if (cmp(prev.to(), cur.from()) >= 0) {
        var from = minPos(prev.from(), cur.from()), to = maxPos(prev.to(), cur.to());
        var inv = prev.empty() ? cur.from() == cur.head : prev.from() == prev.head;
        if (i <= primIndex) --primIndex;
        ranges.splice(--i, 2, new Range(inv ? to : from, inv ? from : to));
      }
    }
    return new Selection(ranges, primIndex);
  }

  function simpleSelection(anchor, head) {
    return new Selection([new Range(anchor, head || anchor)], 0);
  }

  // Most of the external API clips given positions to make sure they
  // actually exist within the document.
  function clipLine(doc, n) {return Math.max(doc.first, Math.min(n, doc.first + doc.size - 1));}
  function clipPos(doc, pos) {
    if (pos.line < doc.first) return Pos(doc.first, 0);
    var last = doc.first + doc.size - 1;
    if (pos.line > last) return Pos(last, getLine(doc, last).text.length);
    return clipToLen(pos, getLine(doc, pos.line).text.length);
  }
  function clipToLen(pos, linelen) {
    var ch = pos.ch;
    if (ch == null || ch > linelen) return Pos(pos.line, linelen);
    else if (ch < 0) return Pos(pos.line, 0);
    else return pos;
  }
  function isLine(doc, l) {return l >= doc.first && l < doc.first + doc.size;}
  function clipPosArray(doc, array) {
    for (var out = [], i = 0; i < array.length; i++) out[i] = clipPos(doc, array[i]);
    return out;
  }

  // SELECTION UPDATES

  // The 'scroll' parameter given to many of these indicated whether
  // the new cursor position should be scrolled into view after
  // modifying the selection.

  // If shift is held or the extend flag is set, extends a range to
  // include a given position (and optionally a second position).
  // Otherwise, simply returns the range between the given positions.
  // Used for cursor motion and such.
  function extendRange(doc, range, head, other) {
    if (doc.cm && doc.cm.display.shift || doc.extend) {
      var anchor = range.anchor;
      if (other) {
        var posBefore = cmp(head, anchor) < 0;
        if (posBefore != (cmp(other, anchor) < 0)) {
          anchor = head;
          head = other;
        } else if (posBefore != (cmp(head, other) < 0)) {
          head = other;
        }
      }
      return new Range(anchor, head);
    } else {
      return new Range(other || head, head);
    }
  }

  // Extend the primary selection range, discard the rest.
  function extendSelection(doc, head, other, options) {
    setSelection(doc, new Selection([extendRange(doc, doc.sel.primary(), head, other)], 0), options);
  }

  // Extend all selections (pos is an array of selections with length
  // equal the number of selections)
  function extendSelections(doc, heads, options) {
    for (var out = [], i = 0; i < doc.sel.ranges.length; i++)
      out[i] = extendRange(doc, doc.sel.ranges[i], heads[i], null);
    var newSel = normalizeSelection(out, doc.sel.primIndex);
    setSelection(doc, newSel, options);
  }

  // Updates a single range in the selection.
  function replaceOneSelection(doc, i, range, options) {
    var ranges = doc.sel.ranges.slice(0);
    ranges[i] = range;
    setSelection(doc, normalizeSelection(ranges, doc.sel.primIndex), options);
  }

  // Reset the selection to a single range.
  function setSimpleSelection(doc, anchor, head, options) {
    setSelection(doc, simpleSelection(anchor, head), options);
  }

  // Give beforeSelectionChange handlers a change to influence a
  // selection update.
  function filterSelectionChange(doc, sel, options) {
    var obj = {
      ranges: sel.ranges,
      update: function(ranges) {
        this.ranges = [];
        for (var i = 0; i < ranges.length; i++)
          this.ranges[i] = new Range(clipPos(doc, ranges[i].anchor),
                                     clipPos(doc, ranges[i].head));
      },
      origin: options && options.origin
    };
    signal(doc, "beforeSelectionChange", doc, obj);
    if (doc.cm) signal(doc.cm, "beforeSelectionChange", doc.cm, obj);
    if (obj.ranges != sel.ranges) return normalizeSelection(obj.ranges, obj.ranges.length - 1);
    else return sel;
  }

  function setSelectionReplaceHistory(doc, sel, options) {
    var done = doc.history.done, last = lst(done);
    if (last && last.ranges) {
      done[done.length - 1] = sel;
      setSelectionNoUndo(doc, sel, options);
    } else {
      setSelection(doc, sel, options);
    }
  }

  // Set a new selection.
  function setSelection(doc, sel, options) {
    setSelectionNoUndo(doc, sel, options);
    addSelectionToHistory(doc, doc.sel, doc.cm ? doc.cm.curOp.id : NaN, options);
  }

  function setSelectionNoUndo(doc, sel, options) {
    if (hasHandler(doc, "beforeSelectionChange") || doc.cm && hasHandler(doc.cm, "beforeSelectionChange"))
      sel = filterSelectionChange(doc, sel, options);

    var bias = options && options.bias ||
      (cmp(sel.primary().head, doc.sel.primary().head) < 0 ? -1 : 1);
    setSelectionInner(doc, skipAtomicInSelection(doc, sel, bias, true));

    if (!(options && options.scroll === false) && doc.cm)
      ensureCursorVisible(doc.cm);
  }

  function setSelectionInner(doc, sel) {
    if (sel.equals(doc.sel)) return;

    doc.sel = sel;

    if (doc.cm) {
      doc.cm.curOp.updateInput = doc.cm.curOp.selectionChanged = true;
      signalCursorActivity(doc.cm);
    }
    signalLater(doc, "cursorActivity", doc);
  }

  // Verify that the selection does not partially select any atomic
  // marked ranges.
  function reCheckSelection(doc) {
    setSelectionInner(doc, skipAtomicInSelection(doc, doc.sel, null, false), sel_dontScroll);
  }

  // Return a selection that does not partially select any atomic
  // ranges.
  function skipAtomicInSelection(doc, sel, bias, mayClear) {
    var out;
    for (var i = 0; i < sel.ranges.length; i++) {
      var range = sel.ranges[i];
      var old = sel.ranges.length == doc.sel.ranges.length && doc.sel.ranges[i];
      var newAnchor = skipAtomic(doc, range.anchor, old && old.anchor, bias, mayClear);
      var newHead = skipAtomic(doc, range.head, old && old.head, bias, mayClear);
      if (out || newAnchor != range.anchor || newHead != range.head) {
        if (!out) out = sel.ranges.slice(0, i);
        out[i] = new Range(newAnchor, newHead);
      }
    }
    return out ? normalizeSelection(out, sel.primIndex) : sel;
  }

  function skipAtomicInner(doc, pos, oldPos, dir, mayClear) {
    var line = getLine(doc, pos.line);
    if (line.markedSpans) for (var i = 0; i < line.markedSpans.length; ++i) {
      var sp = line.markedSpans[i], m = sp.marker;
      if ((sp.from == null || (m.inclusiveLeft ? sp.from <= pos.ch : sp.from < pos.ch)) &&
          (sp.to == null || (m.inclusiveRight ? sp.to >= pos.ch : sp.to > pos.ch))) {
        if (mayClear) {
          signal(m, "beforeCursorEnter");
          if (m.explicitlyCleared) {
            if (!line.markedSpans) break;
            else {--i; continue;}
          }
        }
        if (!m.atomic) continue;

        if (oldPos) {
          var near = m.find(dir < 0 ? 1 : -1), diff;
          if (dir < 0 ? m.inclusiveRight : m.inclusiveLeft)
            near = movePos(doc, near, -dir, near && near.line == pos.line ? line : null);
          if (near && near.line == pos.line && (diff = cmp(near, oldPos)) && (dir < 0 ? diff < 0 : diff > 0))
            return skipAtomicInner(doc, near, pos, dir, mayClear);
        }

        var far = m.find(dir < 0 ? -1 : 1);
        if (dir < 0 ? m.inclusiveLeft : m.inclusiveRight)
          far = movePos(doc, far, dir, far.line == pos.line ? line : null);
        return far ? skipAtomicInner(doc, far, pos, dir, mayClear) : null;
      }
    }
    return pos;
  }

  // Ensure a given position is not inside an atomic range.
  function skipAtomic(doc, pos, oldPos, bias, mayClear) {
    var dir = bias || 1;
    var found = skipAtomicInner(doc, pos, oldPos, dir, mayClear) ||
        (!mayClear && skipAtomicInner(doc, pos, oldPos, dir, true)) ||
        skipAtomicInner(doc, pos, oldPos, -dir, mayClear) ||
        (!mayClear && skipAtomicInner(doc, pos, oldPos, -dir, true));
    if (!found) {
      doc.cantEdit = true;
      return Pos(doc.first, 0);
    }
    return found;
  }

  function movePos(doc, pos, dir, line) {
    if (dir < 0 && pos.ch == 0) {
      if (pos.line > doc.first) return clipPos(doc, Pos(pos.line - 1));
      else return null;
    } else if (dir > 0 && pos.ch == (line || getLine(doc, pos.line)).text.length) {
      if (pos.line < doc.first + doc.size - 1) return Pos(pos.line + 1, 0);
      else return null;
    } else {
      return new Pos(pos.line, pos.ch + dir);
    }
  }

  // SELECTION DRAWING

  function updateSelection(cm) {
    cm.display.input.showSelection(cm.display.input.prepareSelection());
  }

  function prepareSelection(cm, primary) {
    var doc = cm.doc, result = {};
    var curFragment = result.cursors = document.createDocumentFragment();
    var selFragment = result.selection = document.createDocumentFragment();

    for (var i = 0; i < doc.sel.ranges.length; i++) {
      if (primary === false && i == doc.sel.primIndex) continue;
      var range = doc.sel.ranges[i];
      if (range.from().line >= cm.display.viewTo || range.to().line < cm.display.viewFrom) continue;
      var collapsed = range.empty();
      if (collapsed || cm.options.showCursorWhenSelecting)
        drawSelectionCursor(cm, range.head, curFragment);
      if (!collapsed)
        drawSelectionRange(cm, range, selFragment);
    }
    return result;
  }

  // Draws a cursor for the given range
  function drawSelectionCursor(cm, head, output) {
    var pos = cursorCoords(cm, head, "div", null, null, !cm.options.singleCursorHeightPerLine);

    var cursor = output.appendChild(elt("div", "\u00a0", "CodeMirror-cursor"));
    cursor.style.left = pos.left + "px";
    cursor.style.top = pos.top + "px";
    cursor.style.height = Math.max(0, pos.bottom - pos.top) * cm.options.cursorHeight + "px";

    if (pos.other) {
      // Secondary cursor, shown when on a 'jump' in bi-directional text
      var otherCursor = output.appendChild(elt("div", "\u00a0", "CodeMirror-cursor CodeMirror-secondarycursor"));
      otherCursor.style.display = "";
      otherCursor.style.left = pos.other.left + "px";
      otherCursor.style.top = pos.other.top + "px";
      otherCursor.style.height = (pos.other.bottom - pos.other.top) * .85 + "px";
    }
  }

  // Draws the given range as a highlighted selection
  function drawSelectionRange(cm, range, output) {
    var display = cm.display, doc = cm.doc;
    var fragment = document.createDocumentFragment();
    var padding = paddingH(cm.display), leftSide = padding.left;
    var rightSide = Math.max(display.sizerWidth, displayWidth(cm) - display.sizer.offsetLeft) - padding.right;

    function add(left, top, width, bottom) {
      if (top < 0) top = 0;
      top = Math.round(top);
      bottom = Math.round(bottom);
      fragment.appendChild(elt("div", null, "CodeMirror-selected", "position: absolute; left: " + left +
                               "px; top: " + top + "px; width: " + (width == null ? rightSide - left : width) +
                               "px; height: " + (bottom - top) + "px"));
    }

    function drawForLine(line, fromArg, toArg) {
      var lineObj = getLine(doc, line);
      var lineLen = lineObj.text.length;
      var start, end;
      function coords(ch, bias) {
        return charCoords(cm, Pos(line, ch), "div", lineObj, bias);
      }

      iterateBidiSections(getOrder(lineObj), fromArg || 0, toArg == null ? lineLen : toArg, function(from, to, dir) {
        var leftPos = coords(from, "left"), rightPos, left, right;
        if (from == to) {
          rightPos = leftPos;
          left = right = leftPos.left;
        } else {
          rightPos = coords(to - 1, "right");
          if (dir == "rtl") { var tmp = leftPos; leftPos = rightPos; rightPos = tmp; }
          left = leftPos.left;
          right = rightPos.right;
        }
        if (fromArg == null && from == 0) left = leftSide;
        if (rightPos.top - leftPos.top > 3) { // Different lines, draw top part
          add(left, leftPos.top, null, leftPos.bottom);
          left = leftSide;
          if (leftPos.bottom < rightPos.top) add(left, leftPos.bottom, null, rightPos.top);
        }
        if (toArg == null && to == lineLen) right = rightSide;
        if (!start || leftPos.top < start.top || leftPos.top == start.top && leftPos.left < start.left)
          start = leftPos;
        if (!end || rightPos.bottom > end.bottom || rightPos.bottom == end.bottom && rightPos.right > end.right)
          end = rightPos;
        if (left < leftSide + 1) left = leftSide;
        add(left, rightPos.top, right - left, rightPos.bottom);
      });
      return {start: start, end: end};
    }

    var sFrom = range.from(), sTo = range.to();
    if (sFrom.line == sTo.line) {
      drawForLine(sFrom.line, sFrom.ch, sTo.ch);
    } else {
      var fromLine = getLine(doc, sFrom.line), toLine = getLine(doc, sTo.line);
      var singleVLine = visualLine(fromLine) == visualLine(toLine);
      var leftEnd = drawForLine(sFrom.line, sFrom.ch, singleVLine ? fromLine.text.length + 1 : null).end;
      var rightStart = drawForLine(sTo.line, singleVLine ? 0 : null, sTo.ch).start;
      if (singleVLine) {
        if (leftEnd.top < rightStart.top - 2) {
          add(leftEnd.right, leftEnd.top, null, leftEnd.bottom);
          add(leftSide, rightStart.top, rightStart.left, rightStart.bottom);
        } else {
          add(leftEnd.right, leftEnd.top, rightStart.left - leftEnd.right, leftEnd.bottom);
        }
      }
      if (leftEnd.bottom < rightStart.top)
        add(leftSide, leftEnd.bottom, null, rightStart.top);
    }

    output.appendChild(fragment);
  }

  // Cursor-blinking
  function restartBlink(cm) {
    if (!cm.state.focused) return;
    var display = cm.display;
    clearInterval(display.blinker);
    var on = true;
    display.cursorDiv.style.visibility = "";
    if (cm.options.cursorBlinkRate > 0)
      display.blinker = setInterval(function() {
        display.cursorDiv.style.visibility = (on = !on) ? "" : "hidden";
      }, cm.options.cursorBlinkRate);
    else if (cm.options.cursorBlinkRate < 0)
      display.cursorDiv.style.visibility = "hidden";
  }

  // HIGHLIGHT WORKER

  function startWorker(cm, time) {
    if (cm.doc.mode.startState && cm.doc.frontier < cm.display.viewTo)
      cm.state.highlight.set(time, bind(highlightWorker, cm));
  }

  function highlightWorker(cm) {
    var doc = cm.doc;
    if (doc.frontier < doc.first) doc.frontier = doc.first;
    if (doc.frontier >= cm.display.viewTo) return;
    var end = +new Date + cm.options.workTime;
    var state = copyState(doc.mode, getStateBefore(cm, doc.frontier));
    var changedLines = [];

    doc.iter(doc.frontier, Math.min(doc.first + doc.size, cm.display.viewTo + 500), function(line) {
      if (doc.frontier >= cm.display.viewFrom) { // Visible
        var oldStyles = line.styles, tooLong = line.text.length > cm.options.maxHighlightLength;
        var highlighted = highlightLine(cm, line, tooLong ? copyState(doc.mode, state) : state, true);
        line.styles = highlighted.styles;
        var oldCls = line.styleClasses, newCls = highlighted.classes;
        if (newCls) line.styleClasses = newCls;
        else if (oldCls) line.styleClasses = null;
        var ischange = !oldStyles || oldStyles.length != line.styles.length ||
          oldCls != newCls && (!oldCls || !newCls || oldCls.bgClass != newCls.bgClass || oldCls.textClass != newCls.textClass);
        for (var i = 0; !ischange && i < oldStyles.length; ++i) ischange = oldStyles[i] != line.styles[i];
        if (ischange) changedLines.push(doc.frontier);
        line.stateAfter = tooLong ? state : copyState(doc.mode, state);
      } else {
        if (line.text.length <= cm.options.maxHighlightLength)
          processLine(cm, line.text, state);
        line.stateAfter = doc.frontier % 5 == 0 ? copyState(doc.mode, state) : null;
      }
      ++doc.frontier;
      if (+new Date > end) {
        startWorker(cm, cm.options.workDelay);
        return true;
      }
    });
    if (changedLines.length) runInOp(cm, function() {
      for (var i = 0; i < changedLines.length; i++)
        regLineChange(cm, changedLines[i], "text");
    });
  }

  // Finds the line to start with when starting a parse. Tries to
  // find a line with a stateAfter, so that it can start with a
  // valid state. If that fails, it returns the line with the
  // smallest indentation, which tends to need the least context to
  // parse correctly.
  function findStartLine(cm, n, precise) {
    var minindent, minline, doc = cm.doc;
    var lim = precise ? -1 : n - (cm.doc.mode.innerMode ? 1000 : 100);
    for (var search = n; search > lim; --search) {
      if (search <= doc.first) return doc.first;
      var line = getLine(doc, search - 1);
      if (line.stateAfter && (!precise || search <= doc.frontier)) return search;
      var indented = countColumn(line.text, null, cm.options.tabSize);
      if (minline == null || minindent > indented) {
        minline = search - 1;
        minindent = indented;
      }
    }
    return minline;
  }

  function getStateBefore(cm, n, precise) {
    var doc = cm.doc, display = cm.display;
    if (!doc.mode.startState) return true;
    var pos = findStartLine(cm, n, precise), state = pos > doc.first && getLine(doc, pos-1).stateAfter;
    if (!state) state = startState(doc.mode);
    else state = copyState(doc.mode, state);
    doc.iter(pos, n, function(line) {
      processLine(cm, line.text, state);
      var save = pos == n - 1 || pos % 5 == 0 || pos >= display.viewFrom && pos < display.viewTo;
      line.stateAfter = save ? copyState(doc.mode, state) : null;
      ++pos;
    });
    if (precise) doc.frontier = pos;
    return state;
  }

  // POSITION MEASUREMENT

  function paddingTop(display) {return display.lineSpace.offsetTop;}
  function paddingVert(display) {return display.mover.offsetHeight - display.lineSpace.offsetHeight;}
  function paddingH(display) {
    if (display.cachedPaddingH) return display.cachedPaddingH;
    var e = removeChildrenAndAdd(display.measure, elt("pre", "x"));
    var style = window.getComputedStyle ? window.getComputedStyle(e) : e.currentStyle;
    var data = {left: parseInt(style.paddingLeft), right: parseInt(style.paddingRight)};
    if (!isNaN(data.left) && !isNaN(data.right)) display.cachedPaddingH = data;
    return data;
  }

  function scrollGap(cm) { return scrollerGap - cm.display.nativeBarWidth; }
  function displayWidth(cm) {
    return cm.display.scroller.clientWidth - scrollGap(cm) - cm.display.barWidth;
  }
  function displayHeight(cm) {
    return cm.display.scroller.clientHeight - scrollGap(cm) - cm.display.barHeight;
  }

  // Ensure the lineView.wrapping.heights array is populated. This is
  // an array of bottom offsets for the lines that make up a drawn
  // line. When lineWrapping is on, there might be more than one
  // height.
  function ensureLineHeights(cm, lineView, rect) {
    var wrapping = cm.options.lineWrapping;
    var curWidth = wrapping && displayWidth(cm);
    if (!lineView.measure.heights || wrapping && lineView.measure.width != curWidth) {
      var heights = lineView.measure.heights = [];
      if (wrapping) {
        lineView.measure.width = curWidth;
        var rects = lineView.text.firstChild.getClientRects();
        for (var i = 0; i < rects.length - 1; i++) {
          var cur = rects[i], next = rects[i + 1];
          if (Math.abs(cur.bottom - next.bottom) > 2)
            heights.push((cur.bottom + next.top) / 2 - rect.top);
        }
      }
      heights.push(rect.bottom - rect.top);
    }
  }

  // Find a line map (mapping character offsets to text nodes) and a
  // measurement cache for the given line number. (A line view might
  // contain multiple lines when collapsed ranges are present.)
  function mapFromLineView(lineView, line, lineN) {
    if (lineView.line == line)
      return {map: lineView.measure.map, cache: lineView.measure.cache};
    for (var i = 0; i < lineView.rest.length; i++)
      if (lineView.rest[i] == line)
        return {map: lineView.measure.maps[i], cache: lineView.measure.caches[i]};
    for (var i = 0; i < lineView.rest.length; i++)
      if (lineNo(lineView.rest[i]) > lineN)
        return {map: lineView.measure.maps[i], cache: lineView.measure.caches[i], before: true};
  }

  // Render a line into the hidden node display.externalMeasured. Used
  // when measurement is needed for a line that's not in the viewport.
  function updateExternalMeasurement(cm, line) {
    line = visualLine(line);
    var lineN = lineNo(line);
    var view = cm.display.externalMeasured = new LineView(cm.doc, line, lineN);
    view.lineN = lineN;
    var built = view.built = buildLineContent(cm, view);
    view.text = built.pre;
    removeChildrenAndAdd(cm.display.lineMeasure, built.pre);
    return view;
  }

  // Get a {top, bottom, left, right} box (in line-local coordinates)
  // for a given character.
  function measureChar(cm, line, ch, bias) {
    return measureCharPrepared(cm, prepareMeasureForLine(cm, line), ch, bias);
  }

  // Find a line view that corresponds to the given line number.
  function findViewForLine(cm, lineN) {
    if (lineN >= cm.display.viewFrom && lineN < cm.display.viewTo)
      return cm.display.view[findViewIndex(cm, lineN)];
    var ext = cm.display.externalMeasured;
    if (ext && lineN >= ext.lineN && lineN < ext.lineN + ext.size)
      return ext;
  }

  // Measurement can be split in two steps, the set-up work that
  // applies to the whole line, and the measurement of the actual
  // character. Functions like coordsChar, that need to do a lot of
  // measurements in a row, can thus ensure that the set-up work is
  // only done once.
  function prepareMeasureForLine(cm, line) {
    var lineN = lineNo(line);
    var view = findViewForLine(cm, lineN);
    if (view && !view.text) {
      view = null;
    } else if (view && view.changes) {
      updateLineForChanges(cm, view, lineN, getDimensions(cm));
      cm.curOp.forceUpdate = true;
    }
    if (!view)
      view = updateExternalMeasurement(cm, line);

    var info = mapFromLineView(view, line, lineN);
    return {
      line: line, view: view, rect: null,
      map: info.map, cache: info.cache, before: info.before,
      hasHeights: false
    };
  }

  // Given a prepared measurement object, measures the position of an
  // actual character (or fetches it from the cache).
  function measureCharPrepared(cm, prepared, ch, bias, varHeight) {
    if (prepared.before) ch = -1;
    var key = ch + (bias || ""), found;
    if (prepared.cache.hasOwnProperty(key)) {
      found = prepared.cache[key];
    } else {
      if (!prepared.rect)
        prepared.rect = prepared.view.text.getBoundingClientRect();
      if (!prepared.hasHeights) {
        ensureLineHeights(cm, prepared.view, prepared.rect);
        prepared.hasHeights = true;
      }
      found = measureCharInner(cm, prepared, ch, bias);
      if (!found.bogus) prepared.cache[key] = found;
    }
    return {left: found.left, right: found.right,
            top: varHeight ? found.rtop : found.top,
            bottom: varHeight ? found.rbottom : found.bottom};
  }

  var nullRect = {left: 0, right: 0, top: 0, bottom: 0};

  function nodeAndOffsetInLineMap(map, ch, bias) {
    var node, start, end, collapse;
    // First, search the line map for the text node corresponding to,
    // or closest to, the target character.
    for (var i = 0; i < map.length; i += 3) {
      var mStart = map[i], mEnd = map[i + 1];
      if (ch < mStart) {
        start = 0; end = 1;
        collapse = "left";
      } else if (ch < mEnd) {
        start = ch - mStart;
        end = start + 1;
      } else if (i == map.length - 3 || ch == mEnd && map[i + 3] > ch) {
        end = mEnd - mStart;
        start = end - 1;
        if (ch >= mEnd) collapse = "right";
      }
      if (start != null) {
        node = map[i + 2];
        if (mStart == mEnd && bias == (node.insertLeft ? "left" : "right"))
          collapse = bias;
        if (bias == "left" && start == 0)
          while (i && map[i - 2] == map[i - 3] && map[i - 1].insertLeft) {
            node = map[(i -= 3) + 2];
            collapse = "left";
          }
        if (bias == "right" && start == mEnd - mStart)
          while (i < map.length - 3 && map[i + 3] == map[i + 4] && !map[i + 5].insertLeft) {
            node = map[(i += 3) + 2];
            collapse = "right";
          }
        break;
      }
    }
    return {node: node, start: start, end: end, collapse: collapse, coverStart: mStart, coverEnd: mEnd};
  }

  function measureCharInner(cm, prepared, ch, bias) {
    var place = nodeAndOffsetInLineMap(prepared.map, ch, bias);
    var node = place.node, start = place.start, end = place.end, collapse = place.collapse;

    var rect;
    if (node.nodeType == 3) { // If it is a text node, use a range to retrieve the coordinates.
      for (var i = 0; i < 4; i++) { // Retry a maximum of 4 times when nonsense rectangles are returned
        while (start && isExtendingChar(prepared.line.text.charAt(place.coverStart + start))) --start;
        while (place.coverStart + end < place.coverEnd && isExtendingChar(prepared.line.text.charAt(place.coverStart + end))) ++end;
        if (ie && ie_version < 9 && start == 0 && end == place.coverEnd - place.coverStart) {
          rect = node.parentNode.getBoundingClientRect();
        } else if (ie && cm.options.lineWrapping) {
          var rects = range(node, start, end).getClientRects();
          if (rects.length)
            rect = rects[bias == "right" ? rects.length - 1 : 0];
          else
            rect = nullRect;
        } else {
          rect = range(node, start, end).getBoundingClientRect() || nullRect;
        }
        if (rect.left || rect.right || start == 0) break;
        end = start;
        start = start - 1;
        collapse = "right";
      }
      if (ie && ie_version < 11) rect = maybeUpdateRectForZooming(cm.display.measure, rect);
    } else { // If it is a widget, simply get the box for the whole widget.
      if (start > 0) collapse = bias = "right";
      var rects;
      if (cm.options.lineWrapping && (rects = node.getClientRects()).length > 1)
        rect = rects[bias == "right" ? rects.length - 1 : 0];
      else
        rect = node.getBoundingClientRect();
    }
    if (ie && ie_version < 9 && !start && (!rect || !rect.left && !rect.right)) {
      var rSpan = node.parentNode.getClientRects()[0];
      if (rSpan)
        rect = {left: rSpan.left, right: rSpan.left + charWidth(cm.display), top: rSpan.top, bottom: rSpan.bottom};
      else
        rect = nullRect;
    }

    var rtop = rect.top - prepared.rect.top, rbot = rect.bottom - prepared.rect.top;
    var mid = (rtop + rbot) / 2;
    var heights = prepared.view.measure.heights;
    for (var i = 0; i < heights.length - 1; i++)
      if (mid < heights[i]) break;
    var top = i ? heights[i - 1] : 0, bot = heights[i];
    var result = {left: (collapse == "right" ? rect.right : rect.left) - prepared.rect.left,
                  right: (collapse == "left" ? rect.left : rect.right) - prepared.rect.left,
                  top: top, bottom: bot};
    if (!rect.left && !rect.right) result.bogus = true;
    if (!cm.options.singleCursorHeightPerLine) { result.rtop = rtop; result.rbottom = rbot; }

    return result;
  }

  // Work around problem with bounding client rects on ranges being
  // returned incorrectly when zoomed on IE10 and below.
  function maybeUpdateRectForZooming(measure, rect) {
    if (!window.screen || screen.logicalXDPI == null ||
        screen.logicalXDPI == screen.deviceXDPI || !hasBadZoomedRects(measure))
      return rect;
    var scaleX = screen.logicalXDPI / screen.deviceXDPI;
    var scaleY = screen.logicalYDPI / screen.deviceYDPI;
    return {left: rect.left * scaleX, right: rect.right * scaleX,
            top: rect.top * scaleY, bottom: rect.bottom * scaleY};
  }

  function clearLineMeasurementCacheFor(lineView) {
    if (lineView.measure) {
      lineView.measure.cache = {};
      lineView.measure.heights = null;
      if (lineView.rest) for (var i = 0; i < lineView.rest.length; i++)
        lineView.measure.caches[i] = {};
    }
  }

  function clearLineMeasurementCache(cm) {
    cm.display.externalMeasure = null;
    removeChildren(cm.display.lineMeasure);
    for (var i = 0; i < cm.display.view.length; i++)
      clearLineMeasurementCacheFor(cm.display.view[i]);
  }

  function clearCaches(cm) {
    clearLineMeasurementCache(cm);
    cm.display.cachedCharWidth = cm.display.cachedTextHeight = cm.display.cachedPaddingH = null;
    if (!cm.options.lineWrapping) cm.display.maxLineChanged = true;
    cm.display.lineNumChars = null;
  }

  function pageScrollX() { return window.pageXOffset || (document.documentElement || document.body).scrollLeft; }
  function pageScrollY() { return window.pageYOffset || (document.documentElement || document.body).scrollTop; }

  // Converts a {top, bottom, left, right} box from line-local
  // coordinates into another coordinate system. Context may be one of
  // "line", "div" (display.lineDiv), "local"/null (editor), "window",
  // or "page".
  function intoCoordSystem(cm, lineObj, rect, context) {
    if (lineObj.widgets) for (var i = 0; i < lineObj.widgets.length; ++i) if (lineObj.widgets[i].above) {
      var size = widgetHeight(lineObj.widgets[i]);
      rect.top += size; rect.bottom += size;
    }
    if (context == "line") return rect;
    if (!context) context = "local";
    var yOff = heightAtLine(lineObj);
    if (context == "local") yOff += paddingTop(cm.display);
    else yOff -= cm.display.viewOffset;
    if (context == "page" || context == "window") {
      var lOff = cm.display.lineSpace.getBoundingClientRect();
      yOff += lOff.top + (context == "window" ? 0 : pageScrollY());
      var xOff = lOff.left + (context == "window" ? 0 : pageScrollX());
      rect.left += xOff; rect.right += xOff;
    }
    rect.top += yOff; rect.bottom += yOff;
    return rect;
  }

  // Coverts a box from "div" coords to another coordinate system.
  // Context may be "window", "page", "div", or "local"/null.
  function fromCoordSystem(cm, coords, context) {
    if (context == "div") return coords;
    var left = coords.left, top = coords.top;
    // First move into "page" coordinate system
    if (context == "page") {
      left -= pageScrollX();
      top -= pageScrollY();
    } else if (context == "local" || !context) {
      var localBox = cm.display.sizer.getBoundingClientRect();
      left += localBox.left;
      top += localBox.top;
    }

    var lineSpaceBox = cm.display.lineSpace.getBoundingClientRect();
    return {left: left - lineSpaceBox.left, top: top - lineSpaceBox.top};
  }

  function charCoords(cm, pos, context, lineObj, bias) {
    if (!lineObj) lineObj = getLine(cm.doc, pos.line);
    return intoCoordSystem(cm, lineObj, measureChar(cm, lineObj, pos.ch, bias), context);
  }

  // Returns a box for a given cursor position, which may have an
  // 'other' property containing the position of the secondary cursor
  // on a bidi boundary.
  function cursorCoords(cm, pos, context, lineObj, preparedMeasure, varHeight) {
    lineObj = lineObj || getLine(cm.doc, pos.line);
    if (!preparedMeasure) preparedMeasure = prepareMeasureForLine(cm, lineObj);
    function get(ch, right) {
      var m = measureCharPrepared(cm, preparedMeasure, ch, right ? "right" : "left", varHeight);
      if (right) m.left = m.right; else m.right = m.left;
      return intoCoordSystem(cm, lineObj, m, context);
    }
    function getBidi(ch, partPos) {
      var part = order[partPos], right = part.level % 2;
      if (ch == bidiLeft(part) && partPos && part.level < order[partPos - 1].level) {
        part = order[--partPos];
        ch = bidiRight(part) - (part.level % 2 ? 0 : 1);
        right = true;
      } else if (ch == bidiRight(part) && partPos < order.length - 1 && part.level < order[partPos + 1].level) {
        part = order[++partPos];
        ch = bidiLeft(part) - part.level % 2;
        right = false;
      }
      if (right && ch == part.to && ch > part.from) return get(ch - 1);
      return get(ch, right);
    }
    var order = getOrder(lineObj), ch = pos.ch;
    if (!order) return get(ch);
    var partPos = getBidiPartAt(order, ch);
    var val = getBidi(ch, partPos);
    if (bidiOther != null) val.other = getBidi(ch, bidiOther);
    return val;
  }

  // Used to cheaply estimate the coordinates for a position. Used for
  // intermediate scroll updates.
  function estimateCoords(cm, pos) {
    var left = 0, pos = clipPos(cm.doc, pos);
    if (!cm.options.lineWrapping) left = charWidth(cm.display) * pos.ch;
    var lineObj = getLine(cm.doc, pos.line);
    var top = heightAtLine(lineObj) + paddingTop(cm.display);
    return {left: left, right: left, top: top, bottom: top + lineObj.height};
  }

  // Positions returned by coordsChar contain some extra information.
  // xRel is the relative x position of the input coordinates compared
  // to the found position (so xRel > 0 means the coordinates are to
  // the right of the character position, for example). When outside
  // is true, that means the coordinates lie outside the line's
  // vertical range.
  function PosWithInfo(line, ch, outside, xRel) {
    var pos = Pos(line, ch);
    pos.xRel = xRel;
    if (outside) pos.outside = true;
    return pos;
  }

  // Compute the character position closest to the given coordinates.
  // Input must be lineSpace-local ("div" coordinate system).
  function coordsChar(cm, x, y) {
    var doc = cm.doc;
    y += cm.display.viewOffset;
    if (y < 0) return PosWithInfo(doc.first, 0, true, -1);
    var lineN = lineAtHeight(doc, y), last = doc.first + doc.size - 1;
    if (lineN > last)
      return PosWithInfo(doc.first + doc.size - 1, getLine(doc, last).text.length, true, 1);
    if (x < 0) x = 0;

    var lineObj = getLine(doc, lineN);
    for (;;) {
      var found = coordsCharInner(cm, lineObj, lineN, x, y);
      var merged = collapsedSpanAtEnd(lineObj);
      var mergedPos = merged && merged.find(0, true);
      if (merged && (found.ch > mergedPos.from.ch || found.ch == mergedPos.from.ch && found.xRel > 0))
        lineN = lineNo(lineObj = mergedPos.to.line);
      else
        return found;
    }
  }

  function coordsCharInner(cm, lineObj, lineNo, x, y) {
    var innerOff = y - heightAtLine(lineObj);
    var wrongLine = false, adjust = 2 * cm.display.wrapper.clientWidth;
    var preparedMeasure = prepareMeasureForLine(cm, lineObj);

    function getX(ch) {
      var sp = cursorCoords(cm, Pos(lineNo, ch), "line", lineObj, preparedMeasure);
      wrongLine = true;
      if (innerOff > sp.bottom) return sp.left - adjust;
      else if (innerOff < sp.top) return sp.left + adjust;
      else wrongLine = false;
      return sp.left;
    }

    var bidi = getOrder(lineObj), dist = lineObj.text.length;
    var from = lineLeft(lineObj), to = lineRight(lineObj);
    var fromX = getX(from), fromOutside = wrongLine, toX = getX(to), toOutside = wrongLine;

    if (x > toX) return PosWithInfo(lineNo, to, toOutside, 1);
    // Do a binary search between these bounds.
    for (;;) {
      if (bidi ? to == from || to == moveVisually(lineObj, from, 1) : to - from <= 1) {
        var ch = x < fromX || x - fromX <= toX - x ? from : to;
        var xDiff = x - (ch == from ? fromX : toX);
        while (isExtendingChar(lineObj.text.charAt(ch))) ++ch;
        var pos = PosWithInfo(lineNo, ch, ch == from ? fromOutside : toOutside,
                              xDiff < -1 ? -1 : xDiff > 1 ? 1 : 0);
        return pos;
      }
      var step = Math.ceil(dist / 2), middle = from + step;
      if (bidi) {
        middle = from;
        for (var i = 0; i < step; ++i) middle = moveVisually(lineObj, middle, 1);
      }
      var middleX = getX(middle);
      if (middleX > x) {to = middle; toX = middleX; if (toOutside = wrongLine) toX += 1000; dist = step;}
      else {from = middle; fromX = middleX; fromOutside = wrongLine; dist -= step;}
    }
  }

  var measureText;
  // Compute the default text height.
  function textHeight(display) {
    if (display.cachedTextHeight != null) return display.cachedTextHeight;
    if (measureText == null) {
      measureText = elt("pre");
      // Measure a bunch of lines, for browsers that compute
      // fractional heights.
      for (var i = 0; i < 49; ++i) {
        measureText.appendChild(document.createTextNode("x"));
        measureText.appendChild(elt("br"));
      }
      measureText.appendChild(document.createTextNode("x"));
    }
    removeChildrenAndAdd(display.measure, measureText);
    var height = measureText.offsetHeight / 50;
    if (height > 3) display.cachedTextHeight = height;
    removeChildren(display.measure);
    return height || 1;
  }

  // Compute the default character width.
  function charWidth(display) {
    if (display.cachedCharWidth != null) return display.cachedCharWidth;
    var anchor = elt("span", "xxxxxxxxxx");
    var pre = elt("pre", [anchor]);
    removeChildrenAndAdd(display.measure, pre);
    var rect = anchor.getBoundingClientRect(), width = (rect.right - rect.left) / 10;
    if (width > 2) display.cachedCharWidth = width;
    return width || 10;
  }

  // OPERATIONS

  // Operations are used to wrap a series of changes to the editor
  // state in such a way that each change won't have to update the
  // cursor and display (which would be awkward, slow, and
  // error-prone). Instead, display updates are batched and then all
  // combined and executed at once.

  var operationGroup = null;

  var nextOpId = 0;
  // Start a new operation.
  function startOperation(cm) {
    cm.curOp = {
      cm: cm,
      viewChanged: false,      // Flag that indicates that lines might need to be redrawn
      startHeight: cm.doc.height, // Used to detect need to update scrollbar
      forceUpdate: false,      // Used to force a redraw
      updateInput: null,       // Whether to reset the input textarea
      typing: false,           // Whether this reset should be careful to leave existing text (for compositing)
      changeObjs: null,        // Accumulated changes, for firing change events
      cursorActivityHandlers: null, // Set of handlers to fire cursorActivity on
      cursorActivityCalled: 0, // Tracks which cursorActivity handlers have been called already
      selectionChanged: false, // Whether the selection needs to be redrawn
      updateMaxLine: false,    // Set when the widest line needs to be determined anew
      scrollLeft: null, scrollTop: null, // Intermediate scroll position, not pushed to DOM yet
      scrollToPos: null,       // Used to scroll to a specific position
      focus: false,
      id: ++nextOpId           // Unique ID
    };
    if (operationGroup) {
      operationGroup.ops.push(cm.curOp);
    } else {
      cm.curOp.ownsGroup = operationGroup = {
        ops: [cm.curOp],
        delayedCallbacks: []
      };
    }
  }

  function fireCallbacksForOps(group) {
    // Calls delayed callbacks and cursorActivity handlers until no
    // new ones appear
    var callbacks = group.delayedCallbacks, i = 0;
    do {
      for (; i < callbacks.length; i++)
        callbacks[i].call(null);
      for (var j = 0; j < group.ops.length; j++) {
        var op = group.ops[j];
        if (op.cursorActivityHandlers)
          while (op.cursorActivityCalled < op.cursorActivityHandlers.length)
            op.cursorActivityHandlers[op.cursorActivityCalled++].call(null, op.cm);
      }
    } while (i < callbacks.length);
  }

  // Finish an operation, updating the display and signalling delayed events
  function endOperation(cm) {
    var op = cm.curOp, group = op.ownsGroup;
    if (!group) return;

    try { fireCallbacksForOps(group); }
    finally {
      operationGroup = null;
      for (var i = 0; i < group.ops.length; i++)
        group.ops[i].cm.curOp = null;
      endOperations(group);
    }
  }

  // The DOM updates done when an operation finishes are batched so
  // that the minimum number of relayouts are required.
  function endOperations(group) {
    var ops = group.ops;
    for (var i = 0; i < ops.length; i++) // Read DOM
      endOperation_R1(ops[i]);
    for (var i = 0; i < ops.length; i++) // Write DOM (maybe)
      endOperation_W1(ops[i]);
    for (var i = 0; i < ops.length; i++) // Read DOM
      endOperation_R2(ops[i]);
    for (var i = 0; i < ops.length; i++) // Write DOM (maybe)
      endOperation_W2(ops[i]);
    for (var i = 0; i < ops.length; i++) // Read DOM
      endOperation_finish(ops[i]);
  }

  function endOperation_R1(op) {
    var cm = op.cm, display = cm.display;
    maybeClipScrollbars(cm);
    if (op.updateMaxLine) findMaxLine(cm);

    op.mustUpdate = op.viewChanged || op.forceUpdate || op.scrollTop != null ||
      op.scrollToPos && (op.scrollToPos.from.line < display.viewFrom ||
                         op.scrollToPos.to.line >= display.viewTo) ||
      display.maxLineChanged && cm.options.lineWrapping;
    op.update = op.mustUpdate &&
      new DisplayUpdate(cm, op.mustUpdate && {top: op.scrollTop, ensure: op.scrollToPos}, op.forceUpdate);
  }

  function endOperation_W1(op) {
    op.updatedDisplay = op.mustUpdate && updateDisplayIfNeeded(op.cm, op.update);
  }

  function endOperation_R2(op) {
    var cm = op.cm, display = cm.display;
    if (op.updatedDisplay) updateHeightsInViewport(cm);

    op.barMeasure = measureForScrollbars(cm);

    // If the max line changed since it was last measured, measure it,
    // and ensure the document's width matches it.
    // updateDisplay_W2 will use these properties to do the actual resizing
    if (display.maxLineChanged && !cm.options.lineWrapping) {
      op.adjustWidthTo = measureChar(cm, display.maxLine, display.maxLine.text.length).left + 3;
      cm.display.sizerWidth = op.adjustWidthTo;
      op.barMeasure.scrollWidth =
        Math.max(display.scroller.clientWidth, display.sizer.offsetLeft + op.adjustWidthTo + scrollGap(cm) + cm.display.barWidth);
      op.maxScrollLeft = Math.max(0, display.sizer.offsetLeft + op.adjustWidthTo - displayWidth(cm));
    }

    if (op.updatedDisplay || op.selectionChanged)
      op.preparedSelection = display.input.prepareSelection();
  }

  function endOperation_W2(op) {
    var cm = op.cm;

    if (op.adjustWidthTo != null) {
      cm.display.sizer.style.minWidth = op.adjustWidthTo + "px";
      if (op.maxScrollLeft < cm.doc.scrollLeft)
        setScrollLeft(cm, Math.min(cm.display.scroller.scrollLeft, op.maxScrollLeft), true);
      cm.display.maxLineChanged = false;
    }

    if (op.preparedSelection)
      cm.display.input.showSelection(op.preparedSelection);
    if (op.updatedDisplay || op.startHeight != cm.doc.height)
      updateScrollbars(cm, op.barMeasure);
    if (op.updatedDisplay)
      setDocumentHeight(cm, op.barMeasure);

    if (op.selectionChanged) restartBlink(cm);

    if (cm.state.focused && op.updateInput)
      cm.display.input.reset(op.typing);
    if (op.focus && op.focus == activeElt() && (!document.hasFocus || document.hasFocus()))
      ensureFocus(op.cm);
  }

  function endOperation_finish(op) {
    var cm = op.cm, display = cm.display, doc = cm.doc;

    if (op.updatedDisplay) postUpdateDisplay(cm, op.update);

    // Abort mouse wheel delta measurement, when scrolling explicitly
    if (display.wheelStartX != null && (op.scrollTop != null || op.scrollLeft != null || op.scrollToPos))
      display.wheelStartX = display.wheelStartY = null;

    // Propagate the scroll position to the actual DOM scroller
    if (op.scrollTop != null && (display.scroller.scrollTop != op.scrollTop || op.forceScroll)) {
      doc.scrollTop = Math.max(0, Math.min(display.scroller.scrollHeight - display.scroller.clientHeight, op.scrollTop));
      display.scrollbars.setScrollTop(doc.scrollTop);
      display.scroller.scrollTop = doc.scrollTop;
    }
    if (op.scrollLeft != null && (display.scroller.scrollLeft != op.scrollLeft || op.forceScroll)) {
      doc.scrollLeft = Math.max(0, Math.min(display.scroller.scrollWidth - display.scroller.clientWidth, op.scrollLeft));
      display.scrollbars.setScrollLeft(doc.scrollLeft);
      display.scroller.scrollLeft = doc.scrollLeft;
      alignHorizontally(cm);
    }
    // If we need to scroll a specific position into view, do so.
    if (op.scrollToPos) {
      var coords = scrollPosIntoView(cm, clipPos(doc, op.scrollToPos.from),
                                     clipPos(doc, op.scrollToPos.to), op.scrollToPos.margin);
      if (op.scrollToPos.isCursor && cm.state.focused) maybeScrollWindow(cm, coords);
    }

    // Fire events for markers that are hidden/unidden by editing or
    // undoing
    var hidden = op.maybeHiddenMarkers, unhidden = op.maybeUnhiddenMarkers;
    if (hidden) for (var i = 0; i < hidden.length; ++i)
      if (!hidden[i].lines.length) signal(hidden[i], "hide");
    if (unhidden) for (var i = 0; i < unhidden.length; ++i)
      if (unhidden[i].lines.length) signal(unhidden[i], "unhide");

    if (display.wrapper.offsetHeight)
      doc.scrollTop = cm.display.scroller.scrollTop;

    // Fire change events, and delayed event handlers
    if (op.changeObjs)
      signal(cm, "changes", cm, op.changeObjs);
    if (op.update)
      op.update.finish();
  }

  // Run the given function in an operation
  function runInOp(cm, f) {
    if (cm.curOp) return f();
    startOperation(cm);
    try { return f(); }
    finally { endOperation(cm); }
  }
  // Wraps a function in an operation. Returns the wrapped function.
  function operation(cm, f) {
    return function() {
      if (cm.curOp) return f.apply(cm, arguments);
      startOperation(cm);
      try { return f.apply(cm, arguments); }
      finally { endOperation(cm); }
    };
  }
  // Used to add methods to editor and doc instances, wrapping them in
  // operations.
  function methodOp(f) {
    return function() {
      if (this.curOp) return f.apply(this, arguments);
      startOperation(this);
      try { return f.apply(this, arguments); }
      finally { endOperation(this); }
    };
  }
  function docMethodOp(f) {
    return function() {
      var cm = this.cm;
      if (!cm || cm.curOp) return f.apply(this, arguments);
      startOperation(cm);
      try { return f.apply(this, arguments); }
      finally { endOperation(cm); }
    };
  }

  // VIEW TRACKING

  // These objects are used to represent the visible (currently drawn)
  // part of the document. A LineView may correspond to multiple
  // logical lines, if those are connected by collapsed ranges.
  function LineView(doc, line, lineN) {
    // The starting line
    this.line = line;
    // Continuing lines, if any
    this.rest = visualLineContinued(line);
    // Number of logical lines in this visual line
    this.size = this.rest ? lineNo(lst(this.rest)) - lineN + 1 : 1;
    this.node = this.text = null;
    this.hidden = lineIsHidden(doc, line);
  }

  // Create a range of LineView objects for the given lines.
  function buildViewArray(cm, from, to) {
    var array = [], nextPos;
    for (var pos = from; pos < to; pos = nextPos) {
      var view = new LineView(cm.doc, getLine(cm.doc, pos), pos);
      nextPos = pos + view.size;
      array.push(view);
    }
    return array;
  }

  // Updates the display.view data structure for a given change to the
  // document. From and to are in pre-change coordinates. Lendiff is
  // the amount of lines added or subtracted by the change. This is
  // used for changes that span multiple lines, or change the way
  // lines are divided into visual lines. regLineChange (below)
  // registers single-line changes.
  function regChange(cm, from, to, lendiff) {
    if (from == null) from = cm.doc.first;
    if (to == null) to = cm.doc.first + cm.doc.size;
    if (!lendiff) lendiff = 0;

    var display = cm.display;
    if (lendiff && to < display.viewTo &&
        (display.updateLineNumbers == null || display.updateLineNumbers > from))
      display.updateLineNumbers = from;

    cm.curOp.viewChanged = true;

    if (from >= display.viewTo) { // Change after
      if (sawCollapsedSpans && visualLineNo(cm.doc, from) < display.viewTo)
        resetView(cm);
    } else if (to <= display.viewFrom) { // Change before
      if (sawCollapsedSpans && visualLineEndNo(cm.doc, to + lendiff) > display.viewFrom) {
        resetView(cm);
      } else {
        display.viewFrom += lendiff;
        display.viewTo += lendiff;
      }
    } else if (from <= display.viewFrom && to >= display.viewTo) { // Full overlap
      resetView(cm);
    } else if (from <= display.viewFrom) { // Top overlap
      var cut = viewCuttingPoint(cm, to, to + lendiff, 1);
      if (cut) {
        display.view = display.view.slice(cut.index);
        display.viewFrom = cut.lineN;
        display.viewTo += lendiff;
      } else {
        resetView(cm);
      }
    } else if (to >= display.viewTo) { // Bottom overlap
      var cut = viewCuttingPoint(cm, from, from, -1);
      if (cut) {
        display.view = display.view.slice(0, cut.index);
        display.viewTo = cut.lineN;
      } else {
        resetView(cm);
      }
    } else { // Gap in the middle
      var cutTop = viewCuttingPoint(cm, from, from, -1);
      var cutBot = viewCuttingPoint(cm, to, to + lendiff, 1);
      if (cutTop && cutBot) {
        display.view = display.view.slice(0, cutTop.index)
          .concat(buildViewArray(cm, cutTop.lineN, cutBot.lineN))
          .concat(display.view.slice(cutBot.index));
        display.viewTo += lendiff;
      } else {
        resetView(cm);
      }
    }

    var ext = display.externalMeasured;
    if (ext) {
      if (to < ext.lineN)
        ext.lineN += lendiff;
      else if (from < ext.lineN + ext.size)
        display.externalMeasured = null;
    }
  }

  // Register a change to a single line. Type must be one of "text",
  // "gutter", "class", "widget"
  function regLineChange(cm, line, type) {
    cm.curOp.viewChanged = true;
    var display = cm.display, ext = cm.display.externalMeasured;
    if (ext && line >= ext.lineN && line < ext.lineN + ext.size)
      display.externalMeasured = null;

    if (line < display.viewFrom || line >= display.viewTo) return;
    var lineView = display.view[findViewIndex(cm, line)];
    if (lineView.node == null) return;
    var arr = lineView.changes || (lineView.changes = []);
    if (indexOf(arr, type) == -1) arr.push(type);
  }

  // Clear the view.
  function resetView(cm) {
    cm.display.viewFrom = cm.display.viewTo = cm.doc.first;
    cm.display.view = [];
    cm.display.viewOffset = 0;
  }

  // Find the view element corresponding to a given line. Return null
  // when the line isn't visible.
  function findViewIndex(cm, n) {
    if (n >= cm.display.viewTo) return null;
    n -= cm.display.viewFrom;
    if (n < 0) return null;
    var view = cm.display.view;
    for (var i = 0; i < view.length; i++) {
      n -= view[i].size;
      if (n < 0) return i;
    }
  }

  function viewCuttingPoint(cm, oldN, newN, dir) {
    var index = findViewIndex(cm, oldN), diff, view = cm.display.view;
    if (!sawCollapsedSpans || newN == cm.doc.first + cm.doc.size)
      return {index: index, lineN: newN};
    for (var i = 0, n = cm.display.viewFrom; i < index; i++)
      n += view[i].size;
    if (n != oldN) {
      if (dir > 0) {
        if (index == view.length - 1) return null;
        diff = (n + view[index].size) - oldN;
        index++;
      } else {
        diff = n - oldN;
      }
      oldN += diff; newN += diff;
    }
    while (visualLineNo(cm.doc, newN) != newN) {
      if (index == (dir < 0 ? 0 : view.length - 1)) return null;
      newN += dir * view[index - (dir < 0 ? 1 : 0)].size;
      index += dir;
    }
    return {index: index, lineN: newN};
  }

  // Force the view to cover a given range, adding empty view element
  // or clipping off existing ones as needed.
  function adjustView(cm, from, to) {
    var display = cm.display, view = display.view;
    if (view.length == 0 || from >= display.viewTo || to <= display.viewFrom) {
      display.view = buildViewArray(cm, from, to);
      display.viewFrom = from;
    } else {
      if (display.viewFrom > from)
        display.view = buildViewArray(cm, from, display.viewFrom).concat(display.view);
      else if (display.viewFrom < from)
        display.view = display.view.slice(findViewIndex(cm, from));
      display.viewFrom = from;
      if (display.viewTo < to)
        display.view = display.view.concat(buildViewArray(cm, display.viewTo, to));
      else if (display.viewTo > to)
        display.view = display.view.slice(0, findViewIndex(cm, to));
    }
    display.viewTo = to;
  }

  // Count the number of lines in the view whose DOM representation is
  // out of date (or nonexistent).
  function countDirtyView(cm) {
    var view = cm.display.view, dirty = 0;
    for (var i = 0; i < view.length; i++) {
      var lineView = view[i];
      if (!lineView.hidden && (!lineView.node || lineView.changes)) ++dirty;
    }
    return dirty;
  }

  // EVENT HANDLERS

  // Attach the necessary event handlers when initializing the editor
  function registerEventHandlers(cm) {
    var d = cm.display;
    on(d.scroller, "mousedown", operation(cm, onMouseDown));
    // Older IE's will not fire a second mousedown for a double click
    if (ie && ie_version < 11)
      on(d.scroller, "dblclick", operation(cm, function(e) {
        if (signalDOMEvent(cm, e)) return;
        var pos = posFromMouse(cm, e);
        if (!pos || clickInGutter(cm, e) || eventInWidget(cm.display, e)) return;
        e_preventDefault(e);
        var word = cm.findWordAt(pos);
        extendSelection(cm.doc, word.anchor, word.head);
      }));
    else
      on(d.scroller, "dblclick", function(e) { signalDOMEvent(cm, e) || e_preventDefault(e); });
    // Some browsers fire contextmenu *after* opening the menu, at
    // which point we can't mess with it anymore. Context menu is
    // handled in onMouseDown for these browsers.
    if (!captureRightClick) on(d.scroller, "contextmenu", function(e) {onContextMenu(cm, e);});

    // Used to suppress mouse event handling when a touch happens
    var touchFinished, prevTouch = {end: 0};
    function finishTouch() {
      if (d.activeTouch) {
        touchFinished = setTimeout(function() {d.activeTouch = null;}, 1000);
        prevTouch = d.activeTouch;
        prevTouch.end = +new Date;
      }
    };
    function isMouseLikeTouchEvent(e) {
      if (e.touches.length != 1) return false;
      var touch = e.touches[0];
      return touch.radiusX <= 1 && touch.radiusY <= 1;
    }
    function farAway(touch, other) {
      if (other.left == null) return true;
      var dx = other.left - touch.left, dy = other.top - touch.top;
      return dx * dx + dy * dy > 20 * 20;
    }
    on(d.scroller, "touchstart", function(e) {
      if (!signalDOMEvent(cm, e) && !isMouseLikeTouchEvent(e)) {
        clearTimeout(touchFinished);
        var now = +new Date;
        d.activeTouch = {start: now, moved: false,
                         prev: now - prevTouch.end <= 300 ? prevTouch : null};
        if (e.touches.length == 1) {
          d.activeTouch.left = e.touches[0].pageX;
          d.activeTouch.top = e.touches[0].pageY;
        }
      }
    });
    on(d.scroller, "touchmove", function() {
      if (d.activeTouch) d.activeTouch.moved = true;
    });
    on(d.scroller, "touchend", function(e) {
      var touch = d.activeTouch;
      if (touch && !eventInWidget(d, e) && touch.left != null &&
          !touch.moved && new Date - touch.start < 300) {
        var pos = cm.coordsChar(d.activeTouch, "page"), range;
        if (!touch.prev || farAway(touch, touch.prev)) // Single tap
          range = new Range(pos, pos);
        else if (!touch.prev.prev || farAway(touch, touch.prev.prev)) // Double tap
          range = cm.findWordAt(pos);
        else // Triple tap
          range = new Range(Pos(pos.line, 0), clipPos(cm.doc, Pos(pos.line + 1, 0)));
        cm.setSelection(range.anchor, range.head);
        cm.focus();
        e_preventDefault(e);
      }
      finishTouch();
    });
    on(d.scroller, "touchcancel", finishTouch);

    // Sync scrolling between fake scrollbars and real scrollable
    // area, ensure viewport is updated when scrolling.
    on(d.scroller, "scroll", function() {
      if (d.scroller.clientHeight) {
        setScrollTop(cm, d.scroller.scrollTop);
        setScrollLeft(cm, d.scroller.scrollLeft, true);
        signal(cm, "scroll", cm);
      }
    });

    // Listen to wheel events in order to try and update the viewport on time.
    on(d.scroller, "mousewheel", function(e){onScrollWheel(cm, e);});
    on(d.scroller, "DOMMouseScroll", function(e){onScrollWheel(cm, e);});

    // Prevent wrapper from ever scrolling
    on(d.wrapper, "scroll", function() { d.wrapper.scrollTop = d.wrapper.scrollLeft = 0; });

    d.dragFunctions = {
      enter: function(e) {if (!signalDOMEvent(cm, e)) e_stop(e);},
      over: function(e) {if (!signalDOMEvent(cm, e)) { onDragOver(cm, e); e_stop(e); }},
      start: function(e){onDragStart(cm, e);},
      drop: operation(cm, onDrop),
      leave: function(e) {if (!signalDOMEvent(cm, e)) { clearDragCursor(cm); }}
    };

    var inp = d.input.getField();
    on(inp, "keyup", function(e) { onKeyUp.call(cm, e); });
    on(inp, "keydown", operation(cm, onKeyDown));
    on(inp, "keypress", operation(cm, onKeyPress));
    on(inp, "focus", bind(onFocus, cm));
    on(inp, "blur", bind(onBlur, cm));
  }

  function dragDropChanged(cm, value, old) {
    var wasOn = old && old != CodeMirror.Init;
    if (!value != !wasOn) {
      var funcs = cm.display.dragFunctions;
      var toggle = value ? on : off;
      toggle(cm.display.scroller, "dragstart", funcs.start);
      toggle(cm.display.scroller, "dragenter", funcs.enter);
      toggle(cm.display.scroller, "dragover", funcs.over);
      toggle(cm.display.scroller, "dragleave", funcs.leave);
      toggle(cm.display.scroller, "drop", funcs.drop);
    }
  }

  // Called when the window resizes
  function onResize(cm) {
    var d = cm.display;
    if (d.lastWrapHeight == d.wrapper.clientHeight && d.lastWrapWidth == d.wrapper.clientWidth)
      return;
    // Might be a text scaling operation, clear size caches.
    d.cachedCharWidth = d.cachedTextHeight = d.cachedPaddingH = null;
    d.scrollbarsClipped = false;
    cm.setSize();
  }

  // MOUSE EVENTS

  // Return true when the given mouse event happened in a widget
  function eventInWidget(display, e) {
    for (var n = e_target(e); n != display.wrapper; n = n.parentNode) {
      if (!n || (n.nodeType == 1 && n.getAttribute("cm-ignore-events") == "true") ||
          (n.parentNode == display.sizer && n != display.mover))
        return true;
    }
  }

  // Given a mouse event, find the corresponding position. If liberal
  // is false, it checks whether a gutter or scrollbar was clicked,
  // and returns null if it was. forRect is used by rectangular
  // selections, and tries to estimate a character position even for
  // coordinates beyond the right of the text.
  function posFromMouse(cm, e, liberal, forRect) {
    var display = cm.display;
    if (!liberal && e_target(e).getAttribute("cm-not-content") == "true") return null;

    var x, y, space = display.lineSpace.getBoundingClientRect();
    // Fails unpredictably on IE[67] when mouse is dragged around quickly.
    try { x = e.clientX - space.left; y = e.clientY - space.top; }
    catch (e) { return null; }
    var coords = coordsChar(cm, x, y), line;
    if (forRect && coords.xRel == 1 && (line = getLine(cm.doc, coords.line).text).length == coords.ch) {
      var colDiff = countColumn(line, line.length, cm.options.tabSize) - line.length;
      coords = Pos(coords.line, Math.max(0, Math.round((x - paddingH(cm.display).left) / charWidth(cm.display)) - colDiff));
    }
    return coords;
  }

  // A mouse down can be a single click, double click, triple click,
  // start of selection drag, start of text drag, new cursor
  // (ctrl-click), rectangle drag (alt-drag), or xwin
  // middle-click-paste. Or it might be a click on something we should
  // not interfere with, such as a scrollbar or widget.
  function onMouseDown(e) {
    var cm = this, display = cm.display;
    if (signalDOMEvent(cm, e) || display.activeTouch && display.input.supportsTouch()) return;
    display.shift = e.shiftKey;

    if (eventInWidget(display, e)) {
      if (!webkit) {
        // Briefly turn off draggability, to allow widgets to do
        // normal dragging things.
        display.scroller.draggable = false;
        setTimeout(function(){display.scroller.draggable = true;}, 100);
      }
      return;
    }
    if (clickInGutter(cm, e)) return;
    var start = posFromMouse(cm, e);
    window.focus();

    switch (e_button(e)) {
    case 1:
      // #3261: make sure, that we're not starting a second selection
      if (cm.state.selectingText)
        cm.state.selectingText(e);
      else if (start)
        leftButtonDown(cm, e, start);
      else if (e_target(e) == display.scroller)
        e_preventDefault(e);
      break;
    case 2:
      if (webkit) cm.state.lastMiddleDown = +new Date;
      if (start) extendSelection(cm.doc, start);
      setTimeout(function() {display.input.focus();}, 20);
      e_preventDefault(e);
      break;
    case 3:
      if (captureRightClick) onContextMenu(cm, e);
      else delayBlurEvent(cm);
      break;
    }
  }

  var lastClick, lastDoubleClick;
  function leftButtonDown(cm, e, start) {
    if (ie) setTimeout(bind(ensureFocus, cm), 0);
    else cm.curOp.focus = activeElt();

    var now = +new Date, type;
    if (lastDoubleClick && lastDoubleClick.time > now - 400 && cmp(lastDoubleClick.pos, start) == 0) {
      type = "triple";
    } else if (lastClick && lastClick.time > now - 400 && cmp(lastClick.pos, start) == 0) {
      type = "double";
      lastDoubleClick = {time: now, pos: start};
    } else {
      type = "single";
      lastClick = {time: now, pos: start};
    }

    var sel = cm.doc.sel, modifier = mac ? e.metaKey : e.ctrlKey, contained;
    if (cm.options.dragDrop && dragAndDrop && !cm.isReadOnly() &&
        type == "single" && (contained = sel.contains(start)) > -1 &&
        (cmp((contained = sel.ranges[contained]).from(), start) < 0 || start.xRel > 0) &&
        (cmp(contained.to(), start) > 0 || start.xRel < 0))
      leftButtonStartDrag(cm, e, start, modifier);
    else
      leftButtonSelect(cm, e, start, type, modifier);
  }

  // Start a text drag. When it ends, see if any dragging actually
  // happen, and treat as a click if it didn't.
  function leftButtonStartDrag(cm, e, start, modifier) {
    var display = cm.display, startTime = +new Date;
    var dragEnd = operation(cm, function(e2) {
      if (webkit) display.scroller.draggable = false;
      cm.state.draggingText = false;
      off(document, "mouseup", dragEnd);
      off(display.scroller, "drop", dragEnd);
      if (Math.abs(e.clientX - e2.clientX) + Math.abs(e.clientY - e2.clientY) < 10) {
        e_preventDefault(e2);
        if (!modifier && +new Date - 200 < startTime)
          extendSelection(cm.doc, start);
        // Work around unexplainable focus problem in IE9 (#2127) and Chrome (#3081)
        if (webkit || ie && ie_version == 9)
          setTimeout(function() {document.body.focus(); display.input.focus();}, 20);
        else
          display.input.focus();
      }
    });
    // Let the drag handler handle this.
    if (webkit) display.scroller.draggable = true;
    cm.state.draggingText = dragEnd;
    // IE's approach to draggable
    if (display.scroller.dragDrop) display.scroller.dragDrop();
    on(document, "mouseup", dragEnd);
    on(display.scroller, "drop", dragEnd);
  }

  // Normal selection, as opposed to text dragging.
  function leftButtonSelect(cm, e, start, type, addNew) {
    var display = cm.display, doc = cm.doc;
    e_preventDefault(e);

    var ourRange, ourIndex, startSel = doc.sel, ranges = startSel.ranges;
    if (addNew && !e.shiftKey) {
      ourIndex = doc.sel.contains(start);
      if (ourIndex > -1)
        ourRange = ranges[ourIndex];
      else
        ourRange = new Range(start, start);
    } else {
      ourRange = doc.sel.primary();
      ourIndex = doc.sel.primIndex;
    }

    if (chromeOS ? e.shiftKey && e.metaKey : e.altKey) {
      type = "rect";
      if (!addNew) ourRange = new Range(start, start);
      start = posFromMouse(cm, e, true, true);
      ourIndex = -1;
    } else if (type == "double") {
      var word = cm.findWordAt(start);
      if (cm.display.shift || doc.extend)
        ourRange = extendRange(doc, ourRange, word.anchor, word.head);
      else
        ourRange = word;
    } else if (type == "triple") {
      var line = new Range(Pos(start.line, 0), clipPos(doc, Pos(start.line + 1, 0)));
      if (cm.display.shift || doc.extend)
        ourRange = extendRange(doc, ourRange, line.anchor, line.head);
      else
        ourRange = line;
    } else {
      ourRange = extendRange(doc, ourRange, start);
    }

    if (!addNew) {
      ourIndex = 0;
      setSelection(doc, new Selection([ourRange], 0), sel_mouse);
      startSel = doc.sel;
    } else if (ourIndex == -1) {
      ourIndex = ranges.length;
      setSelection(doc, normalizeSelection(ranges.concat([ourRange]), ourIndex),
                   {scroll: false, origin: "*mouse"});
    } else if (ranges.length > 1 && ranges[ourIndex].empty() && type == "single" && !e.shiftKey) {
      setSelection(doc, normalizeSelection(ranges.slice(0, ourIndex).concat(ranges.slice(ourIndex + 1)), 0),
                   {scroll: false, origin: "*mouse"});
      startSel = doc.sel;
    } else {
      replaceOneSelection(doc, ourIndex, ourRange, sel_mouse);
    }

    var lastPos = start;
    function extendTo(pos) {
      if (cmp(lastPos, pos) == 0) return;
      lastPos = pos;

      if (type == "rect") {
        var ranges = [], tabSize = cm.options.tabSize;
        var startCol = countColumn(getLine(doc, start.line).text, start.ch, tabSize);
        var posCol = countColumn(getLine(doc, pos.line).text, pos.ch, tabSize);
        var left = Math.min(startCol, posCol), right = Math.max(startCol, posCol);
        for (var line = Math.min(start.line, pos.line), end = Math.min(cm.lastLine(), Math.max(start.line, pos.line));
             line <= end; line++) {
          var text = getLine(doc, line).text, leftPos = findColumn(text, left, tabSize);
          if (left == right)
            ranges.push(new Range(Pos(line, leftPos), Pos(line, leftPos)));
          else if (text.length > leftPos)
            ranges.push(new Range(Pos(line, leftPos), Pos(line, findColumn(text, right, tabSize))));
        }
        if (!ranges.length) ranges.push(new Range(start, start));
        setSelection(doc, normalizeSelection(startSel.ranges.slice(0, ourIndex).concat(ranges), ourIndex),
                     {origin: "*mouse", scroll: false});
        cm.scrollIntoView(pos);
      } else {
        var oldRange = ourRange;
        var anchor = oldRange.anchor, head = pos;
        if (type != "single") {
          if (type == "double")
            var range = cm.findWordAt(pos);
          else
            var range = new Range(Pos(pos.line, 0), clipPos(doc, Pos(pos.line + 1, 0)));
          if (cmp(range.anchor, anchor) > 0) {
            head = range.head;
            anchor = minPos(oldRange.from(), range.anchor);
          } else {
            head = range.anchor;
            anchor = maxPos(oldRange.to(), range.head);
          }
        }
        var ranges = startSel.ranges.slice(0);
        ranges[ourIndex] = new Range(clipPos(doc, anchor), head);
        setSelection(doc, normalizeSelection(ranges, ourIndex), sel_mouse);
      }
    }

    var editorSize = display.wrapper.getBoundingClientRect();
    // Used to ensure timeout re-tries don't fire when another extend
    // happened in the meantime (clearTimeout isn't reliable -- at
    // least on Chrome, the timeouts still happen even when cleared,
    // if the clear happens after their scheduled firing time).
    var counter = 0;

    function extend(e) {
      var curCount = ++counter;
      var cur = posFromMouse(cm, e, true, type == "rect");
      if (!cur) return;
      if (cmp(cur, lastPos) != 0) {
        cm.curOp.focus = activeElt();
        extendTo(cur);
        var visible = visibleLines(display, doc);
        if (cur.line >= visible.to || cur.line < visible.from)
          setTimeout(operation(cm, function(){if (counter == curCount) extend(e);}), 150);
      } else {
        var outside = e.clientY < editorSize.top ? -20 : e.clientY > editorSize.bottom ? 20 : 0;
        if (outside) setTimeout(operation(cm, function() {
          if (counter != curCount) return;
          display.scroller.scrollTop += outside;
          extend(e);
        }), 50);
      }
    }

    function done(e) {
      cm.state.selectingText = false;
      counter = Infinity;
      e_preventDefault(e);
      display.input.focus();
      off(document, "mousemove", move);
      off(document, "mouseup", up);
      doc.history.lastSelOrigin = null;
    }

    var move = operation(cm, function(e) {
      if (!e_button(e)) done(e);
      else extend(e);
    });
    var up = operation(cm, done);
    cm.state.selectingText = up;
    on(document, "mousemove", move);
    on(document, "mouseup", up);
  }

  // Determines whether an event happened in the gutter, and fires the
  // handlers for the corresponding event.
  function gutterEvent(cm, e, type, prevent) {
    try { var mX = e.clientX, mY = e.clientY; }
    catch(e) { return false; }
    if (mX >= Math.floor(cm.display.gutters.getBoundingClientRect().right)) return false;
    if (prevent) e_preventDefault(e);

    var display = cm.display;
    var lineBox = display.lineDiv.getBoundingClientRect();

    if (mY > lineBox.bottom || !hasHandler(cm, type)) return e_defaultPrevented(e);
    mY -= lineBox.top - display.viewOffset;

    for (var i = 0; i < cm.options.gutters.length; ++i) {
      var g = display.gutters.childNodes[i];
      if (g && g.getBoundingClientRect().right >= mX) {
        var line = lineAtHeight(cm.doc, mY);
        var gutter = cm.options.gutters[i];
        signal(cm, type, cm, line, gutter, e);
        return e_defaultPrevented(e);
      }
    }
  }

  function clickInGutter(cm, e) {
    return gutterEvent(cm, e, "gutterClick", true);
  }

  // Kludge to work around strange IE behavior where it'll sometimes
  // re-fire a series of drag-related events right after the drop (#1551)
  var lastDrop = 0;

  function onDrop(e) {
    var cm = this;
    clearDragCursor(cm);
    if (signalDOMEvent(cm, e) || eventInWidget(cm.display, e))
      return;
    e_preventDefault(e);
    if (ie) lastDrop = +new Date;
    var pos = posFromMouse(cm, e, true), files = e.dataTransfer.files;
    if (!pos || cm.isReadOnly()) return;
    // Might be a file drop, in which case we simply extract the text
    // and insert it.
    if (files && files.length && window.FileReader && window.File) {
      var n = files.length, text = Array(n), read = 0;
      var loadFile = function(file, i) {
        if (cm.options.allowDropFileTypes &&
            indexOf(cm.options.allowDropFileTypes, file.type) == -1)
          return;

        var reader = new FileReader;
        reader.onload = operation(cm, function() {
          var content = reader.result;
          if (/[\x00-\x08\x0e-\x1f]{2}/.test(content)) content = "";
          text[i] = content;
          if (++read == n) {
            pos = clipPos(cm.doc, pos);
            var change = {from: pos, to: pos,
                          text: cm.doc.splitLines(text.join(cm.doc.lineSeparator())),
                          origin: "paste"};
            makeChange(cm.doc, change);
            setSelectionReplaceHistory(cm.doc, simpleSelection(pos, changeEnd(change)));
          }
        });
        reader.readAsText(file);
      };
      for (var i = 0; i < n; ++i) loadFile(files[i], i);
    } else { // Normal drop
      // Don't do a replace if the drop happened inside of the selected text.
      if (cm.state.draggingText && cm.doc.sel.contains(pos) > -1) {
        cm.state.draggingText(e);
        // Ensure the editor is re-focused
        setTimeout(function() {cm.display.input.focus();}, 20);
        return;
      }
      try {
        var text = e.dataTransfer.getData("Text");
        if (text) {
          if (cm.state.draggingText && !(mac ? e.altKey : e.ctrlKey))
            var selected = cm.listSelections();
          setSelectionNoUndo(cm.doc, simpleSelection(pos, pos));
          if (selected) for (var i = 0; i < selected.length; ++i)
            replaceRange(cm.doc, "", selected[i].anchor, selected[i].head, "drag");
          cm.replaceSelection(text, "around", "paste");
          cm.display.input.focus();
        }
      }
      catch(e){}
    }
  }

  function onDragStart(cm, e) {
    if (ie && (!cm.state.draggingText || +new Date - lastDrop < 100)) { e_stop(e); return; }
    if (signalDOMEvent(cm, e) || eventInWidget(cm.display, e)) return;

    e.dataTransfer.setData("Text", cm.getSelection());
    e.dataTransfer.effectAllowed = "copyMove"

    // Use dummy image instead of default browsers image.
    // Recent Safari (~6.0.2) have a tendency to segfault when this happens, so we don't do it there.
    if (e.dataTransfer.setDragImage && !safari) {
      var img = elt("img", null, null, "position: fixed; left: 0; top: 0;");
      img.src = "data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";
      if (presto) {
        img.width = img.height = 1;
        cm.display.wrapper.appendChild(img);
        // Force a relayout, or Opera won't use our image for some obscure reason
        img._top = img.offsetTop;
      }
      e.dataTransfer.setDragImage(img, 0, 0);
      if (presto) img.parentNode.removeChild(img);
    }
  }

  function onDragOver(cm, e) {
    var pos = posFromMouse(cm, e);
    if (!pos) return;
    var frag = document.createDocumentFragment();
    drawSelectionCursor(cm, pos, frag);
    if (!cm.display.dragCursor) {
      cm.display.dragCursor = elt("div", null, "CodeMirror-cursors CodeMirror-dragcursors");
      cm.display.lineSpace.insertBefore(cm.display.dragCursor, cm.display.cursorDiv);
    }
    removeChildrenAndAdd(cm.display.dragCursor, frag);
  }

  function clearDragCursor(cm) {
    if (cm.display.dragCursor) {
      cm.display.lineSpace.removeChild(cm.display.dragCursor);
      cm.display.dragCursor = null;
    }
  }

  // SCROLL EVENTS

  // Sync the scrollable area and scrollbars, ensure the viewport
  // covers the visible area.
  function setScrollTop(cm, val) {
    if (Math.abs(cm.doc.scrollTop - val) < 2) return;
    cm.doc.scrollTop = val;
    if (!gecko) updateDisplaySimple(cm, {top: val});
    if (cm.display.scroller.scrollTop != val) cm.display.scroller.scrollTop = val;
    cm.display.scrollbars.setScrollTop(val);
    if (gecko) updateDisplaySimple(cm);
    startWorker(cm, 100);
  }
  // Sync scroller and scrollbar, ensure the gutter elements are
  // aligned.
  function setScrollLeft(cm, val, isScroller) {
    if (isScroller ? val == cm.doc.scrollLeft : Math.abs(cm.doc.scrollLeft - val) < 2) return;
    val = Math.min(val, cm.display.scroller.scrollWidth - cm.display.scroller.clientWidth);
    cm.doc.scrollLeft = val;
    alignHorizontally(cm);
    if (cm.display.scroller.scrollLeft != val) cm.display.scroller.scrollLeft = val;
    cm.display.scrollbars.setScrollLeft(val);
  }

  // Since the delta values reported on mouse wheel events are
  // unstandardized between browsers and even browser versions, and
  // generally horribly unpredictable, this code starts by measuring
  // the scroll effect that the first few mouse wheel events have,
  // and, from that, detects the way it can convert deltas to pixel
  // offsets afterwards.
  //
  // The reason we want to know the amount a wheel event will scroll
  // is that it gives us a chance to update the display before the
  // actual scrolling happens, reducing flickering.

  var wheelSamples = 0, wheelPixelsPerUnit = null;
  // Fill in a browser-detected starting value on browsers where we
  // know one. These don't have to be accurate -- the result of them
  // being wrong would just be a slight flicker on the first wheel
  // scroll (if it is large enough).
  if (ie) wheelPixelsPerUnit = -.53;
  else if (gecko) wheelPixelsPerUnit = 15;
  else if (chrome) wheelPixelsPerUnit = -.7;
  else if (safari) wheelPixelsPerUnit = -1/3;

  var wheelEventDelta = function(e) {
    var dx = e.wheelDeltaX, dy = e.wheelDeltaY;
    if (dx == null && e.detail && e.axis == e.HORIZONTAL_AXIS) dx = e.detail;
    if (dy == null && e.detail && e.axis == e.VERTICAL_AXIS) dy = e.detail;
    else if (dy == null) dy = e.wheelDelta;
    return {x: dx, y: dy};
  };
  CodeMirror.wheelEventPixels = function(e) {
    var delta = wheelEventDelta(e);
    delta.x *= wheelPixelsPerUnit;
    delta.y *= wheelPixelsPerUnit;
    return delta;
  };

  function onScrollWheel(cm, e) {
    var delta = wheelEventDelta(e), dx = delta.x, dy = delta.y;

    var display = cm.display, scroll = display.scroller;
    // Quit if there's nothing to scroll here
    var canScrollX = scroll.scrollWidth > scroll.clientWidth;
    var canScrollY = scroll.scrollHeight > scroll.clientHeight;
    if (!(dx && canScrollX || dy && canScrollY)) return;

    // Webkit browsers on OS X abort momentum scrolls when the target
    // of the scroll event is removed from the scrollable element.
    // This hack (see related code in patchDisplay) makes sure the
    // element is kept around.
    if (dy && mac && webkit) {
      outer: for (var cur = e.target, view = display.view; cur != scroll; cur = cur.parentNode) {
        for (var i = 0; i < view.length; i++) {
          if (view[i].node == cur) {
            cm.display.currentWheelTarget = cur;
            break outer;
          }
        }
      }
    }

    // On some browsers, horizontal scrolling will cause redraws to
    // happen before the gutter has been realigned, causing it to
    // wriggle around in a most unseemly way. When we have an
    // estimated pixels/delta value, we just handle horizontal
    // scrolling entirely here. It'll be slightly off from native, but
    // better than glitching out.
    if (dx && !gecko && !presto && wheelPixelsPerUnit != null) {
      if (dy && canScrollY)
        setScrollTop(cm, Math.max(0, Math.min(scroll.scrollTop + dy * wheelPixelsPerUnit, scroll.scrollHeight - scroll.clientHeight)));
      setScrollLeft(cm, Math.max(0, Math.min(scroll.scrollLeft + dx * wheelPixelsPerUnit, scroll.scrollWidth - scroll.clientWidth)));
      // Only prevent default scrolling if vertical scrolling is
      // actually possible. Otherwise, it causes vertical scroll
      // jitter on OSX trackpads when deltaX is small and deltaY
      // is large (issue #3579)
      if (!dy || (dy && canScrollY))
        e_preventDefault(e);
      display.wheelStartX = null; // Abort measurement, if in progress
      return;
    }

    // 'Project' the visible viewport to cover the area that is being
    // scrolled into view (if we know enough to estimate it).
    if (dy && wheelPixelsPerUnit != null) {
      var pixels = dy * wheelPixelsPerUnit;
      var top = cm.doc.scrollTop, bot = top + display.wrapper.clientHeight;
      if (pixels < 0) top = Math.max(0, top + pixels - 50);
      else bot = Math.min(cm.doc.height, bot + pixels + 50);
      updateDisplaySimple(cm, {top: top, bottom: bot});
    }

    if (wheelSamples < 20) {
      if (display.wheelStartX == null) {
        display.wheelStartX = scroll.scrollLeft; display.wheelStartY = scroll.scrollTop;
        display.wheelDX = dx; display.wheelDY = dy;
        setTimeout(function() {
          if (display.wheelStartX == null) return;
          var movedX = scroll.scrollLeft - display.wheelStartX;
          var movedY = scroll.scrollTop - display.wheelStartY;
          var sample = (movedY && display.wheelDY && movedY / display.wheelDY) ||
            (movedX && display.wheelDX && movedX / display.wheelDX);
          display.wheelStartX = display.wheelStartY = null;
          if (!sample) return;
          wheelPixelsPerUnit = (wheelPixelsPerUnit * wheelSamples + sample) / (wheelSamples + 1);
          ++wheelSamples;
        }, 200);
      } else {
        display.wheelDX += dx; display.wheelDY += dy;
      }
    }
  }

  // KEY EVENTS

  // Run a handler that was bound to a key.
  function doHandleBinding(cm, bound, dropShift) {
    if (typeof bound == "string") {
      bound = commands[bound];
      if (!bound) return false;
    }
    // Ensure previous input has been read, so that the handler sees a
    // consistent view of the document
    cm.display.input.ensurePolled();
    var prevShift = cm.display.shift, done = false;
    try {
      if (cm.isReadOnly()) cm.state.suppressEdits = true;
      if (dropShift) cm.display.shift = false;
      done = bound(cm) != Pass;
    } finally {
      cm.display.shift = prevShift;
      cm.state.suppressEdits = false;
    }
    return done;
  }

  function lookupKeyForEditor(cm, name, handle) {
    for (var i = 0; i < cm.state.keyMaps.length; i++) {
      var result = lookupKey(name, cm.state.keyMaps[i], handle, cm);
      if (result) return result;
    }
    return (cm.options.extraKeys && lookupKey(name, cm.options.extraKeys, handle, cm))
      || lookupKey(name, cm.options.keyMap, handle, cm);
  }

  var stopSeq = new Delayed;
  function dispatchKey(cm, name, e, handle) {
    var seq = cm.state.keySeq;
    if (seq) {
      if (isModifierKey(name)) return "handled";
      stopSeq.set(50, function() {
        if (cm.state.keySeq == seq) {
          cm.state.keySeq = null;
          cm.display.input.reset();
        }
      });
      name = seq + " " + name;
    }
    var result = lookupKeyForEditor(cm, name, handle);

    if (result == "multi")
      cm.state.keySeq = name;
    if (result == "handled")
      signalLater(cm, "keyHandled", cm, name, e);

    if (result == "handled" || result == "multi") {
      e_preventDefault(e);
      restartBlink(cm);
    }

    if (seq && !result && /\'$/.test(name)) {
      e_preventDefault(e);
      return true;
    }
    return !!result;
  }

  // Handle a key from the keydown event.
  function handleKeyBinding(cm, e) {
    var name = keyName(e, true);
    if (!name) return false;

    if (e.shiftKey && !cm.state.keySeq) {
      // First try to resolve full name (including 'Shift-'). Failing
      // that, see if there is a cursor-motion command (starting with
      // 'go') bound to the keyname without 'Shift-'.
      return dispatchKey(cm, "Shift-" + name, e, function(b) {return doHandleBinding(cm, b, true);})
          || dispatchKey(cm, name, e, function(b) {
               if (typeof b == "string" ? /^go[A-Z]/.test(b) : b.motion)
                 return doHandleBinding(cm, b);
             });
    } else {
      return dispatchKey(cm, name, e, function(b) { return doHandleBinding(cm, b); });
    }
  }

  // Handle a key from the keypress event
  function handleCharBinding(cm, e, ch) {
    return dispatchKey(cm, "'" + ch + "'", e,
                       function(b) { return doHandleBinding(cm, b, true); });
  }

  var lastStoppedKey = null;
  function onKeyDown(e) {
    var cm = this;
    cm.curOp.focus = activeElt();
    if (signalDOMEvent(cm, e)) return;
    // IE does strange things with escape.
    if (ie && ie_version < 11 && e.keyCode == 27) e.returnValue = false;
    var code = e.keyCode;
    cm.display.shift = code == 16 || e.shiftKey;
    var handled = handleKeyBinding(cm, e);
    if (presto) {
      lastStoppedKey = handled ? code : null;
      // Opera has no cut event... we try to at least catch the key combo
      if (!handled && code == 88 && !hasCopyEvent && (mac ? e.metaKey : e.ctrlKey))
        cm.replaceSelection("", null, "cut");
    }

    // Turn mouse into crosshair when Alt is held on Mac.
    if (code == 18 && !/\bCodeMirror-crosshair\b/.test(cm.display.lineDiv.className))
      showCrossHair(cm);
  }

  function showCrossHair(cm) {
    var lineDiv = cm.display.lineDiv;
    addClass(lineDiv, "CodeMirror-crosshair");

    function up(e) {
      if (e.keyCode == 18 || !e.altKey) {
        rmClass(lineDiv, "CodeMirror-crosshair");
        off(document, "keyup", up);
        off(document, "mouseover", up);
      }
    }
    on(document, "keyup", up);
    on(document, "mouseover", up);
  }

  function onKeyUp(e) {
    if (e.keyCode == 16) this.doc.sel.shift = false;
    signalDOMEvent(this, e);
  }

  function onKeyPress(e) {
    var cm = this;
    if (eventInWidget(cm.display, e) || signalDOMEvent(cm, e) || e.ctrlKey && !e.altKey || mac && e.metaKey) return;
    var keyCode = e.keyCode, charCode = e.charCode;
    if (presto && keyCode == lastStoppedKey) {lastStoppedKey = null; e_preventDefault(e); return;}
    if ((presto && (!e.which || e.which < 10)) && handleKeyBinding(cm, e)) return;
    var ch = String.fromCharCode(charCode == null ? keyCode : charCode);
    if (handleCharBinding(cm, e, ch)) return;
    cm.display.input.onKeyPress(e);
  }

  // FOCUS/BLUR EVENTS

  function delayBlurEvent(cm) {
    cm.state.delayingBlurEvent = true;
    setTimeout(function() {
      if (cm.state.delayingBlurEvent) {
        cm.state.delayingBlurEvent = false;
        onBlur(cm);
      }
    }, 100);
  }

  function onFocus(cm) {
    if (cm.state.delayingBlurEvent) cm.state.delayingBlurEvent = false;

    if (cm.options.readOnly == "nocursor") return;
    if (!cm.state.focused) {
      signal(cm, "focus", cm);
      cm.state.focused = true;
      addClass(cm.display.wrapper, "CodeMirror-focused");
      // This test prevents this from firing when a context
      // menu is closed (since the input reset would kill the
      // select-all detection hack)
      if (!cm.curOp && cm.display.selForContextMenu != cm.doc.sel) {
        cm.display.input.reset();
        if (webkit) setTimeout(function() { cm.display.input.reset(true); }, 20); // Issue #1730
      }
      cm.display.input.receivedFocus();
    }
    restartBlink(cm);
  }
  function onBlur(cm) {
    if (cm.state.delayingBlurEvent) return;

    if (cm.state.focused) {
      signal(cm, "blur", cm);
      cm.state.focused = false;
      rmClass(cm.display.wrapper, "CodeMirror-focused");
    }
    clearInterval(cm.display.blinker);
    setTimeout(function() {if (!cm.state.focused) cm.display.shift = false;}, 150);
  }

  // CONTEXT MENU HANDLING

  // To make the context menu work, we need to briefly unhide the
  // textarea (making it as unobtrusive as possible) to let the
  // right-click take effect on it.
  function onContextMenu(cm, e) {
    if (eventInWidget(cm.display, e) || contextMenuInGutter(cm, e)) return;
    if (signalDOMEvent(cm, e, "contextmenu")) return;
    cm.display.input.onContextMenu(e);
  }

  function contextMenuInGutter(cm, e) {
    if (!hasHandler(cm, "gutterContextMenu")) return false;
    return gutterEvent(cm, e, "gutterContextMenu", false);
  }

  // UPDATING

  // Compute the position of the end of a change (its 'to' property
  // refers to the pre-change end).
  var changeEnd = CodeMirror.changeEnd = function(change) {
    if (!change.text) return change.to;
    return Pos(change.from.line + change.text.length - 1,
               lst(change.text).length + (change.text.length == 1 ? change.from.ch : 0));
  };

  // Adjust a position to refer to the post-change position of the
  // same text, or the end of the change if the change covers it.
  function adjustForChange(pos, change) {
    if (cmp(pos, change.from) < 0) return pos;
    if (cmp(pos, change.to) <= 0) return changeEnd(change);

    var line = pos.line + change.text.length - (change.to.line - change.from.line) - 1, ch = pos.ch;
    if (pos.line == change.to.line) ch += changeEnd(change).ch - change.to.ch;
    return Pos(line, ch);
  }

  function computeSelAfterChange(doc, change) {
    var out = [];
    for (var i = 0; i < doc.sel.ranges.length; i++) {
      var range = doc.sel.ranges[i];
      out.push(new Range(adjustForChange(range.anchor, change),
                         adjustForChange(range.head, change)));
    }
    return normalizeSelection(out, doc.sel.primIndex);
  }

  function offsetPos(pos, old, nw) {
    if (pos.line == old.line)
      return Pos(nw.line, pos.ch - old.ch + nw.ch);
    else
      return Pos(nw.line + (pos.line - old.line), pos.ch);
  }

  // Used by replaceSelections to allow moving the selection to the
  // start or around the replaced test. Hint may be "start" or "around".
  function computeReplacedSel(doc, changes, hint) {
    var out = [];
    var oldPrev = Pos(doc.first, 0), newPrev = oldPrev;
    for (var i = 0; i < changes.length; i++) {
      var change = changes[i];
      var from = offsetPos(change.from, oldPrev, newPrev);
      var to = offsetPos(changeEnd(change), oldPrev, newPrev);
      oldPrev = change.to;
      newPrev = to;
      if (hint == "around") {
        var range = doc.sel.ranges[i], inv = cmp(range.head, range.anchor) < 0;
        out[i] = new Range(inv ? to : from, inv ? from : to);
      } else {
        out[i] = new Range(from, from);
      }
    }
    return new Selection(out, doc.sel.primIndex);
  }

  // Allow "beforeChange" event handlers to influence a change
  function filterChange(doc, change, update) {
    var obj = {
      canceled: false,
      from: change.from,
      to: change.to,
      text: change.text,
      origin: change.origin,
      cancel: function() { this.canceled = true; }
    };
    if (update) obj.update = function(from, to, text, origin) {
      if (from) this.from = clipPos(doc, from);
      if (to) this.to = clipPos(doc, to);
      if (text) this.text = text;
      if (origin !== undefined) this.origin = origin;
    };
    signal(doc, "beforeChange", doc, obj);
    if (doc.cm) signal(doc.cm, "beforeChange", doc.cm, obj);

    if (obj.canceled) return null;
    return {from: obj.from, to: obj.to, text: obj.text, origin: obj.origin};
  }

  // Apply a change to a document, and add it to the document's
  // history, and propagating it to all linked documents.
  function makeChange(doc, change, ignoreReadOnly) {
    if (doc.cm) {
      if (!doc.cm.curOp) return operation(doc.cm, makeChange)(doc, change, ignoreReadOnly);
      if (doc.cm.state.suppressEdits) return;
    }

    if (hasHandler(doc, "beforeChange") || doc.cm && hasHandler(doc.cm, "beforeChange")) {
      change = filterChange(doc, change, true);
      if (!change) return;
    }

    // Possibly split or suppress the update based on the presence
    // of read-only spans in its range.
    var split = sawReadOnlySpans && !ignoreReadOnly && removeReadOnlyRanges(doc, change.from, change.to);
    if (split) {
      for (var i = split.length - 1; i >= 0; --i)
        makeChangeInner(doc, {from: split[i].from, to: split[i].to, text: i ? [""] : change.text});
    } else {
      makeChangeInner(doc, change);
    }
  }

  function makeChangeInner(doc, change) {
    if (change.text.length == 1 && change.text[0] == "" && cmp(change.from, change.to) == 0) return;
    var selAfter = computeSelAfterChange(doc, change);
    addChangeToHistory(doc, change, selAfter, doc.cm ? doc.cm.curOp.id : NaN);

    makeChangeSingleDoc(doc, change, selAfter, stretchSpansOverChange(doc, change));
    var rebased = [];

    linkedDocs(doc, function(doc, sharedHist) {
      if (!sharedHist && indexOf(rebased, doc.history) == -1) {
        rebaseHist(doc.history, change);
        rebased.push(doc.history);
      }
      makeChangeSingleDoc(doc, change, null, stretchSpansOverChange(doc, change));
    });
  }

  // Revert a change stored in a document's history.
  function makeChangeFromHistory(doc, type, allowSelectionOnly) {
    if (doc.cm && doc.cm.state.suppressEdits) return;

    var hist = doc.history, event, selAfter = doc.sel;
    var source = type == "undo" ? hist.done : hist.undone, dest = type == "undo" ? hist.undone : hist.done;

    // Verify that there is a useable event (so that ctrl-z won't
    // needlessly clear selection events)
    for (var i = 0; i < source.length; i++) {
      event = source[i];
      if (allowSelectionOnly ? event.ranges && !event.equals(doc.sel) : !event.ranges)
        break;
    }
    if (i == source.length) return;
    hist.lastOrigin = hist.lastSelOrigin = null;

    for (;;) {
      event = source.pop();
      if (event.ranges) {
        pushSelectionToHistory(event, dest);
        if (allowSelectionOnly && !event.equals(doc.sel)) {
          setSelection(doc, event, {clearRedo: false});
          return;
        }
        selAfter = event;
      }
      else break;
    }

    // Build up a reverse change object to add to the opposite history
    // stack (redo when undoing, and vice versa).
    var antiChanges = [];
    pushSelectionToHistory(selAfter, dest);
    dest.push({changes: antiChanges, generation: hist.generation});
    hist.generation = event.generation || ++hist.maxGeneration;

    var filter = hasHandler(doc, "beforeChange") || doc.cm && hasHandler(doc.cm, "beforeChange");

    for (var i = event.changes.length - 1; i >= 0; --i) {
      var change = event.changes[i];
      change.origin = type;
      if (filter && !filterChange(doc, change, false)) {
        source.length = 0;
        return;
      }

      antiChanges.push(historyChangeFromChange(doc, change));

      var after = i ? computeSelAfterChange(doc, change) : lst(source);
      makeChangeSingleDoc(doc, change, after, mergeOldSpans(doc, change));
      if (!i && doc.cm) doc.cm.scrollIntoView({from: change.from, to: changeEnd(change)});
      var rebased = [];

      // Propagate to the linked documents
      linkedDocs(doc, function(doc, sharedHist) {
        if (!sharedHist && indexOf(rebased, doc.history) == -1) {
          rebaseHist(doc.history, change);
          rebased.push(doc.history);
        }
        makeChangeSingleDoc(doc, change, null, mergeOldSpans(doc, change));
      });
    }
  }

  // Sub-views need their line numbers shifted when text is added
  // above or below them in the parent document.
  function shiftDoc(doc, distance) {
    if (distance == 0) return;
    doc.first += distance;
    doc.sel = new Selection(map(doc.sel.ranges, function(range) {
      return new Range(Pos(range.anchor.line + distance, range.anchor.ch),
                       Pos(range.head.line + distance, range.head.ch));
    }), doc.sel.primIndex);
    if (doc.cm) {
      regChange(doc.cm, doc.first, doc.first - distance, distance);
      for (var d = doc.cm.display, l = d.viewFrom; l < d.viewTo; l++)
        regLineChange(doc.cm, l, "gutter");
    }
  }

  // More lower-level change function, handling only a single document
  // (not linked ones).
  function makeChangeSingleDoc(doc, change, selAfter, spans) {
    if (doc.cm && !doc.cm.curOp)
      return operation(doc.cm, makeChangeSingleDoc)(doc, change, selAfter, spans);

    if (change.to.line < doc.first) {
      shiftDoc(doc, change.text.length - 1 - (change.to.line - change.from.line));
      return;
    }
    if (change.from.line > doc.lastLine()) return;

    // Clip the change to the size of this doc
    if (change.from.line < doc.first) {
      var shift = change.text.length - 1 - (doc.first - change.from.line);
      shiftDoc(doc, shift);
      change = {from: Pos(doc.first, 0), to: Pos(change.to.line + shift, change.to.ch),
                text: [lst(change.text)], origin: change.origin};
    }
    var last = doc.lastLine();
    if (change.to.line > last) {
      change = {from: change.from, to: Pos(last, getLine(doc, last).text.length),
                text: [change.text[0]], origin: change.origin};
    }

    change.removed = getBetween(doc, change.from, change.to);

    if (!selAfter) selAfter = computeSelAfterChange(doc, change);
    if (doc.cm) makeChangeSingleDocInEditor(doc.cm, change, spans);
    else updateDoc(doc, change, spans);
    setSelectionNoUndo(doc, selAfter, sel_dontScroll);
  }

  // Handle the interaction of a change to a document with the editor
  // that this document is part of.
  function makeChangeSingleDocInEditor(cm, change, spans) {
    var doc = cm.doc, display = cm.display, from = change.from, to = change.to;

    var recomputeMaxLength = false, checkWidthStart = from.line;
    if (!cm.options.lineWrapping) {
      checkWidthStart = lineNo(visualLine(getLine(doc, from.line)));
      doc.iter(checkWidthStart, to.line + 1, function(line) {
        if (line == display.maxLine) {
          recomputeMaxLength = true;
          return true;
        }
      });
    }

    if (doc.sel.contains(change.from, change.to) > -1)
      signalCursorActivity(cm);

    updateDoc(doc, change, spans, estimateHeight(cm));

    if (!cm.options.lineWrapping) {
      doc.iter(checkWidthStart, from.line + change.text.length, function(line) {
        var len = lineLength(line);
        if (len > display.maxLineLength) {
          display.maxLine = line;
          display.maxLineLength = len;
          display.maxLineChanged = true;
          recomputeMaxLength = false;
        }
      });
      if (recomputeMaxLength) cm.curOp.updateMaxLine = true;
    }

    // Adjust frontier, schedule worker
    doc.frontier = Math.min(doc.frontier, from.line);
    startWorker(cm, 400);

    var lendiff = change.text.length - (to.line - from.line) - 1;
    // Remember that these lines changed, for updating the display
    if (change.full)
      regChange(cm);
    else if (from.line == to.line && change.text.length == 1 && !isWholeLineUpdate(cm.doc, change))
      regLineChange(cm, from.line, "text");
    else
      regChange(cm, from.line, to.line + 1, lendiff);

    var changesHandler = hasHandler(cm, "changes"), changeHandler = hasHandler(cm, "change");
    if (changeHandler || changesHandler) {
      var obj = {
        from: from, to: to,
        text: change.text,
        removed: change.removed,
        origin: change.origin
      };
      if (changeHandler) signalLater(cm, "change", cm, obj);
      if (changesHandler) (cm.curOp.changeObjs || (cm.curOp.changeObjs = [])).push(obj);
    }
    cm.display.selForContextMenu = null;
  }

  function replaceRange(doc, code, from, to, origin) {
    if (!to) to = from;
    if (cmp(to, from) < 0) { var tmp = to; to = from; from = tmp; }
    if (typeof code == "string") code = doc.splitLines(code);
    makeChange(doc, {from: from, to: to, text: code, origin: origin});
  }

  // SCROLLING THINGS INTO VIEW

  // If an editor sits on the top or bottom of the window, partially
  // scrolled out of view, this ensures that the cursor is visible.
  function maybeScrollWindow(cm, coords) {
    if (signalDOMEvent(cm, "scrollCursorIntoView")) return;

    var display = cm.display, box = display.sizer.getBoundingClientRect(), doScroll = null;
    if (coords.top + box.top < 0) doScroll = true;
    else if (coords.bottom + box.top > (window.innerHeight || document.documentElement.clientHeight)) doScroll = false;
    if (doScroll != null && !phantom) {
      var scrollNode = elt("div", "\u200b", null, "position: absolute; top: " +
                           (coords.top - display.viewOffset - paddingTop(cm.display)) + "px; height: " +
                           (coords.bottom - coords.top + scrollGap(cm) + display.barHeight) + "px; left: " +
                           coords.left + "px; width: 2px;");
      cm.display.lineSpace.appendChild(scrollNode);
      scrollNode.scrollIntoView(doScroll);
      cm.display.lineSpace.removeChild(scrollNode);
    }
  }

  // Scroll a given position into view (immediately), verifying that
  // it actually became visible (as line heights are accurately
  // measured, the position of something may 'drift' during drawing).
  function scrollPosIntoView(cm, pos, end, margin) {
    if (margin == null) margin = 0;
    for (var limit = 0; limit < 5; limit++) {
      var changed = false, coords = cursorCoords(cm, pos);
      var endCoords = !end || end == pos ? coords : cursorCoords(cm, end);
      var scrollPos = calculateScrollPos(cm, Math.min(coords.left, endCoords.left),
                                         Math.min(coords.top, endCoords.top) - margin,
                                         Math.max(coords.left, endCoords.left),
                                         Math.max(coords.bottom, endCoords.bottom) + margin);
      var startTop = cm.doc.scrollTop, startLeft = cm.doc.scrollLeft;
      if (scrollPos.scrollTop != null) {
        setScrollTop(cm, scrollPos.scrollTop);
        if (Math.abs(cm.doc.scrollTop - startTop) > 1) changed = true;
      }
      if (scrollPos.scrollLeft != null) {
        setScrollLeft(cm, scrollPos.scrollLeft);
        if (Math.abs(cm.doc.scrollLeft - startLeft) > 1) changed = true;
      }
      if (!changed) break;
    }
    return coords;
  }

  // Scroll a given set of coordinates into view (immediately).
  function scrollIntoView(cm, x1, y1, x2, y2) {
    var scrollPos = calculateScrollPos(cm, x1, y1, x2, y2);
    if (scrollPos.scrollTop != null) setScrollTop(cm, scrollPos.scrollTop);
    if (scrollPos.scrollLeft != null) setScrollLeft(cm, scrollPos.scrollLeft);
  }

  // Calculate a new scroll position needed to scroll the given
  // rectangle into view. Returns an object with scrollTop and
  // scrollLeft properties. When these are undefined, the
  // vertical/horizontal position does not need to be adjusted.
  function calculateScrollPos(cm, x1, y1, x2, y2) {
    var display = cm.display, snapMargin = textHeight(cm.display);
    if (y1 < 0) y1 = 0;
    var screentop = cm.curOp && cm.curOp.scrollTop != null ? cm.curOp.scrollTop : display.scroller.scrollTop;
    var screen = displayHeight(cm), result = {};
    if (y2 - y1 > screen) y2 = y1 + screen;
    var docBottom = cm.doc.height + paddingVert(display);
    var atTop = y1 < snapMargin, atBottom = y2 > docBottom - snapMargin;
    if (y1 < screentop) {
      result.scrollTop = atTop ? 0 : y1;
    } else if (y2 > screentop + screen) {
      var newTop = Math.min(y1, (atBottom ? docBottom : y2) - screen);
      if (newTop != screentop) result.scrollTop = newTop;
    }

    var screenleft = cm.curOp && cm.curOp.scrollLeft != null ? cm.curOp.scrollLeft : display.scroller.scrollLeft;
    var screenw = displayWidth(cm) - (cm.options.fixedGutter ? display.gutters.offsetWidth : 0);
    var tooWide = x2 - x1 > screenw;
    if (tooWide) x2 = x1 + screenw;
    if (x1 < 10)
      result.scrollLeft = 0;
    else if (x1 < screenleft)
      result.scrollLeft = Math.max(0, x1 - (tooWide ? 0 : 10));
    else if (x2 > screenw + screenleft - 3)
      result.scrollLeft = x2 + (tooWide ? 0 : 10) - screenw;
    return result;
  }

  // Store a relative adjustment to the scroll position in the current
  // operation (to be applied when the operation finishes).
  function addToScrollPos(cm, left, top) {
    if (left != null || top != null) resolveScrollToPos(cm);
    if (left != null)
      cm.curOp.scrollLeft = (cm.curOp.scrollLeft == null ? cm.doc.scrollLeft : cm.curOp.scrollLeft) + left;
    if (top != null)
      cm.curOp.scrollTop = (cm.curOp.scrollTop == null ? cm.doc.scrollTop : cm.curOp.scrollTop) + top;
  }

  // Make sure that at the end of the operation the current cursor is
  // shown.
  function ensureCursorVisible(cm) {
    resolveScrollToPos(cm);
    var cur = cm.getCursor(), from = cur, to = cur;
    if (!cm.options.lineWrapping) {
      from = cur.ch ? Pos(cur.line, cur.ch - 1) : cur;
      to = Pos(cur.line, cur.ch + 1);
    }
    cm.curOp.scrollToPos = {from: from, to: to, margin: cm.options.cursorScrollMargin, isCursor: true};
  }

  // When an operation has its scrollToPos property set, and another
  // scroll action is applied before the end of the operation, this
  // 'simulates' scrolling that position into view in a cheap way, so
  // that the effect of intermediate scroll commands is not ignored.
  function resolveScrollToPos(cm) {
    var range = cm.curOp.scrollToPos;
    if (range) {
      cm.curOp.scrollToPos = null;
      var from = estimateCoords(cm, range.from), to = estimateCoords(cm, range.to);
      var sPos = calculateScrollPos(cm, Math.min(from.left, to.left),
                                    Math.min(from.top, to.top) - range.margin,
                                    Math.max(from.right, to.right),
                                    Math.max(from.bottom, to.bottom) + range.margin);
      cm.scrollTo(sPos.scrollLeft, sPos.scrollTop);
    }
  }

  // API UTILITIES

  // Indent the given line. The how parameter can be "smart",
  // "add"/null, "subtract", or "prev". When aggressive is false
  // (typically set to true for forced single-line indents), empty
  // lines are not indented, and places where the mode returns Pass
  // are left alone.
  function indentLine(cm, n, how, aggressive) {
    var doc = cm.doc, state;
    if (how == null) how = "add";
    if (how == "smart") {
      // Fall back to "prev" when the mode doesn't have an indentation
      // method.
      if (!doc.mode.indent) how = "prev";
      else state = getStateBefore(cm, n);
    }

    var tabSize = cm.options.tabSize;
    var line = getLine(doc, n), curSpace = countColumn(line.text, null, tabSize);
    if (line.stateAfter) line.stateAfter = null;
    var curSpaceString = line.text.match(/^\s*/)[0], indentation;
    if (!aggressive && !/\S/.test(line.text)) {
      indentation = 0;
      how = "not";
    } else if (how == "smart") {
      indentation = doc.mode.indent(state, line.text.slice(curSpaceString.length), line.text);
      if (indentation == Pass || indentation > 150) {
        if (!aggressive) return;
        how = "prev";
      }
    }
    if (how == "prev") {
      if (n > doc.first) indentation = countColumn(getLine(doc, n-1).text, null, tabSize);
      else indentation = 0;
    } else if (how == "add") {
      indentation = curSpace + cm.options.indentUnit;
    } else if (how == "subtract") {
      indentation = curSpace - cm.options.indentUnit;
    } else if (typeof how == "number") {
      indentation = curSpace + how;
    }
    indentation = Math.max(0, indentation);

    var indentString = "", pos = 0;
    if (cm.options.indentWithTabs)
      for (var i = Math.floor(indentation / tabSize); i; --i) {pos += tabSize; indentString += "\t";}
    if (pos < indentation) indentString += spaceStr(indentation - pos);

    if (indentString != curSpaceString) {
      replaceRange(doc, indentString, Pos(n, 0), Pos(n, curSpaceString.length), "+input");
      line.stateAfter = null;
      return true;
    } else {
      // Ensure that, if the cursor was in the whitespace at the start
      // of the line, it is moved to the end of that space.
      for (var i = 0; i < doc.sel.ranges.length; i++) {
        var range = doc.sel.ranges[i];
        if (range.head.line == n && range.head.ch < curSpaceString.length) {
          var pos = Pos(n, curSpaceString.length);
          replaceOneSelection(doc, i, new Range(pos, pos));
          break;
        }
      }
    }
  }

  // Utility for applying a change to a line by handle or number,
  // returning the number and optionally registering the line as
  // changed.
  function changeLine(doc, handle, changeType, op) {
    var no = handle, line = handle;
    if (typeof handle == "number") line = getLine(doc, clipLine(doc, handle));
    else no = lineNo(handle);
    if (no == null) return null;
    if (op(line, no) && doc.cm) regLineChange(doc.cm, no, changeType);
    return line;
  }

  // Helper for deleting text near the selection(s), used to implement
  // backspace, delete, and similar functionality.
  function deleteNearSelection(cm, compute) {
    var ranges = cm.doc.sel.ranges, kill = [];
    // Build up a set of ranges to kill first, merging overlapping
    // ranges.
    for (var i = 0; i < ranges.length; i++) {
      var toKill = compute(ranges[i]);
      while (kill.length && cmp(toKill.from, lst(kill).to) <= 0) {
        var replaced = kill.pop();
        if (cmp(replaced.from, toKill.from) < 0) {
          toKill.from = replaced.from;
          break;
        }
      }
      kill.push(toKill);
    }
    // Next, remove those actual ranges.
    runInOp(cm, function() {
      for (var i = kill.length - 1; i >= 0; i--)
        replaceRange(cm.doc, "", kill[i].from, kill[i].to, "+delete");
      ensureCursorVisible(cm);
    });
  }

  // Used for horizontal relative motion. Dir is -1 or 1 (left or
  // right), unit can be "char", "column" (like char, but doesn't
  // cross line boundaries), "word" (across next word), or "group" (to
  // the start of next group of word or non-word-non-whitespace
  // chars). The visually param controls whether, in right-to-left
  // text, direction 1 means to move towards the next index in the
  // string, or towards the character to the right of the current
  // position. The resulting position will have a hitSide=true
  // property if it reached the end of the document.
  function findPosH(doc, pos, dir, unit, visually) {
    var line = pos.line, ch = pos.ch, origDir = dir;
    var lineObj = getLine(doc, line);
    function findNextLine() {
      var l = line + dir;
      if (l < doc.first || l >= doc.first + doc.size) return false
      line = l;
      return lineObj = getLine(doc, l);
    }
    function moveOnce(boundToLine) {
      var next = (visually ? moveVisually : moveLogically)(lineObj, ch, dir, true);
      if (next == null) {
        if (!boundToLine && findNextLine()) {
          if (visually) ch = (dir < 0 ? lineRight : lineLeft)(lineObj);
          else ch = dir < 0 ? lineObj.text.length : 0;
        } else return false
      } else ch = next;
      return true;
    }

    if (unit == "char") {
      moveOnce()
    } else if (unit == "column") {
      moveOnce(true)
    } else if (unit == "word" || unit == "group") {
      var sawType = null, group = unit == "group";
      var helper = doc.cm && doc.cm.getHelper(pos, "wordChars");
      for (var first = true;; first = false) {
        if (dir < 0 && !moveOnce(!first)) break;
        var cur = lineObj.text.charAt(ch) || "\n";
        var type = isWordChar(cur, helper) ? "w"
          : group && cur == "\n" ? "n"
          : !group || /\s/.test(cur) ? null
          : "p";
        if (group && !first && !type) type = "s";
        if (sawType && sawType != type) {
          if (dir < 0) {dir = 1; moveOnce();}
          break;
        }

        if (type) sawType = type;
        if (dir > 0 && !moveOnce(!first)) break;
      }
    }
    var result = skipAtomic(doc, Pos(line, ch), pos, origDir, true);
    if (!cmp(pos, result)) result.hitSide = true;
    return result;
  }

  // For relative vertical movement. Dir may be -1 or 1. Unit can be
  // "page" or "line". The resulting position will have a hitSide=true
  // property if it reached the end of the document.
  function findPosV(cm, pos, dir, unit) {
    var doc = cm.doc, x = pos.left, y;
    if (unit == "page") {
      var pageSize = Math.min(cm.display.wrapper.clientHeight, window.innerHeight || document.documentElement.clientHeight);
      y = pos.top + dir * (pageSize - (dir < 0 ? 1.5 : .5) * textHeight(cm.display));
    } else if (unit == "line") {
      y = dir > 0 ? pos.bottom + 3 : pos.top - 3;
    }
    for (;;) {
      var target = coordsChar(cm, x, y);
      if (!target.outside) break;
      if (dir < 0 ? y <= 0 : y >= doc.height) { target.hitSide = true; break; }
      y += dir * 5;
    }
    return target;
  }

  // EDITOR METHODS

  // The publicly visible API. Note that methodOp(f) means
  // 'wrap f in an operation, performed on its `this` parameter'.

  // This is not the complete set of editor methods. Most of the
  // methods defined on the Doc type are also injected into
  // CodeMirror.prototype, for backwards compatibility and
  // convenience.

  CodeMirror.prototype = {
    constructor: CodeMirror,
    focus: function(){window.focus(); this.display.input.focus();},

    setOption: function(option, value) {
      var options = this.options, old = options[option];
      if (options[option] == value && option != "mode") return;
      options[option] = value;
      if (optionHandlers.hasOwnProperty(option))
        operation(this, optionHandlers[option])(this, value, old);
    },

    getOption: function(option) {return this.options[option];},
    getDoc: function() {return this.doc;},

    addKeyMap: function(map, bottom) {
      this.state.keyMaps[bottom ? "push" : "unshift"](getKeyMap(map));
    },
    removeKeyMap: function(map) {
      var maps = this.state.keyMaps;
      for (var i = 0; i < maps.length; ++i)
        if (maps[i] == map || maps[i].name == map) {
          maps.splice(i, 1);
          return true;
        }
    },

    addOverlay: methodOp(function(spec, options) {
      var mode = spec.token ? spec : CodeMirror.getMode(this.options, spec);
      if (mode.startState) throw new Error("Overlays may not be stateful.");
      this.state.overlays.push({mode: mode, modeSpec: spec, opaque: options && options.opaque});
      this.state.modeGen++;
      regChange(this);
    }),
    removeOverlay: methodOp(function(spec) {
      var overlays = this.state.overlays;
      for (var i = 0; i < overlays.length; ++i) {
        var cur = overlays[i].modeSpec;
        if (cur == spec || typeof spec == "string" && cur.name == spec) {
          overlays.splice(i, 1);
          this.state.modeGen++;
          regChange(this);
          return;
        }
      }
    }),

    indentLine: methodOp(function(n, dir, aggressive) {
      if (typeof dir != "string" && typeof dir != "number") {
        if (dir == null) dir = this.options.smartIndent ? "smart" : "prev";
        else dir = dir ? "add" : "subtract";
      }
      if (isLine(this.doc, n)) indentLine(this, n, dir, aggressive);
    }),
    indentSelection: methodOp(function(how) {
      var ranges = this.doc.sel.ranges, end = -1;
      for (var i = 0; i < ranges.length; i++) {
        var range = ranges[i];
        if (!range.empty()) {
          var from = range.from(), to = range.to();
          var start = Math.max(end, from.line);
          end = Math.min(this.lastLine(), to.line - (to.ch ? 0 : 1)) + 1;
          for (var j = start; j < end; ++j)
            indentLine(this, j, how);
          var newRanges = this.doc.sel.ranges;
          if (from.ch == 0 && ranges.length == newRanges.length && newRanges[i].from().ch > 0)
            replaceOneSelection(this.doc, i, new Range(from, newRanges[i].to()), sel_dontScroll);
        } else if (range.head.line > end) {
          indentLine(this, range.head.line, how, true);
          end = range.head.line;
          if (i == this.doc.sel.primIndex) ensureCursorVisible(this);
        }
      }
    }),

    // Fetch the parser token for a given character. Useful for hacks
    // that want to inspect the mode state (say, for completion).
    getTokenAt: function(pos, precise) {
      return takeToken(this, pos, precise);
    },

    getLineTokens: function(line, precise) {
      return takeToken(this, Pos(line), precise, true);
    },

    getTokenTypeAt: function(pos) {
      pos = clipPos(this.doc, pos);
      var styles = getLineStyles(this, getLine(this.doc, pos.line));
      var before = 0, after = (styles.length - 1) / 2, ch = pos.ch;
      var type;
      if (ch == 0) type = styles[2];
      else for (;;) {
        var mid = (before + after) >> 1;
        if ((mid ? styles[mid * 2 - 1] : 0) >= ch) after = mid;
        else if (styles[mid * 2 + 1] < ch) before = mid + 1;
        else { type = styles[mid * 2 + 2]; break; }
      }
      var cut = type ? type.indexOf("cm-overlay ") : -1;
      return cut < 0 ? type : cut == 0 ? null : type.slice(0, cut - 1);
    },

    getModeAt: function(pos) {
      var mode = this.doc.mode;
      if (!mode.innerMode) return mode;
      return CodeMirror.innerMode(mode, this.getTokenAt(pos).state).mode;
    },

    getHelper: function(pos, type) {
      return this.getHelpers(pos, type)[0];
    },

    getHelpers: function(pos, type) {
      var found = [];
      if (!helpers.hasOwnProperty(type)) return found;
      var help = helpers[type], mode = this.getModeAt(pos);
      if (typeof mode[type] == "string") {
        if (help[mode[type]]) found.push(help[mode[type]]);
      } else if (mode[type]) {
        for (var i = 0; i < mode[type].length; i++) {
          var val = help[mode[type][i]];
          if (val) found.push(val);
        }
      } else if (mode.helperType && help[mode.helperType]) {
        found.push(help[mode.helperType]);
      } else if (help[mode.name]) {
        found.push(help[mode.name]);
      }
      for (var i = 0; i < help._global.length; i++) {
        var cur = help._global[i];
        if (cur.pred(mode, this) && indexOf(found, cur.val) == -1)
          found.push(cur.val);
      }
      return found;
    },

    getStateAfter: function(line, precise) {
      var doc = this.doc;
      line = clipLine(doc, line == null ? doc.first + doc.size - 1: line);
      return getStateBefore(this, line + 1, precise);
    },

    cursorCoords: function(start, mode) {
      var pos, range = this.doc.sel.primary();
      if (start == null) pos = range.head;
      else if (typeof start == "object") pos = clipPos(this.doc, start);
      else pos = start ? range.from() : range.to();
      return cursorCoords(this, pos, mode || "page");
    },

    charCoords: function(pos, mode) {
      return charCoords(this, clipPos(this.doc, pos), mode || "page");
    },

    coordsChar: function(coords, mode) {
      coords = fromCoordSystem(this, coords, mode || "page");
      return coordsChar(this, coords.left, coords.top);
    },

    lineAtHeight: function(height, mode) {
      height = fromCoordSystem(this, {top: height, left: 0}, mode || "page").top;
      return lineAtHeight(this.doc, height + this.display.viewOffset);
    },
    heightAtLine: function(line, mode) {
      var end = false, lineObj;
      if (typeof line == "number") {
        var last = this.doc.first + this.doc.size - 1;
        if (line < this.doc.first) line = this.doc.first;
        else if (line > last) { line = last; end = true; }
        lineObj = getLine(this.doc, line);
      } else {
        lineObj = line;
      }
      return intoCoordSystem(this, lineObj, {top: 0, left: 0}, mode || "page").top +
        (end ? this.doc.height - heightAtLine(lineObj) : 0);
    },

    defaultTextHeight: function() { return textHeight(this.display); },
    defaultCharWidth: function() { return charWidth(this.display); },

    setGutterMarker: methodOp(function(line, gutterID, value) {
      return changeLine(this.doc, line, "gutter", function(line) {
        var markers = line.gutterMarkers || (line.gutterMarkers = {});
        markers[gutterID] = value;
        if (!value && isEmpty(markers)) line.gutterMarkers = null;
        return true;
      });
    }),

    clearGutter: methodOp(function(gutterID) {
      var cm = this, doc = cm.doc, i = doc.first;
      doc.iter(function(line) {
        if (line.gutterMarkers && line.gutterMarkers[gutterID]) {
          line.gutterMarkers[gutterID] = null;
          regLineChange(cm, i, "gutter");
          if (isEmpty(line.gutterMarkers)) line.gutterMarkers = null;
        }
        ++i;
      });
    }),

    lineInfo: function(line) {
      if (typeof line == "number") {
        if (!isLine(this.doc, line)) return null;
        var n = line;
        line = getLine(this.doc, line);
        if (!line) return null;
      } else {
        var n = lineNo(line);
        if (n == null) return null;
      }
      return {line: n, handle: line, text: line.text, gutterMarkers: line.gutterMarkers,
              textClass: line.textClass, bgClass: line.bgClass, wrapClass: line.wrapClass,
              widgets: line.widgets};
    },

    getViewport: function() { return {from: this.display.viewFrom, to: this.display.viewTo};},

    addWidget: function(pos, node, scroll, vert, horiz) {
      var display = this.display;
      pos = cursorCoords(this, clipPos(this.doc, pos));
      var top = pos.bottom, left = pos.left;
      node.style.position = "absolute";
      node.setAttribute("cm-ignore-events", "true");
      this.display.input.setUneditable(node);
      display.sizer.appendChild(node);
      if (vert == "over") {
        top = pos.top;
      } else if (vert == "above" || vert == "near") {
        var vspace = Math.max(display.wrapper.clientHeight, this.doc.height),
        hspace = Math.max(display.sizer.clientWidth, display.lineSpace.clientWidth);
        // Default to positioning above (if specified and possible); otherwise default to positioning below
        if ((vert == 'above' || pos.bottom + node.offsetHeight > vspace) && pos.top > node.offsetHeight)
          top = pos.top - node.offsetHeight;
        else if (pos.bottom + node.offsetHeight <= vspace)
          top = pos.bottom;
        if (left + node.offsetWidth > hspace)
          left = hspace - node.offsetWidth;
      }
      node.style.top = top + "px";
      node.style.left = node.style.right = "";
      if (horiz == "right") {
        left = display.sizer.clientWidth - node.offsetWidth;
        node.style.right = "0px";
      } else {
        if (horiz == "left") left = 0;
        else if (horiz == "middle") left = (display.sizer.clientWidth - node.offsetWidth) / 2;
        node.style.left = left + "px";
      }
      if (scroll)
        scrollIntoView(this, left, top, left + node.offsetWidth, top + node.offsetHeight);
    },

    triggerOnKeyDown: methodOp(onKeyDown),
    triggerOnKeyPress: methodOp(onKeyPress),
    triggerOnKeyUp: onKeyUp,

    execCommand: function(cmd) {
      if (commands.hasOwnProperty(cmd))
        return commands[cmd].call(null, this);
    },

    triggerElectric: methodOp(function(text) { triggerElectric(this, text); }),

    findPosH: function(from, amount, unit, visually) {
      var dir = 1;
      if (amount < 0) { dir = -1; amount = -amount; }
      for (var i = 0, cur = clipPos(this.doc, from); i < amount; ++i) {
        cur = findPosH(this.doc, cur, dir, unit, visually);
        if (cur.hitSide) break;
      }
      return cur;
    },

    moveH: methodOp(function(dir, unit) {
      var cm = this;
      cm.extendSelectionsBy(function(range) {
        if (cm.display.shift || cm.doc.extend || range.empty())
          return findPosH(cm.doc, range.head, dir, unit, cm.options.rtlMoveVisually);
        else
          return dir < 0 ? range.from() : range.to();
      }, sel_move);
    }),

    deleteH: methodOp(function(dir, unit) {
      var sel = this.doc.sel, doc = this.doc;
      if (sel.somethingSelected())
        doc.replaceSelection("", null, "+delete");
      else
        deleteNearSelection(this, function(range) {
          var other = findPosH(doc, range.head, dir, unit, false);
          return dir < 0 ? {from: other, to: range.head} : {from: range.head, to: other};
        });
    }),

    findPosV: function(from, amount, unit, goalColumn) {
      var dir = 1, x = goalColumn;
      if (amount < 0) { dir = -1; amount = -amount; }
      for (var i = 0, cur = clipPos(this.doc, from); i < amount; ++i) {
        var coords = cursorCoords(this, cur, "div");
        if (x == null) x = coords.left;
        else coords.left = x;
        cur = findPosV(this, coords, dir, unit);
        if (cur.hitSide) break;
      }
      return cur;
    },

    moveV: methodOp(function(dir, unit) {
      var cm = this, doc = this.doc, goals = [];
      var collapse = !cm.display.shift && !doc.extend && doc.sel.somethingSelected();
      doc.extendSelectionsBy(function(range) {
        if (collapse)
          return dir < 0 ? range.from() : range.to();
        var headPos = cursorCoords(cm, range.head, "div");
        if (range.goalColumn != null) headPos.left = range.goalColumn;
        goals.push(headPos.left);
        var pos = findPosV(cm, headPos, dir, unit);
        if (unit == "page" && range == doc.sel.primary())
          addToScrollPos(cm, null, charCoords(cm, pos, "div").top - headPos.top);
        return pos;
      }, sel_move);
      if (goals.length) for (var i = 0; i < doc.sel.ranges.length; i++)
        doc.sel.ranges[i].goalColumn = goals[i];
    }),

    // Find the word at the given position (as returned by coordsChar).
    findWordAt: function(pos) {
      var doc = this.doc, line = getLine(doc, pos.line).text;
      var start = pos.ch, end = pos.ch;
      if (line) {
        var helper = this.getHelper(pos, "wordChars");
        if ((pos.xRel < 0 || end == line.length) && start) --start; else ++end;
        var startChar = line.charAt(start);
        var check = isWordChar(startChar, helper)
          ? function(ch) { return isWordChar(ch, helper); }
          : /\s/.test(startChar) ? function(ch) {return /\s/.test(ch);}
          : function(ch) {return !/\s/.test(ch) && !isWordChar(ch);};
        while (start > 0 && check(line.charAt(start - 1))) --start;
        while (end < line.length && check(line.charAt(end))) ++end;
      }
      return new Range(Pos(pos.line, start), Pos(pos.line, end));
    },

    toggleOverwrite: function(value) {
      if (value != null && value == this.state.overwrite) return;
      if (this.state.overwrite = !this.state.overwrite)
        addClass(this.display.cursorDiv, "CodeMirror-overwrite");
      else
        rmClass(this.display.cursorDiv, "CodeMirror-overwrite");

      signal(this, "overwriteToggle", this, this.state.overwrite);
    },
    hasFocus: function() { return this.display.input.getField() == activeElt(); },
    isReadOnly: function() { return !!(this.options.readOnly || this.doc.cantEdit); },

    scrollTo: methodOp(function(x, y) {
      if (x != null || y != null) resolveScrollToPos(this);
      if (x != null) this.curOp.scrollLeft = x;
      if (y != null) this.curOp.scrollTop = y;
    }),
    getScrollInfo: function() {
      var scroller = this.display.scroller;
      return {left: scroller.scrollLeft, top: scroller.scrollTop,
              height: scroller.scrollHeight - scrollGap(this) - this.display.barHeight,
              width: scroller.scrollWidth - scrollGap(this) - this.display.barWidth,
              clientHeight: displayHeight(this), clientWidth: displayWidth(this)};
    },

    scrollIntoView: methodOp(function(range, margin) {
      if (range == null) {
        range = {from: this.doc.sel.primary().head, to: null};
        if (margin == null) margin = this.options.cursorScrollMargin;
      } else if (typeof range == "number") {
        range = {from: Pos(range, 0), to: null};
      } else if (range.from == null) {
        range = {from: range, to: null};
      }
      if (!range.to) range.to = range.from;
      range.margin = margin || 0;

      if (range.from.line != null) {
        resolveScrollToPos(this);
        this.curOp.scrollToPos = range;
      } else {
        var sPos = calculateScrollPos(this, Math.min(range.from.left, range.to.left),
                                      Math.min(range.from.top, range.to.top) - range.margin,
                                      Math.max(range.from.right, range.to.right),
                                      Math.max(range.from.bottom, range.to.bottom) + range.margin);
        this.scrollTo(sPos.scrollLeft, sPos.scrollTop);
      }
    }),

    setSize: methodOp(function(width, height) {
      var cm = this;
      function interpret(val) {
        return typeof val == "number" || /^\d+$/.test(String(val)) ? val + "px" : val;
      }
      if (width != null) cm.display.wrapper.style.width = interpret(width);
      if (height != null) cm.display.wrapper.style.height = interpret(height);
      if (cm.options.lineWrapping) clearLineMeasurementCache(this);
      var lineNo = cm.display.viewFrom;
      cm.doc.iter(lineNo, cm.display.viewTo, function(line) {
        if (line.widgets) for (var i = 0; i < line.widgets.length; i++)
          if (line.widgets[i].noHScroll) { regLineChange(cm, lineNo, "widget"); break; }
        ++lineNo;
      });
      cm.curOp.forceUpdate = true;
      signal(cm, "refresh", this);
    }),

    operation: function(f){return runInOp(this, f);},

    refresh: methodOp(function() {
      var oldHeight = this.display.cachedTextHeight;
      regChange(this);
      this.curOp.forceUpdate = true;
      clearCaches(this);
      this.scrollTo(this.doc.scrollLeft, this.doc.scrollTop);
      updateGutterSpace(this);
      if (oldHeight == null || Math.abs(oldHeight - textHeight(this.display)) > .5)
        estimateLineHeights(this);
      signal(this, "refresh", this);
    }),

    swapDoc: methodOp(function(doc) {
      var old = this.doc;
      old.cm = null;
      attachDoc(this, doc);
      clearCaches(this);
      this.display.input.reset();
      this.scrollTo(doc.scrollLeft, doc.scrollTop);
      this.curOp.forceScroll = true;
      signalLater(this, "swapDoc", this, old);
      return old;
    }),

    getInputField: function(){return this.display.input.getField();},
    getWrapperElement: function(){return this.display.wrapper;},
    getScrollerElement: function(){return this.display.scroller;},
    getGutterElement: function(){return this.display.gutters;}
  };
  eventMixin(CodeMirror);

  // OPTION DEFAULTS

  // The default configuration options.
  var defaults = CodeMirror.defaults = {};
  // Functions to run when options are changed.
  var optionHandlers = CodeMirror.optionHandlers = {};

  function option(name, deflt, handle, notOnInit) {
    CodeMirror.defaults[name] = deflt;
    if (handle) optionHandlers[name] =
      notOnInit ? function(cm, val, old) {if (old != Init) handle(cm, val, old);} : handle;
  }

  // Passed to option handlers when there is no old value.
  var Init = CodeMirror.Init = {toString: function(){return "CodeMirror.Init";}};

  // These two are, on init, called from the constructor because they
  // have to be initialized before the editor can start at all.
  option("value", "", function(cm, val) {
    cm.setValue(val);
  }, true);
  option("mode", null, function(cm, val) {
    cm.doc.modeOption = val;
    loadMode(cm);
  }, true);

  option("indentUnit", 2, loadMode, true);
  option("indentWithTabs", false);
  option("smartIndent", true);
  option("tabSize", 4, function(cm) {
    resetModeState(cm);
    clearCaches(cm);
    regChange(cm);
  }, true);
  option("lineSeparator", null, function(cm, val) {
    cm.doc.lineSep = val;
    if (!val) return;
    var newBreaks = [], lineNo = cm.doc.first;
    cm.doc.iter(function(line) {
      for (var pos = 0;;) {
        var found = line.text.indexOf(val, pos);
        if (found == -1) break;
        pos = found + val.length;
        newBreaks.push(Pos(lineNo, found));
      }
      lineNo++;
    });
    for (var i = newBreaks.length - 1; i >= 0; i--)
      replaceRange(cm.doc, val, newBreaks[i], Pos(newBreaks[i].line, newBreaks[i].ch + val.length))
  });
  option("specialChars", /[\t\u0000-\u0019\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g, function(cm, val, old) {
    cm.state.specialChars = new RegExp(val.source + (val.test("\t") ? "" : "|\t"), "g");
    if (old != CodeMirror.Init) cm.refresh();
  });
  option("specialCharPlaceholder", defaultSpecialCharPlaceholder, function(cm) {cm.refresh();}, true);
  option("electricChars", true);
  option("inputStyle", mobile ? "contenteditable" : "textarea", function() {
    throw new Error("inputStyle can not (yet) be changed in a running editor"); // FIXME
  }, true);
  option("rtlMoveVisually", !windows);
  option("wholeLineUpdateBefore", true);

  option("theme", "default", function(cm) {
    themeChanged(cm);
    guttersChanged(cm);
  }, true);
  option("keyMap", "default", function(cm, val, old) {
    var next = getKeyMap(val);
    var prev = old != CodeMirror.Init && getKeyMap(old);
    if (prev && prev.detach) prev.detach(cm, next);
    if (next.attach) next.attach(cm, prev || null);
  });
  option("extraKeys", null);

  option("lineWrapping", false, wrappingChanged, true);
  option("gutters", [], function(cm) {
    setGuttersForLineNumbers(cm.options);
    guttersChanged(cm);
  }, true);
  option("fixedGutter", true, function(cm, val) {
    cm.display.gutters.style.left = val ? compensateForHScroll(cm.display) + "px" : "0";
    cm.refresh();
  }, true);
  option("coverGutterNextToScrollbar", false, function(cm) {updateScrollbars(cm);}, true);
  option("scrollbarStyle", "native", function(cm) {
    initScrollbars(cm);
    updateScrollbars(cm);
    cm.display.scrollbars.setScrollTop(cm.doc.scrollTop);
    cm.display.scrollbars.setScrollLeft(cm.doc.scrollLeft);
  }, true);
  option("lineNumbers", false, function(cm) {
    setGuttersForLineNumbers(cm.options);
    guttersChanged(cm);
  }, true);
  option("firstLineNumber", 1, guttersChanged, true);
  option("lineNumberFormatter", function(integer) {return integer;}, guttersChanged, true);
  option("showCursorWhenSelecting", false, updateSelection, true);

  option("resetSelectionOnContextMenu", true);
  option("lineWiseCopyCut", true);

  option("readOnly", false, function(cm, val) {
    if (val == "nocursor") {
      onBlur(cm);
      cm.display.input.blur();
      cm.display.disabled = true;
    } else {
      cm.display.disabled = false;
    }
    cm.display.input.readOnlyChanged(val)
  });
  option("disableInput", false, function(cm, val) {if (!val) cm.display.input.reset();}, true);
  option("dragDrop", true, dragDropChanged);
  option("allowDropFileTypes", null);

  option("cursorBlinkRate", 530);
  option("cursorScrollMargin", 0);
  option("cursorHeight", 1, updateSelection, true);
  option("singleCursorHeightPerLine", true, updateSelection, true);
  option("workTime", 100);
  option("workDelay", 100);
  option("flattenSpans", true, resetModeState, true);
  option("addModeClass", false, resetModeState, true);
  option("pollInterval", 100);
  option("undoDepth", 200, function(cm, val){cm.doc.history.undoDepth = val;});
  option("historyEventDelay", 1250);
  option("viewportMargin", 10, function(cm){cm.refresh();}, true);
  option("maxHighlightLength", 10000, resetModeState, true);
  option("moveInputWithCursor", true, function(cm, val) {
    if (!val) cm.display.input.resetPosition();
  });

  option("tabindex", null, function(cm, val) {
    cm.display.input.getField().tabIndex = val || "";
  });
  option("autofocus", null);

  // MODE DEFINITION AND QUERYING

  // Known modes, by name and by MIME
  var modes = CodeMirror.modes = {}, mimeModes = CodeMirror.mimeModes = {};

  // Extra arguments are stored as the mode's dependencies, which is
  // used by (legacy) mechanisms like loadmode.js to automatically
  // load a mode. (Preferred mechanism is the require/define calls.)
  CodeMirror.defineMode = function(name, mode) {
    if (!CodeMirror.defaults.mode && name != "null") CodeMirror.defaults.mode = name;
    if (arguments.length > 2)
      mode.dependencies = Array.prototype.slice.call(arguments, 2);
    modes[name] = mode;
  };

  CodeMirror.defineMIME = function(mime, spec) {
    mimeModes[mime] = spec;
  };

  // Given a MIME type, a {name, ...options} config object, or a name
  // string, return a mode config object.
  CodeMirror.resolveMode = function(spec) {
    if (typeof spec == "string" && mimeModes.hasOwnProperty(spec)) {
      spec = mimeModes[spec];
    } else if (spec && typeof spec.name == "string" && mimeModes.hasOwnProperty(spec.name)) {
      var found = mimeModes[spec.name];
      if (typeof found == "string") found = {name: found};
      spec = createObj(found, spec);
      spec.name = found.name;
    } else if (typeof spec == "string" && /^[\w\-]+\/[\w\-]+\+xml$/.test(spec)) {
      return CodeMirror.resolveMode("application/xml");
    }
    if (typeof spec == "string") return {name: spec};
    else return spec || {name: "null"};
  };

  // Given a mode spec (anything that resolveMode accepts), find and
  // initialize an actual mode object.
  CodeMirror.getMode = function(options, spec) {
    var spec = CodeMirror.resolveMode(spec);
    var mfactory = modes[spec.name];
    if (!mfactory) return CodeMirror.getMode(options, "text/plain");
    var modeObj = mfactory(options, spec);
    if (modeExtensions.hasOwnProperty(spec.name)) {
      var exts = modeExtensions[spec.name];
      for (var prop in exts) {
        if (!exts.hasOwnProperty(prop)) continue;
        if (modeObj.hasOwnProperty(prop)) modeObj["_" + prop] = modeObj[prop];
        modeObj[prop] = exts[prop];
      }
    }
    modeObj.name = spec.name;
    if (spec.helperType) modeObj.helperType = spec.helperType;
    if (spec.modeProps) for (var prop in spec.modeProps)
      modeObj[prop] = spec.modeProps[prop];

    return modeObj;
  };

  // Minimal default mode.
  CodeMirror.defineMode("null", function() {
    return {token: function(stream) {stream.skipToEnd();}};
  });
  CodeMirror.defineMIME("text/plain", "null");

  // This can be used to attach properties to mode objects from
  // outside the actual mode definition.
  var modeExtensions = CodeMirror.modeExtensions = {};
  CodeMirror.extendMode = function(mode, properties) {
    var exts = modeExtensions.hasOwnProperty(mode) ? modeExtensions[mode] : (modeExtensions[mode] = {});
    copyObj(properties, exts);
  };

  // EXTENSIONS

  CodeMirror.defineExtension = function(name, func) {
    CodeMirror.prototype[name] = func;
  };
  CodeMirror.defineDocExtension = function(name, func) {
    Doc.prototype[name] = func;
  };
  CodeMirror.defineOption = option;

  var initHooks = [];
  CodeMirror.defineInitHook = function(f) {initHooks.push(f);};

  var helpers = CodeMirror.helpers = {};
  CodeMirror.registerHelper = function(type, name, value) {
    if (!helpers.hasOwnProperty(type)) helpers[type] = CodeMirror[type] = {_global: []};
    helpers[type][name] = value;
  };
  CodeMirror.registerGlobalHelper = function(type, name, predicate, value) {
    CodeMirror.registerHelper(type, name, value);
    helpers[type]._global.push({pred: predicate, val: value});
  };

  // MODE STATE HANDLING

  // Utility functions for working with state. Exported because nested
  // modes need to do this for their inner modes.

  var copyState = CodeMirror.copyState = function(mode, state) {
    if (state === true) return state;
    if (mode.copyState) return mode.copyState(state);
    var nstate = {};
    for (var n in state) {
      var val = state[n];
      if (val instanceof Array) val = val.concat([]);
      nstate[n] = val;
    }
    return nstate;
  };

  var startState = CodeMirror.startState = function(mode, a1, a2) {
    return mode.startState ? mode.startState(a1, a2) : true;
  };

  // Given a mode and a state (for that mode), find the inner mode and
  // state at the position that the state refers to.
  CodeMirror.innerMode = function(mode, state) {
    while (mode.innerMode) {
      var info = mode.innerMode(state);
      if (!info || info.mode == mode) break;
      state = info.state;
      mode = info.mode;
    }
    return info || {mode: mode, state: state};
  };

  // STANDARD COMMANDS

  // Commands are parameter-less actions that can be performed on an
  // editor, mostly used for keybindings.
  var commands = CodeMirror.commands = {
    selectAll: function(cm) {cm.setSelection(Pos(cm.firstLine(), 0), Pos(cm.lastLine()), sel_dontScroll);},
    singleSelection: function(cm) {
      cm.setSelection(cm.getCursor("anchor"), cm.getCursor("head"), sel_dontScroll);
    },
    killLine: function(cm) {
      deleteNearSelection(cm, function(range) {
        if (range.empty()) {
          var len = getLine(cm.doc, range.head.line).text.length;
          if (range.head.ch == len && range.head.line < cm.lastLine())
            return {from: range.head, to: Pos(range.head.line + 1, 0)};
          else
            return {from: range.head, to: Pos(range.head.line, len)};
        } else {
          return {from: range.from(), to: range.to()};
        }
      });
    },
    deleteLine: function(cm) {
      deleteNearSelection(cm, function(range) {
        return {from: Pos(range.from().line, 0),
                to: clipPos(cm.doc, Pos(range.to().line + 1, 0))};
      });
    },
    delLineLeft: function(cm) {
      deleteNearSelection(cm, function(range) {
        return {from: Pos(range.from().line, 0), to: range.from()};
      });
    },
    delWrappedLineLeft: function(cm) {
      deleteNearSelection(cm, function(range) {
        var top = cm.charCoords(range.head, "div").top + 5;
        var leftPos = cm.coordsChar({left: 0, top: top}, "div");
        return {from: leftPos, to: range.from()};
      });
    },
    delWrappedLineRight: function(cm) {
      deleteNearSelection(cm, function(range) {
        var top = cm.charCoords(range.head, "div").top + 5;
        var rightPos = cm.coordsChar({left: cm.display.lineDiv.offsetWidth + 100, top: top}, "div");
        return {from: range.from(), to: rightPos };
      });
    },
    undo: function(cm) {cm.undo();},
    redo: function(cm) {cm.redo();},
    undoSelection: function(cm) {cm.undoSelection();},
    redoSelection: function(cm) {cm.redoSelection();},
    goDocStart: function(cm) {cm.extendSelection(Pos(cm.firstLine(), 0));},
    goDocEnd: function(cm) {cm.extendSelection(Pos(cm.lastLine()));},
    goLineStart: function(cm) {
      cm.extendSelectionsBy(function(range) { return lineStart(cm, range.head.line); },
                            {origin: "+move", bias: 1});
    },
    goLineStartSmart: function(cm) {
      cm.extendSelectionsBy(function(range) {
        return lineStartSmart(cm, range.head);
      }, {origin: "+move", bias: 1});
    },
    goLineEnd: function(cm) {
      cm.extendSelectionsBy(function(range) { return lineEnd(cm, range.head.line); },
                            {origin: "+move", bias: -1});
    },
    goLineRight: function(cm) {
      cm.extendSelectionsBy(function(range) {
        var top = cm.charCoords(range.head, "div").top + 5;
        return cm.coordsChar({left: cm.display.lineDiv.offsetWidth + 100, top: top}, "div");
      }, sel_move);
    },
    goLineLeft: function(cm) {
      cm.extendSelectionsBy(function(range) {
        var top = cm.charCoords(range.head, "div").top + 5;
        return cm.coordsChar({left: 0, top: top}, "div");
      }, sel_move);
    },
    goLineLeftSmart: function(cm) {
      cm.extendSelectionsBy(function(range) {
        var top = cm.charCoords(range.head, "div").top + 5;
        var pos = cm.coordsChar({left: 0, top: top}, "div");
        if (pos.ch < cm.getLine(pos.line).search(/\S/)) return lineStartSmart(cm, range.head);
        return pos;
      }, sel_move);
    },
    goLineUp: function(cm) {cm.moveV(-1, "line");},
    goLineDown: function(cm) {cm.moveV(1, "line");},
    goPageUp: function(cm) {cm.moveV(-1, "page");},
    goPageDown: function(cm) {cm.moveV(1, "page");},
    goCharLeft: function(cm) {cm.moveH(-1, "char");},
    goCharRight: function(cm) {cm.moveH(1, "char");},
    goColumnLeft: function(cm) {cm.moveH(-1, "column");},
    goColumnRight: function(cm) {cm.moveH(1, "column");},
    goWordLeft: function(cm) {cm.moveH(-1, "word");},
    goGroupRight: function(cm) {cm.moveH(1, "group");},
    goGroupLeft: function(cm) {cm.moveH(-1, "group");},
    goWordRight: function(cm) {cm.moveH(1, "word");},
    delCharBefore: function(cm) {cm.deleteH(-1, "char");},
    delCharAfter: function(cm) {cm.deleteH(1, "char");},
    delWordBefore: function(cm) {cm.deleteH(-1, "word");},
    delWordAfter: function(cm) {cm.deleteH(1, "word");},
    delGroupBefore: function(cm) {cm.deleteH(-1, "group");},
    delGroupAfter: function(cm) {cm.deleteH(1, "group");},
    indentAuto: function(cm) {cm.indentSelection("smart");},
    indentMore: function(cm) {cm.indentSelection("add");},
    indentLess: function(cm) {cm.indentSelection("subtract");},
    insertTab: function(cm) {cm.replaceSelection("\t");},
    insertSoftTab: function(cm) {
      var spaces = [], ranges = cm.listSelections(), tabSize = cm.options.tabSize;
      for (var i = 0; i < ranges.length; i++) {
        var pos = ranges[i].from();
        var col = countColumn(cm.getLine(pos.line), pos.ch, tabSize);
        spaces.push(new Array(tabSize - col % tabSize + 1).join(" "));
      }
      cm.replaceSelections(spaces);
    },
    defaultTab: function(cm) {
      if (cm.somethingSelected()) cm.indentSelection("add");
      else cm.execCommand("insertTab");
    },
    transposeChars: function(cm) {
      runInOp(cm, function() {
        var ranges = cm.listSelections(), newSel = [];
        for (var i = 0; i < ranges.length; i++) {
          var cur = ranges[i].head, line = getLine(cm.doc, cur.line).text;
          if (line) {
            if (cur.ch == line.length) cur = new Pos(cur.line, cur.ch - 1);
            if (cur.ch > 0) {
              cur = new Pos(cur.line, cur.ch + 1);
              cm.replaceRange(line.charAt(cur.ch - 1) + line.charAt(cur.ch - 2),
                              Pos(cur.line, cur.ch - 2), cur, "+transpose");
            } else if (cur.line > cm.doc.first) {
              var prev = getLine(cm.doc, cur.line - 1).text;
              if (prev)
                cm.replaceRange(line.charAt(0) + cm.doc.lineSeparator() +
                                prev.charAt(prev.length - 1),
                                Pos(cur.line - 1, prev.length - 1), Pos(cur.line, 1), "+transpose");
            }
          }
          newSel.push(new Range(cur, cur));
        }
        cm.setSelections(newSel);
      });
    },
    newlineAndIndent: function(cm) {
      runInOp(cm, function() {
        var len = cm.listSelections().length;
        for (var i = 0; i < len; i++) {
          var range = cm.listSelections()[i];
          cm.replaceRange(cm.doc.lineSeparator(), range.anchor, range.head, "+input");
          cm.indentLine(range.from().line + 1, null, true);
        }
        ensureCursorVisible(cm);
      });
    },
    toggleOverwrite: function(cm) {cm.toggleOverwrite();}
  };


  // STANDARD KEYMAPS

  var keyMap = CodeMirror.keyMap = {};

  keyMap.basic = {
    "Left": "goCharLeft", "Right": "goCharRight", "Up": "goLineUp", "Down": "goLineDown",
    "End": "goLineEnd", "Home": "goLineStartSmart", "PageUp": "goPageUp", "PageDown": "goPageDown",
    "Delete": "delCharAfter", "Backspace": "delCharBefore", "Shift-Backspace": "delCharBefore",
    "Tab": "defaultTab", "Shift-Tab": "indentAuto",
    "Enter": "newlineAndIndent", "Insert": "toggleOverwrite",
    "Esc": "singleSelection"
  };
  // Note that the save and find-related commands aren't defined by
  // default. User code or addons can define them. Unknown commands
  // are simply ignored.
  keyMap.pcDefault = {
    "Ctrl-A": "selectAll", "Ctrl-D": "deleteLine", "Ctrl-Z": "undo", "Shift-Ctrl-Z": "redo", "Ctrl-Y": "redo",
    "Ctrl-Home": "goDocStart", "Ctrl-End": "goDocEnd", "Ctrl-Up": "goLineUp", "Ctrl-Down": "goLineDown",
    "Ctrl-Left": "goGroupLeft", "Ctrl-Right": "goGroupRight", "Alt-Left": "goLineStart", "Alt-Right": "goLineEnd",
    "Ctrl-Backspace": "delGroupBefore", "Ctrl-Delete": "delGroupAfter", "Ctrl-S": "save", "Ctrl-F": "find",
    "Ctrl-G": "findNext", "Shift-Ctrl-G": "findPrev", "Shift-Ctrl-F": "replace", "Shift-Ctrl-R": "replaceAll",
    "Ctrl-[": "indentLess", "Ctrl-]": "indentMore",
    "Ctrl-U": "undoSelection", "Shift-Ctrl-U": "redoSelection", "Alt-U": "redoSelection",
    fallthrough: "basic"
  };
  // Very basic readline/emacs-style bindings, which are standard on Mac.
  keyMap.emacsy = {
    "Ctrl-F": "goCharRight", "Ctrl-B": "goCharLeft", "Ctrl-P": "goLineUp", "Ctrl-N": "goLineDown",
    "Alt-F": "goWordRight", "Alt-B": "goWordLeft", "Ctrl-A": "goLineStart", "Ctrl-E": "goLineEnd",
    "Ctrl-V": "goPageDown", "Shift-Ctrl-V": "goPageUp", "Ctrl-D": "delCharAfter", "Ctrl-H": "delCharBefore",
    "Alt-D": "delWordAfter", "Alt-Backspace": "delWordBefore", "Ctrl-K": "killLine", "Ctrl-T": "transposeChars"
  };
  keyMap.macDefault = {
    "Cmd-A": "selectAll", "Cmd-D": "deleteLine", "Cmd-Z": "undo", "Shift-Cmd-Z": "redo", "Cmd-Y": "redo",
    "Cmd-Home": "goDocStart", "Cmd-Up": "goDocStart", "Cmd-End": "goDocEnd", "Cmd-Down": "goDocEnd", "Alt-Left": "goGroupLeft",
    "Alt-Right": "goGroupRight", "Cmd-Left": "goLineLeft", "Cmd-Right": "goLineRight", "Alt-Backspace": "delGroupBefore",
    "Ctrl-Alt-Backspace": "delGroupAfter", "Alt-Delete": "delGroupAfter", "Cmd-S": "save", "Cmd-F": "find",
    "Cmd-G": "findNext", "Shift-Cmd-G": "findPrev", "Cmd-Alt-F": "replace", "Shift-Cmd-Alt-F": "replaceAll",
    "Cmd-[": "indentLess", "Cmd-]": "indentMore", "Cmd-Backspace": "delWrappedLineLeft", "Cmd-Delete": "delWrappedLineRight",
    "Cmd-U": "undoSelection", "Shift-Cmd-U": "redoSelection", "Ctrl-Up": "goDocStart", "Ctrl-Down": "goDocEnd",
    fallthrough: ["basic", "emacsy"]
  };
  keyMap["default"] = mac ? keyMap.macDefault : keyMap.pcDefault;

  // KEYMAP DISPATCH

  function normalizeKeyName(name) {
    var parts = name.split(/-(?!$)/), name = parts[parts.length - 1];
    var alt, ctrl, shift, cmd;
    for (var i = 0; i < parts.length - 1; i++) {
      var mod = parts[i];
      if (/^(cmd|meta|m)$/i.test(mod)) cmd = true;
      else if (/^a(lt)?$/i.test(mod)) alt = true;
      else if (/^(c|ctrl|control)$/i.test(mod)) ctrl = true;
      else if (/^s(hift)$/i.test(mod)) shift = true;
      else throw new Error("Unrecognized modifier name: " + mod);
    }
    if (alt) name = "Alt-" + name;
    if (ctrl) name = "Ctrl-" + name;
    if (cmd) name = "Cmd-" + name;
    if (shift) name = "Shift-" + name;
    return name;
  }

  // This is a kludge to keep keymaps mostly working as raw objects
  // (backwards compatibility) while at the same time support features
  // like normalization and multi-stroke key bindings. It compiles a
  // new normalized keymap, and then updates the old object to reflect
  // this.
  CodeMirror.normalizeKeyMap = function(keymap) {
    var copy = {};
    for (var keyname in keymap) if (keymap.hasOwnProperty(keyname)) {
      var value = keymap[keyname];
      if (/^(name|fallthrough|(de|at)tach)$/.test(keyname)) continue;
      if (value == "...") { delete keymap[keyname]; continue; }

      var keys = map(keyname.split(" "), normalizeKeyName);
      for (var i = 0; i < keys.length; i++) {
        var val, name;
        if (i == keys.length - 1) {
          name = keys.join(" ");
          val = value;
        } else {
          name = keys.slice(0, i + 1).join(" ");
          val = "...";
        }
        var prev = copy[name];
        if (!prev) copy[name] = val;
        else if (prev != val) throw new Error("Inconsistent bindings for " + name);
      }
      delete keymap[keyname];
    }
    for (var prop in copy) keymap[prop] = copy[prop];
    return keymap;
  };

  var lookupKey = CodeMirror.lookupKey = function(key, map, handle, context) {
    map = getKeyMap(map);
    var found = map.call ? map.call(key, context) : map[key];
    if (found === false) return "nothing";
    if (found === "...") return "multi";
    if (found != null && handle(found)) return "handled";

    if (map.fallthrough) {
      if (Object.prototype.toString.call(map.fallthrough) != "[object Array]")
        return lookupKey(key, map.fallthrough, handle, context);
      for (var i = 0; i < map.fallthrough.length; i++) {
        var result = lookupKey(key, map.fallthrough[i], handle, context);
        if (result) return result;
      }
    }
  };

  // Modifier key presses don't count as 'real' key presses for the
  // purpose of keymap fallthrough.
  var isModifierKey = CodeMirror.isModifierKey = function(value) {
    var name = typeof value == "string" ? value : keyNames[value.keyCode];
    return name == "Ctrl" || name == "Alt" || name == "Shift" || name == "Mod";
  };

  // Look up the name of a key as indicated by an event object.
  var keyName = CodeMirror.keyName = function(event, noShift) {
    if (presto && event.keyCode == 34 && event["char"]) return false;
    var base = keyNames[event.keyCode], name = base;
    if (name == null || event.altGraphKey) return false;
    if (event.altKey && base != "Alt") name = "Alt-" + name;
    if ((flipCtrlCmd ? event.metaKey : event.ctrlKey) && base != "Ctrl") name = "Ctrl-" + name;
    if ((flipCtrlCmd ? event.ctrlKey : event.metaKey) && base != "Cmd") name = "Cmd-" + name;
    if (!noShift && event.shiftKey && base != "Shift") name = "Shift-" + name;
    return name;
  };

  function getKeyMap(val) {
    return typeof val == "string" ? keyMap[val] : val;
  }

  // FROMTEXTAREA

  CodeMirror.fromTextArea = function(textarea, options) {
    options = options ? copyObj(options) : {};
    options.value = textarea.value;
    if (!options.tabindex && textarea.tabIndex)
      options.tabindex = textarea.tabIndex;
    if (!options.placeholder && textarea.placeholder)
      options.placeholder = textarea.placeholder;
    // Set autofocus to true if this textarea is focused, or if it has
    // autofocus and no other element is focused.
    if (options.autofocus == null) {
      var hasFocus = activeElt();
      options.autofocus = hasFocus == textarea ||
        textarea.getAttribute("autofocus") != null && hasFocus == document.body;
    }

    function save() {textarea.value = cm.getValue();}
    if (textarea.form) {
      on(textarea.form, "submit", save);
      // Deplorable hack to make the submit method do the right thing.
      if (!options.leaveSubmitMethodAlone) {
        var form = textarea.form, realSubmit = form.submit;
        try {
          var wrappedSubmit = form.submit = function() {
            save();
            form.submit = realSubmit;
            form.submit();
            form.submit = wrappedSubmit;
          };
        } catch(e) {}
      }
    }

    options.finishInit = function(cm) {
      cm.save = save;
      cm.getTextArea = function() { return textarea; };
      cm.toTextArea = function() {
        cm.toTextArea = isNaN; // Prevent this from being ran twice
        save();
        textarea.parentNode.removeChild(cm.getWrapperElement());
        textarea.style.display = "";
        if (textarea.form) {
          off(textarea.form, "submit", save);
          if (typeof textarea.form.submit == "function")
            textarea.form.submit = realSubmit;
        }
      };
    };

    textarea.style.display = "none";
    var cm = CodeMirror(function(node) {
      textarea.parentNode.insertBefore(node, textarea.nextSibling);
    }, options);
    return cm;
  };

  // STRING STREAM

  // Fed to the mode parsers, provides helper functions to make
  // parsers more succinct.

  var StringStream = CodeMirror.StringStream = function(string, tabSize) {
    this.pos = this.start = 0;
    this.string = string;
    this.tabSize = tabSize || 8;
    this.lastColumnPos = this.lastColumnValue = 0;
    this.lineStart = 0;
  };

  StringStream.prototype = {
    eol: function() {return this.pos >= this.string.length;},
    sol: function() {return this.pos == this.lineStart;},
    peek: function() {return this.string.charAt(this.pos) || undefined;},
    next: function() {
      if (this.pos < this.string.length)
        return this.string.charAt(this.pos++);
    },
    eat: function(match) {
      var ch = this.string.charAt(this.pos);
      if (typeof match == "string") var ok = ch == match;
      else var ok = ch && (match.test ? match.test(ch) : match(ch));
      if (ok) {++this.pos; return ch;}
    },
    eatWhile: function(match) {
      var start = this.pos;
      while (this.eat(match)){}
      return this.pos > start;
    },
    eatSpace: function() {
      var start = this.pos;
      while (/[\s\u00a0]/.test(this.string.charAt(this.pos))) ++this.pos;
      return this.pos > start;
    },
    skipToEnd: function() {this.pos = this.string.length;},
    skipTo: function(ch) {
      var found = this.string.indexOf(ch, this.pos);
      if (found > -1) {this.pos = found; return true;}
    },
    backUp: function(n) {this.pos -= n;},
    column: function() {
      if (this.lastColumnPos < this.start) {
        this.lastColumnValue = countColumn(this.string, this.start, this.tabSize, this.lastColumnPos, this.lastColumnValue);
        this.lastColumnPos = this.start;
      }
      return this.lastColumnValue - (this.lineStart ? countColumn(this.string, this.lineStart, this.tabSize) : 0);
    },
    indentation: function() {
      return countColumn(this.string, null, this.tabSize) -
        (this.lineStart ? countColumn(this.string, this.lineStart, this.tabSize) : 0);
    },
    match: function(pattern, consume, caseInsensitive) {
      if (typeof pattern == "string") {
        var cased = function(str) {return caseInsensitive ? str.toLowerCase() : str;};
        var substr = this.string.substr(this.pos, pattern.length);
        if (cased(substr) == cased(pattern)) {
          if (consume !== false) this.pos += pattern.length;
          return true;
        }
      } else {
        var match = this.string.slice(this.pos).match(pattern);
        if (match && match.index > 0) return null;
        if (match && consume !== false) this.pos += match[0].length;
        return match;
      }
    },
    current: function(){return this.string.slice(this.start, this.pos);},
    hideFirstChars: function(n, inner) {
      this.lineStart += n;
      try { return inner(); }
      finally { this.lineStart -= n; }
    }
  };

  // TEXTMARKERS

  // Created with markText and setBookmark methods. A TextMarker is a
  // handle that can be used to clear or find a marked position in the
  // document. Line objects hold arrays (markedSpans) containing
  // {from, to, marker} object pointing to such marker objects, and
  // indicating that such a marker is present on that line. Multiple
  // lines may point to the same marker when it spans across lines.
  // The spans will have null for their from/to properties when the
  // marker continues beyond the start/end of the line. Markers have
  // links back to the lines they currently touch.

  var nextMarkerId = 0;

  var TextMarker = CodeMirror.TextMarker = function(doc, type) {
    this.lines = [];
    this.type = type;
    this.doc = doc;
    this.id = ++nextMarkerId;
  };
  eventMixin(TextMarker);

  // Clear the marker.
  TextMarker.prototype.clear = function() {
    if (this.explicitlyCleared) return;
    var cm = this.doc.cm, withOp = cm && !cm.curOp;
    if (withOp) startOperation(cm);
    if (hasHandler(this, "clear")) {
      var found = this.find();
      if (found) signalLater(this, "clear", found.from, found.to);
    }
    var min = null, max = null;
    for (var i = 0; i < this.lines.length; ++i) {
      var line = this.lines[i];
      var span = getMarkedSpanFor(line.markedSpans, this);
      if (cm && !this.collapsed) regLineChange(cm, lineNo(line), "text");
      else if (cm) {
        if (span.to != null) max = lineNo(line);
        if (span.from != null) min = lineNo(line);
      }
      line.markedSpans = removeMarkedSpan(line.markedSpans, span);
      if (span.from == null && this.collapsed && !lineIsHidden(this.doc, line) && cm)
        updateLineHeight(line, textHeight(cm.display));
    }
    if (cm && this.collapsed && !cm.options.lineWrapping) for (var i = 0; i < this.lines.length; ++i) {
      var visual = visualLine(this.lines[i]), len = lineLength(visual);
      if (len > cm.display.maxLineLength) {
        cm.display.maxLine = visual;
        cm.display.maxLineLength = len;
        cm.display.maxLineChanged = true;
      }
    }

    if (min != null && cm && this.collapsed) regChange(cm, min, max + 1);
    this.lines.length = 0;
    this.explicitlyCleared = true;
    if (this.atomic && this.doc.cantEdit) {
      this.doc.cantEdit = false;
      if (cm) reCheckSelection(cm.doc);
    }
    if (cm) signalLater(cm, "markerCleared", cm, this);
    if (withOp) endOperation(cm);
    if (this.parent) this.parent.clear();
  };

  // Find the position of the marker in the document. Returns a {from,
  // to} object by default. Side can be passed to get a specific side
  // -- 0 (both), -1 (left), or 1 (right). When lineObj is true, the
  // Pos objects returned contain a line object, rather than a line
  // number (used to prevent looking up the same line twice).
  TextMarker.prototype.find = function(side, lineObj) {
    if (side == null && this.type == "bookmark") side = 1;
    var from, to;
    for (var i = 0; i < this.lines.length; ++i) {
      var line = this.lines[i];
      var span = getMarkedSpanFor(line.markedSpans, this);
      if (span.from != null) {
        from = Pos(lineObj ? line : lineNo(line), span.from);
        if (side == -1) return from;
      }
      if (span.to != null) {
        to = Pos(lineObj ? line : lineNo(line), span.to);
        if (side == 1) return to;
      }
    }
    return from && {from: from, to: to};
  };

  // Signals that the marker's widget changed, and surrounding layout
  // should be recomputed.
  TextMarker.prototype.changed = function() {
    var pos = this.find(-1, true), widget = this, cm = this.doc.cm;
    if (!pos || !cm) return;
    runInOp(cm, function() {
      var line = pos.line, lineN = lineNo(pos.line);
      var view = findViewForLine(cm, lineN);
      if (view) {
        clearLineMeasurementCacheFor(view);
        cm.curOp.selectionChanged = cm.curOp.forceUpdate = true;
      }
      cm.curOp.updateMaxLine = true;
      if (!lineIsHidden(widget.doc, line) && widget.height != null) {
        var oldHeight = widget.height;
        widget.height = null;
        var dHeight = widgetHeight(widget) - oldHeight;
        if (dHeight)
          updateLineHeight(line, line.height + dHeight);
      }
    });
  };

  TextMarker.prototype.attachLine = function(line) {
    if (!this.lines.length && this.doc.cm) {
      var op = this.doc.cm.curOp;
      if (!op.maybeHiddenMarkers || indexOf(op.maybeHiddenMarkers, this) == -1)
        (op.maybeUnhiddenMarkers || (op.maybeUnhiddenMarkers = [])).push(this);
    }
    this.lines.push(line);
  };
  TextMarker.prototype.detachLine = function(line) {
    this.lines.splice(indexOf(this.lines, line), 1);
    if (!this.lines.length && this.doc.cm) {
      var op = this.doc.cm.curOp;
      (op.maybeHiddenMarkers || (op.maybeHiddenMarkers = [])).push(this);
    }
  };

  // Collapsed markers have unique ids, in order to be able to order
  // them, which is needed for uniquely determining an outer marker
  // when they overlap (they may nest, but not partially overlap).
  var nextMarkerId = 0;

  // Create a marker, wire it up to the right lines, and
  function markText(doc, from, to, options, type) {
    // Shared markers (across linked documents) are handled separately
    // (markTextShared will call out to this again, once per
    // document).
    if (options && options.shared) return markTextShared(doc, from, to, options, type);
    // Ensure we are in an operation.
    if (doc.cm && !doc.cm.curOp) return operation(doc.cm, markText)(doc, from, to, options, type);

    var marker = new TextMarker(doc, type), diff = cmp(from, to);
    if (options) copyObj(options, marker, false);
    // Don't connect empty markers unless clearWhenEmpty is false
    if (diff > 0 || diff == 0 && marker.clearWhenEmpty !== false)
      return marker;
    if (marker.replacedWith) {
      // Showing up as a widget implies collapsed (widget replaces text)
      marker.collapsed = true;
      marker.widgetNode = elt("span", [marker.replacedWith], "CodeMirror-widget");
      if (!options.handleMouseEvents) marker.widgetNode.setAttribute("cm-ignore-events", "true");
      if (options.insertLeft) marker.widgetNode.insertLeft = true;
    }
    if (marker.collapsed) {
      if (conflictingCollapsedRange(doc, from.line, from, to, marker) ||
          from.line != to.line && conflictingCollapsedRange(doc, to.line, from, to, marker))
        throw new Error("Inserting collapsed marker partially overlapping an existing one");
      sawCollapsedSpans = true;
    }

    if (marker.addToHistory)
      addChangeToHistory(doc, {from: from, to: to, origin: "markText"}, doc.sel, NaN);

    var curLine = from.line, cm = doc.cm, updateMaxLine;
    doc.iter(curLine, to.line + 1, function(line) {
      if (cm && marker.collapsed && !cm.options.lineWrapping && visualLine(line) == cm.display.maxLine)
        updateMaxLine = true;
      if (marker.collapsed && curLine != from.line) updateLineHeight(line, 0);
      addMarkedSpan(line, new MarkedSpan(marker,
                                         curLine == from.line ? from.ch : null,
                                         curLine == to.line ? to.ch : null));
      ++curLine;
    });
    // lineIsHidden depends on the presence of the spans, so needs a second pass
    if (marker.collapsed) doc.iter(from.line, to.line + 1, function(line) {
      if (lineIsHidden(doc, line)) updateLineHeight(line, 0);
    });

    if (marker.clearOnEnter) on(marker, "beforeCursorEnter", function() { marker.clear(); });

    if (marker.readOnly) {
      sawReadOnlySpans = true;
      if (doc.history.done.length || doc.history.undone.length)
        doc.clearHistory();
    }
    if (marker.collapsed) {
      marker.id = ++nextMarkerId;
      marker.atomic = true;
    }
    if (cm) {
      // Sync editor state
      if (updateMaxLine) cm.curOp.updateMaxLine = true;
      if (marker.collapsed)
        regChange(cm, from.line, to.line + 1);
      else if (marker.className || marker.title || marker.startStyle || marker.endStyle || marker.css)
        for (var i = from.line; i <= to.line; i++) regLineChange(cm, i, "text");
      if (marker.atomic) reCheckSelection(cm.doc);
      signalLater(cm, "markerAdded", cm, marker);
    }
    return marker;
  }

  // SHARED TEXTMARKERS

  // A shared marker spans multiple linked documents. It is
  // implemented as a meta-marker-object controlling multiple normal
  // markers.
  var SharedTextMarker = CodeMirror.SharedTextMarker = function(markers, primary) {
    this.markers = markers;
    this.primary = primary;
    for (var i = 0; i < markers.length; ++i)
      markers[i].parent = this;
  };
  eventMixin(SharedTextMarker);

  SharedTextMarker.prototype.clear = function() {
    if (this.explicitlyCleared) return;
    this.explicitlyCleared = true;
    for (var i = 0; i < this.markers.length; ++i)
      this.markers[i].clear();
    signalLater(this, "clear");
  };
  SharedTextMarker.prototype.find = function(side, lineObj) {
    return this.primary.find(side, lineObj);
  };

  function markTextShared(doc, from, to, options, type) {
    options = copyObj(options);
    options.shared = false;
    var markers = [markText(doc, from, to, options, type)], primary = markers[0];
    var widget = options.widgetNode;
    linkedDocs(doc, function(doc) {
      if (widget) options.widgetNode = widget.cloneNode(true);
      markers.push(markText(doc, clipPos(doc, from), clipPos(doc, to), options, type));
      for (var i = 0; i < doc.linked.length; ++i)
        if (doc.linked[i].isParent) return;
      primary = lst(markers);
    });
    return new SharedTextMarker(markers, primary);
  }

  function findSharedMarkers(doc) {
    return doc.findMarks(Pos(doc.first, 0), doc.clipPos(Pos(doc.lastLine())),
                         function(m) { return m.parent; });
  }

  function copySharedMarkers(doc, markers) {
    for (var i = 0; i < markers.length; i++) {
      var marker = markers[i], pos = marker.find();
      var mFrom = doc.clipPos(pos.from), mTo = doc.clipPos(pos.to);
      if (cmp(mFrom, mTo)) {
        var subMark = markText(doc, mFrom, mTo, marker.primary, marker.primary.type);
        marker.markers.push(subMark);
        subMark.parent = marker;
      }
    }
  }

  function detachSharedMarkers(markers) {
    for (var i = 0; i < markers.length; i++) {
      var marker = markers[i], linked = [marker.primary.doc];;
      linkedDocs(marker.primary.doc, function(d) { linked.push(d); });
      for (var j = 0; j < marker.markers.length; j++) {
        var subMarker = marker.markers[j];
        if (indexOf(linked, subMarker.doc) == -1) {
          subMarker.parent = null;
          marker.markers.splice(j--, 1);
        }
      }
    }
  }

  // TEXTMARKER SPANS

  function MarkedSpan(marker, from, to) {
    this.marker = marker;
    this.from = from; this.to = to;
  }

  // Search an array of spans for a span matching the given marker.
  function getMarkedSpanFor(spans, marker) {
    if (spans) for (var i = 0; i < spans.length; ++i) {
      var span = spans[i];
      if (span.marker == marker) return span;
    }
  }
  // Remove a span from an array, returning undefined if no spans are
  // left (we don't store arrays for lines without spans).
  function removeMarkedSpan(spans, span) {
    for (var r, i = 0; i < spans.length; ++i)
      if (spans[i] != span) (r || (r = [])).push(spans[i]);
    return r;
  }
  // Add a span to a line.
  function addMarkedSpan(line, span) {
    line.markedSpans = line.markedSpans ? line.markedSpans.concat([span]) : [span];
    span.marker.attachLine(line);
  }

  // Used for the algorithm that adjusts markers for a change in the
  // document. These functions cut an array of spans at a given
  // character position, returning an array of remaining chunks (or
  // undefined if nothing remains).
  function markedSpansBefore(old, startCh, isInsert) {
    if (old) for (var i = 0, nw; i < old.length; ++i) {
      var span = old[i], marker = span.marker;
      var startsBefore = span.from == null || (marker.inclusiveLeft ? span.from <= startCh : span.from < startCh);
      if (startsBefore || span.from == startCh && marker.type == "bookmark" && (!isInsert || !span.marker.insertLeft)) {
        var endsAfter = span.to == null || (marker.inclusiveRight ? span.to >= startCh : span.to > startCh);
        (nw || (nw = [])).push(new MarkedSpan(marker, span.from, endsAfter ? null : span.to));
      }
    }
    return nw;
  }
  function markedSpansAfter(old, endCh, isInsert) {
    if (old) for (var i = 0, nw; i < old.length; ++i) {
      var span = old[i], marker = span.marker;
      var endsAfter = span.to == null || (marker.inclusiveRight ? span.to >= endCh : span.to > endCh);
      if (endsAfter || span.from == endCh && marker.type == "bookmark" && (!isInsert || span.marker.insertLeft)) {
        var startsBefore = span.from == null || (marker.inclusiveLeft ? span.from <= endCh : span.from < endCh);
        (nw || (nw = [])).push(new MarkedSpan(marker, startsBefore ? null : span.from - endCh,
                                              span.to == null ? null : span.to - endCh));
      }
    }
    return nw;
  }

  // Given a change object, compute the new set of marker spans that
  // cover the line in which the change took place. Removes spans
  // entirely within the change, reconnects spans belonging to the
  // same marker that appear on both sides of the change, and cuts off
  // spans partially within the change. Returns an array of span
  // arrays with one element for each line in (after) the change.
  function stretchSpansOverChange(doc, change) {
    if (change.full) return null;
    var oldFirst = isLine(doc, change.from.line) && getLine(doc, change.from.line).markedSpans;
    var oldLast = isLine(doc, change.to.line) && getLine(doc, change.to.line).markedSpans;
    if (!oldFirst && !oldLast) return null;

    var startCh = change.from.ch, endCh = change.to.ch, isInsert = cmp(change.from, change.to) == 0;
    // Get the spans that 'stick out' on both sides
    var first = markedSpansBefore(oldFirst, startCh, isInsert);
    var last = markedSpansAfter(oldLast, endCh, isInsert);

    // Next, merge those two ends
    var sameLine = change.text.length == 1, offset = lst(change.text).length + (sameLine ? startCh : 0);
    if (first) {
      // Fix up .to properties of first
      for (var i = 0; i < first.length; ++i) {
        var span = first[i];
        if (span.to == null) {
          var found = getMarkedSpanFor(last, span.marker);
          if (!found) span.to = startCh;
          else if (sameLine) span.to = found.to == null ? null : found.to + offset;
        }
      }
    }
    if (last) {
      // Fix up .from in last (or move them into first in case of sameLine)
      for (var i = 0; i < last.length; ++i) {
        var span = last[i];
        if (span.to != null) span.to += offset;
        if (span.from == null) {
          var found = getMarkedSpanFor(first, span.marker);
          if (!found) {
            span.from = offset;
            if (sameLine) (first || (first = [])).push(span);
          }
        } else {
          span.from += offset;
          if (sameLine) (first || (first = [])).push(span);
        }
      }
    }
    // Make sure we didn't create any zero-length spans
    if (first) first = clearEmptySpans(first);
    if (last && last != first) last = clearEmptySpans(last);

    var newMarkers = [first];
    if (!sameLine) {
      // Fill gap with whole-line-spans
      var gap = change.text.length - 2, gapMarkers;
      if (gap > 0 && first)
        for (var i = 0; i < first.length; ++i)
          if (first[i].to == null)
            (gapMarkers || (gapMarkers = [])).push(new MarkedSpan(first[i].marker, null, null));
      for (var i = 0; i < gap; ++i)
        newMarkers.push(gapMarkers);
      newMarkers.push(last);
    }
    return newMarkers;
  }

  // Remove spans that are empty and don't have a clearWhenEmpty
  // option of false.
  function clearEmptySpans(spans) {
    for (var i = 0; i < spans.length; ++i) {
      var span = spans[i];
      if (span.from != null && span.from == span.to && span.marker.clearWhenEmpty !== false)
        spans.splice(i--, 1);
    }
    if (!spans.length) return null;
    return spans;
  }

  // Used for un/re-doing changes from the history. Combines the
  // result of computing the existing spans with the set of spans that
  // existed in the history (so that deleting around a span and then
  // undoing brings back the span).
  function mergeOldSpans(doc, change) {
    var old = getOldSpans(doc, change);
    var stretched = stretchSpansOverChange(doc, change);
    if (!old) return stretched;
    if (!stretched) return old;

    for (var i = 0; i < old.length; ++i) {
      var oldCur = old[i], stretchCur = stretched[i];
      if (oldCur && stretchCur) {
        spans: for (var j = 0; j < stretchCur.length; ++j) {
          var span = stretchCur[j];
          for (var k = 0; k < oldCur.length; ++k)
            if (oldCur[k].marker == span.marker) continue spans;
          oldCur.push(span);
        }
      } else if (stretchCur) {
        old[i] = stretchCur;
      }
    }
    return old;
  }

  // Used to 'clip' out readOnly ranges when making a change.
  function removeReadOnlyRanges(doc, from, to) {
    var markers = null;
    doc.iter(from.line, to.line + 1, function(line) {
      if (line.markedSpans) for (var i = 0; i < line.markedSpans.length; ++i) {
        var mark = line.markedSpans[i].marker;
        if (mark.readOnly && (!markers || indexOf(markers, mark) == -1))
          (markers || (markers = [])).push(mark);
      }
    });
    if (!markers) return null;
    var parts = [{from: from, to: to}];
    for (var i = 0; i < markers.length; ++i) {
      var mk = markers[i], m = mk.find(0);
      for (var j = 0; j < parts.length; ++j) {
        var p = parts[j];
        if (cmp(p.to, m.from) < 0 || cmp(p.from, m.to) > 0) continue;
        var newParts = [j, 1], dfrom = cmp(p.from, m.from), dto = cmp(p.to, m.to);
        if (dfrom < 0 || !mk.inclusiveLeft && !dfrom)
          newParts.push({from: p.from, to: m.from});
        if (dto > 0 || !mk.inclusiveRight && !dto)
          newParts.push({from: m.to, to: p.to});
        parts.splice.apply(parts, newParts);
        j += newParts.length - 1;
      }
    }
    return parts;
  }

  // Connect or disconnect spans from a line.
  function detachMarkedSpans(line) {
    var spans = line.markedSpans;
    if (!spans) return;
    for (var i = 0; i < spans.length; ++i)
      spans[i].marker.detachLine(line);
    line.markedSpans = null;
  }
  function attachMarkedSpans(line, spans) {
    if (!spans) return;
    for (var i = 0; i < spans.length; ++i)
      spans[i].marker.attachLine(line);
    line.markedSpans = spans;
  }

  // Helpers used when computing which overlapping collapsed span
  // counts as the larger one.
  function extraLeft(marker) { return marker.inclusiveLeft ? -1 : 0; }
  function extraRight(marker) { return marker.inclusiveRight ? 1 : 0; }

  // Returns a number indicating which of two overlapping collapsed
  // spans is larger (and thus includes the other). Falls back to
  // comparing ids when the spans cover exactly the same range.
  function compareCollapsedMarkers(a, b) {
    var lenDiff = a.lines.length - b.lines.length;
    if (lenDiff != 0) return lenDiff;
    var aPos = a.find(), bPos = b.find();
    var fromCmp = cmp(aPos.from, bPos.from) || extraLeft(a) - extraLeft(b);
    if (fromCmp) return -fromCmp;
    var toCmp = cmp(aPos.to, bPos.to) || extraRight(a) - extraRight(b);
    if (toCmp) return toCmp;
    return b.id - a.id;
  }

  // Find out whether a line ends or starts in a collapsed span. If
  // so, return the marker for that span.
  function collapsedSpanAtSide(line, start) {
    var sps = sawCollapsedSpans && line.markedSpans, found;
    if (sps) for (var sp, i = 0; i < sps.length; ++i) {
      sp = sps[i];
      if (sp.marker.collapsed && (start ? sp.from : sp.to) == null &&
          (!found || compareCollapsedMarkers(found, sp.marker) < 0))
        found = sp.marker;
    }
    return found;
  }
  function collapsedSpanAtStart(line) { return collapsedSpanAtSide(line, true); }
  function collapsedSpanAtEnd(line) { return collapsedSpanAtSide(line, false); }

  // Test whether there exists a collapsed span that partially
  // overlaps (covers the start or end, but not both) of a new span.
  // Such overlap is not allowed.
  function conflictingCollapsedRange(doc, lineNo, from, to, marker) {
    var line = getLine(doc, lineNo);
    var sps = sawCollapsedSpans && line.markedSpans;
    if (sps) for (var i = 0; i < sps.length; ++i) {
      var sp = sps[i];
      if (!sp.marker.collapsed) continue;
      var found = sp.marker.find(0);
      var fromCmp = cmp(found.from, from) || extraLeft(sp.marker) - extraLeft(marker);
      var toCmp = cmp(found.to, to) || extraRight(sp.marker) - extraRight(marker);
      if (fromCmp >= 0 && toCmp <= 0 || fromCmp <= 0 && toCmp >= 0) continue;
      if (fromCmp <= 0 && (cmp(found.to, from) > 0 || (sp.marker.inclusiveRight && marker.inclusiveLeft)) ||
          fromCmp >= 0 && (cmp(found.from, to) < 0 || (sp.marker.inclusiveLeft && marker.inclusiveRight)))
        return true;
    }
  }

  // A visual line is a line as drawn on the screen. Folding, for
  // example, can cause multiple logical lines to appear on the same
  // visual line. This finds the start of the visual line that the
  // given line is part of (usually that is the line itself).
  function visualLine(line) {
    var merged;
    while (merged = collapsedSpanAtStart(line))
      line = merged.find(-1, true).line;
    return line;
  }

  // Returns an array of logical lines that continue the visual line
  // started by the argument, or undefined if there are no such lines.
  function visualLineContinued(line) {
    var merged, lines;
    while (merged = collapsedSpanAtEnd(line)) {
      line = merged.find(1, true).line;
      (lines || (lines = [])).push(line);
    }
    return lines;
  }

  // Get the line number of the start of the visual line that the
  // given line number is part of.
  function visualLineNo(doc, lineN) {
    var line = getLine(doc, lineN), vis = visualLine(line);
    if (line == vis) return lineN;
    return lineNo(vis);
  }
  // Get the line number of the start of the next visual line after
  // the given line.
  function visualLineEndNo(doc, lineN) {
    if (lineN > doc.lastLine()) return lineN;
    var line = getLine(doc, lineN), merged;
    if (!lineIsHidden(doc, line)) return lineN;
    while (merged = collapsedSpanAtEnd(line))
      line = merged.find(1, true).line;
    return lineNo(line) + 1;
  }

  // Compute whether a line is hidden. Lines count as hidden when they
  // are part of a visual line that starts with another line, or when
  // they are entirely covered by collapsed, non-widget span.
  function lineIsHidden(doc, line) {
    var sps = sawCollapsedSpans && line.markedSpans;
    if (sps) for (var sp, i = 0; i < sps.length; ++i) {
      sp = sps[i];
      if (!sp.marker.collapsed) continue;
      if (sp.from == null) return true;
      if (sp.marker.widgetNode) continue;
      if (sp.from == 0 && sp.marker.inclusiveLeft && lineIsHiddenInner(doc, line, sp))
        return true;
    }
  }
  function lineIsHiddenInner(doc, line, span) {
    if (span.to == null) {
      var end = span.marker.find(1, true);
      return lineIsHiddenInner(doc, end.line, getMarkedSpanFor(end.line.markedSpans, span.marker));
    }
    if (span.marker.inclusiveRight && span.to == line.text.length)
      return true;
    for (var sp, i = 0; i < line.markedSpans.length; ++i) {
      sp = line.markedSpans[i];
      if (sp.marker.collapsed && !sp.marker.widgetNode && sp.from == span.to &&
          (sp.to == null || sp.to != span.from) &&
          (sp.marker.inclusiveLeft || span.marker.inclusiveRight) &&
          lineIsHiddenInner(doc, line, sp)) return true;
    }
  }

  // LINE WIDGETS

  // Line widgets are block elements displayed above or below a line.

  var LineWidget = CodeMirror.LineWidget = function(doc, node, options) {
    if (options) for (var opt in options) if (options.hasOwnProperty(opt))
      this[opt] = options[opt];
    this.doc = doc;
    this.node = node;
  };
  eventMixin(LineWidget);

  function adjustScrollWhenAboveVisible(cm, line, diff) {
    if (heightAtLine(line) < ((cm.curOp && cm.curOp.scrollTop) || cm.doc.scrollTop))
      addToScrollPos(cm, null, diff);
  }

  LineWidget.prototype.clear = function() {
    var cm = this.doc.cm, ws = this.line.widgets, line = this.line, no = lineNo(line);
    if (no == null || !ws) return;
    for (var i = 0; i < ws.length; ++i) if (ws[i] == this) ws.splice(i--, 1);
    if (!ws.length) line.widgets = null;
    var height = widgetHeight(this);
    updateLineHeight(line, Math.max(0, line.height - height));
    if (cm) runInOp(cm, function() {
      adjustScrollWhenAboveVisible(cm, line, -height);
      regLineChange(cm, no, "widget");
    });
  };
  LineWidget.prototype.changed = function() {
    var oldH = this.height, cm = this.doc.cm, line = this.line;
    this.height = null;
    var diff = widgetHeight(this) - oldH;
    if (!diff) return;
    updateLineHeight(line, line.height + diff);
    if (cm) runInOp(cm, function() {
      cm.curOp.forceUpdate = true;
      adjustScrollWhenAboveVisible(cm, line, diff);
    });
  };

  function widgetHeight(widget) {
    if (widget.height != null) return widget.height;
    var cm = widget.doc.cm;
    if (!cm) return 0;
    if (!contains(document.body, widget.node)) {
      var parentStyle = "position: relative;";
      if (widget.coverGutter)
        parentStyle += "margin-left: -" + cm.display.gutters.offsetWidth + "px;";
      if (widget.noHScroll)
        parentStyle += "width: " + cm.display.wrapper.clientWidth + "px;";
      removeChildrenAndAdd(cm.display.measure, elt("div", [widget.node], null, parentStyle));
    }
    return widget.height = widget.node.parentNode.offsetHeight;
  }

  function addLineWidget(doc, handle, node, options) {
    var widget = new LineWidget(doc, node, options);
    var cm = doc.cm;
    if (cm && widget.noHScroll) cm.display.alignWidgets = true;
    changeLine(doc, handle, "widget", function(line) {
      var widgets = line.widgets || (line.widgets = []);
      if (widget.insertAt == null) widgets.push(widget);
      else widgets.splice(Math.min(widgets.length - 1, Math.max(0, widget.insertAt)), 0, widget);
      widget.line = line;
      if (cm && !lineIsHidden(doc, line)) {
        var aboveVisible = heightAtLine(line) < doc.scrollTop;
        updateLineHeight(line, line.height + widgetHeight(widget));
        if (aboveVisible) addToScrollPos(cm, null, widget.height);
        cm.curOp.forceUpdate = true;
      }
      return true;
    });
    return widget;
  }

  // LINE DATA STRUCTURE

  // Line objects. These hold state related to a line, including
  // highlighting info (the styles array).
  var Line = CodeMirror.Line = function(text, markedSpans, estimateHeight) {
    this.text = text;
    attachMarkedSpans(this, markedSpans);
    this.height = estimateHeight ? estimateHeight(this) : 1;
  };
  eventMixin(Line);
  Line.prototype.lineNo = function() { return lineNo(this); };

  // Change the content (text, markers) of a line. Automatically
  // invalidates cached information and tries to re-estimate the
  // line's height.
  function updateLine(line, text, markedSpans, estimateHeight) {
    line.text = text;
    if (line.stateAfter) line.stateAfter = null;
    if (line.styles) line.styles = null;
    if (line.order != null) line.order = null;
    detachMarkedSpans(line);
    attachMarkedSpans(line, markedSpans);
    var estHeight = estimateHeight ? estimateHeight(line) : 1;
    if (estHeight != line.height) updateLineHeight(line, estHeight);
  }

  // Detach a line from the document tree and its markers.
  function cleanUpLine(line) {
    line.parent = null;
    detachMarkedSpans(line);
  }

  function extractLineClasses(type, output) {
    if (type) for (;;) {
      var lineClass = type.match(/(?:^|\s+)line-(background-)?(\S+)/);
      if (!lineClass) break;
      type = type.slice(0, lineClass.index) + type.slice(lineClass.index + lineClass[0].length);
      var prop = lineClass[1] ? "bgClass" : "textClass";
      if (output[prop] == null)
        output[prop] = lineClass[2];
      else if (!(new RegExp("(?:^|\s)" + lineClass[2] + "(?:$|\s)")).test(output[prop]))
        output[prop] += " " + lineClass[2];
    }
    return type;
  }

  function callBlankLine(mode, state) {
    if (mode.blankLine) return mode.blankLine(state);
    if (!mode.innerMode) return;
    var inner = CodeMirror.innerMode(mode, state);
    if (inner.mode.blankLine) return inner.mode.blankLine(inner.state);
  }

  function readToken(mode, stream, state, inner) {
    for (var i = 0; i < 10; i++) {
      if (inner) inner[0] = CodeMirror.innerMode(mode, state).mode;
      var style = mode.token(stream, state);
      if (stream.pos > stream.start) return style;
    }
    throw new Error("Mode " + mode.name + " failed to advance stream.");
  }

  // Utility for getTokenAt and getLineTokens
  function takeToken(cm, pos, precise, asArray) {
    function getObj(copy) {
      return {start: stream.start, end: stream.pos,
              string: stream.current(),
              type: style || null,
              state: copy ? copyState(doc.mode, state) : state};
    }

    var doc = cm.doc, mode = doc.mode, style;
    pos = clipPos(doc, pos);
    var line = getLine(doc, pos.line), state = getStateBefore(cm, pos.line, precise);
    var stream = new StringStream(line.text, cm.options.tabSize), tokens;
    if (asArray) tokens = [];
    while ((asArray || stream.pos < pos.ch) && !stream.eol()) {
      stream.start = stream.pos;
      style = readToken(mode, stream, state);
      if (asArray) tokens.push(getObj(true));
    }
    return asArray ? tokens : getObj();
  }

  // Run the given mode's parser over a line, calling f for each token.
  function runMode(cm, text, mode, state, f, lineClasses, forceToEnd) {
    var flattenSpans = mode.flattenSpans;
    if (flattenSpans == null) flattenSpans = cm.options.flattenSpans;
    var curStart = 0, curStyle = null;
    var stream = new StringStream(text, cm.options.tabSize), style;
    var inner = cm.options.addModeClass && [null];
    if (text == "") extractLineClasses(callBlankLine(mode, state), lineClasses);
    while (!stream.eol()) {
      if (stream.pos > cm.options.maxHighlightLength) {
        flattenSpans = false;
        if (forceToEnd) processLine(cm, text, state, stream.pos);
        stream.pos = text.length;
        style = null;
      } else {
        style = extractLineClasses(readToken(mode, stream, state, inner), lineClasses);
      }
      if (inner) {
        var mName = inner[0].name;
        if (mName) style = "m-" + (style ? mName + " " + style : mName);
      }
      if (!flattenSpans || curStyle != style) {
        while (curStart < stream.start) {
          curStart = Math.min(stream.start, curStart + 50000);
          f(curStart, curStyle);
        }
        curStyle = style;
      }
      stream.start = stream.pos;
    }
    while (curStart < stream.pos) {
      // Webkit seems to refuse to render text nodes longer than 57444 characters
      var pos = Math.min(stream.pos, curStart + 50000);
      f(pos, curStyle);
      curStart = pos;
    }
  }

  // Compute a style array (an array starting with a mode generation
  // -- for invalidation -- followed by pairs of end positions and
  // style strings), which is used to highlight the tokens on the
  // line.
  function highlightLine(cm, line, state, forceToEnd) {
    // A styles array always starts with a number identifying the
    // mode/overlays that it is based on (for easy invalidation).
    var st = [cm.state.modeGen], lineClasses = {};
    // Compute the base array of styles
    runMode(cm, line.text, cm.doc.mode, state, function(end, style) {
      st.push(end, style);
    }, lineClasses, forceToEnd);

    // Run overlays, adjust style array.
    for (var o = 0; o < cm.state.overlays.length; ++o) {
      var overlay = cm.state.overlays[o], i = 1, at = 0;
      runMode(cm, line.text, overlay.mode, true, function(end, style) {
        var start = i;
        // Ensure there's a token end at the current position, and that i points at it
        while (at < end) {
          var i_end = st[i];
          if (i_end > end)
            st.splice(i, 1, end, st[i+1], i_end);
          i += 2;
          at = Math.min(end, i_end);
        }
        if (!style) return;
        if (overlay.opaque) {
          st.splice(start, i - start, end, "cm-overlay " + style);
          i = start + 2;
        } else {
          for (; start < i; start += 2) {
            var cur = st[start+1];
            st[start+1] = (cur ? cur + " " : "") + "cm-overlay " + style;
          }
        }
      }, lineClasses);
    }

    return {styles: st, classes: lineClasses.bgClass || lineClasses.textClass ? lineClasses : null};
  }

  function getLineStyles(cm, line, updateFrontier) {
    if (!line.styles || line.styles[0] != cm.state.modeGen) {
      var state = getStateBefore(cm, lineNo(line));
      var result = highlightLine(cm, line, line.text.length > cm.options.maxHighlightLength ? copyState(cm.doc.mode, state) : state);
      line.stateAfter = state;
      line.styles = result.styles;
      if (result.classes) line.styleClasses = result.classes;
      else if (line.styleClasses) line.styleClasses = null;
      if (updateFrontier === cm.doc.frontier) cm.doc.frontier++;
    }
    return line.styles;
  }

  // Lightweight form of highlight -- proceed over this line and
  // update state, but don't save a style array. Used for lines that
  // aren't currently visible.
  function processLine(cm, text, state, startAt) {
    var mode = cm.doc.mode;
    var stream = new StringStream(text, cm.options.tabSize);
    stream.start = stream.pos = startAt || 0;
    if (text == "") callBlankLine(mode, state);
    while (!stream.eol()) {
      readToken(mode, stream, state);
      stream.start = stream.pos;
    }
  }

  // Convert a style as returned by a mode (either null, or a string
  // containing one or more styles) to a CSS style. This is cached,
  // and also looks for line-wide styles.
  var styleToClassCache = {}, styleToClassCacheWithMode = {};
  function interpretTokenStyle(style, options) {
    if (!style || /^\s*$/.test(style)) return null;
    var cache = options.addModeClass ? styleToClassCacheWithMode : styleToClassCache;
    return cache[style] ||
      (cache[style] = style.replace(/\S+/g, "cm-$&"));
  }

  // Render the DOM representation of the text of a line. Also builds
  // up a 'line map', which points at the DOM nodes that represent
  // specific stretches of text, and is used by the measuring code.
  // The returned object contains the DOM node, this map, and
  // information about line-wide styles that were set by the mode.
  function buildLineContent(cm, lineView) {
    // The padding-right forces the element to have a 'border', which
    // is needed on Webkit to be able to get line-level bounding
    // rectangles for it (in measureChar).
    var content = elt("span", null, null, webkit ? "padding-right: .1px" : null);
    var builder = {pre: elt("pre", [content], "CodeMirror-line"), content: content,
                   col: 0, pos: 0, cm: cm,
                   splitSpaces: (ie || webkit) && cm.getOption("lineWrapping")};
    lineView.measure = {};

    // Iterate over the logical lines that make up this visual line.
    for (var i = 0; i <= (lineView.rest ? lineView.rest.length : 0); i++) {
      var line = i ? lineView.rest[i - 1] : lineView.line, order;
      builder.pos = 0;
      builder.addToken = buildToken;
      // Optionally wire in some hacks into the token-rendering
      // algorithm, to deal with browser quirks.
      if (hasBadBidiRects(cm.display.measure) && (order = getOrder(line)))
        builder.addToken = buildTokenBadBidi(builder.addToken, order);
      builder.map = [];
      var allowFrontierUpdate = lineView != cm.display.externalMeasured && lineNo(line);
      insertLineContent(line, builder, getLineStyles(cm, line, allowFrontierUpdate));
      if (line.styleClasses) {
        if (line.styleClasses.bgClass)
          builder.bgClass = joinClasses(line.styleClasses.bgClass, builder.bgClass || "");
        if (line.styleClasses.textClass)
          builder.textClass = joinClasses(line.styleClasses.textClass, builder.textClass || "");
      }

      // Ensure at least a single node is present, for measuring.
      if (builder.map.length == 0)
        builder.map.push(0, 0, builder.content.appendChild(zeroWidthElement(cm.display.measure)));

      // Store the map and a cache object for the current logical line
      if (i == 0) {
        lineView.measure.map = builder.map;
        lineView.measure.cache = {};
      } else {
        (lineView.measure.maps || (lineView.measure.maps = [])).push(builder.map);
        (lineView.measure.caches || (lineView.measure.caches = [])).push({});
      }
    }

    // See issue #2901
    if (webkit && /\bcm-tab\b/.test(builder.content.lastChild.className))
      builder.content.className = "cm-tab-wrap-hack";

    signal(cm, "renderLine", cm, lineView.line, builder.pre);
    if (builder.pre.className)
      builder.textClass = joinClasses(builder.pre.className, builder.textClass || "");

    return builder;
  }

  function defaultSpecialCharPlaceholder(ch) {
    var token = elt("span", "\u2022", "cm-invalidchar");
    token.title = "\\u" + ch.charCodeAt(0).toString(16);
    token.setAttribute("aria-label", token.title);
    return token;
  }

  // Build up the DOM representation for a single token, and add it to
  // the line map. Takes care to render special characters separately.
  function buildToken(builder, text, style, startStyle, endStyle, title, css) {
    if (!text) return;
    var displayText = builder.splitSpaces ? text.replace(/ {3,}/g, splitSpaces) : text;
    var special = builder.cm.state.specialChars, mustWrap = false;
    if (!special.test(text)) {
      builder.col += text.length;
      var content = document.createTextNode(displayText);
      builder.map.push(builder.pos, builder.pos + text.length, content);
      if (ie && ie_version < 9) mustWrap = true;
      builder.pos += text.length;
    } else {
      var content = document.createDocumentFragment(), pos = 0;
      while (true) {
        special.lastIndex = pos;
        var m = special.exec(text);
        var skipped = m ? m.index - pos : text.length - pos;
        if (skipped) {
          var txt = document.createTextNode(displayText.slice(pos, pos + skipped));
          if (ie && ie_version < 9) content.appendChild(elt("span", [txt]));
          else content.appendChild(txt);
          builder.map.push(builder.pos, builder.pos + skipped, txt);
          builder.col += skipped;
          builder.pos += skipped;
        }
        if (!m) break;
        pos += skipped + 1;
        if (m[0] == "\t") {
          var tabSize = builder.cm.options.tabSize, tabWidth = tabSize - builder.col % tabSize;
          var txt = content.appendChild(elt("span", spaceStr(tabWidth), "cm-tab"));
          txt.setAttribute("role", "presentation");
          txt.setAttribute("cm-text", "\t");
          builder.col += tabWidth;
        } else if (m[0] == "\r" || m[0] == "\n") {
          var txt = content.appendChild(elt("span", m[0] == "\r" ? "\u240d" : "\u2424", "cm-invalidchar"));
          txt.setAttribute("cm-text", m[0]);
          builder.col += 1;
        } else {
          var txt = builder.cm.options.specialCharPlaceholder(m[0]);
          txt.setAttribute("cm-text", m[0]);
          if (ie && ie_version < 9) content.appendChild(elt("span", [txt]));
          else content.appendChild(txt);
          builder.col += 1;
        }
        builder.map.push(builder.pos, builder.pos + 1, txt);
        builder.pos++;
      }
    }
    if (style || startStyle || endStyle || mustWrap || css) {
      var fullStyle = style || "";
      if (startStyle) fullStyle += startStyle;
      if (endStyle) fullStyle += endStyle;
      var token = elt("span", [content], fullStyle, css);
      if (title) token.title = title;
      return builder.content.appendChild(token);
    }
    builder.content.appendChild(content);
  }

  function splitSpaces(old) {
    var out = " ";
    for (var i = 0; i < old.length - 2; ++i) out += i % 2 ? " " : "\u00a0";
    out += " ";
    return out;
  }

  // Work around nonsense dimensions being reported for stretches of
  // right-to-left text.
  function buildTokenBadBidi(inner, order) {
    return function(builder, text, style, startStyle, endStyle, title, css) {
      style = style ? style + " cm-force-border" : "cm-force-border";
      var start = builder.pos, end = start + text.length;
      for (;;) {
        // Find the part that overlaps with the start of this text
        for (var i = 0; i < order.length; i++) {
          var part = order[i];
          if (part.to > start && part.from <= start) break;
        }
        if (part.to >= end) return inner(builder, text, style, startStyle, endStyle, title, css);
        inner(builder, text.slice(0, part.to - start), style, startStyle, null, title, css);
        startStyle = null;
        text = text.slice(part.to - start);
        start = part.to;
      }
    };
  }

  function buildCollapsedSpan(builder, size, marker, ignoreWidget) {
    var widget = !ignoreWidget && marker.widgetNode;
    if (widget) builder.map.push(builder.pos, builder.pos + size, widget);
    if (!ignoreWidget && builder.cm.display.input.needsContentAttribute) {
      if (!widget)
        widget = builder.content.appendChild(document.createElement("span"));
      widget.setAttribute("cm-marker", marker.id);
    }
    if (widget) {
      builder.cm.display.input.setUneditable(widget);
      builder.content.appendChild(widget);
    }
    builder.pos += size;
  }

  // Outputs a number of spans to make up a line, taking highlighting
  // and marked text into account.
  function insertLineContent(line, builder, styles) {
    var spans = line.markedSpans, allText = line.text, at = 0;
    if (!spans) {
      for (var i = 1; i < styles.length; i+=2)
        builder.addToken(builder, allText.slice(at, at = styles[i]), interpretTokenStyle(styles[i+1], builder.cm.options));
      return;
    }

    var len = allText.length, pos = 0, i = 1, text = "", style, css;
    var nextChange = 0, spanStyle, spanEndStyle, spanStartStyle, title, collapsed;
    for (;;) {
      if (nextChange == pos) { // Update current marker set
        spanStyle = spanEndStyle = spanStartStyle = title = css = "";
        collapsed = null; nextChange = Infinity;
        var foundBookmarks = [], endStyles
        for (var j = 0; j < spans.length; ++j) {
          var sp = spans[j], m = sp.marker;
          if (m.type == "bookmark" && sp.from == pos && m.widgetNode) {
            foundBookmarks.push(m);
          } else if (sp.from <= pos && (sp.to == null || sp.to > pos || m.collapsed && sp.to == pos && sp.from == pos)) {
            if (sp.to != null && sp.to != pos && nextChange > sp.to) {
              nextChange = sp.to;
              spanEndStyle = "";
            }
            if (m.className) spanStyle += " " + m.className;
            if (m.css) css = (css ? css + ";" : "") + m.css;
            if (m.startStyle && sp.from == pos) spanStartStyle += " " + m.startStyle;
            if (m.endStyle && sp.to == nextChange) (endStyles || (endStyles = [])).push(m.endStyle, sp.to)
            if (m.title && !title) title = m.title;
            if (m.collapsed && (!collapsed || compareCollapsedMarkers(collapsed.marker, m) < 0))
              collapsed = sp;
          } else if (sp.from > pos && nextChange > sp.from) {
            nextChange = sp.from;
          }
        }
        if (endStyles) for (var j = 0; j < endStyles.length; j += 2)
          if (endStyles[j + 1] == nextChange) spanEndStyle += " " + endStyles[j]

        if (!collapsed || collapsed.from == pos) for (var j = 0; j < foundBookmarks.length; ++j)
          buildCollapsedSpan(builder, 0, foundBookmarks[j]);
        if (collapsed && (collapsed.from || 0) == pos) {
          buildCollapsedSpan(builder, (collapsed.to == null ? len + 1 : collapsed.to) - pos,
                             collapsed.marker, collapsed.from == null);
          if (collapsed.to == null) return;
          if (collapsed.to == pos) collapsed = false;
        }
      }
      if (pos >= len) break;

      var upto = Math.min(len, nextChange);
      while (true) {
        if (text) {
          var end = pos + text.length;
          if (!collapsed) {
            var tokenText = end > upto ? text.slice(0, upto - pos) : text;
            builder.addToken(builder, tokenText, style ? style + spanStyle : spanStyle,
                             spanStartStyle, pos + tokenText.length == nextChange ? spanEndStyle : "", title, css);
          }
          if (end >= upto) {text = text.slice(upto - pos); pos = upto; break;}
          pos = end;
          spanStartStyle = "";
        }
        text = allText.slice(at, at = styles[i++]);
        style = interpretTokenStyle(styles[i++], builder.cm.options);
      }
    }
  }

  // DOCUMENT DATA STRUCTURE

  // By default, updates that start and end at the beginning of a line
  // are treated specially, in order to make the association of line
  // widgets and marker elements with the text behave more intuitive.
  function isWholeLineUpdate(doc, change) {
    return change.from.ch == 0 && change.to.ch == 0 && lst(change.text) == "" &&
      (!doc.cm || doc.cm.options.wholeLineUpdateBefore);
  }

  // Perform a change on the document data structure.
  function updateDoc(doc, change, markedSpans, estimateHeight) {
    function spansFor(n) {return markedSpans ? markedSpans[n] : null;}
    function update(line, text, spans) {
      updateLine(line, text, spans, estimateHeight);
      signalLater(line, "change", line, change);
    }
    function linesFor(start, end) {
      for (var i = start, result = []; i < end; ++i)
        result.push(new Line(text[i], spansFor(i), estimateHeight));
      return result;
    }

    var from = change.from, to = change.to, text = change.text;
    var firstLine = getLine(doc, from.line), lastLine = getLine(doc, to.line);
    var lastText = lst(text), lastSpans = spansFor(text.length - 1), nlines = to.line - from.line;

    // Adjust the line structure
    if (change.full) {
      doc.insert(0, linesFor(0, text.length));
      doc.remove(text.length, doc.size - text.length);
    } else if (isWholeLineUpdate(doc, change)) {
      // This is a whole-line replace. Treated specially to make
      // sure line objects move the way they are supposed to.
      var added = linesFor(0, text.length - 1);
      update(lastLine, lastLine.text, lastSpans);
      if (nlines) doc.remove(from.line, nlines);
      if (added.length) doc.insert(from.line, added);
    } else if (firstLine == lastLine) {
      if (text.length == 1) {
        update(firstLine, firstLine.text.slice(0, from.ch) + lastText + firstLine.text.slice(to.ch), lastSpans);
      } else {
        var added = linesFor(1, text.length - 1);
        added.push(new Line(lastText + firstLine.text.slice(to.ch), lastSpans, estimateHeight));
        update(firstLine, firstLine.text.slice(0, from.ch) + text[0], spansFor(0));
        doc.insert(from.line + 1, added);
      }
    } else if (text.length == 1) {
      update(firstLine, firstLine.text.slice(0, from.ch) + text[0] + lastLine.text.slice(to.ch), spansFor(0));
      doc.remove(from.line + 1, nlines);
    } else {
      update(firstLine, firstLine.text.slice(0, from.ch) + text[0], spansFor(0));
      update(lastLine, lastText + lastLine.text.slice(to.ch), lastSpans);
      var added = linesFor(1, text.length - 1);
      if (nlines > 1) doc.remove(from.line + 1, nlines - 1);
      doc.insert(from.line + 1, added);
    }

    signalLater(doc, "change", doc, change);
  }

  // The document is represented as a BTree consisting of leaves, with
  // chunk of lines in them, and branches, with up to ten leaves or
  // other branch nodes below them. The top node is always a branch
  // node, and is the document object itself (meaning it has
  // additional methods and properties).
  //
  // All nodes have parent links. The tree is used both to go from
  // line numbers to line objects, and to go from objects to numbers.
  // It also indexes by height, and is used to convert between height
  // and line object, and to find the total height of the document.
  //
  // See also http://marijnhaverbeke.nl/blog/codemirror-line-tree.html

  function LeafChunk(lines) {
    this.lines = lines;
    this.parent = null;
    for (var i = 0, height = 0; i < lines.length; ++i) {
      lines[i].parent = this;
      height += lines[i].height;
    }
    this.height = height;
  }

  LeafChunk.prototype = {
    chunkSize: function() { return this.lines.length; },
    // Remove the n lines at offset 'at'.
    removeInner: function(at, n) {
      for (var i = at, e = at + n; i < e; ++i) {
        var line = this.lines[i];
        this.height -= line.height;
        cleanUpLine(line);
        signalLater(line, "delete");
      }
      this.lines.splice(at, n);
    },
    // Helper used to collapse a small branch into a single leaf.
    collapse: function(lines) {
      lines.push.apply(lines, this.lines);
    },
    // Insert the given array of lines at offset 'at', count them as
    // having the given height.
    insertInner: function(at, lines, height) {
      this.height += height;
      this.lines = this.lines.slice(0, at).concat(lines).concat(this.lines.slice(at));
      for (var i = 0; i < lines.length; ++i) lines[i].parent = this;
    },
    // Used to iterate over a part of the tree.
    iterN: function(at, n, op) {
      for (var e = at + n; at < e; ++at)
        if (op(this.lines[at])) return true;
    }
  };

  function BranchChunk(children) {
    this.children = children;
    var size = 0, height = 0;
    for (var i = 0; i < children.length; ++i) {
      var ch = children[i];
      size += ch.chunkSize(); height += ch.height;
      ch.parent = this;
    }
    this.size = size;
    this.height = height;
    this.parent = null;
  }

  BranchChunk.prototype = {
    chunkSize: function() { return this.size; },
    removeInner: function(at, n) {
      this.size -= n;
      for (var i = 0; i < this.children.length; ++i) {
        var child = this.children[i], sz = child.chunkSize();
        if (at < sz) {
          var rm = Math.min(n, sz - at), oldHeight = child.height;
          child.removeInner(at, rm);
          this.height -= oldHeight - child.height;
          if (sz == rm) { this.children.splice(i--, 1); child.parent = null; }
          if ((n -= rm) == 0) break;
          at = 0;
        } else at -= sz;
      }
      // If the result is smaller than 25 lines, ensure that it is a
      // single leaf node.
      if (this.size - n < 25 &&
          (this.children.length > 1 || !(this.children[0] instanceof LeafChunk))) {
        var lines = [];
        this.collapse(lines);
        this.children = [new LeafChunk(lines)];
        this.children[0].parent = this;
      }
    },
    collapse: function(lines) {
      for (var i = 0; i < this.children.length; ++i) this.children[i].collapse(lines);
    },
    insertInner: function(at, lines, height) {
      this.size += lines.length;
      this.height += height;
      for (var i = 0; i < this.children.length; ++i) {
        var child = this.children[i], sz = child.chunkSize();
        if (at <= sz) {
          child.insertInner(at, lines, height);
          if (child.lines && child.lines.length > 50) {
            while (child.lines.length > 50) {
              var spilled = child.lines.splice(child.lines.length - 25, 25);
              var newleaf = new LeafChunk(spilled);
              child.height -= newleaf.height;
              this.children.splice(i + 1, 0, newleaf);
              newleaf.parent = this;
            }
            this.maybeSpill();
          }
          break;
        }
        at -= sz;
      }
    },
    // When a node has grown, check whether it should be split.
    maybeSpill: function() {
      if (this.children.length <= 10) return;
      var me = this;
      do {
        var spilled = me.children.splice(me.children.length - 5, 5);
        var sibling = new BranchChunk(spilled);
        if (!me.parent) { // Become the parent node
          var copy = new BranchChunk(me.children);
          copy.parent = me;
          me.children = [copy, sibling];
          me = copy;
        } else {
          me.size -= sibling.size;
          me.height -= sibling.height;
          var myIndex = indexOf(me.parent.children, me);
          me.parent.children.splice(myIndex + 1, 0, sibling);
        }
        sibling.parent = me.parent;
      } while (me.children.length > 10);
      me.parent.maybeSpill();
    },
    iterN: function(at, n, op) {
      for (var i = 0; i < this.children.length; ++i) {
        var child = this.children[i], sz = child.chunkSize();
        if (at < sz) {
          var used = Math.min(n, sz - at);
          if (child.iterN(at, used, op)) return true;
          if ((n -= used) == 0) break;
          at = 0;
        } else at -= sz;
      }
    }
  };

  var nextDocId = 0;
  var Doc = CodeMirror.Doc = function(text, mode, firstLine, lineSep) {
    if (!(this instanceof Doc)) return new Doc(text, mode, firstLine, lineSep);
    if (firstLine == null) firstLine = 0;

    BranchChunk.call(this, [new LeafChunk([new Line("", null)])]);
    this.first = firstLine;
    this.scrollTop = this.scrollLeft = 0;
    this.cantEdit = false;
    this.cleanGeneration = 1;
    this.frontier = firstLine;
    var start = Pos(firstLine, 0);
    this.sel = simpleSelection(start);
    this.history = new History(null);
    this.id = ++nextDocId;
    this.modeOption = mode;
    this.lineSep = lineSep;
    this.extend = false;

    if (typeof text == "string") text = this.splitLines(text);
    updateDoc(this, {from: start, to: start, text: text});
    setSelection(this, simpleSelection(start), sel_dontScroll);
  };

  Doc.prototype = createObj(BranchChunk.prototype, {
    constructor: Doc,
    // Iterate over the document. Supports two forms -- with only one
    // argument, it calls that for each line in the document. With
    // three, it iterates over the range given by the first two (with
    // the second being non-inclusive).
    iter: function(from, to, op) {
      if (op) this.iterN(from - this.first, to - from, op);
      else this.iterN(this.first, this.first + this.size, from);
    },

    // Non-public interface for adding and removing lines.
    insert: function(at, lines) {
      var height = 0;
      for (var i = 0; i < lines.length; ++i) height += lines[i].height;
      this.insertInner(at - this.first, lines, height);
    },
    remove: function(at, n) { this.removeInner(at - this.first, n); },

    // From here, the methods are part of the public interface. Most
    // are also available from CodeMirror (editor) instances.

    getValue: function(lineSep) {
      var lines = getLines(this, this.first, this.first + this.size);
      if (lineSep === false) return lines;
      return lines.join(lineSep || this.lineSeparator());
    },
    setValue: docMethodOp(function(code) {
      var top = Pos(this.first, 0), last = this.first + this.size - 1;
      makeChange(this, {from: top, to: Pos(last, getLine(this, last).text.length),
                        text: this.splitLines(code), origin: "setValue", full: true}, true);
      setSelection(this, simpleSelection(top));
    }),
    replaceRange: function(code, from, to, origin) {
      from = clipPos(this, from);
      to = to ? clipPos(this, to) : from;
      replaceRange(this, code, from, to, origin);
    },
    getRange: function(from, to, lineSep) {
      var lines = getBetween(this, clipPos(this, from), clipPos(this, to));
      if (lineSep === false) return lines;
      return lines.join(lineSep || this.lineSeparator());
    },

    getLine: function(line) {var l = this.getLineHandle(line); return l && l.text;},

    getLineHandle: function(line) {if (isLine(this, line)) return getLine(this, line);},
    getLineNumber: function(line) {return lineNo(line);},

    getLineHandleVisualStart: function(line) {
      if (typeof line == "number") line = getLine(this, line);
      return visualLine(line);
    },

    lineCount: function() {return this.size;},
    firstLine: function() {return this.first;},
    lastLine: function() {return this.first + this.size - 1;},

    clipPos: function(pos) {return clipPos(this, pos);},

    getCursor: function(start) {
      var range = this.sel.primary(), pos;
      if (start == null || start == "head") pos = range.head;
      else if (start == "anchor") pos = range.anchor;
      else if (start == "end" || start == "to" || start === false) pos = range.to();
      else pos = range.from();
      return pos;
    },
    listSelections: function() { return this.sel.ranges; },
    somethingSelected: function() {return this.sel.somethingSelected();},

    setCursor: docMethodOp(function(line, ch, options) {
      setSimpleSelection(this, clipPos(this, typeof line == "number" ? Pos(line, ch || 0) : line), null, options);
    }),
    setSelection: docMethodOp(function(anchor, head, options) {
      setSimpleSelection(this, clipPos(this, anchor), clipPos(this, head || anchor), options);
    }),
    extendSelection: docMethodOp(function(head, other, options) {
      extendSelection(this, clipPos(this, head), other && clipPos(this, other), options);
    }),
    extendSelections: docMethodOp(function(heads, options) {
      extendSelections(this, clipPosArray(this, heads), options);
    }),
    extendSelectionsBy: docMethodOp(function(f, options) {
      var heads = map(this.sel.ranges, f);
      extendSelections(this, clipPosArray(this, heads), options);
    }),
    setSelections: docMethodOp(function(ranges, primary, options) {
      if (!ranges.length) return;
      for (var i = 0, out = []; i < ranges.length; i++)
        out[i] = new Range(clipPos(this, ranges[i].anchor),
                           clipPos(this, ranges[i].head));
      if (primary == null) primary = Math.min(ranges.length - 1, this.sel.primIndex);
      setSelection(this, normalizeSelection(out, primary), options);
    }),
    addSelection: docMethodOp(function(anchor, head, options) {
      var ranges = this.sel.ranges.slice(0);
      ranges.push(new Range(clipPos(this, anchor), clipPos(this, head || anchor)));
      setSelection(this, normalizeSelection(ranges, ranges.length - 1), options);
    }),

    getSelection: function(lineSep) {
      var ranges = this.sel.ranges, lines;
      for (var i = 0; i < ranges.length; i++) {
        var sel = getBetween(this, ranges[i].from(), ranges[i].to());
        lines = lines ? lines.concat(sel) : sel;
      }
      if (lineSep === false) return lines;
      else return lines.join(lineSep || this.lineSeparator());
    },
    getSelections: function(lineSep) {
      var parts = [], ranges = this.sel.ranges;
      for (var i = 0; i < ranges.length; i++) {
        var sel = getBetween(this, ranges[i].from(), ranges[i].to());
        if (lineSep !== false) sel = sel.join(lineSep || this.lineSeparator());
        parts[i] = sel;
      }
      return parts;
    },
    replaceSelection: function(code, collapse, origin) {
      var dup = [];
      for (var i = 0; i < this.sel.ranges.length; i++)
        dup[i] = code;
      this.replaceSelections(dup, collapse, origin || "+input");
    },
    replaceSelections: docMethodOp(function(code, collapse, origin) {
      var changes = [], sel = this.sel;
      for (var i = 0; i < sel.ranges.length; i++) {
        var range = sel.ranges[i];
        changes[i] = {from: range.from(), to: range.to(), text: this.splitLines(code[i]), origin: origin};
      }
      var newSel = collapse && collapse != "end" && computeReplacedSel(this, changes, collapse);
      for (var i = changes.length - 1; i >= 0; i--)
        makeChange(this, changes[i]);
      if (newSel) setSelectionReplaceHistory(this, newSel);
      else if (this.cm) ensureCursorVisible(this.cm);
    }),
    undo: docMethodOp(function() {makeChangeFromHistory(this, "undo");}),
    redo: docMethodOp(function() {makeChangeFromHistory(this, "redo");}),
    undoSelection: docMethodOp(function() {makeChangeFromHistory(this, "undo", true);}),
    redoSelection: docMethodOp(function() {makeChangeFromHistory(this, "redo", true);}),

    setExtending: function(val) {this.extend = val;},
    getExtending: function() {return this.extend;},

    historySize: function() {
      var hist = this.history, done = 0, undone = 0;
      for (var i = 0; i < hist.done.length; i++) if (!hist.done[i].ranges) ++done;
      for (var i = 0; i < hist.undone.length; i++) if (!hist.undone[i].ranges) ++undone;
      return {undo: done, redo: undone};
    },
    clearHistory: function() {this.history = new History(this.history.maxGeneration);},

    markClean: function() {
      this.cleanGeneration = this.changeGeneration(true);
    },
    changeGeneration: function(forceSplit) {
      if (forceSplit)
        this.history.lastOp = this.history.lastSelOp = this.history.lastOrigin = null;
      return this.history.generation;
    },
    isClean: function (gen) {
      return this.history.generation == (gen || this.cleanGeneration);
    },

    getHistory: function() {
      return {done: copyHistoryArray(this.history.done),
              undone: copyHistoryArray(this.history.undone)};
    },
    setHistory: function(histData) {
      var hist = this.history = new History(this.history.maxGeneration);
      hist.done = copyHistoryArray(histData.done.slice(0), null, true);
      hist.undone = copyHistoryArray(histData.undone.slice(0), null, true);
    },

    addLineClass: docMethodOp(function(handle, where, cls) {
      return changeLine(this, handle, where == "gutter" ? "gutter" : "class", function(line) {
        var prop = where == "text" ? "textClass"
                 : where == "background" ? "bgClass"
                 : where == "gutter" ? "gutterClass" : "wrapClass";
        if (!line[prop]) line[prop] = cls;
        else if (classTest(cls).test(line[prop])) return false;
        else line[prop] += " " + cls;
        return true;
      });
    }),
    removeLineClass: docMethodOp(function(handle, where, cls) {
      return changeLine(this, handle, where == "gutter" ? "gutter" : "class", function(line) {
        var prop = where == "text" ? "textClass"
                 : where == "background" ? "bgClass"
                 : where == "gutter" ? "gutterClass" : "wrapClass";
        var cur = line[prop];
        if (!cur) return false;
        else if (cls == null) line[prop] = null;
        else {
          var found = cur.match(classTest(cls));
          if (!found) return false;
          var end = found.index + found[0].length;
          line[prop] = cur.slice(0, found.index) + (!found.index || end == cur.length ? "" : " ") + cur.slice(end) || null;
        }
        return true;
      });
    }),

    addLineWidget: docMethodOp(function(handle, node, options) {
      return addLineWidget(this, handle, node, options);
    }),
    removeLineWidget: function(widget) { widget.clear(); },

    markText: function(from, to, options) {
      return markText(this, clipPos(this, from), clipPos(this, to), options, options && options.type || "range");
    },
    setBookmark: function(pos, options) {
      var realOpts = {replacedWith: options && (options.nodeType == null ? options.widget : options),
                      insertLeft: options && options.insertLeft,
                      clearWhenEmpty: false, shared: options && options.shared,
                      handleMouseEvents: options && options.handleMouseEvents};
      pos = clipPos(this, pos);
      return markText(this, pos, pos, realOpts, "bookmark");
    },
    findMarksAt: function(pos) {
      pos = clipPos(this, pos);
      var markers = [], spans = getLine(this, pos.line).markedSpans;
      if (spans) for (var i = 0; i < spans.length; ++i) {
        var span = spans[i];
        if ((span.from == null || span.from <= pos.ch) &&
            (span.to == null || span.to >= pos.ch))
          markers.push(span.marker.parent || span.marker);
      }
      return markers;
    },
    findMarks: function(from, to, filter) {
      from = clipPos(this, from); to = clipPos(this, to);
      var found = [], lineNo = from.line;
      this.iter(from.line, to.line + 1, function(line) {
        var spans = line.markedSpans;
        if (spans) for (var i = 0; i < spans.length; i++) {
          var span = spans[i];
          if (!(span.to != null && lineNo == from.line && from.ch >= span.to ||
                span.from == null && lineNo != from.line ||
                span.from != null && lineNo == to.line && span.from >= to.ch) &&
              (!filter || filter(span.marker)))
            found.push(span.marker.parent || span.marker);
        }
        ++lineNo;
      });
      return found;
    },
    getAllMarks: function() {
      var markers = [];
      this.iter(function(line) {
        var sps = line.markedSpans;
        if (sps) for (var i = 0; i < sps.length; ++i)
          if (sps[i].from != null) markers.push(sps[i].marker);
      });
      return markers;
    },

    posFromIndex: function(off) {
      var ch, lineNo = this.first, sepSize = this.lineSeparator().length;
      this.iter(function(line) {
        var sz = line.text.length + sepSize;
        if (sz > off) { ch = off; return true; }
        off -= sz;
        ++lineNo;
      });
      return clipPos(this, Pos(lineNo, ch));
    },
    indexFromPos: function (coords) {
      coords = clipPos(this, coords);
      var index = coords.ch;
      if (coords.line < this.first || coords.ch < 0) return 0;
      var sepSize = this.lineSeparator().length;
      this.iter(this.first, coords.line, function (line) {
        index += line.text.length + sepSize;
      });
      return index;
    },

    copy: function(copyHistory) {
      var doc = new Doc(getLines(this, this.first, this.first + this.size),
                        this.modeOption, this.first, this.lineSep);
      doc.scrollTop = this.scrollTop; doc.scrollLeft = this.scrollLeft;
      doc.sel = this.sel;
      doc.extend = false;
      if (copyHistory) {
        doc.history.undoDepth = this.history.undoDepth;
        doc.setHistory(this.getHistory());
      }
      return doc;
    },

    linkedDoc: function(options) {
      if (!options) options = {};
      var from = this.first, to = this.first + this.size;
      if (options.from != null && options.from > from) from = options.from;
      if (options.to != null && options.to < to) to = options.to;
      var copy = new Doc(getLines(this, from, to), options.mode || this.modeOption, from, this.lineSep);
      if (options.sharedHist) copy.history = this.history;
      (this.linked || (this.linked = [])).push({doc: copy, sharedHist: options.sharedHist});
      copy.linked = [{doc: this, isParent: true, sharedHist: options.sharedHist}];
      copySharedMarkers(copy, findSharedMarkers(this));
      return copy;
    },
    unlinkDoc: function(other) {
      if (other instanceof CodeMirror) other = other.doc;
      if (this.linked) for (var i = 0; i < this.linked.length; ++i) {
        var link = this.linked[i];
        if (link.doc != other) continue;
        this.linked.splice(i, 1);
        other.unlinkDoc(this);
        detachSharedMarkers(findSharedMarkers(this));
        break;
      }
      // If the histories were shared, split them again
      if (other.history == this.history) {
        var splitIds = [other.id];
        linkedDocs(other, function(doc) {splitIds.push(doc.id);}, true);
        other.history = new History(null);
        other.history.done = copyHistoryArray(this.history.done, splitIds);
        other.history.undone = copyHistoryArray(this.history.undone, splitIds);
      }
    },
    iterLinkedDocs: function(f) {linkedDocs(this, f);},

    getMode: function() {return this.mode;},
    getEditor: function() {return this.cm;},

    splitLines: function(str) {
      if (this.lineSep) return str.split(this.lineSep);
      return splitLinesAuto(str);
    },
    lineSeparator: function() { return this.lineSep || "\n"; }
  });

  // Public alias.
  Doc.prototype.eachLine = Doc.prototype.iter;

  // Set up methods on CodeMirror's prototype to redirect to the editor's document.
  var dontDelegate = "iter insert remove copy getEditor constructor".split(" ");
  for (var prop in Doc.prototype) if (Doc.prototype.hasOwnProperty(prop) && indexOf(dontDelegate, prop) < 0)
    CodeMirror.prototype[prop] = (function(method) {
      return function() {return method.apply(this.doc, arguments);};
    })(Doc.prototype[prop]);

  eventMixin(Doc);

  // Call f for all linked documents.
  function linkedDocs(doc, f, sharedHistOnly) {
    function propagate(doc, skip, sharedHist) {
      if (doc.linked) for (var i = 0; i < doc.linked.length; ++i) {
        var rel = doc.linked[i];
        if (rel.doc == skip) continue;
        var shared = sharedHist && rel.sharedHist;
        if (sharedHistOnly && !shared) continue;
        f(rel.doc, shared);
        propagate(rel.doc, doc, shared);
      }
    }
    propagate(doc, null, true);
  }

  // Attach a document to an editor.
  function attachDoc(cm, doc) {
    if (doc.cm) throw new Error("This document is already in use.");
    cm.doc = doc;
    doc.cm = cm;
    estimateLineHeights(cm);
    loadMode(cm);
    if (!cm.options.lineWrapping) findMaxLine(cm);
    cm.options.mode = doc.modeOption;
    regChange(cm);
  }

  // LINE UTILITIES

  // Find the line object corresponding to the given line number.
  function getLine(doc, n) {
    n -= doc.first;
    if (n < 0 || n >= doc.size) throw new Error("There is no line " + (n + doc.first) + " in the document.");
    for (var chunk = doc; !chunk.lines;) {
      for (var i = 0;; ++i) {
        var child = chunk.children[i], sz = child.chunkSize();
        if (n < sz) { chunk = child; break; }
        n -= sz;
      }
    }
    return chunk.lines[n];
  }

  // Get the part of a document between two positions, as an array of
  // strings.
  function getBetween(doc, start, end) {
    var out = [], n = start.line;
    doc.iter(start.line, end.line + 1, function(line) {
      var text = line.text;
      if (n == end.line) text = text.slice(0, end.ch);
      if (n == start.line) text = text.slice(start.ch);
      out.push(text);
      ++n;
    });
    return out;
  }
  // Get the lines between from and to, as array of strings.
  function getLines(doc, from, to) {
    var out = [];
    doc.iter(from, to, function(line) { out.push(line.text); });
    return out;
  }

  // Update the height of a line, propagating the height change
  // upwards to parent nodes.
  function updateLineHeight(line, height) {
    var diff = height - line.height;
    if (diff) for (var n = line; n; n = n.parent) n.height += diff;
  }

  // Given a line object, find its line number by walking up through
  // its parent links.
  function lineNo(line) {
    if (line.parent == null) return null;
    var cur = line.parent, no = indexOf(cur.lines, line);
    for (var chunk = cur.parent; chunk; cur = chunk, chunk = chunk.parent) {
      for (var i = 0;; ++i) {
        if (chunk.children[i] == cur) break;
        no += chunk.children[i].chunkSize();
      }
    }
    return no + cur.first;
  }

  // Find the line at the given vertical position, using the height
  // information in the document tree.
  function lineAtHeight(chunk, h) {
    var n = chunk.first;
    outer: do {
      for (var i = 0; i < chunk.children.length; ++i) {
        var child = chunk.children[i], ch = child.height;
        if (h < ch) { chunk = child; continue outer; }
        h -= ch;
        n += child.chunkSize();
      }
      return n;
    } while (!chunk.lines);
    for (var i = 0; i < chunk.lines.length; ++i) {
      var line = chunk.lines[i], lh = line.height;
      if (h < lh) break;
      h -= lh;
    }
    return n + i;
  }


  // Find the height above the given line.
  function heightAtLine(lineObj) {
    lineObj = visualLine(lineObj);

    var h = 0, chunk = lineObj.parent;
    for (var i = 0; i < chunk.lines.length; ++i) {
      var line = chunk.lines[i];
      if (line == lineObj) break;
      else h += line.height;
    }
    for (var p = chunk.parent; p; chunk = p, p = chunk.parent) {
      for (var i = 0; i < p.children.length; ++i) {
        var cur = p.children[i];
        if (cur == chunk) break;
        else h += cur.height;
      }
    }
    return h;
  }

  // Get the bidi ordering for the given line (and cache it). Returns
  // false for lines that are fully left-to-right, and an array of
  // BidiSpan objects otherwise.
  function getOrder(line) {
    var order = line.order;
    if (order == null) order = line.order = bidiOrdering(line.text);
    return order;
  }

  // HISTORY

  function History(startGen) {
    // Arrays of change events and selections. Doing something adds an
    // event to done and clears undo. Undoing moves events from done
    // to undone, redoing moves them in the other direction.
    this.done = []; this.undone = [];
    this.undoDepth = Infinity;
    // Used to track when changes can be merged into a single undo
    // event
    this.lastModTime = this.lastSelTime = 0;
    this.lastOp = this.lastSelOp = null;
    this.lastOrigin = this.lastSelOrigin = null;
    // Used by the isClean() method
    this.generation = this.maxGeneration = startGen || 1;
  }

  // Create a history change event from an updateDoc-style change
  // object.
  function historyChangeFromChange(doc, change) {
    var histChange = {from: copyPos(change.from), to: changeEnd(change), text: getBetween(doc, change.from, change.to)};
    attachLocalSpans(doc, histChange, change.from.line, change.to.line + 1);
    linkedDocs(doc, function(doc) {attachLocalSpans(doc, histChange, change.from.line, change.to.line + 1);}, true);
    return histChange;
  }

  // Pop all selection events off the end of a history array. Stop at
  // a change event.
  function clearSelectionEvents(array) {
    while (array.length) {
      var last = lst(array);
      if (last.ranges) array.pop();
      else break;
    }
  }

  // Find the top change event in the history. Pop off selection
  // events that are in the way.
  function lastChangeEvent(hist, force) {
    if (force) {
      clearSelectionEvents(hist.done);
      return lst(hist.done);
    } else if (hist.done.length && !lst(hist.done).ranges) {
      return lst(hist.done);
    } else if (hist.done.length > 1 && !hist.done[hist.done.length - 2].ranges) {
      hist.done.pop();
      return lst(hist.done);
    }
  }

  // Register a change in the history. Merges changes that are within
  // a single operation, ore are close together with an origin that
  // allows merging (starting with "+") into a single event.
  function addChangeToHistory(doc, change, selAfter, opId) {
    var hist = doc.history;
    hist.undone.length = 0;
    var time = +new Date, cur;

    if ((hist.lastOp == opId ||
         hist.lastOrigin == change.origin && change.origin &&
         ((change.origin.charAt(0) == "+" && doc.cm && hist.lastModTime > time - doc.cm.options.historyEventDelay) ||
          change.origin.charAt(0) == "*")) &&
        (cur = lastChangeEvent(hist, hist.lastOp == opId))) {
      // Merge this change into the last event
      var last = lst(cur.changes);
      if (cmp(change.from, change.to) == 0 && cmp(change.from, last.to) == 0) {
        // Optimized case for simple insertion -- don't want to add
        // new changesets for every character typed
        last.to = changeEnd(change);
      } else {
        // Add new sub-event
        cur.changes.push(historyChangeFromChange(doc, change));
      }
    } else {
      // Can not be merged, start a new event.
      var before = lst(hist.done);
      if (!before || !before.ranges)
        pushSelectionToHistory(doc.sel, hist.done);
      cur = {changes: [historyChangeFromChange(doc, change)],
             generation: hist.generation};
      hist.done.push(cur);
      while (hist.done.length > hist.undoDepth) {
        hist.done.shift();
        if (!hist.done[0].ranges) hist.done.shift();
      }
    }
    hist.done.push(selAfter);
    hist.generation = ++hist.maxGeneration;
    hist.lastModTime = hist.lastSelTime = time;
    hist.lastOp = hist.lastSelOp = opId;
    hist.lastOrigin = hist.lastSelOrigin = change.origin;

    if (!last) signal(doc, "historyAdded");
  }

  function selectionEventCanBeMerged(doc, origin, prev, sel) {
    var ch = origin.charAt(0);
    return ch == "*" ||
      ch == "+" &&
      prev.ranges.length == sel.ranges.length &&
      prev.somethingSelected() == sel.somethingSelected() &&
      new Date - doc.history.lastSelTime <= (doc.cm ? doc.cm.options.historyEventDelay : 500);
  }

  // Called whenever the selection changes, sets the new selection as
  // the pending selection in the history, and pushes the old pending
  // selection into the 'done' array when it was significantly
  // different (in number of selected ranges, emptiness, or time).
  function addSelectionToHistory(doc, sel, opId, options) {
    var hist = doc.history, origin = options && options.origin;

    // A new event is started when the previous origin does not match
    // the current, or the origins don't allow matching. Origins
    // starting with * are always merged, those starting with + are
    // merged when similar and close together in time.
    if (opId == hist.lastSelOp ||
        (origin && hist.lastSelOrigin == origin &&
         (hist.lastModTime == hist.lastSelTime && hist.lastOrigin == origin ||
          selectionEventCanBeMerged(doc, origin, lst(hist.done), sel))))
      hist.done[hist.done.length - 1] = sel;
    else
      pushSelectionToHistory(sel, hist.done);

    hist.lastSelTime = +new Date;
    hist.lastSelOrigin = origin;
    hist.lastSelOp = opId;
    if (options && options.clearRedo !== false)
      clearSelectionEvents(hist.undone);
  }

  function pushSelectionToHistory(sel, dest) {
    var top = lst(dest);
    if (!(top && top.ranges && top.equals(sel)))
      dest.push(sel);
  }

  // Used to store marked span information in the history.
  function attachLocalSpans(doc, change, from, to) {
    var existing = change["spans_" + doc.id], n = 0;
    doc.iter(Math.max(doc.first, from), Math.min(doc.first + doc.size, to), function(line) {
      if (line.markedSpans)
        (existing || (existing = change["spans_" + doc.id] = {}))[n] = line.markedSpans;
      ++n;
    });
  }

  // When un/re-doing restores text containing marked spans, those
  // that have been explicitly cleared should not be restored.
  function removeClearedSpans(spans) {
    if (!spans) return null;
    for (var i = 0, out; i < spans.length; ++i) {
      if (spans[i].marker.explicitlyCleared) { if (!out) out = spans.slice(0, i); }
      else if (out) out.push(spans[i]);
    }
    return !out ? spans : out.length ? out : null;
  }

  // Retrieve and filter the old marked spans stored in a change event.
  function getOldSpans(doc, change) {
    var found = change["spans_" + doc.id];
    if (!found) return null;
    for (var i = 0, nw = []; i < change.text.length; ++i)
      nw.push(removeClearedSpans(found[i]));
    return nw;
  }

  // Used both to provide a JSON-safe object in .getHistory, and, when
  // detaching a document, to split the history in two
  function copyHistoryArray(events, newGroup, instantiateSel) {
    for (var i = 0, copy = []; i < events.length; ++i) {
      var event = events[i];
      if (event.ranges) {
        copy.push(instantiateSel ? Selection.prototype.deepCopy.call(event) : event);
        continue;
      }
      var changes = event.changes, newChanges = [];
      copy.push({changes: newChanges});
      for (var j = 0; j < changes.length; ++j) {
        var change = changes[j], m;
        newChanges.push({from: change.from, to: change.to, text: change.text});
        if (newGroup) for (var prop in change) if (m = prop.match(/^spans_(\d+)$/)) {
          if (indexOf(newGroup, Number(m[1])) > -1) {
            lst(newChanges)[prop] = change[prop];
            delete change[prop];
          }
        }
      }
    }
    return copy;
  }

  // Rebasing/resetting history to deal with externally-sourced changes

  function rebaseHistSelSingle(pos, from, to, diff) {
    if (to < pos.line) {
      pos.line += diff;
    } else if (from < pos.line) {
      pos.line = from;
      pos.ch = 0;
    }
  }

  // Tries to rebase an array of history events given a change in the
  // document. If the change touches the same lines as the event, the
  // event, and everything 'behind' it, is discarded. If the change is
  // before the event, the event's positions are updated. Uses a
  // copy-on-write scheme for the positions, to avoid having to
  // reallocate them all on every rebase, but also avoid problems with
  // shared position objects being unsafely updated.
  function rebaseHistArray(array, from, to, diff) {
    for (var i = 0; i < array.length; ++i) {
      var sub = array[i], ok = true;
      if (sub.ranges) {
        if (!sub.copied) { sub = array[i] = sub.deepCopy(); sub.copied = true; }
        for (var j = 0; j < sub.ranges.length; j++) {
          rebaseHistSelSingle(sub.ranges[j].anchor, from, to, diff);
          rebaseHistSelSingle(sub.ranges[j].head, from, to, diff);
        }
        continue;
      }
      for (var j = 0; j < sub.changes.length; ++j) {
        var cur = sub.changes[j];
        if (to < cur.from.line) {
          cur.from = Pos(cur.from.line + diff, cur.from.ch);
          cur.to = Pos(cur.to.line + diff, cur.to.ch);
        } else if (from <= cur.to.line) {
          ok = false;
          break;
        }
      }
      if (!ok) {
        array.splice(0, i + 1);
        i = 0;
      }
    }
  }

  function rebaseHist(hist, change) {
    var from = change.from.line, to = change.to.line, diff = change.text.length - (to - from) - 1;
    rebaseHistArray(hist.done, from, to, diff);
    rebaseHistArray(hist.undone, from, to, diff);
  }

  // EVENT UTILITIES

  // Due to the fact that we still support jurassic IE versions, some
  // compatibility wrappers are needed.

  var e_preventDefault = CodeMirror.e_preventDefault = function(e) {
    if (e.preventDefault) e.preventDefault();
    else e.returnValue = false;
  };
  var e_stopPropagation = CodeMirror.e_stopPropagation = function(e) {
    if (e.stopPropagation) e.stopPropagation();
    else e.cancelBubble = true;
  };
  function e_defaultPrevented(e) {
    return e.defaultPrevented != null ? e.defaultPrevented : e.returnValue == false;
  }
  var e_stop = CodeMirror.e_stop = function(e) {e_preventDefault(e); e_stopPropagation(e);};

  function e_target(e) {return e.target || e.srcElement;}
  function e_button(e) {
    var b = e.which;
    if (b == null) {
      if (e.button & 1) b = 1;
      else if (e.button & 2) b = 3;
      else if (e.button & 4) b = 2;
    }
    if (mac && e.ctrlKey && b == 1) b = 3;
    return b;
  }

  // EVENT HANDLING

  // Lightweight event framework. on/off also work on DOM nodes,
  // registering native DOM handlers.

  var on = CodeMirror.on = function(emitter, type, f) {
    if (emitter.addEventListener)
      emitter.addEventListener(type, f, false);
    else if (emitter.attachEvent)
      emitter.attachEvent("on" + type, f);
    else {
      var map = emitter._handlers || (emitter._handlers = {});
      var arr = map[type] || (map[type] = []);
      arr.push(f);
    }
  };

  var noHandlers = []
  function getHandlers(emitter, type, copy) {
    var arr = emitter._handlers && emitter._handlers[type]
    if (copy) return arr && arr.length > 0 ? arr.slice() : noHandlers
    else return arr || noHandlers
  }

  var off = CodeMirror.off = function(emitter, type, f) {
    if (emitter.removeEventListener)
      emitter.removeEventListener(type, f, false);
    else if (emitter.detachEvent)
      emitter.detachEvent("on" + type, f);
    else {
      var handlers = getHandlers(emitter, type, false)
      for (var i = 0; i < handlers.length; ++i)
        if (handlers[i] == f) { handlers.splice(i, 1); break; }
    }
  };

  var signal = CodeMirror.signal = function(emitter, type /*, values...*/) {
    var handlers = getHandlers(emitter, type, true)
    if (!handlers.length) return;
    var args = Array.prototype.slice.call(arguments, 2);
    for (var i = 0; i < handlers.length; ++i) handlers[i].apply(null, args);
  };

  var orphanDelayedCallbacks = null;

  // Often, we want to signal events at a point where we are in the
  // middle of some work, but don't want the handler to start calling
  // other methods on the editor, which might be in an inconsistent
  // state or simply not expect any other events to happen.
  // signalLater looks whether there are any handlers, and schedules
  // them to be executed when the last operation ends, or, if no
  // operation is active, when a timeout fires.
  function signalLater(emitter, type /*, values...*/) {
    var arr = getHandlers(emitter, type, false)
    if (!arr.length) return;
    var args = Array.prototype.slice.call(arguments, 2), list;
    if (operationGroup) {
      list = operationGroup.delayedCallbacks;
    } else if (orphanDelayedCallbacks) {
      list = orphanDelayedCallbacks;
    } else {
      list = orphanDelayedCallbacks = [];
      setTimeout(fireOrphanDelayed, 0);
    }
    function bnd(f) {return function(){f.apply(null, args);};};
    for (var i = 0; i < arr.length; ++i)
      list.push(bnd(arr[i]));
  }

  function fireOrphanDelayed() {
    var delayed = orphanDelayedCallbacks;
    orphanDelayedCallbacks = null;
    for (var i = 0; i < delayed.length; ++i) delayed[i]();
  }

  // The DOM events that CodeMirror handles can be overridden by
  // registering a (non-DOM) handler on the editor for the event name,
  // and preventDefault-ing the event in that handler.
  function signalDOMEvent(cm, e, override) {
    if (typeof e == "string")
      e = {type: e, preventDefault: function() { this.defaultPrevented = true; }};
    signal(cm, override || e.type, cm, e);
    return e_defaultPrevented(e) || e.codemirrorIgnore;
  }

  function signalCursorActivity(cm) {
    var arr = cm._handlers && cm._handlers.cursorActivity;
    if (!arr) return;
    var set = cm.curOp.cursorActivityHandlers || (cm.curOp.cursorActivityHandlers = []);
    for (var i = 0; i < arr.length; ++i) if (indexOf(set, arr[i]) == -1)
      set.push(arr[i]);
  }

  function hasHandler(emitter, type) {
    return getHandlers(emitter, type).length > 0
  }

  // Add on and off methods to a constructor's prototype, to make
  // registering events on such objects more convenient.
  function eventMixin(ctor) {
    ctor.prototype.on = function(type, f) {on(this, type, f);};
    ctor.prototype.off = function(type, f) {off(this, type, f);};
  }

  // MISC UTILITIES

  // Number of pixels added to scroller and sizer to hide scrollbar
  var scrollerGap = 30;

  // Returned or thrown by various protocols to signal 'I'm not
  // handling this'.
  var Pass = CodeMirror.Pass = {toString: function(){return "CodeMirror.Pass";}};

  // Reused option objects for setSelection & friends
  var sel_dontScroll = {scroll: false}, sel_mouse = {origin: "*mouse"}, sel_move = {origin: "+move"};

  function Delayed() {this.id = null;}
  Delayed.prototype.set = function(ms, f) {
    clearTimeout(this.id);
    this.id = setTimeout(f, ms);
  };

  // Counts the column offset in a string, taking tabs into account.
  // Used mostly to find indentation.
  var countColumn = CodeMirror.countColumn = function(string, end, tabSize, startIndex, startValue) {
    if (end == null) {
      end = string.search(/[^\s\u00a0]/);
      if (end == -1) end = string.length;
    }
    for (var i = startIndex || 0, n = startValue || 0;;) {
      var nextTab = string.indexOf("\t", i);
      if (nextTab < 0 || nextTab >= end)
        return n + (end - i);
      n += nextTab - i;
      n += tabSize - (n % tabSize);
      i = nextTab + 1;
    }
  };

  // The inverse of countColumn -- find the offset that corresponds to
  // a particular column.
  var findColumn = CodeMirror.findColumn = function(string, goal, tabSize) {
    for (var pos = 0, col = 0;;) {
      var nextTab = string.indexOf("\t", pos);
      if (nextTab == -1) nextTab = string.length;
      var skipped = nextTab - pos;
      if (nextTab == string.length || col + skipped >= goal)
        return pos + Math.min(skipped, goal - col);
      col += nextTab - pos;
      col += tabSize - (col % tabSize);
      pos = nextTab + 1;
      if (col >= goal) return pos;
    }
  }

  var spaceStrs = [""];
  function spaceStr(n) {
    while (spaceStrs.length <= n)
      spaceStrs.push(lst(spaceStrs) + " ");
    return spaceStrs[n];
  }

  function lst(arr) { return arr[arr.length-1]; }

  var selectInput = function(node) { node.select(); };
  if (ios) // Mobile Safari apparently has a bug where select() is broken.
    selectInput = function(node) { node.selectionStart = 0; node.selectionEnd = node.value.length; };
  else if (ie) // Suppress mysterious IE10 errors
    selectInput = function(node) { try { node.select(); } catch(_e) {} };

  function indexOf(array, elt) {
    for (var i = 0; i < array.length; ++i)
      if (array[i] == elt) return i;
    return -1;
  }
  function map(array, f) {
    var out = [];
    for (var i = 0; i < array.length; i++) out[i] = f(array[i], i);
    return out;
  }

  function nothing() {}

  function createObj(base, props) {
    var inst;
    if (Object.create) {
      inst = Object.create(base);
    } else {
      nothing.prototype = base;
      inst = new nothing();
    }
    if (props) copyObj(props, inst);
    return inst;
  };

  function copyObj(obj, target, overwrite) {
    if (!target) target = {};
    for (var prop in obj)
      if (obj.hasOwnProperty(prop) && (overwrite !== false || !target.hasOwnProperty(prop)))
        target[prop] = obj[prop];
    return target;
  }

  function bind(f) {
    var args = Array.prototype.slice.call(arguments, 1);
    return function(){return f.apply(null, args);};
  }

  var nonASCIISingleCaseWordChar = /[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;
  var isWordCharBasic = CodeMirror.isWordChar = function(ch) {
    return /\w/.test(ch) || ch > "\x80" &&
      (ch.toUpperCase() != ch.toLowerCase() || nonASCIISingleCaseWordChar.test(ch));
  };
  function isWordChar(ch, helper) {
    if (!helper) return isWordCharBasic(ch);
    if (helper.source.indexOf("\\w") > -1 && isWordCharBasic(ch)) return true;
    return helper.test(ch);
  }

  function isEmpty(obj) {
    for (var n in obj) if (obj.hasOwnProperty(n) && obj[n]) return false;
    return true;
  }

  // Extending unicode characters. A series of a non-extending char +
  // any number of extending chars is treated as a single unit as far
  // as editing and measuring is concerned. This is not fully correct,
  // since some scripts/fonts/browsers also treat other configurations
  // of code points as a group.
  var extendingChars = /[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;
  function isExtendingChar(ch) { return ch.charCodeAt(0) >= 768 && extendingChars.test(ch); }

  // DOM UTILITIES

  function elt(tag, content, className, style) {
    var e = document.createElement(tag);
    if (className) e.className = className;
    if (style) e.style.cssText = style;
    if (typeof content == "string") e.appendChild(document.createTextNode(content));
    else if (content) for (var i = 0; i < content.length; ++i) e.appendChild(content[i]);
    return e;
  }

  var range;
  if (document.createRange) range = function(node, start, end, endNode) {
    var r = document.createRange();
    r.setEnd(endNode || node, end);
    r.setStart(node, start);
    return r;
  };
  else range = function(node, start, end) {
    var r = document.body.createTextRange();
    try { r.moveToElementText(node.parentNode); }
    catch(e) { return r; }
    r.collapse(true);
    r.moveEnd("character", end);
    r.moveStart("character", start);
    return r;
  };

  function removeChildren(e) {
    for (var count = e.childNodes.length; count > 0; --count)
      e.removeChild(e.firstChild);
    return e;
  }

  function removeChildrenAndAdd(parent, e) {
    return removeChildren(parent).appendChild(e);
  }

  var contains = CodeMirror.contains = function(parent, child) {
    if (child.nodeType == 3) // Android browser always returns false when child is a textnode
      child = child.parentNode;
    if (parent.contains)
      return parent.contains(child);
    do {
      if (child.nodeType == 11) child = child.host;
      if (child == parent) return true;
    } while (child = child.parentNode);
  };

  function activeElt() {
    var activeElement = document.activeElement;
    while (activeElement && activeElement.root && activeElement.root.activeElement)
      activeElement = activeElement.root.activeElement;
    return activeElement;
  }
  // Older versions of IE throws unspecified error when touching
  // document.activeElement in some cases (during loading, in iframe)
  if (ie && ie_version < 11) activeElt = function() {
    try { return document.activeElement; }
    catch(e) { return document.body; }
  };

  function classTest(cls) { return new RegExp("(^|\\s)" + cls + "(?:$|\\s)\\s*"); }
  var rmClass = CodeMirror.rmClass = function(node, cls) {
    var current = node.className;
    var match = classTest(cls).exec(current);
    if (match) {
      var after = current.slice(match.index + match[0].length);
      node.className = current.slice(0, match.index) + (after ? match[1] + after : "");
    }
  };
  var addClass = CodeMirror.addClass = function(node, cls) {
    var current = node.className;
    if (!classTest(cls).test(current)) node.className += (current ? " " : "") + cls;
  };
  function joinClasses(a, b) {
    var as = a.split(" ");
    for (var i = 0; i < as.length; i++)
      if (as[i] && !classTest(as[i]).test(b)) b += " " + as[i];
    return b;
  }

  // WINDOW-WIDE EVENTS

  // These must be handled carefully, because naively registering a
  // handler for each editor will cause the editors to never be
  // garbage collected.

  function forEachCodeMirror(f) {
    if (!document.body.getElementsByClassName) return;
    var byClass = document.body.getElementsByClassName("CodeMirror");
    for (var i = 0; i < byClass.length; i++) {
      var cm = byClass[i].CodeMirror;
      if (cm) f(cm);
    }
  }

  var globalsRegistered = false;
  function ensureGlobalHandlers() {
    if (globalsRegistered) return;
    registerGlobalHandlers();
    globalsRegistered = true;
  }
  function registerGlobalHandlers() {
    // When the window resizes, we need to refresh active editors.
    var resizeTimer;
    on(window, "resize", function() {
      if (resizeTimer == null) resizeTimer = setTimeout(function() {
        resizeTimer = null;
        forEachCodeMirror(onResize);
      }, 100);
    });
    // When the window loses focus, we want to show the editor as blurred
    on(window, "blur", function() {
      forEachCodeMirror(onBlur);
    });
  }

  // FEATURE DETECTION

  // Detect drag-and-drop
  var dragAndDrop = function() {
    // There is *some* kind of drag-and-drop support in IE6-8, but I
    // couldn't get it to work yet.
    if (ie && ie_version < 9) return false;
    var div = elt('div');
    return "draggable" in div || "dragDrop" in div;
  }();

  var zwspSupported;
  function zeroWidthElement(measure) {
    if (zwspSupported == null) {
      var test = elt("span", "\u200b");
      removeChildrenAndAdd(measure, elt("span", [test, document.createTextNode("x")]));
      if (measure.firstChild.offsetHeight != 0)
        zwspSupported = test.offsetWidth <= 1 && test.offsetHeight > 2 && !(ie && ie_version < 8);
    }
    var node = zwspSupported ? elt("span", "\u200b") :
      elt("span", "\u00a0", null, "display: inline-block; width: 1px; margin-right: -1px");
    node.setAttribute("cm-text", "");
    return node;
  }

  // Feature-detect IE's crummy client rect reporting for bidi text
  var badBidiRects;
  function hasBadBidiRects(measure) {
    if (badBidiRects != null) return badBidiRects;
    var txt = removeChildrenAndAdd(measure, document.createTextNode("A\u062eA"));
    var r0 = range(txt, 0, 1).getBoundingClientRect();
    if (!r0 || r0.left == r0.right) return false; // Safari returns null in some cases (#2780)
    var r1 = range(txt, 1, 2).getBoundingClientRect();
    return badBidiRects = (r1.right - r0.right < 3);
  }

  // See if "".split is the broken IE version, if so, provide an
  // alternative way to split lines.
  var splitLinesAuto = CodeMirror.splitLines = "\n\nb".split(/\n/).length != 3 ? function(string) {
    var pos = 0, result = [], l = string.length;
    while (pos <= l) {
      var nl = string.indexOf("\n", pos);
      if (nl == -1) nl = string.length;
      var line = string.slice(pos, string.charAt(nl - 1) == "\r" ? nl - 1 : nl);
      var rt = line.indexOf("\r");
      if (rt != -1) {
        result.push(line.slice(0, rt));
        pos += rt + 1;
      } else {
        result.push(line);
        pos = nl + 1;
      }
    }
    return result;
  } : function(string){return string.split(/\r\n?|\n/);};

  var hasSelection = window.getSelection ? function(te) {
    try { return te.selectionStart != te.selectionEnd; }
    catch(e) { return false; }
  } : function(te) {
    try {var range = te.ownerDocument.selection.createRange();}
    catch(e) {}
    if (!range || range.parentElement() != te) return false;
    return range.compareEndPoints("StartToEnd", range) != 0;
  };

  var hasCopyEvent = (function() {
    var e = elt("div");
    if ("oncopy" in e) return true;
    e.setAttribute("oncopy", "return;");
    return typeof e.oncopy == "function";
  })();

  var badZoomedRects = null;
  function hasBadZoomedRects(measure) {
    if (badZoomedRects != null) return badZoomedRects;
    var node = removeChildrenAndAdd(measure, elt("span", "x"));
    var normal = node.getBoundingClientRect();
    var fromRange = range(node, 0, 1).getBoundingClientRect();
    return badZoomedRects = Math.abs(normal.left - fromRange.left) > 1;
  }

  // KEY NAMES

  var keyNames = CodeMirror.keyNames = {
    3: "Enter", 8: "Backspace", 9: "Tab", 13: "Enter", 16: "Shift", 17: "Ctrl", 18: "Alt",
    19: "Pause", 20: "CapsLock", 27: "Esc", 32: "Space", 33: "PageUp", 34: "PageDown", 35: "End",
    36: "Home", 37: "Left", 38: "Up", 39: "Right", 40: "Down", 44: "PrintScrn", 45: "Insert",
    46: "Delete", 59: ";", 61: "=", 91: "Mod", 92: "Mod", 93: "Mod",
    106: "*", 107: "=", 109: "-", 110: ".", 111: "/", 127: "Delete",
    173: "-", 186: ";", 187: "=", 188: ",", 189: "-", 190: ".", 191: "/", 192: "`", 219: "[", 220: "\\",
    221: "]", 222: "'", 63232: "Up", 63233: "Down", 63234: "Left", 63235: "Right", 63272: "Delete",
    63273: "Home", 63275: "End", 63276: "PageUp", 63277: "PageDown", 63302: "Insert"
  };
  (function() {
    // Number keys
    for (var i = 0; i < 10; i++) keyNames[i + 48] = keyNames[i + 96] = String(i);
    // Alphabetic keys
    for (var i = 65; i <= 90; i++) keyNames[i] = String.fromCharCode(i);
    // Function keys
    for (var i = 1; i <= 12; i++) keyNames[i + 111] = keyNames[i + 63235] = "F" + i;
  })();

  // BIDI HELPERS

  function iterateBidiSections(order, from, to, f) {
    if (!order) return f(from, to, "ltr");
    var found = false;
    for (var i = 0; i < order.length; ++i) {
      var part = order[i];
      if (part.from < to && part.to > from || from == to && part.to == from) {
        f(Math.max(part.from, from), Math.min(part.to, to), part.level == 1 ? "rtl" : "ltr");
        found = true;
      }
    }
    if (!found) f(from, to, "ltr");
  }

  function bidiLeft(part) { return part.level % 2 ? part.to : part.from; }
  function bidiRight(part) { return part.level % 2 ? part.from : part.to; }

  function lineLeft(line) { var order = getOrder(line); return order ? bidiLeft(order[0]) : 0; }
  function lineRight(line) {
    var order = getOrder(line);
    if (!order) return line.text.length;
    return bidiRight(lst(order));
  }

  function lineStart(cm, lineN) {
    var line = getLine(cm.doc, lineN);
    var visual = visualLine(line);
    if (visual != line) lineN = lineNo(visual);
    var order = getOrder(visual);
    var ch = !order ? 0 : order[0].level % 2 ? lineRight(visual) : lineLeft(visual);
    return Pos(lineN, ch);
  }
  function lineEnd(cm, lineN) {
    var merged, line = getLine(cm.doc, lineN);
    while (merged = collapsedSpanAtEnd(line)) {
      line = merged.find(1, true).line;
      lineN = null;
    }
    var order = getOrder(line);
    var ch = !order ? line.text.length : order[0].level % 2 ? lineLeft(line) : lineRight(line);
    return Pos(lineN == null ? lineNo(line) : lineN, ch);
  }
  function lineStartSmart(cm, pos) {
    var start = lineStart(cm, pos.line);
    var line = getLine(cm.doc, start.line);
    var order = getOrder(line);
    if (!order || order[0].level == 0) {
      var firstNonWS = Math.max(0, line.text.search(/\S/));
      var inWS = pos.line == start.line && pos.ch <= firstNonWS && pos.ch;
      return Pos(start.line, inWS ? 0 : firstNonWS);
    }
    return start;
  }

  function compareBidiLevel(order, a, b) {
    var linedir = order[0].level;
    if (a == linedir) return true;
    if (b == linedir) return false;
    return a < b;
  }
  var bidiOther;
  function getBidiPartAt(order, pos) {
    bidiOther = null;
    for (var i = 0, found; i < order.length; ++i) {
      var cur = order[i];
      if (cur.from < pos && cur.to > pos) return i;
      if ((cur.from == pos || cur.to == pos)) {
        if (found == null) {
          found = i;
        } else if (compareBidiLevel(order, cur.level, order[found].level)) {
          if (cur.from != cur.to) bidiOther = found;
          return i;
        } else {
          if (cur.from != cur.to) bidiOther = i;
          return found;
        }
      }
    }
    return found;
  }

  function moveInLine(line, pos, dir, byUnit) {
    if (!byUnit) return pos + dir;
    do pos += dir;
    while (pos > 0 && isExtendingChar(line.text.charAt(pos)));
    return pos;
  }

  // This is needed in order to move 'visually' through bi-directional
  // text -- i.e., pressing left should make the cursor go left, even
  // when in RTL text. The tricky part is the 'jumps', where RTL and
  // LTR text touch each other. This often requires the cursor offset
  // to move more than one unit, in order to visually move one unit.
  function moveVisually(line, start, dir, byUnit) {
    var bidi = getOrder(line);
    if (!bidi) return moveLogically(line, start, dir, byUnit);
    var pos = getBidiPartAt(bidi, start), part = bidi[pos];
    var target = moveInLine(line, start, part.level % 2 ? -dir : dir, byUnit);

    for (;;) {
      if (target > part.from && target < part.to) return target;
      if (target == part.from || target == part.to) {
        if (getBidiPartAt(bidi, target) == pos) return target;
        part = bidi[pos += dir];
        return (dir > 0) == part.level % 2 ? part.to : part.from;
      } else {
        part = bidi[pos += dir];
        if (!part) return null;
        if ((dir > 0) == part.level % 2)
          target = moveInLine(line, part.to, -1, byUnit);
        else
          target = moveInLine(line, part.from, 1, byUnit);
      }
    }
  }

  function moveLogically(line, start, dir, byUnit) {
    var target = start + dir;
    if (byUnit) while (target > 0 && isExtendingChar(line.text.charAt(target))) target += dir;
    return target < 0 || target > line.text.length ? null : target;
  }

  // Bidirectional ordering algorithm
  // See http://unicode.org/reports/tr9/tr9-13.html for the algorithm
  // that this (partially) implements.

  // One-char codes used for character types:
  // L (L):   Left-to-Right
  // R (R):   Right-to-Left
  // r (AL):  Right-to-Left Arabic
  // 1 (EN):  European Number
  // + (ES):  European Number Separator
  // % (ET):  European Number Terminator
  // n (AN):  Arabic Number
  // , (CS):  Common Number Separator
  // m (NSM): Non-Spacing Mark
  // b (BN):  Boundary Neutral
  // s (B):   Paragraph Separator
  // t (S):   Segment Separator
  // w (WS):  Whitespace
  // N (ON):  Other Neutrals

  // Returns null if characters are ordered as they appear
  // (left-to-right), or an array of sections ({from, to, level}
  // objects) in the order in which they occur visually.
  var bidiOrdering = (function() {
    // Character types for codepoints 0 to 0xff
    var lowTypes = "bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN";
    // Character types for codepoints 0x600 to 0x6ff
    var arabicTypes = "rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm";
    function charType(code) {
      if (code <= 0xf7) return lowTypes.charAt(code);
      else if (0x590 <= code && code <= 0x5f4) return "R";
      else if (0x600 <= code && code <= 0x6ed) return arabicTypes.charAt(code - 0x600);
      else if (0x6ee <= code && code <= 0x8ac) return "r";
      else if (0x2000 <= code && code <= 0x200b) return "w";
      else if (code == 0x200c) return "b";
      else return "L";
    }

    var bidiRE = /[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;
    var isNeutral = /[stwN]/, isStrong = /[LRr]/, countsAsLeft = /[Lb1n]/, countsAsNum = /[1n]/;
    // Browsers seem to always treat the boundaries of block elements as being L.
    var outerType = "L";

    function BidiSpan(level, from, to) {
      this.level = level;
      this.from = from; this.to = to;
    }

    return function(str) {
      if (!bidiRE.test(str)) return false;
      var len = str.length, types = [];
      for (var i = 0, type; i < len; ++i)
        types.push(type = charType(str.charCodeAt(i)));

      // W1. Examine each non-spacing mark (NSM) in the level run, and
      // change the type of the NSM to the type of the previous
      // character. If the NSM is at the start of the level run, it will
      // get the type of sor.
      for (var i = 0, prev = outerType; i < len; ++i) {
        var type = types[i];
        if (type == "m") types[i] = prev;
        else prev = type;
      }

      // W2. Search backwards from each instance of a European number
      // until the first strong type (R, L, AL, or sor) is found. If an
      // AL is found, change the type of the European number to Arabic
      // number.
      // W3. Change all ALs to R.
      for (var i = 0, cur = outerType; i < len; ++i) {
        var type = types[i];
        if (type == "1" && cur == "r") types[i] = "n";
        else if (isStrong.test(type)) { cur = type; if (type == "r") types[i] = "R"; }
      }

      // W4. A single European separator between two European numbers
      // changes to a European number. A single common separator between
      // two numbers of the same type changes to that type.
      for (var i = 1, prev = types[0]; i < len - 1; ++i) {
        var type = types[i];
        if (type == "+" && prev == "1" && types[i+1] == "1") types[i] = "1";
        else if (type == "," && prev == types[i+1] &&
                 (prev == "1" || prev == "n")) types[i] = prev;
        prev = type;
      }

      // W5. A sequence of European terminators adjacent to European
      // numbers changes to all European numbers.
      // W6. Otherwise, separators and terminators change to Other
      // Neutral.
      for (var i = 0; i < len; ++i) {
        var type = types[i];
        if (type == ",") types[i] = "N";
        else if (type == "%") {
          for (var end = i + 1; end < len && types[end] == "%"; ++end) {}
          var replace = (i && types[i-1] == "!") || (end < len && types[end] == "1") ? "1" : "N";
          for (var j = i; j < end; ++j) types[j] = replace;
          i = end - 1;
        }
      }

      // W7. Search backwards from each instance of a European number
      // until the first strong type (R, L, or sor) is found. If an L is
      // found, then change the type of the European number to L.
      for (var i = 0, cur = outerType; i < len; ++i) {
        var type = types[i];
        if (cur == "L" && type == "1") types[i] = "L";
        else if (isStrong.test(type)) cur = type;
      }

      // N1. A sequence of neutrals takes the direction of the
      // surrounding strong text if the text on both sides has the same
      // direction. European and Arabic numbers act as if they were R in
      // terms of their influence on neutrals. Start-of-level-run (sor)
      // and end-of-level-run (eor) are used at level run boundaries.
      // N2. Any remaining neutrals take the embedding direction.
      for (var i = 0; i < len; ++i) {
        if (isNeutral.test(types[i])) {
          for (var end = i + 1; end < len && isNeutral.test(types[end]); ++end) {}
          var before = (i ? types[i-1] : outerType) == "L";
          var after = (end < len ? types[end] : outerType) == "L";
          var replace = before || after ? "L" : "R";
          for (var j = i; j < end; ++j) types[j] = replace;
          i = end - 1;
        }
      }

      // Here we depart from the documented algorithm, in order to avoid
      // building up an actual levels array. Since there are only three
      // levels (0, 1, 2) in an implementation that doesn't take
      // explicit embedding into account, we can build up the order on
      // the fly, without following the level-based algorithm.
      var order = [], m;
      for (var i = 0; i < len;) {
        if (countsAsLeft.test(types[i])) {
          var start = i;
          for (++i; i < len && countsAsLeft.test(types[i]); ++i) {}
          order.push(new BidiSpan(0, start, i));
        } else {
          var pos = i, at = order.length;
          for (++i; i < len && types[i] != "L"; ++i) {}
          for (var j = pos; j < i;) {
            if (countsAsNum.test(types[j])) {
              if (pos < j) order.splice(at, 0, new BidiSpan(1, pos, j));
              var nstart = j;
              for (++j; j < i && countsAsNum.test(types[j]); ++j) {}
              order.splice(at, 0, new BidiSpan(2, nstart, j));
              pos = j;
            } else ++j;
          }
          if (pos < i) order.splice(at, 0, new BidiSpan(1, pos, i));
        }
      }
      if (order[0].level == 1 && (m = str.match(/^\s+/))) {
        order[0].from = m[0].length;
        order.unshift(new BidiSpan(0, 0, m[0].length));
      }
      if (lst(order).level == 1 && (m = str.match(/\s+$/))) {
        lst(order).to -= m[0].length;
        order.push(new BidiSpan(0, len - m[0].length, len));
      }
      if (order[0].level == 2)
        order.unshift(new BidiSpan(1, order[0].to, order[0].to));
      if (order[0].level != lst(order).level)
        order.push(new BidiSpan(order[0].level, len, len));

      return order;
    };
  })();

  // THE END

  CodeMirror.version = "5.14.2";

  return CodeMirror;
});

},{}],18:[function(require,module,exports){
// universal module definition: https://github.com/umdjs/umd/blob/master/returnExports.js#L41
(function (root, factory) {
    if (typeof exports === 'object') {
        // Node. Does not work with strict CommonJS, but
        // only CommonJS-like enviroments that support module.exports,
        // like Node.
        module.exports = factory();
    } else if (typeof define === 'function' && define.amd) {
        // AMD. Register as an anonymous module.
        define(factory);
    } else {
        // Browser globals (root is window)
        root.emoji = factory();
  }
}(this, function () {
    var emojis = [":blush:",":scream:",":smirk:",":smiley:",":stuck_out_tongue_closed_eyes:",":stuck_out_tongue_winking_eye:",":rage:",":disappointed:",":sob:",":kissing_heart:",":wink:",":pensive:",":confounded:",":flushed:",":relaxed:",":mask:",":heart:",":broken_heart:",":sunny:",":umbrella:",":cloud:",":snowflake:",":snowman:",":zap:",":cyclone:",":foggy:",":ocean:",":cat:",":dog:",":mouse:",":hamster:",":rabbit:",":wolf:",":frog:",":tiger:",":koala:",":bear:",":pig:",":pig_nose:",":cow:",":boar:",":monkey_face:",":monkey:",":horse:",":racehorse:",":camel:",":sheep:",":elephant:",":panda_face:",":snake:",":bird:",":baby_chick:",":hatched_chick:",":hatching_chick:",":chicken:",":penguin:",":turtle:",":bug:",":honeybee:",":ant:",":beetle:",":snail:",":octopus:",":tropical_fish:",":fish:",":whale:",":whale2:",":dolphin:",":cow2:",":ram:",":rat:",":water_buffalo:",":tiger2:",":rabbit2:",":dragon:",":goat:",":rooster:",":dog2:",":pig2:",":mouse2:",":ox:",":dragon_face:",":blowfish:",":crocodile:",":dromedary_camel:",":leopard:",":cat2:",":poodle:",":paw_prints:",":bouquet:",":cherry_blossom:",":tulip:",":four_leaf_clover:",":rose:",":sunflower:",":hibiscus:",":maple_leaf:",":leaves:",":fallen_leaf:",":herb:",":mushroom:",":cactus:",":palm_tree:",":evergreen_tree:",":deciduous_tree:",":chestnut:",":seedling:",":blossom:",":ear_of_rice:",":shell:",":globe_with_meridians:",":sun_with_face:",":full_moon_with_face:",":new_moon_with_face:",":new_moon:",":waxing_crescent_moon:",":first_quarter_moon:",":waxing_gibbous_moon:",":full_moon:",":waning_gibbous_moon:",":last_quarter_moon:",":waning_crescent_moon:",":last_quarter_moon_with_face:",":first_quarter_moon_with_face:",":moon:",":earth_africa:",":earth_americas:",":earth_asia:",":volcano:",":milky_way:",":partly_sunny:",":octocat:",":squirrel:",":bamboo:",":gift_heart:",":dolls:",":school_satchel:",":mortar_board:",":flags:",":fireworks:",":sparkler:",":wind_chime:",":rice_scene:",":jack_o_lantern:",":ghost:",":santa:",":christmas_tree:",":gift:",":bell:",":no_bell:",":tanabata_tree:",":tada:",":confetti_ball:",":balloon:",":crystal_ball:",":cd:",":dvd:",":floppy_disk:",":camera:",":video_camera:",":movie_camera:",":computer:",":tv:",":iphone:",":phone:",":telephone:",":telephone_receiver:",":pager:",":fax:",":minidisc:",":vhs:",":sound:",":speaker:",":mute:",":loudspeaker:",":mega:",":hourglass:",":hourglass_flowing_sand:",":alarm_clock:",":watch:",":radio:",":satellite:",":loop:",":mag:",":mag_right:",":unlock:",":lock:",":lock_with_ink_pen:",":closed_lock_with_key:",":key:",":bulb:",":flashlight:",":high_brightness:",":low_brightness:",":electric_plug:",":battery:",":calling:",":email:",":mailbox:",":postbox:",":bath:",":bathtub:",":shower:",":toilet:",":wrench:",":nut_and_bolt:",":hammer:",":seat:",":moneybag:",":yen:",":dollar:",":pound:",":euro:",":credit_card:",":money_with_wings:",":e-mail:",":inbox_tray:",":outbox_tray:",":envelope:",":incoming_envelope:",":postal_horn:",":mailbox_closed:",":mailbox_with_mail:",":mailbox_with_no_mail:",":door:",":smoking:",":bomb:",":gun:",":hocho:",":pill:",":syringe:",":page_facing_up:",":page_with_curl:",":bookmark_tabs:",":bar_chart:",":chart_with_upwards_trend:",":chart_with_downwards_trend:",":scroll:",":clipboard:",":calendar:",":date:",":card_index:",":file_folder:",":open_file_folder:",":scissors:",":pushpin:",":paperclip:",":black_nib:",":pencil2:",":straight_ruler:",":triangular_ruler:",":closed_book:",":green_book:",":blue_book:",":orange_book:",":notebook:",":notebook_with_decorative_cover:",":ledger:",":books:",":bookmark:",":name_badge:",":microscope:",":telescope:",":newspaper:",":football:",":basketball:",":soccer:",":baseball:",":tennis:",":8ball:",":rugby_football:",":bowling:",":golf:",":mountain_bicyclist:",":bicyclist:",":horse_racing:",":snowboarder:",":swimmer:",":surfer:",":ski:",":spades:",":hearts:",":clubs:",":diamonds:",":gem:",":ring:",":trophy:",":musical_score:",":musical_keyboard:",":violin:",":space_invader:",":video_game:",":black_joker:",":flower_playing_cards:",":game_die:",":dart:",":mahjong:",":clapper:",":memo:",":pencil:",":book:",":art:",":microphone:",":headphones:",":trumpet:",":saxophone:",":guitar:",":shoe:",":sandal:",":high_heel:",":lipstick:",":boot:",":shirt:",":tshirt:",":necktie:",":womans_clothes:",":dress:",":running_shirt_with_sash:",":jeans:",":kimono:",":bikini:",":ribbon:",":tophat:",":crown:",":womans_hat:",":mans_shoe:",":closed_umbrella:",":briefcase:",":handbag:",":pouch:",":purse:",":eyeglasses:",":fishing_pole_and_fish:",":coffee:",":tea:",":sake:",":baby_bottle:",":beer:",":beers:",":cocktail:",":tropical_drink:",":wine_glass:",":fork_and_knife:",":pizza:",":hamburger:",":fries:",":poultry_leg:",":meat_on_bone:",":spaghetti:",":curry:",":fried_shrimp:",":bento:",":sushi:",":fish_cake:",":rice_ball:",":rice_cracker:",":rice:",":ramen:",":stew:",":oden:",":dango:",":egg:",":bread:",":doughnut:",":custard:",":icecream:",":ice_cream:",":shaved_ice:",":birthday:",":cake:",":cookie:",":chocolate_bar:",":candy:",":lollipop:",":honey_pot:",":apple:",":green_apple:",":tangerine:",":lemon:",":cherries:",":grapes:",":watermelon:",":strawberry:",":peach:",":melon:",":banana:",":pear:",":pineapple:",":sweet_potato:",":eggplant:",":tomato:",":corn:",":alien:",":angel:",":anger:",":angry:",":anguished:",":astonished:",":baby:",":blue_heart:",":blush:",":boom:",":bow:",":bowtie:",":boy:",":bride_with_veil:",":broken_heart:",":bust_in_silhouette:",":busts_in_silhouette:",":clap:",":cold_sweat:",":collision:",":confounded:",":confused:",":construction_worker:",":cop:",":couple_with_heart:",":couple:",":couplekiss:",":cry:",":crying_cat_face:",":cupid:",":dancer:",":dancers:",":dash:",":disappointed:",":dizzy_face:",":dizzy:",":droplet:",":ear:",":exclamation:",":expressionless:",":eyes:",":facepunch:",":family:",":fearful:",":feelsgood:",":feet:",":finnadie:",":fire:",":fist:",":flushed:",":frowning:",":girl:",":goberserk:",":godmode:",":green_heart:",":grey_exclamation:",":grey_question:",":grimacing:",":grin:",":grinning:",":guardsman:",":haircut:",":hand:",":hankey:",":hear_no_evil:",":heart_eyes_cat:",":heart_eyes:",":heart:",":heartbeat:",":heartpulse:",":hurtrealbad:",":hushed:",":imp:",":information_desk_person:",":innocent:",":japanese_goblin:",":japanese_ogre:",":joy_cat:",":joy:",":kiss:",":kissing_cat:",":kissing_closed_eyes:",":kissing_heart:",":kissing_smiling_eyes:",":kissing:",":laughing:",":lips:",":love_letter:",":man_with_gua_pi_mao:",":man_with_turban:",":man:",":mask:",":massage:",":metal:",":muscle:",":musical_note:",":nail_care:",":neckbeard:",":neutral_face:",":no_good:",":no_mouth:",":nose:",":notes:",":ok_hand:",":ok_woman:",":older_man:",":older_woman:",":open_hands:",":open_mouth:",":pensive:",":persevere:",":person_frowning:",":person_with_blond_hair:",":person_with_pouting_face:",":point_down:",":point_left:",":point_right:",":point_up_2:",":point_up:",":poop:",":pouting_cat:",":pray:",":princess:",":punch:",":purple_heart:",":question:",":rage:",":rage1:",":rage2:",":rage3:",":rage4:",":raised_hand:",":raised_hands:",":relaxed:",":relieved:",":revolving_hearts:",":runner:",":running:",":satisfied:",":scream_cat:",":scream:",":see_no_evil:",":shit:",":skull:",":sleeping:",":sleepy:",":smile_cat:",":smile:",":smiley_cat:",":smiley:",":smiling_imp:",":smirk_cat:",":smirk:",":sob:",":sparkling_heart:",":sparkles:",":speak_no_evil:",":speech_balloon:",":star:",":star2:",":stuck_out_tongue_closed_eyes:",":stuck_out_tongue_winking_eye:",":stuck_out_tongue:",":sunglasses:",":suspect:",":sweat_drops:",":sweat_smile:",":sweat:",":thought_balloon:",":-1:",":thumbsdown:",":thumbsup:",":+1:",":tired_face:",":tongue:",":triumph:",":trollface:",":two_hearts:",":two_men_holding_hands:",":two_women_holding_hands:",":unamused:",":v:",":walking:",":wave:",":weary:",":wink2:",":wink:",":woman:",":worried:",":yellow_heart:",":yum:",":zzz:",":109:",":house:",":house_with_garden:",":school:",":office:",":post_office:",":hospital:",":bank:",":convenience_store:",":love_hotel:",":hotel:",":wedding:",":church:",":department_store:",":european_post_office:",":city_sunrise:",":city_sunset:",":japanese_castle:",":european_castle:",":tent:",":factory:",":tokyo_tower:",":japan:",":mount_fuji:",":sunrise_over_mountains:",":sunrise:",":stars:",":statue_of_liberty:",":bridge_at_night:",":carousel_horse:",":rainbow:",":ferris_wheel:",":fountain:",":roller_coaster:",":ship:",":speedboat:",":boat:",":sailboat:",":rowboat:",":anchor:",":rocket:",":airplane:",":helicopter:",":steam_locomotive:",":tram:",":mountain_railway:",":bike:",":aerial_tramway:",":suspension_railway:",":mountain_cableway:",":tractor:",":blue_car:",":oncoming_automobile:",":car:",":red_car:",":taxi:",":oncoming_taxi:",":articulated_lorry:",":bus:",":oncoming_bus:",":rotating_light:",":police_car:",":oncoming_police_car:",":fire_engine:",":ambulance:",":minibus:",":truck:",":train:",":station:",":train2:",":bullettrain_front:",":bullettrain_side:",":light_rail:",":monorail:",":railway_car:",":trolleybus:",":ticket:",":fuelpump:",":vertical_traffic_light:",":traffic_light:",":warning:",":construction:",":beginner:",":atm:",":slot_machine:",":busstop:",":barber:",":hotsprings:",":checkered_flag:",":crossed_flags:",":izakaya_lantern:",":moyai:",":circus_tent:",":performing_arts:",":round_pushpin:",":triangular_flag_on_post:",":jp:",":kr:",":cn:",":us:",":fr:",":es:",":it:",":ru:",":gb:",":uk:",":de:",":100:",":1234:",":one:",":two:",":three:",":four:",":five:",":six:",":seven:",":eight:",":nine:",":keycap_ten:",":zero:",":hash:",":symbols:",":arrow_backward:",":arrow_down:",":arrow_forward:",":arrow_left:",":capital_abcd:",":abcd:",":abc:",":arrow_lower_left:",":arrow_lower_right:",":arrow_right:",":arrow_up:",":arrow_upper_left:",":arrow_upper_right:",":arrow_double_down:",":arrow_double_up:",":arrow_down_small:",":arrow_heading_down:",":arrow_heading_up:",":leftwards_arrow_with_hook:",":arrow_right_hook:",":left_right_arrow:",":arrow_up_down:",":arrow_up_small:",":arrows_clockwise:",":arrows_counterclockwise:",":rewind:",":fast_forward:",":information_source:",":ok:",":twisted_rightwards_arrows:",":repeat:",":repeat_one:",":new:",":top:",":up:",":cool:",":free:",":ng:",":cinema:",":koko:",":signal_strength:",":u5272:",":u5408:",":u55b6:",":u6307:",":u6708:",":u6709:",":u6e80:",":u7121:",":u7533:",":u7a7a:",":u7981:",":sa:",":restroom:",":mens:",":womens:",":baby_symbol:",":no_smoking:",":parking:",":wheelchair:",":metro:",":baggage_claim:",":accept:",":wc:",":potable_water:",":put_litter_in_its_place:",":secret:",":congratulations:",":m:",":passport_control:",":left_luggage:",":customs:",":ideograph_advantage:",":cl:",":sos:",":id:",":no_entry_sign:",":underage:",":no_mobile_phones:",":do_not_litter:",":non-potable_water:",":no_bicycles:",":no_pedestrians:",":children_crossing:",":no_entry:",":eight_spoked_asterisk:",":eight_pointed_black_star:",":heart_decoration:",":vs:",":vibration_mode:",":mobile_phone_off:",":chart:",":currency_exchange:",":aries:",":taurus:",":gemini:",":cancer:",":leo:",":virgo:",":libra:",":scorpius:",":sagittarius:",":capricorn:",":aquarius:",":pisces:",":ophiuchus:",":six_pointed_star:",":negative_squared_cross_mark:",":a:",":b:",":ab:",":o2:",":diamond_shape_with_a_dot_inside:",":recycle:",":end:",":on:",":soon:",":clock1:",":clock130:",":clock10:",":clock1030:",":clock11:",":clock1130:",":clock12:",":clock1230:",":clock2:",":clock230:",":clock3:",":clock330:",":clock4:",":clock430:",":clock5:",":clock530:",":clock6:",":clock630:",":clock7:",":clock730:",":clock8:",":clock830:",":clock9:",":clock930:",":heavy_dollar_sign:",":copyright:",":registered:",":tm:",":x:",":heavy_exclamation_mark:",":bangbang:",":interrobang:",":o:",":heavy_multiplication_x:",":heavy_plus_sign:",":heavy_minus_sign:",":heavy_division_sign:",":white_flower:",":heavy_check_mark:",":ballot_box_with_check:",":radio_button:",":link:",":curly_loop:",":wavy_dash:",":part_alternation_mark:",":trident:",":black_square:",":white_square:",":white_check_mark:",":black_square_button:",":white_square_button:",":black_circle:",":white_circle:",":red_circle:",":large_blue_circle:",":large_blue_diamond:",":large_orange_diamond:",":small_blue_diamond:",":small_orange_diamond:",":small_red_triangle:",":small_red_triangle_down:",":shipit:"],
        test = /\:[a-z0-9_\-\+]+\:/g;

    function emoji(someString, url, size) {
        return someString.replace(test, function (match) {
            if (emojis.indexOf(match) !== -1) {
                var name = String(match).slice(1, -1);
                return '<img class="emoji" title=":' + name + ':" alt="' + name + '" src="' + url + '/' + encodeURIComponent(name) + '.png"' + (size ? (' height="' + size + '"') : '') + ' />';
            } else {
                return match;
            }
        });
    };

    emoji.list = emojis;

    return emoji;
}));

},{}],19:[function(require,module,exports){
// Copyright 2009-2012 by contributors, MIT License
// vim: ts=4 sts=4 sw=4 expandtab

//Add semicolon to prevent IIFE from being passed as argument to concated code.
;
// Module systems magic dance
(function (definition) {
    // RequireJS
    if (typeof define == "function") {
        define(definition);
    // YUI3
    } else if (typeof YUI == "function") {
        YUI.add("es5", definition);
    // CommonJS and <script>
    } else {
        definition();
    }
})(function () {

/**
 * Brings an environment as close to ECMAScript 5 compliance
 * as is possible with the facilities of erstwhile engines.
 *
 * Annotated ES5: http://es5.github.com/ (specific links below)
 * ES5 Spec: http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf
 * Required reading: http://javascriptweblog.wordpress.com/2011/12/05/extending-javascript-natives/
 */

// ES-5 15.1.2.2
if (parseInt('08') !== 8) {
    parseInt = (function (origParseInt) {
        var hexRegex = /^0[xX]/;
        return function parseIntES5(str, radix) {
            str = String(str).trim();
            if (!+radix) {
                radix = hexRegex.test(str) ? 16 : 10;
            }
            return origParseInt(str, radix);
        };
    }(parseInt));
}

//
// Function
// ========
//

// ES-5 15.3.4.5
// http://es5.github.com/#x15.3.4.5

function Empty() {}

if (!Function.prototype.bind) {
    Function.prototype.bind = function bind(that) { // .length is 1
        // 1. Let Target be the this value.
        var target = this;
        // 2. If IsCallable(Target) is false, throw a TypeError exception.
        if (typeof target != "function") {
            throw new TypeError("Function.prototype.bind called on incompatible " + target);
        }
        // 3. Let A be a new (possibly empty) internal list of all of the
        //   argument values provided after thisArg (arg1, arg2 etc), in order.
        // XXX slicedArgs will stand in for "A" if used
        var args = _Array_slice_.call(arguments, 1); // for normal call
        // 4. Let F be a new native ECMAScript object.
        // 11. Set the [[Prototype]] internal property of F to the standard
        //   built-in Function prototype object as specified in 15.3.3.1.
        // 12. Set the [[Call]] internal property of F as described in
        //   15.3.4.5.1.
        // 13. Set the [[Construct]] internal property of F as described in
        //   15.3.4.5.2.
        // 14. Set the [[HasInstance]] internal property of F as described in
        //   15.3.4.5.3.
        var binder = function () {

            if (this instanceof bound) {
                // 15.3.4.5.2 [[Construct]]
                // When the [[Construct]] internal method of a function object,
                // F that was created using the bind function is called with a
                // list of arguments ExtraArgs, the following steps are taken:
                // 1. Let target be the value of F's [[TargetFunction]]
                //   internal property.
                // 2. If target has no [[Construct]] internal method, a
                //   TypeError exception is thrown.
                // 3. Let boundArgs be the value of F's [[BoundArgs]] internal
                //   property.
                // 4. Let args be a new list containing the same values as the
                //   list boundArgs in the same order followed by the same
                //   values as the list ExtraArgs in the same order.
                // 5. Return the result of calling the [[Construct]] internal
                //   method of target providing args as the arguments.

                var result = target.apply(
                    this,
                    args.concat(_Array_slice_.call(arguments))
                );
                if (Object(result) === result) {
                    return result;
                }
                return this;

            } else {
                // 15.3.4.5.1 [[Call]]
                // When the [[Call]] internal method of a function object, F,
                // which was created using the bind function is called with a
                // this value and a list of arguments ExtraArgs, the following
                // steps are taken:
                // 1. Let boundArgs be the value of F's [[BoundArgs]] internal
                //   property.
                // 2. Let boundThis be the value of F's [[BoundThis]] internal
                //   property.
                // 3. Let target be the value of F's [[TargetFunction]] internal
                //   property.
                // 4. Let args be a new list containing the same values as the
                //   list boundArgs in the same order followed by the same
                //   values as the list ExtraArgs in the same order.
                // 5. Return the result of calling the [[Call]] internal method
                //   of target providing boundThis as the this value and
                //   providing args as the arguments.

                // equiv: target.call(this, ...boundArgs, ...args)
                return target.apply(
                    that,
                    args.concat(_Array_slice_.call(arguments))
                );

            }

        };

        // 15. If the [[Class]] internal property of Target is "Function", then
        //     a. Let L be the length property of Target minus the length of A.
        //     b. Set the length own property of F to either 0 or L, whichever is
        //       larger.
        // 16. Else set the length own property of F to 0.

        var boundLength = Math.max(0, target.length - args.length);

        // 17. Set the attributes of the length own property of F to the values
        //   specified in 15.3.5.1.
        var boundArgs = [];
        for (var i = 0; i < boundLength; i++) {
            boundArgs.push("$" + i);
        }

        // XXX Build a dynamic function with desired amount of arguments is the only 
        // way to set the length property of a function. 
        // In environments where Content Security Policies enabled (Chrome extensions, 
        // for ex.) all use of eval or Function costructor throws an exception. 
        // However in all of these environments Function.prototype.bind exists 
        // and so this code will never be executed.
        var bound = Function("binder", "return function(" + boundArgs.join(",") + "){return binder.apply(this,arguments)}")(binder);

        if (target.prototype) {
            Empty.prototype = target.prototype;
            bound.prototype = new Empty();
            // Clean up dangling references.
            Empty.prototype = null;
        }

        // TODO
        // 18. Set the [[Extensible]] internal property of F to true.

        // TODO
        // 19. Let thrower be the [[ThrowTypeError]] function Object (13.2.3).
        // 20. Call the [[DefineOwnProperty]] internal method of F with
        //   arguments "caller", PropertyDescriptor {[[Get]]: thrower, [[Set]]:
        //   thrower, [[Enumerable]]: false, [[Configurable]]: false}, and
        //   false.
        // 21. Call the [[DefineOwnProperty]] internal method of F with
        //   arguments "arguments", PropertyDescriptor {[[Get]]: thrower,
        //   [[Set]]: thrower, [[Enumerable]]: false, [[Configurable]]: false},
        //   and false.

        // TODO
        // NOTE Function objects created using Function.prototype.bind do not
        // have a prototype property or the [[Code]], [[FormalParameters]], and
        // [[Scope]] internal properties.
        // XXX can't delete prototype in pure-js.

        // 22. Return F.
        return bound;
    };
}

// Shortcut to an often accessed properties, in order to avoid multiple
// dereference that costs universally.
// _Please note: Shortcuts are defined after `Function.prototype.bind` as we
// us it in defining shortcuts.
var call = Function.prototype.call;
var prototypeOfArray = Array.prototype;
var prototypeOfObject = Object.prototype;
var _Array_slice_ = prototypeOfArray.slice;
// Having a toString local variable name breaks in Opera so use _toString.
var _toString = call.bind(prototypeOfObject.toString);
var owns = call.bind(prototypeOfObject.hasOwnProperty);

// If JS engine supports accessors creating shortcuts.
var defineGetter;
var defineSetter;
var lookupGetter;
var lookupSetter;
var supportsAccessors;
if ((supportsAccessors = owns(prototypeOfObject, "__defineGetter__"))) {
    defineGetter = call.bind(prototypeOfObject.__defineGetter__);
    defineSetter = call.bind(prototypeOfObject.__defineSetter__);
    lookupGetter = call.bind(prototypeOfObject.__lookupGetter__);
    lookupSetter = call.bind(prototypeOfObject.__lookupSetter__);
}

//
// Array
// =====
//

// ES5 15.4.4.12
// http://es5.github.com/#x15.4.4.12
// Default value for second param
// [bugfix, ielt9, old browsers]
// IE < 9 bug: [1,2].splice(0).join("") == "" but should be "12"
if ([1,2].splice(0).length != 2) {
    var array_splice = Array.prototype.splice;
    var array_push = Array.prototype.push;
    var array_unshift = Array.prototype.unshift;

    if (function() { // test IE < 9 to splice bug - see issue #138
        function makeArray(l) {
            var a = [];
            while (l--) {
                a.unshift(l)
            }
            return a
        }

        var array = []
            , lengthBefore
        ;

        array.splice.bind(array, 0, 0).apply(null, makeArray(20));
        array.splice.bind(array, 0, 0).apply(null, makeArray(26));

        lengthBefore = array.length; //20
        array.splice(5, 0, "XXX"); // add one element

        if (lengthBefore + 1 == array.length) {
            return true;// has right splice implementation without bugs
        }
        // else {
        //    IE8 bug
        // }
    }()) {//IE 6/7
        Array.prototype.splice = function(start, deleteCount) {
            if (!arguments.length) {
                return [];
            } else {
                return array_splice.apply(this, [
                    start === void 0 ? 0 : start,
                    deleteCount === void 0 ? (this.length - start) : deleteCount
                ].concat(_Array_slice_.call(arguments, 2)))
            }
        };
    }
    else {//IE8
        Array.prototype.splice = function(start, deleteCount) {
            var result
                , args = _Array_slice_.call(arguments, 2)
                , addElementsCount = args.length
            ;

            if (!arguments.length) {
                return [];
            }

            if (start === void 0) { // default
                start = 0;
            }
            if (deleteCount === void 0) { // default
                deleteCount = this.length - start;
            }

            if (addElementsCount > 0) {
                if (deleteCount <= 0) {
                    if (start == this.length) { // tiny optimisation #1
                        array_push.apply(this, args);
                        return [];
                    }

                    if (start == 0) { // tiny optimisation #2
                        array_unshift.apply(this, args);
                        return [];
                    }
                }

                // Array.prototype.splice implementation
                result = _Array_slice_.call(this, start, start + deleteCount);// delete part
                args.push.apply(args, _Array_slice_.call(this, start + deleteCount, this.length));// right part
                args.unshift.apply(args, _Array_slice_.call(this, 0, start));// left part

                // delete all items from this array and replace it to 'left part' + _Array_slice_.call(arguments, 2) + 'right part'
                args.unshift(0, this.length);

                array_splice.apply(this, args);

                return result;
            }

            return array_splice.call(this, start, deleteCount);
        }

    }
}

// ES5 15.4.4.12
// http://es5.github.com/#x15.4.4.13
// Return len+argCount.
// [bugfix, ielt8]
// IE < 8 bug: [].unshift(0) == undefined but should be "1"
if ([].unshift(0) != 1) {
    var array_unshift = Array.prototype.unshift;
    Array.prototype.unshift = function() {
        array_unshift.apply(this, arguments);
        return this.length;
    };
}

// ES5 15.4.3.2
// http://es5.github.com/#x15.4.3.2
// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/isArray
if (!Array.isArray) {
    Array.isArray = function isArray(obj) {
        return _toString(obj) == "[object Array]";
    };
}

// The IsCallable() check in the Array functions
// has been replaced with a strict check on the
// internal class of the object to trap cases where
// the provided function was actually a regular
// expression literal, which in V8 and
// JavaScriptCore is a typeof "function".  Only in
// V8 are regular expression literals permitted as
// reduce parameters, so it is desirable in the
// general case for the shim to match the more
// strict and common behavior of rejecting regular
// expressions.

// ES5 15.4.4.18
// http://es5.github.com/#x15.4.4.18
// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/array/forEach

// Check failure of by-index access of string characters (IE < 9)
// and failure of `0 in boxedString` (Rhino)
var boxedString = Object("a"),
    splitString = boxedString[0] != "a" || !(0 in boxedString);
// Check node 0.6.21 bug where third parameter is not boxed
var boxedForEach = true;
if (Array.prototype.forEach) {
    Array.prototype.forEach.call("foo", function(item, i, obj) {
        if (typeof obj !== 'object') boxedForEach = false;
    });
}

if (!Array.prototype.forEach || !boxedForEach) {
    Array.prototype.forEach = function forEach(fun /*, thisp*/) {
        var object = toObject(this),
            self = splitString && _toString(this) == "[object String]" ?
                this.split("") :
                object,
            thisp = arguments[1],
            i = -1,
            length = self.length >>> 0;

        // If no callback function or if callback is not a callable function
        if (_toString(fun) != "[object Function]") {
            throw new TypeError(); // TODO message
        }

        while (++i < length) {
            if (i in self) {
                // Invoke the callback function with call, passing arguments:
                // context, property value, property key, thisArg object
                // context
                fun.call(thisp, self[i], i, object);
            }
        }
    };
}

// ES5 15.4.4.19
// http://es5.github.com/#x15.4.4.19
// https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Objects/Array/map
if (!Array.prototype.map) {
    Array.prototype.map = function map(fun /*, thisp*/) {
        var object = toObject(this),
            self = splitString && _toString(this) == "[object String]" ?
                this.split("") :
                object,
            length = self.length >>> 0,
            result = Array(length),
            thisp = arguments[1];

        // If no callback function or if callback is not a callable function
        if (_toString(fun) != "[object Function]") {
            throw new TypeError(fun + " is not a function");
        }

        for (var i = 0; i < length; i++) {
            if (i in self)
                result[i] = fun.call(thisp, self[i], i, object);
        }
        return result;
    };
}

// ES5 15.4.4.20
// http://es5.github.com/#x15.4.4.20
// https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Objects/Array/filter
if (!Array.prototype.filter) {
    Array.prototype.filter = function filter(fun /*, thisp */) {
        var object = toObject(this),
            self = splitString && _toString(this) == "[object String]" ?
                this.split("") :
                    object,
            length = self.length >>> 0,
            result = [],
            value,
            thisp = arguments[1];

        // If no callback function or if callback is not a callable function
        if (_toString(fun) != "[object Function]") {
            throw new TypeError(fun + " is not a function");
        }

        for (var i = 0; i < length; i++) {
            if (i in self) {
                value = self[i];
                if (fun.call(thisp, value, i, object)) {
                    result.push(value);
                }
            }
        }
        return result;
    };
}

// ES5 15.4.4.16
// http://es5.github.com/#x15.4.4.16
// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/every
if (!Array.prototype.every) {
    Array.prototype.every = function every(fun /*, thisp */) {
        var object = toObject(this),
            self = splitString && _toString(this) == "[object String]" ?
                this.split("") :
                object,
            length = self.length >>> 0,
            thisp = arguments[1];

        // If no callback function or if callback is not a callable function
        if (_toString(fun) != "[object Function]") {
            throw new TypeError(fun + " is not a function");
        }

        for (var i = 0; i < length; i++) {
            if (i in self && !fun.call(thisp, self[i], i, object)) {
                return false;
            }
        }
        return true;
    };
}

// ES5 15.4.4.17
// http://es5.github.com/#x15.4.4.17
// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/some
if (!Array.prototype.some) {
    Array.prototype.some = function some(fun /*, thisp */) {
        var object = toObject(this),
            self = splitString && _toString(this) == "[object String]" ?
                this.split("") :
                object,
            length = self.length >>> 0,
            thisp = arguments[1];

        // If no callback function or if callback is not a callable function
        if (_toString(fun) != "[object Function]") {
            throw new TypeError(fun + " is not a function");
        }

        for (var i = 0; i < length; i++) {
            if (i in self && fun.call(thisp, self[i], i, object)) {
                return true;
            }
        }
        return false;
    };
}

// ES5 15.4.4.21
// http://es5.github.com/#x15.4.4.21
// https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Objects/Array/reduce
if (!Array.prototype.reduce) {
    Array.prototype.reduce = function reduce(fun /*, initial*/) {
        var object = toObject(this),
            self = splitString && _toString(this) == "[object String]" ?
                this.split("") :
                object,
            length = self.length >>> 0;

        // If no callback function or if callback is not a callable function
        if (_toString(fun) != "[object Function]") {
            throw new TypeError(fun + " is not a function");
        }

        // no value to return if no initial value and an empty array
        if (!length && arguments.length == 1) {
            throw new TypeError("reduce of empty array with no initial value");
        }

        var i = 0;
        var result;
        if (arguments.length >= 2) {
            result = arguments[1];
        } else {
            do {
                if (i in self) {
                    result = self[i++];
                    break;
                }

                // if array contains no values, no initial value to return
                if (++i >= length) {
                    throw new TypeError("reduce of empty array with no initial value");
                }
            } while (true);
        }

        for (; i < length; i++) {
            if (i in self) {
                result = fun.call(void 0, result, self[i], i, object);
            }
        }

        return result;
    };
}

// ES5 15.4.4.22
// http://es5.github.com/#x15.4.4.22
// https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Objects/Array/reduceRight
if (!Array.prototype.reduceRight) {
    Array.prototype.reduceRight = function reduceRight(fun /*, initial*/) {
        var object = toObject(this),
            self = splitString && _toString(this) == "[object String]" ?
                this.split("") :
                object,
            length = self.length >>> 0;

        // If no callback function or if callback is not a callable function
        if (_toString(fun) != "[object Function]") {
            throw new TypeError(fun + " is not a function");
        }

        // no value to return if no initial value, empty array
        if (!length && arguments.length == 1) {
            throw new TypeError("reduceRight of empty array with no initial value");
        }

        var result, i = length - 1;
        if (arguments.length >= 2) {
            result = arguments[1];
        } else {
            do {
                if (i in self) {
                    result = self[i--];
                    break;
                }

                // if array contains no values, no initial value to return
                if (--i < 0) {
                    throw new TypeError("reduceRight of empty array with no initial value");
                }
            } while (true);
        }

        if (i < 0) {
            return result;
        }

        do {
            if (i in this) {
                result = fun.call(void 0, result, self[i], i, object);
            }
        } while (i--);

        return result;
    };
}

// ES5 15.4.4.14
// http://es5.github.com/#x15.4.4.14
// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/indexOf
if (!Array.prototype.indexOf || ([0, 1].indexOf(1, 2) != -1)) {
    Array.prototype.indexOf = function indexOf(sought /*, fromIndex */ ) {
        var self = splitString && _toString(this) == "[object String]" ?
                this.split("") :
                toObject(this),
            length = self.length >>> 0;

        if (!length) {
            return -1;
        }

        var i = 0;
        if (arguments.length > 1) {
            i = toInteger(arguments[1]);
        }

        // handle negative indices
        i = i >= 0 ? i : Math.max(0, length + i);
        for (; i < length; i++) {
            if (i in self && self[i] === sought) {
                return i;
            }
        }
        return -1;
    };
}

// ES5 15.4.4.15
// http://es5.github.com/#x15.4.4.15
// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/lastIndexOf
if (!Array.prototype.lastIndexOf || ([0, 1].lastIndexOf(0, -3) != -1)) {
    Array.prototype.lastIndexOf = function lastIndexOf(sought /*, fromIndex */) {
        var self = splitString && _toString(this) == "[object String]" ?
                this.split("") :
                toObject(this),
            length = self.length >>> 0;

        if (!length) {
            return -1;
        }
        var i = length - 1;
        if (arguments.length > 1) {
            i = Math.min(i, toInteger(arguments[1]));
        }
        // handle negative indices
        i = i >= 0 ? i : length - Math.abs(i);
        for (; i >= 0; i--) {
            if (i in self && sought === self[i]) {
                return i;
            }
        }
        return -1;
    };
}

//
// Object
// ======
//

// ES5 15.2.3.14
// http://es5.github.com/#x15.2.3.14
if (!Object.keys) {
    // http://whattheheadsaid.com/2010/10/a-safer-object-keys-compatibility-implementation
    var hasDontEnumBug = true,
        dontEnums = [
            "toString",
            "toLocaleString",
            "valueOf",
            "hasOwnProperty",
            "isPrototypeOf",
            "propertyIsEnumerable",
            "constructor"
        ],
        dontEnumsLength = dontEnums.length;

    for (var key in {"toString": null}) {
        hasDontEnumBug = false;
    }

    Object.keys = function keys(object) {

        if (
            (typeof object != "object" && typeof object != "function") ||
            object === null
        ) {
            throw new TypeError("Object.keys called on a non-object");
        }

        var keys = [];
        for (var name in object) {
            if (owns(object, name)) {
                keys.push(name);
            }
        }

        if (hasDontEnumBug) {
            for (var i = 0, ii = dontEnumsLength; i < ii; i++) {
                var dontEnum = dontEnums[i];
                if (owns(object, dontEnum)) {
                    keys.push(dontEnum);
                }
            }
        }
        return keys;
    };

}

//
// Date
// ====
//

// ES5 15.9.5.43
// http://es5.github.com/#x15.9.5.43
// This function returns a String value represent the instance in time
// represented by this Date object. The format of the String is the Date Time
// string format defined in 15.9.1.15. All fields are present in the String.
// The time zone is always UTC, denoted by the suffix Z. If the time value of
// this object is not a finite Number a RangeError exception is thrown.
var negativeDate = -62198755200000,
    negativeYearString = "-000001";
if (
    !Date.prototype.toISOString ||
    (new Date(negativeDate).toISOString().indexOf(negativeYearString) === -1)
) {
    Date.prototype.toISOString = function toISOString() {
        var result, length, value, year, month;
        if (!isFinite(this)) {
            throw new RangeError("Date.prototype.toISOString called on non-finite value.");
        }

        year = this.getUTCFullYear();

        month = this.getUTCMonth();
        // see https://github.com/es-shims/es5-shim/issues/111
        year += Math.floor(month / 12);
        month = (month % 12 + 12) % 12;

        // the date time string format is specified in 15.9.1.15.
        result = [month + 1, this.getUTCDate(),
            this.getUTCHours(), this.getUTCMinutes(), this.getUTCSeconds()];
        year = (
            (year < 0 ? "-" : (year > 9999 ? "+" : "")) +
            ("00000" + Math.abs(year))
            .slice(0 <= year && year <= 9999 ? -4 : -6)
        );

        length = result.length;
        while (length--) {
            value = result[length];
            // pad months, days, hours, minutes, and seconds to have two
            // digits.
            if (value < 10) {
                result[length] = "0" + value;
            }
        }
        // pad milliseconds to have three digits.
        return (
            year + "-" + result.slice(0, 2).join("-") +
            "T" + result.slice(2).join(":") + "." +
            ("000" + this.getUTCMilliseconds()).slice(-3) + "Z"
        );
    };
}


// ES5 15.9.5.44
// http://es5.github.com/#x15.9.5.44
// This function provides a String representation of a Date object for use by
// JSON.stringify (15.12.3).
var dateToJSONIsSupported = false;
try {
    dateToJSONIsSupported = (
        Date.prototype.toJSON &&
        new Date(NaN).toJSON() === null &&
        new Date(negativeDate).toJSON().indexOf(negativeYearString) !== -1 &&
        Date.prototype.toJSON.call({ // generic
            toISOString: function () {
                return true;
            }
        })
    );
} catch (e) {
}
if (!dateToJSONIsSupported) {
    Date.prototype.toJSON = function toJSON(key) {
        // When the toJSON method is called with argument key, the following
        // steps are taken:

        // 1.  Let O be the result of calling ToObject, giving it the this
        // value as its argument.
        // 2. Let tv be toPrimitive(O, hint Number).
        var o = Object(this),
            tv = toPrimitive(o),
            toISO;
        // 3. If tv is a Number and is not finite, return null.
        if (typeof tv === "number" && !isFinite(tv)) {
            return null;
        }
        // 4. Let toISO be the result of calling the [[Get]] internal method of
        // O with argument "toISOString".
        toISO = o.toISOString;
        // 5. If IsCallable(toISO) is false, throw a TypeError exception.
        if (typeof toISO != "function") {
            throw new TypeError("toISOString property is not callable");
        }
        // 6. Return the result of calling the [[Call]] internal method of
        //  toISO with O as the this value and an empty argument list.
        return toISO.call(o);

        // NOTE 1 The argument is ignored.

        // NOTE 2 The toJSON function is intentionally generic; it does not
        // require that its this value be a Date object. Therefore, it can be
        // transferred to other kinds of objects for use as a method. However,
        // it does require that any such object have a toISOString method. An
        // object is free to use the argument key to filter its
        // stringification.
    };
}

// ES5 15.9.4.2
// http://es5.github.com/#x15.9.4.2
// based on work shared by Daniel Friesen (dantman)
// http://gist.github.com/303249
if (!Date.parse || "Date.parse is buggy") {
    // XXX global assignment won't work in embeddings that use
    // an alternate object for the context.
    Date = (function(NativeDate) {

        // Date.length === 7
        function Date(Y, M, D, h, m, s, ms) {
            var length = arguments.length;
            if (this instanceof NativeDate) {
                var date = length == 1 && String(Y) === Y ? // isString(Y)
                    // We explicitly pass it through parse:
                    new NativeDate(Date.parse(Y)) :
                    // We have to manually make calls depending on argument
                    // length here
                    length >= 7 ? new NativeDate(Y, M, D, h, m, s, ms) :
                    length >= 6 ? new NativeDate(Y, M, D, h, m, s) :
                    length >= 5 ? new NativeDate(Y, M, D, h, m) :
                    length >= 4 ? new NativeDate(Y, M, D, h) :
                    length >= 3 ? new NativeDate(Y, M, D) :
                    length >= 2 ? new NativeDate(Y, M) :
                    length >= 1 ? new NativeDate(Y) :
                                  new NativeDate();
                // Prevent mixups with unfixed Date object
                date.constructor = Date;
                return date;
            }
            return NativeDate.apply(this, arguments);
        };

        // 15.9.1.15 Date Time String Format.
        var isoDateExpression = new RegExp("^" +
            "(\\d{4}|[\+\-]\\d{6})" + // four-digit year capture or sign +
                                      // 6-digit extended year
            "(?:-(\\d{2})" + // optional month capture
            "(?:-(\\d{2})" + // optional day capture
            "(?:" + // capture hours:minutes:seconds.milliseconds
                "T(\\d{2})" + // hours capture
                ":(\\d{2})" + // minutes capture
                "(?:" + // optional :seconds.milliseconds
                    ":(\\d{2})" + // seconds capture
                    "(?:(\\.\\d{1,}))?" + // milliseconds capture
                ")?" +
            "(" + // capture UTC offset component
                "Z|" + // UTC capture
                "(?:" + // offset specifier +/-hours:minutes
                    "([-+])" + // sign capture
                    "(\\d{2})" + // hours offset capture
                    ":(\\d{2})" + // minutes offset capture
                ")" +
            ")?)?)?)?" +
        "$");

        var months = [
            0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334, 365
        ];

        function dayFromMonth(year, month) {
            var t = month > 1 ? 1 : 0;
            return (
                months[month] +
                Math.floor((year - 1969 + t) / 4) -
                Math.floor((year - 1901 + t) / 100) +
                Math.floor((year - 1601 + t) / 400) +
                365 * (year - 1970)
            );
        }

        function toUTC(t) {
            return Number(new NativeDate(1970, 0, 1, 0, 0, 0, t));
        }

        // Copy any custom methods a 3rd party library may have added
        for (var key in NativeDate) {
            Date[key] = NativeDate[key];
        }

        // Copy "native" methods explicitly; they may be non-enumerable
        Date.now = NativeDate.now;
        Date.UTC = NativeDate.UTC;
        Date.prototype = NativeDate.prototype;
        Date.prototype.constructor = Date;

        // Upgrade Date.parse to handle simplified ISO 8601 strings
        Date.parse = function parse(string) {
            var match = isoDateExpression.exec(string);
            if (match) {
                // parse months, days, hours, minutes, seconds, and milliseconds
                // provide default values if necessary
                // parse the UTC offset component
                var year = Number(match[1]),
                    month = Number(match[2] || 1) - 1,
                    day = Number(match[3] || 1) - 1,
                    hour = Number(match[4] || 0),
                    minute = Number(match[5] || 0),
                    second = Number(match[6] || 0),
                    millisecond = Math.floor(Number(match[7] || 0) * 1000),
                    // When time zone is missed, local offset should be used
                    // (ES 5.1 bug)
                    // see https://bugs.ecmascript.org/show_bug.cgi?id=112
                    isLocalTime = Boolean(match[4] && !match[8]),
                    signOffset = match[9] === "-" ? 1 : -1,
                    hourOffset = Number(match[10] || 0),
                    minuteOffset = Number(match[11] || 0),
                    result;
                if (
                    hour < (
                        minute > 0 || second > 0 || millisecond > 0 ?
                        24 : 25
                    ) &&
                    minute < 60 && second < 60 && millisecond < 1000 &&
                    month > -1 && month < 12 && hourOffset < 24 &&
                    minuteOffset < 60 && // detect invalid offsets
                    day > -1 &&
                    day < (
                        dayFromMonth(year, month + 1) -
                        dayFromMonth(year, month)
                    )
                ) {
                    result = (
                        (dayFromMonth(year, month) + day) * 24 +
                        hour +
                        hourOffset * signOffset
                    ) * 60;
                    result = (
                        (result + minute + minuteOffset * signOffset) * 60 +
                        second
                    ) * 1000 + millisecond;
                    if (isLocalTime) {
                        result = toUTC(result);
                    }
                    if (-8.64e15 <= result && result <= 8.64e15) {
                        return result;
                    }
                }
                return NaN;
            }
            return NativeDate.parse.apply(this, arguments);
        };

        return Date;
    })(Date);
}

// ES5 15.9.4.4
// http://es5.github.com/#x15.9.4.4
if (!Date.now) {
    Date.now = function now() {
        return new Date().getTime();
    };
}


//
// Number
// ======
//

// ES5.1 15.7.4.5
// http://es5.github.com/#x15.7.4.5
if (!Number.prototype.toFixed || (0.00008).toFixed(3) !== '0.000' || (0.9).toFixed(0) === '0' || (1.255).toFixed(2) !== '1.25' || (1000000000000000128).toFixed(0) !== "1000000000000000128") {
    // Hide these variables and functions
    (function () {
        var base, size, data, i;

        base = 1e7;
        size = 6;
        data = [0, 0, 0, 0, 0, 0];

        function multiply(n, c) {
            var i = -1;
            while (++i < size) {
                c += n * data[i];
                data[i] = c % base;
                c = Math.floor(c / base);
            }
        }

        function divide(n) {
            var i = size, c = 0;
            while (--i >= 0) {
                c += data[i];
                data[i] = Math.floor(c / n);
                c = (c % n) * base;
            }
        }

        function toString() {
            var i = size;
            var s = '';
            while (--i >= 0) {
                if (s !== '' || i === 0 || data[i] !== 0) {
                    var t = String(data[i]);
                    if (s === '') {
                        s = t;
                    } else {
                        s += '0000000'.slice(0, 7 - t.length) + t;
                    }
                }
            }
            return s;
        }

        function pow(x, n, acc) {
            return (n === 0 ? acc : (n % 2 === 1 ? pow(x, n - 1, acc * x) : pow(x * x, n / 2, acc)));
        }

        function log(x) {
            var n = 0;
            while (x >= 4096) {
                n += 12;
                x /= 4096;
            }
            while (x >= 2) {
                n += 1;
                x /= 2;
            }
            return n;
        }

        Number.prototype.toFixed = function (fractionDigits) {
            var f, x, s, m, e, z, j, k;

            // Test for NaN and round fractionDigits down
            f = Number(fractionDigits);
            f = f !== f ? 0 : Math.floor(f);

            if (f < 0 || f > 20) {
                throw new RangeError("Number.toFixed called with invalid number of decimals");
            }

            x = Number(this);

            // Test for NaN
            if (x !== x) {
                return "NaN";
            }

            // If it is too big or small, return the string value of the number
            if (x <= -1e21 || x >= 1e21) {
                return String(x);
            }

            s = "";

            if (x < 0) {
                s = "-";
                x = -x;
            }

            m = "0";

            if (x > 1e-21) {
                // 1e-21 < x < 1e21
                // -70 < log2(x) < 70
                e = log(x * pow(2, 69, 1)) - 69;
                z = (e < 0 ? x * pow(2, -e, 1) : x / pow(2, e, 1));
                z *= 0x10000000000000; // Math.pow(2, 52);
                e = 52 - e;

                // -18 < e < 122
                // x = z / 2 ^ e
                if (e > 0) {
                    multiply(0, z);
                    j = f;

                    while (j >= 7) {
                        multiply(1e7, 0);
                        j -= 7;
                    }

                    multiply(pow(10, j, 1), 0);
                    j = e - 1;

                    while (j >= 23) {
                        divide(1 << 23);
                        j -= 23;
                    }

                    divide(1 << j);
                    multiply(1, 1);
                    divide(2);
                    m = toString();
                } else {
                    multiply(0, z);
                    multiply(1 << (-e), 0);
                    m = toString() + '0.00000000000000000000'.slice(2, 2 + f);
                }
            }

            if (f > 0) {
                k = m.length;

                if (k <= f) {
                    m = s + '0.0000000000000000000'.slice(0, f - k + 2) + m;
                } else {
                    m = s + m.slice(0, k - f) + '.' + m.slice(k - f);
                }
            } else {
                m = s + m;
            }

            return m;
        }
    }());
}


//
// String
// ======
//


// ES5 15.5.4.14
// http://es5.github.com/#x15.5.4.14

// [bugfix, IE lt 9, firefox 4, Konqueror, Opera, obscure browsers]
// Many browsers do not split properly with regular expressions or they
// do not perform the split correctly under obscure conditions.
// See http://blog.stevenlevithan.com/archives/cross-browser-split
// I've tested in many browsers and this seems to cover the deviant ones:
//    'ab'.split(/(?:ab)*/) should be ["", ""], not [""]
//    '.'.split(/(.?)(.?)/) should be ["", ".", "", ""], not ["", ""]
//    'tesst'.split(/(s)*/) should be ["t", undefined, "e", "s", "t"], not
//       [undefined, "t", undefined, "e", ...]
//    ''.split(/.?/) should be [], not [""]
//    '.'.split(/()()/) should be ["."], not ["", "", "."]

var string_split = String.prototype.split;
if (
    'ab'.split(/(?:ab)*/).length !== 2 ||
    '.'.split(/(.?)(.?)/).length !== 4 ||
    'tesst'.split(/(s)*/)[1] === "t" ||
    ''.split(/.?/).length ||
    '.'.split(/()()/).length > 1
) {
    (function () {
        var compliantExecNpcg = /()??/.exec("")[1] === void 0; // NPCG: nonparticipating capturing group

        String.prototype.split = function (separator, limit) {
            var string = this;
            if (separator === void 0 && limit === 0)
                return [];

            // If `separator` is not a regex, use native split
            if (Object.prototype.toString.call(separator) !== "[object RegExp]") {
                return string_split.apply(this, arguments);
            }

            var output = [],
                flags = (separator.ignoreCase ? "i" : "") +
                        (separator.multiline  ? "m" : "") +
                        (separator.extended   ? "x" : "") + // Proposed for ES6
                        (separator.sticky     ? "y" : ""), // Firefox 3+
                lastLastIndex = 0,
                // Make `global` and avoid `lastIndex` issues by working with a copy
                separator = new RegExp(separator.source, flags + "g"),
                separator2, match, lastIndex, lastLength;
            string += ""; // Type-convert
            if (!compliantExecNpcg) {
                // Doesn't need flags gy, but they don't hurt
                separator2 = new RegExp("^" + separator.source + "$(?!\\s)", flags);
            }
            /* Values for `limit`, per the spec:
             * If undefined: 4294967295 // Math.pow(2, 32) - 1
             * If 0, Infinity, or NaN: 0
             * If positive number: limit = Math.floor(limit); if (limit > 4294967295) limit -= 4294967296;
             * If negative number: 4294967296 - Math.floor(Math.abs(limit))
             * If other: Type-convert, then use the above rules
             */
            limit = limit === void 0 ?
                -1 >>> 0 : // Math.pow(2, 32) - 1
                limit >>> 0; // ToUint32(limit)
            while (match = separator.exec(string)) {
                // `separator.lastIndex` is not reliable cross-browser
                lastIndex = match.index + match[0].length;
                if (lastIndex > lastLastIndex) {
                    output.push(string.slice(lastLastIndex, match.index));
                    // Fix browsers whose `exec` methods don't consistently return `undefined` for
                    // nonparticipating capturing groups
                    if (!compliantExecNpcg && match.length > 1) {
                        match[0].replace(separator2, function () {
                            for (var i = 1; i < arguments.length - 2; i++) {
                                if (arguments[i] === void 0) {
                                    match[i] = void 0;
                                }
                            }
                        });
                    }
                    if (match.length > 1 && match.index < string.length) {
                        Array.prototype.push.apply(output, match.slice(1));
                    }
                    lastLength = match[0].length;
                    lastLastIndex = lastIndex;
                    if (output.length >= limit) {
                        break;
                    }
                }
                if (separator.lastIndex === match.index) {
                    separator.lastIndex++; // Avoid an infinite loop
                }
            }
            if (lastLastIndex === string.length) {
                if (lastLength || !separator.test("")) {
                    output.push("");
                }
            } else {
                output.push(string.slice(lastLastIndex));
            }
            return output.length > limit ? output.slice(0, limit) : output;
        };
    }());

// [bugfix, chrome]
// If separator is undefined, then the result array contains just one String,
// which is the this value (converted to a String). If limit is not undefined,
// then the output array is truncated so that it contains no more than limit
// elements.
// "0".split(undefined, 0) -> []
} else if ("0".split(void 0, 0).length) {
    String.prototype.split = function(separator, limit) {
        if (separator === void 0 && limit === 0) return [];
        return string_split.apply(this, arguments);
    }
}


// ECMA-262, 3rd B.2.3
// Note an ECMAScript standart, although ECMAScript 3rd Edition has a
// non-normative section suggesting uniform semantics and it should be
// normalized across all browsers
// [bugfix, IE lt 9] IE < 9 substr() with negative value not working in IE
if ("".substr && "0b".substr(-1) !== "b") {
    var string_substr = String.prototype.substr;
    /**
     *  Get the substring of a string
     *  @param  {integer}  start   where to start the substring
     *  @param  {integer}  length  how many characters to return
     *  @return {string}
     */
    String.prototype.substr = function(start, length) {
        return string_substr.call(
            this,
            start < 0 ? ((start = this.length + start) < 0 ? 0 : start) : start,
            length
        );
    }
}

// ES5 15.5.4.20
// http://es5.github.com/#x15.5.4.20
var ws = "\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003" +
    "\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028" +
    "\u2029\uFEFF";
if (!String.prototype.trim || ws.trim()) {
    // http://blog.stevenlevithan.com/archives/faster-trim-javascript
    // http://perfectionkills.com/whitespace-deviations/
    ws = "[" + ws + "]";
    var trimBeginRegexp = new RegExp("^" + ws + ws + "*"),
        trimEndRegexp = new RegExp(ws + ws + "*$");
    String.prototype.trim = function trim() {
        if (this === void 0 || this === null) {
            throw new TypeError("can't convert "+this+" to object");
        }
        return String(this)
            .replace(trimBeginRegexp, "")
            .replace(trimEndRegexp, "");
    };
}

//
// Util
// ======
//

// ES5 9.4
// http://es5.github.com/#x9.4
// http://jsperf.com/to-integer

function toInteger(n) {
    n = +n;
    if (n !== n) { // isNaN
        n = 0;
    } else if (n !== 0 && n !== (1/0) && n !== -(1/0)) {
        n = (n > 0 || -1) * Math.floor(Math.abs(n));
    }
    return n;
}

function isPrimitive(input) {
    var type = typeof input;
    return (
        input === null ||
        type === "undefined" ||
        type === "boolean" ||
        type === "number" ||
        type === "string"
    );
}

function toPrimitive(input) {
    var val, valueOf, toString;
    if (isPrimitive(input)) {
        return input;
    }
    valueOf = input.valueOf;
    if (typeof valueOf === "function") {
        val = valueOf.call(input);
        if (isPrimitive(val)) {
            return val;
        }
    }
    toString = input.toString;
    if (typeof toString === "function") {
        val = toString.call(input);
        if (isPrimitive(val)) {
            return val;
        }
    }
    throw new TypeError();
}

// ES5 9.9
// http://es5.github.com/#x9.9
var toObject = function (o) {
    if (o == null) { // this matches both null and undefined
        throw new TypeError("can't convert "+o+" to object");
    }
    return Object(o);
};

});


},{}],20:[function(require,module,exports){
(function (process,global){
// Generated by IcedCoffeeScript 108.0.11
(function() {
  var Lexer, SourceMap, compile, ext, formatSourcePosition, fs, getSourceMap, helpers, iced_runtime, iced_transform, lexer, parser, path, sourceMaps, vm, withPrettyErrors, _base, _i, _len, _ref,
    __hasProp = {}.hasOwnProperty,
    __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };

  fs = require('fs');

  vm = require('vm');

  path = require('path');

  Lexer = require('./lexer').Lexer;

  parser = require('./parser').parser;

  helpers = require('./helpers');

  SourceMap = require('./sourcemap').SourceMap;

  iced_transform = require('./iced').transform;

  iced_runtime = require('iced-runtime');

  exports.VERSION = '108.0.11';

  exports.FILE_EXTENSIONS = ['.coffee', '.litcoffee', '.coffee.md', '.iced', '.liticed', '.iced.md'];

  exports.helpers = helpers;

  withPrettyErrors = function(fn) {
    return function(code, options) {
      var err;
      if (options == null) {
        options = {};
      }
      try {
        return fn.call(this, code, options);
      } catch (_error) {
        err = _error;
        throw helpers.updateSyntaxError(err, code, options.filename);
      }
    };
  };

  exports.compile = compile = withPrettyErrors(function(code, options) {
    var answer, currentColumn, currentLine, extend, fragment, fragments, header, js, map, merge, newLines, _i, _len;
    merge = helpers.merge, extend = helpers.extend;
    options = extend({}, options);
    if (options.sourceMap) {
      map = new SourceMap;
    }
    fragments = (iced_transform(parser.parse(lexer.tokenize(code, options)), options)).compileToFragments(options);
    currentLine = 0;
    if (options.header) {
      currentLine += 1;
    }
    if (options.shiftLine) {
      currentLine += 1;
    }
    currentColumn = 0;
    js = "";
    for (_i = 0, _len = fragments.length; _i < _len; _i++) {
      fragment = fragments[_i];
      if (options.sourceMap) {
        if (fragment.locationData) {
          map.add([fragment.locationData.first_line, fragment.locationData.first_column], [currentLine, currentColumn], {
            noReplace: true
          });
        }
        newLines = helpers.count(fragment.code, "\n");
        currentLine += newLines;
        if (newLines) {
          currentColumn = fragment.code.length - (fragment.code.lastIndexOf("\n") + 1);
        } else {
          currentColumn += fragment.code.length;
        }
      }
      js += fragment.code;
    }
    if (options.header) {
      header = "Generated by IcedCoffeeScript " + this.VERSION;
      js = "// " + header + "\n" + js;
    }
    if (options.sourceMap) {
      answer = {
        js: js
      };
      answer.sourceMap = map;
      answer.v3SourceMap = map.generate(options, code);
      return answer;
    } else {
      return js;
    }
  });

  exports.tokens = withPrettyErrors(function(code, options) {
    return lexer.tokenize(code, options);
  });

  exports.nodes = withPrettyErrors(function(source, options) {
    var ast;
    if (typeof source === 'string') {
      ast = parser.parse(lexer.tokenize(source, options));
    } else {
      ast = parser.parse(source);
    }
    if (!options.noIcedTransform) {
      ast = iced_transform(ast, options);
    }
    return ast;
  });

  exports.run = function(code, options) {
    var answer, dir, mainModule, _ref;
    if (options == null) {
      options = {};
    }
    mainModule = require.main;
    mainModule.filename = process.argv[1] = options.filename ? fs.realpathSync(options.filename) : '.';
    mainModule.moduleCache && (mainModule.moduleCache = {});
    dir = options.filename ? path.dirname(fs.realpathSync(options.filename)) : fs.realpathSync('.');
    mainModule.paths = require('module')._nodeModulePaths(dir);
    if (!helpers.isCoffee(mainModule.filename) || require.extensions) {
      options.runtime = "interp";
      answer = compile(code, options);
      code = (_ref = answer.js) != null ? _ref : answer;
    }
    return mainModule._compile(code, mainModule.filename);
  };

  exports["eval"] = function(code, options) {
    var Module, Script, js, k, o, r, sandbox, v, _i, _len, _module, _ref, _ref1, _require;
    if (options == null) {
      options = {};
    }
    if (!(code = code.trim())) {
      return;
    }
    Script = vm.Script;
    if (Script) {
      if (options.sandbox != null) {
        if (options.sandbox instanceof Script.createContext().constructor) {
          sandbox = options.sandbox;
        } else {
          sandbox = Script.createContext();
          _ref = options.sandbox;
          for (k in _ref) {
            if (!__hasProp.call(_ref, k)) continue;
            v = _ref[k];
            sandbox[k] = v;
          }
        }
        sandbox.global = sandbox.root = sandbox.GLOBAL = sandbox;
      } else {
        sandbox = global;
      }
      sandbox.__filename = options.filename || 'eval';
      sandbox.__dirname = path.dirname(sandbox.__filename);
      if (!(sandbox !== global || sandbox.module || sandbox.require)) {
        Module = require('module');
        sandbox.module = _module = new Module(options.modulename || 'eval');
        sandbox.require = _require = function(path) {
          return Module._load(path, _module, true);
        };
        _module.filename = sandbox.__filename;
        _ref1 = Object.getOwnPropertyNames(require);
        for (_i = 0, _len = _ref1.length; _i < _len; _i++) {
          r = _ref1[_i];
          if (r !== 'paths') {
            _require[r] = require[r];
          }
        }
        _require.paths = _module.paths = Module._nodeModulePaths(process.cwd());
        _require.resolve = function(request) {
          return Module._resolveFilename(request, _module);
        };
      }
    }
    o = {};
    for (k in options) {
      if (!__hasProp.call(options, k)) continue;
      v = options[k];
      o[k] = v;
    }
    o.bare = true;
    js = compile(code, o);
    if (sandbox === global) {
      return vm.runInThisContext(js);
    } else {
      return vm.runInContext(js, sandbox);
    }
  };

  exports.register = function() {
    return require('./register');
  };

  if (require.extensions) {
    _ref = this.FILE_EXTENSIONS;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      ext = _ref[_i];
      if ((_base = require.extensions)[ext] == null) {
        _base[ext] = function() {
          throw new Error("Use CoffeeScript.register() or require the coffee-script/register module to require " + ext + " files.");
        };
      }
    }
  }

  exports._compileFile = function(filename, sourceMap, opts_passed) {
    var answer, err, k, opts, raw, stripped, v;
    if (sourceMap == null) {
      sourceMap = false;
    }
    if (opts_passed == null) {
      opts_passed = {};
    }
    raw = fs.readFileSync(filename, 'utf8');
    stripped = raw.charCodeAt(0) === 0xFEFF ? raw.substring(1) : raw;
    opts = {
      filename: filename,
      sourceMap: sourceMap,
      literate: helpers.isLiterate(filename)
    };
    for (k in opts_passed) {
      v = opts_passed[k];
      opts[k] = v;
    }
    try {
      answer = compile(stripped, opts);
    } catch (_error) {
      err = _error;
      throw helpers.updateSyntaxError(err, stripped, filename);
    }
    return answer;
  };

  lexer = new Lexer;

  parser.lexer = {
    lex: function() {
      var tag, token;
      token = this.tokens[this.pos++];
      if (token) {
        tag = token[0], this.yytext = token[1], this.yylloc = token[2];
        this.errorToken = token.origin || token;
        this.yylineno = this.yylloc.first_line;
      } else {
        tag = '';
      }
      return tag;
    },
    setInput: function(tokens) {
      this.tokens = tokens;
      return this.pos = 0;
    },
    upcomingInput: function() {
      return "";
    }
  };

  parser.yy = require('./nodes');

  exports.iced = iced_runtime;

  parser.yy.parseError = function(message, _arg) {
    var errorLoc, errorTag, errorText, errorToken, token, tokens, _ref1;
    token = _arg.token;
    _ref1 = parser.lexer, errorToken = _ref1.errorToken, tokens = _ref1.tokens;
    errorTag = errorToken[0], errorText = errorToken[1], errorLoc = errorToken[2];
    errorText = errorToken === tokens[tokens.length - 1] ? 'end of input' : errorTag === 'INDENT' || errorTag === 'OUTDENT' ? 'indentation' : helpers.nameWhitespaceCharacter(errorText);
    return helpers.throwSyntaxError("unexpected " + errorText, errorLoc);
  };

  formatSourcePosition = function(frame, getSourceMapping) {
    var as, column, fileLocation, fileName, functionName, isConstructor, isMethodCall, line, methodName, source, tp, typeName;
    fileName = void 0;
    fileLocation = '';
    if (frame.isNative()) {
      fileLocation = "native";
    } else {
      if (frame.isEval()) {
        fileName = frame.getScriptNameOrSourceURL();
        if (!fileName) {
          fileLocation = "" + (frame.getEvalOrigin()) + ", ";
        }
      } else {
        fileName = frame.getFileName();
      }
      fileName || (fileName = "<anonymous>");
      line = frame.getLineNumber();
      column = frame.getColumnNumber();
      source = getSourceMapping(fileName, line, column);
      fileLocation = source ? "" + fileName + ":" + source[0] + ":" + source[1] : "" + fileName + ":" + line + ":" + column;
    }
    functionName = frame.getFunctionName();
    isConstructor = frame.isConstructor();
    isMethodCall = !(frame.isToplevel() || isConstructor);
    if (isMethodCall) {
      methodName = frame.getMethodName();
      typeName = frame.getTypeName();
      if (functionName) {
        tp = as = '';
        if (typeName && functionName.indexOf(typeName)) {
          tp = "" + typeName + ".";
        }
        if (methodName && functionName.indexOf("." + methodName) !== functionName.length - methodName.length - 1) {
          as = " [as " + methodName + "]";
        }
        return "" + tp + functionName + as + " (" + fileLocation + ")";
      } else {
        return "" + typeName + "." + (methodName || '<anonymous>') + " (" + fileLocation + ")";
      }
    } else if (isConstructor) {
      return "new " + (functionName || '<anonymous>') + " (" + fileLocation + ")";
    } else if (functionName) {
      return "" + functionName + " (" + fileLocation + ")";
    } else {
      return fileLocation;
    }
  };

  sourceMaps = {};

  getSourceMap = function(filename) {
    var answer, _ref1;
    if (sourceMaps[filename]) {
      return sourceMaps[filename];
    }
    if (_ref1 = path != null ? path.extname(filename) : void 0, __indexOf.call(exports.FILE_EXTENSIONS, _ref1) < 0) {
      return;
    }
    answer = exports._compileFile(filename, true);
    return sourceMaps[filename] = answer.sourceMap;
  };

  Error.prepareStackTrace = function(err, stack) {
    var frame, frames, getSourceMapping;
    getSourceMapping = function(filename, line, column) {
      var answer, sourceMap;
      sourceMap = getSourceMap(filename);
      if (sourceMap) {
        answer = sourceMap.sourceLocation([line - 1, column - 1]);
      }
      if (answer) {
        return [answer[0] + 1, answer[1] + 1];
      } else {
        return null;
      }
    };
    frames = (function() {
      var _j, _len1, _results;
      _results = [];
      for (_j = 0, _len1 = stack.length; _j < _len1; _j++) {
        frame = stack[_j];
        if (frame.getFunction() === exports.run) {
          break;
        }
        _results.push("  at " + (formatSourcePosition(frame, getSourceMapping)));
      }
      return _results;
    })();
    return "" + (err.toString()) + "\n" + (frames.join('\n')) + "\n";
  };

}).call(this);

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./helpers":21,"./iced":22,"./lexer":23,"./nodes":24,"./parser":25,"./register":26,"./sourcemap":29,"_process":38,"fs":15,"iced-runtime":32,"module":15,"path":37,"vm":47}],21:[function(require,module,exports){
(function (process){
// Generated by IcedCoffeeScript 108.0.11
(function() {
  var buildLocationData, extend, flatten, last, repeat, syntaxErrorToString, _ref;

  exports.starts = function(string, literal, start) {
    return literal === string.substr(start, literal.length);
  };

  exports.ends = function(string, literal, back) {
    var len;
    len = literal.length;
    return literal === string.substr(string.length - len - (back || 0), len);
  };

  exports.repeat = repeat = function(str, n) {
    var res;
    res = '';
    while (n > 0) {
      if (n & 1) {
        res += str;
      }
      n >>>= 1;
      str += str;
    }
    return res;
  };

  exports.compact = function(array) {
    var item, _i, _len, _results;
    _results = [];
    for (_i = 0, _len = array.length; _i < _len; _i++) {
      item = array[_i];
      if (item) {
        _results.push(item);
      }
    }
    return _results;
  };

  exports.count = function(string, substr) {
    var num, pos;
    num = pos = 0;
    if (!substr.length) {
      return 1 / 0;
    }
    while (pos = 1 + string.indexOf(substr, pos)) {
      num++;
    }
    return num;
  };

  exports.merge = function(options, overrides) {
    return extend(extend({}, options), overrides);
  };

  extend = exports.extend = function(object, properties) {
    var key, val;
    for (key in properties) {
      val = properties[key];
      object[key] = val;
    }
    return object;
  };

  exports.flatten = flatten = function(array) {
    var element, flattened, _i, _len;
    flattened = [];
    for (_i = 0, _len = array.length; _i < _len; _i++) {
      element = array[_i];
      if (element instanceof Array) {
        flattened = flattened.concat(flatten(element));
      } else {
        flattened.push(element);
      }
    }
    return flattened;
  };

  exports.del = function(obj, key) {
    var val;
    val = obj[key];
    delete obj[key];
    return val;
  };

  exports.last = last = function(array, back) {
    return array[array.length - (back || 0) - 1];
  };

  exports.some = (_ref = Array.prototype.some) != null ? _ref : function(fn) {
    var e, _i, _len;
    for (_i = 0, _len = this.length; _i < _len; _i++) {
      e = this[_i];
      if (fn(e)) {
        return true;
      }
    }
    return false;
  };

  exports.invertLiterate = function(code) {
    var line, lines, maybe_code;
    maybe_code = true;
    lines = (function() {
      var _i, _len, _ref1, _results;
      _ref1 = code.split('\n');
      _results = [];
      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {
        line = _ref1[_i];
        if (maybe_code && /^([ ]{4}|[ ]{0,3}\t)/.test(line)) {
          _results.push(line);
        } else if (maybe_code = /^\s*$/.test(line)) {
          _results.push(line);
        } else {
          _results.push('# ' + line);
        }
      }
      return _results;
    })();
    return lines.join('\n');
  };

  buildLocationData = function(first, last) {
    if (!last) {
      return first;
    } else {
      return {
        first_line: first.first_line,
        first_column: first.first_column,
        last_line: last.last_line,
        last_column: last.last_column
      };
    }
  };

  exports.addLocationDataFn = function(first, last) {
    return function(obj) {
      if (((typeof obj) === 'object') && (!!obj['updateLocationDataIfMissing'])) {
        obj.updateLocationDataIfMissing(buildLocationData(first, last));
      }
      return obj;
    };
  };

  exports.locationDataToString = function(obj) {
    var locationData;
    if (("2" in obj) && ("first_line" in obj[2])) {
      locationData = obj[2];
    } else if ("first_line" in obj) {
      locationData = obj;
    }
    if (locationData) {
      return ("" + (locationData.first_line + 1) + ":" + (locationData.first_column + 1) + "-") + ("" + (locationData.last_line + 1) + ":" + (locationData.last_column + 1));
    } else {
      return "No location data";
    }
  };

  exports.baseFileName = function(file, stripExt, useWinPathSep) {
    var parts, pathSep;
    if (stripExt == null) {
      stripExt = false;
    }
    if (useWinPathSep == null) {
      useWinPathSep = false;
    }
    pathSep = useWinPathSep ? /\\|\// : /\//;
    parts = file.split(pathSep);
    file = parts[parts.length - 1];
    if (!(stripExt && file.indexOf('.') >= 0)) {
      return file;
    }
    parts = file.split('.');
    parts.pop();
    if (parts[parts.length - 1] === 'coffee' && parts.length > 1) {
      parts.pop();
    }
    return parts.join('.');
  };

  exports.isCoffee = function(file) {
    return /\.((lit)?coffee|coffee\.md|iced|liticed|iced\.md)$/.test(file);
  };

  exports.isLiterate = function(file) {
    return /\.(litcoffee|coffee\.md|liticed|iced\.md)$/.test(file);
  };

  exports.throwSyntaxError = function(message, location) {
    var error;
    error = new SyntaxError(message);
    error.location = location;
    error.toString = syntaxErrorToString;
    error.stack = error.toString();
    throw error;
  };

  exports.updateSyntaxError = function(error, code, filename) {
    if (error.toString === syntaxErrorToString) {
      error.code || (error.code = code);
      error.filename || (error.filename = filename);
      error.stack = error.toString();
    }
    return error;
  };

  syntaxErrorToString = function() {
    var codeLine, colorize, colorsEnabled, end, filename, first_column, first_line, last_column, last_line, marker, start, _ref1, _ref2;
    if (!(this.code && this.location)) {
      return Error.prototype.toString.call(this);
    }
    _ref1 = this.location, first_line = _ref1.first_line, first_column = _ref1.first_column, last_line = _ref1.last_line, last_column = _ref1.last_column;
    if (last_line == null) {
      last_line = first_line;
    }
    if (last_column == null) {
      last_column = first_column;
    }
    filename = this.filename || '[stdin]';
    codeLine = this.code.split('\n')[first_line];
    start = first_column;
    end = first_line === last_line ? last_column + 1 : codeLine.length;
    marker = codeLine.slice(0, start).replace(/[^\s]/g, ' ') + repeat('^', end - start);
    if ((typeof process !== "undefined" && process !== null ? process.stdout : void 0) != null) {
      colorsEnabled = process.stdout.isTTY && !process.env.NODE_DISABLE_COLORS;
    }
    if ((_ref2 = this.colorful) != null ? _ref2 : colorsEnabled) {
      colorize = function(str) {
        return "\x1B[1;31m" + str + "\x1B[0m";
      };
      codeLine = codeLine.slice(0, start) + colorize(codeLine.slice(start, end)) + codeLine.slice(end);
      marker = colorize(marker);
    }
    return "" + filename + ":" + (first_line + 1) + ":" + (first_column + 1) + ": error: " + this.message + "\n" + codeLine + "\n" + marker;
  };

  exports.nameWhitespaceCharacter = function(string) {
    switch (string) {
      case ' ':
        return 'space';
      case '\n':
        return 'newline';
      case '\r':
        return 'carriage return';
      case '\t':
        return 'tab';
      default:
        return string;
    }
  };

}).call(this);

}).call(this,require('_process'))

},{"_process":38}],22:[function(require,module,exports){
// Generated by IcedCoffeeScript 108.0.11
(function() {
  exports.transform = function(x, options) {
    return x.icedTransform(options);
  };

  exports.runtime = require('iced-runtime');

}).call(this);

},{"iced-runtime":32}],23:[function(require,module,exports){
// Generated by IcedCoffeeScript 108.0.11
(function() {
  var BOM, BOOL, CALLABLE, CODE, COFFEE_ALIASES, COFFEE_ALIAS_MAP, COFFEE_KEYWORDS, COMMENT, COMPARE, COMPOUND_ASSIGN, HEREDOC, HEREDOC_ILLEGAL, HEREDOC_INDENT, HEREGEX, HEREGEX_OMIT, IDENTIFIER, INDENTABLE_CLOSERS, INDEXABLE, INVERSES, JSTOKEN, JS_FORBIDDEN, JS_KEYWORDS, LINE_BREAK, LINE_CONTINUER, LOGIC, Lexer, MATH, MULTILINER, MULTI_DENT, NOT_REGEX, NOT_SPACED_REGEX, NUMBER, OPERATOR, REGEX, RELATION, RESERVED, Rewriter, SHIFT, SIMPLESTR, STRICT_PROSCRIBED, TRAILING_SPACES, UNARY, UNARY_MATH, WHITESPACE, compact, count, invertLiterate, key, last, locationDataToString, repeat, starts, throwSyntaxError, _ref, _ref1,
    __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };

  _ref = require('./rewriter'), Rewriter = _ref.Rewriter, INVERSES = _ref.INVERSES;

  _ref1 = require('./helpers'), count = _ref1.count, starts = _ref1.starts, compact = _ref1.compact, last = _ref1.last, repeat = _ref1.repeat, invertLiterate = _ref1.invertLiterate, locationDataToString = _ref1.locationDataToString, throwSyntaxError = _ref1.throwSyntaxError;

  exports.Lexer = Lexer = (function() {
    function Lexer() {}

    Lexer.prototype.tokenize = function(code, opts) {
      var consumed, i, tag, _ref2;
      if (opts == null) {
        opts = {};
      }
      this.literate = opts.literate;
      this.indent = 0;
      this.baseIndent = 0;
      this.indebt = 0;
      this.outdebt = 0;
      this.indents = [];
      this.ends = [];
      this.tokens = [];
      this.chunkLine = opts.line || 0;
      this.chunkColumn = opts.column || 0;
      code = this.clean(code);
      i = 0;
      while (this.chunk = code.slice(i)) {
        consumed = this.identifierToken() || this.commentToken() || this.whitespaceToken() || this.lineToken() || this.heredocToken() || this.stringToken() || this.numberToken() || this.regexToken() || this.jsToken() || this.literalToken();
        _ref2 = this.getLineAndColumnFromChunk(consumed), this.chunkLine = _ref2[0], this.chunkColumn = _ref2[1];
        i += consumed;
      }
      this.closeIndentation();
      if (tag = this.ends.pop()) {
        this.error("missing " + tag);
      }
      if (opts.rewrite === false) {
        return this.tokens;
      }
      return (new Rewriter).rewrite(this.tokens);
    };

    Lexer.prototype.clean = function(code) {
      if (code.charCodeAt(0) === BOM) {
        code = code.slice(1);
      }
      code = code.replace(/\r/g, '').replace(TRAILING_SPACES, '');
      if (WHITESPACE.test(code)) {
        code = "\n" + code;
        this.chunkLine--;
      }
      if (this.literate) {
        code = invertLiterate(code);
      }
      return code;
    };

    Lexer.prototype.identifierToken = function() {
      var colon, colonOffset, forcedIdentifier, id, idLength, input, match, poppedToken, prev, tag, tagToken, _ref2, _ref3, _ref4;
      if (!(match = IDENTIFIER.exec(this.chunk))) {
        return 0;
      }
      input = match[0], id = match[1], colon = match[2];
      idLength = id.length;
      poppedToken = void 0;
      if (id === 'own' && this.tag() === 'FOR') {
        this.token('OWN', id);
        return id.length;
      }
      if (id === 'from' && this.tag() === 'YIELD') {
        this.token('FROM', id);
        return id.length;
      }
      forcedIdentifier = colon || (prev = last(this.tokens)) && (((_ref2 = prev[0]) === '.' || _ref2 === '?.' || _ref2 === '::' || _ref2 === '?::') || !prev.spaced && prev[0] === '@') && id !== 'defer';
      tag = 'IDENTIFIER';
      if (!forcedIdentifier && (__indexOf.call(JS_KEYWORDS, id) >= 0 || __indexOf.call(COFFEE_KEYWORDS, id) >= 0)) {
        tag = id.toUpperCase();
        if (tag === 'WHEN' && (_ref3 = this.tag(), __indexOf.call(LINE_BREAK, _ref3) >= 0)) {
          tag = 'LEADING_WHEN';
        } else if (tag === 'FOR') {
          this.seenFor = true;
        } else if (tag === 'UNLESS') {
          tag = 'IF';
        } else if (__indexOf.call(UNARY, tag) >= 0) {
          tag = 'UNARY';
        } else if (__indexOf.call(RELATION, tag) >= 0) {
          if (tag !== 'INSTANCEOF' && this.seenFor) {
            tag = 'FOR' + tag;
            this.seenFor = false;
          } else {
            tag = 'RELATION';
            if (this.value() === '!') {
              poppedToken = this.tokens.pop();
              id = '!' + id;
            }
          }
        }
      }
      if (__indexOf.call(JS_FORBIDDEN, id) >= 0) {
        if (forcedIdentifier) {
          tag = 'IDENTIFIER';
          id = new String(id);
          id.reserved = true;
        } else if (__indexOf.call(RESERVED, id) >= 0) {
          this.error("reserved word \"" + id + "\"");
        }
      }
      if (!forcedIdentifier) {
        if (__indexOf.call(COFFEE_ALIASES, id) >= 0) {
          id = COFFEE_ALIAS_MAP[id];
        }
        tag = (function() {
          switch (id) {
            case '!':
              return 'UNARY';
            case '==':
            case '!=':
              return 'COMPARE';
            case '&&':
            case '||':
              return 'LOGIC';
            case 'true':
            case 'false':
              return 'BOOL';
            case 'break':
            case 'continue':
              return 'STATEMENT';
            default:
              return tag;
          }
        })();
      }
      tagToken = this.token(tag, id, 0, idLength);
      if (poppedToken) {
        _ref4 = [poppedToken[2].first_line, poppedToken[2].first_column], tagToken[2].first_line = _ref4[0], tagToken[2].first_column = _ref4[1];
      }
      if (colon) {
        colonOffset = input.lastIndexOf(':');
        this.token(':', ':', colonOffset, colon.length);
      }
      return input.length;
    };

    Lexer.prototype.numberToken = function() {
      var binaryLiteral, lexedLength, match, number, octalLiteral;
      if (!(match = NUMBER.exec(this.chunk))) {
        return 0;
      }
      number = match[0];
      if (/^0[BOX]/.test(number)) {
        this.error("radix prefix '" + number + "' must be lowercase");
      } else if (/E/.test(number) && !/^0x/.test(number)) {
        this.error("exponential notation '" + number + "' must be indicated with a lowercase 'e'");
      } else if (/^0\d*[89]/.test(number)) {
        this.error("decimal literal '" + number + "' must not be prefixed with '0'");
      } else if (/^0\d+/.test(number)) {
        this.error("octal literal '" + number + "' must be prefixed with '0o'");
      }
      lexedLength = number.length;
      if (octalLiteral = /^0o([0-7]+)/.exec(number)) {
        number = '0x' + parseInt(octalLiteral[1], 8).toString(16);
      }
      if (binaryLiteral = /^0b([01]+)/.exec(number)) {
        number = '0x' + parseInt(binaryLiteral[1], 2).toString(16);
      }
      this.token('NUMBER', number, 0, lexedLength);
      return lexedLength;
    };

    Lexer.prototype.stringToken = function() {
      var inner, innerLen, numBreak, octalEsc, pos, quote, string, trimmed;
      switch (quote = this.chunk.charAt(0)) {
        case "'":
          string = (SIMPLESTR.exec(this.chunk) || [])[0];
          break;
        case '"':
          string = this.balancedString(this.chunk, '"');
      }
      if (!string) {
        return 0;
      }
      inner = string.slice(1, -1);
      trimmed = this.removeNewlines(inner);
      if (quote === '"' && 0 < string.indexOf('#{', 1)) {
        numBreak = pos = 0;
        innerLen = inner.length;
        while (inner.charAt(pos++) === '\n' && pos < innerLen) {
          numBreak++;
        }
        this.interpolateString(trimmed, {
          strOffset: 1 + numBreak,
          lexedLength: string.length
        });
      } else {
        this.token('STRING', quote + this.escapeLines(trimmed) + quote, 0, string.length);
      }
      if (octalEsc = /^(?:\\.|[^\\])*\\(?:0[0-7]|[1-7])/.test(string)) {
        this.error("octal escape sequences " + string + " are not allowed");
      }
      return string.length;
    };

    Lexer.prototype.heredocToken = function() {
      var doc, heredoc, match, quote, strOffset;
      if (!(match = HEREDOC.exec(this.chunk))) {
        return 0;
      }
      heredoc = match[0];
      quote = heredoc.charAt(0);
      doc = this.sanitizeHeredoc(match[2], {
        quote: quote,
        indent: null
      });
      if (quote === '"' && 0 <= doc.indexOf('#{')) {
        strOffset = match[2].charAt(0) === '\n' ? 4 : 3;
        this.interpolateString(doc, {
          heredoc: true,
          strOffset: strOffset,
          lexedLength: heredoc.length
        });
      } else {
        this.token('STRING', this.makeString(doc, quote, true), 0, heredoc.length);
      }
      return heredoc.length;
    };

    Lexer.prototype.commentToken = function() {
      var comment, here, match;
      if (!(match = this.chunk.match(COMMENT))) {
        return 0;
      }
      comment = match[0], here = match[1];
      if (here) {
        this.token('HERECOMMENT', this.sanitizeHeredoc(here, {
          herecomment: true,
          indent: repeat(' ', this.indent)
        }), 0, comment.length);
      }
      return comment.length;
    };

    Lexer.prototype.jsToken = function() {
      var match, script;
      if (!(this.chunk.charAt(0) === '`' && (match = JSTOKEN.exec(this.chunk)))) {
        return 0;
      }
      this.token('JS', (script = match[0]).slice(1, -1), 0, script.length);
      return script.length;
    };

    Lexer.prototype.regexToken = function() {
      var flags, length, match, prev, regex, _ref2, _ref3;
      if (this.chunk.charAt(0) !== '/') {
        return 0;
      }
      if (length = this.heregexToken()) {
        return length;
      }
      prev = last(this.tokens);
      if (prev && (_ref2 = prev[0], __indexOf.call((prev.spaced ? NOT_REGEX : NOT_SPACED_REGEX), _ref2) >= 0)) {
        return 0;
      }
      if (!(match = REGEX.exec(this.chunk))) {
        return 0;
      }
      _ref3 = match, match = _ref3[0], regex = _ref3[1], flags = _ref3[2];
      if (regex === '//') {
        return 0;
      }
      if (regex.slice(0, 2) === '/*') {
        this.error('regular expressions cannot begin with `*`');
      }
      this.token('REGEX', "" + regex + flags, 0, match.length);
      return match.length;
    };

    Lexer.prototype.heregexToken = function() {
      var body, flags, flagsOffset, heregex, match, plusToken, prev, re, tag, token, tokens, value, _i, _len, _ref2, _ref3, _ref4;
      if (!(match = HEREGEX.exec(this.chunk))) {
        return 0;
      }
      heregex = match[0], body = match[1], flags = match[2];
      if (0 > body.indexOf('#{')) {
        re = this.escapeLines(body.replace(HEREGEX_OMIT, '$1$2').replace(/\//g, '\\/'), true);
        if (re.match(/^\*/)) {
          this.error('regular expressions cannot begin with `*`');
        }
        this.token('REGEX', "/" + (re || '(?:)') + "/" + flags, 0, heregex.length);
        return heregex.length;
      }
      this.token('IDENTIFIER', 'RegExp', 0, 0);
      this.token('CALL_START', '(', 0, 0);
      tokens = [];
      _ref2 = this.interpolateString(body, {
        regex: true,
        strOffset: 3
      });
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        token = _ref2[_i];
        tag = token[0], value = token[1];
        if (tag === 'TOKENS') {
          tokens.push.apply(tokens, value);
        } else if (tag === 'NEOSTRING') {
          if (!(value = value.replace(HEREGEX_OMIT, '$1$2'))) {
            continue;
          }
          value = value.replace(/\\/g, '\\\\');
          token[0] = 'STRING';
          token[1] = this.makeString(value, '"', true);
          tokens.push(token);
        } else {
          this.error("Unexpected " + tag);
        }
        prev = last(this.tokens);
        plusToken = ['+', '+'];
        plusToken[2] = prev[2];
        tokens.push(plusToken);
      }
      tokens.pop();
      if (((_ref3 = tokens[0]) != null ? _ref3[0] : void 0) !== 'STRING') {
        this.token('STRING', '""', 0, 0);
        this.token('+', '+', 0, 0);
      }
      (_ref4 = this.tokens).push.apply(_ref4, tokens);
      if (flags) {
        flagsOffset = heregex.lastIndexOf(flags);
        this.token(',', ',', flagsOffset, 0);
        this.token('STRING', '"' + flags + '"', flagsOffset, flags.length);
      }
      this.token(')', ')', heregex.length - 1, 0);
      return heregex.length;
    };

    Lexer.prototype.lineToken = function() {
      var diff, indent, match, noNewlines, size;
      if (!(match = MULTI_DENT.exec(this.chunk))) {
        return 0;
      }
      indent = match[0];
      this.seenFor = false;
      size = indent.length - 1 - indent.lastIndexOf('\n');
      noNewlines = this.unfinished();
      if (size - this.indebt === this.indent) {
        if (noNewlines) {
          this.suppressNewlines();
        } else {
          this.newlineToken(0);
        }
        return indent.length;
      }
      if (size > this.indent) {
        if (noNewlines) {
          this.indebt = size - this.indent;
          this.suppressNewlines();
          return indent.length;
        }
        if (!this.tokens.length) {
          this.baseIndent = this.indent = size;
          return indent.length;
        }
        diff = size - this.indent + this.outdebt;
        this.token('INDENT', diff, indent.length - size, size);
        this.indents.push(diff);
        this.ends.push('OUTDENT');
        this.outdebt = this.indebt = 0;
        this.indent = size;
      } else if (size < this.baseIndent) {
        this.error('missing indentation', indent.length);
      } else {
        this.indebt = 0;
        this.outdentToken(this.indent - size, noNewlines, indent.length);
      }
      return indent.length;
    };

    Lexer.prototype.outdentToken = function(moveOut, noNewlines, outdentLength) {
      var decreasedIndent, dent, lastIndent, _ref2;
      decreasedIndent = this.indent - moveOut;
      while (moveOut > 0) {
        lastIndent = this.indents[this.indents.length - 1];
        if (!lastIndent) {
          moveOut = 0;
        } else if (lastIndent === this.outdebt) {
          moveOut -= this.outdebt;
          this.outdebt = 0;
        } else if (lastIndent < this.outdebt) {
          this.outdebt -= lastIndent;
          moveOut -= lastIndent;
        } else {
          dent = this.indents.pop() + this.outdebt;
          if (outdentLength && (_ref2 = this.chunk[outdentLength], __indexOf.call(INDENTABLE_CLOSERS, _ref2) >= 0)) {
            decreasedIndent -= dent - moveOut;
            moveOut = dent;
          }
          this.outdebt = 0;
          this.pair('OUTDENT');
          this.token('OUTDENT', moveOut, 0, outdentLength);
          moveOut -= dent;
        }
      }
      if (dent) {
        this.outdebt -= moveOut;
      }
      while (this.value() === ';') {
        this.tokens.pop();
      }
      if (!(this.tag() === 'TERMINATOR' || noNewlines)) {
        this.token('TERMINATOR', '\n', outdentLength, 0);
      }
      this.indent = decreasedIndent;
      return this;
    };

    Lexer.prototype.whitespaceToken = function() {
      var match, nline, prev;
      if (!((match = WHITESPACE.exec(this.chunk)) || (nline = this.chunk.charAt(0) === '\n'))) {
        return 0;
      }
      prev = last(this.tokens);
      if (prev) {
        prev[match ? 'spaced' : 'newLine'] = true;
      }
      if (match) {
        return match[0].length;
      } else {
        return 0;
      }
    };

    Lexer.prototype.newlineToken = function(offset) {
      while (this.value() === ';') {
        this.tokens.pop();
      }
      if (this.tag() !== 'TERMINATOR') {
        this.token('TERMINATOR', '\n', offset, 0);
      }
      return this;
    };

    Lexer.prototype.suppressNewlines = function() {
      if (this.value() === '\\') {
        this.tokens.pop();
      }
      return this;
    };

    Lexer.prototype.literalToken = function() {
      var match, prev, tag, value, _ref2, _ref3, _ref4, _ref5;
      if (match = OPERATOR.exec(this.chunk)) {
        value = match[0];
        if (CODE.test(value)) {
          this.tagParameters();
        }
      } else {
        value = this.chunk.charAt(0);
      }
      tag = value;
      prev = last(this.tokens);
      if (value === '=' && prev) {
        if (!prev[1].reserved && (_ref2 = prev[1], __indexOf.call(JS_FORBIDDEN, _ref2) >= 0)) {
          this.error("reserved word \"" + (this.value()) + "\" can't be assigned");
        }
        if ((_ref3 = prev[1]) === '||' || _ref3 === '&&') {
          prev[0] = 'COMPOUND_ASSIGN';
          prev[1] += '=';
          return value.length;
        }
      }
      if (value === ';') {
        this.seenFor = false;
        tag = 'TERMINATOR';
      } else if (__indexOf.call(MATH, value) >= 0) {
        tag = 'MATH';
      } else if (__indexOf.call(COMPARE, value) >= 0) {
        tag = 'COMPARE';
      } else if (__indexOf.call(COMPOUND_ASSIGN, value) >= 0) {
        tag = 'COMPOUND_ASSIGN';
      } else if (__indexOf.call(UNARY, value) >= 0) {
        tag = 'UNARY';
      } else if (__indexOf.call(UNARY_MATH, value) >= 0) {
        tag = 'UNARY_MATH';
      } else if (__indexOf.call(SHIFT, value) >= 0) {
        tag = 'SHIFT';
      } else if (__indexOf.call(LOGIC, value) >= 0 || value === '?' && (prev != null ? prev.spaced : void 0)) {
        tag = 'LOGIC';
      } else if (prev && !prev.spaced) {
        if (value === '(' && (_ref4 = prev[0], __indexOf.call(CALLABLE, _ref4) >= 0)) {
          if (prev[0] === '?') {
            prev[0] = 'FUNC_EXIST';
          }
          tag = 'CALL_START';
        } else if (value === '[' && (_ref5 = prev[0], __indexOf.call(INDEXABLE, _ref5) >= 0)) {
          tag = 'INDEX_START';
          switch (prev[0]) {
            case '?':
              prev[0] = 'INDEX_SOAK';
          }
        }
      }
      switch (value) {
        case '(':
        case '{':
        case '[':
          this.ends.push(INVERSES[value]);
          break;
        case ')':
        case '}':
        case ']':
          this.pair(value);
      }
      this.token(tag, value);
      return value.length;
    };

    Lexer.prototype.sanitizeHeredoc = function(doc, options) {
      var attempt, herecomment, indent, match, _ref2;
      indent = options.indent, herecomment = options.herecomment;
      if (herecomment) {
        if (HEREDOC_ILLEGAL.test(doc)) {
          this.error("block comment cannot contain \"*/\", starting");
        }
        if (doc.indexOf('\n') < 0) {
          return doc;
        }
      } else {
        while (match = HEREDOC_INDENT.exec(doc)) {
          attempt = match[1];
          if (indent === null || (0 < (_ref2 = attempt.length) && _ref2 < indent.length)) {
            indent = attempt;
          }
        }
      }
      if (indent) {
        doc = doc.replace(RegExp("\\n" + indent, "g"), '\n');
      }
      if (!herecomment) {
        doc = doc.replace(/^\n/, '');
      }
      return doc;
    };

    Lexer.prototype.tagParameters = function() {
      var i, stack, tok, tokens;
      if (this.tag() !== ')') {
        return this;
      }
      stack = [];
      tokens = this.tokens;
      i = tokens.length;
      tokens[--i][0] = 'PARAM_END';
      while (tok = tokens[--i]) {
        switch (tok[0]) {
          case ')':
            stack.push(tok);
            break;
          case '(':
          case 'CALL_START':
            if (stack.length) {
              stack.pop();
            } else if (tok[0] === '(') {
              tok[0] = 'PARAM_START';
              return this;
            } else {
              return this;
            }
        }
      }
      return this;
    };

    Lexer.prototype.closeIndentation = function() {
      return this.outdentToken(this.indent);
    };

    Lexer.prototype.balancedString = function(str, end) {
      var continueCount, i, letter, match, prev, stack, _i, _ref2;
      continueCount = 0;
      stack = [end];
      for (i = _i = 1, _ref2 = str.length; 1 <= _ref2 ? _i < _ref2 : _i > _ref2; i = 1 <= _ref2 ? ++_i : --_i) {
        if (continueCount) {
          --continueCount;
          continue;
        }
        switch (letter = str.charAt(i)) {
          case '\\':
            ++continueCount;
            continue;
          case end:
            stack.pop();
            if (!stack.length) {
              return str.slice(0, +i + 1 || 9e9);
            }
            end = stack[stack.length - 1];
            continue;
        }
        if (end === '}' && (letter === '"' || letter === "'")) {
          stack.push(end = letter);
        } else if (end === '}' && letter === '/' && (match = HEREGEX.exec(str.slice(i)) || REGEX.exec(str.slice(i)))) {
          continueCount += match[0].length - 1;
        } else if (end === '}' && letter === '{') {
          stack.push(end = '}');
        } else if (end === '"' && prev === '#' && letter === '{') {
          stack.push(end = '}');
        }
        prev = letter;
      }
      return this.error("missing " + (stack.pop()) + ", starting");
    };

    Lexer.prototype.interpolateString = function(str, options) {
      var column, errorToken, expr, heredoc, i, inner, interpolated, len, letter, lexedLength, line, locationToken, nested, offsetInChunk, pi, plusToken, popped, regex, rparen, strOffset, tag, token, tokens, value, _i, _len, _ref2, _ref3, _ref4;
      if (options == null) {
        options = {};
      }
      heredoc = options.heredoc, regex = options.regex, offsetInChunk = options.offsetInChunk, strOffset = options.strOffset, lexedLength = options.lexedLength;
      offsetInChunk || (offsetInChunk = 0);
      strOffset || (strOffset = 0);
      lexedLength || (lexedLength = str.length);
      tokens = [];
      pi = 0;
      i = -1;
      while (letter = str.charAt(i += 1)) {
        if (letter === '\\') {
          i += 1;
          continue;
        }
        if (!(letter === '#' && str.charAt(i + 1) === '{' && (expr = this.balancedString(str.slice(i + 1), '}')))) {
          continue;
        }
        if (pi < i) {
          tokens.push(this.makeToken('NEOSTRING', str.slice(pi, i), strOffset + pi));
        }
        if (!errorToken) {
          errorToken = this.makeToken('', 'string interpolation', offsetInChunk + i + 1, 2);
        }
        inner = expr.slice(1, -1);
        if (inner.length) {
          _ref2 = this.getLineAndColumnFromChunk(strOffset + i + 2), line = _ref2[0], column = _ref2[1];
          nested = new Lexer().tokenize(inner, {
            line: line,
            column: column,
            rewrite: false
          });
          popped = nested.pop();
          if (((_ref3 = nested[0]) != null ? _ref3[0] : void 0) === 'TERMINATOR') {
            popped = nested.shift();
          }
          if (len = nested.length) {
            if (len > 1) {
              nested.unshift(this.makeToken('(', '(', strOffset + i + 1, 0));
              nested.push(this.makeToken(')', ')', strOffset + i + 1 + inner.length, 0));
            }
            tokens.push(['TOKENS', nested]);
          }
        }
        i += expr.length;
        pi = i + 1;
      }
      if ((i > pi && pi < str.length)) {
        tokens.push(this.makeToken('NEOSTRING', str.slice(pi), strOffset + pi));
      }
      if (regex) {
        return tokens;
      }
      if (!tokens.length) {
        return this.token('STRING', '""', offsetInChunk, lexedLength);
      }
      if (tokens[0][0] !== 'NEOSTRING') {
        tokens.unshift(this.makeToken('NEOSTRING', '', offsetInChunk));
      }
      if (interpolated = tokens.length > 1) {
        this.token('(', '(', offsetInChunk, 0, errorToken);
      }
      for (i = _i = 0, _len = tokens.length; _i < _len; i = ++_i) {
        token = tokens[i];
        tag = token[0], value = token[1];
        if (i) {
          if (i) {
            plusToken = this.token('+', '+');
          }
          locationToken = tag === 'TOKENS' ? value[0] : token;
          plusToken[2] = {
            first_line: locationToken[2].first_line,
            first_column: locationToken[2].first_column,
            last_line: locationToken[2].first_line,
            last_column: locationToken[2].first_column
          };
        }
        if (tag === 'TOKENS') {
          (_ref4 = this.tokens).push.apply(_ref4, value);
        } else if (tag === 'NEOSTRING') {
          token[0] = 'STRING';
          token[1] = this.makeString(value, '"', heredoc);
          this.tokens.push(token);
        } else {
          this.error("Unexpected " + tag);
        }
      }
      if (interpolated) {
        rparen = this.makeToken(')', ')', offsetInChunk + lexedLength, 0);
        rparen.stringEnd = true;
        this.tokens.push(rparen);
      }
      return tokens;
    };

    Lexer.prototype.pair = function(tag) {
      var wanted;
      if (tag !== (wanted = last(this.ends))) {
        if ('OUTDENT' !== wanted) {
          this.error("unmatched " + tag);
        }
        this.outdentToken(last(this.indents), true);
        return this.pair(tag);
      }
      return this.ends.pop();
    };

    Lexer.prototype.getLineAndColumnFromChunk = function(offset) {
      var column, lineCount, lines, string;
      if (offset === 0) {
        return [this.chunkLine, this.chunkColumn];
      }
      if (offset >= this.chunk.length) {
        string = this.chunk;
      } else {
        string = this.chunk.slice(0, +(offset - 1) + 1 || 9e9);
      }
      lineCount = count(string, '\n');
      column = this.chunkColumn;
      if (lineCount > 0) {
        lines = string.split('\n');
        column = last(lines).length;
      } else {
        column += string.length;
      }
      return [this.chunkLine + lineCount, column];
    };

    Lexer.prototype.makeToken = function(tag, value, offsetInChunk, length) {
      var lastCharacter, locationData, token, _ref2, _ref3;
      if (offsetInChunk == null) {
        offsetInChunk = 0;
      }
      if (length == null) {
        length = value.length;
      }
      locationData = {};
      _ref2 = this.getLineAndColumnFromChunk(offsetInChunk), locationData.first_line = _ref2[0], locationData.first_column = _ref2[1];
      lastCharacter = Math.max(0, length - 1);
      _ref3 = this.getLineAndColumnFromChunk(offsetInChunk + lastCharacter), locationData.last_line = _ref3[0], locationData.last_column = _ref3[1];
      token = [tag, value, locationData];
      return token;
    };

    Lexer.prototype.token = function(tag, value, offsetInChunk, length, origin) {
      var token;
      token = this.makeToken(tag, value, offsetInChunk, length);
      if (origin) {
        token.origin = origin;
      }
      this.tokens.push(token);
      return token;
    };

    Lexer.prototype.tag = function(index, tag) {
      var tok;
      return (tok = last(this.tokens, index)) && (tag ? tok[0] = tag : tok[0]);
    };

    Lexer.prototype.value = function(index, val) {
      var tok;
      return (tok = last(this.tokens, index)) && (val ? tok[1] = val : tok[1]);
    };

    Lexer.prototype.unfinished = function() {
      var _ref2;
      return LINE_CONTINUER.test(this.chunk) || ((_ref2 = this.tag()) === '\\' || _ref2 === '.' || _ref2 === '?.' || _ref2 === '?::' || _ref2 === 'UNARY' || _ref2 === 'MATH' || _ref2 === 'UNARY_MATH' || _ref2 === '+' || _ref2 === '-' || _ref2 === 'YIELD' || _ref2 === '**' || _ref2 === 'SHIFT' || _ref2 === 'RELATION' || _ref2 === 'COMPARE' || _ref2 === 'LOGIC' || _ref2 === 'THROW' || _ref2 === 'EXTENDS');
    };

    Lexer.prototype.removeNewlines = function(str) {
      return str.replace(/^\s*\n\s*/, '').replace(/([^\\]|\\\\)\s*\n\s*$/, '$1');
    };

    Lexer.prototype.escapeLines = function(str, heredoc) {
      str = str.replace(/\\[^\S\n]*(\n|\\)\s*/g, function(escaped, character) {
        if (character === '\n') {
          return '';
        } else {
          return escaped;
        }
      });
      if (heredoc) {
        return str.replace(MULTILINER, '\\n');
      } else {
        return str.replace(/\s*\n\s*/g, ' ');
      }
    };

    Lexer.prototype.makeString = function(body, quote, heredoc) {
      if (!body) {
        return quote + quote;
      }
      body = body.replace(RegExp("\\\\(" + quote + "|\\\\)", "g"), function(match, contents) {
        if (contents === quote) {
          return contents;
        } else {
          return match;
        }
      });
      body = body.replace(RegExp("" + quote, "g"), '\\$&');
      return quote + this.escapeLines(body, heredoc) + quote;
    };

    Lexer.prototype.error = function(message, offset) {
      var first_column, first_line, _ref2;
      if (offset == null) {
        offset = 0;
      }
      _ref2 = this.getLineAndColumnFromChunk(offset), first_line = _ref2[0], first_column = _ref2[1];
      return throwSyntaxError(message, {
        first_line: first_line,
        first_column: first_column
      });
    };

    return Lexer;

  })();

  JS_KEYWORDS = ['true', 'false', 'null', 'this', 'new', 'delete', 'typeof', 'in', 'instanceof', 'return', 'throw', 'break', 'continue', 'debugger', 'yield', 'if', 'else', 'switch', 'for', 'while', 'do', 'try', 'catch', 'finally', 'class', 'extends', 'super'];

  COFFEE_KEYWORDS = ['undefined', 'then', 'unless', 'until', 'loop', 'of', 'by', 'when'];

  COFFEE_KEYWORDS = COFFEE_KEYWORDS.concat(['await', 'defer']);

  COFFEE_ALIAS_MAP = {
    and: '&&',
    or: '||',
    is: '==',
    isnt: '!=',
    not: '!',
    yes: 'true',
    no: 'false',
    on: 'true',
    off: 'false'
  };

  COFFEE_ALIASES = (function() {
    var _results;
    _results = [];
    for (key in COFFEE_ALIAS_MAP) {
      _results.push(key);
    }
    return _results;
  })();

  COFFEE_KEYWORDS = COFFEE_KEYWORDS.concat(COFFEE_ALIASES);

  RESERVED = ['case', 'default', 'function', 'var', 'void', 'with', 'const', 'let', 'enum', 'export', 'import', 'native', '__hasProp', '__extends', '__slice', '__bind', '__indexOf', 'implements', 'interface', 'package', 'private', 'protected', 'public', 'static'];

  STRICT_PROSCRIBED = ['arguments', 'eval', 'yield*'];

  JS_FORBIDDEN = JS_KEYWORDS.concat(RESERVED).concat(STRICT_PROSCRIBED);

  exports.RESERVED = RESERVED.concat(JS_KEYWORDS).concat(COFFEE_KEYWORDS).concat(STRICT_PROSCRIBED);

  exports.STRICT_PROSCRIBED = STRICT_PROSCRIBED;

  BOM = 65279;

  IDENTIFIER = /^([$A-Za-z_\x7f-\uffff][$\w\x7f-\uffff]*)([^\n\S]*:(?!:))?/;

  NUMBER = /^0b[01]+|^0o[0-7]+|^0x[\da-f]+|^\d*\.?\d+(?:e[+-]?\d+)?/i;

  HEREDOC = /^("""|''')((?:\\[\s\S]|[^\\])*?)(?:\n[^\n\S]*)?\1/;

  OPERATOR = /^(?:[-=]>|[-+*\/%<>&|^!?=]=|>>>=?|([-+:])\1|([&|<>*\/%])\2=?|\?(\.|::)|\.{2,3})/;

  WHITESPACE = /^[^\n\S]+/;

  COMMENT = /^###([^#][\s\S]*?)(?:###[^\n\S]*|###$)|^(?:\s*#(?!##[^#]).*)+/;

  CODE = /^[-=]>/;

  MULTI_DENT = /^(?:\n[^\n\S]*)+/;

  SIMPLESTR = /^'[^\\']*(?:\\[\s\S][^\\']*)*'/;

  JSTOKEN = /^`[^\\`]*(?:\\.[^\\`]*)*`/;

  REGEX = /^(\/(?![\s=])[^[\/\n\\]*(?:(?:\\[\s\S]|\[[^\]\n\\]*(?:\\[\s\S][^\]\n\\]*)*])[^[\/\n\\]*)*\/)([imgy]{0,4})(?!\w)/;

  HEREGEX = /^\/{3}((?:\\?[\s\S])+?)\/{3}([imgy]{0,4})(?!\w)/;

  HEREGEX_OMIT = /((?:\\\\)+)|\\(\s|\/)|\s+(?:#.*)?/g;

  MULTILINER = /\n/g;

  HEREDOC_INDENT = /\n+([^\n\S]*)/g;

  HEREDOC_ILLEGAL = /\*\//;

  LINE_CONTINUER = /^\s*(?:,|\??\.(?![.\d])|::)/;

  TRAILING_SPACES = /\s+$/;

  COMPOUND_ASSIGN = ['-=', '+=', '/=', '*=', '%=', '||=', '&&=', '?=', '<<=', '>>=', '>>>=', '&=', '^=', '|=', '**=', '//=', '%%='];

  UNARY = ['NEW', 'TYPEOF', 'DELETE', 'DO'];

  UNARY_MATH = ['!', '~'];

  LOGIC = ['&&', '||', '&', '|', '^'];

  SHIFT = ['<<', '>>', '>>>'];

  COMPARE = ['==', '!=', '<', '>', '<=', '>='];

  MATH = ['*', '/', '%', '//', '%%'];

  RELATION = ['IN', 'OF', 'INSTANCEOF'];

  BOOL = ['TRUE', 'FALSE'];

  NOT_REGEX = ['NUMBER', 'REGEX', 'BOOL', 'NULL', 'UNDEFINED', '++', '--'];

  NOT_SPACED_REGEX = NOT_REGEX.concat(')', '}', 'THIS', 'IDENTIFIER', 'STRING', ']');

  CALLABLE = ['IDENTIFIER', 'STRING', 'REGEX', ')', ']', '}', '?', '::', '@', 'THIS', 'SUPER'];

  INDEXABLE = CALLABLE.concat('NUMBER', 'BOOL', 'NULL', 'UNDEFINED');

  LINE_BREAK = ['INDENT', 'OUTDENT', 'TERMINATOR'];

  INDENTABLE_CLOSERS = [')', '}', ']'];

  CALLABLE.push('DEFER');

}).call(this);

},{"./helpers":21,"./rewriter":27}],24:[function(require,module,exports){
(function (__dirname){
// Generated by IcedCoffeeScript 108.0.11
(function() {
  var Access, Arr, Assign, Await, Base, Block, Call, Class, Closure, Code, CodeFragment, Comment, CpsCascade, Defer, Existence, Expansion, Extends, For, HEXNUM, IDENTIFIER, IDENTIFIER_STR, IS_REGEX, IS_STRING, IcedReturnValue, IcedRuntime, IcedTailCall, If, In, Index, InlineRuntime, LEVEL_ACCESS, LEVEL_COND, LEVEL_LIST, LEVEL_OP, LEVEL_PAREN, LEVEL_TOP, Literal, METHOD_DEF, NEGATE, NO, NULL, NUMBER, Obj, Op, Param, Parens, RESERVED, Range, Return, SIMPLENUM, STRICT_PROSCRIBED, Scope, Slice, Slot, Splat, Switch, TAB, THIS, Throw, Try, UTILITIES, Value, While, YES, addLocationDataFn, compact, del, ends, extend, flatten, fragmentsToText, iced, isLiteralArguments, isLiteralThis, last, locationDataToString, merge, multident, parseNum, pathmod, quote_funcname_for_debug, quote_path_for_emission, require_top_dir, some, starts, throwSyntaxError, unfoldSoak, utility, _ref, _ref1,
    __hasProp = {}.hasOwnProperty,
    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; },
    __slice = [].slice;

  Error.stackTraceLimit = Infinity;

  Scope = require('./scope').Scope;

  _ref = require('./lexer'), RESERVED = _ref.RESERVED, STRICT_PROSCRIBED = _ref.STRICT_PROSCRIBED;

  iced = require('iced-runtime');

  pathmod = require('path');

  _ref1 = require('./helpers'), compact = _ref1.compact, flatten = _ref1.flatten, extend = _ref1.extend, merge = _ref1.merge, del = _ref1.del, starts = _ref1.starts, ends = _ref1.ends, last = _ref1.last, some = _ref1.some, addLocationDataFn = _ref1.addLocationDataFn, locationDataToString = _ref1.locationDataToString, throwSyntaxError = _ref1.throwSyntaxError;

  exports.extend = extend;

  exports.addLocationDataFn = addLocationDataFn;

  YES = function() {
    return true;
  };

  NO = function() {
    return false;
  };

  THIS = function() {
    return this;
  };

  NEGATE = function() {
    this.negated = !this.negated;
    return this;
  };

  NULL = function() {
    return new Value(new Literal('null'));
  };

  exports.CodeFragment = CodeFragment = (function() {
    function CodeFragment(parent, code) {
      var _ref2;
      this.code = "" + code;
      this.locationData = parent != null ? parent.locationData : void 0;
      this.type = (parent != null ? (_ref2 = parent.constructor) != null ? _ref2.name : void 0 : void 0) || 'unknown';
    }

    CodeFragment.prototype.toString = function() {
      return "" + this.code + (this.locationData ? ": " + locationDataToString(this.locationData) : '');
    };

    return CodeFragment;

  })();

  fragmentsToText = function(fragments) {
    var fragment;
    return ((function() {
      var _i, _len, _results;
      _results = [];
      for (_i = 0, _len = fragments.length; _i < _len; _i++) {
        fragment = fragments[_i];
        _results.push(fragment.code);
      }
      return _results;
    })()).join('');
  };

  exports.Base = Base = (function() {
    function Base() {
      this.icedContinuationBlock = null;
      this.icedLoopFlag = false;
      this.icedNodeFlag = false;
      this.icedGotCpsSplitFlag = false;
      this.icedCpsPivotFlag = false;
      this.icedHasAutocbFlag = false;
      this.icedFoundArguments = false;
      this.icedParentAwait = null;
      this.icedCallContinuationFlag = false;
    }

    Base.prototype.compile = function(o, lvl) {
      return fragmentsToText(this.compileToFragments(o, lvl));
    };

    Base.prototype.compileToFragments = function(o, lvl) {
      var node;
      o = extend({}, o);
      if (lvl) {
        o.level = lvl;
      }
      node = this.unfoldSoak(o) || this;
      node.tab = o.indent;
      if (node.icedHasContinuation() && !node.icedGotCpsSplitFlag) {
        return node.icedCompileCps(o);
      } else if (o.level === LEVEL_TOP || !node.isStatement(o)) {
        return node.compileNode(o);
      } else {
        return node.compileClosure(o);
      }
    };

    Base.prototype.compileClosure = function(o) {
      var args, argumentsNode, func, jumpNode, meth;
      if (jumpNode = this.jumps()) {
        jumpNode.error('cannot use a pure statement in an expression');
      }
      o.sharedScope = true;
      this.icedClearAutocbFlags();
      func = new Code([], Block.wrap([this]));
      args = [];
      if ((argumentsNode = this.contains(isLiteralArguments)) || this.contains(isLiteralThis)) {
        args = [new Literal('this')];
        if (argumentsNode) {
          meth = 'apply';
          args.push(new Literal('arguments'));
        } else {
          meth = 'call';
        }
        func = new Value(func, [new Access(new Literal(meth))]);
      }
      return (new Call(func, args)).compileNode(o);
    };

    Base.prototype.cache = function(o, level, reused) {
      var ref, sub;
      if (!this.isComplex()) {
        ref = level ? this.compileToFragments(o, level) : this;
        return [ref, ref];
      } else {
        ref = new Literal(reused || o.scope.freeVariable('ref'));
        sub = new Assign(ref, this);
        if (level) {
          return [sub.compileToFragments(o, level), [this.makeCode(ref.value)]];
        } else {
          return [sub, ref];
        }
      }
    };

    Base.prototype.cacheToCodeFragments = function(cacheValues) {
      return [fragmentsToText(cacheValues[0]), fragmentsToText(cacheValues[1])];
    };

    Base.prototype.makeReturn = function(res) {
      var me;
      me = this.unwrapAll();
      if (res) {
        return new Call(new Literal("" + res + ".push"), [me]);
      } else {
        return new Return(me, this.icedHasAutocbFlag);
      }
    };

    Base.prototype.contains = function(pred) {
      var node;
      node = void 0;
      this.traverseChildren(false, function(n) {
        if (pred(n)) {
          node = n;
          return false;
        }
      });
      return node;
    };

    Base.prototype.lastNonComment = function(list) {
      var i;
      i = list.length;
      while (i--) {
        if (!(list[i] instanceof Comment)) {
          return list[i];
        }
      }
      return null;
    };

    Base.prototype.toString = function(idt, name) {
      var extras, tree;
      if (idt == null) {
        idt = '';
      }
      if (name == null) {
        name = this.constructor.name;
      }
      extras = [];
      if (this.icedNodeFlag) {
        extras.push("A");
      }
      if (this.icedLoopFlag) {
        extras.push("L");
      }
      if (this.icedCpsPivotFlag) {
        extras.push("P");
      }
      if (this.icedIsAutocbCode) {
        extras.push("B");
      }
      if (this.icedHasAutocbFlag) {
        extras.push("C");
      }
      if (this.icedParentAwait) {
        extras.push("D");
      }
      if (this.icedFoundArguments) {
        extras.push("G");
      }
      if (extras.length) {
        extras = " (" + extras.join('') + ")";
      }
      tree = '\n' + idt + name;
      tree = '\n' + idt + name;
      if (this.soak) {
        tree += '?';
      }
      tree += extras;
      this.eachChild(function(node) {
        return tree += node.toString(idt + TAB);
      });
      if (this.icedContinuationBlock) {
        idt += TAB;
        tree += '\n' + idt + "Continuation";
        tree += this.icedContinuationBlock.toString(idt + TAB);
      }
      return tree;
    };

    Base.prototype.eachChild = function(func) {
      var attr, child, _i, _j, _len, _len1, _ref2, _ref3;
      if (!this.children) {
        return this;
      }
      _ref2 = this.children;
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        attr = _ref2[_i];
        if (this[attr]) {
          _ref3 = flatten([this[attr]]);
          for (_j = 0, _len1 = _ref3.length; _j < _len1; _j++) {
            child = _ref3[_j];
            if (func(child) === false) {
              return this;
            }
          }
        }
      }
      return this;
    };

    Base.prototype.traverseChildren = function(crossScope, func) {
      return this.eachChild(function(child) {
        var recur;
        recur = func(child);
        if (recur !== false) {
          return child.traverseChildren(crossScope, func);
        }
      });
    };

    Base.prototype.invert = function() {
      return new Op('!', this);
    };

    Base.prototype.unwrapAll = function() {
      var node;
      node = this;
      while (node !== (node = node.unwrap())) {
        continue;
      }
      return node;
    };

    Base.prototype.flattenChildren = function() {
      var attr, child, out, _i, _j, _len, _len1, _ref2, _ref3;
      out = [];
      _ref2 = this.children;
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        attr = _ref2[_i];
        if (this[attr]) {
          _ref3 = flatten([this[attr]]);
          for (_j = 0, _len1 = _ref3.length; _j < _len1; _j++) {
            child = _ref3[_j];
            out.push(child);
          }
        }
      }
      return out;
    };

    Base.prototype.icedCompileCps = function(o) {
      var code;
      this.icedGotCpsSplitFlag = true;
      code = CpsCascade.wrap(this, this.icedContinuationBlock, null, o);
      o.sharedScope = true;
      return code.compileNode(o);
    };

    Base.prototype.icedWalkAst = function(p, o) {
      var child, _i, _len, _ref2;
      this.icedParentAwait = p;
      this.icedHasAutocbFlag = o.foundAutocb;
      _ref2 = this.flattenChildren();
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        child = _ref2[_i];
        if (child.icedWalkAst(p, o)) {
          this.icedNodeFlag = true;
        }
      }
      return this.icedNodeFlag;
    };

    Base.prototype.icedWalkAstLoops = function(flood) {
      var child, _i, _len, _ref2;
      if (this.isLoop() && this.icedNodeFlag) {
        flood = true;
      }
      if (this.isLoop() && !this.icedNodeFlag) {
        flood = false;
      }
      this.icedLoopFlag = flood;
      _ref2 = this.flattenChildren();
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        child = _ref2[_i];
        if (child.icedWalkAstLoops(flood)) {
          this.icedLoopFlag = true;
        }
      }
      return this.icedLoopFlag;
    };

    Base.prototype.icedWalkCpsPivots = function() {
      var child, _i, _len, _ref2;
      if (this.icedNodeFlag || (this.icedLoopFlag && this.icedIsJump())) {
        this.icedCpsPivotFlag = true;
      }
      _ref2 = this.flattenChildren();
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        child = _ref2[_i];
        if (child.icedWalkCpsPivots()) {
          this.icedCpsPivotFlag = true;
        }
      }
      return this.icedCpsPivotFlag;
    };

    Base.prototype.icedClearAutocbFlags = function() {
      this.icedHasAutocbFlag = false;
      return this.traverseChildren(false, function(node) {
        node.icedHasAutocbFlag = false;
        return true;
      });
    };

    Base.prototype.icedCpsRotate = function() {
      var child, _i, _len, _ref2;
      _ref2 = this.flattenChildren();
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        child = _ref2[_i];
        child.icedCpsRotate();
      }
      return this;
    };

    Base.prototype.icedIsCpsPivot = function() {
      return this.icedCpsPivotFlag;
    };

    Base.prototype.icedNestContinuationBlock = function(b) {
      return this.icedContinuationBlock = b;
    };

    Base.prototype.icedHasContinuation = function() {
      return !!this.icedContinuationBlock;
    };

    Base.prototype.icedCallContinuation = function() {
      return this.icedCallContinuationFlag = true;
    };

    Base.prototype.icedWrapContinuation = NO;

    Base.prototype.icedIsJump = NO;

    Base.prototype.icedUnwrap = function(e) {
      if (e.icedHasContinuation() && this.icedHasContinuation()) {
        return this;
      } else {
        if (this.icedHasContinuation()) {
          e.icedContinuationBlock = this.icedContinuationBlock;
        }
        return e;
      }
    };

    Base.prototype.icedStatementAssertion = function() {
      if (this.icedIsCpsPivot()) {
        return this.error("await'ed statements can't act as expressions");
      }
    };

    Base.prototype.children = [];

    Base.prototype.isStatement = NO;

    Base.prototype.jumps = NO;

    Base.prototype.isComplex = YES;

    Base.prototype.isChainable = NO;

    Base.prototype.isAssignable = NO;

    Base.prototype.isLoop = NO;

    Base.prototype.unwrap = THIS;

    Base.prototype.unfoldSoak = NO;

    Base.prototype.assigns = NO;

    Base.prototype.updateLocationDataIfMissing = function(locationData) {
      if (this.locationData) {
        return this;
      }
      this.locationData = locationData;
      return this.eachChild(function(child) {
        return child.updateLocationDataIfMissing(locationData);
      });
    };

    Base.prototype.error = function(message) {
      return throwSyntaxError(message, this.locationData);
    };

    Base.prototype.makeCode = function(code) {
      return new CodeFragment(this, code);
    };

    Base.prototype.wrapInBraces = function(fragments) {
      return [].concat(this.makeCode('('), fragments, this.makeCode(')'));
    };

    Base.prototype.joinFragmentArrays = function(fragmentsList, joinStr) {
      var answer, fragments, i, _i, _len;
      answer = [];
      for (i = _i = 0, _len = fragmentsList.length; _i < _len; i = ++_i) {
        fragments = fragmentsList[i];
        if (i) {
          answer.push(this.makeCode(joinStr));
        }
        answer = answer.concat(fragments);
      }
      return answer;
    };

    return Base;

  })();

  exports.Block = Block = (function(_super) {
    __extends(Block, _super);

    function Block(nodes) {
      Block.__super__.constructor.call(this);
      this.expressions = compact(flatten(nodes || []));
    }

    Block.prototype.children = ['expressions'];

    Block.prototype.push = function(node) {
      this.expressions.push(node);
      return this;
    };

    Block.prototype.pop = function() {
      return this.expressions.pop();
    };

    Block.prototype.unshift = function(node) {
      this.expressions.unshift(node);
      return this;
    };

    Block.prototype.unwrap = function() {
      if (this.expressions.length === 1) {
        return this.icedUnwrap(this.expressions[0]);
      } else {
        return this;
      }
    };

    Block.prototype.isEmpty = function() {
      return !this.expressions.length;
    };

    Block.prototype.isStatement = function(o) {
      var exp, _i, _len, _ref2;
      _ref2 = this.expressions;
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        exp = _ref2[_i];
        if (exp.isStatement(o)) {
          return true;
        }
      }
      return false;
    };

    Block.prototype.jumps = function(o) {
      var exp, jumpNode, _i, _len, _ref2;
      _ref2 = this.expressions;
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        exp = _ref2[_i];
        if (jumpNode = exp.jumps(o)) {
          return jumpNode;
        }
      }
    };

    Block.prototype.makeReturn = function(res) {
      var expr, foundReturn, len;
      len = this.expressions.length;
      foundReturn = false;
      while (len--) {
        expr = this.expressions[len];
        if (!(expr instanceof Comment)) {
          this.expressions[len] = expr.makeReturn(res);
          if (expr instanceof Return && !expr.expression && !expr.icedHasAutocbFlag) {
            this.expressions.splice(len, 1);
            foundReturn = true;
          } else if (!(expr instanceof If) || expr.elseBody) {
            foundReturn = true;
          }
          break;
        }
      }
      if (this.icedHasAutocbFlag && !this.icedNodeFlag && !foundReturn) {
        this.expressions.push(new Return(null, true));
      }
      return this;
    };

    Block.prototype.compileToFragments = function(o, level) {
      if (o == null) {
        o = {};
      }
      if (o.scope) {
        return Block.__super__.compileToFragments.call(this, o, level);
      } else {
        return this.compileRoot(o);
      }
    };

    Block.prototype.compileNode = function(o) {
      var answer, compiledNodes, fragments, index, node, top, _i, _len, _ref2;
      this.tab = o.indent;
      top = o.level === LEVEL_TOP;
      compiledNodes = [];
      _ref2 = this.expressions;
      for (index = _i = 0, _len = _ref2.length; _i < _len; index = ++_i) {
        node = _ref2[index];
        node = node.unwrapAll();
        node = node.unfoldSoak(o) || node;
        if (node instanceof Block) {
          compiledNodes.push(node.compileNode(o));
        } else if (top) {
          node.front = true;
          fragments = node.compileToFragments(o);
          if (!node.isStatement(o)) {
            fragments.unshift(this.makeCode("" + this.tab));
            fragments.push(this.makeCode(";"));
          }
          compiledNodes.push(fragments);
        } else {
          compiledNodes.push(node.compileToFragments(o, LEVEL_LIST));
        }
      }
      if (top) {
        if (this.spaced) {
          return [].concat(this.joinFragmentArrays(compiledNodes, '\n\n'), this.makeCode("\n"));
        } else {
          return this.joinFragmentArrays(compiledNodes, '\n');
        }
      }
      if (compiledNodes.length) {
        answer = this.joinFragmentArrays(compiledNodes, ', ');
      } else {
        answer = [this.makeCode("void 0")];
      }
      if (compiledNodes.length > 1 && o.level >= LEVEL_LIST) {
        return this.wrapInBraces(answer);
      } else {
        return answer;
      }
    };

    Block.prototype.compileRoot = function(o) {
      var exp, fragments, i, name, prelude, preludeExps, rest, _i, _len, _ref2;
      o.indent = o.bare ? '' : TAB;
      o.level = LEVEL_TOP;
      this.spaced = true;
      o.scope = new Scope(null, this, null);
      _ref2 = o.locals || [];
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        name = _ref2[_i];
        o.scope.parameter(name);
      }
      prelude = [];
      if (!o.bare) {
        preludeExps = (function() {
          var _j, _len1, _ref3, _results;
          _ref3 = this.expressions;
          _results = [];
          for (i = _j = 0, _len1 = _ref3.length; _j < _len1; i = ++_j) {
            exp = _ref3[i];
            if (!(exp.unwrap() instanceof Comment)) {
              break;
            }
            _results.push(exp);
          }
          return _results;
        }).call(this);
        rest = this.expressions.slice(preludeExps.length);
        this.expressions = preludeExps;
        if (preludeExps.length) {
          prelude = this.compileNode(merge(o, {
            indent: ''
          }));
          prelude.push(this.makeCode("\n"));
        }
        this.expressions = rest;
      }
      fragments = this.compileWithDeclarations(o);
      if (o.bare) {
        return fragments;
      }
      return [].concat(prelude, this.makeCode("(function() {\n"), fragments, this.makeCode("\n}).call(this);\n"));
    };

    Block.prototype.compileWithDeclarations = function(o) {
      var assigns, declars, exp, fragments, i, post, rest, scope, spaced, _i, _len, _ref2, _ref3, _ref4;
      fragments = [];
      post = [];
      _ref2 = this.expressions;
      for (i = _i = 0, _len = _ref2.length; _i < _len; i = ++_i) {
        exp = _ref2[i];
        exp = exp.unwrap();
        if (!(exp instanceof Comment || exp instanceof Literal)) {
          break;
        }
      }
      o = merge(o, {
        level: LEVEL_TOP
      });
      if (i) {
        rest = this.expressions.splice(i, 9e9);
        _ref3 = [this.spaced, false], spaced = _ref3[0], this.spaced = _ref3[1];
        _ref4 = [this.compileNode(o), spaced], fragments = _ref4[0], this.spaced = _ref4[1];
        this.expressions = rest;
      }
      post = this.compileNode(o);
      scope = o.scope;
      if (scope.expressions === this) {
        declars = o.scope.hasDeclarations();
        assigns = scope.hasAssignments;
        if (declars || assigns) {
          if (i) {
            fragments.push(this.makeCode('\n'));
          }
          fragments.push(this.makeCode("" + this.tab + "var "));
          if (declars) {
            fragments.push(this.makeCode(scope.declaredVariables().join(', ')));
          }
          if (assigns) {
            if (declars) {
              fragments.push(this.makeCode(",\n" + (this.tab + TAB)));
            }
            fragments.push(this.makeCode(scope.assignedVariables().join(",\n" + (this.tab + TAB))));
          }
          fragments.push(this.makeCode(";\n" + (this.spaced ? '\n' : '')));
        } else if (fragments.length && post.length) {
          fragments.push(this.makeCode("\n"));
        }
      }
      return fragments.concat(post);
    };

    Block.wrap = function(nodes) {
      if (nodes.length === 1 && nodes[0] instanceof Block) {
        return nodes[0];
      }
      return new Block(nodes);
    };

    Block.prototype.icedThreadReturn = function(call) {
      var expr, len;
      call = call || new IcedTailCall;
      len = this.expressions.length;
      while (len--) {
        expr = this.expressions[len];
        if (expr.isStatement()) {
          break;
        }
        if (!(expr instanceof Comment) && !(expr instanceof Return)) {
          call.assignValue(expr);
          this.expressions[len] = call;
          return;
        }
      }
      return this.expressions.push(call);
    };

    Block.prototype.icedCompileCps = function(o) {
      this.icedGotCpsSplitFlag = true;
      if (this.expressions.length > 1) {
        return Block.__super__.icedCompileCps.call(this, o);
      } else {
        return this.compileNode(o);
      }
    };

    Block.prototype.icedCpsRotate = function() {
      var child, e, i, pivot, rest, _i, _j, _len, _len1, _ref2;
      pivot = null;
      _ref2 = this.expressions;
      for (i = _i = 0, _len = _ref2.length; _i < _len; i = ++_i) {
        e = _ref2[i];
        if (e.icedIsCpsPivot()) {
          pivot = e;
          pivot.icedCallContinuation();
        }
        e.icedCpsRotate();
        if (pivot) {
          break;
        }
      }
      if (!pivot) {
        return this;
      }
      if (pivot.icedContinuationBlock) {
        throw SyntaxError("unexpected continuation block in node");
      }
      rest = this.expressions.slice(i + 1);
      this.expressions = this.expressions.slice(0, i + 1);
      if (rest.length) {
        child = new Block(rest);
        pivot.icedNestContinuationBlock(child);
        for (_j = 0, _len1 = rest.length; _j < _len1; _j++) {
          e = rest[_j];
          if (e.icedNodeFlag) {
            child.icedNodeFlag = true;
          }
          if (e.icedLoopFlag) {
            child.icedLoopFlag = true;
          }
          if (e.icedCpsPivotFlag) {
            child.icedCpsPivotFlag = true;
          }
          if (e.icedHasAutocbFlag) {
            child.icedHasAutocbFlag = true;
          }
        }
        child.icedCpsRotate();
      }
      return this;
    };

    Block.prototype.icedAddRuntime = function(foundDefer, foundAwait) {
      var index, node;
      index = 0;
      while ((node = this.expressions[index]) && node instanceof Comment || node instanceof Value && node.isString()) {
        index++;
      }
      return this.expressions.splice(index, 0, new IcedRuntime(foundDefer, foundAwait));
    };

    Block.prototype.icedTransform = function(opts) {
      var obj;
      obj = {};
      this.icedWalkAst(null, obj);
      if (!(opts != null ? opts.repl : void 0) && (obj.foundDefer || obj.foundAwait || opts.runforce)) {
        this.icedAddRuntime(obj.foundDefer, obj.foundAwait);
      }
      if (obj.foundAwait) {
        this.icedWalkAstLoops(false);
        this.icedWalkCpsPivots();
        this.icedCpsRotate();
      }
      return this;
    };

    Block.prototype.icedGetSingle = function() {
      if (this.expressions.length === 1) {
        return this.expressions[0];
      } else {
        return null;
      }
    };

    return Block;

  })(Base);

  exports.Literal = Literal = (function(_super) {
    __extends(Literal, _super);

    function Literal(value) {
      this.value = value;
      if (this.value == null) {
        throw new Error("whoops!");
      }
      Literal.__super__.constructor.call(this);
    }

    Literal.prototype.makeReturn = function() {
      if (this.isStatement()) {
        return this;
      } else {
        return Literal.__super__.makeReturn.apply(this, arguments);
      }
    };

    Literal.prototype.isAssignable = function() {
      return IDENTIFIER.test(this.value);
    };

    Literal.prototype.isStatement = function() {
      var _ref2;
      return (_ref2 = this.value) === 'break' || _ref2 === 'continue' || _ref2 === 'debugger';
    };

    Literal.prototype.isComplex = NO;

    Literal.prototype.assigns = function(name) {
      return name === this.value;
    };

    Literal.prototype.jumps = function(o) {
      if (this.value === 'break' && !((o != null ? o.loop : void 0) || (o != null ? o.block : void 0))) {
        return this;
      }
      if (this.value === 'continue' && !(o != null ? o.loop : void 0)) {
        return this;
      }
    };

    Literal.prototype.compileNode = function(o) {
      var answer, code, _ref2;
      if (this.icedLoopFlag && this.icedIsJump()) {
        return this.icedCompileIced(o);
      }
      code = this.value === 'this' ? ((_ref2 = o.scope.method) != null ? _ref2.bound : void 0) ? o.scope.method.context : this.value : this.value.reserved ? "\"" + this.value + "\"" : this.value;
      answer = this.isStatement() ? "" + this.tab + code + ";" : code;
      return [this.makeCode(answer)];
    };

    Literal.prototype.toString = function() {
      return ' "' + this.value + '"';
    };

    Literal.prototype.icedWalkAst = function(parent, o) {
      if (this.value === 'arguments' && o.foundAwaitFunc) {
        o.foundArguments = true;
        this.value = "_arguments";
      }
      return false;
    };

    Literal.prototype.icedIsJump = function() {
      var _ref2;
      return (_ref2 = this.value) === 'break' || _ref2 === 'continue';
    };

    Literal.prototype.icedCompileIced = function(o) {
      var call, d, func, l;
      d = {
        'continue': iced["const"].c_while,
        'break': iced["const"].b_while
      };
      l = d[this.value];
      func = new Value(new Literal(l));
      call = new Call(func, []);
      return call.compileNode(o);
    };

    return Literal;

  })(Base);

  exports.Undefined = (function(_super) {
    __extends(Undefined, _super);

    function Undefined() {
      return Undefined.__super__.constructor.apply(this, arguments);
    }

    Undefined.prototype.isAssignable = NO;

    Undefined.prototype.isComplex = NO;

    Undefined.prototype.compileNode = function(o) {
      return [this.makeCode(o.level >= LEVEL_ACCESS ? '(void 0)' : 'void 0')];
    };

    return Undefined;

  })(Base);

  exports.Null = (function(_super) {
    __extends(Null, _super);

    function Null() {
      return Null.__super__.constructor.apply(this, arguments);
    }

    Null.prototype.isAssignable = NO;

    Null.prototype.isComplex = NO;

    Null.prototype.compileNode = function() {
      return [this.makeCode("null")];
    };

    return Null;

  })(Base);

  exports.Bool = (function(_super) {
    __extends(Bool, _super);

    Bool.prototype.isAssignable = NO;

    Bool.prototype.isComplex = NO;

    Bool.prototype.compileNode = function() {
      return [this.makeCode(this.val)];
    };

    function Bool(val) {
      this.val = val;
    }

    return Bool;

  })(Base);

  exports.Return = Return = (function(_super) {
    __extends(Return, _super);

    function Return(expression, auto) {
      this.expression = expression;
      Return.__super__.constructor.call(this);
      this.icedHasAutocbFlag = auto;
    }

    Return.prototype.children = ['expression'];

    Return.prototype.isStatement = YES;

    Return.prototype.makeReturn = THIS;

    Return.prototype.jumps = THIS;

    Return.prototype.compileToFragments = function(o, level) {
      var expr, _ref2;
      expr = (_ref2 = this.expression) != null ? _ref2.makeReturn() : void 0;
      if (expr && !(expr instanceof Return)) {
        return expr.compileToFragments(o, level);
      } else {
        return Return.__super__.compileToFragments.call(this, o, level);
      }
    };

    Return.prototype.compileNode = function(o) {
      var answer;
      if (this.icedHasAutocbFlag) {
        return this.icedCompileIced(o);
      }
      answer = [];
      answer.push(this.makeCode(this.tab + ("return" + (this.expression ? " " : ""))));
      if (this.expression) {
        answer = answer.concat(this.expression.compileToFragments(o, LEVEL_PAREN));
      }
      answer.push(this.makeCode(";"));
      return answer;
    };

    Return.prototype.icedCompileIced = function(o) {
      var args, block, call, cb, ret;
      cb = new Value(new Literal(iced["const"].autocb));
      args = this.expression ? [this.expression] : [];
      call = new Call(cb, args);
      ret = new Literal("return");
      block = new Block([call, ret]);
      return block.compileNode(o);
    };

    return Return;

  })(Base);

  exports.Value = Value = (function(_super) {
    __extends(Value, _super);

    function Value(base, props, tag) {
      Value.__super__.constructor.call(this);
      if (!props && base instanceof Value) {
        return base;
      }
      this.base = base;
      this.properties = props || [];
      if (tag) {
        this[tag] = true;
      }
      return this;
    }

    Value.prototype.children = ['base', 'properties'];

    Value.prototype.copy = function() {
      return new Value(this.base, this.properties);
    };

    Value.prototype.add = function(props) {
      this.properties = this.properties.concat(props);
      return this;
    };

    Value.prototype.hasProperties = function() {
      return !!this.properties.length;
    };

    Value.prototype.bareLiteral = function(type) {
      return !this.properties.length && this.base instanceof type;
    };

    Value.prototype.isArray = function() {
      return this.bareLiteral(Arr);
    };

    Value.prototype.isRange = function() {
      return this.bareLiteral(Range);
    };

    Value.prototype.isComplex = function() {
      return this.hasProperties() || this.base.isComplex();
    };

    Value.prototype.isAssignable = function() {
      return this.hasProperties() || this.base.isAssignable();
    };

    Value.prototype.isSimpleNumber = function() {
      return this.bareLiteral(Literal) && SIMPLENUM.test(this.base.value);
    };

    Value.prototype.isString = function() {
      return this.bareLiteral(Literal) && IS_STRING.test(this.base.value);
    };

    Value.prototype.isRegex = function() {
      return this.bareLiteral(Literal) && IS_REGEX.test(this.base.value);
    };

    Value.prototype.isAtomic = function() {
      var node, _i, _len, _ref2;
      _ref2 = this.properties.concat(this.base);
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        node = _ref2[_i];
        if (node.soak || node instanceof Call) {
          return false;
        }
      }
      return true;
    };

    Value.prototype.isNotCallable = function() {
      return this.isSimpleNumber() || this.isString() || this.isRegex() || this.isArray() || this.isRange() || this.isSplice() || this.isObject();
    };

    Value.prototype.isStatement = function(o) {
      return !this.properties.length && this.base.isStatement(o);
    };

    Value.prototype.assigns = function(name) {
      return !this.properties.length && this.base.assigns(name);
    };

    Value.prototype.jumps = function(o) {
      return !this.properties.length && this.base.jumps(o);
    };

    Value.prototype.isObject = function(onlyGenerated) {
      if (this.properties.length) {
        return false;
      }
      return (this.base instanceof Obj) && (!onlyGenerated || this.base.generated);
    };

    Value.prototype.isSplice = function() {
      return last(this.properties) instanceof Slice;
    };

    Value.prototype.looksStatic = function(className) {
      var _ref2;
      return this.base.value === className && this.properties.length && ((_ref2 = this.properties[0].name) != null ? _ref2.value : void 0) !== 'prototype';
    };

    Value.prototype.unwrap = function() {
      if (this.properties.length) {
        return this;
      } else {
        return this.base;
      }
    };

    Value.prototype.cacheReference = function(o) {
      var base, bref, name, nref;
      name = last(this.properties);
      if (this.properties.length < 2 && !this.base.isComplex() && !(name != null ? name.isComplex() : void 0)) {
        return [this, this];
      }
      base = new Value(this.base, this.properties.slice(0, -1));
      if (base.isComplex()) {
        bref = new Literal(o.scope.freeVariable('base'));
        base = new Value(new Parens(new Assign(bref, base)));
      }
      if (!name) {
        return [base, bref];
      }
      if (name.isComplex()) {
        nref = new Literal(o.scope.freeVariable('name'));
        name = new Index(new Assign(nref, name.index));
        nref = new Index(nref);
      }
      return [base.add(name), new Value(bref || base.base, [nref || name])];
    };

    Value.prototype.compileNode = function(o) {
      var fragments, prop, props, _i, _len;
      this.base.front = this.front;
      props = this.properties;
      fragments = this.base.compileToFragments(o, (props.length ? LEVEL_ACCESS : null));
      if ((this.base instanceof Parens || props.length) && SIMPLENUM.test(fragmentsToText(fragments))) {
        fragments.push(this.makeCode('.'));
      }
      for (_i = 0, _len = props.length; _i < _len; _i++) {
        prop = props[_i];
        fragments.push.apply(fragments, prop.compileToFragments(o));
      }
      return fragments;
    };

    Value.prototype.unfoldSoak = function(o) {
      return this.unfoldedSoak != null ? this.unfoldedSoak : this.unfoldedSoak = (function(_this) {
        return function() {
          var fst, i, ifn, prop, ref, snd, _i, _len, _ref2, _ref3;
          if (ifn = _this.base.unfoldSoak(o)) {
            (_ref2 = ifn.body.properties).push.apply(_ref2, _this.properties);
            return ifn;
          }
          _ref3 = _this.properties;
          for (i = _i = 0, _len = _ref3.length; _i < _len; i = ++_i) {
            prop = _ref3[i];
            if (!prop.soak) {
              continue;
            }
            prop.soak = false;
            fst = new Value(_this.base, _this.properties.slice(0, i));
            snd = new Value(_this.base, _this.properties.slice(i));
            if (fst.isComplex()) {
              ref = new Literal(o.scope.freeVariable('ref'));
              fst = new Parens(new Assign(ref, fst));
              snd.base = ref;
            }
            return new If(new Existence(fst), snd, {
              soak: true
            });
          }
          return false;
        };
      })(this)();
    };

    Value.prototype.icedToSlot = function(i) {
      var sufffix, suffix;
      if (this.base instanceof Obj) {
        return this.base.icedToSlot(i);
      }
      sufffix = null;
      if (this.properties && this.properties.length) {
        suffix = this.properties.pop();
      }
      return new Slot(i, this, suffix);
    };

    Value.prototype.icedToSlotAccess = function() {
      if (this["this"]) {
        return this.properties[0];
      } else {
        return new Access(this);
      }
    };

    return Value;

  })(Base);

  exports.Comment = Comment = (function(_super) {
    __extends(Comment, _super);

    function Comment(comment) {
      this.comment = comment;
      Comment.__super__.constructor.call(this);
    }

    Comment.prototype.isStatement = YES;

    Comment.prototype.makeReturn = THIS;

    Comment.prototype.compileNode = function(o, level) {
      var code, comment;
      comment = this.comment.replace(/^(\s*)# /gm, "$1 * ");
      code = "/*" + (multident(comment, this.tab)) + (__indexOf.call(comment, '\n') >= 0 ? "\n" + this.tab : '') + " */";
      if ((level || o.level) === LEVEL_TOP) {
        code = o.indent + code;
      }
      return [this.makeCode("\n"), this.makeCode(code)];
    };

    return Comment;

  })(Base);

  exports.Call = Call = (function(_super) {
    __extends(Call, _super);

    function Call(variable, args, soak) {
      this.args = args != null ? args : [];
      this.soak = soak;
      Call.__super__.constructor.call(this);
      this.isNew = false;
      this.isSuper = variable === 'super';
      this.variable = this.isSuper ? null : variable;
      if (variable instanceof Value && variable.isNotCallable()) {
        variable.error("literal is not a function");
      }
    }

    Call.prototype.children = ['variable', 'args'];

    Call.prototype.newInstance = function() {
      var base, _ref2;
      base = ((_ref2 = this.variable) != null ? _ref2.base : void 0) || this.variable;
      if (base instanceof Call && !base.isNew) {
        base.newInstance();
      } else {
        this.isNew = true;
      }
      return this;
    };

    Call.prototype.superReference = function(o) {
      var accesses, method;
      method = o.scope.namedMethod();
      if (method != null ? method.klass : void 0) {
        accesses = [new Access(new Literal('__super__'))];
        if (method["static"]) {
          accesses.push(new Access(new Literal('constructor')));
        }
        accesses.push(new Access(new Literal(method.name)));
        return (new Value(new Literal(method.klass), accesses)).compile(o);
      } else if (method != null ? method.ctor : void 0) {
        return "" + method.name + ".__super__.constructor";
      } else {
        return this.error('cannot call super outside of an instance method.');
      }
    };

    Call.prototype.superThis = function(o) {
      var method;
      if (o.scope.icedgen) {
        return "_this";
      } else {
        method = o.scope.method;
        return (method && !method.klass && method.context) || "this";
      }
    };

    Call.prototype.unfoldSoak = function(o) {
      var call, ifn, left, list, rite, _i, _len, _ref2, _ref3;
      if (this.soak) {
        if (this.variable) {
          if (ifn = unfoldSoak(o, this, 'variable')) {
            return ifn;
          }
          _ref2 = new Value(this.variable).cacheReference(o), left = _ref2[0], rite = _ref2[1];
        } else {
          left = new Literal(this.superReference(o));
          rite = new Value(left);
        }
        rite = new Call(rite, this.args);
        rite.isNew = this.isNew;
        left = new Literal("typeof " + (left.compile(o)) + " === \"function\"");
        return new If(left, new Value(rite), {
          soak: true
        });
      }
      call = this;
      list = [];
      while (true) {
        if (call.variable instanceof Call) {
          list.push(call);
          call = call.variable;
          continue;
        }
        if (!(call.variable instanceof Value)) {
          break;
        }
        list.push(call);
        if (!((call = call.variable.base) instanceof Call)) {
          break;
        }
      }
      _ref3 = list.reverse();
      for (_i = 0, _len = _ref3.length; _i < _len; _i++) {
        call = _ref3[_i];
        if (ifn) {
          if (call.variable instanceof Call) {
            call.variable = ifn;
          } else {
            call.variable.base = ifn;
          }
        }
        ifn = unfoldSoak(o, call, 'variable');
      }
      return ifn;
    };

    Call.prototype.compileNode = function(o) {
      var arg, argIndex, compiledArgs, compiledArray, fragments, preface, _i, _len, _ref2, _ref3;
      if ((_ref2 = this.variable) != null) {
        _ref2.front = this.front;
      }
      compiledArray = Splat.compileSplattedArray(o, this.args, true);
      if (compiledArray.length) {
        return this.compileSplat(o, compiledArray);
      }
      compiledArgs = [];
      _ref3 = this.args;
      for (argIndex = _i = 0, _len = _ref3.length; _i < _len; argIndex = ++_i) {
        arg = _ref3[argIndex];
        arg.icedStatementAssertion();
        if (argIndex) {
          compiledArgs.push(this.makeCode(", "));
        }
        compiledArgs.push.apply(compiledArgs, arg.compileToFragments(o, LEVEL_LIST));
      }
      fragments = [];
      if (this.isSuper) {
        preface = this.superReference(o) + (".call(" + (this.superThis(o)));
        if (compiledArgs.length) {
          preface += ", ";
        }
        fragments.push(this.makeCode(preface));
      } else {
        if (this.isNew) {
          fragments.push(this.makeCode('new '));
        }
        fragments.push.apply(fragments, this.variable.compileToFragments(o, LEVEL_ACCESS));
        fragments.push(this.makeCode("("));
      }
      fragments.push.apply(fragments, compiledArgs);
      fragments.push(this.makeCode(")"));
      return fragments;
    };

    Call.prototype.compileSplat = function(o, splatArgs) {
      var answer, base, fun, idt, name, ref;
      if (this.isSuper) {
        return [].concat(this.makeCode("" + (this.superReference(o)) + ".apply(" + (this.superThis(o)) + ", "), splatArgs, this.makeCode(")"));
      }
      if (this.isNew) {
        idt = this.tab + TAB;
        return [].concat(this.makeCode("(function(func, args, ctor) {\n" + idt + "ctor.prototype = func.prototype;\n" + idt + "var child = new ctor, result = func.apply(child, args);\n" + idt + "return Object(result) === result ? result : child;\n" + this.tab + "})("), this.variable.compileToFragments(o, LEVEL_LIST), this.makeCode(", "), splatArgs, this.makeCode(", function(){})"));
      }
      answer = [];
      base = new Value(this.variable);
      if ((name = base.properties.pop()) && base.isComplex()) {
        ref = o.scope.freeVariable('ref');
        answer = answer.concat(this.makeCode("(" + ref + " = "), base.compileToFragments(o, LEVEL_LIST), this.makeCode(")"), name.compileToFragments(o));
      } else {
        fun = base.compileToFragments(o, LEVEL_ACCESS);
        if (SIMPLENUM.test(fragmentsToText(fun))) {
          fun = this.wrapInBraces(fun);
        }
        if (name) {
          ref = fragmentsToText(fun);
          fun.push.apply(fun, name.compileToFragments(o));
        } else {
          ref = 'null';
        }
        answer = answer.concat(fun);
      }
      return answer = answer.concat(this.makeCode(".apply(" + ref + ", "), splatArgs, this.makeCode(")"));
    };

    return Call;

  })(Base);

  exports.Extends = Extends = (function(_super) {
    __extends(Extends, _super);

    function Extends(child, parent) {
      this.child = child;
      this.parent = parent;
      Extends.__super__.constructor.call(this);
    }

    Extends.prototype.children = ['child', 'parent'];

    Extends.prototype.compileToFragments = function(o) {
      return new Call(new Value(new Literal(utility('extends'))), [this.child, this.parent]).compileToFragments(o);
    };

    return Extends;

  })(Base);

  exports.Access = Access = (function(_super) {
    __extends(Access, _super);

    function Access(name, tag) {
      this.name = name;
      Access.__super__.constructor.call(this);
      this.name.asKey = true;
      this.soak = tag === 'soak';
    }

    Access.prototype.children = ['name'];

    Access.prototype.compileToFragments = function(o) {
      var name;
      name = this.name.compileToFragments(o);
      if ((IDENTIFIER.test(fragmentsToText(name))) || this.name instanceof Defer) {
        name.unshift(this.makeCode("."));
      } else {
        name.unshift(this.makeCode("["));
        name.push(this.makeCode("]"));
      }
      return name;
    };

    Access.prototype.isComplex = NO;

    return Access;

  })(Base);

  exports.Index = Index = (function(_super) {
    __extends(Index, _super);

    function Index(index) {
      this.index = index;
      Index.__super__.constructor.call(this);
    }

    Index.prototype.children = ['index'];

    Index.prototype.compileToFragments = function(o) {
      return [].concat(this.makeCode("["), this.index.compileToFragments(o, LEVEL_PAREN), this.makeCode("]"));
    };

    Index.prototype.isComplex = function() {
      return this.index.isComplex();
    };

    return Index;

  })(Base);

  exports.Range = Range = (function(_super) {
    __extends(Range, _super);

    Range.prototype.children = ['from', 'to'];

    function Range(from, to, tag) {
      this.from = from;
      this.to = to;
      Range.__super__.constructor.call(this);
      this.exclusive = tag === 'exclusive';
      this.equals = this.exclusive ? '' : '=';
    }

    Range.prototype.compileVariables = function(o) {
      var step, _ref2, _ref3, _ref4, _ref5;
      o = merge(o, {
        top: true
      });
      _ref2 = this.cacheToCodeFragments(this.from.cache(o, LEVEL_LIST)), this.fromC = _ref2[0], this.fromVar = _ref2[1];
      _ref3 = this.cacheToCodeFragments(this.to.cache(o, LEVEL_LIST)), this.toC = _ref3[0], this.toVar = _ref3[1];
      if (step = del(o, 'step')) {
        _ref4 = this.cacheToCodeFragments(step.cache(o, LEVEL_LIST)), this.step = _ref4[0], this.stepVar = _ref4[1];
      }
      _ref5 = [this.fromVar.match(NUMBER), this.toVar.match(NUMBER)], this.fromNum = _ref5[0], this.toNum = _ref5[1];
      if (this.stepVar) {
        return this.stepNum = this.stepVar.match(NUMBER);
      }
    };

    Range.prototype.compileNode = function(o) {
      var cond, condPart, from, gt, idx, idxName, known, lt, namedIndex, stepPart, to, varPart, _ref2, _ref3;
      if (!this.fromVar) {
        this.compileVariables(o);
      }
      if (!o.index) {
        return this.compileArray(o);
      }
      known = this.fromNum && this.toNum;
      idx = del(o, 'index');
      idxName = del(o, 'name');
      namedIndex = idxName && idxName !== idx;
      varPart = "" + idx + " = " + this.fromC;
      if (this.toC !== this.toVar) {
        varPart += ", " + this.toC;
      }
      if (this.step !== this.stepVar) {
        varPart += ", " + this.step;
      }
      _ref2 = ["" + idx + " <" + this.equals, "" + idx + " >" + this.equals], lt = _ref2[0], gt = _ref2[1];
      condPart = this.stepNum ? parseNum(this.stepNum[0]) > 0 ? "" + lt + " " + this.toVar : "" + gt + " " + this.toVar : known ? ((_ref3 = [parseNum(this.fromNum[0]), parseNum(this.toNum[0])], from = _ref3[0], to = _ref3[1], _ref3), from <= to ? "" + lt + " " + to : "" + gt + " " + to) : (cond = this.stepVar ? "" + this.stepVar + " > 0" : "" + this.fromVar + " <= " + this.toVar, "" + cond + " ? " + lt + " " + this.toVar + " : " + gt + " " + this.toVar);
      stepPart = this.stepVar ? "" + idx + " += " + this.stepVar : known ? namedIndex ? from <= to ? "++" + idx : "--" + idx : from <= to ? "" + idx + "++" : "" + idx + "--" : namedIndex ? "" + cond + " ? ++" + idx + " : --" + idx : "" + cond + " ? " + idx + "++ : " + idx + "--";
      if (namedIndex) {
        varPart = "" + idxName + " = " + varPart;
      }
      if (namedIndex) {
        stepPart = "" + idxName + " = " + stepPart;
      }
      return [this.makeCode("" + varPart + "; " + condPart + "; " + stepPart)];
    };

    Range.prototype.compileArray = function(o) {
      var args, body, cond, hasArgs, i, idt, post, pre, range, result, vars, _i, _ref2, _ref3, _results;
      if (this.fromNum && this.toNum && Math.abs(this.fromNum - this.toNum) <= 20) {
        range = (function() {
          _results = [];
          for (var _i = _ref2 = +this.fromNum, _ref3 = +this.toNum; _ref2 <= _ref3 ? _i <= _ref3 : _i >= _ref3; _ref2 <= _ref3 ? _i++ : _i--){ _results.push(_i); }
          return _results;
        }).apply(this);
        if (this.exclusive) {
          range.pop();
        }
        return [this.makeCode("[" + (range.join(', ')) + "]")];
      }
      idt = this.tab + TAB;
      i = o.scope.freeVariable('i');
      result = o.scope.freeVariable('results');
      pre = "\n" + idt + result + " = [];";
      if (this.fromNum && this.toNum) {
        o.index = i;
        body = fragmentsToText(this.compileNode(o));
      } else {
        vars = ("" + i + " = " + this.fromC) + (this.toC !== this.toVar ? ", " + this.toC : '');
        cond = "" + this.fromVar + " <= " + this.toVar;
        body = "var " + vars + "; " + cond + " ? " + i + " <" + this.equals + " " + this.toVar + " : " + i + " >" + this.equals + " " + this.toVar + "; " + cond + " ? " + i + "++ : " + i + "--";
      }
      post = "{ " + result + ".push(" + i + "); }\n" + idt + "return " + result + ";\n" + o.indent;
      hasArgs = function(node) {
        return node != null ? node.contains(isLiteralArguments) : void 0;
      };
      if (hasArgs(this.from) || hasArgs(this.to)) {
        args = ', arguments';
      }
      return [this.makeCode("(function() {" + pre + "\n" + idt + "for (" + body + ")" + post + "}).apply(this" + (args != null ? args : '') + ")")];
    };

    return Range;

  })(Base);

  exports.Slice = Slice = (function(_super) {
    __extends(Slice, _super);

    Slice.prototype.children = ['range'];

    function Slice(range) {
      this.range = range;
      Slice.__super__.constructor.call(this);
    }

    Slice.prototype.compileNode = function(o) {
      var compiled, compiledText, from, fromCompiled, to, toStr, _ref2;
      _ref2 = this.range, to = _ref2.to, from = _ref2.from;
      fromCompiled = from && from.compileToFragments(o, LEVEL_PAREN) || [this.makeCode('0')];
      if (to) {
        compiled = to.compileToFragments(o, LEVEL_PAREN);
        compiledText = fragmentsToText(compiled);
        if (!(!this.range.exclusive && +compiledText === -1)) {
          toStr = ', ' + (this.range.exclusive ? compiledText : SIMPLENUM.test(compiledText) ? "" + (+compiledText + 1) : (compiled = to.compileToFragments(o, LEVEL_ACCESS), "+" + (fragmentsToText(compiled)) + " + 1 || 9e9"));
        }
      }
      return [this.makeCode(".slice(" + (fragmentsToText(fromCompiled)) + (toStr || '') + ")")];
    };

    return Slice;

  })(Base);

  exports.Obj = Obj = (function(_super) {
    __extends(Obj, _super);

    function Obj(props, generated) {
      this.generated = generated != null ? generated : false;
      this.objects = this.properties = props || [];
      Obj.__super__.constructor.call(this);
    }

    Obj.prototype.children = ['properties'];

    Obj.prototype.compileNode = function(o) {
      var answer, i, idt, indent, join, lastNoncom, node, prop, props, _i, _j, _len, _len1;
      props = this.properties;
      if (!props.length) {
        return [this.makeCode(this.front ? '({})' : '{}')];
      }
      if (this.generated) {
        for (_i = 0, _len = props.length; _i < _len; _i++) {
          node = props[_i];
          if (node instanceof Value) {
            node.error('cannot have an implicit value in an implicit object');
          }
        }
      }
      idt = o.indent += TAB;
      lastNoncom = this.lastNonComment(this.properties);
      answer = [];
      for (i = _j = 0, _len1 = props.length; _j < _len1; i = ++_j) {
        prop = props[i];
        join = i === props.length - 1 ? '' : prop === lastNoncom || prop instanceof Comment ? '\n' : ',\n';
        indent = prop instanceof Comment ? '' : idt;
        if (prop instanceof Assign && prop.variable instanceof Value && prop.variable.hasProperties()) {
          prop.variable.error('Invalid object key');
        }
        if (prop instanceof Value && prop["this"]) {
          prop = new Assign(prop.properties[0].name, prop, 'object');
        }
        if (!(prop instanceof Comment)) {
          if (!(prop instanceof Assign)) {
            prop = new Assign(prop, prop, 'object');
          }
          (prop.variable.base || prop.variable).asKey = true;
        }
        if (indent) {
          answer.push(this.makeCode(indent));
        }
        answer.push.apply(answer, prop.compileToFragments(o, LEVEL_TOP));
        if (join) {
          answer.push(this.makeCode(join));
        }
      }
      answer.unshift(this.makeCode("{" + (props.length && '\n')));
      answer.push(this.makeCode("" + (props.length && '\n' + this.tab) + "}"));
      if (this.front) {
        return this.wrapInBraces(answer);
      } else {
        return answer;
      }
    };

    Obj.prototype.assigns = function(name) {
      var prop, _i, _len, _ref2;
      _ref2 = this.properties;
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        prop = _ref2[_i];
        if (prop.assigns(name)) {
          return true;
        }
      }
      return false;
    };

    Obj.prototype.icedToSlot = function(i) {
      var access, prop, _i, _len, _ref2, _results;
      _ref2 = this.properties;
      _results = [];
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        prop = _ref2[_i];
        if (prop instanceof Assign) {
          _results.push((prop.value.icedToSlot(i)).addAccess(prop.variable.icedToSlotAccess()));
        } else if (prop instanceof Value) {
          access = prop.icedToSlotAccess();
          _results.push((prop.icedToSlot(i)).addAccess(access));
        } else {
          _results.push(void 0);
        }
      }
      return _results;
    };

    return Obj;

  })(Base);

  exports.Arr = Arr = (function(_super) {
    __extends(Arr, _super);

    function Arr(objs) {
      this.objects = objs || [];
      Arr.__super__.constructor.call(this);
    }

    Arr.prototype.children = ['objects'];

    Arr.prototype.compileNode = function(o) {
      var answer, compiledObjs, fragments, index, obj, _i, _len;
      if (!this.objects.length) {
        return [this.makeCode('[]')];
      }
      o.indent += TAB;
      answer = Splat.compileSplattedArray(o, this.objects);
      if (answer.length) {
        return answer;
      }
      answer = [];
      compiledObjs = (function() {
        var _i, _len, _ref2, _results;
        _ref2 = this.objects;
        _results = [];
        for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
          obj = _ref2[_i];
          _results.push(obj.compileToFragments(o, LEVEL_LIST));
        }
        return _results;
      }).call(this);
      for (index = _i = 0, _len = compiledObjs.length; _i < _len; index = ++_i) {
        fragments = compiledObjs[index];
        if (index) {
          answer.push(this.makeCode(", "));
        }
        answer.push.apply(answer, fragments);
      }
      if (fragmentsToText(answer).indexOf('\n') >= 0) {
        answer.unshift(this.makeCode("[\n" + o.indent));
        answer.push(this.makeCode("\n" + this.tab + "]"));
      } else {
        answer.unshift(this.makeCode("["));
        answer.push(this.makeCode("]"));
      }
      return answer;
    };

    Arr.prototype.assigns = function(name) {
      var obj, _i, _len, _ref2;
      _ref2 = this.objects;
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        obj = _ref2[_i];
        if (obj.assigns(name)) {
          return true;
        }
      }
      return false;
    };

    return Arr;

  })(Base);

  exports.Class = Class = (function(_super) {
    __extends(Class, _super);

    function Class(variable, parent, body) {
      this.variable = variable;
      this.parent = parent;
      this.body = body != null ? body : new Block;
      Class.__super__.constructor.call(this);
      this.boundFuncs = [];
      this.body.classBody = true;
    }

    Class.prototype.children = ['variable', 'parent', 'body'];

    Class.prototype.determineName = function() {
      var decl, tail;
      if (!this.variable) {
        return null;
      }
      decl = (tail = last(this.variable.properties)) ? tail instanceof Access && tail.name.value : this.variable.base.value;
      if (__indexOf.call(STRICT_PROSCRIBED, decl) >= 0) {
        this.variable.error("class variable name may not be " + decl);
      }
      return decl && (decl = IDENTIFIER.test(decl) && decl);
    };

    Class.prototype.setContext = function(name) {
      return this.body.traverseChildren(false, function(node) {
        if (node.classBody) {
          return false;
        }
        if (node instanceof Literal && node.value === 'this') {
          return node.value = name;
        } else if (node instanceof Code) {
          node.klass = name;
          if (node.bound) {
            return node.context = name;
          }
        }
      });
    };

    Class.prototype.addBoundFunctions = function(o) {
      var bvar, lhs, _i, _len, _ref2;
      _ref2 = this.boundFuncs;
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        bvar = _ref2[_i];
        lhs = (new Value(new Literal("this"), [new Access(bvar)])).compile(o);
        this.ctor.body.unshift(new Literal("" + lhs + " = " + (utility('bind')) + "(" + lhs + ", this)"));
      }
    };

    Class.prototype.addProperties = function(node, name, o) {
      var assign, base, exprs, func, props;
      props = node.base.properties.slice(0);
      exprs = (function() {
        var _results;
        _results = [];
        while (assign = props.shift()) {
          if (assign instanceof Assign) {
            base = assign.variable.base;
            delete assign.context;
            func = assign.value;
            if (base.value === 'constructor') {
              if (this.ctor) {
                assign.error('cannot define more than one constructor in a class');
              }
              if (func.bound) {
                assign.error('cannot define a constructor as a bound function');
              }
              if (func instanceof Code) {
                assign = this.ctor = func;
              } else {
                this.externalCtor = o.classScope.freeVariable('class');
                assign = new Assign(new Literal(this.externalCtor), func);
              }
            } else {
              if (assign.variable["this"]) {
                func["static"] = true;
              } else {
                assign.variable = new Value(new Literal(name), [new Access(new Literal('prototype')), new Access(base)]);
                if (func instanceof Code && func.bound) {
                  this.boundFuncs.push(base);
                  func.bound = false;
                }
              }
            }
          }
          _results.push(assign);
        }
        return _results;
      }).call(this);
      return compact(exprs);
    };

    Class.prototype.walkBody = function(name, o) {
      return this.traverseChildren(false, (function(_this) {
        return function(child) {
          var cont, exps, i, node, _i, _len, _ref2;
          cont = true;
          if (child instanceof Class) {
            return false;
          }
          if (child instanceof Block) {
            _ref2 = exps = child.expressions;
            for (i = _i = 0, _len = _ref2.length; _i < _len; i = ++_i) {
              node = _ref2[i];
              if (node instanceof Assign && node.variable.looksStatic(name)) {
                node.value["static"] = true;
              } else if (node instanceof Value && node.isObject(true)) {
                cont = false;
                exps[i] = _this.addProperties(node, name, o);
              }
            }
            child.expressions = exps = flatten(exps);
          }
          return cont && !(child instanceof Class);
        };
      })(this));
    };

    Class.prototype.hoistDirectivePrologue = function() {
      var expressions, index, node;
      index = 0;
      expressions = this.body.expressions;
      while ((node = expressions[index]) && node instanceof Comment || node instanceof Value && node.isString()) {
        ++index;
      }
      return this.directives = expressions.splice(0, index);
    };

    Class.prototype.ensureConstructor = function(name) {
      if (!this.ctor) {
        this.ctor = new Code;
        if (this.externalCtor) {
          this.ctor.body.push(new Literal("" + this.externalCtor + ".apply(this, arguments)"));
        } else if (this.parent) {
          this.ctor.body.push(new Literal("" + name + ".__super__.constructor.apply(this, arguments)"));
        }
        this.ctor.body.makeReturn();
        this.body.expressions.unshift(this.ctor);
      }
      this.ctor.ctor = this.ctor.name = name;
      this.ctor.klass = null;
      return this.ctor.noReturn = true;
    };

    Class.prototype.compileNode = function(o) {
      var args, argumentsNode, func, jumpNode, klass, lname, name, superClass, _ref2;
      if (jumpNode = this.body.jumps()) {
        jumpNode.error('Class bodies cannot contain pure statements');
      }
      if (argumentsNode = this.body.contains(isLiteralArguments)) {
        argumentsNode.error("Class bodies shouldn't reference arguments");
      }
      name = this.determineName() || '_Class';
      if (name.reserved) {
        name = "_" + name;
      }
      lname = new Literal(name);
      func = new Code([], Block.wrap([this.body]));
      args = [];
      o.classScope = func.makeScope(o.scope);
      this.hoistDirectivePrologue();
      this.setContext(name);
      this.walkBody(name, o);
      this.ensureConstructor(name);
      this.addBoundFunctions(o);
      this.body.spaced = true;
      this.body.expressions.push(lname);
      if (this.parent) {
        superClass = new Literal(o.classScope.freeVariable('super', false));
        this.body.expressions.unshift(new Extends(lname, superClass));
        func.params.push(new Param(superClass));
        args.push(this.parent);
      }
      (_ref2 = this.body.expressions).unshift.apply(_ref2, this.directives);
      klass = new Parens(new Call(func, args));
      if (this.variable) {
        klass = new Assign(this.variable, klass);
      }
      return klass.compileToFragments(o);
    };

    return Class;

  })(Base);

  exports.Assign = Assign = (function(_super) {
    __extends(Assign, _super);

    function Assign(variable, value, context, options) {
      var forbidden, name, _ref2;
      this.variable = variable;
      this.value = value;
      this.context = context;
      Assign.__super__.constructor.call(this);
      this.param = options && options.param;
      this.subpattern = options && options.subpattern;
      forbidden = (_ref2 = (name = this.variable.unwrapAll().value), __indexOf.call(STRICT_PROSCRIBED, _ref2) >= 0);
      if (forbidden && this.context !== 'object') {
        this.variable.error("variable name may not be \"" + name + "\"");
      }
      this.icedlocal = options && options.icedlocal;
    }

    Assign.prototype.children = ['variable', 'value'];

    Assign.prototype.isStatement = function(o) {
      return (o != null ? o.level : void 0) === LEVEL_TOP && (this.context != null) && __indexOf.call(this.context, "?") >= 0;
    };

    Assign.prototype.assigns = function(name) {
      return this[this.context === 'object' ? 'value' : 'variable'].assigns(name);
    };

    Assign.prototype.unfoldSoak = function(o) {
      return unfoldSoak(o, this, 'variable');
    };

    Assign.prototype.compileNode = function(o) {
      var answer, compiledName, isValue, match, name, val, varBase, _ref2, _ref3, _ref4, _ref5;
      this.value.icedStatementAssertion();
      if (isValue = this.variable instanceof Value) {
        if (this.variable.isArray() || this.variable.isObject()) {
          return this.compilePatternMatch(o);
        }
        if (this.variable.isSplice()) {
          return this.compileSplice(o);
        }
        if ((_ref2 = this.context) === '||=' || _ref2 === '&&=' || _ref2 === '?=') {
          return this.compileConditional(o);
        }
        if ((_ref3 = this.context) === '**=' || _ref3 === '//=' || _ref3 === '%%=') {
          return this.compileSpecialMath(o);
        }
      }
      compiledName = this.variable.compileToFragments(o, LEVEL_LIST);
      name = fragmentsToText(compiledName);
      if (!this.context) {
        varBase = this.variable.unwrapAll();
        if (!varBase.isAssignable()) {
          this.variable.error("\"" + (this.variable.compile(o)) + "\" cannot be assigned");
        }
        if (!(typeof varBase.hasProperties === "function" ? varBase.hasProperties() : void 0)) {
          if (this.param || this.icedlocal) {
            o.scope.add(name, 'var', this.icedlocal);
          } else {
            o.scope.find(name);
          }
        }
      }
      if (this.value instanceof Code && (match = METHOD_DEF.exec(name))) {
        if (match[2]) {
          this.value.klass = match[1];
        }
        this.value.name = (_ref4 = (_ref5 = match[3]) != null ? _ref5 : match[4]) != null ? _ref4 : match[5];
      }
      val = this.value.compileToFragments(o, LEVEL_LIST);
      if (this.context === 'object') {
        return compiledName.concat(this.makeCode(": "), val);
      }
      answer = compiledName.concat(this.makeCode(" " + (this.context || '=') + " "), val);
      if (o.level <= LEVEL_LIST) {
        return answer;
      } else {
        return this.wrapInBraces(answer);
      }
    };

    Assign.prototype.compilePatternMatch = function(o) {
      var acc, assigns, code, expandedIdx, fragments, i, idx, isObject, ivar, name, obj, objects, olen, ref, rest, top, val, value, vvar, vvarText, _i, _len, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7;
      top = o.level === LEVEL_TOP;
      value = this.value;
      objects = this.variable.base.objects;
      if (!(olen = objects.length)) {
        code = value.compileToFragments(o);
        if (o.level >= LEVEL_OP) {
          return this.wrapInBraces(code);
        } else {
          return code;
        }
      }
      isObject = this.variable.isObject();
      if (top && olen === 1 && !((obj = objects[0]) instanceof Splat)) {
        if (obj instanceof Assign) {
          _ref2 = obj, (_ref3 = _ref2.variable, idx = _ref3.base), obj = _ref2.value;
        } else {
          idx = isObject ? obj["this"] ? obj.properties[0].name : obj : new Literal(0);
        }
        acc = IDENTIFIER.test(idx.unwrap().value || 0);
        value = new Value(value);
        value.properties.push(new (acc ? Access : Index)(idx));
        if (_ref4 = obj.unwrap().value, __indexOf.call(RESERVED, _ref4) >= 0) {
          obj.error("assignment to a reserved word: " + (obj.compile(o)));
        }
        return new Assign(obj, value, null, {
          param: this.param
        }).compileToFragments(o, LEVEL_TOP);
      }
      vvar = value.compileToFragments(o, LEVEL_LIST);
      vvarText = fragmentsToText(vvar);
      assigns = [];
      expandedIdx = false;
      if (!IDENTIFIER.test(vvarText) || this.variable.assigns(vvarText)) {
        assigns.push([this.makeCode("" + (ref = o.scope.freeVariable('ref')) + " = ")].concat(__slice.call(vvar)));
        vvar = [this.makeCode(ref)];
        vvarText = ref;
      }
      for (i = _i = 0, _len = objects.length; _i < _len; i = ++_i) {
        obj = objects[i];
        idx = i;
        if (isObject) {
          if (obj instanceof Assign) {
            _ref5 = obj, (_ref6 = _ref5.variable, idx = _ref6.base), obj = _ref5.value;
          } else {
            if (obj.base instanceof Parens) {
              _ref7 = new Value(obj.unwrapAll()).cacheReference(o), obj = _ref7[0], idx = _ref7[1];
            } else {
              idx = obj["this"] ? obj.properties[0].name : obj;
            }
          }
        }
        if (!expandedIdx && obj instanceof Splat) {
          name = obj.name.unwrap().value;
          obj = obj.unwrap();
          val = "" + olen + " <= " + vvarText + ".length ? " + (utility('slice')) + ".call(" + vvarText + ", " + i;
          if (rest = olen - i - 1) {
            ivar = o.scope.freeVariable('i');
            val += ", " + ivar + " = " + vvarText + ".length - " + rest + ") : (" + ivar + " = " + i + ", [])";
          } else {
            val += ") : []";
          }
          val = new Literal(val);
          expandedIdx = "" + ivar + "++";
        } else if (!expandedIdx && obj instanceof Expansion) {
          if (rest = olen - i - 1) {
            if (rest === 1) {
              expandedIdx = "" + vvarText + ".length - 1";
            } else {
              ivar = o.scope.freeVariable('i');
              val = new Literal("" + ivar + " = " + vvarText + ".length - " + rest);
              expandedIdx = "" + ivar + "++";
              assigns.push(val.compileToFragments(o, LEVEL_LIST));
            }
          }
          continue;
        } else {
          name = obj.unwrap().value;
          if (obj instanceof Splat || obj instanceof Expansion) {
            obj.error("multiple splats/expansions are disallowed in an assignment");
          }
          if (typeof idx === 'number') {
            idx = new Literal(expandedIdx || idx);
            acc = false;
          } else {
            acc = isObject && IDENTIFIER.test(idx.unwrap().value || 0);
          }
          val = new Value(new Literal(vvarText), [new (acc ? Access : Index)(idx)]);
        }
        if ((name != null) && __indexOf.call(RESERVED, name) >= 0) {
          obj.error("assignment to a reserved word: " + (obj.compile(o)));
        }
        assigns.push(new Assign(obj, val, null, {
          param: this.param,
          subpattern: true
        }).compileToFragments(o, LEVEL_LIST));
      }
      if (!(top || this.subpattern)) {
        assigns.push(vvar);
      }
      fragments = this.joinFragmentArrays(assigns, ', ');
      if (o.level < LEVEL_LIST) {
        return fragments;
      } else {
        return this.wrapInBraces(fragments);
      }
    };

    Assign.prototype.compileConditional = function(o) {
      var fragments, left, right, _ref2;
      _ref2 = this.variable.cacheReference(o), left = _ref2[0], right = _ref2[1];
      if (!left.properties.length && left.base instanceof Literal && left.base.value !== "this" && !o.scope.check(left.base.value)) {
        this.variable.error("the variable \"" + left.base.value + "\" can't be assigned with " + this.context + " because it has not been declared before");
      }
      if (__indexOf.call(this.context, "?") >= 0) {
        o.isExistentialEquals = true;
        return new If(new Existence(left), right, {
          type: 'if'
        }).addElse(new Assign(right, this.value, '=')).compileToFragments(o);
      } else {
        fragments = new Op(this.context.slice(0, -1), left, new Assign(right, this.value, '=')).compileToFragments(o);
        if (o.level <= LEVEL_LIST) {
          return fragments;
        } else {
          return this.wrapInBraces(fragments);
        }
      }
    };

    Assign.prototype.compileSpecialMath = function(o) {
      var left, right, _ref2;
      _ref2 = this.variable.cacheReference(o), left = _ref2[0], right = _ref2[1];
      return new Assign(left, new Op(this.context.slice(0, -1), right, this.value)).compileToFragments(o);
    };

    Assign.prototype.compileSplice = function(o) {
      var answer, exclusive, from, fromDecl, fromRef, name, to, valDef, valRef, _ref2, _ref3, _ref4;
      _ref2 = this.variable.properties.pop().range, from = _ref2.from, to = _ref2.to, exclusive = _ref2.exclusive;
      name = this.variable.compile(o);
      if (from) {
        _ref3 = this.cacheToCodeFragments(from.cache(o, LEVEL_OP)), fromDecl = _ref3[0], fromRef = _ref3[1];
      } else {
        fromDecl = fromRef = '0';
      }
      if (to) {
        if (from instanceof Value && from.isSimpleNumber() && to instanceof Value && to.isSimpleNumber()) {
          to = to.compile(o) - fromRef;
          if (!exclusive) {
            to += 1;
          }
        } else {
          to = to.compile(o, LEVEL_ACCESS) + ' - ' + fromRef;
          if (!exclusive) {
            to += ' + 1';
          }
        }
      } else {
        to = "9e9";
      }
      _ref4 = this.value.cache(o, LEVEL_LIST), valDef = _ref4[0], valRef = _ref4[1];
      answer = [].concat(this.makeCode("[].splice.apply(" + name + ", [" + fromDecl + ", " + to + "].concat("), valDef, this.makeCode(")), "), valRef);
      if (o.level > LEVEL_TOP) {
        return this.wrapInBraces(answer);
      } else {
        return answer;
      }
    };

    return Assign;

  })(Base);

  exports.Code = Code = (function(_super) {
    __extends(Code, _super);

    function Code(params, body, tag) {
      Code.__super__.constructor.call(this);
      this.params = params || [];
      this.body = body || new Block;
      this.icedgen = tag === 'icedgen';
      this.icedPassedDeferral = null;
      this.bound = tag === 'boundfunc' || this.icedgen;
      this.isGenerator = this.body.contains(function(node) {
        var _ref2;
        return node instanceof Op && ((_ref2 = node.operator) === 'yield' || _ref2 === 'yield*');
      });
    }

    Code.prototype.children = ['params', 'body'];

    Code.prototype.isStatement = function() {
      return !!this.ctor;
    };

    Code.prototype.jumps = NO;

    Code.prototype.makeScope = function(parentScope) {
      return new Scope(parentScope, this.body, this);
    };

    Code.prototype.compileNode = function(o) {
      var answer, boundfunc, code, exprs, i, lit, p, param, params, ref, splats, uniqs, val, wasEmpty, wrapper, _i, _j, _k, _l, _len, _len1, _len2, _len3, _len4, _len5, _m, _n, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7;
      if (this.bound && ((_ref2 = o.scope.method) != null ? _ref2.bound : void 0)) {
        this.context = o.scope.method.context;
      }
      if (this.bound && !this.context) {
        this.context = '_this';
        wrapper = new Code([new Param(new Literal(this.context))], new Block([this]));
        boundfunc = new Call(wrapper, [new Literal('this')]);
        boundfunc.updateLocationDataIfMissing(this.locationData);
        return boundfunc.compileNode(o);
      }
      o.scope = del(o, 'classScope') || this.makeScope(o.scope);
      o.scope.shared = del(o, 'sharedScope') || this.icedgen;
      o.scope.icedgen = this.icedgen;
      o.indent += TAB;
      delete o.bare;
      delete o.isExistentialEquals;
      params = [];
      exprs = [];
      _ref3 = this.params;
      for (_i = 0, _len = _ref3.length; _i < _len; _i++) {
        param = _ref3[_i];
        if (!(param instanceof Expansion)) {
          o.scope.parameter(param.asReference(o));
        }
      }
      _ref4 = this.params;
      for (_j = 0, _len1 = _ref4.length; _j < _len1; _j++) {
        param = _ref4[_j];
        if (!(param.splat || param instanceof Expansion)) {
          continue;
        }
        _ref5 = this.params;
        for (_k = 0, _len2 = _ref5.length; _k < _len2; _k++) {
          p = _ref5[_k].name;
          if (!(!(param instanceof Expansion))) {
            continue;
          }
          if (p["this"]) {
            p = p.properties[0].name;
          }
          if (p.value) {
            o.scope.add(p.value, 'var', true);
          }
        }
        splats = new Assign(new Value(new Arr((function() {
          var _l, _len3, _ref6, _results;
          _ref6 = this.params;
          _results = [];
          for (_l = 0, _len3 = _ref6.length; _l < _len3; _l++) {
            p = _ref6[_l];
            _results.push(p.asReference(o));
          }
          return _results;
        }).call(this))), new Value(new Literal('arguments')));
        break;
      }
      _ref6 = this.params;
      for (_l = 0, _len3 = _ref6.length; _l < _len3; _l++) {
        param = _ref6[_l];
        if (param.isComplex()) {
          val = ref = param.asReference(o);
          if (param.value) {
            val = new Op('?', ref, param.value);
          }
          exprs.push(new Assign(new Value(param.name), val, '=', {
            param: true
          }));
        } else {
          ref = param;
          if (param.value) {
            lit = new Literal(ref.name.value + ' == null');
            val = new Assign(new Value(param.name), param.value, '=');
            exprs.push(new If(lit, val));
          }
        }
        if (!splats) {
          params.push(ref);
        }
      }
      wasEmpty = this.body.isEmpty();
      if (splats) {
        exprs.unshift(splats);
      }
      if (exprs.length) {
        (_ref7 = this.body.expressions).unshift.apply(_ref7, exprs);
      }
      for (i = _m = 0, _len4 = params.length; _m < _len4; i = ++_m) {
        p = params[i];
        params[i] = p.compileToFragments(o);
        o.scope.parameter(fragmentsToText(params[i]));
      }
      uniqs = [];
      this.eachParamName(function(name, node) {
        if (__indexOf.call(uniqs, name) >= 0) {
          node.error("multiple parameters named '" + name + "'");
        }
        return uniqs.push(name);
      });
      if (this.icedIsAutocbCode) {
        wasEmpty = false;
      }
      if (!(wasEmpty || this.noReturn)) {
        this.body.makeReturn();
      }
      code = 'function';
      if (this.isGenerator) {
        code += '*';
      }
      if (this.ctor) {
        code += ' ' + this.name;
      }
      code += '(';
      answer = [this.makeCode(code)];
      for (i = _n = 0, _len5 = params.length; _n < _len5; i = ++_n) {
        p = params[i];
        if (i) {
          answer.push(this.makeCode(", "));
        }
        answer.push.apply(answer, p);
      }
      answer.push(this.makeCode(') {'));
      this.icedPatchBody(o);
      if (!this.body.isEmpty()) {
        answer = answer.concat(this.makeCode("\n"), this.body.compileWithDeclarations(o), this.makeCode("\n" + this.tab));
      }
      answer.push(this.makeCode('}'));
      if (this.ctor) {
        return [this.makeCode(this.tab)].concat(__slice.call(answer));
      }
      if (this.front || (o.level >= LEVEL_ACCESS)) {
        return this.wrapInBraces(answer);
      } else {
        return answer;
      }
    };

    Code.prototype.eachParamName = function(iterator) {
      var param, _i, _len, _ref2, _results;
      _ref2 = this.params;
      _results = [];
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        param = _ref2[_i];
        _results.push(param.eachName(iterator));
      }
      return _results;
    };

    Code.prototype.traverseChildren = function(crossScope, func) {
      if (crossScope) {
        return Code.__super__.traverseChildren.call(this, crossScope, func);
      }
    };

    Code.prototype.icedPatchBody = function(o) {
      var f, lhs, r, rhs;
      if (this.icedFoundArguments && this.icedNodeFlag) {
        o.scope.assign('_arguments', 'arguments');
      }
      if (this.icedNodeFlag && !this.icedgen) {
        this.icedPassedDeferral = o.scope.freeVariable(iced["const"].passed_deferral);
        lhs = new Value(new Literal(this.icedPassedDeferral));
        f = new Value(new Literal(iced["const"].ns));
        f.add(new Access(new Value(new Literal(iced["const"].findDeferral))));
        rhs = new Call(f, [new Value(new Literal('arguments'))]);
        this.body.unshift(new Assign(lhs, rhs));
      }
      if (this.icedNodeFlag && !this.icedgen) {
        r = this.icedIsAutocbCode ? iced["const"].autocb : iced["const"].k_noop;
        rhs = new Value(new Literal(r));
        lhs = new Value(new Literal(iced["const"].k));
        return this.body.unshift(new Assign(lhs, rhs, null, {
          icedlocal: true
        }));
      }
    };

    Code.prototype.icedWalkAst = function(parent, o) {
      var cf_prev, fa_prev, faf_prev, fg_prev, param, _i, _len, _ref2;
      this.icedParentAwait = parent;
      fa_prev = o.foundAutocb;
      cf_prev = o.currFunc;
      fg_prev = o.foundArguments;
      faf_prev = o.foundAwaitFunc;
      o.foundAutocb = false;
      o.foundArguments = false;
      o.foundAwaitFunc = false;
      o.currFunc = this;
      _ref2 = this.params;
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        param = _ref2[_i];
        if (param.name instanceof Literal && param.name.value === iced["const"].autocb) {
          o.foundAutocb = true;
          break;
        }
      }
      Code.__super__.icedWalkAst.call(this, parent, o);
      this.icedHasAutocbFlag = fa_prev;
      this.icedIsAutocbCode = o.foundAutocb;
      this.icedFoundArguments = o.foundArguments;
      o.foundAwaitFunc = faf_prev;
      o.foundArguments = fg_prev;
      o.foundAutocb = fa_prev;
      o.currFunc = cf_prev;
      return false;
    };

    Code.prototype.icedWalkAstLoops = function(flood) {
      if (Code.__super__.icedWalkAstLoops.call(this, false)) {
        this.icedLoopFlag = true;
      }
      return false;
    };

    Code.prototype.icedWalkCpsPivots = function() {
      Code.__super__.icedWalkCpsPivots.call(this);
      return this.icedCpsPivotFlag = false;
    };

    Code.prototype.icedTraceName = function() {
      var parts;
      parts = [];
      if (this.klass) {
        parts.push(this.klass);
      }
      if (this.name) {
        parts.push(this.name);
      }
      return parts.join('.');
    };

    return Code;

  })(Base);

  exports.Param = Param = (function(_super) {
    __extends(Param, _super);

    function Param(name, value, splat) {
      var _ref2;
      this.name = name;
      this.value = value;
      this.splat = splat;
      Param.__super__.constructor.call(this);
      if (_ref2 = (name = this.name.unwrapAll().value), __indexOf.call(STRICT_PROSCRIBED, _ref2) >= 0) {
        this.name.error("parameter name \"" + name + "\" is not allowed");
      }
    }

    Param.prototype.children = ['name', 'value'];

    Param.prototype.compileToFragments = function(o) {
      return this.name.compileToFragments(o, LEVEL_LIST);
    };

    Param.prototype.asReference = function(o) {
      var node;
      if (this.reference) {
        return this.reference;
      }
      node = this.name;
      if (node["this"]) {
        node = node.properties[0].name;
        if (node.value.reserved) {
          node = new Literal(o.scope.freeVariable(node.value));
        }
      } else if (node.isComplex()) {
        node = new Literal(o.scope.freeVariable('arg'));
      }
      node = new Value(node);
      if (this.splat) {
        node = new Splat(node);
      }
      node.updateLocationDataIfMissing(this.locationData);
      return this.reference = node;
    };

    Param.prototype.isComplex = function() {
      return this.name.isComplex();
    };

    Param.prototype.eachName = function(iterator, name) {
      var atParam, node, obj, _i, _len, _ref2;
      if (name == null) {
        name = this.name;
      }
      atParam = function(obj) {
        var node;
        node = obj.properties[0].name;
        if (!node.value.reserved) {
          return iterator(node.value, node);
        }
      };
      if (name instanceof Literal) {
        return iterator(name.value, name);
      }
      if (name instanceof Value) {
        return atParam(name);
      }
      _ref2 = name.objects;
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        obj = _ref2[_i];
        if (obj instanceof Assign) {
          this.eachName(iterator, obj.value.unwrap());
        } else if (obj instanceof Splat) {
          node = obj.name.unwrap();
          iterator(node.value, node);
        } else if (obj instanceof Value) {
          if (obj.isArray() || obj.isObject()) {
            this.eachName(iterator, obj.base);
          } else if (obj["this"]) {
            atParam(obj);
          } else {
            iterator(obj.base.value, obj.base);
          }
        } else if (!(obj instanceof Expansion)) {
          obj.error("illegal parameter " + (obj.compile()));
        }
      }
    };

    return Param;

  })(Base);

  exports.Splat = Splat = (function(_super) {
    __extends(Splat, _super);

    Splat.prototype.children = ['name'];

    Splat.prototype.isAssignable = YES;

    function Splat(name) {
      Splat.__super__.constructor.call(this);
      this.name = name.compile ? name : new Literal(name);
    }

    Splat.prototype.assigns = function(name) {
      return this.name.assigns(name);
    };

    Splat.prototype.compileToFragments = function(o) {
      return this.name.compileToFragments(o);
    };

    Splat.prototype.unwrap = function() {
      return this.name;
    };

    Splat.compileSplattedArray = function(o, list, apply) {
      var args, base, compiledNode, concatPart, fragments, i, index, node, _i, _len;
      index = -1;
      while ((node = list[++index]) && !(node instanceof Splat)) {
        continue;
      }
      if (index >= list.length) {
        return [];
      }
      if (list.length === 1) {
        node = list[0];
        fragments = node.compileToFragments(o, LEVEL_LIST);
        if (apply) {
          return fragments;
        }
        return [].concat(node.makeCode("" + (utility('slice')) + ".call("), fragments, node.makeCode(")"));
      }
      args = list.slice(index);
      for (i = _i = 0, _len = args.length; _i < _len; i = ++_i) {
        node = args[i];
        compiledNode = node.compileToFragments(o, LEVEL_LIST);
        args[i] = node instanceof Splat ? [].concat(node.makeCode("" + (utility('slice')) + ".call("), compiledNode, node.makeCode(")")) : [].concat(node.makeCode("["), compiledNode, node.makeCode("]"));
      }
      if (index === 0) {
        node = list[0];
        concatPart = node.joinFragmentArrays(args.slice(1), ', ');
        return args[0].concat(node.makeCode(".concat("), concatPart, node.makeCode(")"));
      }
      base = (function() {
        var _j, _len1, _ref2, _results;
        _ref2 = list.slice(0, index);
        _results = [];
        for (_j = 0, _len1 = _ref2.length; _j < _len1; _j++) {
          node = _ref2[_j];
          _results.push(node.compileToFragments(o, LEVEL_LIST));
        }
        return _results;
      })();
      base = list[0].joinFragmentArrays(base, ', ');
      concatPart = list[index].joinFragmentArrays(args, ', ');
      return [].concat(list[0].makeCode("["), base, list[index].makeCode("].concat("), concatPart, (last(list)).makeCode(")"));
    };

    Splat.prototype.icedToSlot = function(i) {
      return new Slot(i, new Value(this.name), null, true);
    };

    return Splat;

  })(Base);

  exports.Expansion = Expansion = (function(_super) {
    __extends(Expansion, _super);

    function Expansion() {
      return Expansion.__super__.constructor.apply(this, arguments);
    }

    Expansion.prototype.isComplex = NO;

    Expansion.prototype.compileNode = function(o) {
      return this.error('Expansion must be used inside a destructuring assignment or parameter list');
    };

    Expansion.prototype.asReference = function(o) {
      return this;
    };

    Expansion.prototype.eachName = function(iterator) {};

    return Expansion;

  })(Base);

  exports.While = While = (function(_super) {
    __extends(While, _super);

    function While(condition, options) {
      this.condition = (options != null ? options.invert : void 0) ? condition.invert() : condition;
      this.guard = options != null ? options.guard : void 0;
    }

    While.prototype.children = ['condition', 'guard', 'body'];

    While.prototype.isStatement = YES;

    While.prototype.isLoop = YES;

    While.prototype.makeReturn = function(res) {
      if (res) {
        return While.__super__.makeReturn.apply(this, arguments);
      } else {
        this.returns = !this.jumps({
          loop: true
        });
        return this;
      }
    };

    While.prototype.addBody = function(body) {
      this.body = body;
      return this;
    };

    While.prototype.jumps = function() {
      var expressions, jumpNode, node, _i, _len;
      expressions = this.body.expressions;
      if (!expressions.length) {
        return false;
      }
      for (_i = 0, _len = expressions.length; _i < _len; _i++) {
        node = expressions[_i];
        if (jumpNode = node.jumps({
          loop: true
        })) {
          return jumpNode;
        }
      }
      return false;
    };

    While.prototype.compileNode = function(o) {
      var answer, body, rvar, set;
      this.condition.icedStatementAssertion();
      if (this.icedNodeFlag) {
        return this.icedCompileIced(o);
      }
      o.indent += TAB;
      set = '';
      body = this.body;
      if (body.isEmpty()) {
        body = this.makeCode('');
      } else {
        if (this.returns) {
          body.makeReturn(rvar = o.scope.freeVariable('results'));
          set = "" + this.tab + rvar + " = [];\n";
        }
        if (this.guard) {
          if (body.expressions.length > 1) {
            body.expressions.unshift(new If((new Parens(this.guard)).invert(), new Literal("continue")));
          } else {
            if (this.guard) {
              body = Block.wrap([new If(this.guard, body)]);
            }
          }
        }
        body = [].concat(this.makeCode("\n"), body.compileToFragments(o, LEVEL_TOP), this.makeCode("\n" + this.tab));
      }
      answer = [].concat(this.makeCode(set + this.tab + "while ("), this.condition.compileToFragments(o, LEVEL_PAREN), this.makeCode(") {"), body, this.makeCode("}"));
      if (this.returns) {
        if (this.icedHasAutocbFlag) {
          answer.push(this.makeCode("\n" + this.tab + iced["const"].autocb + "(" + rvar + ");"));
          answer.push(this.makeCode("\n" + this.tab + "return;"));
        } else {
          answer.push(this.makeCode("\n" + this.tab + "return " + rvar + ";"));
        }
      }
      return answer;
    };

    While.prototype.icedWrap = function(d) {
      var body, break_assign, break_id, cond, condition, continue_assign, continue_block, continue_block_inner, continue_body, continue_fn, continue_id, guard_if, k_id, k_param, next_assign, next_id, outStatements, top_assign, top_block, top_body, top_call, top_func, top_id, top_statements, tramp;
      condition = d.condition;
      body = d.body;
      outStatements = [];
      top_id = new Value(new Literal(iced["const"].t_while));
      k_id = new Value(new Literal(iced["const"].k));
      k_param = new Param(new Literal(iced["const"].k));
      break_id = new Value(new Literal(iced["const"].b_while));
      break_assign = new Assign(break_id, k_id, null, {
        icedlocal: true
      });
      continue_id = new Value(new Literal(iced["const"].c_while));
      continue_block_inner = new Block([new Call(top_id, [k_id])]);
      if (d.step) {
        continue_block_inner.unshift(d.step);
      }
      continue_fn = new Code([], continue_block_inner);
      tramp = new Value(new Literal(iced["const"].ns));
      tramp.add(new Access(new Value(new Literal(iced["const"].trampoline))));
      continue_block = new Block([new Call(tramp, [continue_fn])]);
      continue_body = new Code([], continue_block, 'icedgen');
      continue_assign = new Assign(continue_id, continue_body, null, {
        icedlocal: true
      });
      next_id = new Value(new Literal(iced["const"].n_while));
      next_assign = new Assign(next_id, continue_id, null, {
        icedlocal: true
      });
      cond = new If(condition.invert(), new Block([new Call(break_id, [])]));
      if (d.guard) {
        continue_block = new Block([new Call(continue_id, [])]);
        guard_if = new If(d.guard, body);
        guard_if.addElse(continue_block);
        cond.addElse(new Block([d.pre_body, guard_if]));
      } else {
        cond.addElse(new Block([d.pre_body, body]));
      }
      top_body = new Block([break_assign, continue_assign, next_assign, cond]);
      top_func = new Code([k_param], top_body, 'icedgen');
      top_assign = new Assign(top_id, top_func, null, {
        icedlocal: true
      });
      top_call = new Call(top_id, [k_id]);
      top_statements = [];
      if (d.init) {
        top_statements = top_statements.concat(d.init);
      }
      top_statements = top_statements.concat([top_assign, top_call]);
      return top_block = new Block(top_statements);
    };

    While.prototype.icedCallContinuation = function() {
      return this.body.icedThreadReturn(new IcedTailCall(iced["const"].n_while));
    };

    While.prototype.icedCompileIced = function(o) {
      var b, opts;
      opts = {
        condition: this.condition,
        body: this.body,
        guard: this.guard
      };
      b = this.icedWrap(opts);
      return b.compileNode(o);
    };

    return While;

  })(Base);

  exports.Op = Op = (function(_super) {
    var CONVERSIONS, INVERSIONS;

    __extends(Op, _super);

    function Op(op, first, second, flip) {
      Op.__super__.constructor.call(this);
      if (op === 'in') {
        return new In(first, second);
      }
      if (op === 'do') {
        return this.generateDo(first);
      }
      if (op === 'new') {
        if (first instanceof Call && !first["do"] && !first.isNew) {
          return first.newInstance();
        }
        if (first instanceof Code && first.bound || first["do"]) {
          first = new Parens(first);
        }
      }
      this.operator = CONVERSIONS[op] || op;
      this.first = first;
      this.second = second;
      this.flip = !!flip;
      return this;
    }

    CONVERSIONS = {
      '==': '===',
      '!=': '!==',
      'of': 'in',
      'yieldfrom': 'yield*'
    };

    INVERSIONS = {
      '!==': '===',
      '===': '!=='
    };

    Op.prototype.children = ['first', 'second'];

    Op.prototype.isSimpleNumber = NO;

    Op.prototype.isYield = function() {
      var _ref2;
      return (_ref2 = this.operator) === 'yield' || _ref2 === 'yield*';
    };

    Op.prototype.isUnary = function() {
      return !this.second;
    };

    Op.prototype.isComplex = function() {
      var _ref2;
      return !(this.isUnary() && ((_ref2 = this.operator) === '+' || _ref2 === '-')) || this.first.isComplex();
    };

    Op.prototype.isChainable = function() {
      var _ref2;
      return (_ref2 = this.operator) === '<' || _ref2 === '>' || _ref2 === '>=' || _ref2 === '<=' || _ref2 === '===' || _ref2 === '!==';
    };

    Op.prototype.invert = function() {
      var allInvertable, curr, fst, op, _ref2;
      if (this.isChainable() && this.first.isChainable()) {
        allInvertable = true;
        curr = this;
        while (curr && curr.operator) {
          allInvertable && (allInvertable = curr.operator in INVERSIONS);
          curr = curr.first;
        }
        if (!allInvertable) {
          return new Parens(this).invert();
        }
        curr = this;
        while (curr && curr.operator) {
          curr.invert = !curr.invert;
          curr.operator = INVERSIONS[curr.operator];
          curr = curr.first;
        }
        return this;
      } else if (op = INVERSIONS[this.operator]) {
        this.operator = op;
        if (this.first.unwrap() instanceof Op) {
          this.first.invert();
        }
        return this;
      } else if (this.second) {
        return new Parens(this).invert();
      } else if (this.operator === '!' && (fst = this.first.unwrap()) instanceof Op && ((_ref2 = fst.operator) === '!' || _ref2 === 'in' || _ref2 === 'instanceof')) {
        return fst;
      } else {
        return new Op('!', this);
      }
    };

    Op.prototype.unfoldSoak = function(o) {
      var _ref2;
      return ((_ref2 = this.operator) === '++' || _ref2 === '--' || _ref2 === 'delete') && unfoldSoak(o, this, 'first');
    };

    Op.prototype.generateDo = function(exp) {
      var call, func, param, passedParams, ref, _i, _len, _ref2;
      passedParams = [];
      func = exp instanceof Assign && (ref = exp.value.unwrap()) instanceof Code ? ref : exp;
      _ref2 = func.params || [];
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        param = _ref2[_i];
        if (param.value) {
          passedParams.push(param.value);
          delete param.value;
        } else {
          passedParams.push(param);
        }
      }
      call = new Call(exp, passedParams);
      call["do"] = true;
      return call;
    };

    Op.prototype.compileNode = function(o) {
      var answer, isChain, lhs, rhs, _ref2, _ref3;
      isChain = this.isChainable() && this.first.isChainable();
      if (!isChain) {
        this.first.front = this.front;
      }
      if (this.operator === 'delete' && o.scope.check(this.first.unwrapAll().value)) {
        this.error('delete operand may not be argument or var');
      }
      if (((_ref2 = this.operator) === '--' || _ref2 === '++') && (_ref3 = this.first.unwrapAll().value, __indexOf.call(STRICT_PROSCRIBED, _ref3) >= 0)) {
        this.error("cannot increment/decrement \"" + (this.first.unwrapAll().value) + "\"");
      }
      if (this.isYield()) {
        return this.compileYield(o);
      }
      if (this.isUnary()) {
        return this.compileUnary(o);
      }
      if (isChain) {
        return this.compileChain(o);
      }
      switch (this.operator) {
        case '?':
          return this.compileExistence(o);
        case '**':
          return this.compilePower(o);
        case '//':
          return this.compileFloorDivision(o);
        case '%%':
          return this.compileModulo(o);
        default:
          lhs = this.first.compileToFragments(o, LEVEL_OP);
          rhs = this.second.compileToFragments(o, LEVEL_OP);
          answer = [].concat(lhs, this.makeCode(" " + this.operator + " "), rhs);
          if (o.level <= LEVEL_OP) {
            return answer;
          } else {
            return this.wrapInBraces(answer);
          }
      }
    };

    Op.prototype.compileChain = function(o) {
      var fragments, fst, shared, _ref2;
      _ref2 = this.first.second.cache(o), this.first.second = _ref2[0], shared = _ref2[1];
      fst = this.first.compileToFragments(o, LEVEL_OP);
      fragments = fst.concat(this.makeCode(" " + (this.invert ? '&&' : '||') + " "), shared.compileToFragments(o), this.makeCode(" " + this.operator + " "), this.second.compileToFragments(o, LEVEL_OP));
      return this.wrapInBraces(fragments);
    };

    Op.prototype.compileExistence = function(o) {
      var fst, ref;
      if (this.first.isComplex()) {
        ref = new Literal(o.scope.freeVariable('ref'));
        fst = new Parens(new Assign(ref, this.first));
      } else {
        fst = this.first;
        ref = fst;
      }
      return new If(new Existence(fst), ref, {
        type: 'if'
      }).addElse(this.second).compileToFragments(o);
    };

    Op.prototype.compileUnary = function(o) {
      var op, parts, plusMinus;
      parts = [];
      op = this.operator;
      parts.push([this.makeCode(op)]);
      if (op === '!' && this.first instanceof Existence) {
        this.first.negated = !this.first.negated;
        return this.first.compileToFragments(o);
      }
      if (o.level >= LEVEL_ACCESS) {
        return (new Parens(this)).compileToFragments(o);
      }
      plusMinus = op === '+' || op === '-';
      if ((op === 'new' || op === 'typeof' || op === 'delete') || plusMinus && this.first instanceof Op && this.first.operator === op) {
        parts.push([this.makeCode(' ')]);
      }
      if ((plusMinus && this.first instanceof Op) || (op === 'new' && this.first.isStatement(o))) {
        this.first = new Parens(this.first);
      }
      parts.push(this.first.compileToFragments(o, LEVEL_OP));
      if (this.flip) {
        parts.reverse();
      }
      return this.joinFragmentArrays(parts, '');
    };

    Op.prototype.compileYield = function(o) {
      var op, parts;
      parts = [];
      op = this.operator;
      if (o.scope.parent == null) {
        this.error('yield statements must occur within a function generator.');
      }
      if (__indexOf.call(Object.keys(this.first), 'expression') >= 0) {
        if (this.first.expression != null) {
          parts.push(this.first.expression.compileToFragments(o, LEVEL_OP));
        }
      } else {
        parts.push([this.makeCode("(" + op + " ")]);
        parts.push(this.first.compileToFragments(o, LEVEL_OP));
        parts.push([this.makeCode(")")]);
      }
      return this.joinFragmentArrays(parts, '');
    };

    Op.prototype.compilePower = function(o) {
      var pow;
      pow = new Value(new Literal('Math'), [new Access(new Literal('pow'))]);
      return new Call(pow, [this.first, this.second]).compileToFragments(o);
    };

    Op.prototype.compileFloorDivision = function(o) {
      var div, floor;
      floor = new Value(new Literal('Math'), [new Access(new Literal('floor'))]);
      div = new Op('/', this.first, this.second);
      return new Call(floor, [div]).compileToFragments(o);
    };

    Op.prototype.compileModulo = function(o) {
      var mod;
      mod = new Value(new Literal(utility('modulo')));
      return new Call(mod, [this.first, this.second]).compileToFragments(o);
    };

    Op.prototype.toString = function(idt) {
      return Op.__super__.toString.call(this, idt, this.constructor.name + ' ' + this.operator);
    };

    Op.prototype.icedWrapContinuation = function() {
      return this.icedCallContinuationFlag;
    };

    return Op;

  })(Base);

  exports.In = In = (function(_super) {
    __extends(In, _super);

    function In(object, array) {
      this.object = object;
      this.array = array;
      In.__super__.constructor.call(this);
    }

    In.prototype.children = ['object', 'array'];

    In.prototype.invert = NEGATE;

    In.prototype.compileNode = function(o) {
      var hasSplat, obj, _i, _len, _ref2;
      if (this.array instanceof Value && this.array.isArray() && this.array.base.objects.length) {
        _ref2 = this.array.base.objects;
        for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
          obj = _ref2[_i];
          if (!(obj instanceof Splat)) {
            continue;
          }
          hasSplat = true;
          break;
        }
        if (!hasSplat) {
          return this.compileOrTest(o);
        }
      }
      return this.compileLoopTest(o);
    };

    In.prototype.compileOrTest = function(o) {
      var cmp, cnj, i, item, ref, sub, tests, _i, _len, _ref2, _ref3, _ref4;
      _ref2 = this.object.cache(o, LEVEL_OP), sub = _ref2[0], ref = _ref2[1];
      _ref3 = this.negated ? [' !== ', ' && '] : [' === ', ' || '], cmp = _ref3[0], cnj = _ref3[1];
      tests = [];
      _ref4 = this.array.base.objects;
      for (i = _i = 0, _len = _ref4.length; _i < _len; i = ++_i) {
        item = _ref4[i];
        if (i) {
          tests.push(this.makeCode(cnj));
        }
        tests = tests.concat((i ? ref : sub), this.makeCode(cmp), item.compileToFragments(o, LEVEL_ACCESS));
      }
      if (o.level < LEVEL_OP) {
        return tests;
      } else {
        return this.wrapInBraces(tests);
      }
    };

    In.prototype.compileLoopTest = function(o) {
      var fragments, ref, sub, _ref2;
      _ref2 = this.object.cache(o, LEVEL_LIST), sub = _ref2[0], ref = _ref2[1];
      fragments = [].concat(this.makeCode(utility('indexOf') + ".call("), this.array.compileToFragments(o, LEVEL_LIST), this.makeCode(", "), ref, this.makeCode(") " + (this.negated ? '< 0' : '>= 0')));
      if (fragmentsToText(sub) === fragmentsToText(ref)) {
        return fragments;
      }
      fragments = sub.concat(this.makeCode(', '), fragments);
      if (o.level < LEVEL_LIST) {
        return fragments;
      } else {
        return this.wrapInBraces(fragments);
      }
    };

    In.prototype.toString = function(idt) {
      return In.__super__.toString.call(this, idt, this.constructor.name + (this.negated ? '!' : ''));
    };

    return In;

  })(Base);

  exports.Slot = Slot = (function(_super) {
    __extends(Slot, _super);

    function Slot(index, value, suffix, splat) {
      Slot.__super__.constructor.call(this);
      this.index = index;
      this.value = value;
      this.suffix = suffix;
      this.splat = splat;
      this.access = null;
    }

    Slot.prototype.addAccess = function(a) {
      this.access = a;
      return this;
    };

    Slot.prototype.children = ['value', 'suffix'];

    return Slot;

  })(Base);

  exports.Defer = Defer = (function(_super) {
    __extends(Defer, _super);

    function Defer(args, lineno) {
      var a, i;
      this.lineno = lineno;
      Defer.__super__.constructor.call(this);
      this.slots = flatten((function() {
        var _i, _len, _results;
        _results = [];
        for (i = _i = 0, _len = args.length; _i < _len; i = ++_i) {
          a = args[i];
          _results.push(a.icedToSlot(i));
        }
        return _results;
      })());
      this.params = [];
      this.vars = [];
      this.custom = false;
    }

    Defer.prototype.children = ['slots'];

    Defer.prototype.setCustom = function() {
      this.custom = true;
      return this;
    };

    Defer.prototype.newParam = function() {
      var l;
      l = "" + iced["const"].slot + "_" + (this.params.length + 1);
      this.params.push(new Param(new Literal(l)));
      return new Value(new Literal(l));
    };

    Defer.prototype.makeAssignFn = function(o) {
      var a, args, assign, assignments, block, call, func, i, i_lit, inner_fn, lit, outer_block, outer_fn, prop, s, slot, _i, _len, _ref2;
      if (this.slots.length === 0) {
        return null;
      }
      assignments = [];
      args = [];
      i = 0;
      _ref2 = this.slots;
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        s = _ref2[_i];
        i = s.index;
        a = new Value(new Literal("arguments"));
        i_lit = new Value(new Literal(i));
        if (s.splat) {
          func = new Value(new Literal(utility('slice')));
          func.add(new Access(new Value(new Literal('call'))));
          call = new Call(func, [a, i_lit]);
          slot = s.value;
          this.vars.push(slot);
          assign = new Assign(slot, call);
        } else {
          a.add(new Index(i_lit));
          if (s.access) {
            a.add(s.access);
          }
          if (!s.suffix) {
            lit = s.value.compile(o, LEVEL_TOP);
            if (lit === "_") {
              slot = new Value(new Literal(iced["const"].deferrals));
              slot.add(new Access(new Value(new Literal(iced["const"].retslot))));
            } else {
              slot = s.value;
              this.vars.push(slot);
            }
          } else {
            args.push(s.value);
            slot = this.newParam();
            if (s.suffix instanceof Index) {
              prop = new Index(this.newParam());
              args.push(s.suffix.index);
            } else {
              prop = s.suffix;
            }
            slot.add(prop);
          }
          assign = new Assign(slot, a);
        }
        assignments.push(assign);
      }
      block = new Block(assignments);
      inner_fn = new Code([], block, 'icedgen');
      outer_block = new Block([new Return(inner_fn)]);
      outer_fn = new Code(this.params, outer_block, 'icedgen');
      return call = new Call(outer_fn, args);
    };

    Defer.prototype.transform = function(o) {
      var assign_fn, assignments, context_assign, context_lhs, context_rhs, fn, ln_assign, ln_lhs, ln_rhs, meth;
      meth = new Value(new Literal(iced["const"].defer_method));
      if (this.custom) {
        fn = meth;
      } else {
        fn = new Value(new Literal(iced["const"].deferrals));
        fn.add(new Access(meth));
      }
      assignments = [];
      if ((assign_fn = this.makeAssignFn(o))) {
        assignments.push(new Assign(new Value(new Literal(iced["const"].assign_fn)), assign_fn, "object"));
      }
      ln_lhs = new Value(new Literal(iced["const"].lineno));
      ln_rhs = new Value(new Literal(this.lineno));
      ln_assign = new Assign(ln_lhs, ln_rhs, "object");
      assignments.push(ln_assign);
      if (this.custom) {
        context_lhs = new Value(new Literal(iced["const"].context));
        context_rhs = new Value(new Literal(iced["const"].deferrals));
        context_assign = new Assign(context_lhs, context_rhs, "object");
        assignments.push(context_assign);
      }
      o = new Obj(assignments);
      return new Call(fn, [new Value(o)]);
    };

    Defer.prototype.compileNode = function(o) {
      var call, name, scope, v, _i, _len, _ref2;
      call = this.transform(o);
      _ref2 = this.vars;
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        v = _ref2[_i];
        name = v.compile(o, LEVEL_LIST);
        scope = o.scope;
        scope.find(name, 'var');
      }
      return call.compileNode(o);
    };

    Defer.prototype.icedWalkAst = function(p, o) {
      this.icedHasAutocbFlag = o.foundAutocb;
      o.foundDefer = true;
      this.parentFunc = o.currFunc;
      return Defer.__super__.icedWalkAst.call(this, p, o);
    };

    return Defer;

  })(Base);

  quote_path_for_emission = function(n) {
    return '"' + n.replace(/\\/g, '\\\\') + '"';
  };

  quote_funcname_for_debug = function(n) {
    return '"' + n.replace(/["']/g, '') + '"';
  };

  require_top_dir = function() {
    return quote_path_for_emission(pathmod.join(__dirname, "..", ".."));
  };

  exports.Await = Await = (function(_super) {
    __extends(Await, _super);

    function Await(body) {
      this.body = body;
      Await.__super__.constructor.call(this);
    }

    Await.prototype.transform = function(o) {
      var assign, assignments, body, call, cb_assignment, cb_lhs, cb_rhs, cls, fn_assignment, fn_lhs, fn_rhs, func_assignment, func_lhs, func_rhs, lhs, meth, n, name, rhs, trace, _ref2, _ref3;
      body = this.body;
      name = iced["const"].deferrals;
      o.scope.add(name, 'var');
      lhs = new Value(new Literal(name));
      cls = new Value(new Literal(iced["const"].ns));
      cls.add(new Access(new Value(new Literal(iced["const"].Deferrals))));
      assignments = [];
      if (n = (_ref2 = this.parentFunc) != null ? _ref2.icedPassedDeferral : void 0) {
        cb_lhs = new Value(new Literal(iced["const"].parent));
        cb_rhs = new Value(new Literal(n));
        cb_assignment = new Assign(cb_lhs, cb_rhs, "object");
        assignments.push(cb_assignment);
      }
      if (o.filename != null) {
        fn_lhs = new Value(new Literal(iced["const"].filename));
        fn_rhs = new Value(new Literal(quote_path_for_emission(o.filename)));
        fn_assignment = new Assign(fn_lhs, fn_rhs, "object");
        assignments.push(fn_assignment);
      }
      if (n = (_ref3 = this.parentFunc) != null ? _ref3.icedTraceName() : void 0) {
        func_lhs = new Value(new Literal(iced["const"].funcname));
        func_rhs = new Value(new Literal(quote_funcname_for_debug(n)));
        func_assignment = new Assign(func_lhs, func_rhs, "object");
        assignments.push(func_assignment);
      }
      trace = new Obj(assignments, true);
      call = new Call(cls, [new Value(new Literal(iced["const"].k)), trace]);
      rhs = new Op("new", call);
      assign = new Assign(lhs, rhs);
      body.unshift(assign);
      meth = lhs.copy().add(new Access(new Value(new Literal(iced["const"].fulfill))));
      call = new Call(meth, []);
      body.push(call);
      return this.body = body;
    };

    Await.prototype.children = ['body'];

    Await.prototype.isStatement = function() {
      return YES;
    };

    Await.prototype.makeReturn = THIS;

    Await.prototype.compileNode = function(o) {
      this.transform(o);
      return this.body.compileNode(o);
    };

    Await.prototype.icedWalkAst = function(p, o) {
      this.icedHasAutocbFlag = o.foundAutocb;
      this.parentFunc = o.currFunc;
      p = p || this;
      this.icedParentAwait = p;
      Await.__super__.icedWalkAst.call(this, p, o);
      return this.icedNodeFlag = o.foundAwaitFunc = o.foundAwait = true;
    };

    return Await;

  })(Base);

  IcedRuntime = (function(_super) {
    __extends(IcedRuntime, _super);

    function IcedRuntime(foundDefer, foundAwait) {
      this.foundDefer = foundDefer;
      this.foundAwait = foundAwait;
      IcedRuntime.__super__.constructor.call(this);
    }

    IcedRuntime.prototype.compileNode = function(o, level) {
      var access, accessname, assign, call, callv, file, inc, interp, k, klass, lhs_vec, ns, qmodname, req, rhs, v, val, window_mode, window_val, _i, _j, _len, _len1, _ref2;
      this.expressions = [];
      v = o.runtime ? o.runtime : o.bare ? "none" : this.foundDefer ? "node" : "none";
      if (o.runtime && !this.foundDefer && !o.runforce) {
        v = "none";
      }
      window_mode = false;
      window_val = null;
      inc = null;
      inc = (function() {
        switch (v) {
          case "inline":
          case "window":
            if (v === "window") {
              window_mode = true;
            }
            if (window_mode) {
              window_val = new Value(new Literal(v));
            }
            return InlineRuntime.generate(window_val ? window_val.copy() : null);
          case "node":
          case "browserify":
          case "interp":
            interp = v === "interp";
            qmodname = interp ? require_top_dir() : "'iced-runtime'";
            accessname = iced["const"].ns;
            file = new Literal(qmodname);
            access = new Access(new Literal(accessname));
            req = new Value(new Literal("require"));
            call = new Call(req, [file]);
            callv = new Value(call);
            if (interp) {
              callv.add(access);
            }
            ns = new Value(new Literal(iced["const"].ns));
            return new Assign(ns, callv);
          case "none":
            return null;
          default:
            throw SyntaxError("unexpected flag IcedRuntime " + v);
        }
      })();
      if (inc) {
        this.push(inc);
      }
      if (this.foundAwait) {
        rhs = new Code([], new Block([]));
        lhs_vec = [];
        _ref2 = [iced["const"].k_noop, iced["const"].k];
        for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
          k = _ref2[_i];
          val = new Value(new Literal(k));
          if (window_val) {
            klass = window_val.copy();
            klass.add(new Access(val));
            val = klass;
          }
          lhs_vec.push(val);
        }
        assign = rhs;
        for (_j = 0, _len1 = lhs_vec.length; _j < _len1; _j++) {
          v = lhs_vec[_j];
          assign = new Assign(v, assign);
        }
        this.push(assign);
      }
      if (this.isEmpty()) {
        return [];
      } else {
        return IcedRuntime.__super__.compileNode.call(this, o);
      }
    };

    IcedRuntime.prototype.icedWalkAst = function(p, o) {
      this.icedHasAutocbFlag = o.foundAutocb;
      return IcedRuntime.__super__.icedWalkAst.call(this, p, o);
    };

    return IcedRuntime;

  })(Block);

  exports.Try = Try = (function(_super) {
    __extends(Try, _super);

    function Try(attempt, errorVariable, recovery, ensure) {
      this.attempt = attempt;
      this.errorVariable = errorVariable;
      this.recovery = recovery;
      this.ensure = ensure;
    }

    Try.prototype.children = ['attempt', 'recovery', 'ensure'];

    Try.prototype.isStatement = YES;

    Try.prototype.jumps = function(o) {
      var _ref2;
      return this.attempt.jumps(o) || ((_ref2 = this.recovery) != null ? _ref2.jumps(o) : void 0);
    };

    Try.prototype.makeReturn = function(res) {
      if (this.attempt) {
        this.attempt = this.attempt.makeReturn(res);
      }
      if (this.recovery) {
        this.recovery = this.recovery.makeReturn(res);
      }
      return this;
    };

    Try.prototype.compileNode = function(o) {
      var catchPart, ensurePart, placeholder, tryPart;
      o.indent += TAB;
      tryPart = this.attempt.compileToFragments(o, LEVEL_TOP);
      catchPart = this.recovery ? (placeholder = new Literal('_error'), this.errorVariable ? this.recovery.unshift(new Assign(this.errorVariable, placeholder)) : void 0, [].concat(this.makeCode(" catch ("), placeholder.compileToFragments(o), this.makeCode(") {\n"), this.recovery.compileToFragments(o, LEVEL_TOP), this.makeCode("\n" + this.tab + "}"))) : !(this.ensure || this.recovery) ? [this.makeCode(' catch (_error) {}')] : [];
      ensurePart = this.ensure ? [].concat(this.makeCode(" finally {\n"), this.ensure.compileToFragments(o, LEVEL_TOP), this.makeCode("\n" + this.tab + "}")) : [];
      return [].concat(this.makeCode("" + this.tab + "try {\n"), tryPart, this.makeCode("\n" + this.tab + "}"), catchPart, ensurePart);
    };

    return Try;

  })(Base);

  exports.Throw = Throw = (function(_super) {
    __extends(Throw, _super);

    function Throw(expression) {
      this.expression = expression;
      Throw.__super__.constructor.call(this);
    }

    Throw.prototype.children = ['expression'];

    Throw.prototype.isStatement = YES;

    Throw.prototype.jumps = NO;

    Throw.prototype.makeReturn = THIS;

    Throw.prototype.compileNode = function(o) {
      return [].concat(this.makeCode(this.tab + "throw "), this.expression.compileToFragments(o), this.makeCode(";"));
    };

    return Throw;

  })(Base);

  exports.Existence = Existence = (function(_super) {
    __extends(Existence, _super);

    function Existence(expression) {
      this.expression = expression;
      Existence.__super__.constructor.call(this);
    }

    Existence.prototype.children = ['expression'];

    Existence.prototype.invert = NEGATE;

    Existence.prototype.compileNode = function(o) {
      var cmp, cnj, code, _ref2;
      this.expression.front = this.front;
      code = this.expression.compile(o, LEVEL_OP);
      if (IDENTIFIER.test(code) && !o.scope.check(code)) {
        _ref2 = this.negated ? ['===', '||'] : ['!==', '&&'], cmp = _ref2[0], cnj = _ref2[1];
        code = "typeof " + code + " " + cmp + " \"undefined\" " + cnj + " " + code + " " + cmp + " null";
      } else {
        code = "" + code + " " + (this.negated ? '==' : '!=') + " null";
      }
      return [this.makeCode(o.level <= LEVEL_COND ? code : "(" + code + ")")];
    };

    return Existence;

  })(Base);

  exports.Parens = Parens = (function(_super) {
    __extends(Parens, _super);

    function Parens(body) {
      this.body = body;
      Parens.__super__.constructor.call(this);
    }

    Parens.prototype.children = ['body'];

    Parens.prototype.unwrap = function() {
      return this.body;
    };

    Parens.prototype.isComplex = function() {
      return this.body.isComplex();
    };

    Parens.prototype.compileNode = function(o) {
      var bare, expr, fragments;
      expr = this.body.unwrap();
      if (expr instanceof Value && expr.isAtomic()) {
        expr.front = this.front;
        return expr.compileToFragments(o);
      }
      fragments = expr.compileToFragments(o, LEVEL_PAREN);
      bare = o.level < LEVEL_OP && (expr instanceof Op || expr instanceof Call || (expr instanceof For && expr.returns));
      if (bare) {
        return fragments;
      } else {
        return this.wrapInBraces(fragments);
      }
    };

    return Parens;

  })(Base);

  exports.For = For = (function(_super) {
    __extends(For, _super);

    function For(body, source) {
      var _ref2;
      For.__super__.constructor.call(this);
      this.source = source.source, this.guard = source.guard, this.step = source.step, this.name = source.name, this.index = source.index;
      this.body = Block.wrap([body]);
      this.own = !!source.own;
      this.object = !!source.object;
      if (this.object) {
        _ref2 = [this.index, this.name], this.name = _ref2[0], this.index = _ref2[1];
      }
      if (this.index instanceof Value) {
        this.index.error('index cannot be a pattern matching expression');
      }
      this.range = this.source instanceof Value && this.source.base instanceof Range && !this.source.properties.length;
      this.pattern = this.name instanceof Value;
      if (this.range && this.index) {
        this.index.error('indexes do not apply to range loops');
      }
      if (this.range && this.pattern) {
        this.name.error('cannot pattern match over range loops');
      }
      if (this.own && !this.object) {
        this.name.error('cannot use own with for-in');
      }
      this.returns = false;
    }

    For.prototype.children = ['body', 'source', 'guard', 'step'];

    For.prototype.compileNode = function(o) {
      var body, bodyFragments, compare, compareDown, declare, declareDown, defPart, defPartFragments, down, forPartFragments, guardPart, idt1, increment, index, ivar, kvar, kvarAssign, lastJumps, lvar, name, namePart, ref, resultPart, returnResult, rvar, scope, source, step, stepNum, stepVar, svar, varPart, _ref2, _ref3;
      body = Block.wrap([this.body]);
      lastJumps = (_ref2 = last(body.expressions)) != null ? _ref2.jumps() : void 0;
      if (lastJumps && lastJumps instanceof Return) {
        this.returns = false;
      }
      source = this.range ? this.source.base : this.source;
      scope = o.scope;
      if (!this.pattern) {
        name = this.name && (this.name.compile(o, LEVEL_LIST));
      }
      index = this.index && (this.index.compile(o, LEVEL_LIST));
      if (name && !this.pattern) {
        scope.find(name);
      }
      if (index) {
        scope.find(index);
      }
      if (this.returns) {
        rvar = scope.freeVariable('results');
      }
      ivar = (this.object && index) || scope.freeVariable('i');
      kvar = (this.range && name) || index || ivar;
      kvarAssign = kvar !== ivar ? "" + kvar + " = " : "";
      if (this.step && !this.range) {
        _ref3 = this.cacheToCodeFragments(this.step.cache(o, LEVEL_LIST)), step = _ref3[0], stepVar = _ref3[1];
        stepNum = stepVar.match(NUMBER);
      }
      if (this.pattern) {
        name = ivar;
      }
      varPart = '';
      guardPart = '';
      defPart = '';
      idt1 = this.tab + TAB;
      source.icedStatementAssertion();
      if (this.icedNodeFlag) {
        return this.icedCompileIced(o, {
          stepVar: stepVar,
          body: body,
          kvar: kvar,
          guard: this.guard
        });
      }
      if (this.range) {
        forPartFragments = source.compileToFragments(merge(o, {
          index: ivar,
          name: name,
          step: this.step
        }));
      } else {
        svar = this.source.compile(o, LEVEL_LIST);
        if ((name || this.own) && !IDENTIFIER.test(svar)) {
          defPart += "" + this.tab + (ref = scope.freeVariable('ref')) + " = " + svar + ";\n";
          svar = ref;
        }
        if (name && !this.pattern) {
          namePart = "" + name + " = " + svar + "[" + kvar + "]";
        }
        if (!this.object) {
          if (step !== stepVar) {
            defPart += "" + this.tab + step + ";\n";
          }
          if (!(this.step && stepNum && (down = parseNum(stepNum[0]) < 0))) {
            lvar = scope.freeVariable('len');
          }
          declare = "" + kvarAssign + ivar + " = 0, " + lvar + " = " + svar + ".length";
          declareDown = "" + kvarAssign + ivar + " = " + svar + ".length - 1";
          compare = "" + ivar + " < " + lvar;
          compareDown = "" + ivar + " >= 0";
          if (this.step) {
            if (stepNum) {
              if (down) {
                compare = compareDown;
                declare = declareDown;
              }
            } else {
              compare = "" + stepVar + " > 0 ? " + compare + " : " + compareDown;
              declare = "(" + stepVar + " > 0 ? (" + declare + ") : " + declareDown + ")";
            }
            increment = "" + ivar + " += " + stepVar;
          } else {
            increment = "" + (kvar !== ivar ? "++" + ivar : "" + ivar + "++");
          }
          forPartFragments = [this.makeCode("" + declare + "; " + compare + "; " + kvarAssign + increment)];
        }
      }
      if (this.returns) {
        resultPart = "" + this.tab + rvar + " = [];\n";
        returnResult = this.icedHasAutocbFlag ? "\n" + this.tab + iced["const"].autocb + "(" + rvar + "); return;" : "\n" + this.tab + "return " + rvar + ";";
        body.makeReturn(rvar);
      }
      if (this.guard) {
        if (body.expressions.length > 1) {
          body.expressions.unshift(new If((new Parens(this.guard)).invert(), new Literal("continue")));
        } else {
          if (this.guard) {
            body = Block.wrap([new If(this.guard, body)]);
          }
        }
      }
      if (this.pattern) {
        body.expressions.unshift(new Assign(this.name, new Literal("" + svar + "[" + kvar + "]")));
      }
      defPartFragments = [].concat(this.makeCode(defPart), this.pluckDirectCall(o, body));
      if (namePart) {
        varPart = "\n" + idt1 + namePart + ";";
      }
      if (this.object) {
        forPartFragments = [this.makeCode("" + kvar + " in " + svar)];
        if (this.own) {
          guardPart = "\n" + idt1 + "if (!" + (utility('hasProp')) + ".call(" + svar + ", " + kvar + ")) continue;";
        }
      }
      bodyFragments = body.compileToFragments(merge(o, {
        indent: idt1
      }), LEVEL_TOP);
      if (bodyFragments && (bodyFragments.length > 0)) {
        bodyFragments = [].concat(this.makeCode("\n"), bodyFragments, this.makeCode("\n"));
      }
      return [].concat(defPartFragments, this.makeCode("" + (resultPart || '') + this.tab + "for ("), forPartFragments, this.makeCode(") {" + guardPart + varPart), bodyFragments, this.makeCode("" + this.tab + "}" + (returnResult || '')));
    };

    For.prototype.pluckDirectCall = function(o, body) {
      var base, defs, expr, fn, idx, ref, val, _i, _len, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8;
      defs = [];
      _ref2 = body.expressions;
      for (idx = _i = 0, _len = _ref2.length; _i < _len; idx = ++_i) {
        expr = _ref2[idx];
        expr = expr.unwrapAll();
        if (!(expr instanceof Call)) {
          continue;
        }
        val = (_ref3 = expr.variable) != null ? _ref3.unwrapAll() : void 0;
        if (!((val instanceof Code) || (val instanceof Value && ((_ref4 = val.base) != null ? _ref4.unwrapAll() : void 0) instanceof Code && val.properties.length === 1 && ((_ref5 = (_ref6 = val.properties[0].name) != null ? _ref6.value : void 0) === 'call' || _ref5 === 'apply')))) {
          continue;
        }
        fn = ((_ref7 = val.base) != null ? _ref7.unwrapAll() : void 0) || val;
        ref = new Literal(o.scope.freeVariable('fn'));
        base = new Value(ref);
        if (val.base) {
          _ref8 = [base, val], val.base = _ref8[0], base = _ref8[1];
        }
        body.expressions[idx] = new Call(base, expr.args);
        defs = defs.concat(this.makeCode(this.tab), new Assign(ref, fn).compileToFragments(o, LEVEL_TOP), this.makeCode(';\n'));
      }
      return defs;
    };

    For.prototype.icedCompileIced = function(o, d) {
      var a1, a2, a3, a4, a5, a_positive, a_stepVal, b, begin, body, condition, down, empty_arr, end, excl, guard, iname, init, init_step, is_positive, is_step_positive, ival, key, key_lit, key_val, keys, keys_access, keys_len, keys_val, kval, len, len_rhs, len_val, loop_body, loop_keys, loop_source, neg, pos, positive, pre_body, ref, ref_val, ref_val_copy, scope, source_access, start_rhs, step, stepNum, stepVal, stepVar, step_var, step_var_val, _, _ref2;
      body = d.body;
      condition = null;
      init = [];
      step = null;
      scope = o.scope;
      pre_body = new Block([]);
      if (this.object) {
        ref = scope.freeVariable('ref');
        ref_val = new Value(new Literal(ref));
        a1 = new Assign(ref_val, this.source);
        keys = scope.freeVariable('keys');
        keys_val = new Value(new Literal(keys));
        key = scope.freeVariable('k');
        key_lit = new Literal(key);
        key_val = new Value(key_lit);
        empty_arr = new Value(new Arr);
        loop_body = new Block([key_val]);
        loop_source = {
          object: true,
          name: key_lit,
          source: ref_val
        };
        loop_keys = new For(loop_body, loop_source);
        a2 = new Assign(keys_val, loop_keys);
        iname = scope.freeVariable('i');
        ival = new Value(new Literal(iname));
        a3 = new Assign(ival, new Value(new Literal(0)));
        init = [a1, a2, a3];
        keys_len = keys_val.copy();
        keys_len.add(new Access(new Value(new Literal("length"))));
        condition = new Op('<', ival, keys_len);
        step = new Op('++', ival);
        if (this.name) {
          source_access = ref_val.copy();
          source_access.add(new Index(this.index));
          a5 = new Assign(this.name, source_access);
          pre_body.unshift(a5);
        }
        keys_access = keys_val.copy();
        keys_access.add(new Index(ival));
        a4 = new Assign(this.index, keys_access);
        pre_body.unshift(a4);
      } else if (this.range) {
        if (!this.name) {
          this.name = new Literal(d.kvar);
        }
        begin = new Value(new Literal(o.scope.freeVariable("begin")));
        end = new Value(new Literal(o.scope.freeVariable("end")));
        positive = new Value(new Literal(o.scope.freeVariable("positive")));
        stepVal = new Value(new Literal(o.scope.freeVariable("step")));
        if (this.step) {
          a_stepVal = new Assign(stepVal, this.step);
          a_positive = new Assign(positive, new Op(">", stepVal, new Literal(0)), null, {
            icedlocal: true
          });
        } else {
          is_positive = new Op(">", end, begin);
          a_stepVal = new If(is_positive, new Assign(stepVal, new Literal(1)));
          a_stepVal.addElse(new Assign(stepVal, new Literal(-1)));
          a_positive = new Assign(positive, is_positive, null, {
            icedlocal: true
          });
        }
        step = new Op('+=', this.name, stepVal);
        excl = this.source.base.exclusive ? "=" : '';
        pos = new Op("&&", new Op("===", positive, new Literal(true)), new Op(">" + excl, this.name, this.source.base.to));
        neg = new Op("&&", new Op("===", positive, new Literal(false)), new Op("<" + excl, this.name, this.source.base.to));
        condition = new Op("||", new Parens(pos), new Parens(neg));
        condition = condition.invert();
        init = [
          new Assign(this.name, this.source.base.from), new Assign(begin, this.source.base.from, null, {
            icedlocal: true
          }), new Assign(end, this.source.base.to, null, {
            icedlocal: true
          }), a_stepVal, a_positive
        ];
      } else if (!this.range && this.name) {
        kval = new Value(new Literal(d.kvar));
        len = scope.freeVariable('len');
        ref = scope.freeVariable('ref');
        ref_val = new Value(new Literal(ref));
        len_val = new Value(new Literal(len));
        a1 = new Assign(ref_val, this.source);
        len_rhs = ref_val.copy().add(new Access(new Value(new Literal("length"))));
        a2 = new Assign(len_val, len_rhs);
        init = [a1, a2];
        if (!this.step) {
          a3 = new Assign(kval, new Literal(0));
          step = new Op('++', kval);
          condition = new Op('<', kval, len_val);
          init.push(a3);
        } else {
          _ref2 = this.cacheToCodeFragments(this.step.cache(o, LEVEL_LIST)), _ = _ref2[0], stepVar = _ref2[1];
          stepNum = stepVar.match(NUMBER);
          if (stepNum) {
            step = new Assign(kval, new Op('+', kval, this.step));
            down = parseNum(stepNum[0]) < 0;
            if (down) {
              a3 = new Assign(kval, new Op('-', len_val, new Literal(1)));
              condition = new Op('>=', kval, new Literal(0));
            } else {
              a3 = new Assign(kval, new Literal(0));
              condition = new Op('<', kval, len_val);
            }
            init.push(a3);
          } else {
            step_var = scope.freeVariable('step');
            step_var_val = new Value(new Literal(step_var));
            init_step = new Assign(step_var_val, new Value(this.step));
            is_step_positive = new Op('>', step_var_val, new Literal(0));
            start_rhs = new If(is_step_positive, new Value(new Literal(0)));
            start_rhs.addElse(new Op('-', len_val, new Literal(1)));
            step = new Assign(kval, new Op('+', kval, step_var_val));
            a3 = new Assign(kval, start_rhs);
            condition = new Op('&&', new Op('>=', kval, new Literal(0)), new Op('<', kval, len_val));
            init.push(init_step, a3);
          }
        }
        ref_val_copy = ref_val.copy();
        ref_val_copy.add(new Index(kval));
        a4 = new Assign(this.name, ref_val_copy);
        pre_body.unshift(a4);
      }
      guard = d.guard;
      b = this.icedWrap({
        condition: condition,
        body: body,
        init: init,
        step: step,
        guard: guard,
        pre_body: pre_body
      });
      return b.compileNode(o);
    };

    return For;

  })(While);

  exports.Switch = Switch = (function(_super) {
    __extends(Switch, _super);

    function Switch(subject, cases, otherwise) {
      this.subject = subject;
      this.cases = cases;
      this.otherwise = otherwise;
      Switch.__super__.constructor.call(this);
    }

    Switch.prototype.children = ['subject', 'cases', 'otherwise'];

    Switch.prototype.isStatement = YES;

    Switch.prototype.jumps = function(o) {
      var block, conds, jumpNode, _i, _len, _ref2, _ref3, _ref4;
      if (o == null) {
        o = {
          block: true
        };
      }
      _ref2 = this.cases;
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        _ref3 = _ref2[_i], conds = _ref3[0], block = _ref3[1];
        if (jumpNode = block.jumps(o)) {
          return jumpNode;
        }
      }
      return (_ref4 = this.otherwise) != null ? _ref4.jumps(o) : void 0;
    };

    Switch.prototype.makeReturn = function(res) {
      var pair, _i, _len, _ref2, _ref3;
      _ref2 = this.cases;
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        pair = _ref2[_i];
        pair[1].makeReturn(res);
      }
      if (res) {
        this.otherwise || (this.otherwise = new Block([new Literal('void 0')]));
      }
      if ((_ref3 = this.otherwise) != null) {
        _ref3.makeReturn(res);
      }
      return this;
    };

    Switch.prototype.compileNode = function(o) {
      var block, body, cond, conditions, expr, fragments, i, idt1, idt2, _i, _j, _len, _len1, _ref2, _ref3, _ref4;
      if (this.subject) {
        this.subject.icedStatementAssertion();
      }
      idt1 = o.indent + TAB;
      idt2 = o.indent = idt1 + TAB;
      fragments = [].concat(this.makeCode(this.tab + "switch ("), (this.subject ? this.subject.compileToFragments(o, LEVEL_PAREN) : this.makeCode("false")), this.makeCode(") {\n"));
      _ref2 = this.cases;
      for (i = _i = 0, _len = _ref2.length; _i < _len; i = ++_i) {
        _ref3 = _ref2[i], conditions = _ref3[0], block = _ref3[1];
        _ref4 = flatten([conditions]);
        for (_j = 0, _len1 = _ref4.length; _j < _len1; _j++) {
          cond = _ref4[_j];
          if (!this.subject) {
            cond = cond.invert();
          }
          fragments = fragments.concat(this.makeCode(idt1 + "case "), cond.compileToFragments(o, LEVEL_PAREN), this.makeCode(":\n"));
        }
        if ((body = block.compileToFragments(o, LEVEL_TOP)).length > 0) {
          fragments = fragments.concat(body, this.makeCode('\n'));
        }
        if (i === this.cases.length - 1 && !this.otherwise) {
          break;
        }
        expr = this.lastNonComment(block.expressions);
        if (expr instanceof Return || (expr instanceof Literal && expr.jumps() && expr.value !== 'debugger')) {
          continue;
        }
        fragments.push(cond.makeCode(idt2 + 'break;\n'));
      }
      if (this.otherwise && this.otherwise.expressions.length) {
        fragments.push.apply(fragments, [this.makeCode(idt1 + "default:\n")].concat(__slice.call(this.otherwise.compileToFragments(o, LEVEL_TOP)), [this.makeCode("\n")]));
      }
      fragments.push(this.makeCode(this.tab + '}'));
      return fragments;
    };

    Switch.prototype.icedCallContinuation = function() {
      var block, condition, _i, _len, _ref2, _ref3;
      _ref2 = this.cases;
      for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
        _ref3 = _ref2[_i], condition = _ref3[0], block = _ref3[1];
        block.icedThreadReturn();
      }
      if (this.otherwise != null) {
        return this.otherwise.icedThreadReturn();
      } else {
        return this.otherwise = new Block([new IcedTailCall]);
      }
    };

    return Switch;

  })(Base);

  exports.If = If = (function(_super) {
    __extends(If, _super);

    function If(condition, body, options) {
      this.body = body;
      if (options == null) {
        options = {};
      }
      If.__super__.constructor.call(this);
      this.condition = options.type === 'unless' ? condition.invert() : condition;
      this.elseBody = null;
      this.isChain = false;
      this.soak = options.soak;
    }

    If.prototype.children = ['condition', 'body', 'elseBody'];

    If.prototype.bodyNode = function() {
      var _ref2;
      return (_ref2 = this.body) != null ? _ref2.unwrap() : void 0;
    };

    If.prototype.elseBodyNode = function() {
      var _ref2;
      return (_ref2 = this.elseBody) != null ? _ref2.unwrap() : void 0;
    };

    If.prototype.addElse = function(elseBody) {
      if (this.isChain) {
        this.elseBodyNode().addElse(elseBody);
      } else {
        this.isChain = elseBody instanceof If;
        this.elseBody = this.ensureBlock(elseBody);
        this.elseBody.updateLocationDataIfMissing(elseBody.locationData);
      }
      return this;
    };

    If.prototype.isStatement = function(o) {
      var _ref2;
      return (o != null ? o.level : void 0) === LEVEL_TOP || this.bodyNode().isStatement(o) || ((_ref2 = this.elseBodyNode()) != null ? _ref2.isStatement(o) : void 0);
    };

    If.prototype.jumps = function(o) {
      var _ref2;
      return this.body.jumps(o) || ((_ref2 = this.elseBody) != null ? _ref2.jumps(o) : void 0);
    };

    If.prototype.compileNode = function(o) {
      this.condition.icedStatementAssertion();
      if (this.isStatement(o || this.icedIsCpsPivot())) {
        return this.compileStatement(o);
      } else {
        return this.compileExpression(o);
      }
    };

    If.prototype.makeReturn = function(res) {
      if (res) {
        this.elseBody || (this.elseBody = new Block([new Literal('void 0')]));
      }
      this.body && (this.body = new Block([this.body.makeReturn(res)]));
      this.elseBody && (this.elseBody = new Block([this.elseBody.makeReturn(res)]));
      return this;
    };

    If.prototype.ensureBlock = function(node) {
      if (node instanceof Block) {
        return node;
      } else {
        return new Block([node]);
      }
    };

    If.prototype.compileStatement = function(o) {
      var answer, body, child, cond, exeq, ifPart, indent;
      child = del(o, 'chainChild');
      exeq = del(o, 'isExistentialEquals');
      if (exeq) {
        return new If(this.condition.invert(), this.elseBodyNode(), {
          type: 'if'
        }).compileToFragments(o);
      }
      indent = o.indent + TAB;
      cond = this.condition.compileToFragments(o, LEVEL_PAREN);
      body = this.ensureBlock(this.body).compileToFragments(merge(o, {
        indent: indent
      }));
      ifPart = [].concat(this.makeCode("if ("), cond, this.makeCode(") {\n"), body, this.makeCode("\n" + this.tab + "}"));
      if (!child) {
        ifPart.unshift(this.makeCode(this.tab));
      }
      if (!this.elseBody) {
        return ifPart;
      }
      answer = ifPart.concat(this.makeCode(' else '));
      if (this.isChain) {
        o.chainChild = true;
        answer = answer.concat(this.elseBody.unwrap().compileToFragments(o, LEVEL_TOP));
      } else {
        answer = answer.concat(this.makeCode("{\n"), this.elseBody.compileToFragments(merge(o, {
          indent: indent
        }), LEVEL_TOP), this.makeCode("\n" + this.tab + "}"));
      }
      return answer;
    };

    If.prototype.compileExpression = function(o) {
      var alt, body, cond, fragments;
      cond = this.condition.compileToFragments(o, LEVEL_COND);
      body = this.bodyNode().compileToFragments(o, LEVEL_LIST);
      alt = this.elseBodyNode() ? this.elseBodyNode().compileToFragments(o, LEVEL_LIST) : [this.makeCode('void 0')];
      fragments = cond.concat(this.makeCode(" ? "), body, this.makeCode(" : "), alt);
      if (o.level >= LEVEL_COND) {
        return this.wrapInBraces(fragments);
      } else {
        return fragments;
      }
    };

    If.prototype.unfoldSoak = function() {
      return this.soak && this;
    };

    If.prototype.icedCallContinuation = function() {
      if (this.elseBody) {
        this.elseBody.icedThreadReturn();
        this.isChain = false;
      } else {
        this.addElse(new IcedTailCall);
      }
      return this.body.icedThreadReturn();
    };

    return If;

  })(Base);

  Closure = {
    wrap: function(expressions, statement, noReturn) {
      var args, argumentsNode, call, func, meth;
      if (expressions.jumps()) {
        return expressions;
      }
      func = new Code([], Block.wrap([expressions]));
      args = [];
      argumentsNode = expressions.contains(this.isLiteralArguments);
      if (argumentsNode && expressions.classBody) {
        argumentsNode.error("Class bodies shouldn't reference arguments");
      }
      if (argumentsNode || expressions.contains(this.isLiteralThis)) {
        meth = new Literal(argumentsNode ? 'apply' : 'call');
        args = [new Literal('this')];
        if (argumentsNode) {
          args.push(new Literal('arguments'));
        }
        func = new Value(func, [new Access(meth)]);
      }
      func.noReturn = noReturn;
      call = new Call(func, args);
      if (statement) {
        return Block.wrap([call]);
      } else {
        return call;
      }
    },
    isLiteralArguments: function(node) {
      return node instanceof Literal && node.value === 'arguments' && !node.asKey;
    },
    isLiteralThis: function(node) {
      return (node instanceof Literal && node.value === 'this' && !node.asKey) || (node instanceof Code && node.bound) || (node instanceof Call && node.isSuper);
    }
  };

  unfoldSoak = function(o, parent, name) {
    var ifn;
    if (!(ifn = parent[name].unfoldSoak(o))) {
      return;
    }
    parent[name] = ifn.body;
    ifn.body = new Value(parent);
    return ifn;
  };

  CpsCascade = {
    wrap: function(statement, rest, returnValue, o) {
      var args, block, call, cont, e, func;
      func = new Code([new Param(new Literal(iced["const"].k))], Block.wrap([statement]), 'icedgen');
      args = [];
      if (returnValue) {
        returnValue.bindName(o);
        args.push(returnValue);
      }
      block = Block.wrap([rest]);
      if ((e = block.icedGetSingle()) && e instanceof IcedTailCall && e.canInline()) {
        cont = e.extractFunc();
      } else {
        cont = new Code(args, block, 'icedgen');
      }
      call = new Call(func, [cont]);
      return new Block([call]);
    }
  };

  IcedTailCall = (function(_super) {
    __extends(IcedTailCall, _super);

    function IcedTailCall(func, val) {
      this.func = func;
      if (val == null) {
        val = null;
      }
      IcedTailCall.__super__.constructor.call(this);
      if (!this.func) {
        this.func = iced["const"].k;
      }
      this.value = val;
    }

    IcedTailCall.prototype.children = ['value'];

    IcedTailCall.prototype.assignValue = function(v) {
      return this.value = v;
    };

    IcedTailCall.prototype.canInline = function() {
      return !this.value || this.value instanceof IcedReturnValue;
    };

    IcedTailCall.prototype.literalFunc = function() {
      return new Literal(this.func);
    };

    IcedTailCall.prototype.extractFunc = function() {
      return new Value(this.literalFunc());
    };

    IcedTailCall.prototype.compileNode = function(o) {
      var args, f, out;
      f = this.literalFunc();
      out = o.level === LEVEL_TOP ? this.value ? new Block([this.value, new Call(f)]) : new Call(f) : (args = this.value ? [this.value] : [], new Call(f, args));
      return out.compileNode(o);
    };

    return IcedTailCall;

  })(Base);

  IcedReturnValue = (function(_super) {
    __extends(IcedReturnValue, _super);

    IcedReturnValue.counter = 0;

    function IcedReturnValue() {
      IcedReturnValue.__super__.constructor.call(this, null, null, false);
    }

    IcedReturnValue.prototype.bindName = function(o) {
      var l;
      l = "" + (o.scope.freeVariable(iced["const"].param, false)) + "_" + (IcedReturnValue.counter++);
      return this.name = new Literal(l);
    };

    IcedReturnValue.prototype.compile = function(o) {
      if (!this.name) {
        this.bindName(o);
      }
      return IcedReturnValue.__super__.compile.call(this, o);
    };

    return IcedReturnValue;

  })(Param);

  InlineRuntime = {
    generate: function(ns_window) {
      var a1, a2, af, apply_call, assignments, body, call_meth, cn, cnt, cnt_member, constructor_assign, constructor_body, constructor_code, constructor_name, constructor_params, decr, defer_assign, defer_body, defer_code, defer_name, defer_params, dp, dp_value, fn, fn_assign, fn_code, fn_name, if_body, if_cond, if_expr, inc, inner_body, inner_code, inner_params, ip, k, k_member, klass, klass_assign, my_apply, my_if, my_null, ns, ns_obj, ns_val, obj, outer_block, p1, ret_member, tr_assign, tr_block, tr_code, tr_name, tr_params, _fulfill_assign, _fulfill_body, _fulfill_call, _fulfill_code, _fulfill_method, _fulfill_name;
      k = new Literal("continuation");
      cnt = new Literal("count");
      cn = new Value(new Literal(iced["const"].Deferrals));
      ns = new Value(new Literal(iced["const"].ns));
      if (ns_window) {
        ns_window.add(new Access(ns));
        ns = ns_window;
      }
      k_member = new Value(new Literal("this"));
      k_member.add(new Access(k));
      p1 = new Param(k_member);
      cnt_member = new Value(new Literal("this"));
      cnt_member.add(new Access(cnt));
      ret_member = new Value(new Literal("this"));
      ret_member.add(new Access(new Value(new Literal(iced["const"].retslot))));
      a1 = new Assign(cnt_member, new Value(new Literal(1)));
      a2 = new Assign(ret_member, NULL());
      constructor_params = [p1];
      constructor_body = new Block([a1, a2]);
      constructor_code = new Code(constructor_params, constructor_body);
      constructor_name = new Value(new Literal("constructor"));
      constructor_assign = new Assign(constructor_name, constructor_code);
      if_expr = new Call(k_member, [ret_member]);
      if_body = new Block([if_expr]);
      decr = new Op('--', cnt_member);
      if_cond = new Op('!', decr);
      my_if = new If(if_cond, if_body);
      _fulfill_body = new Block([my_if]);
      _fulfill_code = new Code([], _fulfill_body);
      _fulfill_name = new Value(new Literal(iced["const"].fulfill));
      _fulfill_assign = new Assign(_fulfill_name, _fulfill_code);
      inc = new Op("++", cnt_member);
      ip = new Literal("inner_params");
      dp = new Literal("defer_params");
      dp_value = new Value(dp);
      call_meth = new Value(dp);
      af = new Literal(iced["const"].assign_fn);
      call_meth.add(new Access(af, "soak"));
      my_apply = new Literal("apply");
      call_meth.add(new Access(my_apply, "soak"));
      my_null = NULL();
      apply_call = new Call(call_meth, [my_null, new Value(ip)]);
      _fulfill_method = new Value(new Literal("this"));
      _fulfill_method.add(new Access(new Literal(iced["const"].fulfill)));
      _fulfill_call = new Call(_fulfill_method, []);
      inner_body = new Block([apply_call, _fulfill_call]);
      inner_params = [new Param(ip, null, true)];
      inner_code = new Code(inner_params, inner_body, "boundfunc");
      defer_body = new Block([inc, inner_code]);
      defer_params = [new Param(dp)];
      defer_code = new Code(defer_params, defer_body);
      defer_name = new Value(new Literal(iced["const"].defer_method));
      defer_assign = new Assign(defer_name, defer_code);
      assignments = [constructor_assign, _fulfill_assign, defer_assign];
      obj = new Obj(assignments, true);
      body = new Block([new Value(obj)]);
      klass = new Class(null, null, body);
      klass_assign = new Assign(cn, klass, "object");
      outer_block = new Block([NULL()]);
      fn_code = new Code([], outer_block);
      fn_name = new Value(new Literal(iced["const"].findDeferral));
      fn_assign = new Assign(fn_name, fn_code, "object");
      fn = new Literal("_fn");
      tr_block = new Block([new Call(new Value(fn), [])]);
      tr_params = [new Param(fn)];
      tr_code = new Code(tr_params, tr_block);
      tr_name = new Value(new Literal(iced["const"].trampoline));
      tr_assign = new Assign(tr_name, tr_code, "object");
      ns_obj = new Obj([klass_assign, fn_assign, tr_assign], true);
      ns_val = new Value(ns_obj);
      return new Assign(ns, ns_val);
    }
  };

  UTILITIES = {
    "extends": function() {
      return "function(child, parent) { for (var key in parent) { if (" + (utility('hasProp')) + ".call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; }";
    },
    bind: function() {
      return 'function(fn, me){ return function(){ return fn.apply(me, arguments); }; }';
    },
    indexOf: function() {
      return "[].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; }";
    },
    modulo: function() {
      return "function(a, b) { return (+a % (b = +b) + b) % b; }";
    },
    hasProp: function() {
      return '{}.hasOwnProperty';
    },
    slice: function() {
      return '[].slice';
    }
  };

  LEVEL_TOP = 1;

  LEVEL_PAREN = 2;

  LEVEL_LIST = 3;

  LEVEL_COND = 4;

  LEVEL_OP = 5;

  LEVEL_ACCESS = 6;

  TAB = '  ';

  IDENTIFIER_STR = "[$A-Za-z_\\x7f-\\uffff][$\\w\\x7f-\\uffff]*";

  IDENTIFIER = RegExp("^" + IDENTIFIER_STR + "$");

  SIMPLENUM = /^[+-]?\d+$/;

  HEXNUM = /^[+-]?0x[\da-f]+/i;

  NUMBER = /^[+-]?(?:0x[\da-f]+|\d*\.?\d+(?:e[+-]?\d+)?)$/i;

  METHOD_DEF = RegExp("^(" + IDENTIFIER_STR + ")(\\.prototype)?(?:\\.(" + IDENTIFIER_STR + ")|\\[(\"(?:[^\\\\\"\\r\\n]|\\\\.)*\"|'(?:[^\\\\'\\r\\n]|\\\\.)*')\\]|\\[(0x[\\da-fA-F]+|\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\])$");

  IS_STRING = /^['"]/;

  IS_REGEX = /^\//;

  utility = function(name) {
    var ref;
    ref = "__" + name;
    Scope.root.assign(ref, UTILITIES[name]());
    return ref;
  };

  multident = function(code, tab) {
    code = code.replace(/\n/g, '$&' + tab);
    return code.replace(/\s+$/, '');
  };

  parseNum = function(x) {
    if (x == null) {
      return 0;
    } else if (x.match(HEXNUM)) {
      return parseInt(x, 16);
    } else {
      return parseFloat(x);
    }
  };

  isLiteralArguments = function(node) {
    return node instanceof Literal && node.value === 'arguments' && !node.asKey;
  };

  isLiteralThis = function(node) {
    return (node instanceof Literal && node.value === 'this' && !node.asKey) || (node instanceof Code && node.bound) || (node instanceof Call && node.isSuper);
  };

  unfoldSoak = function(o, parent, name) {
    var ifn;
    if (!(ifn = parent[name].unfoldSoak(o))) {
      return;
    }
    parent[name] = ifn.body;
    ifn.body = new Value(parent);
    return ifn;
  };

}).call(this);

}).call(this,"/node_modules/iced-coffee-script/lib/coffee-script")

},{"./helpers":21,"./lexer":23,"./scope":28,"iced-runtime":32,"path":37}],25:[function(require,module,exports){
(function (process){
/* parser generated by jison 0.4.13 */
/*
  Returns a Parser object of the following structure:

  Parser: {
    yy: {}
  }

  Parser.prototype: {
    yy: {},
    trace: function(),
    symbols_: {associative list: name ==> number},
    terminals_: {associative list: number ==> name},
    productions_: [...],
    performAction: function anonymous(yytext, yyleng, yylineno, yy, yystate, $$, _$),
    table: [...],
    defaultActions: {...},
    parseError: function(str, hash),
    parse: function(input),

    lexer: {
        EOF: 1,
        parseError: function(str, hash),
        setInput: function(input),
        input: function(),
        unput: function(str),
        more: function(),
        less: function(n),
        pastInput: function(),
        upcomingInput: function(),
        showPosition: function(),
        test_match: function(regex_match_array, rule_index),
        next: function(),
        lex: function(),
        begin: function(condition),
        popState: function(),
        _currentRules: function(),
        topState: function(),
        pushState: function(condition),

        options: {
            ranges: boolean           (optional: true ==> token location info will include a .range[] member)
            flex: boolean             (optional: true ==> flex-like lexing behaviour where the rules are tested exhaustively to find the longest match)
            backtrack_lexer: boolean  (optional: true ==> lexer regexes are tested in order and for each matching regex the action code is invoked; the lexer terminates the scan when a token is returned by the action code)
        },

        performAction: function(yy, yy_, $avoiding_name_collisions, YY_START),
        rules: [...],
        conditions: {associative list: name ==> set},
    }
  }


  token location info (@$, _$, etc.): {
    first_line: n,
    last_line: n,
    first_column: n,
    last_column: n,
    range: [start_number, end_number]       (where the numbers are indexes into the input string, regular zero-based)
  }


  the parseError function receives a 'hash' object with these members for lexer and parser errors: {
    text:        (matched text)
    token:       (the produced terminal token, if any)
    line:        (yylineno)
  }
  while parser (grammar) errors will also provide these members, i.e. parser errors deliver a superset of attributes: {
    loc:         (yylloc)
    expected:    (string describing the set of expected tokens)
    recoverable: (boolean: TRUE when the parser has a error recovery rule available for this particular error)
  }
*/
var parser = (function(){
var parser = {trace: function trace() { },
yy: {},
symbols_: {"error":2,"Root":3,"Body":4,"Line":5,"TERMINATOR":6,"Expression":7,"Statement":8,"Return":9,"Comment":10,"STATEMENT":11,"Await":12,"AWAIT":13,"Block":14,"Value":15,"Invocation":16,"Code":17,"Operation":18,"Assign":19,"If":20,"Try":21,"While":22,"For":23,"Switch":24,"Class":25,"Throw":26,"Defer":27,"INDENT":28,"OUTDENT":29,"Identifier":30,"IDENTIFIER":31,"AlphaNumeric":32,"NUMBER":33,"STRING":34,"Literal":35,"JS":36,"REGEX":37,"DEBUGGER":38,"UNDEFINED":39,"NULL":40,"BOOL":41,"Assignable":42,"=":43,"AssignObj":44,"ObjAssignable":45,":":46,"ThisProperty":47,"RETURN":48,"HERECOMMENT":49,"PARAM_START":50,"ParamList":51,"PARAM_END":52,"FuncGlyph":53,"->":54,"=>":55,"OptComma":56,",":57,"Param":58,"ParamVar":59,"...":60,"Array":61,"Object":62,"Splat":63,"SimpleAssignable":64,"Accessor":65,"Parenthetical":66,"Range":67,"This":68,".":69,"?.":70,"::":71,"?::":72,"Index":73,"INDEX_START":74,"IndexValue":75,"INDEX_END":76,"INDEX_SOAK":77,"Slice":78,"{":79,"AssignList":80,"}":81,"CLASS":82,"EXTENDS":83,"OptFuncExist":84,"Arguments":85,"SUPER":86,"DEFER":87,"FUNC_EXIST":88,"CALL_START":89,"CALL_END":90,"ArgList":91,"THIS":92,"@":93,"[":94,"]":95,"RangeDots":96,"..":97,"Arg":98,"SimpleArgs":99,"TRY":100,"Catch":101,"FINALLY":102,"CATCH":103,"THROW":104,"(":105,")":106,"WhileSource":107,"WHILE":108,"WHEN":109,"UNTIL":110,"Loop":111,"LOOP":112,"ForBody":113,"FOR":114,"ForStart":115,"ForSource":116,"ForVariables":117,"OWN":118,"ForValue":119,"FORIN":120,"FOROF":121,"BY":122,"SWITCH":123,"Whens":124,"ELSE":125,"When":126,"LEADING_WHEN":127,"IfBlock":128,"IF":129,"POST_IF":130,"UNARY":131,"UNARY_MATH":132,"-":133,"+":134,"YIELD":135,"FROM":136,"--":137,"++":138,"?":139,"MATH":140,"**":141,"SHIFT":142,"COMPARE":143,"LOGIC":144,"RELATION":145,"COMPOUND_ASSIGN":146,"$accept":0,"$end":1},
terminals_: {2:"error",6:"TERMINATOR",11:"STATEMENT",13:"AWAIT",28:"INDENT",29:"OUTDENT",31:"IDENTIFIER",33:"NUMBER",34:"STRING",36:"JS",37:"REGEX",38:"DEBUGGER",39:"UNDEFINED",40:"NULL",41:"BOOL",43:"=",46:":",48:"RETURN",49:"HERECOMMENT",50:"PARAM_START",52:"PARAM_END",54:"->",55:"=>",57:",",60:"...",69:".",70:"?.",71:"::",72:"?::",74:"INDEX_START",76:"INDEX_END",77:"INDEX_SOAK",79:"{",81:"}",82:"CLASS",83:"EXTENDS",86:"SUPER",87:"DEFER",88:"FUNC_EXIST",89:"CALL_START",90:"CALL_END",92:"THIS",93:"@",94:"[",95:"]",97:"..",100:"TRY",102:"FINALLY",103:"CATCH",104:"THROW",105:"(",106:")",108:"WHILE",109:"WHEN",110:"UNTIL",112:"LOOP",114:"FOR",118:"OWN",120:"FORIN",121:"FOROF",122:"BY",123:"SWITCH",125:"ELSE",127:"LEADING_WHEN",129:"IF",130:"POST_IF",131:"UNARY",132:"UNARY_MATH",133:"-",134:"+",135:"YIELD",136:"FROM",137:"--",138:"++",139:"?",140:"MATH",141:"**",142:"SHIFT",143:"COMPARE",144:"LOGIC",145:"RELATION",146:"COMPOUND_ASSIGN"},
productions_: [0,[3,0],[3,1],[4,1],[4,3],[4,2],[5,1],[5,1],[8,1],[8,1],[8,1],[8,1],[12,2],[12,2],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[14,2],[14,3],[30,1],[32,1],[32,1],[35,1],[35,1],[35,1],[35,1],[35,1],[35,1],[35,1],[19,3],[19,4],[19,5],[44,1],[44,3],[44,5],[44,1],[45,1],[45,1],[45,1],[9,2],[9,1],[10,1],[17,5],[17,2],[53,1],[53,1],[56,0],[56,1],[51,0],[51,1],[51,3],[51,4],[51,6],[58,1],[58,2],[58,3],[58,1],[59,1],[59,1],[59,1],[59,1],[63,2],[64,1],[64,2],[64,2],[64,1],[42,1],[42,1],[42,1],[15,1],[15,1],[15,1],[15,1],[15,1],[65,2],[65,2],[65,2],[65,2],[65,2],[65,1],[65,1],[73,3],[73,2],[75,1],[75,1],[62,4],[80,0],[80,1],[80,3],[80,4],[80,6],[25,1],[25,2],[25,3],[25,4],[25,2],[25,3],[25,4],[25,5],[16,3],[16,3],[16,1],[16,2],[27,2],[84,0],[84,1],[85,2],[85,4],[68,1],[68,1],[47,2],[61,2],[61,4],[96,1],[96,1],[67,5],[78,3],[78,2],[78,2],[78,1],[91,1],[91,3],[91,4],[91,4],[91,6],[98,1],[98,1],[98,1],[99,1],[99,3],[21,2],[21,3],[21,4],[21,5],[101,3],[101,3],[101,2],[26,2],[66,3],[66,5],[107,2],[107,4],[107,2],[107,4],[22,2],[22,2],[22,2],[22,1],[111,2],[111,2],[23,2],[23,2],[23,2],[113,2],[113,2],[115,2],[115,3],[119,1],[119,1],[119,1],[119,1],[117,1],[117,3],[116,2],[116,2],[116,4],[116,4],[116,4],[116,6],[116,6],[24,5],[24,7],[24,4],[24,6],[124,1],[124,2],[126,3],[126,4],[128,3],[128,5],[20,1],[20,3],[20,3],[20,3],[18,2],[18,2],[18,2],[18,2],[18,2],[18,2],[18,3],[18,2],[18,2],[18,2],[18,2],[18,2],[18,3],[18,3],[18,3],[18,3],[18,3],[18,3],[18,3],[18,3],[18,3],[18,5],[18,4],[18,3]],
performAction: function anonymous(yytext, yyleng, yylineno, yy, yystate /* action[1] */, $$ /* vstack */, _$ /* lstack */
/**/) {
/* this == yyval */

var $0 = $$.length - 1;
switch (yystate) {
case 1:return this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Block);
break;
case 2:return this.$ = $$[$0];
break;
case 3:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(yy.Block.wrap([$$[$0]]));
break;
case 4:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])($$[$0-2].push($$[$0]));
break;
case 5:this.$ = $$[$0-1];
break;
case 6:this.$ = $$[$0];
break;
case 7:this.$ = $$[$0];
break;
case 8:this.$ = $$[$0];
break;
case 9:this.$ = $$[$0];
break;
case 10:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Literal($$[$0]));
break;
case 11:this.$ = $$[$0];
break;
case 12:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Await($$[$0]));
break;
case 13:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Await(yy.Block.wrap([$$[$0]])));
break;
case 14:this.$ = $$[$0];
break;
case 15:this.$ = $$[$0];
break;
case 16:this.$ = $$[$0];
break;
case 17:this.$ = $$[$0];
break;
case 18:this.$ = $$[$0];
break;
case 19:this.$ = $$[$0];
break;
case 20:this.$ = $$[$0];
break;
case 21:this.$ = $$[$0];
break;
case 22:this.$ = $$[$0];
break;
case 23:this.$ = $$[$0];
break;
case 24:this.$ = $$[$0];
break;
case 25:this.$ = $$[$0];
break;
case 26:this.$ = $$[$0];
break;
case 27:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Block);
break;
case 28:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])($$[$0-1]);
break;
case 29:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Literal($$[$0]));
break;
case 30:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Literal($$[$0]));
break;
case 31:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Literal($$[$0]));
break;
case 32:this.$ = $$[$0];
break;
case 33:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Literal($$[$0]));
break;
case 34:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Literal($$[$0]));
break;
case 35:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Literal($$[$0]));
break;
case 36:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Undefined);
break;
case 37:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Null);
break;
case 38:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Bool($$[$0]));
break;
case 39:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])(new yy.Assign($$[$0-2], $$[$0]));
break;
case 40:this.$ = yy.addLocationDataFn(_$[$0-3], _$[$0])(new yy.Assign($$[$0-3], $$[$0]));
break;
case 41:this.$ = yy.addLocationDataFn(_$[$0-4], _$[$0])(new yy.Assign($$[$0-4], $$[$0-1]));
break;
case 42:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Value($$[$0]));
break;
case 43:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])(new yy.Assign(yy.addLocationDataFn(_$[$0-2])(new yy.Value($$[$0-2])), $$[$0], 'object'));
break;
case 44:this.$ = yy.addLocationDataFn(_$[$0-4], _$[$0])(new yy.Assign(yy.addLocationDataFn(_$[$0-4])(new yy.Value($$[$0-4])), $$[$0-1], 'object'));
break;
case 45:this.$ = $$[$0];
break;
case 46:this.$ = $$[$0];
break;
case 47:this.$ = $$[$0];
break;
case 48:this.$ = $$[$0];
break;
case 49:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Return($$[$0]));
break;
case 50:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Return);
break;
case 51:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Comment($$[$0]));
break;
case 52:this.$ = yy.addLocationDataFn(_$[$0-4], _$[$0])(new yy.Code($$[$0-3], $$[$0], $$[$0-1]));
break;
case 53:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Code([], $$[$0], $$[$0-1]));
break;
case 54:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])('func');
break;
case 55:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])('boundfunc');
break;
case 56:this.$ = $$[$0];
break;
case 57:this.$ = $$[$0];
break;
case 58:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])([]);
break;
case 59:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])([$$[$0]]);
break;
case 60:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])($$[$0-2].concat($$[$0]));
break;
case 61:this.$ = yy.addLocationDataFn(_$[$0-3], _$[$0])($$[$0-3].concat($$[$0]));
break;
case 62:this.$ = yy.addLocationDataFn(_$[$0-5], _$[$0])($$[$0-5].concat($$[$0-2]));
break;
case 63:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Param($$[$0]));
break;
case 64:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Param($$[$0-1], null, true));
break;
case 65:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])(new yy.Param($$[$0-2], $$[$0]));
break;
case 66:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Expansion);
break;
case 67:this.$ = $$[$0];
break;
case 68:this.$ = $$[$0];
break;
case 69:this.$ = $$[$0];
break;
case 70:this.$ = $$[$0];
break;
case 71:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Splat($$[$0-1]));
break;
case 72:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Value($$[$0]));
break;
case 73:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])($$[$0-1].add($$[$0]));
break;
case 74:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Value($$[$0-1], [].concat($$[$0])));
break;
case 75:this.$ = $$[$0];
break;
case 76:this.$ = $$[$0];
break;
case 77:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Value($$[$0]));
break;
case 78:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Value($$[$0]));
break;
case 79:this.$ = $$[$0];
break;
case 80:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Value($$[$0]));
break;
case 81:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Value($$[$0]));
break;
case 82:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Value($$[$0]));
break;
case 83:this.$ = $$[$0];
break;
case 84:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Access($$[$0]));
break;
case 85:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Access($$[$0].setCustom()));
break;
case 86:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Access($$[$0], 'soak'));
break;
case 87:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])([yy.addLocationDataFn(_$[$0-1])(new yy.Access(new yy.Literal('prototype'))), yy.addLocationDataFn(_$[$0])(new yy.Access($$[$0]))]);
break;
case 88:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])([yy.addLocationDataFn(_$[$0-1])(new yy.Access(new yy.Literal('prototype'), 'soak')), yy.addLocationDataFn(_$[$0])(new yy.Access($$[$0]))]);
break;
case 89:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Access(new yy.Literal('prototype')));
break;
case 90:this.$ = $$[$0];
break;
case 91:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])($$[$0-1]);
break;
case 92:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(yy.extend($$[$0], {
          soak: true
        }));
break;
case 93:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Index($$[$0]));
break;
case 94:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Slice($$[$0]));
break;
case 95:this.$ = yy.addLocationDataFn(_$[$0-3], _$[$0])(new yy.Obj($$[$0-2], $$[$0-3].generated));
break;
case 96:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])([]);
break;
case 97:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])([$$[$0]]);
break;
case 98:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])($$[$0-2].concat($$[$0]));
break;
case 99:this.$ = yy.addLocationDataFn(_$[$0-3], _$[$0])($$[$0-3].concat($$[$0]));
break;
case 100:this.$ = yy.addLocationDataFn(_$[$0-5], _$[$0])($$[$0-5].concat($$[$0-2]));
break;
case 101:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Class);
break;
case 102:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Class(null, null, $$[$0]));
break;
case 103:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])(new yy.Class(null, $$[$0]));
break;
case 104:this.$ = yy.addLocationDataFn(_$[$0-3], _$[$0])(new yy.Class(null, $$[$0-1], $$[$0]));
break;
case 105:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Class($$[$0]));
break;
case 106:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])(new yy.Class($$[$0-1], null, $$[$0]));
break;
case 107:this.$ = yy.addLocationDataFn(_$[$0-3], _$[$0])(new yy.Class($$[$0-2], $$[$0]));
break;
case 108:this.$ = yy.addLocationDataFn(_$[$0-4], _$[$0])(new yy.Class($$[$0-3], $$[$0-1], $$[$0]));
break;
case 109:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])(new yy.Call($$[$0-2], $$[$0], $$[$0-1]));
break;
case 110:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])(new yy.Call($$[$0-2], $$[$0], $$[$0-1]));
break;
case 111:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Call('super', [new yy.Splat(new yy.Literal('arguments'))]));
break;
case 112:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Call('super', $$[$0]));
break;
case 113:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Defer($$[$0], yylineno));
break;
case 114:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(false);
break;
case 115:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(true);
break;
case 116:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])([]);
break;
case 117:this.$ = yy.addLocationDataFn(_$[$0-3], _$[$0])($$[$0-2]);
break;
case 118:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Value(new yy.Literal('this')));
break;
case 119:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Value(new yy.Literal('this')));
break;
case 120:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Value(yy.addLocationDataFn(_$[$0-1])(new yy.Literal('this')), [yy.addLocationDataFn(_$[$0])(new yy.Access($$[$0]))], 'this'));
break;
case 121:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Arr([]));
break;
case 122:this.$ = yy.addLocationDataFn(_$[$0-3], _$[$0])(new yy.Arr($$[$0-2]));
break;
case 123:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])('inclusive');
break;
case 124:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])('exclusive');
break;
case 125:this.$ = yy.addLocationDataFn(_$[$0-4], _$[$0])(new yy.Range($$[$0-3], $$[$0-1], $$[$0-2]));
break;
case 126:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])(new yy.Range($$[$0-2], $$[$0], $$[$0-1]));
break;
case 127:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Range($$[$0-1], null, $$[$0]));
break;
case 128:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Range(null, $$[$0], $$[$0-1]));
break;
case 129:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Range(null, null, $$[$0]));
break;
case 130:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])([$$[$0]]);
break;
case 131:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])($$[$0-2].concat($$[$0]));
break;
case 132:this.$ = yy.addLocationDataFn(_$[$0-3], _$[$0])($$[$0-3].concat($$[$0]));
break;
case 133:this.$ = yy.addLocationDataFn(_$[$0-3], _$[$0])($$[$0-2]);
break;
case 134:this.$ = yy.addLocationDataFn(_$[$0-5], _$[$0])($$[$0-5].concat($$[$0-2]));
break;
case 135:this.$ = $$[$0];
break;
case 136:this.$ = $$[$0];
break;
case 137:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Expansion);
break;
case 138:this.$ = $$[$0];
break;
case 139:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])([].concat($$[$0-2], $$[$0]));
break;
case 140:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Try($$[$0]));
break;
case 141:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])(new yy.Try($$[$0-1], $$[$0][0], $$[$0][1]));
break;
case 142:this.$ = yy.addLocationDataFn(_$[$0-3], _$[$0])(new yy.Try($$[$0-2], null, null, $$[$0]));
break;
case 143:this.$ = yy.addLocationDataFn(_$[$0-4], _$[$0])(new yy.Try($$[$0-3], $$[$0-2][0], $$[$0-2][1], $$[$0]));
break;
case 144:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])([$$[$0-1], $$[$0]]);
break;
case 145:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])([yy.addLocationDataFn(_$[$0-1])(new yy.Value($$[$0-1])), $$[$0]]);
break;
case 146:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])([null, $$[$0]]);
break;
case 147:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Throw($$[$0]));
break;
case 148:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])(new yy.Parens($$[$0-1]));
break;
case 149:this.$ = yy.addLocationDataFn(_$[$0-4], _$[$0])(new yy.Parens($$[$0-2]));
break;
case 150:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.While($$[$0]));
break;
case 151:this.$ = yy.addLocationDataFn(_$[$0-3], _$[$0])(new yy.While($$[$0-2], {
          guard: $$[$0]
        }));
break;
case 152:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.While($$[$0], {
          invert: true
        }));
break;
case 153:this.$ = yy.addLocationDataFn(_$[$0-3], _$[$0])(new yy.While($$[$0-2], {
          invert: true,
          guard: $$[$0]
        }));
break;
case 154:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])($$[$0-1].addBody($$[$0]));
break;
case 155:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])($$[$0].addBody(yy.addLocationDataFn(_$[$0-1])(yy.Block.wrap([$$[$0-1]]))));
break;
case 156:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])($$[$0].addBody(yy.addLocationDataFn(_$[$0-1])(yy.Block.wrap([$$[$0-1]]))));
break;
case 157:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])($$[$0]);
break;
case 158:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.While(yy.addLocationDataFn(_$[$0-1])(new yy.Literal('true'))).addBody($$[$0]));
break;
case 159:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.While(yy.addLocationDataFn(_$[$0-1])(new yy.Literal('true'))).addBody(yy.addLocationDataFn(_$[$0])(yy.Block.wrap([$$[$0]]))));
break;
case 160:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.For($$[$0-1], $$[$0]));
break;
case 161:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.For($$[$0-1], $$[$0]));
break;
case 162:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.For($$[$0], $$[$0-1]));
break;
case 163:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])({
          source: yy.addLocationDataFn(_$[$0])(new yy.Value($$[$0]))
        });
break;
case 164:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])((function () {
        $$[$0].own = $$[$0-1].own;
        $$[$0].name = $$[$0-1][0];
        $$[$0].index = $$[$0-1][1];
        return $$[$0];
      }()));
break;
case 165:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])($$[$0]);
break;
case 166:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])((function () {
        $$[$0].own = true;
        return $$[$0];
      }()));
break;
case 167:this.$ = $$[$0];
break;
case 168:this.$ = $$[$0];
break;
case 169:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Value($$[$0]));
break;
case 170:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])(new yy.Value($$[$0]));
break;
case 171:this.$ = yy.addLocationDataFn(_$[$0], _$[$0])([$$[$0]]);
break;
case 172:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])([$$[$0-2], $$[$0]]);
break;
case 173:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])({
          source: $$[$0]
        });
break;
case 174:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])({
          source: $$[$0],
          object: true
        });
break;
case 175:this.$ = yy.addLocationDataFn(_$[$0-3], _$[$0])({
          source: $$[$0-2],
          guard: $$[$0]
        });
break;
case 176:this.$ = yy.addLocationDataFn(_$[$0-3], _$[$0])({
          source: $$[$0-2],
          guard: $$[$0],
          object: true
        });
break;
case 177:this.$ = yy.addLocationDataFn(_$[$0-3], _$[$0])({
          source: $$[$0-2],
          step: $$[$0]
        });
break;
case 178:this.$ = yy.addLocationDataFn(_$[$0-5], _$[$0])({
          source: $$[$0-4],
          guard: $$[$0-2],
          step: $$[$0]
        });
break;
case 179:this.$ = yy.addLocationDataFn(_$[$0-5], _$[$0])({
          source: $$[$0-4],
          step: $$[$0-2],
          guard: $$[$0]
        });
break;
case 180:this.$ = yy.addLocationDataFn(_$[$0-4], _$[$0])(new yy.Switch($$[$0-3], $$[$0-1]));
break;
case 181:this.$ = yy.addLocationDataFn(_$[$0-6], _$[$0])(new yy.Switch($$[$0-5], $$[$0-3], $$[$0-1]));
break;
case 182:this.$ = yy.addLocationDataFn(_$[$0-3], _$[$0])(new yy.Switch(null, $$[$0-1]));
break;
case 183:this.$ = yy.addLocationDataFn(_$[$0-5], _$[$0])(new yy.Switch(null, $$[$0-3], $$[$0-1]));
break;
case 184:this.$ = $$[$0];
break;
case 185:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])($$[$0-1].concat($$[$0]));
break;
case 186:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])([[$$[$0-1], $$[$0]]]);
break;
case 187:this.$ = yy.addLocationDataFn(_$[$0-3], _$[$0])([[$$[$0-2], $$[$0-1]]]);
break;
case 188:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])(new yy.If($$[$0-1], $$[$0], {
          type: $$[$0-2]
        }));
break;
case 189:this.$ = yy.addLocationDataFn(_$[$0-4], _$[$0])($$[$0-4].addElse(yy.addLocationDataFn(_$[$0-2], _$[$0])(new yy.If($$[$0-1], $$[$0], {
          type: $$[$0-2]
        }))));
break;
case 190:this.$ = $$[$0];
break;
case 191:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])($$[$0-2].addElse($$[$0]));
break;
case 192:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])(new yy.If($$[$0], yy.addLocationDataFn(_$[$0-2])(yy.Block.wrap([$$[$0-2]])), {
          type: $$[$0-1],
          statement: true
        }));
break;
case 193:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])(new yy.If($$[$0], yy.addLocationDataFn(_$[$0-2])(yy.Block.wrap([$$[$0-2]])), {
          type: $$[$0-1],
          statement: true
        }));
break;
case 194:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Op($$[$0-1], $$[$0]));
break;
case 195:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Op($$[$0-1], $$[$0]));
break;
case 196:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Op('-', $$[$0]));
break;
case 197:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Op('+', $$[$0]));
break;
case 198:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Op($$[$0-1], $$[$0]));
break;
case 199:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Op($$[$0-1], $$[$0]));
break;
case 200:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])(new yy.Op($$[$0-2].concat($$[$0-1]), $$[$0]));
break;
case 201:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Op('--', $$[$0]));
break;
case 202:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Op('++', $$[$0]));
break;
case 203:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Op('--', $$[$0-1], null, true));
break;
case 204:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Op('++', $$[$0-1], null, true));
break;
case 205:this.$ = yy.addLocationDataFn(_$[$0-1], _$[$0])(new yy.Existence($$[$0-1]));
break;
case 206:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])(new yy.Op('+', $$[$0-2], $$[$0]));
break;
case 207:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])(new yy.Op('-', $$[$0-2], $$[$0]));
break;
case 208:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])(new yy.Op($$[$0-1], $$[$0-2], $$[$0]));
break;
case 209:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])(new yy.Op($$[$0-1], $$[$0-2], $$[$0]));
break;
case 210:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])(new yy.Op($$[$0-1], $$[$0-2], $$[$0]));
break;
case 211:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])(new yy.Op($$[$0-1], $$[$0-2], $$[$0]));
break;
case 212:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])(new yy.Op($$[$0-1], $$[$0-2], $$[$0]));
break;
case 213:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])((function () {
        if ($$[$0-1].charAt(0) === '!') {
          return new yy.Op($$[$0-1].slice(1), $$[$0-2], $$[$0]).invert();
        } else {
          return new yy.Op($$[$0-1], $$[$0-2], $$[$0]);
        }
      }()));
break;
case 214:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])(new yy.Assign($$[$0-2], $$[$0], $$[$0-1]));
break;
case 215:this.$ = yy.addLocationDataFn(_$[$0-4], _$[$0])(new yy.Assign($$[$0-4], $$[$0-1], $$[$0-3]));
break;
case 216:this.$ = yy.addLocationDataFn(_$[$0-3], _$[$0])(new yy.Assign($$[$0-3], $$[$0], $$[$0-2]));
break;
case 217:this.$ = yy.addLocationDataFn(_$[$0-2], _$[$0])(new yy.Extends($$[$0-2], $$[$0]));
break;
}
},
table: [{1:[2,1],3:1,4:2,5:3,7:4,8:5,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{1:[3]},{1:[2,2],6:[1,78]},{1:[2,3],6:[2,3],29:[2,3],106:[2,3]},{1:[2,6],6:[2,6],29:[2,6],106:[2,6],107:89,108:[1,69],110:[1,70],113:90,114:[1,72],115:73,130:[1,88],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{1:[2,7],6:[2,7],29:[2,7],106:[2,7],107:92,108:[1,69],110:[1,70],113:93,114:[1,72],115:73,130:[1,91]},{1:[2,14],6:[2,14],28:[2,14],29:[2,14],52:[2,14],57:[2,14],60:[2,14],65:95,69:[1,97],70:[1,98],71:[1,99],72:[1,100],73:101,74:[1,102],76:[2,14],77:[1,103],81:[2,14],84:94,88:[1,96],89:[2,114],90:[2,14],95:[2,14],97:[2,14],106:[2,14],108:[2,14],109:[2,14],110:[2,14],114:[2,14],122:[2,14],130:[2,14],133:[2,14],134:[2,14],139:[2,14],140:[2,14],141:[2,14],142:[2,14],143:[2,14],144:[2,14],145:[2,14]},{1:[2,15],6:[2,15],28:[2,15],29:[2,15],52:[2,15],57:[2,15],60:[2,15],65:105,69:[1,97],70:[1,98],71:[1,99],72:[1,100],73:101,74:[1,102],76:[2,15],77:[1,103],81:[2,15],84:104,88:[1,96],89:[2,114],90:[2,15],95:[2,15],97:[2,15],106:[2,15],108:[2,15],109:[2,15],110:[2,15],114:[2,15],122:[2,15],130:[2,15],133:[2,15],134:[2,15],139:[2,15],140:[2,15],141:[2,15],142:[2,15],143:[2,15],144:[2,15],145:[2,15]},{1:[2,16],6:[2,16],28:[2,16],29:[2,16],52:[2,16],57:[2,16],60:[2,16],76:[2,16],81:[2,16],90:[2,16],95:[2,16],97:[2,16],106:[2,16],108:[2,16],109:[2,16],110:[2,16],114:[2,16],122:[2,16],130:[2,16],133:[2,16],134:[2,16],139:[2,16],140:[2,16],141:[2,16],142:[2,16],143:[2,16],144:[2,16],145:[2,16]},{1:[2,17],6:[2,17],28:[2,17],29:[2,17],52:[2,17],57:[2,17],60:[2,17],76:[2,17],81:[2,17],90:[2,17],95:[2,17],97:[2,17],106:[2,17],108:[2,17],109:[2,17],110:[2,17],114:[2,17],122:[2,17],130:[2,17],133:[2,17],134:[2,17],139:[2,17],140:[2,17],141:[2,17],142:[2,17],143:[2,17],144:[2,17],145:[2,17]},{1:[2,18],6:[2,18],28:[2,18],29:[2,18],52:[2,18],57:[2,18],60:[2,18],76:[2,18],81:[2,18],90:[2,18],95:[2,18],97:[2,18],106:[2,18],108:[2,18],109:[2,18],110:[2,18],114:[2,18],122:[2,18],130:[2,18],133:[2,18],134:[2,18],139:[2,18],140:[2,18],141:[2,18],142:[2,18],143:[2,18],144:[2,18],145:[2,18]},{1:[2,19],6:[2,19],28:[2,19],29:[2,19],52:[2,19],57:[2,19],60:[2,19],76:[2,19],81:[2,19],90:[2,19],95:[2,19],97:[2,19],106:[2,19],108:[2,19],109:[2,19],110:[2,19],114:[2,19],122:[2,19],130:[2,19],133:[2,19],134:[2,19],139:[2,19],140:[2,19],141:[2,19],142:[2,19],143:[2,19],144:[2,19],145:[2,19]},{1:[2,20],6:[2,20],28:[2,20],29:[2,20],52:[2,20],57:[2,20],60:[2,20],76:[2,20],81:[2,20],90:[2,20],95:[2,20],97:[2,20],106:[2,20],108:[2,20],109:[2,20],110:[2,20],114:[2,20],122:[2,20],130:[2,20],133:[2,20],134:[2,20],139:[2,20],140:[2,20],141:[2,20],142:[2,20],143:[2,20],144:[2,20],145:[2,20]},{1:[2,21],6:[2,21],28:[2,21],29:[2,21],52:[2,21],57:[2,21],60:[2,21],76:[2,21],81:[2,21],90:[2,21],95:[2,21],97:[2,21],106:[2,21],108:[2,21],109:[2,21],110:[2,21],114:[2,21],122:[2,21],130:[2,21],133:[2,21],134:[2,21],139:[2,21],140:[2,21],141:[2,21],142:[2,21],143:[2,21],144:[2,21],145:[2,21]},{1:[2,22],6:[2,22],28:[2,22],29:[2,22],52:[2,22],57:[2,22],60:[2,22],76:[2,22],81:[2,22],90:[2,22],95:[2,22],97:[2,22],106:[2,22],108:[2,22],109:[2,22],110:[2,22],114:[2,22],122:[2,22],130:[2,22],133:[2,22],134:[2,22],139:[2,22],140:[2,22],141:[2,22],142:[2,22],143:[2,22],144:[2,22],145:[2,22]},{1:[2,23],6:[2,23],28:[2,23],29:[2,23],52:[2,23],57:[2,23],60:[2,23],76:[2,23],81:[2,23],90:[2,23],95:[2,23],97:[2,23],106:[2,23],108:[2,23],109:[2,23],110:[2,23],114:[2,23],122:[2,23],130:[2,23],133:[2,23],134:[2,23],139:[2,23],140:[2,23],141:[2,23],142:[2,23],143:[2,23],144:[2,23],145:[2,23]},{1:[2,24],6:[2,24],28:[2,24],29:[2,24],52:[2,24],57:[2,24],60:[2,24],76:[2,24],81:[2,24],90:[2,24],95:[2,24],97:[2,24],106:[2,24],108:[2,24],109:[2,24],110:[2,24],114:[2,24],122:[2,24],130:[2,24],133:[2,24],134:[2,24],139:[2,24],140:[2,24],141:[2,24],142:[2,24],143:[2,24],144:[2,24],145:[2,24]},{1:[2,25],6:[2,25],28:[2,25],29:[2,25],52:[2,25],57:[2,25],60:[2,25],76:[2,25],81:[2,25],90:[2,25],95:[2,25],97:[2,25],106:[2,25],108:[2,25],109:[2,25],110:[2,25],114:[2,25],122:[2,25],130:[2,25],133:[2,25],134:[2,25],139:[2,25],140:[2,25],141:[2,25],142:[2,25],143:[2,25],144:[2,25],145:[2,25]},{1:[2,26],6:[2,26],28:[2,26],29:[2,26],52:[2,26],57:[2,26],60:[2,26],76:[2,26],81:[2,26],90:[2,26],95:[2,26],97:[2,26],106:[2,26],108:[2,26],109:[2,26],110:[2,26],114:[2,26],122:[2,26],130:[2,26],133:[2,26],134:[2,26],139:[2,26],140:[2,26],141:[2,26],142:[2,26],143:[2,26],144:[2,26],145:[2,26]},{1:[2,8],6:[2,8],28:[2,8],29:[2,8],52:[2,8],57:[2,8],60:[2,8],76:[2,8],81:[2,8],90:[2,8],95:[2,8],97:[2,8],106:[2,8],108:[2,8],109:[2,8],110:[2,8],114:[2,8],122:[2,8],130:[2,8],133:[2,8],134:[2,8],139:[2,8],140:[2,8],141:[2,8],142:[2,8],143:[2,8],144:[2,8],145:[2,8]},{1:[2,9],6:[2,9],28:[2,9],29:[2,9],52:[2,9],57:[2,9],60:[2,9],76:[2,9],81:[2,9],90:[2,9],95:[2,9],97:[2,9],106:[2,9],108:[2,9],109:[2,9],110:[2,9],114:[2,9],122:[2,9],130:[2,9],133:[2,9],134:[2,9],139:[2,9],140:[2,9],141:[2,9],142:[2,9],143:[2,9],144:[2,9],145:[2,9]},{1:[2,10],6:[2,10],28:[2,10],29:[2,10],52:[2,10],57:[2,10],60:[2,10],76:[2,10],81:[2,10],90:[2,10],95:[2,10],97:[2,10],106:[2,10],108:[2,10],109:[2,10],110:[2,10],114:[2,10],122:[2,10],130:[2,10],133:[2,10],134:[2,10],139:[2,10],140:[2,10],141:[2,10],142:[2,10],143:[2,10],144:[2,10],145:[2,10]},{1:[2,11],6:[2,11],28:[2,11],29:[2,11],52:[2,11],57:[2,11],60:[2,11],76:[2,11],81:[2,11],90:[2,11],95:[2,11],97:[2,11],106:[2,11],108:[2,11],109:[2,11],110:[2,11],114:[2,11],122:[2,11],130:[2,11],133:[2,11],134:[2,11],139:[2,11],140:[2,11],141:[2,11],142:[2,11],143:[2,11],144:[2,11],145:[2,11]},{1:[2,79],6:[2,79],28:[2,79],29:[2,79],43:[1,106],52:[2,79],57:[2,79],60:[2,79],69:[2,79],70:[2,79],71:[2,79],72:[2,79],74:[2,79],76:[2,79],77:[2,79],81:[2,79],88:[2,79],89:[2,79],90:[2,79],95:[2,79],97:[2,79],106:[2,79],108:[2,79],109:[2,79],110:[2,79],114:[2,79],122:[2,79],130:[2,79],133:[2,79],134:[2,79],139:[2,79],140:[2,79],141:[2,79],142:[2,79],143:[2,79],144:[2,79],145:[2,79]},{1:[2,80],6:[2,80],28:[2,80],29:[2,80],52:[2,80],57:[2,80],60:[2,80],69:[2,80],70:[2,80],71:[2,80],72:[2,80],74:[2,80],76:[2,80],77:[2,80],81:[2,80],88:[2,80],89:[2,80],90:[2,80],95:[2,80],97:[2,80],106:[2,80],108:[2,80],109:[2,80],110:[2,80],114:[2,80],122:[2,80],130:[2,80],133:[2,80],134:[2,80],139:[2,80],140:[2,80],141:[2,80],142:[2,80],143:[2,80],144:[2,80],145:[2,80]},{1:[2,81],6:[2,81],28:[2,81],29:[2,81],52:[2,81],57:[2,81],60:[2,81],69:[2,81],70:[2,81],71:[2,81],72:[2,81],74:[2,81],76:[2,81],77:[2,81],81:[2,81],88:[2,81],89:[2,81],90:[2,81],95:[2,81],97:[2,81],106:[2,81],108:[2,81],109:[2,81],110:[2,81],114:[2,81],122:[2,81],130:[2,81],133:[2,81],134:[2,81],139:[2,81],140:[2,81],141:[2,81],142:[2,81],143:[2,81],144:[2,81],145:[2,81]},{1:[2,82],6:[2,82],28:[2,82],29:[2,82],52:[2,82],57:[2,82],60:[2,82],69:[2,82],70:[2,82],71:[2,82],72:[2,82],74:[2,82],76:[2,82],77:[2,82],81:[2,82],88:[2,82],89:[2,82],90:[2,82],95:[2,82],97:[2,82],106:[2,82],108:[2,82],109:[2,82],110:[2,82],114:[2,82],122:[2,82],130:[2,82],133:[2,82],134:[2,82],139:[2,82],140:[2,82],141:[2,82],142:[2,82],143:[2,82],144:[2,82],145:[2,82]},{1:[2,83],6:[2,83],28:[2,83],29:[2,83],52:[2,83],57:[2,83],60:[2,83],69:[2,83],70:[2,83],71:[2,83],72:[2,83],74:[2,83],76:[2,83],77:[2,83],81:[2,83],88:[2,83],89:[2,83],90:[2,83],95:[2,83],97:[2,83],106:[2,83],108:[2,83],109:[2,83],110:[2,83],114:[2,83],122:[2,83],130:[2,83],133:[2,83],134:[2,83],139:[2,83],140:[2,83],141:[2,83],142:[2,83],143:[2,83],144:[2,83],145:[2,83]},{1:[2,111],6:[2,111],28:[2,111],29:[2,111],52:[2,111],57:[2,111],60:[2,111],69:[2,111],70:[2,111],71:[2,111],72:[2,111],74:[2,111],76:[2,111],77:[2,111],81:[2,111],85:107,88:[2,111],89:[1,108],90:[2,111],95:[2,111],97:[2,111],106:[2,111],108:[2,111],109:[2,111],110:[2,111],114:[2,111],122:[2,111],130:[2,111],133:[2,111],134:[2,111],139:[2,111],140:[2,111],141:[2,111],142:[2,111],143:[2,111],144:[2,111],145:[2,111]},{6:[2,58],28:[2,58],30:113,31:[1,77],47:114,51:109,52:[2,58],57:[2,58],58:110,59:111,60:[1,112],61:115,62:116,79:[1,74],93:[1,117],94:[1,118]},{14:119,28:[1,120]},{7:121,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:123,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:124,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:125,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:127,8:126,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],136:[1,128],137:[1,36],138:[1,37]},{15:130,16:131,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:132,47:67,61:51,62:52,64:129,66:25,67:26,68:27,79:[1,74],86:[1,28],92:[1,62],93:[1,63],94:[1,61],105:[1,60]},{15:130,16:131,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:132,47:67,61:51,62:52,64:133,66:25,67:26,68:27,79:[1,74],86:[1,28],92:[1,62],93:[1,63],94:[1,61],105:[1,60]},{1:[2,76],6:[2,76],28:[2,76],29:[2,76],43:[2,76],52:[2,76],57:[2,76],60:[2,76],69:[2,76],70:[2,76],71:[2,76],72:[2,76],74:[2,76],76:[2,76],77:[2,76],81:[2,76],83:[1,137],88:[2,76],89:[2,76],90:[2,76],95:[2,76],97:[2,76],106:[2,76],108:[2,76],109:[2,76],110:[2,76],114:[2,76],122:[2,76],130:[2,76],133:[2,76],134:[2,76],137:[1,134],138:[1,135],139:[2,76],140:[2,76],141:[2,76],142:[2,76],143:[2,76],144:[2,76],145:[2,76],146:[1,136]},{1:[2,190],6:[2,190],28:[2,190],29:[2,190],52:[2,190],57:[2,190],60:[2,190],76:[2,190],81:[2,190],90:[2,190],95:[2,190],97:[2,190],106:[2,190],108:[2,190],109:[2,190],110:[2,190],114:[2,190],122:[2,190],125:[1,138],130:[2,190],133:[2,190],134:[2,190],139:[2,190],140:[2,190],141:[2,190],142:[2,190],143:[2,190],144:[2,190],145:[2,190]},{14:139,28:[1,120]},{14:140,28:[1,120]},{1:[2,157],6:[2,157],28:[2,157],29:[2,157],52:[2,157],57:[2,157],60:[2,157],76:[2,157],81:[2,157],90:[2,157],95:[2,157],97:[2,157],106:[2,157],108:[2,157],109:[2,157],110:[2,157],114:[2,157],122:[2,157],130:[2,157],133:[2,157],134:[2,157],139:[2,157],140:[2,157],141:[2,157],142:[2,157],143:[2,157],144:[2,157],145:[2,157]},{14:141,28:[1,120]},{7:142,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,28:[1,143],30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{1:[2,101],6:[2,101],14:144,15:130,16:131,28:[1,120],29:[2,101],30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:132,47:67,52:[2,101],57:[2,101],60:[2,101],61:51,62:52,64:146,66:25,67:26,68:27,76:[2,101],79:[1,74],81:[2,101],83:[1,145],86:[1,28],90:[2,101],92:[1,62],93:[1,63],94:[1,61],95:[2,101],97:[2,101],105:[1,60],106:[2,101],108:[2,101],109:[2,101],110:[2,101],114:[2,101],122:[2,101],130:[2,101],133:[2,101],134:[2,101],139:[2,101],140:[2,101],141:[2,101],142:[2,101],143:[2,101],144:[2,101],145:[2,101]},{7:147,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{85:148,89:[1,108]},{1:[2,50],6:[2,50],7:149,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,28:[2,50],29:[2,50],30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],52:[2,50],53:30,54:[1,64],55:[1,65],57:[2,50],60:[2,50],61:51,62:52,64:38,66:25,67:26,68:27,76:[2,50],79:[1,74],81:[2,50],82:[1,45],86:[1,28],87:[1,47],90:[2,50],92:[1,62],93:[1,63],94:[1,61],95:[2,50],97:[2,50],100:[1,40],104:[1,46],105:[1,60],106:[2,50],107:41,108:[2,50],109:[2,50],110:[2,50],111:42,112:[1,71],113:43,114:[2,50],115:73,122:[2,50],123:[1,44],128:39,129:[1,68],130:[2,50],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37],139:[2,50],140:[2,50],141:[2,50],142:[2,50],143:[2,50],144:[2,50],145:[2,50]},{1:[2,51],6:[2,51],28:[2,51],29:[2,51],52:[2,51],57:[2,51],60:[2,51],76:[2,51],81:[2,51],90:[2,51],95:[2,51],97:[2,51],106:[2,51],108:[2,51],109:[2,51],110:[2,51],114:[2,51],122:[2,51],130:[2,51],133:[2,51],134:[2,51],139:[2,51],140:[2,51],141:[2,51],142:[2,51],143:[2,51],144:[2,51],145:[2,51]},{7:151,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],14:150,15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,28:[1,120],30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{1:[2,77],6:[2,77],28:[2,77],29:[2,77],43:[2,77],52:[2,77],57:[2,77],60:[2,77],69:[2,77],70:[2,77],71:[2,77],72:[2,77],74:[2,77],76:[2,77],77:[2,77],81:[2,77],88:[2,77],89:[2,77],90:[2,77],95:[2,77],97:[2,77],106:[2,77],108:[2,77],109:[2,77],110:[2,77],114:[2,77],122:[2,77],130:[2,77],133:[2,77],134:[2,77],139:[2,77],140:[2,77],141:[2,77],142:[2,77],143:[2,77],144:[2,77],145:[2,77]},{1:[2,78],6:[2,78],28:[2,78],29:[2,78],43:[2,78],52:[2,78],57:[2,78],60:[2,78],69:[2,78],70:[2,78],71:[2,78],72:[2,78],74:[2,78],76:[2,78],77:[2,78],81:[2,78],88:[2,78],89:[2,78],90:[2,78],95:[2,78],97:[2,78],106:[2,78],108:[2,78],109:[2,78],110:[2,78],114:[2,78],122:[2,78],130:[2,78],133:[2,78],134:[2,78],139:[2,78],140:[2,78],141:[2,78],142:[2,78],143:[2,78],144:[2,78],145:[2,78]},{1:[2,32],6:[2,32],28:[2,32],29:[2,32],52:[2,32],57:[2,32],60:[2,32],69:[2,32],70:[2,32],71:[2,32],72:[2,32],74:[2,32],76:[2,32],77:[2,32],81:[2,32],88:[2,32],89:[2,32],90:[2,32],95:[2,32],97:[2,32],106:[2,32],108:[2,32],109:[2,32],110:[2,32],114:[2,32],122:[2,32],130:[2,32],133:[2,32],134:[2,32],139:[2,32],140:[2,32],141:[2,32],142:[2,32],143:[2,32],144:[2,32],145:[2,32]},{1:[2,33],6:[2,33],28:[2,33],29:[2,33],52:[2,33],57:[2,33],60:[2,33],69:[2,33],70:[2,33],71:[2,33],72:[2,33],74:[2,33],76:[2,33],77:[2,33],81:[2,33],88:[2,33],89:[2,33],90:[2,33],95:[2,33],97:[2,33],106:[2,33],108:[2,33],109:[2,33],110:[2,33],114:[2,33],122:[2,33],130:[2,33],133:[2,33],134:[2,33],139:[2,33],140:[2,33],141:[2,33],142:[2,33],143:[2,33],144:[2,33],145:[2,33]},{1:[2,34],6:[2,34],28:[2,34],29:[2,34],52:[2,34],57:[2,34],60:[2,34],69:[2,34],70:[2,34],71:[2,34],72:[2,34],74:[2,34],76:[2,34],77:[2,34],81:[2,34],88:[2,34],89:[2,34],90:[2,34],95:[2,34],97:[2,34],106:[2,34],108:[2,34],109:[2,34],110:[2,34],114:[2,34],122:[2,34],130:[2,34],133:[2,34],134:[2,34],139:[2,34],140:[2,34],141:[2,34],142:[2,34],143:[2,34],144:[2,34],145:[2,34]},{1:[2,35],6:[2,35],28:[2,35],29:[2,35],52:[2,35],57:[2,35],60:[2,35],69:[2,35],70:[2,35],71:[2,35],72:[2,35],74:[2,35],76:[2,35],77:[2,35],81:[2,35],88:[2,35],89:[2,35],90:[2,35],95:[2,35],97:[2,35],106:[2,35],108:[2,35],109:[2,35],110:[2,35],114:[2,35],122:[2,35],130:[2,35],133:[2,35],134:[2,35],139:[2,35],140:[2,35],141:[2,35],142:[2,35],143:[2,35],144:[2,35],145:[2,35]},{1:[2,36],6:[2,36],28:[2,36],29:[2,36],52:[2,36],57:[2,36],60:[2,36],69:[2,36],70:[2,36],71:[2,36],72:[2,36],74:[2,36],76:[2,36],77:[2,36],81:[2,36],88:[2,36],89:[2,36],90:[2,36],95:[2,36],97:[2,36],106:[2,36],108:[2,36],109:[2,36],110:[2,36],114:[2,36],122:[2,36],130:[2,36],133:[2,36],134:[2,36],139:[2,36],140:[2,36],141:[2,36],142:[2,36],143:[2,36],144:[2,36],145:[2,36]},{1:[2,37],6:[2,37],28:[2,37],29:[2,37],52:[2,37],57:[2,37],60:[2,37],69:[2,37],70:[2,37],71:[2,37],72:[2,37],74:[2,37],76:[2,37],77:[2,37],81:[2,37],88:[2,37],89:[2,37],90:[2,37],95:[2,37],97:[2,37],106:[2,37],108:[2,37],109:[2,37],110:[2,37],114:[2,37],122:[2,37],130:[2,37],133:[2,37],134:[2,37],139:[2,37],140:[2,37],141:[2,37],142:[2,37],143:[2,37],144:[2,37],145:[2,37]},{1:[2,38],6:[2,38],28:[2,38],29:[2,38],52:[2,38],57:[2,38],60:[2,38],69:[2,38],70:[2,38],71:[2,38],72:[2,38],74:[2,38],76:[2,38],77:[2,38],81:[2,38],88:[2,38],89:[2,38],90:[2,38],95:[2,38],97:[2,38],106:[2,38],108:[2,38],109:[2,38],110:[2,38],114:[2,38],122:[2,38],130:[2,38],133:[2,38],134:[2,38],139:[2,38],140:[2,38],141:[2,38],142:[2,38],143:[2,38],144:[2,38],145:[2,38]},{4:152,5:3,7:4,8:5,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,28:[1,153],30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:154,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,28:[1,158],30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],60:[1,160],61:51,62:52,63:159,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],91:156,92:[1,62],93:[1,63],94:[1,61],95:[1,155],98:157,100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{1:[2,118],6:[2,118],28:[2,118],29:[2,118],52:[2,118],57:[2,118],60:[2,118],69:[2,118],70:[2,118],71:[2,118],72:[2,118],74:[2,118],76:[2,118],77:[2,118],81:[2,118],88:[2,118],89:[2,118],90:[2,118],95:[2,118],97:[2,118],106:[2,118],108:[2,118],109:[2,118],110:[2,118],114:[2,118],122:[2,118],130:[2,118],133:[2,118],134:[2,118],139:[2,118],140:[2,118],141:[2,118],142:[2,118],143:[2,118],144:[2,118],145:[2,118]},{1:[2,119],6:[2,119],28:[2,119],29:[2,119],30:161,31:[1,77],52:[2,119],57:[2,119],60:[2,119],69:[2,119],70:[2,119],71:[2,119],72:[2,119],74:[2,119],76:[2,119],77:[2,119],81:[2,119],88:[2,119],89:[2,119],90:[2,119],95:[2,119],97:[2,119],106:[2,119],108:[2,119],109:[2,119],110:[2,119],114:[2,119],122:[2,119],130:[2,119],133:[2,119],134:[2,119],139:[2,119],140:[2,119],141:[2,119],142:[2,119],143:[2,119],144:[2,119],145:[2,119]},{28:[2,54]},{28:[2,55]},{1:[2,72],6:[2,72],28:[2,72],29:[2,72],43:[2,72],52:[2,72],57:[2,72],60:[2,72],69:[2,72],70:[2,72],71:[2,72],72:[2,72],74:[2,72],76:[2,72],77:[2,72],81:[2,72],83:[2,72],88:[2,72],89:[2,72],90:[2,72],95:[2,72],97:[2,72],106:[2,72],108:[2,72],109:[2,72],110:[2,72],114:[2,72],122:[2,72],130:[2,72],133:[2,72],134:[2,72],137:[2,72],138:[2,72],139:[2,72],140:[2,72],141:[2,72],142:[2,72],143:[2,72],144:[2,72],145:[2,72],146:[2,72]},{1:[2,75],6:[2,75],28:[2,75],29:[2,75],43:[2,75],52:[2,75],57:[2,75],60:[2,75],69:[2,75],70:[2,75],71:[2,75],72:[2,75],74:[2,75],76:[2,75],77:[2,75],81:[2,75],83:[2,75],88:[2,75],89:[2,75],90:[2,75],95:[2,75],97:[2,75],106:[2,75],108:[2,75],109:[2,75],110:[2,75],114:[2,75],122:[2,75],130:[2,75],133:[2,75],134:[2,75],137:[2,75],138:[2,75],139:[2,75],140:[2,75],141:[2,75],142:[2,75],143:[2,75],144:[2,75],145:[2,75],146:[2,75]},{7:162,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:163,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:164,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:166,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],14:165,15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,28:[1,120],30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{30:171,31:[1,77],47:172,61:173,62:174,67:167,79:[1,74],93:[1,117],94:[1,61],117:168,118:[1,169],119:170},{116:175,120:[1,176],121:[1,177]},{6:[2,96],10:181,28:[2,96],30:182,31:[1,77],32:183,33:[1,75],34:[1,76],44:179,45:180,47:184,49:[1,49],57:[2,96],80:178,81:[2,96],93:[1,117]},{1:[2,30],6:[2,30],28:[2,30],29:[2,30],46:[2,30],52:[2,30],57:[2,30],60:[2,30],69:[2,30],70:[2,30],71:[2,30],72:[2,30],74:[2,30],76:[2,30],77:[2,30],81:[2,30],88:[2,30],89:[2,30],90:[2,30],95:[2,30],97:[2,30],106:[2,30],108:[2,30],109:[2,30],110:[2,30],114:[2,30],122:[2,30],130:[2,30],133:[2,30],134:[2,30],139:[2,30],140:[2,30],141:[2,30],142:[2,30],143:[2,30],144:[2,30],145:[2,30]},{1:[2,31],6:[2,31],28:[2,31],29:[2,31],46:[2,31],52:[2,31],57:[2,31],60:[2,31],69:[2,31],70:[2,31],71:[2,31],72:[2,31],74:[2,31],76:[2,31],77:[2,31],81:[2,31],88:[2,31],89:[2,31],90:[2,31],95:[2,31],97:[2,31],106:[2,31],108:[2,31],109:[2,31],110:[2,31],114:[2,31],122:[2,31],130:[2,31],133:[2,31],134:[2,31],139:[2,31],140:[2,31],141:[2,31],142:[2,31],143:[2,31],144:[2,31],145:[2,31]},{1:[2,29],6:[2,29],28:[2,29],29:[2,29],43:[2,29],46:[2,29],52:[2,29],57:[2,29],60:[2,29],69:[2,29],70:[2,29],71:[2,29],72:[2,29],74:[2,29],76:[2,29],77:[2,29],81:[2,29],83:[2,29],88:[2,29],89:[2,29],90:[2,29],95:[2,29],97:[2,29],106:[2,29],108:[2,29],109:[2,29],110:[2,29],114:[2,29],120:[2,29],121:[2,29],122:[2,29],130:[2,29],133:[2,29],134:[2,29],137:[2,29],138:[2,29],139:[2,29],140:[2,29],141:[2,29],142:[2,29],143:[2,29],144:[2,29],145:[2,29],146:[2,29]},{1:[2,5],5:185,6:[2,5],7:4,8:5,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,29:[2,5],30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],106:[2,5],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{1:[2,205],6:[2,205],28:[2,205],29:[2,205],52:[2,205],57:[2,205],60:[2,205],76:[2,205],81:[2,205],90:[2,205],95:[2,205],97:[2,205],106:[2,205],108:[2,205],109:[2,205],110:[2,205],114:[2,205],122:[2,205],130:[2,205],133:[2,205],134:[2,205],139:[2,205],140:[2,205],141:[2,205],142:[2,205],143:[2,205],144:[2,205],145:[2,205]},{7:186,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:187,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:188,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:189,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:190,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:191,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:192,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:193,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:194,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{1:[2,156],6:[2,156],28:[2,156],29:[2,156],52:[2,156],57:[2,156],60:[2,156],76:[2,156],81:[2,156],90:[2,156],95:[2,156],97:[2,156],106:[2,156],108:[2,156],109:[2,156],110:[2,156],114:[2,156],122:[2,156],130:[2,156],133:[2,156],134:[2,156],139:[2,156],140:[2,156],141:[2,156],142:[2,156],143:[2,156],144:[2,156],145:[2,156]},{1:[2,161],6:[2,161],28:[2,161],29:[2,161],52:[2,161],57:[2,161],60:[2,161],76:[2,161],81:[2,161],90:[2,161],95:[2,161],97:[2,161],106:[2,161],108:[2,161],109:[2,161],110:[2,161],114:[2,161],122:[2,161],130:[2,161],133:[2,161],134:[2,161],139:[2,161],140:[2,161],141:[2,161],142:[2,161],143:[2,161],144:[2,161],145:[2,161]},{7:195,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{1:[2,155],6:[2,155],28:[2,155],29:[2,155],52:[2,155],57:[2,155],60:[2,155],76:[2,155],81:[2,155],90:[2,155],95:[2,155],97:[2,155],106:[2,155],108:[2,155],109:[2,155],110:[2,155],114:[2,155],122:[2,155],130:[2,155],133:[2,155],134:[2,155],139:[2,155],140:[2,155],141:[2,155],142:[2,155],143:[2,155],144:[2,155],145:[2,155]},{1:[2,160],6:[2,160],28:[2,160],29:[2,160],52:[2,160],57:[2,160],60:[2,160],76:[2,160],81:[2,160],90:[2,160],95:[2,160],97:[2,160],106:[2,160],108:[2,160],109:[2,160],110:[2,160],114:[2,160],122:[2,160],130:[2,160],133:[2,160],134:[2,160],139:[2,160],140:[2,160],141:[2,160],142:[2,160],143:[2,160],144:[2,160],145:[2,160]},{85:196,89:[1,108]},{1:[2,73],6:[2,73],28:[2,73],29:[2,73],43:[2,73],52:[2,73],57:[2,73],60:[2,73],69:[2,73],70:[2,73],71:[2,73],72:[2,73],74:[2,73],76:[2,73],77:[2,73],81:[2,73],83:[2,73],88:[2,73],89:[2,73],90:[2,73],95:[2,73],97:[2,73],106:[2,73],108:[2,73],109:[2,73],110:[2,73],114:[2,73],122:[2,73],130:[2,73],133:[2,73],134:[2,73],137:[2,73],138:[2,73],139:[2,73],140:[2,73],141:[2,73],142:[2,73],143:[2,73],144:[2,73],145:[2,73],146:[2,73]},{89:[2,115]},{27:198,30:197,31:[1,77],87:[1,47]},{30:199,31:[1,77]},{1:[2,89],6:[2,89],28:[2,89],29:[2,89],30:200,31:[1,77],43:[2,89],52:[2,89],57:[2,89],60:[2,89],69:[2,89],70:[2,89],71:[2,89],72:[2,89],74:[2,89],76:[2,89],77:[2,89],81:[2,89],83:[2,89],88:[2,89],89:[2,89],90:[2,89],95:[2,89],97:[2,89],106:[2,89],108:[2,89],109:[2,89],110:[2,89],114:[2,89],122:[2,89],130:[2,89],133:[2,89],134:[2,89],137:[2,89],138:[2,89],139:[2,89],140:[2,89],141:[2,89],142:[2,89],143:[2,89],144:[2,89],145:[2,89],146:[2,89]},{30:201,31:[1,77]},{1:[2,90],6:[2,90],28:[2,90],29:[2,90],43:[2,90],52:[2,90],57:[2,90],60:[2,90],69:[2,90],70:[2,90],71:[2,90],72:[2,90],74:[2,90],76:[2,90],77:[2,90],81:[2,90],83:[2,90],88:[2,90],89:[2,90],90:[2,90],95:[2,90],97:[2,90],106:[2,90],108:[2,90],109:[2,90],110:[2,90],114:[2,90],122:[2,90],130:[2,90],133:[2,90],134:[2,90],137:[2,90],138:[2,90],139:[2,90],140:[2,90],141:[2,90],142:[2,90],143:[2,90],144:[2,90],145:[2,90],146:[2,90]},{7:203,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],60:[1,207],61:51,62:52,64:38,66:25,67:26,68:27,75:202,78:204,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],96:205,97:[1,206],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{73:208,74:[1,102],77:[1,103]},{85:209,89:[1,108]},{1:[2,74],6:[2,74],28:[2,74],29:[2,74],43:[2,74],52:[2,74],57:[2,74],60:[2,74],69:[2,74],70:[2,74],71:[2,74],72:[2,74],74:[2,74],76:[2,74],77:[2,74],81:[2,74],83:[2,74],88:[2,74],89:[2,74],90:[2,74],95:[2,74],97:[2,74],106:[2,74],108:[2,74],109:[2,74],110:[2,74],114:[2,74],122:[2,74],130:[2,74],133:[2,74],134:[2,74],137:[2,74],138:[2,74],139:[2,74],140:[2,74],141:[2,74],142:[2,74],143:[2,74],144:[2,74],145:[2,74],146:[2,74]},{6:[1,211],7:210,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,28:[1,212],30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{1:[2,112],6:[2,112],28:[2,112],29:[2,112],52:[2,112],57:[2,112],60:[2,112],69:[2,112],70:[2,112],71:[2,112],72:[2,112],74:[2,112],76:[2,112],77:[2,112],81:[2,112],88:[2,112],89:[2,112],90:[2,112],95:[2,112],97:[2,112],106:[2,112],108:[2,112],109:[2,112],110:[2,112],114:[2,112],122:[2,112],130:[2,112],133:[2,112],134:[2,112],139:[2,112],140:[2,112],141:[2,112],142:[2,112],143:[2,112],144:[2,112],145:[2,112]},{7:215,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,28:[1,158],30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],60:[1,160],61:51,62:52,63:159,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],90:[1,213],91:214,92:[1,62],93:[1,63],94:[1,61],98:157,100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{6:[2,56],28:[2,56],52:[1,216],56:218,57:[1,217]},{6:[2,59],28:[2,59],29:[2,59],52:[2,59],57:[2,59]},{6:[2,63],28:[2,63],29:[2,63],43:[1,220],52:[2,63],57:[2,63],60:[1,219]},{6:[2,66],28:[2,66],29:[2,66],52:[2,66],57:[2,66]},{6:[2,67],28:[2,67],29:[2,67],43:[2,67],52:[2,67],57:[2,67],60:[2,67]},{6:[2,68],28:[2,68],29:[2,68],43:[2,68],52:[2,68],57:[2,68],60:[2,68]},{6:[2,69],28:[2,69],29:[2,69],43:[2,69],52:[2,69],57:[2,69],60:[2,69]},{6:[2,70],28:[2,70],29:[2,70],43:[2,70],52:[2,70],57:[2,70],60:[2,70]},{30:161,31:[1,77]},{7:215,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,28:[1,158],30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],60:[1,160],61:51,62:52,63:159,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],91:156,92:[1,62],93:[1,63],94:[1,61],95:[1,155],98:157,100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{1:[2,53],6:[2,53],28:[2,53],29:[2,53],52:[2,53],57:[2,53],60:[2,53],76:[2,53],81:[2,53],90:[2,53],95:[2,53],97:[2,53],106:[2,53],108:[2,53],109:[2,53],110:[2,53],114:[2,53],122:[2,53],130:[2,53],133:[2,53],134:[2,53],139:[2,53],140:[2,53],141:[2,53],142:[2,53],143:[2,53],144:[2,53],145:[2,53]},{4:222,5:3,7:4,8:5,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,29:[1,221],30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{1:[2,194],6:[2,194],28:[2,194],29:[2,194],52:[2,194],57:[2,194],60:[2,194],76:[2,194],81:[2,194],90:[2,194],95:[2,194],97:[2,194],106:[2,194],107:89,108:[2,194],109:[2,194],110:[2,194],113:90,114:[2,194],115:73,122:[2,194],130:[2,194],133:[2,194],134:[2,194],139:[1,79],140:[2,194],141:[2,194],142:[2,194],143:[2,194],144:[2,194],145:[2,194]},{107:92,108:[1,69],110:[1,70],113:93,114:[1,72],115:73,130:[1,91]},{1:[2,195],6:[2,195],28:[2,195],29:[2,195],52:[2,195],57:[2,195],60:[2,195],76:[2,195],81:[2,195],90:[2,195],95:[2,195],97:[2,195],106:[2,195],107:89,108:[2,195],109:[2,195],110:[2,195],113:90,114:[2,195],115:73,122:[2,195],130:[2,195],133:[2,195],134:[2,195],139:[1,79],140:[2,195],141:[1,83],142:[2,195],143:[2,195],144:[2,195],145:[2,195]},{1:[2,196],6:[2,196],28:[2,196],29:[2,196],52:[2,196],57:[2,196],60:[2,196],76:[2,196],81:[2,196],90:[2,196],95:[2,196],97:[2,196],106:[2,196],107:89,108:[2,196],109:[2,196],110:[2,196],113:90,114:[2,196],115:73,122:[2,196],130:[2,196],133:[2,196],134:[2,196],139:[1,79],140:[2,196],141:[1,83],142:[2,196],143:[2,196],144:[2,196],145:[2,196]},{1:[2,197],6:[2,197],28:[2,197],29:[2,197],52:[2,197],57:[2,197],60:[2,197],76:[2,197],81:[2,197],90:[2,197],95:[2,197],97:[2,197],106:[2,197],107:89,108:[2,197],109:[2,197],110:[2,197],113:90,114:[2,197],115:73,122:[2,197],130:[2,197],133:[2,197],134:[2,197],139:[1,79],140:[2,197],141:[1,83],142:[2,197],143:[2,197],144:[2,197],145:[2,197]},{1:[2,198],6:[2,198],28:[2,198],29:[2,198],52:[2,198],57:[2,198],60:[2,198],76:[2,198],81:[2,198],90:[2,198],95:[2,198],97:[2,198],106:[2,198],107:92,108:[2,198],109:[2,198],110:[2,198],113:93,114:[2,198],115:73,122:[2,198],130:[2,198],133:[2,198],134:[2,198],139:[2,198],140:[2,198],141:[2,198],142:[2,198],143:[2,198],144:[2,198],145:[2,198]},{1:[2,199],6:[2,199],28:[2,199],29:[2,199],52:[2,199],57:[2,199],60:[2,199],76:[2,199],81:[2,199],90:[2,199],95:[2,199],97:[2,199],106:[2,199],107:89,108:[2,199],109:[2,199],110:[2,199],113:90,114:[2,199],115:73,122:[2,199],130:[2,199],133:[2,199],134:[2,199],139:[1,79],140:[2,199],141:[2,199],142:[2,199],143:[2,199],144:[2,199],145:[2,199]},{7:223,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{1:[2,201],6:[2,201],28:[2,201],29:[2,201],52:[2,201],57:[2,201],60:[2,201],69:[2,76],70:[2,76],71:[2,76],72:[2,76],74:[2,76],76:[2,201],77:[2,76],81:[2,201],88:[2,76],89:[2,76],90:[2,201],95:[2,201],97:[2,201],106:[2,201],108:[2,201],109:[2,201],110:[2,201],114:[2,201],122:[2,201],130:[2,201],133:[2,201],134:[2,201],139:[2,201],140:[2,201],141:[2,201],142:[2,201],143:[2,201],144:[2,201],145:[2,201]},{65:95,69:[1,97],70:[1,98],71:[1,99],72:[1,100],73:101,74:[1,102],77:[1,103],84:94,88:[1,96],89:[2,114]},{65:105,69:[1,97],70:[1,98],71:[1,99],72:[1,100],73:101,74:[1,102],77:[1,103],84:104,88:[1,96],89:[2,114]},{69:[2,79],70:[2,79],71:[2,79],72:[2,79],74:[2,79],77:[2,79],88:[2,79],89:[2,79]},{1:[2,202],6:[2,202],28:[2,202],29:[2,202],52:[2,202],57:[2,202],60:[2,202],69:[2,76],70:[2,76],71:[2,76],72:[2,76],74:[2,76],76:[2,202],77:[2,76],81:[2,202],88:[2,76],89:[2,76],90:[2,202],95:[2,202],97:[2,202],106:[2,202],108:[2,202],109:[2,202],110:[2,202],114:[2,202],122:[2,202],130:[2,202],133:[2,202],134:[2,202],139:[2,202],140:[2,202],141:[2,202],142:[2,202],143:[2,202],144:[2,202],145:[2,202]},{1:[2,203],6:[2,203],28:[2,203],29:[2,203],52:[2,203],57:[2,203],60:[2,203],76:[2,203],81:[2,203],90:[2,203],95:[2,203],97:[2,203],106:[2,203],108:[2,203],109:[2,203],110:[2,203],114:[2,203],122:[2,203],130:[2,203],133:[2,203],134:[2,203],139:[2,203],140:[2,203],141:[2,203],142:[2,203],143:[2,203],144:[2,203],145:[2,203]},{1:[2,204],6:[2,204],28:[2,204],29:[2,204],52:[2,204],57:[2,204],60:[2,204],76:[2,204],81:[2,204],90:[2,204],95:[2,204],97:[2,204],106:[2,204],108:[2,204],109:[2,204],110:[2,204],114:[2,204],122:[2,204],130:[2,204],133:[2,204],134:[2,204],139:[2,204],140:[2,204],141:[2,204],142:[2,204],143:[2,204],144:[2,204],145:[2,204]},{6:[1,226],7:224,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,28:[1,225],30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:227,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{14:228,28:[1,120],129:[1,229]},{1:[2,140],6:[2,140],28:[2,140],29:[2,140],52:[2,140],57:[2,140],60:[2,140],76:[2,140],81:[2,140],90:[2,140],95:[2,140],97:[2,140],101:230,102:[1,231],103:[1,232],106:[2,140],108:[2,140],109:[2,140],110:[2,140],114:[2,140],122:[2,140],130:[2,140],133:[2,140],134:[2,140],139:[2,140],140:[2,140],141:[2,140],142:[2,140],143:[2,140],144:[2,140],145:[2,140]},{1:[2,154],6:[2,154],28:[2,154],29:[2,154],52:[2,154],57:[2,154],60:[2,154],76:[2,154],81:[2,154],90:[2,154],95:[2,154],97:[2,154],106:[2,154],108:[2,154],109:[2,154],110:[2,154],114:[2,154],122:[2,154],130:[2,154],133:[2,154],134:[2,154],139:[2,154],140:[2,154],141:[2,154],142:[2,154],143:[2,154],144:[2,154],145:[2,154]},{1:[2,162],6:[2,162],28:[2,162],29:[2,162],52:[2,162],57:[2,162],60:[2,162],76:[2,162],81:[2,162],90:[2,162],95:[2,162],97:[2,162],106:[2,162],108:[2,162],109:[2,162],110:[2,162],114:[2,162],122:[2,162],130:[2,162],133:[2,162],134:[2,162],139:[2,162],140:[2,162],141:[2,162],142:[2,162],143:[2,162],144:[2,162],145:[2,162]},{28:[1,233],107:89,108:[1,69],110:[1,70],113:90,114:[1,72],115:73,130:[1,88],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{124:234,126:235,127:[1,236]},{1:[2,102],6:[2,102],28:[2,102],29:[2,102],52:[2,102],57:[2,102],60:[2,102],76:[2,102],81:[2,102],90:[2,102],95:[2,102],97:[2,102],106:[2,102],108:[2,102],109:[2,102],110:[2,102],114:[2,102],122:[2,102],130:[2,102],133:[2,102],134:[2,102],139:[2,102],140:[2,102],141:[2,102],142:[2,102],143:[2,102],144:[2,102],145:[2,102]},{7:237,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{1:[2,105],6:[2,105],14:238,28:[1,120],29:[2,105],52:[2,105],57:[2,105],60:[2,105],69:[2,76],70:[2,76],71:[2,76],72:[2,76],74:[2,76],76:[2,105],77:[2,76],81:[2,105],83:[1,239],88:[2,76],89:[2,76],90:[2,105],95:[2,105],97:[2,105],106:[2,105],108:[2,105],109:[2,105],110:[2,105],114:[2,105],122:[2,105],130:[2,105],133:[2,105],134:[2,105],139:[2,105],140:[2,105],141:[2,105],142:[2,105],143:[2,105],144:[2,105],145:[2,105]},{1:[2,147],6:[2,147],28:[2,147],29:[2,147],52:[2,147],57:[2,147],60:[2,147],76:[2,147],81:[2,147],90:[2,147],95:[2,147],97:[2,147],106:[2,147],107:89,108:[2,147],109:[2,147],110:[2,147],113:90,114:[2,147],115:73,122:[2,147],130:[2,147],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{1:[2,113],6:[2,113],28:[2,113],29:[2,113],43:[2,113],52:[2,113],57:[2,113],60:[2,113],69:[2,113],70:[2,113],71:[2,113],72:[2,113],74:[2,113],76:[2,113],77:[2,113],81:[2,113],83:[2,113],88:[2,113],89:[2,113],90:[2,113],95:[2,113],97:[2,113],106:[2,113],108:[2,113],109:[2,113],110:[2,113],114:[2,113],122:[2,113],130:[2,113],133:[2,113],134:[2,113],137:[2,113],138:[2,113],139:[2,113],140:[2,113],141:[2,113],142:[2,113],143:[2,113],144:[2,113],145:[2,113],146:[2,113]},{1:[2,49],6:[2,49],28:[2,49],29:[2,49],52:[2,49],57:[2,49],60:[2,49],76:[2,49],81:[2,49],90:[2,49],95:[2,49],97:[2,49],106:[2,49],107:89,108:[2,49],109:[2,49],110:[2,49],113:90,114:[2,49],115:73,122:[2,49],130:[2,49],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{1:[2,12],6:[2,12],28:[2,12],29:[2,12],52:[2,12],57:[2,12],60:[2,12],76:[2,12],81:[2,12],90:[2,12],95:[2,12],97:[2,12],106:[2,12],108:[2,12],109:[2,12],110:[2,12],114:[2,12],122:[2,12],130:[2,12],133:[2,12],134:[2,12],139:[2,12],140:[2,12],141:[2,12],142:[2,12],143:[2,12],144:[2,12],145:[2,12]},{1:[2,13],6:[2,13],28:[2,13],29:[2,13],52:[2,13],57:[2,13],60:[2,13],76:[2,13],81:[2,13],90:[2,13],95:[2,13],97:[2,13],106:[2,13],107:89,108:[1,69],109:[2,13],110:[1,70],113:90,114:[1,72],115:73,122:[2,13],130:[2,13],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{6:[1,78],106:[1,240]},{4:241,5:3,7:4,8:5,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{6:[2,135],28:[2,135],57:[2,135],60:[1,243],95:[2,135],96:242,97:[1,206],107:89,108:[1,69],110:[1,70],113:90,114:[1,72],115:73,130:[1,88],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{1:[2,121],6:[2,121],28:[2,121],29:[2,121],43:[2,121],52:[2,121],57:[2,121],60:[2,121],69:[2,121],70:[2,121],71:[2,121],72:[2,121],74:[2,121],76:[2,121],77:[2,121],81:[2,121],88:[2,121],89:[2,121],90:[2,121],95:[2,121],97:[2,121],106:[2,121],108:[2,121],109:[2,121],110:[2,121],114:[2,121],120:[2,121],121:[2,121],122:[2,121],130:[2,121],133:[2,121],134:[2,121],139:[2,121],140:[2,121],141:[2,121],142:[2,121],143:[2,121],144:[2,121],145:[2,121]},{6:[2,56],28:[2,56],56:244,57:[1,245],95:[2,56]},{6:[2,130],28:[2,130],29:[2,130],57:[2,130],90:[2,130],95:[2,130]},{7:215,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,28:[1,158],30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],60:[1,160],61:51,62:52,63:159,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],91:246,92:[1,62],93:[1,63],94:[1,61],98:157,100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{6:[2,136],28:[2,136],29:[2,136],57:[2,136],90:[2,136],95:[2,136]},{6:[2,137],28:[2,137],29:[2,137],57:[2,137],90:[2,137],95:[2,137]},{1:[2,120],6:[2,120],28:[2,120],29:[2,120],43:[2,120],46:[2,120],52:[2,120],57:[2,120],60:[2,120],69:[2,120],70:[2,120],71:[2,120],72:[2,120],74:[2,120],76:[2,120],77:[2,120],81:[2,120],83:[2,120],88:[2,120],89:[2,120],90:[2,120],95:[2,120],97:[2,120],106:[2,120],108:[2,120],109:[2,120],110:[2,120],114:[2,120],120:[2,120],121:[2,120],122:[2,120],130:[2,120],133:[2,120],134:[2,120],137:[2,120],138:[2,120],139:[2,120],140:[2,120],141:[2,120],142:[2,120],143:[2,120],144:[2,120],145:[2,120],146:[2,120]},{14:247,28:[1,120],107:89,108:[1,69],110:[1,70],113:90,114:[1,72],115:73,130:[1,88],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{1:[2,150],6:[2,150],28:[2,150],29:[2,150],52:[2,150],57:[2,150],60:[2,150],76:[2,150],81:[2,150],90:[2,150],95:[2,150],97:[2,150],106:[2,150],107:89,108:[1,69],109:[1,248],110:[1,70],113:90,114:[1,72],115:73,122:[2,150],130:[2,150],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{1:[2,152],6:[2,152],28:[2,152],29:[2,152],52:[2,152],57:[2,152],60:[2,152],76:[2,152],81:[2,152],90:[2,152],95:[2,152],97:[2,152],106:[2,152],107:89,108:[1,69],109:[1,249],110:[1,70],113:90,114:[1,72],115:73,122:[2,152],130:[2,152],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{1:[2,158],6:[2,158],28:[2,158],29:[2,158],52:[2,158],57:[2,158],60:[2,158],76:[2,158],81:[2,158],90:[2,158],95:[2,158],97:[2,158],106:[2,158],108:[2,158],109:[2,158],110:[2,158],114:[2,158],122:[2,158],130:[2,158],133:[2,158],134:[2,158],139:[2,158],140:[2,158],141:[2,158],142:[2,158],143:[2,158],144:[2,158],145:[2,158]},{1:[2,159],6:[2,159],28:[2,159],29:[2,159],52:[2,159],57:[2,159],60:[2,159],76:[2,159],81:[2,159],90:[2,159],95:[2,159],97:[2,159],106:[2,159],107:89,108:[1,69],109:[2,159],110:[1,70],113:90,114:[1,72],115:73,122:[2,159],130:[2,159],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{1:[2,163],6:[2,163],28:[2,163],29:[2,163],52:[2,163],57:[2,163],60:[2,163],76:[2,163],81:[2,163],90:[2,163],95:[2,163],97:[2,163],106:[2,163],108:[2,163],109:[2,163],110:[2,163],114:[2,163],122:[2,163],130:[2,163],133:[2,163],134:[2,163],139:[2,163],140:[2,163],141:[2,163],142:[2,163],143:[2,163],144:[2,163],145:[2,163]},{120:[2,165],121:[2,165]},{30:171,31:[1,77],47:172,61:173,62:174,79:[1,74],93:[1,117],94:[1,118],117:250,119:170},{57:[1,251],120:[2,171],121:[2,171]},{57:[2,167],120:[2,167],121:[2,167]},{57:[2,168],120:[2,168],121:[2,168]},{57:[2,169],120:[2,169],121:[2,169]},{57:[2,170],120:[2,170],121:[2,170]},{1:[2,164],6:[2,164],28:[2,164],29:[2,164],52:[2,164],57:[2,164],60:[2,164],76:[2,164],81:[2,164],90:[2,164],95:[2,164],97:[2,164],106:[2,164],108:[2,164],109:[2,164],110:[2,164],114:[2,164],122:[2,164],130:[2,164],133:[2,164],134:[2,164],139:[2,164],140:[2,164],141:[2,164],142:[2,164],143:[2,164],144:[2,164],145:[2,164]},{7:252,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:253,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{6:[2,56],28:[2,56],56:254,57:[1,255],81:[2,56]},{6:[2,97],28:[2,97],29:[2,97],57:[2,97],81:[2,97]},{6:[2,42],28:[2,42],29:[2,42],46:[1,256],57:[2,42],81:[2,42]},{6:[2,45],28:[2,45],29:[2,45],57:[2,45],81:[2,45]},{6:[2,46],28:[2,46],29:[2,46],46:[2,46],57:[2,46],81:[2,46]},{6:[2,47],28:[2,47],29:[2,47],46:[2,47],57:[2,47],81:[2,47]},{6:[2,48],28:[2,48],29:[2,48],46:[2,48],57:[2,48],81:[2,48]},{1:[2,4],6:[2,4],29:[2,4],106:[2,4]},{1:[2,206],6:[2,206],28:[2,206],29:[2,206],52:[2,206],57:[2,206],60:[2,206],76:[2,206],81:[2,206],90:[2,206],95:[2,206],97:[2,206],106:[2,206],107:89,108:[2,206],109:[2,206],110:[2,206],113:90,114:[2,206],115:73,122:[2,206],130:[2,206],133:[2,206],134:[2,206],139:[1,79],140:[1,82],141:[1,83],142:[2,206],143:[2,206],144:[2,206],145:[2,206]},{1:[2,207],6:[2,207],28:[2,207],29:[2,207],52:[2,207],57:[2,207],60:[2,207],76:[2,207],81:[2,207],90:[2,207],95:[2,207],97:[2,207],106:[2,207],107:89,108:[2,207],109:[2,207],110:[2,207],113:90,114:[2,207],115:73,122:[2,207],130:[2,207],133:[2,207],134:[2,207],139:[1,79],140:[1,82],141:[1,83],142:[2,207],143:[2,207],144:[2,207],145:[2,207]},{1:[2,208],6:[2,208],28:[2,208],29:[2,208],52:[2,208],57:[2,208],60:[2,208],76:[2,208],81:[2,208],90:[2,208],95:[2,208],97:[2,208],106:[2,208],107:89,108:[2,208],109:[2,208],110:[2,208],113:90,114:[2,208],115:73,122:[2,208],130:[2,208],133:[2,208],134:[2,208],139:[1,79],140:[2,208],141:[1,83],142:[2,208],143:[2,208],144:[2,208],145:[2,208]},{1:[2,209],6:[2,209],28:[2,209],29:[2,209],52:[2,209],57:[2,209],60:[2,209],76:[2,209],81:[2,209],90:[2,209],95:[2,209],97:[2,209],106:[2,209],107:89,108:[2,209],109:[2,209],110:[2,209],113:90,114:[2,209],115:73,122:[2,209],130:[2,209],133:[2,209],134:[2,209],139:[1,79],140:[2,209],141:[1,83],142:[2,209],143:[2,209],144:[2,209],145:[2,209]},{1:[2,210],6:[2,210],28:[2,210],29:[2,210],52:[2,210],57:[2,210],60:[2,210],76:[2,210],81:[2,210],90:[2,210],95:[2,210],97:[2,210],106:[2,210],107:89,108:[2,210],109:[2,210],110:[2,210],113:90,114:[2,210],115:73,122:[2,210],130:[2,210],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[2,210],143:[2,210],144:[2,210],145:[2,210]},{1:[2,211],6:[2,211],28:[2,211],29:[2,211],52:[2,211],57:[2,211],60:[2,211],76:[2,211],81:[2,211],90:[2,211],95:[2,211],97:[2,211],106:[2,211],107:89,108:[2,211],109:[2,211],110:[2,211],113:90,114:[2,211],115:73,122:[2,211],130:[2,211],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[2,211],144:[2,211],145:[1,87]},{1:[2,212],6:[2,212],28:[2,212],29:[2,212],52:[2,212],57:[2,212],60:[2,212],76:[2,212],81:[2,212],90:[2,212],95:[2,212],97:[2,212],106:[2,212],107:89,108:[2,212],109:[2,212],110:[2,212],113:90,114:[2,212],115:73,122:[2,212],130:[2,212],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[2,212],145:[1,87]},{1:[2,213],6:[2,213],28:[2,213],29:[2,213],52:[2,213],57:[2,213],60:[2,213],76:[2,213],81:[2,213],90:[2,213],95:[2,213],97:[2,213],106:[2,213],107:89,108:[2,213],109:[2,213],110:[2,213],113:90,114:[2,213],115:73,122:[2,213],130:[2,213],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[2,213],144:[2,213],145:[2,213]},{1:[2,193],6:[2,193],28:[2,193],29:[2,193],52:[2,193],57:[2,193],60:[2,193],76:[2,193],81:[2,193],90:[2,193],95:[2,193],97:[2,193],106:[2,193],107:89,108:[1,69],109:[2,193],110:[1,70],113:90,114:[1,72],115:73,122:[2,193],130:[2,193],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{1:[2,192],6:[2,192],28:[2,192],29:[2,192],52:[2,192],57:[2,192],60:[2,192],76:[2,192],81:[2,192],90:[2,192],95:[2,192],97:[2,192],106:[2,192],107:89,108:[1,69],109:[2,192],110:[1,70],113:90,114:[1,72],115:73,122:[2,192],130:[2,192],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{1:[2,109],6:[2,109],28:[2,109],29:[2,109],52:[2,109],57:[2,109],60:[2,109],69:[2,109],70:[2,109],71:[2,109],72:[2,109],74:[2,109],76:[2,109],77:[2,109],81:[2,109],88:[2,109],89:[2,109],90:[2,109],95:[2,109],97:[2,109],106:[2,109],108:[2,109],109:[2,109],110:[2,109],114:[2,109],122:[2,109],130:[2,109],133:[2,109],134:[2,109],139:[2,109],140:[2,109],141:[2,109],142:[2,109],143:[2,109],144:[2,109],145:[2,109]},{1:[2,84],6:[2,84],28:[2,84],29:[2,84],43:[2,84],52:[2,84],57:[2,84],60:[2,84],69:[2,84],70:[2,84],71:[2,84],72:[2,84],74:[2,84],76:[2,84],77:[2,84],81:[2,84],83:[2,84],88:[2,84],89:[2,84],90:[2,84],95:[2,84],97:[2,84],106:[2,84],108:[2,84],109:[2,84],110:[2,84],114:[2,84],122:[2,84],130:[2,84],133:[2,84],134:[2,84],137:[2,84],138:[2,84],139:[2,84],140:[2,84],141:[2,84],142:[2,84],143:[2,84],144:[2,84],145:[2,84],146:[2,84]},{1:[2,85],6:[2,85],28:[2,85],29:[2,85],43:[2,85],52:[2,85],57:[2,85],60:[2,85],69:[2,85],70:[2,85],71:[2,85],72:[2,85],74:[2,85],76:[2,85],77:[2,85],81:[2,85],83:[2,85],88:[2,85],89:[2,85],90:[2,85],95:[2,85],97:[2,85],106:[2,85],108:[2,85],109:[2,85],110:[2,85],114:[2,85],122:[2,85],130:[2,85],133:[2,85],134:[2,85],137:[2,85],138:[2,85],139:[2,85],140:[2,85],141:[2,85],142:[2,85],143:[2,85],144:[2,85],145:[2,85],146:[2,85]},{1:[2,86],6:[2,86],28:[2,86],29:[2,86],43:[2,86],52:[2,86],57:[2,86],60:[2,86],69:[2,86],70:[2,86],71:[2,86],72:[2,86],74:[2,86],76:[2,86],77:[2,86],81:[2,86],83:[2,86],88:[2,86],89:[2,86],90:[2,86],95:[2,86],97:[2,86],106:[2,86],108:[2,86],109:[2,86],110:[2,86],114:[2,86],122:[2,86],130:[2,86],133:[2,86],134:[2,86],137:[2,86],138:[2,86],139:[2,86],140:[2,86],141:[2,86],142:[2,86],143:[2,86],144:[2,86],145:[2,86],146:[2,86]},{1:[2,87],6:[2,87],28:[2,87],29:[2,87],43:[2,87],52:[2,87],57:[2,87],60:[2,87],69:[2,87],70:[2,87],71:[2,87],72:[2,87],74:[2,87],76:[2,87],77:[2,87],81:[2,87],83:[2,87],88:[2,87],89:[2,87],90:[2,87],95:[2,87],97:[2,87],106:[2,87],108:[2,87],109:[2,87],110:[2,87],114:[2,87],122:[2,87],130:[2,87],133:[2,87],134:[2,87],137:[2,87],138:[2,87],139:[2,87],140:[2,87],141:[2,87],142:[2,87],143:[2,87],144:[2,87],145:[2,87],146:[2,87]},{1:[2,88],6:[2,88],28:[2,88],29:[2,88],43:[2,88],52:[2,88],57:[2,88],60:[2,88],69:[2,88],70:[2,88],71:[2,88],72:[2,88],74:[2,88],76:[2,88],77:[2,88],81:[2,88],83:[2,88],88:[2,88],89:[2,88],90:[2,88],95:[2,88],97:[2,88],106:[2,88],108:[2,88],109:[2,88],110:[2,88],114:[2,88],122:[2,88],130:[2,88],133:[2,88],134:[2,88],137:[2,88],138:[2,88],139:[2,88],140:[2,88],141:[2,88],142:[2,88],143:[2,88],144:[2,88],145:[2,88],146:[2,88]},{76:[1,257]},{60:[1,207],76:[2,93],96:258,97:[1,206],107:89,108:[1,69],110:[1,70],113:90,114:[1,72],115:73,130:[1,88],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{76:[2,94]},{7:259,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,76:[2,129],79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{11:[2,123],13:[2,123],31:[2,123],33:[2,123],34:[2,123],36:[2,123],37:[2,123],38:[2,123],39:[2,123],40:[2,123],41:[2,123],48:[2,123],49:[2,123],50:[2,123],54:[2,123],55:[2,123],76:[2,123],79:[2,123],82:[2,123],86:[2,123],87:[2,123],92:[2,123],93:[2,123],94:[2,123],100:[2,123],104:[2,123],105:[2,123],108:[2,123],110:[2,123],112:[2,123],114:[2,123],123:[2,123],129:[2,123],131:[2,123],132:[2,123],133:[2,123],134:[2,123],135:[2,123],137:[2,123],138:[2,123]},{11:[2,124],13:[2,124],31:[2,124],33:[2,124],34:[2,124],36:[2,124],37:[2,124],38:[2,124],39:[2,124],40:[2,124],41:[2,124],48:[2,124],49:[2,124],50:[2,124],54:[2,124],55:[2,124],76:[2,124],79:[2,124],82:[2,124],86:[2,124],87:[2,124],92:[2,124],93:[2,124],94:[2,124],100:[2,124],104:[2,124],105:[2,124],108:[2,124],110:[2,124],112:[2,124],114:[2,124],123:[2,124],129:[2,124],131:[2,124],132:[2,124],133:[2,124],134:[2,124],135:[2,124],137:[2,124],138:[2,124]},{1:[2,92],6:[2,92],28:[2,92],29:[2,92],43:[2,92],52:[2,92],57:[2,92],60:[2,92],69:[2,92],70:[2,92],71:[2,92],72:[2,92],74:[2,92],76:[2,92],77:[2,92],81:[2,92],83:[2,92],88:[2,92],89:[2,92],90:[2,92],95:[2,92],97:[2,92],106:[2,92],108:[2,92],109:[2,92],110:[2,92],114:[2,92],122:[2,92],130:[2,92],133:[2,92],134:[2,92],137:[2,92],138:[2,92],139:[2,92],140:[2,92],141:[2,92],142:[2,92],143:[2,92],144:[2,92],145:[2,92],146:[2,92]},{1:[2,110],6:[2,110],28:[2,110],29:[2,110],52:[2,110],57:[2,110],60:[2,110],69:[2,110],70:[2,110],71:[2,110],72:[2,110],74:[2,110],76:[2,110],77:[2,110],81:[2,110],88:[2,110],89:[2,110],90:[2,110],95:[2,110],97:[2,110],106:[2,110],108:[2,110],109:[2,110],110:[2,110],114:[2,110],122:[2,110],130:[2,110],133:[2,110],134:[2,110],139:[2,110],140:[2,110],141:[2,110],142:[2,110],143:[2,110],144:[2,110],145:[2,110]},{1:[2,39],6:[2,39],28:[2,39],29:[2,39],52:[2,39],57:[2,39],60:[2,39],76:[2,39],81:[2,39],90:[2,39],95:[2,39],97:[2,39],106:[2,39],107:89,108:[2,39],109:[2,39],110:[2,39],113:90,114:[2,39],115:73,122:[2,39],130:[2,39],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{7:260,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:261,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{1:[2,116],6:[2,116],28:[2,116],29:[2,116],43:[2,116],52:[2,116],57:[2,116],60:[2,116],69:[2,116],70:[2,116],71:[2,116],72:[2,116],74:[2,116],76:[2,116],77:[2,116],81:[2,116],83:[2,116],88:[2,116],89:[2,116],90:[2,116],95:[2,116],97:[2,116],106:[2,116],108:[2,116],109:[2,116],110:[2,116],114:[2,116],122:[2,116],130:[2,116],133:[2,116],134:[2,116],137:[2,116],138:[2,116],139:[2,116],140:[2,116],141:[2,116],142:[2,116],143:[2,116],144:[2,116],145:[2,116],146:[2,116]},{6:[2,56],28:[2,56],56:262,57:[1,245],90:[2,56]},{6:[2,135],28:[2,135],29:[2,135],57:[2,135],60:[1,263],90:[2,135],95:[2,135],107:89,108:[1,69],110:[1,70],113:90,114:[1,72],115:73,130:[1,88],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{53:264,54:[1,64],55:[1,65]},{6:[2,57],28:[2,57],29:[2,57],30:113,31:[1,77],47:114,58:265,59:111,60:[1,112],61:115,62:116,79:[1,74],93:[1,117],94:[1,118]},{6:[1,266],28:[1,267]},{6:[2,64],28:[2,64],29:[2,64],52:[2,64],57:[2,64]},{7:268,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{1:[2,27],6:[2,27],28:[2,27],29:[2,27],52:[2,27],57:[2,27],60:[2,27],76:[2,27],81:[2,27],90:[2,27],95:[2,27],97:[2,27],102:[2,27],103:[2,27],106:[2,27],108:[2,27],109:[2,27],110:[2,27],114:[2,27],122:[2,27],125:[2,27],127:[2,27],130:[2,27],133:[2,27],134:[2,27],139:[2,27],140:[2,27],141:[2,27],142:[2,27],143:[2,27],144:[2,27],145:[2,27]},{6:[1,78],29:[1,269]},{1:[2,200],6:[2,200],28:[2,200],29:[2,200],52:[2,200],57:[2,200],60:[2,200],76:[2,200],81:[2,200],90:[2,200],95:[2,200],97:[2,200],106:[2,200],107:89,108:[2,200],109:[2,200],110:[2,200],113:90,114:[2,200],115:73,122:[2,200],130:[2,200],133:[2,200],134:[2,200],139:[1,79],140:[2,200],141:[2,200],142:[2,200],143:[2,200],144:[2,200],145:[2,200]},{1:[2,214],6:[2,214],28:[2,214],29:[2,214],52:[2,214],57:[2,214],60:[2,214],76:[2,214],81:[2,214],90:[2,214],95:[2,214],97:[2,214],106:[2,214],107:89,108:[2,214],109:[2,214],110:[2,214],113:90,114:[2,214],115:73,122:[2,214],130:[2,214],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{7:270,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:271,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{1:[2,217],6:[2,217],28:[2,217],29:[2,217],52:[2,217],57:[2,217],60:[2,217],76:[2,217],81:[2,217],90:[2,217],95:[2,217],97:[2,217],106:[2,217],107:89,108:[2,217],109:[2,217],110:[2,217],113:90,114:[2,217],115:73,122:[2,217],130:[2,217],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{1:[2,191],6:[2,191],28:[2,191],29:[2,191],52:[2,191],57:[2,191],60:[2,191],76:[2,191],81:[2,191],90:[2,191],95:[2,191],97:[2,191],106:[2,191],108:[2,191],109:[2,191],110:[2,191],114:[2,191],122:[2,191],130:[2,191],133:[2,191],134:[2,191],139:[2,191],140:[2,191],141:[2,191],142:[2,191],143:[2,191],144:[2,191],145:[2,191]},{7:272,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{1:[2,141],6:[2,141],28:[2,141],29:[2,141],52:[2,141],57:[2,141],60:[2,141],76:[2,141],81:[2,141],90:[2,141],95:[2,141],97:[2,141],102:[1,273],106:[2,141],108:[2,141],109:[2,141],110:[2,141],114:[2,141],122:[2,141],130:[2,141],133:[2,141],134:[2,141],139:[2,141],140:[2,141],141:[2,141],142:[2,141],143:[2,141],144:[2,141],145:[2,141]},{14:274,28:[1,120]},{14:277,28:[1,120],30:275,31:[1,77],62:276,79:[1,74]},{124:278,126:235,127:[1,236]},{29:[1,279],125:[1,280],126:281,127:[1,236]},{29:[2,184],125:[2,184],127:[2,184]},{7:283,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],99:282,100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{1:[2,103],6:[2,103],14:284,28:[1,120],29:[2,103],52:[2,103],57:[2,103],60:[2,103],76:[2,103],81:[2,103],90:[2,103],95:[2,103],97:[2,103],106:[2,103],107:89,108:[1,69],109:[2,103],110:[1,70],113:90,114:[1,72],115:73,122:[2,103],130:[2,103],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{1:[2,106],6:[2,106],28:[2,106],29:[2,106],52:[2,106],57:[2,106],60:[2,106],76:[2,106],81:[2,106],90:[2,106],95:[2,106],97:[2,106],106:[2,106],108:[2,106],109:[2,106],110:[2,106],114:[2,106],122:[2,106],130:[2,106],133:[2,106],134:[2,106],139:[2,106],140:[2,106],141:[2,106],142:[2,106],143:[2,106],144:[2,106],145:[2,106]},{7:285,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{1:[2,148],6:[2,148],28:[2,148],29:[2,148],52:[2,148],57:[2,148],60:[2,148],69:[2,148],70:[2,148],71:[2,148],72:[2,148],74:[2,148],76:[2,148],77:[2,148],81:[2,148],88:[2,148],89:[2,148],90:[2,148],95:[2,148],97:[2,148],106:[2,148],108:[2,148],109:[2,148],110:[2,148],114:[2,148],122:[2,148],130:[2,148],133:[2,148],134:[2,148],139:[2,148],140:[2,148],141:[2,148],142:[2,148],143:[2,148],144:[2,148],145:[2,148]},{6:[1,78],29:[1,286]},{7:287,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{6:[2,71],11:[2,124],13:[2,124],28:[2,71],31:[2,124],33:[2,124],34:[2,124],36:[2,124],37:[2,124],38:[2,124],39:[2,124],40:[2,124],41:[2,124],48:[2,124],49:[2,124],50:[2,124],54:[2,124],55:[2,124],57:[2,71],79:[2,124],82:[2,124],86:[2,124],87:[2,124],92:[2,124],93:[2,124],94:[2,124],95:[2,71],100:[2,124],104:[2,124],105:[2,124],108:[2,124],110:[2,124],112:[2,124],114:[2,124],123:[2,124],129:[2,124],131:[2,124],132:[2,124],133:[2,124],134:[2,124],135:[2,124],137:[2,124],138:[2,124]},{6:[1,289],28:[1,290],95:[1,288]},{6:[2,57],7:215,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,28:[2,57],29:[2,57],30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],60:[1,160],61:51,62:52,63:159,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],90:[2,57],92:[1,62],93:[1,63],94:[1,61],95:[2,57],98:291,100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{6:[2,56],28:[2,56],29:[2,56],56:292,57:[1,245]},{1:[2,188],6:[2,188],28:[2,188],29:[2,188],52:[2,188],57:[2,188],60:[2,188],76:[2,188],81:[2,188],90:[2,188],95:[2,188],97:[2,188],106:[2,188],108:[2,188],109:[2,188],110:[2,188],114:[2,188],122:[2,188],125:[2,188],130:[2,188],133:[2,188],134:[2,188],139:[2,188],140:[2,188],141:[2,188],142:[2,188],143:[2,188],144:[2,188],145:[2,188]},{7:293,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:294,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{120:[2,166],121:[2,166]},{30:171,31:[1,77],47:172,61:173,62:174,79:[1,74],93:[1,117],94:[1,118],119:295},{1:[2,173],6:[2,173],28:[2,173],29:[2,173],52:[2,173],57:[2,173],60:[2,173],76:[2,173],81:[2,173],90:[2,173],95:[2,173],97:[2,173],106:[2,173],107:89,108:[2,173],109:[1,296],110:[2,173],113:90,114:[2,173],115:73,122:[1,297],130:[2,173],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{1:[2,174],6:[2,174],28:[2,174],29:[2,174],52:[2,174],57:[2,174],60:[2,174],76:[2,174],81:[2,174],90:[2,174],95:[2,174],97:[2,174],106:[2,174],107:89,108:[2,174],109:[1,298],110:[2,174],113:90,114:[2,174],115:73,122:[2,174],130:[2,174],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{6:[1,300],28:[1,301],81:[1,299]},{6:[2,57],10:181,28:[2,57],29:[2,57],30:182,31:[1,77],32:183,33:[1,75],34:[1,76],44:302,45:180,47:184,49:[1,49],81:[2,57],93:[1,117]},{7:303,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,28:[1,304],30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{1:[2,91],6:[2,91],28:[2,91],29:[2,91],43:[2,91],52:[2,91],57:[2,91],60:[2,91],69:[2,91],70:[2,91],71:[2,91],72:[2,91],74:[2,91],76:[2,91],77:[2,91],81:[2,91],83:[2,91],88:[2,91],89:[2,91],90:[2,91],95:[2,91],97:[2,91],106:[2,91],108:[2,91],109:[2,91],110:[2,91],114:[2,91],122:[2,91],130:[2,91],133:[2,91],134:[2,91],137:[2,91],138:[2,91],139:[2,91],140:[2,91],141:[2,91],142:[2,91],143:[2,91],144:[2,91],145:[2,91],146:[2,91]},{7:305,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,76:[2,127],79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{76:[2,128],107:89,108:[1,69],110:[1,70],113:90,114:[1,72],115:73,130:[1,88],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{1:[2,40],6:[2,40],28:[2,40],29:[2,40],52:[2,40],57:[2,40],60:[2,40],76:[2,40],81:[2,40],90:[2,40],95:[2,40],97:[2,40],106:[2,40],107:89,108:[2,40],109:[2,40],110:[2,40],113:90,114:[2,40],115:73,122:[2,40],130:[2,40],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{29:[1,306],107:89,108:[1,69],110:[1,70],113:90,114:[1,72],115:73,130:[1,88],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{6:[1,289],28:[1,290],90:[1,307]},{6:[2,71],28:[2,71],29:[2,71],57:[2,71],90:[2,71],95:[2,71]},{14:308,28:[1,120]},{6:[2,60],28:[2,60],29:[2,60],52:[2,60],57:[2,60]},{30:113,31:[1,77],47:114,58:309,59:111,60:[1,112],61:115,62:116,79:[1,74],93:[1,117],94:[1,118]},{6:[2,58],28:[2,58],29:[2,58],30:113,31:[1,77],47:114,51:310,57:[2,58],58:110,59:111,60:[1,112],61:115,62:116,79:[1,74],93:[1,117],94:[1,118]},{6:[2,65],28:[2,65],29:[2,65],52:[2,65],57:[2,65],107:89,108:[1,69],110:[1,70],113:90,114:[1,72],115:73,130:[1,88],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{1:[2,28],6:[2,28],28:[2,28],29:[2,28],52:[2,28],57:[2,28],60:[2,28],76:[2,28],81:[2,28],90:[2,28],95:[2,28],97:[2,28],102:[2,28],103:[2,28],106:[2,28],108:[2,28],109:[2,28],110:[2,28],114:[2,28],122:[2,28],125:[2,28],127:[2,28],130:[2,28],133:[2,28],134:[2,28],139:[2,28],140:[2,28],141:[2,28],142:[2,28],143:[2,28],144:[2,28],145:[2,28]},{29:[1,311],107:89,108:[1,69],110:[1,70],113:90,114:[1,72],115:73,130:[1,88],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{1:[2,216],6:[2,216],28:[2,216],29:[2,216],52:[2,216],57:[2,216],60:[2,216],76:[2,216],81:[2,216],90:[2,216],95:[2,216],97:[2,216],106:[2,216],107:89,108:[2,216],109:[2,216],110:[2,216],113:90,114:[2,216],115:73,122:[2,216],130:[2,216],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{14:312,28:[1,120],107:89,108:[1,69],110:[1,70],113:90,114:[1,72],115:73,130:[1,88],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{14:313,28:[1,120]},{1:[2,142],6:[2,142],28:[2,142],29:[2,142],52:[2,142],57:[2,142],60:[2,142],76:[2,142],81:[2,142],90:[2,142],95:[2,142],97:[2,142],106:[2,142],108:[2,142],109:[2,142],110:[2,142],114:[2,142],122:[2,142],130:[2,142],133:[2,142],134:[2,142],139:[2,142],140:[2,142],141:[2,142],142:[2,142],143:[2,142],144:[2,142],145:[2,142]},{14:314,28:[1,120]},{14:315,28:[1,120]},{1:[2,146],6:[2,146],28:[2,146],29:[2,146],52:[2,146],57:[2,146],60:[2,146],76:[2,146],81:[2,146],90:[2,146],95:[2,146],97:[2,146],102:[2,146],106:[2,146],108:[2,146],109:[2,146],110:[2,146],114:[2,146],122:[2,146],130:[2,146],133:[2,146],134:[2,146],139:[2,146],140:[2,146],141:[2,146],142:[2,146],143:[2,146],144:[2,146],145:[2,146]},{29:[1,316],125:[1,317],126:281,127:[1,236]},{1:[2,182],6:[2,182],28:[2,182],29:[2,182],52:[2,182],57:[2,182],60:[2,182],76:[2,182],81:[2,182],90:[2,182],95:[2,182],97:[2,182],106:[2,182],108:[2,182],109:[2,182],110:[2,182],114:[2,182],122:[2,182],130:[2,182],133:[2,182],134:[2,182],139:[2,182],140:[2,182],141:[2,182],142:[2,182],143:[2,182],144:[2,182],145:[2,182]},{14:318,28:[1,120]},{29:[2,185],125:[2,185],127:[2,185]},{14:319,28:[1,120],57:[1,320]},{28:[2,138],57:[2,138],107:89,108:[1,69],110:[1,70],113:90,114:[1,72],115:73,130:[1,88],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{1:[2,104],6:[2,104],28:[2,104],29:[2,104],52:[2,104],57:[2,104],60:[2,104],76:[2,104],81:[2,104],90:[2,104],95:[2,104],97:[2,104],106:[2,104],108:[2,104],109:[2,104],110:[2,104],114:[2,104],122:[2,104],130:[2,104],133:[2,104],134:[2,104],139:[2,104],140:[2,104],141:[2,104],142:[2,104],143:[2,104],144:[2,104],145:[2,104]},{1:[2,107],6:[2,107],14:321,28:[1,120],29:[2,107],52:[2,107],57:[2,107],60:[2,107],76:[2,107],81:[2,107],90:[2,107],95:[2,107],97:[2,107],106:[2,107],107:89,108:[1,69],109:[2,107],110:[1,70],113:90,114:[1,72],115:73,122:[2,107],130:[2,107],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{106:[1,322]},{95:[1,323],107:89,108:[1,69],110:[1,70],113:90,114:[1,72],115:73,130:[1,88],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{1:[2,122],6:[2,122],28:[2,122],29:[2,122],43:[2,122],52:[2,122],57:[2,122],60:[2,122],69:[2,122],70:[2,122],71:[2,122],72:[2,122],74:[2,122],76:[2,122],77:[2,122],81:[2,122],88:[2,122],89:[2,122],90:[2,122],95:[2,122],97:[2,122],106:[2,122],108:[2,122],109:[2,122],110:[2,122],114:[2,122],120:[2,122],121:[2,122],122:[2,122],130:[2,122],133:[2,122],134:[2,122],139:[2,122],140:[2,122],141:[2,122],142:[2,122],143:[2,122],144:[2,122],145:[2,122]},{7:215,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],60:[1,160],61:51,62:52,63:159,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],98:324,100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:215,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,28:[1,158],30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],60:[1,160],61:51,62:52,63:159,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],91:325,92:[1,62],93:[1,63],94:[1,61],98:157,100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{6:[2,131],28:[2,131],29:[2,131],57:[2,131],90:[2,131],95:[2,131]},{6:[1,289],28:[1,290],29:[1,326]},{1:[2,151],6:[2,151],28:[2,151],29:[2,151],52:[2,151],57:[2,151],60:[2,151],76:[2,151],81:[2,151],90:[2,151],95:[2,151],97:[2,151],106:[2,151],107:89,108:[1,69],109:[2,151],110:[1,70],113:90,114:[1,72],115:73,122:[2,151],130:[2,151],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{1:[2,153],6:[2,153],28:[2,153],29:[2,153],52:[2,153],57:[2,153],60:[2,153],76:[2,153],81:[2,153],90:[2,153],95:[2,153],97:[2,153],106:[2,153],107:89,108:[1,69],109:[2,153],110:[1,70],113:90,114:[1,72],115:73,122:[2,153],130:[2,153],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{120:[2,172],121:[2,172]},{7:327,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:328,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:329,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{1:[2,95],6:[2,95],28:[2,95],29:[2,95],43:[2,95],52:[2,95],57:[2,95],60:[2,95],69:[2,95],70:[2,95],71:[2,95],72:[2,95],74:[2,95],76:[2,95],77:[2,95],81:[2,95],88:[2,95],89:[2,95],90:[2,95],95:[2,95],97:[2,95],106:[2,95],108:[2,95],109:[2,95],110:[2,95],114:[2,95],120:[2,95],121:[2,95],122:[2,95],130:[2,95],133:[2,95],134:[2,95],139:[2,95],140:[2,95],141:[2,95],142:[2,95],143:[2,95],144:[2,95],145:[2,95]},{10:181,30:182,31:[1,77],32:183,33:[1,75],34:[1,76],44:330,45:180,47:184,49:[1,49],93:[1,117]},{6:[2,96],10:181,28:[2,96],29:[2,96],30:182,31:[1,77],32:183,33:[1,75],34:[1,76],44:179,45:180,47:184,49:[1,49],57:[2,96],80:331,93:[1,117]},{6:[2,98],28:[2,98],29:[2,98],57:[2,98],81:[2,98]},{6:[2,43],28:[2,43],29:[2,43],57:[2,43],81:[2,43],107:89,108:[1,69],110:[1,70],113:90,114:[1,72],115:73,130:[1,88],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{7:332,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{76:[2,126],107:89,108:[1,69],110:[1,70],113:90,114:[1,72],115:73,130:[1,88],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{1:[2,41],6:[2,41],28:[2,41],29:[2,41],52:[2,41],57:[2,41],60:[2,41],76:[2,41],81:[2,41],90:[2,41],95:[2,41],97:[2,41],106:[2,41],108:[2,41],109:[2,41],110:[2,41],114:[2,41],122:[2,41],130:[2,41],133:[2,41],134:[2,41],139:[2,41],140:[2,41],141:[2,41],142:[2,41],143:[2,41],144:[2,41],145:[2,41]},{1:[2,117],6:[2,117],28:[2,117],29:[2,117],43:[2,117],52:[2,117],57:[2,117],60:[2,117],69:[2,117],70:[2,117],71:[2,117],72:[2,117],74:[2,117],76:[2,117],77:[2,117],81:[2,117],83:[2,117],88:[2,117],89:[2,117],90:[2,117],95:[2,117],97:[2,117],106:[2,117],108:[2,117],109:[2,117],110:[2,117],114:[2,117],122:[2,117],130:[2,117],133:[2,117],134:[2,117],137:[2,117],138:[2,117],139:[2,117],140:[2,117],141:[2,117],142:[2,117],143:[2,117],144:[2,117],145:[2,117],146:[2,117]},{1:[2,52],6:[2,52],28:[2,52],29:[2,52],52:[2,52],57:[2,52],60:[2,52],76:[2,52],81:[2,52],90:[2,52],95:[2,52],97:[2,52],106:[2,52],108:[2,52],109:[2,52],110:[2,52],114:[2,52],122:[2,52],130:[2,52],133:[2,52],134:[2,52],139:[2,52],140:[2,52],141:[2,52],142:[2,52],143:[2,52],144:[2,52],145:[2,52]},{6:[2,61],28:[2,61],29:[2,61],52:[2,61],57:[2,61]},{6:[2,56],28:[2,56],29:[2,56],56:333,57:[1,217]},{1:[2,215],6:[2,215],28:[2,215],29:[2,215],52:[2,215],57:[2,215],60:[2,215],76:[2,215],81:[2,215],90:[2,215],95:[2,215],97:[2,215],106:[2,215],108:[2,215],109:[2,215],110:[2,215],114:[2,215],122:[2,215],130:[2,215],133:[2,215],134:[2,215],139:[2,215],140:[2,215],141:[2,215],142:[2,215],143:[2,215],144:[2,215],145:[2,215]},{1:[2,189],6:[2,189],28:[2,189],29:[2,189],52:[2,189],57:[2,189],60:[2,189],76:[2,189],81:[2,189],90:[2,189],95:[2,189],97:[2,189],106:[2,189],108:[2,189],109:[2,189],110:[2,189],114:[2,189],122:[2,189],125:[2,189],130:[2,189],133:[2,189],134:[2,189],139:[2,189],140:[2,189],141:[2,189],142:[2,189],143:[2,189],144:[2,189],145:[2,189]},{1:[2,143],6:[2,143],28:[2,143],29:[2,143],52:[2,143],57:[2,143],60:[2,143],76:[2,143],81:[2,143],90:[2,143],95:[2,143],97:[2,143],106:[2,143],108:[2,143],109:[2,143],110:[2,143],114:[2,143],122:[2,143],130:[2,143],133:[2,143],134:[2,143],139:[2,143],140:[2,143],141:[2,143],142:[2,143],143:[2,143],144:[2,143],145:[2,143]},{1:[2,144],6:[2,144],28:[2,144],29:[2,144],52:[2,144],57:[2,144],60:[2,144],76:[2,144],81:[2,144],90:[2,144],95:[2,144],97:[2,144],102:[2,144],106:[2,144],108:[2,144],109:[2,144],110:[2,144],114:[2,144],122:[2,144],130:[2,144],133:[2,144],134:[2,144],139:[2,144],140:[2,144],141:[2,144],142:[2,144],143:[2,144],144:[2,144],145:[2,144]},{1:[2,145],6:[2,145],28:[2,145],29:[2,145],52:[2,145],57:[2,145],60:[2,145],76:[2,145],81:[2,145],90:[2,145],95:[2,145],97:[2,145],102:[2,145],106:[2,145],108:[2,145],109:[2,145],110:[2,145],114:[2,145],122:[2,145],130:[2,145],133:[2,145],134:[2,145],139:[2,145],140:[2,145],141:[2,145],142:[2,145],143:[2,145],144:[2,145],145:[2,145]},{1:[2,180],6:[2,180],28:[2,180],29:[2,180],52:[2,180],57:[2,180],60:[2,180],76:[2,180],81:[2,180],90:[2,180],95:[2,180],97:[2,180],106:[2,180],108:[2,180],109:[2,180],110:[2,180],114:[2,180],122:[2,180],130:[2,180],133:[2,180],134:[2,180],139:[2,180],140:[2,180],141:[2,180],142:[2,180],143:[2,180],144:[2,180],145:[2,180]},{14:334,28:[1,120]},{29:[1,335]},{6:[1,336],29:[2,186],125:[2,186],127:[2,186]},{7:337,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{1:[2,108],6:[2,108],28:[2,108],29:[2,108],52:[2,108],57:[2,108],60:[2,108],76:[2,108],81:[2,108],90:[2,108],95:[2,108],97:[2,108],106:[2,108],108:[2,108],109:[2,108],110:[2,108],114:[2,108],122:[2,108],130:[2,108],133:[2,108],134:[2,108],139:[2,108],140:[2,108],141:[2,108],142:[2,108],143:[2,108],144:[2,108],145:[2,108]},{1:[2,149],6:[2,149],28:[2,149],29:[2,149],52:[2,149],57:[2,149],60:[2,149],69:[2,149],70:[2,149],71:[2,149],72:[2,149],74:[2,149],76:[2,149],77:[2,149],81:[2,149],88:[2,149],89:[2,149],90:[2,149],95:[2,149],97:[2,149],106:[2,149],108:[2,149],109:[2,149],110:[2,149],114:[2,149],122:[2,149],130:[2,149],133:[2,149],134:[2,149],139:[2,149],140:[2,149],141:[2,149],142:[2,149],143:[2,149],144:[2,149],145:[2,149]},{1:[2,125],6:[2,125],28:[2,125],29:[2,125],52:[2,125],57:[2,125],60:[2,125],69:[2,125],70:[2,125],71:[2,125],72:[2,125],74:[2,125],76:[2,125],77:[2,125],81:[2,125],88:[2,125],89:[2,125],90:[2,125],95:[2,125],97:[2,125],106:[2,125],108:[2,125],109:[2,125],110:[2,125],114:[2,125],122:[2,125],130:[2,125],133:[2,125],134:[2,125],139:[2,125],140:[2,125],141:[2,125],142:[2,125],143:[2,125],144:[2,125],145:[2,125]},{6:[2,132],28:[2,132],29:[2,132],57:[2,132],90:[2,132],95:[2,132]},{6:[2,56],28:[2,56],29:[2,56],56:338,57:[1,245]},{6:[2,133],28:[2,133],29:[2,133],57:[2,133],90:[2,133],95:[2,133]},{1:[2,175],6:[2,175],28:[2,175],29:[2,175],52:[2,175],57:[2,175],60:[2,175],76:[2,175],81:[2,175],90:[2,175],95:[2,175],97:[2,175],106:[2,175],107:89,108:[2,175],109:[2,175],110:[2,175],113:90,114:[2,175],115:73,122:[1,339],130:[2,175],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{1:[2,177],6:[2,177],28:[2,177],29:[2,177],52:[2,177],57:[2,177],60:[2,177],76:[2,177],81:[2,177],90:[2,177],95:[2,177],97:[2,177],106:[2,177],107:89,108:[2,177],109:[1,340],110:[2,177],113:90,114:[2,177],115:73,122:[2,177],130:[2,177],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{1:[2,176],6:[2,176],28:[2,176],29:[2,176],52:[2,176],57:[2,176],60:[2,176],76:[2,176],81:[2,176],90:[2,176],95:[2,176],97:[2,176],106:[2,176],107:89,108:[2,176],109:[2,176],110:[2,176],113:90,114:[2,176],115:73,122:[2,176],130:[2,176],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{6:[2,99],28:[2,99],29:[2,99],57:[2,99],81:[2,99]},{6:[2,56],28:[2,56],29:[2,56],56:341,57:[1,255]},{29:[1,342],107:89,108:[1,69],110:[1,70],113:90,114:[1,72],115:73,130:[1,88],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{6:[1,266],28:[1,267],29:[1,343]},{29:[1,344]},{1:[2,183],6:[2,183],28:[2,183],29:[2,183],52:[2,183],57:[2,183],60:[2,183],76:[2,183],81:[2,183],90:[2,183],95:[2,183],97:[2,183],106:[2,183],108:[2,183],109:[2,183],110:[2,183],114:[2,183],122:[2,183],130:[2,183],133:[2,183],134:[2,183],139:[2,183],140:[2,183],141:[2,183],142:[2,183],143:[2,183],144:[2,183],145:[2,183]},{29:[2,187],125:[2,187],127:[2,187]},{28:[2,139],57:[2,139],107:89,108:[1,69],110:[1,70],113:90,114:[1,72],115:73,130:[1,88],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{6:[1,289],28:[1,290],29:[1,345]},{7:346,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{7:347,8:122,9:19,10:20,11:[1,21],12:22,13:[1,50],15:6,16:7,17:8,18:9,19:10,20:11,21:12,22:13,23:14,24:15,25:16,26:17,27:18,30:66,31:[1,77],32:53,33:[1,75],34:[1,76],35:24,36:[1,54],37:[1,55],38:[1,56],39:[1,57],40:[1,58],41:[1,59],42:23,47:67,48:[1,48],49:[1,49],50:[1,29],53:30,54:[1,64],55:[1,65],61:51,62:52,64:38,66:25,67:26,68:27,79:[1,74],82:[1,45],86:[1,28],87:[1,47],92:[1,62],93:[1,63],94:[1,61],100:[1,40],104:[1,46],105:[1,60],107:41,108:[1,69],110:[1,70],111:42,112:[1,71],113:43,114:[1,72],115:73,123:[1,44],128:39,129:[1,68],131:[1,31],132:[1,32],133:[1,33],134:[1,34],135:[1,35],137:[1,36],138:[1,37]},{6:[1,300],28:[1,301],29:[1,348]},{6:[2,44],28:[2,44],29:[2,44],57:[2,44],81:[2,44]},{6:[2,62],28:[2,62],29:[2,62],52:[2,62],57:[2,62]},{1:[2,181],6:[2,181],28:[2,181],29:[2,181],52:[2,181],57:[2,181],60:[2,181],76:[2,181],81:[2,181],90:[2,181],95:[2,181],97:[2,181],106:[2,181],108:[2,181],109:[2,181],110:[2,181],114:[2,181],122:[2,181],130:[2,181],133:[2,181],134:[2,181],139:[2,181],140:[2,181],141:[2,181],142:[2,181],143:[2,181],144:[2,181],145:[2,181]},{6:[2,134],28:[2,134],29:[2,134],57:[2,134],90:[2,134],95:[2,134]},{1:[2,178],6:[2,178],28:[2,178],29:[2,178],52:[2,178],57:[2,178],60:[2,178],76:[2,178],81:[2,178],90:[2,178],95:[2,178],97:[2,178],106:[2,178],107:89,108:[2,178],109:[2,178],110:[2,178],113:90,114:[2,178],115:73,122:[2,178],130:[2,178],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{1:[2,179],6:[2,179],28:[2,179],29:[2,179],52:[2,179],57:[2,179],60:[2,179],76:[2,179],81:[2,179],90:[2,179],95:[2,179],97:[2,179],106:[2,179],107:89,108:[2,179],109:[2,179],110:[2,179],113:90,114:[2,179],115:73,122:[2,179],130:[2,179],133:[1,81],134:[1,80],139:[1,79],140:[1,82],141:[1,83],142:[1,84],143:[1,85],144:[1,86],145:[1,87]},{6:[2,100],28:[2,100],29:[2,100],57:[2,100],81:[2,100]}],
defaultActions: {64:[2,54],65:[2,55],96:[2,115],204:[2,94]},
parseError: function parseError(str, hash) {
    if (hash.recoverable) {
        this.trace(str);
    } else {
        throw new Error(str);
    }
},
parse: function parse(input) {
    var self = this, stack = [0], vstack = [null], lstack = [], table = this.table, yytext = '', yylineno = 0, yyleng = 0, recovering = 0, TERROR = 2, EOF = 1;
    var args = lstack.slice.call(arguments, 1);
    this.lexer.setInput(input);
    this.lexer.yy = this.yy;
    this.yy.lexer = this.lexer;
    this.yy.parser = this;
    if (typeof this.lexer.yylloc == 'undefined') {
        this.lexer.yylloc = {};
    }
    var yyloc = this.lexer.yylloc;
    lstack.push(yyloc);
    var ranges = this.lexer.options && this.lexer.options.ranges;
    if (typeof this.yy.parseError === 'function') {
        this.parseError = this.yy.parseError;
    } else {
        this.parseError = Object.getPrototypeOf(this).parseError;
    }
    function popStack(n) {
        stack.length = stack.length - 2 * n;
        vstack.length = vstack.length - n;
        lstack.length = lstack.length - n;
    }
    function lex() {
        var token;
        token = self.lexer.lex() || EOF;
        if (typeof token !== 'number') {
            token = self.symbols_[token] || token;
        }
        return token;
    }
    var symbol, preErrorSymbol, state, action, a, r, yyval = {}, p, len, newState, expected;
    while (true) {
        state = stack[stack.length - 1];
        if (this.defaultActions[state]) {
            action = this.defaultActions[state];
        } else {
            if (symbol === null || typeof symbol == 'undefined') {
                symbol = lex();
            }
            action = table[state] && table[state][symbol];
        }
                    if (typeof action === 'undefined' || !action.length || !action[0]) {
                var errStr = '';
                expected = [];
                for (p in table[state]) {
                    if (this.terminals_[p] && p > TERROR) {
                        expected.push('\'' + this.terminals_[p] + '\'');
                    }
                }
                if (this.lexer.showPosition) {
                    errStr = 'Parse error on line ' + (yylineno + 1) + ':\n' + this.lexer.showPosition() + '\nExpecting ' + expected.join(', ') + ', got \'' + (this.terminals_[symbol] || symbol) + '\'';
                } else {
                    errStr = 'Parse error on line ' + (yylineno + 1) + ': Unexpected ' + (symbol == EOF ? 'end of input' : '\'' + (this.terminals_[symbol] || symbol) + '\'');
                }
                this.parseError(errStr, {
                    text: this.lexer.match,
                    token: this.terminals_[symbol] || symbol,
                    line: this.lexer.yylineno,
                    loc: yyloc,
                    expected: expected
                });
            }
        if (action[0] instanceof Array && action.length > 1) {
            throw new Error('Parse Error: multiple actions possible at state: ' + state + ', token: ' + symbol);
        }
        switch (action[0]) {
        case 1:
            stack.push(symbol);
            vstack.push(this.lexer.yytext);
            lstack.push(this.lexer.yylloc);
            stack.push(action[1]);
            symbol = null;
            if (!preErrorSymbol) {
                yyleng = this.lexer.yyleng;
                yytext = this.lexer.yytext;
                yylineno = this.lexer.yylineno;
                yyloc = this.lexer.yylloc;
                if (recovering > 0) {
                    recovering--;
                }
            } else {
                symbol = preErrorSymbol;
                preErrorSymbol = null;
            }
            break;
        case 2:
            len = this.productions_[action[1]][1];
            yyval.$ = vstack[vstack.length - len];
            yyval._$ = {
                first_line: lstack[lstack.length - (len || 1)].first_line,
                last_line: lstack[lstack.length - 1].last_line,
                first_column: lstack[lstack.length - (len || 1)].first_column,
                last_column: lstack[lstack.length - 1].last_column
            };
            if (ranges) {
                yyval._$.range = [
                    lstack[lstack.length - (len || 1)].range[0],
                    lstack[lstack.length - 1].range[1]
                ];
            }
            r = this.performAction.apply(yyval, [
                yytext,
                yyleng,
                yylineno,
                this.yy,
                action[1],
                vstack,
                lstack
            ].concat(args));
            if (typeof r !== 'undefined') {
                return r;
            }
            if (len) {
                stack = stack.slice(0, -1 * len * 2);
                vstack = vstack.slice(0, -1 * len);
                lstack = lstack.slice(0, -1 * len);
            }
            stack.push(this.productions_[action[1]][0]);
            vstack.push(yyval.$);
            lstack.push(yyval._$);
            newState = table[stack[stack.length - 2]][stack[stack.length - 1]];
            stack.push(newState);
            break;
        case 3:
            return true;
        }
    }
    return true;
}};

function Parser () {
  this.yy = {};
}
Parser.prototype = parser;parser.Parser = Parser;
return new Parser;
})();


if (typeof require !== 'undefined' && typeof exports !== 'undefined') {
exports.parser = parser;
exports.Parser = parser.Parser;
exports.parse = function () { return parser.parse.apply(parser, arguments); };
exports.main = function commonjsMain(args) {
    if (!args[1]) {
        console.log('Usage: '+args[0]+' FILE');
        process.exit(1);
    }
    var source = require('fs').readFileSync(require('path').normalize(args[1]), "utf8");
    return exports.parser.parse(source);
};
if (typeof module !== 'undefined' && require.main === module) {
  exports.main(process.argv.slice(1));
}
}
}).call(this,require('_process'))

},{"_process":38,"fs":15,"path":37}],26:[function(require,module,exports){
// Generated by IcedCoffeeScript 108.0.11
(function() {
  var CoffeeScript, Module, binary, child_process, ext, findExtension, fork, helpers, loadFile, path, _i, _len, _ref;

  CoffeeScript = require('./coffee-script');

  child_process = require('child_process');

  helpers = require('./helpers');

  path = require('path');

  loadFile = function(module, filename) {
    var answer;
    answer = CoffeeScript._compileFile(filename, false, {
      runtime: "interp"
    });
    return module._compile(answer, filename);
  };

  if (require.extensions) {
    _ref = CoffeeScript.FILE_EXTENSIONS;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      ext = _ref[_i];
      require.extensions[ext] = loadFile;
    }
    Module = require('module');
    findExtension = function(filename) {
      var curExtension, extensions;
      extensions = path.basename(filename).split('.');
      if (extensions[0] === '') {
        extensions.shift();
      }
      while (extensions.shift()) {
        curExtension = '.' + extensions.join('.');
        if (Module._extensions[curExtension]) {
          return curExtension;
        }
      }
      return '.js';
    };
    Module.prototype.load = function(filename) {
      var extension;
      this.filename = filename;
      this.paths = Module._nodeModulePaths(path.dirname(filename));
      extension = findExtension(filename);
      Module._extensions[extension](this, filename);
      return this.loaded = true;
    };
  }

  if (child_process) {
    fork = child_process.fork;
    binary = require.resolve('../../bin/coffee');
    child_process.fork = function(path, args, options) {
      if (helpers.isCoffee(path)) {
        if (!Array.isArray(args)) {
          options = args || {};
          args = [];
        }
        args = [path].concat(args);
        path = binary;
      }
      return fork(path, args, options);
    };
  }

}).call(this);

},{"./coffee-script":20,"./helpers":21,"child_process":15,"module":15,"path":37}],27:[function(require,module,exports){
// Generated by IcedCoffeeScript 108.0.11
(function() {
  var BALANCED_PAIRS, CALL_CLOSERS, EXPRESSION_CLOSE, EXPRESSION_END, EXPRESSION_START, IMPLICIT_CALL, IMPLICIT_END, IMPLICIT_FUNC, IMPLICIT_UNSPACED_CALL, INVERSES, LINEBREAKS, SINGLE_CLOSERS, SINGLE_LINERS, generate, left, rite, _i, _len, _ref,
    __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; },
    __slice = [].slice;

  generate = function(tag, value, origin) {
    var tok;
    tok = [tag, value];
    tok.generated = true;
    if (origin) {
      tok.origin = origin;
    }
    return tok;
  };

  exports.Rewriter = (function() {
    function Rewriter() {}

    Rewriter.prototype.rewrite = function(tokens) {
      this.tokens = tokens;
      this.removeLeadingNewlines();
      this.closeOpenCalls();
      this.closeOpenIndexes();
      this.normalizeLines();
      this.tagPostfixConditionals();
      this.addImplicitBracesAndParens();
      this.addLocationDataToGeneratedTokens();
      return this.tokens;
    };

    Rewriter.prototype.scanTokens = function(block) {
      var i, token, tokens;
      tokens = this.tokens;
      i = 0;
      while (token = tokens[i]) {
        i += block.call(this, token, i, tokens);
      }
      return true;
    };

    Rewriter.prototype.detectEnd = function(i, condition, action) {
      var levels, token, tokens, _ref, _ref1;
      tokens = this.tokens;
      levels = 0;
      while (token = tokens[i]) {
        if (levels === 0 && condition.call(this, token, i)) {
          return action.call(this, token, i);
        }
        if (!token || levels < 0) {
          return action.call(this, token, i - 1);
        }
        if (_ref = token[0], __indexOf.call(EXPRESSION_START, _ref) >= 0) {
          levels += 1;
        } else if (_ref1 = token[0], __indexOf.call(EXPRESSION_END, _ref1) >= 0) {
          levels -= 1;
        }
        i += 1;
      }
      return i - 1;
    };

    Rewriter.prototype.removeLeadingNewlines = function() {
      var i, tag, _i, _len, _ref;
      _ref = this.tokens;
      for (i = _i = 0, _len = _ref.length; _i < _len; i = ++_i) {
        tag = _ref[i][0];
        if (tag !== 'TERMINATOR') {
          break;
        }
      }
      if (i) {
        return this.tokens.splice(0, i);
      }
    };

    Rewriter.prototype.closeOpenCalls = function() {
      var action, condition;
      condition = function(token, i) {
        var _ref;
        return ((_ref = token[0]) === ')' || _ref === 'CALL_END') || token[0] === 'OUTDENT' && this.tag(i - 1) === ')';
      };
      action = function(token, i) {
        return this.tokens[token[0] === 'OUTDENT' ? i - 1 : i][0] = 'CALL_END';
      };
      return this.scanTokens(function(token, i) {
        if (token[0] === 'CALL_START') {
          this.detectEnd(i + 1, condition, action);
        }
        return 1;
      });
    };

    Rewriter.prototype.closeOpenIndexes = function() {
      var action, condition;
      condition = function(token, i) {
        var _ref;
        return (_ref = token[0]) === ']' || _ref === 'INDEX_END';
      };
      action = function(token, i) {
        return token[0] = 'INDEX_END';
      };
      return this.scanTokens(function(token, i) {
        if (token[0] === 'INDEX_START') {
          this.detectEnd(i + 1, condition, action);
        }
        return 1;
      });
    };

    Rewriter.prototype.matchTags = function() {
      var fuzz, i, j, pattern, _i, _ref, _ref1;
      i = arguments[0], pattern = 2 <= arguments.length ? __slice.call(arguments, 1) : [];
      fuzz = 0;
      for (j = _i = 0, _ref = pattern.length; 0 <= _ref ? _i < _ref : _i > _ref; j = 0 <= _ref ? ++_i : --_i) {
        while (this.tag(i + j + fuzz) === 'HERECOMMENT') {
          fuzz += 2;
        }
        if (pattern[j] == null) {
          continue;
        }
        if (typeof pattern[j] === 'string') {
          pattern[j] = [pattern[j]];
        }
        if (_ref1 = this.tag(i + j + fuzz), __indexOf.call(pattern[j], _ref1) < 0) {
          return false;
        }
      }
      return true;
    };

    Rewriter.prototype.looksObjectish = function(j) {
      return this.matchTags(j, '@', null, ':') || this.matchTags(j, null, ':');
    };

    Rewriter.prototype.findTagsBackwards = function(i, tags) {
      var backStack, _ref, _ref1, _ref2, _ref3, _ref4, _ref5;
      backStack = [];
      while (i >= 0 && (backStack.length || (_ref2 = this.tag(i), __indexOf.call(tags, _ref2) < 0) && ((_ref3 = this.tag(i), __indexOf.call(EXPRESSION_START, _ref3) < 0) || this.tokens[i].generated) && (_ref4 = this.tag(i), __indexOf.call(LINEBREAKS, _ref4) < 0))) {
        if (_ref = this.tag(i), __indexOf.call(EXPRESSION_END, _ref) >= 0) {
          backStack.push(this.tag(i));
        }
        if ((_ref1 = this.tag(i), __indexOf.call(EXPRESSION_START, _ref1) >= 0) && backStack.length) {
          backStack.pop();
        }
        i -= 1;
      }
      return _ref5 = this.tag(i), __indexOf.call(tags, _ref5) >= 0;
    };

    Rewriter.prototype.addImplicitBracesAndParens = function() {
      var stack;
      stack = [];
      return this.scanTokens(function(token, i, tokens) {
        var endImplicitCall, endImplicitObject, forward, inImplicit, inImplicitCall, inImplicitControl, inImplicitObject, newLine, nextTag, offset, prevTag, prevToken, ret, s, sameLine, stackIdx, stackTag, stackTop, startIdx, startImplicitCall, startImplicitObject, startsLine, tag, _ref, _ref1, _ref2, _ref3, _ref4, _ref5;
        tag = token[0];
        prevTag = (prevToken = i > 0 ? tokens[i - 1] : [])[0];
        nextTag = (i < tokens.length - 1 ? tokens[i + 1] : [])[0];
        stackTop = function() {
          return stack[stack.length - 1];
        };
        startIdx = i;
        forward = function(n) {
          return i - startIdx + n;
        };
        inImplicit = function() {
          var _ref, _ref1;
          return (_ref = stackTop()) != null ? (_ref1 = _ref[2]) != null ? _ref1.ours : void 0 : void 0;
        };
        inImplicitCall = function() {
          var _ref;
          return inImplicit() && ((_ref = stackTop()) != null ? _ref[0] : void 0) === '(';
        };
        inImplicitObject = function() {
          var _ref;
          return inImplicit() && ((_ref = stackTop()) != null ? _ref[0] : void 0) === '{';
        };
        inImplicitControl = function() {
          var _ref;
          return inImplicit && ((_ref = stackTop()) != null ? _ref[0] : void 0) === 'CONTROL';
        };
        startImplicitCall = function(j) {
          var idx;
          idx = j != null ? j : i;
          stack.push([
            '(', idx, {
              ours: true
            }
          ]);
          tokens.splice(idx, 0, generate('CALL_START', '('));
          if (j == null) {
            return i += 1;
          }
        };
        endImplicitCall = function() {
          stack.pop();
          tokens.splice(i, 0, generate('CALL_END', ')'));
          return i += 1;
        };
        startImplicitObject = function(j, startsLine) {
          var idx;
          if (startsLine == null) {
            startsLine = true;
          }
          idx = j != null ? j : i;
          stack.push([
            '{', idx, {
              sameLine: true,
              startsLine: startsLine,
              ours: true
            }
          ]);
          tokens.splice(idx, 0, generate('{', generate(new String('{')), token));
          if (j == null) {
            return i += 1;
          }
        };
        endImplicitObject = function(j) {
          j = j != null ? j : i;
          stack.pop();
          tokens.splice(j, 0, generate('}', '}', token));
          return i += 1;
        };
        if (inImplicitCall() && (tag === 'IF' || tag === 'TRY' || tag === 'FINALLY' || tag === 'CATCH' || tag === 'CLASS' || tag === 'SWITCH')) {
          stack.push([
            'CONTROL', i, {
              ours: true
            }
          ]);
          return forward(1);
        }
        if (tag === 'INDENT' && inImplicit()) {
          if (prevTag !== '=>' && prevTag !== '->' && prevTag !== '[' && prevTag !== '(' && prevTag !== ',' && prevTag !== '{' && prevTag !== 'TRY' && prevTag !== 'ELSE' && prevTag !== '=') {
            while (inImplicitCall()) {
              endImplicitCall();
            }
          }
          if (inImplicitControl()) {
            stack.pop();
          }
          stack.push([tag, i]);
          return forward(1);
        }
        if (__indexOf.call(EXPRESSION_START, tag) >= 0) {
          stack.push([tag, i]);
          return forward(1);
        }
        if (__indexOf.call(EXPRESSION_END, tag) >= 0) {
          while (inImplicit()) {
            if (inImplicitCall()) {
              endImplicitCall();
            } else if (inImplicitObject()) {
              endImplicitObject();
            } else {
              stack.pop();
            }
          }
          stack.pop();
        }
        if ((__indexOf.call(IMPLICIT_FUNC, tag) >= 0 && token.spaced && !token.stringEnd || tag === '?' && i > 0 && !tokens[i - 1].spaced) && (__indexOf.call(IMPLICIT_CALL, nextTag) >= 0 || __indexOf.call(IMPLICIT_UNSPACED_CALL, nextTag) >= 0 && !((_ref = tokens[i + 1]) != null ? _ref.spaced : void 0) && !((_ref1 = tokens[i + 1]) != null ? _ref1.newLine : void 0))) {
          if (tag === '?') {
            tag = token[0] = 'FUNC_EXIST';
          }
          startImplicitCall(i + 1);
          ret = forward(2);
          return ret;
        }
        if (__indexOf.call(IMPLICIT_FUNC, tag) >= 0 && this.matchTags(i + 1, 'INDENT', null, ':') && !this.findTagsBackwards(i, ['CLASS', 'EXTENDS', 'IF', 'CATCH', 'SWITCH', 'LEADING_WHEN', 'FOR', 'WHILE', 'UNTIL'])) {
          startImplicitCall(i + 1);
          stack.push(['INDENT', i + 2]);
          return forward(3);
        }
        if (tag === ':') {
          if (this.tag(i - 2) === '@') {
            s = i - 2;
          } else {
            s = i - 1;
          }
          while (this.tag(s - 2) === 'HERECOMMENT') {
            s -= 2;
          }
          this.insideForDeclaration = nextTag === 'FOR';
          startsLine = s === 0 || (_ref2 = this.tag(s - 1), __indexOf.call(LINEBREAKS, _ref2) >= 0) || tokens[s - 1].newLine;
          if (stackTop()) {
            _ref3 = stackTop(), stackTag = _ref3[0], stackIdx = _ref3[1];
            if ((stackTag === '{' || stackTag === 'INDENT' && this.tag(stackIdx - 1) === '{') && (startsLine || this.tag(s - 1) === ',' || this.tag(s - 1) === '{')) {
              return forward(1);
            }
          }
          startImplicitObject(s, !!startsLine);
          return forward(2);
        }
        if (inImplicitObject() && __indexOf.call(LINEBREAKS, tag) >= 0) {
          stackTop()[2].sameLine = false;
        }
        newLine = prevTag === 'OUTDENT' || prevToken.newLine;
        if (__indexOf.call(IMPLICIT_END, tag) >= 0 || __indexOf.call(CALL_CLOSERS, tag) >= 0 && newLine) {
          while (inImplicit()) {
            _ref4 = stackTop(), stackTag = _ref4[0], stackIdx = _ref4[1], (_ref5 = _ref4[2], sameLine = _ref5.sameLine, startsLine = _ref5.startsLine);
            if (inImplicitCall() && prevTag !== ',') {
              endImplicitCall();
            } else if (inImplicitObject() && !this.insideForDeclaration && sameLine && tag !== 'TERMINATOR' && prevTag !== ':' && endImplicitObject()) {

            } else if (inImplicitObject() && tag === 'TERMINATOR' && prevTag !== ',' && !(startsLine && this.looksObjectish(i + 1))) {
              endImplicitObject();
            } else {
              break;
            }
          }
        }
        if (tag === ',' && !this.looksObjectish(i + 1) && inImplicitObject() && !this.insideForDeclaration && (nextTag !== 'TERMINATOR' || !this.looksObjectish(i + 2))) {
          offset = nextTag === 'OUTDENT' ? 1 : 0;
          while (inImplicitObject()) {
            endImplicitObject(i + offset);
          }
        }
        return forward(1);
      });
    };

    Rewriter.prototype.addLocationDataToGeneratedTokens = function() {
      return this.scanTokens(function(token, i, tokens) {
        var column, line, nextLocation, prevLocation, _ref, _ref1;
        if (token[2]) {
          return 1;
        }
        if (!(token.generated || token.explicit)) {
          return 1;
        }
        if (token[0] === '{' && (nextLocation = (_ref = tokens[i + 1]) != null ? _ref[2] : void 0)) {
          line = nextLocation.first_line, column = nextLocation.first_column;
        } else if (prevLocation = (_ref1 = tokens[i - 1]) != null ? _ref1[2] : void 0) {
          line = prevLocation.last_line, column = prevLocation.last_column;
        } else {
          line = column = 0;
        }
        token[2] = {
          first_line: line,
          first_column: column,
          last_line: line,
          last_column: column
        };
        return 1;
      });
    };

    Rewriter.prototype.normalizeLines = function() {
      var action, condition, indent, outdent, starter;
      starter = indent = outdent = null;
      condition = function(token, i) {
        var _ref, _ref1, _ref2, _ref3;
        return token[1] !== ';' && (_ref = token[0], __indexOf.call(SINGLE_CLOSERS, _ref) >= 0) && !(token[0] === 'TERMINATOR' && (_ref1 = this.tag(i + 1), __indexOf.call(EXPRESSION_CLOSE, _ref1) >= 0)) && !(token[0] === 'ELSE' && starter !== 'THEN') && !(((_ref2 = token[0]) === 'CATCH' || _ref2 === 'FINALLY') && (starter === '->' || starter === '=>')) || (_ref3 = token[0], __indexOf.call(CALL_CLOSERS, _ref3) >= 0) && this.tokens[i - 1].newLine;
      };
      action = function(token, i) {
        return this.tokens.splice((this.tag(i - 1) === ',' ? i - 1 : i), 0, outdent);
      };
      return this.scanTokens(function(token, i, tokens) {
        var j, tag, _i, _ref, _ref1, _ref2;
        tag = token[0];
        if (tag === 'TERMINATOR') {
          if (this.tag(i + 1) === 'ELSE' && this.tag(i - 1) !== 'OUTDENT') {
            tokens.splice.apply(tokens, [i, 1].concat(__slice.call(this.indentation())));
            return 1;
          }
          if (_ref = this.tag(i + 1), __indexOf.call(EXPRESSION_CLOSE, _ref) >= 0) {
            tokens.splice(i, 1);
            return 0;
          }
        }
        if (tag === 'CATCH') {
          for (j = _i = 1; _i <= 2; j = ++_i) {
            if (!((_ref1 = this.tag(i + j)) === 'OUTDENT' || _ref1 === 'TERMINATOR' || _ref1 === 'FINALLY')) {
              continue;
            }
            tokens.splice.apply(tokens, [i + j, 0].concat(__slice.call(this.indentation())));
            return 2 + j;
          }
        }
        if (__indexOf.call(SINGLE_LINERS, tag) >= 0 && this.tag(i + 1) !== 'INDENT' && !(tag === 'ELSE' && this.tag(i + 1) === 'IF')) {
          starter = tag;
          _ref2 = this.indentation(tokens[i]), indent = _ref2[0], outdent = _ref2[1];
          if (starter === 'THEN') {
            indent.fromThen = true;
          }
          tokens.splice(i + 1, 0, indent);
          this.detectEnd(i + 2, condition, action);
          if (tag === 'THEN') {
            tokens.splice(i, 1);
          }
          return 1;
        }
        return 1;
      });
    };

    Rewriter.prototype.tagPostfixConditionals = function() {
      var action, condition, original;
      original = null;
      condition = function(token, i) {
        var prevTag, tag;
        tag = token[0];
        prevTag = this.tokens[i - 1][0];
        return tag === 'TERMINATOR' || (tag === 'INDENT' && __indexOf.call(SINGLE_LINERS, prevTag) < 0);
      };
      action = function(token, i) {
        if (token[0] !== 'INDENT' || (token.generated && !token.fromThen)) {
          return original[0] = 'POST_' + original[0];
        }
      };
      return this.scanTokens(function(token, i) {
        if (token[0] !== 'IF') {
          return 1;
        }
        original = token;
        this.detectEnd(i + 1, condition, action);
        return 1;
      });
    };

    Rewriter.prototype.indentation = function(origin) {
      var indent, outdent;
      indent = ['INDENT', 2];
      outdent = ['OUTDENT', 2];
      if (origin) {
        indent.generated = outdent.generated = true;
        indent.origin = outdent.origin = origin;
      } else {
        indent.explicit = outdent.explicit = true;
      }
      return [indent, outdent];
    };

    Rewriter.prototype.generate = generate;

    Rewriter.prototype.tag = function(i) {
      var _ref;
      return (_ref = this.tokens[i]) != null ? _ref[0] : void 0;
    };

    return Rewriter;

  })();

  BALANCED_PAIRS = [['(', ')'], ['[', ']'], ['{', '}'], ['INDENT', 'OUTDENT'], ['CALL_START', 'CALL_END'], ['PARAM_START', 'PARAM_END'], ['INDEX_START', 'INDEX_END']];

  exports.INVERSES = INVERSES = {};

  EXPRESSION_START = [];

  EXPRESSION_END = [];

  for (_i = 0, _len = BALANCED_PAIRS.length; _i < _len; _i++) {
    _ref = BALANCED_PAIRS[_i], left = _ref[0], rite = _ref[1];
    EXPRESSION_START.push(INVERSES[rite] = left);
    EXPRESSION_END.push(INVERSES[left] = rite);
  }

  EXPRESSION_CLOSE = ['CATCH', 'THEN', 'ELSE', 'FINALLY'].concat(EXPRESSION_END);

  IMPLICIT_FUNC = ['IDENTIFIER', 'SUPER', ')', 'CALL_END', ']', 'INDEX_END', '@', 'THIS'];

  IMPLICIT_CALL = ['IDENTIFIER', 'NUMBER', 'STRING', 'JS', 'REGEX', 'NEW', 'PARAM_START', 'CLASS', 'IF', 'TRY', 'SWITCH', 'THIS', 'BOOL', 'NULL', 'UNDEFINED', 'UNARY', 'YIELD', 'UNARY_MATH', 'SUPER', 'THROW', '@', '->', '=>', '[', '(', '{', '--', '++'];

  IMPLICIT_UNSPACED_CALL = ['+', '-'];

  IMPLICIT_END = ['POST_IF', 'FOR', 'WHILE', 'UNTIL', 'WHEN', 'BY', 'LOOP', 'TERMINATOR'];

  SINGLE_LINERS = ['ELSE', '->', '=>', 'TRY', 'FINALLY', 'THEN'];

  SINGLE_CLOSERS = ['TERMINATOR', 'CATCH', 'FINALLY', 'ELSE', 'OUTDENT', 'LEADING_WHEN'];

  LINEBREAKS = ['TERMINATOR', 'INDENT', 'OUTDENT'];

  CALL_CLOSERS = ['.', '?.', '::', '?::'];

  IMPLICIT_FUNC.push('DEFER');

  IMPLICIT_CALL.push('DEFER');

  IMPLICIT_END.push('AWAIT');

}).call(this);

},{}],28:[function(require,module,exports){
// Generated by IcedCoffeeScript 108.0.11
(function() {
  var Scope, extend, iced, last, _ref;

  _ref = require('./helpers'), extend = _ref.extend, last = _ref.last;

  iced = require('iced-runtime');

  exports.Scope = Scope = (function() {
    Scope.root = null;

    function Scope(parent, expressions, method) {
      this.parent = parent;
      this.expressions = expressions;
      this.method = method;
      this.variables = [
        {
          name: 'arguments',
          type: 'arguments'
        }
      ];
      this.positions = {};
      if (!this.parent) {
        Scope.root = this;
      }
    }

    Scope.prototype.add = function(name, type, immediate) {
      if (this.shared && !immediate) {
        return this.parent.add(name, type, immediate);
      }
      if (Object.prototype.hasOwnProperty.call(this.positions, name)) {
        return this.variables[this.positions[name]].type = type;
      } else {
        return this.positions[name] = this.variables.push({
          name: name,
          type: type
        }) - 1;
      }
    };

    Scope.prototype.namedMethod = function() {
      var _ref1;
      if (((_ref1 = this.method) != null ? _ref1.name : void 0) || !this.parent) {
        return this.method;
      }
      return this.parent.namedMethod();
    };

    Scope.prototype.find = function(name) {
      if (this.check(name)) {
        return true;
      }
      this.add(name, 'var');
      return false;
    };

    Scope.prototype.parameter = function(name) {
      if (this.shared && this.parent.check(name, true)) {
        return;
      }
      return this.add(name, 'param');
    };

    Scope.prototype.check = function(name) {
      var _ref1;
      return !!(this.type(name) || ((_ref1 = this.parent) != null ? _ref1.check(name) : void 0));
    };

    Scope.prototype.temporary = function(name, index) {
      if (name.length > 1) {
        return '_' + name + (index > 1 ? index - 1 : '');
      } else {
        return '_' + (index + parseInt(name, 36)).toString(36).replace(/\d/g, 'a');
      }
    };

    Scope.prototype.type = function(name) {
      var v, _i, _len, _ref1;
      _ref1 = this.variables;
      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {
        v = _ref1[_i];
        if (v.name === name) {
          return v.type;
        }
      }
      return null;
    };

    Scope.prototype.freeVariable = function(name, reserve) {
      var index, temp;
      if (reserve == null) {
        reserve = true;
      }
      index = 0;
      while (this.check((temp = this.temporary(name, index)))) {
        index++;
      }
      if (reserve) {
        this.add(temp, 'var', true);
      }
      return temp;
    };

    Scope.prototype.assign = function(name, value) {
      this.add(name, {
        value: value,
        assigned: true
      }, true);
      return this.hasAssignments = true;
    };

    Scope.prototype.hasDeclarations = function() {
      return !!this.declaredVariables().length;
    };

    Scope.prototype.declaredVariables = function() {
      var realVars, tempVars, v, _i, _len, _ref1;
      realVars = [];
      tempVars = [];
      _ref1 = this.variables;
      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {
        v = _ref1[_i];
        if (v.type === 'var') {
          (v.name.charAt(0) === '_' ? tempVars : realVars).push(v.name);
        }
      }
      return realVars.sort().concat(tempVars.sort());
    };

    Scope.prototype.assignedVariables = function() {
      var v, _i, _len, _ref1, _results;
      _ref1 = this.variables;
      _results = [];
      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {
        v = _ref1[_i];
        if (v.type.assigned) {
          _results.push("" + v.name + " = " + v.type.value);
        }
      }
      return _results;
    };

    return Scope;

  })();

}).call(this);

},{"./helpers":21,"iced-runtime":32}],29:[function(require,module,exports){
// Generated by IcedCoffeeScript 108.0.11
(function() {
  var LineMap, SourceMap;

  LineMap = (function() {
    function LineMap(line) {
      this.line = line;
      this.columns = [];
    }

    LineMap.prototype.add = function(column, _arg, options) {
      var sourceColumn, sourceLine;
      sourceLine = _arg[0], sourceColumn = _arg[1];
      if (options == null) {
        options = {};
      }
      if (this.columns[column] && options.noReplace) {
        return;
      }
      return this.columns[column] = {
        line: this.line,
        column: column,
        sourceLine: sourceLine,
        sourceColumn: sourceColumn
      };
    };

    LineMap.prototype.sourceLocation = function(column) {
      var mapping;
      while (!((mapping = this.columns[column]) || (column <= 0))) {
        column--;
      }
      return mapping && [mapping.sourceLine, mapping.sourceColumn];
    };

    return LineMap;

  })();

  SourceMap = (function() {
    var BASE64_CHARS, VLQ_CONTINUATION_BIT, VLQ_SHIFT, VLQ_VALUE_MASK;

    function SourceMap() {
      this.lines = [];
    }

    SourceMap.prototype.add = function(sourceLocation, generatedLocation, options) {
      var column, line, lineMap, _base;
      if (options == null) {
        options = {};
      }
      line = generatedLocation[0], column = generatedLocation[1];
      lineMap = ((_base = this.lines)[line] || (_base[line] = new LineMap(line)));
      return lineMap.add(column, sourceLocation, options);
    };

    SourceMap.prototype.sourceLocation = function(_arg) {
      var column, line, lineMap;
      line = _arg[0], column = _arg[1];
      while (!((lineMap = this.lines[line]) || (line <= 0))) {
        line--;
      }
      return lineMap && lineMap.sourceLocation(column);
    };

    SourceMap.prototype.generate = function(options, code) {
      var buffer, lastColumn, lastSourceColumn, lastSourceLine, lineMap, lineNumber, mapping, needComma, v3, writingline, _i, _j, _len, _len1, _ref, _ref1;
      if (options == null) {
        options = {};
      }
      if (code == null) {
        code = null;
      }
      writingline = 0;
      lastColumn = 0;
      lastSourceLine = 0;
      lastSourceColumn = 0;
      needComma = false;
      buffer = "";
      _ref = this.lines;
      for (lineNumber = _i = 0, _len = _ref.length; _i < _len; lineNumber = ++_i) {
        lineMap = _ref[lineNumber];
        if (lineMap) {
          _ref1 = lineMap.columns;
          for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {
            mapping = _ref1[_j];
            if (!(mapping)) {
              continue;
            }
            while (writingline < mapping.line) {
              lastColumn = 0;
              needComma = false;
              buffer += ";";
              writingline++;
            }
            if (needComma) {
              buffer += ",";
              needComma = false;
            }
            buffer += this.encodeVlq(mapping.column - lastColumn);
            lastColumn = mapping.column;
            buffer += this.encodeVlq(0);
            buffer += this.encodeVlq(mapping.sourceLine - lastSourceLine);
            lastSourceLine = mapping.sourceLine;
            buffer += this.encodeVlq(mapping.sourceColumn - lastSourceColumn);
            lastSourceColumn = mapping.sourceColumn;
            needComma = true;
          }
        }
      }
      v3 = {
        version: 3,
        file: options.generatedFile || '',
        sourceRoot: options.sourceRoot || '',
        sources: options.sourceFiles || [''],
        names: [],
        mappings: buffer
      };
      if (options.inline) {
        v3.sourcesContent = [code];
      }
      return JSON.stringify(v3, null, 2);
    };

    VLQ_SHIFT = 5;

    VLQ_CONTINUATION_BIT = 1 << VLQ_SHIFT;

    VLQ_VALUE_MASK = VLQ_CONTINUATION_BIT - 1;

    SourceMap.prototype.encodeVlq = function(value) {
      var answer, nextChunk, signBit, valueToEncode;
      answer = '';
      signBit = value < 0 ? 1 : 0;
      valueToEncode = (Math.abs(value) << 1) + signBit;
      while (valueToEncode || !answer) {
        nextChunk = valueToEncode & VLQ_VALUE_MASK;
        valueToEncode = valueToEncode >> VLQ_SHIFT;
        if (valueToEncode) {
          nextChunk |= VLQ_CONTINUATION_BIT;
        }
        answer += this.encodeBase64(nextChunk);
      }
      return answer;
    };

    BASE64_CHARS = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';

    SourceMap.prototype.encodeBase64 = function(value) {
      return BASE64_CHARS[value] || (function() {
        throw new Error("Cannot Base64 encode value: " + value);
      })();
    };

    return SourceMap;

  })();

  exports.SourceMap = SourceMap;

}).call(this);

},{}],30:[function(require,module,exports){
// Generated by IcedCoffeeScript 108.0.8
(function() {
  module.exports = {
    k: "__iced_k",
    k_noop: "__iced_k_noop",
    param: "__iced_p_",
    ns: "iced",
    runtime: "runtime",
    Deferrals: "Deferrals",
    deferrals: "__iced_deferrals",
    fulfill: "_fulfill",
    b_while: "_break",
    t_while: "_while",
    c_while: "_continue",
    n_while: "_next",
    n_arg: "__iced_next_arg",
    defer_method: "defer",
    slot: "__slot",
    assign_fn: "assign_fn",
    autocb: "autocb",
    retslot: "ret",
    trace: "__iced_trace",
    passed_deferral: "__iced_passed_deferral",
    findDeferral: "findDeferral",
    lineno: "lineno",
    parent: "parent",
    filename: "filename",
    funcname: "funcname",
    catchExceptions: 'catchExceptions',
    runtime_modes: ["node", "inline", "window", "none", "browserify", "interp"],
    trampoline: "trampoline",
    context: "context",
    defer_arg: "__iced_defer_"
  };

}).call(this);

},{}],31:[function(require,module,exports){
// Generated by IcedCoffeeScript 108.0.8
(function() {
  var C, Pipeliner, iced, __iced_k, __iced_k_noop, _iand, _ior, _timeout,
    __slice = [].slice;

  __iced_k = __iced_k_noop = function() {};

  C = require('./const');

  exports.iced = iced = require('./runtime');

  _timeout = function(cb, t, res, tmp) {
    var arr, rv, which, ___iced_passed_deferral, __iced_deferrals, __iced_k;
    __iced_k = __iced_k_noop;
    ___iced_passed_deferral = iced.findDeferral(arguments);
    rv = new iced.Rendezvous;
    tmp[0] = rv.id(true).defer({
      assign_fn: (function(_this) {
        return function() {
          return function() {
            return arr = __slice.call(arguments, 0);
          };
        };
      })(this)(),
      lineno: 20,
      context: __iced_deferrals
    });
    setTimeout(rv.id(false).defer({
      lineno: 21,
      context: __iced_deferrals
    }), t);
    (function(_this) {
      return (function(__iced_k) {
        __iced_deferrals = new iced.Deferrals(__iced_k, {
          parent: ___iced_passed_deferral,
          filename: "/Users/max/src/iced/iced-runtime/src/library.iced"
        });
        rv.wait(__iced_deferrals.defer({
          assign_fn: (function() {
            return function() {
              return which = arguments[0];
            };
          })(),
          lineno: 22
        }));
        __iced_deferrals._fulfill();
      });
    })(this)((function(_this) {
      return function() {
        if (res) {
          res[0] = which;
        }
        return cb.apply(null, arr);
      };
    })(this));
  };

  exports.timeout = function(cb, t, res) {
    var tmp;
    tmp = [];
    _timeout(cb, t, res, tmp);
    return tmp[0];
  };

  _iand = function(cb, res, tmp) {
    var ok, ___iced_passed_deferral, __iced_deferrals, __iced_k;
    __iced_k = __iced_k_noop;
    ___iced_passed_deferral = iced.findDeferral(arguments);
    (function(_this) {
      return (function(__iced_k) {
        __iced_deferrals = new iced.Deferrals(__iced_k, {
          parent: ___iced_passed_deferral,
          filename: "/Users/max/src/iced/iced-runtime/src/library.iced"
        });
        tmp[0] = __iced_deferrals.defer({
          assign_fn: (function() {
            return function() {
              return ok = arguments[0];
            };
          })(),
          lineno: 39
        });
        __iced_deferrals._fulfill();
      });
    })(this)((function(_this) {
      return function() {
        if (!ok) {
          res[0] = false;
        }
        return cb();
      };
    })(this));
  };

  exports.iand = function(cb, res) {
    var tmp;
    tmp = [];
    _iand(cb, res, tmp);
    return tmp[0];
  };

  _ior = function(cb, res, tmp) {
    var ok, ___iced_passed_deferral, __iced_deferrals, __iced_k;
    __iced_k = __iced_k_noop;
    ___iced_passed_deferral = iced.findDeferral(arguments);
    (function(_this) {
      return (function(__iced_k) {
        __iced_deferrals = new iced.Deferrals(__iced_k, {
          parent: ___iced_passed_deferral,
          filename: "/Users/max/src/iced/iced-runtime/src/library.iced"
        });
        tmp[0] = __iced_deferrals.defer({
          assign_fn: (function() {
            return function() {
              return ok = arguments[0];
            };
          })(),
          lineno: 58
        });
        __iced_deferrals._fulfill();
      });
    })(this)((function(_this) {
      return function() {
        if (ok) {
          res[0] = true;
        }
        return cb();
      };
    })(this));
  };

  exports.ior = function(cb, res) {
    var tmp;
    tmp = [];
    _ior(cb, res, tmp);
    return tmp[0];
  };

  exports.Pipeliner = Pipeliner = (function() {
    function Pipeliner(window, delay) {
      this.window = window || 1;
      this.delay = delay || 0;
      this.queue = [];
      this.n_out = 0;
      this.cb = null;
      this[C.deferrals] = this;
      this["defer"] = this._defer;
    }

    Pipeliner.prototype.waitInQueue = function(cb) {
      var ___iced_passed_deferral, __iced_deferrals, __iced_k;
      __iced_k = __iced_k_noop;
      ___iced_passed_deferral = iced.findDeferral(arguments);
      (function(_this) {
        return (function(__iced_k) {
          var _while;
          _while = function(__iced_k) {
            var _break, _continue, _next;
            _break = __iced_k;
            _continue = function() {
              return iced.trampoline(function() {
                return _while(__iced_k);
              });
            };
            _next = _continue;
            if (!(_this.n_out >= _this.window)) {
              return _break();
            } else {
              (function(__iced_k) {
                __iced_deferrals = new iced.Deferrals(__iced_k, {
                  parent: ___iced_passed_deferral,
                  filename: "/Users/max/src/iced/iced-runtime/src/library.iced",
                  funcname: "Pipeliner.waitInQueue"
                });
                _this.cb = __iced_deferrals.defer({
                  lineno: 100
                });
                __iced_deferrals._fulfill();
              })(_next);
            }
          };
          _while(__iced_k);
        });
      })(this)((function(_this) {
        return function() {
          _this.n_out++;
          (function(__iced_k) {
            if (_this.delay) {
              (function(__iced_k) {
                __iced_deferrals = new iced.Deferrals(__iced_k, {
                  parent: ___iced_passed_deferral,
                  filename: "/Users/max/src/iced/iced-runtime/src/library.iced",
                  funcname: "Pipeliner.waitInQueue"
                });
                setTimeout(__iced_deferrals.defer({
                  lineno: 108
                }), _this.delay);
                __iced_deferrals._fulfill();
              })(__iced_k);
            } else {
              return __iced_k();
            }
          })(function() {
            return cb();
          });
        };
      })(this));
    };

    Pipeliner.prototype.__defer = function(out, deferArgs) {
      var tmp, voidCb, ___iced_passed_deferral, __iced_deferrals, __iced_k;
      __iced_k = __iced_k_noop;
      ___iced_passed_deferral = iced.findDeferral(arguments);
      (function(_this) {
        return (function(__iced_k) {
          __iced_deferrals = new iced.Deferrals(__iced_k, {
            parent: ___iced_passed_deferral,
            filename: "/Users/max/src/iced/iced-runtime/src/library.iced",
            funcname: "Pipeliner.__defer"
          });
          voidCb = __iced_deferrals.defer({
            lineno: 122
          });
          out[0] = function() {
            var args, _ref;
            args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
            if ((_ref = deferArgs.assign_fn) != null) {
              _ref.apply(null, args);
            }
            return voidCb();
          };
          __iced_deferrals._fulfill();
        });
      })(this)((function(_this) {
        return function() {
          _this.n_out--;
          if (_this.cb) {
            tmp = _this.cb;
            _this.cb = null;
            return tmp();
          }
        };
      })(this));
    };

    Pipeliner.prototype._defer = function(deferArgs) {
      var tmp;
      tmp = [];
      this.__defer(tmp, deferArgs);
      return tmp[0];
    };

    Pipeliner.prototype.flush = function(autocb) {
      var ___iced_passed_deferral, __iced_k, _while;
      __iced_k = autocb;
      ___iced_passed_deferral = iced.findDeferral(arguments);
      _while = (function(_this) {
        var __iced_deferrals;
        return function(__iced_k) {
          var _break, _continue, _next;
          _break = __iced_k;
          _continue = function() {
            return iced.trampoline(function() {
              return _while(__iced_k);
            });
          };
          _next = _continue;
          if (!_this.n_out) {
            return _break();
          } else {
            (function(__iced_k) {
              __iced_deferrals = new iced.Deferrals(__iced_k, {
                parent: ___iced_passed_deferral,
                filename: "/Users/max/src/iced/iced-runtime/src/library.iced",
                funcname: "Pipeliner.flush"
              });
              _this.cb = __iced_deferrals.defer({
                lineno: 151
              });
              __iced_deferrals._fulfill();
            })(_next);
          }
        };
      })(this);
      _while(__iced_k);
    };

    return Pipeliner;

  })();

}).call(this);

},{"./const":30,"./runtime":33}],32:[function(require,module,exports){
// Generated by IcedCoffeeScript 108.0.8
(function() {
  var k, mod, mods, v, _i, _len;

  exports["const"] = require('./const');

  mods = [require('./runtime'), require('./library')];

  for (_i = 0, _len = mods.length; _i < _len; _i++) {
    mod = mods[_i];
    for (k in mod) {
      v = mod[k];
      exports[k] = v;
    }
  }

}).call(this);

},{"./const":30,"./library":31,"./runtime":33}],33:[function(require,module,exports){
(function (process){
// Generated by IcedCoffeeScript 108.0.8
(function() {
  var C, Deferrals, Rendezvous, exceptionHandler, findDeferral, make_defer_return, stackWalk, tick_counter, trampoline, warn, __active_trace, __c, _trace_to_string,
    __slice = [].slice;

  C = require('./const');

  make_defer_return = function(obj, defer_args, id, trace_template, multi) {
    var k, ret, trace, v;
    trace = {};
    for (k in trace_template) {
      v = trace_template[k];
      trace[k] = v;
    }
    trace[C.lineno] = defer_args != null ? defer_args[C.lineno] : void 0;
    ret = function() {
      var inner_args, o, _ref;
      inner_args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
      if (defer_args != null) {
        if ((_ref = defer_args.assign_fn) != null) {
          _ref.apply(null, inner_args);
        }
      }
      if (obj) {
        o = obj;
        if (!multi) {
          obj = null;
        }
        return o._fulfill(id, trace);
      } else {
        return warn("overused deferral at " + (_trace_to_string(trace)));
      }
    };
    ret[C.trace] = trace;
    return ret;
  };

  __c = 0;

  tick_counter = function(mod) {
    __c++;
    if ((__c % mod) === 0) {
      __c = 0;
      return true;
    } else {
      return false;
    }
  };

  __active_trace = null;

  _trace_to_string = function(tr) {
    var fn;
    fn = tr[C.funcname] || "<anonymous>";
    return "" + fn + " (" + tr[C.filename] + ":" + (tr[C.lineno] + 1) + ")";
  };

  warn = function(m) {
    return typeof console !== "undefined" && console !== null ? console.error("ICED warning: " + m) : void 0;
  };

  exports.trampoline = trampoline = function(fn) {
    if (!tick_counter(500)) {
      return fn();
    } else if ((typeof process !== "undefined" && process !== null ? process.nextTick : void 0) != null) {
      return process.nextTick(fn);
    } else {
      return setTimeout(fn);
    }
  };

  exports.Deferrals = Deferrals = (function() {
    function Deferrals(k, trace) {
      this.trace = trace;
      this.continuation = k;
      this.count = 1;
      this.ret = null;
    }

    Deferrals.prototype._call = function(trace) {
      var c;
      if (this.continuation) {
        __active_trace = trace;
        c = this.continuation;
        this.continuation = null;
        return c(this.ret);
      } else {
        return warn("Entered dead await at " + (_trace_to_string(trace)));
      }
    };

    Deferrals.prototype._fulfill = function(id, trace) {
      if (--this.count > 0) {

      } else {
        return trampoline(((function(_this) {
          return function() {
            return _this._call(trace);
          };
        })(this)));
      }
    };

    Deferrals.prototype.defer = function(args) {
      var self;
      this.count++;
      self = this;
      return make_defer_return(self, args, null, this.trace);
    };

    return Deferrals;

  })();

  exports.findDeferral = findDeferral = function(args) {
    var a, _i, _len;
    for (_i = 0, _len = args.length; _i < _len; _i++) {
      a = args[_i];
      if (a != null ? a[C.trace] : void 0) {
        return a;
      }
    }
    return null;
  };

  exports.Rendezvous = Rendezvous = (function() {
    var RvId;

    function Rendezvous() {
      this.completed = [];
      this.waiters = [];
      this.defer_id = 0;
    }

    RvId = (function() {
      function RvId(rv, id, multi) {
        this.rv = rv;
        this.id = id;
        this.multi = multi;
      }

      RvId.prototype.defer = function(defer_args) {
        return this.rv._defer_with_id(this.id, defer_args, this.multi);
      };

      return RvId;

    })();

    Rendezvous.prototype.wait = function(cb) {
      var x;
      if (this.completed.length) {
        x = this.completed.shift();
        return cb(x);
      } else {
        return this.waiters.push(cb);
      }
    };

    Rendezvous.prototype.defer = function(defer_args) {
      var id;
      id = this.defer_id++;
      return this._defer_with_id(id, defer_args);
    };

    Rendezvous.prototype.id = function(i, multi) {
      multi = !!multi;
      return new RvId(this, i, multi);
    };

    Rendezvous.prototype._fulfill = function(id, trace) {
      var cb;
      if (this.waiters.length) {
        cb = this.waiters.shift();
        return cb(id);
      } else {
        return this.completed.push(id);
      }
    };

    Rendezvous.prototype._defer_with_id = function(id, defer_args, multi) {
      this.count++;
      return make_defer_return(this, defer_args, id, {}, multi);
    };

    return Rendezvous;

  })();

  exports.stackWalk = stackWalk = function(cb) {
    var line, ret, tr, _ref;
    ret = [];
    tr = cb ? cb[C.trace] : __active_trace;
    while (tr) {
      line = "   at " + (_trace_to_string(tr));
      ret.push(line);
      tr = tr != null ? (_ref = tr[C.parent]) != null ? _ref[C.trace] : void 0 : void 0;
    }
    return ret;
  };

  exports.exceptionHandler = exceptionHandler = function(err, logger) {
    var stack;
    if (!logger) {
      logger = console.error;
    }
    logger(err.stack);
    stack = stackWalk();
    if (stack.length) {
      logger("Iced 'stack' trace (w/ real line numbers):");
      return logger(stack.join("\n"));
    }
  };

  exports.catchExceptions = function(logger) {
    return typeof process !== "undefined" && process !== null ? process.on('uncaughtException', function(err) {
      exceptionHandler(err, logger);
      return process.exit(1);
    }) : void 0;
  };

}).call(this);

}).call(this,require('_process'))

},{"./const":30,"_process":38}],34:[function(require,module,exports){

var indexOf = [].indexOf;

module.exports = function(arr, obj){
  if (indexOf) return arr.indexOf(obj);
  for (var i = 0; i < arr.length; ++i) {
    if (arr[i] === obj) return i;
  }
  return -1;
};
},{}],35:[function(require,module,exports){
if (typeof Object.create === 'function') {
  // implementation from standard node.js 'util' module
  module.exports = function inherits(ctor, superCtor) {
    ctor.super_ = superCtor
    ctor.prototype = Object.create(superCtor.prototype, {
      constructor: {
        value: ctor,
        enumerable: false,
        writable: true,
        configurable: true
      }
    });
  };
} else {
  // old school shim for old browsers
  module.exports = function inherits(ctor, superCtor) {
    ctor.super_ = superCtor
    var TempCtor = function () {}
    TempCtor.prototype = superCtor.prototype
    ctor.prototype = new TempCtor()
    ctor.prototype.constructor = ctor
  }
}

},{}],36:[function(require,module,exports){
(function (global){
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.js2coffee=e()}}(function(){var e,t,u;return function n(e,t,u){function r(o,s){if(!t[o]){if(!e[o]){var a=typeof require=="function"&&require;if(!s&&a)return a(o,!0);if(i)return i(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var f=t[o]={exports:{}};e[o][0].call(f.exports,function(t){var u=e[o][1][t];return r(u?u:t)},f,f.exports,n,e,t,u)}return t[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<u.length;o++)r(u[o]);return r}({1:[function(e,t,u){var n,r,i,o,s;i=e("./lib/transforms/base");r=e("./lib/builder/base");n=e("./lib/builder");o=e("./lib/helpers").buildError;t.exports=s=function(e,t){return s.build(e,t).code};s.build=function(e,t){var u,n,r,i,o,a;if(t==null){t={}}if(t.filename==null){t.filename="input.js"}if(t.indent==null){t.indent=2}t.source=e;u=s.parseJS(e,t);i=s.transform(u,t),u=i.ast,a=i.warnings;o=s.generate(u,t),n=o.code,r=o.map;return{code:n,ast:u,map:r,warnings:a}};s.parseJS=function(t,u){var n,r,i;if(u==null){u={}}try{n=e("esprima");return n.parse(t,{loc:true,range:true,comment:true})}catch(i){r=i;throw o(r,t,u.filename)}};s.transform=function(t,u){var n,r,o;if(u==null){u={}}r={};o=function(e){return i.run(t,u,e,r)};n=!(u.comments===false);if(n){o([e("./lib/transforms/comments")])}o([e("./lib/transforms/functions")]);o([e("./lib/transforms/exponents"),e("./lib/transforms/ifs"),e("./lib/transforms/iife"),e("./lib/transforms/literals"),e("./lib/transforms/loops"),e("./lib/transforms/members"),e("./lib/transforms/objects"),e("./lib/transforms/binary"),e("./lib/transforms/empty_statements"),e("./lib/transforms/others"),e("./lib/transforms/precedence"),e("./lib/transforms/returns"),e("./lib/transforms/switches"),e("./lib/transforms/unsupported")]);o([e("./lib/transforms/blocks")]);return{ast:t,warnings:r.warnings}};s.generate=function(e,t){if(t==null){t={}}return new n(e,t).get()};s.version=e("./package.json").version},{"./lib/builder":3,"./lib/builder/base":2,"./lib/helpers":5,"./lib/transforms/base":6,"./lib/transforms/binary":7,"./lib/transforms/blocks":8,"./lib/transforms/comments":9,"./lib/transforms/empty_statements":10,"./lib/transforms/exponents":11,"./lib/transforms/functions":12,"./lib/transforms/ifs":13,"./lib/transforms/iife":14,"./lib/transforms/literals":15,"./lib/transforms/loops":16,"./lib/transforms/members":17,"./lib/transforms/objects":18,"./lib/transforms/others":19,"./lib/transforms/precedence":20,"./lib/transforms/returns":21,"./lib/transforms/switches":22,"./lib/transforms/unsupported":23,"./package.json":61,esprima:48}],2:[function(e,t,u){var n,r,i=function(e,t){return function(){return e.apply(t,arguments)}};r=e("./strip_spaces");n=function(){function t(e,t){this.root=e;this.options=t!=null?t:{};this.walk=i(this.walk,this);this.path=[]}t.prototype.run=function(){return this.walk(this.root)};t.prototype.walk=function(e,t){var u,n,r;n=this.path.length;this.path.push(e);if(typeof t!=="string"){t=void 0}t||(t=e.type);this.ctx={path:this.path,type:t,parent:this.path[this.path.length-2]};u=this[t];if(u){r=u.call(this,e,this.ctx);if(this.decorator!=null){r=this.decorator(e,r)}}else{r=this.onUnknownNode(e,this.ctx)}this.path.splice(n);return r};t.prototype.get=function(){var e;e=this.run();e=r(e);return e.toStringWithSourceMap()};t.prototype.decorator=function(t,u){var n,r,i,o,s;n=e("source-map").SourceNode;return new n(t!=null?(r=t.loc)!=null?(i=r.start)!=null?i.line:void 0:void 0:void 0,t!=null?(o=t.loc)!=null?(s=o.start)!=null?s.column:void 0:void 0:void 0,this.options.filename,u)};return t}();t.exports=n},{"./strip_spaces":4,"source-map":50}],3:[function(e,t,u){var n,r,i,o,s,a,l,f,c,p,D,h,m=function(e,t){for(var u in t){if(d.call(t,u))e[u]=t[u]}function n(){this.constructor=e}n.prototype=t.prototype;e.prototype=new n;e.__super__=t.prototype;return e},d={}.hasOwnProperty;p=e("../helpers"),f=p.prependAll,c=p.quote,l=p.newline,D=p.space,s=p.delimit,o=p.commaDelimit,h=p.toIndent,a=p.joinLines;i=e("../transforms/base");r=e("./base");t.exports=n=function(e){m(t,e);function t(e,u){if(u==null){u={}}t.__super__.constructor.apply(this,arguments);this._indent=0}t.prototype.Program=function(e){this.comments=e.comments;return this.BlockStatement(e)};t.prototype.ExpressionStatement=function(e){return l(this.walk(e.expression))};t.prototype.AssignmentExpression=function(e){var t;t=this.paren(D([this.walk(e.left),e.operator,this.walk(e.right)]));if(e.right.type==="FunctionExpression"){t=["\n",this.indent(),t,"\n"]}return t};t.prototype.Identifier=function(e){return[e.name]};t.prototype.UnaryExpression=function(e){var t,u;t=function(){return e.argument.type==="UnaryExpression"};u=function(){return/^[a-z]+$/i.test(e.operator)};if(t()||u()){return this.paren([e.operator," ",this.walk(e.argument)])}else{return this.paren([e.operator,this.walk(e.argument)])}};t.prototype.BinaryExpression=function(e){var t;t=e.operator;if(t==="in"){t="of"}return this.paren(D([this.walk(e.left),t,this.walk(e.right)]))};t.prototype.Literal=function(e){if(typeof e.value==="string"){return[c(e.value)]}else{return[e.raw]}};t.prototype.MemberExpression=function(e){var t;t=e.computed?["[",this.walk(e.property),"]"]:e._prefixed?[this.walk(e.property)]:[".",this.walk(e.property)];return this.paren([this.walk(e.object),t])};t.prototype.LogicalExpression=function(e){var t,u;u={"||":"or","&&":"and"};t=u[e.operator];return this.paren([this.walk(e.left)," ",t," ",this.walk(e.right)])};t.prototype.ThisExpression=function(e){if(e._prefix){return["@"]}else{return["this"]}};t.prototype.CallExpression=function(e,t){var u,n,r;u=this.walk(e.callee);r=this.makeSequence(e["arguments"]);e._isStatement=t.parent.type==="ExpressionStatement";n=r.length>0;if(e._isStatement&&n){return D([u,r])}else{return[u,this.paren(r,true)]}};t.prototype.IfStatement=function(e){var t,u;t=e.alternate;if((t!=null?t.type:void 0)==="IfStatement"){u=this.indent(["else ",this.walk(e.alternate,"IfStatement")])}else if((t!=null?t.type:void 0)==="BlockStatement"){u=this.indent(function(t){return function(u){return[u,"else","\n",t.walk(e.alternate)]}}(this))}else if(t!=null){u=this.indent(function(t){return function(u){return[u,"else","\n",t.indent(t.walk(e.alternate))]}}(this))}else{u=[]}return this.indent(function(t){return function(n){var r,i,o;i=t.walk(e.test);r=t.walk(e.consequent);if(e.consequent.type!=="BlockStatement"){r=t.indent(r)}o=e._negative?"unless":"if";return[o," ",i,"\n",r,u]}}(this))};t.prototype.BlockStatement=function(e){return this.makeStatements(e,e.body)};t.prototype.makeStatements=function(e,t){var u,n,r,i,o,s;s=t.map(this.walk);o=[];for(u=r=0,i=s.length;r<i;u=++r){n=s[u];if(t[u].type!=="BlockStatement"){o.push(this.indent())}o.push(n)}return o};t.prototype.LineComment=function(e){return["#",e.value,"\n"]};t.prototype.BlockComment=function(e){var t,u;t=("###"+e.value+"###").split("\n");u=[s(t,["\n",this.indent()]),"\n"];return["\n",this.indent(),u,"\n"]};t.prototype.ReturnStatement=function(e){if(e.argument){return D(["return",[this.walk(e.argument),"\n"]])}else{return["return","\n"]}};t.prototype.ArrayExpression=function(e){var t,u;u=e.elements.length;t=u===1;if(u===0){return["[]"]}else if(t){return D(["[",e.elements.map(this.walk),"]"])}else{return this.indent(function(t){return function(u){var n,r;r=e.elements.map(function(e){return l(t.walk(e))});n=f(r,t.indent());return["[","\n",n,u,"]"]}}(this))}};t.prototype.ObjectExpression=function(e,t){var u,n;n=e.properties.length;u=e._braced;if(n===0){return["{}"]}else if(n===1){n=e.properties.map(this.walk);if(u){return this.paren(D(["{",n,"}"]))}else{return this.paren([n])}}else if(e._last){n=e.properties.map(this.walk);return s(n,["\n",this.indent()])}else{n=this.indent(function(t){return function(){n=e.properties.map(t.walk);return["\n",a(n,t.indent())]}}(this));if(u){return this.paren(["{",n,"\n",this.indent(),"}"])}else{return this.paren([n])}}};t.prototype.Property=function(e){if(e.kind!=="init"){throw new Error("Property: not sure about kind "+e.kind)}return D([[this.walk(e.key),":"],this.walk(e.value)])};t.prototype.VariableDeclaration=function(e){var t;t=e.declarations.map(this.walk);return s(t,this.indent())};t.prototype.VariableDeclarator=function(e){var t;t=[this.walk(e.id)," = ",l(this.walk(e.init))];if(e.init.type==="FunctionExpression"){t=["\n",this.indent(),t,"\n"]}return t};t.prototype.FunctionExpression=function(e,t){var u,n;n=this.makeParams(e.params,e.defaults);u=this.indent(function(t){return function(u){return[n,"->","\n",t.walk(e.body)]}}(this));if(e._parenthesized){return["(",u,this.indent(),")"]}else{return u}};t.prototype.EmptyStatement=function(e){return[]};t.prototype.SequenceExpression=function(e){var t;t=e.expressions.map(function(e){return function(t){return[e.walk(t),"\n"]}}(this));return s(t,this.indent())};t.prototype.NewExpression=function(e){var t,u,n,r;u=((n=e.callee)!=null?n.type:void 0)==="Identifier"?[this.walk(e.callee)]:["(",this.walk(e.callee),")"];t=((r=e["arguments"])!=null?r.length:void 0)?["(",this.makeSequence(e["arguments"]),")"]:[];return this.paren(["new ",u,t])};t.prototype.WhileStatement=function(e){return["while ",this.walk(e.test),"\n",this.makeLoopBody(e.body)]};t.prototype.CoffeeLoopStatement=function(e){return["loop","\n",this.makeLoopBody(e.body)]};t.prototype.BreakStatement=function(e){return["break","\n"]};t.prototype.ContinueStatement=function(e){return["continue","\n"]};t.prototype.DebuggerStatement=function(e){return["debugger","\n"]};t.prototype.TryStatement=function(e){var t,u,n;n=this.indent(function(t){return function(){return["try","\n",t.walk(e.block)]}}(this));t=this.indent(function(t){return function(u){return[u,t.walk(e.handler)]}}(this));u=e.finalizer!=null?this.indent(function(t){return function(u){return[u,"finally","\n",t.walk(e.finalizer)]}}(this)):[];return[n,t,u]};t.prototype.CatchClause=function(e){return["catch ",this.walk(e.param),"\n",this.walk(e.body)]};t.prototype.ThrowStatement=function(e){return["throw ",this.walk(e.argument),"\n"]};t.prototype.ConditionalExpression=function(e){return this.paren(D(["if",this.walk(e.test),"then",this.walk(e.consequent),"else",this.walk(e.alternate)]))};t.prototype.UpdateExpression=function(e){if(e.prefix){return[e.operator,this.walk(e.argument)]}else{return[this.walk(e.argument),e.operator]}};t.prototype.SwitchStatement=function(e){var t,u;t=this.indent(function(t){return function(){return t.makeStatements(e,e.cases)}}(this));u=this.walk(e.discriminant);if(e.discriminant.type==="ConditionalExpression"){u=["(",u,")"]}return["switch ",u,"\n",t]};t.prototype.CoffeeListExpression=function(e){return this.makeSequence(e.expressions)};t.prototype.SwitchCase=function(e){var t,u;t=e.test?["when ",this.walk(e.test)]:["else"];u=this.indent(function(t){return function(){return t.makeStatements(e,e.consequent)}}(this));return[t,"\n",u]};t.prototype.ForInStatement=function(e){var t,u,n;if(e.left.type!=="VariableDeclaration"){u=this.walk(e.left);n={type:"ExpressionStatement",expression:{type:"CoffeeEscapedExpression",raw:u+" = "+u}};e.body.body=[n].concat(e.body.body)}else{u=this.walk(e.left.declarations[0].id)}t=this.makeLoopBody(e.body);return["for ",u," of ",this.walk(e.right),"\n",t]};t.prototype.makeLoopBody=function(e){var t;t=(e!=null?e.type:void 0)==="BlockStatement";if(!e||t&&e.body.length===0){return this.indent(function(e){return function(){return[e.indent(),"continue","\n"]}}(this))}else if(t){return this.indent(function(t){return function(){return t.walk(e)}}(this))}else{return this.indent(function(t){return function(){return[t.indent(),t.walk(e)]}}(this))}};t.prototype.CoffeeEscapedExpression=function(e){if(e._parenthesized){return["(`",e.raw,"`)"]}else{return["`",e.raw,"`"]}};t.prototype.CoffeePrototypeExpression=function(e){if(e.computed){return[this.walk(e.object),"::[",this.walk(e.property),"]"]}else{return[this.walk(e.object),"::",this.walk(e.property)]}};t.prototype.CoffeeDoExpression=function(e){return D(["do",this.walk(e["function"])])};t.prototype.makeSequence=function(e){var t,u,n,r,i;for(u=r=0,i=e.length;r<i;u=++r){t=e[u];n=u===e.length-1;if(!n){if(t.type==="FunctionExpression"){t._parenthesized=true}else if(t.type==="ObjectExpression"){t._braced=true}}}return o(e.map(this.walk))};t.prototype.makeParams=function(e,t){var u,n,r,i,o,a;o=[];for(n=r=0,i=e.length;r<i;n=++r){a=e[n];if(t[n]){u=this.walk(t[n]);o.push([this.walk(a)," = ",u])}else{o.push(this.walk(a))}}if(e.length){return["(",s(o,", "),") "]}else{return[]}};t.prototype.parenthesizeArguments=function(e){var t,u,n,r,i,o,s;o=e["arguments"];s=[];for(u=r=0,i=o.length;r<i;u=++r){t=o[u];n=u===e["arguments"].length-1;if(t.type==="FunctionExpression"){if(!n){s.push(t._parenthesized=true)}else{s.push(void 0)}}else{s.push(void 0)}}return s};t.prototype.indent=function(e){var t,u,n;if(typeof e==="function"){t=this.indent();this._indent+=1;u=e(t);this._indent-=1;return u}else if(e){return[this.indent(),e]}else{n=h(this.options.indent);return Array(this._indent+1).join(n)}};t.prototype.paren=function(e,t){var u,n;if(t==null){t=(n=this.path[this.path.length-1])!=null?n._parenthesized:void 0}u=e.toString().match(/\n$/);if(t){if(u){return["(",e,this.indent(),")"]}else{return["(",e,")"]}}else{return e}};t.prototype.onUnknownNode=function(e,t){return this.syntaxError(e,e.type+" is not supported")};t.prototype.syntaxError=i.prototype.syntaxError;return t}(r)},{"../helpers":5,"../transforms/base":6,"./base":2}],4:[function(e,t,u){var n,r,i,o,s,a,l;n=/^\s*\n+\s*$/;l=function(e){e=a(e);e=s(e);e=o(e);e=i(e);return e};i=function(e){var t,u;u=0;t=null;return r(e,{},function(e){if(u===0||u===1&&e.match(n)){u=1;return e}else if(u===1&&e.match(/^[ \t]+$/)){t=e;u=2;return""}else if(u===2){u=1;if(e.match(n)){return e}else{return t+e}}else{u=0;return e}})};a=function(e){return r(e,{},function(e){if(e.match(n)){return""}else{this["break"]();return e}})};s=function(e){return r(e,{reverse:true},function(e){if(e.match(n)){return""}else{this["break"]();return e+"\n"}})};o=function(e){var t;t=0;return r(e,{},function(e){if(e==="\n"){t+=1}else if(e.match(/^\s*$/)){}else{t=0}if(t>=3){return""}else{return e}})};r=function(e,t,u){var n,r,i;if(t==null){t={}}n=false;r={"break":function(e){return n=true}};i=function(e,t,u){var o,s,a,l,f,c,p,D,h,m,d,A;if(t==null){t={}}D=t.reverse?function(){d=[];for(var t=h=e.children.length-1;h<=0?t<=0:t>=0;h<=0?t++:t--){d.push(t)}return d}.apply(this):function(){A=[];for(var t=0,u=e.children.length;0<=u?t<u:t>u;0<=u?t++:t--){A.push(t)}return A}.apply(this);for(f=0,c=D.length;f<c;f++){s=D[f];if(n){return e}o=e.children[s];if(!o){}else if(o.children){i(o,t,u)}else if(o!==""){p=u.call(r,o);e.children[s]=p}}return e};return i.call(r,e,t,u)};t.exports=l},{}],5:[function(e,t,u){u.delimit=function(e,t){var u,n,r,i,o;o=[];for(u=r=0,i=e.length;r<i;u=++r){n=e[u];if(u>0){o.push(t)}o.push(n)}return o};u.commaDelimit=function(e){var t,u,n,r,i;i=[];for(t=n=0,r=e.length;n<r;t=++n){u=e[t];if(t>0){if(/^\n/.test(u.toString())){i.push(",")}else{i.push(", ")}}i.push(u)}return i};u.prependAll=function(e,t){var u,n,r,i,o;o=[];for(u=r=0,i=e.length;r<i;u=++r){n=e[u];o.push(t);o.push(n)}return o};u.buildError=function(e,t,u){var n,r,i,o,s,a,l,f,c,p,D,h,m,d,A,C,E;if(u==null){u=""}if(e.js2coffee){return e}i=e.description;l=(m=(d=e.start)!=null?d.line:void 0)!=null?m:e.lineNumber;r=(A=(C=(E=e.start)!=null?E.column:void 0)!=null?C:e.column&&e.column-1)!=null?A:0;s=u+":"+l+":"+r+": "+i;f=t.split("\n");D=Math.max(l-3,0);c=l-1;o=c.toString().length;a=1;if(e.end){a=Math.max(e.end.column-e.start.column,1)}h=function(e){return Array(1+o-e.toString().length).join(" ")+e};t=f.slice(D,+c+1||9e9).map(function(e,t){return h(1+t+D)+"  "+e});t.push(Array(o+3).join(" ")+Array(r+1).join(" ")+Array(a+1).join("^"));t=t.join("\n");p=s+"\n\n"+t;n=e;e=new Error(p);e.filename=u;e.description=n.description;e.start={line:l,column:r};e.end=n.end;e.sourcePreview=t;e.js2coffee=true;return e};u.space=function(e){return e.reduce(function(e,t,u){if(u===0){return e.concat([t])}else if(t.toString().substr(0,1)==="\n"){return e.concat([t])}else{return e.concat([" ",t])}},[])};u.newline=function(e){if(/\n$/.test(e.toString())){return e}else{return[e,"\n"]}};u.inspect=function(t){return"~~~~\n"+e("util").inspect(t,{depth:1e3,colors:true})+"\n~~~~"};u.replace=function(e,t){t.range=e.range;t.loc=e.loc;return t};u.clone=function(e){return JSON.parse(JSON.stringify(e))};u.quote=function(e){var t,u;if(typeof e==="string"){t=function(e){var t;t=e.charCodeAt(0).toString(16);t=function(){var e,u,n;n=[];for(e=0,u=4-t.length;0<=u?e<u:e>u;0<=u?e++:e--){n.push("0")}return n}().join("")+t;return"\\u"+t};u=e.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/\n/g,"\\n").replace(/[\u0000-\u0019\u00ad\u200b\u2028\u2029\ufeff]/g,t);return"'"+u+"'"}else{return JSON.stringify(e)}};u.getPrecedence=function(e){var t,u,n,r;r=e.type;u=function(t){return t.indexOf(e.operator)>-1};t={"**":17,"*":14,"/":14,"%":14,"+":13,"-":13,"<<":12,">>":12,">>>":12,"<":11,">":11,"<=":11,">=":11,"in":11,"instanceof":11,"==":10,"===":10,"!=":10,"!==":10,"&":9,"^":8,"|":7};n={"&&":6,"||":5};switch(r){case"Literal":case"Identifier":return 99;case"MemberExpression":case"CallExpression":return 18;case"NewExpression":if(e["arguments"].length===0){return 17}else{return 18}break;case"UpdateExpression":if(e.prefix){return 15}else{return 16}break;case"UnaryExpression":return 15;case"BinaryExpression":return t[e.operator];case"LogicalExpression":return n[e.operator];case"ConditionalExpression":return 4;case"AssignmentExpression":return 3;case"SequenceExpression":return 0;default:return-1}};u.lastStatement=function(e){var t,n,r,i;for(t=n=i=e.length-1;i<=0?n<=0:n>=0;t=i<=0?++n:--n){r=e[t];if(!r){continue}if(!u.isComment(r)){return r}}};u.getReturnStatements=function(e){var t,n,r,i,o;r=u.getReturnStatements,i=u.lastStatement;if(!e){return}else if(e.length){o=i(e)}else{o=e}if(!o){return[]}else if(o.type==="ReturnStatement"){return[o]}else if(o.type==="BlockStatement"){return r(o.body)}else if(o.type==="IfStatement"&&o.consequent&&o.alternate){n=r(o.consequent);t=r(o.alternate);if(n.length>0&&t.length>0){return n.concat(t)}else{return[]}}else{return[]}};u.joinLines=function(e,t){var u,n,r,i,o,s;s=[];for(u=i=0,o=e.length;i<o;u=++i){r=e[u];s.push(t);s.push(r);n=u!==e.length-1;if(!r.toString().match(/\n$/)&&n){s.push("\n")}}return s};u.reserved={keywords:["then","unless","until","loop","of","by","when"],reserved:["case","default","function","var","void","with","const","let","enum","export","import","native","__hasProp","__extends","__slice","__bind","__indexOf","implements","interface","package","private","protected","public","static","yield"],aliases:["and","or","is","isnt","not","yes","no","on","off"]};u.reservedWords=u.reserved.keywords.concat(u.reserved.reserved.concat(u.reserved.aliases));u.nextUntil=function(e,t,u){var n,r,i,o,s,a;r=e.indexOf(t);for(n=i=s=r+1,a=e.length;s<=a?i<=a:i>=a;n=s<=a?++i:--i){o=e[n];if((o!=null?o.type:void 0)&&u(o)){return o}}};u.nextNonComment=function(e,t){return u.nextUntil(e,t,function(e){return e.type!=="BlockComment"&&e.type!=="LineComment"})};u.isLoop=function(e){return e.test==null||u.isTruthy(e.test)};u.isTruthy=function(e){return e.type==="Literal"&&e.value};u.escapeJs=function(t){return u.replace(t,{type:"CoffeeEscapedExpression",raw:e("escodegen").generate(t)})};u.nonComments=function(e){return e.filter(function(e){return!u.isComment(e)})};u.isComment=function(e){return e.type==="LineComment"||e.type==="BlockComment"};u.toIndent=function(e){if(e==="tab"||e==="t"){return"	"}else if(typeof e==="string"&&""+ +e!==e){return e}else{return Array(+e+1).join(" ")}}},{escodegen:29,util:28}],6:[function(e,t,u){var n,r,i,o,s,a,l,f,c=function(e,t){for(var u in t){if(p.call(t,u))e[u]=t[u]}function n(){this.constructor=e}n.prototype=t.prototype;e.prototype=new n;e.__super__=t.prototype;return e},p={}.hasOwnProperty,D=[].slice;s=e("../helpers"),r=s.buildError,o=s.clone,a=s.replace,f=s.toIndent;t.exports=n=function(){t.run=function(e,u,n,r){var i,o,s;i=function(e){c(t,e);function t(){return t.__super__.constructor.apply(this,arguments)}return t}(t);l(i,n);s=new i(e,u);o=s.run();if(r.warnings==null){r.warnings=[]}r.warnings=r.warnings.concat(s.warnings);return o};function t(e,t){this.ast=e;this.options=t;this.scopes=[];this.ctx={vars:[]};this.warnings=[]}t.prototype.run=function(){return this.recurse(this.ast)};t.prototype.recurse=function(e){var t,u;u=this;this.depth=0;t=function(e){return function(t,u,n){var r,i,o,s;e.node=u;e.depth+=t==="Enter"?+1:-1;r=t==="Enter"?""+u.type:u.type+"Exit";if(typeof e[i="onBefore"+t]==="function"){e[i](u,n)}s=typeof e[r]==="function"?e[r](u,n):void 0;if(typeof e[o="on"+t]==="function"){e[o](u,n)}return s}}(this);this.estraverse().replace(e,{enter:function(e,n){u.controller=this;return t("Enter",e,n)},leave:function(e,u){return t("Exit",e,u)}});return e};t.prototype.skip=function(){var e;return(e=this.controller)!=null?e.skip():void 0};t.prototype.remove=function(){var e;return(e=this.controller)!=null?e.remove():void 0};t.prototype.estraverse=function(){return this._estraverse!=null?this._estraverse:this._estraverse=function(){var t;t=e("estraverse");t.VisitorKeys.CoffeeEscapedExpression=[];t.VisitorKeys.CoffeeListExpression=["test","body"];t.VisitorKeys.CoffeePrototypeExpression=["object","property","computed"];t.VisitorKeys.CoffeeLoopStatement=["body"];t.VisitorKeys.CoffeeDoExpression=["function"];t.VisitorKeys.BlockComment=[];t.VisitorKeys.LineComment=[];return t}()};t.prototype.pushStack=function(e){var t,u,n;n=[this.scope,this.ctx],u=n[0],t=n[1];this.scopes.push([this.scope,this.ctx]);this.ctx=o(this.ctx);this.scope=e;return typeof this.onScopeEnter==="function"?this.onScopeEnter(this.scope,this.ctx,u,t):void 0};t.prototype.popStack=function(){var e,t,u,n;u=[this.scope,this.ctx],t=u[0],e=u[1];n=this.scopes.pop(),this.scope=n[0],this.ctx=n[1];return typeof this.onScopeExit==="function"?this.onScopeExit(this.scope,this.ctx,t,e):void 0};t.prototype.syntaxError=function(e,t){var u,n,i;u=r({start:(n=e.loc)!=null?n.start:void 0,end:(i=e.loc)!=null?i.end:void 0,description:t},this.options.source,this.options.filename);throw u};t.prototype.warn=function(e,t){var u,n;return this.warnings.push({start:(u=e.loc)!=null?u.start:void 0,end:(n=e.loc)!=null?n.end:void 0,filename:this.options.filename,description:t})};t.prototype.Program=function(e){this.pushStack(e);return e};t.prototype.ProgramExit=function(e){this.popStack();return e};t.prototype.FunctionExpression=function(e){this.pushStack(e.body);return e};t.prototype.FunctionExpressionExit=function(e){this.popStack();return e};t.prototype.escapeJs=function(t,u){if(u==null){u={}}return a(t,{type:"CoffeeEscapedExpression",_parenthesized:u.parenthesized,raw:e("escodegen").generate(t,{format:{indent:{style:f(this.options.indent)}}})})};return t}();l=function(e,t){var u;u={};t.forEach(function(t){var n,r,o,s;o=t.prototype;s=[];for(r in o){n=o[r];if(t.prototype.hasOwnProperty(r)){if(u[r]&&r!=="constructor"){e.prototype[r]=i(e.prototype[r],n)}else{e.prototype[r]=n}s.push(u[r]=true)}else{s.push(void 0)}}return s});return e};i=function(e,t){return function(){var u,n,r,i;n=arguments[0],u=2<=arguments.length?D.call(arguments,1):[];i=n.type;r=e.bind(this).apply(null,[n].concat(D.call(u)));if(r.type===i){r=t.bind(this).apply(null,[r].concat(D.call(u)))}return r}}},{"../helpers":5,escodegen:29,estraverse:49}],7:[function(e,t,u){var n,r=function(e,t){for(var u in t){if(i.call(t,u))e[u]=t[u]}function n(){this.constructor=e}n.prototype=t.prototype;e.prototype=new n;e.__super__=t.prototype;return e},i={}.hasOwnProperty;n=e("./base");t.exports=function(e){r(t,e);function t(){return t.__super__.constructor.apply(this,arguments)}t.prototype.BinaryExpression=function(e){this.warnAboutEquals(e);this.updateEquals(e);return this.escapeEqualsForCompatibility(e)};t.prototype.updateEquals=function(e){var t,u;t={"===":"==","!==":"!="};u=e.operator;if(t[u]){e.operator=t[u]}return e};t.prototype.escapeEqualsForCompatibility=function(e){var t;t=e.operator==="=="||e.operator==="!=";if(this.options.compat&&t){return this.escapeJs(e)}else{return e}};t.prototype.warnAboutEquals=function(e){var t,u,n;t=e.operator;n={"==":"===","!=":"!=="};if(t==="=="||t==="!="){u=n[t];this.warn(e,"Operator '"+t+"' is not supported in CoffeeScript, "+("use '"+u+"' instead"))}return e};return t}(n)},{"./base":6}],8:[function(e,t,u){var n,r,i=function(e,t){for(var u in t){if(o.call(t,u))e[u]=t[u]}function n(){this.constructor=e}n.prototype=t.prototype;e.prototype=new n;e.__super__=t.prototype;return e},o={}.hasOwnProperty,s=[].slice;r=e("./base");t.exports=n=function(e){i(t,e);function t(){return t.__super__.constructor.apply(this,arguments)}t.prototype.BlockStatement=function(e,t){return this.consolidateBlockIntoParent(e,t)};t.prototype.consolidateBlockIntoParent=function(e,t){var u,n;n=false;u=function(u){return function(u,r){var i,o,a;if(t.type===u&&((o=t[r])!=null?o.indexOf:void 0)){i=t[r].indexOf(e);if(t[r]&&~i){(a=t[r]).splice.apply(a,[i,1].concat(s.call(e.body)));n=true;return true}}}}(this);u("BlockStatement","body")||u("SwitchCase","consequent")||u("IfStatement","consequent")||u("IfStatement","alternate");if(n){return this.skip()}else{return e}};return t}(r)},{"./base":6}],9:[function(e,t,u){var n,r=function(e,t){for(var u in t){if(i.call(t,u))e[u]=t[u]}function n(){this.constructor=e}n.prototype=t.prototype;e.prototype=new n;e.__super__=t.prototype;return e},i={}.hasOwnProperty;n=e("./base");t.exports=function(e){r(t,e);function t(){return t.__super__.constructor.apply(this,arguments)}t.prototype.ProgramExit=null;t.prototype.FunctionExpression=null;t.prototype.FunctionExpressionExit=null;t.prototype.Program=function(e){this.comments=e.comments;this.updateCommentTypes();e.body=this.addCommentsToList([0,Infinity],e.body);return e};t.prototype.BlockStatement=function(e){return this.injectComments(e,"body")};t.prototype.SwitchStatement=function(e){return this.injectComments(e,"cases")};t.prototype.SwitchCase=function(e){return this.injectComments(e,"consequent")};t.prototype.BlockComment=function(e){return this.convertCommentPrefixes(e)};t.prototype.updateCommentTypes=function(){var e,t,u,n,r;n=this.comments;r=[];for(t=0,u=n.length;t<u;t++){e=n[t];switch(e.type){case"Block":r.push(e.type="BlockComment");break;case"Line":r.push(e.type="LineComment");break;default:r.push(void 0)}}return r};t.prototype.injectComments=function(e,t){if(t==null){t="body"}e[t]=this.addCommentsToList(e.range,e[t]);return e};t.prototype.addCommentsToList=function(e,t){var u,n,r,i,o,s,a,l,f;if(e==null){return t}a=[];o=e[0];f=e[1];u=function(e){return function(t,u){return e.comments.filter(function(e){return e.range[0]>=t&&e.range[1]<=u})}}(this);if(t.length>0){for(n=i=0,s=t.length;i<s;n=++i){r=t[n];if(r.range){l=u(o,r.range[0]);a=a.concat(l)}a.push(r);if(r.range){o=r.range[1]}}}l=u(o,f);a=a.concat(l);return a};t.prototype.convertCommentPrefixes=function(e){var t,u;u=e.value.split("\n");t=e.loc.start.column;u=u.map(function(e,n){var r,i,o;i=n===u.length-1&&e.match(/^\s*$/);r=n===0&&u.length===1;o=e.substr(0,t);if(o.match(/^\s+$/)){e=e.substr(t)}if(i){return""}else if(r){return e}else{e=e.replace(/^ \*/,"#");return e+"\n"}});e.value=u.join("");return e};return t}(n)},{"./base":6}],10:[function(e,t,u){var n,r=function(e,t){for(var u in t){if(i.call(t,u))e[u]=t[u]}function n(){this.constructor=e}n.prototype=t.prototype;e.prototype=new n;e.__super__=t.prototype;return e},i={}.hasOwnProperty;n=e("./base");t.exports=function(e){r(t,e);function t(){return t.__super__.constructor.apply(this,arguments)}t.prototype.BlockStatementExit=function(e){return this.removeEmptyStatementsFromBody(e)};t.prototype.SwitchCaseExit=function(e){return this.removeEmptyStatementsFromBody(e,"consequent")};t.prototype.SwitchStatementExit=function(e){return this.removeEmptyStatementsFromBody(e,"cases")};t.prototype.ProgramExit=function(e){return this.removeEmptyStatementsFromBody(e,"body")};t.prototype.removeEmptyStatementsFromBody=function(e,t){if(t==null){t="body"}e[t]=e[t].filter(function(e){return e.type!=="EmptyStatement"});return e};return t}(n)},{"./base":6}],11:[function(e,t,u){var n,r,i=function(e,t){for(var u in t){if(o.call(t,u))e[u]=t[u]}function n(){this.constructor=e}n.prototype=t.prototype;e.prototype=new n;e.__super__=t.prototype;return e},o={}.hasOwnProperty;r=e("../helpers").replace;n=e("./base");t.exports=function(e){i(t,e);function t(){return t.__super__.constructor.apply(this,arguments)}t.prototype.CallExpression=function(e){var t,u,n,i,o,s,a,l,f,c,p;t=((u=e.callee)!=null?u.type:void 0)==="MemberExpression"&&((n=e.callee)!=null?(i=n.object)!=null?i.type:void 0:void 0)==="Identifier"&&((o=e.callee)!=null?(s=o.object)!=null?s.name:void 0:void 0)==="Math"&&((a=e.callee)!=null?(l=a.property)!=null?l.type:void 0:void 0)==="Identifier"&&((f=e.callee)!=null?(c=f.property)!=null?c.name:void 0:void 0)==="pow"&&((p=e["arguments"])!=null?p.length:void 0)===2;if(!t){return e}return r(e,{type:"BinaryExpression",left:e["arguments"][0],operator:"**",right:e["arguments"][1]})};return t}(n)},{"../helpers":5,"./base":6}],12:[function(e,t,u){var n,r,i,o,s,a,l=function(e,t){for(var u in t){if(f.call(t,u))e[u]=t[u]}function n(){this.constructor=e}n.prototype=t.prototype;e.prototype=new n;e.__super__=t.prototype;return e},f={}.hasOwnProperty,c=[].slice;s=e("../helpers"),i=s.isComment,o=s.nextNonComment,a=s.replace;n=e("./base");t.exports=function(e){l(t,e);function t(){return t.__super__.constructor.apply(this,arguments)}t.prototype.onScopeEnter=function(e,t){return t.prebody=[]};t.prototype.onScopeExit=function(e,t,u,n){if(n.prebody.length){return this.prependIntoBody(u.body,n.prebody)}};t.prototype.prependIntoBody=function(e,t){var u;u=r(e);return e.splice.apply(e,[u,0].concat(c.call(t)))};t.prototype.FunctionDeclaration=function(e){this.ctx.prebody.push(this.buildFunctionDeclaration(e));this.pushStack(e.body)};t.prototype.FunctionDeclarationExit=function(e){this.popStack(e);return this.remove()};t.prototype.LineComment=function(e,t){return this.moveFunctionComments(e,t)};t.prototype.BlockComment=function(e,t){return this.moveFunctionComments(e,t)};t.prototype.FunctionExpression=function(e){this.pushStack(e.body)};t.prototype.FunctionExpressionExit=function(e){this.popStack();if(e.id){if(this.options.compat){return this.escapeJs(e,{parenthesized:true})}else{this.warn(e,"Named function expressions are not supported in CoffeeScript");return e}}else{return e}};t.prototype.moveFunctionComments=function(e,t){var u,n;if(!t.body){return}n=o(t.body,e);if(!n){return}u=n.type==="FunctionExpression"&&n.id;u||(u=n.type==="FunctionDeclaration");if(u){this.ctx.prebody.push(e);return this.remove()}};t.prototype.buildFunctionDeclaration=function(e){return a(e,{type:"VariableDeclaration",declarations:[{type:"VariableDeclarator",id:e.id,init:{type:"FunctionExpression",params:e.params,defaults:e.defaults,body:e.body}}]})};return t}(n);r=function(e){var t,u,n,r;t=0;for(t=u=0,n=e.length;u<n;t=++u){r=e[t];if(r.type!=="VariableDeclaration"&&!i(r)){return t}}return t}},{"../helpers":5,"./base":6}],13:[function(e,t,u){var n,r,i,o,s=function(e,t){for(var u in t){if(a.call(t,u))e[u]=t[u]}function n(){this.constructor=e}n.prototype=t.prototype;e.prototype=new n;e.__super__=t.prototype;return e},a={}.hasOwnProperty;o=e("../helpers").nonComments;n=e("./base");t.exports=function(e){s(t,e);function t(){return t.__super__.constructor.apply(this,arguments)}t.prototype.IfStatement=function(e){this.handleBlankIfs(e);this.parenthesizeConditionals(e.test);return e};t.prototype.ConditionalExpression=function(e,t){return this.parenthesizeFunctions(e,t)};t.prototype.parenthesizeFunctions=function(e,t){this.estraverse().traverse(e,{
enter:function(e,t){var u;u=e.type==="FunctionDeclaration"||e.type==="FunctionExpression";if(u){return e._parenthesized=true}}});return e};t.prototype.parenthesizeConditionals=function(e){var t;t=["ConditionalExpression","FunctionExpression"];return this.estraverse().traverse(e,{enter:function(e,u){if(~t.indexOf(e.type)){return e._parenthesized=true}}})};t.prototype.handleBlankIfs=function(e){if(i(e)||r(e)&&!e.alternate){e.alternate={type:"BlockStatement",body:[]}}return e};return t}(n);i=function(e){return!e.consequent};r=function(e){var t,u;t=e.consequent;return u=t&&t.type==="BlockStatement"&&o(t.body).length===0}},{"../helpers":5,"./base":6}],14:[function(e,t,u){var n,r,i,o,s,a=function(e,t){for(var u in t){if(l.call(t,u))e[u]=t[u]}function n(){this.constructor=e}n.prototype=t.prototype;e.prototype=new n;e.__super__=t.prototype;return e},l={}.hasOwnProperty;o=e("../helpers").replace;n=e("./base");t.exports=function(e){a(t,e);function t(){return t.__super__.constructor.apply(this,arguments)}t.prototype.CallExpression=function(e){var t;t=i(e)&&r(e["arguments"])&&s(e.callee.params,e["arguments"]);if(!t){return e}return o(e,{type:"CoffeeDoExpression","function":e.callee,arguments:e["arguments"]})};return t}(n);r=function(e){var t,u,n;for(u=0,n=e.length;u<n;u++){t=e[u];if(t.type!=="Identifier"){return false}}return true};i=function(e){var t,u;return((t=e.callee)!=null?t.type:void 0)==="FunctionExpression"&&((u=e.callee)!=null?u.id:void 0)===null};s=function(e,t){return e.map(function(e){return e.name}).join("/")===t.map(function(e){return e.name}).join("/")}},{"../helpers":5,"./base":6}],15:[function(e,t,u){var n,r,i,o,s=function(e,t){for(var u in t){if(a.call(t,u))e[u]=t[u]}function n(){this.constructor=e}n.prototype=t.prototype;e.prototype=new n;e.__super__=t.prototype;return e},a={}.hasOwnProperty;i=e("../helpers"),o=i.replace,r=i.quote;n=e("./base");t.exports=function(e){s(t,e);function t(){return t.__super__.constructor.apply(this,arguments)}t.prototype.Literal=function(e){return this.unpackRegexpIfNeeded(e)};t.prototype.unpackRegexpIfNeeded=function(e){var t;if(!(e.value instanceof RegExp)){return}t=e.value.toString().match(/^\/([\s\=].*)\/([a-z]*)$/);if(t){e=o(e,{type:"CallExpression",callee:{type:"Identifier",name:"RegExp"},arguments:[{type:"Literal",value:t[1],raw:r(t[1])}]});if(t[2]){e["arguments"].push({type:"Literal",value:t[2],raw:r(t[2])})}return e}};return t}(n)},{"../helpers":5,"./base":6}],16:[function(e,t,u){var n,r,i,o,s=function(e,t){for(var u in t){if(a.call(t,u))e[u]=t[u]}function n(){this.constructor=e}n.prototype=t.prototype;e.prototype=new n;e.__super__=t.prototype;return e},a={}.hasOwnProperty;i=e("../helpers"),o=i.replace,r=i.isLoop;n=e("./base");t.exports=function(e){s(t,e);function t(){return t.__super__.constructor.apply(this,arguments)}t.prototype.ForStatement=function(e){if(this._for==null){this._for=[]}this._for.push(e);this.injectUpdateIntoBody(e);return this.convertForToWhile(e)};t.prototype.ForStatementExit=function(e){var t;t=this._for.pop();delete t._update;return e};t.prototype.ForInStatement=function(e){return this.warnIfNoVar(e)};t.prototype.WhileStatement=function(e){return this.convertWhileToLoop(e)};t.prototype.DoWhileStatement=function(e){return this.convertDoWhileToLoop(e)};t.prototype.ContinueStatement=function(e,t){return this.injectUpdateIntoContinue(e,t)};t.prototype.injectUpdateIntoContinue=function(e,t){var u,n;u=(n=this._for)!=null?n[this._for.length-1]:void 0;if(!(u!=null?u._update:void 0)){return e}this.skip();return{type:"BlockStatement",body:[{type:"ExpressionStatement",expression:u._update},e]}};t.prototype.convertDoWhileToLoop=function(e){var t,u;t=e.body;u=t.body;u.push(o(e.test,{type:"IfStatement",_negative:true,test:e.test,consequent:{type:"BreakStatement"}}));return o(e,{type:"CoffeeLoopStatement",body:t})};t.prototype.warnIfNoVar=function(e){if(e.left.type!=="VariableDeclaration"){this.warn(e,"Using 'for..in' loops without "+"'var' can produce unexpected results")}return e};t.prototype.convertForToWhile=function(e){var t;e.type=r(e)?"CoffeeLoopStatement":"WhileStatement";t=e.init;delete e.init;if(t!=null){return{type:"BlockStatement",body:[{type:"ExpressionStatement",expression:t},e]}}else{return e}};t.prototype.convertWhileToLoop=function(e){if(r(e)){return o(e,{type:"CoffeeLoopStatement",body:e.body})}else{return e}};t.prototype.injectUpdateIntoBody=function(e){var t,u;if(e.update){u={type:"ExpressionStatement",expression:e.update};if(e.body==null){if(e.body==null){e.body={type:"BlockStatement",body:[]}}}else if(e.body.type!=="BlockStatement"){t=e.body;e.body={type:"BlockStatement",body:[t]}}e.body.body=e.body.body.concat([u]);e._update=e.update;delete e.update}return e};return t}(n)},{"../helpers":5,"./base":6}],17:[function(e,t,u){var n,r,i=function(e,t){for(var u in t){if(o.call(t,u))e[u]=t[u]}function n(){this.constructor=e}n.prototype=t.prototype;e.prototype=new n;e.__super__=t.prototype;return e},o={}.hasOwnProperty;r=e("../helpers").replace;n=e("./base");t.exports=function(e){i(t,e);function t(){return t.__super__.constructor.apply(this,arguments)}t.prototype.MemberExpression=function(e){this.transformThisToAtSign(e);this.braceObjectOnLeft(e);return this.replaceWithPrototype(e)||this.parenthesizeObjectIfFunction(e)};t.prototype.CoffeePrototypeExpression=function(e){return this.transformThisToAtSign(e)};t.prototype.transformThisToAtSign=function(e){if(e.object.type==="ThisExpression"){e._prefixed=true;e.object._prefix=true}return e};t.prototype.braceObjectOnLeft=function(e){if(e.object.type==="ObjectExpression"){e.object._braced=true}};t.prototype.replaceWithPrototype=function(e){var t;t=e.computed===false&&e.object.type==="MemberExpression"&&e.object.property.type==="Identifier"&&e.object.property.name==="prototype";if(t){return this.recurse(r(e,{type:"CoffeePrototypeExpression",object:e.object.object,property:e.property}))}};t.prototype.parenthesizeObjectIfFunction=function(e){if(e.object.type==="FunctionExpression"){e.object._parenthesized=true}return e};return t}(n)},{"../helpers":5,"./base":6}],18:[function(e,t,u){var n,r,i=function(e,t){for(var u in t){if(o.call(t,u))e[u]=t[u]}function n(){this.constructor=e}n.prototype=t.prototype;e.prototype=new n;e.__super__=t.prototype;return e},o={}.hasOwnProperty;n=e("./base");t.exports=function(e){i(t,e);function t(){return t.__super__.constructor.apply(this,arguments)}t.prototype.ArrayExpression=function(e){this.braceObjectsInElements(e);return this.catchEmptyArraySlots(e)};t.prototype.ObjectExpression=function(e,t){return this.braceObjectInExpression(e,t)};t.prototype.braceObjectInExpression=function(e,t){var u,n,r;if(t.type==="ExpressionStatement"){u=((n=this.scope.body)!=null?n[((r=this.scope.body)!=null?r.length:void 0)-1]:void 0)===t;if(u){e._last=true}else{e._braced=true}}};t.prototype.braceObjectsInElements=function(e){var t,u,n,r;r=e.elements;for(t=0,n=r.length;t<n;t++){u=r[t];if((u!=null?u.type:void 0)==="ObjectExpression"){u._braced=true}}return e};t.prototype.catchEmptyArraySlots=function(e){if(r(e.elements)){if(this.options.compat){return this.escapeJs(e)}else{return this.syntaxError(e,"Empty array slots are not supported in CoffeeScript")}}};return t}(n);r=function(e){var t,u,n;for(t=0,u=e.length;t<u;t++){n=e[t];if(n===null){return true}}return false}},{"./base":6}],19:[function(e,t,u){var n,r,i,o,s,a=function(e,t){for(var u in t){if(l.call(t,u))e[u]=t[u]}function n(){this.constructor=e}n.prototype=t.prototype;e.prototype=new n;e.__super__=t.prototype;return e},l={}.hasOwnProperty,f=[].slice;i=e("../helpers"),s=i.reservedWords,o=i.replace,r=i.quote;n=e("./base");t.exports=function(e){a(t,e);function t(){return t.__super__.constructor.apply(this,arguments)}t.prototype.FunctionExpression=function(e,u){t.__super__.FunctionExpression.call(this,e);e.params.forEach(function(e){return function(t){if(t.type==="Identifier"){e.ctx.vars.push(t.name)}return e.preventReservedWords(t)}}(this));this.preventReservedWords(e.id);return this.removeUndefinedParameter(e)};t.prototype.FunctionExpressionExit=function(e){var u,n;t.__super__.FunctionExpressionExit.call(this,e);(n=e.body.body).splice.apply(n,[0,0].concat(f.call((u=e.body.shadows)!=null?u:[])));return e};t.prototype.CallExpression=function(e){return this.parenthesizeCallee(e)};t.prototype.Identifier=function(e){return this.escapeUndefined(e)};t.prototype.UnaryExpression=function(e){this.braceObjectBesideUnary(e);return this.updateVoidToUndefined(e)};t.prototype.VariableDeclarator=function(e){this.preventReservedWords(e.id);this.addShadowingIfNeeded(e);return this.addExplicitUndefinedInitializer(e)};t.prototype.AssignmentExpression=function(e){if(this.isReservedIdentifier(e.left)){if(this.options.compat){return this.escapeJs(e)}else{return this.preventReservedWords(e.left)}}else if(e.left.type==="Identifier"&&this.ctx.vars.indexOf(e.left.name)===-1){if(this.options.compat){return this.escapeJs(e)}else{this.warn(e,"Assignment of global variable '"+e.left.name+"'");return e}}else{return e}};t.prototype.ReturnStatement=function(e){return this.parenthesizeObjectsInArgument(e)};t.prototype.braceObjectBesideUnary=function(e){if(e.argument.type==="ObjectExpression"){e.argument._braced=true}};t.prototype.preventReservedWords=function(e){if(this.isReservedIdentifier(e)){return this.syntaxError(e,"'"+e.name+"' is a reserved CoffeeScript keyword")}};t.prototype.isReservedIdentifier=function(e){var t;t=e!=null?e.name:void 0;return t&&~s.indexOf(t)};t.prototype.parenthesizeObjectsInArgument=function(e){if(e.argument){if(e.argument.type==="ObjectExpression"){e.argument._braced=true}}return e};t.prototype.addShadowingIfNeeded=function(e){var t,u,n;u=e.id.name;if(~this.ctx.vars.indexOf(u)){this.warn(e,"Variable shadowing ('"+u+"') is not fully supported in CoffeeScript");n=o(e,{type:"ExpressionStatement",expression:{type:"CoffeeEscapedExpression",raw:"var "+u}});if((t=this.scope).shadows==null){t.shadows=[]}return this.scope.shadows.push(n)}else{return this.ctx.vars.push(u)}};t.prototype.addExplicitUndefinedInitializer=function(e){if(e.init==null){e.init={type:"Identifier",name:"undefined"};this.skip()}return e};t.prototype.updateVoidToUndefined=function(e){if(e.operator==="void"){return o(e,{type:"Identifier",name:"undefined"})}else{return e}};t.prototype.escapeUndefined=function(e){if(e.name==="undefined"&&this.options.compat){return o(e,{type:"CoffeeEscapedExpression",raw:"undefined"})}else{return e}};t.prototype.removeUndefinedParameter=function(e){var t,u,n,r,i,o,s;if(e.params){s=e.params;for(t=r=0,i=s.length;r<i;t=++r){o=s[t];u=t===e.params.length-1;n=o.type==="Identifier"&&o.name==="undefined";if(n){if(u){e.params.pop()}else{this.syntaxError(o,"'undefined' is not allowed in function parameters")}}}}return e};t.prototype.parenthesizeCallee=function(e){if(e.callee.type==="FunctionExpression"){e.callee._parenthesized=true;return e}};return t}(n)},{"../helpers":5,"./base":6}],20:[function(e,t,u){var n,r,i,o,s,a,l=function(e,t){for(var u in t){if(f.call(t,u))e[u]=t[u]}function n(){this.constructor=e}n.prototype=t.prototype;e.prototype=new n;e.__super__=t.prototype;return e},f={}.hasOwnProperty;r=e("../helpers").getPrecedence;n=e("./base");t.exports=function(e){l(t,e);function t(){return t.__super__.constructor.apply(this,arguments)}t.prototype.onEnter=function(e,t){var u,n,s;if(!t){return}s=t.type;if(s==="CallExpression"&&t["arguments"].indexOf(e)>-1){return}if(s==="NewExpression"&&t["arguments"].indexOf(e)>-1){return}if(s==="MemberExpression"&&t.property===e){return}n=r(e);if(n===-1){return}u=o(t,e)||i(t,e)||a(t,e)||n<r(t);if(u){return e._parenthesized=true}};return t}(n);o=function(e,t){return s(e,"-")&&e.right===t};i=function(e,t){return s(e,"/")&&(s(t,"/")||s(t,"*"))&&e.right===t};s=function(e,t){return e.type==="BinaryExpression"&&e.operator===t};a=function(e,t){return e.type==="ConditionalExpression"&&t.type==="ConditionalExpression"&&e.alternate!==t}},{"../helpers":5,"./base":6}],21:[function(e,t,u){var n,r,i=function(e,t){for(var u in t){if(o.call(t,u))e[u]=t[u]}function n(){this.constructor=e}n.prototype=t.prototype;e.prototype=new n;e.__super__=t.prototype;return e},o={}.hasOwnProperty;r=e("../helpers").getReturnStatements;n=e("./base");t.exports=function(e){i(t,e);function t(){return t.__super__.constructor.apply(this,arguments)}t.prototype.onScopeExit=function(e,t,u,n){return this.unreturnify(u)};t.prototype.unreturnify=function(e,t){var u;if(t==null){t="body"}if(e[t].length>0){u=r(e[t]);if(u.length===0){e[t].push({type:"ReturnStatement"})}else{u.forEach(function(e){if(e.argument){e.type="ExpressionStatement";return e.expression=e.argument}})}}};return t}(n)},{"../helpers":5,"./base":6}],22:[function(e,t,u){var n,r=function(e,t){for(var u in t){if(i.call(t,u))e[u]=t[u]}function n(){this.constructor=e}n.prototype=t.prototype;e.prototype=new n;e.__super__=t.prototype;return e},i={}.hasOwnProperty;n=e("./base.coffee");t.exports=function(e){r(t,e);function t(){return t.__super__.constructor.apply(this,arguments)}t.prototype.SwitchStatement=function(e){this.consolidateCases(e);return this.ensureLastCaseIsDefault(e)};t.prototype.SwitchCase=function(e){return this.removeBreaksFromConsequents(e)};t.prototype.ensureLastCaseIsDefault=function(e){var t,u,n,r,i,o,s,a;t=e.cases.filter(function(e){return e.type==="SwitchCase"});s=t.length;for(u=i=0,a=t.length;i<a;u=++i){o=t[u];r=u===s-1;n=o.test==null;if(n&&!r){this.syntaxError(o,"default cases only allowed at the end")}}return e};t.prototype.consolidateCases=function(e){var t,u,n,r,i,o,s;i=[];s=[];o=e.cases;for(t=u=0,r=o.length;u<r;t=++u){n=o[t];if(n.type==="SwitchCase"){if(n.test){s.push(n.test)}if(n.consequent.length>0){if(n.test){n.test={type:"CoffeeListExpression",expressions:s}}s=[];i.push(n)}}else{i.push(n)}}e.cases=i;return e};t.prototype.removeBreaksFromConsequents=function(e){var t,u;if(e.test){t=e.consequent.length-1;u=e.consequent[t];if((u!=null?u.type:void 0)==="BreakStatement"){delete e.consequent[t];e.consequent.length-=1}else if((u!=null?u.type:void 0)==="ContinueStatement"){}else if((u!=null?u.type:void 0)!=="ReturnStatement"){this.syntaxError(e,"No break or return statement found in a case")}return e}};return t}(n)},{"./base.coffee":6}],23:[function(e,t,u){var n,r=function(e,t){for(var u in t){if(i.call(t,u))e[u]=t[u]}function n(){this.constructor=e}n.prototype=t.prototype;e.prototype=new n;e.__super__=t.prototype;return e},i={}.hasOwnProperty;n=e("./base");t.exports=function(e){r(t,e);function t(){return t.__super__.constructor.apply(this,arguments)}t.prototype.LabeledStatement=function(e,t){return this.syntaxError(e,"Labeled statements are not supported in CoffeeScirpt")};t.prototype.WithStatement=function(e){return this.syntaxError(e,"'with' is not supported in CoffeeScript")};return t}(n)},{"./base":6}],24:[function(e,t,u){if(typeof Object.create==="function"){t.exports=function n(e,t){e.super_=t;e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}})}}else{t.exports=function r(e,t){e.super_=t;var u=function(){};u.prototype=t.prototype;e.prototype=new u;e.prototype.constructor=e}}},{}],25:[function(e,t,u){(function(e){function t(e,t){var u=0;for(var n=e.length-1;n>=0;n--){var r=e[n];if(r==="."){e.splice(n,1)}else if(r===".."){e.splice(n,1);u++}else if(u){e.splice(n,1);u--}}if(t){for(;u--;u){e.unshift("..")}}return e}var n=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;var r=function(e){return n.exec(e).slice(1)};u.resolve=function(){var u="",n=false;for(var r=arguments.length-1;r>=-1&&!n;r--){var o=r>=0?arguments[r]:e.cwd();if(typeof o!=="string"){throw new TypeError("Arguments to path.resolve must be strings")}else if(!o){continue}u=o+"/"+u;n=o.charAt(0)==="/"}u=t(i(u.split("/"),function(e){return!!e}),!n).join("/");return(n?"/":"")+u||"."};u.normalize=function(e){var n=u.isAbsolute(e),r=o(e,-1)==="/";e=t(i(e.split("/"),function(e){return!!e}),!n).join("/");if(!e&&!n){e="."}if(e&&r){e+="/"}return(n?"/":"")+e};u.isAbsolute=function(e){return e.charAt(0)==="/"};u.join=function(){var e=Array.prototype.slice.call(arguments,0);return u.normalize(i(e,function(e,t){if(typeof e!=="string"){throw new TypeError("Arguments to path.join must be strings")}return e}).join("/"))};u.relative=function(e,t){e=u.resolve(e).substr(1);t=u.resolve(t).substr(1);function n(e){var t=0;for(;t<e.length;t++){if(e[t]!=="")break}var u=e.length-1;for(;u>=0;u--){if(e[u]!=="")break}if(t>u)return[];return e.slice(t,u-t+1)}var r=n(e.split("/"));var i=n(t.split("/"));var o=Math.min(r.length,i.length);var s=o;for(var a=0;a<o;a++){if(r[a]!==i[a]){s=a;break}}var l=[];for(var a=s;a<r.length;a++){l.push("..")}l=l.concat(i.slice(s));return l.join("/")};u.sep="/";u.delimiter=":";u.dirname=function(e){var t=r(e),u=t[0],n=t[1];if(!u&&!n){return"."}if(n){n=n.substr(0,n.length-1)}return u+n};u.basename=function(e,t){var u=r(e)[2];if(t&&u.substr(-1*t.length)===t){u=u.substr(0,u.length-t.length)}return u};u.extname=function(e){return r(e)[3]};function i(e,t){if(e.filter)return e.filter(t);var u=[];for(var n=0;n<e.length;n++){if(t(e[n],n,e))u.push(e[n])}return u}var o="ab".substr(-1)==="b"?function(e,t,u){return e.substr(t,u)}:function(e,t,u){if(t<0)t=e.length+t;return e.substr(t,u)}}).call(this,e("_process"))},{_process:26}],26:[function(e,t,u){var n=t.exports={};n.nextTick=function(){var e=typeof window!=="undefined"&&window.setImmediate;var t=typeof window!=="undefined"&&window.postMessage&&window.addEventListener;if(e){return function(e){return window.setImmediate(e)}}if(t){var u=[];window.addEventListener("message",function(e){var t=e.source;if((t===window||t===null)&&e.data==="process-tick"){e.stopPropagation();if(u.length>0){var n=u.shift();n()}}},true);return function n(e){u.push(e);window.postMessage("process-tick","*")}}return function r(e){setTimeout(e,0)}}();n.title="browser";n.browser=true;n.env={};n.argv=[];function r(){}n.on=r;n.addListener=r;n.once=r;n.off=r;n.removeListener=r;n.removeAllListeners=r;n.emit=r;n.binding=function(e){throw new Error("process.binding is not supported")};n.cwd=function(){return"/"};n.chdir=function(e){throw new Error("process.chdir is not supported")}},{}],27:[function(e,t,u){t.exports=function n(e){return e&&typeof e==="object"&&typeof e.copy==="function"&&typeof e.fill==="function"&&typeof e.readUInt8==="function"}},{}],28:[function(e,t,u){(function(t,n){var r=/%[sdj%]/g;u.format=function(e){if(!y(e)){var t=[];for(var u=0;u<arguments.length;u++){t.push(s(arguments[u]))}return t.join(" ")}var u=1;var n=arguments;var i=n.length;var o=String(e).replace(r,function(e){if(e==="%%")return"%";if(u>=i)return e;switch(e){case"%s":return String(n[u++]);case"%d":return Number(n[u++]);case"%j":try{return JSON.stringify(n[u++])}catch(t){return"[Circular]"}default:return e}});for(var a=n[u];u<i;a=n[++u]){if(E(a)||!S(a)){o+=" "+a}else{o+=" "+s(a)}}return o};u.deprecate=function(e,r){if(v(n.process)){return function(){return u.deprecate(e,r).apply(this,arguments)}}if(t.noDeprecation===true){return e}var i=false;function o(){if(!i){if(t.throwDeprecation){throw new Error(r)}else if(t.traceDeprecation){console.trace(r)}else{console.error(r)}i=true}return e.apply(this,arguments)}return o};var i={};var o;u.debuglog=function(e){if(v(o))o=t.env.NODE_DEBUG||"";e=e.toUpperCase();if(!i[e]){if(new RegExp("\\b"+e+"\\b","i").test(o)){var n=t.pid;i[e]=function(){var t=u.format.apply(u,arguments);console.error("%s %d: %s",e,n,t)}}else{i[e]=function(){}}}return i[e]};function s(e,t){var n={seen:[],stylize:l};if(arguments.length>=3)n.depth=arguments[2];if(arguments.length>=4)n.colors=arguments[3];if(C(t)){n.showHidden=t}else if(t){u._extend(n,t)}if(v(n.showHidden))n.showHidden=false;if(v(n.depth))n.depth=2;if(v(n.colors))n.colors=false;if(v(n.customInspect))n.customInspect=true;if(n.colors)n.stylize=a;return c(n,e,n.depth)}u.inspect=s;s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};s.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"};function a(e,t){var u=s.styles[t];if(u){return"["+s.colors[u][0]+"m"+e+"["+s.colors[u][1]+"m"}else{return e}}function l(e,t){return e}function f(e){var t={};e.forEach(function(e,u){t[e]=true});return t}function c(e,t,n){if(e.customInspect&&t&&_(t.inspect)&&t.inspect!==u.inspect&&!(t.constructor&&t.constructor.prototype===t)){var r=t.inspect(n,e);if(!y(r)){r=c(e,r,n)}return r}var i=p(e,t);if(i){return i}var o=Object.keys(t);var s=f(o);if(e.showHidden){o=Object.getOwnPropertyNames(t)}if(w(t)&&(o.indexOf("message")>=0||o.indexOf("description")>=0)){return D(t)}if(o.length===0){if(_(t)){var a=t.name?": "+t.name:"";return e.stylize("[Function"+a+"]","special")}if(b(t)){return e.stylize(RegExp.prototype.toString.call(t),"regexp")}if(x(t)){return e.stylize(Date.prototype.toString.call(t),"date")}if(w(t)){return D(t)}}var l="",C=false,E=["{","}"];if(A(t)){C=true;E=["[","]"]}if(_(t)){var F=t.name?": "+t.name:"";l=" [Function"+F+"]"}if(b(t)){l=" "+RegExp.prototype.toString.call(t)}if(x(t)){l=" "+Date.prototype.toUTCString.call(t)}if(w(t)){l=" "+D(t)}if(o.length===0&&(!C||t.length==0)){return E[0]+l+E[1]}if(n<0){if(b(t)){return e.stylize(RegExp.prototype.toString.call(t),"regexp")}else{return e.stylize("[Object]","special")}}e.seen.push(t);var g;if(C){g=h(e,t,n,s,o)}else{g=o.map(function(u){return m(e,t,n,s,u,C)})}e.seen.pop();return d(g,l,E)}function p(e,t){if(v(t))return e.stylize("undefined","undefined");if(y(t)){var u="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(u,"string")}if(g(t))return e.stylize(""+t,"number");if(C(t))return e.stylize(""+t,"boolean");if(E(t))return e.stylize("null","null")}function D(e){return"["+Error.prototype.toString.call(e)+"]"}function h(e,t,u,n,r){var i=[];for(var o=0,s=t.length;o<s;++o){if(j(t,String(o))){i.push(m(e,t,u,n,String(o),true))}else{i.push("")}}r.forEach(function(r){if(!r.match(/^\d+$/)){i.push(m(e,t,u,n,r,true))}});return i}function m(e,t,u,n,r,i){var o,s,a;a=Object.getOwnPropertyDescriptor(t,r)||{value:t[r]};if(a.get){if(a.set){s=e.stylize("[Getter/Setter]","special")}else{s=e.stylize("[Getter]","special")}}else{if(a.set){s=e.stylize("[Setter]","special")}}if(!j(n,r)){o="["+r+"]"}if(!s){if(e.seen.indexOf(a.value)<0){if(E(u)){s=c(e,a.value,null)}else{s=c(e,a.value,u-1)}if(s.indexOf("\n")>-1){if(i){s=s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2)}else{s="\n"+s.split("\n").map(function(e){return"   "+e}).join("\n")}}}else{s=e.stylize("[Circular]","special")}}if(v(o)){if(i&&r.match(/^\d+$/)){return s}o=JSON.stringify(""+r);if(o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)){o=o.substr(1,o.length-2);o=e.stylize(o,"name")}else{o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'");o=e.stylize(o,"string")}}return o+": "+s}function d(e,t,u){var n=0;var r=e.reduce(function(e,t){n++;if(t.indexOf("\n")>=0)n++;return e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);if(r>60){return u[0]+(t===""?"":t+"\n ")+" "+e.join(",\n  ")+" "+u[1]}return u[0]+t+" "+e.join(", ")+" "+u[1]}function A(e){return Array.isArray(e)}u.isArray=A;function C(e){return typeof e==="boolean"}u.isBoolean=C;function E(e){return e===null}u.isNull=E;function F(e){return e==null}u.isNullOrUndefined=F;function g(e){return typeof e==="number"}u.isNumber=g;function y(e){return typeof e==="string"}u.isString=y;function B(e){return typeof e==="symbol"}u.isSymbol=B;function v(e){return e===void 0}u.isUndefined=v;function b(e){return S(e)&&I(e)==="[object RegExp]"}u.isRegExp=b;function S(e){return typeof e==="object"&&e!==null}u.isObject=S;function x(e){return S(e)&&I(e)==="[object Date]"}u.isDate=x;function w(e){return S(e)&&(I(e)==="[object Error]"||e instanceof Error)}u.isError=w;function _(e){return typeof e==="function"}u.isFunction=_;function k(e){return e===null||typeof e==="boolean"||typeof e==="number"||typeof e==="string"||typeof e==="symbol"||typeof e==="undefined"}u.isPrimitive=k;u.isBuffer=e("./support/isBuffer");function I(e){return Object.prototype.toString.call(e)}function P(e){return e<10?"0"+e.toString(10):e.toString(10)}var L=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function O(){var e=new Date;var t=[P(e.getHours()),P(e.getMinutes()),P(e.getSeconds())].join(":");return[e.getDate(),L[e.getMonth()],t].join(" ")}u.log=function(){console.log("%s - %s",O(),u.format.apply(u,arguments))};u.inherits=e("inherits");u._extend=function(e,t){if(!t||!S(t))return e;var u=Object.keys(t);var n=u.length;while(n--){e[u[n]]=t[u[n]]}return e};function j(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}).call(this,e("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./support/isBuffer":27,_process:26,inherits:24}],29:[function(e,t,u){(function(t){(function(){"use strict";var n,r,i,o,s,a,l,f,c,p,D,h,m,d,A,C,E,F,g,y,B,v,b,S,x,w,_;s=e("estraverse");a=e("esutils");n=s.Syntax;function k(e){return ye.Expression.hasOwnProperty(e.type)}function I(e){return ye.Statement.hasOwnProperty(e.type)}r={Sequence:0,Yield:1,Await:1,Assignment:1,Conditional:2,ArrowFunction:2,LogicalOR:3,LogicalAND:4,BitwiseOR:5,BitwiseXOR:6,BitwiseAND:7,Equality:8,Relational:9,BitwiseSHIFT:10,Additive:11,Multiplicative:12,Unary:13,Postfix:14,Call:15,New:16,TaggedTemplate:17,Member:18,Primary:19};i={"||":r.LogicalOR,"&&":r.LogicalAND,"|":r.BitwiseOR,"^":r.BitwiseXOR,"&":r.BitwiseAND,"==":r.Equality,"!=":r.Equality,"===":r.Equality,"!==":r.Equality,is:r.Equality,isnt:r.Equality,"<":r.Relational,">":r.Relational,"<=":r.Relational,">=":r.Relational,"in":r.Relational,"instanceof":r.Relational,"<<":r.BitwiseSHIFT,">>":r.BitwiseSHIFT,">>>":r.BitwiseSHIFT,"+":r.Additive,"-":r.Additive,"*":r.Multiplicative,"%":r.Multiplicative,"/":r.Multiplicative};var P=1,L=1<<1,O=1<<2,j=1<<3,M=1<<4,R=1<<5;var T=L|O,N=P|L,q=P|L|O,U=P,z=O,W=P|O;var V=P,Y=P|R,G=0,K=P|M,$=P|j;function H(){return{indent:null,base:null,parse:null,comment:false,format:{indent:{style:"    ",base:0,adjustMultilineComment:false},newline:"\n",space:" ",json:false,renumber:false,hexadecimal:false,quotes:"single",escapeless:false,compact:false,parentheses:true,semicolons:true,safeConcatenation:false,preserveBlankLines:false},moz:{comprehensionExpressionStartsWithAssignment:false,starlessGenerator:false},sourceMap:null,sourceMapRoot:null,sourceMapWithCode:false,directive:false,raw:true,verbatim:null,sourceCode:null}}function J(e,t){var u="";for(t|=0;t>0;t>>>=1,e+=e){if(t&1){u+=e}}return u}l=Array.isArray;if(!l){l=function _e(e){return Object.prototype.toString.call(e)==="[object Array]"}}function X(e){return/[\r\n]/g.test(e)}function Z(e){var t=e.length;return t&&a.code.isLineTerminator(e.charCodeAt(t-1))}function Q(e,t){var u;for(u in t){if(t.hasOwnProperty(u)){e[u]=t[u]}}return e}function ee(e,t){var u,n;function r(e){return typeof e==="object"&&e instanceof Object&&!(e instanceof RegExp)}for(u in t){if(t.hasOwnProperty(u)){n=t[u];if(r(n)){if(r(e[u])){ee(e[u],n)}else{e[u]=ee({},n)}}else{e[u]=n}}}return e}function te(e){var t,u,n,r,i;if(e!==e){throw new Error("Numeric literal whose value is NaN")}if(e<0||e===0&&1/e<0){throw new Error("Numeric literal whose value is negative")}if(e===1/0){return p?"null":D?"1e400":"1e+400"}t=""+e;if(!D||t.length<3){return t}u=t.indexOf(".");if(!p&&t.charCodeAt(0)===48&&u===1){u=0;t=t.slice(1)}n=t;t=t.replace("e+","e");r=0;if((i=n.indexOf("e"))>0){r=+n.slice(i+1);n=n.slice(0,i)}if(u>=0){r-=n.length-u-1;n=+(n.slice(0,u)+n.slice(u+1))+""}i=0;while(n.charCodeAt(n.length+i-1)===48){--i}if(i!==0){r-=i;n=n.slice(0,i)}if(r!==0){n+="e"+r}if((n.length<t.length||h&&e>1e12&&Math.floor(e)===e&&(n="0x"+e.toString(16)).length<t.length)&&+n===e){t=n}return t}function ue(e,t){if((e&~1)===8232){return(t?"u":"\\u")+(e===8232?"2028":"2029")}else if(e===10||e===13){return(t?"":"\\")+(e===10?"n":"r")}return String.fromCharCode(e)}function ne(e){var t,u,n,r,i,o,s,a;u=e.toString();if(e.source){t=u.match(/\/([^\/]*)$/);if(!t){return u}n=t[1];u="";s=false;a=false;for(r=0,i=e.source.length;r<i;++r){o=e.source.charCodeAt(r);if(!a){if(s){if(o===93){s=false}}else{if(o===47){u+="\\"}else if(o===91){s=true}}u+=ue(o,a);a=o===92}else{u+=ue(o,a);a=false}}return"/"+u+"/"+n}return u}function re(e,t){var u;if(e===8){return"\\b"}if(e===12){return"\\f"}if(e===9){return"\\t"}u=e.toString(16).toUpperCase();if(p||e>255){return"\\u"+"0000".slice(u.length)+u}else if(e===0&&!a.code.isDecimalDigit(t)){return"\\0"}else if(e===11){return"\\x0B"}else{return"\\x"+"00".slice(u.length)+u}}function ie(e){if(e===92){return"\\\\"}if(e===10){return"\\n"}if(e===13){return"\\r"}if(e===8232){return"\\u2028"}if(e===8233){return"\\u2029"}throw new Error("Incorrectly classified character")}function oe(e){var t,u,n,r;r=m==="double"?'"':"'";for(t=0,u=e.length;t<u;++t){n=e.charCodeAt(t);if(n===39){r='"';break}else if(n===34){r="'";break}else if(n===92){++t}}return r+e+r}function se(e){var t="",u,n,r,i=0,o=0,s,l;for(u=0,n=e.length;u<n;++u){r=e.charCodeAt(u);if(r===39){++i}else if(r===34){++o}else if(r===47&&p){t+="\\"}else if(a.code.isLineTerminator(r)||r===92){t+=ie(r);continue}else if(!a.code.isIdentifierPartES5(r)&&(p&&r<32||!p&&!d&&(r<32||r>126))){t+=re(r,e.charCodeAt(u+1));continue}t+=String.fromCharCode(r)}s=!(m==="double"||m==="auto"&&o<i);l=s?"'":'"';if(!(s?i:o)){return l+t+l}e=t;t=l;for(u=0,n=e.length;u<n;++u){r=e.charCodeAt(u);if(r===39&&s||r===34&&!s){t+="\\"}t+=String.fromCharCode(r)}return t+l}function ae(e){var t,u,n,r="";for(t=0,u=e.length;t<u;++t){n=e[t];r+=l(n)?ae(n):n}return r}function le(e,t){if(!b){if(l(e)){return ae(e)}else{return e}}if(t==null){if(e instanceof o){return e}else{t={}}}if(t.loc==null){return new o(null,null,b,e,t.name||null)}return new o(t.loc.start.line,t.loc.start.column,b===true?t.loc.source||null:b,e,t.name||null)}function fe(){return C?C:" "}function ce(e,t){var u,n,r,i;u=le(e).toString();if(u.length===0){return[t]}n=le(t).toString();if(n.length===0){return[e]}r=u.charCodeAt(u.length-1);i=n.charCodeAt(0);if((r===43||r===45)&&r===i||a.code.isIdentifierPartES5(r)&&a.code.isIdentifierPartES5(i)||r===47&&i===105){return[e,fe(),t]}else if(a.code.isWhiteSpace(r)||a.code.isLineTerminator(r)||a.code.isWhiteSpace(i)||a.code.isLineTerminator(i)){return[e,t]}return[e,C,t]}function pe(e){return[f,e]}function De(e){var t;t=f;f+=c;e(f);f=t}function he(e){var t;for(t=e.length-1;t>=0;--t){if(a.code.isLineTerminator(e.charCodeAt(t))){break}}return e.length-1-t}function me(e,t){var u,n,r,i,o,s,l,c;u=e.split(/\r\n|[\r\n]/);s=Number.MAX_VALUE;for(n=1,r=u.length;n<r;++n){i=u[n];o=0;while(o<i.length&&a.code.isWhiteSpace(i.charCodeAt(o))){++o}if(s>o){s=o}}if(typeof t!=="undefined"){l=f;if(u[1][s]==="*"){t+=" "}f=t}else{if(s&1){--s}l=f}for(n=1,r=u.length;n<r;++n){c=le(pe(u[n].slice(s)));u[n]=b?c.join(""):c}f=l;return u.join("\n")}function de(e,t){if(e.type==="Line"){if(Z(e.value)){return"//"+e.value}else{var u="//"+e.value;if(!x){u+="\n"}return u}}if(B.format.indent.adjustMultilineComment&&/[\n\r]/.test(e.value)){return me("/*"+e.value+"*/",t)}return"/*"+e.value+"*/"}function Ae(e,t){var u,r,i,o,s,a,l,p,D,h,m,d,A,C;if(e.leadingComments&&e.leadingComments.length>0){o=t;if(x){i=e.leadingComments[0];t=[];p=i.extendedRange;D=i.range;m=S.substring(p[0],D[0]);C=(m.match(/\n/g)||[]).length;if(C>0){t.push(J("\n",C));t.push(pe(de(i)))}else{t.push(m);t.push(de(i))}h=D;for(u=1,r=e.leadingComments.length;u<r;u++){i=e.leadingComments[u];D=i.range;d=S.substring(h[1],D[0]);C=(d.match(/\n/g)||[]).length;t.push(J("\n",C));t.push(pe(de(i)));h=D}A=S.substring(D[1],p[1]);C=(A.match(/\n/g)||[]).length;t.push(J("\n",C))}else{i=e.leadingComments[0];t=[];if(g&&e.type===n.Program&&e.body.length===0){t.push("\n")}t.push(de(i));if(!Z(le(t).toString())){t.push("\n")}for(u=1,r=e.leadingComments.length;u<r;++u){i=e.leadingComments[u];l=[de(i)];
if(!Z(le(l).toString())){l.push("\n")}t.push(pe(l))}}t.push(pe(o))}if(e.trailingComments){if(x){i=e.trailingComments[0];p=i.extendedRange;D=i.range;m=S.substring(p[0],D[0]);C=(m.match(/\n/g)||[]).length;if(C>0){t.push(J("\n",C));t.push(pe(de(i)))}else{t.push(m);t.push(de(i))}}else{s=!Z(le(t).toString());a=J(" ",he(le([f,t,c]).toString()));for(u=0,r=e.trailingComments.length;u<r;++u){i=e.trailingComments[u];if(s){if(u===0){t=[t,c]}else{t=[t,a]}t.push(de(i,a))}else{t=[t,pe(de(i))]}if(u!==r-1&&!Z(le(t).toString())){t=[t,"\n"]}}}}return t}function Ce(e,t,u){var n,r=0;for(n=e;n<t;n++){if(S[n]==="\n"){r++}}for(n=1;n<r;n++){u.push(A)}}function Ee(e,t,u){if(t<u){return["(",e,")"]}return e}function Fe(e){var t,u,n;n=e.split(/\r\n|\n/);for(t=1,u=n.length;t<u;t++){n[t]=A+f+n[t]}return n}function ge(e,t){var u,n,i;u=e[B.verbatim];if(typeof u==="string"){n=Ee(Fe(u),r.Sequence,t)}else{n=Fe(u.content);i=u.precedence!=null?u.precedence:r.Sequence;n=Ee(n,i,t)}return le(n,e)}function ye(){}ye.prototype.maybeBlock=function(e,t){var u,r,i=this;r=!B.comment||!e.leadingComments;if(e.type===n.BlockStatement&&r){return[C,this.generateStatement(e,t)]}if(e.type===n.EmptyStatement&&r){return";"}De(function(){u=[A,pe(i.generateStatement(e,t))]});return u};ye.prototype.maybeBlockSuffix=function(e,t){var u=Z(le(t).toString());if(e.type===n.BlockStatement&&(!B.comment||!e.leadingComments)&&!u){return[t,C]}if(u){return[t,f]}return[t,A,f]};function Be(e){return le(e.name,e)}function ve(e,t){return e.async?"async"+(t?fe():C):""}function be(e){var t=e.generator&&!B.moz.starlessGenerator;return t?"*"+C:""}function Se(e){var t=e.value;if(t.async){return ve(t,!e.computed)}else{return be(t)?"*":""}}ye.prototype.generatePattern=function(e,t,u){if(e.type===n.Identifier){return Be(e)}return this.generateExpression(e,t,u)};ye.prototype.generateFunctionParams=function(e){var t,u,i,o;o=false;if(e.type===n.ArrowFunctionExpression&&!e.rest&&(!e.defaults||e.defaults.length===0)&&e.params.length===1&&e.params[0].type===n.Identifier){i=[ve(e,true),Be(e.params[0])]}else{i=e.type===n.ArrowFunctionExpression?[ve(e,false)]:[];i.push("(");if(e.defaults){o=true}for(t=0,u=e.params.length;t<u;++t){if(o&&e.defaults[t]){i.push(this.generateAssignment(e.params[t],e.defaults[t],"=",r.Assignment,q))}else{i.push(this.generatePattern(e.params[t],r.Assignment,q))}if(t+1<u){i.push(","+C)}}if(e.rest){if(e.params.length){i.push(","+C)}i.push("...");i.push(Be(e.rest))}i.push(")")}return i};ye.prototype.generateFunctionBody=function(e){var t,u;t=this.generateFunctionParams(e);if(e.type===n.ArrowFunctionExpression){t.push(C);t.push("=>")}if(e.expression){t.push(C);u=this.generateExpression(e.body,r.Assignment,q);if(u.toString().charAt(0)==="{"){u=["(",u,")"]}t.push(u)}else{t.push(this.maybeBlock(e.body,$))}return t};ye.prototype.generateIterationForStatement=function(e,t,u){var i=["for"+C+"("],o=this;De(function(){if(t.left.type===n.VariableDeclaration){De(function(){i.push(t.left.kind+fe());i.push(o.generateStatement(t.left.declarations[0],G))})}else{i.push(o.generateExpression(t.left,r.Call,q))}i=ce(i,e);i=[ce(i,o.generateExpression(t.right,r.Sequence,q)),")"]});i.push(this.maybeBlock(t.body,u));return i};ye.prototype.generatePropertyKey=function(e,t){var u=[];if(t){u.push("[")}u.push(this.generateExpression(e,r.Sequence,q));if(t){u.push("]")}return u};ye.prototype.generateAssignment=function(e,t,u,n,i){if(r.Assignment<n){i|=P}return Ee([this.generateExpression(e,r.Call,i),C+u+C,this.generateExpression(t,r.Assignment,i)],r.Assignment,n)};ye.prototype.semicolon=function(e){if(!F&&e&R){return""}return";"};ye.Statement={BlockStatement:function(e,t){var u,n,r=["{",A],i=this;De(function(){if(e.body.length===0&&x){u=e.range;if(u[1]-u[0]>2){n=S.substring(u[0]+1,u[1]-1);if(n[0]==="\n"){r=["{"]}r.push(n)}}var o,s,a,l;l=V;if(t&j){l|=M}for(o=0,s=e.body.length;o<s;++o){if(x){if(o===0){if(e.body[0].leadingComments){u=e.body[0].leadingComments[0].extendedRange;n=S.substring(u[0],u[1]);if(n[0]==="\n"){r=["{"]}}if(!e.body[0].leadingComments){Ce(e.range[0],e.body[0].range[0],r)}}if(o>0){if(!e.body[o-1].trailingComments&&!e.body[o].leadingComments){Ce(e.body[o-1].range[1],e.body[o].range[0],r)}}}if(o===s-1){l|=R}if(e.body[o].leadingComments&&x){a=i.generateStatement(e.body[o],l)}else{a=pe(i.generateStatement(e.body[o],l))}r.push(a);if(!Z(le(a).toString())){if(x&&o<s-1){if(!e.body[o+1].leadingComments){r.push(A)}}else{r.push(A)}}if(x){if(o===s-1){if(!e.body[o].trailingComments){Ce(e.body[o].range[1],e.range[1],r)}}}}});r.push(pe("}"));return r},BreakStatement:function(e,t){if(e.label){return"break "+e.label.name+this.semicolon(t)}return"break"+this.semicolon(t)},ContinueStatement:function(e,t){if(e.label){return"continue "+e.label.name+this.semicolon(t)}return"continue"+this.semicolon(t)},ClassBody:function(e,t){var u=["{",A],n=this;De(function(t){var i,o;for(i=0,o=e.body.length;i<o;++i){u.push(t);u.push(n.generateExpression(e.body[i],r.Sequence,q));if(i+1<o){u.push(A)}}});if(!Z(le(u).toString())){u.push(A)}u.push(f);u.push("}");return u},ClassDeclaration:function(e,t){var u,n;u=["class "+e.id.name];if(e.superClass){n=ce("extends",this.generateExpression(e.superClass,r.Assignment,q));u=ce(u,n)}u.push(C);u.push(this.generateStatement(e.body,Y));return u},DirectiveStatement:function(e,t){if(B.raw&&e.raw){return e.raw+this.semicolon(t)}return oe(e.directive)+this.semicolon(t)},DoWhileStatement:function(e,t){var u=ce("do",this.maybeBlock(e.body,V));u=this.maybeBlockSuffix(e.body,u);return ce(u,["while"+C+"(",this.generateExpression(e.test,r.Sequence,q),")"+this.semicolon(t)])},CatchClause:function(e,t){var u,n=this;De(function(){var t;u=["catch"+C+"(",n.generateExpression(e.param,r.Sequence,q),")"];if(e.guard){t=n.generateExpression(e.guard,r.Sequence,q);u.splice(2,0," if ",t)}});u.push(this.maybeBlock(e.body,V));return u},DebuggerStatement:function(e,t){return"debugger"+this.semicolon(t)},EmptyStatement:function(e,t){return";"},ExportDeclaration:function(e,t){var u=["export"],i,o=this;i=t&R?Y:V;if(e["default"]){u=ce(u,"default");if(I(e.declaration)){u=ce(u,this.generateStatement(e.declaration,i))}else{u=ce(u,this.generateExpression(e.declaration,r.Assignment,q)+this.semicolon(t))}return u}if(e.declaration){return ce(u,this.generateStatement(e.declaration,i))}if(e.specifiers){if(e.specifiers.length===0){u=ce(u,"{"+C+"}")}else if(e.specifiers[0].type===n.ExportBatchSpecifier){u=ce(u,this.generateExpression(e.specifiers[0],r.Sequence,q))}else{u=ce(u,"{");De(function(t){var n,i;u.push(A);for(n=0,i=e.specifiers.length;n<i;++n){u.push(t);u.push(o.generateExpression(e.specifiers[n],r.Sequence,q));if(n+1<i){u.push(","+A)}}});if(!Z(le(u).toString())){u.push(A)}u.push(f+"}")}if(e.source){u=ce(u,["from"+C,this.generateExpression(e.source,r.Sequence,q),this.semicolon(t)])}else{u.push(this.semicolon(t))}}return u},ExportDefaultDeclaration:function(e,t){e.default=true;return this.ExportDeclaration(e,t)},ExportNamedDeclaration:function(e,t){return this.ExportDeclaration(e,t)},ExpressionStatement:function(e,t){var u,i;function o(e){var t;if(e.slice(0,5)!=="class"){return false}t=e.charCodeAt(5);return t===123||a.code.isWhiteSpace(t)||a.code.isLineTerminator(t)}function s(e){var t;if(e.slice(0,8)!=="function"){return false}t=e.charCodeAt(8);return t===40||a.code.isWhiteSpace(t)||t===42||a.code.isLineTerminator(t)}function l(e){var t,u,n;if(e.slice(0,5)!=="async"){return false}if(!a.code.isWhiteSpace(e.charCodeAt(5))){return false}for(u=6,n=e.length;u<n;++u){if(!a.code.isWhiteSpace(e.charCodeAt(u))){break}}if(u===n){return false}if(e.slice(u,u+8)!=="function"){return false}t=e.charCodeAt(u+8);return t===40||a.code.isWhiteSpace(t)||t===42||a.code.isLineTerminator(t)}u=[this.generateExpression(e.expression,r.Sequence,q)];i=le(u).toString();if(i.charCodeAt(0)===123||o(i)||s(i)||l(i)||y&&t&M&&e.expression.type===n.Literal&&typeof e.expression.value==="string"){u=["(",u,")"+this.semicolon(t)]}else{u.push(this.semicolon(t))}return u},ImportDeclaration:function(e,t){var u,i,o=this;if(e.specifiers.length===0){return["import",C,this.generateExpression(e.source,r.Sequence,q),this.semicolon(t)]}u=["import"];i=0;if(e.specifiers[i].type===n.ImportDefaultSpecifier){u=ce(u,[this.generateExpression(e.specifiers[i],r.Sequence,q)]);++i}if(e.specifiers[i]){if(i!==0){u.push(",")}if(e.specifiers[i].type===n.ImportNamespaceSpecifier){u=ce(u,[C,this.generateExpression(e.specifiers[i],r.Sequence,q)])}else{u.push(C+"{");if(e.specifiers.length-i===1){u.push(C);u.push(this.generateExpression(e.specifiers[i],r.Sequence,q));u.push(C+"}"+C)}else{De(function(t){var n,s;u.push(A);for(n=i,s=e.specifiers.length;n<s;++n){u.push(t);u.push(o.generateExpression(e.specifiers[n],r.Sequence,q));if(n+1<s){u.push(","+A)}}});if(!Z(le(u).toString())){u.push(A)}u.push(f+"}"+C)}}}u=ce(u,["from"+C,this.generateExpression(e.source,r.Sequence,q),this.semicolon(t)]);return u},VariableDeclarator:function(e,t){var u=t&P?q:T;if(e.init){return[this.generateExpression(e.id,r.Assignment,u),C,"=",C,this.generateExpression(e.init,r.Assignment,u)]}return this.generatePattern(e.id,r.Assignment,u)},VariableDeclaration:function(e,t){var u,n,r,i,o,s=this;u=[e.kind];o=t&P?V:G;function a(){i=e.declarations[0];if(B.comment&&i.leadingComments){u.push("\n");u.push(pe(s.generateStatement(i,o)))}else{u.push(fe());u.push(s.generateStatement(i,o))}for(n=1,r=e.declarations.length;n<r;++n){i=e.declarations[n];if(B.comment&&i.leadingComments){u.push(","+A);u.push(pe(s.generateStatement(i,o)))}else{u.push(","+C);u.push(s.generateStatement(i,o))}}}if(e.declarations.length>1){De(a)}else{a()}u.push(this.semicolon(t));return u},ThrowStatement:function(e,t){return[ce("throw",this.generateExpression(e.argument,r.Sequence,q)),this.semicolon(t)]},TryStatement:function(e,t){var u,n,r,i;u=["try",this.maybeBlock(e.block,V)];u=this.maybeBlockSuffix(e.block,u);if(e.handlers){for(n=0,r=e.handlers.length;n<r;++n){u=ce(u,this.generateStatement(e.handlers[n],V));if(e.finalizer||n+1!==r){u=this.maybeBlockSuffix(e.handlers[n].body,u)}}}else{i=e.guardedHandlers||[];for(n=0,r=i.length;n<r;++n){u=ce(u,this.generateStatement(i[n],V));if(e.finalizer||n+1!==r){u=this.maybeBlockSuffix(i[n].body,u)}}if(e.handler){if(l(e.handler)){for(n=0,r=e.handler.length;n<r;++n){u=ce(u,this.generateStatement(e.handler[n],V));if(e.finalizer||n+1!==r){u=this.maybeBlockSuffix(e.handler[n].body,u)}}}else{u=ce(u,this.generateStatement(e.handler,V));if(e.finalizer){u=this.maybeBlockSuffix(e.handler.body,u)}}}}if(e.finalizer){u=ce(u,["finally",this.maybeBlock(e.finalizer,V)])}return u},SwitchStatement:function(e,t){var u,n,i,o,s,a=this;De(function(){u=["switch"+C+"(",a.generateExpression(e.discriminant,r.Sequence,q),")"+C+"{"+A]});if(e.cases){s=V;for(i=0,o=e.cases.length;i<o;++i){if(i===o-1){s|=R}n=pe(this.generateStatement(e.cases[i],s));u.push(n);if(!Z(le(n).toString())){u.push(A)}}}u.push(pe("}"));return u},SwitchCase:function(e,t){var u,i,o,s,a,l=this;De(function(){if(e.test){u=[ce("case",l.generateExpression(e.test,r.Sequence,q)),":"]}else{u=["default:"]}o=0;s=e.consequent.length;if(s&&e.consequent[0].type===n.BlockStatement){i=l.maybeBlock(e.consequent[0],V);u.push(i);o=1}if(o!==s&&!Z(le(u).toString())){u.push(A)}a=V;for(;o<s;++o){if(o===s-1&&t&R){a|=R}i=pe(l.generateStatement(e.consequent[o],a));u.push(i);if(o+1!==s&&!Z(le(i).toString())){u.push(A)}}});return u},IfStatement:function(e,t){var u,i,o,s=this;De(function(){u=["if"+C+"(",s.generateExpression(e.test,r.Sequence,q),")"]});o=t&R;i=V;if(o){i|=R}if(e.alternate){u.push(this.maybeBlock(e.consequent,V));u=this.maybeBlockSuffix(e.consequent,u);if(e.alternate.type===n.IfStatement){u=ce(u,["else ",this.generateStatement(e.alternate,i)])}else{u=ce(u,ce("else",this.maybeBlock(e.alternate,i)))}}else{u.push(this.maybeBlock(e.consequent,i))}return u},ForStatement:function(e,t){var u,i=this;De(function(){u=["for"+C+"("];if(e.init){if(e.init.type===n.VariableDeclaration){u.push(i.generateStatement(e.init,G))}else{u.push(i.generateExpression(e.init,r.Sequence,T));u.push(";")}}else{u.push(";")}if(e.test){u.push(C);u.push(i.generateExpression(e.test,r.Sequence,q));u.push(";")}else{u.push(";")}if(e.update){u.push(C);u.push(i.generateExpression(e.update,r.Sequence,q));u.push(")")}else{u.push(")")}});u.push(this.maybeBlock(e.body,t&R?Y:V));return u},ForInStatement:function(e,t){return this.generateIterationForStatement("in",e,t&R?Y:V)},ForOfStatement:function(e,t){return this.generateIterationForStatement("of",e,t&R?Y:V)},LabeledStatement:function(e,t){return[e.label.name+":",this.maybeBlock(e.body,t&R?Y:V)]},Program:function(e,t){var u,n,r,i,o;i=e.body.length;u=[g&&i>0?"\n":""];o=K;for(r=0;r<i;++r){if(!g&&r===i-1){o|=R}if(x){if(r===0){if(!e.body[0].leadingComments){Ce(e.range[0],e.body[r].range[0],u)}}if(r>0){if(!e.body[r-1].trailingComments&&!e.body[r].leadingComments){Ce(e.body[r-1].range[1],e.body[r].range[0],u)}}}n=pe(this.generateStatement(e.body[r],o));u.push(n);if(r+1<i&&!Z(le(n).toString())){if(x){if(!e.body[r+1].leadingComments){u.push(A)}}else{u.push(A)}}if(x){if(r===i-1){if(!e.body[r].trailingComments){Ce(e.body[r].range[1],e.range[1],u)}}}}return u},FunctionDeclaration:function(e,t){return[ve(e,true),"function",be(e)||fe(),Be(e.id),this.generateFunctionBody(e)]},ReturnStatement:function(e,t){if(e.argument){return[ce("return",this.generateExpression(e.argument,r.Sequence,q)),this.semicolon(t)]}return["return"+this.semicolon(t)]},WhileStatement:function(e,t){var u,n=this;De(function(){u=["while"+C+"(",n.generateExpression(e.test,r.Sequence,q),")"]});u.push(this.maybeBlock(e.body,t&R?Y:V));return u},WithStatement:function(e,t){var u,n=this;De(function(){u=["with"+C+"(",n.generateExpression(e.object,r.Sequence,q),")"]});u.push(this.maybeBlock(e.body,t&R?Y:V));return u}};Q(ye.prototype,ye.Statement);ye.Expression={SequenceExpression:function(e,t,u){var n,i,o;if(r.Sequence<t){u|=P}n=[];for(i=0,o=e.expressions.length;i<o;++i){n.push(this.generateExpression(e.expressions[i],r.Assignment,u));if(i+1<o){n.push(","+C)}}return Ee(n,r.Sequence,t)},AssignmentExpression:function(e,t,u){return this.generateAssignment(e.left,e.right,e.operator,t,u)},ArrowFunctionExpression:function(e,t,u){return Ee(this.generateFunctionBody(e),r.ArrowFunction,t)},ConditionalExpression:function(e,t,u){if(r.Conditional<t){u|=P}return Ee([this.generateExpression(e.test,r.LogicalOR,u),C+"?"+C,this.generateExpression(e.consequent,r.Assignment,u),C+":"+C,this.generateExpression(e.alternate,r.Assignment,u)],r.Conditional,t)},LogicalExpression:function(e,t,u){return this.BinaryExpression(e,t,u)},BinaryExpression:function(e,t,u){var n,r,o,s;r=i[e.operator];if(r<t){u|=P}o=this.generateExpression(e.left,r,u);s=o.toString();if(s.charCodeAt(s.length-1)===47&&a.code.isIdentifierPartES5(e.operator.charCodeAt(0))){n=[o,fe(),e.operator]}else{n=ce(o,e.operator)}o=this.generateExpression(e.right,r+1,u);if(e.operator==="/"&&o.toString().charAt(0)==="/"||e.operator.slice(-1)==="<"&&o.toString().slice(0,3)==="!--"){n.push(fe());n.push(o)}else{n=ce(n,o)}if(e.operator==="in"&&!(u&P)){return["(",n,")"]}return Ee(n,r,t)},CallExpression:function(e,t,u){var n,i,o;n=[this.generateExpression(e.callee,r.Call,N)];n.push("(");for(i=0,o=e["arguments"].length;i<o;++i){n.push(this.generateExpression(e["arguments"][i],r.Assignment,q));if(i+1<o){n.push(","+C)}}n.push(")");if(!(u&L)){return["(",n,")"]}return Ee(n,r.Call,t)},NewExpression:function(e,t,u){var n,i,o,s,a;i=e["arguments"].length;a=u&O&&!E&&i===0?W:U;n=ce("new",this.generateExpression(e.callee,r.New,a));if(!(u&O)||E||i>0){n.push("(");for(o=0,s=i;o<s;++o){n.push(this.generateExpression(e["arguments"][o],r.Assignment,q));if(o+1<s){n.push(","+C)}}n.push(")")}return Ee(n,r.New,t)},MemberExpression:function(e,t,u){var i,o;i=[this.generateExpression(e.object,r.Call,u&L?N:U)];if(e.computed){i.push("[");i.push(this.generateExpression(e.property,r.Sequence,u&L?q:W));i.push("]")}else{if(e.object.type===n.Literal&&typeof e.object.value==="number"){o=le(i).toString();if(o.indexOf(".")<0&&!/[eExX]/.test(o)&&a.code.isDecimalDigit(o.charCodeAt(o.length-1))&&!(o.length>=2&&o.charCodeAt(0)===48)){i.push(".")}}i.push(".");i.push(Be(e.property))}return Ee(i,r.Member,t)},UnaryExpression:function(e,t,u){var n,i,o,s,l;i=this.generateExpression(e.argument,r.Unary,q);if(C===""){n=ce(e.operator,i)}else{n=[e.operator];if(e.operator.length>2){n=ce(n,i)}else{s=le(n).toString();l=s.charCodeAt(s.length-1);o=i.toString().charCodeAt(0);if((l===43||l===45)&&l===o||a.code.isIdentifierPartES5(l)&&a.code.isIdentifierPartES5(o)){n.push(fe());n.push(i)}else{n.push(i)}}}return Ee(n,r.Unary,t)},YieldExpression:function(e,t,u){var n;if(e.delegate){n="yield*"}else{n="yield"}if(e.argument){n=ce(n,this.generateExpression(e.argument,r.Yield,q))}return Ee(n,r.Yield,t)},AwaitExpression:function(e,t,u){var n=ce(e.all?"await*":"await",this.generateExpression(e.argument,r.Await,q));return Ee(n,r.Await,t)},UpdateExpression:function(e,t,u){if(e.prefix){return Ee([e.operator,this.generateExpression(e.argument,r.Unary,q)],r.Unary,t)}return Ee([this.generateExpression(e.argument,r.Postfix,q),e.operator],r.Postfix,t)},FunctionExpression:function(e,t,u){var n=[ve(e,true),"function"];if(e.id){n.push(be(e)||fe());n.push(Be(e.id))}else{n.push(be(e)||C)}n.push(this.generateFunctionBody(e));return n},ExportBatchSpecifier:function(e,t,u){return"*"},ArrayPattern:function(e,t,u){return this.ArrayExpression(e,t,u,true)},ArrayExpression:function(e,t,u,n){var i,o,s=this;if(!e.elements.length){return"[]"}o=n?false:e.elements.length>1;i=["[",o?A:""];De(function(t){var u,n;for(u=0,n=e.elements.length;u<n;++u){if(!e.elements[u]){if(o){i.push(t)}if(u+1===n){i.push(",")}}else{i.push(o?t:"");i.push(s.generateExpression(e.elements[u],r.Assignment,q))}if(u+1<n){i.push(","+(o?A:C))}}});if(o&&!Z(le(i).toString())){i.push(A)}i.push(o?f:"");i.push("]");return i},RestElement:function(e,t,u){return"..."+this.generatePattern(e.argument)},ClassExpression:function(e,t,u){var n,i;n=["class"];if(e.id){n=ce(n,this.generateExpression(e.id,r.Sequence,q))}if(e.superClass){i=ce("extends",this.generateExpression(e.superClass,r.Assignment,q));n=ce(n,i)}n.push(C);n.push(this.generateStatement(e.body,Y));return n},MethodDefinition:function(e,t,u){var n,r;if(e["static"]){n=["static"+C]}else{n=[]}if(e.kind==="get"||e.kind==="set"){r=[ce(e.kind,this.generatePropertyKey(e.key,e.computed)),this.generateFunctionBody(e.value)]}else{r=[Se(e),this.generatePropertyKey(e.key,e.computed),this.generateFunctionBody(e.value)]}return ce(n,r)},Property:function(e,t,u){if(e.kind==="get"||e.kind==="set"){return[e.kind,fe(),this.generatePropertyKey(e.key,e.computed),this.generateFunctionBody(e.value)]}if(e.shorthand){return this.generatePropertyKey(e.key,e.computed)}if(e.method){return[Se(e),this.generatePropertyKey(e.key,e.computed),this.generateFunctionBody(e.value)]}return[this.generatePropertyKey(e.key,e.computed),":"+C,this.generateExpression(e.value,r.Assignment,q)]},ObjectExpression:function(e,t,u){var n,i,o,s=this;if(!e.properties.length){return"{}"}n=e.properties.length>1;De(function(){o=s.generateExpression(e.properties[0],r.Sequence,q)});if(!n){if(!X(le(o).toString())){return["{",C,o,C,"}"]}}De(function(t){var u,a;i=["{",A,t,o];if(n){i.push(","+A);for(u=1,a=e.properties.length;u<a;++u){i.push(t);i.push(s.generateExpression(e.properties[u],r.Sequence,q));if(u+1<a){i.push(","+A)}}}});if(!Z(le(i).toString())){i.push(A)}i.push(f);i.push("}");return i},ObjectPattern:function(e,t,u){var i,o,s,a,l,c=this;if(!e.properties.length){return"{}"}a=false;if(e.properties.length===1){l=e.properties[0];if(l.value.type!==n.Identifier){a=true}}else{for(o=0,s=e.properties.length;o<s;++o){l=e.properties[o];if(!l.shorthand){a=true;break}}}i=["{",a?A:""];De(function(t){var u,n;for(u=0,n=e.properties.length;u<n;++u){i.push(a?t:"");i.push(c.generateExpression(e.properties[u],r.Sequence,q));if(u+1<n){i.push(","+(a?A:C))}}});if(a&&!Z(le(i).toString())){i.push(A)}i.push(a?f:"");i.push("}");return i},ThisExpression:function(e,t,u){return"this"},Super:function(e,t,u){return"super"},Identifier:function(e,t,u){return Be(e)},ImportDefaultSpecifier:function(e,t,u){return Be(e.id||e.local)},ImportNamespaceSpecifier:function(e,t,u){var n=["*"];var r=e.id||e.local;if(r){n.push(C+"as"+fe()+Be(r))}return n},ImportSpecifier:function(e,t,u){return this.ExportSpecifier(e,t,u)},ExportSpecifier:function(e,t,u){var n=[(e.id||e.local).name];if(e.name){n.push(fe()+"as"+fe()+Be(e.name))}return n},Literal:function(e,t,u){var r;if(e.hasOwnProperty("raw")&&v&&B.raw){try{r=v(e.raw).body[0].expression;if(r.type===n.Literal){if(r.value===e.value){return e.raw}}}catch(i){}}if(e.value===null){return"null"}if(typeof e.value==="string"){return se(e.value)}if(typeof e.value==="number"){return te(e.value)}if(typeof e.value==="boolean"){return e.value?"true":"false"}return ne(e.value)},GeneratorExpression:function(e,t,u){return this.ComprehensionExpression(e,t,u)},ComprehensionExpression:function(e,t,u){var i,o,s,a,l=this;i=e.type===n.GeneratorExpression?["("]:["["];if(B.moz.comprehensionExpressionStartsWithAssignment){a=this.generateExpression(e.body,r.Assignment,q);i.push(a)}if(e.blocks){De(function(){for(o=0,s=e.blocks.length;o<s;++o){a=l.generateExpression(e.blocks[o],r.Sequence,q);if(o>0||B.moz.comprehensionExpressionStartsWithAssignment){i=ce(i,a)}else{i.push(a)}}})}if(e.filter){i=ce(i,"if"+C);a=this.generateExpression(e.filter,r.Sequence,q);i=ce(i,["(",a,")"])}if(!B.moz.comprehensionExpressionStartsWithAssignment){a=this.generateExpression(e.body,r.Assignment,q);i=ce(i,a)}i.push(e.type===n.GeneratorExpression?")":"]");return i},ComprehensionBlock:function(e,t,u){var i;if(e.left.type===n.VariableDeclaration){i=[e.left.kind,fe(),this.generateStatement(e.left.declarations[0],G)]}else{i=this.generateExpression(e.left,r.Call,q)}i=ce(i,e.of?"of":"in");i=ce(i,this.generateExpression(e.right,r.Sequence,q));return["for"+C+"(",i,")"]},SpreadElement:function(e,t,u){return["...",this.generateExpression(e.argument,r.Assignment,q)]},TaggedTemplateExpression:function(e,t,u){var n=N;if(!(u&L)){n=U}var i=[this.generateExpression(e.tag,r.Call,n),this.generateExpression(e.quasi,r.Primary,z)];return Ee(i,r.TaggedTemplate,t)},TemplateElement:function(e,t,u){return e.value.raw},TemplateLiteral:function(e,t,u){var n,i,o;n=["`"];for(i=0,o=e.quasis.length;i<o;++i){n.push(this.generateExpression(e.quasis[i],r.Primary,q));if(i+1<o){n.push("${"+C);n.push(this.generateExpression(e.expressions[i],r.Sequence,q));n.push(C+"}")}}n.push("`");return n},ModuleSpecifier:function(e,t,u){return this.Literal(e,t,u)}};Q(ye.prototype,ye.Expression);ye.prototype.generateExpression=function(e,t,u){var r,i;i=e.type||n.Property;if(B.verbatim&&e.hasOwnProperty(B.verbatim)){return ge(e,t)}r=this[i](e,t,u);if(B.comment){r=Ae(e,r)}return le(r,e)};ye.prototype.generateStatement=function(e,t){var u,r;u=this[e.type](e,t);if(B.comment){u=Ae(e,u)}r=le(u).toString();if(e.type===n.Program&&!g&&A===""&&r.charAt(r.length-1)==="\n"){u=b?le(u).replaceRight(/\s+$/,""):r.replace(/\s+$/,"")}return le(u,e)};function xe(e){var t;t=new ye;if(I(e)){return t.generateStatement(e,V)}if(k(e)){return t.generateExpression(e,r.Sequence,q)}throw new Error("Unknown node type: "+e.type)}function we(n,r){var i=H(),s,a;if(r!=null){if(typeof r.indent==="string"){i.format.indent.style=r.indent}if(typeof r.base==="number"){i.format.indent.base=r.base}r=ee(i,r);c=r.format.indent.style;if(typeof r.base==="string"){f=r.base}else{f=J(c,r.format.indent.base)}}else{r=i;c=r.format.indent.style;f=J(c,r.format.indent.base)}p=r.format.json;D=r.format.renumber;h=p?false:r.format.hexadecimal;m=p?"double":r.format.quotes;d=r.format.escapeless;A=r.format.newline;C=r.format.space;if(r.format.compact){A=C=c=f=""}E=r.format.parentheses;F=r.format.semicolons;g=r.format.safeConcatenation;y=r.directive;v=p?null:r.parse;b=r.sourceMap;S=r.sourceCode;x=r.format.preserveBlankLines&&S!==null;B=r;if(b){if(!u.browser){o=e("source-map").SourceNode}else{o=t.sourceMap.SourceNode}}s=xe(n);if(!b){a={code:s.toString(),map:null};return r.sourceMapWithCode?a:a.code}a=s.toStringWithSourceMap({file:r.file,sourceRoot:r.sourceMapRoot});if(r.sourceContent){a.map.setSourceContent(r.sourceMap,r.sourceContent)}if(r.sourceMapWithCode){return a}return a.map.toString()}w={indent:{style:"",base:0},renumber:true,hexadecimal:true,quotes:"auto",escapeless:true,compact:true,parentheses:false,semicolons:false};_=H().format;u.version=e("./package.json").version;u.generate=we;u.attachComments=s.attachComments;u.Precedence=ee({},r);u.browser=false;u.FORMAT_MINIFY=w;u.FORMAT_DEFAULTS=_})()}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./package.json":47,estraverse:49,esutils:33,"source-map":34}],30:[function(e,t,u){(function(){"use strict";function e(e){if(e==null){return false}switch(e.type){case"ArrayExpression":case"AssignmentExpression":case"BinaryExpression":case"CallExpression":case"ConditionalExpression":case"FunctionExpression":case"Identifier":case"Literal":case"LogicalExpression":case"MemberExpression":case"NewExpression":case"ObjectExpression":case"SequenceExpression":case"ThisExpression":case"UnaryExpression":case"UpdateExpression":return true}return false}function u(e){if(e==null){return false}switch(e.type){case"DoWhileStatement":case"ForInStatement":case"ForStatement":case"WhileStatement":return true}return false}function n(e){if(e==null){return false}switch(e.type){case"BlockStatement":case"BreakStatement":case"ContinueStatement":case"DebuggerStatement":case"DoWhileStatement":case"EmptyStatement":case"ExpressionStatement":case"ForInStatement":case"ForStatement":case"IfStatement":case"LabeledStatement":case"ReturnStatement":case"SwitchStatement":case"ThrowStatement":case"TryStatement":case"VariableDeclaration":case"WhileStatement":case"WithStatement":return true}return false}function r(e){return n(e)||e!=null&&e.type==="FunctionDeclaration"}function i(e){switch(e.type){case"IfStatement":if(e.alternate!=null){return e.alternate}return e.consequent;case"LabeledStatement":case"ForStatement":case"ForInStatement":case"WhileStatement":case"WithStatement":return e.body}return null}function o(e){var t;if(e.type!=="IfStatement"){return false}if(e.alternate==null){return false}t=e.consequent;do{if(t.type==="IfStatement"){if(t.alternate==null){return true}}t=i(t)}while(t);return false}t.exports={isExpression:e,isStatement:n,isIterationStatement:u,isSourceElement:r,isProblematicIfStatement:o,trailingStatement:i}})()},{}],31:[function(e,t,u){(function(){"use strict";var e,u,n,r,i,o;u={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B2\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA7AD\uA7B0\uA7B1\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB5F\uAB64\uAB65\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,NonAsciiIdentifierPart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B2\u08E4-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58\u0C59\u0C60-\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D60-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA69D\uA69F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA7AD\uA7B0\uA7B1\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB5F\uAB64\uAB65\uABC0-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2D\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/
};e={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B2\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA7AD\uA7B0\uA7B1\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB5F\uAB64\uAB65\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDE00-\uDE11\uDE13-\uDE2B\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF5D-\uDF61]|\uD805[\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDE00-\uDE2F\uDE44\uDE80-\uDEAA]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF98]|\uD809[\uDC00-\uDC6E]|[\uD80C\uD840-\uD868\uD86A-\uD86C][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D]|\uD87E[\uDC00-\uDE1D]/,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B2\u08E4-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58\u0C59\u0C60-\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D60-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA69D\uA69F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA7AD\uA7B0\uA7B1\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB5F\uAB64\uAB65\uABC0-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2D\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDD0-\uDDDA\uDE00-\uDE11\uDE13-\uDE37\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF01-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF98]|\uD809[\uDC00-\uDC6E]|[\uD80C\uD840-\uD868\uD86A-\uD86C][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/};function s(e){return 48<=e&&e<=57}function a(e){return 48<=e&&e<=57||97<=e&&e<=102||65<=e&&e<=70}function l(e){return e>=48&&e<=55}n=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];function f(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&n.indexOf(e)>=0}function c(e){return e===10||e===13||e===8232||e===8233}function p(e){if(e<=65535){return String.fromCharCode(e)}var t=String.fromCharCode(Math.floor((e-65536)/1024)+55296);var u=String.fromCharCode((e-65536)%1024+56320);return t+u}r=new Array(128);for(o=0;o<128;++o){r[o]=o>=97&&o<=122||o>=65&&o<=90||o===36||o===95}i=new Array(128);for(o=0;o<128;++o){i[o]=o>=97&&o<=122||o>=65&&o<=90||o>=48&&o<=57||o===36||o===95}function D(e){return e<128?r[e]:u.NonAsciiIdentifierStart.test(p(e))}function h(e){return e<128?i[e]:u.NonAsciiIdentifierPart.test(p(e))}function m(t){return t<128?r[t]:e.NonAsciiIdentifierStart.test(p(t))}function d(t){return t<128?i[t]:e.NonAsciiIdentifierPart.test(p(t))}t.exports={isDecimalDigit:s,isHexDigit:a,isOctalDigit:l,isWhiteSpace:f,isLineTerminator:c,isIdentifierStartES5:D,isIdentifierPartES5:h,isIdentifierStartES6:m,isIdentifierPartES6:d}})()},{}],32:[function(e,t,u){(function(){"use strict";var u=e("./code");function n(e){switch(e){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"let":return true;default:return false}}function r(e,t){if(!t&&e==="yield"){return false}return i(e,t)}function i(e,t){if(t&&n(e)){return true}switch(e.length){case 2:return e==="if"||e==="in"||e==="do";case 3:return e==="var"||e==="for"||e==="new"||e==="try";case 4:return e==="this"||e==="else"||e==="case"||e==="void"||e==="with"||e==="enum";case 5:return e==="while"||e==="break"||e==="catch"||e==="throw"||e==="const"||e==="yield"||e==="class"||e==="super";case 6:return e==="return"||e==="typeof"||e==="delete"||e==="switch"||e==="export"||e==="import";case 7:return e==="default"||e==="finally"||e==="extends";case 8:return e==="function"||e==="continue"||e==="debugger";case 10:return e==="instanceof";default:return false}}function o(e,t){return e==="null"||e==="true"||e==="false"||r(e,t)}function s(e,t){return e==="null"||e==="true"||e==="false"||i(e,t)}function a(e){return e==="eval"||e==="arguments"}function l(e){var t,n,r;if(e.length===0){return false}r=e.charCodeAt(0);if(!u.isIdentifierStartES5(r)){return false}for(t=1,n=e.length;t<n;++t){r=e.charCodeAt(t);if(!u.isIdentifierPartES5(r)){return false}}return true}function f(e,t){return(e-55296)*1024+(t-56320)+65536}function c(e){var t,n,r,i,o;if(e.length===0){return false}o=u.isIdentifierStartES6;for(t=0,n=e.length;t<n;++t){r=e.charCodeAt(t);if(55296<=r&&r<=56319){++t;if(t>=n){return false}i=e.charCodeAt(t);if(!(56320<=i&&i<=57343)){return false}r=f(r,i)}if(!o(r)){return false}o=u.isIdentifierPartES6}return true}function p(e,t){return l(e)&&!o(e,t)}function D(e,t){return c(e)&&!s(e,t)}t.exports={isKeywordES5:r,isKeywordES6:i,isReservedWordES5:o,isReservedWordES6:s,isRestrictedWord:a,isIdentifierNameES5:l,isIdentifierNameES6:c,isIdentifierES5:p,isIdentifierES6:D}})()},{"./code":31}],33:[function(e,t,u){(function(){"use strict";u.ast=e("./ast");u.code=e("./code");u.keyword=e("./keyword")})()},{"./ast":30,"./code":31,"./keyword":32}],34:[function(e,t,u){u.SourceMapGenerator=e("./source-map/source-map-generator").SourceMapGenerator;u.SourceMapConsumer=e("./source-map/source-map-consumer").SourceMapConsumer;u.SourceNode=e("./source-map/source-node").SourceNode},{"./source-map/source-map-consumer":42,"./source-map/source-map-generator":43,"./source-map/source-node":44}],35:[function(e,t,u){if(typeof n!=="function"){var n=e("amdefine")(t,e)}n(function(e,t,u){var n=e("./util");function r(){this._array=[];this._set={}}r.fromArray=function i(e,t){var u=new r;for(var n=0,i=e.length;n<i;n++){u.add(e[n],t)}return u};r.prototype.add=function o(e,t){var u=this.has(e);var r=this._array.length;if(!u||t){this._array.push(e)}if(!u){this._set[n.toSetString(e)]=r}};r.prototype.has=function s(e){return Object.prototype.hasOwnProperty.call(this._set,n.toSetString(e))};r.prototype.indexOf=function a(e){if(this.has(e)){return this._set[n.toSetString(e)]}throw new Error('"'+e+'" is not in the set.')};r.prototype.at=function l(e){if(e>=0&&e<this._array.length){return this._array[e]}throw new Error("No element indexed by "+e)};r.prototype.toArray=function f(){return this._array.slice()};t.ArraySet=r})},{"./util":45,amdefine:46}],36:[function(e,t,u){if(typeof n!=="function"){var n=e("amdefine")(t,e)}n(function(e,t,u){var n=e("./base64");var r=5;var i=1<<r;var o=i-1;var s=i;function a(e){return e<0?(-e<<1)+1:(e<<1)+0}function l(e){var t=(e&1)===1;var u=e>>1;return t?-u:u}t.encode=function f(e){var t="";var u;var i=a(e);do{u=i&o;i>>>=r;if(i>0){u|=s}t+=n.encode(u)}while(i>0);return t};t.decode=function c(e,t){var u=0;var i=e.length;var a=0;var f=0;var c,p;do{if(u>=i){throw new Error("Expected more digits in base 64 VLQ value.")}p=n.decode(e.charAt(u++));c=!!(p&s);p&=o;a=a+(p<<f);f+=r}while(c);t.value=l(a);t.rest=e.slice(u)}})},{"./base64":37,amdefine:46}],37:[function(e,t,u){if(typeof n!=="function"){var n=e("amdefine")(t,e)}n(function(e,t,u){var n={};var r={};"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("").forEach(function(e,t){n[e]=t;r[t]=e});t.encode=function i(e){if(e in r){return r[e]}throw new TypeError("Must be between 0 and 63: "+e)};t.decode=function o(e){if(e in n){return n[e]}throw new TypeError("Not a valid base 64 digit: "+e)}})},{amdefine:46}],38:[function(e,t,u){if(typeof n!=="function"){var n=e("amdefine")(t,e)}n(function(e,t,u){var n=e("./util");var r=e("./binary-search");var i=e("./array-set").ArraySet;var o=e("./base64-vlq");var s=e("./source-map-consumer").SourceMapConsumer;function a(e){var t=e;if(typeof e==="string"){t=JSON.parse(e.replace(/^\)\]\}'/,""))}var u=n.getArg(t,"version");var r=n.getArg(t,"sources");var o=n.getArg(t,"names",[]);var s=n.getArg(t,"sourceRoot",null);var a=n.getArg(t,"sourcesContent",null);var l=n.getArg(t,"mappings");var f=n.getArg(t,"file",null);if(u!=this._version){throw new Error("Unsupported version: "+u)}r=r.map(n.normalize);this._names=i.fromArray(o,true);this._sources=i.fromArray(r,true);this.sourceRoot=s;this.sourcesContent=a;this._mappings=l;this.file=f}a.prototype=Object.create(s.prototype);a.prototype.consumer=s;a.fromSourceMap=function l(e){var t=Object.create(a.prototype);t._names=i.fromArray(e._names.toArray(),true);t._sources=i.fromArray(e._sources.toArray(),true);t.sourceRoot=e._sourceRoot;t.sourcesContent=e._generateSourcesContent(t._sources.toArray(),t.sourceRoot);t.file=e._file;t.__generatedMappings=e._mappings.toArray().slice();t.__originalMappings=e._mappings.toArray().slice().sort(n.compareByOriginalPositions);return t};a.prototype._version=3;Object.defineProperty(a.prototype,"sources",{get:function(){return this._sources.toArray().map(function(e){return this.sourceRoot!=null?n.join(this.sourceRoot,e):e},this)}});a.prototype._parseMappings=function f(e,t){var u=1;var r=0;var i=0;var s=0;var a=0;var l=0;var f=e;var c={};var p;while(f.length>0){if(f.charAt(0)===";"){u++;f=f.slice(1);r=0}else if(f.charAt(0)===","){f=f.slice(1)}else{p={};p.generatedLine=u;o.decode(f,c);p.generatedColumn=r+c.value;r=p.generatedColumn;f=c.rest;if(f.length>0&&!this._nextCharIsMappingSeparator(f)){o.decode(f,c);p.source=this._sources.at(a+c.value);a+=c.value;f=c.rest;if(f.length===0||this._nextCharIsMappingSeparator(f)){throw new Error("Found a source, but no line and column")}o.decode(f,c);p.originalLine=i+c.value;i=p.originalLine;p.originalLine+=1;f=c.rest;if(f.length===0||this._nextCharIsMappingSeparator(f)){throw new Error("Found a source and line, but no column")}o.decode(f,c);p.originalColumn=s+c.value;s=p.originalColumn;f=c.rest;if(f.length>0&&!this._nextCharIsMappingSeparator(f)){o.decode(f,c);p.name=this._names.at(l+c.value);l+=c.value;f=c.rest}}this.__generatedMappings.push(p);if(typeof p.originalLine==="number"){this.__originalMappings.push(p)}}}this.__generatedMappings.sort(n.compareByGeneratedPositions);this.__originalMappings.sort(n.compareByOriginalPositions)};a.prototype._findMapping=function c(e,t,u,n,i){if(e[u]<=0){throw new TypeError("Line must be greater than or equal to 1, got "+e[u])}if(e[n]<0){throw new TypeError("Column must be greater than or equal to 0, got "+e[n])}return r.search(e,t,i)};a.prototype.computeColumnSpans=function p(){for(var e=0;e<this._generatedMappings.length;++e){var t=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var u=this._generatedMappings[e+1];if(t.generatedLine===u.generatedLine){t.lastGeneratedColumn=u.generatedColumn-1;continue}}t.lastGeneratedColumn=Infinity}};a.prototype.originalPositionFor=function D(e){var t={generatedLine:n.getArg(e,"line"),generatedColumn:n.getArg(e,"column")};var u=this._findMapping(t,this._generatedMappings,"generatedLine","generatedColumn",n.compareByGeneratedPositions);if(u>=0){var r=this._generatedMappings[u];if(r.generatedLine===t.generatedLine){var i=n.getArg(r,"source",null);if(i!=null&&this.sourceRoot!=null){i=n.join(this.sourceRoot,i)}return{source:i,line:n.getArg(r,"originalLine",null),column:n.getArg(r,"originalColumn",null),name:n.getArg(r,"name",null)}}}return{source:null,line:null,column:null,name:null}};a.prototype.sourceContentFor=function h(e,t){if(!this.sourcesContent){return null}if(this.sourceRoot!=null){e=n.relative(this.sourceRoot,e)}if(this._sources.has(e)){return this.sourcesContent[this._sources.indexOf(e)]}var u;if(this.sourceRoot!=null&&(u=n.urlParse(this.sourceRoot))){var r=e.replace(/^file:\/\//,"");if(u.scheme=="file"&&this._sources.has(r)){return this.sourcesContent[this._sources.indexOf(r)]}if((!u.path||u.path=="/")&&this._sources.has("/"+e)){return this.sourcesContent[this._sources.indexOf("/"+e)]}}if(t){return null}else{throw new Error('"'+e+'" is not in the SourceMap.')}};a.prototype.generatedPositionFor=function m(e){var t={source:n.getArg(e,"source"),originalLine:n.getArg(e,"line"),originalColumn:n.getArg(e,"column")};if(this.sourceRoot!=null){t.source=n.relative(this.sourceRoot,t.source)}var u=this._findMapping(t,this._originalMappings,"originalLine","originalColumn",n.compareByOriginalPositions);if(u>=0){var r=this._originalMappings[u];return{line:n.getArg(r,"generatedLine",null),column:n.getArg(r,"generatedColumn",null),lastColumn:n.getArg(r,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}};t.BasicSourceMapConsumer=a})},{"./array-set":35,"./base64-vlq":36,"./binary-search":39,"./source-map-consumer":42,"./util":45,amdefine:46}],39:[function(e,t,u){if(typeof n!=="function"){var n=e("amdefine")(t,e)}n(function(e,t,u){function n(e,t,u,r,i){var o=Math.floor((t-e)/2)+e;var s=i(u,r[o],true);if(s===0){return o}else if(s>0){if(t-o>1){return n(o,t,u,r,i)}return o}else{if(o-e>1){return n(e,o,u,r,i)}return e<0?-1:e}}t.search=function r(e,t,u){if(t.length===0){return-1}return n(-1,t.length,e,t,u)}})},{amdefine:46}],40:[function(e,t,u){if(typeof n!=="function"){var n=e("amdefine")(t,e)}n(function(e,t,u){var n=e("./util");var r=e("./binary-search");var i=e("./source-map-consumer").SourceMapConsumer;var o=e("./basic-source-map-consumer").BasicSourceMapConsumer;function s(e){var t=e;if(typeof e==="string"){t=JSON.parse(e.replace(/^\)\]\}'/,""))}var u=n.getArg(t,"version");var r=n.getArg(t,"sections");if(u!=this._version){throw new Error("Unsupported version: "+u)}var o={line:-1,column:0};this._sections=r.map(function(e){if(e.url){throw new Error("Support for url field in sections not implemented.")}var t=n.getArg(e,"offset");var u=n.getArg(t,"line");var r=n.getArg(t,"column");if(u<o.line||u===o.line&&r<o.column){throw new Error("Section offsets must be ordered and non-overlapping.")}o=t;return{generatedOffset:{generatedLine:u+1,generatedColumn:r+1},consumer:new i(n.getArg(e,"map"))}})}s.prototype=Object.create(i.prototype);s.prototype.constructor=i;s.prototype._version=3;Object.defineProperty(s.prototype,"sources",{get:function(){var e=[];for(var t=0;t<this._sections.length;t++){for(var u=0;u<this._sections[t].consumer.sources.length;u++){e.push(this._sections[t].consumer.sources[u])}}return e}});s.prototype.originalPositionFor=function a(e){var t={generatedLine:n.getArg(e,"line"),generatedColumn:n.getArg(e,"column")};var u=r.search(t,this._sections,function(e,t){var u=e.generatedLine-t.generatedOffset.generatedLine;if(u){return u}return e.generatedColumn-t.generatedOffset.generatedColumn});var i=this._sections[u];if(!i){return{source:null,line:null,column:null,name:null}}return i.consumer.originalPositionFor({line:t.generatedLine-(i.generatedOffset.generatedLine-1),column:t.generatedColumn-(i.generatedOffset.generatedLine===t.generatedLine?i.generatedOffset.generatedColumn-1:0)})};s.prototype.sourceContentFor=function l(e,t){for(var u=0;u<this._sections.length;u++){var n=this._sections[u];var r=n.consumer.sourceContentFor(e,true);if(r){return r}}if(t){return null}else{throw new Error('"'+e+'" is not in the SourceMap.')}};s.prototype.generatedPositionFor=function f(e){for(var t=0;t<this._sections.length;t++){var u=this._sections[t];if(u.consumer.sources.indexOf(n.getArg(e,"source"))===-1){continue}var r=u.consumer.generatedPositionFor(e);if(r){var i={line:r.line+(u.generatedOffset.generatedLine-1),column:r.column+(u.generatedOffset.generatedLine===r.line?u.generatedOffset.generatedColumn-1:0)};return i}}return{line:null,column:null}};s.prototype._parseMappings=function c(e,t){this.__generatedMappings=[];this.__originalMappings=[];for(var u=0;u<this._sections.length;u++){var r=this._sections[u];var i=r.consumer._generatedMappings;for(var o=0;o<i.length;o++){var s=i[u];var a=s.source;var l=r.consumer.sourceRoot;if(a!=null&&l!=null){a=n.join(l,a)}var f={source:a,generatedLine:s.generatedLine+(r.generatedOffset.generatedLine-1),generatedColumn:s.column+(r.generatedOffset.generatedLine===s.generatedLine)?r.generatedOffset.generatedColumn-1:0,originalLine:s.originalLine,originalColumn:s.originalColumn,name:s.name};this.__generatedMappings.push(f);if(typeof f.originalLine==="number"){this.__originalMappings.push(f)}}}this.__generatedMappings.sort(n.compareByGeneratedPositions);this.__originalMappings.sort(n.compareByOriginalPositions)};t.IndexedSourceMapConsumer=s})},{"./basic-source-map-consumer":38,"./binary-search":39,"./source-map-consumer":42,"./util":45,amdefine:46}],41:[function(e,t,u){if(typeof n!=="function"){var n=e("amdefine")(t,e)}n(function(e,t,u){var n=e("./util");function r(e,t){var u=e.generatedLine;var r=t.generatedLine;var i=e.generatedColumn;var o=t.generatedColumn;return r>u||r==u&&o>=i||n.compareByGeneratedPositions(e,t)<=0}function i(){this._array=[];this._sorted=true;this._last={generatedLine:-1,generatedColumn:0}}i.prototype.unsortedForEach=function o(e,t){this._array.forEach(e,t)};i.prototype.add=function s(e){var t;if(r(this._last,e)){this._last=e;this._array.push(e)}else{this._sorted=false;this._array.push(e)}};i.prototype.toArray=function a(){if(!this._sorted){this._array.sort(n.compareByGeneratedPositions);this._sorted=true}return this._array};t.MappingList=i})},{"./util":45,amdefine:46}],42:[function(e,t,u){if(typeof n!=="function"){var n=e("amdefine")(t,e)}n(function(e,t,u){var n=e("./util");function r(t){var u=t;if(typeof t==="string"){u=JSON.parse(t.replace(/^\)\]\}'/,""))}if(u.sections!=null){var n=e("./indexed-source-map-consumer");return new n.IndexedSourceMapConsumer(u)}else{var r=e("./basic-source-map-consumer");return new r.BasicSourceMapConsumer(u)}}r.fromSourceMap=function(t){var u=e("./basic-source-map-consumer");return u.BasicSourceMapConsumer.fromSourceMap(t)};r.prototype._version=3;r.prototype.__generatedMappings=null;Object.defineProperty(r.prototype,"_generatedMappings",{get:function(){if(!this.__generatedMappings){this.__generatedMappings=[];this.__originalMappings=[];this._parseMappings(this._mappings,this.sourceRoot)}return this.__generatedMappings}});r.prototype.__originalMappings=null;Object.defineProperty(r.prototype,"_originalMappings",{get:function(){if(!this.__originalMappings){this.__generatedMappings=[];this.__originalMappings=[];this._parseMappings(this._mappings,this.sourceRoot)}return this.__originalMappings}});r.prototype._nextCharIsMappingSeparator=function i(e){var t=e.charAt(0);return t===";"||t===","};r.prototype._parseMappings=function o(e,t){throw new Error("Subclasses must implement _parseMappings")};r.GENERATED_ORDER=1;r.ORIGINAL_ORDER=2;r.prototype.eachMapping=function s(e,t,u){var i=t||null;var o=u||r.GENERATED_ORDER;var s;switch(o){case r.GENERATED_ORDER:s=this._generatedMappings;break;case r.ORIGINAL_ORDER:s=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var a=this.sourceRoot;s.map(function(e){var t=e.source;if(t!=null&&a!=null){t=n.join(a,t)}return{source:t,generatedLine:e.generatedLine,generatedColumn:e.generatedColumn,originalLine:e.originalLine,originalColumn:e.originalColumn,name:e.name}}).forEach(e,i)};r.prototype.allGeneratedPositionsFor=function a(e){var t={source:n.getArg(e,"source"),originalLine:n.getArg(e,"line"),originalColumn:Infinity};if(this.sourceRoot!=null){t.source=n.relative(this.sourceRoot,t.source)}var u=[];var r=this._findMapping(t,this._originalMappings,"originalLine","originalColumn",n.compareByOriginalPositions);if(r>=0){var i=this._originalMappings[r];while(i&&i.originalLine===t.originalLine){u.push({line:n.getArg(i,"generatedLine",null),column:n.getArg(i,"generatedColumn",null),lastColumn:n.getArg(i,"lastGeneratedColumn",null)});i=this._originalMappings[--r]}}return u.reverse()};t.SourceMapConsumer=r})},{"./basic-source-map-consumer":38,"./indexed-source-map-consumer":40,"./util":45,amdefine:46}],43:[function(e,t,u){if(typeof n!=="function"){var n=e("amdefine")(t,e)}n(function(e,t,u){var n=e("./base64-vlq");var r=e("./util");
var i=e("./array-set").ArraySet;var o=e("./mapping-list").MappingList;function s(e){if(!e){e={}}this._file=r.getArg(e,"file",null);this._sourceRoot=r.getArg(e,"sourceRoot",null);this._skipValidation=r.getArg(e,"skipValidation",false);this._sources=new i;this._names=new i;this._mappings=new o;this._sourcesContents=null}s.prototype._version=3;s.fromSourceMap=function a(e){var t=e.sourceRoot;var u=new s({file:e.file,sourceRoot:t});e.eachMapping(function(e){var n={generated:{line:e.generatedLine,column:e.generatedColumn}};if(e.source!=null){n.source=e.source;if(t!=null){n.source=r.relative(t,n.source)}n.original={line:e.originalLine,column:e.originalColumn};if(e.name!=null){n.name=e.name}}u.addMapping(n)});e.sources.forEach(function(t){var n=e.sourceContentFor(t);if(n!=null){u.setSourceContent(t,n)}});return u};s.prototype.addMapping=function l(e){var t=r.getArg(e,"generated");var u=r.getArg(e,"original",null);var n=r.getArg(e,"source",null);var i=r.getArg(e,"name",null);if(!this._skipValidation){this._validateMapping(t,u,n,i)}if(n!=null&&!this._sources.has(n)){this._sources.add(n)}if(i!=null&&!this._names.has(i)){this._names.add(i)}this._mappings.add({generatedLine:t.line,generatedColumn:t.column,originalLine:u!=null&&u.line,originalColumn:u!=null&&u.column,source:n,name:i})};s.prototype.setSourceContent=function f(e,t){var u=e;if(this._sourceRoot!=null){u=r.relative(this._sourceRoot,u)}if(t!=null){if(!this._sourcesContents){this._sourcesContents={}}this._sourcesContents[r.toSetString(u)]=t}else if(this._sourcesContents){delete this._sourcesContents[r.toSetString(u)];if(Object.keys(this._sourcesContents).length===0){this._sourcesContents=null}}};s.prototype.applySourceMap=function c(e,t,u){var n=t;if(t==null){if(e.file==null){throw new Error("SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, "+'or the source map\'s "file" property. Both were omitted.')}n=e.file}var o=this._sourceRoot;if(o!=null){n=r.relative(o,n)}var s=new i;var a=new i;this._mappings.unsortedForEach(function(t){if(t.source===n&&t.originalLine!=null){var i=e.originalPositionFor({line:t.originalLine,column:t.originalColumn});if(i.source!=null){t.source=i.source;if(u!=null){t.source=r.join(u,t.source)}if(o!=null){t.source=r.relative(o,t.source)}t.originalLine=i.line;t.originalColumn=i.column;if(i.name!=null){t.name=i.name}}}var l=t.source;if(l!=null&&!s.has(l)){s.add(l)}var f=t.name;if(f!=null&&!a.has(f)){a.add(f)}},this);this._sources=s;this._names=a;e.sources.forEach(function(t){var n=e.sourceContentFor(t);if(n!=null){if(u!=null){t=r.join(u,t)}if(o!=null){t=r.relative(o,t)}this.setSourceContent(t,n)}},this)};s.prototype._validateMapping=function p(e,t,u,n){if(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0&&!t&&!u&&!n){return}else if(e&&"line"in e&&"column"in e&&t&&"line"in t&&"column"in t&&e.line>0&&e.column>=0&&t.line>0&&t.column>=0&&u){return}else{throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:u,original:t,name:n}))}};s.prototype._serializeMappings=function D(){var e=0;var t=1;var u=0;var i=0;var o=0;var s=0;var a="";var l;var f=this._mappings.toArray();for(var c=0,p=f.length;c<p;c++){l=f[c];if(l.generatedLine!==t){e=0;while(l.generatedLine!==t){a+=";";t++}}else{if(c>0){if(!r.compareByGeneratedPositions(l,f[c-1])){continue}a+=","}}a+=n.encode(l.generatedColumn-e);e=l.generatedColumn;if(l.source!=null){a+=n.encode(this._sources.indexOf(l.source)-s);s=this._sources.indexOf(l.source);a+=n.encode(l.originalLine-1-i);i=l.originalLine-1;a+=n.encode(l.originalColumn-u);u=l.originalColumn;if(l.name!=null){a+=n.encode(this._names.indexOf(l.name)-o);o=this._names.indexOf(l.name)}}}return a};s.prototype._generateSourcesContent=function h(e,t){return e.map(function(e){if(!this._sourcesContents){return null}if(t!=null){e=r.relative(t,e)}var u=r.toSetString(e);return Object.prototype.hasOwnProperty.call(this._sourcesContents,u)?this._sourcesContents[u]:null},this)};s.prototype.toJSON=function m(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};if(this._file!=null){e.file=this._file}if(this._sourceRoot!=null){e.sourceRoot=this._sourceRoot}if(this._sourcesContents){e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)}return e};s.prototype.toString=function d(){return JSON.stringify(this)};t.SourceMapGenerator=s})},{"./array-set":35,"./base64-vlq":36,"./mapping-list":41,"./util":45,amdefine:46}],44:[function(e,t,u){if(typeof n!=="function"){var n=e("amdefine")(t,e)}n(function(e,t,u){var n=e("./source-map-generator").SourceMapGenerator;var r=e("./util");var i=/(\r?\n)/;var o=10;var s="$$$isSourceNode$$$";function a(e,t,u,n,r){this.children=[];this.sourceContents={};this.line=e==null?null:e;this.column=t==null?null:t;this.source=u==null?null:u;this.name=r==null?null:r;this[s]=true;if(n!=null)this.add(n)}a.fromStringWithSourceMap=function l(e,t,u){var n=new a;var o=e.split(i);var s=function(){var e=o.shift();var t=o.shift()||"";return e+t};var l=1,f=0;var c=null;t.eachMapping(function(e){if(c!==null){if(l<e.generatedLine){var t="";p(c,s());l++;f=0}else{var u=o[0];var t=u.substr(0,e.generatedColumn-f);o[0]=u.substr(e.generatedColumn-f);f=e.generatedColumn;p(c,t);c=e;return}}while(l<e.generatedLine){n.add(s());l++}if(f<e.generatedColumn){var u=o[0];n.add(u.substr(0,e.generatedColumn));o[0]=u.substr(e.generatedColumn);f=e.generatedColumn}c=e},this);if(o.length>0){if(c){p(c,s())}n.add(o.join(""))}t.sources.forEach(function(e){var i=t.sourceContentFor(e);if(i!=null){if(u!=null){e=r.join(u,e)}n.setSourceContent(e,i)}});return n;function p(e,t){if(e===null||e.source===undefined){n.add(t)}else{var i=u?r.join(u,e.source):e.source;n.add(new a(e.originalLine,e.originalColumn,i,t,e.name))}}};a.prototype.add=function f(e){if(Array.isArray(e)){e.forEach(function(e){this.add(e)},this)}else if(e[s]||typeof e==="string"){if(e){this.children.push(e)}}else{throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e)}return this};a.prototype.prepend=function c(e){if(Array.isArray(e)){for(var t=e.length-1;t>=0;t--){this.prepend(e[t])}}else if(e[s]||typeof e==="string"){this.children.unshift(e)}else{throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e)}return this};a.prototype.walk=function p(e){var t;for(var u=0,n=this.children.length;u<n;u++){t=this.children[u];if(t[s]){t.walk(e)}else{if(t!==""){e(t,{source:this.source,line:this.line,column:this.column,name:this.name})}}}};a.prototype.join=function D(e){var t;var u;var n=this.children.length;if(n>0){t=[];for(u=0;u<n-1;u++){t.push(this.children[u]);t.push(e)}t.push(this.children[u]);this.children=t}return this};a.prototype.replaceRight=function h(e,t){var u=this.children[this.children.length-1];if(u[s]){u.replaceRight(e,t)}else if(typeof u==="string"){this.children[this.children.length-1]=u.replace(e,t)}else{this.children.push("".replace(e,t))}return this};a.prototype.setSourceContent=function m(e,t){this.sourceContents[r.toSetString(e)]=t};a.prototype.walkSourceContents=function d(e){for(var t=0,u=this.children.length;t<u;t++){if(this.children[t][s]){this.children[t].walkSourceContents(e)}}var n=Object.keys(this.sourceContents);for(var t=0,u=n.length;t<u;t++){e(r.fromSetString(n[t]),this.sourceContents[n[t]])}};a.prototype.toString=function A(){var e="";this.walk(function(t){e+=t});return e};a.prototype.toStringWithSourceMap=function C(e){var t={code:"",line:1,column:0};var u=new n(e);var r=false;var i=null;var s=null;var a=null;var l=null;this.walk(function(e,n){t.code+=e;if(n.source!==null&&n.line!==null&&n.column!==null){if(i!==n.source||s!==n.line||a!==n.column||l!==n.name){u.addMapping({source:n.source,original:{line:n.line,column:n.column},generated:{line:t.line,column:t.column},name:n.name})}i=n.source;s=n.line;a=n.column;l=n.name;r=true}else if(r){u.addMapping({generated:{line:t.line,column:t.column}});i=null;r=false}for(var f=0,c=e.length;f<c;f++){if(e.charCodeAt(f)===o){t.line++;t.column=0;if(f+1===c){i=null;r=false}else if(r){u.addMapping({source:n.source,original:{line:n.line,column:n.column},generated:{line:t.line,column:t.column},name:n.name})}}else{t.column++}}});this.walkSourceContents(function(e,t){u.setSourceContent(e,t)});return{code:t.code,map:u}};t.SourceNode=a})},{"./source-map-generator":43,"./util":45,amdefine:46}],45:[function(e,t,u){if(typeof n!=="function"){var n=e("amdefine")(t,e)}n(function(e,t,u){function n(e,t,u){if(t in e){return e[t]}else if(arguments.length===3){return u}else{throw new Error('"'+t+'" is a required argument.')}}t.getArg=n;var r=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.]*)(?::(\d+))?(\S*)$/;var i=/^data:.+\,.+$/;function o(e){var t=e.match(r);if(!t){return null}return{scheme:t[1],auth:t[2],host:t[3],port:t[4],path:t[5]}}t.urlParse=o;function s(e){var t="";if(e.scheme){t+=e.scheme+":"}t+="//";if(e.auth){t+=e.auth+"@"}if(e.host){t+=e.host}if(e.port){t+=":"+e.port}if(e.path){t+=e.path}return t}t.urlGenerate=s;function a(e){var t=e;var u=o(e);if(u){if(!u.path){return e}t=u.path}var n=t.charAt(0)==="/";var r=t.split(/\/+/);for(var i,a=0,l=r.length-1;l>=0;l--){i=r[l];if(i==="."){r.splice(l,1)}else if(i===".."){a++}else if(a>0){if(i===""){r.splice(l+1,a);a=0}else{r.splice(l,2);a--}}}t=r.join("/");if(t===""){t=n?"/":"."}if(u){u.path=t;return s(u)}return t}t.normalize=a;function l(e,t){if(e===""){e="."}if(t===""){t="."}var u=o(t);var n=o(e);if(n){e=n.path||"/"}if(u&&!u.scheme){if(n){u.scheme=n.scheme}return s(u)}if(u||t.match(i)){return t}if(n&&!n.host&&!n.path){n.host=t;return s(n)}var r=t.charAt(0)==="/"?t:a(e.replace(/\/+$/,"")+"/"+t);if(n){n.path=r;return s(n)}return r}t.join=l;function f(e,t){if(e===""){e="."}e=e.replace(/\/$/,"");var u=o(e);if(t.charAt(0)=="/"&&u&&u.path=="/"){return t.slice(1)}return t.indexOf(e+"/")===0?t.substr(e.length+1):t}t.relative=f;function c(e){return"$"+e}t.toSetString=c;function p(e){return e.substr(1)}t.fromSetString=p;function D(e,t){var u=e||"";var n=t||"";return(u>n)-(u<n)}function h(e,t,u){var n;n=D(e.source,t.source);if(n){return n}n=e.originalLine-t.originalLine;if(n){return n}n=e.originalColumn-t.originalColumn;if(n||u){return n}n=D(e.name,t.name);if(n){return n}n=e.generatedLine-t.generatedLine;if(n){return n}return e.generatedColumn-t.generatedColumn}t.compareByOriginalPositions=h;function m(e,t,u){var n;n=e.generatedLine-t.generatedLine;if(n){return n}n=e.generatedColumn-t.generatedColumn;if(n||u){return n}n=D(e.source,t.source);if(n){return n}n=e.originalLine-t.originalLine;if(n){return n}n=e.originalColumn-t.originalColumn;if(n){return n}return D(e.name,t.name)}t.compareByGeneratedPositions=m})},{amdefine:46}],46:[function(e,t,u){(function(u,n){"use strict";function r(t,r){"use strict";var i={},o={},s=false,a=e("path"),l,f;function c(e){var t,u;for(t=0;e[t];t+=1){u=e[t];if(u==="."){e.splice(t,1);t-=1}else if(u===".."){if(t===1&&(e[2]===".."||e[0]==="..")){break}else if(t>0){e.splice(t-1,2);t-=2}}}}function p(e,t){var u;if(e&&e.charAt(0)==="."){if(t){u=t.split("/");u=u.slice(0,u.length-1);u=u.concat(e.split("/"));c(u);e=u.join("/")}}return e}function D(e){return function(t){return p(t,e)}}function h(e){function t(t){o[e]=t}t.fromText=function(e,t){throw new Error("amdefine does not implement load.fromText")};return t}l=function(e,t,n,r){function i(i,o){if(typeof i==="string"){return f(e,t,n,i,r)}else{i=i.map(function(u){return f(e,t,n,u,r)});if(o){u.nextTick(function(){o.apply(null,i)})}}}i.toUrl=function(e){if(e.indexOf(".")===0){return p(e,a.dirname(n.filename))}else{return e}};return i};r=r||function A(){return t.require.apply(t,arguments)};function m(e,u,i){var a,f,c,p;if(e){f=o[e]={};c={id:e,uri:n,exports:f};a=l(r,f,c,e)}else{if(s){throw new Error("amdefine with no module ID cannot be called more than once per file.")}s=true;f=t.exports;c=t;a=l(r,f,c,t.id)}if(u){u=u.map(function(e){return a(e)})}if(typeof i==="function"){p=i.apply(c.exports,u)}else{p=i}if(p!==undefined){c.exports=p;if(e){o[e]=c.exports}}}f=function(e,t,u,n,r){var s=n.indexOf("!"),a=n,c,d;if(s===-1){n=p(n,r);if(n==="require"){return l(e,t,u,r)}else if(n==="exports"){return t}else if(n==="module"){return u}else if(o.hasOwnProperty(n)){return o[n]}else if(i[n]){m.apply(null,i[n]);return o[n]}else{if(e){return e(a)}else{throw new Error("No module with ID: "+n)}}}else{c=n.substring(0,s);n=n.substring(s+1,n.length);d=f(e,t,u,c,r);if(d.normalize){n=d.normalize(n,D(r))}else{n=p(n,r)}if(o[n]){return o[n]}else{d.load(n,l(e,t,u,r),h(n),{});return o[n]}}};function d(e,t,u){if(Array.isArray(e)){u=t;t=e;e=undefined}else if(typeof e!=="string"){u=e;e=t=undefined}if(t&&!Array.isArray(t)){u=t;t=undefined}if(!t){t=["require","exports","module"]}if(e){i[e]=[e,t,u]}else{m(e,t,u)}}d.require=function(e){if(o[e]){return o[e]}if(i[e]){m.apply(null,i[e]);return o[e]}};d.amd={};return d}t.exports=r}).call(this,e("_process"),"/node_modules/escodegen/node_modules/source-map/node_modules/amdefine/amdefine.js")},{_process:26,path:25}],47:[function(e,t,u){t.exports={name:"escodegen",description:"ECMAScript code generator",homepage:"http://github.com/estools/escodegen",main:"escodegen.js",bin:{esgenerate:"./bin/esgenerate.js",escodegen:"./bin/escodegen.js"},files:["LICENSE.BSD","LICENSE.source-map","README.md","bin","escodegen.js","package.json"],version:"1.7.0",engines:{node:">=0.10.0"},maintainers:[{name:"constellation",email:"utatane.tea@gmail.com"},{name:"michaelficarra",email:"npm@michael.ficarra.me"}],repository:{type:"git",url:"git+ssh://git@github.com/estools/escodegen.git"},dependencies:{estraverse:"^1.9.1",esutils:"^2.0.2",esprima:"^1.2.2",optionator:"^0.5.0","source-map":"~0.2.0"},optionalDependencies:{"source-map":"~0.2.0"},devDependencies:{"acorn-6to5":"^0.11.1-25",bluebird:"^2.3.11","bower-registry-client":"^0.2.1",chai:"^1.10.0","commonjs-everywhere":"^0.9.7","esprima-moz":"1.0.0-dev-harmony-moz",gulp:"^3.8.10","gulp-eslint":"^0.2.0","gulp-mocha":"^2.0.0",semver:"^4.1.0"},license:"BSD-2-Clause",scripts:{test:"gulp travis","unit-test":"gulp test",lint:"gulp lint",release:"node tools/release.js","build-min":"cjsify -ma path: tools/entry-point.js > escodegen.browser.min.js",build:"cjsify -a path: tools/entry-point.js > escodegen.browser.js"},gitHead:"5dabbc5441b396febd0afb9252a9afdfa7051657",bugs:{url:"https://github.com/estools/escodegen/issues"},_id:"escodegen@1.7.0",_shasum:"4e299d8cc33087b7f29c19e2b9e84362abe35453",_from:"escodegen@>=1.6.0 <2.0.0",_npmVersion:"2.11.3",_nodeVersion:"0.12.7",_npmUser:{name:"michaelficarra",email:"npm@michael.ficarra.me"},dist:{shasum:"4e299d8cc33087b7f29c19e2b9e84362abe35453",tarball:"http://registry.npmjs.org/escodegen/-/escodegen-1.7.0.tgz"},directories:{},_resolved:"https://registry.npmjs.org/escodegen/-/escodegen-1.7.0.tgz",readme:"ERROR: No README data found!"}},{}],48:[function(t,u,n){(function(t,u){"use strict";if(typeof e==="function"&&e.amd){e(["exports"],u)}else if(typeof n!=="undefined"){u(n)}else{u(t.esprima={})}})(this,function(e){"use strict";var t,u,n,r,i,o,s,a,l,f,c,p,D,h,m,d,A,C,E,F,g,y,B,v,b,S,x;t={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9,Template:10};u={};u[t.BooleanLiteral]="Boolean";u[t.EOF]="<end>";u[t.Identifier]="Identifier";u[t.Keyword]="Keyword";u[t.NullLiteral]="Null";u[t.NumericLiteral]="Numeric";u[t.Punctuator]="Punctuator";u[t.StringLiteral]="String";u[t.RegularExpression]="RegularExpression";u[t.Template]="Template";n=["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="];r={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForOfStatement:"ForOfStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchCase:"SwitchCase",SwitchStatement:"SwitchStatement",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"};i={ArrowParameterPlaceHolder:"ArrowParameterPlaceHolder"};o={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedTemplate:"Unexpected quasi %0",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",InvalidLHSInForLoop:"Invalid left-hand side in for-loop",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode",TemplateOctalLiteral:"Octal literals are not allowed in template strings.",ParameterAfterRestParameter:"Rest parameter must be last formal parameter",DefaultRestParameter:"Unexpected token =",ObjectPatternAsRestParameter:"Unexpected token {",DuplicateProtoProperty:"Duplicate __proto__ fields are not allowed in object literals",ConstructorSpecialMethod:"Class constructor may not be an accessor",DuplicateConstructor:"A class may only have one constructor",StaticPrototype:"Classes may not have static property named prototype",MissingFromClause:"Unexpected token",NoAsAfterImportNamespace:"Unexpected token",InvalidModuleSpecifier:"Unexpected token",IllegalImportDeclaration:"Unexpected token",IllegalExportDeclaration:"Unexpected token",DuplicateBinding:"Duplicate binding %0"};s={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B2\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA7AD\uA7B0\uA7B1\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB5F\uAB64\uAB65\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDE00-\uDE11\uDE13-\uDE2B\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF5D-\uDF61]|\uD805[\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDE00-\uDE2F\uDE44\uDE80-\uDEAA]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF98]|\uD809[\uDC00-\uDC6E]|[\uD80C\uD840-\uD868\uD86A-\uD86C][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D]|\uD87E[\uDC00-\uDE1D]/,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B2\u08E4-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58\u0C59\u0C60-\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D60-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA69D\uA69F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA7AD\uA7B0\uA7B1\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB5F\uAB64\uAB65\uABC0-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2D\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDD0-\uDDDA\uDE00-\uDE11\uDE13-\uDE37\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF01-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF98]|\uD809[\uDC00-\uDC6E]|[\uD80C\uD840-\uD868\uD86A-\uD86C][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/
};function w(e,t){if(!e){throw new Error("ASSERT: "+t)}}function _(e){return e>=48&&e<=57}function k(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function I(e){return"01234567".indexOf(e)>=0}function P(e){var t=e!=="0",u="01234567".indexOf(e);if(f<g&&I(a[f])){t=true;u=u*8+"01234567".indexOf(a[f++]);if("0123".indexOf(e)>=0&&f<g&&I(a[f])){u=u*8+"01234567".indexOf(a[f++])}}return{code:u,octal:t}}function L(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function O(e){return e===10||e===13||e===8232||e===8233}function j(e){return e<65536?String.fromCharCode(e):String.fromCharCode(55296+(e-65536>>10))+String.fromCharCode(56320+(e-65536&1023))}function M(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&s.NonAsciiIdentifierStart.test(j(e))}function R(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&s.NonAsciiIdentifierPart.test(j(e))}function T(e){switch(e){case"enum":case"export":case"import":case"super":return true;default:return false}}function N(e){switch(e){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return true;default:return false}}function q(e){return e==="eval"||e==="arguments"}function U(e){switch(e.length){case 2:return e==="if"||e==="in"||e==="do";case 3:return e==="var"||e==="for"||e==="new"||e==="try"||e==="let";case 4:return e==="this"||e==="else"||e==="case"||e==="void"||e==="with"||e==="enum";case 5:return e==="while"||e==="break"||e==="catch"||e==="throw"||e==="const"||e==="yield"||e==="class"||e==="super";case 6:return e==="return"||e==="typeof"||e==="delete"||e==="switch"||e==="export"||e==="import";case 7:return e==="default"||e==="finally"||e==="extends";case 8:return e==="function"||e==="continue"||e==="debugger";case 10:return e==="instanceof";default:return false}}function z(e,t,u,n,r){var i;w(typeof u==="number","Comment must have valid position");B.lastCommentStart=u;i={type:e,value:t};if(v.range){i.range=[u,n]}if(v.loc){i.loc=r}v.comments.push(i);if(v.attachComment){v.leadingComments.push(i);v.trailingComments.push(i)}}function W(e){var t,u,n,r;t=f-e;u={start:{line:c,column:f-p-e}};while(f<g){n=a.charCodeAt(f);++f;if(O(n)){D=true;if(v.comments){r=a.slice(t+e,f-1);u.end={line:c,column:f-p-1};z("Line",r,t,f-1,u)}if(n===13&&a.charCodeAt(f)===10){++f}++c;p=f;return}}if(v.comments){r=a.slice(t+e,f);u.end={line:c,column:f-p};z("Line",r,t,f,u)}}function V(){var e,t,u,n;if(v.comments){e=f-2;t={start:{line:c,column:f-p-2}}}while(f<g){u=a.charCodeAt(f);if(O(u)){if(u===13&&a.charCodeAt(f+1)===10){++f}D=true;++c;++f;p=f}else if(u===42){if(a.charCodeAt(f+1)===47){++f;++f;if(v.comments){n=a.slice(e+2,f-2);t.end={line:c,column:f-p};z("Block",n,e,f,t)}return}++f}else{++f}}if(v.comments){t.end={line:c,column:f-p};n=a.slice(e+2,f);z("Block",n,e,f,t)}_e()}function Y(){var e,t;D=false;t=f===0;while(f<g){e=a.charCodeAt(f);if(L(e)){++f}else if(O(e)){D=true;++f;if(e===13&&a.charCodeAt(f)===10){++f}++c;p=f;t=true}else if(e===47){e=a.charCodeAt(f+1);if(e===47){++f;++f;W(2);t=true}else if(e===42){++f;++f;V()}else{break}}else if(t&&e===45){if(a.charCodeAt(f+1)===45&&a.charCodeAt(f+2)===62){f+=3;W(3)}else{break}}else if(e===60){if(a.slice(f+1,f+4)==="!--"){++f;++f;++f;++f;W(4)}else{break}}else{break}}}function G(e){var t,u,n,r=0;u=e==="u"?4:2;for(t=0;t<u;++t){if(f<g&&k(a[f])){n=a[f++];r=r*16+"0123456789abcdef".indexOf(n.toLowerCase())}else{return""}}return String.fromCharCode(r)}function K(){var e,t;e=a[f];t=0;if(e==="}"){we()}while(f<g){e=a[f++];if(!k(e)){break}t=t*16+"0123456789abcdef".indexOf(e.toLowerCase())}if(t>1114111||e!=="}"){we()}return j(t)}function $(e){var t,u,n;t=a.charCodeAt(e);if(t>=55296&&t<=56319){n=a.charCodeAt(e+1);if(n>=56320&&n<=57343){u=t;t=(u-55296)*1024+n-56320+65536}}return t}function H(){var e,t,u;e=$(f);u=j(e);f+=u.length;if(e===92){if(a.charCodeAt(f)!==117){we()}++f;if(a[f]==="{"){++f;t=K()}else{t=G("u");e=t.charCodeAt(0);if(!t||t==="\\"||!M(e)){we()}}u=t}while(f<g){e=$(f);if(!R(e)){break}t=j(e);u+=t;f+=t.length;if(e===92){u=u.substr(0,u.length-1);if(a.charCodeAt(f)!==117){we()}++f;if(a[f]==="{"){++f;t=K()}else{t=G("u");e=t.charCodeAt(0);if(!t||t==="\\"||!R(e)){we()}}u+=t}}return u}function J(){var e,t;e=f++;while(f<g){t=a.charCodeAt(f);if(t===92){f=e;return H()}else if(t>=55296&&t<57343){f=e;return H()}if(R(t)){++f}else{break}}return a.slice(e,f)}function X(){var e,u,n;e=f;u=a.charCodeAt(f)===92?H():J();if(u.length===1){n=t.Identifier}else if(U(u)){n=t.Keyword}else if(u==="null"){n=t.NullLiteral}else if(u==="true"||u==="false"){n=t.BooleanLiteral}else{n=t.Identifier}return{type:n,value:u,lineNumber:c,lineStart:p,start:e,end:f}}function Z(){var e,u;e={type:t.Punctuator,value:"",lineNumber:c,lineStart:p,start:f,end:f};u=a[f];switch(u){case"(":if(v.tokenize){v.openParenToken=v.tokens.length}++f;break;case"{":if(v.tokenize){v.openCurlyToken=v.tokens.length}B.curlyStack.push("{");++f;break;case".":++f;if(a[f]==="."&&a[f+1]==="."){f+=2;u="..."}break;case"}":++f;B.curlyStack.pop();break;case")":case";":case",":case"[":case"]":case":":case"?":case"~":++f;break;default:u=a.substr(f,4);if(u===">>>="){f+=4}else{u=u.substr(0,3);if(u==="==="||u==="!=="||u===">>>"||u==="<<="||u===">>="){f+=3}else{u=u.substr(0,2);if(u==="&&"||u==="||"||u==="=="||u==="!="||u==="+="||u==="-="||u==="*="||u==="/="||u==="++"||u==="--"||u==="<<"||u===">>"||u==="&="||u==="|="||u==="^="||u==="%="||u==="<="||u===">="||u==="=>"){f+=2}else{u=a[f];if("<>=!+-*%&|^/".indexOf(u)>=0){++f}}}}}if(f===e.start){we()}e.end=f;e.value=u;return e}function Q(e){var u="";while(f<g){if(!k(a[f])){break}u+=a[f++]}if(u.length===0){we()}if(M(a.charCodeAt(f))){we()}return{type:t.NumericLiteral,value:parseInt("0x"+u,16),lineNumber:c,lineStart:p,start:e,end:f}}function ee(e){var u,n;n="";while(f<g){u=a[f];if(u!=="0"&&u!=="1"){break}n+=a[f++]}if(n.length===0){we()}if(f<g){u=a.charCodeAt(f);if(M(u)||_(u)){we()}}return{type:t.NumericLiteral,value:parseInt(n,2),lineNumber:c,lineStart:p,start:e,end:f}}function te(e,u){var n,r;if(I(e)){r=true;n="0"+a[f++]}else{r=false;++f;n=""}while(f<g){if(!I(a[f])){break}n+=a[f++]}if(!r&&n.length===0){we()}if(M(a.charCodeAt(f))||_(a.charCodeAt(f))){we()}return{type:t.NumericLiteral,value:parseInt(n,8),octal:r,lineNumber:c,lineStart:p,start:u,end:f}}function ue(){var e,t;for(e=f+1;e<g;++e){t=a[e];if(t==="8"||t==="9"){return false}if(!I(t)){return true}}return true}function ne(){var e,u,n;n=a[f];w(_(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point");u=f;e="";if(n!=="."){e=a[f++];n=a[f];if(e==="0"){if(n==="x"||n==="X"){++f;return Q(u)}if(n==="b"||n==="B"){++f;return ee(u)}if(n==="o"||n==="O"){return te(n,u)}if(I(n)){if(ue()){return te(n,u)}}}while(_(a.charCodeAt(f))){e+=a[f++]}n=a[f]}if(n==="."){e+=a[f++];while(_(a.charCodeAt(f))){e+=a[f++]}n=a[f]}if(n==="e"||n==="E"){e+=a[f++];n=a[f];if(n==="+"||n==="-"){e+=a[f++]}if(_(a.charCodeAt(f))){while(_(a.charCodeAt(f))){e+=a[f++]}}else{we()}}if(M(a.charCodeAt(f))){we()}return{type:t.NumericLiteral,value:parseFloat(e),lineNumber:c,lineStart:p,start:u,end:f}}function re(){var e="",u,n,r,i,o,s=false;u=a[f];w(u==="'"||u==='"',"String literal must starts with a quote");n=f;++f;while(f<g){r=a[f++];if(r===u){u="";break}else if(r==="\\"){r=a[f++];if(!r||!O(r.charCodeAt(0))){switch(r){case"u":case"x":if(a[f]==="{"){++f;e+=K()}else{i=G(r);if(!i){throw we()}e+=i}break;case"n":e+="\n";break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="";break;case"8":case"9":e+=r;_e();break;default:if(I(r)){o=P(r);s=o.octal||s;e+=String.fromCharCode(o.code)}else{e+=r}break}}else{++c;if(r==="\r"&&a[f]==="\n"){++f}p=f}}else if(O(r.charCodeAt(0))){break}else{e+=r}}if(u!==""){we()}return{type:t.StringLiteral,value:e,octal:s,lineNumber:C,lineStart:E,start:n,end:f}}function ie(){var e="",u,n,r,i,s,l,D,h;i=false;l=false;n=f;s=a[f]==="`";r=2;++f;while(f<g){u=a[f++];if(u==="`"){r=1;l=true;i=true;break}else if(u==="$"){if(a[f]==="{"){B.curlyStack.push("${");++f;i=true;break}e+=u}else if(u==="\\"){u=a[f++];if(!O(u.charCodeAt(0))){switch(u){case"n":e+="\n";break;case"r":e+="\r";break;case"t":e+="	";break;case"u":case"x":if(a[f]==="{"){++f;e+=K()}else{D=f;h=G(u);if(h){e+=h}else{f=D;e+=u}}break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="";break;default:if(u==="0"){if(_(a.charCodeAt(f))){be(o.TemplateOctalLiteral)}e+="\x00"}else if(I(u)){be(o.TemplateOctalLiteral)}else{e+=u}break}}else{++c;if(u==="\r"&&a[f]==="\n"){++f}p=f}}else if(O(u.charCodeAt(0))){++c;if(u==="\r"&&a[f]==="\n"){++f}p=f;e+="\n"}else{e+=u}}if(!i){we()}if(!s){B.curlyStack.pop()}return{type:t.Template,value:{cooked:e,raw:a.slice(n+1,f-r)},head:s,tail:l,lineNumber:c,lineStart:p,start:n,end:f}}function oe(e,t){var u="",n=e;if(t.indexOf("u")>=0){n=n.replace(/\\u\{([0-9a-fA-F]+)\}|\\u([a-fA-F0-9]{4})/g,function(e,t,n){var r=parseInt(t||n,16);if(r>1114111){we(null,o.InvalidRegExp)}if(r<=65535){return String.fromCharCode(r)}return u}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,u)}try{RegExp(n)}catch(r){we(null,o.InvalidRegExp)}try{return new RegExp(e,t)}catch(i){return null}}function se(){var e,t,u,n,r;e=a[f];w(e==="/","Regular expression literal must start with a slash");t=a[f++];u=false;n=false;while(f<g){e=a[f++];t+=e;if(e==="\\"){e=a[f++];if(O(e.charCodeAt(0))){we(null,o.UnterminatedRegExp)}t+=e}else if(O(e.charCodeAt(0))){we(null,o.UnterminatedRegExp)}else if(u){if(e==="]"){u=false}}else{if(e==="/"){n=true;break}else if(e==="["){u=true}}}if(!n){we(null,o.UnterminatedRegExp)}r=t.substr(1,t.length-2);return{value:r,literal:t}}function ae(){var e,t,u,n;t="";u="";while(f<g){e=a[f];if(!R(e.charCodeAt(0))){break}++f;if(e==="\\"&&f<g){e=a[f];if(e==="u"){++f;n=f;e=G("u");if(e){u+=e;for(t+="\\u";n<f;++n){t+=a[n]}}else{f=n;u+="u";t+="\\u"}_e()}else{t+="\\";_e()}}else{u+=e;t+=e}}return{value:u,literal:t}}function le(){var e,u,n,r;F=true;y=null;Y();e=f;u=se();n=ae();r=oe(u.value,n.value);F=false;if(v.tokenize){return{type:t.RegularExpression,value:r,regex:{pattern:u.value,flags:n.value},lineNumber:c,lineStart:p,start:e,end:f}}return{literal:u.literal+n.literal,value:r,regex:{pattern:u.value,flags:n.value},start:e,end:f}}function fe(){var e,t,u,n;Y();e=f;t={start:{line:c,column:f-p}};u=le();t.end={line:c,column:f-p};if(!v.tokenize){if(v.tokens.length>0){n=v.tokens[v.tokens.length-1];if(n.range[0]===e&&n.type==="Punctuator"){if(n.value==="/"||n.value==="/="){v.tokens.pop()}}}v.tokens.push({type:"RegularExpression",value:u.literal,regex:u.regex,range:[e,f],loc:t})}return u}function ce(e){return e.type===t.Identifier||e.type===t.Keyword||e.type===t.BooleanLiteral||e.type===t.NullLiteral}function pe(){var e,t;e=v.tokens[v.tokens.length-1];if(!e){return fe()}if(e.type==="Punctuator"){if(e.value==="]"){return Z()}if(e.value===")"){t=v.tokens[v.openParenToken-1];if(t&&t.type==="Keyword"&&(t.value==="if"||t.value==="while"||t.value==="for"||t.value==="with")){return fe()}return Z()}if(e.value==="}"){if(v.tokens[v.openCurlyToken-3]&&v.tokens[v.openCurlyToken-3].type==="Keyword"){t=v.tokens[v.openCurlyToken-4];if(!t){return Z()}}else if(v.tokens[v.openCurlyToken-4]&&v.tokens[v.openCurlyToken-4].type==="Keyword"){t=v.tokens[v.openCurlyToken-5];if(!t){return fe()}}else{return Z()}if(n.indexOf(t.value)>=0){return Z()}return fe()}return fe()}if(e.type==="Keyword"&&e.value!=="this"){return fe()}return Z()}function De(){var e,u;if(f>=g){return{type:t.EOF,lineNumber:c,lineStart:p,start:f,end:f}}e=a.charCodeAt(f);if(M(e)){u=X();if(l&&N(u.value)){u.type=t.Keyword}return u}if(e===40||e===41||e===59){return Z()}if(e===39||e===34){return re()}if(e===46){if(_(a.charCodeAt(f+1))){return ne()}return Z()}if(_(e)){return ne()}if(v.tokenize&&e===47){return pe()}if(e===96||e===125&&B.curlyStack[B.curlyStack.length-1]==="${"){return ie()}if(e>=55296&&e<57343){e=$(f);if(M(e)){return X()}}return Z()}function he(){var e,n,r,i;e={start:{line:c,column:f-p}};n=De();e.end={line:c,column:f-p};if(n.type!==t.EOF){r=a.slice(n.start,n.end);i={type:u[n.type],value:r,range:[n.start,n.end],loc:e};if(n.regex){i.regex={pattern:n.regex.pattern,flags:n.regex.flags}}v.tokens.push(i)}return n}function me(){var e;F=true;h=f;m=c;d=p;Y();e=y;A=f;C=c;E=p;y=typeof v.tokens!=="undefined"?he():De();F=false;return e}function de(){F=true;Y();h=f;m=c;d=p;A=f;C=c;E=p;y=typeof v.tokens!=="undefined"?he():De();F=false}function Ae(){this.line=C;this.column=A-E}function Ce(){this.start=new Ae;this.end=null}function Ee(e){this.start={line:e.lineNumber,column:e.start-e.lineStart};this.end=null}function Fe(){if(v.range){this.range=[A,0]}if(v.loc){this.loc=new Ce}}function ge(e){if(v.range){this.range=[e.start,0]}if(v.loc){this.loc=new Ee(e)}}ge.prototype=Fe.prototype={processComment:function(){var e,t,u,n=v.bottomRightStack,i,o,s=n[n.length-1];if(this.type===r.Program){if(this.body.length>0){return}}if(v.trailingComments.length>0){u=[];for(i=v.trailingComments.length-1;i>=0;--i){o=v.trailingComments[i];if(o.range[0]>=this.range[1]){u.unshift(o);v.trailingComments.splice(i,1)}}v.trailingComments=[]}else{if(s&&s.trailingComments&&s.trailingComments[0].range[0]>=this.range[1]){u=s.trailingComments;delete s.trailingComments}}while(s&&s.range[0]>=this.range[0]){e=n.pop();s=n[n.length-1]}if(e){if(e.leadingComments){t=[];for(i=e.leadingComments.length-1;i>=0;--i){o=e.leadingComments[i];if(o.range[1]<=this.range[0]){t.unshift(o);e.leadingComments.splice(i,1)}}if(!e.leadingComments.length){e.leadingComments=undefined}}}else if(v.leadingComments.length>0){t=[];for(i=v.leadingComments.length-1;i>=0;--i){o=v.leadingComments[i];if(o.range[1]<=this.range[0]){t.unshift(o);v.leadingComments.splice(i,1)}}}if(t&&t.length>0){this.leadingComments=t}if(u&&u.length>0){this.trailingComments=u}n.push(this)},finish:function(){if(v.range){this.range[1]=h}if(v.loc){this.loc.end={line:m,column:h-d};if(v.source){this.loc.source=v.source}}if(v.attachComment){this.processComment()}},finishArrayExpression:function(e){this.type=r.ArrayExpression;this.elements=e;this.finish();return this},finishArrayPattern:function(e){this.type=r.ArrayPattern;this.elements=e;this.finish();return this},finishArrowFunctionExpression:function(e,t,u,n){this.type=r.ArrowFunctionExpression;this.id=null;this.params=e;this.defaults=t;this.body=u;this.generator=false;this.expression=n;this.finish();return this},finishAssignmentExpression:function(e,t,u){this.type=r.AssignmentExpression;this.operator=e;this.left=t;this.right=u;this.finish();return this},finishAssignmentPattern:function(e,t){this.type=r.AssignmentPattern;this.left=e;this.right=t;this.finish();return this},finishBinaryExpression:function(e,t,u){this.type=e==="||"||e==="&&"?r.LogicalExpression:r.BinaryExpression;this.operator=e;this.left=t;this.right=u;this.finish();return this},finishBlockStatement:function(e){this.type=r.BlockStatement;this.body=e;this.finish();return this},finishBreakStatement:function(e){this.type=r.BreakStatement;this.label=e;this.finish();return this},finishCallExpression:function(e,t){this.type=r.CallExpression;this.callee=e;this.arguments=t;this.finish();return this},finishCatchClause:function(e,t){this.type=r.CatchClause;this.param=e;this.body=t;this.finish();return this},finishClassBody:function(e){this.type=r.ClassBody;this.body=e;this.finish();return this},finishClassDeclaration:function(e,t,u){this.type=r.ClassDeclaration;this.id=e;this.superClass=t;this.body=u;this.finish();return this},finishClassExpression:function(e,t,u){this.type=r.ClassExpression;this.id=e;this.superClass=t;this.body=u;this.finish();return this},finishConditionalExpression:function(e,t,u){this.type=r.ConditionalExpression;this.test=e;this.consequent=t;this.alternate=u;this.finish();return this},finishContinueStatement:function(e){this.type=r.ContinueStatement;this.label=e;this.finish();return this},finishDebuggerStatement:function(){this.type=r.DebuggerStatement;this.finish();return this},finishDoWhileStatement:function(e,t){this.type=r.DoWhileStatement;this.body=e;this.test=t;this.finish();return this},finishEmptyStatement:function(){this.type=r.EmptyStatement;this.finish();return this},finishExpressionStatement:function(e){this.type=r.ExpressionStatement;this.expression=e;this.finish();return this},finishForStatement:function(e,t,u,n){this.type=r.ForStatement;this.init=e;this.test=t;this.update=u;this.body=n;this.finish();return this},finishForOfStatement:function(e,t,u){this.type=r.ForOfStatement;this.left=e;this.right=t;this.body=u;this.finish();return this},finishForInStatement:function(e,t,u){this.type=r.ForInStatement;this.left=e;this.right=t;this.body=u;this.each=false;this.finish();return this},finishFunctionDeclaration:function(e,t,u,n,i){this.type=r.FunctionDeclaration;this.id=e;this.params=t;this.defaults=u;this.body=n;this.generator=i;this.expression=false;this.finish();return this},finishFunctionExpression:function(e,t,u,n,i){this.type=r.FunctionExpression;this.id=e;this.params=t;this.defaults=u;this.body=n;this.generator=i;this.expression=false;this.finish();return this},finishIdentifier:function(e){this.type=r.Identifier;this.name=e;this.finish();return this},finishIfStatement:function(e,t,u){this.type=r.IfStatement;this.test=e;this.consequent=t;this.alternate=u;this.finish();return this},finishLabeledStatement:function(e,t){this.type=r.LabeledStatement;this.label=e;this.body=t;this.finish();return this},finishLiteral:function(e){this.type=r.Literal;this.value=e.value;this.raw=a.slice(e.start,e.end);if(e.regex){this.regex=e.regex}this.finish();return this},finishMemberExpression:function(e,t,u){this.type=r.MemberExpression;this.computed=e==="[";this.object=t;this.property=u;this.finish();return this},finishMetaProperty:function(e,t){this.type=r.MetaProperty;this.meta=e;this.property=t;this.finish();return this},finishNewExpression:function(e,t){this.type=r.NewExpression;this.callee=e;this.arguments=t;this.finish();return this},finishObjectExpression:function(e){this.type=r.ObjectExpression;this.properties=e;this.finish();return this},finishObjectPattern:function(e){this.type=r.ObjectPattern;this.properties=e;this.finish();return this},finishPostfixExpression:function(e,t){this.type=r.UpdateExpression;this.operator=e;this.argument=t;this.prefix=false;this.finish();return this},finishProgram:function(e,t){this.type=r.Program;this.body=e;this.sourceType=t;this.finish();return this},finishProperty:function(e,t,u,n,i,o){this.type=r.Property;this.key=t;this.computed=u;this.value=n;this.kind=e;this.method=i;this.shorthand=o;this.finish();return this},finishRestElement:function(e){this.type=r.RestElement;this.argument=e;this.finish();return this},finishReturnStatement:function(e){this.type=r.ReturnStatement;this.argument=e;this.finish();return this},finishSequenceExpression:function(e){this.type=r.SequenceExpression;this.expressions=e;this.finish();return this},finishSpreadElement:function(e){this.type=r.SpreadElement;this.argument=e;this.finish();return this},finishSwitchCase:function(e,t){this.type=r.SwitchCase;this.test=e;this.consequent=t;this.finish();return this},finishSuper:function(){this.type=r.Super;this.finish();return this},finishSwitchStatement:function(e,t){this.type=r.SwitchStatement;this.discriminant=e;this.cases=t;this.finish();return this},finishTaggedTemplateExpression:function(e,t){this.type=r.TaggedTemplateExpression;this.tag=e;this.quasi=t;this.finish();return this},finishTemplateElement:function(e,t){this.type=r.TemplateElement;this.value=e;this.tail=t;this.finish();return this},finishTemplateLiteral:function(e,t){this.type=r.TemplateLiteral;this.quasis=e;this.expressions=t;this.finish();return this},finishThisExpression:function(){this.type=r.ThisExpression;this.finish();return this},finishThrowStatement:function(e){this.type=r.ThrowStatement;this.argument=e;this.finish();return this},finishTryStatement:function(e,t,u){this.type=r.TryStatement;this.block=e;this.guardedHandlers=[];this.handlers=t?[t]:[];this.handler=t;this.finalizer=u;this.finish();return this},finishUnaryExpression:function(e,t){this.type=e==="++"||e==="--"?r.UpdateExpression:r.UnaryExpression;this.operator=e;this.argument=t;this.prefix=true;this.finish();return this},finishVariableDeclaration:function(e){this.type=r.VariableDeclaration;this.declarations=e;this.kind="var";this.finish();return this},finishLexicalDeclaration:function(e,t){this.type=r.VariableDeclaration;this.declarations=e;this.kind=t;this.finish();return this},finishVariableDeclarator:function(e,t){this.type=r.VariableDeclarator;this.id=e;this.init=t;this.finish();return this},finishWhileStatement:function(e,t){this.type=r.WhileStatement;this.test=e;this.body=t;this.finish();return this},finishWithStatement:function(e,t){this.type=r.WithStatement;this.object=e;this.body=t;this.finish();return this},finishExportSpecifier:function(e,t){this.type=r.ExportSpecifier;this.exported=t||e;this.local=e;this.finish();return this},finishImportDefaultSpecifier:function(e){this.type=r.ImportDefaultSpecifier;this.local=e;this.finish();return this},finishImportNamespaceSpecifier:function(e){this.type=r.ImportNamespaceSpecifier;this.local=e;this.finish();return this},finishExportNamedDeclaration:function(e,t,u){this.type=r.ExportNamedDeclaration;this.declaration=e;this.specifiers=t;this.source=u;this.finish();return this},finishExportDefaultDeclaration:function(e){this.type=r.ExportDefaultDeclaration;this.declaration=e;this.finish();return this},finishExportAllDeclaration:function(e){this.type=r.ExportAllDeclaration;this.source=e;this.finish();return this},finishImportSpecifier:function(e,t){this.type=r.ImportSpecifier;this.local=e||t;this.imported=t;this.finish();return this},finishImportDeclaration:function(e,t){this.type=r.ImportDeclaration;this.specifiers=e;this.source=t;this.finish();return this},finishYieldExpression:function(e,t){this.type=r.YieldExpression;this.argument=e;this.delegate=t;this.finish();return this}};function ye(e){var t,u;for(t=0;t<v.errors.length;t++){u=v.errors[t];if(u.index===e.index&&u.message===e.message){return}}v.errors.push(e)}function Be(e,t){var u=new Error(e);try{throw u}catch(n){if(Object.create&&Object.defineProperty){u=Object.create(n);Object.defineProperty(u,"column",{value:t})}}finally{return u}}function ve(e,t,u){var n,r,i;n="Line "+e+": "+u;r=t-(F?p:d)+1;i=Be(n,r);i.lineNumber=e;i.description=u;i.index=t;return i}function be(e){var t,u;t=Array.prototype.slice.call(arguments,1);u=e.replace(/%(\d)/g,function(e,u){w(u<t.length,"Message reference must be in range");return t[u]});throw ve(m,h,u)}function Se(e){var t,u,n;t=Array.prototype.slice.call(arguments,1);u=e.replace(/%(\d)/g,function(e,u){w(u<t.length,"Message reference must be in range");return t[u]});n=ve(c,h,u);if(v.errors){ye(n)}else{throw n}}function xe(e,u){var n,r=u||o.UnexpectedToken;if(e){if(!u){r=e.type===t.EOF?o.UnexpectedEOS:e.type===t.Identifier?o.UnexpectedIdentifier:e.type===t.NumericLiteral?o.UnexpectedNumber:e.type===t.StringLiteral?o.UnexpectedString:e.type===t.Template?o.UnexpectedTemplate:o.UnexpectedToken;if(e.type===t.Keyword){if(T(e.value)){r=o.UnexpectedReserved}else if(l&&N(e.value)){r=o.StrictReservedWord}}}n=e.type===t.Template?e.value.raw:e.value}else{n="ILLEGAL"}r=r.replace("%0",n);return e&&typeof e.lineNumber==="number"?ve(e.lineNumber,e.start,r):ve(F?c:m,F?f:h,r)}function we(e,t){throw xe(e,t)}function _e(e,t){var u=xe(e,t);if(v.errors){ye(u)}else{throw u}}function ke(e){var u=me();if(u.type!==t.Punctuator||u.value!==e){we(u)}}function Ie(){var e;if(v.errors){e=y;if(e.type===t.Punctuator&&e.value===","){me()}else if(e.type===t.Punctuator&&e.value===";"){me();_e(e)}else{_e(e,o.UnexpectedToken)}}else{ke(",")}}function Pe(e){var u=me();if(u.type!==t.Keyword||u.value!==e){we(u)}}function Le(e){return y.type===t.Punctuator&&y.value===e}function Oe(e){return y.type===t.Keyword&&y.value===e}function je(e){return y.type===t.Identifier&&y.value===e}function Me(){var e;if(y.type!==t.Punctuator){return false}e=y.value;return e==="="||e==="*="||e==="/="||e==="%="||e==="+="||e==="-="||e==="<<="||e===">>="||e===">>>="||e==="&="||e==="^="||e==="|="}function Re(){if(a.charCodeAt(A)===59||Le(";")){me();return}if(D){return}h=A;m=C;d=E;if(y.type!==t.EOF&&!Le("}")){we(y)}}function Te(e){var t=b,u=S,n=x,r;b=true;S=true;x=null;r=e();if(x!==null){we(x)}b=t;S=u;x=n;return r}function Ne(e){var t=b,u=S,n=x,r;b=true;S=true;x=null;r=e();b=b&&t;S=S&&u;x=n||x;return r}function qe(e,t){var u=new Fe,n=[],r,i;ke("[");while(!Le("]")){if(Le(",")){me();n.push(null)}else{if(Le("...")){i=new Fe;me();e.push(y);r=St(e,t);n.push(i.finishRestElement(r));break}else{n.push(Ve(e,t))}if(!Le("]")){ke(",")}}}ke("]");return u.finishArrayPattern(n)}function Ue(e,u){var n=new Fe,r,i,o=Le("["),s;if(y.type===t.Identifier){i=y;r=St();if(Le("=")){e.push(i);me();s=gt();return n.finishProperty("init",r,false,new ge(i).finishAssignmentPattern(r,s),false,false)}else if(!Le(":")){e.push(i);return n.finishProperty("init",r,false,r,false,true)}}else{r=$e(e,u)}ke(":");s=Ve(e,u);return n.finishProperty("init",r,o,s,false,false)}function ze(e,t){var u=new Fe,n=[];ke("{");while(!Le("}")){n.push(Ue(e,t));if(!Le("}")){ke(",")}}me();return u.finishObjectPattern(n)}function We(e,t){if(Le("[")){return qe(e,t)}else if(Le("{")){return ze(e,t)}e.push(y);return St(t)}function Ve(e,t){var u=y,n,r,i;n=We(e,t);if(Le("=")){me();r=B.allowYield;B.allowYield=true;i=Te(gt);B.allowYield=r;n=new ge(u).finishAssignmentPattern(n,i)}return n}function Ye(){var e=[],t=new Fe,u;ke("[");while(!Le("]")){if(Le(",")){me();e.push(null)}else if(Le("...")){u=new Fe;me();u.finishSpreadElement(Ne(gt));if(!Le("]")){S=b=false;ke(",")}e.push(u)}else{e.push(Ne(gt));if(!Le("]")){ke(",")}}}me();return t.finishArrayExpression(e)}function Ge(e,t,u){var n,r;S=b=false;n=l;r=Te(Xt);if(l&&t.firstRestricted){_e(t.firstRestricted,t.message)}if(l&&t.stricted){_e(t.stricted,t.message)}l=n;return e.finishFunctionExpression(null,t.params,t.defaults,r,u)}function Ke(){var e,t,u=new Fe,n=B.allowYield;B.allowYield=false;e=eu();B.allowYield=n;B.allowYield=false;t=Ge(u,e,false);B.allowYield=n;return t}function $e(){var e,u=new Fe,n;e=me();switch(e.type){case t.StringLiteral:case t.NumericLiteral:if(l&&e.octal){_e(e,o.StrictOctalLiteral)}return u.finishLiteral(e);case t.Identifier:case t.BooleanLiteral:case t.NullLiteral:case t.Keyword:return u.finishIdentifier(e.value);case t.Punctuator:if(e.value==="["){n=Te(gt);ke("]");return n}break}we(e)}function He(){switch(y.type){case t.Identifier:case t.StringLiteral:case t.BooleanLiteral:case t.NullLiteral:case t.NumericLiteral:case t.Keyword:return true;case t.Punctuator:return y.value==="["}return false}function Je(e,u,n,r){var i,o,s,a,l=B.allowYield;if(e.type===t.Identifier){if(e.value==="get"&&He()){n=Le("[");u=$e();s=new Fe;ke("(");ke(")");B.allowYield=false;i=Ge(s,{params:[],defaults:[],stricted:null,firstRestricted:null,message:null},false);B.allowYield=l;return r.finishProperty("get",u,n,i,false,false)}else if(e.value==="set"&&He()){n=Le("[");u=$e();s=new Fe;ke("(");o={params:[],defaultCount:0,defaults:[],firstRestricted:null,paramSet:{}};if(Le(")")){_e(y)}else{B.allowYield=false;Qt(o);B.allowYield=l;if(o.defaultCount===0){o.defaults=[]}}ke(")");B.allowYield=false;i=Ge(s,o,false);B.allowYield=l;return r.finishProperty("set",u,n,i,false,false)}}else if(e.type===t.Punctuator&&e.value==="*"&&He()){n=Le("[");u=$e();s=new Fe;B.allowYield=true;a=eu();B.allowYield=l;B.allowYield=false;i=Ge(s,a,true);B.allowYield=l;return r.finishProperty("init",u,n,i,true,false)}if(u&&Le("(")){i=Ke();return r.finishProperty("init",u,n,i,true,false)}return null}function Xe(e){var u=y,n=new Fe,i,s,a,l,f;i=Le("[");if(Le("*")){me()}else{s=$e()}a=Je(u,s,i,n);if(a){return a}if(!s){we(y)}if(!i){l=s.type===r.Identifier&&s.name==="__proto__"||s.type===r.Literal&&s.value==="__proto__";if(e.value&&l){Se(o.DuplicateProtoProperty)}e.value|=l}if(Le(":")){me();f=Ne(gt);return n.finishProperty("init",s,i,f,false,false)}if(u.type===t.Identifier){if(Le("=")){x=y;me();f=Te(gt);return n.finishProperty("init",s,i,new ge(u).finishAssignmentPattern(s,f),false,true)}return n.finishProperty("init",s,i,s,false,true)}we(y)}function Ze(){var e=[],t={value:false},u=new Fe;ke("{");while(!Le("}")){e.push(Xe(t));if(!Le("}")){Ie()}}ke("}");return u.finishObjectExpression(e)}function Qe(e){var t;switch(e.type){case r.Identifier:case r.MemberExpression:case r.RestElement:case r.AssignmentPattern:break;case r.SpreadElement:e.type=r.RestElement;Qe(e.argument);break;case r.ArrayExpression:e.type=r.ArrayPattern;for(t=0;t<e.elements.length;t++){if(e.elements[t]!==null){Qe(e.elements[t])}}break;case r.ObjectExpression:e.type=r.ObjectPattern;for(t=0;t<e.properties.length;t++){Qe(e.properties[t].value)}break;case r.AssignmentExpression:e.type=r.AssignmentPattern;Qe(e.left);break;default:break}}function et(e){var u,n;if(y.type!==t.Template||e.head&&!y.head){we()}u=new Fe;n=me();return u.finishTemplateElement({raw:n.value.raw,cooked:n.value.cooked},n.tail)}function tt(){var e,t,u,n=new Fe;e=et({head:true});t=[e];u=[];while(!e.tail){u.push(yt());e=et({head:false});t.push(e)}return n.finishTemplateLiteral(t,u)}function ut(){var e,t,u,n,o=[];ke("(");if(Le(")")){me();if(!Le("=>")){ke("=>")}return{type:i.ArrowParameterPlaceHolder,params:[],rawParams:[]}}u=y;if(Le("...")){e=Lt(o);ke(")");if(!Le("=>")){ke("=>")}return{type:i.ArrowParameterPlaceHolder,params:[e]}}b=true;e=Ne(gt);if(Le(",")){S=false;t=[e];while(A<g){if(!Le(",")){break}me();if(Le("...")){if(!b){we(y)}t.push(Lt(o));ke(")");if(!Le("=>")){ke("=>")}b=false;for(n=0;n<t.length;n++){Qe(t[n])}return{type:i.ArrowParameterPlaceHolder,params:t}}t.push(Ne(gt))}e=new ge(u).finishSequenceExpression(t)}ke(")");if(Le("=>")){if(e.type===r.Identifier&&e.name==="yield"){return{type:i.ArrowParameterPlaceHolder,params:[e]}}if(!b){we(y)}if(e.type===r.SequenceExpression){for(n=0;n<e.expressions.length;n++){Qe(e.expressions[n])}}else{Qe(e)}e={type:i.ArrowParameterPlaceHolder,params:e.type===r.SequenceExpression?e.expressions:[e]}}b=false;return e}function nt(){var e,u,n,r;if(Le("(")){b=false;return Ne(ut)}if(Le("[")){return Ne(Ye)}if(Le("{")){return Ne(Ze)}e=y.type;r=new Fe;if(e===t.Identifier){if(B.sourceType==="module"&&y.value==="await"){_e(y)}n=r.finishIdentifier(me().value)}else if(e===t.StringLiteral||e===t.NumericLiteral){S=b=false;if(l&&y.octal){_e(y,o.StrictOctalLiteral)}n=r.finishLiteral(me())}else if(e===t.Keyword){if(!l&&B.allowYield&&Oe("yield")){return it()}S=b=false;if(Oe("function")){return uu()}if(Oe("this")){me();return r.finishThisExpression()}if(Oe("class")){return iu()}we(me())}else if(e===t.BooleanLiteral){S=b=false;u=me();u.value=u.value==="true";n=r.finishLiteral(u)}else if(e===t.NullLiteral){S=b=false;u=me();u.value=null;n=r.finishLiteral(u)}else if(Le("/")||Le("/=")){S=b=false;f=A;if(typeof v.tokens!=="undefined"){u=fe()}else{u=le()}me();n=r.finishLiteral(u)}else if(e===t.Template){n=tt()}else{we(me())}return n}function rt(){var e=[],t;ke("(");if(!Le(")")){while(A<g){if(Le("...")){t=new Fe;me();t.finishSpreadElement(Te(gt))}else{t=Te(gt)}e.push(t);if(Le(")")){break}Ie()}}ke(")");return e}function it(){var e,t=new Fe;e=me();if(!ce(e)){we(e)}return t.finishIdentifier(e.value)}function ot(){ke(".");return it()}function st(){var e;ke("[");e=Te(yt);ke("]");return e}function at(){var e,u,n=new Fe;Pe("new");if(Le(".")){me();if(y.type===t.Identifier&&y.value==="target"){if(B.inFunctionBody){me();return n.finishMetaProperty("new","target")}}we(y)}e=Te(ft);u=Le("(")?rt():[];S=b=false;return n.finishNewExpression(e,u)}function lt(){var e,u,n,r,i,o=B.allowIn;i=y;B.allowIn=true;if(Oe("super")&&B.inFunctionBody){u=new Fe;me();u=u.finishSuper();if(!Le("(")&&!Le(".")&&!Le("[")){we(y)}}else{u=Ne(Oe("new")?at:nt)}for(;;){if(Le(".")){b=false;S=true;r=ot();u=new ge(i).finishMemberExpression(".",u,r)}else if(Le("(")){b=false;S=false;n=rt();u=new ge(i).finishCallExpression(u,n);
}else if(Le("[")){b=false;S=true;r=st();u=new ge(i).finishMemberExpression("[",u,r)}else if(y.type===t.Template&&y.head){e=tt();u=new ge(i).finishTaggedTemplateExpression(u,e)}else{break}}B.allowIn=o;return u}function ft(){var e,u,n,r;w(B.allowIn,"callee of new expression always allow in keyword.");r=y;if(Oe("super")&&B.inFunctionBody){u=new Fe;me();u=u.finishSuper();if(!Le("[")&&!Le(".")){we(y)}}else{u=Ne(Oe("new")?at:nt)}for(;;){if(Le("[")){b=false;S=true;n=st();u=new ge(r).finishMemberExpression("[",u,n)}else if(Le(".")){b=false;S=true;n=ot();u=new ge(r).finishMemberExpression(".",u,n)}else if(y.type===t.Template&&y.head){e=tt();u=new ge(r).finishTaggedTemplateExpression(u,e)}else{break}}return u}function ct(){var e,u,n=y;e=Ne(lt);if(!D&&y.type===t.Punctuator){if(Le("++")||Le("--")){if(l&&e.type===r.Identifier&&q(e.name)){Se(o.StrictLHSPostfix)}if(!S){Se(o.InvalidLHSInAssignment)}S=b=false;u=me();e=new ge(n).finishPostfixExpression(u.value,e)}}return e}function pt(){var e,u,n;if(y.type!==t.Punctuator&&y.type!==t.Keyword){u=ct()}else if(Le("++")||Le("--")){n=y;e=me();u=Ne(pt);if(l&&u.type===r.Identifier&&q(u.name)){Se(o.StrictLHSPrefix)}if(!S){Se(o.InvalidLHSInAssignment)}u=new ge(n).finishUnaryExpression(e.value,u);S=b=false}else if(Le("+")||Le("-")||Le("~")||Le("!")){n=y;e=me();u=Ne(pt);u=new ge(n).finishUnaryExpression(e.value,u);S=b=false}else if(Oe("delete")||Oe("void")||Oe("typeof")){n=y;e=me();u=Ne(pt);u=new ge(n).finishUnaryExpression(e.value,u);if(l&&u.operator==="delete"&&u.argument.type===r.Identifier){Se(o.StrictDelete)}S=b=false}else{u=ct()}return u}function Dt(e,u){var n=0;if(e.type!==t.Punctuator&&e.type!==t.Keyword){return 0}switch(e.value){case"||":n=1;break;case"&&":n=2;break;case"|":n=3;break;case"^":n=4;break;case"&":n=5;break;case"==":case"!=":case"===":case"!==":n=6;break;case"<":case">":case"<=":case">=":case"instanceof":n=7;break;case"in":n=u?7:0;break;case"<<":case">>":case">>>":n=8;break;case"+":case"-":n=9;break;case"*":case"/":case"%":n=11;break;default:break}return n}function ht(){var e,t,u,n,r,i,o,s,a,l;e=y;a=Ne(pt);n=y;r=Dt(n,B.allowIn);if(r===0){return a}S=b=false;n.prec=r;me();t=[e,y];o=Te(pt);i=[a,n,o];while((r=Dt(y,B.allowIn))>0){while(i.length>2&&r<=i[i.length-2].prec){o=i.pop();s=i.pop().value;a=i.pop();t.pop();u=new ge(t[t.length-1]).finishBinaryExpression(s,a,o);i.push(u)}n=me();n.prec=r;i.push(n);t.push(y);u=Te(pt);i.push(u)}l=i.length-1;u=i[l];t.pop();while(l>1){u=new ge(t.pop()).finishBinaryExpression(i[l-1].value,i[l-2],u);l-=2}return u}function mt(){var e,t,u,n,r;r=y;e=Ne(ht);if(Le("?")){me();t=B.allowIn;B.allowIn=true;u=Te(gt);B.allowIn=t;ke(":");n=Te(gt);e=new ge(r).finishConditionalExpression(e,u,n);S=b=false}return e}function dt(){if(Le("{")){return Xt()}return Te(gt)}function At(e,t){var u;switch(t.type){case r.Identifier:Zt(e,t,t.name);break;case r.RestElement:At(e,t.argument);break;case r.AssignmentPattern:At(e,t.left);break;case r.ArrayPattern:for(u=0;u<t.elements.length;u++){if(t.elements[u]!==null){At(e,t.elements[u])}}break;case r.YieldExpression:break;default:w(t.type===r.ObjectPattern,"Invalid type");for(u=0;u<t.properties.length;u++){At(e,t.properties[u].value)}break}}function Ct(e){var t,u,n,s,a,f,c,p;a=[];f=0;s=[e];switch(e.type){case r.Identifier:break;case i.ArrowParameterPlaceHolder:s=e.params;break;default:return null}c={paramSet:{}};for(t=0,u=s.length;t<u;t+=1){n=s[t];switch(n.type){case r.AssignmentPattern:s[t]=n.left;if(n.right.type===r.YieldExpression){if(n.right.argument){we(y)}n.right.type=r.Identifier;n.right.name="yield";delete n.right.argument;delete n.right.delegate}a.push(n.right);++f;At(c,n.left);break;default:At(c,n);s[t]=n;a.push(null);break}}if(l||!B.allowYield){for(t=0,u=s.length;t<u;t+=1){n=s[t];if(n.type===r.YieldExpression){we(y)}}}if(c.message===o.StrictParamDupe){p=l?c.stricted:c.firstRestricted;we(p,c.message)}if(f===0){a=[]}return{params:s,defaults:a,stricted:c.stricted,firstRestricted:c.firstRestricted,message:c.message}}function Et(e,t){var u,n,i;if(D){_e(y)}ke("=>");u=l;n=B.allowYield;B.allowYield=true;i=dt();if(l&&e.firstRestricted){we(e.firstRestricted,e.message)}if(l&&e.stricted){_e(e.stricted,e.message)}l=u;B.allowYield=n;return t.finishArrowFunctionExpression(e.params,e.defaults,i,i.type!==r.BlockStatement)}function Ft(){var e,u,n,r;e=null;u=new Fe;Pe("yield");if(!D){r=B.allowYield;B.allowYield=false;n=Le("*");if(n){me();e=gt()}else{if(!Le(";")&&!Le("}")&&!Le(")")&&y.type!==t.EOF){e=gt()}}B.allowYield=r}return u.finishYieldExpression(e,n)}function gt(){var e,t,u,n,s;s=y;e=y;if(!B.allowYield&&Oe("yield")){return Ft()}t=mt();if(t.type===i.ArrowParameterPlaceHolder||Le("=>")){S=b=false;n=Ct(t);if(n){x=null;return Et(n,new ge(s))}return t}if(Me()){if(!S){Se(o.InvalidLHSInAssignment)}if(l&&t.type===r.Identifier){if(q(t.name)){_e(e,o.StrictLHSAssignment)}if(N(t.name)){_e(e,o.StrictReservedWord)}}if(!Le("=")){S=b=false}else{Qe(t)}e=me();u=Te(gt);t=new ge(s).finishAssignmentExpression(e.value,t,u);x=null}return t}function yt(){var e,t=y,u;e=Te(gt);if(Le(",")){u=[e];while(A<g){if(!Le(",")){break}me();u.push(Te(gt))}e=new ge(t).finishSequenceExpression(u)}return e}function Bt(){if(y.type===t.Keyword){switch(y.value){case"export":if(B.sourceType!=="module"){_e(y,o.IllegalExportDeclaration)}return cu();case"import":if(B.sourceType!=="module"){_e(y,o.IllegalImportDeclaration)}return du();case"const":case"let":return Pt({inFor:false});case"function":return tu(new Fe);case"class":return ru()}}return Jt()}function vt(){var e=[];while(A<g){if(Le("}")){break}e.push(Bt())}return e}function bt(){var e,t=new Fe;ke("{");e=vt();ke("}");return t.finishBlockStatement(e)}function St(e){var u,n=new Fe;u=me();if(u.type===t.Keyword&&u.value==="yield"){if(l){_e(u,o.StrictReservedWord)}if(!B.allowYield){we(u)}}else if(u.type!==t.Identifier){if(l&&u.type===t.Keyword&&N(u.value)){_e(u,o.StrictReservedWord)}else{if(l||u.value!=="let"||e!=="var"){we(u)}}}else if(B.sourceType==="module"&&u.type===t.Identifier&&u.value==="await"){_e(u)}return n.finishIdentifier(u.value)}function xt(e){var t=null,u,n=new Fe,i=[];u=We(i,"var");if(l&&q(u.name)){Se(o.StrictVarName)}if(Le("=")){me();t=Te(gt)}else if(u.type!==r.Identifier&&!e.inFor){ke("=")}return n.finishVariableDeclarator(u,t)}function wt(e){var t=[];do{t.push(xt({inFor:e.inFor}));if(!Le(",")){break}me()}while(A<g);return t}function _t(e){var t;Pe("var");t=wt({inFor:false});Re();return e.finishVariableDeclaration(t)}function kt(e,t){var u=null,n,i=new Fe,s=[];n=We(s,e);if(l&&n.type===r.Identifier&&q(n.name)){Se(o.StrictVarName)}if(e==="const"){if(!Oe("in")&&!je("of")){ke("=");u=Te(gt)}}else if(!t.inFor&&n.type!==r.Identifier||Le("=")){ke("=");u=Te(gt)}return i.finishVariableDeclarator(n,u)}function It(e,t){var u=[];do{u.push(kt(e,t));if(!Le(",")){break}me()}while(A<g);return u}function Pt(e){var t,u,n=new Fe;t=me().value;w(t==="let"||t==="const","Lexical declaration must be either let or const");u=It(t,e);Re();return n.finishLexicalDeclaration(u,t)}function Lt(e){var t,u=new Fe;me();if(Le("{")){be(o.ObjectPatternAsRestParameter)}e.push(y);t=St();if(Le("=")){be(o.DefaultRestParameter)}if(!Le(")")){be(o.ParameterAfterRestParameter)}return u.finishRestElement(t)}function Ot(e){ke(";");return e.finishEmptyStatement()}function jt(e){var t=yt();Re();return e.finishExpressionStatement(t)}function Mt(e){var t,u,n;Pe("if");ke("(");t=yt();ke(")");u=Jt();if(Oe("else")){me();n=Jt()}else{n=null}return e.finishIfStatement(t,u,n)}function Rt(e){var t,u,n;Pe("do");n=B.inIteration;B.inIteration=true;t=Jt();B.inIteration=n;Pe("while");ke("(");u=yt();ke(")");if(Le(";")){me()}return e.finishDoWhileStatement(t,u)}function Tt(e){var t,u,n;Pe("while");ke("(");t=yt();ke(")");n=B.inIteration;B.inIteration=true;u=Jt();B.inIteration=n;return e.finishWhileStatement(t,u)}function Nt(e){var t,u,n,r,i,s,a,l,f,c,p,D,h=B.allowIn;t=i=s=null;u=true;Pe("for");ke("(");if(Le(";")){me()}else{if(Oe("var")){t=new Fe;me();B.allowIn=false;c=wt({inFor:true});B.allowIn=h;if(c.length===1&&Oe("in")){t=t.finishVariableDeclaration(c);me();a=t;l=yt();t=null}else if(c.length===1&&c[0].init===null&&je("of")){t=t.finishVariableDeclaration(c);me();a=t;l=gt();t=null;u=false}else{t=t.finishVariableDeclaration(c);ke(";")}}else if(Oe("const")||Oe("let")){t=new Fe;f=me().value;B.allowIn=false;c=It(f,{inFor:true});B.allowIn=h;if(c.length===1&&c[0].init===null&&Oe("in")){t=t.finishLexicalDeclaration(c,f);me();a=t;l=yt();t=null}else if(c.length===1&&c[0].init===null&&je("of")){t=t.finishLexicalDeclaration(c,f);me();a=t;l=gt();t=null;u=false}else{Re();t=t.finishLexicalDeclaration(c,f)}}else{r=y;B.allowIn=false;t=Ne(gt);B.allowIn=h;if(Oe("in")){if(!S){Se(o.InvalidLHSInForIn)}me();Qe(t);a=t;l=yt();t=null}else if(je("of")){if(!S){Se(o.InvalidLHSInForLoop)}me();Qe(t);a=t;l=gt();t=null;u=false}else{if(Le(",")){n=[t];while(Le(",")){me();n.push(Te(gt))}t=new ge(r).finishSequenceExpression(n)}ke(";")}}}if(typeof a==="undefined"){if(!Le(";")){i=yt()}ke(";");if(!Le(")")){s=yt()}}ke(")");D=B.inIteration;B.inIteration=true;p=Te(Jt);B.inIteration=D;return typeof a==="undefined"?e.finishForStatement(t,i,s,p):u?e.finishForInStatement(a,l,p):e.finishForOfStatement(a,l,p)}function qt(e){var u=null,n;Pe("continue");if(a.charCodeAt(A)===59){me();if(!B.inIteration){be(o.IllegalContinue)}return e.finishContinueStatement(null)}if(D){if(!B.inIteration){be(o.IllegalContinue)}return e.finishContinueStatement(null)}if(y.type===t.Identifier){u=St();n="$"+u.name;if(!Object.prototype.hasOwnProperty.call(B.labelSet,n)){be(o.UnknownLabel,u.name)}}Re();if(u===null&&!B.inIteration){be(o.IllegalContinue)}return e.finishContinueStatement(u)}function Ut(e){var u=null,n;Pe("break");if(a.charCodeAt(h)===59){me();if(!(B.inIteration||B.inSwitch)){be(o.IllegalBreak)}return e.finishBreakStatement(null)}if(D){if(!(B.inIteration||B.inSwitch)){be(o.IllegalBreak)}return e.finishBreakStatement(null)}if(y.type===t.Identifier){u=St();n="$"+u.name;if(!Object.prototype.hasOwnProperty.call(B.labelSet,n)){be(o.UnknownLabel,u.name)}}Re();if(u===null&&!(B.inIteration||B.inSwitch)){be(o.IllegalBreak)}return e.finishBreakStatement(u)}function zt(e){var u=null;Pe("return");if(!B.inFunctionBody){Se(o.IllegalReturn)}if(a.charCodeAt(h)===32){if(M(a.charCodeAt(h+1))){u=yt();Re();return e.finishReturnStatement(u)}}if(D){return e.finishReturnStatement(null)}if(!Le(";")){if(!Le("}")&&y.type!==t.EOF){u=yt()}}Re();return e.finishReturnStatement(u)}function Wt(e){var t,u;if(l){Se(o.StrictModeWith)}Pe("with");ke("(");t=yt();ke(")");u=Jt();return e.finishWithStatement(t,u)}function Vt(){var e,t=[],u,n=new Fe;if(Oe("default")){me();e=null}else{Pe("case");e=yt()}ke(":");while(A<g){if(Le("}")||Oe("default")||Oe("case")){break}u=Bt();t.push(u)}return n.finishSwitchCase(e,t)}function Yt(e){var t,u,n,r,i;Pe("switch");ke("(");t=yt();ke(")");ke("{");u=[];if(Le("}")){me();return e.finishSwitchStatement(t,u)}r=B.inSwitch;B.inSwitch=true;i=false;while(A<g){if(Le("}")){break}n=Vt();if(n.test===null){if(i){be(o.MultipleDefaultsInSwitch)}i=true}u.push(n)}B.inSwitch=r;ke("}");return e.finishSwitchStatement(t,u)}function Gt(e){var t;Pe("throw");if(D){be(o.NewlineAfterThrow)}t=yt();Re();return e.finishThrowStatement(t)}function Kt(){var e,t=[],u={},n,r,i,s=new Fe;Pe("catch");ke("(");if(Le(")")){we(y)}e=We(t);for(r=0;r<t.length;r++){n="$"+t[r].value;if(Object.prototype.hasOwnProperty.call(u,n)){Se(o.DuplicateBinding,t[r].value)}u[n]=true}if(l&&q(e.name)){Se(o.StrictCatchVariable)}ke(")");i=bt();return s.finishCatchClause(e,i)}function $t(e){var t,u=null,n=null;Pe("try");t=bt();if(Oe("catch")){u=Kt()}if(Oe("finally")){me();n=bt()}if(!u&&!n){be(o.NoCatchOrFinally)}return e.finishTryStatement(t,u,n)}function Ht(e){Pe("debugger");Re();return e.finishDebuggerStatement()}function Jt(){var e=y.type,u,n,i,s;if(e===t.EOF){we(y)}if(e===t.Punctuator&&y.value==="{"){return bt()}S=b=true;s=new Fe;if(e===t.Punctuator){switch(y.value){case";":return Ot(s);case"(":return jt(s);default:break}}else if(e===t.Keyword){switch(y.value){case"break":return Ut(s);case"continue":return qt(s);case"debugger":return Ht(s);case"do":return Rt(s);case"for":return Nt(s);case"function":return tu(s);case"if":return Mt(s);case"return":return zt(s);case"switch":return Yt(s);case"throw":return Gt(s);case"try":return $t(s);case"var":return _t(s);case"while":return Tt(s);case"with":return Wt(s);default:break}}u=yt();if(u.type===r.Identifier&&Le(":")){me();i="$"+u.name;if(Object.prototype.hasOwnProperty.call(B.labelSet,i)){be(o.Redeclaration,"Label",u.name)}B.labelSet[i]=true;n=Jt();delete B.labelSet[i];return s.finishLabeledStatement(u,n)}Re();return s.finishExpressionStatement(u)}function Xt(){var e,u=[],n,i,s,f,c,p,D,h,m=new Fe;ke("{");while(A<g){if(y.type!==t.StringLiteral){break}n=y;e=Bt();u.push(e);if(e.expression.type!==r.Literal){break}i=a.slice(n.start+1,n.end-1);if(i==="use strict"){l=true;if(s){_e(s,o.StrictOctalLiteral)}}else{if(!s&&n.octal){s=n}}}f=B.labelSet;c=B.inIteration;p=B.inSwitch;D=B.inFunctionBody;h=B.parenthesizedCount;B.labelSet={};B.inIteration=false;B.inSwitch=false;B.inFunctionBody=true;B.parenthesizedCount=0;while(A<g){if(Le("}")){break}u.push(Bt())}ke("}");B.labelSet=f;B.inIteration=c;B.inSwitch=p;B.inFunctionBody=D;B.parenthesizedCount=h;return m.finishBlockStatement(u)}function Zt(e,t,u){var n="$"+u;if(l){if(q(u)){e.stricted=t;e.message=o.StrictParamName}if(Object.prototype.hasOwnProperty.call(e.paramSet,n)){e.stricted=t;e.message=o.StrictParamDupe}}else if(!e.firstRestricted){if(q(u)){e.firstRestricted=t;e.message=o.StrictParamName}else if(N(u)){e.firstRestricted=t;e.message=o.StrictReservedWord}else if(Object.prototype.hasOwnProperty.call(e.paramSet,n)){e.stricted=t;e.message=o.StrictParamDupe}}e.paramSet[n]=true}function Qt(e){var t,u,n=[],i,o;t=y;if(t.value==="..."){u=Lt(n);Zt(e,u.argument,u.argument.name);e.params.push(u);e.defaults.push(null);return false}u=Ve(n);for(i=0;i<n.length;i++){Zt(e,n[i],n[i].value)}if(u.type===r.AssignmentPattern){o=u.right;u=u.left;++e.defaultCount}e.params.push(u);e.defaults.push(o);return!Le(")")}function eu(e){var t;t={params:[],defaultCount:0,defaults:[],firstRestricted:e};ke("(");if(!Le(")")){t.paramSet={};while(A<g){if(!Qt(t)){break}ke(",")}}ke(")");if(t.defaultCount===0){t.defaults=[]}return{params:t.params,defaults:t.defaults,stricted:t.stricted,firstRestricted:t.firstRestricted,message:t.message}}function tu(e,t){var u=null,n=[],r=[],i,s,a,f,c,p,D,h,m;m=B.allowYield;Pe("function");h=Le("*");if(h){me()}if(!t||!Le("(")){s=y;u=St();if(l){if(q(s.value)){_e(s,o.StrictFunctionName)}}else{if(q(s.value)){c=s;p=o.StrictFunctionName}else if(N(s.value)){c=s;p=o.StrictReservedWord}}}B.allowYield=!h;f=eu(c);n=f.params;r=f.defaults;a=f.stricted;c=f.firstRestricted;if(f.message){p=f.message}D=l;i=Xt();if(l&&c){we(c,p)}if(l&&a){_e(a,p)}l=D;B.allowYield=m;return e.finishFunctionDeclaration(u,n,r,i,h)}function uu(){var e,t=null,u,n,r,i,s=[],a=[],f,c,p=new Fe,D,h;h=B.allowYield;Pe("function");D=Le("*");if(D){me()}B.allowYield=!D;if(!Le("(")){e=y;t=!l&&!D&&Oe("yield")?it():St();if(l){if(q(e.value)){_e(e,o.StrictFunctionName)}}else{if(q(e.value)){n=e;r=o.StrictFunctionName}else if(N(e.value)){n=e;r=o.StrictReservedWord}}}i=eu(n);s=i.params;a=i.defaults;u=i.stricted;n=i.firstRestricted;if(i.message){r=i.message}c=l;f=Xt();if(l&&n){we(n,r)}if(l&&u){_e(u,r)}l=c;B.allowYield=h;return p.finishFunctionExpression(t,s,a,f,D)}function nu(){var e,t,u,n=false,i,s,a,l;e=new Fe;ke("{");i=[];while(!Le("}")){if(Le(";")){me()}else{s=new Fe;t=y;u=false;a=Le("[");if(Le("*")){me()}else{l=$e();if(l.name==="static"&&(He()||Le("*"))){t=y;u=true;a=Le("[");if(Le("*")){me()}else{l=$e()}}}s=Je(t,l,a,s);if(s){s["static"]=u;if(s.kind==="init"){s.kind="method"}if(!u){if(!s.computed&&(s.key.name||s.key.value.toString())==="constructor"){if(s.kind!=="method"||!s.method||s.value.generator){we(t,o.ConstructorSpecialMethod)}if(n){we(t,o.DuplicateConstructor)}else{n=true}s.kind="constructor"}}else{if(!s.computed&&(s.key.name||s.key.value.toString())==="prototype"){we(t,o.StaticPrototype)}}s.type=r.MethodDefinition;delete s.method;delete s.shorthand;i.push(s)}else{we(y)}}}me();return e.finishClassBody(i)}function ru(e){var u=null,n=null,r=new Fe,i,o=l;l=true;Pe("class");if(!e||y.type===t.Identifier){u=St()}if(Oe("extends")){me();n=Te(lt)}i=nu();l=o;return r.finishClassDeclaration(u,n,i)}function iu(){var e=null,u=null,n=new Fe,r,i=l;l=true;Pe("class");if(y.type===t.Identifier){e=St()}if(Oe("extends")){me();u=Te(lt)}r=nu();l=i;return n.finishClassExpression(e,u,r)}function ou(){var e=new Fe;if(y.type!==t.StringLiteral){be(o.InvalidModuleSpecifier)}return e.finishLiteral(me())}function su(){var e,t,u=new Fe,n;if(Oe("default")){n=new Fe;me();t=n.finishIdentifier("default")}else{t=St()}if(je("as")){me();e=it()}return u.finishExportSpecifier(t,e)}function au(e){var u=null,n,r=null,i=[];if(y.type===t.Keyword){switch(y.value){case"let":case"const":case"var":case"class":case"function":u=Bt();return e.finishExportNamedDeclaration(u,i,null)}}ke("{");while(!Le("}")){n=n||Oe("default");i.push(su());if(!Le("}")){ke(",");if(Le("}")){break}}}ke("}");if(je("from")){me();r=ou();Re()}else if(n){be(y.value?o.UnexpectedToken:o.MissingFromClause,y.value)}else{Re()}return e.finishExportNamedDeclaration(u,i,r)}function lu(e){var t=null,u=null;Pe("default");if(Oe("function")){t=tu(new Fe,true);return e.finishExportDefaultDeclaration(t)}if(Oe("class")){t=ru(true);return e.finishExportDefaultDeclaration(t)}if(je("from")){be(o.UnexpectedToken,y.value)}if(Le("{")){u=Ze()}else if(Le("[")){u=Ye()}else{u=gt()}Re();return e.finishExportDefaultDeclaration(u)}function fu(e){var t;ke("*");if(!je("from")){be(y.value?o.UnexpectedToken:o.MissingFromClause,y.value)}me();t=ou();Re();return e.finishExportAllDeclaration(t)}function cu(){var e=new Fe;if(B.inFunctionBody){be(o.IllegalExportDeclaration)}Pe("export");if(Oe("default")){return lu(e)}if(Le("*")){return fu(e)}return au(e)}function pu(){var e,t,u=new Fe;t=it();if(je("as")){me();e=St()}return u.finishImportSpecifier(e,t)}function Du(){var e=[];ke("{");while(!Le("}")){e.push(pu());if(!Le("}")){ke(",");if(Le("}")){break}}}ke("}");return e}function hu(){var e,t=new Fe;e=it();return t.finishImportDefaultSpecifier(e)}function mu(){var e,t=new Fe;ke("*");if(!je("as")){be(o.NoAsAfterImportNamespace)}me();e=it();return t.finishImportNamespaceSpecifier(e)}function du(){var e=[],u,n=new Fe;if(B.inFunctionBody){be(o.IllegalImportDeclaration)}Pe("import");if(y.type===t.StringLiteral){u=ou()}else{if(Le("{")){e=e.concat(Du())}else if(Le("*")){e.push(mu())}else if(ce(y)&&!Oe("default")){e.push(hu());if(Le(",")){me();if(Le("*")){e.push(mu())}else if(Le("{")){e=e.concat(Du())}else{we(y)}}}else{we(me())}if(!je("from")){be(y.value?o.UnexpectedToken:o.MissingFromClause,y.value)}me();u=ou()}Re();return n.finishImportDeclaration(e,u)}function Au(){var e,u=[],n,i,s;while(A<g){n=y;if(n.type!==t.StringLiteral){break}e=Bt();u.push(e);if(e.expression.type!==r.Literal){break}i=a.slice(n.start+1,n.end-1);if(i==="use strict"){l=true;if(s){_e(s,o.StrictOctalLiteral)}}else{if(!s&&n.octal){s=n}}}while(A<g){e=Bt();if(typeof e==="undefined"){break}u.push(e)}return u}function Cu(){var e,t;de();t=new Fe;e=Au();return t.finishProgram(e,B.sourceType)}function Eu(){var e,t,u,n=[];for(e=0;e<v.tokens.length;++e){t=v.tokens[e];u={type:t.type,value:t.value};if(t.regex){u.regex={pattern:t.regex.pattern,flags:t.regex.flags}}if(v.range){u.range=t.range}if(v.loc){u.loc=t.loc}n.push(u)}v.tokens=n}function Fu(e,u){var n,r;n=String;if(typeof e!=="string"&&!(e instanceof String)){e=n(e)}a=e;f=0;c=a.length>0?1:0;p=0;A=f;C=c;E=p;g=a.length;y=null;B={allowIn:true,allowYield:true,labelSet:{},inFunctionBody:false,inIteration:false,inSwitch:false,lastCommentStart:-1,curlyStack:[]};v={};u=u||{};u.tokens=true;v.tokens=[];v.tokenize=true;v.openParenToken=-1;v.openCurlyToken=-1;v.range=typeof u.range==="boolean"&&u.range;v.loc=typeof u.loc==="boolean"&&u.loc;if(typeof u.comment==="boolean"&&u.comment){v.comments=[]}if(typeof u.tolerant==="boolean"&&u.tolerant){v.errors=[]}try{de();if(y.type===t.EOF){return v.tokens}me();while(y.type!==t.EOF){try{me()}catch(i){if(v.errors){ye(i);break}else{throw i}}}Eu();r=v.tokens;if(typeof v.comments!=="undefined"){r.comments=v.comments}if(typeof v.errors!=="undefined"){r.errors=v.errors}}catch(o){throw o}finally{v={}}return r}function gu(e,t){var u,n;n=String;if(typeof e!=="string"&&!(e instanceof String)){e=n(e)}a=e;f=0;c=a.length>0?1:0;p=0;A=f;C=c;E=p;g=a.length;y=null;B={allowIn:true,allowYield:true,labelSet:{},inFunctionBody:false,inIteration:false,inSwitch:false,lastCommentStart:-1,curlyStack:[],sourceType:"script"};l=false;v={};if(typeof t!=="undefined"){v.range=typeof t.range==="boolean"&&t.range;v.loc=typeof t.loc==="boolean"&&t.loc;v.attachComment=typeof t.attachComment==="boolean"&&t.attachComment;if(v.loc&&t.source!==null&&t.source!==undefined){v.source=n(t.source)}if(typeof t.tokens==="boolean"&&t.tokens){v.tokens=[]}if(typeof t.comment==="boolean"&&t.comment){v.comments=[]}if(typeof t.tolerant==="boolean"&&t.tolerant){v.errors=[]}if(v.attachComment){v.range=true;v.comments=[];v.bottomRightStack=[];v.trailingComments=[];v.leadingComments=[]}if(t.sourceType==="module"){B.sourceType=t.sourceType;l=true}}try{u=Cu();if(typeof v.comments!=="undefined"){u.comments=v.comments}if(typeof v.tokens!=="undefined"){Eu();u.tokens=v.tokens}if(typeof v.errors!=="undefined"){u.errors=v.errors}}catch(r){throw r}finally{v={}}return u}e.version="2.6.0";e.tokenize=Fu;e.parse=gu;e.Syntax=function(){var e,t={};if(typeof Object.create==="function"){t=Object.create(null)}for(e in r){if(r.hasOwnProperty(e)){t[e]=r[e]}}if(typeof Object.freeze==="function"){Object.freeze(t)}return t}()})},{}],49:[function(t,u,n){(function(t,u){"use strict";if(typeof e==="function"&&e.amd){e(["exports"],u)}else if(typeof n!=="undefined"){u(n)}else{u(t.estraverse={})}})(this,function r(e){"use strict";var t,u,n,i,o,s,a,l,f;function c(){}u=Array.isArray;if(!u){u=function S(e){return Object.prototype.toString.call(e)==="[object Array]"}}function p(e){var t={},u,n;for(u in e){if(e.hasOwnProperty(u)){n=e[u];if(typeof n==="object"&&n!==null){t[u]=p(n)}else{t[u]=n}}}return t}function D(e){var t={},u;for(u in e){if(e.hasOwnProperty(u)){t[u]=e[u]}}return t}c(D);function h(e,t){var u,n,r,i;n=e.length;r=0;while(n){u=n>>>1;i=r+u;if(t(e[i])){n=u}else{r=i+1;n-=u+1}}return r}function m(e,t){var u,n,r,i;n=e.length;r=0;while(n){u=n>>>1;i=r+u;if(t(e[i])){r=i+1;n-=u+1}else{n=u}}return r}c(m);o=Object.create||function(){function e(){}return function(t){e.prototype=t;return new e}}();s=Object.keys||function(e){var t=[],u;for(u in e){t.push(u)}return t};function d(e,t){var u=s(t),n,r,i;for(r=0,i=u.length;r<i;r+=1){n=u[r];e[n]=t[n]}return e}t={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExportBatchSpecifier:"ExportBatchSpecifier",ExportDeclaration:"ExportDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",GeneratorExpression:"GeneratorExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MethodDefinition:"MethodDefinition",ModuleSpecifier:"ModuleSpecifier",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"};i={AssignmentExpression:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","defaults","rest","body"],AwaitExpression:["argument"],BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ClassBody:["body"],ClassDeclaration:["id","body","superClass"],ClassExpression:["id","body","superClass"],ComprehensionBlock:["left","right"],ComprehensionExpression:["blocks","filter","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExportBatchSpecifier:[],ExportDeclaration:["declaration","specifiers","source"],ExportSpecifier:["id","name"],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],FunctionDeclaration:["id","params","defaults","rest","body"],FunctionExpression:["id","params","defaults","rest","body"],GeneratorExpression:["blocks","filter","body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["id"],ImportNamespaceSpecifier:["id"],ImportSpecifier:["id","name"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MethodDefinition:["key","value"],ModuleSpecifier:[],NewExpression:["callee","arguments"],ObjectExpression:["properties"],ObjectPattern:["properties"],Program:["body"],Property:["key","value"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handlers","handler","guardedHandlers","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]};a={};l={};f={};n={Break:a,Skip:l,Remove:f};function A(e,t){this.parent=e;this.key=t}A.prototype.replace=function x(e){this.parent[this.key]=e};A.prototype.remove=function w(){if(u(this.parent)){this.parent.splice(this.key,1);return true}else{this.replace(null);return false}};function C(e,t,u,n){this.node=e;this.path=t;this.wrap=u;this.ref=n}function E(){}E.prototype.path=function _(){var e,t,n,r,i,o;function s(e,t){if(u(t)){for(n=0,r=t.length;n<r;++n){e.push(t[n])}}else{e.push(t)}}if(!this.__current.path){return null}i=[];for(e=2,t=this.__leavelist.length;e<t;++e){o=this.__leavelist[e];s(i,o.path)}s(i,this.__current.path);return i};E.prototype.type=function(){var e=this.current();return e.type||this.__current.wrap};E.prototype.parents=function k(){var e,t,u;u=[];for(e=1,t=this.__leavelist.length;e<t;++e){u.push(this.__leavelist[e].node)}return u};E.prototype.current=function I(){return this.__current.node};E.prototype.__execute=function P(e,t){var u,n;n=undefined;u=this.__current;this.__current=t;this.__state=null;if(e){n=e.call(this,t.node,this.__leavelist[this.__leavelist.length-1].node)}this.__current=u;return n};E.prototype.notify=function L(e){this.__state=e};E.prototype.skip=function(){this.notify(l)};E.prototype["break"]=function(){this.notify(a)};E.prototype.remove=function(){this.notify(f)};E.prototype.__initialize=function(e,t){this.visitor=t;this.root=e;this.__worklist=[];this.__leavelist=[];this.__current=null;this.__state=null;this.__fallback=t.fallback==="iteration";this.__keys=i;if(t.keys){this.__keys=d(o(this.__keys),t.keys)}};function F(e){if(e==null){return false}return typeof e==="object"&&typeof e.type==="string"}function g(e,u){return(e===t.ObjectExpression||e===t.ObjectPattern)&&"properties"===u}E.prototype.traverse=function O(e,t){var n,r,i,o,f,c,p,D,h,m,d,A;this.__initialize(e,t);A={};n=this.__worklist;r=this.__leavelist;n.push(new C(e,null,null,null));r.push(new C(null,null,null,null));while(n.length){i=n.pop();if(i===A){i=r.pop();c=this.__execute(t.leave,i);if(this.__state===a||c===a){return}continue}if(i.node){c=this.__execute(t.enter,i);if(this.__state===a||c===a){return}n.push(A);r.push(i);if(this.__state===l||c===l){continue}o=i.node;f=i.wrap||o.type;m=this.__keys[f];if(!m){if(this.__fallback){m=s(o)}else{throw new Error("Unknown node type "+f+".")}}D=m.length;while((D-=1)>=0){p=m[D];d=o[p];if(!d){continue}if(u(d)){h=d.length;while((h-=1)>=0){if(!d[h]){continue}if(g(f,m[D])){i=new C(d[h],[p,h],"Property",null)}else if(F(d[h])){i=new C(d[h],[p,h],null,null)}else{continue}n.push(i)}}else if(F(d)){n.push(new C(d,p,null,null))}}}}};E.prototype.replace=function j(e,t){function n(e){var t,u,n,i;if(e.ref.remove()){u=e.ref.key;i=e.ref.parent;t=r.length;while(t--){n=r[t];if(n.ref&&n.ref.parent===i){if(n.ref.key<u){break}--n.ref.key}}}}var r,i,o,c,p,D,h,m,d,E,y,B,v;this.__initialize(e,t);y={};r=this.__worklist;i=this.__leavelist;B={root:e};D=new C(e,null,null,new A(B,"root"));r.push(D);i.push(D);while(r.length){D=r.pop();if(D===y){D=i.pop();p=this.__execute(t.leave,D);if(p!==undefined&&p!==a&&p!==l&&p!==f){D.ref.replace(p)}if(this.__state===f||p===f){n(D)}if(this.__state===a||p===a){return B.root}continue}p=this.__execute(t.enter,D);if(p!==undefined&&p!==a&&p!==l&&p!==f){D.ref.replace(p);D.node=p}if(this.__state===f||p===f){n(D);D.node=null}if(this.__state===a||p===a){return B.root}o=D.node;if(!o){continue}r.push(y);i.push(D);if(this.__state===l||p===l){continue}c=D.wrap||o.type;d=this.__keys[c];if(!d){if(this.__fallback){d=s(o)}else{throw new Error("Unknown node type "+c+".")}}h=d.length;while((h-=1)>=0){v=d[h];E=o[v];if(!E){continue}if(u(E)){m=E.length;while((m-=1)>=0){if(!E[m]){continue}if(g(c,d[h])){D=new C(E[m],[v,m],"Property",new A(E,m))}else if(F(E[m])){D=new C(E[m],[v,m],null,new A(E,m))}else{continue}r.push(D)}}else if(F(E)){r.push(new C(E,v,null,new A(o,v)))}}}return B.root};function y(e,t){var u=new E;return u.traverse(e,t)}function B(e,t){var u=new E;return u.replace(e,t)}function v(e,t){var u;u=h(t,function n(t){return t.range[0]>e.range[0]});e.extendedRange=[e.range[0],e.range[1]];if(u!==t.length){e.extendedRange[1]=t[u].range[0]}u-=1;if(u>=0){e.extendedRange[0]=t[u].range[1]}return e}function b(e,t,u){var r=[],i,o,s,a;if(!e.range){throw new Error("attachComments needs range information")}if(!u.length){if(t.length){for(s=0,o=t.length;s<o;s+=1){i=p(t[s]);i.extendedRange=[0,e.range[0]];r.push(i)}e.leadingComments=r}return e}for(s=0,o=t.length;s<o;s+=1){r.push(v(p(t[s]),u))}a=0;y(e,{enter:function(e){var t;while(a<r.length){t=r[a];if(t.extendedRange[1]>e.range[0]){break}if(t.extendedRange[1]===e.range[0]){if(!e.leadingComments){e.leadingComments=[]}e.leadingComments.push(t);
r.splice(a,1)}else{a+=1}}if(a===r.length){return n.Break}if(r[a].extendedRange[0]>e.range[1]){return n.Skip}}});a=0;y(e,{leave:function(e){var t;while(a<r.length){t=r[a];if(e.range[1]<t.extendedRange[0]){break}if(e.range[1]===t.extendedRange[0]){if(!e.trailingComments){e.trailingComments=[]}e.trailingComments.push(t);r.splice(a,1)}else{a+=1}}if(a===r.length){return n.Break}if(r[a].extendedRange[0]>e.range[1]){return n.Skip}}});return e}e.version="1.8.1-dev";e.Syntax=t;e.traverse=y;e.replace=B;e.attachComments=b;e.VisitorKeys=i;e.VisitorOption=n;e.Controller=E;e.cloneEnvironment=function(){return r({})};return e})},{}],50:[function(e,t,u){arguments[4][34][0].apply(u,arguments)},{"./source-map/source-map-consumer":56,"./source-map/source-map-generator":57,"./source-map/source-node":58,"/Users/rsc/Projects/rstacruz/js2coffee/node_modules/escodegen/node_modules/source-map/lib/source-map.js":34}],51:[function(e,t,u){arguments[4][35][0].apply(u,arguments)},{"./util":59,"/Users/rsc/Projects/rstacruz/js2coffee/node_modules/escodegen/node_modules/source-map/lib/source-map/array-set.js":35,amdefine:60}],52:[function(e,t,u){arguments[4][36][0].apply(u,arguments)},{"./base64":53,"/Users/rsc/Projects/rstacruz/js2coffee/node_modules/escodegen/node_modules/source-map/lib/source-map/base64-vlq.js":36,amdefine:60}],53:[function(e,t,u){arguments[4][37][0].apply(u,arguments)},{"/Users/rsc/Projects/rstacruz/js2coffee/node_modules/escodegen/node_modules/source-map/lib/source-map/base64.js":37,amdefine:60}],54:[function(e,t,u){arguments[4][39][0].apply(u,arguments)},{"/Users/rsc/Projects/rstacruz/js2coffee/node_modules/escodegen/node_modules/source-map/lib/source-map/binary-search.js":39,amdefine:60}],55:[function(e,t,u){arguments[4][41][0].apply(u,arguments)},{"./util":59,"/Users/rsc/Projects/rstacruz/js2coffee/node_modules/escodegen/node_modules/source-map/lib/source-map/mapping-list.js":41,amdefine:60}],56:[function(e,t,u){if(typeof n!=="function"){var n=e("amdefine")(t,e)}n(function(e,t,u){var n=e("./util");var r=e("./binary-search");var i=e("./array-set").ArraySet;var o=e("./base64-vlq");function s(e){var t=e;if(typeof e==="string"){t=JSON.parse(e.replace(/^\)\]\}'/,""))}var u=n.getArg(t,"version");var r=n.getArg(t,"sources");var o=n.getArg(t,"names",[]);var s=n.getArg(t,"sourceRoot",null);var a=n.getArg(t,"sourcesContent",null);var l=n.getArg(t,"mappings");var f=n.getArg(t,"file",null);if(u!=this._version){throw new Error("Unsupported version: "+u)}r=r.map(n.normalize);this._names=i.fromArray(o,true);this._sources=i.fromArray(r,true);this.sourceRoot=s;this.sourcesContent=a;this._mappings=l;this.file=f}s.fromSourceMap=function a(e){var t=Object.create(s.prototype);t._names=i.fromArray(e._names.toArray(),true);t._sources=i.fromArray(e._sources.toArray(),true);t.sourceRoot=e._sourceRoot;t.sourcesContent=e._generateSourcesContent(t._sources.toArray(),t.sourceRoot);t.file=e._file;t.__generatedMappings=e._mappings.toArray().slice();t.__originalMappings=e._mappings.toArray().slice().sort(n.compareByOriginalPositions);return t};s.prototype._version=3;Object.defineProperty(s.prototype,"sources",{get:function(){return this._sources.toArray().map(function(e){return this.sourceRoot!=null?n.join(this.sourceRoot,e):e},this)}});s.prototype.__generatedMappings=null;Object.defineProperty(s.prototype,"_generatedMappings",{get:function(){if(!this.__generatedMappings){this.__generatedMappings=[];this.__originalMappings=[];this._parseMappings(this._mappings,this.sourceRoot)}return this.__generatedMappings}});s.prototype.__originalMappings=null;Object.defineProperty(s.prototype,"_originalMappings",{get:function(){if(!this.__originalMappings){this.__generatedMappings=[];this.__originalMappings=[];this._parseMappings(this._mappings,this.sourceRoot)}return this.__originalMappings}});s.prototype._nextCharIsMappingSeparator=function l(e){var t=e.charAt(0);return t===";"||t===","};s.prototype._parseMappings=function f(e,t){var u=1;var r=0;var i=0;var s=0;var a=0;var l=0;var f=e;var c={};var p;while(f.length>0){if(f.charAt(0)===";"){u++;f=f.slice(1);r=0}else if(f.charAt(0)===","){f=f.slice(1)}else{p={};p.generatedLine=u;o.decode(f,c);p.generatedColumn=r+c.value;r=p.generatedColumn;f=c.rest;if(f.length>0&&!this._nextCharIsMappingSeparator(f)){o.decode(f,c);p.source=this._sources.at(a+c.value);a+=c.value;f=c.rest;if(f.length===0||this._nextCharIsMappingSeparator(f)){throw new Error("Found a source, but no line and column")}o.decode(f,c);p.originalLine=i+c.value;i=p.originalLine;p.originalLine+=1;f=c.rest;if(f.length===0||this._nextCharIsMappingSeparator(f)){throw new Error("Found a source and line, but no column")}o.decode(f,c);p.originalColumn=s+c.value;s=p.originalColumn;f=c.rest;if(f.length>0&&!this._nextCharIsMappingSeparator(f)){o.decode(f,c);p.name=this._names.at(l+c.value);l+=c.value;f=c.rest}}this.__generatedMappings.push(p);if(typeof p.originalLine==="number"){this.__originalMappings.push(p)}}}this.__generatedMappings.sort(n.compareByGeneratedPositions);this.__originalMappings.sort(n.compareByOriginalPositions)};s.prototype._findMapping=function c(e,t,u,n,i){if(e[u]<=0){throw new TypeError("Line must be greater than or equal to 1, got "+e[u])}if(e[n]<0){throw new TypeError("Column must be greater than or equal to 0, got "+e[n])}return r.search(e,t,i)};s.prototype.computeColumnSpans=function p(){for(var e=0;e<this._generatedMappings.length;++e){var t=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var u=this._generatedMappings[e+1];if(t.generatedLine===u.generatedLine){t.lastGeneratedColumn=u.generatedColumn-1;continue}}t.lastGeneratedColumn=Infinity}};s.prototype.originalPositionFor=function D(e){var t={generatedLine:n.getArg(e,"line"),generatedColumn:n.getArg(e,"column")};var u=this._findMapping(t,this._generatedMappings,"generatedLine","generatedColumn",n.compareByGeneratedPositions);if(u>=0){var r=this._generatedMappings[u];if(r.generatedLine===t.generatedLine){var i=n.getArg(r,"source",null);if(i!=null&&this.sourceRoot!=null){i=n.join(this.sourceRoot,i)}return{source:i,line:n.getArg(r,"originalLine",null),column:n.getArg(r,"originalColumn",null),name:n.getArg(r,"name",null)}}}return{source:null,line:null,column:null,name:null}};s.prototype.sourceContentFor=function h(e){if(!this.sourcesContent){return null}if(this.sourceRoot!=null){e=n.relative(this.sourceRoot,e)}if(this._sources.has(e)){return this.sourcesContent[this._sources.indexOf(e)]}var t;if(this.sourceRoot!=null&&(t=n.urlParse(this.sourceRoot))){var u=e.replace(/^file:\/\//,"");if(t.scheme=="file"&&this._sources.has(u)){return this.sourcesContent[this._sources.indexOf(u)]}if((!t.path||t.path=="/")&&this._sources.has("/"+e)){return this.sourcesContent[this._sources.indexOf("/"+e)]}}throw new Error('"'+e+'" is not in the SourceMap.')};s.prototype.generatedPositionFor=function m(e){var t={source:n.getArg(e,"source"),originalLine:n.getArg(e,"line"),originalColumn:n.getArg(e,"column")};if(this.sourceRoot!=null){t.source=n.relative(this.sourceRoot,t.source)}var u=this._findMapping(t,this._originalMappings,"originalLine","originalColumn",n.compareByOriginalPositions);if(u>=0){var r=this._originalMappings[u];return{line:n.getArg(r,"generatedLine",null),column:n.getArg(r,"generatedColumn",null),lastColumn:n.getArg(r,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}};s.prototype.allGeneratedPositionsFor=function d(e){var t={source:n.getArg(e,"source"),originalLine:n.getArg(e,"line"),originalColumn:Infinity};if(this.sourceRoot!=null){t.source=n.relative(this.sourceRoot,t.source)}var u=[];var r=this._findMapping(t,this._originalMappings,"originalLine","originalColumn",n.compareByOriginalPositions);if(r>=0){var i=this._originalMappings[r];while(i&&i.originalLine===t.originalLine){u.push({line:n.getArg(i,"generatedLine",null),column:n.getArg(i,"generatedColumn",null),lastColumn:n.getArg(i,"lastGeneratedColumn",null)});i=this._originalMappings[--r]}}return u.reverse()};s.GENERATED_ORDER=1;s.ORIGINAL_ORDER=2;s.prototype.eachMapping=function A(e,t,u){var r=t||null;var i=u||s.GENERATED_ORDER;var o;switch(i){case s.GENERATED_ORDER:o=this._generatedMappings;break;case s.ORIGINAL_ORDER:o=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var a=this.sourceRoot;o.map(function(e){var t=e.source;if(t!=null&&a!=null){t=n.join(a,t)}return{source:t,generatedLine:e.generatedLine,generatedColumn:e.generatedColumn,originalLine:e.originalLine,originalColumn:e.originalColumn,name:e.name}}).forEach(e,r)};t.SourceMapConsumer=s})},{"./array-set":51,"./base64-vlq":52,"./binary-search":54,"./util":59,amdefine:60}],57:[function(e,t,u){arguments[4][43][0].apply(u,arguments)},{"./array-set":51,"./base64-vlq":52,"./mapping-list":55,"./util":59,"/Users/rsc/Projects/rstacruz/js2coffee/node_modules/escodegen/node_modules/source-map/lib/source-map/source-map-generator.js":43,amdefine:60}],58:[function(e,t,u){arguments[4][44][0].apply(u,arguments)},{"./source-map-generator":57,"./util":59,"/Users/rsc/Projects/rstacruz/js2coffee/node_modules/escodegen/node_modules/source-map/lib/source-map/source-node.js":44,amdefine:60}],59:[function(e,t,u){arguments[4][45][0].apply(u,arguments)},{"/Users/rsc/Projects/rstacruz/js2coffee/node_modules/escodegen/node_modules/source-map/lib/source-map/util.js":45,amdefine:60}],60:[function(e,t,u){(function(u,n){"use strict";function r(t,r){"use strict";var i={},o={},s=false,a=e("path"),l,f;function c(e){var t,u;for(t=0;e[t];t+=1){u=e[t];if(u==="."){e.splice(t,1);t-=1}else if(u===".."){if(t===1&&(e[2]===".."||e[0]==="..")){break}else if(t>0){e.splice(t-1,2);t-=2}}}}function p(e,t){var u;if(e&&e.charAt(0)==="."){if(t){u=t.split("/");u=u.slice(0,u.length-1);u=u.concat(e.split("/"));c(u);e=u.join("/")}}return e}function D(e){return function(t){return p(t,e)}}function h(e){function t(t){o[e]=t}t.fromText=function(e,t){throw new Error("amdefine does not implement load.fromText")};return t}l=function(e,t,n,r){function i(i,o){if(typeof i==="string"){return f(e,t,n,i,r)}else{i=i.map(function(u){return f(e,t,n,u,r)});if(o){u.nextTick(function(){o.apply(null,i)})}}}i.toUrl=function(e){if(e.indexOf(".")===0){return p(e,a.dirname(n.filename))}else{return e}};return i};r=r||function A(){return t.require.apply(t,arguments)};function m(e,u,i){var a,f,c,p;if(e){f=o[e]={};c={id:e,uri:n,exports:f};a=l(r,f,c,e)}else{if(s){throw new Error("amdefine with no module ID cannot be called more than once per file.")}s=true;f=t.exports;c=t;a=l(r,f,c,t.id)}if(u){u=u.map(function(e){return a(e)})}if(typeof i==="function"){p=i.apply(c.exports,u)}else{p=i}if(p!==undefined){c.exports=p;if(e){o[e]=c.exports}}}f=function(e,t,u,n,r){var s=n.indexOf("!"),a=n,c,d;if(s===-1){n=p(n,r);if(n==="require"){return l(e,t,u,r)}else if(n==="exports"){return t}else if(n==="module"){return u}else if(o.hasOwnProperty(n)){return o[n]}else if(i[n]){m.apply(null,i[n]);return o[n]}else{if(e){return e(a)}else{throw new Error("No module with ID: "+n)}}}else{c=n.substring(0,s);n=n.substring(s+1,n.length);d=f(e,t,u,c,r);if(d.normalize){n=d.normalize(n,D(r))}else{n=p(n,r)}if(o[n]){return o[n]}else{d.load(n,l(e,t,u,r),h(n),{});return o[n]}}};function d(e,t,u){if(Array.isArray(e)){u=t;t=e;e=undefined}else if(typeof e!=="string"){u=e;e=t=undefined}if(t&&!Array.isArray(t)){u=t;t=undefined}if(!t){t=["require","exports","module"]}if(e){i[e]=[e,t,u]}else{m(e,t,u)}}d.require=function(e){if(o[e]){return o[e]}if(i[e]){m.apply(null,i[e]);return o[e]}};d.amd={};return d}t.exports=r}).call(this,e("_process"),"/node_modules/source-map/node_modules/amdefine/amdefine.js")},{_process:26,path:25}],61:[function(e,t,u){t.exports={name:"js2coffee",version:"2.2.0",description:"JavaScript to CoffeeScript compiler",homepage:"http://js2.coffee",main:"dist/js2coffee.js",keywords:["javascript","coffeescript","language","compiler"],scripts:{test:"mocha",autotest:"mocha -R min -b --watch",prepublish:"mocha >/dev/null && make -B dist"},author:"Rico Sta. Cruz <hi@ricostacruz.com>",license:"MIT",bugs:{url:"https://github.com/js2coffee/js2coffee/issues"},repository:{type:"git",url:"https://github.com/js2coffee/js2coffee.git"},browser:"js2coffee.coffee",bin:{js2coffee:"./bin/js2coffee"},dependencies:{escodegen:"^1.6.0",esprima:"^2.5.0",estraverse:"^4.1.1",minimist:"^1.1.0","read-input":"^0.3.1","source-map":"^0.5.2"},devDependencies:{browserify:"13.0.0",chai:"^3.4.0","coffee-script":"^1.8.0",coffeeify:"^2.0.1",coffeelint:"^1.6.0",glob:"^7.0.0","js-yaml":"^3.2.1",mocha:"^2.1.0","mocha-clean":"^1.0.0","uglify-js":"^2.4.16",underscore:"^1.7.0"}}},{}]},{},[1])(1)});

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],37:[function(require,module,exports){
(function (process){
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

// resolves . and .. elements in a path array with directory names there
// must be no slashes, empty elements, or device names (c:\) in the array
// (so also no leading and trailing slashes - it does not distinguish
// relative and absolute paths)
function normalizeArray(parts, allowAboveRoot) {
  // if the path tries to go above the root, `up` ends up > 0
  var up = 0;
  for (var i = parts.length - 1; i >= 0; i--) {
    var last = parts[i];
    if (last === '.') {
      parts.splice(i, 1);
    } else if (last === '..') {
      parts.splice(i, 1);
      up++;
    } else if (up) {
      parts.splice(i, 1);
      up--;
    }
  }

  // if the path is allowed to go above the root, restore leading ..s
  if (allowAboveRoot) {
    for (; up--; up) {
      parts.unshift('..');
    }
  }

  return parts;
}

// Split a filename into [root, dir, basename, ext], unix version
// 'root' is just a slash, or nothing.
var splitPathRe =
    /^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;
var splitPath = function(filename) {
  return splitPathRe.exec(filename).slice(1);
};

// path.resolve([from ...], to)
// posix version
exports.resolve = function() {
  var resolvedPath = '',
      resolvedAbsolute = false;

  for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {
    var path = (i >= 0) ? arguments[i] : process.cwd();

    // Skip empty and invalid entries
    if (typeof path !== 'string') {
      throw new TypeError('Arguments to path.resolve must be strings');
    } else if (!path) {
      continue;
    }

    resolvedPath = path + '/' + resolvedPath;
    resolvedAbsolute = path.charAt(0) === '/';
  }

  // At this point the path should be resolved to a full absolute path, but
  // handle relative paths to be safe (might happen when process.cwd() fails)

  // Normalize the path
  resolvedPath = normalizeArray(filter(resolvedPath.split('/'), function(p) {
    return !!p;
  }), !resolvedAbsolute).join('/');

  return ((resolvedAbsolute ? '/' : '') + resolvedPath) || '.';
};

// path.normalize(path)
// posix version
exports.normalize = function(path) {
  var isAbsolute = exports.isAbsolute(path),
      trailingSlash = substr(path, -1) === '/';

  // Normalize the path
  path = normalizeArray(filter(path.split('/'), function(p) {
    return !!p;
  }), !isAbsolute).join('/');

  if (!path && !isAbsolute) {
    path = '.';
  }
  if (path && trailingSlash) {
    path += '/';
  }

  return (isAbsolute ? '/' : '') + path;
};

// posix version
exports.isAbsolute = function(path) {
  return path.charAt(0) === '/';
};

// posix version
exports.join = function() {
  var paths = Array.prototype.slice.call(arguments, 0);
  return exports.normalize(filter(paths, function(p, index) {
    if (typeof p !== 'string') {
      throw new TypeError('Arguments to path.join must be strings');
    }
    return p;
  }).join('/'));
};


// path.relative(from, to)
// posix version
exports.relative = function(from, to) {
  from = exports.resolve(from).substr(1);
  to = exports.resolve(to).substr(1);

  function trim(arr) {
    var start = 0;
    for (; start < arr.length; start++) {
      if (arr[start] !== '') break;
    }

    var end = arr.length - 1;
    for (; end >= 0; end--) {
      if (arr[end] !== '') break;
    }

    if (start > end) return [];
    return arr.slice(start, end - start + 1);
  }

  var fromParts = trim(from.split('/'));
  var toParts = trim(to.split('/'));

  var length = Math.min(fromParts.length, toParts.length);
  var samePartsLength = length;
  for (var i = 0; i < length; i++) {
    if (fromParts[i] !== toParts[i]) {
      samePartsLength = i;
      break;
    }
  }

  var outputParts = [];
  for (var i = samePartsLength; i < fromParts.length; i++) {
    outputParts.push('..');
  }

  outputParts = outputParts.concat(toParts.slice(samePartsLength));

  return outputParts.join('/');
};

exports.sep = '/';
exports.delimiter = ':';

exports.dirname = function(path) {
  var result = splitPath(path),
      root = result[0],
      dir = result[1];

  if (!root && !dir) {
    // No dirname whatsoever
    return '.';
  }

  if (dir) {
    // It has a dirname, strip trailing slash
    dir = dir.substr(0, dir.length - 1);
  }

  return root + dir;
};


exports.basename = function(path, ext) {
  var f = splitPath(path)[2];
  // TODO: make this comparison case-insensitive on windows?
  if (ext && f.substr(-1 * ext.length) === ext) {
    f = f.substr(0, f.length - ext.length);
  }
  return f;
};


exports.extname = function(path) {
  return splitPath(path)[3];
};

function filter (xs, f) {
    if (xs.filter) return xs.filter(f);
    var res = [];
    for (var i = 0; i < xs.length; i++) {
        if (f(xs[i], i, xs)) res.push(xs[i]);
    }
    return res;
}

// String.prototype.substr - negative index don't work in IE8
var substr = 'ab'.substr(-1) === 'b'
    ? function (str, start, len) { return str.substr(start, len) }
    : function (str, start, len) {
        if (start < 0) start = str.length + start;
        return str.substr(start, len);
    }
;

}).call(this,require('_process'))

},{"_process":38}],38:[function(require,module,exports){
// shim for using process in browser

var process = module.exports = {};
var queue = [];
var draining = false;
var currentQueue;
var queueIndex = -1;

function cleanUpNextTick() {
    draining = false;
    if (currentQueue.length) {
        queue = currentQueue.concat(queue);
    } else {
        queueIndex = -1;
    }
    if (queue.length) {
        drainQueue();
    }
}

function drainQueue() {
    if (draining) {
        return;
    }
    var timeout = setTimeout(cleanUpNextTick);
    draining = true;

    var len = queue.length;
    while(len) {
        currentQueue = queue;
        queue = [];
        while (++queueIndex < len) {
            if (currentQueue) {
                currentQueue[queueIndex].run();
            }
        }
        queueIndex = -1;
        len = queue.length;
    }
    currentQueue = null;
    draining = false;
    clearTimeout(timeout);
}

process.nextTick = function (fun) {
    var args = new Array(arguments.length - 1);
    if (arguments.length > 1) {
        for (var i = 1; i < arguments.length; i++) {
            args[i - 1] = arguments[i];
        }
    }
    queue.push(new Item(fun, args));
    if (queue.length === 1 && !draining) {
        setTimeout(drainQueue, 0);
    }
};

// v8 likes predictible objects
function Item(fun, array) {
    this.fun = fun;
    this.array = array;
}
Item.prototype.run = function () {
    this.fun.apply(null, this.array);
};
process.title = 'browser';
process.browser = true;
process.env = {};
process.argv = [];
process.version = ''; // empty string to avoid regexp issues
process.versions = {};

function noop() {}

process.on = noop;
process.addListener = noop;
process.once = noop;
process.off = noop;
process.removeListener = noop;
process.removeAllListeners = noop;
process.emit = noop;

process.binding = function (name) {
    throw new Error('process.binding is not supported');
};

process.cwd = function () { return '/' };
process.chdir = function (dir) {
    throw new Error('process.chdir is not supported');
};
process.umask = function() { return 0; };

},{}],39:[function(require,module,exports){
module.exports = require('./lib/spine');
},{"./lib/spine":43}],40:[function(require,module,exports){
// Generated by CoffeeScript 1.10.0
(function() {
  var Spine;

  Spine = this.Spine || require('spine');

  Spine.Model.Local = {
    extended: function() {
      var e, error, testLocalStorage;
      testLocalStorage = 'spine' + new Date().getTime();
      try {
        localStorage.setItem(testLocalStorage, testLocalStorage);
        localStorage.removeItem(testLocalStorage);
      } catch (error) {
        e = error;
        return;
      }
      this.change(this.saveLocal);
      return this.fetch(this.loadLocal);
    },
    saveLocal: function() {
      var result;
      result = JSON.stringify(this);
      return localStorage[this.className] = result;
    },
    loadLocal: function(options) {
      var result;
      if (options == null) {
        options = {};
      }
      if (!options.hasOwnProperty('clear')) {
        options.clear = true;
      }
      result = localStorage[this.className];
      return this.refresh(result || [], options);
    }
  };

  if (typeof module !== "undefined" && module !== null) {
    module.exports = Spine.Model.Local;
  }

}).call(this);



},{"spine":39}],41:[function(require,module,exports){
// Generated by CoffeeScript 1.10.0
(function() {
  var $, Spine,
    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    hasProp = {}.hasOwnProperty,
    slice = [].slice,
    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

  Spine = this.Spine || require('spine');

  $ = Spine.$;

  Spine.Manager = (function(superClass) {
    extend(Manager, superClass);

    Manager.include(Spine.Events);

    function Manager() {
      this.controllers = [];
      this.bind('change', this.change);
      this.add.apply(this, arguments);
    }

    Manager.prototype.add = function() {
      var cont, controllers, i, len, results;
      controllers = 1 <= arguments.length ? slice.call(arguments, 0) : [];
      results = [];
      for (i = 0, len = controllers.length; i < len; i++) {
        cont = controllers[i];
        results.push(this.addOne(cont));
      }
      return results;
    };

    Manager.prototype.addOne = function(controller) {
      controller.bind('active', (function(_this) {
        return function() {
          var args;
          args = 1 <= arguments.length ? slice.call(arguments, 0) : [];
          return _this.trigger.apply(_this, ['change', controller].concat(slice.call(args)));
        };
      })(this));
      controller.bind('release', (function(_this) {
        return function() {
          var c;
          return _this.controllers = (function() {
            var i, len, ref, results;
            ref = this.controllers;
            results = [];
            for (i = 0, len = ref.length; i < len; i++) {
              c = ref[i];
              if (c !== controller) {
                results.push(c);
              }
            }
            return results;
          }).call(_this);
        };
      })(this));
      return this.controllers.push(controller);
    };

    Manager.prototype.deactivate = function() {
      return this.trigger.apply(this, ['change', false].concat(slice.call(arguments)));
    };

    Manager.prototype.change = function() {
      var args, cont, current, i, len, ref;
      current = arguments[0], args = 2 <= arguments.length ? slice.call(arguments, 1) : [];
      ref = this.controllers;
      for (i = 0, len = ref.length; i < len; i++) {
        cont = ref[i];
        if (cont !== current) {
          cont.deactivate.apply(cont, args);
        }
      }
      if (current) {
        return current.activate.apply(current, args);
      }
    };

    return Manager;

  })(Spine.Module);

  Spine.Controller.include({
    active: function() {
      var args;
      args = 1 <= arguments.length ? slice.call(arguments, 0) : [];
      if (typeof args[0] === 'function') {
        this.bind('active', args[0]);
      } else {
        args.unshift('active');
        this.trigger.apply(this, args);
      }
      return this;
    },
    isActive: function() {
      return this.el.hasClass('active');
    },
    activate: function() {
      this.el.addClass('active');
      return this;
    },
    deactivate: function() {
      this.el.removeClass('active');
      return this;
    }
  });

  Spine.Stack = (function(superClass) {
    extend(Stack, superClass);

    Stack.prototype.controllers = {};

    Stack.prototype.routes = {};

    Stack.prototype.className = 'spine stack';

    function Stack() {
      this.release = bind(this.release, this);
      var fn, key, ref, ref1, ref2, value;
      Stack.__super__.constructor.apply(this, arguments);
      this.manager = new Spine.Manager;
      this.router = (ref = Spine.Route) != null ? ref.create() : void 0;
      ref1 = this.controllers;
      for (key in ref1) {
        value = ref1[key];
        if (this[key] != null) {
          throw Error("'@" + key + "' already assigned");
        }
        this[key] = new value({
          stack: this
        });
        this.add(this[key]);
      }
      ref2 = this.routes;
      fn = (function(_this) {
        return function(key, value) {
          var callback;
          if (typeof value === 'function') {
            callback = value;
          }
          callback || (callback = function() {
            var ref3;
            return (ref3 = _this[value]).active.apply(ref3, arguments);
          });
          return _this.route(key, callback);
        };
      })(this);
      for (key in ref2) {
        value = ref2[key];
        fn(key, value);
      }
      if (this["default"]) {
        this[this["default"]].active();
      }
    }

    Stack.prototype.add = function(controller) {
      this.manager.add(controller);
      return this.append(controller);
    };

    Stack.prototype.release = function() {
      var ref;
      if ((ref = this.router) != null) {
        ref.destroy();
      }
      return Stack.__super__.release.apply(this, arguments);
    };

    return Stack;

  })(Spine.Controller);

  if (typeof module !== "undefined" && module !== null) {
    module.exports = Spine.Manager;
  }

  if (typeof module !== "undefined" && module !== null) {
    module.exports.Stack = Spine.Stack;
  }

}).call(this);



},{"spine":39}],42:[function(require,module,exports){
// Generated by CoffeeScript 1.10.0
(function() {
  var $, Path, Route, Spine, escapeRegExp, hashStrip, namedParam, splatParam,
    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    hasProp = {}.hasOwnProperty,
    slice = [].slice;

  Spine = this.Spine || require('spine');

  $ = Spine.$;

  hashStrip = /^#*/;

  namedParam = /:([\w\d]+)/g;

  splatParam = /\*([\w\d]+)/g;

  escapeRegExp = /[-[\]{}()+?.,\\^$|#\s]/g;

  Path = (function(superClass) {
    extend(Path, superClass);

    function Path(path, callback) {
      var match;
      this.names = [];
      this.path = path;
      this.callback = callback;
      if (typeof path === 'string') {
        namedParam.lastIndex = 0;
        while ((match = namedParam.exec(path)) !== null) {
          this.names.push(match[1]);
        }
        splatParam.lastIndex = 0;
        while ((match = splatParam.exec(path)) !== null) {
          this.names.push(match[1]);
        }
        path = path.replace(escapeRegExp, '\\$&').replace(namedParam, '([^\/]*)').replace(splatParam, '(.*?)');
        this.route = new RegExp("^" + path + "$");
      } else {
        this.route = path;
      }
    }

    Path.prototype.match = function(path, options) {
      var i, j, len, match, param, params;
      if (options == null) {
        options = {};
      }
      if (!(match = this.route.exec(path))) {
        return false;
      }
      options.match = match;
      params = match.slice(1);
      if (this.names.length) {
        for (i = j = 0, len = params.length; j < len; i = ++j) {
          param = params[i];
          options[this.names[i]] = param;
        }
      }
      Route.trigger('before', this);
      return this.callback.call(null, options) !== false;
    };

    return Path;

  })(Spine.Module);

  Route = (function(superClass) {
    var ref;

    extend(Route, superClass);

    Route.extend(Spine.Events);

    Route.historySupport = ((ref = window.history) != null ? ref.pushState : void 0) != null;

    Route.options = {
      trigger: true,
      history: false,
      shim: false,
      replace: false,
      redirect: false
    };

    Route.routers = [];

    Route.setup = function(options) {
      if (options == null) {
        options = {};
      }
      this.options = $.extend({}, this.options, options);
      if (this.options.history) {
        this.history = this.historySupport && this.options.history;
      }
      if (this.options.shim) {
        return;
      }
      if (this.history) {
        $(window).bind('popstate', this.change);
      } else {
        $(window).bind('hashchange', this.change);
      }
      return this.change();
    };

    Route.unbind = function() {
      var unbindResult;
      unbindResult = Spine.Events.unbind.apply(this, arguments);
      if (arguments.length > 0) {
        return unbindResult;
      }
      if (this.options.shim) {
        return;
      }
      if (this.history) {
        return $(window).unbind('popstate', this.change);
      } else {
        return $(window).unbind('hashchange', this.change);
      }
    };

    Route.navigate = function() {
      var args, lastArg, options, path, routes;
      args = 1 <= arguments.length ? slice.call(arguments, 0) : [];
      options = {};
      lastArg = args[args.length - 1];
      if (typeof lastArg === 'object') {
        options = args.pop();
      } else if (typeof lastArg === 'boolean') {
        options.trigger = args.pop();
      }
      options = $.extend({}, this.options, options);
      path = args.join('/');
      if (this.path === path) {
        return;
      }
      this.path = path;
      if (options.trigger) {
        this.trigger('navigate', this.path);
        routes = this.matchRoutes(this.path, options);
        if (!routes.length) {
          if (typeof options.redirect === 'function') {
            return options.redirect.apply(this, [this.path, options]);
          } else {
            if (options.redirect === true) {
              this.redirect(this.path);
            }
          }
        }
      }
      if (options.shim) {
        return true;
      } else if (this.history && options.replace) {
        return history.replaceState({}, document.title, this.path);
      } else if (this.history) {
        return history.pushState({}, document.title, this.path);
      } else {
        return window.location.hash = this.path;
      }
    };

    Route.create = function() {
      var router;
      router = new this;
      this.routers.push(router);
      return router;
    };

    Route.add = function(path, callback) {
      return this.router.add(path, callback);
    };

    Route.prototype.add = function(path, callback) {
      var key, results, value;
      if (typeof path === 'object' && !(path instanceof RegExp)) {
        results = [];
        for (key in path) {
          value = path[key];
          results.push(this.add(key, value));
        }
        return results;
      } else {
        return this.routes.push(new Path(path, callback));
      }
    };

    Route.prototype.destroy = function() {
      var r;
      this.routes.length = 0;
      return this.constructor.routers = (function() {
        var j, len, ref1, results;
        ref1 = this.constructor.routers;
        results = [];
        for (j = 0, len = ref1.length; j < len; j++) {
          r = ref1[j];
          if (r !== this) {
            results.push(r);
          }
        }
        return results;
      }).call(this);
    };

    Route.getPath = function() {
      var path;
      if (this.history) {
        path = window.location.pathname;
        if (path.substr(0, 1) !== '/') {
          path = '/' + path;
        }
      } else {
        path = window.location.hash;
        path = path.replace(hashStrip, '');
      }
      return path;
    };

    Route.getHost = function() {
      return window.location.protocol + "//" + window.location.host;
    };

    Route.change = function() {
      var path;
      path = Route.getPath();
      if (path === Route.path) {
        return;
      }
      Route.path = path;
      return Route.matchRoutes(Route.path);
    };

    Route.matchRoutes = function(path, options) {
      var j, len, match, matches, ref1, router;
      matches = [];
      ref1 = this.routers.concat([this.router]);
      for (j = 0, len = ref1.length; j < len; j++) {
        router = ref1[j];
        match = router.matchRoute(path, options);
        if (match) {
          matches.push(match);
        }
      }
      if (matches.length) {
        this.trigger('change', matches, path);
      }
      return matches;
    };

    Route.redirect = function(path) {
      return window.location = path;
    };

    function Route() {
      this.routes = [];
    }

    Route.prototype.matchRoute = function(path, options) {
      var j, len, ref1, route;
      ref1 = this.routes;
      for (j = 0, len = ref1.length; j < len; j++) {
        route = ref1[j];
        if (route.match(path, options)) {
          return route;
        }
      }
    };

    Route.prototype.trigger = function() {
      var args, ref1;
      args = 1 <= arguments.length ? slice.call(arguments, 0) : [];
      args.splice(1, 0, this);
      return (ref1 = this.constructor).trigger.apply(ref1, args);
    };

    return Route;

  })(Spine.Module);

  Route.router = new Route;

  Spine.Controller.include({
    route: function(path, callback) {
      if (this.router instanceof Spine.Route) {
        return this.router.add(path, this.proxy(callback));
      } else {
        return Spine.Route.add(path, this.proxy(callback));
      }
    },
    routes: function(routes) {
      var key, results, value;
      results = [];
      for (key in routes) {
        value = routes[key];
        results.push(this.route(key, value));
      }
      return results;
    },
    navigate: function() {
      return Spine.Route.navigate.apply(Spine.Route, arguments);
    }
  });

  Route.Path = Path;

  Spine.Route = Route;

  if (typeof module !== "undefined" && module !== null) {
    module.exports = Route;
  }

}).call(this);



},{"spine":39}],43:[function(require,module,exports){
// Generated by CoffeeScript 1.10.0

/*
Spine.js MVC library
Released under the MIT License
 */

(function() {
  var $, Controller, Events, Log, Model, Module, Spine, createObject, makeArray, moduleKeywords,
    slice = [].slice,
    indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; },
    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    hasProp = {}.hasOwnProperty,
    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

  Events = {
    bind: function(ev, callback) {
      var base, evs, j, len, name;
      evs = ev.split(' ');
      if (!this.hasOwnProperty('_callbacks')) {
        this._callbacks || (this._callbacks = {});
      }
      for (j = 0, len = evs.length; j < len; j++) {
        name = evs[j];
        (base = this._callbacks)[name] || (base[name] = []);
        this._callbacks[name].push(callback);
      }
      return this;
    },
    one: function(ev, callback) {
      var handler;
      return this.bind(ev, handler = function() {
        this.unbind(ev, handler);
        return callback.apply(this, arguments);
      });
    },
    trigger: function() {
      var args, callback, ev, j, len, list, ref;
      args = 1 <= arguments.length ? slice.call(arguments, 0) : [];
      ev = args.shift();
      list = (ref = this._callbacks) != null ? ref[ev] : void 0;
      if (!list) {
        return;
      }
      for (j = 0, len = list.length; j < len; j++) {
        callback = list[j];
        if (callback.apply(this, args) === false) {
          break;
        }
      }
      return true;
    },
    listenTo: function(obj, ev, callback) {
      obj.bind(ev, callback);
      this.listeningTo || (this.listeningTo = []);
      this.listeningTo.push({
        obj: obj,
        ev: ev,
        callback: callback
      });
      return this;
    },
    listenToOnce: function(obj, ev, callback) {
      var handler, listeningToOnce;
      listeningToOnce = this.listeningToOnce || (this.listeningToOnce = []);
      obj.bind(ev, handler = function() {
        var i, idx, j, len, lt;
        idx = -1;
        for (i = j = 0, len = listeningToOnce.length; j < len; i = ++j) {
          lt = listeningToOnce[i];
          if (lt.obj === obj) {
            if (lt.ev === ev && lt.callback === handler) {
              idx = i;
            }
          }
        }
        obj.unbind(ev, handler);
        if (idx !== -1) {
          listeningToOnce.splice(idx, 1);
        }
        return callback.apply(this, arguments);
      });
      listeningToOnce.push({
        obj: obj,
        ev: ev,
        callback: handler
      });
      return this;
    },
    stopListening: function(obj, events, callback) {
      var e, ev, evts, idx, j, k, l, len, len1, len2, len3, listeningTo, lt, m, n, ref, ref1, ref2;
      if (arguments.length === 0) {
        ref = [this.listeningTo, this.listeningToOnce];
        for (j = 0, len = ref.length; j < len; j++) {
          listeningTo = ref[j];
          if (!(listeningTo != null ? listeningTo.length : void 0)) {
            continue;
          }
          for (k = 0, len1 = listeningTo.length; k < len1; k++) {
            lt = listeningTo[k];
            lt.obj.unbind(lt.ev, lt.callback);
          }
        }
        this.listeningTo = void 0;
        this.listeningToOnce = void 0;
      } else if (obj) {
        events = events ? events.split(' ') : [void 0];
        ref1 = [this.listeningTo, this.listeningToOnce];
        for (l = 0, len2 = ref1.length; l < len2; l++) {
          listeningTo = ref1[l];
          if (!listeningTo) {
            continue;
          }
          for (m = 0, len3 = events.length; m < len3; m++) {
            ev = events[m];
            for (idx = n = ref2 = listeningTo.length - 1; ref2 <= 0 ? n <= 0 : n >= 0; idx = ref2 <= 0 ? ++n : --n) {
              lt = listeningTo[idx];
              if (lt.obj !== obj) {
                continue;
              }
              if (callback && lt.callback !== callback) {
                continue;
              }
              if ((!ev) || (ev === lt.ev)) {
                lt.obj.unbind(lt.ev, lt.callback);
                if (idx !== -1) {
                  listeningTo.splice(idx, 1);
                }
              } else if (ev) {
                evts = lt.ev.split(' ');
                if (indexOf.call(evts, ev) >= 0) {
                  evts = (function() {
                    var len4, p, results;
                    results = [];
                    for (p = 0, len4 = evts.length; p < len4; p++) {
                      e = evts[p];
                      if (e !== ev) {
                        results.push(e);
                      }
                    }
                    return results;
                  })();
                  lt.ev = $.trim(evts.join(' '));
                  lt.obj.unbind(ev, lt.callback);
                }
              }
            }
          }
        }
      }
      return this;
    },
    unbind: function(ev, callback) {
      var cb, evs, i, j, k, len, len1, list, name, ref;
      if (arguments.length === 0) {
        this._callbacks = {};
        return this;
      }
      if (!ev) {
        return this;
      }
      evs = ev.split(' ');
      for (j = 0, len = evs.length; j < len; j++) {
        name = evs[j];
        list = (ref = this._callbacks) != null ? ref[name] : void 0;
        if (!list) {
          continue;
        }
        if (!callback) {
          delete this._callbacks[name];
          continue;
        }
        for (i = k = 0, len1 = list.length; k < len1; i = ++k) {
          cb = list[i];
          if (!(cb === callback)) {
            continue;
          }
          list = list.slice();
          list.splice(i, 1);
          this._callbacks[name] = list;
          break;
        }
      }
      return this;
    }
  };

  Events.on = Events.bind;

  Events.off = Events.unbind;

  Log = {
    trace: true,
    logPrefix: '(App)',
    log: function() {
      var args;
      args = 1 <= arguments.length ? slice.call(arguments, 0) : [];
      if (!this.trace) {
        return;
      }
      if (this.logPrefix) {
        args.unshift(this.logPrefix);
      }
      if (typeof console !== "undefined" && console !== null) {
        if (typeof console.log === "function") {
          console.log.apply(console, args);
        }
      }
      return this;
    }
  };

  moduleKeywords = ['included', 'extended'];

  Module = (function() {
    Module.include = function(obj) {
      var key, ref, value;
      if (!obj) {
        throw new Error('include(obj) requires obj');
      }
      for (key in obj) {
        value = obj[key];
        if (indexOf.call(moduleKeywords, key) < 0) {
          this.prototype[key] = value;
        }
      }
      if ((ref = obj.included) != null) {
        ref.apply(this);
      }
      return this;
    };

    Module.extend = function(obj) {
      var key, ref, value;
      if (!obj) {
        throw new Error('extend(obj) requires obj');
      }
      for (key in obj) {
        value = obj[key];
        if (indexOf.call(moduleKeywords, key) < 0) {
          this[key] = value;
        }
      }
      if ((ref = obj.extended) != null) {
        ref.apply(this);
      }
      return this;
    };

    Module.proxy = function(func) {
      return (function(_this) {
        return function() {
          return func.apply(_this, arguments);
        };
      })(this);
    };

    Module.prototype.proxy = function(func) {
      return (function(_this) {
        return function() {
          return func.apply(_this, arguments);
        };
      })(this);
    };

    function Module() {
      if (typeof this.init === "function") {
        this.init.apply(this, arguments);
      }
    }

    return Module;

  })();

  Model = (function(superClass) {
    extend(Model, superClass);

    Model.extend(Events);

    Model.include(Events);

    Model.records = [];

    Model.irecords = {};

    Model.attributes = [];

    Model.configure = function() {
      var attributes, name;
      name = arguments[0], attributes = 2 <= arguments.length ? slice.call(arguments, 1) : [];
      this.className = name;
      this.deleteAll();
      if (attributes.length) {
        this.attributes = attributes;
      }
      this.attributes && (this.attributes = makeArray(this.attributes));
      this.attributes || (this.attributes = []);
      this.unbind();
      return this;
    };

    Model.toString = function() {
      return this.className + "(" + (this.attributes.join(", ")) + ")";
    };

    Model.find = function(id, notFound) {
      var ref;
      if (notFound == null) {
        notFound = this.notFound;
      }
      return ((ref = this.irecords[id]) != null ? ref.clone() : void 0) || (typeof notFound === "function" ? notFound(id) : void 0);
    };

    Model.findAll = function(ids, notFound) {
      var id, j, len, results;
      results = [];
      for (j = 0, len = ids.length; j < len; j++) {
        id = ids[j];
        if (this.find(id, notFound)) {
          results.push(this.find(id));
        }
      }
      return results;
    };

    Model.notFound = function(id) {
      return null;
    };

    Model.exists = function(id) {
      return Boolean(this.irecords[id]);
    };

    Model.addRecord = function(record, idx) {
      var root;
      if (root = this.irecords[record.id || record.cid]) {
        root.refresh(record);
      } else {
        record.id || (record.id = record.cid);
        this.irecords[record.id] = this.irecords[record.cid] = record;
        if (idx !== void 0) {
          this.records.splice(idx, 0, record);
        } else {
          this.records.push(record);
        }
      }
      return record;
    };

    Model.refresh = function(values, options) {
      var j, len, record, records, result;
      if (options == null) {
        options = {};
      }
      if (options.clear) {
        this.deleteAll();
      }
      records = this.fromJSON(values);
      if (!Array.isArray(records)) {
        records = [records];
      }
      for (j = 0, len = records.length; j < len; j++) {
        record = records[j];
        this.addRecord(record);
      }
      this.sort();
      result = this.cloneArray(records);
      this.trigger('refresh', result, options);
      return result;
    };

    Model.select = function(callback) {
      var j, len, record, ref, results;
      ref = this.records;
      results = [];
      for (j = 0, len = ref.length; j < len; j++) {
        record = ref[j];
        if (callback(record)) {
          results.push(record.clone());
        }
      }
      return results;
    };

    Model.findByAttribute = function(name, value) {
      var j, len, record, ref;
      ref = this.records;
      for (j = 0, len = ref.length; j < len; j++) {
        record = ref[j];
        if (record[name] === value) {
          return record.clone();
        }
      }
      return null;
    };

    Model.findAllByAttribute = function(name, value) {
      return this.select(function(item) {
        return item[name] === value;
      });
    };

    Model.each = function(callback) {
      var j, len, record, ref, results;
      ref = this.records;
      results = [];
      for (j = 0, len = ref.length; j < len; j++) {
        record = ref[j];
        results.push(callback(record.clone()));
      }
      return results;
    };

    Model.all = function() {
      return this.cloneArray(this.records);
    };

    Model.slice = function(begin, end) {
      if (begin == null) {
        begin = 0;
      }
      return this.cloneArray(this.records.slice(begin, end));
    };

    Model.first = function(end) {
      var ref;
      if (end == null) {
        end = 1;
      }
      if (end > 1) {
        return this.cloneArray(this.records.slice(0, end));
      } else {
        return (ref = this.records[0]) != null ? ref.clone() : void 0;
      }
    };

    Model.last = function(begin) {
      var ref;
      if (typeof begin === 'number') {
        return this.cloneArray(this.records.slice(-begin));
      } else {
        return (ref = this.records[this.records.length - 1]) != null ? ref.clone() : void 0;
      }
    };

    Model.count = function() {
      return this.records.length;
    };

    Model.deleteAll = function() {
      this.records = [];
      return this.irecords = {};
    };

    Model.destroyAll = function(options) {
      var j, len, record, ref, results;
      ref = this.records;
      results = [];
      for (j = 0, len = ref.length; j < len; j++) {
        record = ref[j];
        results.push(record.destroy(options));
      }
      return results;
    };

    Model.update = function(id, atts, options) {
      return this.find(id).updateAttributes(atts, options);
    };

    Model.create = function(atts, options) {
      var record;
      record = new this(atts);
      return record.save(options);
    };

    Model.destroy = function(id, options) {
      var ref;
      return (ref = this.find(id)) != null ? ref.destroy(options) : void 0;
    };

    Model.change = function(callbackOrParams) {
      if (typeof callbackOrParams === 'function') {
        return this.bind('change', callbackOrParams);
      } else {
        return this.trigger.apply(this, ['change'].concat(slice.call(arguments)));
      }
    };

    Model.fetch = function(callbackOrParams) {
      if (typeof callbackOrParams === 'function') {
        return this.bind('fetch', callbackOrParams);
      } else {
        return this.trigger.apply(this, ['fetch'].concat(slice.call(arguments)));
      }
    };

    Model.toJSON = function() {
      return this.records;
    };

    Model.beforeFromJSON = function(objects) {
      return objects;
    };

    Model.fromJSON = function(objects) {
      var j, len, results, value;
      if (!objects) {
        return;
      }
      if (typeof objects === 'string') {
        objects = JSON.parse(objects);
      }
      objects = this.beforeFromJSON(objects);
      if (Array.isArray(objects)) {
        results = [];
        for (j = 0, len = objects.length; j < len; j++) {
          value = objects[j];
          if (value instanceof this) {
            results.push(value);
          } else {
            results.push(new this(value));
          }
        }
        return results;
      } else {
        if (objects instanceof this) {
          return objects;
        }
        return new this(objects);
      }
    };

    Model.fromForm = function() {
      var ref;
      return (ref = new this).fromForm.apply(ref, arguments);
    };

    Model.sort = function() {
      if (this.comparator) {
        this.records.sort(this.comparator);
      }
      return this;
    };

    Model.cloneArray = function(array) {
      var j, len, results, value;
      results = [];
      for (j = 0, len = array.length; j < len; j++) {
        value = array[j];
        results.push(value.clone());
      }
      return results;
    };

    Model.idCounter = 0;

    Model.uid = function(prefix) {
      var uid;
      if (prefix == null) {
        prefix = '';
      }
      uid = prefix + this.idCounter++;
      if (this.exists(uid)) {
        uid = this.uid(prefix);
      }
      return uid;
    };

    function Model(atts) {
      Model.__super__.constructor.apply(this, arguments);
      if ((this.constructor.uuid != null) && typeof this.constructor.uuid === 'function') {
        this.cid = this.constructor.uuid();
        if (!this.id) {
          this.id = this.cid;
        }
      } else {
        this.cid = (atts != null ? atts.cid : void 0) || this.constructor.uid('c-');
      }
      if (atts) {
        this.load(atts);
      }
    }

    Model.prototype.isNew = function() {
      return !this.exists();
    };

    Model.prototype.isValid = function() {
      return !this.validate();
    };

    Model.prototype.validate = function() {};

    Model.prototype.load = function(atts) {
      var key, value;
      if (atts.id) {
        this.id = atts.id;
      }
      for (key in atts) {
        value = atts[key];
        if (key === '_callbacks') {
          continue;
        }
        if (typeof this[key] === 'function') {
          if (typeof value === 'function') {
            continue;
          }
          this[key](value);
        } else {
          this[key] = value;
        }
      }
      return this;
    };

    Model.prototype.attributes = function() {
      var j, key, len, ref, result;
      result = {};
      ref = this.constructor.attributes;
      for (j = 0, len = ref.length; j < len; j++) {
        key = ref[j];
        if (key in this) {
          if (typeof this[key] === 'function') {
            result[key] = this[key]();
          } else {
            result[key] = this[key];
          }
        }
      }
      if (this.id) {
        result.id = this.id;
      }
      return result;
    };

    Model.prototype.eql = function(rec) {
      return rec && rec.constructor === this.constructor && ((rec.cid === this.cid) || (rec.id && rec.id === this.id));
    };

    Model.prototype.save = function(options) {
      var error, record;
      if (options == null) {
        options = {};
      }
      if (options.validate !== false) {
        error = this.validate();
        if (error) {
          this.trigger('error', this, error);
          return false;
        }
      }
      this.trigger('beforeSave', this, options);
      record = this.isNew() ? this.create(options) : this.update(options);
      this.stripCloneAttrs();
      this.trigger('save', record, options);
      return record;
    };

    Model.prototype.stripCloneAttrs = function() {
      var key, value;
      if (this.hasOwnProperty('cid')) {
        return;
      }
      for (key in this) {
        if (!hasProp.call(this, key)) continue;
        value = this[key];
        if (indexOf.call(this.constructor.attributes, key) >= 0) {
          delete this[key];
        }
      }
      return this;
    };

    Model.prototype.updateAttribute = function(name, value, options) {
      var atts;
      atts = {};
      atts[name] = value;
      return this.updateAttributes(atts, options);
    };

    Model.prototype.updateAttributes = function(atts, options) {
      this.load(atts);
      return this.save(options);
    };

    Model.prototype.changeID = function(id) {
      var records;
      if (id === this.id) {
        return;
      }
      records = this.constructor.irecords;
      records[id] = records[this.id];
      if (this.cid !== this.id) {
        delete records[this.id];
      }
      return this.id = id;
    };

    Model.prototype.remove = function(options) {
      var i, j, len, record, records;
      if (options == null) {
        options = {};
      }
      records = this.constructor.records.slice(0);
      for (i = j = 0, len = records.length; j < len; i = ++j) {
        record = records[i];
        if (!(this.eql(record))) {
          continue;
        }
        records.splice(i, 1);
        break;
      }
      this.constructor.records = records;
      if (options.clear) {
        delete this.constructor.irecords[this.id];
        return delete this.constructor.irecords[this.cid];
      }
    };

    Model.prototype.destroy = function(options) {
      if (options == null) {
        options = {};
      }
      if (options.clear == null) {
        options.clear = true;
      }
      this.trigger('beforeDestroy', this, options);
      this.remove(options);
      this.destroyed = true;
      this.trigger('destroy', this, options);
      this.trigger('change', this, 'destroy', options);
      if (this.listeningTo) {
        this.stopListening();
      }
      this.unbind();
      return this;
    };

    Model.prototype.dup = function(newRecord) {
      var atts, record;
      if (newRecord == null) {
        newRecord = true;
      }
      atts = this.attributes();
      if (newRecord) {
        delete atts.id;
      } else {
        atts.cid = this.cid;
      }
      record = new this.constructor(atts);
      if (!newRecord) {
        this._callbacks && (record._callbacks = this._callbacks);
      }
      return record;
    };

    Model.prototype.clone = function() {
      return createObject(this);
    };

    Model.prototype.reload = function() {
      var original;
      if (this.isNew()) {
        return this;
      }
      original = this.constructor.find(this.id);
      this.load(original.attributes());
      return original;
    };

    Model.prototype.refresh = function(atts) {
      atts = this.constructor.fromJSON(atts);
      if (atts.id && this.id !== atts.id) {
        this.changeID(atts.id);
      }
      this.constructor.irecords[this.id].load(atts);
      this.trigger('refresh', this);
      this.trigger('change', this, 'refresh');
      return this;
    };

    Model.prototype.toJSON = function() {
      return this.attributes();
    };

    Model.prototype.toString = function() {
      return "<" + this.constructor.className + " (" + (JSON.stringify(this)) + ")>";
    };

    Model.prototype.fromForm = function(form) {
      var checkbox, j, k, key, l, len, len1, len2, name, name1, ref, ref1, ref2, result;
      result = {};
      ref = $(form).find('[type=checkbox]:not([value])');
      for (j = 0, len = ref.length; j < len; j++) {
        checkbox = ref[j];
        result[checkbox.name] = $(checkbox).prop('checked');
      }
      ref1 = $(form).find('[type=checkbox][name$="[]"]');
      for (k = 0, len1 = ref1.length; k < len1; k++) {
        checkbox = ref1[k];
        name = checkbox.name.replace(/\[\]$/, '');
        result[name] || (result[name] = []);
        if ($(checkbox).prop('checked')) {
          result[name].push(checkbox.value);
        }
      }
      ref2 = $(form).serializeArray();
      for (l = 0, len2 = ref2.length; l < len2; l++) {
        key = ref2[l];
        result[name1 = key.name] || (result[name1] = key.value);
      }
      return this.load(result);
    };

    Model.prototype.exists = function() {
      return this.constructor.exists(this.id);
    };

    Model.prototype.update = function(options) {
      var clone, records;
      this.trigger('beforeUpdate', this, options);
      records = this.constructor.irecords;
      records[this.id].load(this.attributes());
      this.constructor.sort();
      clone = records[this.id].clone();
      clone.trigger('update', clone, options);
      clone.trigger('change', clone, 'update', options);
      return clone;
    };

    Model.prototype.create = function(options) {
      var clone, record;
      this.trigger('beforeCreate', this, options);
      this.id || (this.id = this.cid);
      record = this.dup(false);
      this.constructor.addRecord(record, options.idx);
      this.constructor.sort();
      clone = record.clone();
      clone.trigger('create', clone, options);
      clone.trigger('change', clone, 'create', options);
      return clone;
    };

    Model.prototype.bind = function() {
      var record;
      record = this.constructor.irecords[this.id] || this;
      return Events.bind.apply(record, arguments);
    };

    Model.prototype.one = function() {
      var record;
      record = this.constructor.irecords[this.id] || this;
      return Events.one.apply(record, arguments);
    };

    Model.prototype.unbind = function() {
      var record;
      record = this.constructor.irecords[this.id] || this;
      return Events.unbind.apply(record, arguments);
    };

    Model.prototype.trigger = function() {
      var ref;
      Events.trigger.apply(this, arguments);
      if (arguments[0] === 'refresh') {
        return true;
      }
      return (ref = this.constructor).trigger.apply(ref, arguments);
    };

    return Model;

  })(Module);

  Model.prototype.on = Model.prototype.bind;

  Model.prototype.off = Model.prototype.unbind;

  Controller = (function(superClass) {
    extend(Controller, superClass);

    Controller.include(Events);

    Controller.include(Log);

    Controller.prototype.eventSplitter = /^(\S+)\s*(.*)$/;

    Controller.prototype.tag = 'div';

    function Controller(options) {
      this.release = bind(this.release, this);
      var context, key, parent_prototype, ref, value;
      this.options = options;
      ref = this.options;
      for (key in ref) {
        value = ref[key];
        this[key] = value;
      }
      if (!this.el) {
        this.el = document.createElement(this.tag);
      }
      this.el = $(this.el);
      if (this.className) {
        this.el.addClass(this.className);
      }
      if (this.attributes) {
        this.el.attr(this.attributes);
      }
      if (!this.events) {
        this.events = this.constructor.events;
      }
      if (!this.elements) {
        this.elements = this.constructor.elements;
      }
      context = this;
      while (parent_prototype = context.constructor.__super__) {
        if (parent_prototype.events) {
          this.events = $.extend({}, parent_prototype.events, this.events);
        }
        if (parent_prototype.elements) {
          this.elements = $.extend({}, parent_prototype.elements, this.elements);
        }
        context = parent_prototype;
      }
      if (this.events) {
        this.delegateEvents(this.events);
      }
      if (this.elements) {
        this.refreshElements();
      }
      Controller.__super__.constructor.apply(this, arguments);
    }

    Controller.prototype.release = function() {
      this.trigger('release', this);
      this.el.remove();
      this.unbind();
      return this.stopListening();
    };

    Controller.prototype.$ = function(selector) {
      return this.el.find(selector);
    };

    Controller.prototype.delegateEvents = function(events) {
      var eventName, key, match, method, results, selector;
      results = [];
      for (key in events) {
        method = events[key];
        if (typeof method === 'function') {
          method = (function(_this) {
            return function(method) {
              return function() {
                method.apply(_this, arguments);
                return true;
              };
            };
          })(this)(method);
        } else {
          if (!this[method]) {
            throw new Error(method + " doesn't exist");
          }
          method = (function(_this) {
            return function(method) {
              return function() {
                _this[method].apply(_this, arguments);
                return true;
              };
            };
          })(this)(method);
        }
        match = key.match(this.eventSplitter);
        eventName = match[1];
        selector = match[2];
        if (selector === '') {
          results.push(this.el.bind(eventName, method));
        } else {
          results.push(this.el.on(eventName, selector, method));
        }
      }
      return results;
    };

    Controller.prototype.refreshElements = function() {
      var key, ref, results, value;
      ref = this.elements;
      results = [];
      for (key in ref) {
        value = ref[key];
        results.push(this[value] = this.$(key));
      }
      return results;
    };

    Controller.prototype.delay = function(func, timeout) {
      return setTimeout(this.proxy(func), timeout || 0);
    };

    Controller.prototype.html = function(element) {
      this.el.html(element.el || element);
      this.refreshElements();
      return this.el;
    };

    Controller.prototype.append = function() {
      var e, elements, ref;
      elements = 1 <= arguments.length ? slice.call(arguments, 0) : [];
      elements = (function() {
        var j, len, results;
        results = [];
        for (j = 0, len = elements.length; j < len; j++) {
          e = elements[j];
          results.push(e.el || e);
        }
        return results;
      })();
      (ref = this.el).append.apply(ref, elements);
      this.refreshElements();
      return this.el;
    };

    Controller.prototype.appendTo = function(element) {
      this.el.appendTo(element.el || element);
      this.refreshElements();
      return this.el;
    };

    Controller.prototype.prepend = function() {
      var e, elements, ref;
      elements = 1 <= arguments.length ? slice.call(arguments, 0) : [];
      elements = (function() {
        var j, len, results;
        results = [];
        for (j = 0, len = elements.length; j < len; j++) {
          e = elements[j];
          results.push(e.el || e);
        }
        return results;
      })();
      (ref = this.el).prepend.apply(ref, elements);
      this.refreshElements();
      return this.el;
    };

    Controller.prototype.replace = function(element) {
      var previous, ref, ref1;
      element = element.el || element;
      if (typeof element === "string") {
        element = $.trim(element);
      }
      ref1 = [this.el, $(((ref = $.parseHTML(element)) != null ? ref[0] : void 0) || element)], previous = ref1[0], this.el = ref1[1];
      previous.replaceWith(this.el);
      this.delegateEvents(this.events);
      this.refreshElements();
      return this.el;
    };

    return Controller;

  })(Module);

  $ = (typeof window !== "undefined" && window !== null ? window.jQuery : void 0) || (typeof window !== "undefined" && window !== null ? window.Zepto : void 0) || function(element) {
    return element;
  };

  createObject = Object.create || function(o) {
    var Func;
    Func = function() {};
    Func.prototype = o;
    return new Func();
  };

  makeArray = function(args) {
    return Array.prototype.slice.call(args, 0);
  };

  Spine = this.Spine = {};

  if (typeof module !== "undefined" && module !== null) {
    module.exports = Spine;
  }

  Spine.version = '1.6.2';

  Spine.$ = $;

  Spine.Events = Events;

  Spine.Log = Log;

  Spine.Module = Module;

  Spine.Controller = Controller;

  Spine.Model = Model;

  Module.extend.call(Spine, Events);

  Module.create = Module.sub = Controller.create = Controller.sub = Model.sub = function(instances, statics) {
    var Result;
    Result = (function(superClass) {
      extend(Result, superClass);

      function Result() {
        return Result.__super__.constructor.apply(this, arguments);
      }

      return Result;

    })(this);
    if (instances) {
      Result.include(instances);
    }
    if (statics) {
      Result.extend(statics);
    }
    if (typeof Result.unbind === "function") {
      Result.unbind();
    }
    return Result;
  };

  Model.setup = function(name, attributes) {
    var Instance;
    if (attributes == null) {
      attributes = [];
    }
    Instance = (function(superClass) {
      extend(Instance, superClass);

      function Instance() {
        return Instance.__super__.constructor.apply(this, arguments);
      }

      return Instance;

    })(this);
    Instance.configure.apply(Instance, [name].concat(slice.call(attributes)));
    return Instance;
  };

  Spine.Class = Module;

}).call(this);



},{}],44:[function(require,module,exports){
// stats.js - http://github.com/mrdoob/stats.js
var Stats=function(){function h(a){c.appendChild(a.dom);return a}function k(a){for(var d=0;d<c.children.length;d++)c.children[d].style.display=d===a?"block":"none";l=a}var l=0,c=document.createElement("div");c.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000";c.addEventListener("click",function(a){a.preventDefault();k(++l%c.children.length)},!1);var g=(performance||Date).now(),e=g,a=0,r=h(new Stats.Panel("FPS","#0ff","#002")),f=h(new Stats.Panel("MS","#0f0","#020"));
if(self.performance&&self.performance.memory)var t=h(new Stats.Panel("MB","#f08","#201"));k(0);return{REVISION:16,dom:c,addPanel:h,showPanel:k,begin:function(){g=(performance||Date).now()},end:function(){a++;var c=(performance||Date).now();f.update(c-g,200);if(c>e+1E3&&(r.update(1E3*a/(c-e),100),e=c,a=0,t)){var d=performance.memory;t.update(d.usedJSHeapSize/1048576,d.jsHeapSizeLimit/1048576)}return c},update:function(){g=this.end()},domElement:c,setMode:k}};
Stats.Panel=function(h,k,l){var c=Infinity,g=0,e=Math.round,a=e(window.devicePixelRatio||1),r=80*a,f=48*a,t=3*a,u=2*a,d=3*a,m=15*a,n=74*a,p=30*a,q=document.createElement("canvas");q.width=r;q.height=f;q.style.cssText="width:80px;height:48px";var b=q.getContext("2d");b.font="bold "+9*a+"px Helvetica,Arial,sans-serif";b.textBaseline="top";b.fillStyle=l;b.fillRect(0,0,r,f);b.fillStyle=k;b.fillText(h,t,u);b.fillRect(d,m,n,p);b.fillStyle=l;b.globalAlpha=.9;b.fillRect(d,m,n,p);return{dom:q,update:function(f,
v){c=Math.min(c,f);g=Math.max(g,f);b.fillStyle=l;b.globalAlpha=1;b.fillRect(0,0,r,m);b.fillStyle=k;b.fillText(e(f)+" "+h+" ("+e(c)+"-"+e(g)+")",t,u);b.drawImage(q,d+a,m,n-a,p,d,m,n-a,p);b.fillRect(d+n-a,m,a,p);b.fillStyle=l;b.globalAlpha=.9;b.fillRect(d+n-a,m,a,e((1-f/v)*p))}}};"object"===typeof module&&(module.exports=Stats);

},{}],45:[function(require,module,exports){
module.exports = function isBuffer(arg) {
  return arg && typeof arg === 'object'
    && typeof arg.copy === 'function'
    && typeof arg.fill === 'function'
    && typeof arg.readUInt8 === 'function';
}
},{}],46:[function(require,module,exports){
(function (process,global){
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

var formatRegExp = /%[sdj%]/g;
exports.format = function(f) {
  if (!isString(f)) {
    var objects = [];
    for (var i = 0; i < arguments.length; i++) {
      objects.push(inspect(arguments[i]));
    }
    return objects.join(' ');
  }

  var i = 1;
  var args = arguments;
  var len = args.length;
  var str = String(f).replace(formatRegExp, function(x) {
    if (x === '%%') return '%';
    if (i >= len) return x;
    switch (x) {
      case '%s': return String(args[i++]);
      case '%d': return Number(args[i++]);
      case '%j':
        try {
          return JSON.stringify(args[i++]);
        } catch (_) {
          return '[Circular]';
        }
      default:
        return x;
    }
  });
  for (var x = args[i]; i < len; x = args[++i]) {
    if (isNull(x) || !isObject(x)) {
      str += ' ' + x;
    } else {
      str += ' ' + inspect(x);
    }
  }
  return str;
};


// Mark that a method should not be used.
// Returns a modified function which warns once by default.
// If --no-deprecation is set, then it is a no-op.
exports.deprecate = function(fn, msg) {
  // Allow for deprecating things in the process of starting up.
  if (isUndefined(global.process)) {
    return function() {
      return exports.deprecate(fn, msg).apply(this, arguments);
    };
  }

  if (process.noDeprecation === true) {
    return fn;
  }

  var warned = false;
  function deprecated() {
    if (!warned) {
      if (process.throwDeprecation) {
        throw new Error(msg);
      } else if (process.traceDeprecation) {
        console.trace(msg);
      } else {
        console.error(msg);
      }
      warned = true;
    }
    return fn.apply(this, arguments);
  }

  return deprecated;
};


var debugs = {};
var debugEnviron;
exports.debuglog = function(set) {
  if (isUndefined(debugEnviron))
    debugEnviron = process.env.NODE_DEBUG || '';
  set = set.toUpperCase();
  if (!debugs[set]) {
    if (new RegExp('\\b' + set + '\\b', 'i').test(debugEnviron)) {
      var pid = process.pid;
      debugs[set] = function() {
        var msg = exports.format.apply(exports, arguments);
        console.error('%s %d: %s', set, pid, msg);
      };
    } else {
      debugs[set] = function() {};
    }
  }
  return debugs[set];
};


/**
 * Echos the value of a value. Trys to print the value out
 * in the best way possible given the different types.
 *
 * @param {Object} obj The object to print out.
 * @param {Object} opts Optional options object that alters the output.
 */
/* legacy: obj, showHidden, depth, colors*/
function inspect(obj, opts) {
  // default options
  var ctx = {
    seen: [],
    stylize: stylizeNoColor
  };
  // legacy...
  if (arguments.length >= 3) ctx.depth = arguments[2];
  if (arguments.length >= 4) ctx.colors = arguments[3];
  if (isBoolean(opts)) {
    // legacy...
    ctx.showHidden = opts;
  } else if (opts) {
    // got an "options" object
    exports._extend(ctx, opts);
  }
  // set default options
  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;
  if (isUndefined(ctx.depth)) ctx.depth = 2;
  if (isUndefined(ctx.colors)) ctx.colors = false;
  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;
  if (ctx.colors) ctx.stylize = stylizeWithColor;
  return formatValue(ctx, obj, ctx.depth);
}
exports.inspect = inspect;


// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics
inspect.colors = {
  'bold' : [1, 22],
  'italic' : [3, 23],
  'underline' : [4, 24],
  'inverse' : [7, 27],
  'white' : [37, 39],
  'grey' : [90, 39],
  'black' : [30, 39],
  'blue' : [34, 39],
  'cyan' : [36, 39],
  'green' : [32, 39],
  'magenta' : [35, 39],
  'red' : [31, 39],
  'yellow' : [33, 39]
};

// Don't use 'blue' not visible on cmd.exe
inspect.styles = {
  'special': 'cyan',
  'number': 'yellow',
  'boolean': 'yellow',
  'undefined': 'grey',
  'null': 'bold',
  'string': 'green',
  'date': 'magenta',
  // "name": intentionally not styling
  'regexp': 'red'
};


function stylizeWithColor(str, styleType) {
  var style = inspect.styles[styleType];

  if (style) {
    return '\u001b[' + inspect.colors[style][0] + 'm' + str +
           '\u001b[' + inspect.colors[style][1] + 'm';
  } else {
    return str;
  }
}


function stylizeNoColor(str, styleType) {
  return str;
}


function arrayToHash(array) {
  var hash = {};

  array.forEach(function(val, idx) {
    hash[val] = true;
  });

  return hash;
}


function formatValue(ctx, value, recurseTimes) {
  // Provide a hook for user-specified inspect functions.
  // Check that value is an object with an inspect function on it
  if (ctx.customInspect &&
      value &&
      isFunction(value.inspect) &&
      // Filter out the util module, it's inspect function is special
      value.inspect !== exports.inspect &&
      // Also filter out any prototype objects using the circular check.
      !(value.constructor && value.constructor.prototype === value)) {
    var ret = value.inspect(recurseTimes, ctx);
    if (!isString(ret)) {
      ret = formatValue(ctx, ret, recurseTimes);
    }
    return ret;
  }

  // Primitive types cannot have properties
  var primitive = formatPrimitive(ctx, value);
  if (primitive) {
    return primitive;
  }

  // Look up the keys of the object.
  var keys = Object.keys(value);
  var visibleKeys = arrayToHash(keys);

  if (ctx.showHidden) {
    keys = Object.getOwnPropertyNames(value);
  }

  // IE doesn't make error fields non-enumerable
  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx
  if (isError(value)
      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {
    return formatError(value);
  }

  // Some type of object without properties can be shortcutted.
  if (keys.length === 0) {
    if (isFunction(value)) {
      var name = value.name ? ': ' + value.name : '';
      return ctx.stylize('[Function' + name + ']', 'special');
    }
    if (isRegExp(value)) {
      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');
    }
    if (isDate(value)) {
      return ctx.stylize(Date.prototype.toString.call(value), 'date');
    }
    if (isError(value)) {
      return formatError(value);
    }
  }

  var base = '', array = false, braces = ['{', '}'];

  // Make Array say that they are Array
  if (isArray(value)) {
    array = true;
    braces = ['[', ']'];
  }

  // Make functions say that they are functions
  if (isFunction(value)) {
    var n = value.name ? ': ' + value.name : '';
    base = ' [Function' + n + ']';
  }

  // Make RegExps say that they are RegExps
  if (isRegExp(value)) {
    base = ' ' + RegExp.prototype.toString.call(value);
  }

  // Make dates with properties first say the date
  if (isDate(value)) {
    base = ' ' + Date.prototype.toUTCString.call(value);
  }

  // Make error with message first say the error
  if (isError(value)) {
    base = ' ' + formatError(value);
  }

  if (keys.length === 0 && (!array || value.length == 0)) {
    return braces[0] + base + braces[1];
  }

  if (recurseTimes < 0) {
    if (isRegExp(value)) {
      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');
    } else {
      return ctx.stylize('[Object]', 'special');
    }
  }

  ctx.seen.push(value);

  var output;
  if (array) {
    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);
  } else {
    output = keys.map(function(key) {
      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);
    });
  }

  ctx.seen.pop();

  return reduceToSingleString(output, base, braces);
}


function formatPrimitive(ctx, value) {
  if (isUndefined(value))
    return ctx.stylize('undefined', 'undefined');
  if (isString(value)) {
    var simple = '\'' + JSON.stringify(value).replace(/^"|"$/g, '')
                                             .replace(/'/g, "\\'")
                                             .replace(/\\"/g, '"') + '\'';
    return ctx.stylize(simple, 'string');
  }
  if (isNumber(value))
    return ctx.stylize('' + value, 'number');
  if (isBoolean(value))
    return ctx.stylize('' + value, 'boolean');
  // For some reason typeof null is "object", so special case here.
  if (isNull(value))
    return ctx.stylize('null', 'null');
}


function formatError(value) {
  return '[' + Error.prototype.toString.call(value) + ']';
}


function formatArray(ctx, value, recurseTimes, visibleKeys, keys) {
  var output = [];
  for (var i = 0, l = value.length; i < l; ++i) {
    if (hasOwnProperty(value, String(i))) {
      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,
          String(i), true));
    } else {
      output.push('');
    }
  }
  keys.forEach(function(key) {
    if (!key.match(/^\d+$/)) {
      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,
          key, true));
    }
  });
  return output;
}


function formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {
  var name, str, desc;
  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };
  if (desc.get) {
    if (desc.set) {
      str = ctx.stylize('[Getter/Setter]', 'special');
    } else {
      str = ctx.stylize('[Getter]', 'special');
    }
  } else {
    if (desc.set) {
      str = ctx.stylize('[Setter]', 'special');
    }
  }
  if (!hasOwnProperty(visibleKeys, key)) {
    name = '[' + key + ']';
  }
  if (!str) {
    if (ctx.seen.indexOf(desc.value) < 0) {
      if (isNull(recurseTimes)) {
        str = formatValue(ctx, desc.value, null);
      } else {
        str = formatValue(ctx, desc.value, recurseTimes - 1);
      }
      if (str.indexOf('\n') > -1) {
        if (array) {
          str = str.split('\n').map(function(line) {
            return '  ' + line;
          }).join('\n').substr(2);
        } else {
          str = '\n' + str.split('\n').map(function(line) {
            return '   ' + line;
          }).join('\n');
        }
      }
    } else {
      str = ctx.stylize('[Circular]', 'special');
    }
  }
  if (isUndefined(name)) {
    if (array && key.match(/^\d+$/)) {
      return str;
    }
    name = JSON.stringify('' + key);
    if (name.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)) {
      name = name.substr(1, name.length - 2);
      name = ctx.stylize(name, 'name');
    } else {
      name = name.replace(/'/g, "\\'")
                 .replace(/\\"/g, '"')
                 .replace(/(^"|"$)/g, "'");
      name = ctx.stylize(name, 'string');
    }
  }

  return name + ': ' + str;
}


function reduceToSingleString(output, base, braces) {
  var numLinesEst = 0;
  var length = output.reduce(function(prev, cur) {
    numLinesEst++;
    if (cur.indexOf('\n') >= 0) numLinesEst++;
    return prev + cur.replace(/\u001b\[\d\d?m/g, '').length + 1;
  }, 0);

  if (length > 60) {
    return braces[0] +
           (base === '' ? '' : base + '\n ') +
           ' ' +
           output.join(',\n  ') +
           ' ' +
           braces[1];
  }

  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];
}


// NOTE: These type checking functions intentionally don't use `instanceof`
// because it is fragile and can be easily faked with `Object.create()`.
function isArray(ar) {
  return Array.isArray(ar);
}
exports.isArray = isArray;

function isBoolean(arg) {
  return typeof arg === 'boolean';
}
exports.isBoolean = isBoolean;

function isNull(arg) {
  return arg === null;
}
exports.isNull = isNull;

function isNullOrUndefined(arg) {
  return arg == null;
}
exports.isNullOrUndefined = isNullOrUndefined;

function isNumber(arg) {
  return typeof arg === 'number';
}
exports.isNumber = isNumber;

function isString(arg) {
  return typeof arg === 'string';
}
exports.isString = isString;

function isSymbol(arg) {
  return typeof arg === 'symbol';
}
exports.isSymbol = isSymbol;

function isUndefined(arg) {
  return arg === void 0;
}
exports.isUndefined = isUndefined;

function isRegExp(re) {
  return isObject(re) && objectToString(re) === '[object RegExp]';
}
exports.isRegExp = isRegExp;

function isObject(arg) {
  return typeof arg === 'object' && arg !== null;
}
exports.isObject = isObject;

function isDate(d) {
  return isObject(d) && objectToString(d) === '[object Date]';
}
exports.isDate = isDate;

function isError(e) {
  return isObject(e) &&
      (objectToString(e) === '[object Error]' || e instanceof Error);
}
exports.isError = isError;

function isFunction(arg) {
  return typeof arg === 'function';
}
exports.isFunction = isFunction;

function isPrimitive(arg) {
  return arg === null ||
         typeof arg === 'boolean' ||
         typeof arg === 'number' ||
         typeof arg === 'string' ||
         typeof arg === 'symbol' ||  // ES6 symbol
         typeof arg === 'undefined';
}
exports.isPrimitive = isPrimitive;

exports.isBuffer = require('./support/isBuffer');

function objectToString(o) {
  return Object.prototype.toString.call(o);
}


function pad(n) {
  return n < 10 ? '0' + n.toString(10) : n.toString(10);
}


var months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',
              'Oct', 'Nov', 'Dec'];

// 26 Feb 16:19:34
function timestamp() {
  var d = new Date();
  var time = [pad(d.getHours()),
              pad(d.getMinutes()),
              pad(d.getSeconds())].join(':');
  return [d.getDate(), months[d.getMonth()], time].join(' ');
}


// log is just a thin wrapper to console.log that prepends a timestamp
exports.log = function() {
  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));
};


/**
 * Inherit the prototype methods from one constructor into another.
 *
 * The Function.prototype.inherits from lang.js rewritten as a standalone
 * function (not on Function.prototype). NOTE: If this file is to be loaded
 * during bootstrapping this function needs to be rewritten using some native
 * functions as prototype setup using normal JavaScript does not work as
 * expected during bootstrapping (see mirror.js in r114903).
 *
 * @param {function} ctor Constructor function which needs to inherit the
 *     prototype.
 * @param {function} superCtor Constructor function to inherit prototype from.
 */
exports.inherits = require('inherits');

exports._extend = function(origin, add) {
  // Don't do anything if add isn't an object
  if (!add || !isObject(add)) return origin;

  var keys = Object.keys(add);
  var i = keys.length;
  while (i--) {
    origin[keys[i]] = add[keys[i]];
  }
  return origin;
};

function hasOwnProperty(obj, prop) {
  return Object.prototype.hasOwnProperty.call(obj, prop);
}

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./support/isBuffer":45,"_process":38,"inherits":35}],47:[function(require,module,exports){
var indexOf = require('indexof');

var Object_keys = function (obj) {
    if (Object.keys) return Object.keys(obj)
    else {
        var res = [];
        for (var key in obj) res.push(key)
        return res;
    }
};

var forEach = function (xs, fn) {
    if (xs.forEach) return xs.forEach(fn)
    else for (var i = 0; i < xs.length; i++) {
        fn(xs[i], i, xs);
    }
};

var defineProp = (function() {
    try {
        Object.defineProperty({}, '_', {});
        return function(obj, name, value) {
            Object.defineProperty(obj, name, {
                writable: true,
                enumerable: false,
                configurable: true,
                value: value
            })
        };
    } catch(e) {
        return function(obj, name, value) {
            obj[name] = value;
        };
    }
}());

var globals = ['Array', 'Boolean', 'Date', 'Error', 'EvalError', 'Function',
'Infinity', 'JSON', 'Math', 'NaN', 'Number', 'Object', 'RangeError',
'ReferenceError', 'RegExp', 'String', 'SyntaxError', 'TypeError', 'URIError',
'decodeURI', 'decodeURIComponent', 'encodeURI', 'encodeURIComponent', 'escape',
'eval', 'isFinite', 'isNaN', 'parseFloat', 'parseInt', 'undefined', 'unescape'];

function Context() {}
Context.prototype = {};

var Script = exports.Script = function NodeScript (code) {
    if (!(this instanceof Script)) return new Script(code);
    this.code = code;
};

Script.prototype.runInContext = function (context) {
    if (!(context instanceof Context)) {
        throw new TypeError("needs a 'context' argument.");
    }
    
    var iframe = document.createElement('iframe');
    if (!iframe.style) iframe.style = {};
    iframe.style.display = 'none';
    
    document.body.appendChild(iframe);
    
    var win = iframe.contentWindow;
    var wEval = win.eval, wExecScript = win.execScript;

    if (!wEval && wExecScript) {
        // win.eval() magically appears when this is called in IE:
        wExecScript.call(win, 'null');
        wEval = win.eval;
    }
    
    forEach(Object_keys(context), function (key) {
        win[key] = context[key];
    });
    forEach(globals, function (key) {
        if (context[key]) {
            win[key] = context[key];
        }
    });
    
    var winKeys = Object_keys(win);

    var res = wEval.call(win, this.code);
    
    forEach(Object_keys(win), function (key) {
        // Avoid copying circular objects like `top` and `window` by only
        // updating existing context properties or new properties in the `win`
        // that was only introduced after the eval.
        if (key in context || indexOf(winKeys, key) === -1) {
            context[key] = win[key];
        }
    });

    forEach(globals, function (key) {
        if (!(key in context)) {
            defineProp(context, key, win[key]);
        }
    });
    
    document.body.removeChild(iframe);
    
    return res;
};

Script.prototype.runInThisContext = function () {
    return eval(this.code); // maybe...
};

Script.prototype.runInNewContext = function (context) {
    var ctx = Script.createContext(context);
    var res = this.runInContext(ctx);

    forEach(Object_keys(ctx), function (key) {
        context[key] = ctx[key];
    });

    return res;
};

forEach(Object_keys(Script.prototype), function (name) {
    exports[name] = Script[name] = function (code) {
        var s = Script(code);
        return s[name].apply(s, [].slice.call(arguments, 1));
    };
});

exports.createScript = function (code) {
    return exports.Script(code);
};

exports.createContext = Script.createContext = function (context) {
    var copy = new Context();
    if(typeof context === 'object') {
        forEach(Object_keys(context), function (key) {
            copy[key] = context[key];
        });
    }
    return copy;
};

},{"indexof":34}]},{},[13,11])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJidWlsZC9qcy9jb250cm9sbGVycy9jb250cm9sbGVycy9jb25zb2xlLmljZWQiLCJidWlsZC9qcy9jb250cm9sbGVycy9jb250cm9sbGVycy9lZGl0b3IuaWNlZCIsImJ1aWxkL2pzL2NvbnRyb2xsZXJzL2NvbnRyb2xsZXJzL3N0YWdlLmljZWQiLCJidWlsZC9qcy9saWIvbGliL01hdGgyLmljZWQiLCJidWlsZC9qcy9saWIvbGliL2ZpbGVxdWV1ZS5pY2VkIiwiYnVpbGQvanMvbGliL3BpeGkuZGV2LmpzIiwiYnVpbGQvanMvbGliL2xpYi9zZXR1cC5pY2VkIiwiYnVpbGQvanMvbGliL2xpYi9zcGluZS5hamF4LmljZWQiLCJidWlsZC9qcy9saWIvbGliL3NwaW5lLmF3YWl0YWpheC5pY2VkIiwiYnVpbGQvanMvbW9kZWxzL21vZGVscy9leGFtcGxlcy5pY2VkIiwiYnVpbGQvanMvcGl4aWpzLXBsYXlncm91bmQuaWNlZCIsImJ1aWxkL2pzL3ZpZXdzL3RlbXBsYXRlcy5qcyIsImxpYi9Ud2Vlbi5qcyIsIm5vZGVfbW9kdWxlcy9AbHVrZWthcnJ5cy9qYWRlLXJ1bnRpbWUvaW5kZXguanMiLCJub2RlX21vZHVsZXMvYnJvd3NlcmlmeS9saWIvX2VtcHR5LmpzIiwibm9kZV9tb2R1bGVzL2NvZGVtaXJyb3ItaWNlZC1jb2ZmZWUtc2NyaXB0L2NvZGVtaXJyb3ItaWNlZC1jb2ZmZWUtc2NyaXB0LmpzIiwibm9kZV9tb2R1bGVzL2NvZGVtaXJyb3IvbGliL2NvZGVtaXJyb3IuanMiLCJub2RlX21vZHVsZXMvZW1vamktaW1hZ2VzL2Vtb2ppLWltYWdlcy5qcyIsIm5vZGVfbW9kdWxlcy9lczUtc2hpbWlmeS9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9pY2VkLWNvZmZlZS1zY3JpcHQvbGliL2NvZmZlZS1zY3JpcHQvY29mZmVlLXNjcmlwdC5qcyIsIm5vZGVfbW9kdWxlcy9pY2VkLWNvZmZlZS1zY3JpcHQvbGliL2NvZmZlZS1zY3JpcHQvaGVscGVycy5qcyIsIm5vZGVfbW9kdWxlcy9pY2VkLWNvZmZlZS1zY3JpcHQvbGliL2NvZmZlZS1zY3JpcHQvaWNlZC5qcyIsIm5vZGVfbW9kdWxlcy9pY2VkLWNvZmZlZS1zY3JpcHQvbGliL2NvZmZlZS1zY3JpcHQvbGV4ZXIuanMiLCJub2RlX21vZHVsZXMvaWNlZC1jb2ZmZWUtc2NyaXB0L2xpYi9jb2ZmZWUtc2NyaXB0L25vZGVzLmpzIiwibm9kZV9tb2R1bGVzL2ljZWQtY29mZmVlLXNjcmlwdC9saWIvY29mZmVlLXNjcmlwdC9wYXJzZXIuanMiLCJub2RlX21vZHVsZXMvaWNlZC1jb2ZmZWUtc2NyaXB0L2xpYi9jb2ZmZWUtc2NyaXB0L3JlZ2lzdGVyLmpzIiwibm9kZV9tb2R1bGVzL2ljZWQtY29mZmVlLXNjcmlwdC9saWIvY29mZmVlLXNjcmlwdC9yZXdyaXRlci5qcyIsIm5vZGVfbW9kdWxlcy9pY2VkLWNvZmZlZS1zY3JpcHQvbGliL2NvZmZlZS1zY3JpcHQvc2NvcGUuanMiLCJub2RlX21vZHVsZXMvaWNlZC1jb2ZmZWUtc2NyaXB0L2xpYi9jb2ZmZWUtc2NyaXB0L3NvdXJjZW1hcC5qcyIsIm5vZGVfbW9kdWxlcy9pY2VkLXJ1bnRpbWUvbGliL2NvbnN0LmpzIiwibm9kZV9tb2R1bGVzL2ljZWQtcnVudGltZS9saWIvbGlicmFyeS5qcyIsIm5vZGVfbW9kdWxlcy9pY2VkLXJ1bnRpbWUvbGliL21haW4uanMiLCJub2RlX21vZHVsZXMvaWNlZC1ydW50aW1lL2xpYi9ydW50aW1lLmpzIiwibm9kZV9tb2R1bGVzL2luZGV4b2YvaW5kZXguanMiLCJub2RlX21vZHVsZXMvaW5oZXJpdHMvaW5oZXJpdHNfYnJvd3Nlci5qcyIsIm5vZGVfbW9kdWxlcy9qczJjb2ZmZWUvZGlzdC9qczJjb2ZmZWUuanMiLCJub2RlX21vZHVsZXMvcGF0aC1icm93c2VyaWZ5L2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3Byb2Nlc3MvYnJvd3Nlci5qcyIsIm5vZGVfbW9kdWxlcy9zcGluZS9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9zcGluZS9saWIvbG9jYWwuanMiLCJub2RlX21vZHVsZXMvc3BpbmUvbGliL21hbmFnZXIuanMiLCJub2RlX21vZHVsZXMvc3BpbmUvbGliL3JvdXRlLmpzIiwibm9kZV9tb2R1bGVzL3NwaW5lL2xpYi9zcGluZS5qcyIsIm5vZGVfbW9kdWxlcy9zdGF0cy5qcy9idWlsZC9zdGF0cy5taW4uanMiLCJub2RlX21vZHVsZXMvdXRpbC9zdXBwb3J0L2lzQnVmZmVyQnJvd3Nlci5qcyIsIm5vZGVfbW9kdWxlcy91dGlsL3V0aWwuanMiLCJub2RlX21vZHVsZXMvdm0tYnJvd3NlcmlmeS9pbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBO0FBQUEsTUFBQSw2QkFBQTtJQUFBOzs7c0JBQUE7O0FBQUEsRUFBQSxLQUFBLEdBQVksT0FBQSxDQUFRLE9BQVIsQ0FBWixDQUFBOztBQUFBLEVBQ0EsSUFBQSxHQUFZLE9BQUEsQ0FBUSxvQkFBUixDQURaLENBQUE7O0FBQUEsRUFFQyxVQUFXLE9BQUEsQ0FBUSxNQUFSLEVBQVgsT0FGRCxDQUFBOztBQUFBLEVBS007QUFDSixRQUFBLGdCQUFBOztBQUFBLDhCQUFBLENBQUE7O0FBQUEsc0JBQUEsU0FBQSxHQUFXLHNCQUFYLENBQUE7O0FBQUEsSUFFQSxnQkFBQSxHQUNFO0FBQUEsTUFBQSxZQUFBLEVBQWMsSUFBZDtBQUFBLE1BQ0EsUUFBQSxFQUFVLENBRFY7QUFBQSxNQUVBLFFBQUEsRUFBVSxDQUZWO0FBQUEsTUFHQSxVQUFBLEVBQVksS0FIWjtBQUFBLE1BSUEsUUFBQSxFQUFVLEtBSlY7S0FIRixDQUFBOztBQUFBLHNCQVNBLFFBQUEsR0FDRTtBQUFBLE1BQUEsd0JBQUEsRUFBMEIsc0JBQTFCO0tBVkYsQ0FBQTs7QUFBQSxzQkFZQSxZQUFBLEdBQWMsU0FBQyxDQUFELEdBQUE7QUFDWixNQUFBLElBQUMsQ0FBQSxPQUFPLENBQUMsT0FBVCxDQUFpQixDQUFqQixDQUFBLENBQUE7YUFDQSxJQUFDLENBQUEsUUFBRCxHQUFZLENBQUEsRUFGQTtJQUFBLENBWmQsQ0FBQTs7QUFBQSxzQkFnQkEsVUFBQSxHQUFZLFNBQUMsQ0FBRCxHQUFBO0FBQ1YsTUFBQSxJQUFDLENBQUEsS0FBRCxJQUFhLENBQUUsYUFBRixLQUFZLElBQWYsR0FBeUIsQ0FBRSxhQUEzQixHQUF3QyxDQUFsRCxDQUFBO0FBQUEsTUFDQSxJQUFDLENBQUEsS0FBRCxJQUFVLElBRFYsQ0FBQTthQUVBLElBQUMsQ0FBQSxZQUFELENBQWMsQ0FBZCxFQUhVO0lBQUEsQ0FoQlosQ0FBQTs7QUFBQSxzQkFxQkEsY0FBQSxHQUFnQixTQUFDLENBQUQsR0FBQTtBQUNkLFVBQUEsS0FBQTtBQUFBLGNBQU8sQ0FBQyxDQUFDLEtBQVQ7QUFBQSxhQUNPLEVBRFA7QUFFSSxVQUFBLENBQUMsQ0FBQyxjQUFGLENBQUEsQ0FBQSxDQUFBO0FBQUEsVUFDQSxLQUFBLEdBQVEsSUFBQyxDQUFBLEtBQUssQ0FBQyxHQUFQLENBQUEsQ0FEUixDQUFBO0FBR0EsVUFBQSxJQUFHLEtBQUg7QUFDRSxZQUFBLElBQUMsQ0FBQSxVQUFELENBQVksS0FBWixDQUFBLENBQUE7QUFDQSxZQUFBLElBQUcsS0FBTSxhQUFOLEtBQWtCLElBQWxCLElBQTJCLENBQUEsSUFBSyxDQUFBLFNBQW5DO3FCQUNFLElBQUMsQ0FBQSxZQUFELENBQUEsRUFERjthQUZGO1dBTEo7QUFDTztBQURQLGFBVU8sRUFWUDtBQVdJLFVBQUEsQ0FBQyxDQUFDLGNBQUYsQ0FBQSxDQUFBLENBQUE7QUFBQSxVQUNBLEtBQUEsR0FBUSxJQUFDLENBQUEsS0FBSyxDQUFDLEdBQVAsQ0FBQSxDQURSLENBQUE7QUFHQSxVQUFBLElBQUcsS0FBQSxJQUFVLElBQUMsQ0FBQSxTQUFYLElBQXlCLElBQUMsQ0FBQSxLQUE3QjtBQUNFLFlBQUEsS0FBQSxHQUFRLElBQUMsQ0FBQSxLQUFLLENBQUMsR0FBUCxDQUFBLENBQVIsQ0FBQTtBQUFBLFlBRUEsSUFBQyxDQUFBLFVBQUQsQ0FBWSxLQUFaLENBRkEsQ0FBQTtBQUFBLFlBR0EsSUFBQyxDQUFBLFlBQUQsQ0FBQSxDQUhBLENBREY7V0FBQSxNQUtLLElBQUcsSUFBQyxDQUFBLFNBQUQsSUFBZSxJQUFDLENBQUEsS0FBbkI7QUFDSCxZQUFBLElBQUMsQ0FBQSxZQUFELENBQUEsQ0FBQSxDQURHO1dBUkw7aUJBV0EsSUFBQyxDQUFBLFNBQUQsR0FBYSxDQUFBLElBQUssQ0FBQSxVQXRCdEI7QUFBQSxhQXlCTyxFQXpCUDtBQTBCSSxVQUFBLENBQUMsQ0FBQyxjQUFGLENBQUEsQ0FBQSxDQUFBO0FBRUEsVUFBQSxJQUFHLElBQUMsQ0FBQSxRQUFELEdBQVksSUFBQyxDQUFBLE9BQU8sQ0FBQyxNQUFULEdBQWdCLENBQS9CO0FBQ0UsWUFBQSxJQUFDLENBQUEsUUFBRCxJQUFhLENBQWIsQ0FBQTttQkFDQSxJQUFDLENBQUEsS0FBSyxDQUFDLEdBQVAsQ0FBVyxJQUFDLENBQUEsT0FBUSxDQUFBLElBQUMsQ0FBQSxRQUFELENBQXBCLEVBRkY7V0E1Qko7QUF5Qk87QUF6QlAsYUFnQ08sRUFoQ1A7QUFpQ0ksVUFBQSxDQUFDLENBQUMsY0FBRixDQUFBLENBQUEsQ0FBQTtBQUVBLFVBQUEsSUFBRyxJQUFDLENBQUEsUUFBRCxHQUFZLENBQWY7QUFDRSxZQUFBLElBQUMsQ0FBQSxRQUFELElBQWEsQ0FBQSxDQUFiLENBQUE7bUJBQ0EsSUFBQyxDQUFBLEtBQUssQ0FBQyxHQUFQLENBQVcsSUFBQyxDQUFBLE9BQVEsQ0FBQSxJQUFDLENBQUEsUUFBRCxDQUFwQixFQUZGO1dBbkNKO0FBQUEsT0FEYztJQUFBLENBckJoQixDQUFBOztBQUFBLHNCQTZEQSx3QkFBQSxHQUFpQyxTQUFBLEdBQUE7YUFBRyxJQUFDLENBQUEsb0JBQW9CLENBQUMsTUFBdEIsQ0FBNkIsR0FBN0IsRUFBSDtJQUFBLENBN0RqQyxDQUFBOztBQUFBLHNCQThEQSw0QkFBQSxHQUFpQyxTQUFBLEdBQUE7YUFBRyxJQUFDLENBQUEsb0JBQW9CLENBQUMsSUFBdEIsQ0FBMkIsSUFBM0IsQ0FBZ0MsQ0FBQyxNQUFqQyxDQUF3QyxDQUF4QyxFQUEyQyxDQUEzQyxFQUFIO0lBQUEsQ0E5RGpDLENBQUE7O0FBQUEsc0JBK0RBLHdCQUFBLEdBQWlDLFNBQUEsR0FBQTthQUFHLElBQUMsQ0FBQSxvQkFBb0IsQ0FBQyxPQUF0QixDQUE4QixHQUE5QixFQUFIO0lBQUEsQ0EvRGpDLENBQUE7O0FBQUEsc0JBaUVBLE1BQUEsR0FDRTtBQUFBLE1BQUEseUJBQUEsRUFBMkIsMEJBQTNCO0FBQUEsTUFDQSxtQ0FBQSxFQUFxQyw4QkFEckM7QUFBQSxNQUVBLHlCQUFBLEVBQTJCLDBCQUYzQjtLQWxFRixDQUFBOztBQXNFYSxJQUFBLGlCQUFDLE9BQUQsRUFBVSxRQUFWLEdBQUE7QUFDWCxVQUFBLFVBQUE7O1FBRHFCLFdBQVc7T0FDaEM7QUFBQSxxREFBQSxDQUFBO0FBQUEsMkNBQUEsQ0FBQTtBQUFBLDZEQUFBLENBQUE7QUFBQSxxREFBQSxDQUFBO0FBQUEseURBQUEsQ0FBQTtBQUFBLE1BQUEsSUFBQyxDQUFBLE9BQUQsR0FBVyxFQUFYLENBQUE7QUFBQSxNQUNBLElBQUMsQ0FBQSxRQUFELEdBQVksQ0FBQSxDQURaLENBQUE7QUFBQSxNQUVBLElBQUMsQ0FBQSxLQUFELEdBQVMsRUFGVCxDQUFBO0FBQUEsTUFHQSxJQUFDLENBQUEsU0FBRCxHQUFhLEtBSGIsQ0FBQTtBQUFBLE1BS0EsMENBQUEsU0FBQSxDQUxBLENBQUE7QUFBQSxNQU1BLElBQUMsQ0FBQSxLQUFLLENBQUMsT0FBUCxDQUFlLElBQUMsQ0FBQSxjQUFoQixDQU5BLENBQUE7QUFBQSxNQVFBLElBQUMsQ0FBQSxRQUFELEdBQVksQ0FBQyxDQUFDLE1BQUYsQ0FBUyxFQUFULEVBQWEsZ0JBQWIsQ0FSWixDQUFBO0FBVUEsTUFBQSxJQUFHLFlBQUEsSUFBaUIsWUFBWSxDQUFDLFFBQWpDO0FBQ0U7QUFBQSxhQUFBLFNBQUE7c0JBQUE7QUFDRSxVQUFBLElBQUMsQ0FBQSxRQUFTLENBQUEsQ0FBQSxDQUFWLEdBQWUsQ0FBZixDQURGO0FBQUEsU0FERjtPQVZBO0FBY0EsV0FBQSxhQUFBOzt3QkFBQTtBQUNFLFFBQUEsSUFBQyxDQUFBLFFBQVMsQ0FBQSxDQUFBLENBQVYsR0FBZSxDQUFmLENBREY7QUFBQSxPQWZXO0lBQUEsQ0F0RWI7O0FBQUEsc0JBeUZBLElBQUEsR0FBTSxTQUFDLElBQUQsR0FBQTtBQUNKLE1BQUEsSUFBRyxJQUFIO2VBQWEsSUFBQyxDQUFBLEtBQUQsR0FBUyxLQUF0QjtPQUFBLE1BQUE7ZUFDSyxJQUFDLENBQUEsTUFETjtPQURJO0lBQUEsQ0F6Rk4sQ0FBQTs7QUFBQSxzQkE2RkEsWUFBQSxHQUFjLFNBQUEsR0FBQTtBQUNaLFVBQUEsa0JBQUE7QUFBQTtBQUNFLFFBQUEsUUFBQTtBQUFXLGtCQUFPLElBQUMsQ0FBQSxJQUFELENBQUEsQ0FBUDtBQUFBLGlCQUNKLFFBREk7cUJBQ1UsSUFBSSxDQUFDLE9BQUwsQ0FBYSxJQUFDLENBQUEsS0FBZCxFQUFxQjtBQUFBLGdCQUFBLElBQUEsRUFBTSxJQUFOO2VBQXJCLEVBRFY7QUFBQSxpQkFFSixTQUZJO3FCQUVXLElBQUMsQ0FBQSxNQUZaO0FBQUE7cUJBQVgsQ0FBQTtBQUFBLFFBSUEsS0FBQSxHQUFRLElBQUksQ0FBQyxJQUFMLENBQVUsTUFBVixFQUFrQixRQUFsQixDQUpSLENBQUE7QUFBQSxRQUtBLE1BQU8sQ0FBQSxJQUFDLENBQUEsUUFBUSxDQUFDLFlBQVYsQ0FBUCxHQUFpQyxLQUxqQyxDQUFBO2VBTUEsSUFBQyxDQUFBLFVBQUQsQ0FBWSxLQUFaLEVBUEY7T0FBQSxjQUFBO0FBU0UsUUFESSxVQUNKLENBQUE7ZUFBQSxJQUFDLENBQUEsaUJBQUQsQ0FBbUIsQ0FBbkIsRUFURjtPQUFBO0FBV0UsUUFBQSxJQUFDLENBQUEsS0FBRCxHQUFTLEVBQVQsQ0FYRjtPQURZO0lBQUEsQ0E3RmQsQ0FBQTs7QUFBQSxzQkEyR0EsS0FBQSxHQUFPLFNBQUEsR0FBQTtBQUNMLFVBQUEsVUFBQTtBQUFBLE1BRE0sOERBQ04sQ0FBQTtBQUFBLE1BQUEsQ0FBQSxHQUFJLElBQUksQ0FBQyxJQUFMLENBQVUsR0FBVixDQUFBLElBQWtCLEdBQXRCLENBQUE7QUFBQSxNQUNBLENBQUEsR0FBSSxJQUFDLENBQUEsRUFBRSxDQUFDLElBQUosQ0FBQSxDQUFBLEdBQWEsQ0FBYixHQUFpQixJQURyQixDQUFBO0FBQUEsTUFFQSxJQUFDLENBQUEsSUFBRCxDQUFNLENBQUMsQ0FBQyxLQUFGLENBQVEsSUFBUixDQUFjLCtCQUF1QixDQUFDLElBQXRDLENBQTJDLElBQTNDLENBQU4sQ0FGQSxDQUFBO2FBR0EsT0FKSztJQUFBLENBM0dQLENBQUE7O0FBQUEsc0JBaUhBLFVBQUEsR0FBWSxTQUFDLEtBQUQsR0FBQTthQUNWLElBQUMsQ0FBQSxLQUFELENBQU8sT0FBQSxDQUFRLEtBQVIsRUFBZSxJQUFDLENBQUEsUUFBUSxDQUFDLFVBQXpCLEVBQXFDLElBQUMsQ0FBQSxRQUFRLENBQUMsUUFBL0MsRUFBeUQsSUFBQyxDQUFBLFFBQVEsQ0FBQyxRQUFuRSxDQUFQLEVBRFU7SUFBQSxDQWpIWixDQUFBOztBQUFBLHNCQW9IQSxpQkFBQSxHQUFtQixTQUFDLENBQUQsR0FBQTtBQUNqQixVQUFBLE1BQUE7QUFBQSxNQUFBLElBQUcsQ0FBQyxDQUFDLEtBQUw7QUFDRSxRQUFBLE1BQUEsR0FBUyxDQUFDLENBQUMsS0FBWCxDQURGO09BQUE7QUFJQyxNQUFBLHNCQUFHLE1BQU0sQ0FBRSxLQUFSLENBQWMsSUFBZCxDQUFvQixDQUFBLENBQUEsV0FBcEIsS0FBNEIsQ0FBQyxDQUFDLFFBQUYsQ0FBQSxDQUEvQjtBQUNHLFFBQUEsTUFBQSxHQUFTLEVBQUEsR0FBRSxDQUFDLENBQUMsQ0FBQyxRQUFGLENBQUEsQ0FBRCxDQUFGLEdBQWdCLElBQWhCLEdBQW9CLENBQUMsQ0FBQyxLQUEvQixDQURIO09BQUEsTUFBQTtBQUdDLFFBQUEsTUFBQSxHQUFTLENBQUMsQ0FBQyxRQUFGLENBQUEsQ0FBVCxDQUhEO09BSkQ7YUFRQSxJQUFDLENBQUEsS0FBRCxDQUFPLE1BQVAsRUFUaUI7SUFBQSxDQXBIbkIsQ0FBQTs7bUJBQUE7O0tBRG9CLEtBQUssQ0FBQyxXQUw1QixDQUFBOztBQUFBLEVBdUlBLE1BQU0sQ0FBQyxPQUFQLEdBQWlCLE9BdklqQixDQUFBO0FBQUE7Ozs7O0FDQUE7QUFBQSxNQUFBLGdHQUFBO0lBQUE7Ozt5SkFBQTs7OzJDQUFBOztBQUFBLEVBQUEsS0FBQSxHQUFhLE9BQUEsQ0FBUSxPQUFSLENBQWIsQ0FBQTs7QUFBQSxFQUNBLElBQUEsR0FBYSxPQUFBLENBQVEsb0JBQVIsQ0FEYixDQUFBOztBQUFBLEVBRUEsVUFBQSxHQUFhLE9BQUEsQ0FBUSxZQUFSLENBRmIsQ0FBQTs7QUFBQSxFQUdBLFVBQUEsR0FBYSxPQUFBLENBQVEsK0JBQVIsQ0FIYixDQUFBOztBQUFBLEVBSUEsU0FBQSxHQUFhLE9BQUEsQ0FBUSwwQkFBUixDQUpiLENBQUE7O0FBQUEsRUFLQSxTQUFBLEdBQWEsT0FBQSxDQUFRLGtCQUFSLENBTGIsQ0FBQTs7QUFBQSxFQVFNO0FBQ0osUUFBQSxnQkFBQTs7QUFBQSw2QkFBQSxDQUFBOztBQUFBLHFCQUFBLFNBQUEsR0FBVyxxQkFBWCxDQUFBOztBQUFBLElBRUEsZ0JBQUEsR0FDRTtBQUFBLE1BQUEsWUFBQSxFQUFjLElBQWQ7S0FIRixDQUFBOztBQUFBLHFCQUtBLFFBQUEsR0FDRTtBQUFBLE1BQUEsYUFBQSxFQUFlLFlBQWY7QUFBQSxNQUNBLGtCQUFBLEVBQW9CLGFBRHBCO0FBQUEsTUFFQSxRQUFBLEVBQVUsUUFGVjtBQUFBLE1BR0EsWUFBQSxFQUFjLE1BSGQ7S0FORixDQUFBOztBQUFBLHFCQVdBLFVBQUEsR0FBWSxTQUFBLEdBQUE7QUFDVixNQUFBLElBQUcsSUFBQyxDQUFBLElBQUksQ0FBQyxFQUFOLENBQVMsVUFBVCxDQUFIO2VBQTRCLElBQUMsQ0FBQSxJQUFJLENBQUMsT0FBTixDQUFjLEdBQWQsRUFBNUI7T0FBQSxNQUFBO2VBQ0ssSUFBQyxDQUFBLElBQUksQ0FBQyxNQUFOLENBQWEsR0FBYixFQURMO09BRFU7SUFBQSxDQVhaLENBQUE7O0FBQUEscUJBZUEsWUFBQSxHQUFjLFNBQUEsR0FBQTtBQUNaLFVBQUEsS0FBQTtBQUFBLE1BQUEsS0FBQSxHQUFRLElBQUMsQ0FBQSxHQUFELENBQUEsQ0FBUixDQUFBO0FBQUEsTUFDQSxJQUFDLENBQUEsVUFBRCxDQUFZLEtBQVosQ0FEQSxDQUFBO2FBRUEsWUFBWSxDQUFDLFFBQWIsR0FBd0IsSUFBSSxDQUFDLFNBQUwsQ0FBZSxDQUFDLENBQUMsTUFBRixDQUFTLEVBQVQsRUFBYSxJQUFDLENBQUEsUUFBZCxFQUF3QjtBQUFBLFFBQUEsTUFBQSxFQUFRLE1BQU0sQ0FBQyxNQUFmO0FBQUEsUUFBdUIsTUFBQSxFQUFRLElBQUMsQ0FBQSxLQUFoQztPQUF4QixDQUFmLEVBSFo7SUFBQSxDQWZkLENBQUE7O0FBQUEscUJBb0JBLG1CQUFBLEdBQXFCLFNBQUMsQ0FBRCxHQUFBO0FBQ25CLFVBQUEsTUFBQTtBQUFBLE1BQUEsTUFBQSxHQUFTLENBQUEsQ0FBRSxDQUFDLENBQUMsTUFBSixDQUFXLENBQUMsT0FBWixDQUFvQixRQUFwQixDQUFULENBQUE7QUFDQSxNQUFBLElBQUcsTUFBTSxDQUFDLEVBQVAsQ0FBVSxXQUFWLENBQUg7QUFDRSxRQUFBLElBQUMsQ0FBQSxjQUFELENBQUEsQ0FBQSxDQUFBO0FBQUEsUUFDQSxNQUFNLENBQUMsSUFBUCxDQUFZLE1BQVosQ0FEQSxDQURGO09BQUEsTUFBQTtBQUlFLFFBQUEsSUFBQyxDQUFBLGFBQUQsQ0FBQSxDQUFBLENBQUE7QUFBQSxRQUNBLE1BQU0sQ0FBQyxJQUFQLENBQVksT0FBWixDQURBLENBSkY7T0FEQTthQU9BLE1BQU0sQ0FBQyxXQUFQLENBQW1CLFVBQW5CLEVBUm1CO0lBQUEsQ0FwQnJCLENBQUE7O0FBQUEscUJBOEJBLGFBQUEsR0FBZSxTQUFBLEdBQUE7QUFDYixVQUFBLEtBQUE7QUFBQSxNQUFBLElBQUEsQ0FBQSxDQUFjLEtBQUEsR0FBUSxJQUFDLENBQUEsR0FBRCxDQUFBLENBQVIsQ0FBZDtBQUFBLGNBQUEsQ0FBQTtPQUFBO0FBQUEsTUFDQSxJQUFDLENBQUEsVUFBRCxDQUFZLEtBQVosQ0FEQSxDQUFBO2FBRUEsSUFBQyxDQUFBLFlBQUQsQ0FBQSxFQUhhO0lBQUEsQ0E5QmYsQ0FBQTs7QUFBQSxxQkFtQ0EsY0FBQSxHQUFnQixTQUFBLEdBQUE7YUFBRyxNQUFNLENBQUMsb0JBQVAsQ0FBNEIsTUFBTSxDQUFDLEtBQW5DLEVBQUg7SUFBQSxDQW5DaEIsQ0FBQTs7QUFBQSxxQkFxQ0EsWUFBQSxHQUFjLFNBQUEsR0FBQTtBQUNaLFVBQUEsa0JBQUE7QUFBQSxNQUFBLElBQUMsQ0FBQSxPQUFELENBQVMsU0FBVCxDQUFBLENBQUE7QUFDQTtBQUNFLFFBQUEsUUFBQTtBQUFXLGtCQUFPLElBQUMsQ0FBQSxJQUFELENBQUEsQ0FBUDtBQUFBLGlCQUNKLFFBREk7cUJBQ1UsSUFBSSxDQUFDLE9BQUwsQ0FBYSxJQUFDLENBQUEsS0FBZCxFQUFxQjtBQUFBLGdCQUFBLElBQUEsRUFBTSxJQUFOO0FBQUEsZ0JBQVUsT0FBQSxFQUFTLFFBQW5CO2VBQXJCLEVBRFY7QUFBQSxpQkFFSixTQUZJO3FCQUVXLElBQUMsQ0FBQSxNQUZaO0FBQUE7cUJBQVgsQ0FBQTtBQUFBLFFBSUEsS0FBQSxHQUFRLElBQUksQ0FBQyxJQUFMLENBQVUsTUFBVixFQUFrQixRQUFsQixDQUpSLENBQUE7QUFBQSxRQUtBLE1BQU8sQ0FBQSxJQUFDLENBQUEsUUFBUSxDQUFDLFlBQVYsQ0FBUCxHQUFpQyxLQUxqQyxDQUFBO0FBQUEsUUFNQSxJQUFDLENBQUEsT0FBTyxDQUFDLFVBQVQsQ0FBb0IsS0FBcEIsQ0FOQSxDQURGO09BQUEsY0FBQTtBQVNFLFFBREksVUFDSixDQUFBO0FBQUEsUUFBQSxJQUFDLENBQUEsT0FBTyxDQUFDLGlCQUFULENBQTJCLENBQTNCLENBQUEsQ0FURjtPQURBO2FBWUEsSUFBQyxDQUFBLEtBQUQsR0FBUyxHQWJHO0lBQUEsQ0FyQ2QsQ0FBQTs7QUFBQSxxQkFvREEsWUFBQSxHQUFjLFNBQUMsQ0FBRCxHQUFBO0FBQ1osTUFBQSxJQUFDLENBQUEsT0FBTyxDQUFDLE9BQVQsQ0FBaUIsQ0FBakIsQ0FBQSxDQUFBO2FBQ0EsSUFBQyxDQUFBLFFBQUQsR0FBWSxDQUFBLEVBRkE7SUFBQSxDQXBEZCxDQUFBOztBQUFBLHFCQXdEQSxVQUFBLEdBQVksU0FBQyxDQUFELEdBQUE7QUFDVixNQUFBLElBQUMsQ0FBQSxLQUFELElBQWEsQ0FBRSxhQUFGLEtBQVksSUFBZixHQUF5QixDQUFFLGFBQTNCLEdBQXdDLENBQWxELENBQUE7QUFBQSxNQUNBLElBQUMsQ0FBQSxLQUFELElBQVUsSUFEVixDQUFBO2FBRUEsSUFBQyxDQUFBLFlBQUQsQ0FBYyxDQUFkLEVBSFU7SUFBQSxDQXhEWixDQUFBOztBQUFBLHFCQTZEQSxvQkFBQSxHQUFpQyxTQUFBLEdBQUE7YUFBRyxJQUFDLENBQUEsVUFBVSxDQUFDLE1BQVosQ0FBbUIsR0FBbkIsRUFBSDtJQUFBLENBN0RqQyxDQUFBOztBQUFBLHFCQThEQSx3QkFBQSxHQUFpQyxTQUFBLEdBQUE7YUFBRyxJQUFDLENBQUEsVUFBVSxDQUFDLElBQVosQ0FBaUIsSUFBakIsQ0FBc0IsQ0FBQyxNQUF2QixDQUE4QixDQUE5QixFQUFpQyxDQUFqQyxFQUFIO0lBQUEsQ0E5RGpDLENBQUE7O0FBQUEscUJBK0RBLG9CQUFBLEdBQWlDLFNBQUEsR0FBQTthQUFHLElBQUMsQ0FBQSxVQUFVLENBQUMsT0FBWixDQUFvQixHQUFwQixFQUFIO0lBQUEsQ0EvRGpDLENBQUE7O0FBQUEscUJBaUVBLFVBQUEsR0FBWSxTQUFDLENBQUQsR0FBQTtBQUNWLFVBQUEsRUFBQTtBQUFBLE1BQUEsRUFBQSxHQUFLLENBQUEsQ0FBRSxDQUFDLENBQUMsTUFBSixDQUFXLENBQUMsT0FBWixDQUFvQixRQUFwQixDQUFMLENBQUE7QUFDQSxNQUFBLElBQVUsRUFBRSxDQUFDLEVBQUgsQ0FBTSxXQUFOLENBQVY7QUFBQSxjQUFBLENBQUE7T0FEQTtBQUdBLE1BQUEsSUFBRyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUgsQ0FBTSxvQkFBTixDQUFELENBQUEsSUFBaUMsSUFBQyxDQUFBLGNBQUQsQ0FBQSxDQUFsQyxDQUFBLElBQXdELElBQUMsQ0FBQSxlQUFELENBQUEsQ0FBM0Q7ZUFDRSxFQUFFLENBQUMsUUFBSCxDQUFZLFVBQVosQ0FBdUIsQ0FBQyxRQUF4QixDQUFBLENBQWtDLENBQUMsV0FBbkMsQ0FBK0MsVUFBL0MsRUFERjtPQUpVO0lBQUEsQ0FqRVosQ0FBQTs7QUFBQSxxQkF3RUEsSUFBQSxHQUFNLFNBQUMsSUFBRCxHQUFBO0FBQ0osTUFBQSxJQUFHLElBQUg7ZUFBYSxJQUFDLENBQUEsT0FBRCxDQUFTLFlBQVQsRUFBdUIsSUFBQyxDQUFBLEtBQUQsR0FBUyxJQUFoQyxFQUFiO09BQUEsTUFBQTtlQUNLLElBQUMsQ0FBQSxNQUROO09BREk7SUFBQSxDQXhFTixDQUFBOztBQUFBLHFCQTRFQSxNQUFBLEdBQ0U7QUFBQSxNQUFBLG1CQUFBLEVBQXFCLFlBQXJCO0FBQUEsTUFDQSxtQkFBQSxFQUFxQixjQURyQjtBQUFBLE1BRUEsa0JBQUEsRUFBb0IscUJBRnBCO0FBQUEsTUFHQSw4QkFBQSxFQUFnQyxnQkFIaEM7QUFBQSxNQUlBLHdCQUFBLEVBQTBCLHNCQUoxQjtBQUFBLE1BS0Esd0JBQUEsRUFBMEIsMEJBTDFCO0FBQUEsTUFNQSx3QkFBQSxFQUEwQixzQkFOMUI7QUFBQSxNQU9BLGdDQUFBLEVBQWtDLFlBUGxDO0FBQUEsTUFRQSxpQ0FBQSxFQUFtQyxZQVJuQztBQUFBLE1BU0EsaUJBQUEsRUFBbUIsZUFUbkI7QUFBQSxNQVVBLGtCQUFBLEVBQW9CLGVBVnBCO0FBQUEsTUFXQSxhQUFBLEVBQWUsbUJBWGY7S0E3RUYsQ0FBQTs7QUEwRmEsSUFBQSxnQkFBQyxPQUFELEVBQVUsUUFBVixHQUFBO0FBQ1gsVUFBQSxVQUFBOztRQURxQixXQUFXO09BQ2hDO0FBQUEscURBQUEsQ0FBQTtBQUFBLHlEQUFBLENBQUE7QUFBQSxNQUFBLElBQUMsQ0FBQSxPQUFELEdBQVcsRUFBWCxDQUFBO0FBQUEsTUFDQSxJQUFDLENBQUEsUUFBRCxHQUFZLENBQUEsQ0FEWixDQUFBO0FBQUEsTUFFQSxJQUFDLENBQUEsS0FBRCxHQUFTLEVBRlQsQ0FBQTtBQUFBLE1BS0EseUNBQUEsU0FBQSxDQUxBLENBQUE7QUFBQSxNQU9BLElBQUMsQ0FBQSxRQUFELEdBQVksQ0FBQyxDQUFDLE1BQUYsQ0FBUyxFQUFULEVBQWEsZ0JBQWIsQ0FQWixDQUFBO0FBU0EsTUFBQSxJQUFHLFlBQUEsSUFBaUIsWUFBWSxDQUFDLFFBQWpDO0FBQ0U7QUFBQSxhQUFBLFNBQUE7c0JBQUE7QUFDRSxVQUFBLElBQUMsQ0FBQSxRQUFTLENBQUEsQ0FBQSxDQUFWLEdBQWUsQ0FBZixDQUFBO0FBQ0Esa0JBQU8sQ0FBUDtBQUFBLGlCQUNPLFFBRFA7QUFBQSxpQkFDaUIsYUFEakI7QUFFSSxjQUFBLE1BQU8sQ0FBQSxDQUFBLENBQVAsR0FBWSxDQUFaLENBRko7QUFBQSxXQUZGO0FBQUEsU0FERjtPQVRBO0FBZ0JBLFdBQUEsYUFBQTs7d0JBQUE7QUFDRSxRQUFBLElBQUMsQ0FBQSxRQUFTLENBQUEsQ0FBQSxDQUFWLEdBQWUsQ0FBZixDQURGO0FBQUEsT0FoQkE7QUFBQSxNQW1CQSxVQUFVLENBQUMsTUFBTSxDQUFDLFFBQWxCLEdBQ0U7QUFBQSxRQUFBLFdBQUEsRUFBYSxDQUFDLFNBQUQsQ0FBYjtBQUFBLFFBQ0EsR0FBQSxFQUFLLFNBQUMsRUFBRCxHQUFBO0FBQ0gsY0FBQSxNQUFBO0FBQUEsVUFBQSxNQUFBLEdBQVMsS0FBQSxDQUFNLEVBQUUsQ0FBQyxTQUFILENBQWEsWUFBYixDQUFBLEdBQTZCLENBQW5DLENBQXFDLENBQUMsSUFBdEMsQ0FBMkMsR0FBM0MsQ0FBVCxDQUFBO2lCQUNBLEVBQUUsQ0FBQyxnQkFBSCxDQUFvQixNQUFwQixFQUE0QixLQUE1QixFQUFtQyxRQUFuQyxFQUZHO1FBQUEsQ0FETDtPQXBCRixDQUFBO0FBQUEsTUF5QkEsSUFBQyxDQUFBLGVBQUQsSUFBQyxDQUFBLGFBQWUsVUFBVSxDQUFDLFlBQVgsQ0FBd0IsSUFBQyxDQUFBLFdBQVksQ0FBQSxDQUFBLENBQXJDLEVBQXlDO0FBQUEsUUFDdkQsSUFBQSxFQUFNLGtCQURpRDtBQUFBLFFBRXZELEtBQUEsRUFBTyxTQUZnRDtBQUFBLFFBR3ZELFdBQUEsRUFBYSxJQUgwQztBQUFBLFFBSXZELE9BQUEsRUFBUyxDQUo4QztBQUFBLFFBS3ZELE1BQUEsRUFBUSxVQUwrQztPQUF6QyxFQXpCaEIsQ0FBQTtBQUFBLE1BZ0NBLElBQUMsQ0FBQSxPQUFELEdBQVcsQ0FBQSxDQUFFLElBQUMsQ0FBQSxVQUFVLENBQUMsaUJBQVosQ0FBQSxDQUFGLENBaENYLENBQUE7QUFBQSxNQWlDQSxJQUFDLENBQUEsT0FBTyxDQUFDLFFBQVQsQ0FBa0IsU0FBbEIsQ0FqQ0EsQ0FBQTtBQWtDQSxNQUFBLElBQUcsSUFBQyxDQUFBLFFBQVEsQ0FBQyxNQUFiO0FBQ0UsUUFBQSxJQUFDLENBQUEsR0FBRCxDQUFLLElBQUMsQ0FBQSxRQUFRLENBQUMsTUFBZixDQUFBLENBQUE7QUFBQSxRQUNBLElBQUMsQ0FBQSxXQUFELENBQUEsQ0FEQSxDQURGO09BbkNXO0lBQUEsQ0ExRmI7O0FBQUEscUJBaUlBLE1BQUEsR0FBUSxTQUFDLFdBQUQsR0FBQTthQUNOLElBQUMsQ0FBQSxXQUFELENBQWEsV0FBYixFQURNO0lBQUEsQ0FqSVIsQ0FBQTs7QUFBQSxxQkFvSUEsR0FBQSxHQUFLLFNBQUMsS0FBRCxHQUFBO0FBQ0gsTUFBQSxJQUFHLEtBQUg7ZUFBYyxJQUFDLENBQUEsVUFBVSxDQUFDLEdBQUcsQ0FBQyxRQUFoQixDQUF5QixFQUFBLEdBQUcsS0FBSCxHQUFTLFVBQWxDLEVBQWQ7T0FBQSxNQUFBO2VBQ0ssSUFBQyxDQUFBLFVBQVUsQ0FBQyxHQUFHLENBQUMsUUFBaEIsQ0FBQSxFQURMO09BREc7SUFBQSxDQXBJTCxDQUFBOztBQUFBLHFCQXdJQSxXQUFBLEdBQWEsU0FBQyxJQUFELEdBQUE7QUFDWCxVQUFBLDREQUFBO0FBQUEsOEJBQUEsQ0FBQTtBQUFBLDREQUFBLENBQUE7QUFBQSxNQUFBLElBQUMsQ0FBQSxPQUFELEdBQVcsSUFBWCxDQUFBOzs7QUFDQTs7OztZQUFBLENBQUE7QUFBQSxVQUFNLEtBQUMsQ0FBQSxRQUFTLENBQUEsSUFBQSxDQUFWOzs7dUJBQXNCOzs7O1lBQXRCLENBQU4sQ0FBQTtBQUFBLHFDQUFBOzs7O1VBQ0EsS0FBQyxDQUFBLEdBQUQsQ0FBSyxPQUFMO2lCQUNBLEtBQUMsQ0FBQSxXQUFELENBQUE7O2dCQUpXO0lBQUEsQ0F4SWIsQ0FBQTs7QUFBQSxxQkE4SUEsV0FBQSxHQUFhLFNBQUEsR0FBQTthQUFHLElBQUMsQ0FBQSxVQUFVLENBQUMsY0FBWixDQUEyQixJQUFDLENBQUEsVUFBVSxDQUFDLEdBQUcsQ0FBQyxTQUFoQixDQUFBLENBQUEsR0FBOEIsQ0FBekQsRUFBSDtJQUFBLENBOUliLENBQUE7O0FBQUEscUJBZ0pBLGNBQUEsR0FBZ0IsU0FBQSxHQUFBO2FBQUcsSUFBQyxDQUFBLFdBQUQsQ0FBYSxJQUFDLENBQUEsT0FBZCxFQUFIO0lBQUEsQ0FoSmhCLENBQUE7O0FBQUEscUJBa0pBLEtBQUEsR0FBTyxTQUFBLEdBQUE7YUFBRyxJQUFDLENBQUEsR0FBRCxDQUFLLEVBQUwsRUFBSDtJQUFBLENBbEpQLENBQUE7O0FBQUEscUJBb0pBLGVBQUEsR0FBaUIsU0FBQSxHQUFBO0FBQ2YsVUFBQSxrQkFBQTtBQUFBLE1BQUEsSUFBQSxDQUFBLENBQU8sS0FBQSxHQUFRLElBQUMsQ0FBQSxHQUFELENBQUEsQ0FBUixDQUFQO0FBQ0UsUUFBQSxJQUFDLENBQUEsSUFBRCxDQUFNLFNBQU4sQ0FBQSxDQUFBO0FBQ0EsZUFBTyxJQUFQLENBRkY7T0FBQTtBQUlBO0FBQ0UsUUFBQSxRQUFBLEdBQVcsSUFBSSxDQUFDLE9BQUwsQ0FBYSxLQUFiLEVBQW9CO0FBQUEsVUFBQSxJQUFBLEVBQU0sSUFBTjtBQUFBLFVBQVUsT0FBQSxFQUFTLFFBQW5CO1NBQXBCLENBQVgsQ0FBQTtBQUFBLFFBQ0EsSUFBQyxDQUFBLEdBQUQsQ0FBSyxRQUFMLENBREEsQ0FBQTtBQUFBLFFBRUEsSUFBQyxDQUFBLElBQUQsQ0FBTSxTQUFOLENBRkEsQ0FBQTtBQUdBLGVBQU8sSUFBUCxDQUpGO09BQUEsY0FBQTtBQU1FLFFBREksVUFDSixDQUFBO0FBQUEsUUFBQSxJQUFDLENBQUEsT0FBTyxDQUFDLGlCQUFULENBQTJCLENBQTNCLENBQUEsQ0FBQTtBQUNBLGVBQU8sS0FBUCxDQVBGO09BTGU7SUFBQSxDQXBKakIsQ0FBQTs7QUFBQSxxQkFrS0EsY0FBQSxHQUFnQixTQUFBLEdBQUE7QUFDZCxVQUFBLDBCQUFBO0FBQUEsTUFBQSxJQUFBLENBQUEsQ0FBTyxLQUFBLEdBQVEsSUFBQyxDQUFBLEdBQUQsQ0FBQSxDQUFSLENBQVA7QUFDRSxRQUFBLElBQUMsQ0FBQSxJQUFELENBQU0sUUFBTixDQUFBLENBQUE7QUFDQSxlQUFPLElBQVAsQ0FGRjtPQUFBO0FBSUE7QUFDRSxRQUFBLFFBQUEsR0FBVyxTQUFTLENBQUMsS0FBVixDQUFnQixLQUFoQixFQUF1QjtBQUFBLFVBQUMsZUFBQSxFQUFpQixJQUFsQjtBQUFBLFVBQXdCLE1BQUEsRUFBUSxJQUFoQztTQUF2QixDQUFYLENBQUE7QUFBQSxRQUNBLElBQUMsQ0FBQSxHQUFELENBQUssRUFBQSxHQUFHLFFBQVEsQ0FBQyxJQUFqQixDQURBLENBQUE7QUFBQSxRQUVBLElBQUMsQ0FBQSxJQUFELENBQU0sUUFBTixDQUZBLENBQUE7QUFHQSxlQUFPLElBQVAsQ0FKRjtPQUFBLGNBQUE7QUFNRSxRQURJLFVBQ0osQ0FBQTtBQUFBLFFBQUEsTUFBQSxHQUFTLElBQUMsQ0FBQSxPQUFPLENBQUMsaUJBQVQsQ0FBMkIsQ0FBM0IsQ0FBVCxDQUFBO0FBQUEsUUFDQSxJQUFDLENBQUEsS0FBRCxDQUFPLE1BQVAsQ0FEQSxDQUFBO0FBRUEsZUFBTyxLQUFQLENBUkY7T0FMYztJQUFBLENBbEtoQixDQUFBOztBQUFBLHFCQWlMQSxhQUFBLEdBQWUsU0FBQyxDQUFELEdBQUE7QUFDYixNQUFBLENBQUMsQ0FBQyxlQUFGLENBQUEsQ0FBQSxDQUFBO0FBQUEsTUFDQSxDQUFDLENBQUMsY0FBRixDQUFBLENBREEsQ0FBQTthQUVBLElBQUMsQ0FBQSxNQUFNLENBQUMsV0FBUixDQUFvQixXQUFwQixFQUFpQyxDQUFDLENBQUMsSUFBRixLQUFVLFVBQTNDLEVBSGE7SUFBQSxDQWpMZixDQUFBOztBQUFBLHFCQXNMQSxpQkFBQSxHQUFtQixTQUFDLENBQUQsR0FBQTtBQUVqQixVQUFBLCtCQUFBO0FBQUEsTUFBQSxJQUFDLENBQUEsYUFBRCxDQUFlLENBQWYsQ0FBQSxDQUFBO0FBR0EsTUFBQSxJQUF1Qix1QkFBdkI7QUFBQSxRQUFBLENBQUEsR0FBSSxDQUFDLENBQUMsYUFBTixDQUFBO09BSEE7QUFBQSxNQUlBLEtBQUEsR0FBUSxDQUFDLENBQUMsTUFBTSxDQUFDLEtBQVQsSUFBa0IsQ0FBQyxDQUFDLFlBQVksQ0FBQyxLQUp6QyxDQUFBO0FBT0E7V0FBQSw0Q0FBQTt5QkFBQTtBQUFBLHNCQUFBLElBQUMsQ0FBQSxTQUFELENBQVcsSUFBWCxFQUFBLENBQUE7QUFBQTtzQkFUaUI7SUFBQSxDQXRMbkIsQ0FBQTs7QUFBQSxxQkFpTUEsU0FBQSxHQUFXLFNBQUMsSUFBRCxHQUFBO0FBQ1QsVUFBQSxJQUFBO0FBQUEsTUFBQyxPQUFRLEtBQVIsSUFBRCxDQUFBO0FBQ0EsTUFBQSxJQUFHLG9CQUFvQixDQUFDLElBQXJCLENBQTBCLElBQTFCLENBQUg7ZUFDRSxJQUFDLENBQUEsVUFBRCxDQUFZLElBQVosRUFERjtPQUFBLE1BRUssSUFBRyw2QkFBNkIsQ0FBQyxJQUE5QixDQUFtQyxJQUFuQyxDQUFIO2VBQ0gsSUFBQyxDQUFBLFdBQUQsQ0FBYSxJQUFiLEVBREc7T0FBQSxNQUFBO2VBR0gsSUFBQyxDQUFBLE9BQU8sQ0FBQyxLQUFULENBQWdCLG9CQUFBLEdBQW9CLElBQXBDLEVBSEc7T0FKSTtJQUFBLENBak1YLENBQUE7O0FBQUEscUJBME1BLFVBQUEsR0FBWSxTQUFDLElBQUQsR0FBQTtBQUNWLFVBQUEsMEZBQUE7QUFBQSw4QkFBQSxDQUFBO0FBQUEsNERBQUEsQ0FBQTtBQUFBLE1BQUMsT0FBUSxLQUFSLElBQUQsQ0FBQTtBQUFBLE1BQ0EsTUFBTSxDQUFDLFdBQVAsTUFBTSxDQUFDLFNBQVcsR0FEbEIsQ0FBQTtBQUFBLE1BRUEsT0FBQSxHQUFXLGdCQUFBLEdBQWdCLE1BQU0sQ0FBQyxNQUFNLENBQUMsTUFBOUIsR0FBcUMsR0FGaEQsQ0FBQTtBQUFBLE1BR0EsSUFBQyxDQUFBLE9BQU8sQ0FBQyxLQUFULENBQWdCLFNBQUEsR0FBUyxJQUFULEdBQWMsTUFBZCxHQUFvQixPQUFwQyxDQUhBLENBQUE7QUFBQSxNQUtBLElBQUMsQ0FBQSxjQUFELElBQUMsQ0FBQSxZQUFjLEdBQUEsQ0FBQSxVQUxmLENBQUE7OztBQU1BOzs7O1lBQUEsQ0FBQTtBQUFBLFVBQU0sS0FBQyxDQUFBLFNBQVMsQ0FBQyxTQUFYLENBQXFCO0FBQUEsWUFBQyxJQUFBLEVBQU0sSUFBUDtXQUFyQjs7O2dCQUF5Qzt1QkFBUTs7OztZQUFqRCxDQUFOLENBQUE7QUFBQSxxQ0FBQTs7OztBQUNBLFVBQUEsSUFBbUMsTUFBQSxLQUFVLE9BQTdDO0FBQUEsbUJBQU8sS0FBQyxDQUFBLEdBQUQsQ0FBTSxTQUFBLEdBQVMsT0FBZixDQUFQLENBQUE7O1VBRUEsTUFBTSxDQUFDLE1BQU0sQ0FBQyxJQUFkLENBQW1CLE9BQW5CO1VBQ0EsS0FBQTtBQUFRLG9CQUFPLElBQUMsQ0FBQSxJQUFELENBQUEsQ0FBUDtBQUFBLG1CQUNELFFBREM7dUJBQ2dCLElBQUEsR0FBSSxJQUFKLEdBQVMsZUFBVCxHQUNmLE9BRGUsR0FDUCxJQURPLEdBRTNCLENBQUMsSUFBQyxDQUFBLEdBQUQsQ0FBQSxDQUFNLENBQUMsSUFBUCxDQUFBLENBQUQsRUFIVztBQUFBLG1CQUtELFNBTEM7dUJBS2lCLEtBQUEsR0FBSyxJQUFMLEdBQVUsbUJBQVYsR0FDWixPQURZLEdBQ0osSUFESSxHQUU1QixDQUFDLElBQUMsQ0FBQSxHQUFELENBQUEsQ0FBTSxDQUFDLElBQVAsQ0FBQSxDQUFELEVBUFc7QUFBQTs7VUFTUixLQUFDLENBQUEsR0FBRCxDQUFLLEtBQUw7aUJBQ0EsS0FBQyxDQUFBLFVBQVUsQ0FBQyxjQUFaLENBQTJCLENBQTNCOztnQkFyQlU7SUFBQSxDQTFNWixDQUFBOztBQUFBLHFCQWlPQSxXQUFBLEdBQWEsU0FBQyxJQUFELEdBQUE7QUFDWCxVQUFBLHVGQUFBO0FBQUEsOEJBQUEsQ0FBQTtBQUFBLDREQUFBLENBQUE7QUFBQSxNQUFDLE9BQVEsS0FBUixJQUFELENBQUE7O1FBQ0EsTUFBTSxDQUFDLGNBQWU7T0FEdEI7QUFBQSxNQUVBLE9BQUEsR0FBVyxxQkFBQSxHQUFxQixNQUFNLENBQUMsV0FBVyxDQUFDLE1BQXhDLEdBQStDLEdBRjFELENBQUE7QUFBQSxNQUdBLElBQUMsQ0FBQSxPQUFPLENBQUMsS0FBVCxDQUFnQixTQUFBLEdBQVMsSUFBVCxHQUFjLE1BQWQsR0FBb0IsT0FBcEMsQ0FIQSxDQUFBO0FBQUEsTUFLQSxJQUFDLENBQUEsY0FBRCxJQUFDLENBQUEsWUFBYyxHQUFBLENBQUEsVUFMZixDQUFBOzs7QUFNQTs7OztZQUFBLENBQUE7QUFBQSxVQUFNLEtBQUMsQ0FBQSxTQUFTLENBQUMsU0FBWCxDQUFxQjtBQUFBLFlBQUMsSUFBQSxFQUFNLElBQVA7QUFBQSxZQUFhLE1BQUEsRUFBUSxNQUFyQjtXQUFyQjs7O2dCQUF5RDt1QkFBUTs7OztZQUFqRSxDQUFOLENBQUE7QUFBQSxxQ0FBQTs7OztBQUNBLFVBQUEsSUFBZ0MsTUFBQSxLQUFVLE9BQTFDO0FBQUEsbUJBQU8sS0FBQyxDQUFBLEdBQUQsQ0FBTSxTQUFBLEdBQVMsSUFBZixDQUFQLENBQUE7O1VBRUEsTUFBTSxDQUFDLFdBQVcsQ0FBQyxJQUFuQixDQUF3QixJQUF4QjtVQUNBLEtBQUE7QUFBUSxvQkFBTyxJQUFDLENBQUEsSUFBRCxDQUFBLENBQVA7QUFBQSxtQkFDRCxRQURDO3VCQUNnQixJQUFBLEdBQUksSUFBSixHQUFTLGlGQUFULEdBRVcsT0FGWCxHQUVtQix5RkFGbkIsR0FLRSxPQUxGLEdBS1UsZ0JBTFYsR0FNZCxPQU5jLEdBTU4sSUFOTSxHQU8zQixDQUFDLElBQUMsQ0FBQSxHQUFELENBQUEsQ0FBTSxDQUFDLElBQVAsQ0FBQSxDQUFELEVBUlc7QUFBQSxtQkFVRCxTQVZDO3VCQVVpQixLQUFBLEdBQUssSUFBTCxHQUFVLG9GQUFWLEdBRVksT0FGWixHQUVvQiwrRkFGcEIsR0FLRSxPQUxGLEdBS1UscUJBTFYsR0FNWCxPQU5XLEdBTUgsSUFORyxHQU81QixDQUFDLElBQUMsQ0FBQSxHQUFELENBQUEsQ0FBTSxDQUFDLElBQVAsQ0FBQSxDQUFELEVBakJXO0FBQUE7O1VBbUJSLEtBQUMsQ0FBQSxHQUFELENBQUssS0FBTDtpQkFDQSxLQUFDLENBQUEsVUFBVSxDQUFDLGNBQVosQ0FBMkIsQ0FBM0I7O2dCQS9CVztJQUFBLENBak9iLENBQUE7O0FBQUEscUJBa1FBLGNBQUEsR0FBZ0IsU0FBQyxNQUFELEdBQUE7QUFDZCxVQUFBLEtBQUE7O2FBQVMsQ0FBQyxjQUFlO09BQXpCO0FBQ0EsTUFBQSxJQUF5QyxlQUFVLElBQUMsQ0FBQSxRQUFRLENBQUMsV0FBcEIsRUFBQSxNQUFBLEtBQXpDO2VBQUEsSUFBQyxDQUFBLFFBQVEsQ0FBQyxXQUFXLENBQUMsSUFBdEIsQ0FBMkIsTUFBM0IsRUFBQTtPQUZjO0lBQUEsQ0FsUWhCLENBQUE7O2tCQUFBOztLQURtQixLQUFLLENBQUMsV0FSM0IsQ0FBQTs7QUFBQSxFQStRQSxNQUFNLENBQUMsT0FBUCxHQUFpQixNQS9RakIsQ0FBQTtBQUFBOzs7OztBQ0FBO0FBQUEsTUFBQSxpQ0FBQTtJQUFBOzttU0FBQTs7QUFBQSxFQUFBLEtBQUEsR0FBVyxPQUFBLENBQVEsT0FBUixDQUFYLENBQUE7O0FBQUEsRUFDQSxJQUFBLEdBQVcsT0FBQSxDQUFRLG9CQUFSLENBRFgsQ0FBQTs7QUFBQSxFQUVBLEtBQUEsR0FBVyxPQUFBLENBQVEsVUFBUixDQUZYLENBQUE7O0FBQUEsRUFLQSxNQUFBLEdBQVMsU0FBQSxHQUFBO0FBQ1AsUUFBQSxxQ0FBQTtBQUFBLElBRFEscUJBQU0sOERBQ2QsQ0FBQTtBQUFBLFNBQUEsMkNBQUE7cUJBQUE7QUFBQSxXQUFBLFVBQUE7eUJBQUE7QUFBQSxRQUFBLElBQUssQ0FBQSxHQUFBLENBQUwsR0FBWSxLQUFaLENBQUE7QUFBQSxPQUFBO0FBQUEsS0FBQTtXQUNBLEtBRk87RUFBQSxDQUxULENBQUE7O0FBQUEsRUFVTTtBQUNKLDRCQUFBLENBQUE7O0FBQUEsb0JBQUEsU0FBQSxHQUFXLG9CQUFYLENBQUE7O0FBQUEsb0JBRUEsWUFBQSxHQUNFO0FBQUEsTUFBQSxlQUFBLEVBQWlCLFFBQWpCO0FBQUEsTUFDQSxXQUFBLEVBQWEsS0FEYjtBQUFBLE1BRUEsU0FBQSxFQUFXLEtBRlg7S0FIRixDQUFBOztBQUFBLG9CQU9BLE1BQUEsR0FBUSxTQUFBLEdBQUEsQ0FQUixDQUFBOztBQUFBLG9CQVNBLFVBQUEsR0FBWSxTQUFBLEdBQUE7QUFDVixNQUFBLENBQUEsQ0FBRSxNQUFGLENBQVMsQ0FBQyxNQUFWLENBQWlCLElBQUMsQ0FBQSxNQUFsQixDQUFBLENBQUE7YUFDQSxDQUFBLENBQUUsTUFBRixDQUFTLENBQUMsRUFBVixDQUFhLHFCQUFiLEVBQW9DLElBQUMsQ0FBQSxNQUFyQyxFQUZVO0lBQUEsQ0FUWixDQUFBOztBQUFBLG9CQWFBLE9BQUEsR0FBUyxTQUFBLEdBQUE7QUFDUCxNQUFBLENBQUEsQ0FBRSxNQUFGLENBQVMsQ0FBQyxHQUFWLENBQWMsUUFBZCxFQUF3QixJQUFDLENBQUEsTUFBekIsQ0FBQSxDQUFBO2FBQ0EsQ0FBQSxDQUFFLE1BQUYsQ0FBUyxDQUFDLEdBQVYsQ0FBYyxxQkFBZCxFQUFxQyxJQUFDLENBQUEsTUFBdEMsRUFGTztJQUFBLENBYlQsQ0FBQTs7QUFBQSxvQkFpQkEsU0FBQSxHQUFlLEVBakJmLENBQUE7O0FBQUEsb0JBa0JBLFVBQUEsR0FBZSxTQUFDLEVBQUQsR0FBQTthQUFRLElBQUMsQ0FBQSxTQUFTLENBQUMsSUFBWCxDQUFnQixFQUFoQixFQUFSO0lBQUEsQ0FsQmYsQ0FBQTs7QUFBQSxvQkFtQkEsYUFBQSxHQUFlLFNBQUMsRUFBRCxHQUFBO2FBQVEsSUFBQyxDQUFBLFNBQVMsQ0FBQyxNQUFYLENBQW1CLElBQUMsQ0FBQSxTQUFTLENBQUMsT0FBWCxDQUFtQixFQUFuQixDQUFuQixFQUEyQyxDQUEzQyxFQUFSO0lBQUEsQ0FuQmYsQ0FBQTs7QUFBQSxvQkFxQkEsR0FBQSxHQUFLLFNBQUMsTUFBRCxHQUFBO0FBQ0gsVUFBQSxhQUFBOztRQURJLFNBQVMsU0FBQSxHQUFBO09BQ2I7QUFBQSxNQUFBLElBQUMsQ0FBQSxVQUFELENBQVksTUFBWixDQUFBLENBQUE7QUFBQSxNQUVBLGFBQUEsR0FBZ0IsQ0FBQSxTQUFBLEtBQUEsR0FBQTtlQUFBLFNBQUEsR0FBQTtBQUVkLGNBQUEsa0JBQUE7QUFBQSxVQUFBLEtBQUMsQ0FBQSxLQUFLLENBQUMsS0FBUCxDQUFBLENBQUEsQ0FBQTtBQUVBO0FBQUEsZUFBQSwyQ0FBQTswQkFBQTtBQUFBLFlBQUEsRUFBQSxDQUFBLENBQUEsQ0FBQTtBQUFBLFdBRkE7QUFBQSxVQUlBLEtBQUMsQ0FBQSxRQUFRLENBQUMsTUFBVixDQUFpQixLQUFDLENBQUEsS0FBbEIsQ0FKQSxDQUFBO0FBQUEsVUFNQSxLQUFDLENBQUEsS0FBRCxHQUFTLGdCQUFBLENBQWlCLGFBQWpCLENBTlQsQ0FBQTtpQkFRQSxLQUFDLENBQUEsS0FBSyxDQUFDLEdBQVAsQ0FBQSxFQVZjO1FBQUEsRUFBQTtNQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FGaEIsQ0FBQTthQWFBLElBQUMsQ0FBQSxLQUFELEdBQVMsZ0JBQUEsQ0FBaUIsYUFBakIsRUFkTjtJQUFBLENBckJMLENBQUE7O0FBcUNhLElBQUEsZUFBQyxPQUFELEVBQVUsWUFBVixHQUFBOztRQUFVLGVBQWU7T0FDcEM7QUFBQSxNQUFBLHdDQUFBLFNBQUEsQ0FBQSxDQUFBO0FBQUEsTUFFQSxJQUFDLENBQUEsWUFBRCxHQUFxQixNQUFBLENBQU8sRUFBUCxFQUFXLElBQUMsQ0FBQSxZQUFaLEVBQTBCLFlBQTFCLENBRnJCLENBQUE7QUFBQSxNQUlBLElBQUMsQ0FBQSxLQUFELEdBQXlCLElBQUEsSUFBSSxDQUFDLEtBQUwsQ0FBVyxJQUFDLENBQUEsWUFBWSxDQUFDLGVBQXpCLENBSnpCLENBQUE7QUFBQSxNQUtBLElBQUMsQ0FBQSxLQUFLLENBQUMsS0FBUCxHQUFxQixJQUFDLENBQUEsRUFBRSxDQUFDLEtBQUosQ0FBQSxDQUxyQixDQUFBO0FBQUEsTUFNQSxJQUFDLENBQUEsS0FBSyxDQUFDLE1BQVAsR0FBcUIsSUFBQyxDQUFBLEVBQUUsQ0FBQyxNQUFKLENBQUEsQ0FOckIsQ0FBQTtBQUFBLE1BT0EsSUFBQyxDQUFBLEtBQUssQ0FBQyxXQUFQLEdBQXFCLElBQUMsQ0FBQSxZQUFZLENBQUMsV0FQbkMsQ0FBQTtBQUFBLE1BU0EsTUFBTSxDQUFDLEtBQVAsR0FBZSxJQUFDLENBQUEsS0FUaEIsQ0FBQTtBQUFBLE1BVUEsTUFBTSxDQUFDLEdBQVAsR0FBZSxJQUFDLENBQUEsS0FBRCxDQUFPLElBQUMsQ0FBQSxHQUFSLENBVmYsQ0FBQTtBQUFBLE1BV0EsTUFBTSxDQUFDLElBQVAsR0FBZSxJQVhmLENBQUE7QUFBQSxNQWFBLElBQUMsQ0FBQSxNQUFELENBQUEsQ0FiQSxDQUFBO0FBQUEsTUFjQSxJQUFDLENBQUEsVUFBRCxDQUFBLENBZEEsQ0FBQTtBQUFBLE1BZUEsSUFBQyxDQUFBLFFBQUQsR0FBWSxJQUFDLENBQUEsTUFmYixDQUFBO0FBQUEsTUFnQkEsSUFBQyxDQUFBLGNBQUQsR0FBa0IsSUFBQyxDQUFBLE1BaEJuQixDQURXO0lBQUEsQ0FyQ2I7O0FBQUEsb0JBd0RBLE1BQUEsR0FBUSxTQUFBLEdBQUE7QUFFTixNQUFBLElBQUMsQ0FBQSxRQUFELEdBQVksSUFBSSxDQUFDLGtCQUFMLENBQXdCLElBQUMsQ0FBQSxLQUFLLENBQUMsS0FBL0IsRUFDd0IsSUFBQyxDQUFBLEtBQUssQ0FBQyxNQUQvQixFQUV3QixJQUZ4QixFQUd3QixJQUFDLENBQUEsWUFBWSxDQUFDLFdBSHRDLEVBSXdCLElBQUMsQ0FBQSxZQUFZLENBQUMsU0FKdEMsQ0FBWixDQUFBO0FBQUEsTUFLQSxJQUFDLENBQUEsS0FBRCxHQUFZLEdBQUEsQ0FBQSxLQUxaLENBQUE7QUFBQSxNQU1BLElBQUMsQ0FBQSxNQUFELEdBQVksQ0FBQSxDQUFFLElBQUMsQ0FBQSxLQUFLLENBQUMsVUFBVCxDQU5aLENBQUE7QUFBQSxNQVNBLE1BQU0sQ0FBQyxRQUFQLEdBQWtCLElBQUMsQ0FBQSxRQVRuQixDQUFBO0FBQUEsTUFVQSxNQUFNLENBQUMsS0FBUCxHQUFrQixJQUFDLENBQUEsS0FWbkIsQ0FBQTtBQUFBLE1BWUEsSUFBQyxDQUFBLEVBQUUsQ0FBQyxNQUFKLENBQVcsSUFBQyxDQUFBLFFBQVEsQ0FBQyxJQUFyQixDQVpBLENBQUE7QUFBQSxNQWFBLElBQUMsQ0FBQSxTQUFELENBQUEsQ0FiQSxDQUFBO2FBY0EsSUFBQyxDQUFBLEVBQUUsQ0FBQyxNQUFKLENBQVcsSUFBQyxDQUFBLE1BQVosRUFoQk07SUFBQSxDQXhEUixDQUFBOztBQUFBLG9CQTBFQSxTQUFBLEdBQVcsU0FBQSxHQUFBO2FBQUcsSUFBQyxDQUFBLE1BQU0sQ0FBQyxHQUFSLENBQVk7QUFBQSxRQUFBLE9BQUEsRUFBUyxNQUFUO09BQVosRUFBSDtJQUFBLENBMUVYLENBQUE7O0FBQUEsb0JBMkVBLFNBQUEsR0FBVyxTQUFBLEdBQUE7YUFBRyxJQUFDLENBQUEsTUFBTSxDQUFDLEdBQVIsQ0FBWTtBQUFBLFFBQUEsT0FBQSxFQUFTLE9BQVQ7QUFBQSxRQUFrQixRQUFBLEVBQVUsVUFBNUI7T0FBWixFQUFIO0lBQUEsQ0EzRVgsQ0FBQTs7QUFBQSxvQkE2RUEsTUFBQSxHQUFRLFNBQUEsR0FBQTtBQUNOLFVBQUEseUJBQUE7QUFBQSxNQURPLGtFQUNQLENBQUE7QUFBQSxXQUFBLCtDQUFBOzZCQUFBO0FBQ0UsUUFBQSxJQUFHLEtBQUssQ0FBQyxPQUFUO0FBQ0UsVUFBQSxLQUFLLENBQUMsS0FBTixHQUFjLElBQWQsQ0FBQTtBQUFBLFVBQ0EsS0FBQSxHQUFRLEtBQUssQ0FBQyxPQURkLENBREY7U0FBQTtBQUFBLFFBR0EsSUFBQyxDQUFBLEtBQUssQ0FBQyxRQUFQLENBQWdCLEtBQWhCLENBSEEsQ0FERjtBQUFBLE9BQUE7YUFLQSxLQU5NO0lBQUEsQ0E3RVIsQ0FBQTs7QUFBQSxvQkFxRkEsUUFBQSxHQUFVLFNBQUEsR0FBQSxDQXJGVixDQUFBOztBQUFBLG9CQXVGQSxNQUFBLEdBQVEsU0FBQSxHQUFBO0FBQ04sVUFBQSxtQkFBQTtBQUFBLE1BRE8sa0VBQ1AsQ0FBQTtBQUFBLE1BQUEsSUFBQSxDQUFBLFFBQTBDLENBQUMsTUFBM0M7QUFBQSxRQUFBLFFBQUEsR0FBVyxJQUFDLENBQUEsS0FBSyxDQUFDLFFBQWxCLENBQUE7T0FBQTtBQUVBLFdBQUEsMkNBQUE7NkJBQUE7QUFDRSxRQUFBLElBQUcsS0FBSyxDQUFDLE9BQVQ7QUFDRSxVQUFBLEtBQUssQ0FBQyxLQUFOLEdBQWMsSUFBZCxDQUFBO0FBQUEsVUFDQSxLQUFBLEdBQVEsS0FBSyxDQUFDLE9BRGQsQ0FERjtTQUFBO0FBQUEsUUFHQSxJQUFDLENBQUEsS0FBSyxDQUFDLFdBQVAsQ0FBbUIsS0FBbkIsQ0FIQSxDQURGO0FBQUEsT0FGQTthQU9BLEtBUk07SUFBQSxDQXZGUixDQUFBOztBQUFBLG9CQWlHQSxjQUFBLEdBQWdCLFNBQUEsR0FBQSxDQWpHaEIsQ0FBQTs7QUFBQSxvQkFtR0EsT0FBQSxHQUFTLFNBQUEsR0FBQTtBQUNQLE1BQUEsSUFBQyxDQUFBLGNBQUQsQ0FBQSxDQUFBLENBQUE7QUFBQSxNQUNBLElBQUMsQ0FBQSxLQUFLLENBQUMsR0FBUCxDQUFBLENBREEsQ0FBQTthQUVBLElBQUMsQ0FBQSxRQUFRLENBQUMsTUFBVixDQUFpQixJQUFDLENBQUEsS0FBbEIsRUFITztJQUFBLENBbkdULENBQUE7O0FBQUEsb0JBd0dBLFVBQUEsR0FBWSxTQUFDLEtBQUQsR0FBQTthQUFXLElBQUMsQ0FBQSxLQUFLLENBQUMsUUFBUSxDQUFDLE9BQWhCLENBQXlCLEtBQUssQ0FBQyxPQUFOLElBQWlCLEtBQTFDLEVBQVg7SUFBQSxDQXhHWixDQUFBOztBQUFBLG9CQTBHQSxZQUFBLEdBQWMsU0FBQSxHQUFBO0FBQ1osVUFBQSxRQUFBO0FBQUEsTUFEYSxrRUFDYixDQUFBO0FBQUEsTUFBQSxJQUFDLENBQUEsY0FBRCxhQUFnQixRQUFoQixDQUFBLENBQUE7YUFDQSxJQUFDLENBQUEsTUFBRCxhQUFRLFFBQVIsRUFGWTtJQUFBLENBMUdkLENBQUE7O0FBQUEsb0JBOEdBLFVBQUEsR0FBWSxTQUFBLEdBQUE7QUFDVixVQUFBLFFBQUE7QUFBQSxNQURXLGtFQUNYLENBQUE7YUFBQSxJQUFDLENBQUEsV0FBRCxhQUFhLGFBQUEsUUFBQSxDQUFBLFFBQWEsQ0FBQSxDQUFBLENBQWIsQ0FBYixFQURVO0lBQUEsQ0E5R1osQ0FBQTs7QUFBQSxvQkFpSEEsV0FBQSxHQUFhLFNBQUEsR0FBQTtBQUNYLFVBQUEsc0JBQUE7QUFBQSxNQURZLHlHQUFhLDBCQUN6QixDQUFBO0FBQUEsTUFBQSxJQUFDLENBQUEsY0FBRCxhQUFnQixRQUFoQixDQUFBLENBQUE7YUFDQSxJQUFDLENBQUEsYUFBRCxhQUFlLGFBQUEsUUFBQSxDQUFBLFFBQWEsQ0FBQSxRQUFBLENBQWIsQ0FBZixFQUZXO0lBQUEsQ0FqSGIsQ0FBQTs7QUFBQSxvQkFxSEEsYUFBQSxHQUFlLFNBQUEsR0FBQTtBQUNiLFVBQUEsa0RBQUE7QUFBQSxNQURjLHlHQUFhLDBCQUMzQixDQUFBO0FBQUEsV0FBQSwrQ0FBQTs2QkFBQTtBQUNFLFFBQUEsSUFBRyxLQUFLLENBQUMsT0FBVDtBQUNFLFVBQUEsS0FBSyxDQUFDLEtBQU4sR0FBYyxJQUFkLENBQUE7QUFBQSxVQUNBLEtBQUEsR0FBUSxLQUFLLENBQUMsT0FEZCxDQURGO1NBREY7QUFBQSxPQUFBO0FBSUEsV0FBQSxpREFBQTs2QkFBQTtBQUFBLFFBQUEsSUFBQyxDQUFBLEtBQUssQ0FBQyxVQUFQLENBQW1CLEtBQUssQ0FBQyxPQUFOLElBQWlCLEtBQXBDLEVBQTRDLFFBQTVDLENBQUEsQ0FBQTtBQUFBLE9BSkE7YUFLQSxLQU5hO0lBQUEsQ0FySGYsQ0FBQTs7aUJBQUE7O0tBRGtCLEtBQUssQ0FBQyxXQVYxQixDQUFBOztBQUFBLEVBeUlBLE1BQU0sQ0FBQyxPQUFQLEdBQWlCLEtBeklqQixDQUFBO0FBQUE7Ozs7O0FDQUE7QUFBQSxNQUFBLEtBQUE7O0FBQUEsRUFBQSxLQUFBLEdBQ0U7QUFBQSxJQUFBLE1BQUEsRUFBUSxTQUFDLElBQUQsRUFBTyxFQUFQLEdBQUE7YUFBYyxJQUFJLENBQUMsTUFBTCxDQUFBLENBQUEsR0FBZ0IsQ0FBQyxFQUFBLEdBQUssSUFBTixDQUFoQixHQUE4QixLQUE1QztJQUFBLENBQVI7QUFBQSxJQUVBLEdBQUEsRUFBSyxTQUFDLEdBQUQsRUFBTSxRQUFOLEVBQWdCLFFBQWhCLEVBQTBCLFNBQTFCLEVBQXFDLFNBQXJDLEdBQUE7YUFDSCxDQUFDLENBQUMsU0FBQSxHQUFZLFNBQWIsQ0FBQSxHQUEwQixDQUFDLENBQUMsR0FBQSxHQUFNLFFBQVAsQ0FBQSxHQUFtQixDQUFDLFFBQUEsR0FBVyxRQUFaLENBQXBCLENBQTNCLENBQUEsR0FBeUUsVUFEdEU7SUFBQSxDQUZMO0FBQUEsSUFLQSxlQUFBLEVBQWlCLFNBQUMsTUFBRCxHQUFBO0FBQ2YsTUFBQSxNQUFBLEdBQVksTUFBSCxHQUFlLE1BQWYsR0FBMkIsR0FBcEMsQ0FBQTtBQUNBLE1BQUEsSUFBRyxJQUFJLENBQUMsTUFBTCxDQUFBLENBQUEsR0FBZ0IsTUFBbkI7ZUFBK0IsQ0FBQSxFQUEvQjtPQUFBLE1BQUE7ZUFBdUMsRUFBdkM7T0FGZTtJQUFBLENBTGpCO0FBQUEsSUFTQSxTQUFBLEVBQVcsU0FBQyxJQUFELEVBQU8sRUFBUCxHQUFBO2FBQWMsSUFBSSxDQUFDLEtBQUwsQ0FBVyxJQUFJLENBQUMsTUFBTCxDQUFBLENBQUEsR0FBZ0IsQ0FBQyxFQUFBLEVBQUEsR0FBTyxJQUFSLENBQWhCLEdBQWdDLElBQTNDLEVBQWQ7SUFBQSxDQVRYO0FBQUEsSUFXQSxVQUFBLEVBQVksU0FBQyxNQUFELEdBQUE7QUFDVixNQUFBLE1BQUEsR0FBWSxNQUFILEdBQWUsTUFBZixHQUEyQixHQUFwQyxDQUFBO2FBQ0EsSUFBSSxDQUFDLE1BQUwsQ0FBQSxDQUFBLEdBQWdCLE9BRk47SUFBQSxDQVhaO0dBREYsQ0FBQTs7QUFBQSxFQWlCQSxNQUFNLENBQUMsT0FBUCxHQUFpQixLQWpCakIsQ0FBQTtBQUFBOzs7OztBQ0FBO0FBQUEsTUFBQSx3Q0FBQTs7OzJDQUFBOztBQUFBLEVBQU07MkJBQ0o7O0FBQUEsd0JBQUEsT0FBQSxHQUFTLElBQVQsQ0FBQTs7QUFBQSx3QkFFQSxPQUFBLEdBQVMsU0FBQyxRQUFELEdBQUE7QUFDUCxVQUFBLENBQUE7QUFBQSxNQUFBLElBQUcsSUFBQyxDQUFBLE9BQUo7QUFDRSxRQUFBLElBQUMsQ0FBQSxPQUFELEdBQVcsS0FBWCxDQUFBO0FBQ0E7aUJBQ0ssUUFBSCxDQUFBLEVBREY7U0FBQSxjQUFBO0FBR0UsVUFESSxVQUNKLENBQUE7QUFBQSxnQkFBTSxDQUFOLENBSEY7U0FBQTtBQUtFLFVBQUEsSUFBQyxDQUFBLE9BQUQsR0FBVyxJQUFYLENBTEY7U0FGRjtPQUFBLE1BQUE7ZUFTSyxRQUFILENBQUEsRUFURjtPQURPO0lBQUEsQ0FGVCxDQUFBOztBQUFBLHdCQWNBLEdBQUEsR0FBSyxHQWRMLENBQUE7O0FBQUEsd0JBZUEsUUFBQSxHQUFVLENBZlYsQ0FBQTs7QUFBQSx3QkFpQkEsS0FBQSxHQUFPLFNBQUMsT0FBRCxHQUFBO0FBQ0wsVUFBQSxtREFBQTtBQUFBLDhCQUFBLENBQUE7QUFBQSw0REFBQSxDQUFBO0FBQUEsTUFBQSxJQUFDLENBQUEsY0FBRCxJQUFDLENBQUEsWUFBa0IsSUFBQSxTQUFBLENBQVUsSUFBQyxDQUFBLEdBQVgsRUFBZ0IsSUFBQyxDQUFBLFFBQWpCLEVBQW5CLENBQUE7QUFDQSxNQUFBLElBQUEsQ0FBQSxPQUFBO0FBQUEsZUFBTyxJQUFDLENBQUEsU0FBUyxDQUFDLEtBQWxCLENBQUE7T0FEQTs7O0FBRUE7Ozs7WUFBQSxDQUFBO0FBQUEsVUFBTSxLQUFDLENBQUEsU0FBUyxDQUFDLFdBQVg7O1lBQUEsQ0FBTixDQUFBO0FBQUEscUNBQUE7Ozs7aUJBQ0EsT0FBQSxDQUFRLEtBQUMsQ0FBQSxTQUFTOzs7WUFBbEI7O2dCQUpLO0lBQUEsQ0FqQlAsQ0FBQTs7QUFBQSx3QkF1QkEsVUFBQSxHQUFZLFNBQUEsR0FBQTtBQUNWLE1BQUEsSUFBQyxDQUFBLFNBQVMsQ0FBQyxLQUFYLEdBQW1CLEVBQW5CLENBQUE7YUFDQSxJQUFDLENBQUEsU0FBUyxDQUFDLEtBQVgsR0FBbUIsRUFGVDtJQUFBLENBdkJaLENBQUE7O0FBQUEsd0JBMkJBLFFBQUEsR0FDRTtBQUFBLE1BQUEsTUFBQSxFQUFRLFNBQVI7QUFBQSxNQUNBLFFBQUEsRUFBVSxPQURWO0tBNUJGLENBQUE7O0FBQUEsd0JBK0JBLFFBQUEsR0FBVSxTQUFDLE1BQUQsRUFBYyxRQUFkLEdBQUE7QUFDUixVQUFBLHNCQUFBOztRQURTLFNBQVM7T0FDbEI7O1FBRHNCLFdBQVc7T0FDakM7QUFBQSxNQUFBLElBQWtFLFFBQUEsS0FBWSxJQUE5RTtBQUFBLFFBQUEsUUFBQSxHQUFpQixDQUFDLENBQUMsTUFBRixDQUFTLEVBQVQsRUFBYSxJQUFDLENBQUEsUUFBZCxFQUF3QixRQUF4QixFQUFrQyxNQUFsQyxDQUFqQixDQUFBO09BQUE7QUFBQSxNQUNBLE1BQUEsR0FBaUIsR0FBQSxDQUFBLFVBRGpCLENBQUE7QUFBQSxNQUVBLE1BQU0sQ0FBQyxNQUFQLEdBQWlCLFNBQUMsQ0FBRCxHQUFBO2VBQU8sUUFBUSxDQUFDLE9BQVQsQ0FBaUIsTUFBTSxDQUFDLE1BQXhCLEVBQVA7TUFBQSxDQUZqQixDQUFBO0FBQUEsTUFHQSxNQUFNLENBQUMsT0FBUCxHQUFpQixRQUFRLENBQUMsS0FIMUIsQ0FBQTtBQUFBLE1BS0EsSUFBQTtBQUFPLGdCQUFPLFFBQVEsQ0FBQyxNQUFoQjtBQUFBLGVBQ0EsYUFEQTttQkFDb0IsTUFBTSxDQUFDLGlCQUFQLENBQXlCLFFBQVEsQ0FBQyxJQUFsQyxFQUF3QyxRQUFRLENBQUMsUUFBakQsRUFEcEI7QUFBQSxlQUVBLGNBRkE7bUJBRW9CLE1BQU0sQ0FBQyxrQkFBUCxDQUEwQixRQUFRLENBQUMsSUFBbkMsRUFBeUMsUUFBUSxDQUFDLFFBQWxELEVBRnBCO0FBQUEsZUFHQSxTQUhBO21CQUdvQixNQUFNLENBQUMsYUFBUCxDQUFxQixRQUFRLENBQUMsSUFBOUIsRUFBb0MsUUFBUSxDQUFDLFFBQTdDLEVBSHBCO0FBQUEsZUFJQSxNQUpBO21CQUlvQixNQUFNLENBQUMsVUFBUCxDQUFrQixRQUFRLENBQUMsSUFBM0IsRUFBaUMsUUFBUSxDQUFDLFFBQTFDLEVBSnBCO0FBQUE7VUFMUCxDQUFBO2FBV0EsT0FaUTtJQUFBLENBL0JWLENBQUE7O0FBQUEsd0JBNkNBLFNBQUEsR0FBVyxTQUFDLE1BQUQsRUFBYyxRQUFkLEdBQUE7QUFDVCxVQUFBLGtEQUFBOztRQURVLFNBQVM7T0FDbkI7O1FBRHVCLFdBQVc7T0FDbEM7QUFBQSxNQUFBLEVBQUEsR0FBTSxHQUFBLENBQUEsSUFBUSxDQUFDLFVBQWYsQ0FBQTtBQUFBLE1BRUEsUUFBQSxHQUFlLENBQUMsQ0FBQyxNQUFGLENBQVMsRUFBVCxFQUFhLElBQUMsQ0FBQSxRQUFkLEVBQXdCLFFBQXhCLEVBQWtDLE1BQWxDLENBRmYsQ0FBQTtBQUFBLE1BR0EsWUFBQSxHQUFlLFFBQVEsQ0FBQyxPQUh4QixDQUFBO0FBQUEsTUFJQSxVQUFBLEdBQWUsUUFBUSxDQUFDLEtBSnhCLENBQUE7QUFBQSxNQU1BLFFBQVEsQ0FBQyxPQUFULEdBQW1CLEVBQUUsQ0FBQyxFQUFILENBQU0sU0FBTixDQUFnQjs7OztxQkFBTzs7Ozs7O1FBTjFDLENBQUE7QUFBQSxNQU9BLFFBQVEsQ0FBQyxLQUFULEdBQW1CLEVBQUUsQ0FBQyxFQUFILENBQU0sT0FBTixDQUFjOzs7O3FCQUFPOzs7Ozs7UUFQeEMsQ0FBQTtBQUFBLE1BU0EsT0FBQSxHQUFVLFNBQUMsSUFBRCxHQUFBO0FBQ1IsWUFBQSxtRUFBQTtBQUFBLGdDQUFBLENBQUE7QUFBQSw4REFBQSxDQUFBO0FBQUEsUUFBQSxNQUFBLEdBQVMsSUFBQyxDQUFBLFFBQUQsQ0FBVSxRQUFWLEVBQW9CLElBQXBCLENBQVQsQ0FBQTs7O0FBQ0E7OztjQUFBLENBQUE7QUFBQSxZQUFNLEVBQUUsQ0FBQyxJQUFIOzs7eUJBQWM7Ozs7Y0FBZCxDQUFOLENBQUE7QUFBQSx1Q0FBQTs7OztBQUNBLG9CQUFPLE1BQVA7QUFBQSxtQkFDTyxTQURQO0FBQ3NCLGdCQUFBLFlBQUEsQ0FBYSxNQUFNLENBQUMsTUFBcEIsQ0FBQSxDQUR0QjtBQUNPO0FBRFAsbUJBRU8sT0FGUDtBQUVvQixnQkFBQSxVQUFBLENBQVcsQ0FBWCxDQUFBLENBRnBCO0FBQUE7bUJBR0EsSUFBQSxDQUFBOztrQkFOUTtNQUFBLENBVFYsQ0FBQTtBQUFBLE1BaUJBLE9BQU8sQ0FBQyxLQUFSLEdBQWdCLFNBQUMsVUFBRCxHQUFBO0FBQ2QsWUFBQSxLQUFBO0FBQUEsUUFBQSxJQUFtQyxNQUFuQztBQUFBLGlCQUFPLE1BQU0sQ0FBQyxLQUFQLENBQWEsVUFBYixDQUFQLENBQUE7U0FBQTtBQUFBLFFBQ0EsS0FBQSxHQUFRLElBQUMsQ0FBQSxLQUFELENBQUEsQ0FBUSxDQUFDLE9BQVQsQ0FBaUIsT0FBakIsQ0FEUixDQUFBO0FBRUEsUUFBQSxJQUE2QixLQUFBLEdBQVEsQ0FBQSxDQUFyQztBQUFBLFVBQUEsSUFBQyxDQUFBLEtBQUQsQ0FBQSxDQUFRLENBQUMsTUFBVCxDQUFnQixLQUFoQixFQUF1QixDQUF2QixDQUFBLENBQUE7U0FGQTtBQUdBLFFBQUEsSUFBc0IsSUFBQyxDQUFBLFNBQXZCO0FBQUEsVUFBQSxJQUFDLENBQUEsU0FBUyxDQUFDLEtBQVgsRUFBQSxDQUFBO1NBSEE7ZUFTQSxRQVZjO01BQUEsQ0FqQmhCLENBQUE7QUE2QkEsTUFBQSxJQUFBLENBQUEsSUFBdUIsQ0FBQSxPQUF2QjtBQUFBLGVBQU8sT0FBUCxDQUFBO09BN0JBO0FBQUEsTUE4QkEsSUFBQyxDQUFBLEtBQUQsQ0FBTyxPQUFQLENBOUJBLENBQUE7YUErQkEsUUFoQ1M7SUFBQSxDQTdDWCxDQUFBOztBQUFBLHdCQStFQSxTQUFBLEdBQVcsU0FBQyxPQUFELEVBQVUsRUFBVixFQUFjLEtBQWQsR0FBQTtBQUNULFVBQUEsMEVBQUE7QUFBQSw4QkFBQSxDQUFBO0FBQUEsNERBQUEsQ0FBQTs7UUFEdUIsUUFBUTtPQUMvQjtBQUFBLE1BQUEsRUFBQSxHQUFTLElBQUEsSUFBSSxDQUFDLFVBQUwsQ0FBQSxDQUFULENBQUE7QUFBQSxNQUVBLE9BQU8sQ0FBQyxPQUFSLEdBQWtCLEVBQUUsQ0FBQyxFQUFILENBQU0sU0FBTixDQUFnQjs7OztxQkFBTzs7Ozs7O1FBRnpDLENBQUE7QUFBQSxNQUdBLE9BQU8sQ0FBQyxLQUFSLEdBQWtCLEVBQUUsQ0FBQyxFQUFILENBQU0sT0FBTixDQUFjOzs7O3FCQUFPOzs7Ozs7UUFIdkMsQ0FBQTtBQUtBLE1BQUEsSUFBRyxLQUFIO0FBQWMsUUFBQSxJQUFDLENBQUEsU0FBRCxDQUFXLE9BQVgsQ0FBQSxDQUFkO09BQUEsTUFBQTtBQUNLLFFBQUEsSUFBQyxDQUFBLFFBQUQsQ0FBVSxPQUFWLENBQUEsQ0FETDtPQUxBOzs7QUFRQTs7OztZQUFBLENBQUE7QUFBQSxVQUFNLEVBQUUsQ0FBQyxJQUFIOzs7dUJBQWM7Ozs7WUFBZCxDQUFOLENBQUE7QUFBQSxxQ0FBQTs7OztpQkFDQSxFQUFBLENBQUcsTUFBSCxFQUFXLE1BQUEsSUFBVSxDQUFyQjs7Z0JBVlM7SUFBQSxDQS9FWCxDQUFBOztxQkFBQTs7TUFERixDQUFBOztBQUFBLEVBNkZBLE1BQU0sQ0FBQyxPQUFQLEdBQWlCLFNBN0ZqQixDQUFBO0FBQUE7Ozs7O0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaGdZQTtBQUFBLEVBQUEsT0FBQSxDQUFRLGFBQVIsQ0FBQSxDQUFBOztBQUFBLEVBRUEsT0FBQSxDQUFRLE9BQVIsQ0FGQSxDQUFBOztBQUFBLEVBR0EsT0FBQSxDQUFRLGlCQUFSLENBSEEsQ0FBQTs7QUFBQSxFQUlBLE9BQUEsQ0FBUSxtQkFBUixDQUpBLENBQUE7O0FBQUEsRUFLQSxPQUFBLENBQVEsaUJBQVIsQ0FMQSxDQUFBOztBQUFBLEVBT0EsT0FBQSxDQUFRLGNBQVIsQ0FQQSxDQUFBOztBQUFBLEVBUUEsT0FBQSxDQUFRLG1CQUFSLENBUkEsQ0FBQTs7QUFBQSxFQVdBLE1BQU0sQ0FBQyxLQUFQLEdBQWUsT0FBQSxDQUFRLFNBQVIsQ0FYZixDQUFBOztBQUFBLEVBYUEsQ0FBQSxDQUFFLFNBQUEsR0FBQTtBQUNBLFFBQUEsR0FBQTtBQUFBLElBQUEsSUFBVSxNQUFNLENBQUMsR0FBakI7QUFBQSxZQUFBLENBQUE7S0FBQTtBQUFBLElBQ0EsR0FBQSxHQUFNLE9BQUEsQ0FBUSxzQkFBUixDQUROLENBQUE7V0FFQSxNQUFNLENBQUMsR0FBUCxHQUFpQixJQUFBLEdBQUEsQ0FBSTtBQUFBLE1BQUEsRUFBQSxFQUFJLENBQUEsQ0FBRSxNQUFGLENBQUo7S0FBSixFQUhqQjtFQUFBLENBQUYsQ0FiQSxDQUFBO0FBQUE7Ozs7O0FDQUE7QUFBQSxNQUFBLCtGQUFBO0lBQUE7OztzQkFBQTs7OzJDQUFBOztBQUFBLEVBQUEsS0FBQSxHQUFVLElBQUMsQ0FBQSxLQUFELElBQVUsT0FBQSxDQUFRLE9BQVIsQ0FBcEIsQ0FBQTs7QUFBQSxFQUNDLFFBQVMsTUFBVCxLQURELENBQUE7O0FBQUEsRUFLQSxJQUFBLEdBQ0U7QUFBQSxJQUFBLE1BQUEsRUFBUSxTQUFDLE1BQUQsR0FBQTthQUNOLE1BQUEsd0NBQVcsTUFBTSxDQUFDLGVBQWxCLElBQTRCLE1BQU0sQ0FBQyxJQUQ3QjtJQUFBLENBQVI7QUFBQSxJQUdBLE9BQUEsRUFBUyxJQUhUO0FBQUEsSUFLQSxPQUFBLEVBQVMsU0FBQyxRQUFELEdBQUE7QUFDUCxVQUFBLENBQUE7QUFBQSxNQUFBLElBQUcsSUFBQyxDQUFBLE9BQUo7QUFDRSxRQUFBLElBQUMsQ0FBQSxPQUFELEdBQVcsS0FBWCxDQUFBO0FBQ0E7aUJBQ0ssUUFBSCxDQUFBLEVBREY7U0FBQSxjQUFBO0FBR0UsVUFESSxVQUNKLENBQUE7QUFBQSxnQkFBTSxDQUFOLENBSEY7U0FBQTtBQUtFLFVBQUEsSUFBQyxDQUFBLE9BQUQsR0FBVyxJQUFYLENBTEY7U0FGRjtPQUFBLE1BQUE7ZUFTSyxRQUFILENBQUEsRUFURjtPQURPO0lBQUEsQ0FMVDtBQUFBLElBaUJBLEdBQUEsRUFBSyxHQWpCTDtBQUFBLElBa0JBLFFBQUEsRUFBVSxDQWxCVjtBQUFBLElBb0JBLEtBQUEsRUFBTyxTQUFDLE9BQUQsR0FBQTtBQUNMLFVBQUEsbURBQUE7QUFBQSw4QkFBQSxDQUFBO0FBQUEsNERBQUEsQ0FBQTtBQUFBLE1BQUEsSUFBQyxDQUFBLGNBQUQsSUFBQyxDQUFBLFlBQWtCLElBQUEsU0FBQSxDQUFVLElBQUMsQ0FBQSxHQUFYLEVBQWdCLElBQUMsQ0FBQSxRQUFqQixFQUFuQixDQUFBO0FBQ0EsTUFBQSxJQUFBLENBQUEsT0FBQTtBQUFBLGVBQU8sSUFBQyxDQUFBLFNBQVMsQ0FBQyxLQUFsQixDQUFBO09BREE7OztBQUVBOzs7WUFBQSxDQUFBO0FBQUEsVUFBTSxLQUFDLENBQUEsU0FBUyxDQUFDLFdBQVg7O1lBQUEsQ0FBTixDQUFBO0FBQUEscUNBQUE7Ozs7aUJBQ0EsT0FBQSxDQUFRLEtBQUMsQ0FBQSxTQUFTOzs7WUFBbEI7O2dCQUpLO0lBQUEsQ0FwQlA7QUFBQSxJQTBCQSxVQUFBLEVBQVksU0FBQSxHQUFBO0FBQ1YsTUFBQSxJQUFDLENBQUEsU0FBUyxDQUFDLEtBQVgsR0FBbUIsRUFBbkIsQ0FBQTthQUNBLElBQUMsQ0FBQSxTQUFTLENBQUMsS0FBWCxHQUFtQixFQUZUO0lBQUEsQ0ExQlo7R0FORixDQUFBOztBQUFBLEVBb0NNO3NCQUNKOztBQUFBLG1CQUFBLFFBQUEsR0FDRTtBQUFBLE1BQUEsV0FBQSxFQUFhLGtCQUFiO0FBQUEsTUFDQSxRQUFBLEVBQVUsTUFEVjtBQUFBLE1BRUEsV0FBQSxFQUFhLEtBRmI7QUFBQSxNQUdBLE9BQUEsRUFBUztBQUFBLFFBQUMsa0JBQUEsRUFBb0IsZ0JBQXJCO09BSFQ7S0FERixDQUFBOztBQUFBLG1CQU1BLEtBQUEsR0FBTyxJQUFJLENBQUMsS0FOWixDQUFBOztBQUFBLG1CQVFBLElBQUEsR0FBTSxTQUFDLE1BQUQsRUFBUyxRQUFULEdBQUE7YUFDQSxJQUFBLENBQUMsQ0FBQyxJQUFGLENBQU8sSUFBQyxDQUFBLFlBQUQsQ0FBYyxNQUFkLEVBQXNCLFFBQXRCLENBQVAsRUFEQTtJQUFBLENBUk4sQ0FBQTs7QUFBQSxtQkFXQSxTQUFBLEdBQVcsU0FBQyxNQUFELEVBQVMsUUFBVCxHQUFBO0FBQ1QsVUFBQSw2RUFBQTtBQUFBLE1BQUEsR0FBQSxHQUFNLElBQU4sQ0FBQTtBQUFBLE1BQ0EsRUFBQSxHQUFNLEdBQUEsQ0FBQSxJQUFRLENBQUMsVUFEZixDQUFBO0FBQUEsTUFHQSxRQUFBLEdBQWUsSUFBQyxDQUFBLFlBQUQsQ0FBYyxNQUFkLEVBQXNCLFFBQXRCLENBSGYsQ0FBQTtBQUFBLE1BSUEsWUFBQSxHQUFlLFFBQVEsQ0FBQyxPQUp4QixDQUFBO0FBQUEsTUFLQSxVQUFBLEdBQWUsUUFBUSxDQUFDLEtBTHhCLENBQUE7QUFBQSxNQU9BLFFBQVEsQ0FBQyxPQUFULEdBQW1CLEVBQUUsQ0FBQyxFQUFILENBQU0sU0FBTixDQUFnQjs7OztjQUFPO2NBQU07cUJBQVk7Ozs7OztRQVA1RCxDQUFBO0FBQUEsTUFRQSxRQUFRLENBQUMsS0FBVCxHQUFtQixFQUFFLENBQUMsRUFBSCxDQUFNLE9BQU4sQ0FBYzs7OztjQUFPO2NBQUs7cUJBQVk7Ozs7OztRQVJ6RCxDQUFBO0FBQUEsTUFVQSxPQUFBLEdBQVUsU0FBQyxJQUFELEdBQUE7QUFDUixZQUFBLDJEQUFBO0FBQUEsZ0NBQUEsQ0FBQTtBQUFBLDhEQUFBLENBQUE7QUFBQSxRQUFBLEdBQUEsR0FBVSxJQUFBLENBQUMsQ0FBQyxJQUFGLENBQU8sUUFBUCxDQUFWLENBQUE7OztBQUNBOzs7Y0FBQSxDQUFBO0FBQUEsWUFBTSxFQUFFLENBQUMsSUFBSDs7O3lCQUFjOzs7O2NBQWQsQ0FBTixDQUFBO0FBQUEsdUNBQUE7Ozs7QUFDQSxvQkFBTyxNQUFQO0FBQUEsbUJBQ08sU0FEUDtBQUNzQixnQkFBQSxZQUFBLENBQWEsSUFBYixFQUFtQixVQUFuQixFQUErQixHQUEvQixDQUFBLENBRHRCO0FBQ087QUFEUCxtQkFFTyxPQUZQO0FBRW9CLGdCQUFBLFVBQUEsQ0FBVyxHQUFYLEVBQWdCLFVBQWhCLEVBQTRCLEtBQTVCLENBQUEsQ0FGcEI7QUFBQTttQkFHQSxJQUFBLENBQUE7O2tCQU5RO01BQUEsQ0FWVixDQUFBO0FBQUEsTUFrQkEsT0FBTyxDQUFDLEtBQVIsR0FBZ0IsU0FBQyxVQUFELEdBQUE7QUFDZCxZQUFBLEtBQUE7QUFBQSxRQUFBLElBQWdDLEdBQWhDO0FBQUEsaUJBQU8sR0FBRyxDQUFDLEtBQUosQ0FBVSxVQUFWLENBQVAsQ0FBQTtTQUFBO0FBQUEsUUFDQSxLQUFBLEdBQVEsSUFBQyxDQUFBLEtBQUQsQ0FBQSxDQUFRLENBQUMsT0FBVCxDQUFpQixPQUFqQixDQURSLENBQUE7QUFFQSxRQUFBLElBQTZCLEtBQUEsR0FBUSxDQUFBLENBQXJDO0FBQUEsVUFBQSxJQUFDLENBQUEsS0FBRCxDQUFBLENBQVEsQ0FBQyxNQUFULENBQWdCLEtBQWhCLEVBQXVCLENBQXZCLENBQUEsQ0FBQTtTQUZBO0FBR0EsUUFBQSxJQUEwQixJQUFJLENBQUMsU0FBL0I7QUFBQSxVQUFBLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBZixFQUFBLENBQUE7U0FIQTtlQVNBLFFBVmM7TUFBQSxDQWxCaEIsQ0FBQTtBQThCQSxNQUFBLElBQUEsQ0FBQSxJQUEwQixDQUFDLE9BQTNCO0FBQUEsZUFBTyxPQUFQLENBQUE7T0E5QkE7QUFBQSxNQStCQSxJQUFDLENBQUEsS0FBRCxDQUFPLE9BQVAsQ0EvQkEsQ0FBQTthQWdDQSxRQWpDUztJQUFBLENBWFgsQ0FBQTs7QUFBQSxtQkE4Q0EsWUFBQSxHQUFjLFNBQUMsTUFBRCxFQUFTLFFBQVQsR0FBQTthQUNaLENBQUMsQ0FBQyxNQUFGLENBQVMsRUFBVCxFQUFhLElBQUMsQ0FBQSxRQUFkLEVBQXdCLFFBQXhCLEVBQWtDLE1BQWxDLEVBRFk7SUFBQSxDQTlDZCxDQUFBOztnQkFBQTs7TUFyQ0YsQ0FBQTs7QUFBQSxFQXNGTTtBQUNKLGlDQUFBLENBQUE7O0FBQWEsSUFBQSxvQkFBRSxLQUFGLEdBQUE7QUFBVSxNQUFULElBQUMsQ0FBQSxRQUFBLEtBQVEsQ0FBQTtBQUFBLHlEQUFBLENBQUE7QUFBQSwrREFBQSxDQUFWO0lBQUEsQ0FBYjs7QUFBQSx5QkFFQSxJQUFBLEdBQU0sU0FBQyxFQUFELEVBQUssTUFBTCxHQUFBO0FBQ0osVUFBQSxNQUFBO0FBQUEsTUFBQSxNQUFBLEdBQWEsSUFBQSxJQUFDLENBQUEsS0FBRCxDQUFPO0FBQUEsUUFBQSxFQUFBLEVBQUksRUFBSjtPQUFQLENBQWIsQ0FBQTthQUNBLElBQUMsQ0FBQSxTQUFELENBQVcsTUFBWCxFQUNFO0FBQUEsUUFBQSxJQUFBLEVBQU0sS0FBTjtBQUFBLFFBQ0EsR0FBQSxFQUFNLElBQUksQ0FBQyxNQUFMLENBQVksTUFBWixDQUROO0FBQUEsUUFFQSxPQUFBLEVBQVMsSUFBQyxDQUFBLGVBRlY7QUFBQSxRQUdBLEtBQUEsRUFBTyxJQUFDLENBQUEsWUFIUjtPQURGLEVBRkk7SUFBQSxDQUZOLENBQUE7O0FBQUEseUJBVUEsR0FBQSxHQUFLLFNBQUMsTUFBRCxHQUFBO2FBQ0gsSUFBQyxDQUFBLFNBQUQsQ0FBVyxNQUFYLEVBQ0U7QUFBQSxRQUFBLElBQUEsRUFBTSxLQUFOO0FBQUEsUUFDQSxHQUFBLEVBQU0sSUFBSSxDQUFDLE1BQUwsQ0FBWSxJQUFDLENBQUEsS0FBYixDQUROO0FBQUEsUUFFQSxPQUFBLEVBQVMsSUFBQyxDQUFBLGVBRlY7QUFBQSxRQUdBLEtBQUEsRUFBTyxJQUFDLENBQUEsWUFIUjtPQURGLEVBREc7SUFBQSxDQVZMLENBQUE7O0FBQUEseUJBaUJBLEtBQUEsR0FBTyxTQUFDLE1BQUQsRUFBYyxPQUFkLEdBQUE7QUFDTCxVQUFBLEVBQUE7O1FBRE0sU0FBUztPQUNmOztRQURtQixVQUFVO09BQzdCO0FBQUEsTUFBQSxJQUFHLEVBQUEsR0FBSyxNQUFNLENBQUMsRUFBZjtBQUNFLFFBQUEsTUFBQSxDQUFBLE1BQWEsQ0FBQyxFQUFkLENBQUE7ZUFDQSxJQUFDLENBQUEsSUFBRCxDQUFNLEVBQU4sRUFBVSxNQUFWLENBQWlCLENBQUMsSUFBbEIsQ0FBdUIsQ0FBQSxTQUFBLEtBQUEsR0FBQTtpQkFBQSxTQUFDLE1BQUQsR0FBQTttQkFDckIsS0FBQyxDQUFBLEtBQUssQ0FBQyxPQUFQLENBQWUsTUFBZixFQUF1QixPQUF2QixFQURxQjtVQUFBLEVBQUE7UUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBQXZCLEVBRkY7T0FBQSxNQUFBO2VBS0UsSUFBQyxDQUFBLEdBQUQsQ0FBSyxNQUFMLENBQVksQ0FBQyxJQUFiLENBQWtCLENBQUEsU0FBQSxLQUFBLEdBQUE7aUJBQUEsU0FBQyxPQUFELEdBQUE7bUJBQ2hCLEtBQUMsQ0FBQSxLQUFLLENBQUMsT0FBUCxDQUFlLE9BQWYsRUFBd0IsT0FBeEIsRUFEZ0I7VUFBQSxFQUFBO1FBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUFsQixFQUxGO09BREs7SUFBQSxDQWpCUCxDQUFBOztBQUFBLHlCQTRCQSxlQUFBLEdBQWlCLFNBQUMsSUFBRCxFQUFPLE1BQVAsRUFBZSxHQUFmLEdBQUE7YUFDZixJQUFDLENBQUEsS0FBSyxDQUFDLE9BQVAsQ0FBZSxhQUFmLEVBQThCLElBQTlCLEVBQW9DLE1BQXBDLEVBQTRDLEdBQTVDLEVBRGU7SUFBQSxDQTVCakIsQ0FBQTs7QUFBQSx5QkErQkEsWUFBQSxHQUFjLFNBQUMsR0FBRCxFQUFNLFVBQU4sRUFBa0IsS0FBbEIsR0FBQTthQUNaLElBQUMsQ0FBQSxLQUFLLENBQUMsT0FBUCxDQUFlLFdBQWYsRUFBNEIsSUFBNUIsRUFBa0MsR0FBbEMsRUFBdUMsVUFBdkMsRUFBbUQsS0FBbkQsRUFEWTtJQUFBLENBL0JkLENBQUE7O3NCQUFBOztLQUR1QixLQXRGekIsQ0FBQTs7QUFBQSxFQXlITTtBQUNKLGdDQUFBLENBQUE7O0FBQWEsSUFBQSxtQkFBRSxNQUFGLEdBQUE7QUFDWCxNQURZLElBQUMsQ0FBQSxTQUFBLE1BQ2IsQ0FBQTtBQUFBLHlEQUFBLENBQUE7QUFBQSw2REFBQSxDQUFBO0FBQUEsTUFBQSxJQUFDLENBQUEsS0FBRCxHQUFTLElBQUMsQ0FBQSxNQUFNLENBQUMsV0FBakIsQ0FEVztJQUFBLENBQWI7O0FBQUEsd0JBR0EsTUFBQSxHQUFRLFNBQUMsTUFBRCxFQUFTLE9BQVQsR0FBQTthQUNOLElBQUMsQ0FBQSxTQUFELENBQVcsTUFBWCxFQUNFO0FBQUEsUUFBQSxJQUFBLEVBQU0sS0FBTjtBQUFBLFFBQ0EsR0FBQSxFQUFNLElBQUksQ0FBQyxNQUFMLENBQVksSUFBQyxDQUFBLE1BQWIsQ0FETjtBQUFBLFFBRUEsT0FBQSxFQUFTLElBQUMsQ0FBQSxjQUFELENBQWdCLE9BQWhCLENBRlQ7QUFBQSxRQUdBLEtBQUEsRUFBTyxJQUFDLENBQUEsWUFBRCxDQUFjLE9BQWQsQ0FIUDtPQURGLEVBRE07SUFBQSxDQUhSLENBQUE7O0FBQUEsd0JBVUEsTUFBQSxHQUFRLFNBQUMsTUFBRCxFQUFTLE9BQVQsR0FBQTthQUNOLElBQUMsQ0FBQSxTQUFELENBQVcsTUFBWCxFQUNFO0FBQUEsUUFBQSxJQUFBLEVBQU0sTUFBTjtBQUFBLFFBQ0EsSUFBQSxFQUFNLElBQUksQ0FBQyxTQUFMLENBQWUsSUFBQyxDQUFBLE1BQWhCLENBRE47QUFBQSxRQUVBLEdBQUEsRUFBTSxJQUFJLENBQUMsTUFBTCxDQUFZLElBQUMsQ0FBQSxLQUFiLENBRk47QUFBQSxRQUdBLE9BQUEsRUFBUyxJQUFDLENBQUEsY0FBRCxDQUFnQixPQUFoQixDQUhUO0FBQUEsUUFJQSxLQUFBLEVBQU8sSUFBQyxDQUFBLFlBQUQsQ0FBYyxPQUFkLENBSlA7T0FERixFQURNO0lBQUEsQ0FWUixDQUFBOztBQUFBLHdCQWtCQSxNQUFBLEdBQVEsU0FBQyxNQUFELEVBQVMsT0FBVCxHQUFBO2FBQ04sSUFBQyxDQUFBLFNBQUQsQ0FBVyxNQUFYLEVBQ0U7QUFBQSxRQUFBLElBQUEsRUFBTSxLQUFOO0FBQUEsUUFDQSxJQUFBLEVBQU0sSUFBSSxDQUFDLFNBQUwsQ0FBZSxJQUFDLENBQUEsTUFBaEIsQ0FETjtBQUFBLFFBRUEsR0FBQSxFQUFNLElBQUksQ0FBQyxNQUFMLENBQVksSUFBQyxDQUFBLE1BQWIsQ0FGTjtBQUFBLFFBR0EsT0FBQSxFQUFTLElBQUMsQ0FBQSxjQUFELENBQWdCLE9BQWhCLENBSFQ7QUFBQSxRQUlBLEtBQUEsRUFBTyxJQUFDLENBQUEsWUFBRCxDQUFjLE9BQWQsQ0FKUDtPQURGLEVBRE07SUFBQSxDQWxCUixDQUFBOztBQUFBLHdCQTBCQSxPQUFBLEdBQVMsU0FBQyxNQUFELEVBQVMsT0FBVCxHQUFBO2FBQ1AsSUFBQyxDQUFBLFNBQUQsQ0FBVyxNQUFYLEVBQ0U7QUFBQSxRQUFBLElBQUEsRUFBTSxRQUFOO0FBQUEsUUFDQSxHQUFBLEVBQU0sSUFBSSxDQUFDLE1BQUwsQ0FBWSxJQUFDLENBQUEsTUFBYixDQUROO0FBQUEsUUFFQSxPQUFBLEVBQVMsSUFBQyxDQUFBLGNBQUQsQ0FBZ0IsT0FBaEIsQ0FGVDtBQUFBLFFBR0EsS0FBQSxFQUFPLElBQUMsQ0FBQSxZQUFELENBQWMsT0FBZCxDQUhQO09BREYsRUFETztJQUFBLENBMUJULENBQUE7O0FBQUEsd0JBbUNBLGNBQUEsR0FBZ0IsU0FBQyxPQUFELEdBQUE7O1FBQUMsVUFBVTtPQUN6QjthQUFBLENBQUEsU0FBQSxLQUFBLEdBQUE7ZUFBQSxTQUFDLElBQUQsRUFBTyxNQUFQLEVBQWUsR0FBZixHQUFBO0FBQ0UsY0FBQSxXQUFBO0FBQUEsVUFBQSxJQUFHLEtBQUssQ0FBQyxPQUFOLENBQWMsSUFBZCxDQUFIO0FBQ0UsWUFBQSxJQUFBLEdBQU8sS0FBUCxDQURGO1dBQUEsTUFBQTtBQUdFLFlBQUEsSUFBQSxHQUFPLEtBQUMsQ0FBQSxLQUFLLENBQUMsUUFBUCxDQUFnQixJQUFoQixDQUFQLENBSEY7V0FBQTtBQUFBLFVBS0EsSUFBSSxDQUFDLE9BQUwsQ0FBYSxTQUFBLEdBQUE7QUFDWCxZQUFBLElBQUcsSUFBSDtBQUVFLGNBQUEsSUFBRyxJQUFJLENBQUMsRUFBTCxJQUFZLEtBQUMsQ0FBQSxNQUFNLENBQUMsRUFBUixLQUFnQixJQUFJLENBQUMsRUFBcEM7QUFDRSxnQkFBQSxLQUFDLENBQUEsTUFBTSxDQUFDLFFBQVIsQ0FBaUIsSUFBSSxDQUFDLEVBQXRCLENBQUEsQ0FERjtlQUFBO3FCQUlBLEtBQUMsQ0FBQSxNQUFNLENBQUMsZ0JBQVIsQ0FBeUIsSUFBSSxDQUFDLFVBQUwsQ0FBQSxDQUF6QixFQU5GO2FBRFc7VUFBQSxDQUFiLENBTEEsQ0FBQTtBQUFBLFVBY0EsS0FBQyxDQUFBLE1BQU0sQ0FBQyxPQUFSLENBQWdCLGFBQWhCLEVBQStCLElBQS9CLEVBQXFDLE1BQXJDLEVBQTZDLEdBQTdDLENBZEEsQ0FBQTs7Z0JBZWUsQ0FBRSxLQUFqQixDQUF1QixLQUFDLENBQUEsTUFBeEI7V0FmQTt1REFnQlksQ0FBRSxLQUFkLENBQW9CLEtBQUMsQ0FBQSxNQUFyQixXQWpCRjtRQUFBLEVBQUE7TUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLEVBRGM7SUFBQSxDQW5DaEIsQ0FBQTs7QUFBQSx3QkF1REEsWUFBQSxHQUFjLFNBQUMsT0FBRCxHQUFBOztRQUFDLFVBQVU7T0FDdkI7YUFBQSxDQUFBLFNBQUEsS0FBQSxHQUFBO2VBQUEsU0FBQyxHQUFELEVBQU0sVUFBTixFQUFrQixLQUFsQixHQUFBO0FBQ0UsY0FBQSxXQUFBO0FBQUEsVUFBQSxLQUFDLENBQUEsTUFBTSxDQUFDLE9BQVIsQ0FBZ0IsV0FBaEIsRUFBNkIsR0FBN0IsRUFBa0MsVUFBbEMsRUFBOEMsS0FBOUMsQ0FBQSxDQUFBOztnQkFDYSxDQUFFLEtBQWYsQ0FBcUIsS0FBQyxDQUFBLE1BQXRCO1dBREE7dURBRVksQ0FBRSxLQUFkLENBQW9CLEtBQUMsQ0FBQSxNQUFyQixXQUhGO1FBQUEsRUFBQTtNQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsRUFEWTtJQUFBLENBdkRkLENBQUE7O3FCQUFBOztLQURzQixLQXpIeEIsQ0FBQTs7QUFBQSxFQXdMQSxLQUFLLENBQUMsSUFBTixHQUFhLEVBeExiLENBQUE7O0FBQUEsRUEwTEEsT0FBQSxHQUNFO0FBQUEsSUFBQSxJQUFBLEVBQU0sU0FBQSxHQUFBO2FBQU8sSUFBQSxTQUFBLENBQVUsSUFBVixFQUFQO0lBQUEsQ0FBTjtBQUFBLElBRUEsR0FBQSxFQUFLLFNBQUEsR0FBQTtBQUNILFVBQUEsU0FBQTtBQUFBLE1BREksOERBQ0osQ0FBQTtBQUFBLE1BQUEsR0FBQSxHQUFNLElBQUksQ0FBQyxNQUFMLENBQVksSUFBQyxDQUFBLFdBQWIsQ0FBTixDQUFBO0FBQ0EsTUFBQSxJQUFrQixHQUFHLENBQUMsTUFBSixDQUFXLEdBQUcsQ0FBQyxNQUFKLEdBQWEsQ0FBeEIsQ0FBQSxLQUE4QixHQUFoRDtBQUFBLFFBQUEsR0FBQSxJQUFPLEdBQVAsQ0FBQTtPQURBO0FBQUEsTUFFQSxHQUFBLElBQU8sS0FBSyxDQUFDLElBQUksQ0FBQyxNQUFYLENBQWtCLElBQUMsQ0FBQSxFQUFuQixDQUZQLENBQUE7QUFBQSxNQUdBLElBQUksQ0FBQyxPQUFMLENBQWEsR0FBYixDQUhBLENBQUE7YUFJQSxJQUFJLENBQUMsSUFBTCxDQUFVLEdBQVYsRUFMRztJQUFBLENBRkw7R0EzTEYsQ0FBQTs7QUFBQSxFQW9NQSxNQUFBLEdBQ0U7QUFBQSxJQUFBLElBQUEsRUFBTSxTQUFBLEdBQUE7YUFBTyxJQUFBLFVBQUEsQ0FBVyxJQUFYLEVBQVA7SUFBQSxDQUFOO0FBQUEsSUFFQSxHQUFBLEVBQUssU0FBQSxHQUFBO0FBQ0gsVUFBQSxJQUFBO0FBQUEsTUFESSw4REFDSixDQUFBO0FBQUEsTUFBQSxJQUFJLENBQUMsT0FBTCxDQUFhLElBQUMsQ0FBQSxTQUFTLENBQUMsV0FBWCxDQUFBLENBQUEsR0FBMkIsR0FBeEMsQ0FBQSxDQUFBO0FBQUEsTUFDQSxJQUFJLENBQUMsT0FBTCxDQUFhLEtBQUssQ0FBQyxJQUFuQixDQURBLENBQUE7YUFFQSxJQUFJLENBQUMsSUFBTCxDQUFVLEdBQVYsRUFIRztJQUFBLENBRkw7R0FyTUYsQ0FBQTs7QUFBQSxFQTRNQSxLQUFLLENBQUMsSUFBTixHQUNFO0FBQUEsSUFBQSxRQUFBLEVBQVUsU0FBQSxHQUFBO0FBQ1IsTUFBQSxJQUFDLENBQUEsS0FBRCxDQUFPLElBQUMsQ0FBQSxTQUFSLENBQUEsQ0FBQTtBQUFBLE1BQ0EsSUFBQyxDQUFBLE1BQUQsQ0FBUSxJQUFDLENBQUEsVUFBVCxDQURBLENBQUE7QUFBQSxNQUdBLElBQUMsQ0FBQSxNQUFELENBQVEsTUFBUixDQUhBLENBQUE7YUFJQSxJQUFDLENBQUEsT0FBRCxDQUFTLE9BQVQsRUFMUTtJQUFBLENBQVY7QUFBQSxJQVNBLFNBQUEsRUFBVyxTQUFBLEdBQUE7QUFDVCxVQUFBLElBQUE7YUFBQSxRQUFBLElBQUMsQ0FBQSxJQUFELENBQUEsQ0FBQSxDQUFPLENBQUMsS0FBUixhQUFjLFNBQWQsRUFEUztJQUFBLENBVFg7QUFBQSxJQVlBLFVBQUEsRUFBWSxTQUFDLE1BQUQsRUFBUyxJQUFULEVBQWUsT0FBZixHQUFBOztRQUFlLFVBQVU7T0FDbkM7QUFBQSxNQUFBLElBQVUsT0FBTyxDQUFDLElBQVIsS0FBZ0IsS0FBMUI7QUFBQSxjQUFBLENBQUE7T0FBQTthQUNBLE1BQU0sQ0FBQyxJQUFQLENBQUEsQ0FBYyxDQUFBLElBQUEsQ0FBZCxDQUFvQixPQUFPLENBQUMsSUFBNUIsRUFBa0MsT0FBbEMsRUFGVTtJQUFBLENBWlo7R0E3TUYsQ0FBQTs7QUFBQSxFQTZOQSxLQUFLLENBQUMsSUFBSSxDQUFDLE9BQVgsR0FDRTtBQUFBLElBQUEsUUFBQSxFQUFVLFNBQUEsR0FBQTtBQUNSLE1BQUEsSUFBQyxDQUFBLE1BQUQsQ0FBUSxNQUFSLENBQUEsQ0FBQTthQUNBLElBQUMsQ0FBQSxPQUFELENBQVMsT0FBVCxFQUZRO0lBQUEsQ0FBVjtHQTlORixDQUFBOztBQUFBLEVBb09BLElBQUksQ0FBQyxRQUFMLEdBQTBCLElBQUksQ0FBQSxTQUFFLENBQUEsUUFwT2hDLENBQUE7O0FBQUEsRUFxT0EsSUFBSSxDQUFDLElBQUwsR0FBMEIsSUFyTzFCLENBQUE7O0FBQUEsRUFzT0EsSUFBSSxDQUFDLFNBQUwsR0FBMEIsU0F0TzFCLENBQUE7O0FBQUEsRUF1T0EsSUFBSSxDQUFDLFVBQUwsR0FBMEIsVUF2TzFCLENBQUE7O0FBQUEsRUF3T0EsS0FBSyxDQUFDLElBQU4sR0FBMEIsSUF4TzFCLENBQUE7O0FBQUEsRUF5T0EsS0FBSyxDQUFDLElBQUksQ0FBQyxZQUFYLEdBQTBCLElBek8xQixDQUFBOztBQUFBLEVBME9BLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBWCxHQUEwQixJQTFPMUIsQ0FBQTs7O0lBMk9BLE1BQU0sQ0FBRSxPQUFSLEdBQTJCO0dBM08zQjtBQUFBOzs7OztBQ0FBO0FBQUEsTUFBQSwrQ0FBQTs7OzJDQUFBOztBQUFBLEVBQUEsS0FBQSxHQUFRLElBQUMsQ0FBQSxLQUFELElBQVUsT0FBQSxDQUFRLE9BQVIsQ0FBbEIsQ0FBQTs7QUFBQSxFQUdBLFNBQUEsR0FDRTtBQUFBLElBQUEsU0FBQSxFQUFXLFNBQUMsT0FBRCxFQUFVLEVBQVYsRUFBYyxLQUFkLEdBQUE7QUFDVCxVQUFBLHNGQUFBO0FBQUEsOEJBQUEsQ0FBQTtBQUFBLDREQUFBLENBQUE7O1FBRHVCLFFBQVE7T0FDL0I7QUFBQSxNQUFBLEVBQUEsR0FBUyxJQUFBLElBQUksQ0FBQyxVQUFMLENBQUEsQ0FBVCxDQUFBO0FBQUEsTUFFQSxPQUFPLENBQUMsT0FBUixHQUFrQixFQUFFLENBQUMsRUFBSCxDQUFNLFNBQU4sQ0FBZ0I7Ozs7Y0FBTztjQUFNO3FCQUFZOzs7Ozs7UUFGM0QsQ0FBQTtBQUFBLE1BR0EsT0FBTyxDQUFDLEtBQVIsR0FBa0IsRUFBRSxDQUFDLEVBQUgsQ0FBTSxPQUFOLENBQWM7Ozs7Y0FBTztjQUFLO3FCQUFZOzs7Ozs7UUFIeEQsQ0FBQTtBQUtBLE1BQUEsSUFBRyxLQUFIO0FBQWMsUUFBQSxJQUFDLENBQUEsQ0FBQyxDQUFDLFNBQUgsQ0FBYSxPQUFiLENBQUEsQ0FBZDtPQUFBLE1BQUE7QUFDSyxRQUFJLElBQUEsQ0FBQyxDQUFDLElBQUYsQ0FBTyxPQUFQLENBQUosQ0FETDtPQUxBOzs7QUFRQTs7O1lBQUEsQ0FBQTtBQUFBLFVBQU0sRUFBRSxDQUFDLElBQUg7Ozt1QkFBYzs7OztZQUFkLENBQU4sQ0FBQTtBQUFBLHFDQUFBOzs7O2lCQUNBLEVBQUEsQ0FBRyxNQUFILEVBQVcsR0FBWCxFQUFnQixVQUFoQixFQUE0QixJQUE1Qjs7Z0JBVlM7SUFBQSxDQUFYO0FBQUEsSUFZQSxRQUFBLEVBQVUsU0FBQyxPQUFELEVBQVUsRUFBVixFQUFjLEtBQWQsR0FBQTtBQUNSLE1BQUEsT0FBTyxDQUFDLE1BQVIsR0FBaUIsS0FBakIsQ0FBQTthQUNBLElBQUMsQ0FBQSxTQUFELENBQVcsT0FBWCxFQUFvQixFQUFwQixFQUF3QixLQUF4QixFQUZRO0lBQUEsQ0FaVjtBQUFBLElBZ0JBLFNBQUEsRUFBVyxTQUFDLE9BQUQsRUFBVSxFQUFWLEVBQWMsS0FBZCxHQUFBO0FBQ1QsTUFBQSxPQUFPLENBQUMsTUFBUixHQUFpQixLQUFqQixDQUFBO2FBQ0EsSUFBQyxDQUFBLFNBQUQsQ0FBVyxPQUFYLEVBQW9CLEVBQXBCLEVBQXdCLEtBQXhCLEVBRlM7SUFBQSxDQWhCWDtBQUFBLElBb0JBLGVBQUEsRUFBaUIsU0FBQyxPQUFELEVBQVUsRUFBVixHQUFBO2FBQ2YsSUFBQyxDQUFBLFNBQUQsQ0FBVyxPQUFYLEVBQW9CLEVBQXBCLEVBQXdCLElBQXhCLEVBRGU7SUFBQSxDQXBCakI7QUFBQSxJQXVCQSxjQUFBLEVBQWdCLFNBQUMsT0FBRCxFQUFVLEVBQVYsR0FBQTthQUNkLElBQUMsQ0FBQSxRQUFELENBQVUsT0FBVixFQUFtQixFQUFuQixFQUF1QixJQUF2QixFQURjO0lBQUEsQ0F2QmhCO0FBQUEsSUEwQkEsZUFBQSxFQUFpQixTQUFDLE9BQUQsRUFBVSxFQUFWLEdBQUE7YUFDZixJQUFDLENBQUEsU0FBRCxDQUFXLE9BQVgsRUFBb0IsRUFBcEIsRUFBd0IsSUFBeEIsRUFEZTtJQUFBLENBMUJqQjtHQUpGLENBQUE7O0FBQUEsRUFrQ0EsS0FBSyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsSUFBbkIsQ0FBd0IsS0FBSyxDQUFDLElBQTlCLEVBQW9DLFNBQXBDLENBbENBLENBQUE7OztJQW1DQSxNQUFNLENBQUUsT0FBUixHQUFrQjtHQW5DbEI7QUFBQTs7Ozs7QUNBQTtBQUFBLE1BQUEseUZBQUE7OzsyQ0FBQTs7QUFBQSxFQUFBLEtBQUEsR0FBUSxPQUFBLENBQVEsT0FBUixDQUFSLENBQUE7O0FBQUEsRUFHQSxXQUFBLEdBQWMsU0FBQyxHQUFELEVBQU0sTUFBTixHQUFBO0FBQ1osUUFBQSxrRkFBQTtBQUFBLHFCQUFBLENBQUE7QUFBQSwwREFBQSxDQUFBOzs7QUFBQTs7O1VBQUEsQ0FBQTtBQUFBLFFBQU0sS0FBSyxDQUFDLElBQUksQ0FBQyxRQUFYLENBQW9CO0FBQUEsVUFBQyxHQUFBLEVBQUssR0FBTjtTQUFwQjs7O2NBQXNDO2NBQVE7Y0FBSztxQkFBWTs7OztVQUEvRCxDQUFOLENBQUE7QUFBQSxtQ0FBQTs7OztBQUNBLGdCQUFPLE1BQVA7QUFBQSxlQUNPLE9BRFA7bUJBQ3FCLFFBQUEsR0FBUSxVQUFSLEdBQW1CLElBQW5CLEdBQXVCO21CQUQ1QztBQUFBLGVBRU8sU0FGUDttQkFFc0I7bUJBRnRCO0FBQUE7O2NBRlk7RUFBQSxDQUhkLENBQUE7O0FBQUEsRUFVQSxXQUFBLEdBQ0U7QUFBQSxJQUFBLEtBQUEsRUFBZSx5QkFBZjtBQUFBLElBQ0EsYUFBQSxFQUFlLCtCQURmO0FBQUEsSUFFQSxRQUFBLEVBQWUsNEJBRmY7QUFBQSxJQUdBLEtBQUEsRUFBZSx5QkFIZjtBQUFBLElBSUEsU0FBQSxFQUFlLDZCQUpmO0FBQUEsSUFLQSxLQUFBLEVBQWUseUJBTGY7QUFBQSxJQU1BLFVBQUEsRUFBZSw4QkFOZjtBQUFBLElBT0EsYUFBQSxFQUFlLGlDQVBmO0FBQUEsSUFRQSxJQUFBLEVBQWUsc0JBUmY7QUFBQSxJQVNBLE9BQUEsRUFBZSwyQkFUZjtHQVhGLENBQUE7O0FBQUEsRUFzQkEsUUFBQSxHQUFXLEVBdEJYLENBQUE7O0FBdUJBLFFBQXNDLFNBQUMsSUFBRCxHQUFBO1dBQ3BDLFFBQVMsQ0FBQSxJQUFBLENBQVQsR0FBaUIsU0FBQyxFQUFELEdBQUE7YUFBUSxXQUFBLENBQVksSUFBWixFQUFrQixFQUFsQixFQUFSO0lBQUEsRUFEbUI7RUFBQSxDQUF0QztBQUFBLE9BQUEsbUJBQUE7NkJBQUE7QUFBbUMsUUFBSSxLQUFKLENBQW5DO0FBQUEsR0F2QkE7O0FBQUEsRUEwQkEsTUFBTSxDQUFDLE9BQVAsR0FBaUIsUUExQmpCLENBQUE7QUFBQTs7Ozs7QUNBQTtBQUFBLE1BQUEsc0VBQUE7SUFBQTttU0FBQTs7QUFBQSxFQUFBLE9BQUEsQ0FBUSxhQUFSLENBQUEsQ0FBQTs7QUFBQSxFQUNBLEtBQUEsR0FBWSxPQUFBLENBQVEsY0FBUixDQURaLENBQUE7O0FBQUEsRUFHQSxLQUFBLEdBQVcsT0FBQSxDQUFRLE9BQVIsQ0FIWCxDQUFBOztBQUFBLEVBSUEsS0FBQSxHQUFXLE9BQUEsQ0FBUSxxQkFBUixDQUpYLENBQUE7O0FBQUEsRUFLQSxPQUFBLEdBQVcsT0FBQSxDQUFRLHVCQUFSLENBTFgsQ0FBQTs7QUFBQSxFQU1BLE1BQUEsR0FBVyxPQUFBLENBQVEsc0JBQVIsQ0FOWCxDQUFBOztBQUFBLEVBT0EsUUFBQSxHQUFXLE9BQUEsQ0FBUSxtQkFBUixDQVBYLENBQUE7O0FBQUEsRUFVQSxVQUFBLEdBQWEsU0FBQyxDQUFELEdBQUE7V0FDWCxDQUFDLENBQUMsT0FBRixDQUFVLElBQVYsRUFBZSxPQUFmLENBQXVCLENBQUMsT0FBeEIsQ0FBZ0MsSUFBaEMsRUFBcUMsTUFBckMsQ0FBNEMsQ0FBQyxPQUE3QyxDQUFxRCxJQUFyRCxFQUEwRCxNQUExRCxFQURXO0VBQUEsQ0FWYixDQUFBOztBQUFBLEVBY007QUFDSixRQUFBLGdCQUFBOztBQUFBLGlDQUFBLENBQUE7O0FBQUEseUJBQUEsU0FBQSxHQUFXLGtCQUFYLENBQUE7O0FBQUEsSUFFQSxnQkFBQSxHQUNFO0FBQUEsTUFBQSxPQUFBLEVBQVMsV0FBVDtBQUFBLE1BQ0EsSUFBQSxFQUFNLFFBRE47S0FIRixDQUFBOztBQUFBLHlCQU1BLFFBQUEsR0FDRTtBQUFBLE1BQUEsY0FBQSxFQUFnQixRQUFoQjtBQUFBLE1BQ0Esb0JBQUEsRUFBc0IsWUFEdEI7QUFBQSxNQUVBLDJCQUFBLEVBQTZCLHlCQUY3QjtLQVBGLENBQUE7O0FBQUEseUJBV0EsaUJBQUEsR0FBbUIsU0FBQSxHQUFBO0FBQ2pCLFVBQUEsTUFBQTtBQUFBLE1BQUEsTUFBQSxHQUFTLENBQUEsQ0FBRSxZQUFGLENBQVQsQ0FBQTtBQUNBLE1BQUEsSUFBRyxNQUFNLENBQUMsRUFBUCxDQUFVLFdBQVYsQ0FBSDtBQUE4QixRQUFBLE1BQU0sQ0FBQyxPQUFQLENBQWUsT0FBZixFQUF3QjtBQUFBLFVBQUEsTUFBQSxFQUFRLE1BQU8sQ0FBQSxDQUFBLENBQWY7U0FBeEIsQ0FBQSxDQUE5QjtPQURBO0FBQUEsTUFFQSxJQUFDLENBQUEsS0FBSyxDQUFDLE9BQVAsQ0FBQSxDQUZBLENBQUE7YUFHQSxJQUFDLENBQUEsQ0FBRCxDQUFHLFVBQUgsQ0FBYyxDQUFDLEdBQWYsQ0FBbUIsVUFBbkIsQ0FBOEIsQ0FBQyxNQUEvQixDQUFBLEVBSmlCO0lBQUEsQ0FYbkIsQ0FBQTs7QUFBQSx5QkFpQkEsYUFBQSxHQUFlLFNBQUMsQ0FBRCxHQUFBO2FBQU8sSUFBQyxDQUFBLE1BQU0sQ0FBQyxNQUFSLENBQWUsQ0FBQSxDQUFFLENBQUMsQ0FBQyxNQUFKLENBQVcsQ0FBQyxHQUFaLENBQUEsQ0FBZixFQUFQO0lBQUEsQ0FqQmYsQ0FBQTs7QUFBQSx5QkFtQkEsMkJBQUEsR0FBaUMsU0FBQSxHQUFBO0FBQUcsTUFBQSxJQUF1QyxJQUFDLENBQUEsS0FBeEM7ZUFBQSxJQUFDLENBQUEsdUJBQXVCLENBQUMsTUFBekIsQ0FBZ0MsR0FBaEMsRUFBQTtPQUFIO0lBQUEsQ0FuQmpDLENBQUE7O0FBQUEseUJBb0JBLCtCQUFBLEdBQWlDLFNBQUEsR0FBQTthQUFHLElBQUMsQ0FBQSx1QkFBdUIsQ0FBQyxJQUF6QixDQUE4QixJQUE5QixDQUFtQyxDQUFDLE1BQXBDLENBQTJDLENBQTNDLEVBQThDLENBQTlDLEVBQUg7SUFBQSxDQXBCakMsQ0FBQTs7QUFBQSx5QkFxQkEsMkJBQUEsR0FBaUMsU0FBQSxHQUFBO2FBQUcsSUFBQyxDQUFBLHVCQUF1QixDQUFDLE9BQXpCLENBQWlDLEdBQWpDLEVBQUg7SUFBQSxDQXJCakMsQ0FBQTs7QUFBQSx5QkF1QkEsTUFBQSxHQUNFO0FBQUEsTUFBQSxpQ0FBQSxFQUFtQyxtQkFBbkM7QUFBQSxNQUNBLHdCQUFBLEVBQTBCLGVBRDFCO0FBQUEsTUFFQSwrQkFBQSxFQUFpQyw2QkFGakM7QUFBQSxNQUdBLHNDQUFBLEVBQXdDLGlDQUh4QztBQUFBLE1BSUEsK0JBQUEsRUFBaUMsNkJBSmpDO0tBeEJGLENBQUE7O0FBOEJhLElBQUEsb0JBQUMsT0FBRCxFQUFVLFFBQVYsR0FBQTtBQUNYLFVBQUEsNkJBQUE7O1FBRHFCLFdBQVc7T0FDaEM7QUFBQSxNQUFBLDZDQUFBLFNBQUEsQ0FBQSxDQUFBO0FBQUEsTUFDQSxJQUFDLENBQUEsR0FBRCxDQUFLLGNBQUwsQ0FEQSxDQUFBO0FBQUEsTUFHQSxJQUFDLENBQUEsUUFBRCxHQUFZLENBQUMsQ0FBQyxNQUFGLENBQVMsRUFBVCxFQUFhLGdCQUFiLENBSFosQ0FBQTtBQUtBLE1BQUEsSUFBRyxZQUFBLElBQWlCLFlBQVksQ0FBQyxRQUFqQztBQUNFO0FBQUEsYUFBQSxTQUFBO3NCQUFBO0FBQ0UsVUFBQSxJQUFDLENBQUEsUUFBUyxDQUFBLENBQUEsQ0FBVixHQUFlLENBQWYsQ0FBQTtBQUNBLGtCQUFPLENBQVA7QUFBQSxpQkFDTyxRQURQO0FBQ3FCLGNBQUcsQ0FBQSxTQUFDLENBQUQsR0FBQTt1QkFDcEIsUUFBUyxDQUFBLGFBQUEsQ0FBVCxHQUEwQixTQUFDLEVBQUQsR0FBQTt5QkFBUSxFQUFBLENBQUcsQ0FBSCxFQUFSO2dCQUFBLEVBRE47Y0FBQSxDQUFBLENBQUgsQ0FBSSxDQUFKLENBQUEsQ0FEckI7QUFBQSxXQUZGO0FBQUEsU0FERjtPQUxBO0FBWUEsV0FBQSxhQUFBOzt3QkFBQTtBQUNFLFFBQUEsSUFBQyxDQUFBLFFBQVMsQ0FBQSxDQUFBLENBQVYsR0FBZSxDQUFmLENBREY7QUFBQSxPQVpBO0FBQUEsTUFlQSxXQUFBOztBQUFlO2FBQUEsZ0JBQUE7d0RBQUE7QUFBQSx3QkFBQSxLQUFBLENBQUE7QUFBQTs7VUFmZixDQUFBO0FBQUEsTUFnQkEsSUFBQyxDQUFBLE1BQUQsQ0FBUSxXQUFSLEVBQXFCLElBQUMsQ0FBQSxRQUFRLENBQUMsT0FBL0IsQ0FoQkEsQ0FEVztJQUFBLENBOUJiOztBQUFBLHlCQWlEQSxTQUFBLEdBQVcsU0FBQSxHQUFBOztRQUNULElBQUMsQ0FBQSxRQUFhLElBQUEsS0FBQSxDQUFNO0FBQUEsVUFBQSxFQUFBLEVBQUksSUFBQyxDQUFBLFVBQUw7U0FBTjtPQUFkO0FBQUEsTUFDQSxJQUFDLENBQUEsS0FBSyxDQUFDLFNBQVAsQ0FBQSxDQURBLENBQUE7YUFFQSxJQUFDLENBQUEsdUJBQXVCLENBQUMsSUFBekIsQ0FBQSxFQUhTO0lBQUEsQ0FqRFgsQ0FBQTs7QUFBQSx5QkFzREEsTUFBQSxHQUFRLFNBQUMsV0FBRCxFQUFtQixPQUFuQixHQUFBOztRQUFDLGNBQWM7T0FDckI7QUFBQSxNQUFBLElBQUMsQ0FBQSxJQUFELEdBQVEsQ0FBQyxPQUFBLENBQVEsbUJBQVIsQ0FBRCxDQUE2QixDQUFDLEtBQTlCLENBQW9DO0FBQUEsUUFBQSxRQUFBLEVBQVUsV0FBVjtBQUFBLFFBQXVCLE9BQUEsRUFBUyxPQUFoQztPQUFwQyxDQUFSLENBQUE7QUFBQSxNQUNBLElBQUMsQ0FBQSxJQUFELEdBQVEsS0FBQSxDQUFNLElBQUMsQ0FBQSxJQUFQLEVBQWEsY0FBYixFQUE2QixFQUE3QixDQURSLENBQUE7QUFBQSxNQUVBLElBQUMsQ0FBQSxJQUFELENBQU0sSUFBQyxDQUFBLElBQVAsQ0FGQSxDQUFBO0FBQUEsTUFJQSxJQUFDLENBQUEsT0FBRCxHQUFnQixJQUFBLE9BQUEsQ0FBUTtBQUFBLFFBQUEsRUFBQSxFQUFJLElBQUMsQ0FBQSxNQUFMO0FBQUEsUUFBYSxLQUFBLEVBQU8sSUFBQyxDQUFBLENBQUQsQ0FBRyxZQUFILENBQXBCO09BQVIsQ0FKaEIsQ0FBQTtBQUFBLE1BS0EsSUFBQyxDQUFBLE1BQUQsR0FBZ0IsSUFBQSxNQUFBLENBQU87QUFBQSxRQUFBLEVBQUEsRUFBSSxJQUFDLENBQUEsRUFBTDtBQUFBLFFBQVMsUUFBQSxFQUFVLFFBQW5CO0FBQUEsUUFBNkIsT0FBQSxFQUFTLElBQUMsQ0FBQSxPQUF2QztPQUFQLENBTGhCLENBQUE7QUFBQSxNQU1BLElBQUMsQ0FBQSxNQUFNLENBQUMsRUFBUixDQUFXLFNBQVgsRUFBc0IsSUFBQyxDQUFBLEtBQUQsQ0FBTyxJQUFDLENBQUEsU0FBUixDQUF0QixDQU5BLENBQUE7QUFBQSxNQU9BLElBQUMsQ0FBQSxNQUFNLENBQUMsRUFBUixDQUFXLFlBQVgsRUFBeUIsSUFBQyxDQUFBLE9BQU8sQ0FBQyxLQUFULENBQWUsSUFBQyxDQUFBLE9BQU8sQ0FBQyxJQUF4QixDQUF6QixDQVBBLENBQUE7QUFBQSxNQVFBLElBQUMsQ0FBQSxNQUFNLENBQUMsSUFBUixDQUFhLElBQUMsQ0FBQSxRQUFRLENBQUMsSUFBdkIsQ0FSQSxDQUFBO0FBVUEsTUFBQSxJQUF3QixJQUFDLENBQUEsS0FBekI7QUFBQSxRQUFBLElBQUMsQ0FBQSxpQkFBRCxDQUFBLENBQUEsQ0FBQTtPQVZBO0FBV0EsTUFBQSxJQUFBLENBQUEsQ0FBOEIsSUFBQyxDQUFBLFFBQVEsQ0FBQyxNQUFWLElBQXFCLElBQUMsQ0FBQSxRQUFRLENBQUMsTUFBTSxDQUFDLElBQWpCLENBQUEsQ0FBQSxLQUE2QixFQUFoRixDQUFBO2VBQUEsSUFBQyxDQUFBLE1BQU0sQ0FBQyxNQUFSLENBQWUsT0FBZixFQUFBO09BWk07SUFBQSxDQXREUixDQUFBOztBQUFBLHlCQW9FQSxVQUFBLEdBQVksU0FBQyxJQUFELEdBQUE7YUFBVSxJQUFDLENBQUEsUUFBUSxDQUFDLElBQVYsR0FBaUIsS0FBM0I7SUFBQSxDQXBFWixDQUFBOztzQkFBQTs7S0FEdUIsS0FBSyxDQUFDLFdBZC9CLENBQUE7O0FBQUEsRUFzRkEsTUFBTSxDQUFDLE9BQVAsR0FBaUIsVUF0RmpCLENBQUE7QUFBQTs7Ozs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcnVCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDclBBOztBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDclVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xzUkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDakNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDajFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQy9XQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQzVQQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNUQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDOTZCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQ3g1SUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQ3R1QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbGVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcEpBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcFNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDakJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FDOU5BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDdkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUNSQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUNoT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMzRkE7O0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDN0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDM0xBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDelRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDM25DQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FDMWtCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJTcGluZSAgICAgPSByZXF1aXJlIFwic3BpbmVcIlxuSWNlZCAgICAgID0gcmVxdWlyZSAnaWNlZC1jb2ZmZWUtc2NyaXB0J1xue2luc3BlY3R9ID0gcmVxdWlyZSBcInV0aWxcIlxuXG5cbmNsYXNzIENvbnNvbGUgZXh0ZW5kcyBTcGluZS5Db250cm9sbGVyXG4gIGxvZ1ByZWZpeDogXCIoUGxheWdyb3VuZDpDb25zb2xlKVwiXG5cbiAgREVGQVVMVF9TRVRUSU5HUyA9XG4gICAgbGFzdFZhcmlhYmxlOiAnJF8nXG4gICAgbWF4TGluZXM6IDhcbiAgICBtYXhEZXB0aDogMlxuICAgIHNob3dIaWRkZW46IGZhbHNlXG4gICAgY29sb3JpemU6IGZhbHNlXG5cbiAgZWxlbWVudHM6XG4gICAgXCJidXR0b24ucmVmcmVzaC1jb25zb2xlXCI6IFwiYnV0dG9uUmVmcmVzaENvbnNvbGVcIlxuXG4gIGFkZFRvSGlzdG9yeTogKHMpID0+XG4gICAgQGhpc3RvcnkudW5zaGlmdCBzXG4gICAgQGhpc3RvcnlpID0gLTFcblxuICBhZGRUb1NhdmVkOiAocykgPT5cbiAgICBAc2F2ZWQgKz0gaWYgc1suLi4tMV0gaXMgJ1xcXFwnIHRoZW4gc1swLi4uLTFdIGVsc2Ugc1xuICAgIEBzYXZlZCArPSAnXFxuJ1xuICAgIEBhZGRUb0hpc3Rvcnkgc1xuXG4gIGhhbmRsZUtleXByZXNzOiAoZSkgPT5cbiAgICBzd2l0Y2ggZS53aGljaFxuICAgICAgd2hlbiAxM1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgaW5wdXQgPSBAaW5wdXQudmFsKClcblxuICAgICAgICBpZiBpbnB1dFxuICAgICAgICAgIEBhZGRUb1NhdmVkIGlucHV0XG4gICAgICAgICAgaWYgaW5wdXRbLi4uLTFdIGlzbnQgJ1xcXFwnIGFuZCBub3QgQG11bHRpbGluZVxuICAgICAgICAgICAgQHByb2Nlc3NTYXZlZCgpXG5cbiAgICAgIHdoZW4gMjdcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgIGlucHV0ID0gQGlucHV0LnZhbCgpXG5cbiAgICAgICAgaWYgaW5wdXQgYW5kIEBtdWx0aWxpbmUgYW5kIEBzYXZlZFxuICAgICAgICAgIGlucHV0ID0gQGlucHV0LnZhbCgpXG5cbiAgICAgICAgICBAYWRkVG9TYXZlZCBpbnB1dFxuICAgICAgICAgIEBwcm9jZXNzU2F2ZWQoKVxuICAgICAgICBlbHNlIGlmIEBtdWx0aWxpbmUgYW5kIEBzYXZlZFxuICAgICAgICAgIEBwcm9jZXNzU2F2ZWQoKVxuXG4gICAgICAgIEBtdWx0aWxpbmUgPSBub3QgQG11bHRpbGluZVxuICAgICAgICAjIEBzZXRQcm9tcHQoKVxuXG4gICAgICB3aGVuIDM4XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKVxuXG4gICAgICAgIGlmIEBoaXN0b3J5aSA8IEBoaXN0b3J5Lmxlbmd0aC0xXG4gICAgICAgICAgQGhpc3RvcnlpICs9IDFcbiAgICAgICAgICBAaW5wdXQudmFsIEBoaXN0b3J5W0BoaXN0b3J5aV1cblxuICAgICAgd2hlbiA0MFxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KClcblxuICAgICAgICBpZiBAaGlzdG9yeWkgPiAwXG4gICAgICAgICAgQGhpc3RvcnlpICs9IC0xXG4gICAgICAgICAgQGlucHV0LnZhbCBAaGlzdG9yeVtAaGlzdG9yeWldXG5cbiAgbW91c2VlbnRlckNvbnNvbGVSZWZyZXNoOiAgICAgICAgLT4gQGJ1dHRvblJlZnJlc2hDb25zb2xlLmZhZGVJbiAxODBcbiAgbW91c2VlbnRlcktlZXBDb25zb2xlUmVmcmVzaDogICAgLT4gQGJ1dHRvblJlZnJlc2hDb25zb2xlLnN0b3AodHJ1ZSkuZmFkZVRvIDEsIDFcbiAgbW91c2VsZWF2ZUNvbnNvbGVSZWZyZXNoOiAgICAgICAgLT4gQGJ1dHRvblJlZnJlc2hDb25zb2xlLmZhZGVPdXQgMTgwXG5cbiAgZXZlbnRzOlxuICAgIFwibW91c2VlbnRlciBhc2lkZSNvdXRwdXRcIjogXCJtb3VzZWVudGVyQ29uc29sZVJlZnJlc2hcIlxuICAgIFwibW91c2VlbnRlciBidXR0b24ucmVmcmVzaC1jb25zb2xlXCI6IFwibW91c2VlbnRlcktlZXBDb25zb2xlUmVmcmVzaFwiXG4gICAgXCJtb3VzZWxlYXZlIGFzaWRlI291dHB1dFwiOiBcIm1vdXNlbGVhdmVDb25zb2xlUmVmcmVzaFwiXG5cbiAgY29uc3RydWN0b3I6IChvcHRpb25zLCBzZXR0aW5ncyA9IHt9KSAtPlxuICAgIEBoaXN0b3J5ID0gW11cbiAgICBAaGlzdG9yeWkgPSAtMVxuICAgIEBzYXZlZCA9ICcnXG4gICAgQG11bHRpbGluZSA9IGZhbHNlXG5cbiAgICBzdXBlclxuICAgIEBpbnB1dC5rZXlkb3duIEBoYW5kbGVLZXlwcmVzc1xuXG4gICAgQHNldHRpbmdzID0gJC5leHRlbmQoe30sIERFRkFVTFRfU0VUVElOR1MpXG5cbiAgICBpZiBsb2NhbFN0b3JhZ2UgYW5kIGxvY2FsU3RvcmFnZS5zZXR0aW5nc1xuICAgICAgZm9yIGssIHYgb2YgSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2Uuc2V0dGluZ3MpXG4gICAgICAgIEBzZXR0aW5nc1trXSA9IHZcblxuICAgIGZvciBvd24gaywgdiBvZiBzZXR0aW5nc1xuICAgICAgQHNldHRpbmdzW2tdID0gdlxuXG5cbiAgbGFuZzogKG5hbWUpIC0+XG4gICAgaWYgbmFtZSB0aGVuIEBfbGFuZyA9IG5hbWVcbiAgICBlbHNlIEBfbGFuZ1xuXG4gIHByb2Nlc3NTYXZlZDogLT5cbiAgICB0cnlcbiAgICAgIGNvbXBpbGVkID0gc3dpdGNoIEBsYW5nKClcbiAgICAgICAgd2hlbiBcImNvZmZlZVwiIHRoZW4gSWNlZC5jb21waWxlIEBzYXZlZCwgYmFyZTogb25cbiAgICAgICAgd2hlbiBcInZhbmlsbGFcIiB0aGVuIEBzYXZlZFxuXG4gICAgICB2YWx1ZSA9IGV2YWwuY2FsbCB3aW5kb3csIGNvbXBpbGVkXG4gICAgICB3aW5kb3dbQHNldHRpbmdzLmxhc3RWYXJpYWJsZV0gPSB2YWx1ZVxuICAgICAgQHByaW50VmFsdWUgdmFsdWVcbiAgICBjYXRjaCBlXG4gICAgICBAcHJpbnRDb21waWxlRXJyb3IgZVxuICAgIGZpbmFsbHlcbiAgICAgIEBzYXZlZCA9ICcnXG5cbiAgcHJpbnQ6IChhcmdzLi4uKSA9PlxuICAgIHMgPSBhcmdzLmpvaW4oJyAnKSBvciAnICdcbiAgICBvID0gQGVsLmh0bWwoKSArIHMgKyAnXFxuJ1xuICAgIEBodG1sIG8uc3BsaXQoJ1xcbicpWy1Ac2V0dGluZ3MubWF4TGluZXMuLi5dLmpvaW4oJ1xcbicpXG4gICAgdW5kZWZpbmVkXG5cbiAgcHJpbnRWYWx1ZTogKHZhbHVlKSA9PlxuICAgIEBwcmludCBpbnNwZWN0IHZhbHVlLCBAc2V0dGluZ3Muc2hvd0hpZGRlbiwgQHNldHRpbmdzLm1heERlcHRoLCBAc2V0dGluZ3MuY29sb3JpemVcblxuICBwcmludENvbXBpbGVFcnJvcjogKGUpIC0+XG4gICAgaWYgZS5zdGFja1xuICAgICAgb3V0cHV0ID0gZS5zdGFja1xuICAgICAjIEZGIGRvZXNuJ3QgaGF2ZSBFcnJvci50b1N0cmluZygpIGFzIHRoZSBmaXJzdCBsaW5lIG9mIEVycm9yLnN0YWNrXG4gICAgICMgd2hpbGUgQ2hyb21lIGRvZXMuXG4gICAgIGlmIG91dHB1dD8uc3BsaXQoJ1xcbicpWzBdIGlzbnQgZS50b1N0cmluZygpXG4gICAgICAgIG91dHB1dCA9IFwiI3tlLnRvU3RyaW5nKCl9XFxuI3tlLnN0YWNrfVwiXG4gICAgZWxzZVxuICAgICAgb3V0cHV0ID0gZS50b1N0cmluZygpXG4gICAgQHByaW50IG91dHB1dFxuXG5cblxubW9kdWxlLmV4cG9ydHMgPSBDb25zb2xlIiwiU3BpbmUgICAgICA9IHJlcXVpcmUgJ3NwaW5lJ1xuSWNlZCAgICAgICA9IHJlcXVpcmUgJ2ljZWQtY29mZmVlLXNjcmlwdCdcbkNvZGVNaXJyb3IgPSByZXF1aXJlIFwiY29kZW1pcnJvclwiXG5JY2VkTWlycm9yID0gcmVxdWlyZSBcImNvZGVtaXJyb3ItaWNlZC1jb2ZmZWUtc2NyaXB0XCJcbmpzMmNvZmZlZSAgPSByZXF1aXJlIFwianMyY29mZmVlL2Rpc3QvanMyY29mZmVlXCJcbkZpbGVRdWV1ZSAgPSByZXF1aXJlICcuLi9saWIvZmlsZXF1ZXVlJ1xuXG5cbmNsYXNzIEVkaXRvciBleHRlbmRzIFNwaW5lLkNvbnRyb2xsZXJcbiAgbG9nUHJlZml4OiBcIihQbGF5Z3JvdW5kOkVkaXRvcilcIlxuXG4gIERFRkFVTFRfU0VUVElOR1MgPVxuICAgIGxhc3RWYXJpYWJsZTogJyRfJ1xuXG4gIGVsZW1lbnRzOlxuICAgIFwibmF2LnNhbmRib3hcIjogXCJuYXZTYW5kYm94XCJcbiAgICBcInRleHRhcmVhLnNhbmRib3hcIjogXCJwbGFjZWhvbGRlclwiXG4gICAgXCJmb290ZXJcIjogXCJmb290ZXJcIlxuICAgIFwiYXNpZGUjaGVscFwiOiBcImhlbHBcIlxuXG4gIHRvZ2dsZUhlbHA6IC0+XG4gICAgaWYgQGhlbHAuaXMgXCI6dmlzaWJsZVwiIHRoZW4gQGhlbHAuZmFkZU91dCAzMDBcbiAgICBlbHNlIEBoZWxwLmZhZGVJbiAzMDBcblxuICBzYXZlU2V0dGluZ3M6IC0+XG4gICAgaW5wdXQgPSBAdmFsKClcbiAgICBAYWRkVG9TYXZlZCBpbnB1dFxuICAgIGxvY2FsU3RvcmFnZS5zZXR0aW5ncyA9IEpTT04uc3RyaW5naWZ5ICQuZXh0ZW5kIHt9LCBAc2V0dGluZ3MsIGFzc2V0czogd2luZG93LmFzc2V0cywgc2NyaXB0OiBAc2F2ZWRcblxuICBydW5PclN0b3BVc2VyU2NyaXB0OiAoZSkgLT5cbiAgICBidXR0b24gPSAkKGUudGFyZ2V0KS5jbG9zZXN0KCdidXR0b24nKVxuICAgIGlmIGJ1dHRvbi5pcyBcIi5zZWxlY3RlZFwiXG4gICAgICBAc3RvcFVzZXJTY3JpcHQoKVxuICAgICAgYnV0dG9uLnRleHQgXCJydW4hXCJcbiAgICBlbHNlXG4gICAgICBAcnVuVXNlclNjcmlwdCgpXG4gICAgICBidXR0b24udGV4dCBcInN0b3AhXCJcbiAgICBidXR0b24udG9nZ2xlQ2xhc3MgXCJzZWxlY3RlZFwiXG5cbiAgcnVuVXNlclNjcmlwdDogLT5cbiAgICByZXR1cm4gdW5sZXNzIGlucHV0ID0gQHZhbCgpXG4gICAgQGFkZFRvU2F2ZWQgaW5wdXRcbiAgICBAcHJvY2Vzc1NhdmVkKClcblxuICBzdG9wVXNlclNjcmlwdDogLT4gd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lIHdpbmRvdy5mcmFtZVxuXG4gIHByb2Nlc3NTYXZlZDogLT5cbiAgICBAdHJpZ2dlciBcInByZXNhdmVcIlxuICAgIHRyeVxuICAgICAgY29tcGlsZWQgPSBzd2l0Y2ggQGxhbmcoKVxuICAgICAgICB3aGVuIFwiY29mZmVlXCIgdGhlbiBJY2VkLmNvbXBpbGUgQHNhdmVkLCBiYXJlOiBvbiwgcnVudGltZTogXCJpbmxpbmVcIlxuICAgICAgICB3aGVuIFwidmFuaWxsYVwiIHRoZW4gQHNhdmVkXG5cbiAgICAgIHZhbHVlID0gZXZhbC5jYWxsIHdpbmRvdywgY29tcGlsZWRcbiAgICAgIHdpbmRvd1tAc2V0dGluZ3MubGFzdFZhcmlhYmxlXSA9IHZhbHVlXG4gICAgICBAY29uc29sZS5wcmludFZhbHVlIHZhbHVlXG4gICAgY2F0Y2ggZVxuICAgICAgQGNvbnNvbGUucHJpbnRDb21waWxlRXJyb3IgZVxuXG4gICAgQHNhdmVkID0gJydcblxuICBhZGRUb0hpc3Rvcnk6IChzKSA9PlxuICAgIEBoaXN0b3J5LnVuc2hpZnQgc1xuICAgIEBoaXN0b3J5aSA9IC0xXG5cbiAgYWRkVG9TYXZlZDogKHMpID0+XG4gICAgQHNhdmVkICs9IGlmIHNbLi4uLTFdIGlzICdcXFxcJyB0aGVuIHNbMC4uLi0xXSBlbHNlIHNcbiAgICBAc2F2ZWQgKz0gJ1xcbidcbiAgICBAYWRkVG9IaXN0b3J5IHNcblxuICBtb3VzZWVudGVyRXhhbXBsZU5hdjogICAgICAgICAgICAtPiBAbmF2U2FuZGJveC5mYWRlSW4gMTgwXG4gIG1vdXNlZW50ZXJLZWVwRXhhbXBsZU5hdjogICAgICAgIC0+IEBuYXZTYW5kYm94LnN0b3AodHJ1ZSkuZmFkZVRvIDEsIDFcbiAgbW91c2VsZWF2ZUV4YW1wbGVOYXY6ICAgICAgICAgICAgLT4gQG5hdlNhbmRib3guZmFkZU91dCAxODBcblxuICBzd2l0Y2hMYW5nOiAoZSkgLT5cbiAgICBlbCA9ICQoZS50YXJnZXQpLmNsb3Nlc3QoJ2J1dHRvbicpXG4gICAgcmV0dXJuIGlmIGVsLmlzIFwiLnNlbGVjdGVkXCJcblxuICAgIGlmICgoZWwuaXMgXCIubGFuZ3N3aXRjaC1jb2ZmZWVcIikgYW5kIEBzd2l0Y2hUb0NvZmZlZSgpKSBvciBAc3dpdGNoVG9WYW5pbGxhKClcbiAgICAgIGVsLmFkZENsYXNzKFwic2VsZWN0ZWRcIikuc2libGluZ3MoKS5yZW1vdmVDbGFzcyBcInNlbGVjdGVkXCJcblxuICBsYW5nOiAobmFtZSkgLT5cbiAgICBpZiBuYW1lIHRoZW4gQHRyaWdnZXIgXCJsYW5nY2hhbmdlXCIsIEBfbGFuZyA9IG5hbWVcbiAgICBlbHNlIEBfbGFuZ1xuXG4gIGV2ZW50czpcbiAgICBcImNsaWNrIGJ1dHRvbi5oZWxwXCI6IFwidG9nZ2xlSGVscFwiXG4gICAgXCJjbGljayBidXR0b24uc2F2ZVwiOiBcInNhdmVTZXR0aW5nc1wiXG4gICAgXCJjbGljayBidXR0b24ucnVuXCI6IFwicnVuT3JTdG9wVXNlclNjcmlwdFwiXG4gICAgXCJjbGljayBidXR0b24ucmVmcmVzaC1leGFtcGxlXCI6IFwicmVmcmVzaEV4YW1wbGVcIlxuICAgIFwibW91c2VlbnRlciAuQ29kZU1pcnJvclwiOiBcIm1vdXNlZW50ZXJFeGFtcGxlTmF2XCJcbiAgICBcIm1vdXNlZW50ZXIgbmF2LnNhbmRib3hcIjogXCJtb3VzZWVudGVyS2VlcEV4YW1wbGVOYXZcIlxuICAgIFwibW91c2VsZWF2ZSAuQ29kZU1pcnJvclwiOiBcIm1vdXNlbGVhdmVFeGFtcGxlTmF2XCJcbiAgICBcImNsaWNrIGJ1dHRvbi5sYW5nc3dpdGNoLWNvZmZlZVwiOiBcInN3aXRjaExhbmdcIlxuICAgIFwiY2xpY2sgYnV0dG9uLmxhbmdzd2l0Y2gtdmFuaWxsYVwiOiBcInN3aXRjaExhbmdcIlxuICAgIFwiZHJhZ292ZXIgZm9vdGVyXCI6IFwiZmlsZURyYWdIb3ZlclwiXG4gICAgXCJkcmFnbGVhdmUgZm9vdGVyXCI6IFwiZmlsZURyYWdIb3ZlclwiXG4gICAgXCJkcm9wIGZvb3RlclwiOiBcImZpbGVTZWxlY3RIYW5kbGVyXCJcblxuICBjb25zdHJ1Y3RvcjogKG9wdGlvbnMsIHNldHRpbmdzID0ge30pIC0+XG4gICAgQGhpc3RvcnkgPSBbXVxuICAgIEBoaXN0b3J5aSA9IC0xXG4gICAgQHNhdmVkID0gJydcbiAgICAjIEBtdWx0aWxpbmUgPSBmYWxzZVxuXG4gICAgc3VwZXJcblxuICAgIEBzZXR0aW5ncyA9ICQuZXh0ZW5kKHt9LCBERUZBVUxUX1NFVFRJTkdTKVxuXG4gICAgaWYgbG9jYWxTdG9yYWdlIGFuZCBsb2NhbFN0b3JhZ2Uuc2V0dGluZ3NcbiAgICAgIGZvciBrLCB2IG9mIEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLnNldHRpbmdzKVxuICAgICAgICBAc2V0dGluZ3Nba10gPSB2XG4gICAgICAgIHN3aXRjaCBrXG4gICAgICAgICAgd2hlbiBcImFzc2V0c1wiLCBcInVzZXJzY3JpcHRzXCJcbiAgICAgICAgICAgIHdpbmRvd1trXSA9IHZcblxuICAgIGZvciBvd24gaywgdiBvZiBzZXR0aW5nc1xuICAgICAgQHNldHRpbmdzW2tdID0gdlxuXG4gICAgQ29kZU1pcnJvci5rZXlNYXAudGFiU3BhY2UgPVxuICAgICAgZmFsbHRocm91Z2g6IFsnZGVmYXVsdCddXG4gICAgICBUYWI6IChjbSkgLT5cbiAgICAgICAgc3BhY2VzID0gQXJyYXkoY20uZ2V0T3B0aW9uKFwiaW5kZW50VW5pdFwiKSArIDEpLmpvaW4oXCIgXCIpXG4gICAgICAgIGNtLnJlcGxhY2VTZWxlY3Rpb24gc3BhY2VzLCBcImVuZFwiLCBcIitpbnB1dFwiXG5cbiAgICBAY29kZW1pcnJvciBvcj0gQ29kZU1pcnJvci5mcm9tVGV4dEFyZWEgQHBsYWNlaG9sZGVyWzBdLCB7XG4gICAgICBtb2RlOiBcImljZWRjb2ZmZWVzY3JpcHRcIlxuICAgICAgdGhlbWU6IFwibW9ub2thaVwiXG4gICAgICBsaW5lTnVtYmVyczogdHJ1ZVxuICAgICAgdGFiU2l6ZTogMlxuICAgICAga2V5TWFwOiBcInRhYlNwYWNlXCJcbiAgICB9XG4gICAgQHdyYXBwZXIgPSAkIEBjb2RlbWlycm9yLmdldFdyYXBwZXJFbGVtZW50KClcbiAgICBAd3JhcHBlci5hZGRDbGFzcyBcInNhbmRib3hcIlxuICAgIGlmIEBzZXR0aW5ncy5zY3JpcHRcbiAgICAgIEB2YWwgQHNldHRpbmdzLnNjcmlwdFxuICAgICAgQHNjcm9sbFRvRW5kKClcblxuICByZW5kZXI6IChleGFtcGxlbmFtZSkgLT5cbiAgICBAbG9hZEV4YW1wbGUgZXhhbXBsZW5hbWVcblxuICB2YWw6ICh2YWx1ZSkgLT5cbiAgICBpZiB2YWx1ZSB0aGVuIEBjb2RlbWlycm9yLmRvYy5zZXRWYWx1ZSBcIiN7dmFsdWV9XFxuXFxuXFxuXFxuXCJcbiAgICBlbHNlIEBjb2RlbWlycm9yLmRvYy5nZXRWYWx1ZSgpXG5cbiAgbG9hZEV4YW1wbGU6IChuYW1lKSAtPlxuICAgIEBleGFtcGxlID0gbmFtZVxuICAgIGF3YWl0IEBleGFtcGxlc1tuYW1lXSBkZWZlciBleGFtcGxlXG4gICAgQHZhbCBleGFtcGxlXG4gICAgQHNjcm9sbFRvRW5kKClcblxuICBzY3JvbGxUb0VuZDogLT4gQGNvZGVtaXJyb3Iuc2Nyb2xsSW50b1ZpZXcgQGNvZGVtaXJyb3IuZG9jLmxpbmVDb3VudCgpIC0gMVxuXG4gIHJlZnJlc2hFeGFtcGxlOiAtPiBAbG9hZEV4YW1wbGUgQGV4YW1wbGVcblxuICBjbGVhcjogLT4gQHZhbCBcIlwiXG5cbiAgc3dpdGNoVG9WYW5pbGxhOiAtPlxuICAgIHVubGVzcyBpbnB1dCA9IEB2YWwoKVxuICAgICAgQGxhbmcgXCJ2YW5pbGxhXCJcbiAgICAgIHJldHVybiB0cnVlXG5cbiAgICB0cnlcbiAgICAgIGNvbXBpbGVkID0gSWNlZC5jb21waWxlIGlucHV0LCBiYXJlOiBvbiwgcnVudGltZTogXCJpbmxpbmVcIlxuICAgICAgQHZhbCBjb21waWxlZFxuICAgICAgQGxhbmcgXCJ2YW5pbGxhXCJcbiAgICAgIHJldHVybiB0cnVlXG4gICAgY2F0Y2ggZVxuICAgICAgQGNvbnNvbGUucHJpbnRDb21waWxlRXJyb3IgZVxuICAgICAgcmV0dXJuIGZhbHNlXG5cbiAgc3dpdGNoVG9Db2ZmZWU6IC0+XG4gICAgdW5sZXNzIGlucHV0ID0gQHZhbCgpXG4gICAgICBAbGFuZyBcImNvZmZlZVwiXG4gICAgICByZXR1cm4gdHJ1ZVxuXG4gICAgdHJ5XG4gICAgICBjb21waWxlZCA9IGpzMmNvZmZlZS5idWlsZCBpbnB1dCwge3Nob3dfc3JjX2xpbmVubzogdHJ1ZSwgaW5kZW50OiBcIiAgXCJ9XG4gICAgICBAdmFsIFwiI3tjb21waWxlZC5jb2RlfVwiXG4gICAgICBAbGFuZyBcImNvZmZlZVwiXG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIGNhdGNoIGVcbiAgICAgIG91dHB1dCA9IEBjb25zb2xlLnByaW50Q29tcGlsZUVycm9yIGVcbiAgICAgIEBwcmludCBvdXRwdXRcbiAgICAgIHJldHVybiBmYWxzZVxuXG4gIGZpbGVEcmFnSG92ZXI6IChlKSAtPlxuICAgIGUuc3RvcFByb3BhZ2F0aW9uKClcbiAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICBAZm9vdGVyLnRvZ2dsZUNsYXNzIFwiZHJhZ2hvdmVyXCIsIGUudHlwZSBpcyBcImRyYWdvdmVyXCJcblxuICBmaWxlU2VsZWN0SGFuZGxlcjogKGUpIC0+XG4gICAgIyBjYW5jZWwgZXZlbnQgYW5kIGhvdmVyIHN0eWxpbmdcbiAgICBAZmlsZURyYWdIb3ZlciBlXG5cbiAgICAjIGZldGNoIEZpbGVMaXN0IG9iamVjdFxuICAgIGUgPSBlLm9yaWdpbmFsRXZlbnQgaWYgZS5vcmlnaW5hbEV2ZW50P1xuICAgIGZpbGVzID0gZS50YXJnZXQuZmlsZXMgb3IgZS5kYXRhVHJhbnNmZXIuZmlsZXNcblxuICAgICMgcHJvY2VzcyBhbGwgRmlsZSBvYmplY3RzXG4gICAgQHBhcnNlRmlsZSBmaWxlIGZvciBmaWxlIGluIGZpbGVzXG5cbiAgcGFyc2VGaWxlOiAoZmlsZSkgLT5cbiAgICB7dHlwZX0gPSBmaWxlXG4gICAgaWYgLyhwbmd8Z2lmfGpwZWd8anBnKS8udGVzdCB0eXBlXG4gICAgICBAcGFyc2VJbWFnZSBmaWxlXG4gICAgZWxzZSBpZiAvKGphdmFzY3JpcHR8anN8Y29mZmVlfGljZWQpLy50ZXN0IHR5cGVcbiAgICAgIEBwYXJzZVNjcmlwdCBmaWxlXG4gICAgZWxzZVxuICAgICAgQGNvbnNvbGUucHJpbnQgXCJVbmtub3duIGZpbGV0eXBlOiAje3R5cGV9XCJcblxuICBwYXJzZUltYWdlOiAoZmlsZSkgLT5cbiAgICB7bmFtZX0gPSBmaWxlXG4gICAgd2luZG93LmFzc2V0cyBvcj0gW11cbiAgICB2YXJuYW1lID0gXCJ3aW5kb3cuYXNzZXRzWyN7d2luZG93LmFzc2V0cy5sZW5ndGh9XVwiXG4gICAgQGNvbnNvbGUucHJpbnQgXCJBZGRpbmcgI3tuYW1lfSBhcyAje3Zhcm5hbWV9XCJcblxuICAgIEBmaWxlUXVldWUgb3I9IG5ldyBGaWxlUXVldWVcbiAgICBhd2FpdCBAZmlsZVF1ZXVlLmF3YWl0UmVhZCB7ZmlsZTogZmlsZX0sIGRlZmVyIHN0YXR1cywgZGF0YXVybFxuICAgIHJldHVybiBAbG9nIFwiRXJyb3I6ICN7ZGF0YXVybH1cIiBpZiBzdGF0dXMgaXMgXCJlcnJvclwiXG5cbiAgICB3aW5kb3cuYXNzZXRzLnB1c2ggZGF0YXVybFxuICAgIHZhbHVlID0gc3dpdGNoIEBsYW5nKClcbiAgICAgIHdoZW4gXCJjb2ZmZWVcIiB0aGVuIFwiXCJcIiMgI3tuYW1lfVxubmV3aW1hZ2UgPSAje3Zhcm5hbWV9XG4je0B2YWwoKS50cmltKCl9XG5cIlwiXCJcbiAgICAgIHdoZW4gXCJ2YW5pbGxhXCIgdGhlbiBcIlwiXCIvLyAje25hbWV9XG52YXIgbmV3aW1hZ2UgPSAje3Zhcm5hbWV9XG4je0B2YWwoKS50cmltKCl9XG5cIlwiXCJcbiAgICBAdmFsIHZhbHVlXG4gICAgQGNvZGVtaXJyb3Iuc2Nyb2xsSW50b1ZpZXcgMFxuXG4gIHBhcnNlU2NyaXB0OiAoZmlsZSkgLT5cbiAgICB7bmFtZX0gPSBmaWxlXG4gICAgd2luZG93LnVzZXJzY3JpcHRzID89IFtdXG4gICAgdmFybmFtZSA9IFwid2luZG93LnVzZXJzY3JpcHRzWyN7d2luZG93LnVzZXJzY3JpcHRzLmxlbmd0aH1dXCJcbiAgICBAY29uc29sZS5wcmludCBcIkFkZGluZyAje25hbWV9IGFzICN7dmFybmFtZX1cIlxuXG4gICAgQGZpbGVRdWV1ZSBvcj0gbmV3IEZpbGVRdWV1ZVxuICAgIGF3YWl0IEBmaWxlUXVldWUuYXdhaXRSZWFkIHtmaWxlOiBmaWxlLCByZWFkQXM6IFwiVGV4dFwifSwgZGVmZXIgc3RhdHVzLCB0ZXh0XG4gICAgcmV0dXJuIEBsb2cgXCJFcnJvcjogI3t0ZXh0fVwiIGlmIHN0YXR1cyBpcyBcImVycm9yXCJcblxuICAgIHdpbmRvdy51c2Vyc2NyaXB0cy5wdXNoIHRleHRcbiAgICB2YWx1ZSA9IHN3aXRjaCBAbGFuZygpXG4gICAgICB3aGVuIFwiY29mZmVlXCIgdGhlbiBcIlwiXCIjICN7bmFtZX1cbiMgaWYgdGhpcyBpcyBhIENvbW1vbkpTIG1vZHVsZSwgcnVuOlxuIyByZXF1aXJlLmRlZmluZSBcIm1vZHVsZS1uYW1lXCI6IGV2YWwgI3t2YXJuYW1lfVxuI1xuIyB0byBzYXZlIHRoaXMgaW4gbG9jYWxTdG9yYWdlIHdpdGggdGhlIHNjcmlwdCwgcnVuOlxuIyBhcHAuZWRpdG9yLnNhdmVVc2VyU2NyaXB0ICN7dmFybmFtZX1cbm5ld3NjcmlwdCA9ICN7dmFybmFtZX1cbiN7QHZhbCgpLnRyaW0oKX1cblwiXCJcIlxuICAgICAgd2hlbiBcInZhbmlsbGFcIiB0aGVuIFwiXCJcIi8vICN7bmFtZX1cbi8vIGlmIHRoaXMgaXMgYSBDb21tb25KUyBtb2R1bGUsIHJ1bjpcbi8vIHJlcXVpcmUuZGVmaW5lKHtcIm1vZHVsZS1uYW1lXCI6IGV2YWwoI3t2YXJuYW1lfSl9KVxuLy9cbi8vIHRvIHNhdmUgdGhpcyBpbiBsb2NhbFN0b3JhZ2Ugd2l0aCB0aGUgc2NyaXB0LCBydW46XG4vLyBhcHAuZWRpdG9yLnNhdmVVc2VyU2NyaXB0KCN7dmFybmFtZX0pXG52YXIgbmV3c2NyaXB0ID0gI3t2YXJuYW1lfVxuI3tAdmFsKCkudHJpbSgpfVxuXCJcIlwiXG4gICAgQHZhbCB2YWx1ZVxuICAgIEBjb2RlbWlycm9yLnNjcm9sbEludG9WaWV3IDBcblxuICBzYXZlVXNlclNjcmlwdDogKHNjcmlwdCkgLT5cbiAgICBAc2V0dGluZ3MudXNlcnNjcmlwdHMgPz0gW11cbiAgICBAc2V0dGluZ3MudXNlcnNjcmlwdHMucHVzaCBzY3JpcHQgdW5sZXNzIHNjcmlwdCBpbiBAc2V0dGluZ3MudXNlcnNjcmlwdHNcblxubW9kdWxlLmV4cG9ydHMgPSBFZGl0b3JcbiIsIlNwaW5lICAgID0gcmVxdWlyZSBcInNwaW5lXCJcblBJWEkgICAgID0gcmVxdWlyZSBcIi4uL2xpYi9waXhpLmRldi5qc1wiXG5TdGF0cyAgICA9IHJlcXVpcmUgXCJzdGF0cy5qc1wiXG5cblxuZXh0ZW5kID0gKGJhc2UsIG9ianMuLi4pIC0+XG4gIGJhc2Vba2V5XSA9IHZhbHVlIGZvciBrZXksIHZhbHVlIG9mIG9iaiBmb3Igb2JqIGluIG9ianNcbiAgYmFzZVxuXG5cbmNsYXNzIFN0YWdlIGV4dGVuZHMgU3BpbmUuQ29udHJvbGxlclxuICBsb2dQcmVmaXg6IFwiKFBsYXlncm91bmQ6U3RhZ2UpXCJcblxuICBwaXhpZGVmYXVsdHM6XG4gICAgYmFja2dyb3VuZENvbG9yOiAweEZGRkZGRlxuICAgIHRyYW5zcGFyZW50OiBmYWxzZVxuICAgIGFudGlhbGlhczogZmFsc2VcblxuICByZXNpemU6IC0+XG5cbiAgYmluZFJlc2l6ZTogLT5cbiAgICAkKHdpbmRvdykucmVzaXplIEByZXNpemVcbiAgICAkKHdpbmRvdykub24gXCJvbm9yaWVudGF0aW9uY2hhbmdlXCIsIEByZXNpemVcblxuICByZWxlYXNlOiAtPlxuICAgICQod2luZG93KS5vZmYgXCJyZXNpemVcIiwgQHJlc2l6ZVxuICAgICQod2luZG93KS5vZmYgXCJvbm9yaWVudGF0aW9uY2hhbmdlXCIsIEByZXNpemVcblxuICBfZnJhbWVGbnM6ICAgICBbXVxuICBhZGRGcmFtZUZuOiAgICAoZm4pIC0+IEBfZnJhbWVGbnMucHVzaCBmblxuICByZW1vdmVGcmFtZUZuOiAoZm4pIC0+IEBfZnJhbWVGbnMuc3BsaWNlIChAX2ZyYW1lRm5zLmluZGV4T2YgZm4pLCAxXG5cbiAgYW5pOiAobG9vcGZuID0gLT4pIC0+XG4gICAgQGFkZEZyYW1lRm4gbG9vcGZuXG5cbiAgICByZWN1cnNpdmVsb29wID0gPT5cbiAgICAgICMgQmVnaW5uaW5nIG9mIGFuaW1hdGlvbiBsb29wXG4gICAgICBAc3RhdHMuYmVnaW4oKVxuICAgICAgIyBDYWxsIHRoZSBhbmltYXRpb25cbiAgICAgIGZuKCkgZm9yIGZuIGluIEBfZnJhbWVGbnNcbiAgICAgICMgcmVuZGVyIHRoZSBzdGFnZVxuICAgICAgQHJlbmRlcmVyLnJlbmRlciBAc3RhZ2VcbiAgICAgICMgUmVjdXJzaXZlbHkgbG9vcCB0aGlzIGFuaW1hdGlvblxuICAgICAgQGZyYW1lID0gcmVxdWVzdEFuaW1GcmFtZSByZWN1cnNpdmVsb29wXG4gICAgICAjIEVuZCBvZiBhbmltYXRpb24gbG9vcFxuICAgICAgQHN0YXRzLmVuZCgpXG4gICAgQGZyYW1lID0gcmVxdWVzdEFuaW1GcmFtZSByZWN1cnNpdmVsb29wXG5cbiAgY29uc3RydWN0b3I6IChvcHRpb25zLCBwaXhpc2V0dGluZ3MgPSB7fSkgLT5cbiAgICBzdXBlclxuXG4gICAgQHBpeGlzZXR0aW5ncyAgICAgID0gZXh0ZW5kIHt9LCBAcGl4aWRlZmF1bHRzLCBwaXhpc2V0dGluZ3NcblxuICAgIEBzdGFnZSAgICAgICAgICAgICA9IG5ldyBQSVhJLlN0YWdlIEBwaXhpc2V0dGluZ3MuYmFja2dyb3VuZENvbG9yXG4gICAgQHN0YWdlLndpZHRoICAgICAgID0gQGVsLndpZHRoKClcbiAgICBAc3RhZ2UuaGVpZ2h0ICAgICAgPSBAZWwuaGVpZ2h0KClcbiAgICBAc3RhZ2UuaW50ZXJhY3RpdmUgPSBAcGl4aXNldHRpbmdzLmludGVyYWN0aXZlXG5cbiAgICB3aW5kb3cuc3RhZ2UgPSBAc3RhZ2VcbiAgICB3aW5kb3cuYW5pICAgPSBAcHJveHkgQGFuaVxuICAgIHdpbmRvdy5QSVhJICA9IFBJWElcblxuICAgIEByZW5kZXIoKVxuICAgIEBiaW5kUmVzaXplKClcbiAgICBAYWRkQ2hpbGQgPSBAYXBwZW5kXG4gICAgQHJlbW92ZUNoaWxkcmVuID0gQHJlbW92ZVxuXG4gIHJlbmRlcjogLT5cbiAgICAjIGxldCBwaXhpIGNob29zZSBXZWJHTCBvciBjYW52YXNcbiAgICBAcmVuZGVyZXIgPSBQSVhJLmF1dG9EZXRlY3RSZW5kZXJlciBAc3RhZ2Uud2lkdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQHN0YWdlLmhlaWdodCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEBwaXhpc2V0dGluZ3MudHJhbnNwYXJlbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQHBpeGlzZXR0aW5ncy5hbnRpYWxpYXNcbiAgICBAc3RhdHMgICAgPSBuZXcgU3RhdHNcbiAgICBAJHN0YXRzICAgPSAkIEBzdGF0cy5kb21FbGVtZW50XG5cbiAgICAjIGF0dGFjaCByZW5kZXJlciwgc3RhdHMgaW5zdGFuY2VzIHRvIHdpbmRvd1xuICAgIHdpbmRvdy5yZW5kZXJlciA9IEByZW5kZXJlclxuICAgIHdpbmRvdy5zdGF0cyAgICA9IEBzdGF0c1xuICAgICMgYXR0YWNoIHJlbmRlciB0byBwYWdlXG4gICAgQGVsLmFwcGVuZCBAcmVuZGVyZXIudmlld1xuICAgIEBoaWRlU3RhdHMoKVxuICAgIEBlbC5hcHBlbmQgQCRzdGF0c1xuXG4gIGhpZGVTdGF0czogLT4gQCRzdGF0cy5jc3MgZGlzcGxheTogXCJub25lXCJcbiAgc2hvd1N0YXRzOiAtPiBAJHN0YXRzLmNzcyBkaXNwbGF5OiBcImJsb2NrXCIsIHBvc2l0aW9uOiBcImFic29sdXRlXCJcblxuICBhcHBlbmQ6IChjaGlsZHJlbi4uLikgLT5cbiAgICBmb3IgY2hpbGQgaW4gY2hpbGRyZW5cbiAgICAgIGlmIGNoaWxkLmRpc3BsYXlcbiAgICAgICAgY2hpbGQuc3RhZ2UgPSB0aGlzXG4gICAgICAgIGNoaWxkID0gY2hpbGQuZGlzcGxheVxuICAgICAgQHN0YWdlLmFkZENoaWxkIGNoaWxkXG4gICAgdGhpc1xuXG4gIGFkZENoaWxkOiAtPlxuXG4gIHJlbW92ZTogKGNoaWxkcmVuLi4uKSAtPlxuICAgIGNoaWxkcmVuID0gQHN0YWdlLmNoaWxkcmVuIHVubGVzcyBjaGlsZHJlbi5sZW5ndGhcblxuICAgIGZvciBjaGlsZCBpbiBjaGlsZHJlbiBieSAtMVxuICAgICAgaWYgY2hpbGQuZGlzcGxheVxuICAgICAgICBjaGlsZC5zdGFnZSA9IG51bGxcbiAgICAgICAgY2hpbGQgPSBjaGlsZC5kaXNwbGF5XG4gICAgICBAc3RhZ2UucmVtb3ZlQ2hpbGQgY2hpbGRcbiAgICB0aGlzXG5cbiAgcmVtb3ZlQ2hpbGRyZW46IC0+XG5cbiAgcmVmcmVzaDogLT5cbiAgICBAcmVtb3ZlQ2hpbGRyZW4oKVxuICAgIEBzdGF0cy5lbmQoKVxuICAgIEByZW5kZXJlci5yZW5kZXIgQHN0YWdlXG5cbiAgc3RhY2tMZXZlbDogKGNoaWxkKSAtPiBAc3RhZ2UuY2hpbGRyZW4uaW5kZXhPZiAoY2hpbGQuZGlzcGxheSBvciBjaGlsZClcblxuICBicmluZ1RvRnJvbnQ6IChjaGlsZHJlbi4uLikgLT5cbiAgICBAcmVtb3ZlQ2hpbGRyZW4gY2hpbGRyZW4uLi5cbiAgICBAYXBwZW5kIGNoaWxkcmVuLi4uXG5cbiAgc2VuZFRvQmFjazogKGNoaWxkcmVuLi4uKSAtPlxuICAgIEBtb3ZlSW5TdGFjayBjaGlsZHJlbi4uLiwgMFxuXG4gIG1vdmVJblN0YWNrOiAoY2hpbGRyZW4uLi4sIG5ld0xldmVsKSAtPlxuICAgIEByZW1vdmVDaGlsZHJlbiBjaGlsZHJlbi4uLlxuICAgIEBhZGRDaGlsZHJlbkF0IGNoaWxkcmVuLi4uLCBuZXdMZXZlbFxuXG4gIGFkZENoaWxkcmVuQXQ6IChjaGlsZHJlbi4uLiwgbmV3TGV2ZWwpIC0+XG4gICAgZm9yIGNoaWxkIGluIGNoaWxkcmVuXG4gICAgICBpZiBjaGlsZC5kaXNwbGF5XG4gICAgICAgIGNoaWxkLnN0YWdlID0gdGhpc1xuICAgICAgICBjaGlsZCA9IGNoaWxkLmRpc3BsYXlcbiAgICBAc3RhZ2UuYWRkQ2hpbGRBdCAoY2hpbGQuZGlzcGxheSBvciBjaGlsZCksIG5ld0xldmVsIGZvciBjaGlsZCBpbiBjaGlsZHJlblxuICAgIHRoaXNcblxuXG5tb2R1bGUuZXhwb3J0cyA9IFN0YWdlXG4iLCJNYXRoMiA9XG4gIHJhbmRvbTogKGZyb20sIHRvKSAtPiBNYXRoLnJhbmRvbSgpICogKHRvIC0gZnJvbSkgKyBmcm9tXG5cbiAgbWFwOiAodmFsLCBpbnB1dE1pbiwgaW5wdXRNYXgsIG91dHB1dE1pbiwgb3V0cHV0TWF4KSAtPlxuICAgICgob3V0cHV0TWF4IC0gb3V0cHV0TWluKSAqICgodmFsIC0gaW5wdXRNaW4pIC8gKGlucHV0TWF4IC0gaW5wdXRNaW4pKSkgKyBvdXRwdXRNaW5cblxuICByYW5kb21QbHVzTWludXM6IChjaGFuY2UpIC0+XG4gICAgY2hhbmNlID0gaWYgY2hhbmNlIHRoZW4gY2hhbmNlIGVsc2UgMC41XG4gICAgaWYgTWF0aC5yYW5kb20oKSA+IGNoYW5jZSB0aGVuIC0xIGVsc2UgMVxuXG4gIHJhbmRvbUludDogKGZyb20sIHRvKSAtPiBNYXRoLmZsb29yIE1hdGgucmFuZG9tKCkgKiAoKyt0byAtIGZyb20pICsgZnJvbVxuXG4gIHJhbmRvbUJvb2w6IChjaGFuY2UpIC0+XG4gICAgY2hhbmNlID0gaWYgY2hhbmNlIHRoZW4gY2hhbmNlIGVsc2UgMC41XG4gICAgTWF0aC5yYW5kb20oKSA8IGNoYW5jZVxuXG5cbm1vZHVsZS5leHBvcnRzID0gTWF0aDIiLCJjbGFzcyBGaWxlUXVldWVcbiAgZW5hYmxlZDogdHJ1ZVxuXG4gIGRpc2FibGU6IChjYWxsYmFjaykgLT5cbiAgICBpZiBAZW5hYmxlZFxuICAgICAgQGVuYWJsZWQgPSBmYWxzZVxuICAgICAgdHJ5XG4gICAgICAgIGRvIGNhbGxiYWNrXG4gICAgICBjYXRjaCBlXG4gICAgICAgIHRocm93IGVcbiAgICAgIGZpbmFsbHlcbiAgICAgICAgQGVuYWJsZWQgPSB0cnVlXG4gICAgZWxzZVxuICAgICAgZG8gY2FsbGJhY2tcblxuICBtYXg6IDEwMFxuICB0aHJvdHRsZTogMFxuXG4gIHF1ZXVlOiAocmVxdWVzdCkgLT5cbiAgICBAcGlwZWxpbmVyIG9yPSBuZXcgUGlwZWxpbmVyIEBtYXgsIEB0aHJvdHRsZVxuICAgIHJldHVybiBAcGlwZWxpbmVyLnF1ZXVlIHVubGVzcyByZXF1ZXN0XG4gICAgYXdhaXQgQHBpcGVsaW5lci53YWl0SW5RdWV1ZSBkZWZlcigpXG4gICAgcmVxdWVzdCBAcGlwZWxpbmVyLmRlZmVyKClcblxuICBjbGVhclF1ZXVlOiAtPlxuICAgIEBwaXBlbGluZXIucXVldWUgPSBbXVxuICAgIEBwaXBlbGluZXIubl9vdXQgPSAwXG5cbiAgZGVmYXVsdHM6XG4gICAgcmVhZEFzOiBcIkRhdGFVUkxcIlxuICAgIGVuY29kaW5nOiBcIlVURi04XCJcblxuICByZWFkRmlsZTogKHBhcmFtcyA9IHt9LCBkZWZhdWx0cyA9IHt9KSAtPlxuICAgIHNldHRpbmdzICAgICAgID0gJC5leHRlbmQoe30sIEBkZWZhdWx0cywgZGVmYXVsdHMsIHBhcmFtcykgdW5sZXNzIGRlZmF1bHRzIGlzIHRydWVcbiAgICByZWFkZXIgICAgICAgICA9IG5ldyBGaWxlUmVhZGVyXG4gICAgcmVhZGVyLm9ubG9hZCAgPSAoZSkgLT4gc2V0dGluZ3Muc3VjY2VzcyByZWFkZXIucmVzdWx0XG4gICAgcmVhZGVyLm9uZXJyb3IgPSBzZXR0aW5ncy5lcnJvclxuXG4gICAgcmVhZCA9IHN3aXRjaCBzZXR0aW5ncy5yZWFkQXNcbiAgICAgIHdoZW4gXCJBcnJheUJ1ZmZlclwiICB0aGVuIHJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlciBzZXR0aW5ncy5maWxlLCBzZXR0aW5ncy5lbmNvZGluZ1xuICAgICAgd2hlbiBcIkJpbmFyeVN0cmluZ1wiIHRoZW4gcmVhZGVyLnJlYWRBc0JpbmFyeVN0cmluZyBzZXR0aW5ncy5maWxlLCBzZXR0aW5ncy5lbmNvZGluZ1xuICAgICAgd2hlbiBcIkRhdGFVUkxcIiAgICAgIHRoZW4gcmVhZGVyLnJlYWRBc0RhdGFVUkwgc2V0dGluZ3MuZmlsZSwgc2V0dGluZ3MuZW5jb2RpbmdcbiAgICAgIHdoZW4gXCJUZXh0XCIgICAgICAgICB0aGVuIHJlYWRlci5yZWFkQXNUZXh0IHNldHRpbmdzLmZpbGUsIHNldHRpbmdzLmVuY29kaW5nXG5cbiAgICByZWFkZXJcblxuICBxdWV1ZUZpbGU6IChwYXJhbXMgPSB7fSwgZGVmYXVsdHMgPSB7fSkgLT5cbiAgICBydiAgPSBuZXcgaWNlZC5SZW5kZXp2b3VzXG5cbiAgICBzZXR0aW5ncyAgICAgPSAkLmV4dGVuZCh7fSwgQGRlZmF1bHRzLCBkZWZhdWx0cywgcGFyYW1zKVxuICAgIGRlZmVyc3VjY2VzcyA9IHNldHRpbmdzLnN1Y2Nlc3NcbiAgICBkZWZlcmVycm9yICAgPSBzZXR0aW5ncy5lcnJvclxuXG4gICAgc2V0dGluZ3Muc3VjY2VzcyA9IHJ2LmlkKCdzdWNjZXNzJykuZGVmZXIgZVxuICAgIHNldHRpbmdzLmVycm9yICAgPSBydi5pZCgnZXJyb3InKS5kZWZlciBlXG5cbiAgICByZXF1ZXN0ID0gKG5leHQpIC0+XG4gICAgICByZWFkZXIgPSBAcmVhZEZpbGUgc2V0dGluZ3MsIHRydWVcbiAgICAgIGF3YWl0IHJ2LndhaXQgZGVmZXIgc3RhdHVzXG4gICAgICBzd2l0Y2ggc3RhdHVzXG4gICAgICAgIHdoZW4gJ3N1Y2Nlc3MnIHRoZW4gZGVmZXJzdWNjZXNzIHJlYWRlci5yZXN1bHRcbiAgICAgICAgd2hlbiAnZXJyb3InIHRoZW4gZGVmZXJlcnJvciBlXG4gICAgICBuZXh0KClcblxuICAgIHJlcXVlc3QuYWJvcnQgPSAoc3RhdHVzVGV4dCkgLT5cbiAgICAgIHJldHVybiByZWFkZXIuYWJvcnQoc3RhdHVzVGV4dCkgaWYgcmVhZGVyXG4gICAgICBpbmRleCA9IEBxdWV1ZSgpLmluZGV4T2YocmVxdWVzdClcbiAgICAgIEBxdWV1ZSgpLnNwbGljZShpbmRleCwgMSkgaWYgaW5kZXggPiAtMVxuICAgICAgQHBpcGVsaW5lci5uX291dC0tIGlmIEBwaXBlbGluZXJcblxuICAgICAgIyBkZWZlcnJlZC5yZWplY3RXaXRoKFxuICAgICAgIyAgIHNldHRpbmdzLmNvbnRleHQgb3Igc2V0dGluZ3MsXG4gICAgICAjICAgW3JlYWRlciwgc3RhdHVzVGV4dCwgJyddXG4gICAgICAjIClcbiAgICAgIHJlcXVlc3RcblxuICAgIHJldHVybiByZXF1ZXN0IHVubGVzcyBAZW5hYmxlZFxuICAgIEBxdWV1ZSByZXF1ZXN0XG4gICAgcmVxdWVzdFxuXG4gIGF3YWl0UmVhZDogKG9wdGlvbnMsIGNiLCBxdWV1ZSA9IGZhbHNlKSAtPlxuICAgIHJ2ID0gbmV3IGljZWQuUmVuZGV6dm91cygpXG5cbiAgICBvcHRpb25zLnN1Y2Nlc3MgPSBydi5pZCgnc3VjY2VzcycpLmRlZmVyIHJlc3VsdFxuICAgIG9wdGlvbnMuZXJyb3IgICA9IHJ2LmlkKCdlcnJvcicpLmRlZmVyIGVcblxuICAgIGlmIHF1ZXVlIHRoZW4gQGZpbGVRdWV1ZSBvcHRpb25zXG4gICAgZWxzZSBAcmVhZEZpbGUgb3B0aW9uc1xuXG4gICAgYXdhaXQgcnYud2FpdCBkZWZlciBzdGF0dXNcbiAgICBjYiBzdGF0dXMsIHJlc3VsdCBvciBlXG5cblxubW9kdWxlLmV4cG9ydHMgPSBGaWxlUXVldWUiLCIvKipcclxuICogQGF1dGhvciBNYXQgR3JvdmVzIGh0dHA6Ly9tYXRncm92ZXMuY29tLyBARG9vcm1hdDIzXHJcbiAqL1xyXG5cclxuKGZ1bmN0aW9uKCl7XHJcblxyXG5cdHZhciByb290ID0gdGhpcztcclxuXG4vKipcbiAqIEBhdXRob3IgTWF0IEdyb3ZlcyBodHRwOi8vbWF0Z3JvdmVzLmNvbS8gQERvb3JtYXQyM1xuICovXG5cbi8qKlxuICogQG1vZHVsZSBQSVhJXG4gKi9cbnZhciBQSVhJID0gUElYSSB8fCB7fTtcblxuLyoqXG4gKiBAYXV0aG9yIE1hdCBHcm92ZXMgaHR0cDovL21hdGdyb3Zlcy5jb20vIEBEb29ybWF0MjNcbiAqL1xuXG4vKipcbiAqIFRoZSBQb2ludCBvYmplY3QgcmVwcmVzZW50cyBhIGxvY2F0aW9uIGluIGEgdHdvLWRpbWVuc2lvbmFsIGNvb3JkaW5hdGUgc3lzdGVtLCB3aGVyZSB4IHJlcHJlc2VudHMgdGhlIGhvcml6b250YWwgYXhpcyBhbmQgeSByZXByZXNlbnRzIHRoZSB2ZXJ0aWNhbCBheGlzLlxuICpcbiAqIEBjbGFzcyBQb2ludFxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0geCB7TnVtYmVyfSBwb3NpdGlvbiBvZiB0aGUgcG9pbnRcbiAqIEBwYXJhbSB5IHtOdW1iZXJ9IHBvc2l0aW9uIG9mIHRoZSBwb2ludFxuICovXG5QSVhJLlBvaW50ID0gZnVuY3Rpb24oeCwgeSlcbntcblx0LyoqXG5cdCAqIEBwcm9wZXJ0eSB4XG5cdCAqIEB0eXBlIE51bWJlclxuXHQgKiBAZGVmYXVsdCAwXG5cdCAqL1xuXHR0aGlzLnggPSB4IHx8IDA7XG5cblx0LyoqXG5cdCAqIEBwcm9wZXJ0eSB5XG5cdCAqIEB0eXBlIE51bWJlclxuXHQgKiBAZGVmYXVsdCAwXG5cdCAqL1xuXHR0aGlzLnkgPSB5IHx8IDA7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIGNsb25lIG9mIHRoaXMgcG9pbnRcbiAqXG4gKiBAbWV0aG9kIGNsb25lXG4gKiBAcmV0dXJuIHtQb2ludH0gYSBjb3B5IG9mIHRoZSBwb2ludFxuICovXG5QSVhJLlBvaW50LnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uKClcbntcblx0cmV0dXJuIG5ldyBQSVhJLlBvaW50KHRoaXMueCwgdGhpcy55KTtcbn1cblxuLy8gY29uc3RydWN0b3JcblBJWEkuUG9pbnQucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gUElYSS5Qb2ludDtcblxuXG4vKipcbiAqIEBhdXRob3IgTWF0IEdyb3ZlcyBodHRwOi8vbWF0Z3JvdmVzLmNvbS9cbiAqL1xuXG4vKipcbiAqIHRoZSBSZWN0YW5nbGUgb2JqZWN0IGlzIGFuIGFyZWEgZGVmaW5lZCBieSBpdHMgcG9zaXRpb24sIGFzIGluZGljYXRlZCBieSBpdHMgdG9wLWxlZnQgY29ybmVyIHBvaW50ICh4LCB5KSBhbmQgYnkgaXRzIHdpZHRoIGFuZCBpdHMgaGVpZ2h0LlxuICpcbiAqIEBjbGFzcyBSZWN0YW5nbGVcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHgge051bWJlcn0gVGhlIFggY29vcmQgb2YgdGhlIHVwcGVyLWxlZnQgY29ybmVyIG9mIHRoZSByZWN0YW5nbGVcbiAqIEBwYXJhbSB5IHtOdW1iZXJ9IFRoZSBZIGNvb3JkIG9mIHRoZSB1cHBlci1sZWZ0IGNvcm5lciBvZiB0aGUgcmVjdGFuZ2xlXG4gKiBAcGFyYW0gd2lkdGgge051bWJlcn0gVGhlIG92ZXJhbGwgd2lkdGggb2YgdGhpcyByZWN0YW5nbGVcbiAqIEBwYXJhbSBoZWlnaHQge051bWJlcn0gVGhlIG92ZXJhbGwgaGVpZ2h0IG9mIHRoaXMgcmVjdGFuZ2xlXG4gKi9cblBJWEkuUmVjdGFuZ2xlID0gZnVuY3Rpb24oeCwgeSwgd2lkdGgsIGhlaWdodClcbntcblx0LyoqXG5cdCAqIEBwcm9wZXJ0eSB4XG5cdCAqIEB0eXBlIE51bWJlclxuXHQgKiBAZGVmYXVsdCAwXG5cdCAqL1xuXHR0aGlzLnggPSB4IHx8IDA7XG5cblx0LyoqXG5cdCAqIEBwcm9wZXJ0eSB5XG5cdCAqIEB0eXBlIE51bWJlclxuXHQgKiBAZGVmYXVsdCAwXG5cdCAqL1xuXHR0aGlzLnkgPSB5IHx8IDA7XG5cblx0LyoqXG5cdCAqIEBwcm9wZXJ0eSB3aWR0aFxuXHQgKiBAdHlwZSBOdW1iZXJcblx0ICogQGRlZmF1bHQgMFxuXHQgKi9cblx0dGhpcy53aWR0aCA9IHdpZHRoIHx8IDA7XG5cblx0LyoqXG5cdCAqIEBwcm9wZXJ0eSBoZWlnaHRcblx0ICogQHR5cGUgTnVtYmVyXG5cdCAqIEBkZWZhdWx0IDBcblx0ICovXG5cdHRoaXMuaGVpZ2h0ID0gaGVpZ2h0IHx8IDA7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIGNsb25lIG9mIHRoaXMgUmVjdGFuZ2xlXG4gKlxuICogQG1ldGhvZCBjbG9uZVxuICogQHJldHVybiB7UmVjdGFuZ2xlfSBhIGNvcHkgb2YgdGhlIHJlY3RhbmdsZVxuICovXG5QSVhJLlJlY3RhbmdsZS5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbigpXG57XG5cdHJldHVybiBuZXcgUElYSS5SZWN0YW5nbGUodGhpcy54LCB0aGlzLnksIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgdGhlIHgsIGFuZCB5IGNvb3JkcyBwYXNzZWQgdG8gdGhpcyBmdW5jdGlvbiBhcmUgY29udGFpbmVkIHdpdGhpbiB0aGlzIFJlY3RhbmdsZVxuICpcbiAqIEBtZXRob2QgY29udGFpbnNcbiAqIEBwYXJhbSB4IHtOdW1iZXJ9IFRoZSBYIGNvb3JkIG9mIHRoZSBwb2ludCB0byB0ZXN0XG4gKiBAcGFyYW0geSB7TnVtYmVyfSBUaGUgWSBjb29yZCBvZiB0aGUgcG9pbnQgdG8gdGVzdFxuICogQHJldHVybiB7Qm9vbGVhbn0gaWYgdGhlIHgveSBjb29yZHMgYXJlIHdpdGhpbiB0aGlzIFJlY3RhbmdsZVxuICovXG5QSVhJLlJlY3RhbmdsZS5wcm90b3R5cGUuY29udGFpbnMgPSBmdW5jdGlvbih4LCB5KVxue1xuICAgIGlmKHRoaXMud2lkdGggPD0gMCB8fCB0aGlzLmhlaWdodCA8PSAwKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG5cblx0dmFyIHgxID0gdGhpcy54O1xuXHRpZih4ID49IHgxICYmIHggPD0geDEgKyB0aGlzLndpZHRoKVxuXHR7XG5cdFx0dmFyIHkxID0gdGhpcy55O1xuXG5cdFx0aWYoeSA+PSB5MSAmJiB5IDw9IHkxICsgdGhpcy5oZWlnaHQpXG5cdFx0e1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIGZhbHNlO1xufVxuXG4vLyBjb25zdHJ1Y3RvclxuUElYSS5SZWN0YW5nbGUucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gUElYSS5SZWN0YW5nbGU7XG5cblxuLyoqXG4gKiBAYXV0aG9yIEFkcmllbiBCcmF1bHQgPGFkcmllbi5icmF1bHRAZ21haWwuY29tPlxuICovXG5cbi8qKlxuICogQGNsYXNzIFBvbHlnb25cbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHBvaW50cyoge0FycmF5PFBvaW50PnxBcnJheTxOdW1iZXI+fFBvaW50Li4ufE51bWJlci4uLn0gVGhpcyBjYW4gYmUgYW4gYXJyYXkgb2YgUG9pbnRzIHRoYXQgZm9ybSB0aGUgcG9seWdvbixcbiAqICAgICAgYSBmbGF0IGFycmF5IG9mIG51bWJlcnMgdGhhdCB3aWxsIGJlIGludGVycHJldGVkIGFzIFt4LHksIHgseSwgLi4uXSwgb3IgdGhlIGFyZ3VtZW50cyBwYXNzZWQgY2FuIGJlXG4gKiAgICAgIGFsbCB0aGUgcG9pbnRzIG9mIHRoZSBwb2x5Z29uIGUuZy4gYG5ldyBQSVhJLlBvbHlnb24obmV3IFBJWEkuUG9pbnQoKSwgbmV3IFBJWEkuUG9pbnQoKSwgLi4uKWAsIG9yIHRoZVxuICogICAgICBhcmd1bWVudHMgcGFzc2VkIGNhbiBiZSBmbGF0IHgseSB2YWx1ZXMgZS5nLiBgbmV3IFBJWEkuUG9seWdvbih4LHksIHgseSwgeCx5LCAuLi4pYCB3aGVyZSBgeGAgYW5kIGB5YCBhcmVcbiAqICAgICAgTnVtYmVycy5cbiAqL1xuUElYSS5Qb2x5Z29uID0gZnVuY3Rpb24ocG9pbnRzKVxue1xuICAgIC8vaWYgcG9pbnRzIGlzbid0IGFuIGFycmF5LCB1c2UgYXJndW1lbnRzIGFzIHRoZSBhcnJheVxuICAgIGlmKCEocG9pbnRzIGluc3RhbmNlb2YgQXJyYXkpKVxuICAgICAgICBwb2ludHMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO1xuXG4gICAgLy9pZiB0aGlzIGlzIGEgZmxhdCBhcnJheSBvZiBudW1iZXJzLCBjb252ZXJ0IGl0IHRvIHBvaW50c1xuICAgIGlmKHR5cGVvZiBwb2ludHNbMF0gPT09ICdudW1iZXInKSB7XG4gICAgICAgIHZhciBwID0gW107XG4gICAgICAgIGZvcih2YXIgaSA9IDAsIGlsID0gcG9pbnRzLmxlbmd0aDsgaSA8IGlsOyBpKz0yKSB7XG4gICAgICAgICAgICBwLnB1c2goXG4gICAgICAgICAgICAgICAgbmV3IFBJWEkuUG9pbnQocG9pbnRzW2ldLCBwb2ludHNbaSArIDFdKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHBvaW50cyA9IHA7XG4gICAgfVxuXG5cdHRoaXMucG9pbnRzID0gcG9pbnRzO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBjbG9uZSBvZiB0aGlzIHBvbHlnb25cbiAqXG4gKiBAbWV0aG9kIGNsb25lXG4gKiBAcmV0dXJuIHtQb2x5Z29ufSBhIGNvcHkgb2YgdGhlIHBvbHlnb25cbiAqL1xuUElYSS5Qb2x5Z29uLnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uKClcbntcblx0dmFyIHBvaW50cyA9IFtdO1xuXHRmb3IgKHZhciBpPTA7IGk8dGhpcy5wb2ludHMubGVuZ3RoOyBpKyspIHtcblx0XHRwb2ludHMucHVzaCh0aGlzLnBvaW50c1tpXS5jbG9uZSgpKTtcblx0fVxuXG5cdHJldHVybiBuZXcgUElYSS5Qb2x5Z29uKHBvaW50cyk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIHRoZSB4LCBhbmQgeSBjb29yZHMgcGFzc2VkIHRvIHRoaXMgZnVuY3Rpb24gYXJlIGNvbnRhaW5lZCB3aXRoaW4gdGhpcyBwb2x5Z29uXG4gKlxuICogQG1ldGhvZCBjb250YWluc1xuICogQHBhcmFtIHgge051bWJlcn0gVGhlIFggY29vcmQgb2YgdGhlIHBvaW50IHRvIHRlc3RcbiAqIEBwYXJhbSB5IHtOdW1iZXJ9IFRoZSBZIGNvb3JkIG9mIHRoZSBwb2ludCB0byB0ZXN0XG4gKiBAcmV0dXJuIHtCb29sZWFufSBpZiB0aGUgeC95IGNvb3JkcyBhcmUgd2l0aGluIHRoaXMgcG9seWdvblxuICovXG5QSVhJLlBvbHlnb24ucHJvdG90eXBlLmNvbnRhaW5zID0gZnVuY3Rpb24oeCwgeSlcbntcbiAgICB2YXIgaW5zaWRlID0gZmFsc2U7XG5cbiAgICAvLyB1c2Ugc29tZSByYXljYXN0aW5nIHRvIHRlc3QgaGl0c1xuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9zdWJzdGFjay9wb2ludC1pbi1wb2x5Z29uL2Jsb2IvbWFzdGVyL2luZGV4LmpzXG4gICAgZm9yKHZhciBpID0gMCwgaiA9IHRoaXMucG9pbnRzLmxlbmd0aCAtIDE7IGkgPCB0aGlzLnBvaW50cy5sZW5ndGg7IGogPSBpKyspIHtcbiAgICAgICAgdmFyIHhpID0gdGhpcy5wb2ludHNbaV0ueCwgeWkgPSB0aGlzLnBvaW50c1tpXS55LFxuICAgICAgICAgICAgeGogPSB0aGlzLnBvaW50c1tqXS54LCB5aiA9IHRoaXMucG9pbnRzW2pdLnksXG4gICAgICAgICAgICBpbnRlcnNlY3QgPSAoKHlpID4geSkgIT0gKHlqID4geSkpICYmICh4IDwgKHhqIC0geGkpICogKHkgLSB5aSkgLyAoeWogLSB5aSkgKyB4aSk7XG5cbiAgICAgICAgaWYoaW50ZXJzZWN0KSBpbnNpZGUgPSAhaW5zaWRlO1xuICAgIH1cblxuICAgIHJldHVybiBpbnNpZGU7XG59XG5cbi8vIGNvbnN0cnVjdG9yXG5QSVhJLlBvbHlnb24ucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gUElYSS5Qb2x5Z29uO1xuXG4vKipcbiAqIEBhdXRob3IgQ2hhZCBFbmdsZXIgPGNoYWRAcGFudGhlcmRldi5jb20+XG4gKi9cblxuLyoqXG4gKiBUaGUgQ2lyY2xlIG9iamVjdCBjYW4gYmUgdXNlZCB0byBzcGVjaWZ5IGEgaGl0IGFyZWEgZm9yIGRpc3BsYXlvYmplY3RzXG4gKlxuICogQGNsYXNzIENpcmNsZVxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0geCB7TnVtYmVyfSBUaGUgWCBjb29yZCBvZiB0aGUgdXBwZXItbGVmdCBjb3JuZXIgb2YgdGhlIGZyYW1pbmcgcmVjdGFuZ2xlIG9mIHRoaXMgY2lyY2xlXG4gKiBAcGFyYW0geSB7TnVtYmVyfSBUaGUgWSBjb29yZCBvZiB0aGUgdXBwZXItbGVmdCBjb3JuZXIgb2YgdGhlIGZyYW1pbmcgcmVjdGFuZ2xlIG9mIHRoaXMgY2lyY2xlXG4gKiBAcGFyYW0gcmFkaXVzIHtOdW1iZXJ9IFRoZSByYWRpdXMgb2YgdGhlIGNpcmNsZVxuICovXG5QSVhJLkNpcmNsZSA9IGZ1bmN0aW9uKHgsIHksIHJhZGl1cylcbntcbiAgICAvKipcbiAgICAgKiBAcHJvcGVydHkgeFxuICAgICAqIEB0eXBlIE51bWJlclxuICAgICAqIEBkZWZhdWx0IDBcbiAgICAgKi9cbiAgICB0aGlzLnggPSB4IHx8IDA7XG5cbiAgICAvKipcbiAgICAgKiBAcHJvcGVydHkgeVxuICAgICAqIEB0eXBlIE51bWJlclxuICAgICAqIEBkZWZhdWx0IDBcbiAgICAgKi9cbiAgICB0aGlzLnkgPSB5IHx8IDA7XG5cbiAgICAvKipcbiAgICAgKiBAcHJvcGVydHkgcmFkaXVzXG4gICAgICogQHR5cGUgTnVtYmVyXG4gICAgICogQGRlZmF1bHQgMFxuICAgICAqL1xuICAgIHRoaXMucmFkaXVzID0gcmFkaXVzIHx8IDA7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIGNsb25lIG9mIHRoaXMgQ2lyY2xlIGluc3RhbmNlXG4gKlxuICogQG1ldGhvZCBjbG9uZVxuICogQHJldHVybiB7Q2lyY2xlfSBhIGNvcHkgb2YgdGhlIHBvbHlnb25cbiAqL1xuUElYSS5DaXJjbGUucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24oKVxue1xuICAgIHJldHVybiBuZXcgUElYSS5DaXJjbGUodGhpcy54LCB0aGlzLnksIHRoaXMucmFkaXVzKTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgdGhlIHgsIGFuZCB5IGNvb3JkcyBwYXNzZWQgdG8gdGhpcyBmdW5jdGlvbiBhcmUgY29udGFpbmVkIHdpdGhpbiB0aGlzIGNpcmNsZVxuICpcbiAqIEBtZXRob2QgY29udGFpbnNcbiAqIEBwYXJhbSB4IHtOdW1iZXJ9IFRoZSBYIGNvb3JkIG9mIHRoZSBwb2ludCB0byB0ZXN0XG4gKiBAcGFyYW0geSB7TnVtYmVyfSBUaGUgWSBjb29yZCBvZiB0aGUgcG9pbnQgdG8gdGVzdFxuICogQHJldHVybiB7Qm9vbGVhbn0gaWYgdGhlIHgveSBjb29yZHMgYXJlIHdpdGhpbiB0aGlzIHBvbHlnb25cbiAqL1xuUElYSS5DaXJjbGUucHJvdG90eXBlLmNvbnRhaW5zID0gZnVuY3Rpb24oeCwgeSlcbntcbiAgICBpZih0aGlzLnJhZGl1cyA8PSAwKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICB2YXIgZHggPSAodGhpcy54IC0geCksXG4gICAgICAgIGR5ID0gKHRoaXMueSAtIHkpLFxuICAgICAgICByMiA9IHRoaXMucmFkaXVzICogdGhpcy5yYWRpdXM7XG5cbiAgICBkeCAqPSBkeDtcbiAgICBkeSAqPSBkeTtcblxuICAgIHJldHVybiAoZHggKyBkeSA8PSByMik7XG59XG5cbi8vIGNvbnN0cnVjdG9yXG5QSVhJLkNpcmNsZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBQSVhJLkNpcmNsZTtcblxuXG4vKipcbiAqIEBhdXRob3IgQ2hhZCBFbmdsZXIgPGNoYWRAcGFudGhlcmRldi5jb20+XG4gKi9cblxuLyoqXG4gKiBUaGUgRWxsaXBzZSBvYmplY3QgY2FuIGJlIHVzZWQgdG8gc3BlY2lmeSBhIGhpdCBhcmVhIGZvciBkaXNwbGF5b2JqZWN0c1xuICpcbiAqIEBjbGFzcyBFbGxpcHNlXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB4IHtOdW1iZXJ9IFRoZSBYIGNvb3JkIG9mIHRoZSB1cHBlci1sZWZ0IGNvcm5lciBvZiB0aGUgZnJhbWluZyByZWN0YW5nbGUgb2YgdGhpcyBlbGxpcHNlXG4gKiBAcGFyYW0geSB7TnVtYmVyfSBUaGUgWSBjb29yZCBvZiB0aGUgdXBwZXItbGVmdCBjb3JuZXIgb2YgdGhlIGZyYW1pbmcgcmVjdGFuZ2xlIG9mIHRoaXMgZWxsaXBzZVxuICogQHBhcmFtIHdpZHRoIHtOdW1iZXJ9IFRoZSBvdmVyYWxsIHdpZHRoIG9mIHRoaXMgZWxsaXBzZVxuICogQHBhcmFtIGhlaWdodCB7TnVtYmVyfSBUaGUgb3ZlcmFsbCBoZWlnaHQgb2YgdGhpcyBlbGxpcHNlXG4gKi9cblBJWEkuRWxsaXBzZSA9IGZ1bmN0aW9uKHgsIHksIHdpZHRoLCBoZWlnaHQpXG57XG4gICAgLyoqXG4gICAgICogQHByb3BlcnR5IHhcbiAgICAgKiBAdHlwZSBOdW1iZXJcbiAgICAgKiBAZGVmYXVsdCAwXG4gICAgICovXG4gICAgdGhpcy54ID0geCB8fCAwO1xuXG4gICAgLyoqXG4gICAgICogQHByb3BlcnR5IHlcbiAgICAgKiBAdHlwZSBOdW1iZXJcbiAgICAgKiBAZGVmYXVsdCAwXG4gICAgICovXG4gICAgdGhpcy55ID0geSB8fCAwO1xuXG4gICAgLyoqXG4gICAgICogQHByb3BlcnR5IHdpZHRoXG4gICAgICogQHR5cGUgTnVtYmVyXG4gICAgICogQGRlZmF1bHQgMFxuICAgICAqL1xuICAgIHRoaXMud2lkdGggPSB3aWR0aCB8fCAwO1xuXG4gICAgLyoqXG4gICAgICogQHByb3BlcnR5IGhlaWdodFxuICAgICAqIEB0eXBlIE51bWJlclxuICAgICAqIEBkZWZhdWx0IDBcbiAgICAgKi9cbiAgICB0aGlzLmhlaWdodCA9IGhlaWdodCB8fCAwO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBjbG9uZSBvZiB0aGlzIEVsbGlwc2UgaW5zdGFuY2VcbiAqXG4gKiBAbWV0aG9kIGNsb25lXG4gKiBAcmV0dXJuIHtFbGxpcHNlfSBhIGNvcHkgb2YgdGhlIGVsbGlwc2VcbiAqL1xuUElYSS5FbGxpcHNlLnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uKClcbntcbiAgICByZXR1cm4gbmV3IFBJWEkuRWxsaXBzZSh0aGlzLngsIHRoaXMueSwgdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiB0aGUgeCwgYW5kIHkgY29vcmRzIHBhc3NlZCB0byB0aGlzIGZ1bmN0aW9uIGFyZSBjb250YWluZWQgd2l0aGluIHRoaXMgZWxsaXBzZVxuICpcbiAqIEBtZXRob2QgY29udGFpbnNcbiAqIEBwYXJhbSB4IHtOdW1iZXJ9IFRoZSBYIGNvb3JkIG9mIHRoZSBwb2ludCB0byB0ZXN0XG4gKiBAcGFyYW0geSB7TnVtYmVyfSBUaGUgWSBjb29yZCBvZiB0aGUgcG9pbnQgdG8gdGVzdFxuICogQHJldHVybiB7Qm9vbGVhbn0gaWYgdGhlIHgveSBjb29yZHMgYXJlIHdpdGhpbiB0aGlzIGVsbGlwc2VcbiAqL1xuUElYSS5FbGxpcHNlLnByb3RvdHlwZS5jb250YWlucyA9IGZ1bmN0aW9uKHgsIHkpXG57XG4gICAgaWYodGhpcy53aWR0aCA8PSAwIHx8IHRoaXMuaGVpZ2h0IDw9IDApXG4gICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgIC8vbm9ybWFsaXplIHRoZSBjb29yZHMgdG8gYW4gZWxsaXBzZSB3aXRoIGNlbnRlciAwLDBcbiAgICAvL2FuZCBhIHJhZGl1cyBvZiAwLjVcbiAgICB2YXIgbm9ybXggPSAoKHggLSB0aGlzLngpIC8gdGhpcy53aWR0aCkgLSAwLjUsXG4gICAgICAgIG5vcm15ID0gKCh5IC0gdGhpcy55KSAvIHRoaXMuaGVpZ2h0KSAtIDAuNTtcblxuICAgIG5vcm14ICo9IG5vcm14O1xuICAgIG5vcm15ICo9IG5vcm15O1xuXG4gICAgcmV0dXJuIChub3JteCArIG5vcm15IDwgMC4yNSk7XG59XG5cblBJWEkuRWxsaXBzZS5nZXRCb3VuZHMgPSBmdW5jdGlvbigpXG57XG4gICAgcmV0dXJuIG5ldyBQSVhJLlJlY3RhbmdsZSh0aGlzLngsIHRoaXMueSwgdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xufVxuXG4vLyBjb25zdHJ1Y3RvclxuUElYSS5FbGxpcHNlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFBJWEkuRWxsaXBzZTtcblxuXG5cbi8qXG4gKiBBIGxpZ2h0ZXIgdmVyc2lvbiBvZiB0aGUgcmFkIGdsLW1hdHJpeCBjcmVhdGVkIGJ5IEJyYW5kb24gSm9uZXMsIENvbGluIE1hY0tlbnppZSBJVlxuICogeW91IGJvdGggcm9jayFcbiAqL1xuXG5mdW5jdGlvbiBkZXRlcm1pbmVNYXRyaXhBcnJheVR5cGUoKSB7XG4gICAgUElYSS5NYXRyaXggPSAodHlwZW9mIEZsb2F0MzJBcnJheSAhPT0gJ3VuZGVmaW5lZCcpID8gRmxvYXQzMkFycmF5IDogQXJyYXk7XG4gICAgcmV0dXJuIFBJWEkuTWF0cml4O1xufVxuXG5kZXRlcm1pbmVNYXRyaXhBcnJheVR5cGUoKTtcblxuUElYSS5tYXQzID0ge307XG5cblBJWEkubWF0My5jcmVhdGUgPSBmdW5jdGlvbigpXG57XG5cdHZhciBtYXRyaXggPSBuZXcgUElYSS5NYXRyaXgoOSk7XG5cblx0bWF0cml4WzBdID0gMTtcblx0bWF0cml4WzFdID0gMDtcblx0bWF0cml4WzJdID0gMDtcblx0bWF0cml4WzNdID0gMDtcblx0bWF0cml4WzRdID0gMTtcblx0bWF0cml4WzVdID0gMDtcblx0bWF0cml4WzZdID0gMDtcblx0bWF0cml4WzddID0gMDtcblx0bWF0cml4WzhdID0gMTtcblxuXHRyZXR1cm4gbWF0cml4O1xufVxuXG5cblBJWEkubWF0My5pZGVudGl0eSA9IGZ1bmN0aW9uKG1hdHJpeClcbntcblx0bWF0cml4WzBdID0gMTtcblx0bWF0cml4WzFdID0gMDtcblx0bWF0cml4WzJdID0gMDtcblx0bWF0cml4WzNdID0gMDtcblx0bWF0cml4WzRdID0gMTtcblx0bWF0cml4WzVdID0gMDtcblx0bWF0cml4WzZdID0gMDtcblx0bWF0cml4WzddID0gMDtcblx0bWF0cml4WzhdID0gMTtcblxuXHRyZXR1cm4gbWF0cml4O1xufVxuXG5cblBJWEkubWF0NCA9IHt9O1xuXG5QSVhJLm1hdDQuY3JlYXRlID0gZnVuY3Rpb24oKVxue1xuXHR2YXIgbWF0cml4ID0gbmV3IFBJWEkuTWF0cml4KDE2KTtcblxuXHRtYXRyaXhbMF0gPSAxO1xuXHRtYXRyaXhbMV0gPSAwO1xuXHRtYXRyaXhbMl0gPSAwO1xuXHRtYXRyaXhbM10gPSAwO1xuXHRtYXRyaXhbNF0gPSAwO1xuXHRtYXRyaXhbNV0gPSAxO1xuXHRtYXRyaXhbNl0gPSAwO1xuXHRtYXRyaXhbN10gPSAwO1xuXHRtYXRyaXhbOF0gPSAwO1xuXHRtYXRyaXhbOV0gPSAwO1xuXHRtYXRyaXhbMTBdID0gMTtcblx0bWF0cml4WzExXSA9IDA7XG5cdG1hdHJpeFsxMl0gPSAwO1xuXHRtYXRyaXhbMTNdID0gMDtcblx0bWF0cml4WzE0XSA9IDA7XG5cdG1hdHJpeFsxNV0gPSAxO1xuXG5cdHJldHVybiBtYXRyaXg7XG59XG5cblBJWEkubWF0My5tdWx0aXBseSA9IGZ1bmN0aW9uIChtYXQsIG1hdDIsIGRlc3QpXG57XG5cdGlmICghZGVzdCkgeyBkZXN0ID0gbWF0OyB9XG5cblx0Ly8gQ2FjaGUgdGhlIG1hdHJpeCB2YWx1ZXMgKG1ha2VzIGZvciBodWdlIHNwZWVkIGluY3JlYXNlcyEpXG5cdHZhciBhMDAgPSBtYXRbMF0sIGEwMSA9IG1hdFsxXSwgYTAyID0gbWF0WzJdLFxuXHQgICAgYTEwID0gbWF0WzNdLCBhMTEgPSBtYXRbNF0sIGExMiA9IG1hdFs1XSxcblx0ICAgIGEyMCA9IG1hdFs2XSwgYTIxID0gbWF0WzddLCBhMjIgPSBtYXRbOF0sXG5cblx0ICAgIGIwMCA9IG1hdDJbMF0sIGIwMSA9IG1hdDJbMV0sIGIwMiA9IG1hdDJbMl0sXG5cdCAgICBiMTAgPSBtYXQyWzNdLCBiMTEgPSBtYXQyWzRdLCBiMTIgPSBtYXQyWzVdLFxuXHQgICAgYjIwID0gbWF0Mls2XSwgYjIxID0gbWF0Mls3XSwgYjIyID0gbWF0Mls4XTtcblxuXHRkZXN0WzBdID0gYjAwICogYTAwICsgYjAxICogYTEwICsgYjAyICogYTIwO1xuXHRkZXN0WzFdID0gYjAwICogYTAxICsgYjAxICogYTExICsgYjAyICogYTIxO1xuXHRkZXN0WzJdID0gYjAwICogYTAyICsgYjAxICogYTEyICsgYjAyICogYTIyO1xuXG5cdGRlc3RbM10gPSBiMTAgKiBhMDAgKyBiMTEgKiBhMTAgKyBiMTIgKiBhMjA7XG5cdGRlc3RbNF0gPSBiMTAgKiBhMDEgKyBiMTEgKiBhMTEgKyBiMTIgKiBhMjE7XG5cdGRlc3RbNV0gPSBiMTAgKiBhMDIgKyBiMTEgKiBhMTIgKyBiMTIgKiBhMjI7XG5cblx0ZGVzdFs2XSA9IGIyMCAqIGEwMCArIGIyMSAqIGExMCArIGIyMiAqIGEyMDtcblx0ZGVzdFs3XSA9IGIyMCAqIGEwMSArIGIyMSAqIGExMSArIGIyMiAqIGEyMTtcblx0ZGVzdFs4XSA9IGIyMCAqIGEwMiArIGIyMSAqIGExMiArIGIyMiAqIGEyMjtcblxuXHRyZXR1cm4gZGVzdDtcbn1cblxuUElYSS5tYXQzLmNsb25lID0gZnVuY3Rpb24obWF0KVxue1xuXHR2YXIgbWF0cml4ID0gbmV3IFBJWEkuTWF0cml4KDkpO1xuXG5cdG1hdHJpeFswXSA9IG1hdFswXTtcblx0bWF0cml4WzFdID0gbWF0WzFdO1xuXHRtYXRyaXhbMl0gPSBtYXRbMl07XG5cdG1hdHJpeFszXSA9IG1hdFszXTtcblx0bWF0cml4WzRdID0gbWF0WzRdO1xuXHRtYXRyaXhbNV0gPSBtYXRbNV07XG5cdG1hdHJpeFs2XSA9IG1hdFs2XTtcblx0bWF0cml4WzddID0gbWF0WzddO1xuXHRtYXRyaXhbOF0gPSBtYXRbOF07XG5cblx0cmV0dXJuIG1hdHJpeDtcbn1cblxuUElYSS5tYXQzLnRyYW5zcG9zZSA9IGZ1bmN0aW9uIChtYXQsIGRlc3QpXG57XG4gXHQvLyBJZiB3ZSBhcmUgdHJhbnNwb3Npbmcgb3Vyc2VsdmVzIHdlIGNhbiBza2lwIGEgZmV3IHN0ZXBzIGJ1dCBoYXZlIHRvIGNhY2hlIHNvbWUgdmFsdWVzXG4gICAgaWYgKCFkZXN0IHx8IG1hdCA9PT0gZGVzdCkge1xuICAgICAgICB2YXIgYTAxID0gbWF0WzFdLCBhMDIgPSBtYXRbMl0sXG4gICAgICAgICAgICBhMTIgPSBtYXRbNV07XG5cbiAgICAgICAgbWF0WzFdID0gbWF0WzNdO1xuICAgICAgICBtYXRbMl0gPSBtYXRbNl07XG4gICAgICAgIG1hdFszXSA9IGEwMTtcbiAgICAgICAgbWF0WzVdID0gbWF0WzddO1xuICAgICAgICBtYXRbNl0gPSBhMDI7XG4gICAgICAgIG1hdFs3XSA9IGExMjtcbiAgICAgICAgcmV0dXJuIG1hdDtcbiAgICB9XG5cbiAgICBkZXN0WzBdID0gbWF0WzBdO1xuICAgIGRlc3RbMV0gPSBtYXRbM107XG4gICAgZGVzdFsyXSA9IG1hdFs2XTtcbiAgICBkZXN0WzNdID0gbWF0WzFdO1xuICAgIGRlc3RbNF0gPSBtYXRbNF07XG4gICAgZGVzdFs1XSA9IG1hdFs3XTtcbiAgICBkZXN0WzZdID0gbWF0WzJdO1xuICAgIGRlc3RbN10gPSBtYXRbNV07XG4gICAgZGVzdFs4XSA9IG1hdFs4XTtcbiAgICByZXR1cm4gZGVzdDtcbn1cblxuUElYSS5tYXQzLnRvTWF0NCA9IGZ1bmN0aW9uIChtYXQsIGRlc3QpXG57XG5cdGlmICghZGVzdCkgeyBkZXN0ID0gUElYSS5tYXQ0LmNyZWF0ZSgpOyB9XG5cblx0ZGVzdFsxNV0gPSAxO1xuXHRkZXN0WzE0XSA9IDA7XG5cdGRlc3RbMTNdID0gMDtcblx0ZGVzdFsxMl0gPSAwO1xuXG5cdGRlc3RbMTFdID0gMDtcblx0ZGVzdFsxMF0gPSBtYXRbOF07XG5cdGRlc3RbOV0gPSBtYXRbN107XG5cdGRlc3RbOF0gPSBtYXRbNl07XG5cblx0ZGVzdFs3XSA9IDA7XG5cdGRlc3RbNl0gPSBtYXRbNV07XG5cdGRlc3RbNV0gPSBtYXRbNF07XG5cdGRlc3RbNF0gPSBtYXRbM107XG5cblx0ZGVzdFszXSA9IDA7XG5cdGRlc3RbMl0gPSBtYXRbMl07XG5cdGRlc3RbMV0gPSBtYXRbMV07XG5cdGRlc3RbMF0gPSBtYXRbMF07XG5cblx0cmV0dXJuIGRlc3Q7XG59XG5cblxuLy8vLy9cblxuXG5QSVhJLm1hdDQuY3JlYXRlID0gZnVuY3Rpb24oKVxue1xuXHR2YXIgbWF0cml4ID0gbmV3IFBJWEkuTWF0cml4KDE2KTtcblxuXHRtYXRyaXhbMF0gPSAxO1xuXHRtYXRyaXhbMV0gPSAwO1xuXHRtYXRyaXhbMl0gPSAwO1xuXHRtYXRyaXhbM10gPSAwO1xuXHRtYXRyaXhbNF0gPSAwO1xuXHRtYXRyaXhbNV0gPSAxO1xuXHRtYXRyaXhbNl0gPSAwO1xuXHRtYXRyaXhbN10gPSAwO1xuXHRtYXRyaXhbOF0gPSAwO1xuXHRtYXRyaXhbOV0gPSAwO1xuXHRtYXRyaXhbMTBdID0gMTtcblx0bWF0cml4WzExXSA9IDA7XG5cdG1hdHJpeFsxMl0gPSAwO1xuXHRtYXRyaXhbMTNdID0gMDtcblx0bWF0cml4WzE0XSA9IDA7XG5cdG1hdHJpeFsxNV0gPSAxO1xuXG5cdHJldHVybiBtYXRyaXg7XG59XG5cblBJWEkubWF0NC50cmFuc3Bvc2UgPSBmdW5jdGlvbiAobWF0LCBkZXN0KVxue1xuXHQvLyBJZiB3ZSBhcmUgdHJhbnNwb3Npbmcgb3Vyc2VsdmVzIHdlIGNhbiBza2lwIGEgZmV3IHN0ZXBzIGJ1dCBoYXZlIHRvIGNhY2hlIHNvbWUgdmFsdWVzXG5cdGlmICghZGVzdCB8fCBtYXQgPT09IGRlc3QpXG5cdHtcblx0ICAgIHZhciBhMDEgPSBtYXRbMV0sIGEwMiA9IG1hdFsyXSwgYTAzID0gbWF0WzNdLFxuXHQgICAgICAgIGExMiA9IG1hdFs2XSwgYTEzID0gbWF0WzddLFxuXHQgICAgICAgIGEyMyA9IG1hdFsxMV07XG5cblx0ICAgIG1hdFsxXSA9IG1hdFs0XTtcblx0ICAgIG1hdFsyXSA9IG1hdFs4XTtcblx0ICAgIG1hdFszXSA9IG1hdFsxMl07XG5cdCAgICBtYXRbNF0gPSBhMDE7XG5cdCAgICBtYXRbNl0gPSBtYXRbOV07XG5cdCAgICBtYXRbN10gPSBtYXRbMTNdO1xuXHQgICAgbWF0WzhdID0gYTAyO1xuXHQgICAgbWF0WzldID0gYTEyO1xuXHQgICAgbWF0WzExXSA9IG1hdFsxNF07XG5cdCAgICBtYXRbMTJdID0gYTAzO1xuXHQgICAgbWF0WzEzXSA9IGExMztcblx0ICAgIG1hdFsxNF0gPSBhMjM7XG5cdCAgICByZXR1cm4gbWF0O1xuXHR9XG5cblx0ZGVzdFswXSA9IG1hdFswXTtcblx0ZGVzdFsxXSA9IG1hdFs0XTtcblx0ZGVzdFsyXSA9IG1hdFs4XTtcblx0ZGVzdFszXSA9IG1hdFsxMl07XG5cdGRlc3RbNF0gPSBtYXRbMV07XG5cdGRlc3RbNV0gPSBtYXRbNV07XG5cdGRlc3RbNl0gPSBtYXRbOV07XG5cdGRlc3RbN10gPSBtYXRbMTNdO1xuXHRkZXN0WzhdID0gbWF0WzJdO1xuXHRkZXN0WzldID0gbWF0WzZdO1xuXHRkZXN0WzEwXSA9IG1hdFsxMF07XG5cdGRlc3RbMTFdID0gbWF0WzE0XTtcblx0ZGVzdFsxMl0gPSBtYXRbM107XG5cdGRlc3RbMTNdID0gbWF0WzddO1xuXHRkZXN0WzE0XSA9IG1hdFsxMV07XG5cdGRlc3RbMTVdID0gbWF0WzE1XTtcblx0cmV0dXJuIGRlc3Q7XG59XG5cblBJWEkubWF0NC5tdWx0aXBseSA9IGZ1bmN0aW9uIChtYXQsIG1hdDIsIGRlc3QpXG57XG5cdGlmICghZGVzdCkgeyBkZXN0ID0gbWF0OyB9XG5cblx0Ly8gQ2FjaGUgdGhlIG1hdHJpeCB2YWx1ZXMgKG1ha2VzIGZvciBodWdlIHNwZWVkIGluY3JlYXNlcyEpXG5cdHZhciBhMDAgPSBtYXRbIDBdLCBhMDEgPSBtYXRbIDFdLCBhMDIgPSBtYXRbIDJdLCBhMDMgPSBtYXRbM107XG5cdHZhciBhMTAgPSBtYXRbIDRdLCBhMTEgPSBtYXRbIDVdLCBhMTIgPSBtYXRbIDZdLCBhMTMgPSBtYXRbN107XG5cdHZhciBhMjAgPSBtYXRbIDhdLCBhMjEgPSBtYXRbIDldLCBhMjIgPSBtYXRbMTBdLCBhMjMgPSBtYXRbMTFdO1xuXHR2YXIgYTMwID0gbWF0WzEyXSwgYTMxID0gbWF0WzEzXSwgYTMyID0gbWF0WzE0XSwgYTMzID0gbWF0WzE1XTtcblxuXHQvLyBDYWNoZSBvbmx5IHRoZSBjdXJyZW50IGxpbmUgb2YgdGhlIHNlY29uZCBtYXRyaXhcbiAgICB2YXIgYjAgID0gbWF0MlswXSwgYjEgPSBtYXQyWzFdLCBiMiA9IG1hdDJbMl0sIGIzID0gbWF0MlszXTtcbiAgICBkZXN0WzBdID0gYjAqYTAwICsgYjEqYTEwICsgYjIqYTIwICsgYjMqYTMwO1xuICAgIGRlc3RbMV0gPSBiMCphMDEgKyBiMSphMTEgKyBiMiphMjEgKyBiMyphMzE7XG4gICAgZGVzdFsyXSA9IGIwKmEwMiArIGIxKmExMiArIGIyKmEyMiArIGIzKmEzMjtcbiAgICBkZXN0WzNdID0gYjAqYTAzICsgYjEqYTEzICsgYjIqYTIzICsgYjMqYTMzO1xuXG4gICAgYjAgPSBtYXQyWzRdO1xuICAgIGIxID0gbWF0Mls1XTtcbiAgICBiMiA9IG1hdDJbNl07XG4gICAgYjMgPSBtYXQyWzddO1xuICAgIGRlc3RbNF0gPSBiMCphMDAgKyBiMSphMTAgKyBiMiphMjAgKyBiMyphMzA7XG4gICAgZGVzdFs1XSA9IGIwKmEwMSArIGIxKmExMSArIGIyKmEyMSArIGIzKmEzMTtcbiAgICBkZXN0WzZdID0gYjAqYTAyICsgYjEqYTEyICsgYjIqYTIyICsgYjMqYTMyO1xuICAgIGRlc3RbN10gPSBiMCphMDMgKyBiMSphMTMgKyBiMiphMjMgKyBiMyphMzM7XG5cbiAgICBiMCA9IG1hdDJbOF07XG4gICAgYjEgPSBtYXQyWzldO1xuICAgIGIyID0gbWF0MlsxMF07XG4gICAgYjMgPSBtYXQyWzExXTtcbiAgICBkZXN0WzhdID0gYjAqYTAwICsgYjEqYTEwICsgYjIqYTIwICsgYjMqYTMwO1xuICAgIGRlc3RbOV0gPSBiMCphMDEgKyBiMSphMTEgKyBiMiphMjEgKyBiMyphMzE7XG4gICAgZGVzdFsxMF0gPSBiMCphMDIgKyBiMSphMTIgKyBiMiphMjIgKyBiMyphMzI7XG4gICAgZGVzdFsxMV0gPSBiMCphMDMgKyBiMSphMTMgKyBiMiphMjMgKyBiMyphMzM7XG5cbiAgICBiMCA9IG1hdDJbMTJdO1xuICAgIGIxID0gbWF0MlsxM107XG4gICAgYjIgPSBtYXQyWzE0XTtcbiAgICBiMyA9IG1hdDJbMTVdO1xuICAgIGRlc3RbMTJdID0gYjAqYTAwICsgYjEqYTEwICsgYjIqYTIwICsgYjMqYTMwO1xuICAgIGRlc3RbMTNdID0gYjAqYTAxICsgYjEqYTExICsgYjIqYTIxICsgYjMqYTMxO1xuICAgIGRlc3RbMTRdID0gYjAqYTAyICsgYjEqYTEyICsgYjIqYTIyICsgYjMqYTMyO1xuICAgIGRlc3RbMTVdID0gYjAqYTAzICsgYjEqYTEzICsgYjIqYTIzICsgYjMqYTMzO1xuXG4gICAgcmV0dXJuIGRlc3Q7XG59XG5cbi8qKlxuICogQGF1dGhvciBNYXQgR3JvdmVzIGh0dHA6Ly9tYXRncm92ZXMuY29tLyBARG9vcm1hdDIzXG4gKi9cblxuLyoqXG4gKiBUaGUgYmFzZSBjbGFzcyBmb3IgYWxsIG9iamVjdHMgdGhhdCBhcmUgcmVuZGVyZWQgb24gdGhlIHNjcmVlbi5cbiAqXG4gKiBAY2xhc3MgRGlzcGxheU9iamVjdFxuICogQGNvbnN0cnVjdG9yXG4gKi9cblBJWEkuRGlzcGxheU9iamVjdCA9IGZ1bmN0aW9uKClcbntcblx0dGhpcy5sYXN0ID0gdGhpcztcblx0dGhpcy5maXJzdCA9IHRoaXM7XG5cdC8qKlxuXHQgKiBUaGUgY29vcmRpbmF0ZSBvZiB0aGUgb2JqZWN0IHJlbGF0aXZlIHRvIHRoZSBsb2NhbCBjb29yZGluYXRlcyBvZiB0aGUgcGFyZW50LlxuXHQgKlxuXHQgKiBAcHJvcGVydHkgcG9zaXRpb25cblx0ICogQHR5cGUgUG9pbnRcblx0ICovXG5cdHRoaXMucG9zaXRpb24gPSBuZXcgUElYSS5Qb2ludCgpO1xuXG5cdC8qKlxuXHQgKiBUaGUgc2NhbGUgZmFjdG9yIG9mIHRoZSBvYmplY3QuXG5cdCAqXG5cdCAqIEBwcm9wZXJ0eSBzY2FsZVxuXHQgKiBAdHlwZSBQb2ludFxuXHQgKi9cblx0dGhpcy5zY2FsZSA9IG5ldyBQSVhJLlBvaW50KDEsMSk7Ly97eDoxLCB5OjF9O1xuXG5cdC8qKlxuXHQgKiBUaGUgcGl2b3QgcG9pbnQgb2YgdGhlIGRpc3BsYXlPYmplY3QgdGhhdCBpdCByb3RhdGVzIGFyb3VuZFxuXHQgKlxuXHQgKiBAcHJvcGVydHkgcGl2b3Rcblx0ICogQHR5cGUgUG9pbnRcblx0ICovXG5cdHRoaXMucGl2b3QgPSBuZXcgUElYSS5Qb2ludCgwLDApO1xuXG5cdC8qKlxuXHQgKiBUaGUgcm90YXRpb24gb2YgdGhlIG9iamVjdCBpbiByYWRpYW5zLlxuXHQgKlxuXHQgKiBAcHJvcGVydHkgcm90YXRpb25cblx0ICogQHR5cGUgTnVtYmVyXG5cdCAqL1xuXHR0aGlzLnJvdGF0aW9uID0gMDtcblxuXHQvKipcblx0ICogVGhlIG9wYWNpdHkgb2YgdGhlIG9iamVjdC5cblx0ICpcblx0ICogQHByb3BlcnR5IGFscGhhXG5cdCAqIEB0eXBlIE51bWJlclxuXHQgKi9cdFxuXHR0aGlzLmFscGhhID0gMTtcblxuXHQvKipcblx0ICogVGhlIHZpc2liaWxpdHkgb2YgdGhlIG9iamVjdC5cblx0ICpcblx0ICogQHByb3BlcnR5IHZpc2libGVcblx0ICogQHR5cGUgQm9vbGVhblxuXHQgKi9cdFxuXHR0aGlzLnZpc2libGUgPSB0cnVlO1xuXG5cdC8qKlxuXHQgKiBUaGlzIGlzIHRoZSBkZWZpbmVkIGFyZWEgdGhhdCB3aWxsIHBpY2sgdXAgbW91c2UgLyB0b3VjaCBldmVudHMuIEl0IGlzIG51bGwgYnkgZGVmYXVsdC5cblx0ICogU2V0dGluZyBpdCBpcyBhIG5lYXQgd2F5IG9mIG9wdGltaXNpbmcgdGhlIGhpdFRlc3QgZnVuY3Rpb24gdGhhdCB0aGUgaW50ZXJhY3Rpb25NYW5hZ2VyIHdpbGwgdXNlIChhcyBpdCB3aWxsIG5vdCBuZWVkIHRvIGhpdCB0ZXN0IGFsbCB0aGUgY2hpbGRyZW4pXG5cdCAqXG5cdCAqIEBwcm9wZXJ0eSBoaXRBcmVhXG5cdCAqIEB0eXBlIFJlY3RhbmdsZXxDaXJjbGV8RWxsaXBzZXxQb2x5Z29uXG5cdCAqL1x0XG5cdHRoaXMuaGl0QXJlYSA9IG51bGw7XG5cblx0LyoqXG5cdCAqIFRoaXMgaXMgdXNlZCB0byBpbmRpY2F0ZSBpZiB0aGUgZGlzcGxheU9iamVjdCBzaG91bGQgZGlzcGxheSBhIG1vdXNlIGhhbmQgY3Vyc29yIG9uIHJvbGxvdmVyXG5cdCAqXG5cdCAqIEBwcm9wZXJ0eSBidXR0b25Nb2RlXG5cdCAqIEB0eXBlIEJvb2xlYW5cblx0ICovXG5cdHRoaXMuYnV0dG9uTW9kZSA9IGZhbHNlO1xuXG5cdC8qKlxuXHQgKiBDYW4gdGhpcyBvYmplY3QgYmUgcmVuZGVyZWRcblx0ICpcblx0ICogQHByb3BlcnR5IHJlbmRlcmFibGVcblx0ICogQHR5cGUgQm9vbGVhblxuXHQgKi9cblx0dGhpcy5yZW5kZXJhYmxlID0gZmFsc2U7XG5cblx0LyoqXG5cdCAqIFtyZWFkLW9ubHldIFRoZSBkaXNwbGF5IG9iamVjdCBjb250YWluZXIgdGhhdCBjb250YWlucyB0aGlzIGRpc3BsYXkgb2JqZWN0LlxuXHQgKlxuXHQgKiBAcHJvcGVydHkgcGFyZW50XG5cdCAqIEB0eXBlIERpc3BsYXlPYmplY3RDb250YWluZXJcblx0ICogQHJlYWRPbmx5XG5cdCAqL1x0XG5cdHRoaXMucGFyZW50ID0gbnVsbDtcblxuXHQvKipcblx0ICogW3JlYWQtb25seV0gVGhlIHN0YWdlIHRoZSBkaXNwbGF5IG9iamVjdCBpcyBjb25uZWN0ZWQgdG8sIG9yIHVuZGVmaW5lZCBpZiBpdCBpcyBub3QgY29ubmVjdGVkIHRvIHRoZSBzdGFnZS5cblx0ICpcblx0ICogQHByb3BlcnR5IHN0YWdlXG5cdCAqIEB0eXBlIFN0YWdlXG5cdCAqIEByZWFkT25seVxuXHQgKi9cdFxuXHR0aGlzLnN0YWdlID0gbnVsbDtcblxuXHQvKipcblx0ICogW3JlYWQtb25seV0gVGhlIG11bHRpcGxpZWQgYWxwaGEgb2YgdGhlIGRpc3BsYXlvYmplY3Rcblx0ICpcblx0ICogQHByb3BlcnR5IHdvcmxkQWxwaGFcblx0ICogQHR5cGUgTnVtYmVyXG5cdCAqIEByZWFkT25seVxuXHQgKi9cblx0dGhpcy53b3JsZEFscGhhID0gMTtcblxuXHQvKipcblx0ICogW3JlYWQtb25seV0gV2hldGhlciBvciBub3QgdGhlIG9iamVjdCBpcyBpbnRlcmFjdGl2ZSwgZG8gbm90IHRvZ2dsZSBkaXJlY3RseSEgdXNlIHRoZSBgaW50ZXJhY3RpdmVgIHByb3BlcnR5XG5cdCAqXG5cdCAqIEBwcm9wZXJ0eSBfaW50ZXJhY3RpdmVcblx0ICogQHR5cGUgQm9vbGVhblxuXHQgKiBAcmVhZE9ubHlcblx0ICogQHByaXZhdGVcblx0ICovXG5cdHRoaXMuX2ludGVyYWN0aXZlID0gZmFsc2U7XG5cblx0LyoqXG5cdCAqIFtyZWFkLW9ubHldIEN1cnJlbnQgdHJhbnNmb3JtIG9mIHRoZSBvYmplY3QgYmFzZWQgb24gd29ybGQgKHBhcmVudCkgZmFjdG9yc1xuXHQgKlxuXHQgKiBAcHJvcGVydHkgd29ybGRUcmFuc2Zvcm1cblx0ICogQHR5cGUgTWF0M1xuXHQgKiBAcmVhZE9ubHlcblx0ICogQHByaXZhdGVcblx0ICovXG5cdHRoaXMud29ybGRUcmFuc2Zvcm0gPSBQSVhJLm1hdDMuY3JlYXRlKCkvL21hdDMuaWRlbnRpdHkoKTtcblxuXHQvKipcblx0ICogW3JlYWQtb25seV0gQ3VycmVudCB0cmFuc2Zvcm0gb2YgdGhlIG9iamVjdCBsb2NhbGx5XG5cdCAqXG5cdCAqIEBwcm9wZXJ0eSBsb2NhbFRyYW5zZm9ybVxuXHQgKiBAdHlwZSBNYXQzXG5cdCAqIEByZWFkT25seVxuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cblx0dGhpcy5sb2NhbFRyYW5zZm9ybSA9IFBJWEkubWF0My5jcmVhdGUoKS8vbWF0My5pZGVudGl0eSgpO1xuXG5cdC8qKlxuXHQgKiBbTllJXSBVbmtvd25cblx0ICpcblx0ICogQHByb3BlcnR5IGNvbG9yXG5cdCAqIEB0eXBlIEFycmF5PD5cblx0ICogQHByaXZhdGVcblx0ICovXG5cdHRoaXMuY29sb3IgPSBbXTtcblxuXHQvKipcblx0ICogW05ZSV0gSG9sZHMgd2hldGhlciBvciBub3QgdGhpcyBvYmplY3QgaXMgZHluYW1pYywgZm9yIHJlbmRlcmluZyBvcHRpbWl6YXRpb25cblx0ICpcblx0ICogQHByb3BlcnR5IGR5bmFtaWNcblx0ICogQHR5cGUgQm9vbGVhblxuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cblx0dGhpcy5keW5hbWljID0gdHJ1ZTtcblxuXHQvLyBjaGFjaCB0aGF0IHB1cHB5IVxuXHR0aGlzLl9zciA9IDA7XG5cdHRoaXMuX2NyID0gMTtcblxuXG5cdHRoaXMuZmlsdGVyQXJlYSA9IG5ldyBQSVhJLlJlY3RhbmdsZSgwLDAsMSwxKTtcblx0XG5cdC8qXG5cdCAqIE1PVVNFIENhbGxiYWNrc1xuXHQgKi9cblxuXHQvKipcblx0ICogQSBjYWxsYmFjayB0aGF0IGlzIHVzZWQgd2hlbiB0aGUgdXNlcnMgY2xpY2tzIG9uIHRoZSBkaXNwbGF5T2JqZWN0IHdpdGggdGhlaXIgbW91c2Vcblx0ICogQG1ldGhvZCBjbGlja1xuXHQgKiBAcGFyYW0gaW50ZXJhY3Rpb25EYXRhIHtJbnRlcmFjdGlvbkRhdGF9XG5cdCAqL1xuXG5cdC8qKlxuXHQgKiBBIGNhbGxiYWNrIHRoYXQgaXMgdXNlZCB3aGVuIHRoZSB1c2VyIGNsaWNrcyB0aGUgbW91c2UgZG93biBvdmVyIHRoZSBzcHJpdGVcblx0ICogQG1ldGhvZCBtb3VzZWRvd25cblx0ICogQHBhcmFtIGludGVyYWN0aW9uRGF0YSB7SW50ZXJhY3Rpb25EYXRhfVxuXHQgKi9cblxuXHQvKipcblx0ICogQSBjYWxsYmFjayB0aGF0IGlzIHVzZWQgd2hlbiB0aGUgdXNlciByZWxlYXNlcyB0aGUgbW91c2UgdGhhdCB3YXMgb3ZlciB0aGUgZGlzcGxheU9iamVjdFxuXHQgKiBmb3IgdGhpcyBjYWxsYmFjayB0byBiZSBmaXJlZCB0aGUgbW91c2UgbXVzdCBoYXZlIGJlZW4gcHJlc3NlZCBkb3duIG92ZXIgdGhlIGRpc3BsYXlPYmplY3Rcblx0ICogQG1ldGhvZCBtb3VzZXVwXG5cdCAqIEBwYXJhbSBpbnRlcmFjdGlvbkRhdGEge0ludGVyYWN0aW9uRGF0YX1cblx0ICovXG5cblx0LyoqXG5cdCAqIEEgY2FsbGJhY2sgdGhhdCBpcyB1c2VkIHdoZW4gdGhlIHVzZXIgcmVsZWFzZXMgdGhlIG1vdXNlIHRoYXQgd2FzIG92ZXIgdGhlIGRpc3BsYXlPYmplY3QgYnV0IGlzIG5vIGxvbmdlciBvdmVyIHRoZSBkaXNwbGF5T2JqZWN0XG5cdCAqIGZvciB0aGlzIGNhbGxiYWNrIHRvIGJlIGZpcmVkLCBUaGUgdG91Y2ggbXVzdCBoYXZlIHN0YXJ0ZWQgb3ZlciB0aGUgZGlzcGxheU9iamVjdFxuXHQgKiBAbWV0aG9kIG1vdXNldXBvdXRzaWRlXG5cdCAqIEBwYXJhbSBpbnRlcmFjdGlvbkRhdGEge0ludGVyYWN0aW9uRGF0YX1cblx0ICovXG5cblx0LyoqXG5cdCAqIEEgY2FsbGJhY2sgdGhhdCBpcyB1c2VkIHdoZW4gdGhlIHVzZXJzIG1vdXNlIHJvbGxzIG92ZXIgdGhlIGRpc3BsYXlPYmplY3Rcblx0ICogQG1ldGhvZCBtb3VzZW92ZXJcblx0ICogQHBhcmFtIGludGVyYWN0aW9uRGF0YSB7SW50ZXJhY3Rpb25EYXRhfVxuXHQgKi9cblxuXHQvKipcblx0ICogQSBjYWxsYmFjayB0aGF0IGlzIHVzZWQgd2hlbiB0aGUgdXNlcnMgbW91c2UgbGVhdmVzIHRoZSBkaXNwbGF5T2JqZWN0XG5cdCAqIEBtZXRob2QgbW91c2VvdXRcblx0ICogQHBhcmFtIGludGVyYWN0aW9uRGF0YSB7SW50ZXJhY3Rpb25EYXRhfVxuXHQgKi9cblxuXG5cdC8qXG5cdCAqIFRPVUNIIENhbGxiYWNrc1xuXHQgKi9cblxuXHQvKipcblx0ICogQSBjYWxsYmFjayB0aGF0IGlzIHVzZWQgd2hlbiB0aGUgdXNlcnMgdGFwcyBvbiB0aGUgc3ByaXRlIHdpdGggdGhlaXIgZmluZ2VyXG5cdCAqIGJhc2ljYWxseSBhIHRvdWNoIHZlcnNpb24gb2YgY2xpY2tcblx0ICogQG1ldGhvZCB0YXBcblx0ICogQHBhcmFtIGludGVyYWN0aW9uRGF0YSB7SW50ZXJhY3Rpb25EYXRhfVxuXHQgKi9cblxuXHQvKipcblx0ICogQSBjYWxsYmFjayB0aGF0IGlzIHVzZWQgd2hlbiB0aGUgdXNlciB0b3VjaCdzIG92ZXIgdGhlIGRpc3BsYXlPYmplY3Rcblx0ICogQG1ldGhvZCB0b3VjaHN0YXJ0XG5cdCAqIEBwYXJhbSBpbnRlcmFjdGlvbkRhdGEge0ludGVyYWN0aW9uRGF0YX1cblx0ICovXG5cblx0LyoqXG5cdCAqIEEgY2FsbGJhY2sgdGhhdCBpcyB1c2VkIHdoZW4gdGhlIHVzZXIgcmVsZWFzZXMgYSB0b3VjaCBvdmVyIHRoZSBkaXNwbGF5T2JqZWN0XG5cdCAqIEBtZXRob2QgdG91Y2hlbmRcblx0ICogQHBhcmFtIGludGVyYWN0aW9uRGF0YSB7SW50ZXJhY3Rpb25EYXRhfVxuXHQgKi9cblxuXHQvKipcblx0ICogQSBjYWxsYmFjayB0aGF0IGlzIHVzZWQgd2hlbiB0aGUgdXNlciByZWxlYXNlcyB0aGUgdG91Y2ggdGhhdCB3YXMgb3ZlciB0aGUgZGlzcGxheU9iamVjdFxuXHQgKiBmb3IgdGhpcyBjYWxsYmFjayB0byBiZSBmaXJlZCwgVGhlIHRvdWNoIG11c3QgaGF2ZSBzdGFydGVkIG92ZXIgdGhlIHNwcml0ZVxuXHQgKiBAbWV0aG9kIHRvdWNoZW5kb3V0c2lkZVxuXHQgKiBAcGFyYW0gaW50ZXJhY3Rpb25EYXRhIHtJbnRlcmFjdGlvbkRhdGF9XG5cdCAqL1xufVxuXG4vLyBjb25zdHJ1Y3RvclxuUElYSS5EaXNwbGF5T2JqZWN0LnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFBJWEkuRGlzcGxheU9iamVjdDtcblxuLyoqXG4gKiBbRGVwcmVjYXRlZF0gSW5kaWNhdGVzIGlmIHRoZSBzcHJpdGUgd2lsbCBoYXZlIHRvdWNoIGFuZCBtb3VzZSBpbnRlcmFjdGl2aXR5LiBJdCBpcyBmYWxzZSBieSBkZWZhdWx0XG4gKiBJbnN0ZWFkIG9mIHVzaW5nIHRoaXMgZnVuY3Rpb24geW91IGNhbiBub3cgc2ltcGx5IHNldCB0aGUgaW50ZXJhY3RpdmUgcHJvcGVydHkgdG8gdHJ1ZSBvciBmYWxzZVxuICpcbiAqIEBtZXRob2Qgc2V0SW50ZXJhY3RpdmVcbiAqIEBwYXJhbSBpbnRlcmFjdGl2ZSB7Qm9vbGVhbn1cbiAqIEBkZXByZWNhdGVkIFNpbXBseSBzZXQgdGhlIGBpbnRlcmFjdGl2ZWAgcHJvcGVydHkgZGlyZWN0bHlcbiAqL1xuUElYSS5EaXNwbGF5T2JqZWN0LnByb3RvdHlwZS5zZXRJbnRlcmFjdGl2ZSA9IGZ1bmN0aW9uKGludGVyYWN0aXZlKVxue1xuXHR0aGlzLmludGVyYWN0aXZlID0gaW50ZXJhY3RpdmU7XG59XG5cbi8qKlxuICogSW5kaWNhdGVzIGlmIHRoZSBzcHJpdGUgd2lsbCBoYXZlIHRvdWNoIGFuZCBtb3VzZSBpbnRlcmFjdGl2aXR5LiBJdCBpcyBmYWxzZSBieSBkZWZhdWx0XG4gKlxuICogQHByb3BlcnR5IGludGVyYWN0aXZlXG4gKiBAdHlwZSBCb29sZWFuXG4gKiBAZGVmYXVsdCBmYWxzZVxuICovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoUElYSS5EaXNwbGF5T2JqZWN0LnByb3RvdHlwZSwgJ2ludGVyYWN0aXZlJywge1xuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pbnRlcmFjdGl2ZTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICBcdHRoaXMuX2ludGVyYWN0aXZlID0gdmFsdWU7XG4gICAgXHRcbiAgICBcdC8vIFRPRE8gbW9yZSB0byBiZSBkb25lIGhlcmUuLlxuXHRcdC8vIG5lZWQgdG8gc29ydCBvdXQgYSByZS1jcmF3bCFcblx0XHRpZih0aGlzLnN0YWdlKXRoaXMuc3RhZ2UuZGlydHkgPSB0cnVlO1xuICAgIH1cbn0pO1xuXG4vKipcbiAqIFNldHMgYSBtYXNrIGZvciB0aGUgZGlzcGxheU9iamVjdC4gQSBtYXNrIGlzIGFuIG9iamVjdCB0aGF0IGxpbWl0cyB0aGUgdmlzaWJpbGl0eSBvZiBhbiBvYmplY3QgdG8gdGhlIHNoYXBlIG9mIHRoZSBtYXNrIGFwcGxpZWQgdG8gaXQuXG4gKiBJbiBQSVhJIGEgcmVndWxhciBtYXNrIG11c3QgYmUgYSBQSVhJLkdncmFwaGljcyBvYmplY3QuIFRoaXMgYWxsb3dzIGZvciBtdWNoIGZhc3RlciBtYXNraW5nIGluIGNhbnZhcyBhcyBpdCB1dGlsaXNlcyBzaGFwZSBjbGlwcGluZy5cbiAqIFRvIHJlbW92ZSBhIG1hc2ssIHNldCB0aGlzIHByb3BlcnR5IHRvIG51bGwuXG4gKlxuICogQHByb3BlcnR5IG1hc2tcbiAqIEB0eXBlIEdyYXBoaWNzXG4gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShQSVhJLkRpc3BsYXlPYmplY3QucHJvdG90eXBlLCAnbWFzaycsIHtcbiAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbWFzaztcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICBcdFxuICAgIFx0XG4gICAgICAgIGlmKHZhbHVlKVxuICAgICAgICB7XG4gICAgICAgIFx0aWYodGhpcy5fbWFzaylcblx0ICAgIFx0e1xuXHQgICAgXHRcdHZhbHVlLnN0YXJ0ID0gdGhpcy5fbWFzay5zdGFydDtcblx0ICAgIFx0XHR2YWx1ZS5lbmQgPSB0aGlzLl9tYXNrLmVuZDtcblx0ICAgIFx0fVxuICAgIFx0XHRlbHNlXG4gICAgXHRcdHtcblx0XHQgICAgICAgIHRoaXMuYWRkRmlsdGVyKHZhbHVlKTtcblx0XHQgICAgICAgIHZhbHVlLnJlbmRlcmFibGUgPSBmYWxzZTtcbiAgICBcdFx0fVxuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAge1xuICAgICAgICBcdCB0aGlzLnJlbW92ZUZpbHRlcih0aGlzLl9tYXNrKTtcblx0XHRcdCB0aGlzLl9tYXNrLnJlbmRlcmFibGUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0aGlzLl9tYXNrID0gdmFsdWU7XG4gICAgfVxufSk7XG5cbi8qKlxuICogU2V0cyB0aGUgZmlsdGVycyBmb3IgdGhlIGRpc3BsYXlPYmplY3QuIFxuICogKiBJTVBPUlRBTlQ6IFRoaXMgaXMgYSB3ZWJHTCBvbmx5IGZlYXR1cmUgYW5kIHdpbGwgYmUgaWdub3JlZCBieSB0aGUgY2FudmFzIHJlbmRlcmVyLlxuICogVG8gcmVtb3ZlIGZpbHRlcnMgc2ltcGx5IHNldCB0aGlzIHByb3BlcnR5IHRvICdudWxsJ1xuICogQHByb3BlcnR5IGZpbHRlcnNcbiAqIEB0eXBlIEFycmF5IEFuIGFycmF5IG9mIGZpbHRlcnNcbiAqL1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KFBJWEkuRGlzcGxheU9iamVjdC5wcm90b3R5cGUsICdmaWx0ZXJzJywge1xuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9maWx0ZXJzO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgIFx0XG4gICAgICAgIGlmKHZhbHVlKVxuICAgICAgICB7XG4gICAgICAgIFx0aWYodGhpcy5fZmlsdGVycyl0aGlzLnJlbW92ZUZpbHRlcih0aGlzLl9maWx0ZXJzKTtcblx0ICAgICAgICB0aGlzLmFkZEZpbHRlcih2YWx1ZSk7XG5cblx0XHQgICAgLy8gbm93IHB1dCBhbGwgdGhlIHBhc3NlcyBpbiBvbmUgcGxhY2UuLlxuXHQgICAgICAgIHZhciBwYXNzZXMgPSBbXTtcblx0ICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZhbHVlLmxlbmd0aDsgaSsrKSBcblx0ICAgICAgICB7XG5cdCAgICAgICAgXHR2YXIgZmlsdGVyUGFzc2VzID0gdmFsdWVbaV0ucGFzc2VzO1xuXHQgICAgICAgIFx0Zm9yICh2YXIgaiA9IDA7IGogPCBmaWx0ZXJQYXNzZXMubGVuZ3RoOyBqKyspIFxuXHQgICAgICAgIFx0e1xuXHQgICAgICAgIFx0XHRwYXNzZXMucHVzaChmaWx0ZXJQYXNzZXNbal0pO1xuXHQgICAgICAgIFx0fTtcblx0ICAgICAgICB9O1xuXG5cdCAgICAgICAgdmFsdWUuc3RhcnQuZmlsdGVyUGFzc2VzID0gcGFzc2VzO1xuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAge1xuICAgICAgICBcdGlmKHRoaXMuX2ZpbHRlcnMpdGhpcy5yZW1vdmVGaWx0ZXIodGhpcy5fZmlsdGVycyk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRoaXMuX2ZpbHRlcnMgPSB2YWx1ZTtcblxuICAgICAgIFxuXG4gICAgICAgIFxuICAgIH1cbn0pO1xuXG4vKlxuICogQWRkcyBhIGZpbHRlciB0byB0aGlzIGRpc3BsYXlPYmplY3RcbiAqXG4gKiBAbWV0aG9kIGFkZEZpbHRlclxuICogQHBhcmFtIG1hc2sge0dyYXBoaWNzfSB0aGUgZ3JhcGhpY3Mgb2JqZWN0IHRvIHVzZSBhcyBhIGZpbHRlclxuICogQHByaXZhdGVcbiAqL1xuUElYSS5EaXNwbGF5T2JqZWN0LnByb3RvdHlwZS5hZGRGaWx0ZXIgPSBmdW5jdGlvbihkYXRhKVxue1xuXHQvL2lmKHRoaXMuZmlsdGVyKXJldHVybjtcblx0Ly90aGlzLmZpbHRlciA9IHRydWU7XG4vL1x0ZGF0YVswXS50YXJnZXQgPSB0aGlzO1xuXHRcblxuXHQvLyBpbnNlcnQgYSBmaWx0ZXIgYmxvY2suLlxuXHQvLyBUT0RPIE9uamVjdCBwb29sIHRoZWFzZSBiYWQgYm95cy4uXG5cdHZhciBzdGFydCA9IG5ldyBQSVhJLkZpbHRlckJsb2NrKCk7XG5cdHZhciBlbmQgPSBuZXcgUElYSS5GaWx0ZXJCbG9jaygpO1xuXHRcblx0ZGF0YS5zdGFydCA9IHN0YXJ0O1xuXHRkYXRhLmVuZCA9IGVuZDtcblx0XG5cdHN0YXJ0LmRhdGEgPSBkYXRhO1xuXHRlbmQuZGF0YSA9IGRhdGE7XG5cdFxuXHRzdGFydC5maXJzdCA9IHN0YXJ0Lmxhc3QgPSAgdGhpcztcblx0ZW5kLmZpcnN0ID0gZW5kLmxhc3QgPSB0aGlzO1xuXHRcblx0c3RhcnQub3BlbiA9IHRydWU7XG5cdFxuXHRzdGFydC50YXJnZXQgPSB0aGlzO1xuXHRcblx0Lypcblx0ICogaW5zZXJ0IHN0YXJ0XG5cdCAqL1xuXHRcblx0dmFyIGNoaWxkRmlyc3QgPSBzdGFydFxuXHR2YXIgY2hpbGRMYXN0ID0gc3RhcnRcblx0dmFyIG5leHRPYmplY3Q7XG5cdHZhciBwcmV2aW91c09iamVjdDtcblx0XHRcblx0cHJldmlvdXNPYmplY3QgPSB0aGlzLmZpcnN0Ll9pUHJldjtcblx0XG5cdGlmKHByZXZpb3VzT2JqZWN0KVxuXHR7XG5cdFx0bmV4dE9iamVjdCA9IHByZXZpb3VzT2JqZWN0Ll9pTmV4dDtcblx0XHRjaGlsZEZpcnN0Ll9pUHJldiA9IHByZXZpb3VzT2JqZWN0O1xuXHRcdHByZXZpb3VzT2JqZWN0Ll9pTmV4dCA9IGNoaWxkRmlyc3Q7XHRcdFxuXHR9XG5cdGVsc2Vcblx0e1xuXHRcdG5leHRPYmplY3QgPSB0aGlzO1xuXHR9XHRcblx0XG5cdGlmKG5leHRPYmplY3QpXG5cdHtcblx0XHRuZXh0T2JqZWN0Ll9pUHJldiA9IGNoaWxkTGFzdDtcblx0XHRjaGlsZExhc3QuX2lOZXh0ID0gbmV4dE9iamVjdDtcblx0fVxuXHRcblx0XG5cdC8vIG5vdyBpbnNlcnQgdGhlIGVuZCBmaWx0ZXIgYmxvY2suLlxuXHRcblx0Lypcblx0ICogaW5zZXJ0IGVuZCBmaWx0ZXJcblx0ICovXG5cdHZhciBjaGlsZEZpcnN0ID0gZW5kXG5cdHZhciBjaGlsZExhc3QgPSBlbmRcblx0dmFyIG5leHRPYmplY3QgPSBudWxsO1xuXHR2YXIgcHJldmlvdXNPYmplY3QgPSBudWxsO1xuXHRcdFxuXHRwcmV2aW91c09iamVjdCA9IHRoaXMubGFzdDtcblx0bmV4dE9iamVjdCA9IHByZXZpb3VzT2JqZWN0Ll9pTmV4dDtcblx0XG5cdGlmKG5leHRPYmplY3QpXG5cdHtcblx0XHRuZXh0T2JqZWN0Ll9pUHJldiA9IGNoaWxkTGFzdDtcblx0XHRjaGlsZExhc3QuX2lOZXh0ID0gbmV4dE9iamVjdDtcblx0fVxuXHRcblx0Y2hpbGRGaXJzdC5faVByZXYgPSBwcmV2aW91c09iamVjdDtcblx0cHJldmlvdXNPYmplY3QuX2lOZXh0ID0gY2hpbGRGaXJzdDtcdFxuXHRcblx0dmFyIHVwZGF0ZUxhc3QgPSB0aGlzO1xuXHRcblx0dmFyIHByZXZMYXN0ID0gdGhpcy5sYXN0O1xuXHR3aGlsZSh1cGRhdGVMYXN0KVxuXHR7XG5cdFx0aWYodXBkYXRlTGFzdC5sYXN0ID09IHByZXZMYXN0KVxuXHRcdHtcblx0XHRcdHVwZGF0ZUxhc3QubGFzdCA9IGVuZDtcblx0XHR9XG5cdFx0dXBkYXRlTGFzdCA9IHVwZGF0ZUxhc3QucGFyZW50O1xuXHR9XG5cdFxuXHR0aGlzLmZpcnN0ID0gc3RhcnQ7XG5cdFxuXHQvLyBpZiB3ZWJHTC4uLlxuXHRpZih0aGlzLl9fcmVuZGVyR3JvdXApXG5cdHtcblx0XHR0aGlzLl9fcmVuZGVyR3JvdXAuYWRkRmlsdGVyQmxvY2tzKHN0YXJ0LCBlbmQpO1xuXHR9XG5cdFxufVxuXG4vKlxuICogUmVtb3ZlcyB0aGUgZmlsdGVyIHRvIHRoaXMgZGlzcGxheU9iamVjdFxuICpcbiAqIEBtZXRob2QgcmVtb3ZlRmlsdGVyXG4gKiBAcHJpdmF0ZVxuICovXG5QSVhJLkRpc3BsYXlPYmplY3QucHJvdG90eXBlLnJlbW92ZUZpbHRlciA9IGZ1bmN0aW9uKGRhdGEpXG57XG5cdC8vaWYoIXRoaXMuZmlsdGVyKXJldHVybjtcblx0Ly90aGlzLmZpbHRlciA9IGZhbHNlO1xuXHRjb25zb2xlLmxvZyhcIllVT0lPXCIpXG5cdC8vIG1vZGlmeSB0aGUgbGlzdC4uXG5cdHZhciBzdGFydEJsb2NrID0gZGF0YS5zdGFydDtcblx0XG5cdFxuXHR2YXIgbmV4dE9iamVjdCA9IHN0YXJ0QmxvY2suX2lOZXh0O1xuXHR2YXIgcHJldmlvdXNPYmplY3QgPSBzdGFydEJsb2NrLl9pUHJldjtcblx0XHRcblx0aWYobmV4dE9iamVjdCluZXh0T2JqZWN0Ll9pUHJldiA9IHByZXZpb3VzT2JqZWN0O1xuXHRpZihwcmV2aW91c09iamVjdClwcmV2aW91c09iamVjdC5faU5leHQgPSBuZXh0T2JqZWN0O1x0XHRcblx0XG5cdHRoaXMuZmlyc3QgPSBzdGFydEJsb2NrLl9pTmV4dDtcblx0XG5cdC8vIHJlbW92ZSB0aGUgZW5kIGZpbHRlclxuXHR2YXIgbGFzdEJsb2NrID0gZGF0YS5lbmQ7XG5cdFxuXHR2YXIgbmV4dE9iamVjdCA9IGxhc3RCbG9jay5faU5leHQ7XG5cdHZhciBwcmV2aW91c09iamVjdCA9IGxhc3RCbG9jay5faVByZXY7XG5cdFx0XG5cdGlmKG5leHRPYmplY3QpbmV4dE9iamVjdC5faVByZXYgPSBwcmV2aW91c09iamVjdDtcblx0cHJldmlvdXNPYmplY3QuX2lOZXh0ID0gbmV4dE9iamVjdDtcdFx0XG5cdFxuXHQvLyB0aGlzIGlzIGFsd2F5cyB0cnVlIHRvbyFcblx0dmFyIHRlbXBMYXN0ID0gIGxhc3RCbG9jay5faVByZXY7XHRcblx0Ly8gbmVlZCB0byBtYWtlIHN1cmUgdGhlIHBhcmVudHMgbGFzdCBpcyB1cGRhdGVkIHRvb1xuXHR2YXIgdXBkYXRlTGFzdCA9IHRoaXM7XG5cdHdoaWxlKHVwZGF0ZUxhc3QubGFzdCA9PSBsYXN0QmxvY2spXG5cdHtcblx0XHR1cGRhdGVMYXN0Lmxhc3QgPSB0ZW1wTGFzdDtcblx0XHR1cGRhdGVMYXN0ID0gdXBkYXRlTGFzdC5wYXJlbnQ7XG5cdFx0aWYoIXVwZGF0ZUxhc3QpYnJlYWs7XG5cdH1cblx0XG5cdC8vIGlmIHdlYkdMLi4uXG5cdGlmKHRoaXMuX19yZW5kZXJHcm91cClcblx0e1xuXHRcdHRoaXMuX19yZW5kZXJHcm91cC5yZW1vdmVGaWx0ZXJCbG9ja3Moc3RhcnRCbG9jaywgbGFzdEJsb2NrKTtcblx0fVxufVxuXG4vKlxuICogVXBkYXRlcyB0aGUgb2JqZWN0IHRyYW5zZm9ybSBmb3IgcmVuZGVyaW5nXG4gKlxuICogQG1ldGhvZCB1cGRhdGVUcmFuc2Zvcm1cbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuRGlzcGxheU9iamVjdC5wcm90b3R5cGUudXBkYXRlVHJhbnNmb3JtID0gZnVuY3Rpb24oKVxue1xuXHQvLyBUT0RPIE9QVElNSVpFIFRISVMhISB3aXRoIGRpcnR5XG5cdGlmKHRoaXMucm90YXRpb24gIT09IHRoaXMucm90YXRpb25DYWNoZSlcblx0e1xuXHRcdHRoaXMucm90YXRpb25DYWNoZSA9IHRoaXMucm90YXRpb247XG5cdFx0dGhpcy5fc3IgPSAgTWF0aC5zaW4odGhpcy5yb3RhdGlvbik7XG5cdFx0dGhpcy5fY3IgPSAgTWF0aC5jb3ModGhpcy5yb3RhdGlvbik7XG5cdH1cdFxuXHRcblx0dmFyIGxvY2FsVHJhbnNmb3JtID0gdGhpcy5sb2NhbFRyYW5zZm9ybTtcblx0dmFyIHBhcmVudFRyYW5zZm9ybSA9IHRoaXMucGFyZW50LndvcmxkVHJhbnNmb3JtO1xuXHR2YXIgd29ybGRUcmFuc2Zvcm0gPSB0aGlzLndvcmxkVHJhbnNmb3JtO1xuXHQvL2NvbnNvbGUubG9nKGxvY2FsVHJhbnNmb3JtKVxuXHRsb2NhbFRyYW5zZm9ybVswXSA9IHRoaXMuX2NyICogdGhpcy5zY2FsZS54O1xuXHRsb2NhbFRyYW5zZm9ybVsxXSA9IC10aGlzLl9zciAqIHRoaXMuc2NhbGUueVxuXHRsb2NhbFRyYW5zZm9ybVszXSA9IHRoaXMuX3NyICogdGhpcy5zY2FsZS54O1xuXHRsb2NhbFRyYW5zZm9ybVs0XSA9IHRoaXMuX2NyICogdGhpcy5zY2FsZS55O1xuXHRcblx0Ly8gVE9ETyAtLT4gZG8gd2UgZXZlbiBuZWVkIGEgbG9jYWwgbWF0cml4Pz8/XG5cdFxuXHR2YXIgcHggPSB0aGlzLnBpdm90Lng7XG5cdHZhciBweSA9IHRoaXMucGl2b3QueTtcbiAgIFx0XG4gICAgLy8gQ2FjaGUgdGhlIG1hdHJpeCB2YWx1ZXMgKG1ha2VzIGZvciBodWdlIHNwZWVkIGluY3JlYXNlcyEpXG4gICAgdmFyIGEwMCA9IGxvY2FsVHJhbnNmb3JtWzBdLCBhMDEgPSBsb2NhbFRyYW5zZm9ybVsxXSwgYTAyID0gdGhpcy5wb3NpdGlvbi54IC0gbG9jYWxUcmFuc2Zvcm1bMF0gKiBweCAtIHB5ICogbG9jYWxUcmFuc2Zvcm1bMV0sXG4gICAgICAgIGExMCA9IGxvY2FsVHJhbnNmb3JtWzNdLCBhMTEgPSBsb2NhbFRyYW5zZm9ybVs0XSwgYTEyID0gdGhpcy5wb3NpdGlvbi55IC0gbG9jYWxUcmFuc2Zvcm1bNF0gKiBweSAtIHB4ICogbG9jYWxUcmFuc2Zvcm1bM10sXG5cbiAgICAgICAgYjAwID0gcGFyZW50VHJhbnNmb3JtWzBdLCBiMDEgPSBwYXJlbnRUcmFuc2Zvcm1bMV0sIGIwMiA9IHBhcmVudFRyYW5zZm9ybVsyXSxcbiAgICAgICAgYjEwID0gcGFyZW50VHJhbnNmb3JtWzNdLCBiMTEgPSBwYXJlbnRUcmFuc2Zvcm1bNF0sIGIxMiA9IHBhcmVudFRyYW5zZm9ybVs1XTtcblxuXHRsb2NhbFRyYW5zZm9ybVsyXSA9IGEwMlxuXHRsb2NhbFRyYW5zZm9ybVs1XSA9IGExMlxuXHRcbiAgICB3b3JsZFRyYW5zZm9ybVswXSA9IGIwMCAqIGEwMCArIGIwMSAqIGExMDtcbiAgICB3b3JsZFRyYW5zZm9ybVsxXSA9IGIwMCAqIGEwMSArIGIwMSAqIGExMTtcbiAgICB3b3JsZFRyYW5zZm9ybVsyXSA9IGIwMCAqIGEwMiArIGIwMSAqIGExMiArIGIwMjtcblxuICAgIHdvcmxkVHJhbnNmb3JtWzNdID0gYjEwICogYTAwICsgYjExICogYTEwO1xuICAgIHdvcmxkVHJhbnNmb3JtWzRdID0gYjEwICogYTAxICsgYjExICogYTExO1xuICAgIHdvcmxkVHJhbnNmb3JtWzVdID0gYjEwICogYTAyICsgYjExICogYTEyICsgYjEyO1xuXG5cdC8vIGJlY2F1c2Ugd2UgYXJlIHVzaW5nIGFmZmluZSB0cmFuc2Zvcm1hdGlvbiwgd2UgY2FuIG9wdGltaXNlIHRoZSBtYXRyaXggY29uY2F0ZW5hdGlvbiBwcm9jZXNzLi4gd29vbyFcblx0Ly8gbWF0My5tdWx0aXBseSh0aGlzLmxvY2FsVHJhbnNmb3JtLCB0aGlzLnBhcmVudC53b3JsZFRyYW5zZm9ybSwgdGhpcy53b3JsZFRyYW5zZm9ybSk7XG5cdHRoaXMud29ybGRBbHBoYSA9IHRoaXMuYWxwaGEgKiB0aGlzLnBhcmVudC53b3JsZEFscGhhO1xuXHRcblx0dGhpcy52Y291bnQgPSBQSVhJLnZpc2libGVDb3VudDtcblxufVxuXG5QSVhJLnZpc2libGVDb3VudCA9IDA7XG4vKipcbiAqIEBhdXRob3IgTWF0IEdyb3ZlcyBodHRwOi8vbWF0Z3JvdmVzLmNvbS8gQERvb3JtYXQyM1xuICovXG5cblxuLyoqXG4gKiBBIERpc3BsYXlPYmplY3RDb250YWluZXIgcmVwcmVzZW50cyBhIGNvbGxlY3Rpb24gb2YgZGlzcGxheSBvYmplY3RzLlxuICogSXQgaXMgdGhlIGJhc2UgY2xhc3Mgb2YgYWxsIGRpc3BsYXkgb2JqZWN0cyB0aGF0IGFjdCBhcyBhIGNvbnRhaW5lciBmb3Igb3RoZXIgb2JqZWN0cy5cbiAqXG4gKiBAY2xhc3MgRGlzcGxheU9iamVjdENvbnRhaW5lciBcbiAqIEBleHRlbmRzIERpc3BsYXlPYmplY3RcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5QSVhJLkRpc3BsYXlPYmplY3RDb250YWluZXIgPSBmdW5jdGlvbigpXG57XG5cdFBJWEkuRGlzcGxheU9iamVjdC5jYWxsKCB0aGlzICk7XG5cdFxuXHQvKipcblx0ICogW3JlYWQtb25seV0gVGhlIG9mIGNoaWxkcmVuIG9mIHRoaXMgY29udGFpbmVyLlxuXHQgKlxuXHQgKiBAcHJvcGVydHkgY2hpbGRyZW5cblx0ICogQHR5cGUgQXJyYXk8RGlzcGxheU9iamVjdD5cblx0ICogQHJlYWRPbmx5XG5cdCAqL1x0XG5cdHRoaXMuY2hpbGRyZW4gPSBbXTtcbn1cblxuLy8gY29uc3RydWN0b3JcblBJWEkuRGlzcGxheU9iamVjdENvbnRhaW5lci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBQSVhJLkRpc3BsYXlPYmplY3QucHJvdG90eXBlICk7XG5QSVhJLkRpc3BsYXlPYmplY3RDb250YWluZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gUElYSS5EaXNwbGF5T2JqZWN0Q29udGFpbmVyO1xuXG4vKipcbiAqIEFkZHMgYSBjaGlsZCB0byB0aGUgY29udGFpbmVyLlxuICpcbiAqIEBtZXRob2QgYWRkQ2hpbGRcbiAqIEBwYXJhbSBjaGlsZCB7RGlzcGxheU9iamVjdH0gVGhlIERpc3BsYXlPYmplY3QgdG8gYWRkIHRvIHRoZSBjb250YWluZXJcbiAqL1xuUElYSS5EaXNwbGF5T2JqZWN0Q29udGFpbmVyLnByb3RvdHlwZS5hZGRDaGlsZCA9IGZ1bmN0aW9uKGNoaWxkKVxue1xuXHRpZihjaGlsZC5wYXJlbnQgIT0gdW5kZWZpbmVkKVxuXHR7XG5cdFx0XG5cdFx0Ly8vLyBDT1VMRCBCRSBUSElTPz8/XG5cdFx0Y2hpbGQucGFyZW50LnJlbW92ZUNoaWxkKGNoaWxkKTtcblx0Ly9cdHJldHVybjtcblx0fVxuXG5cdGNoaWxkLnBhcmVudCA9IHRoaXM7XG5cdFxuXHR0aGlzLmNoaWxkcmVuLnB1c2goY2hpbGQpO1x0XG5cdFxuXHQvLyB1cGRhdGUgdGhlIHN0YWdlIHJlZmZlcmVuY2UuLlxuXHRcblx0aWYodGhpcy5zdGFnZSlcblx0e1xuXHRcdHZhciB0bXBDaGlsZCA9IGNoaWxkO1xuXHRcdGRvXG5cdFx0e1xuXHRcdFx0aWYodG1wQ2hpbGQuaW50ZXJhY3RpdmUpdGhpcy5zdGFnZS5kaXJ0eSA9IHRydWU7XG5cdFx0XHR0bXBDaGlsZC5zdGFnZSA9IHRoaXMuc3RhZ2U7XG5cdFx0XHR0bXBDaGlsZCA9IHRtcENoaWxkLl9pTmV4dDtcblx0XHR9XHRcblx0XHR3aGlsZSh0bXBDaGlsZClcblx0fVxuXHRcblx0Ly8gTElOS0VEIExJU1QgLy9cblx0XG5cdC8vIG1vZGlmeSB0aGUgbGlzdC4uXG5cdHZhciBjaGlsZEZpcnN0ID0gY2hpbGQuZmlyc3Rcblx0dmFyIGNoaWxkTGFzdCA9IGNoaWxkLmxhc3Q7XG5cdHZhciBuZXh0T2JqZWN0O1xuXHR2YXIgcHJldmlvdXNPYmplY3Q7XG5cdFxuXHQvLyB0aGlzIGNvdWxkIGJlIHdyb25nIGlmIHRoZXJlIGlzIGEgZmlsdGVyPz9cblx0aWYodGhpcy5fZmlsdGVycyB8fCB0aGlzLl9tYXNrKVxuXHR7XG5cdFx0cHJldmlvdXNPYmplY3QgPSAgdGhpcy5sYXN0Ll9pUHJldjtcblx0fVxuXHRlbHNlXG5cdHtcblx0XHRwcmV2aW91c09iamVjdCA9IHRoaXMubGFzdDtcblx0fVxuXG5cdG5leHRPYmplY3QgPSBwcmV2aW91c09iamVjdC5faU5leHQ7XG5cdFxuXHQvLyBhbHdheXMgdHJ1ZSBpbiB0aGlzIGNhc2Vcblx0Ly8gbmVlZCB0byBtYWtlIHN1cmUgdGhlIHBhcmVudHMgbGFzdCBpcyB1cGRhdGVkIHRvb1xuXHR2YXIgdXBkYXRlTGFzdCA9IHRoaXM7XG5cdHZhciBwcmV2TGFzdCA9IHByZXZpb3VzT2JqZWN0O1xuXHRcblx0d2hpbGUodXBkYXRlTGFzdClcblx0e1xuXHRcdGlmKHVwZGF0ZUxhc3QubGFzdCA9PSBwcmV2TGFzdClcblx0XHR7XG5cdFx0XHR1cGRhdGVMYXN0Lmxhc3QgPSBjaGlsZC5sYXN0O1xuXHRcdH1cblx0XHR1cGRhdGVMYXN0ID0gdXBkYXRlTGFzdC5wYXJlbnQ7XG5cdH1cblx0XG5cdGlmKG5leHRPYmplY3QpXG5cdHtcblx0XHRuZXh0T2JqZWN0Ll9pUHJldiA9IGNoaWxkTGFzdDtcblx0XHRjaGlsZExhc3QuX2lOZXh0ID0gbmV4dE9iamVjdDtcblx0fVxuXHRcblx0Y2hpbGRGaXJzdC5faVByZXYgPSBwcmV2aW91c09iamVjdDtcblx0cHJldmlvdXNPYmplY3QuX2lOZXh0ID0gY2hpbGRGaXJzdDtcdFx0XG5cblx0Ly8gbmVlZCB0byByZW1vdmUgYW55IHJlbmRlciBncm91cHMuLlxuXHRpZih0aGlzLl9fcmVuZGVyR3JvdXApXG5cdHtcblx0XHQvLyBiZWluZyB1c2VkIGJ5IGEgcmVuZGVyVGV4dHVyZS4uIGlmIGl0IGV4aXN0cyB0aGVuIGl0IG11c3QgYmUgZnJvbSBhIHJlbmRlciB0ZXh0dXJlO1xuXHRcdGlmKGNoaWxkLl9fcmVuZGVyR3JvdXApY2hpbGQuX19yZW5kZXJHcm91cC5yZW1vdmVEaXNwbGF5T2JqZWN0QW5kQ2hpbGRyZW4oY2hpbGQpO1xuXHRcdC8vIGFkZCB0aGVtIHRvIHRoZSBuZXcgcmVuZGVyIGdyb3VwLi5cblx0XHR0aGlzLl9fcmVuZGVyR3JvdXAuYWRkRGlzcGxheU9iamVjdEFuZENoaWxkcmVuKGNoaWxkKTtcblx0fVxuXHRcbn1cblxuLyoqXG4gKiBBZGRzIGEgY2hpbGQgdG8gdGhlIGNvbnRhaW5lciBhdCBhIHNwZWNpZmllZCBpbmRleC4gSWYgdGhlIGluZGV4IGlzIG91dCBvZiBib3VuZHMgYW4gZXJyb3Igd2lsbCBiZSB0aHJvd25cbiAqXG4gKiBAbWV0aG9kIGFkZENoaWxkQXRcbiAqIEBwYXJhbSBjaGlsZCB7RGlzcGxheU9iamVjdH0gVGhlIGNoaWxkIHRvIGFkZFxuICogQHBhcmFtIGluZGV4IHtOdW1iZXJ9IFRoZSBpbmRleCB0byBwbGFjZSB0aGUgY2hpbGQgaW5cbiAqL1xuUElYSS5EaXNwbGF5T2JqZWN0Q29udGFpbmVyLnByb3RvdHlwZS5hZGRDaGlsZEF0ID0gZnVuY3Rpb24oY2hpbGQsIGluZGV4KVxue1xuXHRpZihpbmRleCA+PSAwICYmIGluZGV4IDw9IHRoaXMuY2hpbGRyZW4ubGVuZ3RoKVxuXHR7XG5cdFx0aWYoY2hpbGQucGFyZW50ICE9IHVuZGVmaW5lZClcblx0XHR7XG5cdFx0XHRjaGlsZC5wYXJlbnQucmVtb3ZlQ2hpbGQoY2hpbGQpO1xuXHRcdH1cblx0XHRjaGlsZC5wYXJlbnQgPSB0aGlzO1xuXHRcdFxuXHRcdGlmKHRoaXMuc3RhZ2UpXG5cdFx0e1xuXHRcdFx0dmFyIHRtcENoaWxkID0gY2hpbGQ7XG5cdFx0XHRkb1xuXHRcdFx0e1xuXHRcdFx0XHRpZih0bXBDaGlsZC5pbnRlcmFjdGl2ZSl0aGlzLnN0YWdlLmRpcnR5ID0gdHJ1ZTtcblx0XHRcdFx0dG1wQ2hpbGQuc3RhZ2UgPSB0aGlzLnN0YWdlO1xuXHRcdFx0XHR0bXBDaGlsZCA9IHRtcENoaWxkLl9pTmV4dDtcblx0XHRcdH1cblx0XHRcdHdoaWxlKHRtcENoaWxkKVxuXHRcdH1cblx0XHRcblx0XHQvLyBtb2RpZnkgdGhlIGxpc3QuLlxuXHRcdHZhciBjaGlsZEZpcnN0ID0gY2hpbGQuZmlyc3Q7XG5cdFx0dmFyIGNoaWxkTGFzdCA9IGNoaWxkLmxhc3Q7XG5cdFx0dmFyIG5leHRPYmplY3Q7XG5cdFx0dmFyIHByZXZpb3VzT2JqZWN0O1xuXHRcdFxuXHRcdGlmKGluZGV4ID09IHRoaXMuY2hpbGRyZW4ubGVuZ3RoKVxuXHRcdHtcblx0XHRcdHByZXZpb3VzT2JqZWN0ID0gIHRoaXMubGFzdDtcblx0XHRcdHZhciB1cGRhdGVMYXN0ID0gdGhpcztcblx0XHRcdHZhciBwcmV2TGFzdCA9IHRoaXMubGFzdDtcblx0XHRcdHdoaWxlKHVwZGF0ZUxhc3QpXG5cdFx0XHR7XG5cdFx0XHRcdGlmKHVwZGF0ZUxhc3QubGFzdCA9PSBwcmV2TGFzdClcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHVwZGF0ZUxhc3QubGFzdCA9IGNoaWxkLmxhc3Q7XG5cdFx0XHRcdH1cblx0XHRcdFx0dXBkYXRlTGFzdCA9IHVwZGF0ZUxhc3QucGFyZW50O1xuXHRcdFx0fVxuXHRcdH1cblx0XHRlbHNlIGlmKGluZGV4ID09IDApXG5cdFx0e1xuXHRcdFx0cHJldmlvdXNPYmplY3QgPSB0aGlzO1xuXHRcdH1cblx0XHRlbHNlXG5cdFx0e1xuXHRcdFx0cHJldmlvdXNPYmplY3QgPSB0aGlzLmNoaWxkcmVuW2luZGV4LTFdLmxhc3Q7XG5cdFx0fVxuXHRcdFxuXHRcdG5leHRPYmplY3QgPSBwcmV2aW91c09iamVjdC5faU5leHQ7XG5cdFx0XG5cdFx0Ly8gYWx3YXlzIHRydWUgaW4gdGhpcyBjYXNlXG5cdFx0aWYobmV4dE9iamVjdClcblx0XHR7XG5cdFx0XHRuZXh0T2JqZWN0Ll9pUHJldiA9IGNoaWxkTGFzdDtcblx0XHRcdGNoaWxkTGFzdC5faU5leHQgPSBuZXh0T2JqZWN0O1xuXHRcdH1cblx0XHRcblx0XHRjaGlsZEZpcnN0Ll9pUHJldiA9IHByZXZpb3VzT2JqZWN0O1xuXHRcdHByZXZpb3VzT2JqZWN0Ll9pTmV4dCA9IGNoaWxkRmlyc3Q7XHRcdFxuXG5cdFx0dGhpcy5jaGlsZHJlbi5zcGxpY2UoaW5kZXgsIDAsIGNoaWxkKTtcblx0XHQvLyBuZWVkIHRvIHJlbW92ZSBhbnkgcmVuZGVyIGdyb3Vwcy4uXG5cdFx0aWYodGhpcy5fX3JlbmRlckdyb3VwKVxuXHRcdHtcblx0XHRcdC8vIGJlaW5nIHVzZWQgYnkgYSByZW5kZXJUZXh0dXJlLi4gaWYgaXQgZXhpc3RzIHRoZW4gaXQgbXVzdCBiZSBmcm9tIGEgcmVuZGVyIHRleHR1cmU7XG5cdFx0XHRpZihjaGlsZC5fX3JlbmRlckdyb3VwKWNoaWxkLl9fcmVuZGVyR3JvdXAucmVtb3ZlRGlzcGxheU9iamVjdEFuZENoaWxkcmVuKGNoaWxkKTtcblx0XHRcdC8vIGFkZCB0aGVtIHRvIHRoZSBuZXcgcmVuZGVyIGdyb3VwLi5cblx0XHRcdHRoaXMuX19yZW5kZXJHcm91cC5hZGREaXNwbGF5T2JqZWN0QW5kQ2hpbGRyZW4oY2hpbGQpO1xuXHRcdH1cblx0XHRcblx0fVxuXHRlbHNlXG5cdHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoY2hpbGQgKyBcIiBUaGUgaW5kZXggXCIrIGluZGV4ICtcIiBzdXBwbGllZCBpcyBvdXQgb2YgYm91bmRzIFwiICsgdGhpcy5jaGlsZHJlbi5sZW5ndGgpO1xuXHR9XG59XG5cbi8qKlxuICogW05ZSV0gU3dhcHMgdGhlIGRlcHRoIG9mIDIgZGlzcGxheU9iamVjdHNcbiAqXG4gKiBAbWV0aG9kIHN3YXBDaGlsZHJlblxuICogQHBhcmFtIGNoaWxkIHtEaXNwbGF5T2JqZWN0fVxuICogQHBhcmFtIGNoaWxkMiB7RGlzcGxheU9iamVjdH1cbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuRGlzcGxheU9iamVjdENvbnRhaW5lci5wcm90b3R5cGUuc3dhcENoaWxkcmVuID0gZnVuY3Rpb24oY2hpbGQsIGNoaWxkMilcbntcblx0Lypcblx0ICogdGhpcyBmdW50aW9uIG5lZWRzIHRvIGJlIHJlY29kZWQuLiBcblx0ICogY2FuIGJlIGRvbmUgYSBsb3QgZmFzdGVyLi5cblx0ICovXG5cdHJldHVybjtcblx0XG5cdC8vIG5lZWQgdG8gZml4IHRoaXMgZnVuY3Rpb24gOi9cblx0Lypcblx0Ly8gVE9ETyBJIGFscmVhZHkga25vdyB0aGlzPz9cblx0dmFyIGluZGV4ID0gdGhpcy5jaGlsZHJlbi5pbmRleE9mKCBjaGlsZCApO1xuXHR2YXIgaW5kZXgyID0gdGhpcy5jaGlsZHJlbi5pbmRleE9mKCBjaGlsZDIgKTtcblx0XG5cdGlmICggaW5kZXggIT09IC0xICYmIGluZGV4MiAhPT0gLTEgKSBcblx0e1xuXHRcdC8vIGNvb2xcblx0XHRcblx0XHQvKlxuXHRcdGlmKHRoaXMuc3RhZ2UpXG5cdFx0e1xuXHRcdFx0Ly8gdGhpcyBpcyB0byBzYXRpc2Z5IHRoZSB3ZWJHTCBiYXRjaGluZy4uXG5cdFx0XHQvLyBUT0RPIHN1cmUgdGhlcmUgaXMgYSBuaWNlciB3YXkgdG8gYWNoaWV2ZSB0aGlzIVxuXHRcdFx0dGhpcy5zdGFnZS5fX3JlbW92ZUNoaWxkKGNoaWxkKTtcblx0XHRcdHRoaXMuc3RhZ2UuX19yZW1vdmVDaGlsZChjaGlsZDIpO1xuXHRcdFx0XG5cdFx0XHR0aGlzLnN0YWdlLl9fYWRkQ2hpbGQoY2hpbGQpO1xuXHRcdFx0dGhpcy5zdGFnZS5fX2FkZENoaWxkKGNoaWxkMik7XG5cdFx0fVxuXHRcdFxuXHRcdC8vIHN3YXAgdGhlIHBvc2l0aW9ucy4uXG5cdFx0dGhpcy5jaGlsZHJlbltpbmRleF0gPSBjaGlsZDI7XG5cdFx0dGhpcy5jaGlsZHJlbltpbmRleDJdID0gY2hpbGQ7XG5cdFx0XG5cdH1cblx0ZWxzZVxuXHR7XG5cdFx0dGhyb3cgbmV3IEVycm9yKGNoaWxkICsgXCIgQm90aCB0aGUgc3VwcGxpZWQgRGlzcGxheU9iamVjdHMgbXVzdCBiZSBhIGNoaWxkIG9mIHRoZSBjYWxsZXIgXCIgKyB0aGlzKTtcblx0fSovXG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgQ2hpbGQgYXQgdGhlIHNwZWNpZmllZCBpbmRleFxuICpcbiAqIEBtZXRob2QgZ2V0Q2hpbGRBdFxuICogQHBhcmFtIGluZGV4IHtOdW1iZXJ9IFRoZSBpbmRleCB0byBnZXQgdGhlIGNoaWxkIGZyb21cbiAqL1xuUElYSS5EaXNwbGF5T2JqZWN0Q29udGFpbmVyLnByb3RvdHlwZS5nZXRDaGlsZEF0ID0gZnVuY3Rpb24oaW5kZXgpXG57XG5cdGlmKGluZGV4ID49IDAgJiYgaW5kZXggPCB0aGlzLmNoaWxkcmVuLmxlbmd0aClcblx0e1xuXHRcdHJldHVybiB0aGlzLmNoaWxkcmVuW2luZGV4XTtcblx0fVxuXHRlbHNlXG5cdHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoY2hpbGQgKyBcIiBCb3RoIHRoZSBzdXBwbGllZCBEaXNwbGF5T2JqZWN0cyBtdXN0IGJlIGEgY2hpbGQgb2YgdGhlIGNhbGxlciBcIiArIHRoaXMpO1xuXHR9XG59XG5cbi8qKlxuICogUmVtb3ZlcyBhIGNoaWxkIGZyb20gdGhlIGNvbnRhaW5lci5cbiAqXG4gKiBAbWV0aG9kIHJlbW92ZUNoaWxkXG4gKiBAcGFyYW0gY2hpbGQge0Rpc3BsYXlPYmplY3R9IFRoZSBEaXNwbGF5T2JqZWN0IHRvIHJlbW92ZVxuICovXG5QSVhJLkRpc3BsYXlPYmplY3RDb250YWluZXIucHJvdG90eXBlLnJlbW92ZUNoaWxkID0gZnVuY3Rpb24oY2hpbGQpXG57XG5cdHZhciBpbmRleCA9IHRoaXMuY2hpbGRyZW4uaW5kZXhPZiggY2hpbGQgKTtcblx0aWYgKCBpbmRleCAhPT0gLTEgKSBcblx0e1xuXHRcdC8vIHVubGluayAvL1xuXHRcdC8vIG1vZGlmeSB0aGUgbGlzdC4uXG5cdFx0dmFyIGNoaWxkRmlyc3QgPSBjaGlsZC5maXJzdDtcblx0XHR2YXIgY2hpbGRMYXN0ID0gY2hpbGQubGFzdDtcblx0XHRcblx0XHR2YXIgbmV4dE9iamVjdCA9IGNoaWxkTGFzdC5faU5leHQ7XG5cdFx0dmFyIHByZXZpb3VzT2JqZWN0ID0gY2hpbGRGaXJzdC5faVByZXY7XG5cdFx0XHRcblx0XHRpZihuZXh0T2JqZWN0KW5leHRPYmplY3QuX2lQcmV2ID0gcHJldmlvdXNPYmplY3Q7XG5cdFx0cHJldmlvdXNPYmplY3QuX2lOZXh0ID0gbmV4dE9iamVjdDtcdFx0XG5cdFx0XG5cdFx0aWYodGhpcy5sYXN0ID09IGNoaWxkTGFzdClcblx0XHR7XG5cdFx0XHR2YXIgdGVtcExhc3QgPSAgY2hpbGRGaXJzdC5faVByZXY7XHRcblx0XHRcdC8vIG5lZWQgdG8gbWFrZSBzdXJlIHRoZSBwYXJlbnRzIGxhc3QgaXMgdXBkYXRlZCB0b29cblx0XHRcdHZhciB1cGRhdGVMYXN0ID0gdGhpcztcblx0XHRcdHdoaWxlKHVwZGF0ZUxhc3QubGFzdCA9PSBjaGlsZExhc3QubGFzdClcblx0XHRcdHtcblx0XHRcdFx0dXBkYXRlTGFzdC5sYXN0ID0gdGVtcExhc3Q7XG5cdFx0XHRcdHVwZGF0ZUxhc3QgPSB1cGRhdGVMYXN0LnBhcmVudDtcblx0XHRcdFx0aWYoIXVwZGF0ZUxhc3QpYnJlYWs7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdFxuXHRcdGNoaWxkTGFzdC5faU5leHQgPSBudWxsO1xuXHRcdGNoaWxkRmlyc3QuX2lQcmV2ID0gbnVsbDtcblx0XHQgXG5cdFx0Ly8gdXBkYXRlIHRoZSBzdGFnZSByZWZlcmVuY2UuLlxuXHRcdGlmKHRoaXMuc3RhZ2UpXG5cdFx0e1xuXHRcdFx0dmFyIHRtcENoaWxkID0gY2hpbGQ7XG5cdFx0XHRkb1xuXHRcdFx0e1xuXHRcdFx0XHRpZih0bXBDaGlsZC5pbnRlcmFjdGl2ZSl0aGlzLnN0YWdlLmRpcnR5ID0gdHJ1ZTtcblx0XHRcdFx0dG1wQ2hpbGQuc3RhZ2UgPSBudWxsO1xuXHRcdFx0XHR0bXBDaGlsZCA9IHRtcENoaWxkLl9pTmV4dDtcblx0XHRcdH1cdFxuXHRcdFx0d2hpbGUodG1wQ2hpbGQpXG5cdFx0fVxuXHRcblx0XHQvLyB3ZWJHTCB0cmltXG5cdFx0aWYoY2hpbGQuX19yZW5kZXJHcm91cClcblx0XHR7XG5cdFx0XHRjaGlsZC5fX3JlbmRlckdyb3VwLnJlbW92ZURpc3BsYXlPYmplY3RBbmRDaGlsZHJlbihjaGlsZCk7XG5cdFx0fVxuXHRcdFxuXHRcdGNoaWxkLnBhcmVudCA9IHVuZGVmaW5lZDtcblx0XHR0aGlzLmNoaWxkcmVuLnNwbGljZSggaW5kZXgsIDEgKTtcblx0fVxuXHRlbHNlXG5cdHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoY2hpbGQgKyBcIiBUaGUgc3VwcGxpZWQgRGlzcGxheU9iamVjdCBtdXN0IGJlIGEgY2hpbGQgb2YgdGhlIGNhbGxlciBcIiArIHRoaXMpO1xuXHR9XG59XG5cbi8qXG4gKiBVcGRhdGVzIHRoZSBjb250YWluZXIncyBjaGlsZHJlbidzIHRyYW5zZm9ybSBmb3IgcmVuZGVyaW5nXG4gKlxuICogQG1ldGhvZCB1cGRhdGVUcmFuc2Zvcm1cbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuRGlzcGxheU9iamVjdENvbnRhaW5lci5wcm90b3R5cGUudXBkYXRlVHJhbnNmb3JtID0gZnVuY3Rpb24oKVxue1xuXHRpZighdGhpcy52aXNpYmxlKXJldHVybjtcblx0XG5cdFBJWEkuRGlzcGxheU9iamVjdC5wcm90b3R5cGUudXBkYXRlVHJhbnNmb3JtLmNhbGwoIHRoaXMgKTtcblx0XG5cdGZvcih2YXIgaT0wLGo9dGhpcy5jaGlsZHJlbi5sZW5ndGg7IGk8ajsgaSsrKVxuXHR7XG5cdFx0dGhpcy5jaGlsZHJlbltpXS51cGRhdGVUcmFuc2Zvcm0oKTtcdFxuXHR9XG59XG4vKipcbiAqIEBhdXRob3IgTWF0IEdyb3ZlcyBodHRwOi8vbWF0Z3JvdmVzLmNvbS8gQERvb3JtYXQyM1xuICovXG5cblBJWEkuYmxlbmRNb2RlcyA9IHt9O1xuUElYSS5ibGVuZE1vZGVzLk5PUk1BTCA9IDA7XG5QSVhJLmJsZW5kTW9kZXMuU0NSRUVOID0gMTtcblxuXG4vKipcbiAqIFRoZSBTUHJpdGUgb2JqZWN0IGlzIHRoZSBiYXNlIGZvciBhbGwgdGV4dHVyZWQgb2JqZWN0cyB0aGF0IGFyZSByZW5kZXJlZCB0byB0aGUgc2NyZWVuXG4gKlxuICogQGNsYXNzIFNwcml0ZVxuICogQGV4dGVuZHMgRGlzcGxheU9iamVjdENvbnRhaW5lclxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0gdGV4dHVyZSB7VGV4dHVyZX0gVGhlIHRleHR1cmUgZm9yIHRoaXMgc3ByaXRlXG4gKiBAdHlwZSBTdHJpbmdcbiAqL1xuUElYSS5TcHJpdGUgPSBmdW5jdGlvbih0ZXh0dXJlKVxue1xuXHRQSVhJLkRpc3BsYXlPYmplY3RDb250YWluZXIuY2FsbCggdGhpcyApO1xuXG5cdC8qKlxuXHQgKiBUaGUgYW5jaG9yIHNldHMgdGhlIG9yaWdpbiBwb2ludCBvZiB0aGUgdGV4dHVyZS5cblx0ICogVGhlIGRlZmF1bHQgaXMgMCwwIHRoaXMgbWVhbnMgdGhlIHRleHR1cmVzIG9yaWdpbiBpcyB0aGUgdG9wIGxlZnQgXG5cdCAqIFNldHRpbmcgdGhhbiBhbmNob3IgdG8gMC41LDAuNSBtZWFucyB0aGUgdGV4dHVyZXMgb3JpZ2luIGlzIGNlbnRlcmVkXG5cdCAqIFNldHRpbmcgdGhlIGFuY2hvciB0byAxLDEgd291bGQgbWVhbiB0aGUgdGV4dHVyZXMgb3JpZ2luIHBvaW50cyB3aWxsIGJlIHRoZSBib3R0b20gcmlnaHRcblx0ICpcbiAgICAgKiBAcHJvcGVydHkgYW5jaG9yXG4gICAgICogQHR5cGUgUG9pbnRcbiAgICAgKi9cblx0dGhpcy5hbmNob3IgPSBuZXcgUElYSS5Qb2ludCgpO1xuXG5cdC8qKlxuXHQgKiBUaGUgdGV4dHVyZSB0aGF0IHRoZSBzcHJpdGUgaXMgdXNpbmdcblx0ICpcblx0ICogQHByb3BlcnR5IHRleHR1cmVcblx0ICogQHR5cGUgVGV4dHVyZVxuXHQgKi9cblx0dGhpcy50ZXh0dXJlID0gdGV4dHVyZTtcblxuXHQvKipcblx0ICogVGhlIGJsZW5kIG1vZGUgb2Ygc3ByaXRlLlxuXHQgKiBjdXJyZW50bHkgc3VwcG9ydHMgUElYSS5ibGVuZE1vZGVzLk5PUk1BTCBhbmQgUElYSS5ibGVuZE1vZGVzLlNDUkVFTlxuXHQgKlxuXHQgKiBAcHJvcGVydHkgYmxlbmRNb2RlXG5cdCAqIEB0eXBlIE51bWJlclxuXHQgKi9cblx0dGhpcy5ibGVuZE1vZGUgPSBQSVhJLmJsZW5kTW9kZXMuTk9STUFMO1xuXG5cdC8qKlxuXHQgKiBUaGUgd2lkdGggb2YgdGhlIHNwcml0ZSAodGhpcyBpcyBpbml0aWFsbHkgc2V0IGJ5IHRoZSB0ZXh0dXJlKVxuXHQgKlxuXHQgKiBAcHJvcGVydHkgX3dpZHRoXG5cdCAqIEB0eXBlIE51bWJlclxuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cblx0dGhpcy5fd2lkdGggPSAwO1xuXG5cdC8qKlxuXHQgKiBUaGUgaGVpZ2h0IG9mIHRoZSBzcHJpdGUgKHRoaXMgaXMgaW5pdGlhbGx5IHNldCBieSB0aGUgdGV4dHVyZSlcblx0ICpcblx0ICogQHByb3BlcnR5IF9oZWlnaHRcblx0ICogQHR5cGUgTnVtYmVyXG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuXHR0aGlzLl9oZWlnaHQgPSAwO1xuXG5cdGlmKHRleHR1cmUuYmFzZVRleHR1cmUuaGFzTG9hZGVkKVxuXHR7XG5cdFx0dGhpcy51cGRhdGVGcmFtZSA9IHRydWU7XG5cdH1cblx0ZWxzZVxuXHR7XG5cdFx0dGhpcy5vblRleHR1cmVVcGRhdGVCaW5kID0gdGhpcy5vblRleHR1cmVVcGRhdGUuYmluZCh0aGlzKTtcblx0XHR0aGlzLnRleHR1cmUuYWRkRXZlbnRMaXN0ZW5lciggJ3VwZGF0ZScsIHRoaXMub25UZXh0dXJlVXBkYXRlQmluZCApO1xuXHR9XG5cblx0dGhpcy5yZW5kZXJhYmxlID0gdHJ1ZTtcbn1cblxuLy8gY29uc3RydWN0b3JcblBJWEkuU3ByaXRlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIFBJWEkuRGlzcGxheU9iamVjdENvbnRhaW5lci5wcm90b3R5cGUgKTtcblBJWEkuU3ByaXRlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFBJWEkuU3ByaXRlO1xuXG4vKipcbiAqIFRoZSB3aWR0aCBvZiB0aGUgc3ByaXRlLCBzZXR0aW5nIHRoaXMgd2lsbCBhY3R1YWxseSBtb2RpZnkgdGhlIHNjYWxlIHRvIGFjaGVpdmUgdGhlIHZhbHVlIHNldFxuICpcbiAqIEBwcm9wZXJ0eSB3aWR0aFxuICogQHR5cGUgTnVtYmVyXG4gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShQSVhJLlNwcml0ZS5wcm90b3R5cGUsICd3aWR0aCcsIHtcbiAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zY2FsZS54ICogdGhpcy50ZXh0dXJlLmZyYW1lLndpZHRoO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgIFx0dGhpcy5zY2FsZS54ID0gdmFsdWUgLyB0aGlzLnRleHR1cmUuZnJhbWUud2lkdGhcbiAgICAgICAgdGhpcy5fd2lkdGggPSB2YWx1ZTtcbiAgICB9XG59KTtcblxuLyoqXG4gKiBUaGUgaGVpZ2h0IG9mIHRoZSBzcHJpdGUsIHNldHRpbmcgdGhpcyB3aWxsIGFjdHVhbGx5IG1vZGlmeSB0aGUgc2NhbGUgdG8gYWNoZWl2ZSB0aGUgdmFsdWUgc2V0XG4gKlxuICogQHByb3BlcnR5IGhlaWdodFxuICogQHR5cGUgTnVtYmVyXG4gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShQSVhJLlNwcml0ZS5wcm90b3R5cGUsICdoZWlnaHQnLCB7XG4gICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuICB0aGlzLnNjYWxlLnkgKiB0aGlzLnRleHR1cmUuZnJhbWUuaGVpZ2h0O1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgIFx0dGhpcy5zY2FsZS55ID0gdmFsdWUgLyB0aGlzLnRleHR1cmUuZnJhbWUuaGVpZ2h0XG4gICAgICAgIHRoaXMuX2hlaWdodCA9IHZhbHVlO1xuICAgIH1cbn0pO1xuXG4vKipcbiAqIFNldHMgdGhlIHRleHR1cmUgb2YgdGhlIHNwcml0ZVxuICpcbiAqIEBtZXRob2Qgc2V0VGV4dHVyZVxuICogQHBhcmFtIHRleHR1cmUge1RleHR1cmV9IFRoZSBQSVhJIHRleHR1cmUgdGhhdCBpcyBkaXNwbGF5ZWQgYnkgdGhlIHNwcml0ZVxuICovXG5QSVhJLlNwcml0ZS5wcm90b3R5cGUuc2V0VGV4dHVyZSA9IGZ1bmN0aW9uKHRleHR1cmUpXG57XG5cdC8vIHN0b3AgY3VycmVudCB0ZXh0dXJlO1xuXHRpZih0aGlzLnRleHR1cmUuYmFzZVRleHR1cmUgIT0gdGV4dHVyZS5iYXNlVGV4dHVyZSlcblx0e1xuXHRcdHRoaXMudGV4dHVyZUNoYW5nZSA9IHRydWU7XHRcblx0XHR0aGlzLnRleHR1cmUgPSB0ZXh0dXJlO1xuXHRcdFxuXHRcdGlmKHRoaXMuX19yZW5kZXJHcm91cClcblx0XHR7XG5cdFx0XHR0aGlzLl9fcmVuZGVyR3JvdXAudXBkYXRlVGV4dHVyZSh0aGlzKTtcblx0XHR9XG5cdH1cblx0ZWxzZVxuXHR7XG5cdFx0dGhpcy50ZXh0dXJlID0gdGV4dHVyZTtcblx0fVxuXHRcblx0dGhpcy51cGRhdGVGcmFtZSA9IHRydWU7XG59XG5cbi8qKlxuICogV2hlbiB0aGUgdGV4dHVyZSBpcyB1cGRhdGVkLCB0aGlzIGV2ZW50IHdpbGwgZmlyZSB0byB1cGRhdGUgdGhlIHNjYWxlIGFuZCBmcmFtZVxuICpcbiAqIEBtZXRob2Qgb25UZXh0dXJlVXBkYXRlXG4gKiBAcGFyYW0gZXZlbnRcbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuU3ByaXRlLnByb3RvdHlwZS5vblRleHR1cmVVcGRhdGUgPSBmdW5jdGlvbihldmVudClcbntcblx0Ly90aGlzLnRleHR1cmUucmVtb3ZlRXZlbnRMaXN0ZW5lciggJ3VwZGF0ZScsIHRoaXMub25UZXh0dXJlVXBkYXRlQmluZCApO1xuXHRcblx0Ly8gc28gaWYgX3dpZHRoIGlzIDAgdGhlbiB3aWR0aCB3YXMgbm90IHNldC4uXG5cdGlmKHRoaXMuX3dpZHRoKXRoaXMuc2NhbGUueCA9IHRoaXMuX3dpZHRoIC8gdGhpcy50ZXh0dXJlLmZyYW1lLndpZHRoO1xuXHRpZih0aGlzLl9oZWlnaHQpdGhpcy5zY2FsZS55ID0gdGhpcy5faGVpZ2h0IC8gdGhpcy50ZXh0dXJlLmZyYW1lLmhlaWdodDtcblx0XG5cdHRoaXMudXBkYXRlRnJhbWUgPSB0cnVlO1xufVxuXG4vLyBzb21lIGhlbHBlciBmdW5jdGlvbnMuLlxuXG4vKipcbiAqIFxuICogSGVscGVyIGZ1bmN0aW9uIHRoYXQgY3JlYXRlcyBhIHNwcml0ZSB0aGF0IHdpbGwgY29udGFpbiBhIHRleHR1cmUgZnJvbSB0aGUgVGV4dHVyZUNhY2hlIGJhc2VkIG9uIHRoZSBmcmFtZUlkXG4gKiBUaGUgZnJhbWUgaWRzIGFyZSBjcmVhdGVkIHdoZW4gYSBUZXh0dXJlIHBhY2tlciBmaWxlIGhhcyBiZWVuIGxvYWRlZFxuICpcbiAqIEBtZXRob2QgZnJvbUZyYW1lXG4gKiBAc3RhdGljXG4gKiBAcGFyYW0gZnJhbWVJZCB7U3RyaW5nfSBUaGUgZnJhbWUgSWQgb2YgdGhlIHRleHR1cmUgaW4gdGhlIGNhY2hlXG4gKiBAcmV0dXJuIHtTcHJpdGV9IEEgbmV3IFNwcml0ZSB1c2luZyBhIHRleHR1cmUgZnJvbSB0aGUgdGV4dHVyZSBjYWNoZSBtYXRjaGluZyB0aGUgZnJhbWVJZFxuICovXG5QSVhJLlNwcml0ZS5mcm9tRnJhbWUgPSBmdW5jdGlvbihmcmFtZUlkKVxue1xuXHR2YXIgdGV4dHVyZSA9IFBJWEkuVGV4dHVyZUNhY2hlW2ZyYW1lSWRdO1xuXHRpZighdGV4dHVyZSl0aHJvdyBuZXcgRXJyb3IoXCJUaGUgZnJhbWVJZCAnXCIrIGZyYW1lSWQgK1wiJyBkb2VzIG5vdCBleGlzdCBpbiB0aGUgdGV4dHVyZSBjYWNoZVwiICsgdGhpcyk7XG5cdHJldHVybiBuZXcgUElYSS5TcHJpdGUodGV4dHVyZSk7XG59XG5cbi8qKlxuICogXG4gKiBIZWxwZXIgZnVuY3Rpb24gdGhhdCBjcmVhdGVzIGEgc3ByaXRlIHRoYXQgd2lsbCBjb250YWluIGEgdGV4dHVyZSBiYXNlZCBvbiBhbiBpbWFnZSB1cmxcbiAqIElmIHRoZSBpbWFnZSBpcyBub3QgaW4gdGhlIHRleHR1cmUgY2FjaGUgaXQgd2lsbCBiZSBsb2FkZWRcbiAqXG4gKiBAbWV0aG9kIGZyb21JbWFnZVxuICogQHN0YXRpY1xuICogQHBhcmFtIGltYWdlSWQge1N0cmluZ30gVGhlIGltYWdlIHVybCBvZiB0aGUgdGV4dHVyZVxuICogQHJldHVybiB7U3ByaXRlfSBBIG5ldyBTcHJpdGUgdXNpbmcgYSB0ZXh0dXJlIGZyb20gdGhlIHRleHR1cmUgY2FjaGUgbWF0Y2hpbmcgdGhlIGltYWdlIGlkXG4gKi9cblBJWEkuU3ByaXRlLmZyb21JbWFnZSA9IGZ1bmN0aW9uKGltYWdlSWQpXG57XG5cdHZhciB0ZXh0dXJlID0gUElYSS5UZXh0dXJlLmZyb21JbWFnZShpbWFnZUlkKTtcblx0cmV0dXJuIG5ldyBQSVhJLlNwcml0ZSh0ZXh0dXJlKTtcbn1cblxuLyoqXG4gKiBAYXV0aG9yIE1hdCBHcm92ZXMgaHR0cDovL21hdGdyb3Zlcy5jb20vIEBEb29ybWF0MjNcbiAqL1xuXG4vKipcbiAqIEEgTW92aWVDbGlwIGlzIGEgc2ltcGxlIHdheSB0byBkaXNwbGF5IGFuIGFuaW1hdGlvbiBkZXBpY3RlZCBieSBhIGxpc3Qgb2YgdGV4dHVyZXMuXG4gKlxuICogQGNsYXNzIE1vdmllQ2xpcFxuICogQGV4dGVuZHMgU3ByaXRlXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB0ZXh0dXJlcyB7QXJyYXk8VGV4dHVyZT59IGFuIGFycmF5IG9mIHtUZXh0dXJlfSBvYmplY3RzIHRoYXQgbWFrZSB1cCB0aGUgYW5pbWF0aW9uXG4gKi9cblBJWEkuTW92aWVDbGlwID0gZnVuY3Rpb24odGV4dHVyZXMpXG57XG5cdFBJWEkuU3ByaXRlLmNhbGwodGhpcywgdGV4dHVyZXNbMF0pO1xuXG5cdC8qKlxuXHQgKiBUaGUgYXJyYXkgb2YgdGV4dHVyZXMgdGhhdCBtYWtlIHVwIHRoZSBhbmltYXRpb25cblx0ICpcblx0ICogQHByb3BlcnR5IHRleHR1cmVzXG5cdCAqIEB0eXBlIEFycmF5XG5cdCAqL1xuXHR0aGlzLnRleHR1cmVzID0gdGV4dHVyZXM7XG5cblx0LyoqXG5cdCAqIFRoZSBzcGVlZCB0aGF0IHRoZSBNb3ZpZUNsaXAgd2lsbCBwbGF5IGF0LiBIaWdoZXIgaXMgZmFzdGVyLCBsb3dlciBpcyBzbG93ZXJcblx0ICpcblx0ICogQHByb3BlcnR5IGFuaW1hdGlvblNwZWVkXG5cdCAqIEB0eXBlIE51bWJlclxuXHQgKiBAZGVmYXVsdCAxXG5cdCAqL1xuXHR0aGlzLmFuaW1hdGlvblNwZWVkID0gMTtcblxuXHQvKipcblx0ICogV2hldGhlciBvciBub3QgdGhlIG1vdmllIGNsaXAgcmVwZWF0cyBhZnRlciBwbGF5aW5nLlxuXHQgKlxuXHQgKiBAcHJvcGVydHkgbG9vcFxuXHQgKiBAdHlwZSBCb29sZWFuXG5cdCAqIEBkZWZhdWx0IHRydWVcblx0ICovXG5cdHRoaXMubG9vcCA9IHRydWU7XG5cblx0LyoqXG5cdCAqIEZ1bmN0aW9uIHRvIGNhbGwgd2hlbiBhIE1vdmllQ2xpcCBmaW5pc2hlcyBwbGF5aW5nXG5cdCAqXG5cdCAqIEBwcm9wZXJ0eSBvbkNvbXBsZXRlXG5cdCAqIEB0eXBlIEZ1bmN0aW9uXG5cdCAqL1xuXHR0aGlzLm9uQ29tcGxldGUgPSBudWxsO1xuXG5cdC8qKlxuXHQgKiBbcmVhZC1vbmx5XSBUaGUgaW5kZXggTW92aWVDbGlwcyBjdXJyZW50IGZyYW1lICh0aGlzIG1heSBub3QgaGF2ZSB0byBiZSBhIHdob2xlIG51bWJlcilcblx0ICpcblx0ICogQHByb3BlcnR5IGN1cnJlbnRGcmFtZVxuXHQgKiBAdHlwZSBOdW1iZXJcblx0ICogQGRlZmF1bHQgMFxuXHQgKiBAcmVhZE9ubHlcblx0ICovXG5cdHRoaXMuY3VycmVudEZyYW1lID0gMDtcblxuXHQvKipcblx0ICogW3JlYWQtb25seV0gSW5kaWNhdGVzIGlmIHRoZSBNb3ZpZUNsaXAgaXMgY3VycmVudGx5IHBsYXlpbmdcblx0ICpcblx0ICogQHByb3BlcnR5IHBsYXlpbmdcblx0ICogQHR5cGUgQm9vbGVhblxuXHQgKiBAcmVhZE9ubHlcblx0ICovXG5cdHRoaXMucGxheWluZyA9IGZhbHNlO1xufVxuXG4vLyBjb25zdHJ1Y3RvclxuUElYSS5Nb3ZpZUNsaXAucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggUElYSS5TcHJpdGUucHJvdG90eXBlICk7XG5QSVhJLk1vdmllQ2xpcC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBQSVhJLk1vdmllQ2xpcDtcblxuLyoqXG4qIFtyZWFkLW9ubHldIHRvdGFsRnJhbWVzIGlzIHRoZSB0b3RhbCBudW1iZXIgb2YgZnJhbWVzIGluIHRoZSBNb3ZpZUNsaXAuIFRoaXMgaXMgdGhlIHNhbWUgYXMgbnVtYmVyIG9mIHRleHR1cmVzXG4qIGFzc2lnbmVkIHRvIHRoZSBNb3ZpZUNsaXAuXG4qXG4qIEBwcm9wZXJ0eSB0b3RhbEZyYW1lc1xuKiBAdHlwZSBOdW1iZXJcbiogQGRlZmF1bHQgMFxuKiBAcmVhZE9ubHlcbiovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoIFBJWEkuTW92aWVDbGlwLnByb3RvdHlwZSwgJ3RvdGFsRnJhbWVzJywge1xuXHRnZXQ6IGZ1bmN0aW9uKCkge1xuXG5cdFx0cmV0dXJuIHRoaXMudGV4dHVyZXMubGVuZ3RoO1xuXHR9XG59KTtcblxuXG4vKipcbiAqIFN0b3BzIHRoZSBNb3ZpZUNsaXBcbiAqXG4gKiBAbWV0aG9kIHN0b3BcbiAqL1xuUElYSS5Nb3ZpZUNsaXAucHJvdG90eXBlLnN0b3AgPSBmdW5jdGlvbigpXG57XG5cdHRoaXMucGxheWluZyA9IGZhbHNlO1xufVxuXG4vKipcbiAqIFBsYXlzIHRoZSBNb3ZpZUNsaXBcbiAqXG4gKiBAbWV0aG9kIHBsYXlcbiAqL1xuUElYSS5Nb3ZpZUNsaXAucHJvdG90eXBlLnBsYXkgPSBmdW5jdGlvbigpXG57XG5cdHRoaXMucGxheWluZyA9IHRydWU7XG59XG5cbi8qKlxuICogU3RvcHMgdGhlIE1vdmllQ2xpcCBhbmQgZ29lcyB0byBhIHNwZWNpZmljIGZyYW1lXG4gKlxuICogQG1ldGhvZCBnb3RvQW5kU3RvcFxuICogQHBhcmFtIGZyYW1lTnVtYmVyIHtOdW1iZXJ9IGZyYW1lIGluZGV4IHRvIHN0b3AgYXRcbiAqL1xuUElYSS5Nb3ZpZUNsaXAucHJvdG90eXBlLmdvdG9BbmRTdG9wID0gZnVuY3Rpb24oZnJhbWVOdW1iZXIpXG57XG5cdHRoaXMucGxheWluZyA9IGZhbHNlO1xuXHR0aGlzLmN1cnJlbnRGcmFtZSA9IGZyYW1lTnVtYmVyO1xuXHR2YXIgcm91bmQgPSAodGhpcy5jdXJyZW50RnJhbWUgKyAwLjUpIHwgMDtcblx0dGhpcy5zZXRUZXh0dXJlKHRoaXMudGV4dHVyZXNbcm91bmQgJSB0aGlzLnRleHR1cmVzLmxlbmd0aF0pO1xufVxuXG4vKipcbiAqIEdvZXMgdG8gYSBzcGVjaWZpYyBmcmFtZSBhbmQgYmVnaW5zIHBsYXlpbmcgdGhlIE1vdmllQ2xpcFxuICpcbiAqIEBtZXRob2QgZ290b0FuZFBsYXlcbiAqIEBwYXJhbSBmcmFtZU51bWJlciB7TnVtYmVyfSBmcmFtZSBpbmRleCB0byBzdGFydCBhdFxuICovXG5QSVhJLk1vdmllQ2xpcC5wcm90b3R5cGUuZ290b0FuZFBsYXkgPSBmdW5jdGlvbihmcmFtZU51bWJlcilcbntcblx0dGhpcy5jdXJyZW50RnJhbWUgPSBmcmFtZU51bWJlcjtcblx0dGhpcy5wbGF5aW5nID0gdHJ1ZTtcbn1cblxuLypcbiAqIFVwZGF0ZXMgdGhlIG9iamVjdCB0cmFuc2Zvcm0gZm9yIHJlbmRlcmluZ1xuICpcbiAqIEBtZXRob2QgdXBkYXRlVHJhbnNmb3JtXG4gKiBAcHJpdmF0ZVxuICovXG5QSVhJLk1vdmllQ2xpcC5wcm90b3R5cGUudXBkYXRlVHJhbnNmb3JtID0gZnVuY3Rpb24oKVxue1xuXHRQSVhJLlNwcml0ZS5wcm90b3R5cGUudXBkYXRlVHJhbnNmb3JtLmNhbGwodGhpcyk7XG5cblx0aWYoIXRoaXMucGxheWluZylyZXR1cm47XG5cblx0dGhpcy5jdXJyZW50RnJhbWUgKz0gdGhpcy5hbmltYXRpb25TcGVlZDtcblxuXHR2YXIgcm91bmQgPSAodGhpcy5jdXJyZW50RnJhbWUgKyAwLjUpIHwgMDtcblxuXHRpZih0aGlzLmxvb3AgfHwgcm91bmQgPCB0aGlzLnRleHR1cmVzLmxlbmd0aClcblx0e1xuXHRcdHRoaXMuc2V0VGV4dHVyZSh0aGlzLnRleHR1cmVzW3JvdW5kICUgdGhpcy50ZXh0dXJlcy5sZW5ndGhdKTtcblx0fVxuXHRlbHNlIGlmKHJvdW5kID49IHRoaXMudGV4dHVyZXMubGVuZ3RoKVxuXHR7XG5cdFx0dGhpcy5nb3RvQW5kU3RvcCh0aGlzLnRleHR1cmVzLmxlbmd0aCAtIDEpO1xuXHRcdGlmKHRoaXMub25Db21wbGV0ZSlcblx0XHR7XG5cdFx0XHR0aGlzLm9uQ29tcGxldGUoKTtcblx0XHR9XG5cdH1cbn1cbi8qKlxuICogQGF1dGhvciBNYXQgR3JvdmVzIGh0dHA6Ly9tYXRncm92ZXMuY29tLyBARG9vcm1hdDIzXG4gKi9cblxuXG5cblBJWEkuRmlsdGVyQmxvY2sgPSBmdW5jdGlvbigpXG57XG5cdHRoaXMudmlzaWJsZSA9IHRydWU7XG5cdHRoaXMucmVuZGVyYWJsZSA9IHRydWU7XG59XG4vKipcbiAqIEBhdXRob3IgTWF0IEdyb3ZlcyBodHRwOi8vbWF0Z3JvdmVzLmNvbS8gQERvb3JtYXQyM1xuICovXG5cbi8qKlxuICogQSBUZXh0IE9iamVjdCB3aWxsIGNyZWF0ZSBhIGxpbmUocykgb2YgdGV4dCB0byBzcGxpdCBhIGxpbmUgeW91IGNhbiB1c2UgXCJcXG5cIlxuICpcbiAqIEBjbGFzcyBUZXh0XG4gKiBAZXh0ZW5kcyBTcHJpdGVcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHRleHQge1N0cmluZ30gVGhlIGNvcHkgdGhhdCB5b3Ugd291bGQgbGlrZSB0aGUgdGV4dCB0byBkaXNwbGF5XG4gKiBAcGFyYW0gW3N0eWxlXSB7T2JqZWN0fSBUaGUgc3R5bGUgcGFyYW1ldGVyc1xuICogQHBhcmFtIFtzdHlsZS5mb250XSB7U3RyaW5nfSBkZWZhdWx0IFwiYm9sZCAyMHB0IEFyaWFsXCIgVGhlIHN0eWxlIGFuZCBzaXplIG9mIHRoZSBmb250XG4gKiBAcGFyYW0gW3N0eWxlLmZpbGw9XCJibGFja1wiXSB7T2JqZWN0fSBBIGNhbnZhcyBmaWxsc3R5bGUgdGhhdCB3aWxsIGJlIHVzZWQgb24gdGhlIHRleHQgZWcgXCJyZWRcIiwgXCIjMDBGRjAwXCJcbiAqIEBwYXJhbSBbc3R5bGUuYWxpZ249XCJsZWZ0XCJdIHtTdHJpbmd9IEFuIGFsaWdubWVudCBvZiB0aGUgbXVsdGlsaW5lIHRleHQgKFwibGVmdFwiLCBcImNlbnRlclwiIG9yIFwicmlnaHRcIilcbiAqIEBwYXJhbSBbc3R5bGUuc3Ryb2tlXSB7U3RyaW5nfSBBIGNhbnZhcyBmaWxsc3R5bGUgdGhhdCB3aWxsIGJlIHVzZWQgb24gdGhlIHRleHQgc3Ryb2tlIGVnIFwiYmx1ZVwiLCBcIiNGQ0ZGMDBcIlxuICogQHBhcmFtIFtzdHlsZS5zdHJva2VUaGlja25lc3M9MF0ge051bWJlcn0gQSBudW1iZXIgdGhhdCByZXByZXNlbnRzIHRoZSB0aGlja25lc3Mgb2YgdGhlIHN0cm9rZS4gRGVmYXVsdCBpcyAwIChubyBzdHJva2UpXG4gKiBAcGFyYW0gW3N0eWxlLndvcmRXcmFwPWZhbHNlXSB7Qm9vbGVhbn0gSW5kaWNhdGVzIGlmIHdvcmQgd3JhcCBzaG91bGQgYmUgdXNlZFxuICogQHBhcmFtIFtzdHlsZS53b3JkV3JhcFdpZHRoPTEwMF0ge051bWJlcn0gVGhlIHdpZHRoIGF0IHdoaWNoIHRleHQgd2lsbCB3cmFwXG4gKi9cblBJWEkuVGV4dCA9IGZ1bmN0aW9uKHRleHQsIHN0eWxlKVxue1xuICAgIHRoaXMuY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcbiAgICB0aGlzLmNvbnRleHQgPSB0aGlzLmNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XG4gICAgUElYSS5TcHJpdGUuY2FsbCh0aGlzLCBQSVhJLlRleHR1cmUuZnJvbUNhbnZhcyh0aGlzLmNhbnZhcykpO1xuXG4gICAgdGhpcy5zZXRUZXh0KHRleHQpO1xuICAgIHRoaXMuc2V0U3R5bGUoc3R5bGUpO1xuXG4gICAgdGhpcy51cGRhdGVUZXh0KCk7XG4gICAgdGhpcy5kaXJ0eSA9IGZhbHNlO1xufTtcblxuLy8gY29uc3RydWN0b3JcblBJWEkuVGV4dC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFBJWEkuU3ByaXRlLnByb3RvdHlwZSk7XG5QSVhJLlRleHQucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gUElYSS5UZXh0O1xuXG4vKipcbiAqIFNldCB0aGUgc3R5bGUgb2YgdGhlIHRleHRcbiAqXG4gKiBAbWV0aG9kIHNldFN0eWxlXG4gKiBAcGFyYW0gW3N0eWxlXSB7T2JqZWN0fSBUaGUgc3R5bGUgcGFyYW1ldGVyc1xuICogQHBhcmFtIFtzdHlsZS5mb250PVwiYm9sZCAyMHB0IEFyaWFsXCJdIHtTdHJpbmd9IFRoZSBzdHlsZSBhbmQgc2l6ZSBvZiB0aGUgZm9udFxuICogQHBhcmFtIFtzdHlsZS5maWxsPVwiYmxhY2tcIl0ge09iamVjdH0gQSBjYW52YXMgZmlsbHN0eWxlIHRoYXQgd2lsbCBiZSB1c2VkIG9uIHRoZSB0ZXh0IGVnIFwicmVkXCIsIFwiIzAwRkYwMFwiXG4gKiBAcGFyYW0gW3N0eWxlLmFsaWduPVwibGVmdFwiXSB7U3RyaW5nfSBBbiBhbGlnbm1lbnQgb2YgdGhlIG11bHRpbGluZSB0ZXh0IChcImxlZnRcIiwgXCJjZW50ZXJcIiBvciBcInJpZ2h0XCIpXG4gKiBAcGFyYW0gW3N0eWxlLnN0cm9rZT1cImJsYWNrXCJdIHtTdHJpbmd9IEEgY2FudmFzIGZpbGxzdHlsZSB0aGF0IHdpbGwgYmUgdXNlZCBvbiB0aGUgdGV4dCBzdHJva2UgZWcgXCJibHVlXCIsIFwiI0ZDRkYwMFwiXG4gKiBAcGFyYW0gW3N0eWxlLnN0cm9rZVRoaWNrbmVzcz0wXSB7TnVtYmVyfSBBIG51bWJlciB0aGF0IHJlcHJlc2VudHMgdGhlIHRoaWNrbmVzcyBvZiB0aGUgc3Ryb2tlLiBEZWZhdWx0IGlzIDAgKG5vIHN0cm9rZSlcbiAqIEBwYXJhbSBbc3R5bGUud29yZFdyYXA9ZmFsc2VdIHtCb29sZWFufSBJbmRpY2F0ZXMgaWYgd29yZCB3cmFwIHNob3VsZCBiZSB1c2VkXG4gKiBAcGFyYW0gW3N0eWxlLndvcmRXcmFwV2lkdGg9MTAwXSB7TnVtYmVyfSBUaGUgd2lkdGggYXQgd2hpY2ggdGV4dCB3aWxsIHdyYXBcbiAqL1xuUElYSS5UZXh0LnByb3RvdHlwZS5zZXRTdHlsZSA9IGZ1bmN0aW9uKHN0eWxlKVxue1xuICAgIHN0eWxlID0gc3R5bGUgfHwge307XG4gICAgc3R5bGUuZm9udCA9IHN0eWxlLmZvbnQgfHwgXCJib2xkIDIwcHQgQXJpYWxcIjtcbiAgICBzdHlsZS5maWxsID0gc3R5bGUuZmlsbCB8fCBcImJsYWNrXCI7XG4gICAgc3R5bGUuYWxpZ24gPSBzdHlsZS5hbGlnbiB8fCBcImxlZnRcIjtcbiAgICBzdHlsZS5zdHJva2UgPSBzdHlsZS5zdHJva2UgfHwgXCJibGFja1wiOyAvL3Byb3ZpZGUgYSBkZWZhdWx0LCBzZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9Hb29kQm95RGlnaXRhbC9waXhpLmpzL2lzc3Vlcy8xMzZcbiAgICBzdHlsZS5zdHJva2VUaGlja25lc3MgPSBzdHlsZS5zdHJva2VUaGlja25lc3MgfHwgMDtcbiAgICBzdHlsZS53b3JkV3JhcCA9IHN0eWxlLndvcmRXcmFwIHx8IGZhbHNlO1xuICAgIHN0eWxlLndvcmRXcmFwV2lkdGggPSBzdHlsZS53b3JkV3JhcFdpZHRoIHx8IDEwMDtcbiAgICB0aGlzLnN0eWxlID0gc3R5bGU7XG4gICAgdGhpcy5kaXJ0eSA9IHRydWU7XG59O1xuXG4vKipcbiAqIFNldCB0aGUgY29weSBmb3IgdGhlIHRleHQgb2JqZWN0LiBUbyBzcGxpdCBhIGxpbmUgeW91IGNhbiB1c2UgXCJcXG5cIlxuICpcbiAqIEBtZXRob3Mgc2V0VGV4dFxuICogQHBhcmFtIHtTdHJpbmd9IHRleHQgVGhlIGNvcHkgdGhhdCB5b3Ugd291bGQgbGlrZSB0aGUgdGV4dCB0byBkaXNwbGF5XG4gKi9cblBJWEkuVGV4dC5wcm90b3R5cGUuc2V0VGV4dCA9IGZ1bmN0aW9uKHRleHQpXG57XG4gICAgdGhpcy50ZXh0ID0gdGV4dC50b1N0cmluZygpIHx8IFwiIFwiO1xuICAgIHRoaXMuZGlydHkgPSB0cnVlO1xufTtcblxuLyoqXG4gKiBSZW5kZXJzIHRleHRcbiAqXG4gKiBAbWV0aG9kIHVwZGF0ZVRleHRcbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuVGV4dC5wcm90b3R5cGUudXBkYXRlVGV4dCA9IGZ1bmN0aW9uKClcbntcblx0dGhpcy5jb250ZXh0LmZvbnQgPSB0aGlzLnN0eWxlLmZvbnQ7XG5cblx0dmFyIG91dHB1dFRleHQgPSB0aGlzLnRleHQ7XG5cblx0Ly8gd29yZCB3cmFwXG5cdC8vIHByZXNlcnZlIG9yaWdpbmFsIHRleHRcblx0aWYodGhpcy5zdHlsZS53b3JkV3JhcClvdXRwdXRUZXh0ID0gdGhpcy53b3JkV3JhcCh0aGlzLnRleHQpO1xuXG5cdC8vc3BsaXQgdGV4dCBpbnRvIGxpbmVzXG5cdHZhciBsaW5lcyA9IG91dHB1dFRleHQuc3BsaXQoLyg/OlxcclxcbnxcXHJ8XFxuKS8pO1xuXG5cdC8vY2FsY3VsYXRlIHRleHQgd2lkdGhcblx0dmFyIGxpbmVXaWR0aHMgPSBbXTtcblx0dmFyIG1heExpbmVXaWR0aCA9IDA7XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspXG5cdHtcblx0XHR2YXIgbGluZVdpZHRoID0gdGhpcy5jb250ZXh0Lm1lYXN1cmVUZXh0KGxpbmVzW2ldKS53aWR0aDtcblx0XHRsaW5lV2lkdGhzW2ldID0gbGluZVdpZHRoO1xuXHRcdG1heExpbmVXaWR0aCA9IE1hdGgubWF4KG1heExpbmVXaWR0aCwgbGluZVdpZHRoKTtcblx0fVxuXHR0aGlzLmNhbnZhcy53aWR0aCA9IG1heExpbmVXaWR0aCArIHRoaXMuc3R5bGUuc3Ryb2tlVGhpY2tuZXNzO1xuXG5cdC8vY2FsY3VsYXRlIHRleHQgaGVpZ2h0XG5cdHZhciBsaW5lSGVpZ2h0ID0gdGhpcy5kZXRlcm1pbmVGb250SGVpZ2h0KFwiZm9udDogXCIgKyB0aGlzLnN0eWxlLmZvbnQgICsgXCI7XCIpICsgdGhpcy5zdHlsZS5zdHJva2VUaGlja25lc3M7XG5cdHRoaXMuY2FudmFzLmhlaWdodCA9IGxpbmVIZWlnaHQgKiBsaW5lcy5sZW5ndGg7XG5cblx0Ly9zZXQgY2FudmFzIHRleHQgc3R5bGVzXG5cdHRoaXMuY29udGV4dC5maWxsU3R5bGUgPSB0aGlzLnN0eWxlLmZpbGw7XG5cdHRoaXMuY29udGV4dC5mb250ID0gdGhpcy5zdHlsZS5mb250O1xuXG5cdHRoaXMuY29udGV4dC5zdHJva2VTdHlsZSA9IHRoaXMuc3R5bGUuc3Ryb2tlO1xuXHR0aGlzLmNvbnRleHQubGluZVdpZHRoID0gdGhpcy5zdHlsZS5zdHJva2VUaGlja25lc3M7XG5cblx0dGhpcy5jb250ZXh0LnRleHRCYXNlbGluZSA9IFwidG9wXCI7XG5cblx0Ly9kcmF3IGxpbmVzIGxpbmUgYnkgbGluZVxuXHRmb3IgKGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspXG5cdHtcblx0XHR2YXIgbGluZVBvc2l0aW9uID0gbmV3IFBJWEkuUG9pbnQodGhpcy5zdHlsZS5zdHJva2VUaGlja25lc3MgLyAyLCB0aGlzLnN0eWxlLnN0cm9rZVRoaWNrbmVzcyAvIDIgKyBpICogbGluZUhlaWdodCk7XG5cblx0XHRpZih0aGlzLnN0eWxlLmFsaWduID09IFwicmlnaHRcIilcblx0XHR7XG5cdFx0XHRsaW5lUG9zaXRpb24ueCArPSBtYXhMaW5lV2lkdGggLSBsaW5lV2lkdGhzW2ldO1xuXHRcdH1cblx0XHRlbHNlIGlmKHRoaXMuc3R5bGUuYWxpZ24gPT0gXCJjZW50ZXJcIilcblx0XHR7XG5cdFx0XHRsaW5lUG9zaXRpb24ueCArPSAobWF4TGluZVdpZHRoIC0gbGluZVdpZHRoc1tpXSkgLyAyO1xuXHRcdH1cblxuXHRcdGlmKHRoaXMuc3R5bGUuc3Ryb2tlICYmIHRoaXMuc3R5bGUuc3Ryb2tlVGhpY2tuZXNzKVxuXHRcdHtcblx0XHRcdHRoaXMuY29udGV4dC5zdHJva2VUZXh0KGxpbmVzW2ldLCBsaW5lUG9zaXRpb24ueCwgbGluZVBvc2l0aW9uLnkpO1xuXHRcdH1cblxuXHRcdGlmKHRoaXMuc3R5bGUuZmlsbClcblx0XHR7XG5cdFx0XHR0aGlzLmNvbnRleHQuZmlsbFRleHQobGluZXNbaV0sIGxpbmVQb3NpdGlvbi54LCBsaW5lUG9zaXRpb24ueSk7XG5cdFx0fVxuXHR9XG5cbiAgICB0aGlzLnVwZGF0ZVRleHR1cmUoKTtcbn07XG5cbi8qKlxuICogVXBkYXRlcyB0ZXh0dXJlIHNpemUgYmFzZWQgb24gY2FudmFzIHNpemVcbiAqXG4gKiBAbWV0aG9kIHVwZGF0ZVRleHR1cmVcbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuVGV4dC5wcm90b3R5cGUudXBkYXRlVGV4dHVyZSA9IGZ1bmN0aW9uKClcbntcbiAgICB0aGlzLnRleHR1cmUuYmFzZVRleHR1cmUud2lkdGggPSB0aGlzLmNhbnZhcy53aWR0aDtcbiAgICB0aGlzLnRleHR1cmUuYmFzZVRleHR1cmUuaGVpZ2h0ID0gdGhpcy5jYW52YXMuaGVpZ2h0O1xuICAgIHRoaXMudGV4dHVyZS5mcmFtZS53aWR0aCA9IHRoaXMuY2FudmFzLndpZHRoO1xuICAgIHRoaXMudGV4dHVyZS5mcmFtZS5oZWlnaHQgPSB0aGlzLmNhbnZhcy5oZWlnaHQ7XG5cbiAgXHR0aGlzLl93aWR0aCA9IHRoaXMuY2FudmFzLndpZHRoO1xuICAgIHRoaXMuX2hlaWdodCA9IHRoaXMuY2FudmFzLmhlaWdodDtcblxuICAgIFBJWEkudGV4dHVyZXNUb1VwZGF0ZS5wdXNoKHRoaXMudGV4dHVyZS5iYXNlVGV4dHVyZSk7XG59O1xuXG4vKipcbiAqIFVwZGF0ZXMgdGhlIHRyYW5zZm9yIG9mIHRoaXMgb2JqZWN0XG4gKlxuICogQG1ldGhvZCB1cGRhdGVUcmFuc2Zvcm1cbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuVGV4dC5wcm90b3R5cGUudXBkYXRlVHJhbnNmb3JtID0gZnVuY3Rpb24oKVxue1xuXHRpZih0aGlzLmRpcnR5KVxuXHR7XG5cdFx0dGhpcy51cGRhdGVUZXh0KCk7XG5cdFx0dGhpcy5kaXJ0eSA9IGZhbHNlO1xuXHR9XG5cblx0UElYSS5TcHJpdGUucHJvdG90eXBlLnVwZGF0ZVRyYW5zZm9ybS5jYWxsKHRoaXMpO1xufTtcblxuLypcbiAqIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS91c2Vycy8zNDQ0MS9lbGxpc2JiZW5cbiAqIGdyZWF0IHNvbHV0aW9uIHRvIHRoZSBwcm9ibGVtIVxuICpcbiAqIEBtZXRob2QgZGV0ZXJtaW5lRm9udEhlaWdodFxuICogQHBhcmFtIGZvbnRTdHlsZSB7T2JqZWN0fVxuICogQHByaXZhdGVcbiAqL1xuUElYSS5UZXh0LnByb3RvdHlwZS5kZXRlcm1pbmVGb250SGVpZ2h0ID0gZnVuY3Rpb24oZm9udFN0eWxlKVxue1xuXHQvLyBidWlsZCBhIGxpdHRsZSByZWZlcmVuY2UgZGljdGlvbmFyeSBzbyBpZiB0aGUgZm9udCBzdHlsZSBoYXMgYmVlbiB1c2VkIHJldHVybiBhXG5cdC8vIGNhY2hlZCB2ZXJzaW9uLi4uXG5cdHZhciByZXN1bHQgPSBQSVhJLlRleHQuaGVpZ2h0Q2FjaGVbZm9udFN0eWxlXTtcblxuXHRpZighcmVzdWx0KVxuXHR7XG5cdFx0dmFyIGJvZHkgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImJvZHlcIilbMF07XG5cdFx0dmFyIGR1bW15ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblx0XHR2YXIgZHVtbXlUZXh0ID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoXCJNXCIpO1xuXHRcdGR1bW15LmFwcGVuZENoaWxkKGR1bW15VGV4dCk7XG5cdFx0ZHVtbXkuc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgZm9udFN0eWxlICsgJztwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtsZWZ0OjAnKTtcblx0XHRib2R5LmFwcGVuZENoaWxkKGR1bW15KTtcblxuXHRcdHJlc3VsdCA9IGR1bW15Lm9mZnNldEhlaWdodDtcblx0XHRQSVhJLlRleHQuaGVpZ2h0Q2FjaGVbZm9udFN0eWxlXSA9IHJlc3VsdDtcblxuXHRcdGJvZHkucmVtb3ZlQ2hpbGQoZHVtbXkpO1xuXHR9XG5cblx0cmV0dXJuIHJlc3VsdDtcbn07XG5cbi8qKlxuICogQXBwbGllcyBuZXdsaW5lcyB0byBhIHN0cmluZyB0byBoYXZlIGl0IG9wdGltYWxseSBmaXQgaW50byB0aGUgaG9yaXpvbnRhbFxuICogYm91bmRzIHNldCBieSB0aGUgVGV4dCBvYmplY3QncyB3b3JkV3JhcFdpZHRoIHByb3BlcnR5LlxuICpcbiAqIEBtZXRob2Qgd29yZFdyYXBcbiAqIEBwYXJhbSB0ZXh0IHtTdHJpbmd9XG4gKiBAcHJpdmF0ZVxuICovXG5QSVhJLlRleHQucHJvdG90eXBlLndvcmRXcmFwID0gZnVuY3Rpb24odGV4dClcbntcblx0Ly8gR3JlZWR5IHdyYXBwaW5nIGFsZ29yaXRobSB0aGF0IHdpbGwgd3JhcCB3b3JkcyBhcyB0aGUgbGluZSBncm93cyBsb25nZXJcblx0Ly8gdGhhbiBpdHMgaG9yaXpvbnRhbCBib3VuZHMuXG5cdHZhciByZXN1bHQgPSBcIlwiO1xuXHR2YXIgbGluZXMgPSB0ZXh0LnNwbGl0KFwiXFxuXCIpO1xuXHRmb3IgKHZhciBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKVxuXHR7XG5cdFx0dmFyIHNwYWNlTGVmdCA9IHRoaXMuc3R5bGUud29yZFdyYXBXaWR0aDtcblx0XHR2YXIgd29yZHMgPSBsaW5lc1tpXS5zcGxpdChcIiBcIik7XG5cdFx0Zm9yICh2YXIgaiA9IDA7IGogPCB3b3Jkcy5sZW5ndGg7IGorKylcblx0XHR7XG5cdFx0XHR2YXIgd29yZFdpZHRoID0gdGhpcy5jb250ZXh0Lm1lYXN1cmVUZXh0KHdvcmRzW2pdKS53aWR0aDtcblx0XHRcdHZhciB3b3JkV2lkdGhXaXRoU3BhY2UgPSB3b3JkV2lkdGggKyB0aGlzLmNvbnRleHQubWVhc3VyZVRleHQoXCIgXCIpLndpZHRoO1xuXHRcdFx0aWYod29yZFdpZHRoV2l0aFNwYWNlID4gc3BhY2VMZWZ0KVxuXHRcdFx0e1xuXHRcdFx0XHQvLyBTa2lwIHByaW50aW5nIHRoZSBuZXdsaW5lIGlmIGl0J3MgdGhlIGZpcnN0IHdvcmQgb2YgdGhlIGxpbmUgdGhhdCBpc1xuXHRcdFx0XHQvLyBncmVhdGVyIHRoYW4gdGhlIHdvcmQgd3JhcCB3aWR0aC5cblx0XHRcdFx0aWYoaiA+IDApXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRyZXN1bHQgKz0gXCJcXG5cIjtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXN1bHQgKz0gd29yZHNbal0gKyBcIiBcIjtcblx0XHRcdFx0c3BhY2VMZWZ0ID0gdGhpcy5zdHlsZS53b3JkV3JhcFdpZHRoIC0gd29yZFdpZHRoO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZVxuXHRcdFx0e1xuXHRcdFx0XHRzcGFjZUxlZnQgLT0gd29yZFdpZHRoV2l0aFNwYWNlO1xuXHRcdFx0XHRyZXN1bHQgKz0gd29yZHNbal0gKyBcIiBcIjtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmVzdWx0ICs9IFwiXFxuXCI7XG5cdH1cblx0cmV0dXJuIHJlc3VsdDtcbn07XG5cbi8qKlxuICogRGVzdHJveXMgdGhpcyB0ZXh0IG9iamVjdFxuICpcbiAqIEBtZXRob2QgZGVzdHJveVxuICogQHBhcmFtIGRlc3Ryb3lUZXh0dXJlIHtCb29sZWFufVxuICovXG5QSVhJLlRleHQucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbihkZXN0cm95VGV4dHVyZSlcbntcblx0aWYoZGVzdHJveVRleHR1cmUpXG5cdHtcblx0XHR0aGlzLnRleHR1cmUuZGVzdHJveSgpO1xuXHR9XG5cbn07XG5cblBJWEkuVGV4dC5oZWlnaHRDYWNoZSA9IHt9O1xuXG4vKipcbiAqIEBhdXRob3IgTWF0IEdyb3ZlcyBodHRwOi8vbWF0Z3JvdmVzLmNvbS8gQERvb3JtYXQyM1xuICovXG5cbi8qKlxuICogQSBUZXh0IE9iamVjdCB3aWxsIGNyZWF0ZSBhIGxpbmUocykgb2YgdGV4dCB1c2luZyBiaXRtYXAgZm9udC4gVG8gc3BsaXQgYSBsaW5lIHlvdSBjYW4gdXNlIFwiXFxuXCIsIFwiXFxyXCIgb3IgXCJcXHJcXG5cIlxuICogWW91IGNhbiBnZW5lcmF0ZSB0aGUgZm50IGZpbGVzIHVzaW5nXG4gKiBodHRwOi8vd3d3LmFuZ2VsY29kZS5jb20vcHJvZHVjdHMvYm1mb250LyBmb3Igd2luZG93cyBvclxuICogaHR0cDovL3d3dy5ibWdseXBoLmNvbS8gZm9yIG1hYy5cbiAqXG4gKiBAY2xhc3MgQml0bWFwVGV4dFxuICogQGV4dGVuZHMgRGlzcGxheU9iamVjdENvbnRhaW5lclxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0gdGV4dCB7U3RyaW5nfSBUaGUgY29weSB0aGF0IHlvdSB3b3VsZCBsaWtlIHRoZSB0ZXh0IHRvIGRpc3BsYXlcbiAqIEBwYXJhbSBzdHlsZSB7T2JqZWN0fSBUaGUgc3R5bGUgcGFyYW1ldGVyc1xuICogQHBhcmFtIHN0eWxlLmZvbnQge1N0cmluZ30gVGhlIHNpemUgKG9wdGlvbmFsKSBhbmQgYml0bWFwIGZvbnQgaWQgKHJlcXVpcmVkKSBlcSBcIkFyaWFsXCIgb3IgXCIyMHB4IEFyaWFsXCIgKG11c3QgaGF2ZSBsb2FkZWQgcHJldmlvdXNseSlcbiAqIEBwYXJhbSBbc3R5bGUuYWxpZ249XCJsZWZ0XCJdIHtTdHJpbmd9IEFuIGFsaWdubWVudCBvZiB0aGUgbXVsdGlsaW5lIHRleHQgKFwibGVmdFwiLCBcImNlbnRlclwiIG9yIFwicmlnaHRcIilcbiAqL1xuUElYSS5CaXRtYXBUZXh0ID0gZnVuY3Rpb24odGV4dCwgc3R5bGUpXG57XG4gICAgUElYSS5EaXNwbGF5T2JqZWN0Q29udGFpbmVyLmNhbGwodGhpcyk7XG5cbiAgICB0aGlzLnNldFRleHQodGV4dCk7XG4gICAgdGhpcy5zZXRTdHlsZShzdHlsZSk7XG4gICAgdGhpcy51cGRhdGVUZXh0KCk7XG4gICAgdGhpcy5kaXJ0eSA9IGZhbHNlXG5cbn07XG5cbi8vIGNvbnN0cnVjdG9yXG5QSVhJLkJpdG1hcFRleHQucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShQSVhJLkRpc3BsYXlPYmplY3RDb250YWluZXIucHJvdG90eXBlKTtcblBJWEkuQml0bWFwVGV4dC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBQSVhJLkJpdG1hcFRleHQ7XG5cbi8qKlxuICogU2V0IHRoZSBjb3B5IGZvciB0aGUgdGV4dCBvYmplY3RcbiAqXG4gKiBAbWV0aG9kIHNldFRleHRcbiAqIEBwYXJhbSB0ZXh0IHtTdHJpbmd9IFRoZSBjb3B5IHRoYXQgeW91IHdvdWxkIGxpa2UgdGhlIHRleHQgdG8gZGlzcGxheVxuICovXG5QSVhJLkJpdG1hcFRleHQucHJvdG90eXBlLnNldFRleHQgPSBmdW5jdGlvbih0ZXh0KVxue1xuICAgIHRoaXMudGV4dCA9IHRleHQgfHwgXCIgXCI7XG4gICAgdGhpcy5kaXJ0eSA9IHRydWU7XG59O1xuXG4vKipcbiAqIFNldCB0aGUgc3R5bGUgb2YgdGhlIHRleHRcbiAqXG4gKiBAbWV0aG9kIHNldFN0eWxlXG4gKiBAcGFyYW0gc3R5bGUge09iamVjdH0gVGhlIHN0eWxlIHBhcmFtZXRlcnNcbiAqIEBwYXJhbSBzdHlsZS5mb250IHtTdHJpbmd9IFRoZSBzaXplIChvcHRpb25hbCkgYW5kIGJpdG1hcCBmb250IGlkIChyZXF1aXJlZCkgZXEgXCJBcmlhbFwiIG9yIFwiMjBweCBBcmlhbFwiIChtdXN0IGhhdmUgbG9hZGVkIHByZXZpb3VzbHkpXG4gKiBAcGFyYW0gW3N0eWxlLmFsaWduPVwibGVmdFwiXSB7U3RyaW5nfSBBbiBhbGlnbm1lbnQgb2YgdGhlIG11bHRpbGluZSB0ZXh0IChcImxlZnRcIiwgXCJjZW50ZXJcIiBvciBcInJpZ2h0XCIpXG4gKi9cblBJWEkuQml0bWFwVGV4dC5wcm90b3R5cGUuc2V0U3R5bGUgPSBmdW5jdGlvbihzdHlsZSlcbntcbiAgICBzdHlsZSA9IHN0eWxlIHx8IHt9O1xuICAgIHN0eWxlLmFsaWduID0gc3R5bGUuYWxpZ24gfHwgXCJsZWZ0XCI7XG4gICAgdGhpcy5zdHlsZSA9IHN0eWxlO1xuXG4gICAgdmFyIGZvbnQgPSBzdHlsZS5mb250LnNwbGl0KFwiIFwiKTtcbiAgICB0aGlzLmZvbnROYW1lID0gZm9udFtmb250Lmxlbmd0aCAtIDFdO1xuICAgIHRoaXMuZm9udFNpemUgPSBmb250Lmxlbmd0aCA+PSAyID8gcGFyc2VJbnQoZm9udFtmb250Lmxlbmd0aCAtIDJdLCAxMCkgOiBQSVhJLkJpdG1hcFRleHQuZm9udHNbdGhpcy5mb250TmFtZV0uc2l6ZTtcblxuICAgIHRoaXMuZGlydHkgPSB0cnVlO1xufTtcblxuLyoqXG4gKiBSZW5kZXJzIHRleHRcbiAqXG4gKiBAbWV0aG9kIHVwZGF0ZVRleHRcbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuQml0bWFwVGV4dC5wcm90b3R5cGUudXBkYXRlVGV4dCA9IGZ1bmN0aW9uKClcbntcbiAgICB2YXIgZGF0YSA9IFBJWEkuQml0bWFwVGV4dC5mb250c1t0aGlzLmZvbnROYW1lXTtcbiAgICB2YXIgcG9zID0gbmV3IFBJWEkuUG9pbnQoKTtcbiAgICB2YXIgcHJldkNoYXJDb2RlID0gbnVsbDtcbiAgICB2YXIgY2hhcnMgPSBbXTtcbiAgICB2YXIgbWF4TGluZVdpZHRoID0gMDtcbiAgICB2YXIgbGluZVdpZHRocyA9IFtdO1xuICAgIHZhciBsaW5lID0gMDtcbiAgICB2YXIgc2NhbGUgPSB0aGlzLmZvbnRTaXplIC8gZGF0YS5zaXplO1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLnRleHQubGVuZ3RoOyBpKyspXG4gICAge1xuICAgICAgICB2YXIgY2hhckNvZGUgPSB0aGlzLnRleHQuY2hhckNvZGVBdChpKTtcbiAgICAgICAgaWYoLyg/OlxcclxcbnxcXHJ8XFxuKS8udGVzdCh0aGlzLnRleHQuY2hhckF0KGkpKSlcbiAgICAgICAge1xuICAgICAgICAgICAgbGluZVdpZHRocy5wdXNoKHBvcy54KTtcbiAgICAgICAgICAgIG1heExpbmVXaWR0aCA9IE1hdGgubWF4KG1heExpbmVXaWR0aCwgcG9zLngpO1xuICAgICAgICAgICAgbGluZSsrO1xuXG4gICAgICAgICAgICBwb3MueCA9IDA7XG4gICAgICAgICAgICBwb3MueSArPSBkYXRhLmxpbmVIZWlnaHQ7XG4gICAgICAgICAgICBwcmV2Q2hhckNvZGUgPSBudWxsO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgY2hhckRhdGEgPSBkYXRhLmNoYXJzW2NoYXJDb2RlXTtcbiAgICAgICAgaWYoIWNoYXJEYXRhKSBjb250aW51ZTtcblxuICAgICAgICBpZihwcmV2Q2hhckNvZGUgJiYgY2hhckRhdGFbcHJldkNoYXJDb2RlXSlcbiAgICAgICAge1xuICAgICAgICAgICBwb3MueCArPSBjaGFyRGF0YS5rZXJuaW5nW3ByZXZDaGFyQ29kZV07XG4gICAgICAgIH1cbiAgICAgICAgY2hhcnMucHVzaCh7dGV4dHVyZTpjaGFyRGF0YS50ZXh0dXJlLCBsaW5lOiBsaW5lLCBjaGFyQ29kZTogY2hhckNvZGUsIHBvc2l0aW9uOiBuZXcgUElYSS5Qb2ludChwb3MueCArIGNoYXJEYXRhLnhPZmZzZXQsIHBvcy55ICsgY2hhckRhdGEueU9mZnNldCl9KTtcbiAgICAgICAgcG9zLnggKz0gY2hhckRhdGEueEFkdmFuY2U7XG5cbiAgICAgICAgcHJldkNoYXJDb2RlID0gY2hhckNvZGU7XG4gICAgfVxuXG4gICAgbGluZVdpZHRocy5wdXNoKHBvcy54KTtcbiAgICBtYXhMaW5lV2lkdGggPSBNYXRoLm1heChtYXhMaW5lV2lkdGgsIHBvcy54KTtcblxuICAgIHZhciBsaW5lQWxpZ25PZmZzZXRzID0gW107XG4gICAgZm9yKGkgPSAwOyBpIDw9IGxpbmU7IGkrKylcbiAgICB7XG4gICAgICAgIHZhciBhbGlnbk9mZnNldCA9IDA7XG4gICAgICAgIGlmKHRoaXMuc3R5bGUuYWxpZ24gPT0gXCJyaWdodFwiKVxuICAgICAgICB7XG4gICAgICAgICAgICBhbGlnbk9mZnNldCA9IG1heExpbmVXaWR0aCAtIGxpbmVXaWR0aHNbaV07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZih0aGlzLnN0eWxlLmFsaWduID09IFwiY2VudGVyXCIpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGFsaWduT2Zmc2V0ID0gKG1heExpbmVXaWR0aCAtIGxpbmVXaWR0aHNbaV0pIC8gMjtcbiAgICAgICAgfVxuICAgICAgICBsaW5lQWxpZ25PZmZzZXRzLnB1c2goYWxpZ25PZmZzZXQpO1xuICAgIH1cblxuICAgIGZvcihpID0gMDsgaSA8IGNoYXJzLmxlbmd0aDsgaSsrKVxuICAgIHtcbiAgICAgICAgdmFyIGMgPSBuZXcgUElYSS5TcHJpdGUoY2hhcnNbaV0udGV4dHVyZSkvL1BJWEkuU3ByaXRlLmZyb21GcmFtZShjaGFyc1tpXS5jaGFyQ29kZSk7XG4gICAgICAgIGMucG9zaXRpb24ueCA9IChjaGFyc1tpXS5wb3NpdGlvbi54ICsgbGluZUFsaWduT2Zmc2V0c1tjaGFyc1tpXS5saW5lXSkgKiBzY2FsZTtcbiAgICAgICAgYy5wb3NpdGlvbi55ID0gY2hhcnNbaV0ucG9zaXRpb24ueSAqIHNjYWxlO1xuICAgICAgICBjLnNjYWxlLnggPSBjLnNjYWxlLnkgPSBzY2FsZTtcbiAgICAgICAgdGhpcy5hZGRDaGlsZChjKTtcbiAgICB9XG5cbiAgICB0aGlzLndpZHRoID0gcG9zLnggKiBzY2FsZTtcbiAgICB0aGlzLmhlaWdodCA9IChwb3MueSArIGRhdGEubGluZUhlaWdodCkgKiBzY2FsZTtcbn07XG5cbi8qKlxuICogVXBkYXRlcyB0aGUgdHJhbnNmb3Igb2YgdGhpcyBvYmplY3RcbiAqXG4gKiBAbWV0aG9kIHVwZGF0ZVRyYW5zZm9ybVxuICogQHByaXZhdGVcbiAqL1xuUElYSS5CaXRtYXBUZXh0LnByb3RvdHlwZS51cGRhdGVUcmFuc2Zvcm0gPSBmdW5jdGlvbigpXG57XG5cdGlmKHRoaXMuZGlydHkpXG5cdHtcbiAgICAgICAgd2hpbGUodGhpcy5jaGlsZHJlbi5sZW5ndGggPiAwKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUNoaWxkKHRoaXMuZ2V0Q2hpbGRBdCgwKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy51cGRhdGVUZXh0KCk7XG5cbiAgICAgICAgdGhpcy5kaXJ0eSA9IGZhbHNlO1xuXHR9XG5cblx0UElYSS5EaXNwbGF5T2JqZWN0Q29udGFpbmVyLnByb3RvdHlwZS51cGRhdGVUcmFuc2Zvcm0uY2FsbCh0aGlzKTtcbn07XG5cblBJWEkuQml0bWFwVGV4dC5mb250cyA9IHt9O1xuXG4vKipcbiAqIEBhdXRob3IgTWF0IEdyb3ZlcyBodHRwOi8vbWF0Z3JvdmVzLmNvbS8gQERvb3JtYXQyM1xuICovXG4gXG4gLyoqXG4gKiBUaGUgaW50ZXJhY3Rpb24gbWFuYWdlciBkZWFscyB3aXRoIG1vdXNlIGFuZCB0b3VjaCBldmVudHMuIEFueSBEaXNwbGF5T2JqZWN0IGNhbiBiZSBpbnRlcmFjdGl2ZVxuICogVGhpcyBtYW5hZ2VyIGFsc28gc3VwcG9ydHMgbXVsdGl0b3VjaC5cbiAqXG4gKiBAY2xhc3MgSW50ZXJhY3Rpb25NYW5hZ2VyXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSBzdGFnZSB7U3RhZ2V9IFRoZSBzdGFnZSB0byBoYW5kbGUgaW50ZXJhY3Rpb25zXG4gKi9cblBJWEkuSW50ZXJhY3Rpb25NYW5hZ2VyID0gZnVuY3Rpb24oc3RhZ2UpXG57XG5cdC8qKlxuXHQgKiBhIHJlZmZlcmVuY2UgdG8gdGhlIHN0YWdlXG5cdCAqXG5cdCAqIEBwcm9wZXJ0eSBzdGFnZVxuXHQgKiBAdHlwZSBTdGFnZVxuXHQgKi9cblx0dGhpcy5zdGFnZSA9IHN0YWdlO1xuXG5cdC8qKlxuXHQgKiB0aGUgbW91c2UgZGF0YVxuXHQgKlxuXHQgKiBAcHJvcGVydHkgbW91c2Vcblx0ICogQHR5cGUgSW50ZXJhY3Rpb25EYXRhXG5cdCAqL1xuXHR0aGlzLm1vdXNlID0gbmV3IFBJWEkuSW50ZXJhY3Rpb25EYXRhKCk7XG5cblx0LyoqXG5cdCAqIGFuIG9iamVjdCB0aGF0IHN0b3JlcyBjdXJyZW50IHRvdWNoZXMgKEludGVyYWN0aW9uRGF0YSkgYnkgaWQgcmVmZXJlbmNlXG5cdCAqXG5cdCAqIEBwcm9wZXJ0eSB0b3VjaHNcblx0ICogQHR5cGUgT2JqZWN0XG5cdCAqL1xuXHR0aGlzLnRvdWNocyA9IHt9O1xuXG5cblx0XG5cdC8vIGhlbHBlcnNcblx0dGhpcy50ZW1wUG9pbnQgPSBuZXcgUElYSS5Qb2ludCgpO1xuXHQvL3RoaXMudGVtcE1hdHJpeCA9ICBtYXQzLmNyZWF0ZSgpO1xuXG5cdHRoaXMubW91c2VvdmVyRW5hYmxlZCA9IHRydWU7XG5cblx0Ly90aW55IGxpdHRsZSBpbnRlcmFjdGl2ZURhdGEgcG9vbCFcblx0dGhpcy5wb29sID0gW107XG5cblx0dGhpcy5pbnRlcmFjdGl2ZUl0ZW1zID0gW107XG5cdHRoaXMuaW50ZXJhY3Rpb25ET01FbGVtZW50ID0gbnVsbDtcblxuXHQvL3RoaXMgd2lsbCBtYWtlIGl0IHNvIHRoYXQgeW91IGRvbnQgaGF2ZSB0byBjYWxsIGJpbmQgYWxsIHRoZSB0aW1lXG5cdHRoaXMub25Nb3VzZU1vdmUgPSB0aGlzLm9uTW91c2VNb3ZlLmJpbmQoIHRoaXMgKTtcblx0dGhpcy5vbk1vdXNlRG93biA9IHRoaXMub25Nb3VzZURvd24uYmluZCh0aGlzKTtcblx0dGhpcy5vbk1vdXNlT3V0ID0gdGhpcy5vbk1vdXNlT3V0LmJpbmQodGhpcyk7XG5cdHRoaXMub25Nb3VzZVVwID0gdGhpcy5vbk1vdXNlVXAuYmluZCh0aGlzKTtcblxuXHR0aGlzLm9uVG91Y2hTdGFydCA9IHRoaXMub25Ub3VjaFN0YXJ0LmJpbmQodGhpcyk7XG5cdHRoaXMub25Ub3VjaEVuZCA9IHRoaXMub25Ub3VjaEVuZC5iaW5kKHRoaXMpO1xuXHR0aGlzLm9uVG91Y2hNb3ZlID0gdGhpcy5vblRvdWNoTW92ZS5iaW5kKHRoaXMpO1xuXHRcblx0XG5cdHRoaXMubGFzdCA9IDA7XG59XG5cbi8vIGNvbnN0cnVjdG9yXG5QSVhJLkludGVyYWN0aW9uTWFuYWdlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBQSVhJLkludGVyYWN0aW9uTWFuYWdlcjtcblxuLyoqXG4gKiBDb2xsZWN0cyBhbiBpbnRlcmFjdGl2ZSBzcHJpdGUgcmVjdXJzaXZlbHkgdG8gaGF2ZSB0aGVpciBpbnRlcmFjdGlvbnMgbWFuYWdlZFxuICpcbiAqIEBtZXRob2QgY29sbGVjdEludGVyYWN0aXZlU3ByaXRlXG4gKiBAcGFyYW0gZGlzcGxheU9iamVjdCB7RGlzcGxheU9iamVjdH0gdGhlIGRpc3BsYXlPYmplY3QgdG8gY29sbGVjdFxuICogQHBhcmFtIGlQYXJlbnQge0Rpc3BsYXlPYmplY3R9XG4gKiBAcHJpdmF0ZVxuICovXG5QSVhJLkludGVyYWN0aW9uTWFuYWdlci5wcm90b3R5cGUuY29sbGVjdEludGVyYWN0aXZlU3ByaXRlID0gZnVuY3Rpb24oZGlzcGxheU9iamVjdCwgaVBhcmVudClcbntcblx0dmFyIGNoaWxkcmVuID0gZGlzcGxheU9iamVjdC5jaGlsZHJlbjtcblx0dmFyIGxlbmd0aCA9IGNoaWxkcmVuLmxlbmd0aDtcblx0XG5cdC8vLyBtYWtlIGFuIGludGVyYWN0aW9uIHRyZWUuLi4ge2l0ZW0uX19pbnRlcmFjdGl2ZVBhcmVudH1cblx0Zm9yICh2YXIgaSA9IGxlbmd0aC0xOyBpID49IDA7IGktLSlcblx0e1xuXHRcdHZhciBjaGlsZCA9IGNoaWxkcmVuW2ldO1xuXHRcdFxuLy9cdFx0aWYoY2hpbGQudmlzaWJsZSkge1xuXHRcdFx0Ly8gcHVzaCBhbGwgaW50ZXJhY3RpdmUgYml0c1xuXHRcdFx0aWYoY2hpbGQuaW50ZXJhY3RpdmUpXG5cdFx0XHR7XG5cdFx0XHRcdGlQYXJlbnQuaW50ZXJhY3RpdmVDaGlsZHJlbiA9IHRydWU7XG5cdFx0XHRcdC8vY2hpbGQuX19pUGFyZW50ID0gaVBhcmVudDtcblx0XHRcdFx0dGhpcy5pbnRlcmFjdGl2ZUl0ZW1zLnB1c2goY2hpbGQpO1xuXG5cdFx0XHRcdGlmKGNoaWxkLmNoaWxkcmVuLmxlbmd0aCA+IDApXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0aGlzLmNvbGxlY3RJbnRlcmFjdGl2ZVNwcml0ZShjaGlsZCwgY2hpbGQpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRlbHNlXG5cdFx0XHR7XG5cdFx0XHRcdGNoaWxkLl9faVBhcmVudCA9IG51bGw7XG5cblx0XHRcdFx0aWYoY2hpbGQuY2hpbGRyZW4ubGVuZ3RoID4gMClcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHRoaXMuY29sbGVjdEludGVyYWN0aXZlU3ByaXRlKGNoaWxkLCBpUGFyZW50KTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuLy9cdFx0fVxuXHR9XG59XG5cbi8qKlxuICogU2V0cyB0aGUgdGFyZ2V0IGZvciBldmVudCBkZWxlZ2F0aW9uXG4gKlxuICogQG1ldGhvZCBzZXRUYXJnZXRcbiAqIEBwYXJhbSB0YXJnZXQge1dlYkdMUmVuZGVyZXJ8Q2FudmFzUmVuZGVyZXJ9IHRoZSByZW5kZXJlciB0byBiaW5kIGV2ZW50cyB0b1xuICogQHByaXZhdGVcbiAqL1xuUElYSS5JbnRlcmFjdGlvbk1hbmFnZXIucHJvdG90eXBlLnNldFRhcmdldCA9IGZ1bmN0aW9uKHRhcmdldClcbntcblx0dGhpcy50YXJnZXQgPSB0YXJnZXQ7XG5cblx0Ly9jaGVjayBpZiB0aGUgZG9tIGVsZW1lbnQgaGFzIGJlZW4gc2V0LiBJZiBpdCBoYXMgZG9uJ3QgZG8gYW55dGhpbmdcblx0aWYoIHRoaXMuaW50ZXJhY3Rpb25ET01FbGVtZW50ID09PSBudWxsICkge1xuXG5cdFx0dGhpcy5zZXRUYXJnZXREb21FbGVtZW50KCB0YXJnZXQudmlldyApO1xuXHR9XG5cbiBcdGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsICB0aGlzLm9uTW91c2VVcCwgdHJ1ZSk7XG59XG5cblxuLyoqXG4gKiBTZXRzIHRoZSBkb20gZWxlbWVudCB3aGljaCB3aWxsIHJlY2VpdmUgbW91c2UvdG91Y2ggZXZlbnRzLiBUaGlzIGlzIHVzZWZ1bCBmb3Igd2hlbiB5b3UgaGF2ZSBvdGhlciBET01cbiAqIGVsZW1lbnRzIG9udG9wIG9mIHRoZSByZW5kZXJlcnMgQ2FudmFzIGVsZW1lbnQuIFdpdGggdGhpcyB5b3UnbGwgYmUgYWJsZSB0byBkZWxlZ2F0ZSBhbm90aGVyIGRvbSBlbGVtZW50XG4gKiB0byByZWNlaXZlIHRob3NlIGV2ZW50c1xuICpcbiAqIEBtZXRob2Qgc2V0VGFyZ2V0RG9tRWxlbWVudFxuICogQHBhcmFtIGRvbUVsZW1lbnQge0RPTUVsZW1lbnR9IHRoZSBkb20gZWxlbWVudCB3aGljaCB3aWxsIHJlY2VpdmUgbW91c2UgYW5kIHRvdWNoIGV2ZW50c1xuICogQHByaXZhdGVcbiAqL1xuUElYSS5JbnRlcmFjdGlvbk1hbmFnZXIucHJvdG90eXBlLnNldFRhcmdldERvbUVsZW1lbnQgPSBmdW5jdGlvbihkb21FbGVtZW50KVxue1xuXHQvL3JlbW92ZSBwcmV2aW91c2UgbGlzdGVuZXJzXG5cdGlmKCB0aGlzLmludGVyYWN0aW9uRE9NRWxlbWVudCAhPT0gbnVsbCApIFxuXHR7XG5cdFx0dGhpcy5pbnRlcmFjdGlvbkRPTUVsZW1lbnQuc3R5bGVbJy1tcy1jb250ZW50LXpvb21pbmcnXSA9ICcnO1xuICAgIFx0dGhpcy5pbnRlcmFjdGlvbkRPTUVsZW1lbnQuc3R5bGVbJy1tcy10b3VjaC1hY3Rpb24nXSA9ICcnO1xuXG5cdFx0dGhpcy5pbnRlcmFjdGlvbkRPTUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgIHRoaXMub25Nb3VzZU1vdmUsIHRydWUpO1xuXHRcdHRoaXMuaW50ZXJhY3Rpb25ET01FbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsICB0aGlzLm9uTW91c2VEb3duLCB0cnVlKTtcblx0IFx0dGhpcy5pbnRlcmFjdGlvbkRPTUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2VvdXQnLCAgIHRoaXMub25Nb3VzZU91dCwgdHJ1ZSk7XG5cblx0IFx0Ly8gYWludCBubyBtdWx0aSB0b3VjaCBqdXN0IHlldCFcblx0XHR0aGlzLmludGVyYWN0aW9uRE9NRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgdGhpcy5vblRvdWNoU3RhcnQsIHRydWUpO1xuXHRcdHRoaXMuaW50ZXJhY3Rpb25ET01FbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdGhpcy5vblRvdWNoRW5kLCB0cnVlKTtcblx0XHR0aGlzLmludGVyYWN0aW9uRE9NRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCB0aGlzLm9uVG91Y2hNb3ZlLCB0cnVlKTtcblx0fVxuXG5cblx0aWYgKHdpbmRvdy5uYXZpZ2F0b3IubXNQb2ludGVyRW5hYmxlZCkgXG5cdHtcblx0XHQvLyB0aW1lIHRvIHJlbW92ZSBzb21lIG9mIHRoYXQgem9vbSBpbiBqYS4uXG5cdFx0ZG9tRWxlbWVudC5zdHlsZVsnLW1zLWNvbnRlbnQtem9vbWluZyddID0gJ25vbmUnO1xuICAgIFx0ZG9tRWxlbWVudC5zdHlsZVsnLW1zLXRvdWNoLWFjdGlvbiddID0gJ25vbmUnO1xuICAgIFxuXHRcdC8vIERPIHNvbWUgd2luZG93IHNwZWNpZmljIHRvdWNoIVxuXHR9XG5cblx0dGhpcy5pbnRlcmFjdGlvbkRPTUVsZW1lbnQgPSBkb21FbGVtZW50O1xuXG5cdGRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgIHRoaXMub25Nb3VzZU1vdmUsIHRydWUpO1xuXHRkb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsICB0aGlzLm9uTW91c2VEb3duLCB0cnVlKTtcbiBcdGRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdXQnLCAgIHRoaXMub25Nb3VzZU91dCwgdHJ1ZSk7XG5cbiBcdC8vIGFpbnQgbm8gbXVsdGkgdG91Y2gganVzdCB5ZXQhXG5cdGRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHRoaXMub25Ub3VjaFN0YXJ0LCB0cnVlKTtcblx0ZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHRoaXMub25Ub3VjaEVuZCwgdHJ1ZSk7XG5cdGRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgdGhpcy5vblRvdWNoTW92ZSwgdHJ1ZSk7XG59XG5cblxuLyoqXG4gKiB1cGRhdGVzIHRoZSBzdGF0ZSBvZiBpbnRlcmFjdGl2ZSBvYmplY3RzXG4gKlxuICogQG1ldGhvZCB1cGRhdGVcbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuSW50ZXJhY3Rpb25NYW5hZ2VyLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbigpXG57XG5cdGlmKCF0aGlzLnRhcmdldClyZXR1cm47XG5cdFxuXHQvLyBmcmVxdWVuY3kgb2YgMzBmcHM/P1xuXHR2YXIgbm93ID0gRGF0ZS5ub3coKTtcblx0dmFyIGRpZmYgPSBub3cgLSB0aGlzLmxhc3Q7XG5cdGRpZmYgPSAoZGlmZiAqIDMwKSAvIDEwMDA7XG5cdGlmKGRpZmYgPCAxKXJldHVybjtcblx0dGhpcy5sYXN0ID0gbm93O1xuXHQvL1xuXHRcblx0Ly8gb2suLiBzbyBtb3VzZSBldmVudHM/P1xuXHQvLyB5ZXMgZm9yIG5vdyA6KVxuXHQvLyBPUFRJTVNFIC0gaG93IG9mdGVuIHRvIGNoZWNrPz9cblx0aWYodGhpcy5kaXJ0eSlcblx0e1xuXHRcdHRoaXMuZGlydHkgPSBmYWxzZTtcblx0XHRcblx0XHR2YXIgbGVuID0gdGhpcy5pbnRlcmFjdGl2ZUl0ZW1zLmxlbmd0aDtcblx0XHRcblx0XHRmb3IgKHZhciBpPTA7IGkgPCBsZW47IGkrKykge1xuXHRcdCAgdGhpcy5pbnRlcmFjdGl2ZUl0ZW1zW2ldLmludGVyYWN0aXZlQ2hpbGRyZW4gPSBmYWxzZTtcblx0XHR9XG5cdFx0XG5cdFx0dGhpcy5pbnRlcmFjdGl2ZUl0ZW1zID0gW107XG5cdFx0XG5cdFx0aWYodGhpcy5zdGFnZS5pbnRlcmFjdGl2ZSl0aGlzLmludGVyYWN0aXZlSXRlbXMucHVzaCh0aGlzLnN0YWdlKTtcblx0XHQvLyBnbyB0aHJvdWdoIGFuZCBjb2xsZWN0IGFsbCB0aGUgb2JqZWN0cyB0aGF0IGFyZSBpbnRlcmFjdGl2ZS4uXG5cdFx0dGhpcy5jb2xsZWN0SW50ZXJhY3RpdmVTcHJpdGUodGhpcy5zdGFnZSwgdGhpcy5zdGFnZSk7XG5cdH1cblx0XG5cdC8vIGxvb3AgdGhyb3VnaCBpbnRlcmFjdGl2ZSBvYmplY3RzIVxuXHR2YXIgbGVuZ3RoID0gdGhpcy5pbnRlcmFjdGl2ZUl0ZW1zLmxlbmd0aDtcblx0XG5cdHRoaXMuaW50ZXJhY3Rpb25ET01FbGVtZW50LnN0eWxlLmN1cnNvciA9IFwiZGVmYXVsdFwiO1x0XG5cdFx0XHRcdFxuXHRmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKVxuXHR7XG5cdFx0dmFyIGl0ZW0gPSB0aGlzLmludGVyYWN0aXZlSXRlbXNbaV07XG5cdFx0XG5cdFx0XG5cdFx0Ly9pZighaXRlbS52aXNpYmxlKWNvbnRpbnVlO1xuXHRcdFxuXHRcdC8vIE9QVElNSVNBVElPTiAtIG9ubHkgY2FsY3VsYXRlIGV2ZXJ5IHRpbWUgaWYgdGhlIG1vdXNlbW92ZSBmdW5jdGlvbiBleGlzdHMuLlxuXHRcdC8vIE9LIHNvLi4gZG9lcyB0aGUgb2JqZWN0IGhhdmUgYW55IG90aGVyIGludGVyYWN0aXZlIGZ1bmN0aW9ucz9cblx0XHQvLyBoaXQtdGVzdCB0aGUgY2xpcCFcblx0XHRcblx0XHRcblx0XHRpZihpdGVtLm1vdXNlb3ZlciB8fCBpdGVtLm1vdXNlb3V0IHx8IGl0ZW0uYnV0dG9uTW9kZSlcblx0XHR7XG5cdFx0XHQvLyBvayBzbyB0aGVyZSBhcmUgc29tZSBmdW5jdGlvbnMgc28gbGV0cyBoaXQgdGVzdCBpdC4uXG5cdFx0XHRpdGVtLl9faGl0ID0gdGhpcy5oaXRUZXN0KGl0ZW0sIHRoaXMubW91c2UpO1xuXHRcdFx0dGhpcy5tb3VzZS50YXJnZXQgPSBpdGVtO1xuXHRcdFx0Ly8gb2sgc28gZGVhbCB3aXRoIGludGVyYWN0aW9ucy4uXG5cdFx0XHQvLyBsb2tzIGxpa2UgdGhlcmUgd2FzIGEgaGl0IVxuXHRcdFx0aWYoaXRlbS5fX2hpdClcblx0XHRcdHtcblx0XHRcdFx0aWYoaXRlbS5idXR0b25Nb2RlKSB0aGlzLmludGVyYWN0aW9uRE9NRWxlbWVudC5zdHlsZS5jdXJzb3IgPSBcInBvaW50ZXJcIjtcdFxuXHRcdFx0XHRcblx0XHRcdFx0aWYoIWl0ZW0uX19pc092ZXIpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHRpZihpdGVtLm1vdXNlb3ZlcilpdGVtLm1vdXNlb3Zlcih0aGlzLm1vdXNlKTtcblx0XHRcdFx0XHRpdGVtLl9faXNPdmVyID0gdHJ1ZTtcdFxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRlbHNlXG5cdFx0XHR7XG5cdFx0XHRcdGlmKGl0ZW0uX19pc092ZXIpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHQvLyByb2xsIG91dCFcblx0XHRcdFx0XHRpZihpdGVtLm1vdXNlb3V0KWl0ZW0ubW91c2VvdXQodGhpcy5tb3VzZSk7XG5cdFx0XHRcdFx0aXRlbS5fX2lzT3ZlciA9IGZhbHNlO1x0XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFx0XG5cdFx0Ly8gLS0tPlxuXHR9XG59XG5cbi8qKlxuICogSXMgY2FsbGVkIHdoZW4gdGhlIG1vdXNlIG1vdmVzIGFjY3Jvc3MgdGhlIHJlbmRlcmVyIGVsZW1lbnRcbiAqXG4gKiBAbWV0aG9kIG9uTW91c2VNb3ZlXG4gKiBAcGFyYW0gZXZlbnQge0V2ZW50fSBUaGUgRE9NIGV2ZW50IG9mIHRoZSBtb3VzZSBtb3ZpbmdcbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuSW50ZXJhY3Rpb25NYW5hZ2VyLnByb3RvdHlwZS5vbk1vdXNlTW92ZSA9IGZ1bmN0aW9uKGV2ZW50KVxue1xuXHR0aGlzLm1vdXNlLm9yaWdpbmFsRXZlbnQgPSBldmVudCB8fCB3aW5kb3cuZXZlbnQ7IC8vSUUgdXNlcyB3aW5kb3cuZXZlbnRcblx0Ly8gVE9ETyBvcHRpbWl6ZSBieSBub3QgY2hlY2sgRVZFUlkgVElNRSEgbWF5YmUgaGFsZiBhcyBvZnRlbj8gLy9cblx0dmFyIHJlY3QgPSB0aGlzLmludGVyYWN0aW9uRE9NRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblx0XG5cdHRoaXMubW91c2UuZ2xvYmFsLnggPSAoZXZlbnQuY2xpZW50WCAtIHJlY3QubGVmdCkgKiAodGhpcy50YXJnZXQud2lkdGggLyByZWN0LndpZHRoKTtcblx0dGhpcy5tb3VzZS5nbG9iYWwueSA9IChldmVudC5jbGllbnRZIC0gcmVjdC50b3ApICogKCB0aGlzLnRhcmdldC5oZWlnaHQgLyByZWN0LmhlaWdodCk7XG5cdFxuXHR2YXIgbGVuZ3RoID0gdGhpcy5pbnRlcmFjdGl2ZUl0ZW1zLmxlbmd0aDtcblx0dmFyIGdsb2JhbCA9IHRoaXMubW91c2UuZ2xvYmFsO1xuXHRcblx0XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspXG5cdHtcblx0XHR2YXIgaXRlbSA9IHRoaXMuaW50ZXJhY3RpdmVJdGVtc1tpXTtcblx0XHRcblx0XHRpZihpdGVtLm1vdXNlbW92ZSlcblx0XHR7XG5cdFx0XHQvL2NhbGwgdGhlIGZ1bmN0aW9uIVxuXHRcdFx0aXRlbS5tb3VzZW1vdmUodGhpcy5tb3VzZSk7XG5cdFx0fVxuXHR9XG59XG5cbi8qKlxuICogSXMgY2FsbGVkIHdoZW4gdGhlIG1vdXNlIGJ1dHRvbiBpcyBwcmVzc2VkIGRvd24gb24gdGhlIHJlbmRlcmVyIGVsZW1lbnRcbiAqXG4gKiBAbWV0aG9kIG9uTW91c2VEb3duXG4gKiBAcGFyYW0gZXZlbnQge0V2ZW50fSBUaGUgRE9NIGV2ZW50IG9mIGEgbW91c2UgYnV0dG9uIGJlaW5nIHByZXNzZWQgZG93blxuICogQHByaXZhdGVcbiAqL1xuUElYSS5JbnRlcmFjdGlvbk1hbmFnZXIucHJvdG90eXBlLm9uTW91c2VEb3duID0gZnVuY3Rpb24oZXZlbnQpXG57XG5cdHRoaXMubW91c2Uub3JpZ2luYWxFdmVudCA9IGV2ZW50IHx8IHdpbmRvdy5ldmVudDsgLy9JRSB1c2VzIHdpbmRvdy5ldmVudFxuXHRcblx0Ly8gbG9vcCB0aHJvdWdoIGludGVhY3Rpb24gdHJlZS4uLlxuXHQvLyBoaXQgdGVzdCBlYWNoIGl0ZW0hIC0+IFxuXHQvLyBnZXQgaW50ZXJhY3RpdmUgaXRlbXMgdW5kZXIgcG9pbnQ/P1xuXHQvL3N0YWdlLl9faVxuXHR2YXIgbGVuZ3RoID0gdGhpcy5pbnRlcmFjdGl2ZUl0ZW1zLmxlbmd0aDtcblx0dmFyIGdsb2JhbCA9IHRoaXMubW91c2UuZ2xvYmFsO1xuXHRcblx0dmFyIGluZGV4ID0gMDtcblx0dmFyIHBhcmVudCA9IHRoaXMuc3RhZ2U7XG5cdFxuXHQvLyB3aGlsZSBcblx0Ly8gaGl0IHRlc3QgXG5cdGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspXG5cdHtcblx0XHR2YXIgaXRlbSA9IHRoaXMuaW50ZXJhY3RpdmVJdGVtc1tpXTtcblx0XHRcblx0XHRpZihpdGVtLm1vdXNlZG93biB8fCBpdGVtLmNsaWNrKVxuXHRcdHtcblx0XHRcdGl0ZW0uX19tb3VzZUlzRG93biA9IHRydWU7XG5cdFx0XHRpdGVtLl9faGl0ID0gdGhpcy5oaXRUZXN0KGl0ZW0sIHRoaXMubW91c2UpO1xuXHRcdFx0XG5cdFx0XHRpZihpdGVtLl9faGl0KVxuXHRcdFx0e1xuXHRcdFx0XHQvL2NhbGwgdGhlIGZ1bmN0aW9uIVxuXHRcdFx0XHRpZihpdGVtLm1vdXNlZG93bilpdGVtLm1vdXNlZG93bih0aGlzLm1vdXNlKTtcblx0XHRcdFx0aXRlbS5fX2lzRG93biA9IHRydWU7XG5cdFx0XHRcdFxuXHRcdFx0XHQvLyBqdXN0IHRoZSBvbmUhXG5cdFx0XHRcdGlmKCFpdGVtLmludGVyYWN0aXZlQ2hpbGRyZW4pYnJlYWs7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG59XG5cblxuUElYSS5JbnRlcmFjdGlvbk1hbmFnZXIucHJvdG90eXBlLm9uTW91c2VPdXQgPSBmdW5jdGlvbihldmVudClcbntcblx0dmFyIGxlbmd0aCA9IHRoaXMuaW50ZXJhY3RpdmVJdGVtcy5sZW5ndGg7XG5cdFxuXHR0aGlzLmludGVyYWN0aW9uRE9NRWxlbWVudC5zdHlsZS5jdXJzb3IgPSBcImRlZmF1bHRcIjtcdFxuXHRcdFx0XHRcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKylcblx0e1xuXHRcdHZhciBpdGVtID0gdGhpcy5pbnRlcmFjdGl2ZUl0ZW1zW2ldO1xuXHRcdFxuXHRcdGlmKGl0ZW0uX19pc092ZXIpXG5cdFx0e1xuXHRcdFx0dGhpcy5tb3VzZS50YXJnZXQgPSBpdGVtO1xuXHRcdFx0aWYoaXRlbS5tb3VzZW91dClpdGVtLm1vdXNlb3V0KHRoaXMubW91c2UpO1xuXHRcdFx0aXRlbS5fX2lzT3ZlciA9IGZhbHNlO1x0XG5cdFx0fVxuXHR9XG59XG5cbi8qKlxuICogSXMgY2FsbGVkIHdoZW4gdGhlIG1vdXNlIGJ1dHRvbiBpcyByZWxlYXNlZCBvbiB0aGUgcmVuZGVyZXIgZWxlbWVudFxuICpcbiAqIEBtZXRob2Qgb25Nb3VzZVVwXG4gKiBAcGFyYW0gZXZlbnQge0V2ZW50fSBUaGUgRE9NIGV2ZW50IG9mIGEgbW91c2UgYnV0dG9uIGJlaW5nIHJlbGVhc2VkXG4gKiBAcHJpdmF0ZVxuICovXG5QSVhJLkludGVyYWN0aW9uTWFuYWdlci5wcm90b3R5cGUub25Nb3VzZVVwID0gZnVuY3Rpb24oZXZlbnQpXG57XG5cdHRoaXMubW91c2Uub3JpZ2luYWxFdmVudCA9IGV2ZW50IHx8IHdpbmRvdy5ldmVudDsgLy9JRSB1c2VzIHdpbmRvdy5ldmVudFxuXHRcblx0dmFyIGdsb2JhbCA9IHRoaXMubW91c2UuZ2xvYmFsO1xuXHRcblx0XG5cdHZhciBsZW5ndGggPSB0aGlzLmludGVyYWN0aXZlSXRlbXMubGVuZ3RoO1xuXHR2YXIgdXAgPSBmYWxzZTtcblx0XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspXG5cdHtcblx0XHR2YXIgaXRlbSA9IHRoaXMuaW50ZXJhY3RpdmVJdGVtc1tpXTtcblx0XHRcblx0XHRpZihpdGVtLm1vdXNldXAgfHwgaXRlbS5tb3VzZXVwb3V0c2lkZSB8fCBpdGVtLmNsaWNrKVxuXHRcdHtcblx0XHRcdGl0ZW0uX19oaXQgPSB0aGlzLmhpdFRlc3QoaXRlbSwgdGhpcy5tb3VzZSk7XG5cdFx0XHRcblx0XHRcdGlmKGl0ZW0uX19oaXQgJiYgIXVwKVxuXHRcdFx0e1xuXHRcdFx0XHQvL2NhbGwgdGhlIGZ1bmN0aW9uIVxuXHRcdFx0XHRpZihpdGVtLm1vdXNldXApXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRpdGVtLm1vdXNldXAodGhpcy5tb3VzZSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYoaXRlbS5fX2lzRG93bilcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGlmKGl0ZW0uY2xpY2spaXRlbS5jbGljayh0aGlzLm1vdXNlKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRcblx0XHRcdFx0aWYoIWl0ZW0uaW50ZXJhY3RpdmVDaGlsZHJlbil1cCA9IHRydWU7XG5cdFx0XHR9XG5cdFx0XHRlbHNlXG5cdFx0XHR7XG5cdFx0XHRcdGlmKGl0ZW0uX19pc0Rvd24pXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRpZihpdGVtLm1vdXNldXBvdXRzaWRlKWl0ZW0ubW91c2V1cG91dHNpZGUodGhpcy5tb3VzZSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcblx0XHRcdGl0ZW0uX19pc0Rvd24gPSBmYWxzZTtcdFxuXHRcdH1cblx0fVxufVxuXG4vKipcbiAqIFRlc3RzIGlmIHRoZSBjdXJyZW50IG1vdXNlIGNvb3JkcyBoaXQgYSBzcHJpdGVcbiAqXG4gKiBAbWV0aG9kIGhpdFRlc3RcbiAqIEBwYXJhbSBpdGVtIHtEaXNwbGF5T2JqZWN0fSBUaGUgZGlzcGxheU9iamVjdCB0byB0ZXN0IGZvciBhIGhpdFxuICogQHBhcmFtIGludGVyYWN0aW9uRGF0YSB7SW50ZXJhY3Rpb25EYXRhfSBUaGUgaW50ZXJhY3Rpb25kYXRhIG9iamVjdCB0byB1cGRhdGUgaW4gdGhlIGNhc2Ugb2YgYSBoaXRcbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuSW50ZXJhY3Rpb25NYW5hZ2VyLnByb3RvdHlwZS5oaXRUZXN0ID0gZnVuY3Rpb24oaXRlbSwgaW50ZXJhY3Rpb25EYXRhKVxue1xuXHR2YXIgZ2xvYmFsID0gaW50ZXJhY3Rpb25EYXRhLmdsb2JhbDtcblx0XG5cdGlmKGl0ZW0udmNvdW50ICE9PSBQSVhJLnZpc2libGVDb3VudClyZXR1cm4gZmFsc2U7XG5cblx0dmFyIGlzU3ByaXRlID0gKGl0ZW0gaW5zdGFuY2VvZiBQSVhJLlNwcml0ZSksXG5cdFx0d29ybGRUcmFuc2Zvcm0gPSBpdGVtLndvcmxkVHJhbnNmb3JtLFxuXHRcdGEwMCA9IHdvcmxkVHJhbnNmb3JtWzBdLCBhMDEgPSB3b3JsZFRyYW5zZm9ybVsxXSwgYTAyID0gd29ybGRUcmFuc2Zvcm1bMl0sXG5cdFx0YTEwID0gd29ybGRUcmFuc2Zvcm1bM10sIGExMSA9IHdvcmxkVHJhbnNmb3JtWzRdLCBhMTIgPSB3b3JsZFRyYW5zZm9ybVs1XSxcblx0XHRpZCA9IDEgLyAoYTAwICogYTExICsgYTAxICogLWExMCksXG5cdFx0eCA9IGExMSAqIGlkICogZ2xvYmFsLnggKyAtYTAxICogaWQgKiBnbG9iYWwueSArIChhMTIgKiBhMDEgLSBhMDIgKiBhMTEpICogaWQsXG5cdFx0eSA9IGEwMCAqIGlkICogZ2xvYmFsLnkgKyAtYTEwICogaWQgKiBnbG9iYWwueCArICgtYTEyICogYTAwICsgYTAyICogYTEwKSAqIGlkO1xuXG5cdGludGVyYWN0aW9uRGF0YS50YXJnZXQgPSBpdGVtO1xuXHRcblx0Ly9hIHNwcml0ZSBvciBkaXNwbGF5IG9iamVjdCB3aXRoIGEgaGl0IGFyZWEgZGVmaW5lZFxuXHRpZihpdGVtLmhpdEFyZWEgJiYgaXRlbS5oaXRBcmVhLmNvbnRhaW5zKSB7XG5cdFx0aWYoaXRlbS5oaXRBcmVhLmNvbnRhaW5zKHgsIHkpKSB7XG5cdFx0XHQvL2lmKGlzU3ByaXRlKVxuXHRcdFx0aW50ZXJhY3Rpb25EYXRhLnRhcmdldCA9IGl0ZW07XG5cblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH1cblx0XHRcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblx0Ly8gYSBzcHJpdGUgd2l0aCBubyBoaXRhcmVhIGRlZmluZWRcblx0ZWxzZSBpZihpc1Nwcml0ZSlcblx0e1xuXHRcdHZhciB3aWR0aCA9IGl0ZW0udGV4dHVyZS5mcmFtZS53aWR0aCxcblx0XHRcdGhlaWdodCA9IGl0ZW0udGV4dHVyZS5mcmFtZS5oZWlnaHQsXG5cdFx0XHR4MSA9IC13aWR0aCAqIGl0ZW0uYW5jaG9yLngsXG5cdFx0XHR5MTtcblx0XHRcblx0XHRpZih4ID4geDEgJiYgeCA8IHgxICsgd2lkdGgpXG5cdFx0e1xuXHRcdFx0eTEgPSAtaGVpZ2h0ICogaXRlbS5hbmNob3IueTtcblx0XHRcblx0XHRcdGlmKHkgPiB5MSAmJiB5IDwgeTEgKyBoZWlnaHQpXG5cdFx0XHR7XG5cdFx0XHRcdC8vIHNldCB0aGUgdGFyZ2V0IHByb3BlcnR5IGlmIGEgaGl0IGlzIHRydWUhXG5cdFx0XHRcdGludGVyYWN0aW9uRGF0YS50YXJnZXQgPSBpdGVtXG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHZhciBsZW5ndGggPSBpdGVtLmNoaWxkcmVuLmxlbmd0aDtcblx0XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspXG5cdHtcblx0XHR2YXIgdGVtcEl0ZW0gPSBpdGVtLmNoaWxkcmVuW2ldO1xuXHRcdHZhciBoaXQgPSB0aGlzLmhpdFRlc3QodGVtcEl0ZW0sIGludGVyYWN0aW9uRGF0YSk7XG5cdFx0aWYoaGl0KVxuXHRcdHtcblx0XHRcdC8vIGhtbS4uIFRPRE8gU0VUIENPUlJFQ1QgVEFSR0VUP1xuXHRcdFx0aW50ZXJhY3Rpb25EYXRhLnRhcmdldCA9IGl0ZW1cblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiBmYWxzZTtcdFxufVxuXG4vKipcbiAqIElzIGNhbGxlZCB3aGVuIGEgdG91Y2ggaXMgbW92ZWQgYWNjcm9zcyB0aGUgcmVuZGVyZXIgZWxlbWVudFxuICpcbiAqIEBtZXRob2Qgb25Ub3VjaE1vdmVcbiAqIEBwYXJhbSBldmVudCB7RXZlbnR9IFRoZSBET00gZXZlbnQgb2YgYSB0b3VjaCBtb3ZpbmcgYWNjcm9zcyB0aGUgcmVuZGVyZXIgdmlld1xuICogQHByaXZhdGVcbiAqL1xuUElYSS5JbnRlcmFjdGlvbk1hbmFnZXIucHJvdG90eXBlLm9uVG91Y2hNb3ZlID0gZnVuY3Rpb24oZXZlbnQpXG57XG5cdHZhciByZWN0ID0gdGhpcy5pbnRlcmFjdGlvbkRPTUVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cdHZhciBjaGFuZ2VkVG91Y2hlcyA9IGV2ZW50LmNoYW5nZWRUb3VjaGVzO1xuXHRcblx0Zm9yICh2YXIgaT0wOyBpIDwgY2hhbmdlZFRvdWNoZXMubGVuZ3RoOyBpKyspIFxuXHR7XG5cdFx0dmFyIHRvdWNoRXZlbnQgPSBjaGFuZ2VkVG91Y2hlc1tpXTtcblx0XHR2YXIgdG91Y2hEYXRhID0gdGhpcy50b3VjaHNbdG91Y2hFdmVudC5pZGVudGlmaWVyXTtcblx0XHR0b3VjaERhdGEub3JpZ2luYWxFdmVudCA9ICBldmVudCB8fCB3aW5kb3cuZXZlbnQ7XG5cdFx0XG5cdFx0Ly8gdXBkYXRlIHRoZSB0b3VjaCBwb3NpdGlvblxuXHRcdHRvdWNoRGF0YS5nbG9iYWwueCA9ICh0b3VjaEV2ZW50LmNsaWVudFggLSByZWN0LmxlZnQpICogKHRoaXMudGFyZ2V0LndpZHRoIC8gcmVjdC53aWR0aCk7XG5cdFx0dG91Y2hEYXRhLmdsb2JhbC55ID0gKHRvdWNoRXZlbnQuY2xpZW50WSAtIHJlY3QudG9wKSAgKiAodGhpcy50YXJnZXQuaGVpZ2h0IC8gcmVjdC5oZWlnaHQpO1xuXHR9XG5cdFxuXHR2YXIgbGVuZ3RoID0gdGhpcy5pbnRlcmFjdGl2ZUl0ZW1zLmxlbmd0aDtcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKylcblx0e1xuXHRcdHZhciBpdGVtID0gdGhpcy5pbnRlcmFjdGl2ZUl0ZW1zW2ldO1xuXHRcdGlmKGl0ZW0udG91Y2htb3ZlKWl0ZW0udG91Y2htb3ZlKHRvdWNoRGF0YSk7XG5cdH1cbn1cblxuLyoqXG4gKiBJcyBjYWxsZWQgd2hlbiBhIHRvdWNoIGlzIHN0YXJ0ZWQgb24gdGhlIHJlbmRlcmVyIGVsZW1lbnRcbiAqXG4gKiBAbWV0aG9kIG9uVG91Y2hTdGFydFxuICogQHBhcmFtIGV2ZW50IHtFdmVudH0gVGhlIERPTSBldmVudCBvZiBhIHRvdWNoIHN0YXJ0aW5nIG9uIHRoZSByZW5kZXJlciB2aWV3XG4gKiBAcHJpdmF0ZVxuICovXG5QSVhJLkludGVyYWN0aW9uTWFuYWdlci5wcm90b3R5cGUub25Ub3VjaFN0YXJ0ID0gZnVuY3Rpb24oZXZlbnQpXG57XG5cdHZhciByZWN0ID0gdGhpcy5pbnRlcmFjdGlvbkRPTUVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cdFxuXHR2YXIgY2hhbmdlZFRvdWNoZXMgPSBldmVudC5jaGFuZ2VkVG91Y2hlcztcblx0Zm9yICh2YXIgaT0wOyBpIDwgY2hhbmdlZFRvdWNoZXMubGVuZ3RoOyBpKyspIFxuXHR7XG5cdFx0dmFyIHRvdWNoRXZlbnQgPSBjaGFuZ2VkVG91Y2hlc1tpXTtcblx0XHRcblx0XHR2YXIgdG91Y2hEYXRhID0gdGhpcy5wb29sLnBvcCgpO1xuXHRcdGlmKCF0b3VjaERhdGEpdG91Y2hEYXRhID0gbmV3IFBJWEkuSW50ZXJhY3Rpb25EYXRhKCk7XG5cdFx0XG5cdFx0dG91Y2hEYXRhLm9yaWdpbmFsRXZlbnQgPSAgZXZlbnQgfHwgd2luZG93LmV2ZW50O1xuXHRcdFxuXHRcdHRoaXMudG91Y2hzW3RvdWNoRXZlbnQuaWRlbnRpZmllcl0gPSB0b3VjaERhdGE7XG5cdFx0dG91Y2hEYXRhLmdsb2JhbC54ID0gKHRvdWNoRXZlbnQuY2xpZW50WCAtIHJlY3QubGVmdCkgKiAodGhpcy50YXJnZXQud2lkdGggLyByZWN0LndpZHRoKTtcblx0XHR0b3VjaERhdGEuZ2xvYmFsLnkgPSAodG91Y2hFdmVudC5jbGllbnRZIC0gcmVjdC50b3ApICAqICh0aGlzLnRhcmdldC5oZWlnaHQgLyByZWN0LmhlaWdodCk7XG5cdFx0XG5cdFx0dmFyIGxlbmd0aCA9IHRoaXMuaW50ZXJhY3RpdmVJdGVtcy5sZW5ndGg7XG5cdFx0XG5cdFx0Zm9yICh2YXIgaiA9IDA7IGogPCBsZW5ndGg7IGorKylcblx0XHR7XG5cdFx0XHR2YXIgaXRlbSA9IHRoaXMuaW50ZXJhY3RpdmVJdGVtc1tqXTtcblx0XHRcdFxuXHRcdFx0aWYoaXRlbS50b3VjaHN0YXJ0IHx8IGl0ZW0udGFwKVxuXHRcdFx0e1xuXHRcdFx0XHRpdGVtLl9faGl0ID0gdGhpcy5oaXRUZXN0KGl0ZW0sIHRvdWNoRGF0YSk7XG5cdFx0XHRcdFxuXHRcdFx0XHRpZihpdGVtLl9faGl0KVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Ly9jYWxsIHRoZSBmdW5jdGlvbiFcblx0XHRcdFx0XHRpZihpdGVtLnRvdWNoc3RhcnQpaXRlbS50b3VjaHN0YXJ0KHRvdWNoRGF0YSk7XG5cdFx0XHRcdFx0aXRlbS5fX2lzRG93biA9IHRydWU7XG5cdFx0XHRcdFx0aXRlbS5fX3RvdWNoRGF0YSA9IHRvdWNoRGF0YTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHRpZighaXRlbS5pbnRlcmFjdGl2ZUNoaWxkcmVuKWJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG59XG5cbi8qKlxuICogSXMgY2FsbGVkIHdoZW4gYSB0b3VjaCBpcyBlbmRlZCBvbiB0aGUgcmVuZGVyZXIgZWxlbWVudFxuICpcbiAqIEBtZXRob2Qgb25Ub3VjaEVuZFxuICogQHBhcmFtIGV2ZW50IHtFdmVudH0gVGhlIERPTSBldmVudCBvZiBhIHRvdWNoIGVuZGluZyBvbiB0aGUgcmVuZGVyZXIgdmlld1xuICogQHByaXZhdGVcbiAqL1xuUElYSS5JbnRlcmFjdGlvbk1hbmFnZXIucHJvdG90eXBlLm9uVG91Y2hFbmQgPSBmdW5jdGlvbihldmVudClcbntcblx0Ly90aGlzLm1vdXNlLm9yaWdpbmFsRXZlbnQgPSBldmVudCB8fCB3aW5kb3cuZXZlbnQ7IC8vSUUgdXNlcyB3aW5kb3cuZXZlbnRcblx0dmFyIHJlY3QgPSB0aGlzLmludGVyYWN0aW9uRE9NRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblx0dmFyIGNoYW5nZWRUb3VjaGVzID0gZXZlbnQuY2hhbmdlZFRvdWNoZXM7XG5cdFxuXHRmb3IgKHZhciBpPTA7IGkgPCBjaGFuZ2VkVG91Y2hlcy5sZW5ndGg7IGkrKykgXG5cdHtcblx0XHR2YXIgdG91Y2hFdmVudCA9IGNoYW5nZWRUb3VjaGVzW2ldO1xuXHRcdHZhciB0b3VjaERhdGEgPSB0aGlzLnRvdWNoc1t0b3VjaEV2ZW50LmlkZW50aWZpZXJdO1xuXHRcdHZhciB1cCA9IGZhbHNlO1xuXHRcdHRvdWNoRGF0YS5nbG9iYWwueCA9ICh0b3VjaEV2ZW50LmNsaWVudFggLSByZWN0LmxlZnQpICogKHRoaXMudGFyZ2V0LndpZHRoIC8gcmVjdC53aWR0aCk7XG5cdFx0dG91Y2hEYXRhLmdsb2JhbC55ID0gKHRvdWNoRXZlbnQuY2xpZW50WSAtIHJlY3QudG9wKSAgKiAodGhpcy50YXJnZXQuaGVpZ2h0IC8gcmVjdC5oZWlnaHQpO1xuXHRcdFxuXHRcdHZhciBsZW5ndGggPSB0aGlzLmludGVyYWN0aXZlSXRlbXMubGVuZ3RoO1xuXHRcdGZvciAodmFyIGogPSAwOyBqIDwgbGVuZ3RoOyBqKyspXG5cdFx0e1xuXHRcdFx0dmFyIGl0ZW0gPSB0aGlzLmludGVyYWN0aXZlSXRlbXNbal07XG5cdFx0XHR2YXIgaXRlbVRvdWNoRGF0YSA9IGl0ZW0uX190b3VjaERhdGE7IC8vIDwtLSBIZXJlIVxuXHRcdFx0aXRlbS5fX2hpdCA9IHRoaXMuaGl0VGVzdChpdGVtLCB0b3VjaERhdGEpO1xuXHRcdFxuXHRcdFx0aWYoaXRlbVRvdWNoRGF0YSA9PSB0b3VjaERhdGEpXG5cdFx0XHR7XG5cdFx0XHRcdC8vIHNvIHRoaXMgb25lIFdBUyBkb3duLi4uXG5cdFx0XHRcdHRvdWNoRGF0YS5vcmlnaW5hbEV2ZW50ID0gIGV2ZW50IHx8IHdpbmRvdy5ldmVudDtcblx0XHRcdFx0Ly8gaGl0VGVzdD8/XG5cdFx0XHRcdFxuXHRcdFx0XHRpZihpdGVtLnRvdWNoZW5kIHx8IGl0ZW0udGFwKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0aWYoaXRlbS5fX2hpdCAmJiAhdXApXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0aWYoaXRlbS50b3VjaGVuZClpdGVtLnRvdWNoZW5kKHRvdWNoRGF0YSk7XG5cdFx0XHRcdFx0XHRpZihpdGVtLl9faXNEb3duKVxuXHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRpZihpdGVtLnRhcClpdGVtLnRhcCh0b3VjaERhdGEpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRpZighaXRlbS5pbnRlcmFjdGl2ZUNoaWxkcmVuKXVwID0gdHJ1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdGlmKGl0ZW0uX19pc0Rvd24pXG5cdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdGlmKGl0ZW0udG91Y2hlbmRvdXRzaWRlKWl0ZW0udG91Y2hlbmRvdXRzaWRlKHRvdWNoRGF0YSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdGl0ZW0uX19pc0Rvd24gPSBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0XHRcblx0XHRcdFx0aXRlbS5fX3RvdWNoRGF0YSA9IG51bGw7XG5cdFx0XHRcdFx0XG5cdFx0XHR9XG5cdFx0XHRlbHNlXG5cdFx0XHR7XG5cdFx0XHRcdFxuXHRcdFx0fVxuXHRcdH1cblx0XHQvLyByZW1vdmUgdGhlIHRvdWNoLi5cblx0XHR0aGlzLnBvb2wucHVzaCh0b3VjaERhdGEpO1xuXHRcdHRoaXMudG91Y2hzW3RvdWNoRXZlbnQuaWRlbnRpZmllcl0gPSBudWxsO1xuXHR9XG59XG5cbi8qKlxuICogSG9sZHMgYWxsIGluZm9ybWF0aW9uIHJlbGF0ZWQgdG8gYW4gSW50ZXJhY3Rpb24gZXZlbnRcbiAqXG4gKiBAY2xhc3MgSW50ZXJhY3Rpb25EYXRhXG4gKiBAY29uc3RydWN0b3JcbiAqL1xuUElYSS5JbnRlcmFjdGlvbkRhdGEgPSBmdW5jdGlvbigpXG57XG5cdC8qKlxuXHQgKiBUaGlzIHBvaW50IHN0b3JlcyB0aGUgZ2xvYmFsIGNvb3JkcyBvZiB3aGVyZSB0aGUgdG91Y2gvbW91c2UgZXZlbnQgaGFwcGVuZWRcblx0ICpcblx0ICogQHByb3BlcnR5IGdsb2JhbCBcblx0ICogQHR5cGUgUG9pbnRcblx0ICovXG5cdHRoaXMuZ2xvYmFsID0gbmV3IFBJWEkuUG9pbnQoKTtcblx0XG5cdC8vIHRoaXMgaXMgaGVyZSBmb3IgbGVnYWN5Li4uIGJ1dCB3aWxsIHJlbW92ZVxuXHR0aGlzLmxvY2FsID0gbmV3IFBJWEkuUG9pbnQoKTtcblxuXHQvKipcblx0ICogVGhlIHRhcmdldCBTcHJpdGUgdGhhdCB3YXMgaW50ZXJhY3RlZCB3aXRoXG5cdCAqXG5cdCAqIEBwcm9wZXJ0eSB0YXJnZXRcblx0ICogQHR5cGUgU3ByaXRlXG5cdCAqL1xuXHR0aGlzLnRhcmdldDtcblxuXHQvKipcblx0ICogV2hlbiBwYXNzZWQgdG8gYW4gZXZlbnQgaGFuZGxlciwgdGhpcyB3aWxsIGJlIHRoZSBvcmlnaW5hbCBET00gRXZlbnQgdGhhdCB3YXMgY2FwdHVyZWRcblx0ICpcblx0ICogQHByb3BlcnR5IG9yaWdpbmFsRXZlbnRcblx0ICogQHR5cGUgRXZlbnRcblx0ICovXG5cdHRoaXMub3JpZ2luYWxFdmVudDtcbn1cblxuLyoqXG4gKiBUaGlzIHdpbGwgcmV0dXJuIHRoZSBsb2NhbCBjb29yZHMgb2YgdGhlIHNwZWNpZmllZCBkaXNwbGF5T2JqZWN0IGZvciB0aGlzIEludGVyYWN0aW9uRGF0YVxuICpcbiAqIEBtZXRob2QgZ2V0TG9jYWxQb3NpdGlvblxuICogQHBhcmFtIGRpc3BsYXlPYmplY3Qge0Rpc3BsYXlPYmplY3R9IFRoZSBEaXNwbGF5T2JqZWN0IHRoYXQgeW91IHdvdWxkIGxpa2UgdGhlIGxvY2FsIGNvb3JkcyBvZmZcbiAqIEByZXR1cm4ge1BvaW50fSBBIHBvaW50IGNvbnRhaW5pbmcgdGhlIGNvb3JkcyBvZiB0aGUgSW50ZXJhY3Rpb25EYXRhIHBvc2l0aW9uIHJlbGF0aXZlIHRvIHRoZSBEaXNwbGF5T2JqZWN0XG4gKi9cblBJWEkuSW50ZXJhY3Rpb25EYXRhLnByb3RvdHlwZS5nZXRMb2NhbFBvc2l0aW9uID0gZnVuY3Rpb24oZGlzcGxheU9iamVjdClcbntcblx0dmFyIHdvcmxkVHJhbnNmb3JtID0gZGlzcGxheU9iamVjdC53b3JsZFRyYW5zZm9ybTtcblx0dmFyIGdsb2JhbCA9IHRoaXMuZ2xvYmFsO1xuXHRcblx0Ly8gZG8gYSBjaGVla3kgdHJhbnNmb3JtIHRvIGdldCB0aGUgbW91c2UgY29vcmRzO1xuXHR2YXIgYTAwID0gd29ybGRUcmFuc2Zvcm1bMF0sIGEwMSA9IHdvcmxkVHJhbnNmb3JtWzFdLCBhMDIgPSB3b3JsZFRyYW5zZm9ybVsyXSxcbiAgICAgICAgYTEwID0gd29ybGRUcmFuc2Zvcm1bM10sIGExMSA9IHdvcmxkVHJhbnNmb3JtWzRdLCBhMTIgPSB3b3JsZFRyYW5zZm9ybVs1XSxcbiAgICAgICAgaWQgPSAxIC8gKGEwMCAqIGExMSArIGEwMSAqIC1hMTApO1xuXHQvLyBzZXQgdGhlIG1vdXNlIGNvb3Jkcy4uLlxuXHRyZXR1cm4gbmV3IFBJWEkuUG9pbnQoYTExICogaWQgKiBnbG9iYWwueCArIC1hMDEgKiBpZCAqIGdsb2JhbC55ICsgKGExMiAqIGEwMSAtIGEwMiAqIGExMSkgKiBpZCxcblx0XHRcdFx0XHRcdFx0ICAgYTAwICogaWQgKiBnbG9iYWwueSArIC1hMTAgKiBpZCAqIGdsb2JhbC54ICsgKC1hMTIgKiBhMDAgKyBhMDIgKiBhMTApICogaWQpXG59XG5cbi8vIGNvbnN0cnVjdG9yXG5QSVhJLkludGVyYWN0aW9uRGF0YS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBQSVhJLkludGVyYWN0aW9uRGF0YTtcblxuLyoqXG4gKiBAYXV0aG9yIE1hdCBHcm92ZXMgaHR0cDovL21hdGdyb3Zlcy5jb20vIEBEb29ybWF0MjNcbiAqL1xuXG4vKipcbiAqIEEgU3RhZ2UgcmVwcmVzZW50cyB0aGUgcm9vdCBvZiB0aGUgZGlzcGxheSB0cmVlLiBFdmVyeXRoaW5nIGNvbm5lY3RlZCB0byB0aGUgc3RhZ2UgaXMgcmVuZGVyZWRcbiAqXG4gKiBAY2xhc3MgU3RhZ2VcbiAqIEBleHRlbmRzIERpc3BsYXlPYmplY3RDb250YWluZXJcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIGJhY2tncm91bmRDb2xvciB7TnVtYmVyfSB0aGUgYmFja2dyb3VuZCBjb2xvciBvZiB0aGUgc3RhZ2UsIGVhc2llc3Qgd2F5IHRvIHBhc3MgdGhpcyBpbiBpcyBpbiBoZXggZm9ybWF0XG4gKlx0XHRsaWtlOiAweEZGRkZGRiBmb3Igd2hpdGVcbiAqL1xuUElYSS5TdGFnZSA9IGZ1bmN0aW9uKGJhY2tncm91bmRDb2xvcilcbntcblx0UElYSS5EaXNwbGF5T2JqZWN0Q29udGFpbmVyLmNhbGwoIHRoaXMgKTtcblxuXHQvKipcblx0ICogW3JlYWQtb25seV0gQ3VycmVudCB0cmFuc2Zvcm0gb2YgdGhlIG9iamVjdCBiYXNlZCBvbiB3b3JsZCAocGFyZW50KSBmYWN0b3JzXG5cdCAqXG5cdCAqIEBwcm9wZXJ0eSB3b3JsZFRyYW5zZm9ybVxuXHQgKiBAdHlwZSBNYXQzXG5cdCAqIEByZWFkT25seVxuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cblx0dGhpcy53b3JsZFRyYW5zZm9ybSA9IFBJWEkubWF0My5jcmVhdGUoKTtcblxuXHQvKipcblx0ICogV2hldGhlciBvciBub3QgdGhlIHN0YWdlIGlzIGludGVyYWN0aXZlXG5cdCAqXG5cdCAqIEBwcm9wZXJ0eSBpbnRlcmFjdGl2ZVxuXHQgKiBAdHlwZSBCb29sZWFuXG5cdCAqL1xuXHR0aGlzLmludGVyYWN0aXZlID0gdHJ1ZTtcblxuXHQvKipcblx0ICogVGhlIGludGVyYWN0aW9uIG1hbmFnZSBmb3IgdGhpcyBzdGFnZSwgbWFuYWdlcyBhbGwgaW50ZXJhY3RpdmUgYWN0aXZpdHkgb24gdGhlIHN0YWdlXG5cdCAqXG5cdCAqIEBwcm9wZXJ0eSBpbnRlcmFjdGl2ZVxuXHQgKiBAdHlwZSBJbnRlcmFjdGlvbk1hbmFnZXJcblx0ICovXG5cdHRoaXMuaW50ZXJhY3Rpb25NYW5hZ2VyID0gbmV3IFBJWEkuSW50ZXJhY3Rpb25NYW5hZ2VyKHRoaXMpO1xuXG5cdC8qKlxuXHQgKiBXaGV0aGVyIHRoZSBzdGFnZSBpcyBkaXJ0eSBhbmQgbmVlZHMgdG8gaGF2ZSBpbnRlcmFjdGlvbnMgdXBkYXRlZFxuXHQgKlxuXHQgKiBAcHJvcGVydHkgZGlydHlcblx0ICogQHR5cGUgQm9vbGVhblxuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cblx0dGhpcy5kaXJ0eSA9IHRydWU7XG5cblx0dGhpcy5fX2NoaWxkcmVuQWRkZWQgPSBbXTtcblx0dGhpcy5fX2NoaWxkcmVuUmVtb3ZlZCA9IFtdO1xuXG5cdC8vdGhlIHN0YWdlIGlzIGl0J3Mgb3duIHN0YWdlXG5cdHRoaXMuc3RhZ2UgPSB0aGlzO1xuXG5cdC8vb3B0aW1pemUgaGl0IGRldGVjdGlvbiBhIGJpdFxuXHR0aGlzLnN0YWdlLmhpdEFyZWEgPSBuZXcgUElYSS5SZWN0YW5nbGUoMCwwLDEwMDAwMCwgMTAwMDAwKTtcblxuXHR0aGlzLnNldEJhY2tncm91bmRDb2xvcihiYWNrZ3JvdW5kQ29sb3IpO1xuXHR0aGlzLndvcmxkVmlzaWJsZSA9IHRydWU7XG59XG5cbi8vIGNvbnN0cnVjdG9yXG5QSVhJLlN0YWdlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIFBJWEkuRGlzcGxheU9iamVjdENvbnRhaW5lci5wcm90b3R5cGUgKTtcblBJWEkuU3RhZ2UucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gUElYSS5TdGFnZTtcblxuLyoqXG4gKiBTZXRzIGFub3RoZXIgRE9NIGVsZW1lbnQgd2hpY2ggY2FuIHJlY2VpdmUgbW91c2UvdG91Y2ggaW50ZXJhY3Rpb25zIGluc3RlYWQgb2YgdGhlIGRlZmF1bHQgQ2FudmFzIGVsZW1lbnQuXG4gKiBUaGlzIGlzIHVzZWZ1bCBmb3Igd2hlbiB5b3UgaGF2ZSBvdGhlciBET00gZWxlbWVudHMgb250b3Agb2YgdGhlIENhbnZhcyBlbGVtZW50LlxuICpcbiAqIEBtZXRob2Qgc2V0SW50ZXJhY3Rpb25EZWxlZ2F0ZVxuICogQHBhcmFtIGRvbUVsZW1lbnQge0RPTUVsZW1lbnR9IFRoaXMgbmV3IGRvbUVsZW1lbnQgd2hpY2ggd2lsbCByZWNlaXZlIG1vdXNlL3RvdWNoIGV2ZW50c1xuICovXG5QSVhJLlN0YWdlLnByb3RvdHlwZS5zZXRJbnRlcmFjdGlvbkRlbGVnYXRlID0gZnVuY3Rpb24oZG9tRWxlbWVudClcbntcblx0dGhpcy5pbnRlcmFjdGlvbk1hbmFnZXIuc2V0VGFyZ2V0RG9tRWxlbWVudCggZG9tRWxlbWVudCApO1xufVxuXG4vKlxuICogVXBkYXRlcyB0aGUgb2JqZWN0IHRyYW5zZm9ybSBmb3IgcmVuZGVyaW5nXG4gKlxuICogQG1ldGhvZCB1cGRhdGVUcmFuc2Zvcm1cbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuU3RhZ2UucHJvdG90eXBlLnVwZGF0ZVRyYW5zZm9ybSA9IGZ1bmN0aW9uKClcbntcblx0dGhpcy53b3JsZEFscGhhID0gMTtcdFx0XG5cdHRoaXMudmNvdW50ID0gUElYSS52aXNpYmxlQ291bnQ7XG5cdFxuXHRmb3IodmFyIGk9MCxqPXRoaXMuY2hpbGRyZW4ubGVuZ3RoOyBpPGo7IGkrKylcblx0e1xuXHRcdHRoaXMuY2hpbGRyZW5baV0udXBkYXRlVHJhbnNmb3JtKCk7XHRcblx0fVxuXHRcblx0aWYodGhpcy5kaXJ0eSlcblx0e1xuXHRcdHRoaXMuZGlydHkgPSBmYWxzZTtcblx0XHQvLyB1cGRhdGUgaW50ZXJhY3RpdmUhXG5cdFx0dGhpcy5pbnRlcmFjdGlvbk1hbmFnZXIuZGlydHkgPSB0cnVlO1xuXHR9XG5cdFxuXHRcblx0aWYodGhpcy5pbnRlcmFjdGl2ZSl0aGlzLmludGVyYWN0aW9uTWFuYWdlci51cGRhdGUoKTtcbn1cblxuLyoqXG4gKiBTZXRzIHRoZSBiYWNrZ3JvdW5kIGNvbG9yIGZvciB0aGUgc3RhZ2VcbiAqXG4gKiBAbWV0aG9kIHNldEJhY2tncm91bmRDb2xvclxuICogQHBhcmFtIGJhY2tncm91bmRDb2xvciB7TnVtYmVyfSB0aGUgY29sb3Igb2YgdGhlIGJhY2tncm91bmQsIGVhc2llc3Qgd2F5IHRvIHBhc3MgdGhpcyBpbiBpcyBpbiBoZXggZm9ybWF0XG4gKlx0XHRsaWtlOiAweEZGRkZGRiBmb3Igd2hpdGVcbiAqL1xuUElYSS5TdGFnZS5wcm90b3R5cGUuc2V0QmFja2dyb3VuZENvbG9yID0gZnVuY3Rpb24oYmFja2dyb3VuZENvbG9yKVxue1xuXHR0aGlzLmJhY2tncm91bmRDb2xvciA9IGJhY2tncm91bmRDb2xvciB8fCAweDAwMDAwMDtcblx0dGhpcy5iYWNrZ3JvdW5kQ29sb3JTcGxpdCA9IEhFWHRvUkdCKHRoaXMuYmFja2dyb3VuZENvbG9yKTtcblx0dmFyIGhleCA9IHRoaXMuYmFja2dyb3VuZENvbG9yLnRvU3RyaW5nKDE2KTtcblx0aGV4ID0gXCIwMDAwMDBcIi5zdWJzdHIoMCwgNiAtIGhleC5sZW5ndGgpICsgaGV4O1xuXHR0aGlzLmJhY2tncm91bmRDb2xvclN0cmluZyA9IFwiI1wiICsgaGV4O1xufVxuXG4vKipcbiAqIFRoaXMgd2lsbCByZXR1cm4gdGhlIHBvaW50IGNvbnRhaW5pbmcgZ2xvYmFsIGNvb3JkcyBvZiB0aGUgbW91c2UuXG4gKlxuICogQG1ldGhvZCBnZXRNb3VzZVBvc2l0aW9uXG4gKiBAcmV0dXJuIHtQb2ludH0gVGhlIHBvaW50IGNvbnRhaW5pbmcgdGhlIGNvb3JkcyBvZiB0aGUgZ2xvYmFsIEludGVyYWN0aW9uRGF0YSBwb3NpdGlvbi5cbiAqL1xuUElYSS5TdGFnZS5wcm90b3R5cGUuZ2V0TW91c2VQb3NpdGlvbiA9IGZ1bmN0aW9uKClcbntcblx0cmV0dXJuIHRoaXMuaW50ZXJhY3Rpb25NYW5hZ2VyLm1vdXNlLmdsb2JhbDtcbn1cblxuLy8gaHR0cDovL3BhdWxpcmlzaC5jb20vMjAxMS9yZXF1ZXN0YW5pbWF0aW9uZnJhbWUtZm9yLXNtYXJ0LWFuaW1hdGluZy9cbi8vIGh0dHA6Ly9teS5vcGVyYS5jb20vZW1vbGxlci9ibG9nLzIwMTEvMTIvMjAvcmVxdWVzdGFuaW1hdGlvbmZyYW1lLWZvci1zbWFydC1lci1hbmltYXRpbmdcblxuLy8gcmVxdWVzdEFuaW1hdGlvbkZyYW1lIHBvbHlmaWxsIGJ5IEVyaWsgTcO2bGxlci4gZml4ZXMgZnJvbSBQYXVsIElyaXNoIGFuZCBUaW5vIFppamRlbFxuXG4vLyBNSVQgbGljZW5zZVxuXG4vKipcbiAqIEEgcG9seWZpbGwgZm9yIHJlcXVlc3RBbmltYXRpb25GcmFtZVxuICpcbiAqIEBtZXRob2QgcmVxdWVzdEFuaW1hdGlvbkZyYW1lXG4gKi9cbi8qKlxuICogQSBwb2x5ZmlsbCBmb3IgY2FuY2VsQW5pbWF0aW9uRnJhbWVcbiAqXG4gKiBAbWV0aG9kIGNhbmNlbEFuaW1hdGlvbkZyYW1lXG4gKi9cbnZhciBsYXN0VGltZSA9IDA7XG52YXIgdmVuZG9ycyA9IFsnbXMnLCAnbW96JywgJ3dlYmtpdCcsICdvJ107XG5mb3IodmFyIHggPSAwOyB4IDwgdmVuZG9ycy5sZW5ndGggJiYgIXdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWU7ICsreCkge1xuICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSB3aW5kb3dbdmVuZG9yc1t4XSsnUmVxdWVzdEFuaW1hdGlvbkZyYW1lJ107XG4gICAgd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lID0gd2luZG93W3ZlbmRvcnNbeF0rJ0NhbmNlbEFuaW1hdGlvbkZyYW1lJ11cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8fCB3aW5kb3dbdmVuZG9yc1t4XSsnQ2FuY2VsUmVxdWVzdEFuaW1hdGlvbkZyYW1lJ107XG59XG5cbmlmICghd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSlcbiAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lID0gZnVuY3Rpb24oY2FsbGJhY2ssIGVsZW1lbnQpIHtcbiAgICAgICAgdmFyIGN1cnJUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgICAgIHZhciB0aW1lVG9DYWxsID0gTWF0aC5tYXgoMCwgMTYgLSAoY3VyclRpbWUgLSBsYXN0VGltZSkpO1xuICAgICAgICB2YXIgaWQgPSB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpIHsgY2FsbGJhY2soY3VyclRpbWUgKyB0aW1lVG9DYWxsKTsgfSxcbiAgICAgICAgICB0aW1lVG9DYWxsKTtcbiAgICAgICAgbGFzdFRpbWUgPSBjdXJyVGltZSArIHRpbWVUb0NhbGw7XG4gICAgICAgIHJldHVybiBpZDtcbiAgICB9O1xuXG5pZiAoIXdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZSlcbiAgICB3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUgPSBmdW5jdGlvbihpZCkge1xuICAgICAgICBjbGVhclRpbWVvdXQoaWQpO1xuICAgIH07XG5cbndpbmRvdy5yZXF1ZXN0QW5pbUZyYW1lID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZTtcblxuLyoqXG4gKiBDb252ZXJ0cyBhIGhleCBjb2xvciBudW1iZXIgdG8gYW4gW1IsIEcsIEJdIGFycmF5XG4gKlxuICogQG1ldGhvZCBIRVh0b1JHQlxuICogQHBhcmFtIGhleCB7TnVtYmVyfVxuICovXG5mdW5jdGlvbiBIRVh0b1JHQihoZXgpIHtcblx0cmV0dXJuIFsoaGV4ID4+IDE2ICYgMHhGRikgLyAyNTUsICggaGV4ID4+IDggJiAweEZGKSAvIDI1NSwgKGhleCAmIDB4RkYpLyAyNTVdO1xufVxuXG4vKipcbiAqIEEgcG9seWZpbGwgZm9yIEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kXG4gKlxuICogQG1ldGhvZCBiaW5kXG4gKi9cbmlmICh0eXBlb2YgRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQgIT0gJ2Z1bmN0aW9uJykge1xuICBGdW5jdGlvbi5wcm90b3R5cGUuYmluZCA9IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNsaWNlID0gQXJyYXkucHJvdG90eXBlLnNsaWNlO1xuICAgIHJldHVybiBmdW5jdGlvbiAodGhpc0FyZykge1xuICAgICAgdmFyIHRhcmdldCA9IHRoaXMsIGJvdW5kQXJncyA9IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcblxuICAgICAgaWYgKHR5cGVvZiB0YXJnZXQgIT0gJ2Z1bmN0aW9uJykgdGhyb3cgbmV3IFR5cGVFcnJvcigpO1xuXG4gICAgICBmdW5jdGlvbiBib3VuZCgpIHtcblx0dmFyIGFyZ3MgPSBib3VuZEFyZ3MuY29uY2F0KHNsaWNlLmNhbGwoYXJndW1lbnRzKSk7XG5cdHRhcmdldC5hcHBseSh0aGlzIGluc3RhbmNlb2YgYm91bmQgPyB0aGlzIDogdGhpc0FyZywgYXJncyk7XG4gICAgICB9XG5cbiAgICAgIGJvdW5kLnByb3RvdHlwZSA9IChmdW5jdGlvbiBGKHByb3RvKSB7XG4gICAgICAgICAgcHJvdG8gJiYgKEYucHJvdG90eXBlID0gcHJvdG8pO1xuICAgICAgICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBGKSkgcmV0dXJuIG5ldyBGO1xuXHR9KSh0YXJnZXQucHJvdG90eXBlKTtcblxuICAgICAgcmV0dXJuIGJvdW5kO1xuICAgIH07XG4gIH0pKCk7XG59XG5cbi8qKlxuICogQSB3cmFwcGVyIGZvciBhamF4IHJlcXVlc3RzIHRvIGJlIGhhbmRsZWQgY3Jvc3MgYnJvd3NlclxuICpcbiAqIEBjbGFzcyBBamF4UmVxdWVzdFxuICogQGNvbnN0cnVjdG9yXG4gKi9cbnZhciBBamF4UmVxdWVzdCA9IFBJWEkuQWpheFJlcXVlc3QgPSBmdW5jdGlvbigpXG57XG5cdHZhciBhY3RpdmV4bW9kZXMgPSBbXCJNc3htbDIuWE1MSFRUUC42LjBcIiwgXCJNc3htbDIuWE1MSFRUUC4zLjBcIiwgXCJNaWNyb3NvZnQuWE1MSFRUUFwiXSAvL2FjdGl2ZVggdmVyc2lvbnMgdG8gY2hlY2sgZm9yIGluIElFXG5cblx0aWYgKHdpbmRvdy5BY3RpdmVYT2JqZWN0KVxuXHR7IC8vVGVzdCBmb3Igc3VwcG9ydCBmb3IgQWN0aXZlWE9iamVjdCBpbiBJRSBmaXJzdCAoYXMgWE1MSHR0cFJlcXVlc3QgaW4gSUU3IGlzIGJyb2tlbilcblx0XHRmb3IgKHZhciBpPTA7IGk8YWN0aXZleG1vZGVzLmxlbmd0aDsgaSsrKVxuXHRcdHtcblx0XHRcdHRyeXtcblx0XHRcdFx0cmV0dXJuIG5ldyBBY3RpdmVYT2JqZWN0KGFjdGl2ZXhtb2Rlc1tpXSlcblx0XHRcdH1cbiAgIFx0XHRcdGNhdGNoKGUpe1xuICAgIFx0XHRcdC8vc3VwcHJlc3MgZXJyb3JcbiAgIFx0XHRcdH1cblx0XHR9XG5cdH1cblx0ZWxzZSBpZiAod2luZG93LlhNTEh0dHBSZXF1ZXN0KSAvLyBpZiBNb3ppbGxhLCBTYWZhcmkgZXRjXG4gIFx0e1xuICBcdFx0cmV0dXJuIG5ldyBYTUxIdHRwUmVxdWVzdCgpXG4gXHR9XG4gXHRlbHNlXG4gXHR7XG5cdFx0cmV0dXJuIGZhbHNlO1xuIFx0fVxufVxuXG4vKlxuICogREVCVUdHSU5HIE9OTFlcbiAqL1xuUElYSS5ydW5MaXN0ID0gZnVuY3Rpb24oaXRlbSlcbntcblx0Y29uc29sZS5sb2coXCI+Pj4+Pj4+Pj5cIilcblx0Y29uc29sZS5sb2coXCJfXCIpXG5cdHZhciBzYWZlID0gMDtcblx0dmFyIHRtcCA9IGl0ZW0uZmlyc3Q7XG5cdGNvbnNvbGUubG9nKHRtcCk7XG5cblx0d2hpbGUodG1wLl9pTmV4dClcblx0e1xuXHRcdHNhZmUrKztcblx0XHR0bXAgPSB0bXAuX2lOZXh0O1xuXHRcdGNvbnNvbGUubG9nKHRtcCk7XG5cdC8vXHRjb25zb2xlLmxvZyh0bXApO1xuXG5cdFx0aWYoc2FmZSA+IDEwMClcblx0XHR7XG5cdFx0XHRjb25zb2xlLmxvZyhcIkJSRUFLXCIpXG5cdFx0XHRicmVha1xuXHRcdH1cblx0fVxufVxuXG5cblxuXG5cblxuLyoqXG4gKiBodHRwczovL2dpdGh1Yi5jb20vbXJkb29iL2V2ZW50dGFyZ2V0LmpzL1xuICogVEhhbmtTIG1yIERPb2IhXG4gKi9cblxuLyoqXG4gKiBBZGRzIGV2ZW50IGVtaXR0ZXIgZnVuY3Rpb25hbGl0eSB0byBhIGNsYXNzXG4gKlxuICogQGNsYXNzIEV2ZW50VGFyZ2V0XG4gKiBAZXhhbXBsZVxuICpcdFx0ZnVuY3Rpb24gTXlFbWl0dGVyKCkge1xuICpcdFx0XHRQSVhJLkV2ZW50VGFyZ2V0LmNhbGwodGhpcyk7IC8vbWl4ZXMgaW4gZXZlbnQgdGFyZ2V0IHN0dWZmXG4gKlx0XHR9XG4gKlxuICpcdFx0dmFyIGVtID0gbmV3IE15RW1pdHRlcigpO1xuICpcdFx0ZW0uZW1pdCh7IHR5cGU6ICdldmVudE5hbWUnLCBkYXRhOiAnc29tZSBkYXRhJyB9KTtcbiAqL1xuUElYSS5FdmVudFRhcmdldCA9IGZ1bmN0aW9uICgpIHtcblxuXHR2YXIgbGlzdGVuZXJzID0ge307XG5cblx0dGhpcy5hZGRFdmVudExpc3RlbmVyID0gdGhpcy5vbiA9IGZ1bmN0aW9uICggdHlwZSwgbGlzdGVuZXIgKSB7XG5cblxuXHRcdGlmICggbGlzdGVuZXJzWyB0eXBlIF0gPT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0bGlzdGVuZXJzWyB0eXBlIF0gPSBbXTtcblxuXHRcdH1cblxuXHRcdGlmICggbGlzdGVuZXJzWyB0eXBlIF0uaW5kZXhPZiggbGlzdGVuZXIgKSA9PT0gLSAxICkge1xuXG5cdFx0XHRsaXN0ZW5lcnNbIHR5cGUgXS5wdXNoKCBsaXN0ZW5lciApO1xuXHRcdH1cblxuXHR9O1xuXG5cdHRoaXMuZGlzcGF0Y2hFdmVudCA9IHRoaXMuZW1pdCA9IGZ1bmN0aW9uICggZXZlbnQgKSB7XG5cblx0XHRpZiAoICFsaXN0ZW5lcnNbIGV2ZW50LnR5cGUgXSB8fCAhbGlzdGVuZXJzWyBldmVudC50eXBlIF0ubGVuZ3RoICkge1xuXG5cdFx0XHRyZXR1cm47XG5cblx0XHR9XG5cblx0XHRmb3IodmFyIGkgPSAwLCBsID0gbGlzdGVuZXJzWyBldmVudC50eXBlIF0ubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cblx0XHRcdGxpc3RlbmVyc1sgZXZlbnQudHlwZSBdWyBpIF0oIGV2ZW50ICk7XG5cblx0XHR9XG5cblx0fTtcblxuXHR0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSB0aGlzLm9mZiA9IGZ1bmN0aW9uICggdHlwZSwgbGlzdGVuZXIgKSB7XG5cblx0XHR2YXIgaW5kZXggPSBsaXN0ZW5lcnNbIHR5cGUgXS5pbmRleE9mKCBsaXN0ZW5lciApO1xuXG5cdFx0aWYgKCBpbmRleCAhPT0gLSAxICkge1xuXG5cdFx0XHRsaXN0ZW5lcnNbIHR5cGUgXS5zcGxpY2UoIGluZGV4LCAxICk7XG5cblx0XHR9XG5cblx0fTtcblxufTtcblxuLyoqXG4gKiBAYXV0aG9yIE1hdCBHcm92ZXMgaHR0cDovL21hdGdyb3Zlcy5jb20vIEBEb29ybWF0MjNcbiAqL1xuXG4vKipcbiAqIFRoaXMgaGVscGVyIGZ1bmN0aW9uIHdpbGwgYXV0b21hdGljYWxseSBkZXRlY3Qgd2hpY2ggcmVuZGVyZXIgeW91IHNob3VsZCBiZSB1c2luZy5cbiAqIFdlYkdMIGlzIHRoZSBwcmVmZXJyZWQgcmVuZGVyZXIgYXMgaXQgaXMgYSBsb3QgZmFzdGVzdC4gSWYgd2ViR0wgaXMgbm90IHN1cHBvcnRlZCBieVxuICogdGhlIGJyb3dzZXIgdGhlbiB0aGlzIGZ1bmN0aW9uIHdpbGwgcmV0dXJuIGEgY2FudmFzIHJlbmRlcmVyXG4gKlxuICogQG1ldGhvZCBhdXRvRGV0ZWN0UmVuZGVyZXJcbiAqIEBzdGF0aWNcbiAqIEBwYXJhbSB3aWR0aCB7TnVtYmVyfSB0aGUgd2lkdGggb2YgdGhlIHJlbmRlcmVycyB2aWV3XG4gKiBAcGFyYW0gaGVpZ2h0IHtOdW1iZXJ9IHRoZSBoZWlnaHQgb2YgdGhlIHJlbmRlcmVycyB2aWV3XG4gKiBAcGFyYW0gdmlldyB7Q2FudmFzfSB0aGUgY2FudmFzIHRvIHVzZSBhcyBhIHZpZXcsIG9wdGlvbmFsXG4gKiBAcGFyYW0gdHJhbnNwYXJlbnQ9ZmFsc2Uge0Jvb2xlYW59IHRoZSB0cmFuc3BhcmVuY3kgb2YgdGhlIHJlbmRlciB2aWV3LCBkZWZhdWx0IGZhbHNlXG4gKiBAcGFyYW0gYW50aWFsaWFzPWZhbHNlIHtCb29sZWFufSBzZXRzIGFudGlhbGlhcyAob25seSBhcHBsaWNhYmxlIGluIHdlYkdMIGNocm9tZSBhdCB0aGUgbW9tZW50KVxuICpcbiAqIGFudGlhbGlhc1xuICovXG5QSVhJLmF1dG9EZXRlY3RSZW5kZXJlciA9IGZ1bmN0aW9uKHdpZHRoLCBoZWlnaHQsIHZpZXcsIHRyYW5zcGFyZW50LCBhbnRpYWxpYXMpXG57XG5cdGlmKCF3aWR0aCl3aWR0aCA9IDgwMDtcblx0aWYoIWhlaWdodCloZWlnaHQgPSA2MDA7XG5cblx0Ly8gQk9SUk9XRUQgZnJvbSBNciBEb29iIChtcmRvb2IuY29tKVxuXHR2YXIgd2ViZ2wgPSAoIGZ1bmN0aW9uICgpIHsgdHJ5IHsgdmFyIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICdjYW52YXMnICk7IHJldHVybiAhISB3aW5kb3cuV2ViR0xSZW5kZXJpbmdDb250ZXh0ICYmICggY2FudmFzLmdldENvbnRleHQoICd3ZWJnbCcgKSB8fCBjYW52YXMuZ2V0Q29udGV4dCggJ2V4cGVyaW1lbnRhbC13ZWJnbCcgKSApOyB9IGNhdGNoKCBlICkgeyByZXR1cm4gZmFsc2U7IH0gfSApKCk7XG5cblx0aWYod2ViZ2wpXG5cdHtcblx0XHR2YXIgaWUgPSAgKG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5pbmRleE9mKCdtc2llJykgIT0gLTEpO1xuXHRcdCB3ZWJnbCA9ICFpZTtcblx0fVxuXHRcblx0Ly9jb25zb2xlLmxvZyh3ZWJnbCk7XG5cdGlmKCB3ZWJnbCApXG5cdHtcblx0XHRyZXR1cm4gbmV3IFBJWEkuV2ViR0xSZW5kZXJlcih3aWR0aCwgaGVpZ2h0LCB2aWV3LCB0cmFuc3BhcmVudCwgYW50aWFsaWFzKTtcblx0fVxuXG5cdHJldHVyblx0bmV3IFBJWEkuQ2FudmFzUmVuZGVyZXIod2lkdGgsIGhlaWdodCwgdmlldywgdHJhbnNwYXJlbnQpO1xufTtcblxuXG5cbi8qXG5cdFBvbHlLIGxpYnJhcnlcblx0dXJsOiBodHRwOi8vcG9seWsuaXZhbmsubmV0XG5cdFJlbGVhc2VkIHVuZGVyIE1JVCBsaWNlbmNlLlxuXG5cdENvcHlyaWdodCAoYykgMjAxMiBJdmFuIEt1Y2tpclxuXG5cdFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uXG5cdG9idGFpbmluZyBhIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uXG5cdGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dFxuXHRyZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSxcblx0Y29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGxcblx0Y29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlXG5cdFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nXG5cdGNvbmRpdGlvbnM6XG5cblx0VGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmVcblx0aW5jbHVkZWQgaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG5cblx0VEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCxcblx0RVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTXG5cdE9GIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EXG5cdE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUXG5cdEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLFxuXHRXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkdcblx0RlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUlxuXHRPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cblx0VGhpcyBpcyBhbiBhbWF6aW5nIGxpYiFcblxuXHRzbGlnaHRseSBtb2RpZmllZCBieSBtYXQgZ3JvdmVzIChtYXRncm92ZXMuY29tKTtcbiovXG5cblBJWEkuUG9seUsgPSB7fTtcblxuLyoqXG4gKiBUcmlhbmd1bGF0ZXMgc2hhcGVzIGZvciB3ZWJHTCBncmFwaGljIGZpbGxzXG4gKlxuICogQG1ldGhvZCBUcmlhbmd1bGF0ZVxuICogQG5hbWVzcGFjZSBQb2x5S1xuICogQGNvbnN0cnVjdG9yXG4gKi9cblBJWEkuUG9seUsuVHJpYW5ndWxhdGUgPSBmdW5jdGlvbihwKVxue1xuXHR2YXIgc2lnbiA9IHRydWU7XG5cblx0dmFyIG4gPSBwLmxlbmd0aD4+MTtcblx0aWYobjwzKSByZXR1cm4gW107XG5cdHZhciB0Z3MgPSBbXTtcblx0dmFyIGF2bCA9IFtdO1xuXHRmb3IodmFyIGk9MDsgaTxuOyBpKyspIGF2bC5wdXNoKGkpO1xuXG5cdHZhciBpID0gMDtcblx0dmFyIGFsID0gbjtcblx0d2hpbGUoYWwgPiAzKVxuXHR7XG5cdFx0dmFyIGkwID0gYXZsWyhpKzApJWFsXTtcblx0XHR2YXIgaTEgPSBhdmxbKGkrMSklYWxdO1xuXHRcdHZhciBpMiA9IGF2bFsoaSsyKSVhbF07XG5cblx0XHR2YXIgYXggPSBwWzIqaTBdLCAgYXkgPSBwWzIqaTArMV07XG5cdFx0dmFyIGJ4ID0gcFsyKmkxXSwgIGJ5ID0gcFsyKmkxKzFdO1xuXHRcdHZhciBjeCA9IHBbMippMl0sICBjeSA9IHBbMippMisxXTtcblxuXHRcdHZhciBlYXJGb3VuZCA9IGZhbHNlO1xuXHRcdGlmKFBJWEkuUG9seUsuX2NvbnZleChheCwgYXksIGJ4LCBieSwgY3gsIGN5LCBzaWduKSlcblx0XHR7XG5cdFx0XHRlYXJGb3VuZCA9IHRydWU7XG5cdFx0XHRmb3IodmFyIGo9MDsgajxhbDsgaisrKVxuXHRcdFx0e1xuXHRcdFx0XHR2YXIgdmkgPSBhdmxbal07XG5cdFx0XHRcdGlmKHZpPT1pMCB8fCB2aT09aTEgfHwgdmk9PWkyKSBjb250aW51ZTtcblx0XHRcdFx0aWYoUElYSS5Qb2x5Sy5fUG9pbnRJblRyaWFuZ2xlKHBbMip2aV0sIHBbMip2aSsxXSwgYXgsIGF5LCBieCwgYnksIGN4LCBjeSkpIHtlYXJGb3VuZCA9IGZhbHNlOyBicmVhazt9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGlmKGVhckZvdW5kKVxuXHRcdHtcblx0XHRcdHRncy5wdXNoKGkwLCBpMSwgaTIpO1xuXHRcdFx0YXZsLnNwbGljZSgoaSsxKSVhbCwgMSk7XG5cdFx0XHRhbC0tO1xuXHRcdFx0aSA9IDA7XG5cdFx0fVxuXHRcdGVsc2UgaWYoaSsrID4gMyphbClcblx0XHR7XG5cdFx0XHQvLyBuZWVkIHRvIGZsaXAgZmxpcCByZXZlcnNlIGl0IVxuXHRcdFx0Ly8gcmVzZXQhXG5cdFx0XHRpZihzaWduKVxuXHRcdFx0e1xuXHRcdFx0XHR2YXIgdGdzID0gW107XG5cdFx0XHRcdGF2bCA9IFtdO1xuXHRcdFx0XHRmb3IodmFyIGk9MDsgaTxuOyBpKyspIGF2bC5wdXNoKGkpO1xuXG5cdFx0XHRcdGkgPSAwO1xuXHRcdFx0XHRhbCA9IG47XG5cblx0XHRcdFx0c2lnbiA9IGZhbHNlO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZVxuXHRcdFx0e1xuXHRcdFx0XHRjb25zb2xlLmxvZyhcIlBJWEkgV2FybmluZzogc2hhcGUgdG9vIGNvbXBsZXggdG8gZmlsbFwiKVxuXHRcdFx0XHRyZXR1cm4gW107XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cdHRncy5wdXNoKGF2bFswXSwgYXZsWzFdLCBhdmxbMl0pO1xuXHRyZXR1cm4gdGdzO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBhIHBvaW50IGlzIHdpdGhpbiBhIHRyaWFuZ2xlXG4gKlxuICogQGNsYXNzIF9Qb2ludEluVHJpYW5nbGVcbiAqIEBuYW1lc3BhY2UgUG9seUtcbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuUG9seUsuX1BvaW50SW5UcmlhbmdsZSA9IGZ1bmN0aW9uKHB4LCBweSwgYXgsIGF5LCBieCwgYnksIGN4LCBjeSlcbntcblx0dmFyIHYweCA9IGN4LWF4O1xuXHR2YXIgdjB5ID0gY3ktYXk7XG5cdHZhciB2MXggPSBieC1heDtcblx0dmFyIHYxeSA9IGJ5LWF5O1xuXHR2YXIgdjJ4ID0gcHgtYXg7XG5cdHZhciB2MnkgPSBweS1heTtcblxuXHR2YXIgZG90MDAgPSB2MHgqdjB4K3YweSp2MHk7XG5cdHZhciBkb3QwMSA9IHYweCp2MXgrdjB5KnYxeTtcblx0dmFyIGRvdDAyID0gdjB4KnYyeCt2MHkqdjJ5O1xuXHR2YXIgZG90MTEgPSB2MXgqdjF4K3YxeSp2MXk7XG5cdHZhciBkb3QxMiA9IHYxeCp2MngrdjF5KnYyeTtcblxuXHR2YXIgaW52RGVub20gPSAxIC8gKGRvdDAwICogZG90MTEgLSBkb3QwMSAqIGRvdDAxKTtcblx0dmFyIHUgPSAoZG90MTEgKiBkb3QwMiAtIGRvdDAxICogZG90MTIpICogaW52RGVub207XG5cdHZhciB2ID0gKGRvdDAwICogZG90MTIgLSBkb3QwMSAqIGRvdDAyKSAqIGludkRlbm9tO1xuXG5cdC8vIENoZWNrIGlmIHBvaW50IGlzIGluIHRyaWFuZ2xlXG5cdHJldHVybiAodSA+PSAwKSAmJiAodiA+PSAwKSAmJiAodSArIHYgPCAxKTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYSBzaGFwZSBpcyBjb252ZXhcbiAqXG4gKiBAY2xhc3MgX2NvbnZleFxuICogQG5hbWVzcGFjZSBQb2x5S1xuICogQHByaXZhdGVcbiAqL1xuUElYSS5Qb2x5Sy5fY29udmV4ID0gZnVuY3Rpb24oYXgsIGF5LCBieCwgYnksIGN4LCBjeSwgc2lnbilcbntcblx0cmV0dXJuICgoYXktYnkpKihjeC1ieCkgKyAoYngtYXgpKihjeS1ieSkgPj0gMCkgPT0gc2lnbjtcbn1cblxuLyoqXG4gKiBAYXV0aG9yIE1hdCBHcm92ZXMgaHR0cDovL21hdGdyb3Zlcy5jb20vIEBEb29ybWF0MjNcbiAqL1xuXG5cblBJWEkuaW5pdERlZmF1bHRTaGFkZXJzID0gZnVuY3Rpb24oKSBcbntcblx0UElYSS5wcmltaXRpdmVTaGFkZXIgPSBuZXcgUElYSS5QcmltaXRpdmVTaGFkZXIoKTtcbiAgUElYSS5wcmltaXRpdmVTaGFkZXIuaW5pdCgpO1xuXG4gIFBJWEkuc3RyaXBTaGFkZXIgPSBuZXcgUElYSS5TdHJpcFNoYWRlcigpO1xuICBQSVhJLnN0cmlwU2hhZGVyLmluaXQoKTtcblxuXHRQSVhJLmRlZmF1bHRTaGFkZXIgPSBuZXcgUElYSS5QaXhpU2hhZGVyKCk7XG5cdFBJWEkuZGVmYXVsdFNoYWRlci5pbml0KCk7XG5cbiAgdmFyIGdsID0gUElYSS5nbDsgXG4gIHZhciBzaGFkZXJQcm9ncmFtID0gUElYSS5kZWZhdWx0U2hhZGVyLnByb2dyYW07XG4gXG5cbiAgZ2wudXNlUHJvZ3JhbShzaGFkZXJQcm9ncmFtKTtcbiAgXG4gIGdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KFBJWEkuZGVmYXVsdFNoYWRlci5hVmVydGV4UG9zaXRpb24pO1xuICBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShQSVhJLmRlZmF1bHRTaGFkZXIuY29sb3JBdHRyaWJ1dGUpO1xuICBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShQSVhJLmRlZmF1bHRTaGFkZXIuYVRleHR1cmVDb29yZCk7XG59XG5cblBJWEkuYWN0aXZhdGVQcmltaXRpdmVTaGFkZXIgPSBmdW5jdGlvbigpXG57XG4gIHZhciBnbCA9IFBJWEkuZ2w7XG4gIFxuICBnbC51c2VQcm9ncmFtKFBJWEkucHJpbWl0aXZlU2hhZGVyLnByb2dyYW0pO1xuICBcbiAgZ2wuZGlzYWJsZVZlcnRleEF0dHJpYkFycmF5KFBJWEkuZGVmYXVsdFNoYWRlci5hVmVydGV4UG9zaXRpb24pO1xuICBnbC5kaXNhYmxlVmVydGV4QXR0cmliQXJyYXkoUElYSS5kZWZhdWx0U2hhZGVyLmNvbG9yQXR0cmlidXRlKTtcbiAgZ2wuZGlzYWJsZVZlcnRleEF0dHJpYkFycmF5KFBJWEkuZGVmYXVsdFNoYWRlci5hVGV4dHVyZUNvb3JkKTtcblxuICBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShQSVhJLnByaW1pdGl2ZVNoYWRlci5hVmVydGV4UG9zaXRpb24pO1xuICBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShQSVhJLnByaW1pdGl2ZVNoYWRlci5jb2xvckF0dHJpYnV0ZSk7XG59IFxuXG5QSVhJLmRlYWN0aXZhdGVQcmltaXRpdmVTaGFkZXIgPSBmdW5jdGlvbigpXG57XG4gIHZhciBnbCA9IFBJWEkuZ2w7XG5cbiAgZ2wudXNlUHJvZ3JhbShQSVhJLmRlZmF1bHRTaGFkZXIucHJvZ3JhbSk7XG4gIFxuICBnbC5kaXNhYmxlVmVydGV4QXR0cmliQXJyYXkoUElYSS5wcmltaXRpdmVTaGFkZXIuYVZlcnRleFBvc2l0aW9uKTtcbiAgZ2wuZGlzYWJsZVZlcnRleEF0dHJpYkFycmF5KFBJWEkucHJpbWl0aXZlU2hhZGVyLmNvbG9yQXR0cmlidXRlKTtcblxuICBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShQSVhJLmRlZmF1bHRTaGFkZXIuYVZlcnRleFBvc2l0aW9uKTtcbiAgZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoUElYSS5kZWZhdWx0U2hhZGVyLmNvbG9yQXR0cmlidXRlKTtcbiAgZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoUElYSS5kZWZhdWx0U2hhZGVyLmFUZXh0dXJlQ29vcmQpO1xuXG59XG5cblBJWEkuYWN0aXZhdGVTdHJpcFNoYWRlciA9IGZ1bmN0aW9uKClcbntcbiAgdmFyIGdsID0gUElYSS5nbDtcbiAgXG4gIGdsLnVzZVByb2dyYW0oUElYSS5zdHJpcFNoYWRlci5wcm9ncmFtKTtcbiAvLyBnbC5kaXNhYmxlVmVydGV4QXR0cmliQXJyYXkoUElYSS5kZWZhdWx0U2hhZGVyLmFUZXh0dXJlQ29vcmQpO1xufSBcblxuUElYSS5kZWFjdGl2YXRlU3RyaXBTaGFkZXIgPSBmdW5jdGlvbigpXG57XG4gIHZhciBnbCA9IFBJWEkuZ2w7XG5cbiAgZ2wudXNlUHJvZ3JhbShQSVhJLmRlZmF1bHRTaGFkZXIucHJvZ3JhbSk7XG4gIC8vZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoUElYSS5kZWZhdWx0U2hhZGVyLmFUZXh0dXJlQ29vcmQpO1xufVxuXG4vKlxuXG5TSEFERVIgQ09NUElMRVIgSEVMUEVSU1xuKi9cblxuUElYSS5Db21waWxlVmVydGV4U2hhZGVyID0gZnVuY3Rpb24oZ2wsIHNoYWRlclNyYylcbntcbiAgcmV0dXJuIFBJWEkuX0NvbXBpbGVTaGFkZXIoZ2wsIHNoYWRlclNyYywgZ2wuVkVSVEVYX1NIQURFUik7XG59XG5cblBJWEkuQ29tcGlsZUZyYWdtZW50U2hhZGVyID0gZnVuY3Rpb24oZ2wsIHNoYWRlclNyYylcbntcbiAgcmV0dXJuIFBJWEkuX0NvbXBpbGVTaGFkZXIoZ2wsIHNoYWRlclNyYywgZ2wuRlJBR01FTlRfU0hBREVSKTtcbn1cblxuUElYSS5fQ29tcGlsZVNoYWRlciA9IGZ1bmN0aW9uKGdsLCBzaGFkZXJTcmMsIHNoYWRlclR5cGUpXG57XG4gIHZhciBzcmMgPSBzaGFkZXJTcmMuam9pbihcIlxcblwiKTtcbiAgdmFyIHNoYWRlciA9IGdsLmNyZWF0ZVNoYWRlcihzaGFkZXJUeXBlKTtcbiAgZ2wuc2hhZGVyU291cmNlKHNoYWRlciwgc3JjKTtcbiAgZ2wuY29tcGlsZVNoYWRlcihzaGFkZXIpO1xuXG4gIGlmICghZ2wuZ2V0U2hhZGVyUGFyYW1ldGVyKHNoYWRlciwgZ2wuQ09NUElMRV9TVEFUVVMpKSB7XG4gICAgY29uc29sZS5sb2coZ2wuZ2V0U2hhZGVySW5mb0xvZyhzaGFkZXIpKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHJldHVybiBzaGFkZXI7XG59XG5cblxuUElYSS5jb21waWxlUHJvZ3JhbSA9IGZ1bmN0aW9uKHZlcnRleFNyYywgZnJhZ21lbnRTcmMpXG57XG5cdHZhciBnbCA9IFBJWEkuZ2w7XG5cdHZhciBmcmFnbWVudFNoYWRlciA9IFBJWEkuQ29tcGlsZUZyYWdtZW50U2hhZGVyKGdsLCBmcmFnbWVudFNyYyk7XG5cdHZhciB2ZXJ0ZXhTaGFkZXIgPSBQSVhJLkNvbXBpbGVWZXJ0ZXhTaGFkZXIoZ2wsIHZlcnRleFNyYyk7XG5cdFxuXHR2YXIgc2hhZGVyUHJvZ3JhbSA9IGdsLmNyZWF0ZVByb2dyYW0oKTtcblx0XG4gICAgZ2wuYXR0YWNoU2hhZGVyKHNoYWRlclByb2dyYW0sIHZlcnRleFNoYWRlcik7XG4gICAgZ2wuYXR0YWNoU2hhZGVyKHNoYWRlclByb2dyYW0sIGZyYWdtZW50U2hhZGVyKTtcbiAgICBnbC5saW5rUHJvZ3JhbShzaGFkZXJQcm9ncmFtKTtcblxuICAgIGlmICghZ2wuZ2V0UHJvZ3JhbVBhcmFtZXRlcihzaGFkZXJQcm9ncmFtLCBnbC5MSU5LX1NUQVRVUykpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJDb3VsZCBub3QgaW5pdGlhbGlzZSBzaGFkZXJzXCIpO1xuICAgIH1cblxuXHRyZXR1cm4gc2hhZGVyUHJvZ3JhbTtcbn0gXG5cbi8qKlxuICogQGF1dGhvciBNYXQgR3JvdmVzIGh0dHA6Ly9tYXRncm92ZXMuY29tLyBARG9vcm1hdDIzXG4gKi9cblxuXG5QSVhJLlBpeGlTaGFkZXIgPSBmdW5jdGlvbigpXG57XG5cdC8vIHRoZSB3ZWJHTCBwcm9ncmFtLi5cblx0dGhpcy5wcm9ncmFtO1xuXHRcblx0dGhpcy5mcmFnbWVudFNyYyA9IFtcblx0ICBcInByZWNpc2lvbiBsb3dwIGZsb2F0O1wiLFxuXHQgIFwidmFyeWluZyB2ZWMyIHZUZXh0dXJlQ29vcmQ7XCIsXG5cdCAgXCJ2YXJ5aW5nIGZsb2F0IHZDb2xvcjtcIixcblx0ICBcInVuaWZvcm0gc2FtcGxlcjJEIHVTYW1wbGVyO1wiLFxuXHQgIFwidm9pZCBtYWluKHZvaWQpIHtcIixcblx0ICAgIFwiZ2xfRnJhZ0NvbG9yID0gdGV4dHVyZTJEKHVTYW1wbGVyLCB2VGV4dHVyZUNvb3JkKSAqIHZDb2xvcjtcIixcblx0ICBcIn1cIlxuXHRdO1xuXHRcbn1cblxuUElYSS5QaXhpU2hhZGVyLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24oKVxue1xuXHR2YXIgcHJvZ3JhbSA9IFBJWEkuY29tcGlsZVByb2dyYW0odGhpcy52ZXJ0ZXhTcmMgfHwgUElYSS5QaXhpU2hhZGVyLmRlZmF1bHRWZXJ0ZXhTcmMsIHRoaXMuZnJhZ21lbnRTcmMpXG5cdFxuXHR2YXIgZ2wgPSBQSVhJLmdsO1xuXHRcbiAgICBnbC51c2VQcm9ncmFtKHByb2dyYW0pO1xuXHRcblx0Ly8gZ2V0IGFuZCBzdG9yZSB0aGUgdW5pZm9ybXMgZm9yIHRoZSBzaGFkZXJcblx0dGhpcy51U2FtcGxlciA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCBcInVTYW1wbGVyXCIpO1xuXHR0aGlzLnByb2plY3Rpb25WZWN0b3IgPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgXCJwcm9qZWN0aW9uVmVjdG9yXCIpO1xuXHR0aGlzLm9mZnNldFZlY3RvciA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCBcIm9mZnNldFZlY3RvclwiKTtcbiAgICAvL3RoaXMuZGltZW5zaW9ucyA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbih0aGlzLnByb2dyYW0sIFwiZGltZW5zaW9uc1wiKTtcbiAgICBcbiAgICAvLyBnZXQgYW5kIHN0b3JlIHRoZSBhdHRyaWJ1dGVzXG4gICAgdGhpcy5hVmVydGV4UG9zaXRpb24gPSBnbC5nZXRBdHRyaWJMb2NhdGlvbihwcm9ncmFtLCBcImFWZXJ0ZXhQb3NpdGlvblwiKTtcblx0dGhpcy5jb2xvckF0dHJpYnV0ZSA9IGdsLmdldEF0dHJpYkxvY2F0aW9uKHByb2dyYW0sIFwiYUNvbG9yXCIpO1xuXHR0aGlzLmFUZXh0dXJlQ29vcmQgPSBnbC5nZXRBdHRyaWJMb2NhdGlvbihwcm9ncmFtLCBcImFUZXh0dXJlQ29vcmRcIik7XG5cdCAgXG4gICAgLy8gYWRkIHRob3NlIGN1c3RvbSBzaGFkZXJzIVxuICAgIGZvciAodmFyIGtleSBpbiB0aGlzLnVuaWZvcm1zKVxuICAgIHtcbiAgICAgICBcbiAgICBcdC8vIGdldCB0aGUgdW5pZm9ybSBsb2NhdGlvbnMuLlxuXHQvL1x0cHJvZ3JhbVtrZXldID0gXG4gICAgICAgIHRoaXMudW5pZm9ybXNba2V5XS51bmlmb3JtTG9jYXRpb24gPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwga2V5KTtcblxuICAgICAgXG4gICAgfVxuICBcblx0dGhpcy5wcm9ncmFtID0gcHJvZ3JhbTtcbn1cblxuUElYSS5QaXhpU2hhZGVyLnByb3RvdHlwZS5zeW5jVW5pZm9ybXMgPSBmdW5jdGlvbigpXG57XG5cdHZhciBnbCA9IFBJWEkuZ2w7XG5cdFxuXHRmb3IgKHZhciBrZXkgaW4gdGhpcy51bmlmb3JtcykgXG4gICAge1xuICAgIFx0Ly92YXIgXG4gICAgXHR2YXIgdHlwZSA9IHRoaXMudW5pZm9ybXNba2V5XS50eXBlO1xuICAgIFx0XG4gICAgXHQvLyBuZWVkIHRvIGdyb3cgdGhpcyFcbiAgICBcdGlmKHR5cGUgPT0gXCJmXCIpXG4gICAgXHR7XG5cdFx0XHRnbC51bmlmb3JtMWYodGhpcy51bmlmb3Jtc1trZXldLnVuaWZvcm1Mb2NhdGlvbiwgdGhpcy51bmlmb3Jtc1trZXldLnZhbHVlKTtcbiAgICBcdH1cbiAgICBcdGlmKHR5cGUgPT0gXCJmMlwiKVxuICAgIFx0e1xuICAgIFx0Ly9cdGNvbnNvbGUubG9nKHRoaXMucHJvZ3JhbVtrZXldKVxuXHRcdFx0Z2wudW5pZm9ybTJmKHRoaXMudW5pZm9ybXNba2V5XS51bmlmb3JtTG9jYXRpb24sIHRoaXMudW5pZm9ybXNba2V5XS52YWx1ZS54LCB0aGlzLnVuaWZvcm1zW2tleV0udmFsdWUueSk7XG4gICAgXHR9XG4gICAgICAgIGVsc2UgaWYodHlwZSA9PSBcImY0XCIpXG4gICAgICAgIHtcbiAgICAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy51bmlmb3Jtc1trZXldLnZhbHVlKVxuICAgICAgICAgICAgZ2wudW5pZm9ybTRmdih0aGlzLnVuaWZvcm1zW2tleV0udW5pZm9ybUxvY2F0aW9uLCB0aGlzLnVuaWZvcm1zW2tleV0udmFsdWUpO1xuICAgICAgICB9XG4gICAgXHRlbHNlIGlmKHR5cGUgPT0gXCJtYXQ0XCIpXG4gICAgXHR7XG4gICAgXHRcdGdsLnVuaWZvcm1NYXRyaXg0ZnYodGhpcy51bmlmb3Jtc1trZXldLnVuaWZvcm1Mb2NhdGlvbiwgZmFsc2UsIHRoaXMudW5pZm9ybXNba2V5XS52YWx1ZSk7XG4gICAgXHR9XG4gICAgXHRlbHNlIGlmKHR5cGUgPT0gXCJzYW1wbGVyMkRcIilcbiAgICBcdHtcbiAgICBcdFx0Ly8gZmlyc3QgdGV4dHVyZS4uLlxuICAgIFx0XHR2YXIgdGV4dHVyZSA9IHRoaXMudW5pZm9ybXNba2V5XS52YWx1ZTtcbiAgICBcdFx0XG4gICAgXHRcdGdsLmFjdGl2ZVRleHR1cmUoZ2wuVEVYVFVSRTEpO1xuXHQgICAgXHRnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCB0ZXh0dXJlLmJhc2VUZXh0dXJlLl9nbFRleHR1cmUpO1xuXHQgICAgXHRcbiAgICBcdFx0Z2wudW5pZm9ybTFpKHRoaXMudW5pZm9ybXNba2V5XS51bmlmb3JtTG9jYXRpb24sIDEpO1xuICAgIFx0XHRcbiAgICBcdFx0Ly8gYWN0aXZhdGUgdGV4dHVyZS4uXG4gICAgXHRcdC8vIGdsLnVuaWZvcm1NYXRyaXg0ZnYodGhpcy5wcm9ncmFtW2tleV0sIGZhbHNlLCB0aGlzLnVuaWZvcm1zW2tleV0udmFsdWUpO1xuICAgIFx0XHQvLyBnbC51bmlmb3JtTWF0cml4NGZ2KHRoaXMucHJvZ3JhbVtrZXldLCBmYWxzZSwgdGhpcy51bmlmb3Jtc1trZXldLnZhbHVlKTtcbiAgICBcdH1cbiAgICB9XG4gICAgXG59XG5cblBJWEkuUGl4aVNoYWRlci5kZWZhdWx0VmVydGV4U3JjID0gW1xuICBcImF0dHJpYnV0ZSB2ZWMyIGFWZXJ0ZXhQb3NpdGlvbjtcIixcbiAgXCJhdHRyaWJ1dGUgdmVjMiBhVGV4dHVyZUNvb3JkO1wiLFxuICBcImF0dHJpYnV0ZSBmbG9hdCBhQ29sb3I7XCIsXG4gIFxuICBcInVuaWZvcm0gdmVjMiBwcm9qZWN0aW9uVmVjdG9yO1wiLFxuIFwidW5pZm9ybSB2ZWMyIG9mZnNldFZlY3RvcjtcIixcbiAgXCJ2YXJ5aW5nIHZlYzIgdlRleHR1cmVDb29yZDtcIixcbiAgXG4gIFwidmFyeWluZyBmbG9hdCB2Q29sb3I7XCIsXG5cbiAgXCJjb25zdCB2ZWMyIGNlbnRlciA9IHZlYzIoLTEuMCwgMS4wKTtcIixcbiAgXCJ2b2lkIG1haW4odm9pZCkge1wiLFxuICAgIFwiZ2xfUG9zaXRpb24gPSB2ZWM0KCAoKGFWZXJ0ZXhQb3NpdGlvbiArIG9mZnNldFZlY3RvcikgLyBwcm9qZWN0aW9uVmVjdG9yKSArIGNlbnRlciAsIDAuMCwgMS4wKTtcIixcbiAgICBcInZUZXh0dXJlQ29vcmQgPSBhVGV4dHVyZUNvb3JkO1wiLFxuICAgIFwidkNvbG9yID0gYUNvbG9yO1wiLFxuICBcIn1cIlxuXTtcblxuLyoqXG4gKiBAYXV0aG9yIE1hdCBHcm92ZXMgaHR0cDovL21hdGdyb3Zlcy5jb20vIEBEb29ybWF0MjNcbiAqL1xuXG5cblBJWEkuU3RyaXBTaGFkZXIgPSBmdW5jdGlvbigpXG57XG5cdC8vIHRoZSB3ZWJHTCBwcm9ncmFtLi5cblx0dGhpcy5wcm9ncmFtO1xuXHRcbiAgICB0aGlzLmZyYWdtZW50U3JjID0gW1xuICAgICAgXCJwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcIixcbiAgICAgIFwidmFyeWluZyB2ZWMyIHZUZXh0dXJlQ29vcmQ7XCIsXG4gICAgICBcInZhcnlpbmcgZmxvYXQgdkNvbG9yO1wiLFxuICAgICAgXCJ1bmlmb3JtIGZsb2F0IGFscGhhO1wiLFxuICAgICAgXCJ1bmlmb3JtIHNhbXBsZXIyRCB1U2FtcGxlcjtcIixcbiAgICAgIFwidm9pZCBtYWluKHZvaWQpIHtcIixcbiAgICAgICAgXCJnbF9GcmFnQ29sb3IgPSB0ZXh0dXJlMkQodVNhbXBsZXIsIHZlYzIodlRleHR1cmVDb29yZC54LCB2VGV4dHVyZUNvb3JkLnkpKTtcIixcbiAgICAgICAgXCJnbF9GcmFnQ29sb3IgPSBnbF9GcmFnQ29sb3IgKiBhbHBoYTtcIixcbiAgICAgIFwifVwiXG4gICAgXTtcblxuICAgIHRoaXMudmVydGV4U3JjID0gW1xuICAgICAgXCJhdHRyaWJ1dGUgdmVjMiBhVmVydGV4UG9zaXRpb247XCIsXG4gICAgICBcImF0dHJpYnV0ZSB2ZWMyIGFUZXh0dXJlQ29vcmQ7XCIsXG4gICAgICBcImF0dHJpYnV0ZSBmbG9hdCBhQ29sb3I7XCIsXG4gICAgICBcInVuaWZvcm0gbWF0MyB0cmFuc2xhdGlvbk1hdHJpeDtcIixcbiAgICAgIFwidW5pZm9ybSB2ZWMyIHByb2plY3Rpb25WZWN0b3I7XCIsXG4gICAgICBcInZhcnlpbmcgdmVjMiB2VGV4dHVyZUNvb3JkO1wiLFxuICAgICAgXCJ2YXJ5aW5nIHZlYzIgb2Zmc2V0VmVjdG9yO1wiLFxuICAgICAgXCJ2YXJ5aW5nIGZsb2F0IHZDb2xvcjtcIixcbiAgICAgIFwidm9pZCBtYWluKHZvaWQpIHtcIixcbiAgICAgICAgXCJ2ZWMzIHYgPSB0cmFuc2xhdGlvbk1hdHJpeCAqIHZlYzMoYVZlcnRleFBvc2l0aW9uLCAxLjApO1wiLFxuICAgICAgICBcInYgLT0gb2Zmc2V0VmVjdG9yLnh5eDtcIixcbiAgICAgICAgXCJnbF9Qb3NpdGlvbiA9IHZlYzQoIHYueCAvIHByb2plY3Rpb25WZWN0b3IueCAtMS4wLCB2LnkgLyBwcm9qZWN0aW9uVmVjdG9yLnkgKyAxLjAgLCAwLjAsIDEuMCk7XCIsXG4gICAgICAgIFwidlRleHR1cmVDb29yZCA9IGFUZXh0dXJlQ29vcmQ7XCIsXG4gICAgICAgIFwidkNvbG9yID0gYUNvbG9yO1wiLFxuICAgICAgXCJ9XCJcbiAgICBdO1xufVxuXG5QSVhJLlN0cmlwU2hhZGVyLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24oKVxue1xuXHR2YXIgcHJvZ3JhbSA9IFBJWEkuY29tcGlsZVByb2dyYW0odGhpcy52ZXJ0ZXhTcmMsIHRoaXMuZnJhZ21lbnRTcmMpXG5cdFxuXHR2YXIgZ2wgPSBQSVhJLmdsO1xuXHRcbiAgICBnbC51c2VQcm9ncmFtKHByb2dyYW0pO1xuXG5cdC8vIGdldCBhbmQgc3RvcmUgdGhlIHVuaWZvcm1zIGZvciB0aGUgc2hhZGVyXG5cdHRoaXMudVNhbXBsZXIgPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgXCJ1U2FtcGxlclwiKTtcblx0dGhpcy5wcm9qZWN0aW9uVmVjdG9yID0gZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sIFwicHJvamVjdGlvblZlY3RvclwiKTtcblx0dGhpcy5vZmZzZXRWZWN0b3IgPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgXCJvZmZzZXRWZWN0b3JcIik7XG5cdHRoaXMuY29sb3JBdHRyaWJ1dGUgPSBnbC5nZXRBdHRyaWJMb2NhdGlvbihwcm9ncmFtLCBcImFDb2xvclwiKTtcblx0Ly90aGlzLmRpbWVuc2lvbnMgPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24odGhpcy5wcm9ncmFtLCBcImRpbWVuc2lvbnNcIik7XG5cdFxuXHQvLyBnZXQgYW5kIHN0b3JlIHRoZSBhdHRyaWJ1dGVzXG5cdHRoaXMuYVZlcnRleFBvc2l0aW9uID0gZ2wuZ2V0QXR0cmliTG9jYXRpb24ocHJvZ3JhbSwgXCJhVmVydGV4UG9zaXRpb25cIik7XG5cdHRoaXMuYVRleHR1cmVDb29yZCA9IGdsLmdldEF0dHJpYkxvY2F0aW9uKHByb2dyYW0sIFwiYVRleHR1cmVDb29yZFwiKTtcblx0ICBcbiAgICB0aGlzLnRyYW5zbGF0aW9uTWF0cml4ID0gZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sIFwidHJhbnNsYXRpb25NYXRyaXhcIik7XG4gICAgdGhpcy5hbHBoYSA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCBcImFscGhhXCIpO1xuICBcblx0dGhpcy5wcm9ncmFtID0gcHJvZ3JhbTtcbn1cblxuLyoqXG4gKiBAYXV0aG9yIE1hdCBHcm92ZXMgaHR0cDovL21hdGdyb3Zlcy5jb20vIEBEb29ybWF0MjNcbiAqL1xuXG5cblBJWEkuUHJpbWl0aXZlU2hhZGVyID0gZnVuY3Rpb24oKVxue1xuXHQvLyB0aGUgd2ViR0wgcHJvZ3JhbS4uXG5cdHRoaXMucHJvZ3JhbTtcbiAgICBcdFxuICAgIHRoaXMuZnJhZ21lbnRTcmMgPSBbXG4gICAgICBcInByZWNpc2lvbiBtZWRpdW1wIGZsb2F0O1wiLFxuICAgICAgXCJ2YXJ5aW5nIHZlYzQgdkNvbG9yO1wiLFxuICAgICAgXCJ2b2lkIG1haW4odm9pZCkge1wiLFxuICAgICAgICBcImdsX0ZyYWdDb2xvciA9IHZDb2xvcjtcIixcbiAgICAgIFwifVwiXG4gICAgXTtcblxuICAgIHRoaXMudmVydGV4U3JjICA9IFtcbiAgICAgIFwiYXR0cmlidXRlIHZlYzIgYVZlcnRleFBvc2l0aW9uO1wiLFxuICAgICAgXCJhdHRyaWJ1dGUgdmVjNCBhQ29sb3I7XCIsXG4gICAgICBcInVuaWZvcm0gbWF0MyB0cmFuc2xhdGlvbk1hdHJpeDtcIixcbiAgICAgIFwidW5pZm9ybSB2ZWMyIHByb2plY3Rpb25WZWN0b3I7XCIsXG4gICAgICBcInVuaWZvcm0gdmVjMiBvZmZzZXRWZWN0b3I7XCIsXG4gICAgICBcInVuaWZvcm0gZmxvYXQgYWxwaGE7XCIsXG4gICAgICBcInZhcnlpbmcgdmVjNCB2Q29sb3I7XCIsXG4gICAgICBcInZvaWQgbWFpbih2b2lkKSB7XCIsXG4gICAgICAgIFwidmVjMyB2ID0gdHJhbnNsYXRpb25NYXRyaXggKiB2ZWMzKGFWZXJ0ZXhQb3NpdGlvbiAsIDEuMCk7XCIsXG4gICAgICAgIFwidiAtPSBvZmZzZXRWZWN0b3IueHl4O1wiLFxuICAgICAgICBcImdsX1Bvc2l0aW9uID0gdmVjNCggdi54IC8gcHJvamVjdGlvblZlY3Rvci54IC0xLjAsIHYueSAvIC1wcm9qZWN0aW9uVmVjdG9yLnkgKyAxLjAgLCAwLjAsIDEuMCk7XCIsXG4gICAgICAgIFwidkNvbG9yID0gYUNvbG9yICAqIGFscGhhO1wiLFxuICAgICAgXCJ9XCJcbiAgICBdO1xuXHRcbn1cblxuUElYSS5QcmltaXRpdmVTaGFkZXIucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbigpXG57XG5cdHZhciBwcm9ncmFtID0gUElYSS5jb21waWxlUHJvZ3JhbSh0aGlzLnZlcnRleFNyYywgdGhpcy5mcmFnbWVudFNyYyk7XG5cdFxuXHR2YXIgZ2wgPSBQSVhJLmdsO1xuXHRcbiAgZ2wudXNlUHJvZ3JhbShwcm9ncmFtKTtcblx0XG5cdC8vIGdldCBhbmQgc3RvcmUgdGhlIHVuaWZvcm1zIGZvciB0aGUgc2hhZGVyXG5cdHRoaXMucHJvamVjdGlvblZlY3RvciA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCBcInByb2plY3Rpb25WZWN0b3JcIik7XG5cdHRoaXMub2Zmc2V0VmVjdG9yID0gZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sIFwib2Zmc2V0VmVjdG9yXCIpO1xuICBcbiAgLy8gZ2V0IGFuZCBzdG9yZSB0aGUgYXR0cmlidXRlc1xuICB0aGlzLmFWZXJ0ZXhQb3NpdGlvbiA9IGdsLmdldEF0dHJpYkxvY2F0aW9uKHByb2dyYW0sIFwiYVZlcnRleFBvc2l0aW9uXCIpO1xuXHR0aGlzLmNvbG9yQXR0cmlidXRlID0gZ2wuZ2V0QXR0cmliTG9jYXRpb24ocHJvZ3JhbSwgXCJhQ29sb3JcIik7XG5cdFxuICB0aGlzLnRyYW5zbGF0aW9uTWF0cml4ID0gZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sIFwidHJhbnNsYXRpb25NYXRyaXhcIik7XG4gIHRoaXMuYWxwaGEgPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgXCJhbHBoYVwiKTtcblxuXHR0aGlzLnByb2dyYW0gPSBwcm9ncmFtO1xufVxuXG4vKipcbiAqIEBhdXRob3IgTWF0IEdyb3ZlcyBodHRwOi8vbWF0Z3JvdmVzLmNvbS8gQERvb3JtYXQyM1xuICovXG5cbi8qKlxuICogQSBzZXQgb2YgZnVuY3Rpb25zIHVzZWQgYnkgdGhlIHdlYkdMIHJlbmRlcmVyIHRvIGRyYXcgdGhlIHByaW1pdGl2ZSBncmFwaGljcyBkYXRhXG4gKlxuICogQGNsYXNzIENhbnZhc0dyYXBoaWNzXG4gKi9cblBJWEkuV2ViR0xHcmFwaGljcyA9IGZ1bmN0aW9uKClcbntcblx0XG59XG5cbi8qKlxuICogUmVuZGVycyB0aGUgZ3JhcGhpY3Mgb2JqZWN0XG4gKlxuICogQHN0YXRpY1xuICogQHByaXZhdGVcbiAqIEBtZXRob2QgcmVuZGVyR3JhcGhpY3NcbiAqIEBwYXJhbSBncmFwaGljcyB7R3JhcGhpY3N9XG4gKiBAcGFyYW0gcHJvamVjdGlvbiB7T2JqZWN0fVxuICovXG5QSVhJLldlYkdMR3JhcGhpY3MucmVuZGVyR3JhcGhpY3MgPSBmdW5jdGlvbihncmFwaGljcywgcHJvamVjdGlvbilcbntcblx0dmFyIGdsID0gUElYSS5nbDtcblx0XG5cdGlmKCFncmFwaGljcy5fd2ViR0wpZ3JhcGhpY3MuX3dlYkdMID0ge3BvaW50czpbXSwgaW5kaWNlczpbXSwgbGFzdEluZGV4OjAsIFxuXHRcdFx0XHRcdFx0XHRcdFx0XHQgICBidWZmZXI6Z2wuY3JlYXRlQnVmZmVyKCksXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCAgIGluZGV4QnVmZmVyOmdsLmNyZWF0ZUJ1ZmZlcigpfTtcblx0XG5cdGlmKGdyYXBoaWNzLmRpcnR5KVxuXHR7XG5cdFx0Z3JhcGhpY3MuZGlydHkgPSBmYWxzZTtcblx0XHRcblx0XHRpZihncmFwaGljcy5jbGVhckRpcnR5KVxuXHRcdHtcblx0XHRcdGdyYXBoaWNzLmNsZWFyRGlydHkgPSBmYWxzZTtcblx0XHRcdFxuXHRcdFx0Z3JhcGhpY3MuX3dlYkdMLmxhc3RJbmRleCA9IDA7XG5cdFx0XHRncmFwaGljcy5fd2ViR0wucG9pbnRzID0gW107XG5cdFx0XHRncmFwaGljcy5fd2ViR0wuaW5kaWNlcyA9IFtdO1xuXHRcdFx0XG5cdFx0fVxuXHRcdFxuXHRcdFBJWEkuV2ViR0xHcmFwaGljcy51cGRhdGVHcmFwaGljcyhncmFwaGljcyk7XG5cdH1cblx0XG5cdFBJWEkuYWN0aXZhdGVQcmltaXRpdmVTaGFkZXIoKTtcblx0XG5cdC8vIFRoaXMgIGNvdWxkIGJlIHNwZWVkZWQgdXAgZm8gc3VyZSFcblx0dmFyIG0gPSBQSVhJLm1hdDMuY2xvbmUoZ3JhcGhpY3Mud29ybGRUcmFuc2Zvcm0pO1xuXHRcblx0UElYSS5tYXQzLnRyYW5zcG9zZShtKTtcblx0XG5cdC8vIHNldCB0aGUgbWF0cml4IHRyYW5zZm9ybSBmb3IgdGhlIFxuIFx0Z2wuYmxlbmRGdW5jKGdsLk9ORSwgZ2wuT05FX01JTlVTX1NSQ19BTFBIQSk7XG5cbiBcdGdsLnVuaWZvcm1NYXRyaXgzZnYoUElYSS5wcmltaXRpdmVTaGFkZXIudHJhbnNsYXRpb25NYXRyaXgsIGZhbHNlLCBtKTtcbiBcdFxuXHRnbC51bmlmb3JtMmYoUElYSS5wcmltaXRpdmVTaGFkZXIucHJvamVjdGlvblZlY3RvciwgcHJvamVjdGlvbi54LCAtcHJvamVjdGlvbi55KTtcblx0Z2wudW5pZm9ybTJmKFBJWEkucHJpbWl0aXZlU2hhZGVyLm9mZnNldFZlY3RvciwgLVBJWEkub2Zmc2V0LngsIC1QSVhJLm9mZnNldC55KTtcblx0XG5cdGdsLnVuaWZvcm0xZihQSVhJLnByaW1pdGl2ZVNoYWRlci5hbHBoYSwgZ3JhcGhpY3Mud29ybGRBbHBoYSk7XG5cdGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBncmFwaGljcy5fd2ViR0wuYnVmZmVyKTtcblx0XG5cdGdsLnZlcnRleEF0dHJpYlBvaW50ZXIoUElYSS5wcmltaXRpdmVTaGFkZXIuYVZlcnRleFBvc2l0aW9uLCAyLCBnbC5GTE9BVCwgZmFsc2UsIDQgKiA2LCAwKTtcblx0Z2wudmVydGV4QXR0cmliUG9pbnRlcihQSVhJLnByaW1pdGl2ZVNoYWRlci5jb2xvckF0dHJpYnV0ZSwgNCwgZ2wuRkxPQVQsIGZhbHNlLDQgKiA2LCAyICogNCk7XG5cdFxuXHQvLyBzZXQgdGhlIGluZGV4IGJ1ZmZlciFcblx0Z2wuYmluZEJ1ZmZlcihnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgZ3JhcGhpY3MuX3dlYkdMLmluZGV4QnVmZmVyKTtcblx0XG5cblx0Z2wuZHJhd0VsZW1lbnRzKGdsLlRSSUFOR0xFX1NUUklQLCAgZ3JhcGhpY3MuX3dlYkdMLmluZGljZXMubGVuZ3RoLCBnbC5VTlNJR05FRF9TSE9SVCwgMCApO1xuXHRcblx0UElYSS5kZWFjdGl2YXRlUHJpbWl0aXZlU2hhZGVyKCk7XG5cdFxuXHRcblx0Ly8gcmV0dXJuIHRvIGRlZmF1bHQgc2hhZGVyLi4uXG4vL1x0UElYSS5hY3RpdmF0ZVNoYWRlcihQSVhJLmRlZmF1bHRTaGFkZXIpO1xufVxuXG4vKipcbiAqIFVwZGF0ZXMgdGhlIGdyYXBoaWNzIG9iamVjdFxuICpcbiAqIEBzdGF0aWNcbiAqIEBwcml2YXRlXG4gKiBAbWV0aG9kIHVwZGF0ZUdyYXBoaWNzXG4gKiBAcGFyYW0gZ3JhcGhpY3Mge0dyYXBoaWNzfVxuICovXG5QSVhJLldlYkdMR3JhcGhpY3MudXBkYXRlR3JhcGhpY3MgPSBmdW5jdGlvbihncmFwaGljcylcbntcblx0Zm9yICh2YXIgaT1ncmFwaGljcy5fd2ViR0wubGFzdEluZGV4OyBpIDwgZ3JhcGhpY3MuZ3JhcGhpY3NEYXRhLmxlbmd0aDsgaSsrKSBcblx0e1xuXHRcdHZhciBkYXRhID0gZ3JhcGhpY3MuZ3JhcGhpY3NEYXRhW2ldO1xuXHRcdFxuXHRcdGlmKGRhdGEudHlwZSA9PSBQSVhJLkdyYXBoaWNzLlBPTFkpXG5cdFx0e1xuXHRcdFx0aWYoZGF0YS5maWxsKVxuXHRcdFx0e1xuXHRcdFx0XHRpZihkYXRhLnBvaW50cy5sZW5ndGg+MykgXG5cdFx0XHRcdFBJWEkuV2ViR0xHcmFwaGljcy5idWlsZFBvbHkoZGF0YSwgZ3JhcGhpY3MuX3dlYkdMKTtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0aWYoZGF0YS5saW5lV2lkdGggPiAwKVxuXHRcdFx0e1xuXHRcdFx0XHRQSVhJLldlYkdMR3JhcGhpY3MuYnVpbGRMaW5lKGRhdGEsIGdyYXBoaWNzLl93ZWJHTCk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGVsc2UgaWYoZGF0YS50eXBlID09IFBJWEkuR3JhcGhpY3MuUkVDVClcblx0XHR7XG5cdFx0XHRQSVhJLldlYkdMR3JhcGhpY3MuYnVpbGRSZWN0YW5nbGUoZGF0YSwgZ3JhcGhpY3MuX3dlYkdMKTtcblx0XHR9XG5cdFx0ZWxzZSBpZihkYXRhLnR5cGUgPT0gUElYSS5HcmFwaGljcy5DSVJDIHx8IGRhdGEudHlwZSA9PSBQSVhJLkdyYXBoaWNzLkVMSVApXG5cdFx0e1xuXHRcdFx0UElYSS5XZWJHTEdyYXBoaWNzLmJ1aWxkQ2lyY2xlKGRhdGEsIGdyYXBoaWNzLl93ZWJHTCk7XG5cdFx0fVxuXHR9O1xuXHRcblx0Z3JhcGhpY3MuX3dlYkdMLmxhc3RJbmRleCA9IGdyYXBoaWNzLmdyYXBoaWNzRGF0YS5sZW5ndGg7XG5cdFxuXHR2YXIgZ2wgPSBQSVhJLmdsO1xuXG5cdGdyYXBoaWNzLl93ZWJHTC5nbFBvaW50cyA9IG5ldyBGbG9hdDMyQXJyYXkoZ3JhcGhpY3MuX3dlYkdMLnBvaW50cyk7XG5cdFxuXHRnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgZ3JhcGhpY3MuX3dlYkdMLmJ1ZmZlcik7XG5cdGdsLmJ1ZmZlckRhdGEoZ2wuQVJSQVlfQlVGRkVSLCBncmFwaGljcy5fd2ViR0wuZ2xQb2ludHMsIGdsLlNUQVRJQ19EUkFXKTtcblx0XG5cdGdyYXBoaWNzLl93ZWJHTC5nbEluZGljaWVzID0gbmV3IFVpbnQxNkFycmF5KGdyYXBoaWNzLl93ZWJHTC5pbmRpY2VzKTtcblx0XG5cdGdsLmJpbmRCdWZmZXIoZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVIsIGdyYXBoaWNzLl93ZWJHTC5pbmRleEJ1ZmZlcik7XG4gICAgZ2wuYnVmZmVyRGF0YShnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgZ3JhcGhpY3MuX3dlYkdMLmdsSW5kaWNpZXMsIGdsLlNUQVRJQ19EUkFXKTtcbn1cblxuLyoqXG4gKiBCdWlsZHMgYSByZWN0YW5nbGUgdG8gZHJhd1xuICpcbiAqIEBzdGF0aWNcbiAqIEBwcml2YXRlXG4gKiBAbWV0aG9kIGJ1aWxkUmVjdGFuZ2xlXG4gKiBAcGFyYW0gZ3JhcGhpY3Mge0dyYXBoaWNzfVxuICogQHBhcmFtIHdlYkdMRGF0YSB7T2JqZWN0fVxuICovXG5QSVhJLldlYkdMR3JhcGhpY3MuYnVpbGRSZWN0YW5nbGUgPSBmdW5jdGlvbihncmFwaGljc0RhdGEsIHdlYkdMRGF0YSlcbntcblx0Ly8gLS0tIC8vXG5cdC8vIG5lZWQgdG8gY29udmVydCBwb2ludHMgdG8gYSBuaWNlIHJlZ3VsYXIgZGF0YVxuXHQvLyBcblx0dmFyIHJlY3REYXRhID0gZ3JhcGhpY3NEYXRhLnBvaW50cztcblx0dmFyIHggPSByZWN0RGF0YVswXTtcblx0dmFyIHkgPSByZWN0RGF0YVsxXTtcblx0dmFyIHdpZHRoID0gcmVjdERhdGFbMl07XG5cdHZhciBoZWlnaHQgPSByZWN0RGF0YVszXTtcblx0XG5cdFxuXHRpZihncmFwaGljc0RhdGEuZmlsbClcblx0e1xuXHRcdHZhciBjb2xvciA9IEhFWHRvUkdCKGdyYXBoaWNzRGF0YS5maWxsQ29sb3IpO1xuXHRcdHZhciBhbHBoYSA9IGdyYXBoaWNzRGF0YS5maWxsQWxwaGE7XG5cdFx0XG5cdFx0dmFyIHIgPSBjb2xvclswXSAqIGFscGhhO1xuXHRcdHZhciBnID0gY29sb3JbMV0gKiBhbHBoYTtcblx0XHR2YXIgYiA9IGNvbG9yWzJdICogYWxwaGE7XG5cdFxuXHRcdHZhciB2ZXJ0cyA9IHdlYkdMRGF0YS5wb2ludHM7XG5cdFx0dmFyIGluZGljZXMgPSB3ZWJHTERhdGEuaW5kaWNlcztcblx0XG5cdFx0dmFyIHZlcnRQb3MgPSB2ZXJ0cy5sZW5ndGgvNjtcblx0XHRcblx0XHQvLyBzdGFydFxuXHRcdHZlcnRzLnB1c2goeCwgeSk7XG5cdFx0dmVydHMucHVzaChyLCBnLCBiLCBhbHBoYSk7XG5cdFx0XG5cdFx0dmVydHMucHVzaCh4ICsgd2lkdGgsIHkpO1xuXHRcdHZlcnRzLnB1c2gociwgZywgYiwgYWxwaGEpO1xuXHRcdFxuXHRcdHZlcnRzLnB1c2goeCAsIHkgKyBoZWlnaHQpO1xuXHRcdHZlcnRzLnB1c2gociwgZywgYiwgYWxwaGEpO1xuXHRcdFxuXHRcdHZlcnRzLnB1c2goeCArIHdpZHRoLCB5ICsgaGVpZ2h0KTtcblx0XHR2ZXJ0cy5wdXNoKHIsIGcsIGIsIGFscGhhKTtcblx0XHRcblx0XHQvLyBpbnNlcnQgMiBkZWFkIHRyaWFuZ2xlcy4uXG5cdFx0aW5kaWNlcy5wdXNoKHZlcnRQb3MsIHZlcnRQb3MsIHZlcnRQb3MrMSwgdmVydFBvcysyLCB2ZXJ0UG9zKzMsIHZlcnRQb3MrMylcblx0fVxuXHRcblx0aWYoZ3JhcGhpY3NEYXRhLmxpbmVXaWR0aClcblx0e1xuXHRcdGdyYXBoaWNzRGF0YS5wb2ludHMgPSBbeCwgeSxcblx0XHRcdFx0ICB4ICsgd2lkdGgsIHksXG5cdFx0XHRcdCAgeCArIHdpZHRoLCB5ICsgaGVpZ2h0LFxuXHRcdFx0XHQgIHgsIHkgKyBoZWlnaHQsXG5cdFx0XHRcdCAgeCwgeV07XG5cdFxuXHRcdFBJWEkuV2ViR0xHcmFwaGljcy5idWlsZExpbmUoZ3JhcGhpY3NEYXRhLCB3ZWJHTERhdGEpO1xuXHR9XG5cdFxufVxuXG4vKipcbiAqIEJ1aWxkcyBhIGNpcmNsZSB0byBkcmF3XG4gKlxuICogQHN0YXRpY1xuICogQHByaXZhdGVcbiAqIEBtZXRob2QgYnVpbGRDaXJjbGVcbiAqIEBwYXJhbSBncmFwaGljcyB7R3JhcGhpY3N9XG4gKiBAcGFyYW0gd2ViR0xEYXRhIHtPYmplY3R9XG4gKi9cblBJWEkuV2ViR0xHcmFwaGljcy5idWlsZENpcmNsZSA9IGZ1bmN0aW9uKGdyYXBoaWNzRGF0YSwgd2ViR0xEYXRhKVxue1xuXHQvLyAtLS0gLy9cblx0Ly8gbmVlZCB0byBjb252ZXJ0IHBvaW50cyB0byBhIG5pY2UgcmVndWxhciBkYXRhXG5cdC8vIFxuXHR2YXIgcmVjdERhdGEgPSBncmFwaGljc0RhdGEucG9pbnRzO1xuXHR2YXIgeCA9IHJlY3REYXRhWzBdO1xuXHR2YXIgeSA9IHJlY3REYXRhWzFdO1xuXHR2YXIgd2lkdGggPSByZWN0RGF0YVsyXTtcblx0dmFyIGhlaWdodCA9IHJlY3REYXRhWzNdO1xuXHRcblx0dmFyIHRvdGFsU2VncyA9IDQwO1xuXHR2YXIgc2VnID0gKE1hdGguUEkgKiAyKSAvIHRvdGFsU2VncyA7XG5cdFx0XG5cdGlmKGdyYXBoaWNzRGF0YS5maWxsKVxuXHR7XG5cdFx0dmFyIGNvbG9yID0gSEVYdG9SR0IoZ3JhcGhpY3NEYXRhLmZpbGxDb2xvcik7XG5cdFx0dmFyIGFscGhhID0gZ3JhcGhpY3NEYXRhLmZpbGxBbHBoYTtcblxuXHRcdHZhciByID0gY29sb3JbMF0gKiBhbHBoYTtcblx0XHR2YXIgZyA9IGNvbG9yWzFdICogYWxwaGE7XG5cdFx0dmFyIGIgPSBjb2xvclsyXSAqIGFscGhhO1xuXHRcblx0XHR2YXIgdmVydHMgPSB3ZWJHTERhdGEucG9pbnRzO1xuXHRcdHZhciBpbmRpY2VzID0gd2ViR0xEYXRhLmluZGljZXM7XG5cdFxuXHRcdHZhciB2ZWNQb3MgPSB2ZXJ0cy5sZW5ndGgvNjtcblx0XHRcblx0XHRpbmRpY2VzLnB1c2godmVjUG9zKTtcblx0XHRcblx0XHRmb3IgKHZhciBpPTA7IGkgPCB0b3RhbFNlZ3MgKyAxIDsgaSsrKSBcblx0XHR7XG5cdFx0XHR2ZXJ0cy5wdXNoKHgseSwgciwgZywgYiwgYWxwaGEpO1xuXHRcdFx0XG5cdFx0XHR2ZXJ0cy5wdXNoKHggKyBNYXRoLnNpbihzZWcgKiBpKSAqIHdpZHRoLFxuXHRcdFx0XHRcdCAgIHkgKyBNYXRoLmNvcyhzZWcgKiBpKSAqIGhlaWdodCxcblx0XHRcdFx0XHQgICByLCBnLCBiLCBhbHBoYSk7XG5cdFx0XG5cdFx0XHRpbmRpY2VzLnB1c2godmVjUG9zKyssIHZlY1BvcysrKTtcblx0XHR9O1xuXHRcdFxuXHRcdGluZGljZXMucHVzaCh2ZWNQb3MtMSk7XG5cdH1cblx0XG5cdGlmKGdyYXBoaWNzRGF0YS5saW5lV2lkdGgpXG5cdHtcblx0XHRncmFwaGljc0RhdGEucG9pbnRzID0gW107XG5cdFx0XG5cdFx0Zm9yICh2YXIgaT0wOyBpIDwgdG90YWxTZWdzICsgMTsgaSsrKSBcblx0XHR7XG5cdFx0XHRncmFwaGljc0RhdGEucG9pbnRzLnB1c2goeCArIE1hdGguc2luKHNlZyAqIGkpICogd2lkdGgsXG5cdFx0XHRcdFx0XHRcdFx0XHQgeSArIE1hdGguY29zKHNlZyAqIGkpICogaGVpZ2h0KVxuXHRcdH07XG5cdFx0XG5cdFx0UElYSS5XZWJHTEdyYXBoaWNzLmJ1aWxkTGluZShncmFwaGljc0RhdGEsIHdlYkdMRGF0YSk7XG5cdH1cblx0XG59XG5cbi8qKlxuICogQnVpbGRzIGEgbGluZSB0byBkcmF3XG4gKlxuICogQHN0YXRpY1xuICogQHByaXZhdGVcbiAqIEBtZXRob2QgYnVpbGRMaW5lXG4gKiBAcGFyYW0gZ3JhcGhpY3Mge0dyYXBoaWNzfVxuICogQHBhcmFtIHdlYkdMRGF0YSB7T2JqZWN0fVxuICovXG5QSVhJLldlYkdMR3JhcGhpY3MuYnVpbGRMaW5lID0gZnVuY3Rpb24oZ3JhcGhpY3NEYXRhLCB3ZWJHTERhdGEpXG57XG5cdC8vIFRPRE8gT1BUSU1JU0UhXG5cdFxuXHR2YXIgd3JhcCA9IHRydWU7XG5cdHZhciBwb2ludHMgPSBncmFwaGljc0RhdGEucG9pbnRzO1xuXHRpZihwb2ludHMubGVuZ3RoID09IDApcmV0dXJuO1xuXHRcblx0Ly8gaWYgdGhlIGxpbmUgd2lkdGggaXMgYW4gb2RkIG51bWJlciBhZGQgMC41IHRvIGFsaWduIHRvIGEgd2hvbGUgcGl4ZWxcblx0aWYoZ3JhcGhpY3NEYXRhLmxpbmVXaWR0aCUyKVxuXHR7XG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBwb2ludHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHBvaW50c1tpXSArPSAwLjU7XG5cdFx0fTtcblx0fVxuXG5cdC8vIGdldCBmaXJzdCBhbmQgbGFzdCBwb2ludC4uIGZpZ3VyZSBvdXQgdGhlIG1pZGRsZSFcblx0dmFyIGZpcnN0UG9pbnQgPSBuZXcgUElYSS5Qb2ludCggcG9pbnRzWzBdLCBwb2ludHNbMV0gKTtcblx0dmFyIGxhc3RQb2ludCA9IG5ldyBQSVhJLlBvaW50KCBwb2ludHNbcG9pbnRzLmxlbmd0aCAtIDJdLCBwb2ludHNbcG9pbnRzLmxlbmd0aCAtIDFdICk7XG5cdFxuXHQvLyBpZiB0aGUgZmlyc3QgcG9pbnQgaXMgdGhlIGxhc3QgcG9pbnQgLSBnb29uYSBoYXZlIGlzc3VlcyA6KVxuXHRpZihmaXJzdFBvaW50LnggPT0gbGFzdFBvaW50LnggJiYgZmlyc3RQb2ludC55ID09IGxhc3RQb2ludC55KVxuXHR7XG5cdFx0cG9pbnRzLnBvcCgpO1xuXHRcdHBvaW50cy5wb3AoKTtcblx0XHRcblx0XHRsYXN0UG9pbnQgPSBuZXcgUElYSS5Qb2ludCggcG9pbnRzW3BvaW50cy5sZW5ndGggLSAyXSwgcG9pbnRzW3BvaW50cy5sZW5ndGggLSAxXSApO1xuXHRcdFxuXHRcdHZhciBtaWRQb2ludFggPSBsYXN0UG9pbnQueCArIChmaXJzdFBvaW50LnggLSBsYXN0UG9pbnQueCkgKjAuNTtcblx0XHR2YXIgbWlkUG9pbnRZID0gbGFzdFBvaW50LnkgKyAoZmlyc3RQb2ludC55IC0gbGFzdFBvaW50LnkpICowLjU7XG5cdFx0XG5cdFx0cG9pbnRzLnVuc2hpZnQobWlkUG9pbnRYLCBtaWRQb2ludFkpO1xuXHRcdHBvaW50cy5wdXNoKG1pZFBvaW50WCwgbWlkUG9pbnRZKVxuXHR9XG5cdFxuXHR2YXIgdmVydHMgPSB3ZWJHTERhdGEucG9pbnRzO1xuXHR2YXIgaW5kaWNlcyA9IHdlYkdMRGF0YS5pbmRpY2VzO1xuXHR2YXIgbGVuZ3RoID0gcG9pbnRzLmxlbmd0aCAvIDI7XG5cdHZhciBpbmRleENvdW50ID0gcG9pbnRzLmxlbmd0aDtcblx0dmFyIGluZGV4U3RhcnQgPSB2ZXJ0cy5sZW5ndGgvNjtcblx0XG5cdC8vIERSQVcgdGhlIExpbmVcblx0dmFyIHdpZHRoID0gZ3JhcGhpY3NEYXRhLmxpbmVXaWR0aCAvIDI7XG5cdFxuXHQvLyBzb3J0IGNvbG9yXG5cdHZhciBjb2xvciA9IEhFWHRvUkdCKGdyYXBoaWNzRGF0YS5saW5lQ29sb3IpO1xuXHR2YXIgYWxwaGEgPSBncmFwaGljc0RhdGEubGluZUFscGhhO1xuXHR2YXIgciA9IGNvbG9yWzBdICogYWxwaGE7XG5cdHZhciBnID0gY29sb3JbMV0gKiBhbHBoYTtcblx0dmFyIGIgPSBjb2xvclsyXSAqIGFscGhhO1xuXHRcblx0dmFyIHAxeCwgcDF5LCBwMngsIHAyeSwgcDN4LCBwM3k7XG5cdHZhciBwZXJweCwgcGVycHksIHBlcnAyeCwgcGVycDJ5LCBwZXJwM3gsIHBlcnAzeTtcblx0dmFyIGlweCwgaXB5O1xuXHR2YXIgYTEsIGIxLCBjMSwgYTIsIGIyLCBjMjtcblx0dmFyIGRlbm9tLCBwZGlzdCwgZGlzdDtcblx0XG5cdHAxeCA9IHBvaW50c1swXTtcblx0cDF5ID0gcG9pbnRzWzFdO1xuXHRcblx0cDJ4ID0gcG9pbnRzWzJdO1xuXHRwMnkgPSBwb2ludHNbM107XG5cdFxuXHRwZXJweCA9IC0ocDF5IC0gcDJ5KTtcblx0cGVycHkgPSAgcDF4IC0gcDJ4O1xuXHRcblx0ZGlzdCA9IE1hdGguc3FydChwZXJweCpwZXJweCArIHBlcnB5KnBlcnB5KTtcblx0XG5cdHBlcnB4IC89IGRpc3Q7XG5cdHBlcnB5IC89IGRpc3Q7XG5cdHBlcnB4ICo9IHdpZHRoO1xuXHRwZXJweSAqPSB3aWR0aDtcblx0XG5cdC8vIHN0YXJ0XG5cdHZlcnRzLnB1c2gocDF4IC0gcGVycHggLCBwMXkgLSBwZXJweSxcblx0XHRcdFx0ciwgZywgYiwgYWxwaGEpO1xuXHRcblx0dmVydHMucHVzaChwMXggKyBwZXJweCAsIHAxeSArIHBlcnB5LFxuXHRcdFx0XHRyLCBnLCBiLCBhbHBoYSk7XG5cdFxuXHRmb3IgKHZhciBpID0gMTsgaSA8IGxlbmd0aC0xOyBpKyspIFxuXHR7XG5cdFx0cDF4ID0gcG9pbnRzWyhpLTEpKjJdO1xuXHRcdHAxeSA9IHBvaW50c1soaS0xKSoyICsgMV07XG5cdFx0XG5cdFx0cDJ4ID0gcG9pbnRzWyhpKSoyXVxuXHRcdHAyeSA9IHBvaW50c1soaSkqMiArIDFdXG5cdFx0XG5cdFx0cDN4ID0gcG9pbnRzWyhpKzEpKjJdO1xuXHRcdHAzeSA9IHBvaW50c1soaSsxKSoyICsgMV07XG5cdFx0XG5cdFx0cGVycHggPSAtKHAxeSAtIHAyeSk7XG5cdFx0cGVycHkgPSBwMXggLSBwMng7XG5cdFx0XG5cdFx0ZGlzdCA9IE1hdGguc3FydChwZXJweCpwZXJweCArIHBlcnB5KnBlcnB5KTtcblx0XHRwZXJweCAvPSBkaXN0O1xuXHRcdHBlcnB5IC89IGRpc3Q7XG5cdFx0cGVycHggKj0gd2lkdGg7XG5cdFx0cGVycHkgKj0gd2lkdGg7XG5cblx0XHRwZXJwMnggPSAtKHAyeSAtIHAzeSk7XG5cdFx0cGVycDJ5ID0gcDJ4IC0gcDN4O1xuXHRcdFxuXHRcdGRpc3QgPSBNYXRoLnNxcnQocGVycDJ4KnBlcnAyeCArIHBlcnAyeSpwZXJwMnkpO1xuXHRcdHBlcnAyeCAvPSBkaXN0O1xuXHRcdHBlcnAyeSAvPSBkaXN0O1xuXHRcdHBlcnAyeCAqPSB3aWR0aDtcblx0XHRwZXJwMnkgKj0gd2lkdGg7XG5cdFx0XG5cdFx0YTEgPSAoLXBlcnB5ICsgcDF5KSAtICgtcGVycHkgKyBwMnkpO1xuXHQgICAgYjEgPSAoLXBlcnB4ICsgcDJ4KSAtICgtcGVycHggKyBwMXgpO1xuXHQgICAgYzEgPSAoLXBlcnB4ICsgcDF4KSAqICgtcGVycHkgKyBwMnkpIC0gKC1wZXJweCArIHAyeCkgKiAoLXBlcnB5ICsgcDF5KTtcblx0ICAgIGEyID0gKC1wZXJwMnkgKyBwM3kpIC0gKC1wZXJwMnkgKyBwMnkpO1xuXHQgICAgYjIgPSAoLXBlcnAyeCArIHAyeCkgLSAoLXBlcnAyeCArIHAzeCk7XG5cdCAgICBjMiA9ICgtcGVycDJ4ICsgcDN4KSAqICgtcGVycDJ5ICsgcDJ5KSAtICgtcGVycDJ4ICsgcDJ4KSAqICgtcGVycDJ5ICsgcDN5KTtcblx0IFxuXHQgICAgZGVub20gPSBhMSpiMiAtIGEyKmIxO1xuXG5cdCAgIGlmKE1hdGguYWJzKGRlbm9tKSA8IDAuMSApXG5cdFx0e1xuXHRcdFxuXHRcdFx0ZGVub20rPTEwLjE7XG5cdFx0XHR2ZXJ0cy5wdXNoKHAyeCAtIHBlcnB4ICwgcDJ5IC0gcGVycHksXG5cdFx0XHRcdHIsIGcsIGIsIGFscGhhKTtcblx0XG5cdFx0XHR2ZXJ0cy5wdXNoKHAyeCArIHBlcnB4ICwgcDJ5ICsgcGVycHksXG5cdFx0XHRcdHIsIGcsIGIsIGFscGhhKTtcblx0XHRcdFxuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXHQgICAgXG5cdCAgICBweCA9IChiMSpjMiAtIGIyKmMxKS9kZW5vbTtcblx0ICAgIHB5ID0gKGEyKmMxIC0gYTEqYzIpL2Rlbm9tO1xuXHRcdFxuXHRcdFx0XG5cdFx0cGRpc3QgPSAocHggLXAyeCkgKiAocHggLXAyeCkgKyAocHkgLXAyeSkgKyAocHkgLXAyeSk7XG5cdFx0XG5cblx0XHRpZihwZGlzdCA+IDE0MCAqIDE0MClcblx0XHR7XG5cdFx0XHRwZXJwM3ggPSBwZXJweCAtIHBlcnAyeDtcblx0XHRcdHBlcnAzeSA9IHBlcnB5IC0gcGVycDJ5O1xuXHRcdFx0XG5cdFx0XHRkaXN0ID0gTWF0aC5zcXJ0KHBlcnAzeCpwZXJwM3ggKyBwZXJwM3kqcGVycDN5KTtcblx0XHRcdHBlcnAzeCAvPSBkaXN0O1xuXHRcdFx0cGVycDN5IC89IGRpc3Q7XG5cdFx0XHRwZXJwM3ggKj0gd2lkdGg7XG5cdFx0XHRwZXJwM3kgKj0gd2lkdGg7XG5cdFx0XHRcblx0XHRcdHZlcnRzLnB1c2gocDJ4IC0gcGVycDN4LCBwMnkgLXBlcnAzeSk7XG5cdFx0XHR2ZXJ0cy5wdXNoKHIsIGcsIGIsIGFscGhhKTtcblx0XHRcdFxuXHRcdFx0dmVydHMucHVzaChwMnggKyBwZXJwM3gsIHAyeSArcGVycDN5KTtcblx0XHRcdHZlcnRzLnB1c2gociwgZywgYiwgYWxwaGEpO1xuXHRcdFx0XG5cdFx0XHR2ZXJ0cy5wdXNoKHAyeCAtIHBlcnAzeCwgcDJ5IC1wZXJwM3kpO1xuXHRcdFx0dmVydHMucHVzaChyLCBnLCBiLCBhbHBoYSk7XG5cdFx0XHRcblx0XHRcdGluZGV4Q291bnQrKztcblx0XHR9XG5cdFx0ZWxzZVxuXHRcdHtcblxuXHRcdFx0dmVydHMucHVzaChweCAsIHB5KTtcblx0XHRcdHZlcnRzLnB1c2gociwgZywgYiwgYWxwaGEpO1xuXHRcdFx0XG5cdFx0XHR2ZXJ0cy5wdXNoKHAyeCAtIChweC1wMngpLCBwMnkgLSAocHkgLSBwMnkpKTtcblx0XHRcdHZlcnRzLnB1c2gociwgZywgYiwgYWxwaGEpO1xuXHRcdH1cblx0fVxuXHRcblx0cDF4ID0gcG9pbnRzWyhsZW5ndGgtMikqMl1cblx0cDF5ID0gcG9pbnRzWyhsZW5ndGgtMikqMiArIDFdIFxuXHRcblx0cDJ4ID0gcG9pbnRzWyhsZW5ndGgtMSkqMl1cblx0cDJ5ID0gcG9pbnRzWyhsZW5ndGgtMSkqMiArIDFdXG5cdFxuXHRwZXJweCA9IC0ocDF5IC0gcDJ5KVxuXHRwZXJweSA9IHAxeCAtIHAyeDtcblx0XG5cdGRpc3QgPSBNYXRoLnNxcnQocGVycHgqcGVycHggKyBwZXJweSpwZXJweSk7XG5cdHBlcnB4IC89IGRpc3Q7XG5cdHBlcnB5IC89IGRpc3Q7XG5cdHBlcnB4ICo9IHdpZHRoO1xuXHRwZXJweSAqPSB3aWR0aDtcblx0XG5cdHZlcnRzLnB1c2gocDJ4IC0gcGVycHggLCBwMnkgLSBwZXJweSlcblx0dmVydHMucHVzaChyLCBnLCBiLCBhbHBoYSk7XG5cdFxuXHR2ZXJ0cy5wdXNoKHAyeCArIHBlcnB4ICwgcDJ5ICsgcGVycHkpXG5cdHZlcnRzLnB1c2gociwgZywgYiwgYWxwaGEpO1xuXHRcblx0aW5kaWNlcy5wdXNoKGluZGV4U3RhcnQpO1xuXHRcblx0Zm9yICh2YXIgaT0wOyBpIDwgaW5kZXhDb3VudDsgaSsrKSBcblx0e1xuXHRcdGluZGljZXMucHVzaChpbmRleFN0YXJ0KyspO1xuXHR9O1xuXHRcblx0aW5kaWNlcy5wdXNoKGluZGV4U3RhcnQtMSk7XG59XG5cbi8qKlxuICogQnVpbGRzIGEgcG9seWdvbiB0byBkcmF3XG4gKlxuICogQHN0YXRpY1xuICogQHByaXZhdGVcbiAqIEBtZXRob2QgYnVpbGRQb2x5XG4gKiBAcGFyYW0gZ3JhcGhpY3Mge0dyYXBoaWNzfVxuICogQHBhcmFtIHdlYkdMRGF0YSB7T2JqZWN0fVxuICovXG5QSVhJLldlYkdMR3JhcGhpY3MuYnVpbGRQb2x5ID0gZnVuY3Rpb24oZ3JhcGhpY3NEYXRhLCB3ZWJHTERhdGEpXG57XG5cdHZhciBwb2ludHMgPSBncmFwaGljc0RhdGEucG9pbnRzO1xuXHRpZihwb2ludHMubGVuZ3RoIDwgNilyZXR1cm47XG5cdFxuXHQvLyBnZXQgZmlyc3QgYW5kIGxhc3QgcG9pbnQuLiBmaWd1cmUgb3V0IHRoZSBtaWRkbGUhXG5cdHZhciB2ZXJ0cyA9IHdlYkdMRGF0YS5wb2ludHM7XG5cdHZhciBpbmRpY2VzID0gd2ViR0xEYXRhLmluZGljZXM7XG5cdFxuXHR2YXIgbGVuZ3RoID0gcG9pbnRzLmxlbmd0aCAvIDI7XG5cdFxuXHQvLyBzb3J0IGNvbG9yXG5cdHZhciBjb2xvciA9IEhFWHRvUkdCKGdyYXBoaWNzRGF0YS5maWxsQ29sb3IpO1xuXHR2YXIgYWxwaGEgPSBncmFwaGljc0RhdGEuZmlsbEFscGhhO1xuXHR2YXIgciA9IGNvbG9yWzBdICogYWxwaGE7XG5cdHZhciBnID0gY29sb3JbMV0gKiBhbHBoYTtcblx0dmFyIGIgPSBjb2xvclsyXSAqIGFscGhhO1xuXHRcblx0dmFyIHRyaWFuZ2xlcyA9IFBJWEkuUG9seUsuVHJpYW5ndWxhdGUocG9pbnRzKTtcblx0XG5cdHZhciB2ZXJ0UG9zID0gdmVydHMubGVuZ3RoIC8gNjtcblx0XG5cdGZvciAodmFyIGk9MDsgaSA8IHRyaWFuZ2xlcy5sZW5ndGg7IGkrPTMpIFxuXHR7XG5cdFx0aW5kaWNlcy5wdXNoKHRyaWFuZ2xlc1tpXSArIHZlcnRQb3MpO1xuXHRcdGluZGljZXMucHVzaCh0cmlhbmdsZXNbaV0gKyB2ZXJ0UG9zKTtcblx0XHRpbmRpY2VzLnB1c2godHJpYW5nbGVzW2krMV0gKyB2ZXJ0UG9zKTtcblx0XHRpbmRpY2VzLnB1c2godHJpYW5nbGVzW2krMl0gK3ZlcnRQb3MpO1xuXHRcdGluZGljZXMucHVzaCh0cmlhbmdsZXNbaSsyXSArIHZlcnRQb3MpO1xuXHR9O1xuXHRcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgXG5cdHtcblx0XHR2ZXJ0cy5wdXNoKHBvaW50c1tpICogMl0sIHBvaW50c1tpICogMiArIDFdLFxuXHRcdFx0XHQgICByLCBnLCBiLCBhbHBoYSk7XG5cdH07XG59XG5cbmZ1bmN0aW9uIEhFWHRvUkdCKGhleCkge1xuXHRyZXR1cm4gWyhoZXggPj4gMTYgJiAweEZGKSAvIDI1NSwgKCBoZXggPj4gOCAmIDB4RkYpIC8gMjU1LCAoaGV4ICYgMHhGRikvIDI1NV07XG59XG5cblxuXG5cblxuLyoqXG4gKiBAYXV0aG9yIE1hdCBHcm92ZXMgaHR0cDovL21hdGdyb3Zlcy5jb20vIEBEb29ybWF0MjNcbiAqL1xuXG5QSVhJLl9kZWZhdWx0RnJhbWUgPSBuZXcgUElYSS5SZWN0YW5nbGUoMCwwLDEsMSk7XG5cbi8vIGFuIGluc3RhbmNlIG9mIHRoZSBnbCBjb250ZXh0Li5cbi8vIG9ubHkgb25lIGF0IHRoZSBtb21lbnQgOi9cblBJWEkuZ2w7XG5cbi8qKlxuICogdGhlIFdlYkdMUmVuZGVyZXIgaXMgZHJhd3MgdGhlIHN0YWdlIGFuZCBhbGwgaXRzIGNvbnRlbnQgb250byBhIHdlYkdMIGVuYWJsZWQgY2FudmFzLiBUaGlzIHJlbmRlcmVyXG4gKiBzaG91bGQgYmUgdXNlZCBmb3IgYnJvd3NlcnMgc3VwcG9ydCB3ZWJHTC4gVGhpcyBSZW5kZXIgd29ya3MgYnkgYXV0b21hdGljYWxseSBtYW5hZ2luZyB3ZWJHTEJhdGNocy5cbiAqIFNvIG5vIG5lZWQgZm9yIFNwcml0ZSBCYXRjaCdzIG9yIFNwcml0ZSBDbG91ZCdzXG4gKiBEb250IGZvcmdldCB0byBhZGQgdGhlIHZpZXcgdG8geW91ciBET00gb3IgeW91IHdpbGwgbm90IHNlZSBhbnl0aGluZyA6KVxuICpcbiAqIEBjbGFzcyBXZWJHTFJlbmRlcmVyXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB3aWR0aD0wIHtOdW1iZXJ9IHRoZSB3aWR0aCBvZiB0aGUgY2FudmFzIHZpZXdcbiAqIEBwYXJhbSBoZWlnaHQ9MCB7TnVtYmVyfSB0aGUgaGVpZ2h0IG9mIHRoZSBjYW52YXMgdmlld1xuICogQHBhcmFtIHZpZXcge0NhbnZhc30gdGhlIGNhbnZhcyB0byB1c2UgYXMgYSB2aWV3LCBvcHRpb25hbFxuICogQHBhcmFtIHRyYW5zcGFyZW50PWZhbHNlIHtCb29sZWFufSB0aGUgdHJhbnNwYXJlbmN5IG9mIHRoZSByZW5kZXIgdmlldywgZGVmYXVsdCBmYWxzZVxuICogQHBhcmFtIGFudGlhbGlhcz1mYWxzZSB7Qm9vbGVhbn0gc2V0cyBhbnRpYWxpYXMgKG9ubHkgYXBwbGljYWJsZSBpbiBjaHJvbWUgYXQgdGhlIG1vbWVudClcbiAqIFxuICovXG5QSVhJLldlYkdMUmVuZGVyZXIgPSBmdW5jdGlvbih3aWR0aCwgaGVpZ2h0LCB2aWV3LCB0cmFuc3BhcmVudCwgYW50aWFsaWFzKVxue1xuXHQvLyBkbyBhIGNhdGNoLi4gb25seSAxIHdlYkdMIHJlbmRlcmVyLi5cblxuXHR0aGlzLnRyYW5zcGFyZW50ID0gISF0cmFuc3BhcmVudDtcblxuXHR0aGlzLndpZHRoID0gd2lkdGggfHwgODAwO1xuXHR0aGlzLmhlaWdodCA9IGhlaWdodCB8fCA2MDA7XG5cblx0dGhpcy52aWV3ID0gdmlldyB8fCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAnY2FudmFzJyApOyBcbiAgICB0aGlzLnZpZXcud2lkdGggPSB0aGlzLndpZHRoO1xuXHR0aGlzLnZpZXcuaGVpZ2h0ID0gdGhpcy5oZWlnaHQ7XG5cblx0Ly8gZGVhbCB3aXRoIGxvc2luZyBjb250ZXh0Li5cdFxuICAgIHZhciBzY29wZSA9IHRoaXM7XG5cdHRoaXMudmlldy5hZGRFdmVudExpc3RlbmVyKCd3ZWJnbGNvbnRleHRsb3N0JywgZnVuY3Rpb24oZXZlbnQpIHsgc2NvcGUuaGFuZGxlQ29udGV4dExvc3QoZXZlbnQpOyB9LCBmYWxzZSlcblx0dGhpcy52aWV3LmFkZEV2ZW50TGlzdGVuZXIoJ3dlYmdsY29udGV4dHJlc3RvcmVkJywgZnVuY3Rpb24oZXZlbnQpIHsgc2NvcGUuaGFuZGxlQ29udGV4dFJlc3RvcmVkKGV2ZW50KTsgfSwgZmFsc2UpXG5cblx0dGhpcy5iYXRjaHMgPSBbXTtcblxuXHR2YXIgb3B0aW9ucyA9IHtcblx0XHRhbHBoYTogdGhpcy50cmFuc3BhcmVudCxcblx0XHRhbnRpYWxpYXM6ISFhbnRpYWxpYXMsIC8vIFNQRUVEIFVQPz9cblx0XHRwcmVtdWx0aXBsaWVkQWxwaGE6ZmFsc2UsXG5cdFx0c3RlbmNpbDp0cnVlXG5cdH1cblxuXHQvL3RyeSAnZXhwZXJpbWVudGFsLXdlYmdsJ1xuXHR0cnkge1xuXHRcdFBJWEkuZ2wgPSB0aGlzLmdsID0gdGhpcy52aWV3LmdldENvbnRleHQoXCJleHBlcmltZW50YWwtd2ViZ2xcIiwgIG9wdGlvbnMpO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0Ly90cnkgJ3dlYmdsJ1xuXHRcdHRyeSB7XG5cdFx0XHRQSVhJLmdsID0gdGhpcy5nbCA9IHRoaXMudmlldy5nZXRDb250ZXh0KFwid2ViZ2xcIiwgIG9wdGlvbnMpO1xuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdC8vIGZhaWwsIG5vdCBhYmxlIHRvIGdldCBhIGNvbnRleHRcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIiBUaGlzIGJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCB3ZWJHTC4gVHJ5IHVzaW5nIHRoZSBjYW52YXMgcmVuZGVyZXJcIiArIHRoaXMpO1xuXHRcdH1cblx0fVxuXG4gICAgUElYSS5pbml0RGVmYXVsdFNoYWRlcnMoKTtcbiBcblxuXHRcblxuICAgLy8gUElYSS5hY3RpdmF0ZURlZmF1bHRTaGFkZXIoKTtcblxuICAgIHZhciBnbCA9IHRoaXMuZ2w7XG4gICAgXG4gICAgZ2wudXNlUHJvZ3JhbShQSVhJLmRlZmF1bHRTaGFkZXIucHJvZ3JhbSk7XG5cblxuICAgIFBJWEkuV2ViR0xSZW5kZXJlci5nbCA9IGdsO1xuXG4gICAgdGhpcy5iYXRjaCA9IG5ldyBQSVhJLldlYkdMQmF0Y2goZ2wpO1xuICAgXHRnbC5kaXNhYmxlKGdsLkRFUFRIX1RFU1QpO1xuICAgXHRnbC5kaXNhYmxlKGdsLkNVTExfRkFDRSk7XG5cbiAgICBnbC5lbmFibGUoZ2wuQkxFTkQpO1xuICAgIGdsLmNvbG9yTWFzayh0cnVlLCB0cnVlLCB0cnVlLCB0aGlzLnRyYW5zcGFyZW50KTsgXG5cbiAgICBQSVhJLnByb2plY3Rpb24gPSBuZXcgUElYSS5Qb2ludCg0MDAsIDMwMCk7XG4gICAgUElYSS5vZmZzZXQgPSBuZXcgUElYSS5Qb2ludCgwLCAwKTtcblxuICAgIC8vIFRPRE8gcmVtb3ZlIHRoZWFzZSBnbG9iYWxzLi5cblxuICAgIHRoaXMucmVzaXplKHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KTtcbiAgICB0aGlzLmNvbnRleHRMb3N0ID0gZmFsc2U7XG5cblx0Ly9QSVhJLnB1c2hTaGFkZXIoUElYSS5kZWZhdWx0U2hhZGVyKTtcblxuICAgIHRoaXMuc3RhZ2VSZW5kZXJHcm91cCA9IG5ldyBQSVhJLldlYkdMUmVuZGVyR3JvdXAodGhpcy5nbCwgdGhpcy50cmFuc3BhcmVudCk7XG4gIC8vICB0aGlzLnN0YWdlUmVuZGVyR3JvdXAuID0gdGhpcy50cmFuc3BhcmVudFxufVxuXG4vLyBjb25zdHJ1Y3RvclxuUElYSS5XZWJHTFJlbmRlcmVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFBJWEkuV2ViR0xSZW5kZXJlcjtcblxuLyoqXG4gKiBHZXRzIGEgbmV3IFdlYkdMQmF0Y2ggZnJvbSB0aGUgcG9vbFxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZXRob2QgZ2V0QmF0Y2hcbiAqIEByZXR1cm4ge1dlYkdMQmF0Y2h9XG4gKiBAcHJpdmF0ZSBcbiAqL1xuUElYSS5XZWJHTFJlbmRlcmVyLmdldEJhdGNoID0gZnVuY3Rpb24oKVxue1xuXHRpZihQSVhJLl9iYXRjaHMubGVuZ3RoID09IDApXG5cdHtcblx0XHRyZXR1cm4gbmV3IFBJWEkuV2ViR0xCYXRjaChQSVhJLldlYkdMUmVuZGVyZXIuZ2wpO1xuXHR9XG5cdGVsc2Vcblx0e1xuXHRcdHJldHVybiBQSVhJLl9iYXRjaHMucG9wKCk7XG5cdH1cbn1cblxuLyoqXG4gKiBQdXRzIGEgYmF0Y2ggYmFjayBpbnRvIHRoZSBwb29sXG4gKlxuICogQHN0YXRpY1xuICogQG1ldGhvZCByZXR1cm5CYXRjaFxuICogQHBhcmFtIGJhdGNoIHtXZWJHTEJhdGNofSBUaGUgYmF0Y2ggdG8gcmV0dXJuXG4gKiBAcHJpdmF0ZVxuICovXG5QSVhJLldlYkdMUmVuZGVyZXIucmV0dXJuQmF0Y2ggPSBmdW5jdGlvbihiYXRjaClcbntcblx0YmF0Y2guY2xlYW4oKTtcdFxuXHRQSVhJLl9iYXRjaHMucHVzaChiYXRjaCk7XG59XG5cbi8qKlxuICogUmVuZGVycyB0aGUgc3RhZ2UgdG8gaXRzIHdlYkdMIHZpZXdcbiAqXG4gKiBAbWV0aG9kIHJlbmRlclxuICogQHBhcmFtIHN0YWdlIHtTdGFnZX0gdGhlIFN0YWdlIGVsZW1lbnQgdG8gYmUgcmVuZGVyZWRcbiAqL1xuUElYSS5XZWJHTFJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbihzdGFnZSlcbntcblx0aWYodGhpcy5jb250ZXh0TG9zdClyZXR1cm47XG5cdFxuXHRcblx0Ly8gaWYgcmVuZGVyaW5nIGEgbmV3IHN0YWdlIGNsZWFyIHRoZSBiYXRjaHMuLlxuXHRpZih0aGlzLl9fc3RhZ2UgIT09IHN0YWdlKVxuXHR7XG5cdFx0Ly8gVE9ETyBtYWtlIHRoaXMgd29ya1xuXHRcdC8vIGRvbnQgdGhpbmsgdGhpcyBpcyBuZWVkZWQgYW55IG1vcmU/XG5cdFx0dGhpcy5fX3N0YWdlID0gc3RhZ2U7XG5cdFx0dGhpcy5zdGFnZVJlbmRlckdyb3VwLnNldFJlbmRlcmFibGUoc3RhZ2UpO1xuXHR9XG5cblx0Ly8gdXBkYXRlIGFueSB0ZXh0dXJlc1x0XG5cdFBJWEkuV2ViR0xSZW5kZXJlci51cGRhdGVUZXh0dXJlcygpO1xuXHRcdFxuXHQvLyB1cGRhdGUgdGhlIHNjZW5lIGdyYXBoXHRcblx0UElYSS52aXNpYmxlQ291bnQrKztcblx0c3RhZ2UudXBkYXRlVHJhbnNmb3JtKCk7XG5cdFxuXHR2YXIgZ2wgPSB0aGlzLmdsO1xuXHRcblx0Ly8gLS0gRG9lcyB0aGlzIG5lZWQgdG8gYmUgc2V0IGV2ZXJ5IGZyYW1lPyAtLSAvL1xuXHRnbC5jb2xvck1hc2sodHJ1ZSwgdHJ1ZSwgdHJ1ZSwgdGhpcy50cmFuc3BhcmVudCk7IFxuXHRnbC52aWV3cG9ydCgwLCAwLCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCk7XHRcblx0XG4gICBcdGdsLmJpbmRGcmFtZWJ1ZmZlcihnbC5GUkFNRUJVRkZFUiwgbnVsbCk7XG5cdFx0XG5cdGdsLmNsZWFyQ29sb3Ioc3RhZ2UuYmFja2dyb3VuZENvbG9yU3BsaXRbMF0sc3RhZ2UuYmFja2dyb3VuZENvbG9yU3BsaXRbMV0sc3RhZ2UuYmFja2dyb3VuZENvbG9yU3BsaXRbMl0sICF0aGlzLnRyYW5zcGFyZW50KTsgICAgIFxuXHRnbC5jbGVhcihnbC5DT0xPUl9CVUZGRVJfQklUKTtcblxuXHQvLyBIQUNLIFRPIFRFU1Rcblx0XG5cdHRoaXMuc3RhZ2VSZW5kZXJHcm91cC5iYWNrZ3JvdW5kQ29sb3IgPSBzdGFnZS5iYWNrZ3JvdW5kQ29sb3JTcGxpdDtcblx0XG5cdFBJWEkucHJvamVjdGlvbi54ID0gIHRoaXMud2lkdGgvMjtcblx0UElYSS5wcm9qZWN0aW9uLnkgPSAgLXRoaXMuaGVpZ2h0LzI7XG5cdFxuXHR0aGlzLnN0YWdlUmVuZGVyR3JvdXAucmVuZGVyKFBJWEkucHJvamVjdGlvbik7XG5cdFxuXHQvLyBpbnRlcmFjdGlvblxuXHQvLyBydW4gaW50ZXJhY3Rpb24hXG5cdGlmKHN0YWdlLmludGVyYWN0aXZlKVxuXHR7XG5cdFx0Ly9uZWVkIHRvIGFkZCBzb21lIGV2ZW50cyFcblx0XHRpZighc3RhZ2UuX2ludGVyYWN0aXZlRXZlbnRzQWRkZWQpXG5cdFx0e1xuXHRcdFx0c3RhZ2UuX2ludGVyYWN0aXZlRXZlbnRzQWRkZWQgPSB0cnVlO1xuXHRcdFx0c3RhZ2UuaW50ZXJhY3Rpb25NYW5hZ2VyLnNldFRhcmdldCh0aGlzKTtcblx0XHR9XG5cdH1cblx0XG5cdC8vIGFmdGVyIHJlbmRlcmluZyBsZXRzIGNvbmZpcm0gYWxsIGZyYW1lcyB0aGF0IGhhdmUgYmVlbiB1b2RhdGVkLi5cblx0aWYoUElYSS5UZXh0dXJlLmZyYW1lVXBkYXRlcy5sZW5ndGggPiAwKVxuXHR7XG5cdFx0Zm9yICh2YXIgaT0wOyBpIDwgUElYSS5UZXh0dXJlLmZyYW1lVXBkYXRlcy5sZW5ndGg7IGkrKykgXG5cdFx0e1xuXHRcdCAgXHRQSVhJLlRleHR1cmUuZnJhbWVVcGRhdGVzW2ldLnVwZGF0ZUZyYW1lID0gZmFsc2U7XG5cdFx0fTtcblx0XHRcblx0XHRQSVhJLlRleHR1cmUuZnJhbWVVcGRhdGVzID0gW107XG5cdH1cbn1cblxuLyoqXG4gKiBVcGRhdGVzIHRoZSB0ZXh0dXJlcyBsb2FkZWQgaW50byB0aGlzIHdlYmdsIHJlbmRlcmVyXG4gKlxuICogQHN0YXRpY1xuICogQG1ldGhvZCB1cGRhdGVUZXh0dXJlc1xuICogQHByaXZhdGVcbiAqL1xuUElYSS5XZWJHTFJlbmRlcmVyLnVwZGF0ZVRleHR1cmVzID0gZnVuY3Rpb24oKVxue1xuXHQvL1RPRE8gYnJlYWsgdGhpcyBvdXQgaW50byBhIHRleHR1cmUgbWFuYWdlci4uLlxuXHRmb3IgKHZhciBpPTA7IGkgPCBQSVhJLnRleHR1cmVzVG9VcGRhdGUubGVuZ3RoOyBpKyspIFBJWEkuV2ViR0xSZW5kZXJlci51cGRhdGVUZXh0dXJlKFBJWEkudGV4dHVyZXNUb1VwZGF0ZVtpXSk7XG5cdGZvciAodmFyIGk9MDsgaSA8IFBJWEkudGV4dHVyZXNUb0Rlc3Ryb3kubGVuZ3RoOyBpKyspIFBJWEkuV2ViR0xSZW5kZXJlci5kZXN0cm95VGV4dHVyZShQSVhJLnRleHR1cmVzVG9EZXN0cm95W2ldKTtcblx0UElYSS50ZXh0dXJlc1RvVXBkYXRlID0gW107XG5cdFBJWEkudGV4dHVyZXNUb0Rlc3Ryb3kgPSBbXTtcbn1cblxuLyoqXG4gKiBVcGRhdGVzIGEgbG9hZGVkIHdlYmdsIHRleHR1cmVcbiAqXG4gKiBAc3RhdGljXG4gKiBAbWV0aG9kIHVwZGF0ZVRleHR1cmVcbiAqIEBwYXJhbSB0ZXh0dXJlIHtUZXh0dXJlfSBUaGUgdGV4dHVyZSB0byB1cGRhdGVcbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuV2ViR0xSZW5kZXJlci51cGRhdGVUZXh0dXJlID0gZnVuY3Rpb24odGV4dHVyZSlcbntcblx0Ly9UT0RPIGJyZWFrIHRoaXMgb3V0IGludG8gYSB0ZXh0dXJlIG1hbmFnZXIuLi5cblx0dmFyIGdsID0gUElYSS5nbDtcblx0XG5cdGlmKCF0ZXh0dXJlLl9nbFRleHR1cmUpXG5cdHtcblx0XHR0ZXh0dXJlLl9nbFRleHR1cmUgPSBnbC5jcmVhdGVUZXh0dXJlKCk7XG5cdH1cblxuXHRpZih0ZXh0dXJlLmhhc0xvYWRlZClcblx0e1xuXHRcdGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsIHRleHR1cmUuX2dsVGV4dHVyZSk7XG5cdCBcdGdsLnBpeGVsU3RvcmVpKGdsLlVOUEFDS19QUkVNVUxUSVBMWV9BTFBIQV9XRUJHTCwgdHJ1ZSk7XG5cblx0XHRnbC50ZXhJbWFnZTJEKGdsLlRFWFRVUkVfMkQsIDAsIGdsLlJHQkEsIGdsLlJHQkEsIGdsLlVOU0lHTkVEX0JZVEUsIHRleHR1cmUuc291cmNlKTtcblx0XHRnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfTUFHX0ZJTFRFUiwgZ2wuTElORUFSKTtcblx0XHRnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfTUlOX0ZJTFRFUiwgZ2wuTElORUFSKTtcblxuXHRcdC8vIHJlZ3VsZXIuLi5cblxuXHRcdGlmKCF0ZXh0dXJlLl9wb3dlck9mMilcblx0XHR7XG5cdFx0XHRnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfV1JBUF9TLCBnbC5DTEFNUF9UT19FREdFKTtcblx0XHRcdGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9XUkFQX1QsIGdsLkNMQU1QX1RPX0VER0UpO1xuXHRcdH1cblx0XHRlbHNlXG5cdFx0e1xuXHRcdFx0Z2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX1dSQVBfUywgZ2wuUkVQRUFUKTtcblx0XHRcdGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9XUkFQX1QsIGdsLlJFUEVBVCk7XG5cdFx0fVxuXG5cdFx0Z2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgbnVsbCk7XG5cdH1cbn1cblxuLyoqXG4gKiBEZXN0cm95cyBhIGxvYWRlZCB3ZWJnbCB0ZXh0dXJlXG4gKlxuICogQG1ldGhvZCBkZXN0cm95VGV4dHVyZVxuICogQHBhcmFtIHRleHR1cmUge1RleHR1cmV9IFRoZSB0ZXh0dXJlIHRvIHVwZGF0ZVxuICogQHByaXZhdGVcbiAqL1xuUElYSS5XZWJHTFJlbmRlcmVyLmRlc3Ryb3lUZXh0dXJlID0gZnVuY3Rpb24odGV4dHVyZSlcbntcblx0Ly9UT0RPIGJyZWFrIHRoaXMgb3V0IGludG8gYSB0ZXh0dXJlIG1hbmFnZXIuLi5cblx0dmFyIGdsID0gUElYSS5nbDtcblxuXHRpZih0ZXh0dXJlLl9nbFRleHR1cmUpXG5cdHtcblx0XHR0ZXh0dXJlLl9nbFRleHR1cmUgPSBnbC5jcmVhdGVUZXh0dXJlKCk7XG5cdFx0Z2wuZGVsZXRlVGV4dHVyZShnbC5URVhUVVJFXzJELCB0ZXh0dXJlLl9nbFRleHR1cmUpO1xuXHR9XG59XG5cbi8qKlxuICogcmVzaXplcyB0aGUgd2ViR0wgdmlldyB0byB0aGUgc3BlY2lmaWVkIHdpZHRoIGFuZCBoZWlnaHRcbiAqXG4gKiBAbWV0aG9kIHJlc2l6ZVxuICogQHBhcmFtIHdpZHRoIHtOdW1iZXJ9IHRoZSBuZXcgd2lkdGggb2YgdGhlIHdlYkdMIHZpZXdcbiAqIEBwYXJhbSBoZWlnaHQge051bWJlcn0gdGhlIG5ldyBoZWlnaHQgb2YgdGhlIHdlYkdMIHZpZXdcbiAqL1xuUElYSS5XZWJHTFJlbmRlcmVyLnByb3RvdHlwZS5yZXNpemUgPSBmdW5jdGlvbih3aWR0aCwgaGVpZ2h0KVxue1xuXHR0aGlzLndpZHRoID0gd2lkdGg7XG5cdHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xuXG5cdHRoaXMudmlldy53aWR0aCA9IHdpZHRoO1xuXHR0aGlzLnZpZXcuaGVpZ2h0ID0gaGVpZ2h0O1xuXG5cdHRoaXMuZ2wudmlld3BvcnQoMCwgMCwgdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1x0XG5cblx0Ly92YXIgcHJvamVjdGlvbk1hdHJpeCA9IHRoaXMucHJvamVjdGlvbk1hdHJpeDtcblxuXHRQSVhJLnByb2plY3Rpb24ueCA9ICB0aGlzLndpZHRoLzI7XG5cdFBJWEkucHJvamVjdGlvbi55ID0gIC10aGlzLmhlaWdodC8yO1xuXHRcblx0Ly9QSVhJLnNpemUueCA9ICB0aGlzLndpZHRoLzI7XG5cdC8vUElYSS5zaXplLnkgPSAgLXRoaXMuaGVpZ2h0LzI7XG5cbi8vXHRwcm9qZWN0aW9uTWF0cml4WzBdID0gMi90aGlzLndpZHRoO1xuLy9cdHByb2plY3Rpb25NYXRyaXhbNV0gPSAtMi90aGlzLmhlaWdodDtcbi8vXHRwcm9qZWN0aW9uTWF0cml4WzEyXSA9IC0xO1xuLy9cdHByb2plY3Rpb25NYXRyaXhbMTNdID0gMTtcbn1cblxuLyoqXG4gKiBIYW5kbGVzIGEgbG9zdCB3ZWJnbCBjb250ZXh0XG4gKlxuICogQG1ldGhvZCBoYW5kbGVDb250ZXh0TG9zdFxuICogQHBhcmFtIGV2ZW50IHtFdmVudH1cbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuV2ViR0xSZW5kZXJlci5wcm90b3R5cGUuaGFuZGxlQ29udGV4dExvc3QgPSBmdW5jdGlvbihldmVudClcbntcblx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0dGhpcy5jb250ZXh0TG9zdCA9IHRydWU7XG59XG5cbi8qKlxuICogSGFuZGxlcyBhIHJlc3RvcmVkIHdlYmdsIGNvbnRleHRcbiAqXG4gKiBAbWV0aG9kIGhhbmRsZUNvbnRleHRSZXN0b3JlZFxuICogQHBhcmFtIGV2ZW50IHtFdmVudH1cbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuV2ViR0xSZW5kZXJlci5wcm90b3R5cGUuaGFuZGxlQ29udGV4dFJlc3RvcmVkID0gZnVuY3Rpb24oZXZlbnQpXG57XG5cdHRoaXMuZ2wgPSB0aGlzLnZpZXcuZ2V0Q29udGV4dChcImV4cGVyaW1lbnRhbC13ZWJnbFwiLCAgeyAgXHRcblx0XHRhbHBoYTogdHJ1ZVxuICAgIH0pO1xuXG5cdHRoaXMuaW5pdFNoYWRlcnMoKTtcdFxuXG5cdGZvcih2YXIga2V5IGluIFBJWEkuVGV4dHVyZUNhY2hlKSBcblx0e1xuICAgICAgICBcdHZhciB0ZXh0dXJlID0gUElYSS5UZXh0dXJlQ2FjaGVba2V5XS5iYXNlVGV4dHVyZTtcbiAgICAgICAgXHR0ZXh0dXJlLl9nbFRleHR1cmUgPSBudWxsO1xuICAgICAgICBcdFBJWEkuV2ViR0xSZW5kZXJlci51cGRhdGVUZXh0dXJlKHRleHR1cmUpO1xuXHR9O1xuXG5cdGZvciAodmFyIGk9MDsgaSA8ICB0aGlzLmJhdGNocy5sZW5ndGg7IGkrKykgXG5cdHtcblx0XHR0aGlzLmJhdGNoc1tpXS5yZXN0b3JlTG9zdENvbnRleHQodGhpcy5nbCkvL1xuXHRcdHRoaXMuYmF0Y2hzW2ldLmRpcnR5ID0gdHJ1ZTtcblx0fTtcblxuXHRQSVhJLl9yZXN0b3JlQmF0Y2hzKHRoaXMuZ2wpO1xuXG5cdHRoaXMuY29udGV4dExvc3QgPSBmYWxzZTtcbn1cblxuLyoqXG4gKiBAYXV0aG9yIE1hdCBHcm92ZXMgaHR0cDovL21hdGdyb3Zlcy5jb20vIEBEb29ybWF0MjNcbiAqL1xuXG5QSVhJLl9iYXRjaHMgPSBbXTtcblxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5QSVhJLl9nZXRCYXRjaCA9IGZ1bmN0aW9uKGdsKVxue1xuXHRpZihQSVhJLl9iYXRjaHMubGVuZ3RoID09IDApXG5cdHtcblx0XHRyZXR1cm4gbmV3IFBJWEkuV2ViR0xCYXRjaChnbCk7XG5cdH1cblx0ZWxzZVxuXHR7XG5cdFx0cmV0dXJuIFBJWEkuX2JhdGNocy5wb3AoKTtcblx0fVxufVxuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuX3JldHVybkJhdGNoID0gZnVuY3Rpb24oYmF0Y2gpXG57XG5cdGJhdGNoLmNsZWFuKCk7XHRcblx0UElYSS5fYmF0Y2hzLnB1c2goYmF0Y2gpO1xufVxuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuX3Jlc3RvcmVCYXRjaHMgPSBmdW5jdGlvbihnbClcbntcblx0Zm9yICh2YXIgaT0wOyBpIDwgUElYSS5fYmF0Y2hzLmxlbmd0aDsgaSsrKSBcblx0e1xuXHQgIFBJWEkuX2JhdGNoc1tpXS5yZXN0b3JlTG9zdENvbnRleHQoZ2wpO1xuXHR9O1xufVxuXG4vKipcbiAqIEEgV2ViR0xCYXRjaCBFbmFibGVzIGEgZ3JvdXAgb2Ygc3ByaXRlcyB0byBiZSBkcmF3biB1c2luZyB0aGUgc2FtZSBzZXR0aW5ncy5cbiAqIGlmIGEgZ3JvdXAgb2Ygc3ByaXRlcyBhbGwgaGF2ZSB0aGUgc2FtZSBiYXNlVGV4dHVyZSBhbmQgYmxlbmRNb2RlIHRoZW4gdGhleSBjYW4gYmUgZ3JvdXBlZCBpbnRvIGEgYmF0Y2guXG4gKiBBbGwgdGhlIHNwcml0ZXMgaW4gYSBiYXRjaCBjYW4gdGhlbiBiZSBkcmF3biBpbiBvbmUgZ28gYnkgdGhlIEdQVSB3aGljaCBpcyBodWdlbHkgZWZmaWNpZW50LiBBTEwgc3ByaXRlc1xuICogaW4gdGhlIHdlYkdMIHJlbmRlcmVyIGFyZSBhZGRlZCB0byBhIGJhdGNoIGV2ZW4gaWYgdGhlIGJhdGNoIG9ubHkgY29udGFpbnMgb25lIHNwcml0ZS4gQmF0Y2hpbmcgaXMgaGFuZGxlZFxuICogYXV0b21hdGljYWxseSBieSB0aGUgd2ViR0wgcmVuZGVyZXIuIEEgZ29vZCB0aXAgaXM6IHRoZSBzbWFsbGVyIHRoZSBudW1iZXIgb2YgYmF0Y2hzIHRoZXJlIGFyZSwgdGhlIGZhc3RlclxuICogdGhlIHdlYkdMIHJlbmRlcmVyIHdpbGwgcnVuLlxuICpcbiAqIEBjbGFzcyBXZWJHTEJhdGNoXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSBnbCB7V2ViR0xDb250ZXh0fSBhbiBpbnN0YW5jZSBvZiB0aGUgd2ViR0wgY29udGV4dFxuICovXG5QSVhJLldlYkdMQmF0Y2ggPSBmdW5jdGlvbihnbClcbntcblx0dGhpcy5nbCA9IGdsO1xuXHRcblx0dGhpcy5zaXplID0gMDtcblxuXHR0aGlzLnZlcnRleEJ1ZmZlciA9ICBnbC5jcmVhdGVCdWZmZXIoKTtcblx0dGhpcy5pbmRleEJ1ZmZlciA9ICBnbC5jcmVhdGVCdWZmZXIoKTtcblx0dGhpcy51dkJ1ZmZlciA9ICBnbC5jcmVhdGVCdWZmZXIoKTtcblx0dGhpcy5jb2xvckJ1ZmZlciA9ICBnbC5jcmVhdGVCdWZmZXIoKTtcblx0dGhpcy5ibGVuZE1vZGUgPSBQSVhJLmJsZW5kTW9kZXMuTk9STUFMO1xuXHR0aGlzLmR5bmFtaWNTaXplID0gMTtcbn1cblxuLy8gY29uc3RydWN0b3JcblBJWEkuV2ViR0xCYXRjaC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBQSVhJLldlYkdMQmF0Y2g7XG5cbi8qKlxuICogQ2xlYW5zIHRoZSBiYXRjaCBzbyB0aGF0IGlzIGNhbiBiZSByZXR1cm5lZCB0byBhbiBvYmplY3QgcG9vbCBhbmQgcmV1c2VkXG4gKlxuICogQG1ldGhvZCBjbGVhblxuICovXG5QSVhJLldlYkdMQmF0Y2gucHJvdG90eXBlLmNsZWFuID0gZnVuY3Rpb24oKVxue1xuXHR0aGlzLnZlcnRpY2llcyA9IFtdO1xuXHR0aGlzLnV2cyA9IFtdO1xuXHR0aGlzLmluZGljZXMgPSBbXTtcblx0dGhpcy5jb2xvcnMgPSBbXTtcblx0dGhpcy5keW5hbWljU2l6ZSA9IDE7XG5cdHRoaXMudGV4dHVyZSA9IG51bGw7XG5cdHRoaXMubGFzdCA9IG51bGw7XG5cdHRoaXMuc2l6ZSA9IDA7XG5cdHRoaXMuaGVhZDtcblx0dGhpcy50YWlsO1xufVxuXG4vKipcbiAqIFJlY3JlYXRlcyB0aGUgYnVmZmVycyBpbiB0aGUgZXZlbnQgb2YgYSBjb250ZXh0IGxvc3NcbiAqXG4gKiBAbWV0aG9kIHJlc3RvcmVMb3N0Q29udGV4dFxuICogQHBhcmFtIGdsIHtXZWJHTENvbnRleHR9XG4gKi9cblBJWEkuV2ViR0xCYXRjaC5wcm90b3R5cGUucmVzdG9yZUxvc3RDb250ZXh0ID0gZnVuY3Rpb24oZ2wpXG57XG5cdHRoaXMuZ2wgPSBnbDtcblx0dGhpcy52ZXJ0ZXhCdWZmZXIgPSAgZ2wuY3JlYXRlQnVmZmVyKCk7XG5cdHRoaXMuaW5kZXhCdWZmZXIgPSAgZ2wuY3JlYXRlQnVmZmVyKCk7XG5cdHRoaXMudXZCdWZmZXIgPSAgZ2wuY3JlYXRlQnVmZmVyKCk7XG5cdHRoaXMuY29sb3JCdWZmZXIgPSAgZ2wuY3JlYXRlQnVmZmVyKCk7XG59XG5cbi8qKlxuICogaW5pdHMgdGhlIGJhdGNoJ3MgdGV4dHVyZSBhbmQgYmxlbmQgbW9kZSBiYXNlZCBpZiB0aGUgc3VwcGxpZWQgc3ByaXRlXG4gKlxuICogQG1ldGhvZCBpbml0XG4gKiBAcGFyYW0gc3ByaXRlIHtTcHJpdGV9IHRoZSBmaXJzdCBzcHJpdGUgdG8gYmUgYWRkZWQgdG8gdGhlIGJhdGNoLiBPbmx5IHNwcml0ZXMgd2l0aFxuICpcdFx0dGhlIHNhbWUgYmFzZSB0ZXh0dXJlIGFuZCBibGVuZCBtb2RlIHdpbGwgYmUgYWxsb3dlZCB0byBiZSBhZGRlZCB0byB0aGlzIGJhdGNoXG4gKi9cdFxuUElYSS5XZWJHTEJhdGNoLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24oc3ByaXRlKVxue1xuXHRzcHJpdGUuYmF0Y2ggPSB0aGlzO1xuXHR0aGlzLmRpcnR5ID0gdHJ1ZTtcblx0dGhpcy5ibGVuZE1vZGUgPSBzcHJpdGUuYmxlbmRNb2RlO1xuXHR0aGlzLnRleHR1cmUgPSBzcHJpdGUudGV4dHVyZS5iYXNlVGV4dHVyZTtcblx0dGhpcy5oZWFkID0gc3ByaXRlO1xuXHR0aGlzLnRhaWwgPSBzcHJpdGU7XG5cdHRoaXMuc2l6ZSA9IDE7XG5cblx0dGhpcy5ncm93QmF0Y2goKTtcbn1cblxuLyoqXG4gKiBpbnNlcnRzIGEgc3ByaXRlIGJlZm9yZSB0aGUgc3BlY2lmaWVkIHNwcml0ZVxuICpcbiAqIEBtZXRob2QgaW5zZXJ0QmVmb3JlXG4gKiBAcGFyYW0gc3ByaXRlIHtTcHJpdGV9IHRoZSBzcHJpdGUgdG8gYmUgYWRkZWRcbiAqIEBwYXJhbSBuZXh0U3ByaXRlIHtuZXh0U3ByaXRlfSB0aGUgZmlyc3Qgc3ByaXRlIHdpbGwgYmUgaW5zZXJ0ZWQgYmVmb3JlIHRoaXMgc3ByaXRlXG4gKi9cdFxuUElYSS5XZWJHTEJhdGNoLnByb3RvdHlwZS5pbnNlcnRCZWZvcmUgPSBmdW5jdGlvbihzcHJpdGUsIG5leHRTcHJpdGUpXG57XG5cdHRoaXMuc2l6ZSsrO1xuXG5cdHNwcml0ZS5iYXRjaCA9IHRoaXM7XG5cdHRoaXMuZGlydHkgPSB0cnVlO1xuXHR2YXIgdGVtcFByZXYgPSBuZXh0U3ByaXRlLl9fcHJldjtcblx0bmV4dFNwcml0ZS5fX3ByZXYgPSBzcHJpdGU7XG5cdHNwcml0ZS5fX25leHQgPSBuZXh0U3ByaXRlO1xuXG5cdGlmKHRlbXBQcmV2KVxuXHR7XG5cdFx0c3ByaXRlLl9fcHJldiA9IHRlbXBQcmV2O1xuXHRcdHRlbXBQcmV2Ll9fbmV4dCA9IHNwcml0ZTtcblx0fVxuXHRlbHNlXG5cdHtcblx0XHR0aGlzLmhlYWQgPSBzcHJpdGU7XG5cdH1cbn1cblxuLyoqXG4gKiBpbnNlcnRzIGEgc3ByaXRlIGFmdGVyIHRoZSBzcGVjaWZpZWQgc3ByaXRlXG4gKlxuICogQG1ldGhvZCBpbnNlcnRBZnRlclxuICogQHBhcmFtIHNwcml0ZSB7U3ByaXRlfSB0aGUgc3ByaXRlIHRvIGJlIGFkZGVkXG4gKiBAcGFyYW0gIHByZXZpb3VzU3ByaXRlIHtTcHJpdGV9IHRoZSBmaXJzdCBzcHJpdGUgd2lsbCBiZSBpbnNlcnRlZCBhZnRlciB0aGlzIHNwcml0ZVxuICovXHRcblBJWEkuV2ViR0xCYXRjaC5wcm90b3R5cGUuaW5zZXJ0QWZ0ZXIgPSBmdW5jdGlvbihzcHJpdGUsIHByZXZpb3VzU3ByaXRlKVxue1xuXHR0aGlzLnNpemUrKztcblxuXHRzcHJpdGUuYmF0Y2ggPSB0aGlzO1xuXHR0aGlzLmRpcnR5ID0gdHJ1ZTtcblxuXHR2YXIgdGVtcE5leHQgPSBwcmV2aW91c1Nwcml0ZS5fX25leHQ7XG5cdHByZXZpb3VzU3ByaXRlLl9fbmV4dCA9IHNwcml0ZTtcblx0c3ByaXRlLl9fcHJldiA9IHByZXZpb3VzU3ByaXRlO1xuXG5cdGlmKHRlbXBOZXh0KVxuXHR7XG5cdFx0c3ByaXRlLl9fbmV4dCA9IHRlbXBOZXh0O1xuXHRcdHRlbXBOZXh0Ll9fcHJldiA9IHNwcml0ZTtcblx0fVxuXHRlbHNlXG5cdHtcblx0XHR0aGlzLnRhaWwgPSBzcHJpdGVcblx0fVxufVxuXG4vKipcbiAqIHJlbW92ZXMgYSBzcHJpdGUgZnJvbSB0aGUgYmF0Y2hcbiAqXG4gKiBAbWV0aG9kIHJlbW92ZVxuICogQHBhcmFtIHNwcml0ZSB7U3ByaXRlfSB0aGUgc3ByaXRlIHRvIGJlIHJlbW92ZWRcbiAqL1x0XG5QSVhJLldlYkdMQmF0Y2gucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uKHNwcml0ZSlcbntcblx0dGhpcy5zaXplLS07XG5cblx0aWYodGhpcy5zaXplID09IDApXG5cdHtcblx0XHRzcHJpdGUuYmF0Y2ggPSBudWxsO1xuXHRcdHNwcml0ZS5fX3ByZXYgPSBudWxsO1xuXHRcdHNwcml0ZS5fX25leHQgPSBudWxsO1xuXHRcdHJldHVybjtcblx0fVxuXG5cdGlmKHNwcml0ZS5fX3ByZXYpXG5cdHtcblx0XHRzcHJpdGUuX19wcmV2Ll9fbmV4dCA9IHNwcml0ZS5fX25leHQ7XG5cdH1cblx0ZWxzZVxuXHR7XG5cdFx0dGhpcy5oZWFkID0gc3ByaXRlLl9fbmV4dDtcblx0XHR0aGlzLmhlYWQuX19wcmV2ID0gbnVsbDtcblx0fVxuXG5cdGlmKHNwcml0ZS5fX25leHQpXG5cdHtcblx0XHRzcHJpdGUuX19uZXh0Ll9fcHJldiA9IHNwcml0ZS5fX3ByZXY7XG5cdH1cblx0ZWxzZVxuXHR7XG5cdFx0dGhpcy50YWlsID0gc3ByaXRlLl9fcHJldjtcblx0XHR0aGlzLnRhaWwuX19uZXh0ID0gbnVsbFxuXHR9XG5cblx0c3ByaXRlLmJhdGNoID0gbnVsbDtcblx0c3ByaXRlLl9fbmV4dCA9IG51bGw7XG5cdHNwcml0ZS5fX3ByZXYgPSBudWxsO1xuXHR0aGlzLmRpcnR5ID0gdHJ1ZTtcbn1cblxuLyoqXG4gKiBTcGxpdHMgdGhlIGJhdGNoIGludG8gdHdvIHdpdGggdGhlIHNwZWNpZmllZCBzcHJpdGUgYmVpbmcgdGhlIHN0YXJ0IG9mIHRoZSBuZXcgYmF0Y2guXG4gKlxuICogQG1ldGhvZCBzcGxpdFxuICogQHBhcmFtIHNwcml0ZSB7U3ByaXRlfSB0aGUgc3ByaXRlIHRoYXQgaW5kaWNhdGVzIHdoZXJlIHRoZSBiYXRjaCBzaG91bGQgYmUgc3BsaXRcbiAqIEByZXR1cm4ge1dlYkdMQmF0Y2h9IHRoZSBuZXcgYmF0Y2hcbiAqL1xuUElYSS5XZWJHTEJhdGNoLnByb3RvdHlwZS5zcGxpdCA9IGZ1bmN0aW9uKHNwcml0ZSlcbntcblx0dGhpcy5kaXJ0eSA9IHRydWU7XG5cblx0dmFyIGJhdGNoID0gbmV3IFBJWEkuV2ViR0xCYXRjaCh0aGlzLmdsKTtcblx0YmF0Y2guaW5pdChzcHJpdGUpO1xuXHRiYXRjaC50ZXh0dXJlID0gdGhpcy50ZXh0dXJlO1xuXHRiYXRjaC50YWlsID0gdGhpcy50YWlsO1xuXG5cdHRoaXMudGFpbCA9IHNwcml0ZS5fX3ByZXY7XG5cdHRoaXMudGFpbC5fX25leHQgPSBudWxsO1xuXG5cdHNwcml0ZS5fX3ByZXYgPSBudWxsO1xuXHQvLyByZXR1cm4gYSBzcGxpdGUgYmF0Y2ghXG5cblx0Ly8gVE9ETyB0aGlzIHNpemUgaXMgd3JvbmchXG5cdC8vIG5lZWQgdG8gcmVjYWxjdWxhdGUgOi8gcHJvYmxlbSB3aXRoIGEgbGlua2VkIGxpc3QhXG5cdC8vIHVubGVzcyBpdCBnZXRzIGNhbGN1bGF0ZWQgaW4gdGhlIFwiY2xlYW5cIj9cblxuXHQvLyBuZWVkIHRvIGxvb3AgdGhyb3VnaCBpdGVtcyBhcyB0aGVyZSBpcyBubyB3YXkgdG8ga25vdyB0aGUgbGVuZ3RoIG9uIGEgbGlua2VkIGxpc3QgOi9cblx0dmFyIHRlbXBTaXplID0gMDtcblx0d2hpbGUoc3ByaXRlKVxuXHR7XG5cdFx0dGVtcFNpemUrKztcblx0XHRzcHJpdGUuYmF0Y2ggPSBiYXRjaDtcblx0XHRzcHJpdGUgPSBzcHJpdGUuX19uZXh0O1xuXHR9XG5cblx0YmF0Y2guc2l6ZSA9IHRlbXBTaXplO1xuXHR0aGlzLnNpemUgLT0gdGVtcFNpemU7XG5cblx0cmV0dXJuIGJhdGNoO1xufVxuXG4vKipcbiAqIE1lcmdlcyB0d28gYmF0Y2hzIHRvZ2V0aGVyXG4gKlxuICogQG1ldGhvZCBtZXJnZVxuICogQHBhcmFtIGJhdGNoIHtXZWJHTEJhdGNofSB0aGUgYmF0Y2ggdGhhdCB3aWxsIGJlIG1lcmdlZCBcbiAqL1xuUElYSS5XZWJHTEJhdGNoLnByb3RvdHlwZS5tZXJnZSA9IGZ1bmN0aW9uKGJhdGNoKVxue1xuXHR0aGlzLmRpcnR5ID0gdHJ1ZTtcblxuXHR0aGlzLnRhaWwuX19uZXh0ID0gYmF0Y2guaGVhZDtcblx0YmF0Y2guaGVhZC5fX3ByZXYgPSB0aGlzLnRhaWw7XG5cblx0dGhpcy5zaXplICs9IGJhdGNoLnNpemU7XG5cblx0dGhpcy50YWlsID0gYmF0Y2gudGFpbDtcblxuXHR2YXIgc3ByaXRlID0gYmF0Y2guaGVhZDtcblx0d2hpbGUoc3ByaXRlKVxuXHR7XG5cdFx0c3ByaXRlLmJhdGNoID0gdGhpcztcblx0XHRzcHJpdGUgPSBzcHJpdGUuX19uZXh0O1xuXHR9XG59XG5cbi8qKlxuICogR3Jvd3MgdGhlIHNpemUgb2YgdGhlIGJhdGNoLiBBcyB0aGUgZWxlbWVudHMgaW4gdGhlIGJhdGNoIGNhbm5vdCBoYXZlIGEgZHluYW1pYyBzaXplIHRoaXNcbiAqIGZ1bmN0aW9uIGlzIHVzZWQgdG8gaW5jcmVhc2UgdGhlIHNpemUgb2YgdGhlIGJhdGNoLiBJdCBhbHNvIGNyZWF0ZXMgYSBsaXR0bGUgZXh0cmEgcm9vbSBzb1xuICogdGhhdCB0aGUgYmF0Y2ggZG9lcyBub3QgbmVlZCB0byBiZSByZXNpemVkIGV2ZXJ5IHRpbWUgYSBzcHJpdGUgaXMgYWRkZWRcbiAqXG4gKiBAbWV0aG9kIGdyb3dCYXRjaFxuICovXG5QSVhJLldlYkdMQmF0Y2gucHJvdG90eXBlLmdyb3dCYXRjaCA9IGZ1bmN0aW9uKClcbntcblx0dmFyIGdsID0gdGhpcy5nbDtcblx0aWYoIHRoaXMuc2l6ZSA9PSAxKVxuXHR7XG5cdFx0dGhpcy5keW5hbWljU2l6ZSA9IDE7XG5cdH1cblx0ZWxzZVxuXHR7XG5cdFx0dGhpcy5keW5hbWljU2l6ZSA9IHRoaXMuc2l6ZSAqIDEuNVxuXHR9XG5cdC8vIGdyb3cgdmVydHNcblx0dGhpcy52ZXJ0aWNpZXMgPSBuZXcgRmxvYXQzMkFycmF5KHRoaXMuZHluYW1pY1NpemUgKiA4KTtcblxuXHRnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgdGhpcy52ZXJ0ZXhCdWZmZXIpO1xuXHRnbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUix0aGlzLnZlcnRpY2llcyAsIGdsLkRZTkFNSUNfRFJBVyk7XG5cblx0dGhpcy51dnMgID0gbmV3IEZsb2F0MzJBcnJheSggdGhpcy5keW5hbWljU2l6ZSAqIDggKTtcblx0Z2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHRoaXMudXZCdWZmZXIpO1xuXHRnbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgdGhpcy51dnMgLCBnbC5EWU5BTUlDX0RSQVcpO1xuXG5cdHRoaXMuZGlydHlVVlMgPSB0cnVlO1xuXG5cdHRoaXMuY29sb3JzICA9IG5ldyBGbG9hdDMyQXJyYXkoIHRoaXMuZHluYW1pY1NpemUgKiA0ICk7XG5cdGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB0aGlzLmNvbG9yQnVmZmVyKTtcblx0Z2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsIHRoaXMuY29sb3JzICwgZ2wuRFlOQU1JQ19EUkFXKTtcblxuXHR0aGlzLmRpcnR5Q29sb3JzID0gdHJ1ZTtcblxuXHR0aGlzLmluZGljZXMgPSBuZXcgVWludDE2QXJyYXkodGhpcy5keW5hbWljU2l6ZSAqIDYpOyBcblx0dmFyIGxlbmd0aCA9IHRoaXMuaW5kaWNlcy5sZW5ndGgvNjtcblxuXHRmb3IgKHZhciBpPTA7IGkgPCBsZW5ndGg7IGkrKykgXG5cdHtcblx0ICAgIHZhciBpbmRleDIgPSBpICogNjtcblx0ICAgIHZhciBpbmRleDMgPSBpICogNDtcblx0XHR0aGlzLmluZGljZXNbaW5kZXgyICsgMF0gPSBpbmRleDMgKyAwO1xuXHRcdHRoaXMuaW5kaWNlc1tpbmRleDIgKyAxXSA9IGluZGV4MyArIDE7XG5cdFx0dGhpcy5pbmRpY2VzW2luZGV4MiArIDJdID0gaW5kZXgzICsgMjtcblx0XHR0aGlzLmluZGljZXNbaW5kZXgyICsgM10gPSBpbmRleDMgKyAwO1xuXHRcdHRoaXMuaW5kaWNlc1tpbmRleDIgKyA0XSA9IGluZGV4MyArIDI7XG5cdFx0dGhpcy5pbmRpY2VzW2luZGV4MiArIDVdID0gaW5kZXgzICsgMztcblx0fTtcblxuXHRnbC5iaW5kQnVmZmVyKGdsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLCB0aGlzLmluZGV4QnVmZmVyKTtcbiAgICBnbC5idWZmZXJEYXRhKGdsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLCB0aGlzLmluZGljZXMsIGdsLlNUQVRJQ19EUkFXKTtcbn1cblxuLyoqXG4gKiBSZWZyZXNoJ3MgYWxsIHRoZSBkYXRhIGluIHRoZSBiYXRjaCBhbmQgc3luYydzIGl0IHdpdGggdGhlIHdlYkdMIGJ1ZmZlcnNcbiAqXG4gKiBAbWV0aG9kIHJlZnJlc2hcbiAqL1xuUElYSS5XZWJHTEJhdGNoLnByb3RvdHlwZS5yZWZyZXNoID0gZnVuY3Rpb24oKVxue1xuXHR2YXIgZ2wgPSB0aGlzLmdsO1xuXG5cdGlmICh0aGlzLmR5bmFtaWNTaXplIDwgdGhpcy5zaXplKVxuXHR7XG5cdFx0dGhpcy5ncm93QmF0Y2goKTtcblx0fVxuXG5cdHZhciBpbmRleFJ1biA9IDA7XG5cdHZhciB3b3JsZFRyYW5zZm9ybSwgd2lkdGgsIGhlaWdodCwgYVgsIGFZLCB3MCwgdzEsIGgwLCBoMSwgaW5kZXg7XG5cdHZhciBhLCBiLCBjLCBkLCB0eCwgdHk7XG5cblx0dmFyIGRpc3BsYXlPYmplY3QgPSB0aGlzLmhlYWQ7XG5cblx0d2hpbGUoZGlzcGxheU9iamVjdClcblx0e1xuXHRcdGluZGV4ID0gaW5kZXhSdW4gKiA4O1xuXG5cdFx0dmFyIHRleHR1cmUgPSBkaXNwbGF5T2JqZWN0LnRleHR1cmU7XG5cblx0XHR2YXIgZnJhbWUgPSB0ZXh0dXJlLmZyYW1lO1xuXHRcdHZhciB0dyA9IHRleHR1cmUuYmFzZVRleHR1cmUud2lkdGg7XG5cdFx0dmFyIHRoID0gdGV4dHVyZS5iYXNlVGV4dHVyZS5oZWlnaHQ7XG5cblx0XHR0aGlzLnV2c1tpbmRleCArIDBdID0gZnJhbWUueCAvIHR3O1xuXHRcdHRoaXMudXZzW2luZGV4ICsxXSA9IGZyYW1lLnkgLyB0aDtcblxuXHRcdHRoaXMudXZzW2luZGV4ICsyXSA9IChmcmFtZS54ICsgZnJhbWUud2lkdGgpIC8gdHc7XG5cdFx0dGhpcy51dnNbaW5kZXggKzNdID0gZnJhbWUueSAvIHRoO1xuXG5cdFx0dGhpcy51dnNbaW5kZXggKzRdID0gKGZyYW1lLnggKyBmcmFtZS53aWR0aCkgLyB0dztcblx0XHR0aGlzLnV2c1tpbmRleCArNV0gPSAoZnJhbWUueSArIGZyYW1lLmhlaWdodCkgLyB0aDsgXG5cblx0XHR0aGlzLnV2c1tpbmRleCArNl0gPSBmcmFtZS54IC8gdHc7XG5cdFx0dGhpcy51dnNbaW5kZXggKzddID0gKGZyYW1lLnkgKyBmcmFtZS5oZWlnaHQpIC8gdGg7XG5cblx0XHRkaXNwbGF5T2JqZWN0LnVwZGF0ZUZyYW1lID0gZmFsc2U7XG5cblx0XHRjb2xvckluZGV4ID0gaW5kZXhSdW4gKiA0O1xuXHRcdHRoaXMuY29sb3JzW2NvbG9ySW5kZXhdID0gdGhpcy5jb2xvcnNbY29sb3JJbmRleCArIDFdID0gdGhpcy5jb2xvcnNbY29sb3JJbmRleCArIDJdID0gdGhpcy5jb2xvcnNbY29sb3JJbmRleCArIDNdID0gZGlzcGxheU9iamVjdC53b3JsZEFscGhhO1xuXG5cdFx0ZGlzcGxheU9iamVjdCA9IGRpc3BsYXlPYmplY3QuX19uZXh0O1xuXG5cdFx0aW5kZXhSdW4gKys7XG5cdH1cblxuXHR0aGlzLmRpcnR5VVZTID0gdHJ1ZTtcblx0dGhpcy5kaXJ0eUNvbG9ycyA9IHRydWU7XG59XG5cbi8qKlxuICogVXBkYXRlcyBhbGwgdGhlIHJlbGV2YW50IGdlb21ldHJ5IGFuZCB1cGxvYWRzIHRoZSBkYXRhIHRvIHRoZSBHUFVcbiAqXG4gKiBAbWV0aG9kIHVwZGF0ZVxuICovXG5QSVhJLldlYkdMQmF0Y2gucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uKClcbntcblx0dmFyIGdsID0gdGhpcy5nbDtcblx0dmFyIHdvcmxkVHJhbnNmb3JtLCB3aWR0aCwgaGVpZ2h0LCBhWCwgYVksIHcwLCB3MSwgaDAsIGgxLCBpbmRleCwgaW5kZXgyLCBpbmRleDNcblxuXHR2YXIgYSwgYiwgYywgZCwgdHgsIHR5O1xuXG5cdHZhciBpbmRleFJ1biA9IDA7XG5cblx0dmFyIGRpc3BsYXlPYmplY3QgPSB0aGlzLmhlYWQ7XG5cdHZhciB2ZXJ0aWNpZXMgPSB0aGlzLnZlcnRpY2llcztcblx0dmFyIHV2cyA9IHRoaXMudXZzO1xuXHR2YXIgY29sb3JzID0gdGhpcy5jb2xvcnM7XG5cdFxuXHR3aGlsZShkaXNwbGF5T2JqZWN0KVxuXHR7XG5cdFx0aWYoZGlzcGxheU9iamVjdC52Y291bnQgPT09IFBJWEkudmlzaWJsZUNvdW50KVxuXHRcdHtcblx0XHRcdHdpZHRoID0gZGlzcGxheU9iamVjdC50ZXh0dXJlLmZyYW1lLndpZHRoO1xuXHRcdFx0aGVpZ2h0ID0gZGlzcGxheU9iamVjdC50ZXh0dXJlLmZyYW1lLmhlaWdodDtcblxuXHRcdFx0Ly8gVE9ETyB0cmltPz9cblx0XHRcdGFYID0gZGlzcGxheU9iamVjdC5hbmNob3IueDsvLyAtIGRpc3BsYXlPYmplY3QudGV4dHVyZS50cmltLnhcblx0XHRcdGFZID0gZGlzcGxheU9iamVjdC5hbmNob3IueTsgLy8tIGRpc3BsYXlPYmplY3QudGV4dHVyZS50cmltLnlcblx0XHRcdHcwID0gd2lkdGggKiAoMS1hWCk7XG5cdFx0XHR3MSA9IHdpZHRoICogLWFYO1xuXG5cdFx0XHRoMCA9IGhlaWdodCAqICgxLWFZKTtcblx0XHRcdGgxID0gaGVpZ2h0ICogLWFZO1xuXG5cdFx0XHRpbmRleCA9IGluZGV4UnVuICogODtcblxuXHRcdFx0d29ybGRUcmFuc2Zvcm0gPSBkaXNwbGF5T2JqZWN0LndvcmxkVHJhbnNmb3JtO1xuXG5cdFx0XHRhID0gd29ybGRUcmFuc2Zvcm1bMF07XG5cdFx0XHRiID0gd29ybGRUcmFuc2Zvcm1bM107XG5cdFx0XHRjID0gd29ybGRUcmFuc2Zvcm1bMV07XG5cdFx0XHRkID0gd29ybGRUcmFuc2Zvcm1bNF07XG5cdFx0XHR0eCA9IHdvcmxkVHJhbnNmb3JtWzJdO1xuXHRcdFx0dHkgPSB3b3JsZFRyYW5zZm9ybVs1XTtcblxuXHRcdFx0dmVydGljaWVzW2luZGV4ICsgMCBdID0gYSAqIHcxICsgYyAqIGgxICsgdHg7IFxuXHRcdFx0dmVydGljaWVzW2luZGV4ICsgMSBdID0gZCAqIGgxICsgYiAqIHcxICsgdHk7XG5cblx0XHRcdHZlcnRpY2llc1tpbmRleCArIDIgXSA9IGEgKiB3MCArIGMgKiBoMSArIHR4OyBcblx0XHRcdHZlcnRpY2llc1tpbmRleCArIDMgXSA9IGQgKiBoMSArIGIgKiB3MCArIHR5OyBcblxuXHRcdFx0dmVydGljaWVzW2luZGV4ICsgNCBdID0gYSAqIHcwICsgYyAqIGgwICsgdHg7IFxuXHRcdFx0dmVydGljaWVzW2luZGV4ICsgNSBdID0gZCAqIGgwICsgYiAqIHcwICsgdHk7IFxuXG5cdFx0XHR2ZXJ0aWNpZXNbaW5kZXggKyA2XSA9ICBhICogdzEgKyBjICogaDAgKyB0eDsgXG5cdFx0XHR2ZXJ0aWNpZXNbaW5kZXggKyA3XSA9ICBkICogaDAgKyBiICogdzEgKyB0eTsgXG5cblx0XHRcdGlmKGRpc3BsYXlPYmplY3QudXBkYXRlRnJhbWUgfHwgZGlzcGxheU9iamVjdC50ZXh0dXJlLnVwZGF0ZUZyYW1lKVxuXHRcdFx0e1xuXHRcdFx0XHR0aGlzLmRpcnR5VVZTID0gdHJ1ZTtcblxuXHRcdFx0XHR2YXIgdGV4dHVyZSA9IGRpc3BsYXlPYmplY3QudGV4dHVyZTtcblxuXHRcdFx0XHR2YXIgZnJhbWUgPSB0ZXh0dXJlLmZyYW1lO1xuXHRcdFx0XHR2YXIgdHcgPSB0ZXh0dXJlLmJhc2VUZXh0dXJlLndpZHRoO1xuXHRcdFx0XHR2YXIgdGggPSB0ZXh0dXJlLmJhc2VUZXh0dXJlLmhlaWdodDtcblxuXHRcdFx0XHR1dnNbaW5kZXggKyAwXSA9IGZyYW1lLnggLyB0dztcblx0XHRcdFx0dXZzW2luZGV4ICsxXSA9IGZyYW1lLnkgLyB0aDtcblxuXHRcdFx0XHR1dnNbaW5kZXggKzJdID0gKGZyYW1lLnggKyBmcmFtZS53aWR0aCkgLyB0dztcblx0XHRcdFx0dXZzW2luZGV4ICszXSA9IGZyYW1lLnkgLyB0aDtcblxuXHRcdFx0XHR1dnNbaW5kZXggKzRdID0gKGZyYW1lLnggKyBmcmFtZS53aWR0aCkgLyB0dztcblx0XHRcdFx0dXZzW2luZGV4ICs1XSA9IChmcmFtZS55ICsgZnJhbWUuaGVpZ2h0KSAvIHRoOyBcblxuXHRcdFx0XHR1dnNbaW5kZXggKzZdID0gZnJhbWUueCAvIHR3O1xuXHRcdFx0XHR1dnNbaW5kZXggKzddID0gKGZyYW1lLnkgKyBmcmFtZS5oZWlnaHQpIC8gdGg7XG5cblx0XHRcdFx0ZGlzcGxheU9iamVjdC51cGRhdGVGcmFtZSA9IGZhbHNlO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBUT0RPIHRoaXMgcHJvYmFibHkgY291bGQgZG8gd2l0aCBzb21lIG9wdGltaXNhdGlvbi4uLi5cblx0XHRcdGlmKGRpc3BsYXlPYmplY3QuY2FjaGVBbHBoYSAhPSBkaXNwbGF5T2JqZWN0LndvcmxkQWxwaGEpXG5cdFx0XHR7XG5cdFx0XHRcdGRpc3BsYXlPYmplY3QuY2FjaGVBbHBoYSA9IGRpc3BsYXlPYmplY3Qud29ybGRBbHBoYTtcblxuXHRcdFx0XHR2YXIgY29sb3JJbmRleCA9IGluZGV4UnVuICogNDtcblx0XHRcdFx0Y29sb3JzW2NvbG9ySW5kZXhdID0gY29sb3JzW2NvbG9ySW5kZXggKyAxXSA9IGNvbG9yc1tjb2xvckluZGV4ICsgMl0gPSBjb2xvcnNbY29sb3JJbmRleCArIDNdID0gZGlzcGxheU9iamVjdC53b3JsZEFscGhhO1xuXHRcdFx0XHR0aGlzLmRpcnR5Q29sb3JzID0gdHJ1ZTtcblx0XHRcdH1cblx0XHR9XG5cdFx0ZWxzZVxuXHRcdHtcblx0XHRcdGluZGV4ID0gaW5kZXhSdW4gKiA4O1xuXG5cdFx0XHR2ZXJ0aWNpZXNbaW5kZXggKyAwIF0gPSB2ZXJ0aWNpZXNbaW5kZXggKyAxIF0gPSB2ZXJ0aWNpZXNbaW5kZXggKyAyIF0gPSB2ZXJ0aWNpZXNbaW5kZXggKyAzIF0gPSB2ZXJ0aWNpZXNbaW5kZXggKyA0IF0gPSB2ZXJ0aWNpZXNbaW5kZXggKyA1IF0gPSB2ZXJ0aWNpZXNbaW5kZXggKyA2XSA9IFx0dmVydGljaWVzW2luZGV4ICsgN10gPSAwO1xuXHRcdH1cblxuXHRcdGluZGV4UnVuKys7XG5cdFx0ZGlzcGxheU9iamVjdCA9IGRpc3BsYXlPYmplY3QuX19uZXh0O1xuICAgfVxufVxuXG4vKipcbiAqIERyYXdzIHRoZSBiYXRjaCB0byB0aGUgZnJhbWUgYnVmZmVyXG4gKlxuICogQG1ldGhvZCByZW5kZXJcbiAqL1xuUElYSS5XZWJHTEJhdGNoLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbihzdGFydCwgZW5kKVxue1xuXHRzdGFydCA9IHN0YXJ0IHx8IDA7XG5cblx0aWYoZW5kID09IHVuZGVmaW5lZCllbmQgPSB0aGlzLnNpemU7XG5cdFxuXHRpZih0aGlzLmRpcnR5KVxuXHR7XG5cdFx0dGhpcy5yZWZyZXNoKCk7XG5cdFx0dGhpcy5kaXJ0eSA9IGZhbHNlO1xuXHR9XG5cblx0aWYgKHRoaXMuc2l6ZSA9PSAwKXJldHVybjtcblxuXHR0aGlzLnVwZGF0ZSgpO1xuXHR2YXIgZ2wgPSB0aGlzLmdsO1xuXG5cdC8vVE9ETyBvcHRpbWl6ZSB0aGlzIVxuXG5cdHZhciBzaGFkZXJQcm9ncmFtID0gUElYSS5kZWZhdWx0U2hhZGVyO1xuXHRcblx0Ly9nbC51c2VQcm9ncmFtKHNoYWRlclByb2dyYW0pO1xuXG5cdC8vIHVwZGF0ZSB0aGUgdmVydHMuLlxuXHRnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgdGhpcy52ZXJ0ZXhCdWZmZXIpO1xuXHQvLyBvay4uXG5cdGdsLmJ1ZmZlclN1YkRhdGEoZ2wuQVJSQVlfQlVGRkVSLCAwLCB0aGlzLnZlcnRpY2llcylcbiAgICBnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHNoYWRlclByb2dyYW0uYVZlcnRleFBvc2l0aW9uLCAyLCBnbC5GTE9BVCwgZmFsc2UsIDAsIDApO1xuXHQvLyB1cGRhdGUgdGhlIHV2c1xuXHQvL3ZhciBpc0RlZmF1bHQgPSAoc2hhZGVyUHJvZ3JhbSA9PSBQSVhJLnNoYWRlclByb2dyYW0pXG5cbiAgIFx0Z2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHRoaXMudXZCdWZmZXIpO1xuXG4gICAgaWYodGhpcy5kaXJ0eVVWUylcbiAgICB7XG4gICAgXHR0aGlzLmRpcnR5VVZTID0gZmFsc2U7XG4gICAgXHRnbC5idWZmZXJTdWJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgIDAsIHRoaXMudXZzKTtcbiAgICB9XG5cbiAgICBnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHNoYWRlclByb2dyYW0uYVRleHR1cmVDb29yZCwgMiwgZ2wuRkxPQVQsIGZhbHNlLCAwLCAwKTtcblxuICAgIGdsLmFjdGl2ZVRleHR1cmUoZ2wuVEVYVFVSRTApO1xuICAgIGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsIHRoaXMudGV4dHVyZS5fZ2xUZXh0dXJlKTtcblxuXHQvLyB1cGRhdGUgY29sb3IhXG5cdGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB0aGlzLmNvbG9yQnVmZmVyKTtcblxuXHRpZih0aGlzLmRpcnR5Q29sb3JzKVxuICAgIHtcbiAgICBcdHRoaXMuZGlydHlDb2xvcnMgPSBmYWxzZTtcbiAgICBcdGdsLmJ1ZmZlclN1YkRhdGEoZ2wuQVJSQVlfQlVGRkVSLCAwLCB0aGlzLmNvbG9ycyk7XG5cdH1cblxuICAgIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIoc2hhZGVyUHJvZ3JhbS5jb2xvckF0dHJpYnV0ZSwgMSwgZ2wuRkxPQVQsIGZhbHNlLCAwLCAwKTtcblx0Ly8gZG9udCBuZWVkIHRvIHVwbG9hZCFcbiAgICBnbC5iaW5kQnVmZmVyKGdsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLCB0aGlzLmluZGV4QnVmZmVyKTtcblxuXHR2YXIgbGVuID0gZW5kIC0gc3RhcnQ7XG5cbiAgICAvLyBEUkFXIFRIQVQgdGhpcyFcbiAgICBnbC5kcmF3RWxlbWVudHMoZ2wuVFJJQU5HTEVTLCBsZW4gKiA2LCBnbC5VTlNJR05FRF9TSE9SVCwgc3RhcnQgKiAyICogNiApO1xufVxuXG4vKipcbiAqIEBhdXRob3IgTWF0IEdyb3ZlcyBodHRwOi8vbWF0Z3JvdmVzLmNvbS8gQERvb3JtYXQyM1xuICovXG5cbi8qKlxuICogQSBXZWJHTEJhdGNoIEVuYWJsZXMgYSBncm91cCBvZiBzcHJpdGVzIHRvIGJlIGRyYXduIHVzaW5nIHRoZSBzYW1lIHNldHRpbmdzLlxuICogaWYgYSBncm91cCBvZiBzcHJpdGVzIGFsbCBoYXZlIHRoZSBzYW1lIGJhc2VUZXh0dXJlIGFuZCBibGVuZE1vZGUgdGhlbiB0aGV5IGNhbiBiZVxuICogZ3JvdXBlZCBpbnRvIGEgYmF0Y2guIEFsbCB0aGUgc3ByaXRlcyBpbiBhIGJhdGNoIGNhbiB0aGVuIGJlIGRyYXduIGluIG9uZSBnbyBieSB0aGVcbiAqIEdQVSB3aGljaCBpcyBodWdlbHkgZWZmaWNpZW50LiBBTEwgc3ByaXRlcyBpbiB0aGUgd2ViR0wgcmVuZGVyZXIgYXJlIGFkZGVkIHRvIGEgYmF0Y2hcbiAqIGV2ZW4gaWYgdGhlIGJhdGNoIG9ubHkgY29udGFpbnMgb25lIHNwcml0ZS4gQmF0Y2hpbmcgaXMgaGFuZGxlZCBhdXRvbWF0aWNhbGx5IGJ5IHRoZVxuICogd2ViR0wgcmVuZGVyZXIuIEEgZ29vZCB0aXAgaXM6IHRoZSBzbWFsbGVyIHRoZSBudW1iZXIgb2YgYmF0Y2hzIHRoZXJlIGFyZSwgdGhlIGZhc3RlclxuICogdGhlIHdlYkdMIHJlbmRlcmVyIHdpbGwgcnVuLlxuICpcbiAqIEBjbGFzcyBXZWJHTEJhdGNoXG4gKiBAY29udHJ1Y3RvclxuICogQHBhcmFtIGdsIHtXZWJHTENvbnRleHR9IEFuIGluc3RhbmNlIG9mIHRoZSB3ZWJHTCBjb250ZXh0XG4gKi9cblBJWEkuV2ViR0xSZW5kZXJHcm91cCA9IGZ1bmN0aW9uKGdsLCB0cmFuc3BhcmVudClcbntcblx0dGhpcy5nbCA9IGdsO1xuXHR0aGlzLnJvb3Q7XG5cdFxuXHR0aGlzLmJhY2tncm91bmRDb2xvcjtcblx0dGhpcy50cmFuc3BhcmVudCA9IHRyYW5zcGFyZW50ID09IHVuZGVmaW5lZCA/IHRydWUgOiB0cmFuc3BhcmVudDtcblx0XG5cdHRoaXMuYmF0Y2hzID0gW107XG5cdHRoaXMudG9SZW1vdmUgPSBbXTtcblx0Y29uc29sZS5sb2codGhpcy50cmFuc3BhcmVudClcblx0dGhpcy5maWx0ZXJNYW5hZ2VyID0gbmV3IFBJWEkuV2ViR0xGaWx0ZXJNYW5hZ2VyKHRoaXMudHJhbnNwYXJlbnQpO1xufVxuXG4vLyBjb25zdHJ1Y3RvclxuUElYSS5XZWJHTFJlbmRlckdyb3VwLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFBJWEkuV2ViR0xSZW5kZXJHcm91cDtcblxuLyoqXG4gKiBBZGQgYSBkaXNwbGF5IG9iamVjdCB0byB0aGUgd2ViZ2wgcmVuZGVyZXJcbiAqXG4gKiBAbWV0aG9kIHNldFJlbmRlcmFibGVcbiAqIEBwYXJhbSBkaXNwbGF5T2JqZWN0IHtEaXNwbGF5T2JqZWN0fVxuICogQHByaXZhdGUgXG4gKi9cblBJWEkuV2ViR0xSZW5kZXJHcm91cC5wcm90b3R5cGUuc2V0UmVuZGVyYWJsZSA9IGZ1bmN0aW9uKGRpc3BsYXlPYmplY3QpXG57XG5cdC8vIGhhcyB0aGlzIGNoYW5nZWQ/P1xuXHRpZih0aGlzLnJvb3QpdGhpcy5yZW1vdmVEaXNwbGF5T2JqZWN0QW5kQ2hpbGRyZW4odGhpcy5yb290KTtcblx0XG5cdGRpc3BsYXlPYmplY3Qud29ybGRWaXNpYmxlID0gZGlzcGxheU9iamVjdC52aXNpYmxlO1xuXHRcblx0Ly8gc29vb29vbyAvL1xuXHQvLyB0byBjaGVjayBpZiBhbnkgYmF0Y2hzIGV4aXN0IGFscmVhZHk/P1xuXHRcblx0Ly8gVE9ETyB3aGF0IGlmIGl0cyBhbHJlYWR5IGhhcyBhbiBvYmplY3Q/IHNob3VsZCByZW1vdmUgaXRcblx0dGhpcy5yb290ID0gZGlzcGxheU9iamVjdDtcblx0dGhpcy5hZGREaXNwbGF5T2JqZWN0QW5kQ2hpbGRyZW4oZGlzcGxheU9iamVjdCk7XG59XG5cbi8qKlxuICogUmVuZGVycyB0aGUgc3RhZ2UgdG8gaXRzIHdlYmdsIHZpZXdcbiAqXG4gKiBAbWV0aG9kIHJlbmRlclxuICogQHBhcmFtIHByb2plY3Rpb24ge09iamVjdH1cbiAqL1xuUElYSS5XZWJHTFJlbmRlckdyb3VwLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbihwcm9qZWN0aW9uLCBidWZmZXIpXG57XG5cdFBJWEkuV2ViR0xSZW5kZXJlci51cGRhdGVUZXh0dXJlcygpO1xuXHRcblx0dmFyIGdsID0gdGhpcy5nbDtcblx0Z2wudW5pZm9ybTJmKFBJWEkuZGVmYXVsdFNoYWRlci5wcm9qZWN0aW9uVmVjdG9yLCBwcm9qZWN0aW9uLngsIHByb2plY3Rpb24ueSk7XG5cblx0dGhpcy5maWx0ZXJNYW5hZ2VyLmJlZ2luKHByb2plY3Rpb24sIGJ1ZmZlcik7XG5cblx0XG5cdGdsLmJsZW5kRnVuYyhnbC5PTkUsIGdsLk9ORV9NSU5VU19TUkNfQUxQSEEpO1xuXHQvLyB3aWxsIHJlbmRlciBhbGwgdGhlIGVsZW1lbnRzIGluIHRoZSBncm91cFxuXHR2YXIgcmVuZGVyYWJsZTtcblxuXHRmb3IgKHZhciBpPTA7IGkgPCB0aGlzLmJhdGNocy5sZW5ndGg7IGkrKykgXG5cdHtcblx0XHRcblx0XHRyZW5kZXJhYmxlID0gdGhpcy5iYXRjaHNbaV07XG5cdFx0aWYocmVuZGVyYWJsZSBpbnN0YW5jZW9mIFBJWEkuV2ViR0xCYXRjaClcblx0XHR7XG5cdFx0XHR0aGlzLmJhdGNoc1tpXS5yZW5kZXIoKTtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblx0XHRcblx0XHQvLyByZW5kZXIgc3BlY2lhbFxuXHRcdHRoaXMucmVuZGVyU3BlY2lhbChyZW5kZXJhYmxlLCBwcm9qZWN0aW9uKTtcblx0fVxuXHRcbn1cblxuLyoqXG4gKiBSZW5kZXJzIGEgc3BlY2lmaWMgZGlzcGxheU9iamVjdFxuICpcbiAqIEBtZXRob2QgcmVuZGVyU3BlY2lmaWNcbiAqIEBwYXJhbSBkaXNwbGF5T2JqZWN0IHtEaXNwbGF5T2JqZWN0fVxuICogQHBhcmFtIHByb2plY3Rpb24ge09iamVjdH1cbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuV2ViR0xSZW5kZXJHcm91cC5wcm90b3R5cGUucmVuZGVyU3BlY2lmaWMgPSBmdW5jdGlvbihkaXNwbGF5T2JqZWN0LCBwcm9qZWN0aW9uLCBidWZmZXIpXG57XG5cdFBJWEkuV2ViR0xSZW5kZXJlci51cGRhdGVUZXh0dXJlcygpO1xuXHR2YXIgZ2wgPSB0aGlzLmdsO1xuXG5cdGdsLnVuaWZvcm0yZihQSVhJLmRlZmF1bHRTaGFkZXIucHJvamVjdGlvblZlY3RvciwgcHJvamVjdGlvbi54LCBwcm9qZWN0aW9uLnkpO1xuXG5cdHRoaXMuZmlsdGVyTWFuYWdlci5iZWdpbihwcm9qZWN0aW9uLCBidWZmZXIpO1xuXG5cdC8vIHRvIGRvIVxuXHQvLyByZW5kZXIgcGFydCBvZiB0aGUgc2NlbmUuLi5cblx0XG5cdHZhciBzdGFydEluZGV4O1xuXHR2YXIgc3RhcnRCYXRjaEluZGV4O1xuXHRcblx0dmFyIGVuZEluZGV4O1xuXHR2YXIgZW5kQmF0Y2hJbmRleDtcblx0XG5cdC8qXG5cdCAqICBMT09LIEZPUiBUSEUgTkVYVCBTUFJJVEVcblx0ICogIFRoaXMgcGFydCBsb29rcyBmb3IgdGhlIGNsb3Nlc3QgbmV4dCBzcHJpdGUgdGhhdCBjYW4gZ28gaW50byBhIGJhdGNoXG5cdCAqICBpdCBrZWVwcyBsb29raW5nIHVudGlsIGl0IGZpbmRzIGEgc3ByaXRlIG9yIGdldHMgdG8gdGhlIGVuZCBvZiB0aGUgZGlzcGxheVxuXHQgKiAgc2NlbmUgZ3JhcGhcblx0ICovXG5cdHZhciBuZXh0UmVuZGVyYWJsZSA9IGRpc3BsYXlPYmplY3QuZmlyc3Q7XG5cdHdoaWxlKG5leHRSZW5kZXJhYmxlLl9pTmV4dClcblx0e1xuXHRcdGlmKG5leHRSZW5kZXJhYmxlLnJlbmRlcmFibGUgJiYgbmV4dFJlbmRlcmFibGUuX19yZW5kZXJHcm91cClicmVhaztcblx0XHRuZXh0UmVuZGVyYWJsZSA9IG5leHRSZW5kZXJhYmxlLl9pTmV4dDtcblx0fVxuXHR2YXIgc3RhcnRCYXRjaCA9IG5leHRSZW5kZXJhYmxlLmJhdGNoO1xuXHQvL2NvbnNvbGUubG9nKG5leHRSZW5kZXJhYmxlKTtcblx0XG5cdC8vY29uc29sZS5sb2cocmVuZGVyYWJsZSlcblx0aWYobmV4dFJlbmRlcmFibGUgaW5zdGFuY2VvZiBQSVhJLlNwcml0ZSlcblx0e1xuXHRcdHN0YXJ0QmF0Y2ggPSBuZXh0UmVuZGVyYWJsZS5iYXRjaDtcblx0XHRcblx0XHR2YXIgaGVhZCA9IHN0YXJ0QmF0Y2guaGVhZDtcblx0XHR2YXIgbmV4dCA9IGhlYWQ7XG5cdFx0XG5cdFx0Ly8gb2sgbm93IHdlIGhhdmUgdGhlIGJhdGNoLi4gbmVlZCB0byBmaW5kIHRoZSBzdGFydCBpbmRleCFcblx0XHRpZihoZWFkID09IG5leHRSZW5kZXJhYmxlKVxuXHRcdHtcblx0XHRcdHN0YXJ0SW5kZXggPSAwO1xuXHRcdH1cblx0XHRlbHNlXG5cdFx0e1xuXHRcdFx0c3RhcnRJbmRleCA9IDE7XG5cdFx0XHRcblx0XHRcdHdoaWxlKGhlYWQuX19uZXh0ICE9IG5leHRSZW5kZXJhYmxlKVxuXHRcdFx0e1xuXHRcdFx0XHRzdGFydEluZGV4Kys7XG5cdFx0XHRcdGhlYWQgPSBoZWFkLl9fbmV4dDtcblx0XHRcdH1cblx0XHR9XG5cdH1cblx0ZWxzZVxuXHR7XG5cdFx0c3RhcnRCYXRjaCA9IG5leHRSZW5kZXJhYmxlO1xuXHR9XG5cdFxuXHQvLyBHZXQgdGhlIExBU1QgcmVuZGVyYWJsZSBvYmplY3Rcblx0dmFyIGxhc3RSZW5kZXJhYmxlID0gZGlzcGxheU9iamVjdC5sYXN0O1xuXHR3aGlsZShsYXN0UmVuZGVyYWJsZS5faVByZXYpXG5cdHtcblx0XHRpZihsYXN0UmVuZGVyYWJsZS5yZW5kZXJhYmxlICYmIGxhc3RSZW5kZXJhYmxlLl9fcmVuZGVyR3JvdXApYnJlYWs7XG5cdFx0bGFzdFJlbmRlcmFibGUgPSBsYXN0UmVuZGVyYWJsZS5faU5leHQ7XG5cdH1cblx0XG5cdGlmKGxhc3RSZW5kZXJhYmxlIGluc3RhbmNlb2YgUElYSS5TcHJpdGUpXG5cdHtcblx0XHRlbmRCYXRjaCA9IGxhc3RSZW5kZXJhYmxlLmJhdGNoO1xuXHRcdFxuXHRcdHZhciBoZWFkID0gZW5kQmF0Y2guaGVhZDtcblx0XHRcblx0XHRpZihoZWFkID09IGxhc3RSZW5kZXJhYmxlKVxuXHRcdHtcblx0XHRcdGVuZEluZGV4ID0gMDtcblx0XHR9XG5cdFx0ZWxzZVxuXHRcdHtcblx0XHRcdGVuZEluZGV4ID0gMTtcblx0XHRcdFxuXHRcdFx0d2hpbGUoaGVhZC5fX25leHQgIT0gbGFzdFJlbmRlcmFibGUpXG5cdFx0XHR7XG5cdFx0XHRcdGVuZEluZGV4Kys7XG5cdFx0XHRcdGhlYWQgPSBoZWFkLl9fbmV4dDtcblx0XHRcdH1cblx0XHR9XG5cdH1cblx0ZWxzZVxuXHR7XG5cdFx0ZW5kQmF0Y2ggPSBsYXN0UmVuZGVyYWJsZTtcblx0fVxuXHRcblx0Ly9jb25zb2xlLmxvZyhlbmRCYXRjaCk7XG5cdC8vIFRPRE8gLSBuZWVkIHRvIGZvbGQgdGhpcyB1cCBhIGJpdCFcblx0XG5cdGlmKHN0YXJ0QmF0Y2ggPT0gZW5kQmF0Y2gpXG5cdHtcblx0XHRpZihzdGFydEJhdGNoIGluc3RhbmNlb2YgUElYSS5XZWJHTEJhdGNoKVxuXHRcdHtcblx0XHRcdHN0YXJ0QmF0Y2gucmVuZGVyKHN0YXJ0SW5kZXgsIGVuZEluZGV4KzEpO1xuXHRcdH1cblx0XHRlbHNlXG5cdFx0e1xuXHRcdFx0dGhpcy5yZW5kZXJTcGVjaWFsKHN0YXJ0QmF0Y2gsIHByb2plY3Rpb24pO1xuXHRcdH1cblx0XHRyZXR1cm47XG5cdH1cblx0XG5cdC8vIG5vdyB3ZSBoYXZlIGZpcnN0IGFuZCBsYXN0IVxuXHRzdGFydEJhdGNoSW5kZXggPSB0aGlzLmJhdGNocy5pbmRleE9mKHN0YXJ0QmF0Y2gpO1xuXHRlbmRCYXRjaEluZGV4ID0gdGhpcy5iYXRjaHMuaW5kZXhPZihlbmRCYXRjaCk7XG5cdFxuXHQvLyBETyB0aGUgZmlyc3QgYmF0Y2hcblx0aWYoc3RhcnRCYXRjaCBpbnN0YW5jZW9mIFBJWEkuV2ViR0xCYXRjaClcblx0e1xuXHRcdHN0YXJ0QmF0Y2gucmVuZGVyKHN0YXJ0SW5kZXgpO1xuXHR9XG5cdGVsc2Vcblx0e1xuXHRcdHRoaXMucmVuZGVyU3BlY2lhbChzdGFydEJhdGNoLCBwcm9qZWN0aW9uKTtcblx0fVxuXHRcblx0Ly8gRE8gdGhlIG1pZGRsZSBiYXRjaHMuLlxuXHRmb3IgKHZhciBpPXN0YXJ0QmF0Y2hJbmRleCsxOyBpIDwgZW5kQmF0Y2hJbmRleDsgaSsrKSBcblx0e1xuXHRcdHJlbmRlcmFibGUgPSB0aGlzLmJhdGNoc1tpXTtcblx0XG5cdFx0aWYocmVuZGVyYWJsZSBpbnN0YW5jZW9mIFBJWEkuV2ViR0xCYXRjaClcblx0XHR7XG5cdFx0XHR0aGlzLmJhdGNoc1tpXS5yZW5kZXIoKTtcblx0XHR9XG5cdFx0ZWxzZVxuXHRcdHtcblx0XHRcdHRoaXMucmVuZGVyU3BlY2lhbChyZW5kZXJhYmxlLCBwcm9qZWN0aW9uKTtcblx0XHR9XG5cdH1cblx0XG5cdC8vIERPIHRoZSBsYXN0IGJhdGNoLi5cblx0aWYoZW5kQmF0Y2ggaW5zdGFuY2VvZiBQSVhJLldlYkdMQmF0Y2gpXG5cdHtcblx0XHRlbmRCYXRjaC5yZW5kZXIoMCwgZW5kSW5kZXgrMSk7XG5cdH1cblx0ZWxzZVxuXHR7XG5cdFx0dGhpcy5yZW5kZXJTcGVjaWFsKGVuZEJhdGNoLCBwcm9qZWN0aW9uKTtcblx0fVxufVxuXG4vKipcbiAqIFJlbmRlcnMgYSBzcGVjaWZpYyByZW5kZXJhYmxlXG4gKlxuICogQG1ldGhvZCByZW5kZXJTcGVjaWFsXG4gKiBAcGFyYW0gcmVuZGVyYWJsZSB7RGlzcGxheU9iamVjdH1cbiAqIEBwYXJhbSBwcm9qZWN0aW9uIHtPYmplY3R9XG4gKiBAcHJpdmF0ZVxuICovXG5QSVhJLldlYkdMUmVuZGVyR3JvdXAucHJvdG90eXBlLnJlbmRlclNwZWNpYWwgPSBmdW5jdGlvbihyZW5kZXJhYmxlLCBwcm9qZWN0aW9uKVxue1xuXHRcblx0dmFyIHdvcmxkVmlzaWJsZSA9IHJlbmRlcmFibGUudmNvdW50ID09PSBQSVhJLnZpc2libGVDb3VudFxuXG5cblx0aWYocmVuZGVyYWJsZSBpbnN0YW5jZW9mIFBJWEkuVGlsaW5nU3ByaXRlKVxuXHR7XG5cdFx0aWYod29ybGRWaXNpYmxlKXRoaXMucmVuZGVyVGlsaW5nU3ByaXRlKHJlbmRlcmFibGUsIHByb2plY3Rpb24pO1xuXHR9XG5cdGVsc2UgaWYocmVuZGVyYWJsZSBpbnN0YW5jZW9mIFBJWEkuU3RyaXApXG5cdHtcblx0XHRpZih3b3JsZFZpc2libGUpdGhpcy5yZW5kZXJTdHJpcChyZW5kZXJhYmxlLCBwcm9qZWN0aW9uKTtcblx0fVxuXHRlbHNlIGlmKHJlbmRlcmFibGUgaW5zdGFuY2VvZiBQSVhJLkN1c3RvbVJlbmRlcmFibGUpXG5cdHtcblx0XHRpZih3b3JsZFZpc2libGUpIHJlbmRlcmFibGUucmVuZGVyV2ViR0wodGhpcywgcHJvamVjdGlvbik7XG5cdH1cblx0ZWxzZSBpZihyZW5kZXJhYmxlIGluc3RhbmNlb2YgUElYSS5HcmFwaGljcylcblx0e1xuXHRcdGlmKHdvcmxkVmlzaWJsZSAmJiByZW5kZXJhYmxlLnJlbmRlcmFibGUpIFBJWEkuV2ViR0xHcmFwaGljcy5yZW5kZXJHcmFwaGljcyhyZW5kZXJhYmxlLCBwcm9qZWN0aW9uKTtcblx0fVxuXHRlbHNlIGlmKHJlbmRlcmFibGUgaW5zdGFuY2VvZiBQSVhJLkZpbHRlckJsb2NrKVxuXHR7XG5cdFx0dGhpcy5oYW5kbGVGaWx0ZXJCbG9jayhyZW5kZXJhYmxlLCBwcm9qZWN0aW9uKTtcblx0fVxufVxuXG5mbGlwID0gZmFsc2U7XG52YXIgbWFza1N0YWNrID0gW107XG52YXIgbWFza1Bvc2l0aW9uID0gMDtcblxuLy92YXIgdXNlZE1hc2tTdGFjayA9IFtdO1xuXG5QSVhJLldlYkdMUmVuZGVyR3JvdXAucHJvdG90eXBlLmhhbmRsZUZpbHRlckJsb2NrID0gZnVuY3Rpb24oZmlsdGVyQmxvY2ssIHByb2plY3Rpb24pXG57XG5cdC8qXG5cdCAqIGZvciBub3cgb25seSBtYXNrcyBhcmUgc3VwcG9ydGVkLi5cblx0ICovXG5cdHZhciBnbCA9IFBJWEkuZ2w7XG5cdFxuXHRpZihmaWx0ZXJCbG9jay5vcGVuKVxuXHR7XG5cdFx0aWYoZmlsdGVyQmxvY2suZGF0YSBpbnN0YW5jZW9mIEFycmF5KVxuXHRcdHtcblx0XHRcdHRoaXMuZmlsdGVyTWFuYWdlci5wdXNoRmlsdGVyKGZpbHRlckJsb2NrKTtcblx0XHRcdC8vIG9rIHNvLi5cblx0XHRcdFxuXHRcdH1cblx0XHRlbHNlXG5cdFx0e1x0XG5cdFx0XHRtYXNrUG9zaXRpb24rKztcblxuXHRcdFx0bWFza1N0YWNrLnB1c2goZmlsdGVyQmxvY2spXG5cdFxuXHRcdFx0Z2wuZW5hYmxlKGdsLlNURU5DSUxfVEVTVCk7XG5cdFx0XHRcblx0XHRcdGdsLmNvbG9yTWFzayhmYWxzZSwgZmFsc2UsIGZhbHNlLCBmYWxzZSk7XG5cdFx0XHRcblx0XHRcdGdsLnN0ZW5jaWxGdW5jKGdsLkFMV0FZUywxLDEpO1xuXHRcdFx0Z2wuc3RlbmNpbE9wKGdsLktFRVAsZ2wuS0VFUCxnbC5JTkNSKTtcblx0XG5cdFx0XHRQSVhJLldlYkdMR3JhcGhpY3MucmVuZGVyR3JhcGhpY3MoZmlsdGVyQmxvY2suZGF0YSwgcHJvamVjdGlvbik7XG5cdFx0XHRcblx0XHRcdGdsLmNvbG9yTWFzayh0cnVlLCB0cnVlLCB0cnVlLCB0cnVlKTtcblx0XHRcdGdsLnN0ZW5jaWxGdW5jKGdsLk5PVEVRVUFMLDAsbWFza1N0YWNrLmxlbmd0aCk7XG5cdFx0XHRnbC5zdGVuY2lsT3AoZ2wuS0VFUCxnbC5LRUVQLGdsLktFRVApO1xuXHRcdH1cblx0fVxuXHRlbHNlXG5cdHtcblx0XHRpZihmaWx0ZXJCbG9jay5kYXRhIGluc3RhbmNlb2YgQXJyYXkpXG5cdFx0e1xuXHRcdFx0dGhpcy5maWx0ZXJNYW5hZ2VyLnBvcEZpbHRlcigpO1xuXHRcdH1cblx0XHRlbHNlXG5cdFx0e1xuXHRcdFx0dmFyIG1hc2tEYXRhID0gbWFza1N0YWNrLnBvcChmaWx0ZXJCbG9jaylcblxuXG5cdFx0XHRpZihtYXNrRGF0YSlcblx0XHRcdHtcblx0XHRcdFx0Z2wuY29sb3JNYXNrKGZhbHNlLCBmYWxzZSwgZmFsc2UsIGZhbHNlKTtcblx0XHRcdFxuXHRcdFx0XHRnbC5zdGVuY2lsRnVuYyhnbC5BTFdBWVMsMSwxKTtcblx0XHRcdFx0Z2wuc3RlbmNpbE9wKGdsLktFRVAsZ2wuS0VFUCxnbC5ERUNSKTtcblxuXHRcdFx0XHRQSVhJLldlYkdMR3JhcGhpY3MucmVuZGVyR3JhcGhpY3MobWFza0RhdGEuZGF0YSwgcHJvamVjdGlvbik7XG5cdFx0XHRcblx0XHRcdFx0Z2wuY29sb3JNYXNrKHRydWUsIHRydWUsIHRydWUsIHRydWUpO1xuXHRcdFx0XHRnbC5zdGVuY2lsRnVuYyhnbC5OT1RFUVVBTCwwLG1hc2tTdGFjay5sZW5ndGgpO1xuXHRcdFx0XHRnbC5zdGVuY2lsT3AoZ2wuS0VFUCxnbC5LRUVQLGdsLktFRVApO1xuXHRcdFx0fTtcblxuXHRcdFx0Z2wuZGlzYWJsZShnbC5TVEVOQ0lMX1RFU1QpO1xuXHRcdH1cblx0fVxufVxuXG4vKipcbiAqIFVwZGF0ZXMgYSB3ZWJnbCB0ZXh0dXJlXG4gKlxuICogQG1ldGhvZCB1cGRhdGVUZXh0dXJlXG4gKiBAcGFyYW0gZGlzcGxheU9iamVjdCB7RGlzcGxheU9iamVjdH1cbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuV2ViR0xSZW5kZXJHcm91cC5wcm90b3R5cGUudXBkYXRlVGV4dHVyZSA9IGZ1bmN0aW9uKGRpc3BsYXlPYmplY3QpXG57XG5cdFxuXHQvLyBUT0RPIGRlZmluaXRlbHkgY2FuIG9wdGltc2UgdGhpcyBmdW5jdGlvbi4uXG5cdFxuXHR0aGlzLnJlbW92ZU9iamVjdChkaXNwbGF5T2JqZWN0KTtcblx0XG5cdC8qXG5cdCAqICBMT09LIEZPUiBUSEUgUFJFVklPVVMgUkVOREVSQUJMRVxuXHQgKiAgVGhpcyBwYXJ0IGxvb2tzIGZvciB0aGUgY2xvc2VzdCBwcmV2aW91cyBzcHJpdGUgdGhhdCBjYW4gZ28gaW50byBhIGJhdGNoXG5cdCAqICBJdCBrZWVwcyBnb2luZyBiYWNrIHVudGlsIGl0IGZpbmRzIGEgc3ByaXRlIG9yIHRoZSBzdGFnZVxuXHQgKi9cblx0dmFyIHByZXZpb3VzUmVuZGVyYWJsZSA9IGRpc3BsYXlPYmplY3QuZmlyc3Q7XG5cdHdoaWxlKHByZXZpb3VzUmVuZGVyYWJsZSAhPSB0aGlzLnJvb3QpXG5cdHtcblx0XHRwcmV2aW91c1JlbmRlcmFibGUgPSBwcmV2aW91c1JlbmRlcmFibGUuX2lQcmV2O1xuXHRcdGlmKHByZXZpb3VzUmVuZGVyYWJsZS5yZW5kZXJhYmxlICYmIHByZXZpb3VzUmVuZGVyYWJsZS5fX3JlbmRlckdyb3VwKWJyZWFrO1xuXHR9XG5cdFxuXHQvKlxuXHQgKiAgTE9PSyBGT1IgVEhFIE5FWFQgU1BSSVRFXG5cdCAqICBUaGlzIHBhcnQgbG9va3MgZm9yIHRoZSBjbG9zZXN0IG5leHQgc3ByaXRlIHRoYXQgY2FuIGdvIGludG8gYSBiYXRjaFxuXHQgKiAgaXQga2VlcHMgbG9va2luZyB1bnRpbCBpdCBmaW5kcyBhIHNwcml0ZSBvciBnZXRzIHRvIHRoZSBlbmQgb2YgdGhlIGRpc3BsYXlcblx0ICogIHNjZW5lIGdyYXBoXG5cdCAqL1xuXHR2YXIgbmV4dFJlbmRlcmFibGUgPSBkaXNwbGF5T2JqZWN0Lmxhc3Q7XG5cdHdoaWxlKG5leHRSZW5kZXJhYmxlLl9pTmV4dClcblx0e1xuXHRcdG5leHRSZW5kZXJhYmxlID0gbmV4dFJlbmRlcmFibGUuX2lOZXh0O1xuXHRcdGlmKG5leHRSZW5kZXJhYmxlLnJlbmRlcmFibGUgJiYgbmV4dFJlbmRlcmFibGUuX19yZW5kZXJHcm91cClicmVhaztcblx0fVxuXHRcblx0dGhpcy5pbnNlcnRPYmplY3QoZGlzcGxheU9iamVjdCwgcHJldmlvdXNSZW5kZXJhYmxlLCBuZXh0UmVuZGVyYWJsZSk7XG59XG5cbi8qKlxuICogQWRkcyBmaWx0ZXIgYmxvY2tzXG4gKlxuICogQG1ldGhvZCBhZGRGaWx0ZXJCbG9ja3NcbiAqIEBwYXJhbSBzdGFydCB7RmlsdGVyQmxvY2t9XG4gKiBAcGFyYW0gZW5kIHtGaWx0ZXJCbG9ja31cbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuV2ViR0xSZW5kZXJHcm91cC5wcm90b3R5cGUuYWRkRmlsdGVyQmxvY2tzID0gZnVuY3Rpb24oc3RhcnQsIGVuZClcbntcblx0c3RhcnQuX19yZW5kZXJHcm91cCA9IHRoaXM7XG5cdGVuZC5fX3JlbmRlckdyb3VwID0gdGhpcztcblx0Lypcblx0ICogIExPT0sgRk9SIFRIRSBQUkVWSU9VUyBSRU5ERVJBQkxFXG5cdCAqICBUaGlzIHBhcnQgbG9va3MgZm9yIHRoZSBjbG9zZXN0IHByZXZpb3VzIHNwcml0ZSB0aGF0IGNhbiBnbyBpbnRvIGEgYmF0Y2hcblx0ICogIEl0IGtlZXBzIGdvaW5nIGJhY2sgdW50aWwgaXQgZmluZHMgYSBzcHJpdGUgb3IgdGhlIHN0YWdlXG5cdCAqL1xuXHR2YXIgcHJldmlvdXNSZW5kZXJhYmxlID0gc3RhcnQ7XG5cdHdoaWxlKHByZXZpb3VzUmVuZGVyYWJsZSAhPSB0aGlzLnJvb3QuZmlyc3QpXG5cdHtcblx0XHRwcmV2aW91c1JlbmRlcmFibGUgPSBwcmV2aW91c1JlbmRlcmFibGUuX2lQcmV2O1xuXHRcdGlmKHByZXZpb3VzUmVuZGVyYWJsZS5yZW5kZXJhYmxlICYmIHByZXZpb3VzUmVuZGVyYWJsZS5fX3JlbmRlckdyb3VwKWJyZWFrO1xuXHR9XG5cdHRoaXMuaW5zZXJ0QWZ0ZXIoc3RhcnQsIHByZXZpb3VzUmVuZGVyYWJsZSk7XG5cdFx0XG5cdC8qXG5cdCAqICBMT09LIEZPUiBUSEUgTkVYVCBTUFJJVEVcblx0ICogIFRoaXMgcGFydCBsb29rcyBmb3IgdGhlIGNsb3Nlc3QgbmV4dCBzcHJpdGUgdGhhdCBjYW4gZ28gaW50byBhIGJhdGNoXG5cdCAqICBpdCBrZWVwcyBsb29raW5nIHVudGlsIGl0IGZpbmRzIGEgc3ByaXRlIG9yIGdldHMgdG8gdGhlIGVuZCBvZiB0aGUgZGlzcGxheVxuXHQgKiAgc2NlbmUgZ3JhcGhcblx0ICovXG5cdHZhciBwcmV2aW91c1JlbmRlcmFibGUyID0gZW5kO1xuXHR3aGlsZShwcmV2aW91c1JlbmRlcmFibGUyICE9IHRoaXMucm9vdC5maXJzdClcblx0e1xuXHRcdHByZXZpb3VzUmVuZGVyYWJsZTIgPSBwcmV2aW91c1JlbmRlcmFibGUyLl9pUHJldjtcblx0XHRpZihwcmV2aW91c1JlbmRlcmFibGUyLnJlbmRlcmFibGUgJiYgcHJldmlvdXNSZW5kZXJhYmxlMi5fX3JlbmRlckdyb3VwKWJyZWFrO1xuXHR9XG5cdHRoaXMuaW5zZXJ0QWZ0ZXIoZW5kLCBwcmV2aW91c1JlbmRlcmFibGUyKTtcbn1cblxuLyoqXG4gKiBSZW1vdmUgZmlsdGVyIGJsb2Nrc1xuICpcbiAqIEBtZXRob2QgcmVtb3ZlRmlsdGVyQmxvY2tzXG4gKiBAcGFyYW0gc3RhcnQge0ZpbHRlckJsb2NrfVxuICogQHBhcmFtIGVuZCB7RmlsdGVyQmxvY2t9XG4gKiBAcHJpdmF0ZVxuICovXG5QSVhJLldlYkdMUmVuZGVyR3JvdXAucHJvdG90eXBlLnJlbW92ZUZpbHRlckJsb2NrcyA9IGZ1bmN0aW9uKHN0YXJ0LCBlbmQpXG57XG5cdHRoaXMucmVtb3ZlT2JqZWN0KHN0YXJ0KTtcblx0dGhpcy5yZW1vdmVPYmplY3QoZW5kKTtcbn1cblxuLyoqXG4gKiBBZGRzIGEgZGlzcGxheSBvYmplY3QgYW5kIGNoaWxkcmVuIHRvIHRoZSB3ZWJnbCBjb250ZXh0XG4gKlxuICogQG1ldGhvZCBhZGREaXNwbGF5T2JqZWN0QW5kQ2hpbGRyZW5cbiAqIEBwYXJhbSBkaXNwbGF5T2JqZWN0IHtEaXNwbGF5T2JqZWN0fVxuICogQHByaXZhdGVcbiAqL1xuUElYSS5XZWJHTFJlbmRlckdyb3VwLnByb3RvdHlwZS5hZGREaXNwbGF5T2JqZWN0QW5kQ2hpbGRyZW4gPSBmdW5jdGlvbihkaXNwbGF5T2JqZWN0KVxue1xuXHRpZihkaXNwbGF5T2JqZWN0Ll9fcmVuZGVyR3JvdXApZGlzcGxheU9iamVjdC5fX3JlbmRlckdyb3VwLnJlbW92ZURpc3BsYXlPYmplY3RBbmRDaGlsZHJlbihkaXNwbGF5T2JqZWN0KTtcblx0XG5cdC8qXG5cdCAqICBMT09LIEZPUiBUSEUgUFJFVklPVVMgUkVOREVSQUJMRVxuXHQgKiAgVGhpcyBwYXJ0IGxvb2tzIGZvciB0aGUgY2xvc2VzdCBwcmV2aW91cyBzcHJpdGUgdGhhdCBjYW4gZ28gaW50byBhIGJhdGNoXG5cdCAqICBJdCBrZWVwcyBnb2luZyBiYWNrIHVudGlsIGl0IGZpbmRzIGEgc3ByaXRlIG9yIHRoZSBzdGFnZVxuXHQgKi9cblx0XG5cdHZhciBwcmV2aW91c1JlbmRlcmFibGUgPSBkaXNwbGF5T2JqZWN0LmZpcnN0O1xuXHR3aGlsZShwcmV2aW91c1JlbmRlcmFibGUgIT0gdGhpcy5yb290LmZpcnN0KVxuXHR7XG5cdFx0cHJldmlvdXNSZW5kZXJhYmxlID0gcHJldmlvdXNSZW5kZXJhYmxlLl9pUHJldjtcblx0XHRpZihwcmV2aW91c1JlbmRlcmFibGUucmVuZGVyYWJsZSAmJiBwcmV2aW91c1JlbmRlcmFibGUuX19yZW5kZXJHcm91cClicmVhaztcblx0fVxuXHRcblx0Lypcblx0ICogIExPT0sgRk9SIFRIRSBORVhUIFNQUklURVxuXHQgKiAgVGhpcyBwYXJ0IGxvb2tzIGZvciB0aGUgY2xvc2VzdCBuZXh0IHNwcml0ZSB0aGF0IGNhbiBnbyBpbnRvIGEgYmF0Y2hcblx0ICogIGl0IGtlZXBzIGxvb2tpbmcgdW50aWwgaXQgZmluZHMgYSBzcHJpdGUgb3IgZ2V0cyB0byB0aGUgZW5kIG9mIHRoZSBkaXNwbGF5XG5cdCAqICBzY2VuZSBncmFwaFxuXHQgKi9cblx0dmFyIG5leHRSZW5kZXJhYmxlID0gZGlzcGxheU9iamVjdC5sYXN0O1xuXHR3aGlsZShuZXh0UmVuZGVyYWJsZS5faU5leHQpXG5cdHtcblx0XHRuZXh0UmVuZGVyYWJsZSA9IG5leHRSZW5kZXJhYmxlLl9pTmV4dDtcblx0XHRpZihuZXh0UmVuZGVyYWJsZS5yZW5kZXJhYmxlICYmIG5leHRSZW5kZXJhYmxlLl9fcmVuZGVyR3JvdXApYnJlYWs7XG5cdH1cblx0XG5cdC8vIG9uZSB0aGUgZGlzcGxheSBvYmplY3QgaGl0cyB0aGlzLiB3ZSBjYW4gYnJlYWsgdGhlIGxvb3BcdFxuXHRcblx0dmFyIHRlbXBPYmplY3QgPSBkaXNwbGF5T2JqZWN0LmZpcnN0O1xuXHR2YXIgdGVzdE9iamVjdCA9IGRpc3BsYXlPYmplY3QubGFzdC5faU5leHQ7XG5cdGRvXHRcblx0e1xuXHRcdHRlbXBPYmplY3QuX19yZW5kZXJHcm91cCA9IHRoaXM7XG5cdFx0XG5cdFx0aWYodGVtcE9iamVjdC5yZW5kZXJhYmxlKVxuXHRcdHtcblx0XHRcblx0XHRcdHRoaXMuaW5zZXJ0T2JqZWN0KHRlbXBPYmplY3QsIHByZXZpb3VzUmVuZGVyYWJsZSwgbmV4dFJlbmRlcmFibGUpO1xuXHRcdFx0cHJldmlvdXNSZW5kZXJhYmxlID0gdGVtcE9iamVjdDtcblx0XHR9XG5cdFx0XG5cdFx0dGVtcE9iamVjdCA9IHRlbXBPYmplY3QuX2lOZXh0O1xuXHR9XG5cdHdoaWxlKHRlbXBPYmplY3QgIT0gdGVzdE9iamVjdClcbn1cblxuLyoqXG4gKiBSZW1vdmVzIGEgZGlzcGxheSBvYmplY3QgYW5kIGNoaWxkcmVuIHRvIHRoZSB3ZWJnbCBjb250ZXh0XG4gKlxuICogQG1ldGhvZCByZW1vdmVEaXNwbGF5T2JqZWN0QW5kQ2hpbGRyZW5cbiAqIEBwYXJhbSBkaXNwbGF5T2JqZWN0IHtEaXNwbGF5T2JqZWN0fVxuICogQHByaXZhdGVcbiAqL1xuUElYSS5XZWJHTFJlbmRlckdyb3VwLnByb3RvdHlwZS5yZW1vdmVEaXNwbGF5T2JqZWN0QW5kQ2hpbGRyZW4gPSBmdW5jdGlvbihkaXNwbGF5T2JqZWN0KVxue1xuXHRpZihkaXNwbGF5T2JqZWN0Ll9fcmVuZGVyR3JvdXAgIT0gdGhpcylyZXR1cm47XG5cdFxuLy9cdHZhciBkaXNwbGF5T2JqZWN0ID0gZGlzcGxheU9iamVjdC5maXJzdDtcblx0dmFyIGxhc3RPYmplY3QgPSBkaXNwbGF5T2JqZWN0Lmxhc3Q7XG5cdGRvXHRcblx0e1xuXHRcdGRpc3BsYXlPYmplY3QuX19yZW5kZXJHcm91cCA9IG51bGw7XG5cdFx0aWYoZGlzcGxheU9iamVjdC5yZW5kZXJhYmxlKXRoaXMucmVtb3ZlT2JqZWN0KGRpc3BsYXlPYmplY3QpO1xuXHRcdGRpc3BsYXlPYmplY3QgPSBkaXNwbGF5T2JqZWN0Ll9pTmV4dDtcblx0fVxuXHR3aGlsZShkaXNwbGF5T2JqZWN0KVxufVxuXG4vKipcbiAqIEluc2VydHMgYSBkaXNwbGF5T2JqZWN0IGludG8gdGhlIGxpbmtlZCBsaXN0XG4gKlxuICogQG1ldGhvZCBpbnNlcnRPYmplY3RcbiAqIEBwYXJhbSBkaXNwbGF5T2JqZWN0IHtEaXNwbGF5T2JqZWN0fVxuICogQHBhcmFtIHByZXZpb3VzT2JqZWN0IHtEaXNwbGF5T2JqZWN0fVxuICogQHBhcmFtIG5leHRPYmplY3Qge0Rpc3BsYXlPYmplY3R9XG4gKiBAcHJpdmF0ZVxuICovXG5QSVhJLldlYkdMUmVuZGVyR3JvdXAucHJvdG90eXBlLmluc2VydE9iamVjdCA9IGZ1bmN0aW9uKGRpc3BsYXlPYmplY3QsIHByZXZpb3VzT2JqZWN0LCBuZXh0T2JqZWN0KVxue1xuXHQvLyB3aGlsZSBsb29waW5nIGJlbG93IFRIRSBPQkpFQ1QgTUFZIE5PVCBIQVZFIEJFRU4gQURERURcblx0dmFyIHByZXZpb3VzU3ByaXRlID0gcHJldmlvdXNPYmplY3Q7XG5cdHZhciBuZXh0U3ByaXRlID0gbmV4dE9iamVjdDtcblx0XG5cdC8qXG5cdCAqIHNvIG5vdyB3ZSBoYXZlIHRoZSBuZXh0IHJlbmRlcmFibGUgYW5kIHRoZSBwcmV2aW91cyByZW5kZXJhYmxlXG5cdCAqIFxuXHQgKi9cblx0aWYoZGlzcGxheU9iamVjdCBpbnN0YW5jZW9mIFBJWEkuU3ByaXRlKVxuXHR7XG5cdFx0dmFyIHByZXZpb3VzQmF0Y2hcblx0XHR2YXIgbmV4dEJhdGNoXG5cdFx0XG5cdFx0aWYocHJldmlvdXNTcHJpdGUgaW5zdGFuY2VvZiBQSVhJLlNwcml0ZSlcblx0XHR7XG5cdFx0XHRwcmV2aW91c0JhdGNoID0gcHJldmlvdXNTcHJpdGUuYmF0Y2g7XG5cdFx0XHRpZihwcmV2aW91c0JhdGNoKVxuXHRcdFx0e1xuXHRcdFx0XHRpZihwcmV2aW91c0JhdGNoLnRleHR1cmUgPT0gZGlzcGxheU9iamVjdC50ZXh0dXJlLmJhc2VUZXh0dXJlICYmIHByZXZpb3VzQmF0Y2guYmxlbmRNb2RlID09IGRpc3BsYXlPYmplY3QuYmxlbmRNb2RlKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0cHJldmlvdXNCYXRjaC5pbnNlcnRBZnRlcihkaXNwbGF5T2JqZWN0LCBwcmV2aW91c1Nwcml0ZSk7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGVsc2Vcblx0XHR7XG5cdFx0XHQvLyBUT0RPIHJld29yZCFcblx0XHRcdHByZXZpb3VzQmF0Y2ggPSBwcmV2aW91c1Nwcml0ZTtcblx0XHR9XG5cdFxuXHRcdGlmKG5leHRTcHJpdGUpXG5cdFx0e1xuXHRcdFx0aWYobmV4dFNwcml0ZSBpbnN0YW5jZW9mIFBJWEkuU3ByaXRlKVxuXHRcdFx0e1xuXHRcdFx0XHRuZXh0QmF0Y2ggPSBuZXh0U3ByaXRlLmJhdGNoO1xuXHRcdFx0XG5cdFx0XHRcdC8vYmF0Y2ggbWF5IG5vdCBleGlzdCBpZiBpdGVtIHdhcyBhZGRlZCB0byB0aGUgZGlzcGxheSBsaXN0IGJ1dCBub3QgdG8gdGhlIHdlYkdMXG5cdFx0XHRcdGlmKG5leHRCYXRjaClcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGlmKG5leHRCYXRjaC50ZXh0dXJlID09IGRpc3BsYXlPYmplY3QudGV4dHVyZS5iYXNlVGV4dHVyZSAmJiBuZXh0QmF0Y2guYmxlbmRNb2RlID09IGRpc3BsYXlPYmplY3QuYmxlbmRNb2RlKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdG5leHRCYXRjaC5pbnNlcnRCZWZvcmUoZGlzcGxheU9iamVjdCwgbmV4dFNwcml0ZSk7XG5cdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGVsc2Vcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRpZihuZXh0QmF0Y2ggPT0gcHJldmlvdXNCYXRjaClcblx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0Ly8gVEhFUkUgSVMgQSBTUExJVCBJTiBUSElTIEJBVENIISAvL1xuXHRcdFx0XHRcdFx0XHR2YXIgc3BsaXRCYXRjaCA9IHByZXZpb3VzQmF0Y2guc3BsaXQobmV4dFNwcml0ZSk7XG5cdFx0XHRcdFx0XHRcdC8vIENPT0whXG5cdFx0XHRcdFx0XHRcdC8vIGFkZCBpdCBiYWNrIGludG8gdGhlIGFycmF5XHRcblx0XHRcdFx0XHRcdFx0Lypcblx0XHRcdFx0XHRcdFx0ICogT09QUyFcblx0XHRcdFx0XHRcdFx0ICogc2VlbXMgdGhlIG5ldyBzcHJpdGUgaXMgaW4gdGhlIG1pZGRsZSBvZiBhIGJhdGNoXG5cdFx0XHRcdFx0XHRcdCAqIGxldHMgc3BsaXQgaXQuLiBcblx0XHRcdFx0XHRcdFx0ICovXG5cdFx0XHRcdFx0XHRcdHZhciBiYXRjaCA9IFBJWEkuV2ViR0xSZW5kZXJlci5nZXRCYXRjaCgpO1xuXG5cdFx0XHRcdFx0XHRcdHZhciBpbmRleCA9IHRoaXMuYmF0Y2hzLmluZGV4T2YoIHByZXZpb3VzQmF0Y2ggKTtcblx0XHRcdFx0XHRcdFx0YmF0Y2guaW5pdChkaXNwbGF5T2JqZWN0KTtcblx0XHRcdFx0XHRcdFx0dGhpcy5iYXRjaHMuc3BsaWNlKGluZGV4KzEsIDAsIGJhdGNoLCBzcGxpdEJhdGNoKTtcblx0XHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGVsc2Vcblx0XHRcdHtcblx0XHRcdFx0Ly8gVE9ETyByZS13b3JkIVxuXHRcdFx0XHRcblx0XHRcdFx0bmV4dEJhdGNoID0gbmV4dFNwcml0ZTtcblx0XHRcdH1cblx0XHR9XG5cdFx0XG5cdFx0Lypcblx0XHQgKiBsb29rcyBsaWtlIGl0IGRvZXMgbm90IGJlbG9uZyB0byBhbnkgYmF0Y2ghXG5cdFx0ICogYnV0IGlzIGFsc28gbm90IGludGVyc2VjdGluZyBvbmUuLlxuXHRcdCAqIHRpbWUgdG8gY3JlYXRlIGFuZXcgb25lIVxuXHRcdCAqL1xuXHRcdFxuXHRcdHZhciBiYXRjaCA9ICBQSVhJLldlYkdMUmVuZGVyZXIuZ2V0QmF0Y2goKTtcblx0XHRiYXRjaC5pbml0KGRpc3BsYXlPYmplY3QpO1xuXG5cdFx0aWYocHJldmlvdXNCYXRjaCkgLy8gaWYgdGhpcyBpcyBpbnZhbGlkIGl0IG1lYW5zIFxuXHRcdHtcblx0XHRcdHZhciBpbmRleCA9IHRoaXMuYmF0Y2hzLmluZGV4T2YoIHByZXZpb3VzQmF0Y2ggKTtcblx0XHRcdHRoaXMuYmF0Y2hzLnNwbGljZShpbmRleCsxLCAwLCBiYXRjaCk7XG5cdFx0fVxuXHRcdGVsc2Vcblx0XHR7XG5cdFx0XHR0aGlzLmJhdGNocy5wdXNoKGJhdGNoKTtcblx0XHR9XG5cdFx0XG5cdFx0cmV0dXJuO1xuXHR9XG5cdGVsc2UgaWYoZGlzcGxheU9iamVjdCBpbnN0YW5jZW9mIFBJWEkuVGlsaW5nU3ByaXRlKVxuXHR7XG5cdFx0XG5cdFx0Ly8gYWRkIHRvIGEgYmF0Y2ghIVxuXHRcdHRoaXMuaW5pdFRpbGluZ1Nwcml0ZShkaXNwbGF5T2JqZWN0KTtcblx0Ly9cdHRoaXMuYmF0Y2hzLnB1c2goZGlzcGxheU9iamVjdCk7XG5cdFx0XG5cdH1cblx0ZWxzZSBpZihkaXNwbGF5T2JqZWN0IGluc3RhbmNlb2YgUElYSS5TdHJpcClcblx0e1xuXHRcdC8vIGFkZCB0byBhIGJhdGNoISFcblx0XHR0aGlzLmluaXRTdHJpcChkaXNwbGF5T2JqZWN0KTtcblx0Ly9cdHRoaXMuYmF0Y2hzLnB1c2goZGlzcGxheU9iamVjdCk7XG5cdH1cblx0ZWxzZSBpZihkaXNwbGF5T2JqZWN0KS8vIGluc3RhbmNlb2YgUElYSS5HcmFwaGljcylcblx0e1xuXHRcdC8vZGlzcGxheU9iamVjdC5pbml0V2ViR0wodGhpcyk7XG5cdFx0XG5cdFx0Ly8gYWRkIHRvIGEgYmF0Y2ghIVxuXHRcdC8vdGhpcy5pbml0U3RyaXAoZGlzcGxheU9iamVjdCk7XG5cdFx0Ly90aGlzLmJhdGNocy5wdXNoKGRpc3BsYXlPYmplY3QpO1xuXHR9XG5cdFxuXHR0aGlzLmluc2VydEFmdGVyKGRpc3BsYXlPYmplY3QsIHByZXZpb3VzU3ByaXRlKTtcblx0XHRcdFxuXHQvLyBpbnNlcnQgYW5kIFNQTElUIVxuXG59XG5cbi8qKlxuICogSW5zZXJ0cyBhIGRpc3BsYXlPYmplY3QgaW50byB0aGUgbGlua2VkIGxpc3RcbiAqXG4gKiBAbWV0aG9kIGluc2VydEFmdGVyXG4gKiBAcGFyYW0gaXRlbSB7RGlzcGxheU9iamVjdH1cbiAqIEBwYXJhbSBkaXNwbGF5T2JqZWN0IHtEaXNwbGF5T2JqZWN0fSBUaGUgb2JqZWN0IHRvIGluc2VydFxuICogQHByaXZhdGVcbiAqL1xuUElYSS5XZWJHTFJlbmRlckdyb3VwLnByb3RvdHlwZS5pbnNlcnRBZnRlciA9IGZ1bmN0aW9uKGl0ZW0sIGRpc3BsYXlPYmplY3QpXG57XG5cdGlmKGRpc3BsYXlPYmplY3QgaW5zdGFuY2VvZiBQSVhJLlNwcml0ZSlcblx0e1xuXHRcdHZhciBwcmV2aW91c0JhdGNoID0gZGlzcGxheU9iamVjdC5iYXRjaDtcblx0XHRcblx0XHRpZihwcmV2aW91c0JhdGNoKVxuXHRcdHtcblx0XHRcdC8vIHNvIHRoaXMgb2JqZWN0IGlzIGluIGEgYmF0Y2ghXG5cdFx0XHRcblx0XHRcdC8vIGlzIGl0IG5vdD8gbmVlZCB0byBzcGxpdCB0aGUgYmF0Y2hcblx0XHRcdGlmKHByZXZpb3VzQmF0Y2gudGFpbCA9PSBkaXNwbGF5T2JqZWN0KVxuXHRcdFx0e1xuXHRcdFx0XHQvLyBpcyBpdCB0YWlsPyBpbnNlcnQgaW4gdG8gYmF0Y2hzXHRcblx0XHRcdFx0dmFyIGluZGV4ID0gdGhpcy5iYXRjaHMuaW5kZXhPZiggcHJldmlvdXNCYXRjaCApO1xuXHRcdFx0XHR0aGlzLmJhdGNocy5zcGxpY2UoaW5kZXgrMSwgMCwgaXRlbSk7XG5cdFx0XHR9XG5cdFx0XHRlbHNlXG5cdFx0XHR7XG5cdFx0XHRcdC8vIFRPRE8gTU9ESUZZIEFERCAvIFJFTU9WRSBDSElMRCBUTyBBQ0NPVU5UIEZPUiBGSUxURVJTIChhbHNvIGdldCBwcmV2IGFuZCBuZXh0KSAvL1xuXHRcdFx0XHRcblx0XHRcdFx0Ly8gVEhFUkUgSVMgQSBTUExJVCBJTiBUSElTIEJBVENIISAvL1xuXHRcdFx0XHR2YXIgc3BsaXRCYXRjaCA9IHByZXZpb3VzQmF0Y2guc3BsaXQoZGlzcGxheU9iamVjdC5fX25leHQpO1xuXHRcdFx0XHRcblx0XHRcdFx0Ly8gQ09PTCFcblx0XHRcdFx0Ly8gYWRkIGl0IGJhY2sgaW50byB0aGUgYXJyYXlcdFxuXHRcdFx0XHQvKlxuXHRcdFx0XHQgKiBPT1BTIVxuXHRcdFx0XHQgKiBzZWVtcyB0aGUgbmV3IHNwcml0ZSBpcyBpbiB0aGUgbWlkZGxlIG9mIGEgYmF0Y2hcblx0XHRcdFx0ICogbGV0cyBzcGxpdCBpdC4uIFxuXHRcdFx0XHQgKi9cblx0XHRcdFx0dmFyIGluZGV4ID0gdGhpcy5iYXRjaHMuaW5kZXhPZiggcHJldmlvdXNCYXRjaCApO1xuXHRcdFx0XHR0aGlzLmJhdGNocy5zcGxpY2UoaW5kZXgrMSwgMCwgaXRlbSwgc3BsaXRCYXRjaCk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGVsc2Vcblx0XHR7XG5cdFx0XHR0aGlzLmJhdGNocy5wdXNoKGl0ZW0pO1xuXHRcdH1cblx0fVxuXHRlbHNlXG5cdHtcblx0XHR2YXIgaW5kZXggPSB0aGlzLmJhdGNocy5pbmRleE9mKCBkaXNwbGF5T2JqZWN0ICk7XG5cdFx0dGhpcy5iYXRjaHMuc3BsaWNlKGluZGV4KzEsIDAsIGl0ZW0pO1xuXHR9XG59XG5cbi8qKlxuICogUmVtb3ZlcyBhIGRpc3BsYXlPYmplY3QgZnJvbSB0aGUgbGlua2VkIGxpc3RcbiAqXG4gKiBAbWV0aG9kIHJlbW92ZU9iamVjdFxuICogQHBhcmFtIGRpc3BsYXlPYmplY3Qge0Rpc3BsYXlPYmplY3R9IFRoZSBvYmplY3QgdG8gcmVtb3ZlXG4gKiBAcHJpdmF0ZVxuICovXG5QSVhJLldlYkdMUmVuZGVyR3JvdXAucHJvdG90eXBlLnJlbW92ZU9iamVjdCA9IGZ1bmN0aW9uKGRpc3BsYXlPYmplY3QpXG57XG5cdC8vIGxvb3AgdGhyb3VnaCBjaGlsZHJlbi4uXG5cdC8vIGRpc3BsYXkgb2JqZWN0IC8vXG5cdFxuXHQvLyBhZGQgYSBjaGlsZCBmcm9tIHRoZSByZW5kZXIgZ3JvdXAuLlxuXHQvLyByZW1vdmUgaXQgYW5kIGFsbCBpdHMgY2hpbGRyZW4hXG5cdC8vZGlzcGxheU9iamVjdC5jYWNoZVZpc2libGUgPSBmYWxzZTsvL2Rpc3BsYXlPYmplY3QudmlzaWJsZTtcblxuXHQvKlxuXHQgKiByZW1vdmluZyBpcyBhIGxvdCBxdWlja2VyLi5cblx0ICogXG5cdCAqL1xuXHR2YXIgYmF0Y2hUb1JlbW92ZTtcblx0XG5cdGlmKGRpc3BsYXlPYmplY3QgaW5zdGFuY2VvZiBQSVhJLlNwcml0ZSlcblx0e1xuXHRcdC8vIHNob3VsZCBhbHdheXMgaGF2ZSBhIGJhdGNoIVxuXHRcdHZhciBiYXRjaCA9IGRpc3BsYXlPYmplY3QuYmF0Y2g7XG5cdFx0aWYoIWJhdGNoKXJldHVybjsgLy8gdGhpcyBtZWFucyB0aGUgZGlzcGxheSBsaXN0IGhhcyBiZWVuIGFsdGVyZWQgYmVmcmUgcmVuZGVyaW5nXG5cdFx0XG5cdFx0YmF0Y2gucmVtb3ZlKGRpc3BsYXlPYmplY3QpO1xuXHRcdFxuXHRcdGlmKGJhdGNoLnNpemU9PTApXG5cdFx0e1xuXHRcdFx0YmF0Y2hUb1JlbW92ZSA9IGJhdGNoO1xuXHRcdH1cblx0fVxuXHRlbHNlXG5cdHtcblx0XHRiYXRjaFRvUmVtb3ZlID0gZGlzcGxheU9iamVjdDtcblx0fVxuXHRcblx0Lypcblx0ICogTG9va3MgbGlrZSB0aGVyZSBpcyBzb210aGluZyB0aGF0IG5lZWRzIHJlbW92aW5nIVxuXHQgKi9cblx0aWYoYmF0Y2hUb1JlbW92ZSlcdFxuXHR7XG5cdFx0dmFyIGluZGV4ID0gdGhpcy5iYXRjaHMuaW5kZXhPZiggYmF0Y2hUb1JlbW92ZSApO1xuXHRcdGlmKGluZGV4ID09IC0xKXJldHVybjsvLyB0aGlzIG1lYW5zIGl0IHdhcyBhZGRlZCB0aGVuIHJlbW92ZWQgYmVmb3JlIHJlbmRlcmVkXG5cdFx0XG5cdFx0Ly8gb2sgc28uLiBjaGVjayB0byBzZWUgaWYgeW91IGFkamFjZW50IGJhdGNocyBzaG91bGQgYmUgam9pbmVkLlxuXHRcdC8vIFRPRE8gbWF5IG9wdGltaXNlP1xuXHRcdGlmKGluZGV4ID09IDAgfHwgaW5kZXggPT0gdGhpcy5iYXRjaHMubGVuZ3RoLTEpXG5cdFx0e1xuXHRcdFx0Ly8gd2hhIC0gZXZhISBqdXN0IGdldCBvZiB0aGUgZW1wdHkgYmF0Y2ghXG5cdFx0XHR0aGlzLmJhdGNocy5zcGxpY2UoaW5kZXgsIDEpO1xuXHRcdFx0aWYoYmF0Y2hUb1JlbW92ZSBpbnN0YW5jZW9mIFBJWEkuV2ViR0xCYXRjaClQSVhJLldlYkdMUmVuZGVyZXIucmV0dXJuQmF0Y2goYmF0Y2hUb1JlbW92ZSk7XG5cdFx0XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdFxuXHRcdGlmKHRoaXMuYmF0Y2hzW2luZGV4LTFdIGluc3RhbmNlb2YgUElYSS5XZWJHTEJhdGNoICYmIHRoaXMuYmF0Y2hzW2luZGV4KzFdIGluc3RhbmNlb2YgUElYSS5XZWJHTEJhdGNoKVxuXHRcdHtcblx0XHRcdGlmKHRoaXMuYmF0Y2hzW2luZGV4LTFdLnRleHR1cmUgPT0gdGhpcy5iYXRjaHNbaW5kZXgrMV0udGV4dHVyZSAmJiB0aGlzLmJhdGNoc1tpbmRleC0xXS5ibGVuZE1vZGUgPT0gdGhpcy5iYXRjaHNbaW5kZXgrMV0uYmxlbmRNb2RlKVxuXHRcdFx0e1xuXHRcdFx0XHQvL2NvbnNvbGUubG9nKFwiTUVSR0VcIilcblx0XHRcdFx0dGhpcy5iYXRjaHNbaW5kZXgtMV0ubWVyZ2UodGhpcy5iYXRjaHNbaW5kZXgrMV0pO1xuXHRcdFx0XHRcblx0XHRcdFx0aWYoYmF0Y2hUb1JlbW92ZSBpbnN0YW5jZW9mIFBJWEkuV2ViR0xCYXRjaClQSVhJLldlYkdMUmVuZGVyZXIucmV0dXJuQmF0Y2goYmF0Y2hUb1JlbW92ZSk7XG5cdFx0XHRcdFBJWEkuV2ViR0xSZW5kZXJlci5yZXR1cm5CYXRjaCh0aGlzLmJhdGNoc1tpbmRleCsxXSk7XG5cdFx0XHRcdHRoaXMuYmF0Y2hzLnNwbGljZShpbmRleCwgMik7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHR9XG5cdFx0XG5cdFx0dGhpcy5iYXRjaHMuc3BsaWNlKGluZGV4LCAxKTtcblx0XHRpZihiYXRjaFRvUmVtb3ZlIGluc3RhbmNlb2YgUElYSS5XZWJHTEJhdGNoKVBJWEkuV2ViR0xSZW5kZXJlci5yZXR1cm5CYXRjaChiYXRjaFRvUmVtb3ZlKTtcblx0fVxufVxuXG5cbi8qKlxuICogSW5pdGlhbGl6ZXMgYSB0aWxpbmcgc3ByaXRlXG4gKlxuICogQG1ldGhvZCBpbml0VGlsaW5nU3ByaXRlXG4gKiBAcGFyYW0gc3ByaXRlIHtUaWxpbmdTcHJpdGV9IFRoZSB0aWxpbmcgc3ByaXRlIHRvIGluaXRpYWxpemVcbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuV2ViR0xSZW5kZXJHcm91cC5wcm90b3R5cGUuaW5pdFRpbGluZ1Nwcml0ZSA9IGZ1bmN0aW9uKHNwcml0ZSlcbntcblx0dmFyIGdsID0gdGhpcy5nbDtcblxuXHQvLyBtYWtlIHRoZSB0ZXh0dXJlIHRpbGFibGUuLlxuXHRcdFx0XG5cdHNwcml0ZS52ZXJ0aWNpZXMgPSBuZXcgRmxvYXQzMkFycmF5KFswLCAwLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHQgIHNwcml0ZS53aWR0aCwgMCxcblx0XHRcdFx0XHRcdFx0XHRcdFx0ICBzcHJpdGUud2lkdGgsICBzcHJpdGUuaGVpZ2h0LFxuXHRcdFx0XHRcdFx0XHRcdFx0XHQgMCwgIHNwcml0ZS5oZWlnaHRdKTtcblx0XHRcdFx0XHRcblx0c3ByaXRlLnV2cyA9IG5ldyBGbG9hdDMyQXJyYXkoWzAsIDAsXG5cdFx0XHRcdFx0XHRcdFx0XHQxLCAwLFxuXHRcdFx0XHRcdFx0XHRcdFx0MSwgMSxcblx0XHRcdFx0XHRcdFx0XHRcdDAsIDFdKTtcblx0XHRcdFx0XG5cdHNwcml0ZS5jb2xvcnMgPSBuZXcgRmxvYXQzMkFycmF5KFsxLDEsMSwxXSk7XG5cdFxuXHRzcHJpdGUuaW5kaWNlcyA9ICBuZXcgVWludDE2QXJyYXkoWzAsIDEsIDMsMl0pLy8sIDJdKTtcblx0XG5cdHNwcml0ZS5fdmVydGV4QnVmZmVyID0gZ2wuY3JlYXRlQnVmZmVyKCk7XG5cdHNwcml0ZS5faW5kZXhCdWZmZXIgPSBnbC5jcmVhdGVCdWZmZXIoKTtcblx0c3ByaXRlLl91dkJ1ZmZlciA9IGdsLmNyZWF0ZUJ1ZmZlcigpO1xuXHRzcHJpdGUuX2NvbG9yQnVmZmVyID0gZ2wuY3JlYXRlQnVmZmVyKCk7XG5cdFx0XHRcdFx0XHRcblx0Z2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHNwcml0ZS5fdmVydGV4QnVmZmVyKTtcblx0Z2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsIHNwcml0ZS52ZXJ0aWNpZXMsIGdsLlNUQVRJQ19EUkFXKTtcblxuXHRnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgc3ByaXRlLl91dkJ1ZmZlcik7XG4gICAgZ2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsICBzcHJpdGUudXZzLCBnbC5EWU5BTUlDX0RSQVcpO1xuXG4gICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHNwcml0ZS5fY29sb3JCdWZmZXIpO1xuXHRnbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgc3ByaXRlLmNvbG9ycywgZ2wuU1RBVElDX0RSQVcpO1xuXG4gICAgZ2wuYmluZEJ1ZmZlcihnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgc3ByaXRlLl9pbmRleEJ1ZmZlcik7XG4gICAgZ2wuYnVmZmVyRGF0YShnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgc3ByaXRlLmluZGljZXMsIGdsLlNUQVRJQ19EUkFXKTtcbiAgICBcbi8vICAgIHJldHVybiAoICh4ID4gMCkgJiYgKCh4ICYgKHggLSAxKSkgPT0gMCkgKTtcblxuXHRpZihzcHJpdGUudGV4dHVyZS5iYXNlVGV4dHVyZS5fZ2xUZXh0dXJlKVxuXHR7XG4gICAgXHRnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCBzcHJpdGUudGV4dHVyZS5iYXNlVGV4dHVyZS5fZ2xUZXh0dXJlKTtcbiAgICBcdGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9XUkFQX1MsIGdsLlJFUEVBVCk7XG5cdFx0Z2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX1dSQVBfVCwgZ2wuUkVQRUFUKTtcblx0XHRzcHJpdGUudGV4dHVyZS5iYXNlVGV4dHVyZS5fcG93ZXJPZjIgPSB0cnVlO1xuXHR9XG5cdGVsc2Vcblx0e1xuXHRcdHNwcml0ZS50ZXh0dXJlLmJhc2VUZXh0dXJlLl9wb3dlck9mMiA9IHRydWU7XG5cdH1cbn1cblxuLyoqXG4gKiBSZW5kZXJzIGEgU3RyaXBcbiAqXG4gKiBAbWV0aG9kIHJlbmRlclN0cmlwXG4gKiBAcGFyYW0gc3RyaXAge1N0cmlwfSBUaGUgc3RyaXAgdG8gcmVuZGVyXG4gKiBAcGFyYW0gcHJvamVjdGlvbiB7T2JqZWN0fVxuICogQHByaXZhdGVcbiAqL1xuUElYSS5XZWJHTFJlbmRlckdyb3VwLnByb3RvdHlwZS5yZW5kZXJTdHJpcCA9IGZ1bmN0aW9uKHN0cmlwLCBwcm9qZWN0aW9uKVxue1xuXHR2YXIgZ2wgPSB0aGlzLmdsO1xuXG5cdFBJWEkuYWN0aXZhdGVTdHJpcFNoYWRlcigpO1xuXG5cdHZhciBzaGFkZXIgPSBQSVhJLnN0cmlwU2hhZGVyO1xuXG5cdHZhciBwcm9ncmFtID0gc2hhZGVyLnByb2dyYW07XG5cdFxuXHR2YXIgbSA9IFBJWEkubWF0My5jbG9uZShzdHJpcC53b3JsZFRyYW5zZm9ybSk7XG5cdFxuXHRQSVhJLm1hdDMudHJhbnNwb3NlKG0pO1xuXHRcbi8vXHRjb25zb2xlLmxvZyhwcm9qZWN0aW9uKVxuXHQvLyBzZXQgdGhlIG1hdHJpeCB0cmFuc2Zvcm0gZm9yIHRoZSBcbiBcdGdsLnVuaWZvcm1NYXRyaXgzZnYoc2hhZGVyLnRyYW5zbGF0aW9uTWF0cml4LCBmYWxzZSwgbSk7XG5cdGdsLnVuaWZvcm0yZihzaGFkZXIucHJvamVjdGlvblZlY3RvciwgcHJvamVjdGlvbi54LCBwcm9qZWN0aW9uLnkpO1xuXHRnbC51bmlmb3JtMmYoc2hhZGVyLm9mZnNldFZlY3RvciwgLVBJWEkub2Zmc2V0LngsIC1QSVhJLm9mZnNldC55KTtcblx0XG5cdGdsLnVuaWZvcm0xZihzaGFkZXIuYWxwaGEsIHN0cmlwLndvcmxkQWxwaGEpO1xuXG5cdC8qXG5cdGlmKHN0cmlwLmJsZW5kTW9kZSA9PSBQSVhJLmJsZW5kTW9kZXMuTk9STUFMKVxuXHR7XG5cdFx0Z2wuYmxlbmRGdW5jKGdsLk9ORSwgZ2wuT05FX01JTlVTX1NSQ19BTFBIQSk7XG5cdH1cblx0ZWxzZVxuXHR7XG5cdFx0Z2wuYmxlbmRGdW5jKGdsLk9ORSwgZ2wuT05FX01JTlVTX1NSQ19DT0xPUik7XG5cdH1cblx0Ki9cblx0XG5cdC8vY29uc29sZS5sb2coXCIhIVwiKVxuXHRpZighc3RyaXAuZGlydHkpXG5cdHtcdFxuXHRcdGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBzdHJpcC5fdmVydGV4QnVmZmVyKTtcblx0XHRnbC5idWZmZXJTdWJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgMCwgc3RyaXAudmVydGljaWVzKVxuXHQgICAgZ2wudmVydGV4QXR0cmliUG9pbnRlcihzaGFkZXIuYVZlcnRleFBvc2l0aW9uLCAyLCBnbC5GTE9BVCwgZmFsc2UsIDAsIDApO1xuXHRcdFxuXHRcdC8vIHVwZGF0ZSB0aGUgdXZzXG5cdCAgIFx0Z2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHN0cmlwLl91dkJ1ZmZlcik7XG5cdCAgICBnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHNoYWRlci5hVGV4dHVyZUNvb3JkLCAyLCBnbC5GTE9BVCwgZmFsc2UsIDAsIDApO1xuXHRcdFx0XG5cdCAgICBnbC5hY3RpdmVUZXh0dXJlKGdsLlRFWFRVUkUwKTtcblx0ICAgIGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsIHN0cmlwLnRleHR1cmUuYmFzZVRleHR1cmUuX2dsVGV4dHVyZSk7XG5cdFx0XG5cdFx0Z2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHN0cmlwLl9jb2xvckJ1ZmZlcik7XG5cdCAgICBnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHNoYWRlci5jb2xvckF0dHJpYnV0ZSwgMSwgZ2wuRkxPQVQsIGZhbHNlLCAwLCAwKTtcblx0XHRcblx0XHQvLyBkb250IG5lZWQgdG8gdXBsb2FkIVxuXHQgICAgZ2wuYmluZEJ1ZmZlcihnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgc3RyaXAuX2luZGV4QnVmZmVyKTtcblx0fVxuXHRlbHNlXG5cdHtcblx0XHRzdHJpcC5kaXJ0eSA9IGZhbHNlO1xuXHRcdGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBzdHJpcC5fdmVydGV4QnVmZmVyKTtcblx0XHRnbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgc3RyaXAudmVydGljaWVzLCBnbC5TVEFUSUNfRFJBVylcblx0ICAgIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIoc2hhZGVyLmFWZXJ0ZXhQb3NpdGlvbiwgMiwgZ2wuRkxPQVQsIGZhbHNlLCAwLCAwKTtcblx0XHRcblx0XHQvLyB1cGRhdGUgdGhlIHV2c1xuXHQgICBcdGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBzdHJpcC5fdXZCdWZmZXIpO1xuXHQgICBcdGdsLmJ1ZmZlckRhdGEoZ2wuQVJSQVlfQlVGRkVSLCBzdHJpcC51dnMsIGdsLlNUQVRJQ19EUkFXKVxuXHQgICAgZ2wudmVydGV4QXR0cmliUG9pbnRlcihzaGFkZXIuYVRleHR1cmVDb29yZCwgMiwgZ2wuRkxPQVQsIGZhbHNlLCAwLCAwKTtcblx0XHRcdFxuXHQgICAgZ2wuYWN0aXZlVGV4dHVyZShnbC5URVhUVVJFMCk7XG5cdCAgICBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCBzdHJpcC50ZXh0dXJlLmJhc2VUZXh0dXJlLl9nbFRleHR1cmUpO1xuXHQvL1x0Y29uc29sZS5sb2coc3RyaXAudGV4dHVyZS5iYXNlVGV4dHVyZS5fZ2xUZXh0dXJlKVxuXHRcdGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBzdHJpcC5fY29sb3JCdWZmZXIpO1xuXHRcdGdsLmJ1ZmZlckRhdGEoZ2wuQVJSQVlfQlVGRkVSLCBzdHJpcC5jb2xvcnMsIGdsLlNUQVRJQ19EUkFXKVxuXHQgICAgZ2wudmVydGV4QXR0cmliUG9pbnRlcihzaGFkZXIuY29sb3JBdHRyaWJ1dGUsIDEsIGdsLkZMT0FULCBmYWxzZSwgMCwgMCk7XG5cdFx0XG5cdFx0Ly8gZG9udCBuZWVkIHRvIHVwbG9hZCFcblx0ICAgIGdsLmJpbmRCdWZmZXIoZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVIsIHN0cmlwLl9pbmRleEJ1ZmZlcik7XG5cdCAgICBnbC5idWZmZXJEYXRhKGdsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLCBzdHJpcC5pbmRpY2VzLCBnbC5TVEFUSUNfRFJBVyk7XG5cdCAgICBcblx0fVxuXHRcblx0Z2wuZHJhd0VsZW1lbnRzKGdsLlRSSUFOR0xFX1NUUklQLCBzdHJpcC5pbmRpY2VzLmxlbmd0aCwgZ2wuVU5TSUdORURfU0hPUlQsIDApO1xuICAgIFxuICAgIFBJWEkuZGVhY3RpdmF0ZVN0cmlwU2hhZGVyKCk7XG4gIFx0Ly9nbC51c2VQcm9ncmFtKFBJWEkuY3VycmVudFByb2dyYW0pO1xufVxuXG4vKipcbiAqIFJlbmRlcnMgYSBUaWxpbmdTcHJpdGVcbiAqXG4gKiBAbWV0aG9kIHJlbmRlclRpbGluZ1Nwcml0ZVxuICogQHBhcmFtIHNwcml0ZSB7VGlsaW5nU3ByaXRlfSBUaGUgdGlsaW5nIHNwcml0ZSB0byByZW5kZXJcbiAqIEBwYXJhbSBwcm9qZWN0aW9uTWF0cml4IHtPYmplY3R9XG4gKiBAcHJpdmF0ZVxuICovXG5QSVhJLldlYkdMUmVuZGVyR3JvdXAucHJvdG90eXBlLnJlbmRlclRpbGluZ1Nwcml0ZSA9IGZ1bmN0aW9uKHNwcml0ZSwgcHJvamVjdGlvbk1hdHJpeClcbntcblx0dmFyIGdsID0gdGhpcy5nbDtcblxuXG5cdHZhciBzaGFkZXJQcm9ncmFtID0gUElYSS5zaGFkZXJQcm9ncmFtO1xuXHRcblx0dmFyIHRpbGVQb3NpdGlvbiA9IHNwcml0ZS50aWxlUG9zaXRpb247XG5cdHZhciB0aWxlU2NhbGUgPSBzcHJpdGUudGlsZVNjYWxlO1xuXHRcblx0dmFyIG9mZnNldFggPSAgdGlsZVBvc2l0aW9uLngvc3ByaXRlLnRleHR1cmUuYmFzZVRleHR1cmUud2lkdGg7XG5cdHZhciBvZmZzZXRZID0gIHRpbGVQb3NpdGlvbi55L3Nwcml0ZS50ZXh0dXJlLmJhc2VUZXh0dXJlLmhlaWdodDtcblx0XG5cdHZhciBzY2FsZVggPSAgKHNwcml0ZS53aWR0aCAvIHNwcml0ZS50ZXh0dXJlLmJhc2VUZXh0dXJlLndpZHRoKSAgLyB0aWxlU2NhbGUueDtcblx0dmFyIHNjYWxlWSA9ICAoc3ByaXRlLmhlaWdodCAvIHNwcml0ZS50ZXh0dXJlLmJhc2VUZXh0dXJlLmhlaWdodCkgLyB0aWxlU2NhbGUueTtcblxuXHRzcHJpdGUudXZzWzBdID0gMCAtIG9mZnNldFg7XG5cdHNwcml0ZS51dnNbMV0gPSAwIC0gb2Zmc2V0WTtcblx0XG5cdHNwcml0ZS51dnNbMl0gPSAoMSAqIHNjYWxlWCkgIC1vZmZzZXRYO1xuXHRzcHJpdGUudXZzWzNdID0gMCAtIG9mZnNldFk7XG5cdFxuXHRzcHJpdGUudXZzWzRdID0gKDEgKnNjYWxlWCkgLSBvZmZzZXRYO1xuXHRzcHJpdGUudXZzWzVdID0gKDEgKnNjYWxlWSkgLSBvZmZzZXRZO1xuXHRcblx0c3ByaXRlLnV2c1s2XSA9IDAgLSBvZmZzZXRYO1xuXHRzcHJpdGUudXZzWzddID0gKDEgKnNjYWxlWSkgLSBvZmZzZXRZO1xuXHRcblx0Z2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHNwcml0ZS5fdXZCdWZmZXIpO1xuXHRnbC5idWZmZXJTdWJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgMCwgc3ByaXRlLnV2cylcblx0XG5cdHRoaXMucmVuZGVyU3RyaXAoc3ByaXRlLCBwcm9qZWN0aW9uTWF0cml4KTtcbn1cblxuLyoqXG4gKiBJbml0aWFsaXplcyBhIHN0cmlwIHRvIGJlIHJlbmRlcmVkXG4gKlxuICogQG1ldGhvZCBpbml0U3RyaXBcbiAqIEBwYXJhbSBzdHJpcCB7U3RyaXB9IFRoZSBzdHJpcCB0byBpbml0aWFsaXplXG4gKiBAcHJpdmF0ZVxuICovXG5QSVhJLldlYkdMUmVuZGVyR3JvdXAucHJvdG90eXBlLmluaXRTdHJpcCA9IGZ1bmN0aW9uKHN0cmlwKVxue1xuXHQvLyBidWlsZCB0aGUgc3RyaXAhXG5cdHZhciBnbCA9IHRoaXMuZ2w7XG5cdHZhciBzaGFkZXJQcm9ncmFtID0gdGhpcy5zaGFkZXJQcm9ncmFtO1xuXHRcblx0c3RyaXAuX3ZlcnRleEJ1ZmZlciA9IGdsLmNyZWF0ZUJ1ZmZlcigpO1xuXHRzdHJpcC5faW5kZXhCdWZmZXIgPSBnbC5jcmVhdGVCdWZmZXIoKTtcblx0c3RyaXAuX3V2QnVmZmVyID0gZ2wuY3JlYXRlQnVmZmVyKCk7XG5cdHN0cmlwLl9jb2xvckJ1ZmZlciA9IGdsLmNyZWF0ZUJ1ZmZlcigpO1xuXHRcblx0Z2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHN0cmlwLl92ZXJ0ZXhCdWZmZXIpO1xuXHRnbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgc3RyaXAudmVydGljaWVzLCBnbC5EWU5BTUlDX0RSQVcpO1xuXG5cdGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBzdHJpcC5fdXZCdWZmZXIpO1xuICAgIGdsLmJ1ZmZlckRhdGEoZ2wuQVJSQVlfQlVGRkVSLCAgc3RyaXAudXZzLCBnbC5TVEFUSUNfRFJBVyk7XG5cbiAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgc3RyaXAuX2NvbG9yQnVmZmVyKTtcblx0Z2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsIHN0cmlwLmNvbG9ycywgZ2wuU1RBVElDX0RSQVcpO1xuXG5cdFxuICAgIGdsLmJpbmRCdWZmZXIoZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVIsIHN0cmlwLl9pbmRleEJ1ZmZlcik7XG4gICAgZ2wuYnVmZmVyRGF0YShnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgc3RyaXAuaW5kaWNlcywgZ2wuU1RBVElDX0RSQVcpO1xufVxuXG5cbi8qKlxuICogQGF1dGhvciBNYXQgR3JvdmVzIGh0dHA6Ly9tYXRncm92ZXMuY29tLyBARG9vcm1hdDIzXG4gKi9cblxuXG5QSVhJLldlYkdMRmlsdGVyTWFuYWdlciA9IGZ1bmN0aW9uKHRyYW5zcGFyZW50KVxue1xuXHR0aGlzLnRyYW5zcGFyZW50ID0gdHJhbnNwYXJlbnQ7XG5cdFxuXHR0aGlzLmZpbHRlclN0YWNrID0gW107XG5cdHRoaXMudGV4dHVyZVBvb2wgPSBbXTtcblx0XG5cdHRoaXMub2Zmc2V0WCA9IDA7XG5cdHRoaXMub2Zmc2V0WSA9IDA7XG5cdFxuXHR0aGlzLmluaXRTaGFkZXJCdWZmZXJzKCk7XG59XG5cbi8vIEFQSVxuXG5QSVhJLldlYkdMRmlsdGVyTWFuYWdlci5wcm90b3R5cGUuYmVnaW4gPSBmdW5jdGlvbihwcm9qZWN0aW9uLCBidWZmZXIpXG57XG5cdHRoaXMud2lkdGggPSBwcm9qZWN0aW9uLnggKiAyO1xuXHR0aGlzLmhlaWdodCA9IC1wcm9qZWN0aW9uLnkgKiAyO1xuXHR0aGlzLmJ1ZmZlciA9IGJ1ZmZlcjtcbn1cblxuUElYSS5XZWJHTEZpbHRlck1hbmFnZXIucHJvdG90eXBlLnB1c2hGaWx0ZXIgPSBmdW5jdGlvbihmaWx0ZXJCbG9jaylcbntcblx0dmFyIGdsID0gUElYSS5nbDtcblxuXHQvLyBmaWx0ZXIgcHJvZ3JhbVxuXHQvLyBPUFRJTUlTQVRJT04gLSB0aGUgZmlyc3QgZmlsdGVyIGlzIGZyZWUgaWYgaXRzIGEgc2ltcGxlIGNvbG9yIGNoYW5nZT9cblx0dGhpcy5maWx0ZXJTdGFjay5wdXNoKGZpbHRlckJsb2NrKTtcblxuXHR2YXIgZmlsdGVyID0gZmlsdGVyQmxvY2suZmlsdGVyUGFzc2VzWzBdO1xuXG5cdFxuXG5cdHRoaXMub2Zmc2V0WCArPSBmaWx0ZXJCbG9jay50YXJnZXQuZmlsdGVyQXJlYS54O1xuXHR0aGlzLm9mZnNldFkgKz0gZmlsdGVyQmxvY2sudGFyZ2V0LmZpbHRlckFyZWEueTtcblx0XG5cdFxuXHRcblx0XG5cdFxuXHR2YXIgdGV4dHVyZSA9IHRoaXMudGV4dHVyZVBvb2wucG9wKCk7XG5cdGlmKCF0ZXh0dXJlKXRleHR1cmUgPSBuZXcgUElYSS5GaWx0ZXJUZXh0dXJlKHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KTtcblx0XG5cdGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsICB0ZXh0dXJlLnRleHR1cmUpO1xuXHRcblx0dGhpcy5nZXRCb3VuZHMoZmlsdGVyQmxvY2sudGFyZ2V0KTtcblx0XHRcblx0Ly8gYWRkcGFkZGluZz9cblx0Ly9kaXNwbGF5T2JqZWN0LmZpbHRlckFyZWEueFxuXG5cdHZhciBmaWx0ZXJBcmVhID0gZmlsdGVyQmxvY2sudGFyZ2V0LmZpbHRlckFyZWE7XG5cblx0dmFyIHBhZGlkbmcgPSBmaWx0ZXIucGFkZGluZztcblx0ZmlsdGVyQXJlYS54IC09IHBhZGlkbmc7XG5cdGZpbHRlckFyZWEueSAtPSBwYWRpZG5nO1xuXHRmaWx0ZXJBcmVhLndpZHRoICs9IHBhZGlkbmcgKiAyO1xuXHRmaWx0ZXJBcmVhLmhlaWdodCArPSBwYWRpZG5nICogMjtcblxuXHQvLyBjYXAgZmlsdGVyIHRvIHNjcmVlbiBzaXplLi5cblx0aWYoZmlsdGVyQXJlYS54IDwgMClmaWx0ZXJBcmVhLnggPSAwO1x0XG5cdGlmKGZpbHRlckFyZWEud2lkdGggPiB0aGlzLndpZHRoKWZpbHRlckFyZWEud2lkdGggPSB0aGlzLndpZHRoO1xuXHRpZihmaWx0ZXJBcmVhLnkgPCAwKWZpbHRlckFyZWEueSA9IDA7XHRcblx0aWYoZmlsdGVyQXJlYS5oZWlnaHQgPiB0aGlzLmhlaWdodClmaWx0ZXJBcmVhLmhlaWdodCA9IHRoaXMuaGVpZ2h0O1xuXG5cblx0Ly9nbC50ZXhJbWFnZTJEKGdsLlRFWFRVUkVfMkQsIDAsIGdsLlJHQkEsICBmaWx0ZXJBcmVhLndpZHRoLCBmaWx0ZXJBcmVhLmhlaWdodCwgMCwgZ2wuUkdCQSwgZ2wuVU5TSUdORURfQllURSwgbnVsbCk7XG5cdGdsLmJpbmRGcmFtZWJ1ZmZlcihnbC5GUkFNRUJVRkZFUiwgdGV4dHVyZS5mcmFtZUJ1ZmZlcik7XG4gICBcbiAgLy8gY29uc29sZS5sb2coZmlsdGVyQXJlYSlcblx0Ly8gc2V0IHZpZXcgcG9ydFxuXHRnbC52aWV3cG9ydCgwLCAwLCBmaWx0ZXJBcmVhLndpZHRoLCBmaWx0ZXJBcmVhLmhlaWdodCk7XHRcblx0XG5cdFBJWEkucHJvamVjdGlvbi54ID0gZmlsdGVyQXJlYS53aWR0aC8yO1xuXHRQSVhJLnByb2plY3Rpb24ueSA9IC1maWx0ZXJBcmVhLmhlaWdodC8yO1xuXHRcblx0UElYSS5vZmZzZXQueCA9IC1maWx0ZXJBcmVhLng7IFxuXHRQSVhJLm9mZnNldC55ID0gLWZpbHRlckFyZWEueTtcblxuXHQvL2NvbnNvbGUubG9nKFBJWEkuZGVmYXVsdFNoYWRlci5wcm9qZWN0aW9uVmVjdG9yKVxuXHQvLyB1cGRhdGUgcHJvamVjdGlvblxuXHRnbC51bmlmb3JtMmYoUElYSS5kZWZhdWx0U2hhZGVyLnByb2plY3Rpb25WZWN0b3IsIGZpbHRlckFyZWEud2lkdGgvMiwgLWZpbHRlckFyZWEuaGVpZ2h0LzIpO1xuXHRnbC51bmlmb3JtMmYoUElYSS5kZWZhdWx0U2hhZGVyLm9mZnNldFZlY3RvciwgLWZpbHRlckFyZWEueCwgLWZpbHRlckFyZWEueSk7XG5cdC8vUElYSS5wcmltaXRpdmVQcm9ncmFtXG5cblx0Z2wuY29sb3JNYXNrKHRydWUsIHRydWUsIHRydWUsIHRydWUpOyBcblx0Z2wuY2xlYXJDb2xvcigwLDAsMCwgMCk7ICAgICBcblx0Z2wuY2xlYXIoZ2wuQ09MT1JfQlVGRkVSX0JJVCk7XG5cdFxuXHQvL2ZpbHRlci50ZXh0dXJlID0gdGV4dHVyZTtcblx0ZmlsdGVyQmxvY2suX2dsRmlsdGVyVGV4dHVyZSA9IHRleHR1cmU7XG5cblx0Ly9jb25zb2xlLmxvZyhcIlBVU0hcIilcbn1cblxuXG5QSVhJLldlYkdMRmlsdGVyTWFuYWdlci5wcm90b3R5cGUucG9wRmlsdGVyID0gZnVuY3Rpb24oKVxue1xuXHRcblx0dmFyIGdsID0gUElYSS5nbDtcblx0XG5cdHZhciBmaWx0ZXJCbG9jayA9IHRoaXMuZmlsdGVyU3RhY2sucG9wKCk7XG5cblxuXG5cdHZhciBmaWx0ZXJBcmVhID0gZmlsdGVyQmxvY2sudGFyZ2V0LmZpbHRlckFyZWE7XG5cblx0dmFyIHRleHR1cmUgPSBmaWx0ZXJCbG9jay5fZ2xGaWx0ZXJUZXh0dXJlO1xuXG5cdGlmKGZpbHRlckJsb2NrLmZpbHRlclBhc3Nlcy5sZW5ndGggPiAxKVxuXHR7XG5cdFx0Z2wudmlld3BvcnQoMCwgMCwgZmlsdGVyQXJlYS53aWR0aCwgZmlsdGVyQXJlYS5oZWlnaHQpO1xuXG5cdFx0Z2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHRoaXMudmVydGV4QnVmZmVyKTtcblx0XG5cdFx0dGhpcy52ZXJ0ZXhBcnJheVswXSA9IDA7XG5cdFx0dGhpcy52ZXJ0ZXhBcnJheVsxXSA9IGZpbHRlckFyZWEuaGVpZ2h0O1xuXHRcdFxuXHRcdHRoaXMudmVydGV4QXJyYXlbMl0gPSBmaWx0ZXJBcmVhLndpZHRoO1xuXHRcdHRoaXMudmVydGV4QXJyYXlbM10gPSBmaWx0ZXJBcmVhLmhlaWdodDtcblx0XHRcblx0XHR0aGlzLnZlcnRleEFycmF5WzRdID0gMDtcblx0XHR0aGlzLnZlcnRleEFycmF5WzVdID0gMDtcblx0XHRcblx0XHR0aGlzLnZlcnRleEFycmF5WzZdID0gZmlsdGVyQXJlYS53aWR0aDtcblx0XHR0aGlzLnZlcnRleEFycmF5WzddID0gMDtcblxuXG5cdFx0Z2wuYnVmZmVyU3ViRGF0YShnbC5BUlJBWV9CVUZGRVIsIDAsIHRoaXMudmVydGV4QXJyYXkpO1xuXG5cdFxuXHRcdGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB0aGlzLnV2QnVmZmVyKTtcblx0XHQvLyBubm93IHNldCB0aGUgdXZzLi5cblx0XHR0aGlzLnV2QXJyYXlbMl0gPSBmaWx0ZXJBcmVhLndpZHRoL3RoaXMud2lkdGg7XG5cdFx0dGhpcy51dkFycmF5WzVdID0gZmlsdGVyQXJlYS5oZWlnaHQvdGhpcy5oZWlnaHQ7XG5cdFx0dGhpcy51dkFycmF5WzZdID0gZmlsdGVyQXJlYS53aWR0aC90aGlzLndpZHRoO1xuXHRcdHRoaXMudXZBcnJheVs3XSA9IGZpbHRlckFyZWEuaGVpZ2h0L3RoaXMuaGVpZ2h0O1xuXHRcdFxuXHRcdGdsLmJ1ZmZlclN1YkRhdGEoZ2wuQVJSQVlfQlVGRkVSLCAwLCB0aGlzLnV2QXJyYXkpO1xuXG5cdFx0dmFyIGlucHV0VGV4dHVyZSA9IHRleHR1cmU7XG5cdFx0dmFyIG91dHB1dFRleHR1cmUgPSB0aGlzLnRleHR1cmVQb29sLnBvcCgpO1xuXHRcdGlmKCFvdXRwdXRUZXh0dXJlKW91dHB1dFRleHR1cmUgPSBuZXcgUElYSS5GaWx0ZXJUZXh0dXJlKHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KTtcblx0XHRcblx0XHQvLyBuZWVkIHRvIGNsZWFyIHRoaXMgRkJPIGFzIGl0IG1heSBoYXZlIHNvbWUgbGVmdCBvdmVyIGVsZW1lbnRzIGZyb20gYSBwcnZpb3VzIGZpbHRlci5cblx0XHRnbC5iaW5kRnJhbWVidWZmZXIoZ2wuRlJBTUVCVUZGRVIsIG91dHB1dFRleHR1cmUuZnJhbWVCdWZmZXIgKTsgICAgIFxuXHRcdGdsLmNsZWFyKGdsLkNPTE9SX0JVRkZFUl9CSVQpO1xuXHQgXG5cdFx0Z2wuZGlzYWJsZShnbC5CTEVORCk7XG5cdFx0XG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBmaWx0ZXJCbG9jay5maWx0ZXJQYXNzZXMubGVuZ3RoLTE7IGkrKykgXG5cdFx0e1xuXHRcdFx0dmFyIGZpbHRlclBhc3MgPSBmaWx0ZXJCbG9jay5maWx0ZXJQYXNzZXNbaV07XG5cdFxuXHRcdFx0Z2wuYmluZEZyYW1lYnVmZmVyKGdsLkZSQU1FQlVGRkVSLCBvdXRwdXRUZXh0dXJlLmZyYW1lQnVmZmVyICk7XG5cdFx0XHRcblx0XHRcdC8vIHNldCB0ZXh0dXJlXG5cdFx0ICAgIGdsLmFjdGl2ZVRleHR1cmUoZ2wuVEVYVFVSRTApO1xuXHRcdFx0Z2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgaW5wdXRUZXh0dXJlLnRleHR1cmUpO1xuXHRcdFx0XG5cdFx0XHQvLyBkcmF3IHRleHR1cmUuLlxuXHRcdFx0Ly9maWx0ZXJQYXNzLmFwcGx5RmlsdGVyUGFzcyhmaWx0ZXJBcmVhLndpZHRoLCBmaWx0ZXJBcmVhLmhlaWdodCk7XG5cdFx0XHR0aGlzLmFwcGx5RmlsdGVyUGFzcyhmaWx0ZXJQYXNzLCBmaWx0ZXJBcmVhLCBmaWx0ZXJBcmVhLndpZHRoLCBmaWx0ZXJBcmVhLmhlaWdodCk7XG5cblx0XHRcdC8vIHN3YXAgdGhlIHRleHR1cmVzLi5cblx0XHRcdHZhciB0ZW1wID0gaW5wdXRUZXh0dXJlO1xuXHRcdFx0aW5wdXRUZXh0dXJlID0gb3V0cHV0VGV4dHVyZTtcblx0XHRcdG91dHB1dFRleHR1cmUgPSB0ZW1wO1xuXHRcdFx0XG5cdFx0fTtcblxuXHRcdGdsLmVuYWJsZShnbC5CTEVORCk7XG5cblx0XHR0ZXh0dXJlID0gaW5wdXRUZXh0dXJlO1xuXHRcdHRoaXMudGV4dHVyZVBvb2wucHVzaChvdXRwdXRUZXh0dXJlKTtcblx0fVxuXG5cdHZhciBmaWx0ZXIgPSBmaWx0ZXJCbG9jay5maWx0ZXJQYXNzZXNbZmlsdGVyQmxvY2suZmlsdGVyUGFzc2VzLmxlbmd0aC0xXTtcblx0XG5cdHRoaXMub2Zmc2V0WCAtPSBmaWx0ZXJBcmVhLng7XG5cdHRoaXMub2Zmc2V0WSAtPSBmaWx0ZXJBcmVhLnk7XG5cblx0XG5cdHZhciBzaXplWCA9IHRoaXMud2lkdGg7XG5cdHZhciBzaXplWSA9IHRoaXMuaGVpZ2h0O1xuXHRcblx0dmFyIG9mZnNldFggPSAwO1xuXHR2YXIgb2Zmc2V0WSA9IDA7XG5cdFxuXHR2YXIgYnVmZmVyID0gdGhpcy5idWZmZXI7XG5cdFxuXHQvLyB0aW1lIHRvIHJlbmRlciB0aGUgZmlsdGVycyB0ZXh0dXJlIHRvIHRoZSBwcmV2aW91cyBzY2VuZVxuXHRpZih0aGlzLmZpbHRlclN0YWNrLmxlbmd0aCA9PT0gMClcblx0e1xuXHRcdGdsLmNvbG9yTWFzayh0cnVlLCB0cnVlLCB0cnVlLCB0aGlzLnRyYW5zcGFyZW50KTsgXG5cdH1cblx0ZWxzZVxuXHR7XG5cdFx0dmFyIGN1cnJlbnRGaWx0ZXIgPSB0aGlzLmZpbHRlclN0YWNrW3RoaXMuZmlsdGVyU3RhY2subGVuZ3RoLTFdO1xuXHRcdHZhciBmaWx0ZXJBcmVhID0gY3VycmVudEZpbHRlci50YXJnZXQuZmlsdGVyQXJlYTtcblx0XHRcblx0XHRzaXplWCA9IGZpbHRlckFyZWEud2lkdGg7XG5cdFx0c2l6ZVkgPSBmaWx0ZXJBcmVhLmhlaWdodDtcblx0XHRcblx0XHRvZmZzZXRYID0gZmlsdGVyQXJlYS54O1xuXHRcdG9mZnNldFkgPSBmaWx0ZXJBcmVhLnk7XG5cdFx0XG5cdFx0YnVmZmVyID0gIGN1cnJlbnRGaWx0ZXIuX2dsRmlsdGVyVGV4dHVyZS5mcmFtZUJ1ZmZlcjtcblx0fVxuXHRcblx0XG5cblx0Ly8gVE9ETyBuZWVkIHRvcmVtb3ZlIHRoZWFzZSBnbG9iYWwgZWxlbWVudHMuLlxuXHRQSVhJLnByb2plY3Rpb24ueCA9IHNpemVYLzI7XG5cdFBJWEkucHJvamVjdGlvbi55ID0gLXNpemVZLzI7XG5cblx0UElYSS5vZmZzZXQueCA9IG9mZnNldFg7XG5cdFBJWEkub2Zmc2V0LnkgPSBvZmZzZXRZOyBcblx0XG5cblx0dmFyIGZpbHRlckFyZWEgPSAgZmlsdGVyQmxvY2sudGFyZ2V0LmZpbHRlckFyZWE7XG5cdHZhciB4ID0gZmlsdGVyQXJlYS54LW9mZnNldFg7XG5cdHZhciB5ID0gZmlsdGVyQXJlYS55LW9mZnNldFk7XG5cdFxuXHQvLyB1cGRhdGUgdGhlIGJ1ZmZlcnMuLlx0XG5cdC8vIG1ha2Ugc3VyZSB0byBmbGlwIHRoZSB5IVxuXHRnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgdGhpcy52ZXJ0ZXhCdWZmZXIpO1xuXHRcblx0dGhpcy52ZXJ0ZXhBcnJheVswXSA9IHg7XG5cdHRoaXMudmVydGV4QXJyYXlbMV0gPSB5ICsgZmlsdGVyQXJlYS5oZWlnaHQ7XG5cdFxuXHR0aGlzLnZlcnRleEFycmF5WzJdID0geCArIGZpbHRlckFyZWEud2lkdGg7XG5cdHRoaXMudmVydGV4QXJyYXlbM10gPSB5ICsgZmlsdGVyQXJlYS5oZWlnaHQ7XG5cdFxuXHR0aGlzLnZlcnRleEFycmF5WzRdID0geDtcblx0dGhpcy52ZXJ0ZXhBcnJheVs1XSA9IHk7XG5cdFxuXHR0aGlzLnZlcnRleEFycmF5WzZdID0geCArIGZpbHRlckFyZWEud2lkdGg7XG5cdHRoaXMudmVydGV4QXJyYXlbN10gPSB5O1xuXG5cdGdsLmJ1ZmZlclN1YkRhdGEoZ2wuQVJSQVlfQlVGRkVSLCAwLCB0aGlzLnZlcnRleEFycmF5KTtcblx0XG5cdGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB0aGlzLnV2QnVmZmVyKTtcblxuXHR0aGlzLnV2QXJyYXlbMl0gPSBmaWx0ZXJBcmVhLndpZHRoL3RoaXMud2lkdGg7XG5cdHRoaXMudXZBcnJheVs1XSA9IGZpbHRlckFyZWEuaGVpZ2h0L3RoaXMuaGVpZ2h0O1xuXHR0aGlzLnV2QXJyYXlbNl0gPSBmaWx0ZXJBcmVhLndpZHRoL3RoaXMud2lkdGg7XG5cdHRoaXMudXZBcnJheVs3XSA9IGZpbHRlckFyZWEuaGVpZ2h0L3RoaXMuaGVpZ2h0O1xuXHRcblx0Z2wuYnVmZmVyU3ViRGF0YShnbC5BUlJBWV9CVUZGRVIsIDAsIHRoaXMudXZBcnJheSk7XG5cblx0Z2wudmlld3BvcnQoMCwgMCwgc2l6ZVgsIHNpemVZKTtcdFxuXHQvLyBiaW5kIHRoZSBidWZmZXJcblx0Z2wuYmluZEZyYW1lYnVmZmVyKGdsLkZSQU1FQlVGRkVSLCBidWZmZXIgKTtcblx0XG5cdC8vIHNldCB0ZXh0dXJlXG4gICAgZ2wuYWN0aXZlVGV4dHVyZShnbC5URVhUVVJFMCk7XG5cdGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsIHRleHR1cmUudGV4dHVyZSk7XG5cdFxuXHQvLyBhcHBseSFcblx0Ly9maWx0ZXIuYXBwbHlGaWx0ZXJQYXNzKHNpemVYLCBzaXplWSk7XG5cdHRoaXMuYXBwbHlGaWx0ZXJQYXNzKGZpbHRlciwgZmlsdGVyQXJlYSwgc2l6ZVgsIHNpemVZKTtcblxuXHQvLyBub3cgcmVzdG9yZSB0aGUgcmVndWxhciBzaGFkZXIuLlxuICAgIGdsLnVzZVByb2dyYW0oUElYSS5kZWZhdWx0U2hhZGVyLnByb2dyYW0pO1xuXHRnbC51bmlmb3JtMmYoUElYSS5kZWZhdWx0U2hhZGVyLnByb2plY3Rpb25WZWN0b3IsIHNpemVYLzIsIC1zaXplWS8yKTtcblx0Z2wudW5pZm9ybTJmKFBJWEkuZGVmYXVsdFNoYWRlci5vZmZzZXRWZWN0b3IsIC1vZmZzZXRYLCAtb2Zmc2V0WSk7XG5cblx0Ly8gcmV0dXJuIHRoZSB0ZXh0dXJlIHRvIHRoZSBwb29sXG5cdHRoaXMudGV4dHVyZVBvb2wucHVzaCh0ZXh0dXJlKTtcblx0ZmlsdGVyQmxvY2suX2dsRmlsdGVyVGV4dHVyZSA9IG51bGw7XHRcbn1cblxuUElYSS5XZWJHTEZpbHRlck1hbmFnZXIucHJvdG90eXBlLmFwcGx5RmlsdGVyUGFzcyA9IGZ1bmN0aW9uKGZpbHRlciwgZmlsdGVyQXJlYSwgd2lkdGgsIGhlaWdodClcbntcblx0Ly8gdXNlIHByb2dyYW1cblx0dmFyIGdsID0gUElYSS5nbDtcblxuXHRpZighZmlsdGVyLnNoYWRlcilcblx0e1xuXHRcdHZhciBzaGFkZXIgPSBuZXcgUElYSS5QaXhpU2hhZGVyKCk7XG5cdFx0XHRcdFxuXHRcdHNoYWRlci5mcmFnbWVudFNyYyA9IGZpbHRlci5mcmFnbWVudFNyYztcblx0XHRzaGFkZXIudW5pZm9ybXMgPSBmaWx0ZXIudW5pZm9ybXM7XG5cdFx0c2hhZGVyLmluaXQoKTtcblx0XHRcblx0XHRmaWx0ZXIuc2hhZGVyID0gc2hhZGVyO1xuXHR9XG5cblx0dmFyIHNoYWRlciA9IGZpbHRlci5zaGFkZXI7XG5cdFxuXHQvLyBzZXQgdGhlIHNoYWRlclxuXHRnbC51c2VQcm9ncmFtKHNoYWRlci5wcm9ncmFtKTtcblxuXHRnbC51bmlmb3JtMmYoc2hhZGVyLnByb2plY3Rpb25WZWN0b3IsIHdpZHRoLzIsIC1oZWlnaHQvMik7XG5cdGdsLnVuaWZvcm0yZihzaGFkZXIub2Zmc2V0VmVjdG9yLCAwLDApXG5cblx0aWYoZmlsdGVyLnVuaWZvcm1zLmRpbWVuc2lvbnMpXG5cdHtcblx0XHQvL2NvbnNvbGUubG9nKGZpbHRlci51bmlmb3Jtcy5kaW1lbnNpb25zKVxuXHRcdGZpbHRlci51bmlmb3Jtcy5kaW1lbnNpb25zLnZhbHVlWzBdID0gdGhpcy53aWR0aDsvL3dpZHRoO1xuXHRcdGZpbHRlci51bmlmb3Jtcy5kaW1lbnNpb25zLnZhbHVlWzFdID0gdGhpcy5oZWlnaHQ7Ly9oZWlnaHQ7XG5cdFx0ZmlsdGVyLnVuaWZvcm1zLmRpbWVuc2lvbnMudmFsdWVbMl0gPSB0aGlzLnZlcnRleEFycmF5WzBdO1xuXHRcdGZpbHRlci51bmlmb3Jtcy5kaW1lbnNpb25zLnZhbHVlWzNdID0gdGhpcy52ZXJ0ZXhBcnJheVs1XTsvL2ZpbHRlckFyZWEuaGVpZ2h0O1xuXHQvL1x0Y29uc29sZS5sb2codGhpcy52ZXJ0ZXhBcnJheVs1XSlcblx0fVxuXG5cdHNoYWRlci5zeW5jVW5pZm9ybXMoKTtcblx0XG5cdGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB0aGlzLnZlcnRleEJ1ZmZlcik7XG4gICAgZ2wudmVydGV4QXR0cmliUG9pbnRlcihzaGFkZXIuYVZlcnRleFBvc2l0aW9uLCAyLCBnbC5GTE9BVCwgZmFsc2UsIDAsIDApO1xuICAgXG4gICBcdGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB0aGlzLnV2QnVmZmVyKTtcbiAgICBnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHNoYWRlci5hVGV4dHVyZUNvb3JkLCAyLCBnbC5GTE9BVCwgZmFsc2UsIDAsIDApO1xuXHRcbiAgICBnbC5iaW5kQnVmZmVyKGdsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLCB0aGlzLmluZGV4QnVmZmVyKTtcbiAgICBcblx0Ly8gZHJhdyB0aGUgZmlsdGVyLi4uXG4gICAgZ2wuZHJhd0VsZW1lbnRzKGdsLlRSSUFOR0xFUywgNiwgZ2wuVU5TSUdORURfU0hPUlQsIDAgKTtcbn1cblxuUElYSS5XZWJHTEZpbHRlck1hbmFnZXIucHJvdG90eXBlLmluaXRTaGFkZXJCdWZmZXJzID0gZnVuY3Rpb24oKVxue1xuXHR2YXIgZ2wgPSBQSVhJLmdsO1xuXHRcblx0Ly8gY3JlYXRlIHNvbWUgYnVmZmVyc1xuXHR0aGlzLnZlcnRleEJ1ZmZlciA9IGdsLmNyZWF0ZUJ1ZmZlcigpO1x0XG5cdHRoaXMudXZCdWZmZXIgPSBnbC5jcmVhdGVCdWZmZXIoKTtcblx0dGhpcy5pbmRleEJ1ZmZlciA9IGdsLmNyZWF0ZUJ1ZmZlcigpO1xuXHRcblx0Ly8gYmluZCBhbmQgdXBsb2FkIHRoZSB2ZXJ0ZXhzLi5cblx0Ly8ga2VlcCBhIHJlZmZlcmFuY2UgdG8gdGhlIHZlcnRleEZsb2F0RGF0YS4uXG5cdHRoaXMudmVydGV4QXJyYXkgPSBuZXcgRmxvYXQzMkFycmF5KFswLjAsIDAuMCwgXG5cdFx0XHRcdFx0XHRcdFx0ICAgICAgICAgMS4wLCAwLjAsIFxuXHRcdFx0XHRcdFx0XHRcdCAgICAgICAgIDAuMCwgMS4wLCBcblx0XHRcdFx0XHRcdFx0XHQgICAgICAgICAxLjAsIDEuMF0pO1xuXHRcblx0Z2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHRoaXMudmVydGV4QnVmZmVyKTtcblx0Z2wuYnVmZmVyRGF0YShcbiAgICBnbC5BUlJBWV9CVUZGRVIsIFxuICAgIHRoaXMudmVydGV4QXJyYXksIFxuICAgIGdsLlNUQVRJQ19EUkFXKTtcbiAgICBcbiAgICBcbiAgICAvLyBiaW5kIGFuZCB1cGxvYWQgdGhlIHV2IGJ1ZmZlclxuXHR0aGlzLnV2QXJyYXkgPSBuZXcgRmxvYXQzMkFycmF5KFswLjAsIDAuMCwgXG5cdFx0XHRcdFx0XHRcdFx0ICAgICAxLjAsIDAuMCwgXG5cdFx0XHRcdFx0XHRcdFx0ICAgICAwLjAsIDEuMCwgXG5cdFx0XHRcdFx0XHRcdFx0ICAgICAxLjAsIDEuMF0pO1xuXHRcdFx0XHRcdFx0XHRcdCAgICAgICAgIFxuXHRnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgdGhpcy51dkJ1ZmZlcik7XG5cdGdsLmJ1ZmZlckRhdGEoXG4gICAgZ2wuQVJSQVlfQlVGRkVSLCBcbiAgICB0aGlzLnV2QXJyYXksIFxuICAgIGdsLlNUQVRJQ19EUkFXKTtcbiAgICBcblx0Ly8gYmluZCBhbmQgdXBsb2FkIHRoZSBpbmRleFxuXHRnbC5iaW5kQnVmZmVyKGdsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLCB0aGlzLmluZGV4QnVmZmVyKTtcblx0Z2wuYnVmZmVyRGF0YShcbiAgICBnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgXG4gICAgbmV3IFVpbnQxNkFycmF5KFswLCAxLCAyLCAxLCAzLCAyXSksIFxuICAgIGdsLlNUQVRJQ19EUkFXKTtcbn1cblxuUElYSS5XZWJHTEZpbHRlck1hbmFnZXIucHJvdG90eXBlLmdldEJvdW5kcyA9IGZ1bmN0aW9uKGRpc3BsYXlPYmplY3QpXG57XG5cdC8vIHRpbWUgdG8gZ2V0IHRoZSB3aWR0aCBhbmQgaGVpZ2h0IG9mIHRoZSBvYmplY3QhXG5cdHZhciB3b3JsZFRyYW5zZm9ybSwgd2lkdGgsIGhlaWdodCwgYVgsIGFZLCB3MCwgdzEsIGgwLCBoMSwgaW5kZXgsIGRvVGVzdDtcblx0dmFyIGEsIGIsIGMsIGQsIHR4LCB0eSwgeDEsIHgyLCB4MywgeDQsIHkxLCB5MiwgeTMsIHk0O1xuXG5cdHZhciB0ZW1wT2JqZWN0ID0gZGlzcGxheU9iamVjdC5maXJzdDtcblx0dmFyIHRlc3RPYmplY3QgPSBkaXNwbGF5T2JqZWN0Lmxhc3QuX2lOZXh0O1xuXHRcblx0dmFyIG1heFggPSAtSW5maW5pdHk7XG5cdHZhciBtYXhZID0gLUluZmluaXR5O1xuXHRcblx0dmFyIG1pblggPSBJbmZpbml0eTtcblx0dmFyIG1pblkgPSBJbmZpbml0eTtcblx0XG5cdGRvXHRcblx0e1xuXHRcdC8vIFRPRE8gY2FuIGJlIG9wdGltaXplZCEgLSB3aGF0IGlmIHRoZXJlIGlzIG5vIHNjYWxlIC8gcm90YXRpb24/XG5cdFx0XG5cdFx0aWYodGVtcE9iamVjdC52aXNpYmxlKVxuXHRcdHtcblx0XHRcdGlmKHRlbXBPYmplY3QgaW5zdGFuY2VvZiBQSVhJLlNwcml0ZSlcblx0XHRcdHtcblx0XHRcdFx0d2lkdGggPSB0ZW1wT2JqZWN0LnRleHR1cmUuZnJhbWUud2lkdGg7XG5cdFx0XHRcdGhlaWdodCA9IHRlbXBPYmplY3QudGV4dHVyZS5mcmFtZS5oZWlnaHQ7XG5cblx0XHRcdFx0Ly8gVE9ETyB0cmltPz9cblx0XHRcdFx0YVggPSB0ZW1wT2JqZWN0LmFuY2hvci54O1xuXHRcdFx0XHRhWSA9IHRlbXBPYmplY3QuYW5jaG9yLnk7XG5cdFx0XHRcdHcwID0gd2lkdGggKiAoMS1hWCk7XG5cdFx0XHRcdHcxID0gd2lkdGggKiAtYVg7XG5cblx0XHRcdFx0aDAgPSBoZWlnaHQgKiAoMS1hWSk7XG5cdFx0XHRcdGgxID0gaGVpZ2h0ICogLWFZO1xuXG5cdFx0XHRcdGRvVGVzdCA9IHRydWU7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIGlmKHRlbXBPYmplY3QgaW5zdGFuY2VvZiBQSVhJLkdyYXBoaWNzKVxuXHRcdFx0e1xuXHRcdFx0XHR0ZW1wT2JqZWN0LnVwZGF0ZUZpbHRlckJvdW5kcygpO1xuXG5cdFx0XHRcdHZhciBib3VuZHMgPSB0ZW1wT2JqZWN0LmJvdW5kcztcblxuXHRcdFx0XHR3aWR0aCA9IGJvdW5kcy53aWR0aDtcblx0XHRcdFx0aGVpZ2h0ID0gYm91bmRzLmhlaWdodDtcblxuXHRcdFx0XHR3MCA9IGJvdW5kcy54XG5cdFx0XHRcdHcxID0gYm91bmRzLnggKyBib3VuZHMud2lkdGg7XG5cblx0XHRcdFx0aDAgPSBib3VuZHMueVxuXHRcdFx0XHRoMSA9IGJvdW5kcy55ICsgYm91bmRzLmhlaWdodDtcblxuXHRcdFx0XHRkb1Rlc3QgPSB0cnVlO1x0XG5cdFx0XHR9XG5cdFx0fVxuXHRcdFxuXHRcdGlmKGRvVGVzdClcblx0XHR7XG5cdFx0XHR3b3JsZFRyYW5zZm9ybSA9IHRlbXBPYmplY3Qud29ybGRUcmFuc2Zvcm07XG5cblx0XHRcdGEgPSB3b3JsZFRyYW5zZm9ybVswXTtcblx0XHRcdGIgPSB3b3JsZFRyYW5zZm9ybVszXTtcblx0XHRcdGMgPSB3b3JsZFRyYW5zZm9ybVsxXTtcblx0XHRcdGQgPSB3b3JsZFRyYW5zZm9ybVs0XTtcblx0XHRcdHR4ID0gd29ybGRUcmFuc2Zvcm1bMl07XG5cdFx0XHR0eSA9IHdvcmxkVHJhbnNmb3JtWzVdO1xuXG5cdFx0XHR4MSA9IGEgKiB3MSArIGMgKiBoMSArIHR4OyBcblx0XHRcdHkxID0gZCAqIGgxICsgYiAqIHcxICsgdHk7XG5cblx0XHRcdHgyID0gYSAqIHcwICsgYyAqIGgxICsgdHg7IFxuXHRcdFx0eTIgPSBkICogaDEgKyBiICogdzAgKyB0eTsgXG5cblx0XHRcdHgzID0gYSAqIHcwICsgYyAqIGgwICsgdHg7IFxuXHRcdFx0eTMgPSBkICogaDAgKyBiICogdzAgKyB0eTsgXG5cblx0XHRcdHg0ID0gIGEgKiB3MSArIGMgKiBoMCArIHR4OyBcblx0XHRcdHk0ID0gIGQgKiBoMCArIGIgKiB3MSArIHR5OyBcblxuXHRcdFx0bWluWCA9IHgxIDwgbWluWCA/IHgxIDogbWluWDtcblx0XHRcdG1pblggPSB4MiA8IG1pblggPyB4MiA6IG1pblg7XG5cdFx0XHRtaW5YID0geDMgPCBtaW5YID8geDMgOiBtaW5YO1xuXHRcdFx0bWluWCA9IHg0IDwgbWluWCA/IHg0IDogbWluWDtcblx0XHRcdFxuXHRcdFx0bWluWSA9IHkxIDwgbWluWSA/IHkxIDogbWluWTtcblx0XHRcdG1pblkgPSB5MiA8IG1pblkgPyB5MiA6IG1pblk7XG5cdFx0XHRtaW5ZID0geTMgPCBtaW5ZID8geTMgOiBtaW5ZO1xuXHRcdFx0bWluWSA9IHk0IDwgbWluWSA/IHk0IDogbWluWTtcblx0XHRcdFxuXHRcdFx0bWF4WCA9IHgxID4gbWF4WCA/IHgxIDogbWF4WDtcblx0XHRcdG1heFggPSB4MiA+IG1heFggPyB4MiA6IG1heFg7XG5cdFx0XHRtYXhYID0geDMgPiBtYXhYID8geDMgOiBtYXhYO1xuXHRcdFx0bWF4WCA9IHg0ID4gbWF4WCA/IHg0IDogbWF4WDtcblx0XHRcdFxuXHRcdFx0bWF4WSA9IHkxID4gbWF4WSA/IHkxIDogbWF4WTtcblx0XHRcdG1heFkgPSB5MiA+IG1heFkgPyB5MiA6IG1heFk7XG5cdFx0XHRtYXhZID0geTMgPiBtYXhZID8geTMgOiBtYXhZO1xuXHRcdFx0bWF4WSA9IHk0ID4gbWF4WSA/IHk0IDogbWF4WTtcblx0XHR9XG5cblx0XHRkb1Rlc3QgPSBmYWxzZTtcblx0XHR0ZW1wT2JqZWN0ID0gdGVtcE9iamVjdC5faU5leHQ7XG5cblx0fVxuXHR3aGlsZSh0ZW1wT2JqZWN0ICE9IHRlc3RPYmplY3QpXG5cdFxuXHQvLyBtYXhpbXVtIGJvdW5kcyBpcyB0aGUgc2l6ZSBvZiB0aGUgc2NyZWVuLi5cblx0Ly9taW5YID0gbWluWCA+IDAgPyBtaW5YIDogMDtcblx0Ly9taW5ZID0gbWluWSA+IDAgPyBtaW5ZIDogMDtcblxuXHRkaXNwbGF5T2JqZWN0LmZpbHRlckFyZWEueCA9IG1pblg7XG5cdGRpc3BsYXlPYmplY3QuZmlsdGVyQXJlYS55ID0gbWluWTtcblxuLy9cdGNvbnNvbGUubG9nKG1heFgrIFwiIDogXCIgKyBtaW5YKVxuXHRkaXNwbGF5T2JqZWN0LmZpbHRlckFyZWEud2lkdGggPSBtYXhYIC0gbWluWDtcblx0ZGlzcGxheU9iamVjdC5maWx0ZXJBcmVhLmhlaWdodCA9IG1heFkgLSBtaW5ZO1xufVxuXG5QSVhJLkZpbHRlclRleHR1cmUgPSBmdW5jdGlvbih3aWR0aCwgaGVpZ2h0KVxue1xuXHR2YXIgZ2wgPSBQSVhJLmdsO1xuXHRcbiAgICAvLyBuZXh0IHRpbWUgdG8gY3JlYXRlIGEgZnJhbWUgYnVmZmVyIGFuZCB0ZXh0dXJlXG5cdHRoaXMuZnJhbWVCdWZmZXIgPSBnbC5jcmVhdGVGcmFtZWJ1ZmZlcigpO1xuICAgIHRoaXMudGV4dHVyZSA9IGdsLmNyZWF0ZVRleHR1cmUoKTtcblxuICAgIGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsICB0aGlzLnRleHR1cmUpO1xuICAgIGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9NQUdfRklMVEVSLCBnbC5MSU5FQVIpO1xuXHRnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfTUlOX0ZJTFRFUiwgZ2wuTElORUFSKTtcblx0Z2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX1dSQVBfUywgZ2wuQ0xBTVBfVE9fRURHRSk7XG5cdGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9XUkFQX1QsIGdsLkNMQU1QX1RPX0VER0UpO1xuXHRnbC5iaW5kRnJhbWVidWZmZXIoZ2wuRlJBTUVCVUZGRVIsIHRoaXMuZnJhbWVidWZmZXIgKTtcblx0XG5cdGdsLmJpbmRGcmFtZWJ1ZmZlcihnbC5GUkFNRUJVRkZFUiwgdGhpcy5mcmFtZUJ1ZmZlciApO1xuXHRnbC5mcmFtZWJ1ZmZlclRleHR1cmUyRChnbC5GUkFNRUJVRkZFUiwgZ2wuQ09MT1JfQVRUQUNITUVOVDAsIGdsLlRFWFRVUkVfMkQsIHRoaXMudGV4dHVyZSwgMCk7XG5cdFxuXHR0aGlzLnJlc2l6ZSh3aWR0aCwgaGVpZ2h0KTtcbn1cblxuUElYSS5GaWx0ZXJUZXh0dXJlLnByb3RvdHlwZS5yZXNpemUgPSBmdW5jdGlvbih3aWR0aCwgaGVpZ2h0KVxue1xuXHR0aGlzLndpZHRoID0gd2lkdGg7XG5cdHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xuXG5cdHZhciBnbCA9IFBJWEkuZ2w7XG5cblx0Z2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgIHRoaXMudGV4dHVyZSk7XG5cdGdsLnRleEltYWdlMkQoZ2wuVEVYVFVSRV8yRCwgMCwgZ2wuUkdCQSwgIHdpZHRoLCBoZWlnaHQsIDAsIGdsLlJHQkEsIGdsLlVOU0lHTkVEX0JZVEUsIG51bGwpO1xuXHRcbn1cbi8qKlxuICogQGF1dGhvciBNYXQgR3JvdmVzIGh0dHA6Ly9tYXRncm92ZXMuY29tLyBARG9vcm1hdDIzXG4gKi9cblxuXG4vKipcbiAqIHRoZSBDYW52YXNSZW5kZXJlciBkcmF3cyB0aGUgc3RhZ2UgYW5kIGFsbCBpdHMgY29udGVudCBvbnRvIGEgMmQgY2FudmFzLiBUaGlzIHJlbmRlcmVyIHNob3VsZCBiZSB1c2VkIGZvciBicm93c2VycyB0aGF0IGRvIG5vdCBzdXBwb3J0IHdlYkdMLlxuICogRG9udCBmb3JnZXQgdG8gYWRkIHRoZSB2aWV3IHRvIHlvdXIgRE9NIG9yIHlvdSB3aWxsIG5vdCBzZWUgYW55dGhpbmcgOilcbiAqXG4gKiBAY2xhc3MgQ2FudmFzUmVuZGVyZXJcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHdpZHRoPTAge051bWJlcn0gdGhlIHdpZHRoIG9mIHRoZSBjYW52YXMgdmlld1xuICogQHBhcmFtIGhlaWdodD0wIHtOdW1iZXJ9IHRoZSBoZWlnaHQgb2YgdGhlIGNhbnZhcyB2aWV3XG4gKiBAcGFyYW0gdmlldyB7Q2FudmFzfSB0aGUgY2FudmFzIHRvIHVzZSBhcyBhIHZpZXcsIG9wdGlvbmFsXG4gKiBAcGFyYW0gdHJhbnNwYXJlbnQ9ZmFsc2Uge0Jvb2xlYW59IHRoZSB0cmFuc3BhcmVuY3kgb2YgdGhlIHJlbmRlciB2aWV3LCBkZWZhdWx0IGZhbHNlXG4gKi9cblBJWEkuQ2FudmFzUmVuZGVyZXIgPSBmdW5jdGlvbih3aWR0aCwgaGVpZ2h0LCB2aWV3LCB0cmFuc3BhcmVudClcbntcblx0dGhpcy50cmFuc3BhcmVudCA9IHRyYW5zcGFyZW50O1xuXG5cdC8qKlxuXHQgKiBUaGUgd2lkdGggb2YgdGhlIGNhbnZhcyB2aWV3XG5cdCAqXG5cdCAqIEBwcm9wZXJ0eSB3aWR0aFxuXHQgKiBAdHlwZSBOdW1iZXJcblx0ICogQGRlZmF1bHQgODAwXG5cdCAqL1xuXHR0aGlzLndpZHRoID0gd2lkdGggfHwgODAwO1xuXG5cdC8qKlxuXHQgKiBUaGUgaGVpZ2h0IG9mIHRoZSBjYW52YXMgdmlld1xuXHQgKlxuXHQgKiBAcHJvcGVydHkgaGVpZ2h0XG5cdCAqIEB0eXBlIE51bWJlclxuXHQgKiBAZGVmYXVsdCA2MDBcblx0ICovXG5cdHRoaXMuaGVpZ2h0ID0gaGVpZ2h0IHx8IDYwMDtcblxuXHQvKipcblx0ICogVGhlIGNhbnZhcyBlbGVtZW50IHRoYXQgdGhlIGV2ZXJ5dGhpbmcgaXMgZHJhd24gdG9cblx0ICpcblx0ICogQHByb3BlcnR5IHZpZXdcblx0ICogQHR5cGUgQ2FudmFzXG5cdCAqL1xuXHR0aGlzLnZpZXcgPSB2aWV3IHx8IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICdjYW52YXMnICk7XG5cblx0LyoqXG5cdCAqIFRoZSBjYW52YXMgY29udGV4dCB0aGF0IHRoZSBldmVyeXRoaW5nIGlzIGRyYXduIHRvXG5cdCAqIEBwcm9wZXJ0eSBjb250ZXh0XG5cdCAqIEB0eXBlIENhbnZhcyAyZCBDb250ZXh0XG5cdCAqL1xuXHR0aGlzLmNvbnRleHQgPSB0aGlzLnZpZXcuZ2V0Q29udGV4dChcIjJkXCIpO1xuXG5cdHRoaXMucmVmcmVzaCA9IHRydWU7XG5cdC8vIGhhY2sgdG8gZW5hYmxlIHNvbWUgaGFyZHdhcmUgYWNjZWxlcmF0aW9uIVxuXHQvL3RoaXMudmlldy5zdHlsZVtcInRyYW5zZm9ybVwiXSA9IFwidHJhbnNsYXRleigwKVwiO1xuXHRcbiAgICB0aGlzLnZpZXcud2lkdGggPSB0aGlzLndpZHRoO1xuXHR0aGlzLnZpZXcuaGVpZ2h0ID0gdGhpcy5oZWlnaHQ7ICBcblx0dGhpcy5jb3VudCA9IDA7XG59XG5cbi8vIGNvbnN0cnVjdG9yXG5QSVhJLkNhbnZhc1JlbmRlcmVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFBJWEkuQ2FudmFzUmVuZGVyZXI7XG5cbi8qKlxuICogUmVuZGVycyB0aGUgc3RhZ2UgdG8gaXRzIGNhbnZhcyB2aWV3XG4gKlxuICogQG1ldGhvZCByZW5kZXJcbiAqIEBwYXJhbSBzdGFnZSB7U3RhZ2V9IHRoZSBTdGFnZSBlbGVtZW50IHRvIGJlIHJlbmRlcmVkXG4gKi9cblBJWEkuQ2FudmFzUmVuZGVyZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uKHN0YWdlKVxue1xuXHRcblx0Ly9zdGFnZS5fX2NoaWxkcmVuQWRkZWQgPSBbXTtcblx0Ly9zdGFnZS5fX2NoaWxkcmVuUmVtb3ZlZCA9IFtdO1xuXHRcblx0Ly8gdXBkYXRlIHRleHR1cmVzIGlmIG5lZWQgYmVcblx0UElYSS50ZXh0dXJlc1RvVXBkYXRlID0gW107XG5cdFBJWEkudGV4dHVyZXNUb0Rlc3Ryb3kgPSBbXTtcblx0XG5cdFBJWEkudmlzaWJsZUNvdW50Kys7XG5cdHN0YWdlLnVwZGF0ZVRyYW5zZm9ybSgpO1xuXHRcblx0Ly8gdXBkYXRlIHRoZSBiYWNrZ3JvdW5kIGNvbG9yXG5cdGlmKHRoaXMudmlldy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IhPXN0YWdlLmJhY2tncm91bmRDb2xvclN0cmluZyAmJiAhdGhpcy50cmFuc3BhcmVudCl0aGlzLnZpZXcuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gc3RhZ2UuYmFja2dyb3VuZENvbG9yU3RyaW5nO1xuXG5cdHRoaXMuY29udGV4dC5zZXRUcmFuc2Zvcm0oMSwwLDAsMSwwLDApOyBcblx0dGhpcy5jb250ZXh0LmNsZWFyUmVjdCgwLCAwLCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodClcbiAgICB0aGlzLnJlbmRlckRpc3BsYXlPYmplY3Qoc3RhZ2UpO1xuICAgIC8vYXNcbiAgIFxuICAgIC8vIHJ1biBpbnRlcmFjdGlvbiFcblx0aWYoc3RhZ2UuaW50ZXJhY3RpdmUpXG5cdHtcblx0XHQvL25lZWQgdG8gYWRkIHNvbWUgZXZlbnRzIVxuXHRcdGlmKCFzdGFnZS5faW50ZXJhY3RpdmVFdmVudHNBZGRlZClcblx0XHR7XG5cdFx0XHRzdGFnZS5faW50ZXJhY3RpdmVFdmVudHNBZGRlZCA9IHRydWU7XG5cdFx0XHRzdGFnZS5pbnRlcmFjdGlvbk1hbmFnZXIuc2V0VGFyZ2V0KHRoaXMpO1xuXHRcdH1cblx0fVxuXHRcblx0Ly8gcmVtb3ZlIGZyYW1lIHVwZGF0ZXMuLlxuXHRpZihQSVhJLlRleHR1cmUuZnJhbWVVcGRhdGVzLmxlbmd0aCA+IDApXG5cdHtcblx0XHRQSVhJLlRleHR1cmUuZnJhbWVVcGRhdGVzID0gW107XG5cdH1cblx0XG5cdFxufVxuXG4vKipcbiAqIHJlc2l6ZXMgdGhlIGNhbnZhcyB2aWV3IHRvIHRoZSBzcGVjaWZpZWQgd2lkdGggYW5kIGhlaWdodFxuICpcbiAqIEBtZXRob2QgcmVzaXplXG4gKiBAcGFyYW0gd2lkdGgge051bWJlcn0gdGhlIG5ldyB3aWR0aCBvZiB0aGUgY2FudmFzIHZpZXdcbiAqIEBwYXJhbSBoZWlnaHQge051bWJlcn0gdGhlIG5ldyBoZWlnaHQgb2YgdGhlIGNhbnZhcyB2aWV3XG4gKi9cblBJWEkuQ2FudmFzUmVuZGVyZXIucHJvdG90eXBlLnJlc2l6ZSA9IGZ1bmN0aW9uKHdpZHRoLCBoZWlnaHQpXG57XG5cdHRoaXMud2lkdGggPSB3aWR0aDtcblx0dGhpcy5oZWlnaHQgPSBoZWlnaHQ7XG5cdFxuXHR0aGlzLnZpZXcud2lkdGggPSB3aWR0aDtcblx0dGhpcy52aWV3LmhlaWdodCA9IGhlaWdodDtcbn1cblxuLyoqXG4gKiBSZW5kZXJzIGEgZGlzcGxheSBvYmplY3RcbiAqXG4gKiBAbWV0aG9kIHJlbmRlckRpc3BsYXlPYmplY3RcbiAqIEBwYXJhbSBkaXNwbGF5T2JqZWN0IHtEaXNwbGF5T2JqZWN0fSBUaGUgZGlzcGxheU9iamVjdCB0byByZW5kZXJcbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuQ2FudmFzUmVuZGVyZXIucHJvdG90eXBlLnJlbmRlckRpc3BsYXlPYmplY3QgPSBmdW5jdGlvbihkaXNwbGF5T2JqZWN0KVxue1xuXHQvLyBubyBsb2dlciByZWN1cnJzaXZlIVxuXHR2YXIgdHJhbnNmb3JtO1xuXHR2YXIgY29udGV4dCA9IHRoaXMuY29udGV4dDtcblx0XG5cdGNvbnRleHQuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gJ3NvdXJjZS1vdmVyJztcblx0XG5cdC8vIG9uZSB0aGUgZGlzcGxheSBvYmplY3QgaGl0cyB0aGlzLiB3ZSBjYW4gYnJlYWsgdGhlIGxvb3BcdFxuXHR2YXIgdGVzdE9iamVjdCA9IGRpc3BsYXlPYmplY3QubGFzdC5faU5leHQ7XG5cdGRpc3BsYXlPYmplY3QgPSBkaXNwbGF5T2JqZWN0LmZpcnN0O1xuXHRcblx0ZG9cdFxuXHR7XG5cdFx0dHJhbnNmb3JtID0gZGlzcGxheU9iamVjdC53b3JsZFRyYW5zZm9ybTtcblx0XHRcblx0XHRpZighZGlzcGxheU9iamVjdC52aXNpYmxlKVxuXHRcdHtcblx0XHRcdGRpc3BsYXlPYmplY3QgPSBkaXNwbGF5T2JqZWN0Lmxhc3QuX2lOZXh0O1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXHRcdFxuXHRcdGlmKCFkaXNwbGF5T2JqZWN0LnJlbmRlcmFibGUpXG5cdFx0e1xuXHRcdFx0ZGlzcGxheU9iamVjdCA9IGRpc3BsYXlPYmplY3QuX2lOZXh0O1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXHRcdFxuXHRcdGlmKGRpc3BsYXlPYmplY3QgaW5zdGFuY2VvZiBQSVhJLlNwcml0ZSlcblx0XHR7XG5cdFx0XHRcdFxuXHRcdFx0dmFyIGZyYW1lID0gZGlzcGxheU9iamVjdC50ZXh0dXJlLmZyYW1lO1xuXHRcdFx0XG5cdFx0XHRpZihmcmFtZSAmJiBmcmFtZS53aWR0aCAmJiBmcmFtZS5oZWlnaHQpXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnRleHQuZ2xvYmFsQWxwaGEgPSBkaXNwbGF5T2JqZWN0LndvcmxkQWxwaGE7XG5cdFx0XHRcdFxuXHRcdFx0XHRjb250ZXh0LnNldFRyYW5zZm9ybSh0cmFuc2Zvcm1bMF0sIHRyYW5zZm9ybVszXSwgdHJhbnNmb3JtWzFdLCB0cmFuc2Zvcm1bNF0sIHRyYW5zZm9ybVsyXSwgdHJhbnNmb3JtWzVdKTtcblx0XHRcdFx0XHRcblx0XHRcdFx0Y29udGV4dC5kcmF3SW1hZ2UoZGlzcGxheU9iamVjdC50ZXh0dXJlLmJhc2VUZXh0dXJlLnNvdXJjZSwgXG5cdFx0XHRcdFx0XHRcdFx0ICAgZnJhbWUueCxcblx0XHRcdFx0XHRcdFx0XHQgICBmcmFtZS55LFxuXHRcdFx0XHRcdFx0XHRcdCAgIGZyYW1lLndpZHRoLFxuXHRcdFx0XHRcdFx0XHRcdCAgIGZyYW1lLmhlaWdodCxcblx0XHRcdFx0XHRcdFx0XHQgICAoZGlzcGxheU9iamVjdC5hbmNob3IueCkgKiAtZnJhbWUud2lkdGgsIFxuXHRcdFx0XHRcdFx0XHRcdCAgIChkaXNwbGF5T2JqZWN0LmFuY2hvci55KSAqIC1mcmFtZS5oZWlnaHQsXG5cdFx0XHRcdFx0XHRcdFx0ICAgZnJhbWUud2lkdGgsXG5cdFx0XHRcdFx0XHRcdFx0ICAgZnJhbWUuaGVpZ2h0KTtcblx0XHRcdH1cdFx0XHRcdFx0ICAgXG5cdCAgIFx0fVxuXHQgICBcdGVsc2UgaWYoZGlzcGxheU9iamVjdCBpbnN0YW5jZW9mIFBJWEkuU3RyaXApXG5cdFx0e1xuXHRcdFx0Y29udGV4dC5zZXRUcmFuc2Zvcm0odHJhbnNmb3JtWzBdLCB0cmFuc2Zvcm1bM10sIHRyYW5zZm9ybVsxXSwgdHJhbnNmb3JtWzRdLCB0cmFuc2Zvcm1bMl0sIHRyYW5zZm9ybVs1XSlcblx0XHRcdHRoaXMucmVuZGVyU3RyaXAoZGlzcGxheU9iamVjdCk7XG5cdFx0fVxuXHRcdGVsc2UgaWYoZGlzcGxheU9iamVjdCBpbnN0YW5jZW9mIFBJWEkuVGlsaW5nU3ByaXRlKVxuXHRcdHtcblx0XHRcdGNvbnRleHQuc2V0VHJhbnNmb3JtKHRyYW5zZm9ybVswXSwgdHJhbnNmb3JtWzNdLCB0cmFuc2Zvcm1bMV0sIHRyYW5zZm9ybVs0XSwgdHJhbnNmb3JtWzJdLCB0cmFuc2Zvcm1bNV0pXG5cdFx0XHR0aGlzLnJlbmRlclRpbGluZ1Nwcml0ZShkaXNwbGF5T2JqZWN0KTtcblx0XHR9XG5cdFx0ZWxzZSBpZihkaXNwbGF5T2JqZWN0IGluc3RhbmNlb2YgUElYSS5DdXN0b21SZW5kZXJhYmxlKVxuXHRcdHtcblx0XHRcdGNvbnRleHQuc2V0VHJhbnNmb3JtKHRyYW5zZm9ybVswXSwgdHJhbnNmb3JtWzNdLCB0cmFuc2Zvcm1bMV0sIHRyYW5zZm9ybVs0XSwgdHJhbnNmb3JtWzJdLCB0cmFuc2Zvcm1bNV0pO1xuXHRcdFx0ZGlzcGxheU9iamVjdC5yZW5kZXJDYW52YXModGhpcyk7XG5cdFx0fVxuXHRcdGVsc2UgaWYoZGlzcGxheU9iamVjdCBpbnN0YW5jZW9mIFBJWEkuR3JhcGhpY3MpXG5cdFx0e1xuXHRcdFx0Y29udGV4dC5zZXRUcmFuc2Zvcm0odHJhbnNmb3JtWzBdLCB0cmFuc2Zvcm1bM10sIHRyYW5zZm9ybVsxXSwgdHJhbnNmb3JtWzRdLCB0cmFuc2Zvcm1bMl0sIHRyYW5zZm9ybVs1XSlcblx0XHRcdFBJWEkuQ2FudmFzR3JhcGhpY3MucmVuZGVyR3JhcGhpY3MoZGlzcGxheU9iamVjdCwgY29udGV4dCk7XG5cdFx0fVxuXHRcdGVsc2UgaWYoZGlzcGxheU9iamVjdCBpbnN0YW5jZW9mIFBJWEkuRmlsdGVyQmxvY2spXG5cdFx0e1xuXHRcdFx0aWYoZGlzcGxheU9iamVjdC5kYXRhIGluc3RhbmNlb2YgUElYSS5HcmFwaGljcylcbiBcdFx0XHR7XG5cdFx0XHRcdHZhciBtYXNrID0gZGlzcGxheU9iamVjdC5kYXRhO1xuXG5cdFx0XHRcdGlmKGRpc3BsYXlPYmplY3Qub3Blbilcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnRleHQuc2F2ZSgpO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdHZhciBjYWNoZUFscGhhID0gbWFzay5hbHBoYTtcblx0XHRcdFx0XHR2YXIgbWFza1RyYW5zZm9ybSA9IG1hc2sud29ybGRUcmFuc2Zvcm07XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Y29udGV4dC5zZXRUcmFuc2Zvcm0obWFza1RyYW5zZm9ybVswXSwgbWFza1RyYW5zZm9ybVszXSwgbWFza1RyYW5zZm9ybVsxXSwgbWFza1RyYW5zZm9ybVs0XSwgbWFza1RyYW5zZm9ybVsyXSwgbWFza1RyYW5zZm9ybVs1XSlcblx0XHRcdFx0XHRcblx0XHRcdFx0XHRtYXNrLndvcmxkQWxwaGEgPSAwLjU7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Y29udGV4dC53b3JsZEFscGhhID0gMDtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHRQSVhJLkNhbnZhc0dyYXBoaWNzLnJlbmRlckdyYXBoaWNzTWFzayhtYXNrLCBjb250ZXh0KTtcblx0XHRcdFx0XHRjb250ZXh0LmNsaXAoKTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHRtYXNrLndvcmxkQWxwaGEgPSBjYWNoZUFscGhhO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2Vcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbnRleHQucmVzdG9yZSgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRlbHNlXG5cdFx0XHR7XG5cdFx0XHRcdC8vIG9ubHkgbWFza3Mgc3VwcG9ydGVkIHJpZ2h0IG5vdyFcblx0XHRcdH1cblx0XHR9XG5cdC8vXHRjb3VudCsrXG5cdFx0ZGlzcGxheU9iamVjdCA9IGRpc3BsYXlPYmplY3QuX2lOZXh0O1xuXHRcdFxuXHRcdFxuXHR9XG5cdHdoaWxlKGRpc3BsYXlPYmplY3QgIT0gdGVzdE9iamVjdClcblxuXHRcbn1cblxuLyoqXG4gKiBSZW5kZXJzIGEgZmxhdCBzdHJpcFxuICpcbiAqIEBtZXRob2QgcmVuZGVyU3RyaXBGbGF0XG4gKiBAcGFyYW0gc3RyaXAge1N0cmlwfSBUaGUgU3RyaXAgdG8gcmVuZGVyXG4gKiBAcHJpdmF0ZVxuICovXG5QSVhJLkNhbnZhc1JlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXJTdHJpcEZsYXQgPSBmdW5jdGlvbihzdHJpcClcbntcblx0dmFyIGNvbnRleHQgPSB0aGlzLmNvbnRleHQ7XG5cdHZhciB2ZXJ0aWNpZXMgPSBzdHJpcC52ZXJ0aWNpZXM7XG5cdHZhciB1dnMgPSBzdHJpcC51dnM7XG5cdFxuXHR2YXIgbGVuZ3RoID0gdmVydGljaWVzLmxlbmd0aC8yO1xuXHR0aGlzLmNvdW50Kys7XG5cdFxuXHRjb250ZXh0LmJlZ2luUGF0aCgpO1xuXHRmb3IgKHZhciBpPTE7IGkgPCBsZW5ndGgtMjsgaSsrKSBcblx0e1xuXHRcdFxuXHRcdC8vIGRyYXcgc29tZSB0cmlhbmdsZXMhXG5cdFx0dmFyIGluZGV4ID0gaSoyO1xuXHRcdFxuXHRcdCB2YXIgeDAgPSB2ZXJ0aWNpZXNbaW5kZXhdLCAgIHgxID0gdmVydGljaWVzW2luZGV4KzJdLCB4MiA9IHZlcnRpY2llc1tpbmRleCs0XTtcbiBcdFx0IHZhciB5MCA9IHZlcnRpY2llc1tpbmRleCsxXSwgeTEgPSB2ZXJ0aWNpZXNbaW5kZXgrM10sIHkyID0gdmVydGljaWVzW2luZGV4KzVdO1xuIFx0XHQgXG5cdFx0Y29udGV4dC5tb3ZlVG8oeDAsIHkwKTtcblx0XHRjb250ZXh0LmxpbmVUbyh4MSwgeTEpO1xuXHRcdGNvbnRleHQubGluZVRvKHgyLCB5Mik7XG5cdFx0XG5cdH07XHRcblx0XG5cdGNvbnRleHQuZmlsbFN0eWxlID0gXCIjRkYwMDAwXCI7XG5cdGNvbnRleHQuZmlsbCgpO1xuXHRjb250ZXh0LmNsb3NlUGF0aCgpO1xufVxuXG4vKipcbiAqIFJlbmRlcnMgYSB0aWxpbmcgc3ByaXRlXG4gKlxuICogQG1ldGhvZCByZW5kZXJUaWxpbmdTcHJpdGVcbiAqIEBwYXJhbSBzcHJpdGUge1RpbGluZ1Nwcml0ZX0gVGhlIHRpbGluZ3Nwcml0ZSB0byByZW5kZXJcbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuQ2FudmFzUmVuZGVyZXIucHJvdG90eXBlLnJlbmRlclRpbGluZ1Nwcml0ZSA9IGZ1bmN0aW9uKHNwcml0ZSlcbntcblx0dmFyIGNvbnRleHQgPSB0aGlzLmNvbnRleHQ7XG5cdFxuXHRjb250ZXh0Lmdsb2JhbEFscGhhID0gc3ByaXRlLndvcmxkQWxwaGE7XG5cdFxuIFx0aWYoIXNwcml0ZS5fX3RpbGVQYXR0ZXJuKSBzcHJpdGUuX190aWxlUGF0dGVybiA9IGNvbnRleHQuY3JlYXRlUGF0dGVybihzcHJpdGUudGV4dHVyZS5iYXNlVGV4dHVyZS5zb3VyY2UsIFwicmVwZWF0XCIpO1xuIFx0XG5cdGNvbnRleHQuYmVnaW5QYXRoKCk7XG5cdFxuXHR2YXIgdGlsZVBvc2l0aW9uID0gc3ByaXRlLnRpbGVQb3NpdGlvbjtcblx0dmFyIHRpbGVTY2FsZSA9IHNwcml0ZS50aWxlU2NhbGU7XG5cdFxuICAgIC8vIG9mZnNldFxuICAgIGNvbnRleHQuc2NhbGUodGlsZVNjYWxlLngsdGlsZVNjYWxlLnkpO1xuICAgIGNvbnRleHQudHJhbnNsYXRlKHRpbGVQb3NpdGlvbi54LCB0aWxlUG9zaXRpb24ueSk7XG4gXHRcblx0Y29udGV4dC5maWxsU3R5bGUgPSBzcHJpdGUuX190aWxlUGF0dGVybjtcblx0Y29udGV4dC5maWxsUmVjdCgtdGlsZVBvc2l0aW9uLngsLXRpbGVQb3NpdGlvbi55LHNwcml0ZS53aWR0aCAvIHRpbGVTY2FsZS54LCBzcHJpdGUuaGVpZ2h0IC8gdGlsZVNjYWxlLnkpO1xuXHRcblx0Y29udGV4dC5zY2FsZSgxL3RpbGVTY2FsZS54LCAxL3RpbGVTY2FsZS55KTtcbiAgICBjb250ZXh0LnRyYW5zbGF0ZSgtdGlsZVBvc2l0aW9uLngsIC10aWxlUG9zaXRpb24ueSk7XG4gICAgXG4gICAgY29udGV4dC5jbG9zZVBhdGgoKTtcbn1cblxuLyoqXG4gKiBSZW5kZXJzIGEgc3RyaXBcbiAqXG4gKiBAbWV0aG9kIHJlbmRlclN0cmlwXG4gKiBAcGFyYW0gc3RyaXAge1N0cmlwfSBUaGUgU3RyaXAgdG8gcmVuZGVyXG4gKiBAcHJpdmF0ZVxuICovXG5QSVhJLkNhbnZhc1JlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXJTdHJpcCA9IGZ1bmN0aW9uKHN0cmlwKVxue1xuXHR2YXIgY29udGV4dCA9IHRoaXMuY29udGV4dDtcblxuXHQvLyBkcmF3IHRyaWFuZ2xlcyEhXG5cdHZhciB2ZXJ0aWNpZXMgPSBzdHJpcC52ZXJ0aWNpZXM7XG5cdHZhciB1dnMgPSBzdHJpcC51dnM7XG5cdFxuXHR2YXIgbGVuZ3RoID0gdmVydGljaWVzLmxlbmd0aC8yO1xuXHR0aGlzLmNvdW50Kys7XG5cdGZvciAodmFyIGk9MTsgaSA8IGxlbmd0aC0yOyBpKyspIFxuXHR7XG5cdFx0XG5cdFx0Ly8gZHJhdyBzb21lIHRyaWFuZ2xlcyFcblx0XHR2YXIgaW5kZXggPSBpKjI7XG5cdFx0XG5cdFx0IHZhciB4MCA9IHZlcnRpY2llc1tpbmRleF0sICAgeDEgPSB2ZXJ0aWNpZXNbaW5kZXgrMl0sIHgyID0gdmVydGljaWVzW2luZGV4KzRdO1xuIFx0XHQgdmFyIHkwID0gdmVydGljaWVzW2luZGV4KzFdLCB5MSA9IHZlcnRpY2llc1tpbmRleCszXSwgeTIgPSB2ZXJ0aWNpZXNbaW5kZXgrNV07XG4gXHRcdCBcbiAgXHRcdCB2YXIgdTAgPSB1dnNbaW5kZXhdICogc3RyaXAudGV4dHVyZS53aWR0aCwgICB1MSA9IHV2c1tpbmRleCsyXSAqIHN0cmlwLnRleHR1cmUud2lkdGgsIHUyID0gdXZzW2luZGV4KzRdKiBzdHJpcC50ZXh0dXJlLndpZHRoO1xuICAgXHRcdCB2YXIgdjAgPSB1dnNbaW5kZXgrMV0qIHN0cmlwLnRleHR1cmUuaGVpZ2h0LCB2MSA9IHV2c1tpbmRleCszXSAqIHN0cmlwLnRleHR1cmUuaGVpZ2h0LCB2MiA9IHV2c1tpbmRleCs1XSogc3RyaXAudGV4dHVyZS5oZWlnaHQ7XG5cblxuXHRcdGNvbnRleHQuc2F2ZSgpO1xuXHRcdGNvbnRleHQuYmVnaW5QYXRoKCk7XG5cdFx0Y29udGV4dC5tb3ZlVG8oeDAsIHkwKTtcblx0XHRjb250ZXh0LmxpbmVUbyh4MSwgeTEpO1xuXHRcdGNvbnRleHQubGluZVRvKHgyLCB5Mik7XG5cdFx0Y29udGV4dC5jbG9zZVBhdGgoKTtcblx0XHRcblx0XHRjb250ZXh0LmNsaXAoKTtcblx0XHRcblx0XHRcbiAgICAgICAgLy8gQ29tcHV0ZSBtYXRyaXggdHJhbnNmb3JtXG4gICAgICAgIHZhciBkZWx0YSA9IHUwKnYxICsgdjAqdTIgKyB1MSp2MiAtIHYxKnUyIC0gdjAqdTEgLSB1MCp2MjtcbiAgICAgICAgdmFyIGRlbHRhX2EgPSB4MCp2MSArIHYwKngyICsgeDEqdjIgLSB2MSp4MiAtIHYwKngxIC0geDAqdjI7XG4gICAgICAgIHZhciBkZWx0YV9iID0gdTAqeDEgKyB4MCp1MiArIHUxKngyIC0geDEqdTIgLSB4MCp1MSAtIHUwKngyO1xuICAgICAgICB2YXIgZGVsdGFfYyA9IHUwKnYxKngyICsgdjAqeDEqdTIgKyB4MCp1MSp2MiAtIHgwKnYxKnUyIC0gdjAqdTEqeDIgLSB1MCp4MSp2MjtcbiAgICAgICAgdmFyIGRlbHRhX2QgPSB5MCp2MSArIHYwKnkyICsgeTEqdjIgLSB2MSp5MiAtIHYwKnkxIC0geTAqdjI7XG4gICAgICAgIHZhciBkZWx0YV9lID0gdTAqeTEgKyB5MCp1MiArIHUxKnkyIC0geTEqdTIgLSB5MCp1MSAtIHUwKnkyO1xuICAgICAgICB2YXIgZGVsdGFfZiA9IHUwKnYxKnkyICsgdjAqeTEqdTIgKyB5MCp1MSp2MiAtIHkwKnYxKnUyIC0gdjAqdTEqeTIgLSB1MCp5MSp2Mjtcblx0XHRcblx0XHRcblx0XHRcblx0XHQgICAgXG4gICAgICAgIGNvbnRleHQudHJhbnNmb3JtKGRlbHRhX2EvZGVsdGEsIGRlbHRhX2QvZGVsdGEsXG4gICAgICAgICAgICAgICAgICAgICAgZGVsdGFfYi9kZWx0YSwgZGVsdGFfZS9kZWx0YSxcbiAgICAgICAgICAgICAgICAgICAgICBkZWx0YV9jL2RlbHRhLCBkZWx0YV9mL2RlbHRhKTtcbiAgICAgICAgICAgICAgICAgXG5cdFx0Y29udGV4dC5kcmF3SW1hZ2Uoc3RyaXAudGV4dHVyZS5iYXNlVGV4dHVyZS5zb3VyY2UsIDAsIDApO1xuXHQgIFx0Y29udGV4dC5yZXN0b3JlKCk7XG5cdH07XG5cdFxufVxuXG4vKipcbiAqIEBhdXRob3IgTWF0IEdyb3ZlcyBodHRwOi8vbWF0Z3JvdmVzLmNvbS8gQERvb3JtYXQyM1xuICovXG5cblxuLyoqXG4gKiBBIHNldCBvZiBmdW5jdGlvbnMgdXNlZCBieSB0aGUgY2FudmFzIHJlbmRlcmVyIHRvIGRyYXcgdGhlIHByaW1pdGl2ZSBncmFwaGljcyBkYXRhXG4gKlxuICogQGNsYXNzIENhbnZhc0dyYXBoaWNzXG4gKi9cblBJWEkuQ2FudmFzR3JhcGhpY3MgPSBmdW5jdGlvbigpXG57XG5cbn1cblxuXG4vKlxuICogUmVuZGVycyB0aGUgZ3JhcGhpY3Mgb2JqZWN0XG4gKlxuICogQHN0YXRpY1xuICogQHByaXZhdGVcbiAqIEBtZXRob2QgcmVuZGVyR3JhcGhpY3NcbiAqIEBwYXJhbSBncmFwaGljcyB7R3JhcGhpY3N9XG4gKiBAcGFyYW0gY29udGV4dCB7Q29udGV4dDJEfVxuICovXG5QSVhJLkNhbnZhc0dyYXBoaWNzLnJlbmRlckdyYXBoaWNzID0gZnVuY3Rpb24oZ3JhcGhpY3MsIGNvbnRleHQpXG57XG5cdHZhciB3b3JsZEFscGhhID0gZ3JhcGhpY3Mud29ybGRBbHBoYTtcblxuXHRmb3IgKHZhciBpPTA7IGkgPCBncmFwaGljcy5ncmFwaGljc0RhdGEubGVuZ3RoOyBpKyspXG5cdHtcblx0XHR2YXIgZGF0YSA9IGdyYXBoaWNzLmdyYXBoaWNzRGF0YVtpXTtcblx0XHR2YXIgcG9pbnRzID0gZGF0YS5wb2ludHM7XG5cblx0XHRjb250ZXh0LnN0cm9rZVN0eWxlID0gY29sb3IgPSAnIycgKyAoJzAwMDAwJyArICggZGF0YS5saW5lQ29sb3IgfCAwKS50b1N0cmluZygxNikpLnN1YnN0cigtNik7XG5cblx0XHRjb250ZXh0LmxpbmVXaWR0aCA9IGRhdGEubGluZVdpZHRoO1xuXG5cdFx0aWYoZGF0YS50eXBlID09IFBJWEkuR3JhcGhpY3MuUE9MWSlcblx0XHR7XG5cdFx0XHRjb250ZXh0LmJlZ2luUGF0aCgpO1xuXG5cdFx0XHRjb250ZXh0Lm1vdmVUbyhwb2ludHNbMF0sIHBvaW50c1sxXSk7XG5cblx0XHRcdGZvciAodmFyIGo9MTsgaiA8IHBvaW50cy5sZW5ndGgvMjsgaisrKVxuXHRcdFx0e1xuXHRcdFx0XHRjb250ZXh0LmxpbmVUbyhwb2ludHNbaiAqIDJdLCBwb2ludHNbaiAqIDIgKyAxXSk7XG5cdFx0XHR9XG5cblx0ICAgICAgXHQvLyBpZiB0aGUgZmlyc3QgYW5kIGxhc3QgcG9pbnQgYXJlIHRoZSBzYW1lIGNsb3NlIHRoZSBwYXRoIC0gbXVjaCBuZWF0ZXIgOilcblx0ICAgICAgXHRpZihwb2ludHNbMF0gPT0gcG9pbnRzW3BvaW50cy5sZW5ndGgtMl0gJiYgcG9pbnRzWzFdID09IHBvaW50c1twb2ludHMubGVuZ3RoLTFdKVxuXHQgICAgICBcdHtcblx0ICAgICAgXHRcdGNvbnRleHQuY2xvc2VQYXRoKCk7XG5cdCAgICAgIFx0fVxuXG5cdFx0XHRpZihkYXRhLmZpbGwpXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnRleHQuZ2xvYmFsQWxwaGEgPSBkYXRhLmZpbGxBbHBoYSAqIHdvcmxkQWxwaGE7XG5cdFx0XHRcdGNvbnRleHQuZmlsbFN0eWxlID0gY29sb3IgPSAnIycgKyAoJzAwMDAwJyArICggZGF0YS5maWxsQ29sb3IgfCAwKS50b1N0cmluZygxNikpLnN1YnN0cigtNik7XG4gICAgICBcdFx0XHRjb250ZXh0LmZpbGwoKTtcblx0XHRcdH1cblx0XHRcdGlmKGRhdGEubGluZVdpZHRoKVxuXHRcdFx0e1xuXHRcdFx0XHRjb250ZXh0Lmdsb2JhbEFscGhhID0gZGF0YS5saW5lQWxwaGEgKiB3b3JsZEFscGhhO1xuICAgICAgXHRcdFx0Y29udGV4dC5zdHJva2UoKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0ZWxzZSBpZihkYXRhLnR5cGUgPT0gUElYSS5HcmFwaGljcy5SRUNUKVxuXHRcdHtcblxuXHRcdFx0aWYoZGF0YS5maWxsQ29sb3IgfHwgZGF0YS5maWxsQ29sb3IgPT09IDApXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnRleHQuZ2xvYmFsQWxwaGEgPSBkYXRhLmZpbGxBbHBoYSAqIHdvcmxkQWxwaGE7XG5cdFx0XHRcdGNvbnRleHQuZmlsbFN0eWxlID0gY29sb3IgPSAnIycgKyAoJzAwMDAwJyArICggZGF0YS5maWxsQ29sb3IgfCAwKS50b1N0cmluZygxNikpLnN1YnN0cigtNik7XG5cdFx0XHRcdGNvbnRleHQuZmlsbFJlY3QocG9pbnRzWzBdLCBwb2ludHNbMV0sIHBvaW50c1syXSwgcG9pbnRzWzNdKTtcblxuXHRcdFx0fVxuXHRcdFx0aWYoZGF0YS5saW5lV2lkdGgpXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnRleHQuZ2xvYmFsQWxwaGEgPSBkYXRhLmxpbmVBbHBoYSAqIHdvcmxkQWxwaGE7XG5cdFx0XHRcdGNvbnRleHQuc3Ryb2tlUmVjdChwb2ludHNbMF0sIHBvaW50c1sxXSwgcG9pbnRzWzJdLCBwb2ludHNbM10pO1xuXHRcdFx0fVxuXG5cdFx0fVxuXHRcdGVsc2UgaWYoZGF0YS50eXBlID09IFBJWEkuR3JhcGhpY3MuQ0lSQylcblx0XHR7XG5cdFx0XHQvLyBUT0RPIC0gbmVlZCB0byBiZSBVbmRlZmluZWQhXG4gICAgICBcdFx0Y29udGV4dC5iZWdpblBhdGgoKTtcblx0XHRcdGNvbnRleHQuYXJjKHBvaW50c1swXSwgcG9pbnRzWzFdLCBwb2ludHNbMl0sMCwyKk1hdGguUEkpO1xuXHRcdFx0Y29udGV4dC5jbG9zZVBhdGgoKTtcblxuXHRcdFx0aWYoZGF0YS5maWxsKVxuXHRcdFx0e1xuXHRcdFx0XHRjb250ZXh0Lmdsb2JhbEFscGhhID0gZGF0YS5maWxsQWxwaGEgKiB3b3JsZEFscGhhO1xuXHRcdFx0XHRjb250ZXh0LmZpbGxTdHlsZSA9IGNvbG9yID0gJyMnICsgKCcwMDAwMCcgKyAoIGRhdGEuZmlsbENvbG9yIHwgMCkudG9TdHJpbmcoMTYpKS5zdWJzdHIoLTYpO1xuICAgICAgXHRcdFx0Y29udGV4dC5maWxsKCk7XG5cdFx0XHR9XG5cdFx0XHRpZihkYXRhLmxpbmVXaWR0aClcblx0XHRcdHtcblx0XHRcdFx0Y29udGV4dC5nbG9iYWxBbHBoYSA9IGRhdGEubGluZUFscGhhICogd29ybGRBbHBoYTtcbiAgICAgIFx0XHRcdGNvbnRleHQuc3Ryb2tlKCk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGVsc2UgaWYoZGF0YS50eXBlID09IFBJWEkuR3JhcGhpY3MuRUxJUClcblx0XHR7XG5cblx0XHRcdC8vIGVsaXBzZSBjb2RlIHRha2VuIGZyb206IGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMjE3Mjc5OC9ob3ctdG8tZHJhdy1hbi1vdmFsLWluLWh0bWw1LWNhbnZhc1xuXG5cdFx0XHR2YXIgZWxpcHNlRGF0YSA9ICBkYXRhLnBvaW50cztcblxuXHRcdFx0dmFyIHcgPSBlbGlwc2VEYXRhWzJdICogMjtcblx0XHRcdHZhciBoID0gZWxpcHNlRGF0YVszXSAqIDI7XG5cblx0XHRcdHZhciB4ID0gZWxpcHNlRGF0YVswXSAtIHcvMjtcblx0XHRcdHZhciB5ID0gZWxpcHNlRGF0YVsxXSAtIGgvMjtcblxuICAgICAgXHRcdGNvbnRleHQuYmVnaW5QYXRoKCk7XG5cblx0XHRcdHZhciBrYXBwYSA9IC41NTIyODQ4LFxuXHRcdFx0b3ggPSAodyAvIDIpICoga2FwcGEsIC8vIGNvbnRyb2wgcG9pbnQgb2Zmc2V0IGhvcml6b250YWxcblx0XHRcdG95ID0gKGggLyAyKSAqIGthcHBhLCAvLyBjb250cm9sIHBvaW50IG9mZnNldCB2ZXJ0aWNhbFxuXHRcdFx0eGUgPSB4ICsgdywgICAgICAgICAgIC8vIHgtZW5kXG5cdFx0XHR5ZSA9IHkgKyBoLCAgICAgICAgICAgLy8geS1lbmRcblx0XHRcdHhtID0geCArIHcgLyAyLCAgICAgICAvLyB4LW1pZGRsZVxuXHRcdFx0eW0gPSB5ICsgaCAvIDI7ICAgICAgIC8vIHktbWlkZGxlXG5cblx0XHRcdGNvbnRleHQubW92ZVRvKHgsIHltKTtcblx0XHRcdGNvbnRleHQuYmV6aWVyQ3VydmVUbyh4LCB5bSAtIG95LCB4bSAtIG94LCB5LCB4bSwgeSk7XG5cdFx0XHRjb250ZXh0LmJlemllckN1cnZlVG8oeG0gKyBveCwgeSwgeGUsIHltIC0gb3ksIHhlLCB5bSk7XG5cdFx0XHRjb250ZXh0LmJlemllckN1cnZlVG8oeGUsIHltICsgb3ksIHhtICsgb3gsIHllLCB4bSwgeWUpO1xuXHRcdFx0Y29udGV4dC5iZXppZXJDdXJ2ZVRvKHhtIC0gb3gsIHllLCB4LCB5bSArIG95LCB4LCB5bSk7XG5cblx0XHRcdGNvbnRleHQuY2xvc2VQYXRoKCk7XG5cblx0XHRcdGlmKGRhdGEuZmlsbClcblx0XHRcdHtcblx0XHRcdFx0Y29udGV4dC5nbG9iYWxBbHBoYSA9IGRhdGEuZmlsbEFscGhhICogd29ybGRBbHBoYTtcblx0XHRcdFx0Y29udGV4dC5maWxsU3R5bGUgPSBjb2xvciA9ICcjJyArICgnMDAwMDAnICsgKCBkYXRhLmZpbGxDb2xvciB8IDApLnRvU3RyaW5nKDE2KSkuc3Vic3RyKC02KTtcbiAgICAgIFx0XHRcdGNvbnRleHQuZmlsbCgpO1xuXHRcdFx0fVxuXHRcdFx0aWYoZGF0YS5saW5lV2lkdGgpXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnRleHQuZ2xvYmFsQWxwaGEgPSBkYXRhLmxpbmVBbHBoYSAqIHdvcmxkQWxwaGE7XG4gICAgICBcdFx0XHRjb250ZXh0LnN0cm9rZSgpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHR9O1xufVxuXG4vKlxuICogUmVuZGVycyBhIGdyYXBoaWNzIG1hc2tcbiAqXG4gKiBAc3RhdGljXG4gKiBAcHJpdmF0ZVxuICogQG1ldGhvZCByZW5kZXJHcmFwaGljc01hc2tcbiAqIEBwYXJhbSBncmFwaGljcyB7R3JhcGhpY3N9XG4gKiBAcGFyYW0gY29udGV4dCB7Q29udGV4dDJEfVxuICovXG5QSVhJLkNhbnZhc0dyYXBoaWNzLnJlbmRlckdyYXBoaWNzTWFzayA9IGZ1bmN0aW9uKGdyYXBoaWNzLCBjb250ZXh0KVxue1xuXHR2YXIgd29ybGRBbHBoYSA9IGdyYXBoaWNzLndvcmxkQWxwaGE7XG5cblx0dmFyIGxlbiA9IGdyYXBoaWNzLmdyYXBoaWNzRGF0YS5sZW5ndGg7XG5cdGlmKGxlbiA9PT0gMClyZXR1cm47XG5cblx0aWYobGVuID4gMSlcblx0e1xuXHRcdGxlbiA9IDE7XG5cdFx0Y29uc29sZS5sb2coXCJQaXhpLmpzIHdhcm5pbmc6IG1hc2tzIGluIGNhbnZhcyBjYW4gb25seSBtYXNrIHVzaW5nIHRoZSBmaXJzdCBwYXRoIGluIHRoZSBncmFwaGljcyBvYmplY3RcIilcblx0fVxuXG5cdGZvciAodmFyIGk9MDsgaSA8IDE7IGkrKylcblx0e1xuXHRcdHZhciBkYXRhID0gZ3JhcGhpY3MuZ3JhcGhpY3NEYXRhW2ldO1xuXHRcdHZhciBwb2ludHMgPSBkYXRhLnBvaW50cztcblxuXHRcdGlmKGRhdGEudHlwZSA9PSBQSVhJLkdyYXBoaWNzLlBPTFkpXG5cdFx0e1xuXHRcdFx0Y29udGV4dC5iZWdpblBhdGgoKTtcblx0XHRcdGNvbnRleHQubW92ZVRvKHBvaW50c1swXSwgcG9pbnRzWzFdKTtcblxuXHRcdFx0Zm9yICh2YXIgaj0xOyBqIDwgcG9pbnRzLmxlbmd0aC8yOyBqKyspXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnRleHQubGluZVRvKHBvaW50c1tqICogMl0sIHBvaW50c1tqICogMiArIDFdKTtcblx0XHRcdH1cblxuXHQgICAgICBcdC8vIGlmIHRoZSBmaXJzdCBhbmQgbGFzdCBwb2ludCBhcmUgdGhlIHNhbWUgY2xvc2UgdGhlIHBhdGggLSBtdWNoIG5lYXRlciA6KVxuXHQgICAgICBcdGlmKHBvaW50c1swXSA9PSBwb2ludHNbcG9pbnRzLmxlbmd0aC0yXSAmJiBwb2ludHNbMV0gPT0gcG9pbnRzW3BvaW50cy5sZW5ndGgtMV0pXG5cdCAgICAgIFx0e1xuXHQgICAgICBcdFx0Y29udGV4dC5jbG9zZVBhdGgoKTtcblx0ICAgICAgXHR9XG5cblx0XHR9XG5cdFx0ZWxzZSBpZihkYXRhLnR5cGUgPT0gUElYSS5HcmFwaGljcy5SRUNUKVxuXHRcdHtcblx0XHRcdGNvbnRleHQuYmVnaW5QYXRoKCk7XG5cdFx0XHRjb250ZXh0LnJlY3QocG9pbnRzWzBdLCBwb2ludHNbMV0sIHBvaW50c1syXSwgcG9pbnRzWzNdKTtcblx0XHRcdGNvbnRleHQuY2xvc2VQYXRoKCk7XG5cdFx0fVxuXHRcdGVsc2UgaWYoZGF0YS50eXBlID09IFBJWEkuR3JhcGhpY3MuQ0lSQylcblx0XHR7XG5cdFx0XHQvLyBUT0RPIC0gbmVlZCB0byBiZSBVbmRlZmluZWQhXG4gICAgICBcdFx0Y29udGV4dC5iZWdpblBhdGgoKTtcblx0XHRcdGNvbnRleHQuYXJjKHBvaW50c1swXSwgcG9pbnRzWzFdLCBwb2ludHNbMl0sMCwyKk1hdGguUEkpO1xuXHRcdFx0Y29udGV4dC5jbG9zZVBhdGgoKTtcblx0XHR9XG5cdFx0ZWxzZSBpZihkYXRhLnR5cGUgPT0gUElYSS5HcmFwaGljcy5FTElQKVxuXHRcdHtcblxuXHRcdFx0Ly8gZWxpcHNlIGNvZGUgdGFrZW4gZnJvbTogaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8yMTcyNzk4L2hvdy10by1kcmF3LWFuLW92YWwtaW4taHRtbDUtY2FudmFzXG5cdFx0XHR2YXIgZWxpcHNlRGF0YSA9ICBkYXRhLnBvaW50cztcblxuXHRcdFx0dmFyIHcgPSBlbGlwc2VEYXRhWzJdICogMjtcblx0XHRcdHZhciBoID0gZWxpcHNlRGF0YVszXSAqIDI7XG5cblx0XHRcdHZhciB4ID0gZWxpcHNlRGF0YVswXSAtIHcvMjtcblx0XHRcdHZhciB5ID0gZWxpcHNlRGF0YVsxXSAtIGgvMjtcblxuICAgICAgXHRcdGNvbnRleHQuYmVnaW5QYXRoKCk7XG5cblx0XHRcdHZhciBrYXBwYSA9IC41NTIyODQ4LFxuXHRcdFx0b3ggPSAodyAvIDIpICoga2FwcGEsIC8vIGNvbnRyb2wgcG9pbnQgb2Zmc2V0IGhvcml6b250YWxcblx0XHRcdG95ID0gKGggLyAyKSAqIGthcHBhLCAvLyBjb250cm9sIHBvaW50IG9mZnNldCB2ZXJ0aWNhbFxuXHRcdFx0eGUgPSB4ICsgdywgICAgICAgICAgIC8vIHgtZW5kXG5cdFx0XHR5ZSA9IHkgKyBoLCAgICAgICAgICAgLy8geS1lbmRcblx0XHRcdHhtID0geCArIHcgLyAyLCAgICAgICAvLyB4LW1pZGRsZVxuXHRcdFx0eW0gPSB5ICsgaCAvIDI7ICAgICAgIC8vIHktbWlkZGxlXG5cblx0XHRcdGNvbnRleHQubW92ZVRvKHgsIHltKTtcblx0XHRcdGNvbnRleHQuYmV6aWVyQ3VydmVUbyh4LCB5bSAtIG95LCB4bSAtIG94LCB5LCB4bSwgeSk7XG5cdFx0XHRjb250ZXh0LmJlemllckN1cnZlVG8oeG0gKyBveCwgeSwgeGUsIHltIC0gb3ksIHhlLCB5bSk7XG5cdFx0XHRjb250ZXh0LmJlemllckN1cnZlVG8oeGUsIHltICsgb3ksIHhtICsgb3gsIHllLCB4bSwgeWUpO1xuXHRcdFx0Y29udGV4dC5iZXppZXJDdXJ2ZVRvKHhtIC0gb3gsIHllLCB4LCB5bSArIG95LCB4LCB5bSk7XG5cdFx0XHRjb250ZXh0LmNsb3NlUGF0aCgpO1xuXHRcdH1cblxuXG5cdH07XG59XG5cbi8qKlxuICogQGF1dGhvciBNYXQgR3JvdmVzIGh0dHA6Ly9tYXRncm92ZXMuY29tLyBARG9vcm1hdDIzXG4gKi9cblxuXG4vKipcbiAqIFRoZSBHcmFwaGljcyBjbGFzcyBjb250YWlucyBhIHNldCBvZiBtZXRob2RzIHRoYXQgeW91IGNhbiB1c2UgdG8gY3JlYXRlIHByaW1pdGl2ZSBzaGFwZXMgYW5kIGxpbmVzLlxuICogSXQgaXMgaW1wb3J0YW50IHRvIGtub3cgdGhhdCB3aXRoIHRoZSB3ZWJHTCByZW5kZXJlciBvbmx5IHNpbXBsZSBwb2x5cyBjYW4gYmUgZmlsbGVkIGF0IHRoaXMgc3RhZ2VcbiAqIENvbXBsZXggcG9seXMgd2lsbCBub3QgYmUgZmlsbGVkLiBIZXJlcyBhbiBleGFtcGxlIG9mIGEgY29tcGxleCBwb2x5OiBodHRwOi8vd3d3Lmdvb2Rib3lkaWdpdGFsLmNvbS93cC1jb250ZW50L3VwbG9hZHMvMjAxMy8wNi9jb21wbGV4UG9seWdvbi5wbmdcbiAqXG4gKiBAY2xhc3MgR3JhcGhpY3NcbiAqIEBleHRlbmRzIERpc3BsYXlPYmplY3RDb250YWluZXJcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5QSVhJLkdyYXBoaWNzID0gZnVuY3Rpb24oKVxue1xuXHRQSVhJLkRpc3BsYXlPYmplY3RDb250YWluZXIuY2FsbCggdGhpcyApO1xuXG5cdHRoaXMucmVuZGVyYWJsZSA9IHRydWU7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYWxwaGEgb2YgdGhlIGZpbGwgb2YgdGhpcyBncmFwaGljcyBvYmplY3RcbiAgICAgKlxuICAgICAqIEBwcm9wZXJ0eSBmaWxsQWxwaGFcbiAgICAgKiBAdHlwZSBOdW1iZXJcbiAgICAgKi9cblx0dGhpcy5maWxsQWxwaGEgPSAxO1xuXG4gICAgLyoqXG4gICAgICogVGhlIHdpZHRoIG9mIGFueSBsaW5lcyBkcmF3blxuICAgICAqXG4gICAgICogQHByb3BlcnR5IGxpbmVXaWR0aFxuICAgICAqIEB0eXBlIE51bWJlclxuICAgICAqL1xuXHR0aGlzLmxpbmVXaWR0aCA9IDA7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgY29sb3Igb2YgYW55IGxpbmVzIGRyYXduXG4gICAgICpcbiAgICAgKiBAcHJvcGVydHkgbGluZUNvbG9yXG4gICAgICogQHR5cGUgU3RyaW5nXG4gICAgICovXG5cdHRoaXMubGluZUNvbG9yID0gXCJibGFja1wiO1xuXG4gICAgLyoqXG4gICAgICogR3JhcGhpY3MgZGF0YVxuICAgICAqXG4gICAgICogQHByb3BlcnR5IGdyYXBoaWNzRGF0YVxuICAgICAqIEB0eXBlIEFycmF5XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cblx0dGhpcy5ncmFwaGljc0RhdGEgPSBbXTtcblxuICAgIC8qKlxuICAgICAqIEN1cnJlbnQgcGF0aFxuICAgICAqXG4gICAgICogQHByb3BlcnR5IGN1cnJlbnRQYXRoXG4gICAgICogQHR5cGUgT2JqZWN0XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cblx0dGhpcy5jdXJyZW50UGF0aCA9IHtwb2ludHM6W119O1xufVxuXG4vLyBjb25zdHJ1Y3RvclxuUElYSS5HcmFwaGljcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBQSVhJLkRpc3BsYXlPYmplY3RDb250YWluZXIucHJvdG90eXBlICk7XG5QSVhJLkdyYXBoaWNzLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFBJWEkuR3JhcGhpY3M7XG5cbi8qKlxuICogU3BlY2lmaWVzIGEgbGluZSBzdHlsZSB1c2VkIGZvciBzdWJzZXF1ZW50IGNhbGxzIHRvIEdyYXBoaWNzIG1ldGhvZHMgc3VjaCBhcyB0aGUgbGluZVRvKCkgbWV0aG9kIG9yIHRoZSBkcmF3Q2lyY2xlKCkgbWV0aG9kLlxuICpcbiAqIEBtZXRob2QgbGluZVN0eWxlXG4gKiBAcGFyYW0gbGluZVdpZHRoIHtOdW1iZXJ9IHdpZHRoIG9mIHRoZSBsaW5lIHRvIGRyYXcsIHdpbGwgdXBkYXRlIHRoZSBvYmplY3QncyBzdG9yZWQgc3R5bGVcbiAqIEBwYXJhbSBjb2xvciB7TnVtYmVyfSBjb2xvciBvZiB0aGUgbGluZSB0byBkcmF3LCB3aWxsIHVwZGF0ZSB0aGUgb2JqZWN0J3Mgc3RvcmVkIHN0eWxlXG4gKiBAcGFyYW0gYWxwaGEge051bWJlcn0gYWxwaGEgb2YgdGhlIGxpbmUgdG8gZHJhdywgd2lsbCB1cGRhdGUgdGhlIG9iamVjdCdzIHN0b3JlZCBzdHlsZVxuICovXG5QSVhJLkdyYXBoaWNzLnByb3RvdHlwZS5saW5lU3R5bGUgPSBmdW5jdGlvbihsaW5lV2lkdGgsIGNvbG9yLCBhbHBoYSlcbntcblx0aWYodGhpcy5jdXJyZW50UGF0aC5wb2ludHMubGVuZ3RoID09IDApdGhpcy5ncmFwaGljc0RhdGEucG9wKCk7XG5cblx0dGhpcy5saW5lV2lkdGggPSBsaW5lV2lkdGggfHwgMDtcblx0dGhpcy5saW5lQ29sb3IgPSBjb2xvciB8fCAwO1xuXHR0aGlzLmxpbmVBbHBoYSA9IChhbHBoYSA9PSB1bmRlZmluZWQpID8gMSA6IGFscGhhO1xuXG5cdHRoaXMuY3VycmVudFBhdGggPSB7bGluZVdpZHRoOnRoaXMubGluZVdpZHRoLCBsaW5lQ29sb3I6dGhpcy5saW5lQ29sb3IsIGxpbmVBbHBoYTp0aGlzLmxpbmVBbHBoYSxcblx0XHRcdFx0XHRcdGZpbGxDb2xvcjp0aGlzLmZpbGxDb2xvciwgZmlsbEFscGhhOnRoaXMuZmlsbEFscGhhLCBmaWxsOnRoaXMuZmlsbGluZywgcG9pbnRzOltdLCB0eXBlOlBJWEkuR3JhcGhpY3MuUE9MWX07XG5cblx0dGhpcy5ncmFwaGljc0RhdGEucHVzaCh0aGlzLmN1cnJlbnRQYXRoKTtcbn1cblxuLyoqXG4gKiBNb3ZlcyB0aGUgY3VycmVudCBkcmF3aW5nIHBvc2l0aW9uIHRvICh4LCB5KS5cbiAqXG4gKiBAbWV0aG9kIG1vdmVUb1xuICogQHBhcmFtIHgge051bWJlcn0gdGhlIFggY29vcmQgdG8gbW92ZSB0b1xuICogQHBhcmFtIHkge051bWJlcn0gdGhlIFkgY29vcmQgdG8gbW92ZSB0b1xuICovXG5QSVhJLkdyYXBoaWNzLnByb3RvdHlwZS5tb3ZlVG8gPSBmdW5jdGlvbih4LCB5KVxue1xuXHRpZih0aGlzLmN1cnJlbnRQYXRoLnBvaW50cy5sZW5ndGggPT0gMCl0aGlzLmdyYXBoaWNzRGF0YS5wb3AoKTtcblxuXHR0aGlzLmN1cnJlbnRQYXRoID0gdGhpcy5jdXJyZW50UGF0aCA9IHtsaW5lV2lkdGg6dGhpcy5saW5lV2lkdGgsIGxpbmVDb2xvcjp0aGlzLmxpbmVDb2xvciwgbGluZUFscGhhOnRoaXMubGluZUFscGhhLFxuXHRcdFx0XHRcdFx0ZmlsbENvbG9yOnRoaXMuZmlsbENvbG9yLCBmaWxsQWxwaGE6dGhpcy5maWxsQWxwaGEsIGZpbGw6dGhpcy5maWxsaW5nLCBwb2ludHM6W10sIHR5cGU6UElYSS5HcmFwaGljcy5QT0xZfTtcblxuXHR0aGlzLmN1cnJlbnRQYXRoLnBvaW50cy5wdXNoKHgsIHkpO1xuXG5cdHRoaXMuZ3JhcGhpY3NEYXRhLnB1c2godGhpcy5jdXJyZW50UGF0aCk7XG59XG5cbi8qKlxuICogRHJhd3MgYSBsaW5lIHVzaW5nIHRoZSBjdXJyZW50IGxpbmUgc3R5bGUgZnJvbSB0aGUgY3VycmVudCBkcmF3aW5nIHBvc2l0aW9uIHRvICh4LCB5KTtcbiAqIHRoZSBjdXJyZW50IGRyYXdpbmcgcG9zaXRpb24gaXMgdGhlbiBzZXQgdG8gKHgsIHkpLlxuICpcbiAqIEBtZXRob2QgbGluZVRvXG4gKiBAcGFyYW0geCB7TnVtYmVyfSB0aGUgWCBjb29yZCB0byBkcmF3IHRvXG4gKiBAcGFyYW0geSB7TnVtYmVyfSB0aGUgWSBjb29yZCB0byBkcmF3IHRvXG4gKi9cblBJWEkuR3JhcGhpY3MucHJvdG90eXBlLmxpbmVUbyA9IGZ1bmN0aW9uKHgsIHkpXG57XG5cdHRoaXMuY3VycmVudFBhdGgucG9pbnRzLnB1c2goeCwgeSk7XG5cdHRoaXMuZGlydHkgPSB0cnVlO1xufVxuXG4vKipcbiAqIFNwZWNpZmllcyBhIHNpbXBsZSBvbmUtY29sb3IgZmlsbCB0aGF0IHN1YnNlcXVlbnQgY2FsbHMgdG8gb3RoZXIgR3JhcGhpY3MgbWV0aG9kc1xuICogKHN1Y2ggYXMgbGluZVRvKCkgb3IgZHJhd0NpcmNsZSgpKSB1c2Ugd2hlbiBkcmF3aW5nLlxuICpcbiAqIEBtZXRob2QgYmVnaW5GaWxsXG4gKiBAcGFyYW0gY29sb3Ige3VpbnR9IHRoZSBjb2xvciBvZiB0aGUgZmlsbFxuICogQHBhcmFtIGFscGhhIHtOdW1iZXJ9IHRoZSBhbHBoYVxuICovXG5QSVhJLkdyYXBoaWNzLnByb3RvdHlwZS5iZWdpbkZpbGwgPSBmdW5jdGlvbihjb2xvciwgYWxwaGEpXG57XG5cdHRoaXMuZmlsbGluZyA9IHRydWU7XG5cdHRoaXMuZmlsbENvbG9yID0gY29sb3IgfHwgMDtcblx0dGhpcy5maWxsQWxwaGEgPSAoYWxwaGEgPT0gdW5kZWZpbmVkKSA/IDEgOiBhbHBoYTtcbn1cblxuLyoqXG4gKiBBcHBsaWVzIGEgZmlsbCB0byB0aGUgbGluZXMgYW5kIHNoYXBlcyB0aGF0IHdlcmUgYWRkZWQgc2luY2UgdGhlIGxhc3QgY2FsbCB0byB0aGUgYmVnaW5GaWxsKCkgbWV0aG9kLlxuICpcbiAqIEBtZXRob2QgZW5kRmlsbFxuICovXG5QSVhJLkdyYXBoaWNzLnByb3RvdHlwZS5lbmRGaWxsID0gZnVuY3Rpb24oKVxue1xuXHR0aGlzLmZpbGxpbmcgPSBmYWxzZTtcblx0dGhpcy5maWxsQ29sb3IgPSBudWxsO1xuXHR0aGlzLmZpbGxBbHBoYSA9IDE7XG59XG5cbi8qKlxuICogQG1ldGhvZCBkcmF3UmVjdFxuICpcbiAqIEBwYXJhbSB4IHtOdW1iZXJ9IFRoZSBYIGNvb3JkIG9mIHRoZSB0b3AtbGVmdCBvZiB0aGUgcmVjdGFuZ2xlXG4gKiBAcGFyYW0geSB7TnVtYmVyfSBUaGUgWSBjb29yZCBvZiB0aGUgdG9wLWxlZnQgb2YgdGhlIHJlY3RhbmdsZVxuICogQHBhcmFtIHdpZHRoIHtOdW1iZXJ9IFRoZSB3aWR0aCBvZiB0aGUgcmVjdGFuZ2xlXG4gKiBAcGFyYW0gaGVpZ2h0IHtOdW1iZXJ9IFRoZSBoZWlnaHQgb2YgdGhlIHJlY3RhbmdsZVxuICovXG5QSVhJLkdyYXBoaWNzLnByb3RvdHlwZS5kcmF3UmVjdCA9IGZ1bmN0aW9uKCB4LCB5LCB3aWR0aCwgaGVpZ2h0IClcbntcblx0aWYodGhpcy5jdXJyZW50UGF0aC5wb2ludHMubGVuZ3RoID09IDApdGhpcy5ncmFwaGljc0RhdGEucG9wKCk7XG5cblx0dGhpcy5jdXJyZW50UGF0aCA9IHtsaW5lV2lkdGg6dGhpcy5saW5lV2lkdGgsIGxpbmVDb2xvcjp0aGlzLmxpbmVDb2xvciwgbGluZUFscGhhOnRoaXMubGluZUFscGhhLFxuXHRcdFx0XHRcdFx0ZmlsbENvbG9yOnRoaXMuZmlsbENvbG9yLCBmaWxsQWxwaGE6dGhpcy5maWxsQWxwaGEsIGZpbGw6dGhpcy5maWxsaW5nLFxuXHRcdFx0XHRcdFx0cG9pbnRzOlt4LCB5LCB3aWR0aCwgaGVpZ2h0XSwgdHlwZTpQSVhJLkdyYXBoaWNzLlJFQ1R9O1xuXG5cdHRoaXMuZ3JhcGhpY3NEYXRhLnB1c2godGhpcy5jdXJyZW50UGF0aCk7XG5cdHRoaXMuZGlydHkgPSB0cnVlO1xufVxuXG4vKipcbiAqIERyYXdzIGEgY2lyY2xlLlxuICpcbiAqIEBtZXRob2QgZHJhd0NpcmNsZVxuICogQHBhcmFtIHgge051bWJlcn0gVGhlIFggY29vcmQgb2YgdGhlIGNlbnRlciBvZiB0aGUgY2lyY2xlXG4gKiBAcGFyYW0geSB7TnVtYmVyfSBUaGUgWSBjb29yZCBvZiB0aGUgY2VudGVyIG9mIHRoZSBjaXJjbGVcbiAqIEBwYXJhbSByYWRpdXMge051bWJlcn0gVGhlIHJhZGl1cyBvZiB0aGUgY2lyY2xlXG4gKi9cblBJWEkuR3JhcGhpY3MucHJvdG90eXBlLmRyYXdDaXJjbGUgPSBmdW5jdGlvbiggeCwgeSwgcmFkaXVzKVxue1xuXHRpZih0aGlzLmN1cnJlbnRQYXRoLnBvaW50cy5sZW5ndGggPT0gMCl0aGlzLmdyYXBoaWNzRGF0YS5wb3AoKTtcblxuXHR0aGlzLmN1cnJlbnRQYXRoID0ge2xpbmVXaWR0aDp0aGlzLmxpbmVXaWR0aCwgbGluZUNvbG9yOnRoaXMubGluZUNvbG9yLCBsaW5lQWxwaGE6dGhpcy5saW5lQWxwaGEsXG5cdFx0XHRcdFx0XHRmaWxsQ29sb3I6dGhpcy5maWxsQ29sb3IsIGZpbGxBbHBoYTp0aGlzLmZpbGxBbHBoYSwgZmlsbDp0aGlzLmZpbGxpbmcsXG5cdFx0XHRcdFx0XHRwb2ludHM6W3gsIHksIHJhZGl1cywgcmFkaXVzXSwgdHlwZTpQSVhJLkdyYXBoaWNzLkNJUkN9O1xuXG5cdHRoaXMuZ3JhcGhpY3NEYXRhLnB1c2godGhpcy5jdXJyZW50UGF0aCk7XG5cdHRoaXMuZGlydHkgPSB0cnVlO1xufVxuXG4vKipcbiAqIERyYXdzIGFuIGVsaXBzZS5cbiAqXG4gKiBAbWV0aG9kIGRyYXdFbGlwc2VcbiAqIEBwYXJhbSB4IHtOdW1iZXJ9XG4gKiBAcGFyYW0geSB7TnVtYmVyfVxuICogQHBhcmFtIHdpZHRoIHtOdW1iZXJ9XG4gKiBAcGFyYW0gaGVpZ2h0IHtOdW1iZXJ9XG4gKi9cblBJWEkuR3JhcGhpY3MucHJvdG90eXBlLmRyYXdFbGlwc2UgPSBmdW5jdGlvbiggeCwgeSwgd2lkdGgsIGhlaWdodClcbntcblx0aWYodGhpcy5jdXJyZW50UGF0aC5wb2ludHMubGVuZ3RoID09IDApdGhpcy5ncmFwaGljc0RhdGEucG9wKCk7XG5cblx0dGhpcy5jdXJyZW50UGF0aCA9IHtsaW5lV2lkdGg6dGhpcy5saW5lV2lkdGgsIGxpbmVDb2xvcjp0aGlzLmxpbmVDb2xvciwgbGluZUFscGhhOnRoaXMubGluZUFscGhhLFxuXHRcdFx0XHRcdFx0ZmlsbENvbG9yOnRoaXMuZmlsbENvbG9yLCBmaWxsQWxwaGE6dGhpcy5maWxsQWxwaGEsIGZpbGw6dGhpcy5maWxsaW5nLFxuXHRcdFx0XHRcdFx0cG9pbnRzOlt4LCB5LCB3aWR0aCwgaGVpZ2h0XSwgdHlwZTpQSVhJLkdyYXBoaWNzLkVMSVB9O1xuXG5cdHRoaXMuZ3JhcGhpY3NEYXRhLnB1c2godGhpcy5jdXJyZW50UGF0aCk7XG5cdHRoaXMuZGlydHkgPSB0cnVlO1xufVxuXG4vKipcbiAqIENsZWFycyB0aGUgZ3JhcGhpY3MgdGhhdCB3ZXJlIGRyYXduIHRvIHRoaXMgR3JhcGhpY3Mgb2JqZWN0LCBhbmQgcmVzZXRzIGZpbGwgYW5kIGxpbmUgc3R5bGUgc2V0dGluZ3MuXG4gKlxuICogQG1ldGhvZCBjbGVhclxuICovXG5QSVhJLkdyYXBoaWNzLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uKClcbntcblx0dGhpcy5saW5lV2lkdGggPSAwO1xuXHR0aGlzLmZpbGxpbmcgPSBmYWxzZTtcblxuXHR0aGlzLmRpcnR5ID0gdHJ1ZTtcblx0dGhpcy5jbGVhckRpcnR5ID0gdHJ1ZTtcblx0dGhpcy5ncmFwaGljc0RhdGEgPSBbXTtcblxuXHR0aGlzLmJvdW5kcyA9IG51bGwvL25ldyBQSVhJLlJlY3RhbmdsZSgpO1xufVxuXG5cblBJWEkuR3JhcGhpY3MucHJvdG90eXBlLnVwZGF0ZUZpbHRlckJvdW5kcyA9IGZ1bmN0aW9uKClcbntcblx0aWYoIXRoaXMuYm91bmRzKVxuXHR7XG5cdFx0dmFyIG1pblggPSBJbmZpbml0eTtcblx0XHR2YXIgbWF4WCA9IC1JbmZpbml0eTtcblxuXHRcdHZhciBtaW5ZID0gSW5maW5pdHk7XG5cdFx0dmFyIG1heFkgPSAtSW5maW5pdHk7XG5cblx0XHR2YXIgcG9pbnRzLCB4LCB5O1xuXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmdyYXBoaWNzRGF0YS5sZW5ndGg7IGkrKykge1xuXHRcdFx0XG5cblx0XHRcdHZhciBkYXRhID0gdGhpcy5ncmFwaGljc0RhdGFbaV07XG5cdFx0XHR2YXIgdHlwZSA9IGRhdGEudHlwZTtcblx0XHRcdHZhciBsaW5lV2lkdGggPSBkYXRhLmxpbmVXaWR0aDtcblxuXHRcdFx0cG9pbnRzID0gZGF0YS5wb2ludHM7XG5cblx0XHRcdGlmKHR5cGUgPT09IFBJWEkuR3JhcGhpY3MuUkVDVClcblx0XHRcdHtcblx0XHRcdFx0eCA9IHBvaW50cy54IC0gbGluZVdpZHRoLzI7XG5cdFx0XHRcdHkgPSBwb2ludHMueSAtIGxpbmVXaWR0aC8yO1xuXHRcdFx0XHR2YXIgd2lkdGggPSBwb2ludHMud2lkdGggKyBsaW5lV2lkdGg7XG5cdFx0XHRcdHZhciBoZWlnaHQgPSBwb2ludHMuaGVpZ2h0ICsgbGluZVdpZHRoO1xuXG5cdFx0XHRcdG1pblggPSB4IDwgbWluWCA/IHggOiBtaW5YO1xuXHRcdFx0XHRtYXhYID0geCArIHdpZHRoID4gbWF4WCA/IHggKyB3aWR0aCA6IG1heFg7XG5cblx0XHRcdFx0bWluWSA9IHkgPCBtaW5ZID8geCA6IG1pblk7XG5cdFx0XHRcdG1heFkgPSB5ICsgaGVpZ2h0ID4gbWF4WSA/IHkgKyBoZWlnaHQgOiBtYXhZO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSBpZih0eXBlID09PSBQSVhJLkdyYXBoaWNzLkNJUkMgfHwgdHlwZSA9PT0gUElYSS5HcmFwaGljcy5FTElQKVxuXHRcdFx0e1xuXHRcdFx0XHR4ID0gcG9pbnRzLng7XG5cdFx0XHRcdHkgPSBwb2ludHMueTtcblx0XHRcdFx0dmFyIHJhZGl1cyA9IHBvaW50cy5yYWRpdXMgKyBsaW5lV2lkdGgvMjtcblx0XHRcdFx0XG5cdFx0XHRcdG1pblggPSB4IC0gcmFkaXVzIDwgbWluWCA/IHggLSByYWRpdXMgOiBtaW5YO1xuXHRcdFx0XHRtYXhYID0geCArIHJhZGl1cyA+IG1heFggPyB4ICsgcmFkaXVzIDogbWF4WDtcblxuXHRcdFx0XHRtaW5ZID0geSAtIHJhZGl1cyA8IG1pblkgPyB5IC0gcmFkaXVzIDogbWluWTtcblx0XHRcdFx0bWF4WSA9IHkgKyByYWRpdXMgPiBtYXhZID8geSArIHJhZGl1cyA6IG1heFk7XG5cdFx0XHR9XG5cdFx0XHRlbHNlXG5cdFx0XHR7XG5cdFx0XHRcdC8vIFBPTFlcblx0XHRcdFx0Zm9yICh2YXIgaiA9IDA7IGogPCBwb2ludHMubGVuZ3RoOyBqKz0yKSBcblx0XHRcdFx0e1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdHggPSBwb2ludHNbal07XG5cdFx0XHRcdFx0eSA9IHBvaW50c1tqKzFdO1xuXG5cdFx0XHRcdFx0bWluWCA9IHgtbGluZVdpZHRoIDwgbWluWCA/IHgtbGluZVdpZHRoIDogbWluWDtcblx0XHRcdFx0XHRtYXhYID0geCtsaW5lV2lkdGggPiBtYXhYID8geCtsaW5lV2lkdGggOiBtYXhYO1xuXG5cdFx0XHRcdFx0bWluWSA9IHktbGluZVdpZHRoIDwgbWluWSA/IHktbGluZVdpZHRoIDogbWluWTtcblx0XHRcdFx0XHRtYXhZID0geStsaW5lV2lkdGggPiBtYXhZID8geStsaW5lV2lkdGggOiBtYXhZO1xuXHRcdFx0XHR9O1xuXHRcdFx0fVxuXG5cdFx0fTtcblxuXHRcdHRoaXMuYm91bmRzID0gbmV3IFBJWEkuUmVjdGFuZ2xlKG1pblgsIG1pblksIG1heFggLSBtaW5YLCBtYXhZIC0gbWluWSk7XG5cblx0fVxuXG4vL1x0Y29uc29sZS5sb2codGhpcy5ib3VuZHMpO1xufVxuXG4vLyBTT01FIFRZUEVTOlxuUElYSS5HcmFwaGljcy5QT0xZID0gMDtcblBJWEkuR3JhcGhpY3MuUkVDVCA9IDE7XG5QSVhJLkdyYXBoaWNzLkNJUkMgPSAyO1xuUElYSS5HcmFwaGljcy5FTElQID0gMztcblxuLyoqXG4gKiBAYXV0aG9yIE1hdCBHcm92ZXMgaHR0cDovL21hdGdyb3Zlcy5jb20vXG4gKi9cblxuUElYSS5TdHJpcCA9IGZ1bmN0aW9uKHRleHR1cmUsIHdpZHRoLCBoZWlnaHQpXG57XG5cdFBJWEkuRGlzcGxheU9iamVjdENvbnRhaW5lci5jYWxsKCB0aGlzICk7XG5cdHRoaXMudGV4dHVyZSA9IHRleHR1cmU7XG5cdHRoaXMuYmxlbmRNb2RlID0gUElYSS5ibGVuZE1vZGVzLk5PUk1BTDtcblxuXHR0cnlcblx0e1xuXHRcdHRoaXMudXZzID0gbmV3IEZsb2F0MzJBcnJheShbMCwgMSxcblx0XHRcdFx0MSwgMSxcblx0XHRcdFx0MSwgMCwgMCwxXSk7XG5cblx0XHR0aGlzLnZlcnRpY2llcyA9IG5ldyBGbG9hdDMyQXJyYXkoWzAsIDAsXG5cdFx0XHRcdFx0XHQgIDAsMCxcblx0XHRcdFx0XHRcdCAgMCwwLCAwLFxuXHRcdFx0XHRcdFx0ICAwLCAwXSk7XG5cblx0XHR0aGlzLmNvbG9ycyA9IG5ldyBGbG9hdDMyQXJyYXkoWzEsIDEsIDEsIDFdKTtcblxuXHRcdHRoaXMuaW5kaWNlcyA9IG5ldyBVaW50MTZBcnJheShbMCwgMSwgMiwgM10pO1xuXHR9XG5cdGNhdGNoKGVycm9yKVxuXHR7XG5cdFx0dGhpcy51dnMgPSBbMCwgMSxcblx0XHRcdFx0MSwgMSxcblx0XHRcdFx0MSwgMCwgMCwxXTtcblxuXHRcdHRoaXMudmVydGljaWVzID0gWzAsIDAsXG5cdFx0XHRcdFx0XHQgIDAsMCxcblx0XHRcdFx0XHRcdCAgMCwwLCAwLFxuXHRcdFx0XHRcdFx0ICAwLCAwXTtcblxuXHRcdHRoaXMuY29sb3JzID0gWzEsIDEsIDEsIDFdO1xuXG5cdFx0dGhpcy5pbmRpY2VzID0gWzAsIDEsIDIsIDNdO1xuXHR9XG5cblxuXHQvKlxuXHR0aGlzLnV2cyA9IG5ldyBGbG9hdDMyQXJyYXkoKVxuXHR0aGlzLnZlcnRpY2llcyA9IG5ldyBGbG9hdDMyQXJyYXkoKVxuXHR0aGlzLmNvbG9ycyA9IG5ldyBGbG9hdDMyQXJyYXkoKVxuXHR0aGlzLmluZGljZXMgPSBuZXcgVWludDE2QXJyYXkoKVxuKi9cblx0dGhpcy53aWR0aCA9IHdpZHRoO1xuXHR0aGlzLmhlaWdodCA9IGhlaWdodDtcblxuXHQvLyBsb2FkIHRoZSB0ZXh0dXJlIVxuXHRpZih0ZXh0dXJlLmJhc2VUZXh0dXJlLmhhc0xvYWRlZClcblx0e1xuXHRcdHRoaXMud2lkdGggICA9IHRoaXMudGV4dHVyZS5mcmFtZS53aWR0aDtcblx0XHR0aGlzLmhlaWdodCAgPSB0aGlzLnRleHR1cmUuZnJhbWUuaGVpZ2h0O1xuXHRcdHRoaXMudXBkYXRlRnJhbWUgPSB0cnVlO1xuXHR9XG5cdGVsc2Vcblx0e1xuXHRcdHRoaXMub25UZXh0dXJlVXBkYXRlQmluZCA9IHRoaXMub25UZXh0dXJlVXBkYXRlLmJpbmQodGhpcyk7XG5cdFx0dGhpcy50ZXh0dXJlLmFkZEV2ZW50TGlzdGVuZXIoICd1cGRhdGUnLCB0aGlzLm9uVGV4dHVyZVVwZGF0ZUJpbmQgKTtcblx0fVxuXG5cdHRoaXMucmVuZGVyYWJsZSA9IHRydWU7XG59XG5cbi8vIGNvbnN0cnVjdG9yXG5QSVhJLlN0cmlwLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIFBJWEkuRGlzcGxheU9iamVjdENvbnRhaW5lci5wcm90b3R5cGUgKTtcblBJWEkuU3RyaXAucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gUElYSS5TdHJpcDtcblxuUElYSS5TdHJpcC5wcm90b3R5cGUuc2V0VGV4dHVyZSA9IGZ1bmN0aW9uKHRleHR1cmUpXG57XG5cdC8vVE9ETyBTRVQgVEhFIFRFWFRVUkVTXG5cdC8vVE9ETyBWSVNJQklMSVRZXG5cblx0Ly8gc3RvcCBjdXJyZW50IHRleHR1cmVcblx0dGhpcy50ZXh0dXJlID0gdGV4dHVyZTtcblx0dGhpcy53aWR0aCAgID0gdGV4dHVyZS5mcmFtZS53aWR0aDtcblx0dGhpcy5oZWlnaHQgID0gdGV4dHVyZS5mcmFtZS5oZWlnaHQ7XG5cdHRoaXMudXBkYXRlRnJhbWUgPSB0cnVlO1xufVxuXG5QSVhJLlN0cmlwLnByb3RvdHlwZS5vblRleHR1cmVVcGRhdGUgPSBmdW5jdGlvbihldmVudClcbntcblx0dGhpcy51cGRhdGVGcmFtZSA9IHRydWU7XG59XG4vLyBzb21lIGhlbHBlciBmdW5jdGlvbnMuLlxuXG5cbi8qKlxuICogQGF1dGhvciBNYXQgR3JvdmVzIGh0dHA6Ly9tYXRncm92ZXMuY29tL1xuICovXG5cblxuUElYSS5Sb3BlID0gZnVuY3Rpb24odGV4dHVyZSwgcG9pbnRzKVxue1xuXHRQSVhJLlN0cmlwLmNhbGwoIHRoaXMsIHRleHR1cmUgKTtcblx0dGhpcy5wb2ludHMgPSBwb2ludHM7XG5cblx0dHJ5XG5cdHtcblx0XHR0aGlzLnZlcnRpY2llcyA9IG5ldyBGbG9hdDMyQXJyYXkoIHBvaW50cy5sZW5ndGggKiA0KTtcblx0XHR0aGlzLnV2cyA9IG5ldyBGbG9hdDMyQXJyYXkoIHBvaW50cy5sZW5ndGggKiA0KTtcblx0XHR0aGlzLmNvbG9ycyA9IG5ldyBGbG9hdDMyQXJyYXkoICBwb2ludHMubGVuZ3RoICogMik7XG5cdFx0dGhpcy5pbmRpY2VzID0gbmV3IFVpbnQxNkFycmF5KCBwb2ludHMubGVuZ3RoICogMik7XG5cdH1cblx0Y2F0Y2goZXJyb3IpXG5cdHtcblx0XHR0aGlzLnZlcnRpY2llcyA9IHZlcnRpY2llc1xuXG5cdFx0dGhpcy51dnMgPSB1dnNcblx0XHR0aGlzLmNvbG9ycyA9IGNvbG9yc1xuXHRcdHRoaXMuaW5kaWNlcyA9IGluZGljZXNcblx0fVxuXG5cdHRoaXMucmVmcmVzaCgpO1xufVxuXG5cbi8vIGNvbnN0cnVjdG9yXG5QSVhJLlJvcGUucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggUElYSS5TdHJpcC5wcm90b3R5cGUgKTtcblBJWEkuUm9wZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBQSVhJLlJvcGU7XG5cblBJWEkuUm9wZS5wcm90b3R5cGUucmVmcmVzaCA9IGZ1bmN0aW9uKClcbntcblx0dmFyIHBvaW50cyA9IHRoaXMucG9pbnRzO1xuXHRpZihwb2ludHMubGVuZ3RoIDwgMSlyZXR1cm47XG5cblx0dmFyIHV2cyA9IHRoaXMudXZzXG5cdHZhciBpbmRpY2VzID0gdGhpcy5pbmRpY2VzO1xuXHR2YXIgY29sb3JzID0gdGhpcy5jb2xvcnM7XG5cblx0dmFyIGxhc3RQb2ludCA9IHBvaW50c1swXTtcblx0dmFyIG5leHRQb2ludDtcblx0dmFyIHBlcnAgPSB7eDowLCB5OjB9O1xuXHR2YXIgcG9pbnQgPSBwb2ludHNbMF07XG5cblx0dGhpcy5jb3VudC09MC4yO1xuXG5cblx0dXZzWzBdID0gMFxuXHR1dnNbMV0gPSAxXG5cdHV2c1syXSA9IDBcblx0dXZzWzNdID0gMVxuXG5cdGNvbG9yc1swXSA9IDE7XG5cdGNvbG9yc1sxXSA9IDE7XG5cblx0aW5kaWNlc1swXSA9IDA7XG5cdGluZGljZXNbMV0gPSAxO1xuXG5cdHZhciB0b3RhbCA9IHBvaW50cy5sZW5ndGg7XG5cblx0Zm9yICh2YXIgaSA9ICAxOyBpIDwgdG90YWw7IGkrKylcblx0e1xuXG5cdFx0dmFyIHBvaW50ID0gcG9pbnRzW2ldO1xuXHRcdHZhciBpbmRleCA9IGkgKiA0O1xuXHRcdC8vIHRpbWUgdG8gZG8gc29tZSBzbWFydCBkcmF3aW5nIVxuXHRcdHZhciBhbW91bnQgPSBpLyh0b3RhbC0xKVxuXG5cdFx0aWYoaSUyKVxuXHRcdHtcblx0XHRcdHV2c1tpbmRleF0gPSBhbW91bnQ7XG5cdFx0XHR1dnNbaW5kZXgrMV0gPSAwO1xuXG5cdFx0XHR1dnNbaW5kZXgrMl0gPSBhbW91bnRcblx0XHRcdHV2c1tpbmRleCszXSA9IDFcblxuXHRcdH1cblx0XHRlbHNlXG5cdFx0e1xuXHRcdFx0dXZzW2luZGV4XSA9IGFtb3VudFxuXHRcdFx0dXZzW2luZGV4KzFdID0gMFxuXG5cdFx0XHR1dnNbaW5kZXgrMl0gPSBhbW91bnRcblx0XHRcdHV2c1tpbmRleCszXSA9IDFcblx0XHR9XG5cblx0XHRpbmRleCA9IGkgKiAyO1xuXHRcdGNvbG9yc1tpbmRleF0gPSAxO1xuXHRcdGNvbG9yc1tpbmRleCsxXSA9IDE7XG5cblx0XHRpbmRleCA9IGkgKiAyO1xuXHRcdGluZGljZXNbaW5kZXhdID0gaW5kZXg7XG5cdFx0aW5kaWNlc1tpbmRleCArIDFdID0gaW5kZXggKyAxO1xuXG5cdFx0bGFzdFBvaW50ID0gcG9pbnQ7XG5cdH1cbn1cblxuUElYSS5Sb3BlLnByb3RvdHlwZS51cGRhdGVUcmFuc2Zvcm0gPSBmdW5jdGlvbigpXG57XG5cblx0dmFyIHBvaW50cyA9IHRoaXMucG9pbnRzO1xuXHRpZihwb2ludHMubGVuZ3RoIDwgMSlyZXR1cm47XG5cblx0dmFyIHZlcnRpY2llcyA9IHRoaXMudmVydGljaWVzXG5cblx0dmFyIGxhc3RQb2ludCA9IHBvaW50c1swXTtcblx0dmFyIG5leHRQb2ludDtcblx0dmFyIHBlcnAgPSB7eDowLCB5OjB9O1xuXHR2YXIgcG9pbnQgPSBwb2ludHNbMF07XG5cblx0dGhpcy5jb3VudC09MC4yO1xuXG5cdHZlcnRpY2llc1swXSA9IHBvaW50LnggKyBwZXJwLnhcblx0dmVydGljaWVzWzFdID0gcG9pbnQueSArIHBlcnAueSAvLysgMjAwXG5cdHZlcnRpY2llc1syXSA9IHBvaW50LnggLSBwZXJwLnhcblx0dmVydGljaWVzWzNdID0gcG9pbnQueSAtIHBlcnAueS8vKzIwMFxuXHQvLyB0aW1lIHRvIGRvIHNvbWUgc21hcnQgZHJhd2luZyFcblxuXHR2YXIgdG90YWwgPSBwb2ludHMubGVuZ3RoO1xuXG5cdGZvciAodmFyIGkgPSAgMTsgaSA8IHRvdGFsOyBpKyspXG5cdHtcblxuXHRcdHZhciBwb2ludCA9IHBvaW50c1tpXTtcblx0XHR2YXIgaW5kZXggPSBpICogNDtcblxuXHRcdGlmKGkgPCBwb2ludHMubGVuZ3RoLTEpXG5cdFx0e1xuXHRcdFx0bmV4dFBvaW50ID0gcG9pbnRzW2krMV07XG5cdFx0fVxuXHRcdGVsc2Vcblx0XHR7XG5cdFx0XHRuZXh0UG9pbnQgPSBwb2ludFxuXHRcdH1cblxuXHRcdHBlcnAueSA9IC0obmV4dFBvaW50LnggLSBsYXN0UG9pbnQueCk7XG5cdFx0cGVycC54ID0gbmV4dFBvaW50LnkgLSBsYXN0UG9pbnQueTtcblxuXHRcdHZhciByYXRpbyA9ICgxIC0gKGkgLyAodG90YWwtMSkpKSAqIDEwO1xuXHRcdFx0XHRpZihyYXRpbyA+IDEpcmF0aW8gPSAxO1xuXG5cdFx0dmFyIHBlcnBMZW5ndGggPSBNYXRoLnNxcnQocGVycC54ICogcGVycC54ICsgcGVycC55ICogcGVycC55KTtcblx0XHR2YXIgbnVtID0gdGhpcy50ZXh0dXJlLmhlaWdodC8yLy8oMjAgKyBNYXRoLmFicyhNYXRoLnNpbigoaSArIHRoaXMuY291bnQpICogMC4zKSAqIDUwKSApKiByYXRpbztcblx0XHRwZXJwLnggLz0gcGVycExlbmd0aDtcblx0XHRwZXJwLnkgLz0gcGVycExlbmd0aDtcblxuXHRcdHBlcnAueCAqPSBudW07XG5cdFx0cGVycC55ICo9IG51bTtcblxuXHRcdHZlcnRpY2llc1tpbmRleF0gPSBwb2ludC54ICsgcGVycC54XG5cdFx0dmVydGljaWVzW2luZGV4KzFdID0gcG9pbnQueSArIHBlcnAueVxuXHRcdHZlcnRpY2llc1tpbmRleCsyXSA9IHBvaW50LnggLSBwZXJwLnhcblx0XHR2ZXJ0aWNpZXNbaW5kZXgrM10gPSBwb2ludC55IC0gcGVycC55XG5cblx0XHRsYXN0UG9pbnQgPSBwb2ludDtcblx0fVxuXG5cdFBJWEkuRGlzcGxheU9iamVjdENvbnRhaW5lci5wcm90b3R5cGUudXBkYXRlVHJhbnNmb3JtLmNhbGwoIHRoaXMgKTtcbn1cblxuUElYSS5Sb3BlLnByb3RvdHlwZS5zZXRUZXh0dXJlID0gZnVuY3Rpb24odGV4dHVyZSlcbntcblx0Ly8gc3RvcCBjdXJyZW50IHRleHR1cmVcblx0dGhpcy50ZXh0dXJlID0gdGV4dHVyZTtcblx0dGhpcy51cGRhdGVGcmFtZSA9IHRydWU7XG59XG5cblxuXG5cblxuLyoqXG4gKiBAYXV0aG9yIE1hdCBHcm92ZXMgaHR0cDovL21hdGdyb3Zlcy5jb20vXG4gKi9cblxuLyoqXG4gKiBBIHRpbGluZyBzcHJpdGUgaXMgYSBmYXN0IHdheSBvZiByZW5kZXJpbmcgYSB0aWxpbmcgaW1hZ2VcbiAqXG4gKiBAY2xhc3MgVGlsaW5nU3ByaXRlXG4gKiBAZXh0ZW5kcyBEaXNwbGF5T2JqZWN0Q29udGFpbmVyXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB0ZXh0dXJlIHtUZXh0dXJlfSB0aGUgdGV4dHVyZSBvZiB0aGUgdGlsaW5nIHNwcml0ZVxuICogQHBhcmFtIHdpZHRoIHtOdW1iZXJ9ICB0aGUgd2lkdGggb2YgdGhlIHRpbGluZyBzcHJpdGVcbiAqIEBwYXJhbSBoZWlnaHQge051bWJlcn0gdGhlIGhlaWdodCBvZiB0aGUgdGlsaW5nIHNwcml0ZVxuICovXG5QSVhJLlRpbGluZ1Nwcml0ZSA9IGZ1bmN0aW9uKHRleHR1cmUsIHdpZHRoLCBoZWlnaHQpXG57XG5cdFBJWEkuRGlzcGxheU9iamVjdENvbnRhaW5lci5jYWxsKCB0aGlzICk7XG5cblx0LyoqXG5cdCAqIFRoZSB0ZXh0dXJlIHRoYXQgdGhlIHNwcml0ZSBpcyB1c2luZ1xuXHQgKlxuXHQgKiBAcHJvcGVydHkgdGV4dHVyZVxuXHQgKiBAdHlwZSBUZXh0dXJlXG5cdCAqL1xuXHR0aGlzLnRleHR1cmUgPSB0ZXh0dXJlO1xuXG5cdC8qKlxuXHQgKiBUaGUgd2lkdGggb2YgdGhlIHRpbGluZyBzcHJpdGVcblx0ICpcblx0ICogQHByb3BlcnR5IHdpZHRoXG5cdCAqIEB0eXBlIE51bWJlclxuXHQgKi9cblx0dGhpcy53aWR0aCA9IHdpZHRoO1xuXG5cdC8qKlxuXHQgKiBUaGUgaGVpZ2h0IG9mIHRoZSB0aWxpbmcgc3ByaXRlXG5cdCAqXG5cdCAqIEBwcm9wZXJ0eSBoZWlnaHRcblx0ICogQHR5cGUgTnVtYmVyXG5cdCAqL1xuXHR0aGlzLmhlaWdodCA9IGhlaWdodDtcblxuXHQvKipcblx0ICogVGhlIHNjYWxpbmcgb2YgdGhlIGltYWdlIHRoYXQgaXMgYmVpbmcgdGlsZWRcblx0ICpcblx0ICogQHByb3BlcnR5IHRpbGVTY2FsZVxuXHQgKiBAdHlwZSBQb2ludFxuXHQgKi9cblx0dGhpcy50aWxlU2NhbGUgPSBuZXcgUElYSS5Qb2ludCgxLDEpO1xuXG5cdC8qKlxuXHQgKiBUaGUgb2Zmc2V0IHBvc2l0aW9uIG9mIHRoZSBpbWFnZSB0aGF0IGlzIGJlaW5nIHRpbGVkXG5cdCAqXG5cdCAqIEBwcm9wZXJ0eSB0aWxlUG9zaXRpb25cblx0ICogQHR5cGUgUG9pbnRcblx0ICovXG5cdHRoaXMudGlsZVBvc2l0aW9uID0gbmV3IFBJWEkuUG9pbnQoMCwwKTtcblxuXHR0aGlzLnJlbmRlcmFibGUgPSB0cnVlO1xuXG5cdHRoaXMuYmxlbmRNb2RlID0gUElYSS5ibGVuZE1vZGVzLk5PUk1BTFxufVxuXG4vLyBjb25zdHJ1Y3RvclxuUElYSS5UaWxpbmdTcHJpdGUucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggUElYSS5EaXNwbGF5T2JqZWN0Q29udGFpbmVyLnByb3RvdHlwZSApO1xuUElYSS5UaWxpbmdTcHJpdGUucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gUElYSS5UaWxpbmdTcHJpdGU7XG5cbi8qKlxuICogU2V0cyB0aGUgdGV4dHVyZSBvZiB0aGUgdGlsaW5nIHNwcml0ZVxuICpcbiAqIEBtZXRob2Qgc2V0VGV4dHVyZVxuICogQHBhcmFtIHRleHR1cmUge1RleHR1cmV9IFRoZSBQSVhJIHRleHR1cmUgdGhhdCBpcyBkaXNwbGF5ZWQgYnkgdGhlIHNwcml0ZVxuICovXG5QSVhJLlRpbGluZ1Nwcml0ZS5wcm90b3R5cGUuc2V0VGV4dHVyZSA9IGZ1bmN0aW9uKHRleHR1cmUpXG57XG5cdC8vVE9ETyBTRVQgVEhFIFRFWFRVUkVTXG5cdC8vVE9ETyBWSVNJQklMSVRZXG5cblx0Ly8gc3RvcCBjdXJyZW50IHRleHR1cmVcblx0dGhpcy50ZXh0dXJlID0gdGV4dHVyZTtcblx0dGhpcy51cGRhdGVGcmFtZSA9IHRydWU7XG59XG5cbi8qKlxuICogV2hlbiB0aGUgdGV4dHVyZSBpcyB1cGRhdGVkLCB0aGlzIGV2ZW50IHdpbGwgZmlyZSB0byB1cGRhdGUgdGhlIGZyYW1lXG4gKlxuICogQG1ldGhvZCBvblRleHR1cmVVcGRhdGVcbiAqIEBwYXJhbSBldmVudFxuICogQHByaXZhdGVcbiAqL1xuUElYSS5UaWxpbmdTcHJpdGUucHJvdG90eXBlLm9uVGV4dHVyZVVwZGF0ZSA9IGZ1bmN0aW9uKGV2ZW50KVxue1xuXHR0aGlzLnVwZGF0ZUZyYW1lID0gdHJ1ZTtcbn1cblxuXG4vKipcbiAqIEBhdXRob3IgTWF0IEdyb3ZlcyBodHRwOi8vbWF0Z3JvdmVzLmNvbS8gQERvb3JtYXQyM1xuICogYmFzZWQgb24gcGl4aSBpbXBhY3Qgc3BpbmUgaW1wbGVtZW50YXRpb24gbWFkZSBieSBFZW1lbGkgS2Vsb2tvcnBpIChAZWtlbG9rb3JwaSkgaHR0cHM6Ly9naXRodWIuY29tL2VrZWxva29ycGlcbiAqXG4gKiBBd2Vzb21lIEpTIHJ1biB0aW1lIHByb3ZpZGVkIGJ5IEVzb3RlcmljU29mdHdhcmVcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9Fc290ZXJpY1NvZnR3YXJlL3NwaW5lLXJ1bnRpbWVzXG4gKlxuICovXG5cbi8qKlxuICogQSBjbGFzcyB0aGF0IGVuYWJsZXMgdGhlIHlvdSB0byBpbXBvcnQgYW5kIHJ1biB5b3VyIHNwaW5lIGFuaW1hdGlvbnMgaW4gcGl4aS5cbiAqIFNwaW5lIGFuaW1hdGlvbiBkYXRhIG5lZWRzIHRvIGJlIGxvYWRlZCB1c2luZyB0aGUgUElYSS5Bc3NldExvYWRlciBvciBQSVhJLlNwaW5lTG9hZGVyIGJlZm9yZSBpdCBjYW4gYmUgdXNlZCBieSB0aGlzIGNsYXNzXG4gKiBTZWUgZXhhbXBsZSAxMiAoaHR0cDovL3d3dy5nb29kYm95ZGlnaXRhbC5jb20vcGl4aWpzL2V4YW1wbGVzLzEyLykgdG8gc2VlIGEgd29ya2luZyBleGFtcGxlIGFuZCBjaGVjayBvdXQgdGhlIHNvdXJjZVxuICpcbiAqIEBjbGFzcyBTcGluZVxuICogQGV4dGVuZHMgRGlzcGxheU9iamVjdENvbnRhaW5lclxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0gdXJsIHtTdHJpbmd9IFRoZSB1cmwgb2YgdGhlIHNwaW5lIGFuaW0gZmlsZSB0byBiZSB1c2VkXG4gKi9cblBJWEkuU3BpbmUgPSBmdW5jdGlvbiAodXJsKSB7XG5cdFBJWEkuRGlzcGxheU9iamVjdENvbnRhaW5lci5jYWxsKHRoaXMpO1xuXG5cdHRoaXMuc3BpbmVEYXRhID0gUElYSS5BbmltQ2FjaGVbdXJsXTtcblxuXHRpZiAoIXRoaXMuc3BpbmVEYXRhKSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiU3BpbmUgZGF0YSBtdXN0IGJlIHByZWxvYWRlZCB1c2luZyBQSVhJLlNwaW5lTG9hZGVyIG9yIFBJWEkuQXNzZXRMb2FkZXI6IFwiICsgdXJsKTtcblx0fVxuXG5cdHRoaXMuc2tlbGV0b24gPSBuZXcgc3BpbmUuU2tlbGV0b24odGhpcy5zcGluZURhdGEpO1xuXHR0aGlzLnNrZWxldG9uLnVwZGF0ZVdvcmxkVHJhbnNmb3JtKCk7XG5cblx0dGhpcy5zdGF0ZURhdGEgPSBuZXcgc3BpbmUuQW5pbWF0aW9uU3RhdGVEYXRhKHRoaXMuc3BpbmVEYXRhKTtcblx0dGhpcy5zdGF0ZSA9IG5ldyBzcGluZS5BbmltYXRpb25TdGF0ZSh0aGlzLnN0YXRlRGF0YSk7XG5cblx0dGhpcy5zbG90Q29udGFpbmVycyA9IFtdO1xuXG5cdGZvciAodmFyIGkgPSAwLCBuID0gdGhpcy5za2VsZXRvbi5kcmF3T3JkZXIubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XG5cdFx0dmFyIHNsb3QgPSB0aGlzLnNrZWxldG9uLmRyYXdPcmRlcltpXTtcblx0XHR2YXIgYXR0YWNobWVudCA9IHNsb3QuYXR0YWNobWVudDtcblx0XHR2YXIgc2xvdENvbnRhaW5lciA9IG5ldyBQSVhJLkRpc3BsYXlPYmplY3RDb250YWluZXIoKTtcblx0XHR0aGlzLnNsb3RDb250YWluZXJzLnB1c2goc2xvdENvbnRhaW5lcik7XG5cdFx0dGhpcy5hZGRDaGlsZChzbG90Q29udGFpbmVyKTtcblx0XHRpZiAoIShhdHRhY2htZW50IGluc3RhbmNlb2Ygc3BpbmUuUmVnaW9uQXR0YWNobWVudCkpIHtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblx0XHR2YXIgc3ByaXRlTmFtZSA9IGF0dGFjaG1lbnQucmVuZGVyZXJPYmplY3QubmFtZTtcblx0XHR2YXIgc3ByaXRlID0gdGhpcy5jcmVhdGVTcHJpdGUoc2xvdCwgYXR0YWNobWVudC5yZW5kZXJlck9iamVjdCk7XG5cdFx0c2xvdC5jdXJyZW50U3ByaXRlID0gc3ByaXRlO1xuXHRcdHNsb3QuY3VycmVudFNwcml0ZU5hbWUgPSBzcHJpdGVOYW1lO1xuXHRcdHNsb3RDb250YWluZXIuYWRkQ2hpbGQoc3ByaXRlKTtcblx0fVxufTtcblxuUElYSS5TcGluZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFBJWEkuRGlzcGxheU9iamVjdENvbnRhaW5lci5wcm90b3R5cGUpO1xuUElYSS5TcGluZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBQSVhJLlNwaW5lO1xuXG4vKlxuICogVXBkYXRlcyB0aGUgb2JqZWN0IHRyYW5zZm9ybSBmb3IgcmVuZGVyaW5nXG4gKlxuICogQG1ldGhvZCB1cGRhdGVUcmFuc2Zvcm1cbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuU3BpbmUucHJvdG90eXBlLnVwZGF0ZVRyYW5zZm9ybSA9IGZ1bmN0aW9uICgpIHtcblx0dGhpcy5sYXN0VGltZSA9IHRoaXMubGFzdFRpbWUgfHwgRGF0ZS5ub3coKTtcblx0dmFyIHRpbWVEZWx0YSA9IChEYXRlLm5vdygpIC0gdGhpcy5sYXN0VGltZSkgKiAwLjAwMTtcblx0dGhpcy5sYXN0VGltZSA9IERhdGUubm93KCk7XG5cdHRoaXMuc3RhdGUudXBkYXRlKHRpbWVEZWx0YSk7XG5cdHRoaXMuc3RhdGUuYXBwbHkodGhpcy5za2VsZXRvbik7XG5cdHRoaXMuc2tlbGV0b24udXBkYXRlV29ybGRUcmFuc2Zvcm0oKTtcblxuXHR2YXIgZHJhd09yZGVyID0gdGhpcy5za2VsZXRvbi5kcmF3T3JkZXI7XG5cdGZvciAodmFyIGkgPSAwLCBuID0gZHJhd09yZGVyLmxlbmd0aDsgaSA8IG47IGkrKykge1xuXHRcdHZhciBzbG90ID0gZHJhd09yZGVyW2ldO1xuXHRcdHZhciBhdHRhY2htZW50ID0gc2xvdC5hdHRhY2htZW50O1xuXHRcdHZhciBzbG90Q29udGFpbmVyID0gdGhpcy5zbG90Q29udGFpbmVyc1tpXTtcblx0XHRpZiAoIShhdHRhY2htZW50IGluc3RhbmNlb2Ygc3BpbmUuUmVnaW9uQXR0YWNobWVudCkpIHtcblx0XHRcdHNsb3RDb250YWluZXIudmlzaWJsZSA9IGZhbHNlO1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXG5cdFx0aWYgKGF0dGFjaG1lbnQucmVuZGVyZXJPYmplY3QpIHtcblx0XHRcdGlmICghc2xvdC5jdXJyZW50U3ByaXRlTmFtZSB8fCBzbG90LmN1cnJlbnRTcHJpdGVOYW1lICE9IGF0dGFjaG1lbnQubmFtZSkge1xuXHRcdFx0XHR2YXIgc3ByaXRlTmFtZSA9IGF0dGFjaG1lbnQucmVuZGVyZXJPYmplY3QubmFtZTtcblx0XHRcdFx0aWYgKHNsb3QuY3VycmVudFNwcml0ZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0c2xvdC5jdXJyZW50U3ByaXRlLnZpc2libGUgPSBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0XHRzbG90LnNwcml0ZXMgPSBzbG90LnNwcml0ZXMgfHwge307XG5cdFx0XHRcdGlmIChzbG90LnNwcml0ZXNbc3ByaXRlTmFtZV0gIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdHNsb3Quc3ByaXRlc1tzcHJpdGVOYW1lXS52aXNpYmxlID0gdHJ1ZTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR2YXIgc3ByaXRlID0gdGhpcy5jcmVhdGVTcHJpdGUoc2xvdCwgYXR0YWNobWVudC5yZW5kZXJlck9iamVjdCk7XG5cdFx0XHRcdFx0c2xvdENvbnRhaW5lci5hZGRDaGlsZChzcHJpdGUpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHNsb3QuY3VycmVudFNwcml0ZSA9IHNsb3Quc3ByaXRlc1tzcHJpdGVOYW1lXTtcblx0XHRcdFx0c2xvdC5jdXJyZW50U3ByaXRlTmFtZSA9IHNwcml0ZU5hbWU7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHNsb3RDb250YWluZXIudmlzaWJsZSA9IHRydWU7XG5cblx0XHR2YXIgYm9uZSA9IHNsb3QuYm9uZTtcblxuXHRcdHNsb3RDb250YWluZXIucG9zaXRpb24ueCA9IGJvbmUud29ybGRYICsgYXR0YWNobWVudC54ICogYm9uZS5tMDAgKyBhdHRhY2htZW50LnkgKiBib25lLm0wMTtcblx0XHRzbG90Q29udGFpbmVyLnBvc2l0aW9uLnkgPSBib25lLndvcmxkWSArIGF0dGFjaG1lbnQueCAqIGJvbmUubTEwICsgYXR0YWNobWVudC55ICogYm9uZS5tMTE7XG5cdFx0c2xvdENvbnRhaW5lci5zY2FsZS54ID0gYm9uZS53b3JsZFNjYWxlWDtcblx0XHRzbG90Q29udGFpbmVyLnNjYWxlLnkgPSBib25lLndvcmxkU2NhbGVZO1xuXG5cdFx0c2xvdENvbnRhaW5lci5yb3RhdGlvbiA9IC0oc2xvdC5ib25lLndvcmxkUm90YXRpb24gKiBNYXRoLlBJIC8gMTgwKTtcblx0fVxuXG5cdFBJWEkuRGlzcGxheU9iamVjdENvbnRhaW5lci5wcm90b3R5cGUudXBkYXRlVHJhbnNmb3JtLmNhbGwodGhpcyk7XG59O1xuXG5cblBJWEkuU3BpbmUucHJvdG90eXBlLmNyZWF0ZVNwcml0ZSA9IGZ1bmN0aW9uIChzbG90LCBkZXNjcmlwdG9yKSB7XG5cdHZhciBuYW1lID0gUElYSS5UZXh0dXJlQ2FjaGVbZGVzY3JpcHRvci5uYW1lXSA/IGRlc2NyaXB0b3IubmFtZSA6IGRlc2NyaXB0b3IubmFtZSArIFwiLnBuZ1wiO1xuXHR2YXIgc3ByaXRlID0gbmV3IFBJWEkuU3ByaXRlKFBJWEkuVGV4dHVyZS5mcm9tRnJhbWUobmFtZSkpO1xuXHRzcHJpdGUuc2NhbGUgPSBkZXNjcmlwdG9yLnNjYWxlO1xuXHRzcHJpdGUucm90YXRpb24gPSBkZXNjcmlwdG9yLnJvdGF0aW9uO1xuXHRzcHJpdGUuYW5jaG9yLnggPSBzcHJpdGUuYW5jaG9yLnkgPSAwLjU7XG5cblx0c2xvdC5zcHJpdGVzID0gc2xvdC5zcHJpdGVzIHx8IHt9O1xuXHRzbG90LnNwcml0ZXNbZGVzY3JpcHRvci5uYW1lXSA9IHNwcml0ZTtcblx0cmV0dXJuIHNwcml0ZTtcbn07XG5cbi8qXG4gKiBBd2Vzb21lIEpTIHJ1biB0aW1lIHByb3ZpZGVkIGJ5IEVzb3RlcmljU29mdHdhcmVcbiAqXG4gKiBodHRwczovL2dpdGh1Yi5jb20vRXNvdGVyaWNTb2Z0d2FyZS9zcGluZS1ydW50aW1lc1xuICpcbiAqL1xuXG52YXIgc3BpbmUgPSB7fTtcblxuc3BpbmUuQm9uZURhdGEgPSBmdW5jdGlvbiAobmFtZSwgcGFyZW50KSB7XG5cdHRoaXMubmFtZSA9IG5hbWU7XG5cdHRoaXMucGFyZW50ID0gcGFyZW50O1xufTtcbnNwaW5lLkJvbmVEYXRhLnByb3RvdHlwZSA9IHtcblx0bGVuZ3RoOiAwLFxuXHR4OiAwLCB5OiAwLFxuXHRyb3RhdGlvbjogMCxcblx0c2NhbGVYOiAxLCBzY2FsZVk6IDFcbn07XG5cbnNwaW5lLlNsb3REYXRhID0gZnVuY3Rpb24gKG5hbWUsIGJvbmVEYXRhKSB7XG5cdHRoaXMubmFtZSA9IG5hbWU7XG5cdHRoaXMuYm9uZURhdGEgPSBib25lRGF0YTtcbn07XG5zcGluZS5TbG90RGF0YS5wcm90b3R5cGUgPSB7XG5cdHI6IDEsIGc6IDEsIGI6IDEsIGE6IDEsXG5cdGF0dGFjaG1lbnROYW1lOiBudWxsXG59O1xuXG5zcGluZS5Cb25lID0gZnVuY3Rpb24gKGJvbmVEYXRhLCBwYXJlbnQpIHtcblx0dGhpcy5kYXRhID0gYm9uZURhdGE7XG5cdHRoaXMucGFyZW50ID0gcGFyZW50O1xuXHR0aGlzLnNldFRvU2V0dXBQb3NlKCk7XG59O1xuc3BpbmUuQm9uZS55RG93biA9IGZhbHNlO1xuc3BpbmUuQm9uZS5wcm90b3R5cGUgPSB7XG5cdHg6IDAsIHk6IDAsXG5cdHJvdGF0aW9uOiAwLFxuXHRzY2FsZVg6IDEsIHNjYWxlWTogMSxcblx0bTAwOiAwLCBtMDE6IDAsIHdvcmxkWDogMCwgLy8gYSBiIHhcblx0bTEwOiAwLCBtMTE6IDAsIHdvcmxkWTogMCwgLy8gYyBkIHlcblx0d29ybGRSb3RhdGlvbjogMCxcblx0d29ybGRTY2FsZVg6IDEsIHdvcmxkU2NhbGVZOiAxLFxuXHR1cGRhdGVXb3JsZFRyYW5zZm9ybTogZnVuY3Rpb24gKGZsaXBYLCBmbGlwWSkge1xuXHRcdHZhciBwYXJlbnQgPSB0aGlzLnBhcmVudDtcblx0XHRpZiAocGFyZW50ICE9IG51bGwpIHtcblx0XHRcdHRoaXMud29ybGRYID0gdGhpcy54ICogcGFyZW50Lm0wMCArIHRoaXMueSAqIHBhcmVudC5tMDEgKyBwYXJlbnQud29ybGRYO1xuXHRcdFx0dGhpcy53b3JsZFkgPSB0aGlzLnggKiBwYXJlbnQubTEwICsgdGhpcy55ICogcGFyZW50Lm0xMSArIHBhcmVudC53b3JsZFk7XG5cdFx0XHR0aGlzLndvcmxkU2NhbGVYID0gcGFyZW50LndvcmxkU2NhbGVYICogdGhpcy5zY2FsZVg7XG5cdFx0XHR0aGlzLndvcmxkU2NhbGVZID0gcGFyZW50LndvcmxkU2NhbGVZICogdGhpcy5zY2FsZVk7XG5cdFx0XHR0aGlzLndvcmxkUm90YXRpb24gPSBwYXJlbnQud29ybGRSb3RhdGlvbiArIHRoaXMucm90YXRpb247XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMud29ybGRYID0gdGhpcy54O1xuXHRcdFx0dGhpcy53b3JsZFkgPSB0aGlzLnk7XG5cdFx0XHR0aGlzLndvcmxkU2NhbGVYID0gdGhpcy5zY2FsZVg7XG5cdFx0XHR0aGlzLndvcmxkU2NhbGVZID0gdGhpcy5zY2FsZVk7XG5cdFx0XHR0aGlzLndvcmxkUm90YXRpb24gPSB0aGlzLnJvdGF0aW9uO1xuXHRcdH1cblx0XHR2YXIgcmFkaWFucyA9IHRoaXMud29ybGRSb3RhdGlvbiAqIE1hdGguUEkgLyAxODA7XG5cdFx0dmFyIGNvcyA9IE1hdGguY29zKHJhZGlhbnMpO1xuXHRcdHZhciBzaW4gPSBNYXRoLnNpbihyYWRpYW5zKTtcblx0XHR0aGlzLm0wMCA9IGNvcyAqIHRoaXMud29ybGRTY2FsZVg7XG5cdFx0dGhpcy5tMTAgPSBzaW4gKiB0aGlzLndvcmxkU2NhbGVYO1xuXHRcdHRoaXMubTAxID0gLXNpbiAqIHRoaXMud29ybGRTY2FsZVk7XG5cdFx0dGhpcy5tMTEgPSBjb3MgKiB0aGlzLndvcmxkU2NhbGVZO1xuXHRcdGlmIChmbGlwWCkge1xuXHRcdFx0dGhpcy5tMDAgPSAtdGhpcy5tMDA7XG5cdFx0XHR0aGlzLm0wMSA9IC10aGlzLm0wMTtcblx0XHR9XG5cdFx0aWYgKGZsaXBZKSB7XG5cdFx0XHR0aGlzLm0xMCA9IC10aGlzLm0xMDtcblx0XHRcdHRoaXMubTExID0gLXRoaXMubTExO1xuXHRcdH1cblx0XHRpZiAoc3BpbmUuQm9uZS55RG93bikge1xuXHRcdFx0dGhpcy5tMTAgPSAtdGhpcy5tMTA7XG5cdFx0XHR0aGlzLm0xMSA9IC10aGlzLm0xMTtcblx0XHR9XG5cdH0sXG5cdHNldFRvU2V0dXBQb3NlOiBmdW5jdGlvbiAoKSB7XG5cdFx0dmFyIGRhdGEgPSB0aGlzLmRhdGE7XG5cdFx0dGhpcy54ID0gZGF0YS54O1xuXHRcdHRoaXMueSA9IGRhdGEueTtcblx0XHR0aGlzLnJvdGF0aW9uID0gZGF0YS5yb3RhdGlvbjtcblx0XHR0aGlzLnNjYWxlWCA9IGRhdGEuc2NhbGVYO1xuXHRcdHRoaXMuc2NhbGVZID0gZGF0YS5zY2FsZVk7XG5cdH1cbn07XG5cbnNwaW5lLlNsb3QgPSBmdW5jdGlvbiAoc2xvdERhdGEsIHNrZWxldG9uLCBib25lKSB7XG5cdHRoaXMuZGF0YSA9IHNsb3REYXRhO1xuXHR0aGlzLnNrZWxldG9uID0gc2tlbGV0b247XG5cdHRoaXMuYm9uZSA9IGJvbmU7XG5cdHRoaXMuc2V0VG9TZXR1cFBvc2UoKTtcbn07XG5zcGluZS5TbG90LnByb3RvdHlwZSA9IHtcblx0cjogMSwgZzogMSwgYjogMSwgYTogMSxcblx0X2F0dGFjaG1lbnRUaW1lOiAwLFxuXHRhdHRhY2htZW50OiBudWxsLFxuXHRzZXRBdHRhY2htZW50OiBmdW5jdGlvbiAoYXR0YWNobWVudCkge1xuXHRcdHRoaXMuYXR0YWNobWVudCA9IGF0dGFjaG1lbnQ7XG5cdFx0dGhpcy5fYXR0YWNobWVudFRpbWUgPSB0aGlzLnNrZWxldG9uLnRpbWU7XG5cdH0sXG5cdHNldEF0dGFjaG1lbnRUaW1lOiBmdW5jdGlvbiAodGltZSkge1xuXHRcdHRoaXMuX2F0dGFjaG1lbnRUaW1lID0gdGhpcy5za2VsZXRvbi50aW1lIC0gdGltZTtcblx0fSxcblx0Z2V0QXR0YWNobWVudFRpbWU6IGZ1bmN0aW9uICgpIHtcblx0XHRyZXR1cm4gdGhpcy5za2VsZXRvbi50aW1lIC0gdGhpcy5fYXR0YWNobWVudFRpbWU7XG5cdH0sXG5cdHNldFRvU2V0dXBQb3NlOiBmdW5jdGlvbiAoKSB7XG5cdFx0dmFyIGRhdGEgPSB0aGlzLmRhdGE7XG5cdFx0dGhpcy5yID0gZGF0YS5yO1xuXHRcdHRoaXMuZyA9IGRhdGEuZztcblx0XHR0aGlzLmIgPSBkYXRhLmI7XG5cdFx0dGhpcy5hID0gZGF0YS5hO1xuXG5cdFx0dmFyIHNsb3REYXRhcyA9IHRoaXMuc2tlbGV0b24uZGF0YS5zbG90cztcblx0XHRmb3IgKHZhciBpID0gMCwgbiA9IHNsb3REYXRhcy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcblx0XHRcdGlmIChzbG90RGF0YXNbaV0gPT0gZGF0YSkge1xuXHRcdFx0XHR0aGlzLnNldEF0dGFjaG1lbnQoIWRhdGEuYXR0YWNobWVudE5hbWUgPyBudWxsIDogdGhpcy5za2VsZXRvbi5nZXRBdHRhY2htZW50QnlTbG90SW5kZXgoaSwgZGF0YS5hdHRhY2htZW50TmFtZSkpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHR9XG5cdH1cbn07XG5cbnNwaW5lLlNraW4gPSBmdW5jdGlvbiAobmFtZSkge1xuXHR0aGlzLm5hbWUgPSBuYW1lO1xuXHR0aGlzLmF0dGFjaG1lbnRzID0ge307XG59O1xuc3BpbmUuU2tpbi5wcm90b3R5cGUgPSB7XG5cdGFkZEF0dGFjaG1lbnQ6IGZ1bmN0aW9uIChzbG90SW5kZXgsIG5hbWUsIGF0dGFjaG1lbnQpIHtcblx0XHR0aGlzLmF0dGFjaG1lbnRzW3Nsb3RJbmRleCArIFwiOlwiICsgbmFtZV0gPSBhdHRhY2htZW50O1xuXHR9LFxuXHRnZXRBdHRhY2htZW50OiBmdW5jdGlvbiAoc2xvdEluZGV4LCBuYW1lKSB7XG5cdFx0cmV0dXJuIHRoaXMuYXR0YWNobWVudHNbc2xvdEluZGV4ICsgXCI6XCIgKyBuYW1lXTtcblx0fSxcblx0X2F0dGFjaEFsbDogZnVuY3Rpb24gKHNrZWxldG9uLCBvbGRTa2luKSB7XG5cdFx0Zm9yICh2YXIga2V5IGluIG9sZFNraW4uYXR0YWNobWVudHMpIHtcblx0XHRcdHZhciBjb2xvbiA9IGtleS5pbmRleE9mKFwiOlwiKTtcblx0XHRcdHZhciBzbG90SW5kZXggPSBwYXJzZUludChrZXkuc3Vic3RyaW5nKDAsIGNvbG9uKSk7XG5cdFx0XHR2YXIgbmFtZSA9IGtleS5zdWJzdHJpbmcoY29sb24gKyAxKTtcblx0XHRcdHZhciBzbG90ID0gc2tlbGV0b24uc2xvdHNbc2xvdEluZGV4XTtcblx0XHRcdGlmIChzbG90LmF0dGFjaG1lbnQgJiYgc2xvdC5hdHRhY2htZW50Lm5hbWUgPT0gbmFtZSkge1xuXHRcdFx0XHR2YXIgYXR0YWNobWVudCA9IHRoaXMuZ2V0QXR0YWNobWVudChzbG90SW5kZXgsIG5hbWUpO1xuXHRcdFx0XHRpZiAoYXR0YWNobWVudCkgc2xvdC5zZXRBdHRhY2htZW50KGF0dGFjaG1lbnQpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxufTtcblxuc3BpbmUuQW5pbWF0aW9uID0gZnVuY3Rpb24gKG5hbWUsIHRpbWVsaW5lcywgZHVyYXRpb24pIHtcblx0dGhpcy5uYW1lID0gbmFtZTtcblx0dGhpcy50aW1lbGluZXMgPSB0aW1lbGluZXM7XG5cdHRoaXMuZHVyYXRpb24gPSBkdXJhdGlvbjtcbn07XG5zcGluZS5BbmltYXRpb24ucHJvdG90eXBlID0ge1xuXHRhcHBseTogZnVuY3Rpb24gKHNrZWxldG9uLCB0aW1lLCBsb29wKSB7XG5cdFx0aWYgKGxvb3AgJiYgdGhpcy5kdXJhdGlvbiAhPSAwKSB0aW1lICU9IHRoaXMuZHVyYXRpb247XG5cdFx0dmFyIHRpbWVsaW5lcyA9IHRoaXMudGltZWxpbmVzO1xuXHRcdGZvciAodmFyIGkgPSAwLCBuID0gdGltZWxpbmVzLmxlbmd0aDsgaSA8IG47IGkrKylcblx0XHRcdHRpbWVsaW5lc1tpXS5hcHBseShza2VsZXRvbiwgdGltZSwgMSk7XG5cdH0sXG5cdG1peDogZnVuY3Rpb24gKHNrZWxldG9uLCB0aW1lLCBsb29wLCBhbHBoYSkge1xuXHRcdGlmIChsb29wICYmIHRoaXMuZHVyYXRpb24gIT0gMCkgdGltZSAlPSB0aGlzLmR1cmF0aW9uO1xuXHRcdHZhciB0aW1lbGluZXMgPSB0aGlzLnRpbWVsaW5lcztcblx0XHRmb3IgKHZhciBpID0gMCwgbiA9IHRpbWVsaW5lcy5sZW5ndGg7IGkgPCBuOyBpKyspXG5cdFx0XHR0aW1lbGluZXNbaV0uYXBwbHkoc2tlbGV0b24sIHRpbWUsIGFscGhhKTtcblx0fVxufTtcblxuc3BpbmUuYmluYXJ5U2VhcmNoID0gZnVuY3Rpb24gKHZhbHVlcywgdGFyZ2V0LCBzdGVwKSB7XG5cdHZhciBsb3cgPSAwO1xuXHR2YXIgaGlnaCA9IE1hdGguZmxvb3IodmFsdWVzLmxlbmd0aCAvIHN0ZXApIC0gMjtcblx0aWYgKGhpZ2ggPT0gMCkgcmV0dXJuIHN0ZXA7XG5cdHZhciBjdXJyZW50ID0gaGlnaCA+Pj4gMTtcblx0d2hpbGUgKHRydWUpIHtcblx0XHRpZiAodmFsdWVzWyhjdXJyZW50ICsgMSkgKiBzdGVwXSA8PSB0YXJnZXQpXG5cdFx0XHRsb3cgPSBjdXJyZW50ICsgMTtcblx0XHRlbHNlXG5cdFx0XHRoaWdoID0gY3VycmVudDtcblx0XHRpZiAobG93ID09IGhpZ2gpIHJldHVybiAobG93ICsgMSkgKiBzdGVwO1xuXHRcdGN1cnJlbnQgPSAobG93ICsgaGlnaCkgPj4+IDE7XG5cdH1cbn07XG5zcGluZS5saW5lYXJTZWFyY2ggPSBmdW5jdGlvbiAodmFsdWVzLCB0YXJnZXQsIHN0ZXApIHtcblx0Zm9yICh2YXIgaSA9IDAsIGxhc3QgPSB2YWx1ZXMubGVuZ3RoIC0gc3RlcDsgaSA8PSBsYXN0OyBpICs9IHN0ZXApXG5cdFx0aWYgKHZhbHVlc1tpXSA+IHRhcmdldCkgcmV0dXJuIGk7XG5cdHJldHVybiAtMTtcbn07XG5cbnNwaW5lLkN1cnZlcyA9IGZ1bmN0aW9uIChmcmFtZUNvdW50KSB7XG5cdHRoaXMuY3VydmVzID0gW107IC8vIGRmeCwgZGZ5LCBkZGZ4LCBkZGZ5LCBkZGRmeCwgZGRkZnksIC4uLlxuXHR0aGlzLmN1cnZlcy5sZW5ndGggPSAoZnJhbWVDb3VudCAtIDEpICogNjtcbn07XG5zcGluZS5DdXJ2ZXMucHJvdG90eXBlID0ge1xuXHRzZXRMaW5lYXI6IGZ1bmN0aW9uIChmcmFtZUluZGV4KSB7XG5cdFx0dGhpcy5jdXJ2ZXNbZnJhbWVJbmRleCAqIDZdID0gMC8qTElORUFSKi87XG5cdH0sXG5cdHNldFN0ZXBwZWQ6IGZ1bmN0aW9uIChmcmFtZUluZGV4KSB7XG5cdFx0dGhpcy5jdXJ2ZXNbZnJhbWVJbmRleCAqIDZdID0gLTEvKlNURVBQRUQqLztcblx0fSxcblx0LyoqIFNldHMgdGhlIGNvbnRyb2wgaGFuZGxlIHBvc2l0aW9ucyBmb3IgYW4gaW50ZXJwb2xhdGlvbiBiZXppZXIgY3VydmUgdXNlZCB0byB0cmFuc2l0aW9uIGZyb20gdGhpcyBrZXlmcmFtZSB0byB0aGUgbmV4dC5cblx0ICogY3gxIGFuZCBjeDIgYXJlIGZyb20gMCB0byAxLCByZXByZXNlbnRpbmcgdGhlIHBlcmNlbnQgb2YgdGltZSBiZXR3ZWVuIHRoZSB0d28ga2V5ZnJhbWVzLiBjeTEgYW5kIGN5MiBhcmUgdGhlIHBlcmNlbnQgb2Zcblx0ICogdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiB0aGUga2V5ZnJhbWUncyB2YWx1ZXMuICovXG5cdHNldEN1cnZlOiBmdW5jdGlvbiAoZnJhbWVJbmRleCwgY3gxLCBjeTEsIGN4MiwgY3kyKSB7XG5cdFx0dmFyIHN1YmRpdl9zdGVwID0gMSAvIDEwLypCRVpJRVJfU0VHTUVOVFMqLztcblx0XHR2YXIgc3ViZGl2X3N0ZXAyID0gc3ViZGl2X3N0ZXAgKiBzdWJkaXZfc3RlcDtcblx0XHR2YXIgc3ViZGl2X3N0ZXAzID0gc3ViZGl2X3N0ZXAyICogc3ViZGl2X3N0ZXA7XG5cdFx0dmFyIHByZTEgPSAzICogc3ViZGl2X3N0ZXA7XG5cdFx0dmFyIHByZTIgPSAzICogc3ViZGl2X3N0ZXAyO1xuXHRcdHZhciBwcmU0ID0gNiAqIHN1YmRpdl9zdGVwMjtcblx0XHR2YXIgcHJlNSA9IDYgKiBzdWJkaXZfc3RlcDM7XG5cdFx0dmFyIHRtcDF4ID0gLWN4MSAqIDIgKyBjeDI7XG5cdFx0dmFyIHRtcDF5ID0gLWN5MSAqIDIgKyBjeTI7XG5cdFx0dmFyIHRtcDJ4ID0gKGN4MSAtIGN4MikgKiAzICsgMTtcblx0XHR2YXIgdG1wMnkgPSAoY3kxIC0gY3kyKSAqIDMgKyAxO1xuXHRcdHZhciBpID0gZnJhbWVJbmRleCAqIDY7XG5cdFx0dmFyIGN1cnZlcyA9IHRoaXMuY3VydmVzO1xuXHRcdGN1cnZlc1tpXSA9IGN4MSAqIHByZTEgKyB0bXAxeCAqIHByZTIgKyB0bXAyeCAqIHN1YmRpdl9zdGVwMztcblx0XHRjdXJ2ZXNbaSArIDFdID0gY3kxICogcHJlMSArIHRtcDF5ICogcHJlMiArIHRtcDJ5ICogc3ViZGl2X3N0ZXAzO1xuXHRcdGN1cnZlc1tpICsgMl0gPSB0bXAxeCAqIHByZTQgKyB0bXAyeCAqIHByZTU7XG5cdFx0Y3VydmVzW2kgKyAzXSA9IHRtcDF5ICogcHJlNCArIHRtcDJ5ICogcHJlNTtcblx0XHRjdXJ2ZXNbaSArIDRdID0gdG1wMnggKiBwcmU1O1xuXHRcdGN1cnZlc1tpICsgNV0gPSB0bXAyeSAqIHByZTU7XG5cdH0sXG5cdGdldEN1cnZlUGVyY2VudDogZnVuY3Rpb24gKGZyYW1lSW5kZXgsIHBlcmNlbnQpIHtcblx0XHRwZXJjZW50ID0gcGVyY2VudCA8IDAgPyAwIDogKHBlcmNlbnQgPiAxID8gMSA6IHBlcmNlbnQpO1xuXHRcdHZhciBjdXJ2ZUluZGV4ID0gZnJhbWVJbmRleCAqIDY7XG5cdFx0dmFyIGN1cnZlcyA9IHRoaXMuY3VydmVzO1xuXHRcdHZhciBkZnggPSBjdXJ2ZXNbY3VydmVJbmRleF07XG5cdFx0aWYgKCFkZngvKkxJTkVBUiovKSByZXR1cm4gcGVyY2VudDtcblx0XHRpZiAoZGZ4ID09IC0xLypTVEVQUEVEKi8pIHJldHVybiAwO1xuXHRcdHZhciBkZnkgPSBjdXJ2ZXNbY3VydmVJbmRleCArIDFdO1xuXHRcdHZhciBkZGZ4ID0gY3VydmVzW2N1cnZlSW5kZXggKyAyXTtcblx0XHR2YXIgZGRmeSA9IGN1cnZlc1tjdXJ2ZUluZGV4ICsgM107XG5cdFx0dmFyIGRkZGZ4ID0gY3VydmVzW2N1cnZlSW5kZXggKyA0XTtcblx0XHR2YXIgZGRkZnkgPSBjdXJ2ZXNbY3VydmVJbmRleCArIDVdO1xuXHRcdHZhciB4ID0gZGZ4LCB5ID0gZGZ5O1xuXHRcdHZhciBpID0gMTAvKkJFWklFUl9TRUdNRU5UUyovIC0gMjtcblx0XHR3aGlsZSAodHJ1ZSkge1xuXHRcdFx0aWYgKHggPj0gcGVyY2VudCkge1xuXHRcdFx0XHR2YXIgbGFzdFggPSB4IC0gZGZ4O1xuXHRcdFx0XHR2YXIgbGFzdFkgPSB5IC0gZGZ5O1xuXHRcdFx0XHRyZXR1cm4gbGFzdFkgKyAoeSAtIGxhc3RZKSAqIChwZXJjZW50IC0gbGFzdFgpIC8gKHggLSBsYXN0WCk7XG5cdFx0XHR9XG5cdFx0XHRpZiAoaSA9PSAwKSBicmVhaztcblx0XHRcdGktLTtcblx0XHRcdGRmeCArPSBkZGZ4O1xuXHRcdFx0ZGZ5ICs9IGRkZnk7XG5cdFx0XHRkZGZ4ICs9IGRkZGZ4O1xuXHRcdFx0ZGRmeSArPSBkZGRmeTtcblx0XHRcdHggKz0gZGZ4O1xuXHRcdFx0eSArPSBkZnk7XG5cdFx0fVxuXHRcdHJldHVybiB5ICsgKDEgLSB5KSAqIChwZXJjZW50IC0geCkgLyAoMSAtIHgpOyAvLyBMYXN0IHBvaW50IGlzIDEsMS5cblx0fVxufTtcblxuc3BpbmUuUm90YXRlVGltZWxpbmUgPSBmdW5jdGlvbiAoZnJhbWVDb3VudCkge1xuXHR0aGlzLmN1cnZlcyA9IG5ldyBzcGluZS5DdXJ2ZXMoZnJhbWVDb3VudCk7XG5cdHRoaXMuZnJhbWVzID0gW107IC8vIHRpbWUsIGFuZ2xlLCAuLi5cblx0dGhpcy5mcmFtZXMubGVuZ3RoID0gZnJhbWVDb3VudCAqIDI7XG59O1xuc3BpbmUuUm90YXRlVGltZWxpbmUucHJvdG90eXBlID0ge1xuXHRib25lSW5kZXg6IDAsXG5cdGdldEZyYW1lQ291bnQ6IGZ1bmN0aW9uICgpIHtcblx0XHRyZXR1cm4gdGhpcy5mcmFtZXMubGVuZ3RoIC8gMjtcblx0fSxcblx0c2V0RnJhbWU6IGZ1bmN0aW9uIChmcmFtZUluZGV4LCB0aW1lLCBhbmdsZSkge1xuXHRcdGZyYW1lSW5kZXggKj0gMjtcblx0XHR0aGlzLmZyYW1lc1tmcmFtZUluZGV4XSA9IHRpbWU7XG5cdFx0dGhpcy5mcmFtZXNbZnJhbWVJbmRleCArIDFdID0gYW5nbGU7XG5cdH0sXG5cdGFwcGx5OiBmdW5jdGlvbiAoc2tlbGV0b24sIHRpbWUsIGFscGhhKSB7XG5cdFx0dmFyIGZyYW1lcyA9IHRoaXMuZnJhbWVzO1xuXHRcdGlmICh0aW1lIDwgZnJhbWVzWzBdKSByZXR1cm47IC8vIFRpbWUgaXMgYmVmb3JlIGZpcnN0IGZyYW1lLlxuXG5cdFx0dmFyIGJvbmUgPSBza2VsZXRvbi5ib25lc1t0aGlzLmJvbmVJbmRleF07XG5cblx0XHRpZiAodGltZSA+PSBmcmFtZXNbZnJhbWVzLmxlbmd0aCAtIDJdKSB7IC8vIFRpbWUgaXMgYWZ0ZXIgbGFzdCBmcmFtZS5cblx0XHRcdHZhciBhbW91bnQgPSBib25lLmRhdGEucm90YXRpb24gKyBmcmFtZXNbZnJhbWVzLmxlbmd0aCAtIDFdIC0gYm9uZS5yb3RhdGlvbjtcblx0XHRcdHdoaWxlIChhbW91bnQgPiAxODApXG5cdFx0XHRcdGFtb3VudCAtPSAzNjA7XG5cdFx0XHR3aGlsZSAoYW1vdW50IDwgLTE4MClcblx0XHRcdFx0YW1vdW50ICs9IDM2MDtcblx0XHRcdGJvbmUucm90YXRpb24gKz0gYW1vdW50ICogYWxwaGE7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gSW50ZXJwb2xhdGUgYmV0d2VlbiB0aGUgbGFzdCBmcmFtZSBhbmQgdGhlIGN1cnJlbnQgZnJhbWUuXG5cdFx0dmFyIGZyYW1lSW5kZXggPSBzcGluZS5iaW5hcnlTZWFyY2goZnJhbWVzLCB0aW1lLCAyKTtcblx0XHR2YXIgbGFzdEZyYW1lVmFsdWUgPSBmcmFtZXNbZnJhbWVJbmRleCAtIDFdO1xuXHRcdHZhciBmcmFtZVRpbWUgPSBmcmFtZXNbZnJhbWVJbmRleF07XG5cdFx0dmFyIHBlcmNlbnQgPSAxIC0gKHRpbWUgLSBmcmFtZVRpbWUpIC8gKGZyYW1lc1tmcmFtZUluZGV4IC0gMi8qTEFTVF9GUkFNRV9USU1FKi9dIC0gZnJhbWVUaW1lKTtcblx0XHRwZXJjZW50ID0gdGhpcy5jdXJ2ZXMuZ2V0Q3VydmVQZXJjZW50KGZyYW1lSW5kZXggLyAyIC0gMSwgcGVyY2VudCk7XG5cblx0XHR2YXIgYW1vdW50ID0gZnJhbWVzW2ZyYW1lSW5kZXggKyAxLypGUkFNRV9WQUxVRSovXSAtIGxhc3RGcmFtZVZhbHVlO1xuXHRcdHdoaWxlIChhbW91bnQgPiAxODApXG5cdFx0XHRhbW91bnQgLT0gMzYwO1xuXHRcdHdoaWxlIChhbW91bnQgPCAtMTgwKVxuXHRcdFx0YW1vdW50ICs9IDM2MDtcblx0XHRhbW91bnQgPSBib25lLmRhdGEucm90YXRpb24gKyAobGFzdEZyYW1lVmFsdWUgKyBhbW91bnQgKiBwZXJjZW50KSAtIGJvbmUucm90YXRpb247XG5cdFx0d2hpbGUgKGFtb3VudCA+IDE4MClcblx0XHRcdGFtb3VudCAtPSAzNjA7XG5cdFx0d2hpbGUgKGFtb3VudCA8IC0xODApXG5cdFx0XHRhbW91bnQgKz0gMzYwO1xuXHRcdGJvbmUucm90YXRpb24gKz0gYW1vdW50ICogYWxwaGE7XG5cdH1cbn07XG5cbnNwaW5lLlRyYW5zbGF0ZVRpbWVsaW5lID0gZnVuY3Rpb24gKGZyYW1lQ291bnQpIHtcblx0dGhpcy5jdXJ2ZXMgPSBuZXcgc3BpbmUuQ3VydmVzKGZyYW1lQ291bnQpO1xuXHR0aGlzLmZyYW1lcyA9IFtdOyAvLyB0aW1lLCB4LCB5LCAuLi5cblx0dGhpcy5mcmFtZXMubGVuZ3RoID0gZnJhbWVDb3VudCAqIDM7XG59O1xuc3BpbmUuVHJhbnNsYXRlVGltZWxpbmUucHJvdG90eXBlID0ge1xuXHRib25lSW5kZXg6IDAsXG5cdGdldEZyYW1lQ291bnQ6IGZ1bmN0aW9uICgpIHtcblx0XHRyZXR1cm4gdGhpcy5mcmFtZXMubGVuZ3RoIC8gMztcblx0fSxcblx0c2V0RnJhbWU6IGZ1bmN0aW9uIChmcmFtZUluZGV4LCB0aW1lLCB4LCB5KSB7XG5cdFx0ZnJhbWVJbmRleCAqPSAzO1xuXHRcdHRoaXMuZnJhbWVzW2ZyYW1lSW5kZXhdID0gdGltZTtcblx0XHR0aGlzLmZyYW1lc1tmcmFtZUluZGV4ICsgMV0gPSB4O1xuXHRcdHRoaXMuZnJhbWVzW2ZyYW1lSW5kZXggKyAyXSA9IHk7XG5cdH0sXG5cdGFwcGx5OiBmdW5jdGlvbiAoc2tlbGV0b24sIHRpbWUsIGFscGhhKSB7XG5cdFx0dmFyIGZyYW1lcyA9IHRoaXMuZnJhbWVzO1xuXHRcdGlmICh0aW1lIDwgZnJhbWVzWzBdKSByZXR1cm47IC8vIFRpbWUgaXMgYmVmb3JlIGZpcnN0IGZyYW1lLlxuXG5cdFx0dmFyIGJvbmUgPSBza2VsZXRvbi5ib25lc1t0aGlzLmJvbmVJbmRleF07XG5cblx0XHRpZiAodGltZSA+PSBmcmFtZXNbZnJhbWVzLmxlbmd0aCAtIDNdKSB7IC8vIFRpbWUgaXMgYWZ0ZXIgbGFzdCBmcmFtZS5cblx0XHRcdGJvbmUueCArPSAoYm9uZS5kYXRhLnggKyBmcmFtZXNbZnJhbWVzLmxlbmd0aCAtIDJdIC0gYm9uZS54KSAqIGFscGhhO1xuXHRcdFx0Ym9uZS55ICs9IChib25lLmRhdGEueSArIGZyYW1lc1tmcmFtZXMubGVuZ3RoIC0gMV0gLSBib25lLnkpICogYWxwaGE7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gSW50ZXJwb2xhdGUgYmV0d2VlbiB0aGUgbGFzdCBmcmFtZSBhbmQgdGhlIGN1cnJlbnQgZnJhbWUuXG5cdFx0dmFyIGZyYW1lSW5kZXggPSBzcGluZS5iaW5hcnlTZWFyY2goZnJhbWVzLCB0aW1lLCAzKTtcblx0XHR2YXIgbGFzdEZyYW1lWCA9IGZyYW1lc1tmcmFtZUluZGV4IC0gMl07XG5cdFx0dmFyIGxhc3RGcmFtZVkgPSBmcmFtZXNbZnJhbWVJbmRleCAtIDFdO1xuXHRcdHZhciBmcmFtZVRpbWUgPSBmcmFtZXNbZnJhbWVJbmRleF07XG5cdFx0dmFyIHBlcmNlbnQgPSAxIC0gKHRpbWUgLSBmcmFtZVRpbWUpIC8gKGZyYW1lc1tmcmFtZUluZGV4ICsgLTMvKkxBU1RfRlJBTUVfVElNRSovXSAtIGZyYW1lVGltZSk7XG5cdFx0cGVyY2VudCA9IHRoaXMuY3VydmVzLmdldEN1cnZlUGVyY2VudChmcmFtZUluZGV4IC8gMyAtIDEsIHBlcmNlbnQpO1xuXG5cdFx0Ym9uZS54ICs9IChib25lLmRhdGEueCArIGxhc3RGcmFtZVggKyAoZnJhbWVzW2ZyYW1lSW5kZXggKyAxLypGUkFNRV9YKi9dIC0gbGFzdEZyYW1lWCkgKiBwZXJjZW50IC0gYm9uZS54KSAqIGFscGhhO1xuXHRcdGJvbmUueSArPSAoYm9uZS5kYXRhLnkgKyBsYXN0RnJhbWVZICsgKGZyYW1lc1tmcmFtZUluZGV4ICsgMi8qRlJBTUVfWSovXSAtIGxhc3RGcmFtZVkpICogcGVyY2VudCAtIGJvbmUueSkgKiBhbHBoYTtcblx0fVxufTtcblxuc3BpbmUuU2NhbGVUaW1lbGluZSA9IGZ1bmN0aW9uIChmcmFtZUNvdW50KSB7XG5cdHRoaXMuY3VydmVzID0gbmV3IHNwaW5lLkN1cnZlcyhmcmFtZUNvdW50KTtcblx0dGhpcy5mcmFtZXMgPSBbXTsgLy8gdGltZSwgeCwgeSwgLi4uXG5cdHRoaXMuZnJhbWVzLmxlbmd0aCA9IGZyYW1lQ291bnQgKiAzO1xufTtcbnNwaW5lLlNjYWxlVGltZWxpbmUucHJvdG90eXBlID0ge1xuXHRib25lSW5kZXg6IDAsXG5cdGdldEZyYW1lQ291bnQ6IGZ1bmN0aW9uICgpIHtcblx0XHRyZXR1cm4gdGhpcy5mcmFtZXMubGVuZ3RoIC8gMztcblx0fSxcblx0c2V0RnJhbWU6IGZ1bmN0aW9uIChmcmFtZUluZGV4LCB0aW1lLCB4LCB5KSB7XG5cdFx0ZnJhbWVJbmRleCAqPSAzO1xuXHRcdHRoaXMuZnJhbWVzW2ZyYW1lSW5kZXhdID0gdGltZTtcblx0XHR0aGlzLmZyYW1lc1tmcmFtZUluZGV4ICsgMV0gPSB4O1xuXHRcdHRoaXMuZnJhbWVzW2ZyYW1lSW5kZXggKyAyXSA9IHk7XG5cdH0sXG5cdGFwcGx5OiBmdW5jdGlvbiAoc2tlbGV0b24sIHRpbWUsIGFscGhhKSB7XG5cdFx0dmFyIGZyYW1lcyA9IHRoaXMuZnJhbWVzO1xuXHRcdGlmICh0aW1lIDwgZnJhbWVzWzBdKSByZXR1cm47IC8vIFRpbWUgaXMgYmVmb3JlIGZpcnN0IGZyYW1lLlxuXG5cdFx0dmFyIGJvbmUgPSBza2VsZXRvbi5ib25lc1t0aGlzLmJvbmVJbmRleF07XG5cblx0XHRpZiAodGltZSA+PSBmcmFtZXNbZnJhbWVzLmxlbmd0aCAtIDNdKSB7IC8vIFRpbWUgaXMgYWZ0ZXIgbGFzdCBmcmFtZS5cblx0XHRcdGJvbmUuc2NhbGVYICs9IChib25lLmRhdGEuc2NhbGVYIC0gMSArIGZyYW1lc1tmcmFtZXMubGVuZ3RoIC0gMl0gLSBib25lLnNjYWxlWCkgKiBhbHBoYTtcblx0XHRcdGJvbmUuc2NhbGVZICs9IChib25lLmRhdGEuc2NhbGVZIC0gMSArIGZyYW1lc1tmcmFtZXMubGVuZ3RoIC0gMV0gLSBib25lLnNjYWxlWSkgKiBhbHBoYTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBJbnRlcnBvbGF0ZSBiZXR3ZWVuIHRoZSBsYXN0IGZyYW1lIGFuZCB0aGUgY3VycmVudCBmcmFtZS5cblx0XHR2YXIgZnJhbWVJbmRleCA9IHNwaW5lLmJpbmFyeVNlYXJjaChmcmFtZXMsIHRpbWUsIDMpO1xuXHRcdHZhciBsYXN0RnJhbWVYID0gZnJhbWVzW2ZyYW1lSW5kZXggLSAyXTtcblx0XHR2YXIgbGFzdEZyYW1lWSA9IGZyYW1lc1tmcmFtZUluZGV4IC0gMV07XG5cdFx0dmFyIGZyYW1lVGltZSA9IGZyYW1lc1tmcmFtZUluZGV4XTtcblx0XHR2YXIgcGVyY2VudCA9IDEgLSAodGltZSAtIGZyYW1lVGltZSkgLyAoZnJhbWVzW2ZyYW1lSW5kZXggKyAtMy8qTEFTVF9GUkFNRV9USU1FKi9dIC0gZnJhbWVUaW1lKTtcblx0XHRwZXJjZW50ID0gdGhpcy5jdXJ2ZXMuZ2V0Q3VydmVQZXJjZW50KGZyYW1lSW5kZXggLyAzIC0gMSwgcGVyY2VudCk7XG5cblx0XHRib25lLnNjYWxlWCArPSAoYm9uZS5kYXRhLnNjYWxlWCAtIDEgKyBsYXN0RnJhbWVYICsgKGZyYW1lc1tmcmFtZUluZGV4ICsgMS8qRlJBTUVfWCovXSAtIGxhc3RGcmFtZVgpICogcGVyY2VudCAtIGJvbmUuc2NhbGVYKSAqIGFscGhhO1xuXHRcdGJvbmUuc2NhbGVZICs9IChib25lLmRhdGEuc2NhbGVZIC0gMSArIGxhc3RGcmFtZVkgKyAoZnJhbWVzW2ZyYW1lSW5kZXggKyAyLypGUkFNRV9ZKi9dIC0gbGFzdEZyYW1lWSkgKiBwZXJjZW50IC0gYm9uZS5zY2FsZVkpICogYWxwaGE7XG5cdH1cbn07XG5cbnNwaW5lLkNvbG9yVGltZWxpbmUgPSBmdW5jdGlvbiAoZnJhbWVDb3VudCkge1xuXHR0aGlzLmN1cnZlcyA9IG5ldyBzcGluZS5DdXJ2ZXMoZnJhbWVDb3VudCk7XG5cdHRoaXMuZnJhbWVzID0gW107IC8vIHRpbWUsIHIsIGcsIGIsIGEsIC4uLlxuXHR0aGlzLmZyYW1lcy5sZW5ndGggPSBmcmFtZUNvdW50ICogNTtcbn07XG5zcGluZS5Db2xvclRpbWVsaW5lLnByb3RvdHlwZSA9IHtcblx0c2xvdEluZGV4OiAwLFxuXHRnZXRGcmFtZUNvdW50OiBmdW5jdGlvbiAoKSB7XG5cdFx0cmV0dXJuIHRoaXMuZnJhbWVzLmxlbmd0aCAvIDI7XG5cdH0sXG5cdHNldEZyYW1lOiBmdW5jdGlvbiAoZnJhbWVJbmRleCwgdGltZSwgeCwgeSkge1xuXHRcdGZyYW1lSW5kZXggKj0gNTtcblx0XHR0aGlzLmZyYW1lc1tmcmFtZUluZGV4XSA9IHRpbWU7XG5cdFx0dGhpcy5mcmFtZXNbZnJhbWVJbmRleCArIDFdID0gcjtcblx0XHR0aGlzLmZyYW1lc1tmcmFtZUluZGV4ICsgMl0gPSBnO1xuXHRcdHRoaXMuZnJhbWVzW2ZyYW1lSW5kZXggKyAzXSA9IGI7XG5cdFx0dGhpcy5mcmFtZXNbZnJhbWVJbmRleCArIDRdID0gYTtcblx0fSxcblx0YXBwbHk6IGZ1bmN0aW9uIChza2VsZXRvbiwgdGltZSwgYWxwaGEpIHtcblx0XHR2YXIgZnJhbWVzID0gdGhpcy5mcmFtZXM7XG5cdFx0aWYgKHRpbWUgPCBmcmFtZXNbMF0pIHJldHVybjsgLy8gVGltZSBpcyBiZWZvcmUgZmlyc3QgZnJhbWUuXG5cblx0XHR2YXIgc2xvdCA9IHNrZWxldG9uLnNsb3RzW3RoaXMuc2xvdEluZGV4XTtcblxuXHRcdGlmICh0aW1lID49IGZyYW1lc1tmcmFtZXMubGVuZ3RoIC0gNV0pIHsgLy8gVGltZSBpcyBhZnRlciBsYXN0IGZyYW1lLlxuXHRcdFx0dmFyIGkgPSBmcmFtZXMubGVuZ3RoIC0gMTtcblx0XHRcdHNsb3QuciA9IGZyYW1lc1tpIC0gM107XG5cdFx0XHRzbG90LmcgPSBmcmFtZXNbaSAtIDJdO1xuXHRcdFx0c2xvdC5iID0gZnJhbWVzW2kgLSAxXTtcblx0XHRcdHNsb3QuYSA9IGZyYW1lc1tpXTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBJbnRlcnBvbGF0ZSBiZXR3ZWVuIHRoZSBsYXN0IGZyYW1lIGFuZCB0aGUgY3VycmVudCBmcmFtZS5cblx0XHR2YXIgZnJhbWVJbmRleCA9IHNwaW5lLmJpbmFyeVNlYXJjaChmcmFtZXMsIHRpbWUsIDUpO1xuXHRcdHZhciBsYXN0RnJhbWVSID0gZnJhbWVzW2ZyYW1lSW5kZXggLSA0XTtcblx0XHR2YXIgbGFzdEZyYW1lRyA9IGZyYW1lc1tmcmFtZUluZGV4IC0gM107XG5cdFx0dmFyIGxhc3RGcmFtZUIgPSBmcmFtZXNbZnJhbWVJbmRleCAtIDJdO1xuXHRcdHZhciBsYXN0RnJhbWVBID0gZnJhbWVzW2ZyYW1lSW5kZXggLSAxXTtcblx0XHR2YXIgZnJhbWVUaW1lID0gZnJhbWVzW2ZyYW1lSW5kZXhdO1xuXHRcdHZhciBwZXJjZW50ID0gMSAtICh0aW1lIC0gZnJhbWVUaW1lKSAvIChmcmFtZXNbZnJhbWVJbmRleCAtIDUvKkxBU1RfRlJBTUVfVElNRSovXSAtIGZyYW1lVGltZSk7XG5cdFx0cGVyY2VudCA9IHRoaXMuY3VydmVzLmdldEN1cnZlUGVyY2VudChmcmFtZUluZGV4IC8gNSAtIDEsIHBlcmNlbnQpO1xuXG5cdFx0dmFyIHIgPSBsYXN0RnJhbWVSICsgKGZyYW1lc1tmcmFtZUluZGV4ICsgMS8qRlJBTUVfUiovXSAtIGxhc3RGcmFtZVIpICogcGVyY2VudDtcblx0XHR2YXIgZyA9IGxhc3RGcmFtZUcgKyAoZnJhbWVzW2ZyYW1lSW5kZXggKyAyLypGUkFNRV9HKi9dIC0gbGFzdEZyYW1lRykgKiBwZXJjZW50O1xuXHRcdHZhciBiID0gbGFzdEZyYW1lQiArIChmcmFtZXNbZnJhbWVJbmRleCArIDMvKkZSQU1FX0IqL10gLSBsYXN0RnJhbWVCKSAqIHBlcmNlbnQ7XG5cdFx0dmFyIGEgPSBsYXN0RnJhbWVBICsgKGZyYW1lc1tmcmFtZUluZGV4ICsgNC8qRlJBTUVfQSovXSAtIGxhc3RGcmFtZUEpICogcGVyY2VudDtcblx0XHRpZiAoYWxwaGEgPCAxKSB7XG5cdFx0XHRzbG90LnIgKz0gKHIgLSBzbG90LnIpICogYWxwaGE7XG5cdFx0XHRzbG90LmcgKz0gKGcgLSBzbG90LmcpICogYWxwaGE7XG5cdFx0XHRzbG90LmIgKz0gKGIgLSBzbG90LmIpICogYWxwaGE7XG5cdFx0XHRzbG90LmEgKz0gKGEgLSBzbG90LmEpICogYWxwaGE7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHNsb3QuciA9IHI7XG5cdFx0XHRzbG90LmcgPSBnO1xuXHRcdFx0c2xvdC5iID0gYjtcblx0XHRcdHNsb3QuYSA9IGE7XG5cdFx0fVxuXHR9XG59O1xuXG5zcGluZS5BdHRhY2htZW50VGltZWxpbmUgPSBmdW5jdGlvbiAoZnJhbWVDb3VudCkge1xuXHR0aGlzLmN1cnZlcyA9IG5ldyBzcGluZS5DdXJ2ZXMoZnJhbWVDb3VudCk7XG5cdHRoaXMuZnJhbWVzID0gW107IC8vIHRpbWUsIC4uLlxuXHR0aGlzLmZyYW1lcy5sZW5ndGggPSBmcmFtZUNvdW50O1xuXHR0aGlzLmF0dGFjaG1lbnROYW1lcyA9IFtdOyAvLyB0aW1lLCAuLi5cblx0dGhpcy5hdHRhY2htZW50TmFtZXMubGVuZ3RoID0gZnJhbWVDb3VudDtcbn07XG5zcGluZS5BdHRhY2htZW50VGltZWxpbmUucHJvdG90eXBlID0ge1xuXHRzbG90SW5kZXg6IDAsXG5cdGdldEZyYW1lQ291bnQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZyYW1lcy5sZW5ndGg7XG5cdH0sXG5cdHNldEZyYW1lOiBmdW5jdGlvbiAoZnJhbWVJbmRleCwgdGltZSwgYXR0YWNobWVudE5hbWUpIHtcblx0XHR0aGlzLmZyYW1lc1tmcmFtZUluZGV4XSA9IHRpbWU7XG5cdFx0dGhpcy5hdHRhY2htZW50TmFtZXNbZnJhbWVJbmRleF0gPSBhdHRhY2htZW50TmFtZTtcblx0fSxcblx0YXBwbHk6IGZ1bmN0aW9uIChza2VsZXRvbiwgdGltZSwgYWxwaGEpIHtcblx0XHR2YXIgZnJhbWVzID0gdGhpcy5mcmFtZXM7XG5cdFx0aWYgKHRpbWUgPCBmcmFtZXNbMF0pIHJldHVybjsgLy8gVGltZSBpcyBiZWZvcmUgZmlyc3QgZnJhbWUuXG5cblx0XHR2YXIgZnJhbWVJbmRleDtcblx0XHRpZiAodGltZSA+PSBmcmFtZXNbZnJhbWVzLmxlbmd0aCAtIDFdKSAvLyBUaW1lIGlzIGFmdGVyIGxhc3QgZnJhbWUuXG5cdFx0XHRmcmFtZUluZGV4ID0gZnJhbWVzLmxlbmd0aCAtIDE7XG5cdFx0ZWxzZVxuXHRcdFx0ZnJhbWVJbmRleCA9IHNwaW5lLmJpbmFyeVNlYXJjaChmcmFtZXMsIHRpbWUsIDEpIC0gMTtcblxuXHRcdHZhciBhdHRhY2htZW50TmFtZSA9IHRoaXMuYXR0YWNobWVudE5hbWVzW2ZyYW1lSW5kZXhdO1xuXHRcdHNrZWxldG9uLnNsb3RzW3RoaXMuc2xvdEluZGV4XS5zZXRBdHRhY2htZW50KCFhdHRhY2htZW50TmFtZSA/IG51bGwgOiBza2VsZXRvbi5nZXRBdHRhY2htZW50QnlTbG90SW5kZXgodGhpcy5zbG90SW5kZXgsIGF0dGFjaG1lbnROYW1lKSk7XG5cdH1cbn07XG5cbnNwaW5lLlNrZWxldG9uRGF0YSA9IGZ1bmN0aW9uICgpIHtcblx0dGhpcy5ib25lcyA9IFtdO1xuXHR0aGlzLnNsb3RzID0gW107XG5cdHRoaXMuc2tpbnMgPSBbXTtcblx0dGhpcy5hbmltYXRpb25zID0gW107XG59O1xuc3BpbmUuU2tlbGV0b25EYXRhLnByb3RvdHlwZSA9IHtcblx0ZGVmYXVsdFNraW46IG51bGwsXG5cdC8qKiBAcmV0dXJuIE1heSBiZSBudWxsLiAqL1xuXHRmaW5kQm9uZTogZnVuY3Rpb24gKGJvbmVOYW1lKSB7XG5cdFx0dmFyIGJvbmVzID0gdGhpcy5ib25lcztcblx0XHRmb3IgKHZhciBpID0gMCwgbiA9IGJvbmVzLmxlbmd0aDsgaSA8IG47IGkrKylcblx0XHRcdGlmIChib25lc1tpXS5uYW1lID09IGJvbmVOYW1lKSByZXR1cm4gYm9uZXNbaV07XG5cdFx0cmV0dXJuIG51bGw7XG5cdH0sXG5cdC8qKiBAcmV0dXJuIC0xIGlmIHRoZSBib25lIHdhcyBub3QgZm91bmQuICovXG5cdGZpbmRCb25lSW5kZXg6IGZ1bmN0aW9uIChib25lTmFtZSkge1xuXHRcdHZhciBib25lcyA9IHRoaXMuYm9uZXM7XG5cdFx0Zm9yICh2YXIgaSA9IDAsIG4gPSBib25lcy5sZW5ndGg7IGkgPCBuOyBpKyspXG5cdFx0XHRpZiAoYm9uZXNbaV0ubmFtZSA9PSBib25lTmFtZSkgcmV0dXJuIGk7XG5cdFx0cmV0dXJuIC0xO1xuXHR9LFxuXHQvKiogQHJldHVybiBNYXkgYmUgbnVsbC4gKi9cblx0ZmluZFNsb3Q6IGZ1bmN0aW9uIChzbG90TmFtZSkge1xuXHRcdHZhciBzbG90cyA9IHRoaXMuc2xvdHM7XG5cdFx0Zm9yICh2YXIgaSA9IDAsIG4gPSBzbG90cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcblx0XHRcdGlmIChzbG90c1tpXS5uYW1lID09IHNsb3ROYW1lKSByZXR1cm4gc2xvdFtpXTtcblx0XHR9XG5cdFx0cmV0dXJuIG51bGw7XG5cdH0sXG5cdC8qKiBAcmV0dXJuIC0xIGlmIHRoZSBib25lIHdhcyBub3QgZm91bmQuICovXG5cdGZpbmRTbG90SW5kZXg6IGZ1bmN0aW9uIChzbG90TmFtZSkge1xuXHRcdHZhciBzbG90cyA9IHRoaXMuc2xvdHM7XG5cdFx0Zm9yICh2YXIgaSA9IDAsIG4gPSBzbG90cy5sZW5ndGg7IGkgPCBuOyBpKyspXG5cdFx0XHRpZiAoc2xvdHNbaV0ubmFtZSA9PSBzbG90TmFtZSkgcmV0dXJuIGk7XG5cdFx0cmV0dXJuIC0xO1xuXHR9LFxuXHQvKiogQHJldHVybiBNYXkgYmUgbnVsbC4gKi9cblx0ZmluZFNraW46IGZ1bmN0aW9uIChza2luTmFtZSkge1xuXHRcdHZhciBza2lucyA9IHRoaXMuc2tpbnM7XG5cdFx0Zm9yICh2YXIgaSA9IDAsIG4gPSBza2lucy5sZW5ndGg7IGkgPCBuOyBpKyspXG5cdFx0XHRpZiAoc2tpbnNbaV0ubmFtZSA9PSBza2luTmFtZSkgcmV0dXJuIHNraW5zW2ldO1xuXHRcdHJldHVybiBudWxsO1xuXHR9LFxuXHQvKiogQHJldHVybiBNYXkgYmUgbnVsbC4gKi9cblx0ZmluZEFuaW1hdGlvbjogZnVuY3Rpb24gKGFuaW1hdGlvbk5hbWUpIHtcblx0XHR2YXIgYW5pbWF0aW9ucyA9IHRoaXMuYW5pbWF0aW9ucztcblx0XHRmb3IgKHZhciBpID0gMCwgbiA9IGFuaW1hdGlvbnMubGVuZ3RoOyBpIDwgbjsgaSsrKVxuXHRcdFx0aWYgKGFuaW1hdGlvbnNbaV0ubmFtZSA9PSBhbmltYXRpb25OYW1lKSByZXR1cm4gYW5pbWF0aW9uc1tpXTtcblx0XHRyZXR1cm4gbnVsbDtcblx0fVxufTtcblxuc3BpbmUuU2tlbGV0b24gPSBmdW5jdGlvbiAoc2tlbGV0b25EYXRhKSB7XG5cdHRoaXMuZGF0YSA9IHNrZWxldG9uRGF0YTtcblxuXHR0aGlzLmJvbmVzID0gW107XG5cdGZvciAodmFyIGkgPSAwLCBuID0gc2tlbGV0b25EYXRhLmJvbmVzLmxlbmd0aDsgaSA8IG47IGkrKykge1xuXHRcdHZhciBib25lRGF0YSA9IHNrZWxldG9uRGF0YS5ib25lc1tpXTtcblx0XHR2YXIgcGFyZW50ID0gIWJvbmVEYXRhLnBhcmVudCA/IG51bGwgOiB0aGlzLmJvbmVzW3NrZWxldG9uRGF0YS5ib25lcy5pbmRleE9mKGJvbmVEYXRhLnBhcmVudCldO1xuXHRcdHRoaXMuYm9uZXMucHVzaChuZXcgc3BpbmUuQm9uZShib25lRGF0YSwgcGFyZW50KSk7XG5cdH1cblxuXHR0aGlzLnNsb3RzID0gW107XG5cdHRoaXMuZHJhd09yZGVyID0gW107XG5cdGZvciAodmFyIGkgPSAwLCBuID0gc2tlbGV0b25EYXRhLnNsb3RzLmxlbmd0aDsgaSA8IG47IGkrKykge1xuXHRcdHZhciBzbG90RGF0YSA9IHNrZWxldG9uRGF0YS5zbG90c1tpXTtcblx0XHR2YXIgYm9uZSA9IHRoaXMuYm9uZXNbc2tlbGV0b25EYXRhLmJvbmVzLmluZGV4T2Yoc2xvdERhdGEuYm9uZURhdGEpXTtcblx0XHR2YXIgc2xvdCA9IG5ldyBzcGluZS5TbG90KHNsb3REYXRhLCB0aGlzLCBib25lKTtcblx0XHR0aGlzLnNsb3RzLnB1c2goc2xvdCk7XG5cdFx0dGhpcy5kcmF3T3JkZXIucHVzaChzbG90KTtcblx0fVxufTtcbnNwaW5lLlNrZWxldG9uLnByb3RvdHlwZSA9IHtcblx0eDogMCwgeTogMCxcblx0c2tpbjogbnVsbCxcblx0cjogMSwgZzogMSwgYjogMSwgYTogMSxcblx0dGltZTogMCxcblx0ZmxpcFg6IGZhbHNlLCBmbGlwWTogZmFsc2UsXG5cdC8qKiBVcGRhdGVzIHRoZSB3b3JsZCB0cmFuc2Zvcm0gZm9yIGVhY2ggYm9uZS4gKi9cblx0dXBkYXRlV29ybGRUcmFuc2Zvcm06IGZ1bmN0aW9uICgpIHtcblx0XHR2YXIgZmxpcFggPSB0aGlzLmZsaXBYO1xuXHRcdHZhciBmbGlwWSA9IHRoaXMuZmxpcFk7XG5cdFx0dmFyIGJvbmVzID0gdGhpcy5ib25lcztcblx0XHRmb3IgKHZhciBpID0gMCwgbiA9IGJvbmVzLmxlbmd0aDsgaSA8IG47IGkrKylcblx0XHRcdGJvbmVzW2ldLnVwZGF0ZVdvcmxkVHJhbnNmb3JtKGZsaXBYLCBmbGlwWSk7XG5cdH0sXG5cdC8qKiBTZXRzIHRoZSBib25lcyBhbmQgc2xvdHMgdG8gdGhlaXIgc2V0dXAgcG9zZSB2YWx1ZXMuICovXG5cdHNldFRvU2V0dXBQb3NlOiBmdW5jdGlvbiAoKSB7XG5cdFx0dGhpcy5zZXRCb25lc1RvU2V0dXBQb3NlKCk7XG5cdFx0dGhpcy5zZXRTbG90c1RvU2V0dXBQb3NlKCk7XG5cdH0sXG5cdHNldEJvbmVzVG9TZXR1cFBvc2U6IGZ1bmN0aW9uICgpIHtcblx0XHR2YXIgYm9uZXMgPSB0aGlzLmJvbmVzO1xuXHRcdGZvciAodmFyIGkgPSAwLCBuID0gYm9uZXMubGVuZ3RoOyBpIDwgbjsgaSsrKVxuXHRcdFx0Ym9uZXNbaV0uc2V0VG9TZXR1cFBvc2UoKTtcblx0fSxcblx0c2V0U2xvdHNUb1NldHVwUG9zZTogZnVuY3Rpb24gKCkge1xuXHRcdHZhciBzbG90cyA9IHRoaXMuc2xvdHM7XG5cdFx0Zm9yICh2YXIgaSA9IDAsIG4gPSBzbG90cy5sZW5ndGg7IGkgPCBuOyBpKyspXG5cdFx0XHRzbG90c1tpXS5zZXRUb1NldHVwUG9zZShpKTtcblx0fSxcblx0LyoqIEByZXR1cm4gTWF5IHJldHVybiBudWxsLiAqL1xuXHRnZXRSb290Qm9uZTogZnVuY3Rpb24gKCkge1xuXHRcdHJldHVybiB0aGlzLmJvbmVzLmxlbmd0aCA9PSAwID8gbnVsbCA6IHRoaXMuYm9uZXNbMF07XG5cdH0sXG5cdC8qKiBAcmV0dXJuIE1heSBiZSBudWxsLiAqL1xuXHRmaW5kQm9uZTogZnVuY3Rpb24gKGJvbmVOYW1lKSB7XG5cdFx0dmFyIGJvbmVzID0gdGhpcy5ib25lcztcblx0XHRmb3IgKHZhciBpID0gMCwgbiA9IGJvbmVzLmxlbmd0aDsgaSA8IG47IGkrKylcblx0XHRcdGlmIChib25lc1tpXS5kYXRhLm5hbWUgPT0gYm9uZU5hbWUpIHJldHVybiBib25lc1tpXTtcblx0XHRyZXR1cm4gbnVsbDtcblx0fSxcblx0LyoqIEByZXR1cm4gLTEgaWYgdGhlIGJvbmUgd2FzIG5vdCBmb3VuZC4gKi9cblx0ZmluZEJvbmVJbmRleDogZnVuY3Rpb24gKGJvbmVOYW1lKSB7XG5cdFx0dmFyIGJvbmVzID0gdGhpcy5ib25lcztcblx0XHRmb3IgKHZhciBpID0gMCwgbiA9IGJvbmVzLmxlbmd0aDsgaSA8IG47IGkrKylcblx0XHRcdGlmIChib25lc1tpXS5kYXRhLm5hbWUgPT0gYm9uZU5hbWUpIHJldHVybiBpO1xuXHRcdHJldHVybiAtMTtcblx0fSxcblx0LyoqIEByZXR1cm4gTWF5IGJlIG51bGwuICovXG5cdGZpbmRTbG90OiBmdW5jdGlvbiAoc2xvdE5hbWUpIHtcblx0XHR2YXIgc2xvdHMgPSB0aGlzLnNsb3RzO1xuXHRcdGZvciAodmFyIGkgPSAwLCBuID0gc2xvdHMubGVuZ3RoOyBpIDwgbjsgaSsrKVxuXHRcdFx0aWYgKHNsb3RzW2ldLmRhdGEubmFtZSA9PSBzbG90TmFtZSkgcmV0dXJuIHNsb3RzW2ldO1xuXHRcdHJldHVybiBudWxsO1xuXHR9LFxuXHQvKiogQHJldHVybiAtMSBpZiB0aGUgYm9uZSB3YXMgbm90IGZvdW5kLiAqL1xuXHRmaW5kU2xvdEluZGV4OiBmdW5jdGlvbiAoc2xvdE5hbWUpIHtcblx0XHR2YXIgc2xvdHMgPSB0aGlzLnNsb3RzO1xuXHRcdGZvciAodmFyIGkgPSAwLCBuID0gc2xvdHMubGVuZ3RoOyBpIDwgbjsgaSsrKVxuXHRcdFx0aWYgKHNsb3RzW2ldLmRhdGEubmFtZSA9PSBzbG90TmFtZSkgcmV0dXJuIGk7XG5cdFx0cmV0dXJuIC0xO1xuXHR9LFxuXHRzZXRTa2luQnlOYW1lOiBmdW5jdGlvbiAoc2tpbk5hbWUpIHtcblx0XHR2YXIgc2tpbiA9IHRoaXMuZGF0YS5maW5kU2tpbihza2luTmFtZSk7XG5cdFx0aWYgKCFza2luKSB0aHJvdyBcIlNraW4gbm90IGZvdW5kOiBcIiArIHNraW5OYW1lO1xuXHRcdHRoaXMuc2V0U2tpbihza2luKTtcblx0fSxcblx0LyoqIFNldHMgdGhlIHNraW4gdXNlZCB0byBsb29rIHVwIGF0dGFjaG1lbnRzIG5vdCBmb3VuZCBpbiB0aGUge0BsaW5rIFNrZWxldG9uRGF0YSNnZXREZWZhdWx0U2tpbigpIGRlZmF1bHQgc2tpbn0uIEF0dGFjaG1lbnRzXG5cdCAqIGZyb20gdGhlIG5ldyBza2luIGFyZSBhdHRhY2hlZCBpZiB0aGUgY29ycmVzcG9uZGluZyBhdHRhY2htZW50IGZyb20gdGhlIG9sZCBza2luIHdhcyBhdHRhY2hlZC5cblx0ICogQHBhcmFtIG5ld1NraW4gTWF5IGJlIG51bGwuICovXG5cdHNldFNraW46IGZ1bmN0aW9uIChuZXdTa2luKSB7XG5cdFx0aWYgKHRoaXMuc2tpbiAmJiBuZXdTa2luKSBuZXdTa2luLl9hdHRhY2hBbGwodGhpcywgdGhpcy5za2luKTtcblx0XHR0aGlzLnNraW4gPSBuZXdTa2luO1xuXHR9LFxuXHQvKiogQHJldHVybiBNYXkgYmUgbnVsbC4gKi9cblx0Z2V0QXR0YWNobWVudEJ5U2xvdE5hbWU6IGZ1bmN0aW9uIChzbG90TmFtZSwgYXR0YWNobWVudE5hbWUpIHtcblx0XHRyZXR1cm4gdGhpcy5nZXRBdHRhY2htZW50QnlTbG90SW5kZXgodGhpcy5kYXRhLmZpbmRTbG90SW5kZXgoc2xvdE5hbWUpLCBhdHRhY2htZW50TmFtZSk7XG5cdH0sXG5cdC8qKiBAcmV0dXJuIE1heSBiZSBudWxsLiAqL1xuXHRnZXRBdHRhY2htZW50QnlTbG90SW5kZXg6IGZ1bmN0aW9uIChzbG90SW5kZXgsIGF0dGFjaG1lbnROYW1lKSB7XG5cdFx0aWYgKHRoaXMuc2tpbikge1xuXHRcdFx0dmFyIGF0dGFjaG1lbnQgPSB0aGlzLnNraW4uZ2V0QXR0YWNobWVudChzbG90SW5kZXgsIGF0dGFjaG1lbnROYW1lKTtcblx0XHRcdGlmIChhdHRhY2htZW50KSByZXR1cm4gYXR0YWNobWVudDtcblx0XHR9XG5cdFx0aWYgKHRoaXMuZGF0YS5kZWZhdWx0U2tpbikgcmV0dXJuIHRoaXMuZGF0YS5kZWZhdWx0U2tpbi5nZXRBdHRhY2htZW50KHNsb3RJbmRleCwgYXR0YWNobWVudE5hbWUpO1xuXHRcdHJldHVybiBudWxsO1xuXHR9LFxuXHQvKiogQHBhcmFtIGF0dGFjaG1lbnROYW1lIE1heSBiZSBudWxsLiAqL1xuXHRzZXRBdHRhY2htZW50OiBmdW5jdGlvbiAoc2xvdE5hbWUsIGF0dGFjaG1lbnROYW1lKSB7XG5cdFx0dmFyIHNsb3RzID0gdGhpcy5zbG90cztcblx0XHRmb3IgKHZhciBpID0gMCwgbiA9IHNsb3RzLnNpemU7IGkgPCBuOyBpKyspIHtcblx0XHRcdHZhciBzbG90ID0gc2xvdHNbaV07XG5cdFx0XHRpZiAoc2xvdC5kYXRhLm5hbWUgPT0gc2xvdE5hbWUpIHtcblx0XHRcdFx0dmFyIGF0dGFjaG1lbnQgPSBudWxsO1xuXHRcdFx0XHRpZiAoYXR0YWNobWVudE5hbWUpIHtcblx0XHRcdFx0XHRhdHRhY2htZW50ID0gdGhpcy5nZXRBdHRhY2htZW50KGksIGF0dGFjaG1lbnROYW1lKTtcblx0XHRcdFx0XHRpZiAoYXR0YWNobWVudCA9PSBudWxsKSB0aHJvdyBcIkF0dGFjaG1lbnQgbm90IGZvdW5kOiBcIiArIGF0dGFjaG1lbnROYW1lICsgXCIsIGZvciBzbG90OiBcIiArIHNsb3ROYW1lO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHNsb3Quc2V0QXR0YWNobWVudChhdHRhY2htZW50KTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdH1cblx0XHR0aHJvdyBcIlNsb3Qgbm90IGZvdW5kOiBcIiArIHNsb3ROYW1lO1xuXHR9LFxuXHR1cGRhdGU6IGZ1bmN0aW9uIChkZWx0YSkge1xuXHRcdHRpbWUgKz0gZGVsdGE7XG5cdH1cbn07XG5cbnNwaW5lLkF0dGFjaG1lbnRUeXBlID0ge1xuXHRyZWdpb246IDBcbn07XG5cbnNwaW5lLlJlZ2lvbkF0dGFjaG1lbnQgPSBmdW5jdGlvbiAoKSB7XG5cdHRoaXMub2Zmc2V0ID0gW107XG5cdHRoaXMub2Zmc2V0Lmxlbmd0aCA9IDg7XG5cdHRoaXMudXZzID0gW107XG5cdHRoaXMudXZzLmxlbmd0aCA9IDg7XG59O1xuc3BpbmUuUmVnaW9uQXR0YWNobWVudC5wcm90b3R5cGUgPSB7XG5cdHg6IDAsIHk6IDAsXG5cdHJvdGF0aW9uOiAwLFxuXHRzY2FsZVg6IDEsIHNjYWxlWTogMSxcblx0d2lkdGg6IDAsIGhlaWdodDogMCxcblx0cmVuZGVyZXJPYmplY3Q6IG51bGwsXG5cdHJlZ2lvbk9mZnNldFg6IDAsIHJlZ2lvbk9mZnNldFk6IDAsXG5cdHJlZ2lvbldpZHRoOiAwLCByZWdpb25IZWlnaHQ6IDAsXG5cdHJlZ2lvbk9yaWdpbmFsV2lkdGg6IDAsIHJlZ2lvbk9yaWdpbmFsSGVpZ2h0OiAwLFxuXHRzZXRVVnM6IGZ1bmN0aW9uICh1LCB2LCB1MiwgdjIsIHJvdGF0ZSkge1xuXHRcdHZhciB1dnMgPSB0aGlzLnV2cztcblx0XHRpZiAocm90YXRlKSB7XG5cdFx0XHR1dnNbMi8qWDIqL10gPSB1O1xuXHRcdFx0dXZzWzMvKlkyKi9dID0gdjI7XG5cdFx0XHR1dnNbNC8qWDMqL10gPSB1O1xuXHRcdFx0dXZzWzUvKlkzKi9dID0gdjtcblx0XHRcdHV2c1s2LypYNCovXSA9IHUyO1xuXHRcdFx0dXZzWzcvKlk0Ki9dID0gdjtcblx0XHRcdHV2c1swLypYMSovXSA9IHUyO1xuXHRcdFx0dXZzWzEvKlkxKi9dID0gdjI7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHV2c1swLypYMSovXSA9IHU7XG5cdFx0XHR1dnNbMS8qWTEqL10gPSB2Mjtcblx0XHRcdHV2c1syLypYMiovXSA9IHU7XG5cdFx0XHR1dnNbMy8qWTIqL10gPSB2O1xuXHRcdFx0dXZzWzQvKlgzKi9dID0gdTI7XG5cdFx0XHR1dnNbNS8qWTMqL10gPSB2O1xuXHRcdFx0dXZzWzYvKlg0Ki9dID0gdTI7XG5cdFx0XHR1dnNbNy8qWTQqL10gPSB2Mjtcblx0XHR9XG5cdH0sXG5cdHVwZGF0ZU9mZnNldDogZnVuY3Rpb24gKCkge1xuXHRcdHZhciByZWdpb25TY2FsZVggPSB0aGlzLndpZHRoIC8gdGhpcy5yZWdpb25PcmlnaW5hbFdpZHRoICogdGhpcy5zY2FsZVg7XG5cdFx0dmFyIHJlZ2lvblNjYWxlWSA9IHRoaXMuaGVpZ2h0IC8gdGhpcy5yZWdpb25PcmlnaW5hbEhlaWdodCAqIHRoaXMuc2NhbGVZO1xuXHRcdHZhciBsb2NhbFggPSAtdGhpcy53aWR0aCAvIDIgKiB0aGlzLnNjYWxlWCArIHRoaXMucmVnaW9uT2Zmc2V0WCAqIHJlZ2lvblNjYWxlWDtcblx0XHR2YXIgbG9jYWxZID0gLXRoaXMuaGVpZ2h0IC8gMiAqIHRoaXMuc2NhbGVZICsgdGhpcy5yZWdpb25PZmZzZXRZICogcmVnaW9uU2NhbGVZO1xuXHRcdHZhciBsb2NhbFgyID0gbG9jYWxYICsgdGhpcy5yZWdpb25XaWR0aCAqIHJlZ2lvblNjYWxlWDtcblx0XHR2YXIgbG9jYWxZMiA9IGxvY2FsWSArIHRoaXMucmVnaW9uSGVpZ2h0ICogcmVnaW9uU2NhbGVZO1xuXHRcdHZhciByYWRpYW5zID0gdGhpcy5yb3RhdGlvbiAqIE1hdGguUEkgLyAxODA7XG5cdFx0dmFyIGNvcyA9IE1hdGguY29zKHJhZGlhbnMpO1xuXHRcdHZhciBzaW4gPSBNYXRoLnNpbihyYWRpYW5zKTtcblx0XHR2YXIgbG9jYWxYQ29zID0gbG9jYWxYICogY29zICsgdGhpcy54O1xuXHRcdHZhciBsb2NhbFhTaW4gPSBsb2NhbFggKiBzaW47XG5cdFx0dmFyIGxvY2FsWUNvcyA9IGxvY2FsWSAqIGNvcyArIHRoaXMueTtcblx0XHR2YXIgbG9jYWxZU2luID0gbG9jYWxZICogc2luO1xuXHRcdHZhciBsb2NhbFgyQ29zID0gbG9jYWxYMiAqIGNvcyArIHRoaXMueDtcblx0XHR2YXIgbG9jYWxYMlNpbiA9IGxvY2FsWDIgKiBzaW47XG5cdFx0dmFyIGxvY2FsWTJDb3MgPSBsb2NhbFkyICogY29zICsgdGhpcy55O1xuXHRcdHZhciBsb2NhbFkyU2luID0gbG9jYWxZMiAqIHNpbjtcblx0XHR2YXIgb2Zmc2V0ID0gdGhpcy5vZmZzZXQ7XG5cdFx0b2Zmc2V0WzAvKlgxKi9dID0gbG9jYWxYQ29zIC0gbG9jYWxZU2luO1xuXHRcdG9mZnNldFsxLypZMSovXSA9IGxvY2FsWUNvcyArIGxvY2FsWFNpbjtcblx0XHRvZmZzZXRbMi8qWDIqL10gPSBsb2NhbFhDb3MgLSBsb2NhbFkyU2luO1xuXHRcdG9mZnNldFszLypZMiovXSA9IGxvY2FsWTJDb3MgKyBsb2NhbFhTaW47XG5cdFx0b2Zmc2V0WzQvKlgzKi9dID0gbG9jYWxYMkNvcyAtIGxvY2FsWTJTaW47XG5cdFx0b2Zmc2V0WzUvKlkzKi9dID0gbG9jYWxZMkNvcyArIGxvY2FsWDJTaW47XG5cdFx0b2Zmc2V0WzYvKlg0Ki9dID0gbG9jYWxYMkNvcyAtIGxvY2FsWVNpbjtcblx0XHRvZmZzZXRbNy8qWTQqL10gPSBsb2NhbFlDb3MgKyBsb2NhbFgyU2luO1xuXHR9LFxuXHRjb21wdXRlVmVydGljZXM6IGZ1bmN0aW9uICh4LCB5LCBib25lLCB2ZXJ0aWNlcykge1xuXHRcdHggKz0gYm9uZS53b3JsZFg7XG5cdFx0eSArPSBib25lLndvcmxkWTtcblx0XHR2YXIgbTAwID0gYm9uZS5tMDA7XG5cdFx0dmFyIG0wMSA9IGJvbmUubTAxO1xuXHRcdHZhciBtMTAgPSBib25lLm0xMDtcblx0XHR2YXIgbTExID0gYm9uZS5tMTE7XG5cdFx0dmFyIG9mZnNldCA9IHRoaXMub2Zmc2V0O1xuXHRcdHZlcnRpY2VzWzAvKlgxKi9dID0gb2Zmc2V0WzAvKlgxKi9dICogbTAwICsgb2Zmc2V0WzEvKlkxKi9dICogbTAxICsgeDtcblx0XHR2ZXJ0aWNlc1sxLypZMSovXSA9IG9mZnNldFswLypYMSovXSAqIG0xMCArIG9mZnNldFsxLypZMSovXSAqIG0xMSArIHk7XG5cdFx0dmVydGljZXNbMi8qWDIqL10gPSBvZmZzZXRbMi8qWDIqL10gKiBtMDAgKyBvZmZzZXRbMy8qWTIqL10gKiBtMDEgKyB4O1xuXHRcdHZlcnRpY2VzWzMvKlkyKi9dID0gb2Zmc2V0WzIvKlgyKi9dICogbTEwICsgb2Zmc2V0WzMvKlkyKi9dICogbTExICsgeTtcblx0XHR2ZXJ0aWNlc1s0LypYMyovXSA9IG9mZnNldFs0LypYMyovXSAqIG0wMCArIG9mZnNldFs1LypYMyovXSAqIG0wMSArIHg7XG5cdFx0dmVydGljZXNbNS8qWDMqL10gPSBvZmZzZXRbNC8qWDMqL10gKiBtMTAgKyBvZmZzZXRbNS8qWDMqL10gKiBtMTEgKyB5O1xuXHRcdHZlcnRpY2VzWzYvKlg0Ki9dID0gb2Zmc2V0WzYvKlg0Ki9dICogbTAwICsgb2Zmc2V0WzcvKlk0Ki9dICogbTAxICsgeDtcblx0XHR2ZXJ0aWNlc1s3LypZNCovXSA9IG9mZnNldFs2LypYNCovXSAqIG0xMCArIG9mZnNldFs3LypZNCovXSAqIG0xMSArIHk7XG5cdH1cbn1cblxuc3BpbmUuQW5pbWF0aW9uU3RhdGVEYXRhID0gZnVuY3Rpb24gKHNrZWxldG9uRGF0YSkge1xuXHR0aGlzLnNrZWxldG9uRGF0YSA9IHNrZWxldG9uRGF0YTtcblx0dGhpcy5hbmltYXRpb25Ub01peFRpbWUgPSB7fTtcbn07XG5zcGluZS5BbmltYXRpb25TdGF0ZURhdGEucHJvdG90eXBlID0ge1xuICAgICAgICBkZWZhdWx0TWl4OiAwLFxuXHRzZXRNaXhCeU5hbWU6IGZ1bmN0aW9uIChmcm9tTmFtZSwgdG9OYW1lLCBkdXJhdGlvbikge1xuXHRcdHZhciBmcm9tID0gdGhpcy5za2VsZXRvbkRhdGEuZmluZEFuaW1hdGlvbihmcm9tTmFtZSk7XG5cdFx0aWYgKCFmcm9tKSB0aHJvdyBcIkFuaW1hdGlvbiBub3QgZm91bmQ6IFwiICsgZnJvbU5hbWU7XG5cdFx0dmFyIHRvID0gdGhpcy5za2VsZXRvbkRhdGEuZmluZEFuaW1hdGlvbih0b05hbWUpO1xuXHRcdGlmICghdG8pIHRocm93IFwiQW5pbWF0aW9uIG5vdCBmb3VuZDogXCIgKyB0b05hbWU7XG5cdFx0dGhpcy5zZXRNaXgoZnJvbSwgdG8sIGR1cmF0aW9uKTtcblx0fSxcblx0c2V0TWl4OiBmdW5jdGlvbiAoZnJvbSwgdG8sIGR1cmF0aW9uKSB7XG5cdFx0dGhpcy5hbmltYXRpb25Ub01peFRpbWVbZnJvbS5uYW1lICsgXCI6XCIgKyB0by5uYW1lXSA9IGR1cmF0aW9uO1xuXHR9LFxuXHRnZXRNaXg6IGZ1bmN0aW9uIChmcm9tLCB0bykge1xuXHRcdHZhciB0aW1lID0gdGhpcy5hbmltYXRpb25Ub01peFRpbWVbZnJvbS5uYW1lICsgXCI6XCIgKyB0by5uYW1lXTtcbiAgICAgICAgICAgIHJldHVybiB0aW1lID8gdGltZSA6IHRoaXMuZGVmYXVsdE1peDtcblx0fVxufTtcblxuc3BpbmUuQW5pbWF0aW9uU3RhdGUgPSBmdW5jdGlvbiAoc3RhdGVEYXRhKSB7XG5cdHRoaXMuZGF0YSA9IHN0YXRlRGF0YTtcblx0dGhpcy5xdWV1ZSA9IFtdO1xufTtcbnNwaW5lLkFuaW1hdGlvblN0YXRlLnByb3RvdHlwZSA9IHtcblx0Y3VycmVudDogbnVsbCxcblx0cHJldmlvdXM6IG51bGwsXG5cdGN1cnJlbnRUaW1lOiAwLFxuXHRwcmV2aW91c1RpbWU6IDAsXG5cdGN1cnJlbnRMb29wOiBmYWxzZSxcblx0cHJldmlvdXNMb29wOiBmYWxzZSxcblx0bWl4VGltZTogMCxcblx0bWl4RHVyYXRpb246IDAsXG5cdHVwZGF0ZTogZnVuY3Rpb24gKGRlbHRhKSB7XG5cdFx0dGhpcy5jdXJyZW50VGltZSArPSBkZWx0YTtcblx0XHR0aGlzLnByZXZpb3VzVGltZSArPSBkZWx0YTtcblx0XHR0aGlzLm1peFRpbWUgKz0gZGVsdGE7XG5cblx0XHRpZiAodGhpcy5xdWV1ZS5sZW5ndGggPiAwKSB7XG5cdFx0XHR2YXIgZW50cnkgPSB0aGlzLnF1ZXVlWzBdO1xuXHRcdFx0aWYgKHRoaXMuY3VycmVudFRpbWUgPj0gZW50cnkuZGVsYXkpIHtcblx0XHRcdFx0dGhpcy5fc2V0QW5pbWF0aW9uKGVudHJ5LmFuaW1hdGlvbiwgZW50cnkubG9vcCk7XG5cdFx0XHRcdHRoaXMucXVldWUuc2hpZnQoKTtcblx0XHRcdH1cblx0XHR9XG5cdH0sXG5cdGFwcGx5OiBmdW5jdGlvbiAoc2tlbGV0b24pIHtcblx0XHRpZiAoIXRoaXMuY3VycmVudCkgcmV0dXJuO1xuXHRcdGlmICh0aGlzLnByZXZpb3VzKSB7XG5cdFx0XHR0aGlzLnByZXZpb3VzLmFwcGx5KHNrZWxldG9uLCB0aGlzLnByZXZpb3VzVGltZSwgdGhpcy5wcmV2aW91c0xvb3ApO1xuXHRcdFx0dmFyIGFscGhhID0gdGhpcy5taXhUaW1lIC8gdGhpcy5taXhEdXJhdGlvbjtcblx0XHRcdGlmIChhbHBoYSA+PSAxKSB7XG5cdFx0XHRcdGFscGhhID0gMTtcblx0XHRcdFx0dGhpcy5wcmV2aW91cyA9IG51bGw7XG5cdFx0XHR9XG5cdFx0XHR0aGlzLmN1cnJlbnQubWl4KHNrZWxldG9uLCB0aGlzLmN1cnJlbnRUaW1lLCB0aGlzLmN1cnJlbnRMb29wLCBhbHBoYSk7XG5cdFx0fSBlbHNlXG5cdFx0XHR0aGlzLmN1cnJlbnQuYXBwbHkoc2tlbGV0b24sIHRoaXMuY3VycmVudFRpbWUsIHRoaXMuY3VycmVudExvb3ApO1xuXHR9LFxuXHRjbGVhckFuaW1hdGlvbjogZnVuY3Rpb24gKCkge1xuXHRcdHRoaXMucHJldmlvdXMgPSBudWxsO1xuXHRcdHRoaXMuY3VycmVudCA9IG51bGw7XG5cdFx0dGhpcy5xdWV1ZS5sZW5ndGggPSAwO1xuXHR9LFxuXHRfc2V0QW5pbWF0aW9uOiBmdW5jdGlvbiAoYW5pbWF0aW9uLCBsb29wKSB7XG5cdFx0dGhpcy5wcmV2aW91cyA9IG51bGw7XG5cdFx0aWYgKGFuaW1hdGlvbiAmJiB0aGlzLmN1cnJlbnQpIHtcblx0XHRcdHRoaXMubWl4RHVyYXRpb24gPSB0aGlzLmRhdGEuZ2V0TWl4KHRoaXMuY3VycmVudCwgYW5pbWF0aW9uKTtcblx0XHRcdGlmICh0aGlzLm1peER1cmF0aW9uID4gMCkge1xuXHRcdFx0XHR0aGlzLm1peFRpbWUgPSAwO1xuXHRcdFx0XHR0aGlzLnByZXZpb3VzID0gdGhpcy5jdXJyZW50O1xuXHRcdFx0XHR0aGlzLnByZXZpb3VzVGltZSA9IHRoaXMuY3VycmVudFRpbWU7XG5cdFx0XHRcdHRoaXMucHJldmlvdXNMb29wID0gdGhpcy5jdXJyZW50TG9vcDtcblx0XHRcdH1cblx0XHR9XG5cdFx0dGhpcy5jdXJyZW50ID0gYW5pbWF0aW9uO1xuXHRcdHRoaXMuY3VycmVudExvb3AgPSBsb29wO1xuXHRcdHRoaXMuY3VycmVudFRpbWUgPSAwO1xuXHR9LFxuXHQvKiogQHNlZSAjc2V0QW5pbWF0aW9uKEFuaW1hdGlvbiwgQm9vbGVhbikgKi9cblx0c2V0QW5pbWF0aW9uQnlOYW1lOiBmdW5jdGlvbiAoYW5pbWF0aW9uTmFtZSwgbG9vcCkge1xuXHRcdHZhciBhbmltYXRpb24gPSB0aGlzLmRhdGEuc2tlbGV0b25EYXRhLmZpbmRBbmltYXRpb24oYW5pbWF0aW9uTmFtZSk7XG5cdFx0aWYgKCFhbmltYXRpb24pIHRocm93IFwiQW5pbWF0aW9uIG5vdCBmb3VuZDogXCIgKyBhbmltYXRpb25OYW1lO1xuXHRcdHRoaXMuc2V0QW5pbWF0aW9uKGFuaW1hdGlvbiwgbG9vcCk7XG5cdH0sXG5cdC8qKiBTZXQgdGhlIGN1cnJlbnQgYW5pbWF0aW9uLiBBbnkgcXVldWVkIGFuaW1hdGlvbnMgYXJlIGNsZWFyZWQgYW5kIHRoZSBjdXJyZW50IGFuaW1hdGlvbiB0aW1lIGlzIHNldCB0byAwLlxuXHQgKiBAcGFyYW0gYW5pbWF0aW9uIE1heSBiZSBudWxsLiAqL1xuXHRzZXRBbmltYXRpb246IGZ1bmN0aW9uIChhbmltYXRpb24sIGxvb3ApIHtcblx0XHR0aGlzLnF1ZXVlLmxlbmd0aCA9IDA7XG5cdFx0dGhpcy5fc2V0QW5pbWF0aW9uKGFuaW1hdGlvbiwgbG9vcCk7XG5cdH0sXG5cdC8qKiBAc2VlICNhZGRBbmltYXRpb24oQW5pbWF0aW9uLCBCb29sZWFuLCBOdW1iZXIpICovXG5cdGFkZEFuaW1hdGlvbkJ5TmFtZTogZnVuY3Rpb24gKGFuaW1hdGlvbk5hbWUsIGxvb3AsIGRlbGF5KSB7XG5cdFx0dmFyIGFuaW1hdGlvbiA9IHRoaXMuZGF0YS5za2VsZXRvbkRhdGEuZmluZEFuaW1hdGlvbihhbmltYXRpb25OYW1lKTtcblx0XHRpZiAoIWFuaW1hdGlvbikgdGhyb3cgXCJBbmltYXRpb24gbm90IGZvdW5kOiBcIiArIGFuaW1hdGlvbk5hbWU7XG5cdFx0dGhpcy5hZGRBbmltYXRpb24oYW5pbWF0aW9uLCBsb29wLCBkZWxheSk7XG5cdH0sXG5cdC8qKiBBZGRzIGFuIGFuaW1hdGlvbiB0byBiZSBwbGF5ZWQgZGVsYXkgc2Vjb25kcyBhZnRlciB0aGUgY3VycmVudCBvciBsYXN0IHF1ZXVlZCBhbmltYXRpb24uXG5cdCAqIEBwYXJhbSBkZWxheSBNYXkgYmUgPD0gMCB0byB1c2UgZHVyYXRpb24gb2YgcHJldmlvdXMgYW5pbWF0aW9uIG1pbnVzIGFueSBtaXggZHVyYXRpb24gcGx1cyB0aGUgbmVnYXRpdmUgZGVsYXkuICovXG5cdGFkZEFuaW1hdGlvbjogZnVuY3Rpb24gKGFuaW1hdGlvbiwgbG9vcCwgZGVsYXkpIHtcblx0XHR2YXIgZW50cnkgPSB7fTtcblx0XHRlbnRyeS5hbmltYXRpb24gPSBhbmltYXRpb247XG5cdFx0ZW50cnkubG9vcCA9IGxvb3A7XG5cblx0XHRpZiAoIWRlbGF5IHx8IGRlbGF5IDw9IDApIHtcblx0XHRcdHZhciBwcmV2aW91c0FuaW1hdGlvbiA9IHRoaXMucXVldWUubGVuZ3RoID09IDAgPyB0aGlzLmN1cnJlbnQgOiB0aGlzLnF1ZXVlW3RoaXMucXVldWUubGVuZ3RoIC0gMV0uYW5pbWF0aW9uO1xuXHRcdFx0aWYgKHByZXZpb3VzQW5pbWF0aW9uICE9IG51bGwpXG5cdFx0XHRcdGRlbGF5ID0gcHJldmlvdXNBbmltYXRpb24uZHVyYXRpb24gLSB0aGlzLmRhdGEuZ2V0TWl4KHByZXZpb3VzQW5pbWF0aW9uLCBhbmltYXRpb24pICsgKGRlbGF5IHx8IDApO1xuXHRcdFx0ZWxzZVxuXHRcdFx0XHRkZWxheSA9IDA7XG5cdFx0fVxuXHRcdGVudHJ5LmRlbGF5ID0gZGVsYXk7XG5cblx0XHR0aGlzLnF1ZXVlLnB1c2goZW50cnkpO1xuXHR9LFxuXHQvKiogUmV0dXJucyB0cnVlIGlmIG5vIGFuaW1hdGlvbiBpcyBzZXQgb3IgaWYgdGhlIGN1cnJlbnQgdGltZSBpcyBncmVhdGVyIHRoYW4gdGhlIGFuaW1hdGlvbiBkdXJhdGlvbiwgcmVnYXJkbGVzcyBvZiBsb29waW5nLiAqL1xuXHRpc0NvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XG5cdFx0cmV0dXJuICF0aGlzLmN1cnJlbnQgfHwgdGhpcy5jdXJyZW50VGltZSA+PSB0aGlzLmN1cnJlbnQuZHVyYXRpb247XG5cdH1cbn07XG5cbnNwaW5lLlNrZWxldG9uSnNvbiA9IGZ1bmN0aW9uIChhdHRhY2htZW50TG9hZGVyKSB7XG5cdHRoaXMuYXR0YWNobWVudExvYWRlciA9IGF0dGFjaG1lbnRMb2FkZXI7XG59O1xuc3BpbmUuU2tlbGV0b25Kc29uLnByb3RvdHlwZSA9IHtcblx0c2NhbGU6IDEsXG5cdHJlYWRTa2VsZXRvbkRhdGE6IGZ1bmN0aW9uIChyb290KSB7XG5cdFx0dmFyIHNrZWxldG9uRGF0YSA9IG5ldyBzcGluZS5Ta2VsZXRvbkRhdGEoKTtcblxuXHRcdC8vIEJvbmVzLlxuXHRcdHZhciBib25lcyA9IHJvb3RbXCJib25lc1wiXTtcblx0XHRmb3IgKHZhciBpID0gMCwgbiA9IGJvbmVzLmxlbmd0aDsgaSA8IG47IGkrKykge1xuXHRcdFx0dmFyIGJvbmVNYXAgPSBib25lc1tpXTtcblx0XHRcdHZhciBwYXJlbnQgPSBudWxsO1xuXHRcdFx0aWYgKGJvbmVNYXBbXCJwYXJlbnRcIl0pIHtcblx0XHRcdFx0cGFyZW50ID0gc2tlbGV0b25EYXRhLmZpbmRCb25lKGJvbmVNYXBbXCJwYXJlbnRcIl0pO1xuXHRcdFx0XHRpZiAoIXBhcmVudCkgdGhyb3cgXCJQYXJlbnQgYm9uZSBub3QgZm91bmQ6IFwiICsgYm9uZU1hcFtcInBhcmVudFwiXTtcblx0XHRcdH1cblx0XHRcdHZhciBib25lRGF0YSA9IG5ldyBzcGluZS5Cb25lRGF0YShib25lTWFwW1wibmFtZVwiXSwgcGFyZW50KTtcblx0XHRcdGJvbmVEYXRhLmxlbmd0aCA9IChib25lTWFwW1wibGVuZ3RoXCJdIHx8IDApICogdGhpcy5zY2FsZTtcblx0XHRcdGJvbmVEYXRhLnggPSAoYm9uZU1hcFtcInhcIl0gfHwgMCkgKiB0aGlzLnNjYWxlO1xuXHRcdFx0Ym9uZURhdGEueSA9IChib25lTWFwW1wieVwiXSB8fCAwKSAqIHRoaXMuc2NhbGU7XG5cdFx0XHRib25lRGF0YS5yb3RhdGlvbiA9IChib25lTWFwW1wicm90YXRpb25cIl0gfHwgMCk7XG5cdFx0XHRib25lRGF0YS5zY2FsZVggPSBib25lTWFwW1wic2NhbGVYXCJdIHx8IDE7XG5cdFx0XHRib25lRGF0YS5zY2FsZVkgPSBib25lTWFwW1wic2NhbGVZXCJdIHx8IDE7XG5cdFx0XHRza2VsZXRvbkRhdGEuYm9uZXMucHVzaChib25lRGF0YSk7XG5cdFx0fVxuXG5cdFx0Ly8gU2xvdHMuXG5cdFx0dmFyIHNsb3RzID0gcm9vdFtcInNsb3RzXCJdO1xuXHRcdGZvciAodmFyIGkgPSAwLCBuID0gc2xvdHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XG5cdFx0XHR2YXIgc2xvdE1hcCA9IHNsb3RzW2ldO1xuXHRcdFx0dmFyIGJvbmVEYXRhID0gc2tlbGV0b25EYXRhLmZpbmRCb25lKHNsb3RNYXBbXCJib25lXCJdKTtcblx0XHRcdGlmICghYm9uZURhdGEpIHRocm93IFwiU2xvdCBib25lIG5vdCBmb3VuZDogXCIgKyBzbG90TWFwW1wiYm9uZVwiXTtcblx0XHRcdHZhciBzbG90RGF0YSA9IG5ldyBzcGluZS5TbG90RGF0YShzbG90TWFwW1wibmFtZVwiXSwgYm9uZURhdGEpO1xuXG5cdFx0XHR2YXIgY29sb3IgPSBzbG90TWFwW1wiY29sb3JcIl07XG5cdFx0XHRpZiAoY29sb3IpIHtcblx0XHRcdFx0c2xvdERhdGEuciA9IHNwaW5lLlNrZWxldG9uSnNvbi50b0NvbG9yKGNvbG9yLCAwKTtcblx0XHRcdFx0c2xvdERhdGEuZyA9IHNwaW5lLlNrZWxldG9uSnNvbi50b0NvbG9yKGNvbG9yLCAxKTtcblx0XHRcdFx0c2xvdERhdGEuYiA9IHNwaW5lLlNrZWxldG9uSnNvbi50b0NvbG9yKGNvbG9yLCAyKTtcblx0XHRcdFx0c2xvdERhdGEuYSA9IHNwaW5lLlNrZWxldG9uSnNvbi50b0NvbG9yKGNvbG9yLCAzKTtcblx0XHRcdH1cblxuXHRcdFx0c2xvdERhdGEuYXR0YWNobWVudE5hbWUgPSBzbG90TWFwW1wiYXR0YWNobWVudFwiXTtcblxuXHRcdFx0c2tlbGV0b25EYXRhLnNsb3RzLnB1c2goc2xvdERhdGEpO1xuXHRcdH1cblxuXHRcdC8vIFNraW5zLlxuXHRcdHZhciBza2lucyA9IHJvb3RbXCJza2luc1wiXTtcblx0XHRmb3IgKHZhciBza2luTmFtZSBpbiBza2lucykge1xuXHRcdFx0aWYgKCFza2lucy5oYXNPd25Qcm9wZXJ0eShza2luTmFtZSkpIGNvbnRpbnVlO1xuXHRcdFx0dmFyIHNraW5NYXAgPSBza2luc1tza2luTmFtZV07XG5cdFx0XHR2YXIgc2tpbiA9IG5ldyBzcGluZS5Ta2luKHNraW5OYW1lKTtcblx0XHRcdGZvciAodmFyIHNsb3ROYW1lIGluIHNraW5NYXApIHtcblx0XHRcdFx0aWYgKCFza2luTWFwLmhhc093blByb3BlcnR5KHNsb3ROYW1lKSkgY29udGludWU7XG5cdFx0XHRcdHZhciBzbG90SW5kZXggPSBza2VsZXRvbkRhdGEuZmluZFNsb3RJbmRleChzbG90TmFtZSk7XG5cdFx0XHRcdHZhciBzbG90RW50cnkgPSBza2luTWFwW3Nsb3ROYW1lXTtcblx0XHRcdFx0Zm9yICh2YXIgYXR0YWNobWVudE5hbWUgaW4gc2xvdEVudHJ5KSB7XG5cdFx0XHRcdFx0aWYgKCFzbG90RW50cnkuaGFzT3duUHJvcGVydHkoYXR0YWNobWVudE5hbWUpKSBjb250aW51ZTtcblx0XHRcdFx0XHR2YXIgYXR0YWNobWVudCA9IHRoaXMucmVhZEF0dGFjaG1lbnQoc2tpbiwgYXR0YWNobWVudE5hbWUsIHNsb3RFbnRyeVthdHRhY2htZW50TmFtZV0pO1xuXHRcdFx0XHRcdGlmIChhdHRhY2htZW50ICE9IG51bGwpIHNraW4uYWRkQXR0YWNobWVudChzbG90SW5kZXgsIGF0dGFjaG1lbnROYW1lLCBhdHRhY2htZW50KTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0c2tlbGV0b25EYXRhLnNraW5zLnB1c2goc2tpbik7XG5cdFx0XHRpZiAoc2tpbi5uYW1lID09IFwiZGVmYXVsdFwiKSBza2VsZXRvbkRhdGEuZGVmYXVsdFNraW4gPSBza2luO1xuXHRcdH1cblxuXHRcdC8vIEFuaW1hdGlvbnMuXG5cdFx0dmFyIGFuaW1hdGlvbnMgPSByb290W1wiYW5pbWF0aW9uc1wiXTtcblx0XHRmb3IgKHZhciBhbmltYXRpb25OYW1lIGluIGFuaW1hdGlvbnMpIHtcblx0XHRcdGlmICghYW5pbWF0aW9ucy5oYXNPd25Qcm9wZXJ0eShhbmltYXRpb25OYW1lKSkgY29udGludWU7XG5cdFx0XHR0aGlzLnJlYWRBbmltYXRpb24oYW5pbWF0aW9uTmFtZSwgYW5pbWF0aW9uc1thbmltYXRpb25OYW1lXSwgc2tlbGV0b25EYXRhKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gc2tlbGV0b25EYXRhO1xuXHR9LFxuXHRyZWFkQXR0YWNobWVudDogZnVuY3Rpb24gKHNraW4sIG5hbWUsIG1hcCkge1xuXHRcdG5hbWUgPSBtYXBbXCJuYW1lXCJdIHx8IG5hbWU7XG5cblx0XHR2YXIgdHlwZSA9IHNwaW5lLkF0dGFjaG1lbnRUeXBlW21hcFtcInR5cGVcIl0gfHwgXCJyZWdpb25cIl07XG5cblx0XHRpZiAodHlwZSA9PSBzcGluZS5BdHRhY2htZW50VHlwZS5yZWdpb24pIHtcblx0XHRcdHZhciBhdHRhY2htZW50ID0gbmV3IHNwaW5lLlJlZ2lvbkF0dGFjaG1lbnQoKTtcblx0XHRcdGF0dGFjaG1lbnQueCA9IChtYXBbXCJ4XCJdIHx8IDApICogdGhpcy5zY2FsZTtcblx0XHRcdGF0dGFjaG1lbnQueSA9IChtYXBbXCJ5XCJdIHx8IDApICogdGhpcy5zY2FsZTtcblx0XHRcdGF0dGFjaG1lbnQuc2NhbGVYID0gbWFwW1wic2NhbGVYXCJdIHx8IDE7XG5cdFx0XHRhdHRhY2htZW50LnNjYWxlWSA9IG1hcFtcInNjYWxlWVwiXSB8fCAxO1xuXHRcdFx0YXR0YWNobWVudC5yb3RhdGlvbiA9IG1hcFtcInJvdGF0aW9uXCJdIHx8IDA7XG5cdFx0XHRhdHRhY2htZW50LndpZHRoID0gKG1hcFtcIndpZHRoXCJdIHx8IDMyKSAqIHRoaXMuc2NhbGU7XG5cdFx0XHRhdHRhY2htZW50LmhlaWdodCA9IChtYXBbXCJoZWlnaHRcIl0gfHwgMzIpICogdGhpcy5zY2FsZTtcblx0XHRcdGF0dGFjaG1lbnQudXBkYXRlT2Zmc2V0KCk7XG5cblx0XHRcdGF0dGFjaG1lbnQucmVuZGVyZXJPYmplY3QgPSB7fTtcblx0XHRcdGF0dGFjaG1lbnQucmVuZGVyZXJPYmplY3QubmFtZSA9IG5hbWU7XG5cdFx0XHRhdHRhY2htZW50LnJlbmRlcmVyT2JqZWN0LnNjYWxlID0ge307XG5cdFx0XHRhdHRhY2htZW50LnJlbmRlcmVyT2JqZWN0LnNjYWxlLnggPSBhdHRhY2htZW50LnNjYWxlWDtcblx0XHRcdGF0dGFjaG1lbnQucmVuZGVyZXJPYmplY3Quc2NhbGUueSA9IGF0dGFjaG1lbnQuc2NhbGVZO1xuXHRcdFx0YXR0YWNobWVudC5yZW5kZXJlck9iamVjdC5yb3RhdGlvbiA9IC1hdHRhY2htZW50LnJvdGF0aW9uICogTWF0aC5QSSAvIDE4MDtcblx0XHRcdHJldHVybiBhdHRhY2htZW50O1xuXHRcdH1cblxuICAgICAgICAgICAgdGhyb3cgXCJVbmtub3duIGF0dGFjaG1lbnQgdHlwZTogXCIgKyB0eXBlO1xuXHR9LFxuXG5cdHJlYWRBbmltYXRpb246IGZ1bmN0aW9uIChuYW1lLCBtYXAsIHNrZWxldG9uRGF0YSkge1xuXHRcdHZhciB0aW1lbGluZXMgPSBbXTtcblx0XHR2YXIgZHVyYXRpb24gPSAwO1xuXG5cdFx0dmFyIGJvbmVzID0gbWFwW1wiYm9uZXNcIl07XG5cdFx0Zm9yICh2YXIgYm9uZU5hbWUgaW4gYm9uZXMpIHtcblx0XHRcdGlmICghYm9uZXMuaGFzT3duUHJvcGVydHkoYm9uZU5hbWUpKSBjb250aW51ZTtcblx0XHRcdHZhciBib25lSW5kZXggPSBza2VsZXRvbkRhdGEuZmluZEJvbmVJbmRleChib25lTmFtZSk7XG5cdFx0XHRpZiAoYm9uZUluZGV4ID09IC0xKSB0aHJvdyBcIkJvbmUgbm90IGZvdW5kOiBcIiArIGJvbmVOYW1lO1xuXHRcdFx0dmFyIGJvbmVNYXAgPSBib25lc1tib25lTmFtZV07XG5cblx0XHRcdGZvciAodmFyIHRpbWVsaW5lTmFtZSBpbiBib25lTWFwKSB7XG5cdFx0XHRcdGlmICghYm9uZU1hcC5oYXNPd25Qcm9wZXJ0eSh0aW1lbGluZU5hbWUpKSBjb250aW51ZTtcblx0XHRcdFx0dmFyIHZhbHVlcyA9IGJvbmVNYXBbdGltZWxpbmVOYW1lXTtcblx0XHRcdFx0aWYgKHRpbWVsaW5lTmFtZSA9PSBcInJvdGF0ZVwiKSB7XG5cdFx0XHRcdFx0dmFyIHRpbWVsaW5lID0gbmV3IHNwaW5lLlJvdGF0ZVRpbWVsaW5lKHZhbHVlcy5sZW5ndGgpO1xuXHRcdFx0XHRcdHRpbWVsaW5lLmJvbmVJbmRleCA9IGJvbmVJbmRleDtcblxuXHRcdFx0XHRcdHZhciBmcmFtZUluZGV4ID0gMDtcblx0XHRcdFx0XHRmb3IgKHZhciBpID0gMCwgbiA9IHZhbHVlcy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcblx0XHRcdFx0XHRcdHZhciB2YWx1ZU1hcCA9IHZhbHVlc1tpXTtcblx0XHRcdFx0XHRcdHRpbWVsaW5lLnNldEZyYW1lKGZyYW1lSW5kZXgsIHZhbHVlTWFwW1widGltZVwiXSwgdmFsdWVNYXBbXCJhbmdsZVwiXSk7XG5cdFx0XHRcdFx0XHRzcGluZS5Ta2VsZXRvbkpzb24ucmVhZEN1cnZlKHRpbWVsaW5lLCBmcmFtZUluZGV4LCB2YWx1ZU1hcCk7XG5cdFx0XHRcdFx0XHRmcmFtZUluZGV4Kys7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHRpbWVsaW5lcy5wdXNoKHRpbWVsaW5lKTtcblx0XHRcdFx0XHRkdXJhdGlvbiA9IE1hdGgubWF4KGR1cmF0aW9uLCB0aW1lbGluZS5mcmFtZXNbdGltZWxpbmUuZ2V0RnJhbWVDb3VudCgpICogMiAtIDJdKTtcblxuXHRcdFx0XHR9IGVsc2UgaWYgKHRpbWVsaW5lTmFtZSA9PSBcInRyYW5zbGF0ZVwiIHx8IHRpbWVsaW5lTmFtZSA9PSBcInNjYWxlXCIpIHtcblx0XHRcdFx0XHR2YXIgdGltZWxpbmU7XG5cdFx0XHRcdFx0dmFyIHRpbWVsaW5lU2NhbGUgPSAxO1xuXHRcdFx0XHRcdGlmICh0aW1lbGluZU5hbWUgPT0gXCJzY2FsZVwiKVxuXHRcdFx0XHRcdFx0dGltZWxpbmUgPSBuZXcgc3BpbmUuU2NhbGVUaW1lbGluZSh2YWx1ZXMubGVuZ3RoKTtcblx0XHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRcdHRpbWVsaW5lID0gbmV3IHNwaW5lLlRyYW5zbGF0ZVRpbWVsaW5lKHZhbHVlcy5sZW5ndGgpO1xuXHRcdFx0XHRcdFx0dGltZWxpbmVTY2FsZSA9IHRoaXMuc2NhbGU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHRpbWVsaW5lLmJvbmVJbmRleCA9IGJvbmVJbmRleDtcblxuXHRcdFx0XHRcdHZhciBmcmFtZUluZGV4ID0gMDtcblx0XHRcdFx0XHRmb3IgKHZhciBpID0gMCwgbiA9IHZhbHVlcy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcblx0XHRcdFx0XHRcdHZhciB2YWx1ZU1hcCA9IHZhbHVlc1tpXTtcblx0XHRcdFx0XHRcdHZhciB4ID0gKHZhbHVlTWFwW1wieFwiXSB8fCAwKSAqIHRpbWVsaW5lU2NhbGU7XG5cdFx0XHRcdFx0XHR2YXIgeSA9ICh2YWx1ZU1hcFtcInlcIl0gfHwgMCkgKiB0aW1lbGluZVNjYWxlO1xuXHRcdFx0XHRcdFx0dGltZWxpbmUuc2V0RnJhbWUoZnJhbWVJbmRleCwgdmFsdWVNYXBbXCJ0aW1lXCJdLCB4LCB5KTtcblx0XHRcdFx0XHRcdHNwaW5lLlNrZWxldG9uSnNvbi5yZWFkQ3VydmUodGltZWxpbmUsIGZyYW1lSW5kZXgsIHZhbHVlTWFwKTtcblx0XHRcdFx0XHRcdGZyYW1lSW5kZXgrKztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0dGltZWxpbmVzLnB1c2godGltZWxpbmUpO1xuXHRcdFx0XHRcdGR1cmF0aW9uID0gTWF0aC5tYXgoZHVyYXRpb24sIHRpbWVsaW5lLmZyYW1lc1t0aW1lbGluZS5nZXRGcmFtZUNvdW50KCkgKiAzIC0gM10pO1xuXG5cdFx0XHRcdH0gZWxzZVxuXHRcdFx0XHRcdHRocm93IFwiSW52YWxpZCB0aW1lbGluZSB0eXBlIGZvciBhIGJvbmU6IFwiICsgdGltZWxpbmVOYW1lICsgXCIgKFwiICsgYm9uZU5hbWUgKyBcIilcIjtcblx0XHRcdH1cblx0XHR9XG5cdFx0dmFyIHNsb3RzID0gbWFwW1wic2xvdHNcIl07XG5cdFx0Zm9yICh2YXIgc2xvdE5hbWUgaW4gc2xvdHMpIHtcblx0XHRcdGlmICghc2xvdHMuaGFzT3duUHJvcGVydHkoc2xvdE5hbWUpKSBjb250aW51ZTtcblx0XHRcdHZhciBzbG90TWFwID0gc2xvdHNbc2xvdE5hbWVdO1xuXHRcdFx0dmFyIHNsb3RJbmRleCA9IHNrZWxldG9uRGF0YS5maW5kU2xvdEluZGV4KHNsb3ROYW1lKTtcblxuXHRcdFx0Zm9yICh2YXIgdGltZWxpbmVOYW1lIGluIHNsb3RNYXApIHtcblx0XHRcdFx0aWYgKCFzbG90TWFwLmhhc093blByb3BlcnR5KHRpbWVsaW5lTmFtZSkpIGNvbnRpbnVlO1xuXHRcdFx0XHR2YXIgdmFsdWVzID0gc2xvdE1hcFt0aW1lbGluZU5hbWVdO1xuXHRcdFx0XHRpZiAodGltZWxpbmVOYW1lID09IFwiY29sb3JcIikge1xuXHRcdFx0XHRcdHZhciB0aW1lbGluZSA9IG5ldyBzcGluZS5Db2xvclRpbWVsaW5lKHZhbHVlcy5sZW5ndGgpO1xuXHRcdFx0XHRcdHRpbWVsaW5lLnNsb3RJbmRleCA9IHNsb3RJbmRleDtcblxuXHRcdFx0XHRcdHZhciBmcmFtZUluZGV4ID0gMDtcblx0XHRcdFx0XHRmb3IgKHZhciBpID0gMCwgbiA9IHZhbHVlcy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcblx0XHRcdFx0XHRcdHZhciB2YWx1ZU1hcCA9IHZhbHVlc1tpXTtcblx0XHRcdFx0XHRcdHZhciBjb2xvciA9IHZhbHVlTWFwW1wiY29sb3JcIl07XG5cdFx0XHRcdFx0XHR2YXIgciA9IHNwaW5lLlNrZWxldG9uSnNvbi50b0NvbG9yKGNvbG9yLCAwKTtcblx0XHRcdFx0XHRcdHZhciBnID0gc3BpbmUuU2tlbGV0b25Kc29uLnRvQ29sb3IoY29sb3IsIDEpO1xuXHRcdFx0XHRcdFx0dmFyIGIgPSBzcGluZS5Ta2VsZXRvbkpzb24udG9Db2xvcihjb2xvciwgMik7XG5cdFx0XHRcdFx0XHR2YXIgYSA9IHNwaW5lLlNrZWxldG9uSnNvbi50b0NvbG9yKGNvbG9yLCAzKTtcblx0XHRcdFx0XHRcdHRpbWVsaW5lLnNldEZyYW1lKGZyYW1lSW5kZXgsIHZhbHVlTWFwW1widGltZVwiXSwgciwgZywgYiwgYSk7XG5cdFx0XHRcdFx0XHRzcGluZS5Ta2VsZXRvbkpzb24ucmVhZEN1cnZlKHRpbWVsaW5lLCBmcmFtZUluZGV4LCB2YWx1ZU1hcCk7XG5cdFx0XHRcdFx0XHRmcmFtZUluZGV4Kys7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHRpbWVsaW5lcy5wdXNoKHRpbWVsaW5lKTtcblx0XHRcdFx0XHRkdXJhdGlvbiA9IE1hdGgubWF4KGR1cmF0aW9uLCB0aW1lbGluZS5mcmFtZXNbdGltZWxpbmUuZ2V0RnJhbWVDb3VudCgpICogNSAtIDVdKTtcblxuXHRcdFx0XHR9IGVsc2UgaWYgKHRpbWVsaW5lTmFtZSA9PSBcImF0dGFjaG1lbnRcIikge1xuXHRcdFx0XHRcdHZhciB0aW1lbGluZSA9IG5ldyBzcGluZS5BdHRhY2htZW50VGltZWxpbmUodmFsdWVzLmxlbmd0aCk7XG5cdFx0XHRcdFx0dGltZWxpbmUuc2xvdEluZGV4ID0gc2xvdEluZGV4O1xuXG5cdFx0XHRcdFx0dmFyIGZyYW1lSW5kZXggPSAwO1xuXHRcdFx0XHRcdGZvciAodmFyIGkgPSAwLCBuID0gdmFsdWVzLmxlbmd0aDsgaSA8IG47IGkrKykge1xuXHRcdFx0XHRcdFx0dmFyIHZhbHVlTWFwID0gdmFsdWVzW2ldO1xuXHRcdFx0XHRcdFx0dGltZWxpbmUuc2V0RnJhbWUoZnJhbWVJbmRleCsrLCB2YWx1ZU1hcFtcInRpbWVcIl0sIHZhbHVlTWFwW1wibmFtZVwiXSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHRpbWVsaW5lcy5wdXNoKHRpbWVsaW5lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uID0gTWF0aC5tYXgoZHVyYXRpb24sIHRpbWVsaW5lLmZyYW1lc1t0aW1lbGluZS5nZXRGcmFtZUNvdW50KCkgLSAxXSk7XG5cblx0XHRcdFx0fSBlbHNlXG5cdFx0XHRcdFx0dGhyb3cgXCJJbnZhbGlkIHRpbWVsaW5lIHR5cGUgZm9yIGEgc2xvdDogXCIgKyB0aW1lbGluZU5hbWUgKyBcIiAoXCIgKyBzbG90TmFtZSArIFwiKVwiO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRza2VsZXRvbkRhdGEuYW5pbWF0aW9ucy5wdXNoKG5ldyBzcGluZS5BbmltYXRpb24obmFtZSwgdGltZWxpbmVzLCBkdXJhdGlvbikpO1xuXHR9XG59O1xuc3BpbmUuU2tlbGV0b25Kc29uLnJlYWRDdXJ2ZSA9IGZ1bmN0aW9uICh0aW1lbGluZSwgZnJhbWVJbmRleCwgdmFsdWVNYXApIHtcblx0dmFyIGN1cnZlID0gdmFsdWVNYXBbXCJjdXJ2ZVwiXTtcblx0aWYgKCFjdXJ2ZSkgcmV0dXJuO1xuXHRpZiAoY3VydmUgPT0gXCJzdGVwcGVkXCIpXG5cdFx0dGltZWxpbmUuY3VydmVzLnNldFN0ZXBwZWQoZnJhbWVJbmRleCk7XG5cdGVsc2UgaWYgKGN1cnZlIGluc3RhbmNlb2YgQXJyYXkpXG5cdFx0dGltZWxpbmUuY3VydmVzLnNldEN1cnZlKGZyYW1lSW5kZXgsIGN1cnZlWzBdLCBjdXJ2ZVsxXSwgY3VydmVbMl0sIGN1cnZlWzNdKTtcbn07XG5zcGluZS5Ta2VsZXRvbkpzb24udG9Db2xvciA9IGZ1bmN0aW9uIChoZXhTdHJpbmcsIGNvbG9ySW5kZXgpIHtcblx0aWYgKGhleFN0cmluZy5sZW5ndGggIT0gOCkgdGhyb3cgXCJDb2xvciBoZXhpZGVjaW1hbCBsZW5ndGggbXVzdCBiZSA4LCByZWNpZXZlZDogXCIgKyBoZXhTdHJpbmc7XG5cdHJldHVybiBwYXJzZUludChoZXhTdHJpbmcuc3Vic3RyaW5nKGNvbG9ySW5kZXggKiAyLCAyKSwgMTYpIC8gMjU1O1xufTtcblxuc3BpbmUuQXRsYXMgPSBmdW5jdGlvbiAoYXRsYXNUZXh0LCB0ZXh0dXJlTG9hZGVyKSB7XG5cdHRoaXMudGV4dHVyZUxvYWRlciA9IHRleHR1cmVMb2FkZXI7XG5cdHRoaXMucGFnZXMgPSBbXTtcblx0dGhpcy5yZWdpb25zID0gW107XG5cblx0dmFyIHJlYWRlciA9IG5ldyBzcGluZS5BdGxhc1JlYWRlcihhdGxhc1RleHQpO1xuXHR2YXIgdHVwbGUgPSBbXTtcblx0dHVwbGUubGVuZ3RoID0gNDtcblx0dmFyIHBhZ2UgPSBudWxsO1xuXHR3aGlsZSAodHJ1ZSkge1xuXHRcdHZhciBsaW5lID0gcmVhZGVyLnJlYWRMaW5lKCk7XG5cdFx0aWYgKGxpbmUgPT0gbnVsbCkgYnJlYWs7XG5cdFx0bGluZSA9IHJlYWRlci50cmltKGxpbmUpO1xuXHRcdGlmIChsaW5lLmxlbmd0aCA9PSAwKVxuXHRcdFx0cGFnZSA9IG51bGw7XG5cdFx0ZWxzZSBpZiAoIXBhZ2UpIHtcblx0XHRcdHBhZ2UgPSBuZXcgc3BpbmUuQXRsYXNQYWdlKCk7XG5cdFx0XHRwYWdlLm5hbWUgPSBsaW5lO1xuXG5cdFx0XHRwYWdlLmZvcm1hdCA9IHNwaW5lLkF0bGFzLkZvcm1hdFtyZWFkZXIucmVhZFZhbHVlKCldO1xuXG5cdFx0XHRyZWFkZXIucmVhZFR1cGxlKHR1cGxlKTtcblx0XHRcdHBhZ2UubWluRmlsdGVyID0gc3BpbmUuQXRsYXMuVGV4dHVyZUZpbHRlclt0dXBsZVswXV07XG5cdFx0XHRwYWdlLm1hZ0ZpbHRlciA9IHNwaW5lLkF0bGFzLlRleHR1cmVGaWx0ZXJbdHVwbGVbMV1dO1xuXG5cdFx0XHR2YXIgZGlyZWN0aW9uID0gcmVhZGVyLnJlYWRWYWx1ZSgpO1xuXHRcdFx0cGFnZS51V3JhcCA9IHNwaW5lLkF0bGFzLlRleHR1cmVXcmFwLmNsYW1wVG9FZGdlO1xuXHRcdFx0cGFnZS52V3JhcCA9IHNwaW5lLkF0bGFzLlRleHR1cmVXcmFwLmNsYW1wVG9FZGdlO1xuXHRcdFx0aWYgKGRpcmVjdGlvbiA9PSBcInhcIilcblx0XHRcdFx0cGFnZS51V3JhcCA9IHNwaW5lLkF0bGFzLlRleHR1cmVXcmFwLnJlcGVhdDtcblx0XHRcdGVsc2UgaWYgKGRpcmVjdGlvbiA9PSBcInlcIilcblx0XHRcdFx0cGFnZS52V3JhcCA9IHNwaW5lLkF0bGFzLlRleHR1cmVXcmFwLnJlcGVhdDtcblx0XHRcdGVsc2UgaWYgKGRpcmVjdGlvbiA9PSBcInh5XCIpXG5cdFx0XHRcdHBhZ2UudVdyYXAgPSBwYWdlLnZXcmFwID0gc3BpbmUuQXRsYXMuVGV4dHVyZVdyYXAucmVwZWF0O1xuXG5cdFx0XHR0ZXh0dXJlTG9hZGVyLmxvYWQocGFnZSwgbGluZSk7XG5cblx0XHRcdHRoaXMucGFnZXMucHVzaChwYWdlKTtcblxuXHRcdH0gZWxzZSB7XG5cdFx0XHR2YXIgcmVnaW9uID0gbmV3IHNwaW5lLkF0bGFzUmVnaW9uKCk7XG5cdFx0XHRyZWdpb24ubmFtZSA9IGxpbmU7XG5cdFx0XHRyZWdpb24ucGFnZSA9IHBhZ2U7XG5cblx0XHRcdHJlZ2lvbi5yb3RhdGUgPSByZWFkZXIucmVhZFZhbHVlKCkgPT0gXCJ0cnVlXCI7XG5cblx0XHRcdHJlYWRlci5yZWFkVHVwbGUodHVwbGUpO1xuXHRcdFx0dmFyIHggPSBwYXJzZUludCh0dXBsZVswXSk7XG5cdFx0XHR2YXIgeSA9IHBhcnNlSW50KHR1cGxlWzFdKTtcblxuXHRcdFx0cmVhZGVyLnJlYWRUdXBsZSh0dXBsZSk7XG5cdFx0XHR2YXIgd2lkdGggPSBwYXJzZUludCh0dXBsZVswXSk7XG5cdFx0XHR2YXIgaGVpZ2h0ID0gcGFyc2VJbnQodHVwbGVbMV0pO1xuXG5cdFx0XHRyZWdpb24udSA9IHggLyBwYWdlLndpZHRoO1xuXHRcdFx0cmVnaW9uLnYgPSB5IC8gcGFnZS5oZWlnaHQ7XG5cdFx0XHRpZiAocmVnaW9uLnJvdGF0ZSkge1xuXHRcdFx0XHRyZWdpb24udTIgPSAoeCArIGhlaWdodCkgLyBwYWdlLndpZHRoO1xuXHRcdFx0XHRyZWdpb24udjIgPSAoeSArIHdpZHRoKSAvIHBhZ2UuaGVpZ2h0O1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmVnaW9uLnUyID0gKHggKyB3aWR0aCkgLyBwYWdlLndpZHRoO1xuXHRcdFx0XHRyZWdpb24udjIgPSAoeSArIGhlaWdodCkgLyBwYWdlLmhlaWdodDtcblx0XHRcdH1cblx0XHRcdHJlZ2lvbi54ID0geDtcblx0XHRcdHJlZ2lvbi55ID0geTtcblx0XHRcdHJlZ2lvbi53aWR0aCA9IE1hdGguYWJzKHdpZHRoKTtcblx0XHRcdHJlZ2lvbi5oZWlnaHQgPSBNYXRoLmFicyhoZWlnaHQpO1xuXG5cdFx0XHRpZiAocmVhZGVyLnJlYWRUdXBsZSh0dXBsZSkgPT0gNCkgeyAvLyBzcGxpdCBpcyBvcHRpb25hbFxuXHRcdFx0XHRyZWdpb24uc3BsaXRzID0gW3BhcnNlSW50KHR1cGxlWzBdKSwgcGFyc2VJbnQodHVwbGVbMV0pLCBwYXJzZUludCh0dXBsZVsyXSksIHBhcnNlSW50KHR1cGxlWzNdKV07XG5cblx0XHRcdFx0aWYgKHJlYWRlci5yZWFkVHVwbGUodHVwbGUpID09IDQpIHsgLy8gcGFkIGlzIG9wdGlvbmFsLCBidXQgb25seSBwcmVzZW50IHdpdGggc3BsaXRzXG5cdFx0XHRcdFx0cmVnaW9uLnBhZHMgPSBbcGFyc2VJbnQodHVwbGVbMF0pLCBwYXJzZUludCh0dXBsZVsxXSksIHBhcnNlSW50KHR1cGxlWzJdKSwgcGFyc2VJbnQodHVwbGVbM10pXTtcblxuXHRcdFx0XHRcdHJlYWRlci5yZWFkVHVwbGUodHVwbGUpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdHJlZ2lvbi5vcmlnaW5hbFdpZHRoID0gcGFyc2VJbnQodHVwbGVbMF0pO1xuXHRcdFx0cmVnaW9uLm9yaWdpbmFsSGVpZ2h0ID0gcGFyc2VJbnQodHVwbGVbMV0pO1xuXG5cdFx0XHRyZWFkZXIucmVhZFR1cGxlKHR1cGxlKTtcblx0XHRcdHJlZ2lvbi5vZmZzZXRYID0gcGFyc2VJbnQodHVwbGVbMF0pO1xuXHRcdFx0cmVnaW9uLm9mZnNldFkgPSBwYXJzZUludCh0dXBsZVsxXSk7XG5cblx0XHRcdHJlZ2lvbi5pbmRleCA9IHBhcnNlSW50KHJlYWRlci5yZWFkVmFsdWUoKSk7XG5cblx0XHRcdHRoaXMucmVnaW9ucy5wdXNoKHJlZ2lvbik7XG5cdFx0fVxuXHR9XG59O1xuc3BpbmUuQXRsYXMucHJvdG90eXBlID0ge1xuXHRmaW5kUmVnaW9uOiBmdW5jdGlvbiAobmFtZSkge1xuXHRcdHZhciByZWdpb25zID0gdGhpcy5yZWdpb25zO1xuXHRcdGZvciAodmFyIGkgPSAwLCBuID0gcmVnaW9ucy5sZW5ndGg7IGkgPCBuOyBpKyspXG5cdFx0XHRpZiAocmVnaW9uc1tpXS5uYW1lID09IG5hbWUpIHJldHVybiByZWdpb25zW2ldO1xuXHRcdHJldHVybiBudWxsO1xuXHR9LFxuXHRkaXNwb3NlOiBmdW5jdGlvbiAoKSB7XG5cdFx0dmFyIHBhZ2VzID0gdGhpcy5wYWdlcztcblx0XHRmb3IgKHZhciBpID0gMCwgbiA9IHBhZ2VzLmxlbmd0aDsgaSA8IG47IGkrKylcblx0XHRcdHRoaXMudGV4dHVyZUxvYWRlci51bmxvYWQocGFnZXNbaV0ucmVuZGVyZXJPYmplY3QpO1xuXHR9LFxuXHR1cGRhdGVVVnM6IGZ1bmN0aW9uIChwYWdlKSB7XG5cdFx0dmFyIHJlZ2lvbnMgPSB0aGlzLnJlZ2lvbnM7XG5cdFx0Zm9yICh2YXIgaSA9IDAsIG4gPSByZWdpb25zLmxlbmd0aDsgaSA8IG47IGkrKykge1xuXHRcdFx0dmFyIHJlZ2lvbiA9IHJlZ2lvbnNbaV07XG5cdFx0XHRpZiAocmVnaW9uLnBhZ2UgIT0gcGFnZSkgY29udGludWU7XG5cdFx0XHRyZWdpb24udSA9IHJlZ2lvbi54IC8gcGFnZS53aWR0aDtcblx0XHRcdHJlZ2lvbi52ID0gcmVnaW9uLnkgLyBwYWdlLmhlaWdodDtcblx0XHRcdGlmIChyZWdpb24ucm90YXRlKSB7XG5cdFx0XHRcdHJlZ2lvbi51MiA9IChyZWdpb24ueCArIHJlZ2lvbi5oZWlnaHQpIC8gcGFnZS53aWR0aDtcblx0XHRcdFx0cmVnaW9uLnYyID0gKHJlZ2lvbi55ICsgcmVnaW9uLndpZHRoKSAvIHBhZ2UuaGVpZ2h0O1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmVnaW9uLnUyID0gKHJlZ2lvbi54ICsgcmVnaW9uLndpZHRoKSAvIHBhZ2Uud2lkdGg7XG5cdFx0XHRcdHJlZ2lvbi52MiA9IChyZWdpb24ueSArIHJlZ2lvbi5oZWlnaHQpIC8gcGFnZS5oZWlnaHQ7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG59O1xuXG5zcGluZS5BdGxhcy5Gb3JtYXQgPSB7XG5cdGFscGhhOiAwLFxuXHRpbnRlbnNpdHk6IDEsXG5cdGx1bWluYW5jZUFscGhhOiAyLFxuXHRyZ2I1NjU6IDMsXG5cdHJnYmE0NDQ0OiA0LFxuXHRyZ2I4ODg6IDUsXG5cdHJnYmE4ODg4OiA2XG59O1xuXG5zcGluZS5BdGxhcy5UZXh0dXJlRmlsdGVyID0ge1xuXHRuZWFyZXN0OiAwLFxuXHRsaW5lYXI6IDEsXG5cdG1pcE1hcDogMixcblx0bWlwTWFwTmVhcmVzdE5lYXJlc3Q6IDMsXG5cdG1pcE1hcExpbmVhck5lYXJlc3Q6IDQsXG5cdG1pcE1hcE5lYXJlc3RMaW5lYXI6IDUsXG5cdG1pcE1hcExpbmVhckxpbmVhcjogNlxufTtcblxuc3BpbmUuQXRsYXMuVGV4dHVyZVdyYXAgPSB7XG5cdG1pcnJvcmVkUmVwZWF0OiAwLFxuXHRjbGFtcFRvRWRnZTogMSxcblx0cmVwZWF0OiAyXG59O1xuXG5zcGluZS5BdGxhc1BhZ2UgPSBmdW5jdGlvbiAoKSB7fTtcbnNwaW5lLkF0bGFzUGFnZS5wcm90b3R5cGUgPSB7XG5cdG5hbWU6IG51bGwsXG5cdGZvcm1hdDogbnVsbCxcblx0bWluRmlsdGVyOiBudWxsLFxuXHRtYWdGaWx0ZXI6IG51bGwsXG5cdHVXcmFwOiBudWxsLFxuXHR2V3JhcDogbnVsbCxcblx0cmVuZGVyZXJPYmplY3Q6IG51bGwsXG5cdHdpZHRoOiAwLFxuXHRoZWlnaHQ6IDBcbn07XG5cbnNwaW5lLkF0bGFzUmVnaW9uID0gZnVuY3Rpb24gKCkge307XG5zcGluZS5BdGxhc1JlZ2lvbi5wcm90b3R5cGUgPSB7XG5cdHBhZ2U6IG51bGwsXG5cdG5hbWU6IG51bGwsXG5cdHg6IDAsIHk6IDAsXG5cdHdpZHRoOiAwLCBoZWlnaHQ6IDAsXG5cdHU6IDAsIHY6IDAsIHUyOiAwLCB2MjogMCxcblx0b2Zmc2V0WDogMCwgb2Zmc2V0WTogMCxcblx0b3JpZ2luYWxXaWR0aDogMCwgb3JpZ2luYWxIZWlnaHQ6IDAsXG5cdGluZGV4OiAwLFxuXHRyb3RhdGU6IGZhbHNlLFxuXHRzcGxpdHM6IG51bGwsXG5cdHBhZHM6IG51bGwsXG59O1xuXG5zcGluZS5BdGxhc1JlYWRlciA9IGZ1bmN0aW9uICh0ZXh0KSB7XG5cdHRoaXMubGluZXMgPSB0ZXh0LnNwbGl0KC9cXHJcXG58XFxyfFxcbi8pO1xufTtcbnNwaW5lLkF0bGFzUmVhZGVyLnByb3RvdHlwZSA9IHtcblx0aW5kZXg6IDAsXG5cdHRyaW06IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHRcdHJldHVybiB2YWx1ZS5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLCBcIlwiKTtcblx0fSxcblx0cmVhZExpbmU6IGZ1bmN0aW9uICgpIHtcblx0XHRpZiAodGhpcy5pbmRleCA+PSB0aGlzLmxpbmVzLmxlbmd0aCkgcmV0dXJuIG51bGw7XG5cdFx0cmV0dXJuIHRoaXMubGluZXNbdGhpcy5pbmRleCsrXTtcblx0fSxcblx0cmVhZFZhbHVlOiBmdW5jdGlvbiAoKSB7XG5cdFx0dmFyIGxpbmUgPSB0aGlzLnJlYWRMaW5lKCk7XG5cdFx0dmFyIGNvbG9uID0gbGluZS5pbmRleE9mKFwiOlwiKTtcblx0XHRpZiAoY29sb24gPT0gLTEpIHRocm93IFwiSW52YWxpZCBsaW5lOiBcIiArIGxpbmU7XG5cdFx0cmV0dXJuIHRoaXMudHJpbShsaW5lLnN1YnN0cmluZyhjb2xvbiArIDEpKTtcblx0fSxcblx0LyoqIFJldHVybnMgdGhlIG51bWJlciBvZiB0dXBsZSB2YWx1ZXMgcmVhZCAoMiBvciA0KS4gKi9cblx0cmVhZFR1cGxlOiBmdW5jdGlvbiAodHVwbGUpIHtcblx0XHR2YXIgbGluZSA9IHRoaXMucmVhZExpbmUoKTtcblx0XHR2YXIgY29sb24gPSBsaW5lLmluZGV4T2YoXCI6XCIpO1xuXHRcdGlmIChjb2xvbiA9PSAtMSkgdGhyb3cgXCJJbnZhbGlkIGxpbmU6IFwiICsgbGluZTtcblx0XHR2YXIgaSA9IDAsIGxhc3RNYXRjaD0gY29sb24gKyAxO1xuXHRcdGZvciAoOyBpIDwgMzsgaSsrKSB7XG5cdFx0XHR2YXIgY29tbWEgPSBsaW5lLmluZGV4T2YoXCIsXCIsIGxhc3RNYXRjaCk7XG5cdFx0XHRpZiAoY29tbWEgPT0gLTEpIHtcblx0XHRcdFx0aWYgKGkgPT0gMCkgdGhyb3cgXCJJbnZhbGlkIGxpbmU6IFwiICsgbGluZTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0XHR0dXBsZVtpXSA9IHRoaXMudHJpbShsaW5lLnN1YnN0cihsYXN0TWF0Y2gsIGNvbW1hIC0gbGFzdE1hdGNoKSk7XG5cdFx0XHRsYXN0TWF0Y2ggPSBjb21tYSArIDE7XG5cdFx0fVxuXHRcdHR1cGxlW2ldID0gdGhpcy50cmltKGxpbmUuc3Vic3RyaW5nKGxhc3RNYXRjaCkpO1xuXHRcdHJldHVybiBpICsgMTtcblx0fVxufVxuXG5zcGluZS5BdGxhc0F0dGFjaG1lbnRMb2FkZXIgPSBmdW5jdGlvbiAoYXRsYXMpIHtcblx0dGhpcy5hdGxhcyA9IGF0bGFzO1xufVxuc3BpbmUuQXRsYXNBdHRhY2htZW50TG9hZGVyLnByb3RvdHlwZSA9IHtcblx0bmV3QXR0YWNobWVudDogZnVuY3Rpb24gKHNraW4sIHR5cGUsIG5hbWUpIHtcblx0XHRzd2l0Y2ggKHR5cGUpIHtcblx0XHRjYXNlIHNwaW5lLkF0dGFjaG1lbnRUeXBlLnJlZ2lvbjpcblx0XHRcdHZhciByZWdpb24gPSB0aGlzLmF0bGFzLmZpbmRSZWdpb24obmFtZSk7XG5cdFx0XHRpZiAoIXJlZ2lvbikgdGhyb3cgXCJSZWdpb24gbm90IGZvdW5kIGluIGF0bGFzOiBcIiArIG5hbWUgKyBcIiAoXCIgKyB0eXBlICsgXCIpXCI7XG5cdFx0XHR2YXIgYXR0YWNobWVudCA9IG5ldyBzcGluZS5SZWdpb25BdHRhY2htZW50KG5hbWUpO1xuXHRcdFx0YXR0YWNobWVudC5yZW5kZXJlck9iamVjdCA9IHJlZ2lvbjtcblx0XHRcdGF0dGFjaG1lbnQuc2V0VVZzKHJlZ2lvbi51LCByZWdpb24udiwgcmVnaW9uLnUyLCByZWdpb24udjIsIHJlZ2lvbi5yb3RhdGUpO1xuXHRcdFx0YXR0YWNobWVudC5yZWdpb25PZmZzZXRYID0gcmVnaW9uLm9mZnNldFg7XG5cdFx0XHRhdHRhY2htZW50LnJlZ2lvbk9mZnNldFkgPSByZWdpb24ub2Zmc2V0WTtcblx0XHRcdGF0dGFjaG1lbnQucmVnaW9uV2lkdGggPSByZWdpb24ud2lkdGg7XG5cdFx0XHRhdHRhY2htZW50LnJlZ2lvbkhlaWdodCA9IHJlZ2lvbi5oZWlnaHQ7XG5cdFx0XHRhdHRhY2htZW50LnJlZ2lvbk9yaWdpbmFsV2lkdGggPSByZWdpb24ub3JpZ2luYWxXaWR0aDtcblx0XHRcdGF0dGFjaG1lbnQucmVnaW9uT3JpZ2luYWxIZWlnaHQgPSByZWdpb24ub3JpZ2luYWxIZWlnaHQ7XG5cdFx0XHRyZXR1cm4gYXR0YWNobWVudDtcblx0XHR9XG5cdFx0dGhyb3cgXCJVbmtub3duIGF0dGFjaG1lbnQgdHlwZTogXCIgKyB0eXBlO1xuXHR9XG59XG5cblBJWEkuQW5pbUNhY2hlID0ge307XG5zcGluZS5Cb25lLnlEb3duID0gdHJ1ZTtcblxuLyoqXG4gKiBAYXV0aG9yIE1hdCBHcm92ZXMgaHR0cDovL21hdGdyb3Zlcy5jb20vIEBEb29ybWF0MjNcbiAqL1xuXG5cbi8qKlxuICogVGhpcyBvYmplY3QgaXMgb25lIHRoYXQgd2lsbCBhbGxvdyB5b3UgdG8gc3BlY2lmeSBjdXN0b20gcmVuZGVyaW5nIGZ1bmN0aW9ucyBiYXNlZCBvbiByZW5kZXIgdHlwZVxuICpcbiAqIEBjbGFzcyBDdXN0b21SZW5kZXJhYmxlXG4gKiBAZXh0ZW5kcyBEaXNwbGF5T2JqZWN0XG4gKiBAY29uc3RydWN0b3JcbiAqL1xuUElYSS5DdXN0b21SZW5kZXJhYmxlID0gZnVuY3Rpb24oKVxue1xuXHRQSVhJLkRpc3BsYXlPYmplY3QuY2FsbCggdGhpcyApO1xuXHRcblx0dGhpcy5yZW5kZXJhYmxlID0gdHJ1ZTtcbn1cblxuLy8gY29uc3RydWN0b3JcblBJWEkuQ3VzdG9tUmVuZGVyYWJsZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBQSVhJLkRpc3BsYXlPYmplY3QucHJvdG90eXBlICk7XG5QSVhJLkN1c3RvbVJlbmRlcmFibGUucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gUElYSS5DdXN0b21SZW5kZXJhYmxlO1xuXG4vKipcbiAqIElmIHRoaXMgb2JqZWN0IGlzIGJlaW5nIHJlbmRlcmVkIGJ5IGEgQ2FudmFzUmVuZGVyZXIgaXQgd2lsbCBjYWxsIHRoaXMgY2FsbGJhY2tcbiAqXG4gKiBAbWV0aG9kIHJlbmRlckNhbnZhc1xuICogQHBhcmFtIHJlbmRlcmVyIHtDYW52YXNSZW5kZXJlcn0gVGhlIHJlbmRlcmVyIGluc3RhbmNlXG4gKi9cblBJWEkuQ3VzdG9tUmVuZGVyYWJsZS5wcm90b3R5cGUucmVuZGVyQ2FudmFzID0gZnVuY3Rpb24ocmVuZGVyZXIpXG57XG5cdC8vIG92ZXJyaWRlIVxufVxuXG4vKipcbiAqIElmIHRoaXMgb2JqZWN0IGlzIGJlaW5nIHJlbmRlcmVkIGJ5IGEgV2ViR0xSZW5kZXJlciBpdCB3aWxsIGNhbGwgdGhpcyBjYWxsYmFjayB0byBpbml0aWFsaXplXG4gKlxuICogQG1ldGhvZCBpbml0V2ViR0xcbiAqIEBwYXJhbSByZW5kZXJlciB7V2ViR0xSZW5kZXJlcn0gVGhlIHJlbmRlcmVyIGluc3RhbmNlXG4gKi9cblBJWEkuQ3VzdG9tUmVuZGVyYWJsZS5wcm90b3R5cGUuaW5pdFdlYkdMID0gZnVuY3Rpb24ocmVuZGVyZXIpXG57XG5cdC8vIG92ZXJyaWRlIVxufVxuXG4vKipcbiAqIElmIHRoaXMgb2JqZWN0IGlzIGJlaW5nIHJlbmRlcmVkIGJ5IGEgV2ViR0xSZW5kZXJlciBpdCB3aWxsIGNhbGwgdGhpcyBjYWxsYmFja1xuICpcbiAqIEBtZXRob2QgcmVuZGVyV2ViR0xcbiAqIEBwYXJhbSByZW5kZXJlciB7V2ViR0xSZW5kZXJlcn0gVGhlIHJlbmRlcmVyIGluc3RhbmNlXG4gKi9cblBJWEkuQ3VzdG9tUmVuZGVyYWJsZS5wcm90b3R5cGUucmVuZGVyV2ViR0wgPSBmdW5jdGlvbihyZW5kZXJHcm91cCwgcHJvamVjdGlvbk1hdHJpeClcbntcblx0Ly8gbm90IHN1cmUgaWYgYm90aCBuZWVkZWQ/IGJ1dCB5YSBoYXZlIGZvciBub3chXG5cdC8vIG92ZXJyaWRlIVxufVxuXG5cbi8qKlxuICogQGF1dGhvciBNYXQgR3JvdmVzIGh0dHA6Ly9tYXRncm92ZXMuY29tLyBARG9vcm1hdDIzXG4gKi9cblxuUElYSS5CYXNlVGV4dHVyZUNhY2hlID0ge307XG5QSVhJLnRleHR1cmVzVG9VcGRhdGUgPSBbXTtcblBJWEkudGV4dHVyZXNUb0Rlc3Ryb3kgPSBbXTtcblxuLyoqXG4gKiBBIHRleHR1cmUgc3RvcmVzIHRoZSBpbmZvcm1hdGlvbiB0aGF0IHJlcHJlc2VudHMgYW4gaW1hZ2UuIEFsbCB0ZXh0dXJlcyBoYXZlIGEgYmFzZSB0ZXh0dXJlXG4gKlxuICogQGNsYXNzIEJhc2VUZXh0dXJlXG4gKiBAdXNlcyBFdmVudFRhcmdldFxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0gc291cmNlIHtTdHJpbmd9IHRoZSBzb3VyY2Ugb2JqZWN0IChpbWFnZSBvciBjYW52YXMpXG4gKi9cblBJWEkuQmFzZVRleHR1cmUgPSBmdW5jdGlvbihzb3VyY2UpXG57XG5cdFBJWEkuRXZlbnRUYXJnZXQuY2FsbCggdGhpcyApO1xuXG5cdC8qKlxuXHQgKiBbcmVhZC1vbmx5XSBUaGUgd2lkdGggb2YgdGhlIGJhc2UgdGV4dHVyZSBzZXQgd2hlbiB0aGUgaW1hZ2UgaGFzIGxvYWRlZFxuXHQgKlxuXHQgKiBAcHJvcGVydHkgd2lkdGhcblx0ICogQHR5cGUgTnVtYmVyXG5cdCAqIEByZWFkT25seVxuXHQgKi9cblx0dGhpcy53aWR0aCA9IDEwMDtcblxuXHQvKipcblx0ICogW3JlYWQtb25seV0gVGhlIGhlaWdodCBvZiB0aGUgYmFzZSB0ZXh0dXJlIHNldCB3aGVuIHRoZSBpbWFnZSBoYXMgbG9hZGVkXG5cdCAqXG5cdCAqIEBwcm9wZXJ0eSBoZWlnaHRcblx0ICogQHR5cGUgTnVtYmVyXG5cdCAqIEByZWFkT25seVxuXHQgKi9cblx0dGhpcy5oZWlnaHQgPSAxMDA7XG5cblx0LyoqXG5cdCAqIFtyZWFkLW9ubHldIERlc2NyaWJlcyBpZiB0aGUgYmFzZSB0ZXh0dXJlIGhhcyBsb2FkZWQgb3Igbm90XG5cdCAqXG5cdCAqIEBwcm9wZXJ0eSBoYXNMb2FkZWRcblx0ICogQHR5cGUgQm9vbGVhblxuXHQgKiBAcmVhZE9ubHlcblx0ICovXG5cdHRoaXMuaGFzTG9hZGVkID0gZmFsc2U7XG5cblx0LyoqXG5cdCAqIFRoZSBzb3VyY2UgdGhhdCBpcyBsb2FkZWQgdG8gY3JlYXRlIHRoZSB0ZXh0dXJlXG5cdCAqXG5cdCAqIEBwcm9wZXJ0eSBzb3VyY2Vcblx0ICogQHR5cGUgSW1hZ2Vcblx0ICovXG5cdHRoaXMuc291cmNlID0gc291cmNlO1xuXG5cdGlmKCFzb3VyY2UpcmV0dXJuO1xuXG5cdGlmKHRoaXMuc291cmNlIGluc3RhbmNlb2YgSW1hZ2UgfHwgdGhpcy5zb3VyY2UgaW5zdGFuY2VvZiBIVE1MSW1hZ2VFbGVtZW50KVxuXHR7XG5cdFx0aWYodGhpcy5zb3VyY2UuY29tcGxldGUpXG5cdFx0e1xuXHRcdFx0dGhpcy5oYXNMb2FkZWQgPSB0cnVlO1xuXHRcdFx0dGhpcy53aWR0aCA9IHRoaXMuc291cmNlLndpZHRoO1xuXHRcdFx0dGhpcy5oZWlnaHQgPSB0aGlzLnNvdXJjZS5oZWlnaHQ7XG5cblx0XHRcdFBJWEkudGV4dHVyZXNUb1VwZGF0ZS5wdXNoKHRoaXMpO1xuXHRcdH1cblx0XHRlbHNlXG5cdFx0e1xuXG5cdFx0XHR2YXIgc2NvcGUgPSB0aGlzO1xuXHRcdFx0dGhpcy5zb3VyY2Uub25sb2FkID0gZnVuY3Rpb24oKXtcblxuXHRcdFx0XHRzY29wZS5oYXNMb2FkZWQgPSB0cnVlO1xuXHRcdFx0XHRzY29wZS53aWR0aCA9IHNjb3BlLnNvdXJjZS53aWR0aDtcblx0XHRcdFx0c2NvcGUuaGVpZ2h0ID0gc2NvcGUuc291cmNlLmhlaWdodDtcblxuXHRcdFx0XHQvLyBhZGQgaXQgdG8gc29tZXdoZXJlLi4uXG5cdFx0XHRcdFBJWEkudGV4dHVyZXNUb1VwZGF0ZS5wdXNoKHNjb3BlKTtcblx0XHRcdFx0c2NvcGUuZGlzcGF0Y2hFdmVudCggeyB0eXBlOiAnbG9hZGVkJywgY29udGVudDogc2NvcGUgfSApO1xuXHRcdFx0fVxuXHRcdFx0Ly9cdHRoaXMuaW1hZ2Uuc3JjID0gaW1hZ2VVcmw7XG5cdFx0fVxuXHR9XG5cdGVsc2Vcblx0e1xuXHRcdHRoaXMuaGFzTG9hZGVkID0gdHJ1ZTtcblx0XHR0aGlzLndpZHRoID0gdGhpcy5zb3VyY2Uud2lkdGg7XG5cdFx0dGhpcy5oZWlnaHQgPSB0aGlzLnNvdXJjZS5oZWlnaHQ7XG5cblx0XHRQSVhJLnRleHR1cmVzVG9VcGRhdGUucHVzaCh0aGlzKTtcblx0fVxuXG5cdHRoaXMuX3Bvd2VyT2YyID0gZmFsc2U7XG59XG5cblBJWEkuQmFzZVRleHR1cmUucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gUElYSS5CYXNlVGV4dHVyZTtcblxuLyoqXG4gKiBEZXN0cm95cyB0aGlzIGJhc2UgdGV4dHVyZVxuICpcbiAqIEBtZXRob2QgZGVzdHJveVxuICovXG5QSVhJLkJhc2VUZXh0dXJlLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24oKVxue1xuXHRpZih0aGlzLnNvdXJjZSBpbnN0YW5jZW9mIEltYWdlKVxuXHR7XG5cdFx0dGhpcy5zb3VyY2Uuc3JjID0gbnVsbDtcblx0fVxuXHR0aGlzLnNvdXJjZSA9IG51bGw7XG5cdFBJWEkudGV4dHVyZXNUb0Rlc3Ryb3kucHVzaCh0aGlzKTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgYmFzZSB0ZXh0dXJlIGJhc2VkIG9uIGFuIGltYWdlIHVybFxuICogSWYgdGhlIGltYWdlIGlzIG5vdCBpbiB0aGUgYmFzZSB0ZXh0dXJlIGNhY2hlIGl0IHdpbGwgYmUgIGNyZWF0ZWQgYW5kIGxvYWRlZFxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZXRob2QgZnJvbUltYWdlXG4gKiBAcGFyYW0gaW1hZ2VVcmwge1N0cmluZ30gVGhlIGltYWdlIHVybCBvZiB0aGUgdGV4dHVyZVxuICogQHJldHVybiBCYXNlVGV4dHVyZVxuICovXG5QSVhJLkJhc2VUZXh0dXJlLmZyb21JbWFnZSA9IGZ1bmN0aW9uKGltYWdlVXJsLCBjcm9zc29yaWdpbilcbntcblx0dmFyIGJhc2VUZXh0dXJlID0gUElYSS5CYXNlVGV4dHVyZUNhY2hlW2ltYWdlVXJsXTtcblx0aWYoIWJhc2VUZXh0dXJlKVxuXHR7XG5cdFx0Ly8gbmV3IEltYWdlKCkgYnJlYWtzIHRleCBsb2FkaW5nIGluIHNvbWUgdmVyc2lvbnMgb2YgQ2hyb21lLlxuXHRcdC8vIFNlZSBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9MjM4MDcxXG5cdFx0dmFyIGltYWdlID0gbmV3IEltYWdlKCk7Ly9kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcblx0XHRpZiAoY3Jvc3NvcmlnaW4pXG5cdFx0e1xuXHRcdFx0aW1hZ2UuY3Jvc3NPcmlnaW4gPSAnJztcblx0XHR9XG5cdFx0aW1hZ2Uuc3JjID0gaW1hZ2VVcmw7XG5cdFx0YmFzZVRleHR1cmUgPSBuZXcgUElYSS5CYXNlVGV4dHVyZShpbWFnZSk7XG5cdFx0UElYSS5CYXNlVGV4dHVyZUNhY2hlW2ltYWdlVXJsXSA9IGJhc2VUZXh0dXJlO1xuXHR9XG5cblx0cmV0dXJuIGJhc2VUZXh0dXJlO1xufVxuXG4vKipcbiAqIEBhdXRob3IgTWF0IEdyb3ZlcyBodHRwOi8vbWF0Z3JvdmVzLmNvbS8gQERvb3JtYXQyM1xuICovXG5cblBJWEkuVGV4dHVyZUNhY2hlID0ge307XG5QSVhJLkZyYW1lQ2FjaGUgPSB7fTtcblxuLyoqXG4gKiBBIHRleHR1cmUgc3RvcmVzIHRoZSBpbmZvcm1hdGlvbiB0aGF0IHJlcHJlc2VudHMgYW4gaW1hZ2Ugb3IgcGFydCBvZiBhbiBpbWFnZS4gSXQgY2Fubm90IGJlIGFkZGVkXG4gKiB0byB0aGUgZGlzcGxheSBsaXN0IGRpcmVjdGx5LiBUbyBkbyB0aGlzIHVzZSBQSVhJLlNwcml0ZS4gSWYgbm8gZnJhbWUgaXMgcHJvdmlkZWQgdGhlbiB0aGUgd2hvbGUgaW1hZ2UgaXMgdXNlZFxuICpcbiAqIEBjbGFzcyBUZXh0dXJlXG4gKiBAdXNlcyBFdmVudFRhcmdldFxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0gYmFzZVRleHR1cmUge0Jhc2VUZXh0dXJlfSBUaGUgYmFzZSB0ZXh0dXJlIHNvdXJjZSB0byBjcmVhdGUgdGhlIHRleHR1cmUgZnJvbVxuICogQHBhcmFtIGZyYW1lIHtSZWN0YW5nbGV9IFRoZSByZWN0YW5nbGUgZnJhbWUgb2YgdGhlIHRleHR1cmUgdG8gc2hvd1xuICovXG5QSVhJLlRleHR1cmUgPSBmdW5jdGlvbihiYXNlVGV4dHVyZSwgZnJhbWUpXG57XG5cdFBJWEkuRXZlbnRUYXJnZXQuY2FsbCggdGhpcyApO1xuXG5cdGlmKCFmcmFtZSlcblx0e1xuXHRcdHRoaXMubm9GcmFtZSA9IHRydWU7XG5cdFx0ZnJhbWUgPSBuZXcgUElYSS5SZWN0YW5nbGUoMCwwLDEsMSk7XG5cdH1cblxuXHRpZihiYXNlVGV4dHVyZSBpbnN0YW5jZW9mIFBJWEkuVGV4dHVyZSlcblx0XHRiYXNlVGV4dHVyZSA9IGJhc2VUZXh0dXJlLmJhc2VUZXh0dXJlO1xuXG5cdC8qKlxuXHQgKiBUaGUgYmFzZSB0ZXh0dXJlIG9mIHRoaXMgdGV4dHVyZVxuXHQgKlxuXHQgKiBAcHJvcGVydHkgYmFzZVRleHR1cmVcblx0ICogQHR5cGUgQmFzZVRleHR1cmVcblx0ICovXG5cdHRoaXMuYmFzZVRleHR1cmUgPSBiYXNlVGV4dHVyZTtcblxuXHQvKipcblx0ICogVGhlIGZyYW1lIHNwZWNpZmllcyB0aGUgcmVnaW9uIG9mIHRoZSBiYXNlIHRleHR1cmUgdGhhdCB0aGlzIHRleHR1cmUgdXNlc1xuXHQgKlxuXHQgKiBAcHJvcGVydHkgZnJhbWVcblx0ICogQHR5cGUgUmVjdGFuZ2xlXG5cdCAqL1xuXHR0aGlzLmZyYW1lID0gZnJhbWU7XG5cblx0LyoqXG5cdCAqIFRoZSB0cmltIHBvaW50XG5cdCAqXG5cdCAqIEBwcm9wZXJ0eSB0cmltXG5cdCAqIEB0eXBlIFBvaW50XG5cdCAqL1xuXHR0aGlzLnRyaW0gPSBuZXcgUElYSS5Qb2ludCgpO1xuXG5cdHRoaXMuc2NvcGUgPSB0aGlzO1xuXG5cdGlmKGJhc2VUZXh0dXJlLmhhc0xvYWRlZClcblx0e1xuXHRcdGlmKHRoaXMubm9GcmFtZSlmcmFtZSA9IG5ldyBQSVhJLlJlY3RhbmdsZSgwLDAsIGJhc2VUZXh0dXJlLndpZHRoLCBiYXNlVGV4dHVyZS5oZWlnaHQpO1xuXHRcdC8vY29uc29sZS5sb2coZnJhbWUpXG5cblx0XHR0aGlzLnNldEZyYW1lKGZyYW1lKTtcblx0fVxuXHRlbHNlXG5cdHtcblx0XHR2YXIgc2NvcGUgPSB0aGlzO1xuXHRcdGJhc2VUZXh0dXJlLmFkZEV2ZW50TGlzdGVuZXIoICdsb2FkZWQnLCBmdW5jdGlvbigpeyBzY29wZS5vbkJhc2VUZXh0dXJlTG9hZGVkKCl9ICk7XG5cdH1cbn1cblxuUElYSS5UZXh0dXJlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFBJWEkuVGV4dHVyZTtcblxuLyoqXG4gKiBDYWxsZWQgd2hlbiB0aGUgYmFzZSB0ZXh0dXJlIGlzIGxvYWRlZFxuICpcbiAqIEBtZXRob2Qgb25CYXNlVGV4dHVyZUxvYWRlZFxuICogQHBhcmFtIGV2ZW50XG4gKiBAcHJpdmF0ZVxuICovXG5QSVhJLlRleHR1cmUucHJvdG90eXBlLm9uQmFzZVRleHR1cmVMb2FkZWQgPSBmdW5jdGlvbihldmVudClcbntcblx0dmFyIGJhc2VUZXh0dXJlID0gdGhpcy5iYXNlVGV4dHVyZTtcblx0YmFzZVRleHR1cmUucmVtb3ZlRXZlbnRMaXN0ZW5lciggJ2xvYWRlZCcsIHRoaXMub25Mb2FkZWQgKTtcblxuXHRpZih0aGlzLm5vRnJhbWUpdGhpcy5mcmFtZSA9IG5ldyBQSVhJLlJlY3RhbmdsZSgwLDAsIGJhc2VUZXh0dXJlLndpZHRoLCBiYXNlVGV4dHVyZS5oZWlnaHQpO1xuXHR0aGlzLm5vRnJhbWUgPSBmYWxzZTtcblx0dGhpcy53aWR0aCA9IHRoaXMuZnJhbWUud2lkdGg7XG5cdHRoaXMuaGVpZ2h0ID0gdGhpcy5mcmFtZS5oZWlnaHQ7XG5cblx0dGhpcy5zY29wZS5kaXNwYXRjaEV2ZW50KCB7IHR5cGU6ICd1cGRhdGUnLCBjb250ZW50OiB0aGlzIH0gKTtcbn1cblxuLyoqXG4gKiBEZXN0cm95cyB0aGlzIHRleHR1cmVcbiAqXG4gKiBAbWV0aG9kIGRlc3Ryb3lcbiAqIEBwYXJhbSBkZXN0cm95QmFzZSB7Qm9vbGVhbn0gV2hldGhlciB0byBkZXN0cm95IHRoZSBiYXNlIHRleHR1cmUgYXMgd2VsbFxuICovXG5QSVhJLlRleHR1cmUucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbihkZXN0cm95QmFzZSlcbntcblx0aWYoZGVzdHJveUJhc2UpdGhpcy5iYXNlVGV4dHVyZS5kZXN0cm95KCk7XG59XG5cbi8qKlxuICogU3BlY2lmaWVzIHRoZSByZWN0YW5nbGUgcmVnaW9uIG9mIHRoZSBiYXNlVGV4dHVyZVxuICpcbiAqIEBtZXRob2Qgc2V0RnJhbWVcbiAqIEBwYXJhbSBmcmFtZSB7UmVjdGFuZ2xlfSBUaGUgZnJhbWUgb2YgdGhlIHRleHR1cmUgdG8gc2V0IGl0IHRvXG4gKi9cblBJWEkuVGV4dHVyZS5wcm90b3R5cGUuc2V0RnJhbWUgPSBmdW5jdGlvbihmcmFtZSlcbntcblx0dGhpcy5mcmFtZSA9IGZyYW1lO1xuXHR0aGlzLndpZHRoID0gZnJhbWUud2lkdGg7XG5cdHRoaXMuaGVpZ2h0ID0gZnJhbWUuaGVpZ2h0O1xuXG5cdGlmKGZyYW1lLnggKyBmcmFtZS53aWR0aCA+IHRoaXMuYmFzZVRleHR1cmUud2lkdGggfHwgZnJhbWUueSArIGZyYW1lLmhlaWdodCA+IHRoaXMuYmFzZVRleHR1cmUuaGVpZ2h0KVxuXHR7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiVGV4dHVyZSBFcnJvcjogZnJhbWUgZG9lcyBub3QgZml0IGluc2lkZSB0aGUgYmFzZSBUZXh0dXJlIGRpbWVuc2lvbnMgXCIgKyB0aGlzKTtcblx0fVxuXG5cdHRoaXMudXBkYXRlRnJhbWUgPSB0cnVlO1xuXG5cdFBJWEkuVGV4dHVyZS5mcmFtZVVwZGF0ZXMucHVzaCh0aGlzKTtcblx0Ly90aGlzLmRpc3BhdGNoRXZlbnQoIHsgdHlwZTogJ3VwZGF0ZScsIGNvbnRlbnQ6IHRoaXMgfSApO1xufVxuXG4vKipcbiAqIEhlbHBlciBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSB0ZXh0dXJlIGJhc2VkIG9uIGFuIGltYWdlIHVybFxuICogSWYgdGhlIGltYWdlIGlzIG5vdCBpbiB0aGUgdGV4dHVyZSBjYWNoZSBpdCB3aWxsIGJlICBjcmVhdGVkIGFuZCBsb2FkZWRcbiAqXG4gKiBAc3RhdGljXG4gKiBAbWV0aG9kIGZyb21JbWFnZVxuICogQHBhcmFtIGltYWdlVXJsIHtTdHJpbmd9IFRoZSBpbWFnZSB1cmwgb2YgdGhlIHRleHR1cmVcbiAqIEBwYXJhbSBjcm9zc29yaWdpbiB7Qm9vbGVhbn0gV2hldGhlciByZXF1ZXN0cyBzaG91bGQgYmUgdHJlYXRlZCBhcyBjcm9zc29yaWdpblxuICogQHJldHVybiBUZXh0dXJlXG4gKi9cblBJWEkuVGV4dHVyZS5mcm9tSW1hZ2UgPSBmdW5jdGlvbihpbWFnZVVybCwgY3Jvc3NvcmlnaW4pXG57XG5cdHZhciB0ZXh0dXJlID0gUElYSS5UZXh0dXJlQ2FjaGVbaW1hZ2VVcmxdO1xuXG5cdGlmKCF0ZXh0dXJlKVxuXHR7XG5cdFx0dGV4dHVyZSA9IG5ldyBQSVhJLlRleHR1cmUoUElYSS5CYXNlVGV4dHVyZS5mcm9tSW1hZ2UoaW1hZ2VVcmwsIGNyb3Nzb3JpZ2luKSk7XG5cdFx0UElYSS5UZXh0dXJlQ2FjaGVbaW1hZ2VVcmxdID0gdGV4dHVyZTtcblx0fVxuXG5cdHJldHVybiB0ZXh0dXJlO1xufVxuXG4vKipcbiAqIEhlbHBlciBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSB0ZXh0dXJlIGJhc2VkIG9uIGEgZnJhbWUgaWRcbiAqIElmIHRoZSBmcmFtZSBpZCBpcyBub3QgaW4gdGhlIHRleHR1cmUgY2FjaGUgYW4gZXJyb3Igd2lsbCBiZSB0aHJvd25cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWV0aG9kIGZyb21GcmFtZVxuICogQHBhcmFtIGZyYW1lSWQge1N0cmluZ30gVGhlIGZyYW1lIGlkIG9mIHRoZSB0ZXh0dXJlXG4gKiBAcmV0dXJuIFRleHR1cmVcbiAqL1xuUElYSS5UZXh0dXJlLmZyb21GcmFtZSA9IGZ1bmN0aW9uKGZyYW1lSWQpXG57XG5cdHZhciB0ZXh0dXJlID0gUElYSS5UZXh0dXJlQ2FjaGVbZnJhbWVJZF07XG5cdGlmKCF0ZXh0dXJlKXRocm93IG5ldyBFcnJvcihcIlRoZSBmcmFtZUlkICdcIisgZnJhbWVJZCArXCInIGRvZXMgbm90IGV4aXN0IGluIHRoZSB0ZXh0dXJlIGNhY2hlIFwiICsgdGhpcyk7XG5cdHJldHVybiB0ZXh0dXJlO1xufVxuXG4vKipcbiAqIEhlbHBlciBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSB0ZXh0dXJlIGJhc2VkIG9uIGEgY2FudmFzIGVsZW1lbnRcbiAqIElmIHRoZSBjYW52YXMgaXMgbm90IGluIHRoZSB0ZXh0dXJlIGNhY2hlIGl0IHdpbGwgYmUgIGNyZWF0ZWQgYW5kIGxvYWRlZFxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZXRob2QgZnJvbUNhbnZhc1xuICogQHBhcmFtIGNhbnZhcyB7Q2FudmFzfSBUaGUgY2FudmFzIGVsZW1lbnQgc291cmNlIG9mIHRoZSB0ZXh0dXJlXG4gKiBAcmV0dXJuIFRleHR1cmVcbiAqL1xuUElYSS5UZXh0dXJlLmZyb21DYW52YXMgPSBmdW5jdGlvbihjYW52YXMpXG57XG5cdHZhclx0YmFzZVRleHR1cmUgPSBuZXcgUElYSS5CYXNlVGV4dHVyZShjYW52YXMpO1xuXHRyZXR1cm4gbmV3IFBJWEkuVGV4dHVyZShiYXNlVGV4dHVyZSk7XG59XG5cblxuLyoqXG4gKiBBZGRzIGEgdGV4dHVyZSB0byB0aGUgdGV4dHVyZUNhY2hlLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZXRob2QgYWRkVGV4dHVyZVRvQ2FjaGVcbiAqIEBwYXJhbSB0ZXh0dXJlIHtUZXh0dXJlfVxuICogQHBhcmFtIGlkIHtTdHJpbmd9IHRoZSBpZCB0aGF0IHRoZSB0ZXh0dXJlIHdpbGwgYmUgc3RvcmVkIGFnYWluc3QuXG4gKi9cblBJWEkuVGV4dHVyZS5hZGRUZXh0dXJlVG9DYWNoZSA9IGZ1bmN0aW9uKHRleHR1cmUsIGlkKVxue1xuXHRQSVhJLlRleHR1cmVDYWNoZVtpZF0gPSB0ZXh0dXJlO1xufVxuXG4vKipcbiAqIFJlbW92ZSBhIHRleHR1cmUgZnJvbSB0aGUgdGV4dHVyZUNhY2hlLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZXRob2QgcmVtb3ZlVGV4dHVyZUZyb21DYWNoZVxuICogQHBhcmFtIGlkIHtTdHJpbmd9IHRoZSBpZCBvZiB0aGUgdGV4dHVyZSB0byBiZSByZW1vdmVkXG4gKiBAcmV0dXJuIHtUZXh0dXJlfSB0aGUgdGV4dHVyZSB0aGF0IHdhcyByZW1vdmVkXG4gKi9cblBJWEkuVGV4dHVyZS5yZW1vdmVUZXh0dXJlRnJvbUNhY2hlID0gZnVuY3Rpb24oaWQpXG57XG5cdHZhciB0ZXh0dXJlID0gUElYSS5UZXh0dXJlQ2FjaGVbaWRdXG5cdFBJWEkuVGV4dHVyZUNhY2hlW2lkXSA9IG51bGw7XG5cdHJldHVybiB0ZXh0dXJlO1xufVxuXG4vLyB0aGlzIGlzIG1vcmUgZm9yIHdlYkdMLi4gaXQgY29udGFpbnMgdXBkYXRlZCBmcmFtZXMuLlxuUElYSS5UZXh0dXJlLmZyYW1lVXBkYXRlcyA9IFtdO1xuXG5cbi8qKlxuICogQGF1dGhvciBNYXQgR3JvdmVzIGh0dHA6Ly9tYXRncm92ZXMuY29tLyBARG9vcm1hdDIzXG4gKi9cblxuLyoqXG4gQSBSZW5kZXJUZXh0dXJlIGlzIGEgc3BlY2lhbCB0ZXh0dXJlIHRoYXQgYWxsb3dzIGFueSBwaXhpIGRpc3BsYXlPYmplY3QgdG8gYmUgcmVuZGVyZWQgdG8gaXQuXG5cbiBfX0hpbnRfXzogQWxsIERpc3BsYXlPYmplY3RzIChleG1wbC4gU3ByaXRlcykgdGhhdCByZW5kZXJzIG9uIFJlbmRlclRleHR1cmUgc2hvdWxkIGJlIHByZWxvYWRlZC4gXG4gT3RoZXJ3aXNlIGJsYWNrIHJlY3RhbmdsZXMgd2lsbCBiZSBkcmF3biBpbnN0ZWFkLiAgXG4gXG4gUmVuZGVyVGV4dHVyZSB0YWtlcyBzbmFwc2hvdCBvZiBEaXNwbGF5T2JqZWN0IHBhc3NlZCB0byByZW5kZXIgbWV0aG9kLiBJZiBEaXNwbGF5T2JqZWN0IGlzIHBhc3NlZCB0byByZW5kZXIgbWV0aG9kLCBwb3NpdGlvbiBhbmQgcm90YXRpb24gb2YgaXQgd2lsbCBiZSBpZ25vcmVkLiBGb3IgZXhhbXBsZTpcbiBcblx0dmFyIHJlbmRlclRleHR1cmUgPSBuZXcgUElYSS5SZW5kZXJUZXh0dXJlKDgwMCwgNjAwKTtcblx0dmFyIHNwcml0ZSA9IFBJWEkuU3ByaXRlLmZyb21JbWFnZShcInNwaW5PYmpfMDEucG5nXCIpO1xuXHRzcHJpdGUucG9zaXRpb24ueCA9IDgwMC8yO1xuXHRzcHJpdGUucG9zaXRpb24ueSA9IDYwMC8yO1xuXHRzcHJpdGUuYW5jaG9yLnggPSAwLjU7XG5cdHNwcml0ZS5hbmNob3IueSA9IDAuNTtcblx0cmVuZGVyVGV4dHVyZS5yZW5kZXIoc3ByaXRlKTtcblxuIFNwcml0ZSBpbiB0aGlzIGNhc2Ugd2lsbCBiZSByZW5kZXJlZCB0byAwLDAgcG9zaXRpb24uIFRvIHJlbmRlciB0aGlzIHNwcml0ZSBhdCBjZW50ZXIgRGlzcGxheU9iamVjdENvbnRhaW5lciBzaG91bGQgYmUgdXNlZDpcblxuXHR2YXIgZG9jID0gbmV3IFBJWEkuRGlzcGxheU9iamVjdENvbnRhaW5lcigpO1xuXHRkb2MuYWRkQ2hpbGQoc3ByaXRlKTtcblx0cmVuZGVyVGV4dHVyZS5yZW5kZXIoZG9jKTsgIC8vIFJlbmRlcnMgdG8gY2VudGVyIG9mIHJlbmRlclRleHR1cmVcblxuIEBjbGFzcyBSZW5kZXJUZXh0dXJlXG4gQGV4dGVuZHMgVGV4dHVyZVxuIEBjb25zdHJ1Y3RvclxuIEBwYXJhbSB3aWR0aCB7TnVtYmVyfSBUaGUgd2lkdGggb2YgdGhlIHJlbmRlciB0ZXh0dXJlXG4gQHBhcmFtIGhlaWdodCB7TnVtYmVyfSBUaGUgaGVpZ2h0IG9mIHRoZSByZW5kZXIgdGV4dHVyZVxuICovXG5QSVhJLlJlbmRlclRleHR1cmUgPSBmdW5jdGlvbih3aWR0aCwgaGVpZ2h0KVxue1xuXHRQSVhJLkV2ZW50VGFyZ2V0LmNhbGwoIHRoaXMgKTtcblxuXHR0aGlzLndpZHRoID0gd2lkdGggfHwgMTAwO1xuXHR0aGlzLmhlaWdodCA9IGhlaWdodCB8fCAxMDA7XG5cblx0dGhpcy5pbmRldGl0eU1hdHJpeCA9IFBJWEkubWF0My5jcmVhdGUoKTtcblxuXHR0aGlzLmZyYW1lID0gbmV3IFBJWEkuUmVjdGFuZ2xlKDAsIDAsIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KTtcdFxuXG5cdGlmKFBJWEkuZ2wpXG5cdHtcblx0XHR0aGlzLmluaXRXZWJHTCgpO1xuXHR9XG5cdGVsc2Vcblx0e1xuXHRcdHRoaXMuaW5pdENhbnZhcygpO1xuXHR9XG59XG5cblBJWEkuUmVuZGVyVGV4dHVyZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBQSVhJLlRleHR1cmUucHJvdG90eXBlICk7XG5QSVhJLlJlbmRlclRleHR1cmUucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gUElYSS5SZW5kZXJUZXh0dXJlO1xuXG4vKipcbiAqIEluaXRpYWxpemVzIHRoZSB3ZWJnbCBkYXRhIGZvciB0aGlzIHRleHR1cmVcbiAqXG4gKiBAbWV0aG9kIGluaXRXZWJHTFxuICogQHByaXZhdGVcbiAqL1xuUElYSS5SZW5kZXJUZXh0dXJlLnByb3RvdHlwZS5pbml0V2ViR0wgPSBmdW5jdGlvbigpXG57XG5cdHZhciBnbCA9IFBJWEkuZ2w7XG5cdHRoaXMuZ2xGcmFtZWJ1ZmZlciA9IGdsLmNyZWF0ZUZyYW1lYnVmZmVyKCk7XG5cbiAgIFx0Z2wuYmluZEZyYW1lYnVmZmVyKGdsLkZSQU1FQlVGRkVSLCB0aGlzLmdsRnJhbWVidWZmZXIgKTtcblxuICAgIHRoaXMuZ2xGcmFtZWJ1ZmZlci53aWR0aCA9IHRoaXMud2lkdGg7XG4gICAgdGhpcy5nbEZyYW1lYnVmZmVyLmhlaWdodCA9IHRoaXMuaGVpZ2h0O1x0XG5cblx0dGhpcy5iYXNlVGV4dHVyZSA9IG5ldyBQSVhJLkJhc2VUZXh0dXJlKCk7XG5cblx0dGhpcy5iYXNlVGV4dHVyZS53aWR0aCA9IHRoaXMud2lkdGg7XG5cdHRoaXMuYmFzZVRleHR1cmUuaGVpZ2h0ID0gdGhpcy5oZWlnaHQ7XG5cbiAgICB0aGlzLmJhc2VUZXh0dXJlLl9nbFRleHR1cmUgPSBnbC5jcmVhdGVUZXh0dXJlKCk7XG4gICAgZ2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgdGhpcy5iYXNlVGV4dHVyZS5fZ2xUZXh0dXJlKTtcblxuXHRnbC50ZXhJbWFnZTJEKGdsLlRFWFRVUkVfMkQsIDAsIGdsLlJHQkEsICB0aGlzLndpZHRoLCAgdGhpcy5oZWlnaHQsIDAsIGdsLlJHQkEsIGdsLlVOU0lHTkVEX0JZVEUsIG51bGwpO1xuXG4gICAgZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX01BR19GSUxURVIsIGdsLkxJTkVBUik7XG5cdGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9NSU5fRklMVEVSLCBnbC5MSU5FQVIpO1xuXHRnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfV1JBUF9TLCBnbC5DTEFNUF9UT19FREdFKTtcblx0Z2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX1dSQVBfVCwgZ2wuQ0xBTVBfVE9fRURHRSk7XG5cblx0dGhpcy5iYXNlVGV4dHVyZS5pc1JlbmRlciA9IHRydWU7XG5cblx0Z2wuYmluZEZyYW1lYnVmZmVyKGdsLkZSQU1FQlVGRkVSLCB0aGlzLmdsRnJhbWVidWZmZXIgKTtcblx0Z2wuZnJhbWVidWZmZXJUZXh0dXJlMkQoZ2wuRlJBTUVCVUZGRVIsIGdsLkNPTE9SX0FUVEFDSE1FTlQwLCBnbC5URVhUVVJFXzJELCB0aGlzLmJhc2VUZXh0dXJlLl9nbFRleHR1cmUsIDApO1xuXG5cdC8vIGNyZWF0ZSBhIHByb2plY3Rpb24gbWF0cml4Li5cblx0dGhpcy5wcm9qZWN0aW9uID0gbmV3IFBJWEkuUG9pbnQodGhpcy53aWR0aC8yICwgLXRoaXMuaGVpZ2h0LzIpO1xuXG5cdC8vIHNldCB0aGUgY29ycmVjdCByZW5kZXIgZnVuY3Rpb24uLlxuXHR0aGlzLnJlbmRlciA9IHRoaXMucmVuZGVyV2ViR0w7XG59XG5cblxuUElYSS5SZW5kZXJUZXh0dXJlLnByb3RvdHlwZS5yZXNpemUgPSBmdW5jdGlvbih3aWR0aCwgaGVpZ2h0KVxue1xuXG5cdHRoaXMud2lkdGggPSB3aWR0aDtcblx0dGhpcy5oZWlnaHQgPSBoZWlnaHQ7XG5cdFxuXHRpZihQSVhJLmdsKVxuXHR7XG5cdFx0dGhpcy5wcm9qZWN0aW9uLnggPSB0aGlzLndpZHRoLzJcblx0XHR0aGlzLnByb2plY3Rpb24ueSA9IC10aGlzLmhlaWdodC8yO1xuXHRcblx0XHR2YXIgZ2wgPSBQSVhJLmdsO1xuXHRcdGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsIHRoaXMuYmFzZVRleHR1cmUuX2dsVGV4dHVyZSk7XG5cdFx0Z2wudGV4SW1hZ2UyRChnbC5URVhUVVJFXzJELCAwLCBnbC5SR0JBLCAgdGhpcy53aWR0aCwgIHRoaXMuaGVpZ2h0LCAwLCBnbC5SR0JBLCBnbC5VTlNJR05FRF9CWVRFLCBudWxsKTtcblx0fVxuXHRlbHNlXG5cdHtcblx0XHRcblx0XHR0aGlzLmZyYW1lLndpZHRoID0gdGhpcy53aWR0aFxuXHRcdHRoaXMuZnJhbWUuaGVpZ2h0ID0gdGhpcy5oZWlnaHQ7XG5cdFx0dGhpcy5yZW5kZXJlci5yZXNpemUodGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xuXHR9XG59XG5cbi8qKlxuICogSW5pdGlhbGl6ZXMgdGhlIGNhbnZhcyBkYXRhIGZvciB0aGlzIHRleHR1cmVcbiAqXG4gKiBAbWV0aG9kIGluaXRDYW52YXNcbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuUmVuZGVyVGV4dHVyZS5wcm90b3R5cGUuaW5pdENhbnZhcyA9IGZ1bmN0aW9uKClcbntcblx0dGhpcy5yZW5kZXJlciA9IG5ldyBQSVhJLkNhbnZhc1JlbmRlcmVyKHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0LCBudWxsLCAwKTtcblxuXHR0aGlzLmJhc2VUZXh0dXJlID0gbmV3IFBJWEkuQmFzZVRleHR1cmUodGhpcy5yZW5kZXJlci52aWV3KTtcblx0dGhpcy5mcmFtZSA9IG5ldyBQSVhJLlJlY3RhbmdsZSgwLCAwLCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCk7XG5cblx0dGhpcy5yZW5kZXIgPSB0aGlzLnJlbmRlckNhbnZhcztcbn1cblxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIHdpbGwgZHJhdyB0aGUgZGlzcGxheSBvYmplY3QgdG8gdGhlIHRleHR1cmUuXG4gKlxuICogQG1ldGhvZCByZW5kZXJXZWJHTFxuICogQHBhcmFtIGRpc3BsYXlPYmplY3Qge0Rpc3BsYXlPYmplY3R9IFRoZSBkaXNwbGF5IG9iamVjdCB0byByZW5kZXIgdGhpcyB0ZXh0dXJlIG9uXG4gKiBAcGFyYW0gY2xlYXIge0Jvb2xlYW59IElmIHRydWUgdGhlIHRleHR1cmUgd2lsbCBiZSBjbGVhcmVkIGJlZm9yZSB0aGUgZGlzcGxheU9iamVjdCBpcyBkcmF3blxuICogQHByaXZhdGVcbiAqL1xuUElYSS5SZW5kZXJUZXh0dXJlLnByb3RvdHlwZS5yZW5kZXJXZWJHTCA9IGZ1bmN0aW9uKGRpc3BsYXlPYmplY3QsIHBvc2l0aW9uLCBjbGVhcilcbntcblx0dmFyIGdsID0gUElYSS5nbDtcblxuXHQvLyBlbmFibGUgdGhlIGFscGhhIGNvbG9yIG1hc2suLlxuXHRnbC5jb2xvck1hc2sodHJ1ZSwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSk7IFxuXG5cdGdsLnZpZXdwb3J0KDAsIDAsIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KTtcdFxuXG5cdGdsLmJpbmRGcmFtZWJ1ZmZlcihnbC5GUkFNRUJVRkZFUiwgdGhpcy5nbEZyYW1lYnVmZmVyICk7XG5cblx0aWYoY2xlYXIpXG5cdHtcblx0XHRnbC5jbGVhckNvbG9yKDAsMCwwLCAwKTsgICAgIFxuXHRcdGdsLmNsZWFyKGdsLkNPTE9SX0JVRkZFUl9CSVQpO1xuXHR9XG5cblx0Ly8gVEhJUyBXSUxMIE1FU1MgV0lUSCBISVQgVEVTVElORyFcblx0dmFyIGNoaWxkcmVuID0gZGlzcGxheU9iamVjdC5jaGlsZHJlbjtcblxuXHQvL1RPRE8gLT8gY3JlYXRlIGEgbmV3IG9uZT8/PyBkb250IHRoaW5rIHNvIVxuXHR2YXIgb3JpZ2luYWxXb3JsZFRyYW5zZm9ybSA9IGRpc3BsYXlPYmplY3Qud29ybGRUcmFuc2Zvcm07XG5cdGRpc3BsYXlPYmplY3Qud29ybGRUcmFuc2Zvcm0gPSBQSVhJLm1hdDMuY3JlYXRlKCk7Ly9zdGhpcy5pbmRldGl0eU1hdHJpeDtcblx0Ly8gbW9kaWZ5IHRvIGZsaXAuLi5cblx0ZGlzcGxheU9iamVjdC53b3JsZFRyYW5zZm9ybVs0XSA9IC0xO1xuXHRkaXNwbGF5T2JqZWN0LndvcmxkVHJhbnNmb3JtWzVdID0gdGhpcy5wcm9qZWN0aW9uLnkgKiAtMjtcblxuXHRpZihwb3NpdGlvbilcblx0e1xuXHRcdGRpc3BsYXlPYmplY3Qud29ybGRUcmFuc2Zvcm1bMl0gPSBwb3NpdGlvbi54O1xuXHRcdGRpc3BsYXlPYmplY3Qud29ybGRUcmFuc2Zvcm1bNV0gLT0gcG9zaXRpb24ueTtcblx0fVxuXHRcblx0UElYSS52aXNpYmxlQ291bnQrKztcblx0ZGlzcGxheU9iamVjdC52Y291bnQgPSBQSVhJLnZpc2libGVDb3VudDtcblx0XG5cdGZvcih2YXIgaT0wLGo9Y2hpbGRyZW4ubGVuZ3RoOyBpPGo7IGkrKylcblx0e1xuXHRcdGNoaWxkcmVuW2ldLnVwZGF0ZVRyYW5zZm9ybSgpO1x0XG5cdH1cblxuXHR2YXIgcmVuZGVyR3JvdXAgPSBkaXNwbGF5T2JqZWN0Ll9fcmVuZGVyR3JvdXA7XG5cblx0aWYocmVuZGVyR3JvdXApXG5cdHtcblx0XHRpZihkaXNwbGF5T2JqZWN0ID09IHJlbmRlckdyb3VwLnJvb3QpXG5cdFx0e1xuXHRcdFx0cmVuZGVyR3JvdXAucmVuZGVyKHRoaXMucHJvamVjdGlvbiwgdGhpcy5nbEZyYW1lYnVmZmVyKTtcblx0XHR9XG5cdFx0ZWxzZVxuXHRcdHtcblx0XHRcdHJlbmRlckdyb3VwLnJlbmRlclNwZWNpZmljKGRpc3BsYXlPYmplY3QsIHRoaXMucHJvamVjdGlvbiwgdGhpcy5nbEZyYW1lYnVmZmVyKTtcblx0XHR9XG5cdH1cblx0ZWxzZVxuXHR7XG5cdFx0aWYoIXRoaXMucmVuZGVyR3JvdXApdGhpcy5yZW5kZXJHcm91cCA9IG5ldyBQSVhJLldlYkdMUmVuZGVyR3JvdXAoZ2wpO1xuXHRcdHRoaXMucmVuZGVyR3JvdXAuc2V0UmVuZGVyYWJsZShkaXNwbGF5T2JqZWN0KTtcblx0XHR0aGlzLnJlbmRlckdyb3VwLnJlbmRlcih0aGlzLnByb2plY3Rpb24sIHRoaXMuZ2xGcmFtZWJ1ZmZlcik7XG5cdH1cblx0XG5cdGRpc3BsYXlPYmplY3Qud29ybGRUcmFuc2Zvcm0gPSBvcmlnaW5hbFdvcmxkVHJhbnNmb3JtO1xufVxuXG5cbi8qKlxuICogVGhpcyBmdW5jdGlvbiB3aWxsIGRyYXcgdGhlIGRpc3BsYXkgb2JqZWN0IHRvIHRoZSB0ZXh0dXJlLlxuICpcbiAqIEBtZXRob2QgcmVuZGVyQ2FudmFzXG4gKiBAcGFyYW0gZGlzcGxheU9iamVjdCB7RGlzcGxheU9iamVjdH0gVGhlIGRpc3BsYXkgb2JqZWN0IHRvIHJlbmRlciB0aGlzIHRleHR1cmUgb25cbiAqIEBwYXJhbSBjbGVhciB7Qm9vbGVhbn0gSWYgdHJ1ZSB0aGUgdGV4dHVyZSB3aWxsIGJlIGNsZWFyZWQgYmVmb3JlIHRoZSBkaXNwbGF5T2JqZWN0IGlzIGRyYXduXG4gKiBAcHJpdmF0ZVxuICovXG5QSVhJLlJlbmRlclRleHR1cmUucHJvdG90eXBlLnJlbmRlckNhbnZhcyA9IGZ1bmN0aW9uKGRpc3BsYXlPYmplY3QsIHBvc2l0aW9uLCBjbGVhcilcbntcblx0dmFyIGNoaWxkcmVuID0gZGlzcGxheU9iamVjdC5jaGlsZHJlbjtcblxuXHRkaXNwbGF5T2JqZWN0LndvcmxkVHJhbnNmb3JtID0gUElYSS5tYXQzLmNyZWF0ZSgpO1xuXHRcblx0aWYocG9zaXRpb24pXG5cdHtcblx0XHRkaXNwbGF5T2JqZWN0LndvcmxkVHJhbnNmb3JtWzJdID0gcG9zaXRpb24ueDtcblx0XHRkaXNwbGF5T2JqZWN0LndvcmxkVHJhbnNmb3JtWzVdID0gcG9zaXRpb24ueTtcblx0fVxuXHRcblxuXHRmb3IodmFyIGk9MCxqPWNoaWxkcmVuLmxlbmd0aDsgaTxqOyBpKyspXG5cdHtcblx0XHRjaGlsZHJlbltpXS51cGRhdGVUcmFuc2Zvcm0oKTtcdFxuXHR9XG5cblx0aWYoY2xlYXIpdGhpcy5yZW5kZXJlci5jb250ZXh0LmNsZWFyUmVjdCgwLDAsIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KTtcblx0XG4gICAgdGhpcy5yZW5kZXJlci5yZW5kZXJEaXNwbGF5T2JqZWN0KGRpc3BsYXlPYmplY3QpO1xuICAgIFxuICAgIHRoaXMucmVuZGVyZXIuY29udGV4dC5zZXRUcmFuc2Zvcm0oMSwwLDAsMSwwLDApOyBcbiAgICBcblxuICAvLyAgUElYSS50ZXh0dXJlc1RvVXBkYXRlLnB1c2godGhpcy5iYXNlVGV4dHVyZSk7XG59XG5cbi8qKlxuICogQGF1dGhvciBNYXQgR3JvdmVzIGh0dHA6Ly9tYXRncm92ZXMuY29tLyBARG9vcm1hdDIzXG4gKi9cblxuLyoqXG4gKiBBIENsYXNzIHRoYXQgbG9hZHMgYSBidW5jaCBvZiBpbWFnZXMgLyBzcHJpdGUgc2hlZXQgLyBiaXRtYXAgZm9udCBmaWxlcy4gT25jZSB0aGVcbiAqIGFzc2V0cyBoYXZlIGJlZW4gbG9hZGVkIHRoZXkgYXJlIGFkZGVkIHRvIHRoZSBQSVhJIFRleHR1cmUgY2FjaGUgYW5kIGNhbiBiZSBhY2Nlc3NlZFxuICogZWFzaWx5IHRocm91Z2ggUElYSS5UZXh0dXJlLmZyb21JbWFnZSgpIGFuZCBQSVhJLlNwcml0ZS5mcm9tSW1hZ2UoKVxuICogV2hlbiBhbGwgaXRlbXMgaGF2ZSBiZWVuIGxvYWRlZCB0aGlzIGNsYXNzIHdpbGwgZGlzcGF0Y2ggYSBcIm9uTG9hZGVkXCIgZXZlbnRcbiAqIEFzIGVhY2ggaW5kaXZpZHVhbCBpdGVtIGlzIGxvYWRlZCB0aGlzIGNsYXNzIHdpbGwgZGlzcGF0Y2ggYSBcIm9uUHJvZ3Jlc3NcIiBldmVudFxuICpcbiAqIEBjbGFzcyBBc3NldExvYWRlclxuICogQGNvbnN0cnVjdG9yXG4gKiBAdXNlcyBFdmVudFRhcmdldFxuICogQHBhcmFtIHtBcnJheTxTdHJpbmc+fSBhc3NldFVSTHMgYW4gYXJyYXkgb2YgaW1hZ2Uvc3ByaXRlIHNoZWV0IHVybHMgdGhhdCB5b3Ugd291bGQgbGlrZSBsb2FkZWRcbiAqICAgICAgc3VwcG9ydGVkLiBTdXBwb3J0ZWQgaW1hZ2UgZm9ybWF0cyBpbmNsdWRlIFwianBlZ1wiLCBcImpwZ1wiLCBcInBuZ1wiLCBcImdpZlwiLiBTdXBwb3J0ZWRcbiAqICAgICAgc3ByaXRlIHNoZWV0IGRhdGEgZm9ybWF0cyBvbmx5IGluY2x1ZGUgXCJKU09OXCIgYXQgdGhpcyB0aW1lLiBTdXBwb3J0ZWQgYml0bWFwIGZvbnRcbiAqICAgICAgZGF0YSBmb3JtYXRzIGluY2x1ZGUgXCJ4bWxcIiBhbmQgXCJmbnRcIi5cbiAqIEBwYXJhbSBjcm9zc29yaWdpbiB7Qm9vbGVhbn0gV2hldGhlciByZXF1ZXN0cyBzaG91bGQgYmUgdHJlYXRlZCBhcyBjcm9zc29yaWdpblxuICovXG5QSVhJLkFzc2V0TG9hZGVyID0gZnVuY3Rpb24oYXNzZXRVUkxzLCBjcm9zc29yaWdpbilcbntcblx0UElYSS5FdmVudFRhcmdldC5jYWxsKHRoaXMpO1xuXG5cdC8qKlxuXHQgKiBUaGUgYXJyYXkgb2YgYXNzZXQgVVJMcyB0aGF0IGFyZSBnb2luZyB0byBiZSBsb2FkZWRcbiAgICAgKlxuXHQgKiBAcHJvcGVydHkgYXNzZXRVUkxzXG5cdCAqIEB0eXBlIEFycmF5PFN0cmluZz5cblx0ICovXG5cdHRoaXMuYXNzZXRVUkxzID0gYXNzZXRVUkxzO1xuXG4gICAgLyoqXG4gICAgICogV2hldGhlciB0aGUgcmVxdWVzdHMgc2hvdWxkIGJlIHRyZWF0ZWQgYXMgY3Jvc3Mgb3JpZ2luXG4gICAgICpcbiAgICAgKiBAcHJvcGVydHkgY3Jvc3NvcmlnaW5cbiAgICAgKiBAdHlwZSBCb29sZWFuXG4gICAgICovXG5cdHRoaXMuY3Jvc3NvcmlnaW4gPSBjcm9zc29yaWdpbjtcblxuICAgIC8qKlxuICAgICAqIE1hcHMgZmlsZSBleHRlbnNpb24gdG8gbG9hZGVyIHR5cGVzXG4gICAgICpcbiAgICAgKiBAcHJvcGVydHkgbG9hZGVyc0J5VHlwZVxuICAgICAqIEB0eXBlIE9iamVjdFxuICAgICAqL1xuICAgIHRoaXMubG9hZGVyc0J5VHlwZSA9IHtcbiAgICAgICAgXCJqcGdcIjogIFBJWEkuSW1hZ2VMb2FkZXIsXG4gICAgICAgIFwianBlZ1wiOiBQSVhJLkltYWdlTG9hZGVyLFxuICAgICAgICBcInBuZ1wiOiAgUElYSS5JbWFnZUxvYWRlcixcbiAgICAgICAgXCJnaWZcIjogIFBJWEkuSW1hZ2VMb2FkZXIsXG4gICAgICAgIFwianNvblwiOiBQSVhJLkpzb25Mb2FkZXIsXG4gICAgICAgIFwiYW5pbVwiOiBQSVhJLlNwaW5lTG9hZGVyLFxuICAgICAgICBcInhtbFwiOiAgUElYSS5CaXRtYXBGb250TG9hZGVyLFxuICAgICAgICBcImZudFwiOiAgUElYSS5CaXRtYXBGb250TG9hZGVyXG4gICAgfTtcblxuXG59O1xuXG4vKipcbiAqIEZpcmVkIHdoZW4gYW4gaXRlbSBoYXMgbG9hZGVkXG4gKiBAZXZlbnQgb25Qcm9ncmVzc1xuICovXG5cbi8qKlxuICogRmlyZWQgd2hlbiBhbGwgdGhlIGFzc2V0cyBoYXZlIGxvYWRlZFxuICogQGV2ZW50IG9uQ29tcGxldGVcbiAqL1xuXG4vLyBjb25zdHJ1Y3RvclxuUElYSS5Bc3NldExvYWRlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBQSVhJLkFzc2V0TG9hZGVyO1xuXG4vKipcbiAqIFN0YXJ0cyBsb2FkaW5nIHRoZSBhc3NldHMgc2VxdWVudGlhbGx5XG4gKlxuICogQG1ldGhvZCBsb2FkXG4gKi9cblBJWEkuQXNzZXRMb2FkZXIucHJvdG90eXBlLmxvYWQgPSBmdW5jdGlvbigpXG57XG4gICAgdmFyIHNjb3BlID0gdGhpcztcblxuXHR0aGlzLmxvYWRDb3VudCA9IHRoaXMuYXNzZXRVUkxzLmxlbmd0aDtcblxuICAgIGZvciAodmFyIGk9MDsgaSA8IHRoaXMuYXNzZXRVUkxzLmxlbmd0aDsgaSsrKVxuXHR7XG5cdFx0dmFyIGZpbGVOYW1lID0gdGhpcy5hc3NldFVSTHNbaV07XG5cdFx0dmFyIGZpbGVUeXBlID0gZmlsZU5hbWUuc3BsaXQoXCIuXCIpLnBvcCgpLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAgICAgdmFyIGxvYWRlckNsYXNzID0gdGhpcy5sb2FkZXJzQnlUeXBlW2ZpbGVUeXBlXTtcbiAgICAgICAgaWYoIWxvYWRlckNsYXNzKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGZpbGVUeXBlICsgXCIgaXMgYW4gdW5zdXBwb3J0ZWQgZmlsZSB0eXBlXCIpO1xuXG4gICAgICAgIHZhciBsb2FkZXIgPSBuZXcgbG9hZGVyQ2xhc3MoZmlsZU5hbWUsIHRoaXMuY3Jvc3NvcmlnaW4pO1xuXG4gICAgICAgIGxvYWRlci5hZGRFdmVudExpc3RlbmVyKFwibG9hZGVkXCIsIGZ1bmN0aW9uKClcbiAgICAgICAge1xuICAgICAgICAgICAgc2NvcGUub25Bc3NldExvYWRlZCgpO1xuICAgICAgICB9KTtcbiAgICAgICAgbG9hZGVyLmxvYWQoKTtcblx0fVxufTtcblxuLyoqXG4gKiBJbnZva2VkIGFmdGVyIGVhY2ggZmlsZSBpcyBsb2FkZWRcbiAqXG4gKiBAbWV0aG9kIG9uQXNzZXRMb2FkZWRcbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuQXNzZXRMb2FkZXIucHJvdG90eXBlLm9uQXNzZXRMb2FkZWQgPSBmdW5jdGlvbigpXG57XG4gICAgdGhpcy5sb2FkQ291bnQtLTtcblx0dGhpcy5kaXNwYXRjaEV2ZW50KHt0eXBlOiBcIm9uUHJvZ3Jlc3NcIiwgY29udGVudDogdGhpc30pO1xuXHRpZih0aGlzLm9uUHJvZ3Jlc3MpIHRoaXMub25Qcm9ncmVzcygpO1xuXG5cdGlmKHRoaXMubG9hZENvdW50ID09IDApXG5cdHtcblx0XHR0aGlzLmRpc3BhdGNoRXZlbnQoe3R5cGU6IFwib25Db21wbGV0ZVwiLCBjb250ZW50OiB0aGlzfSk7XG5cdFx0aWYodGhpcy5vbkNvbXBsZXRlKSB0aGlzLm9uQ29tcGxldGUoKTtcblx0fVxufTtcblxuXG4vKipcbiAqIEBhdXRob3IgTWF0IEdyb3ZlcyBodHRwOi8vbWF0Z3JvdmVzLmNvbS8gQERvb3JtYXQyM1xuICovXG5cbi8qKlxuICogVGhlIGpzb24gZmlsZSBsb2FkZXIgaXMgdXNlZCB0byBsb2FkIGluIEpTT04gZGF0YSBhbmQgcGFyc2luZyBpdFxuICogV2hlbiBsb2FkZWQgdGhpcyBjbGFzcyB3aWxsIGRpc3BhdGNoIGEgXCJsb2FkZWRcIiBldmVudFxuICogSWYgbG9hZCBmYWlsZWQgdGhpcyBjbGFzcyB3aWxsIGRpc3BhdGNoIGEgXCJlcnJvclwiIGV2ZW50XG4gKlxuICogQGNsYXNzIEpzb25Mb2FkZXJcbiAqIEB1c2VzIEV2ZW50VGFyZ2V0XG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB1cmwge1N0cmluZ30gVGhlIHVybCBvZiB0aGUgSlNPTiBmaWxlXG4gKiBAcGFyYW0gY3Jvc3NvcmlnaW4ge0Jvb2xlYW59IFdoZXRoZXIgcmVxdWVzdHMgc2hvdWxkIGJlIHRyZWF0ZWQgYXMgY3Jvc3NvcmlnaW5cbiAqL1xuUElYSS5Kc29uTG9hZGVyID0gZnVuY3Rpb24gKHVybCwgY3Jvc3NvcmlnaW4pIHtcblx0UElYSS5FdmVudFRhcmdldC5jYWxsKHRoaXMpO1xuXG5cdC8qKlxuXHQgKiBUaGUgdXJsIG9mIHRoZSBiaXRtYXAgZm9udCBkYXRhXG5cdCAqXG5cdCAqIEBwcm9wZXJ0eSB1cmxcblx0ICogQHR5cGUgU3RyaW5nXG5cdCAqL1xuXHR0aGlzLnVybCA9IHVybDtcblxuXHQvKipcblx0ICogV2hldGhlciB0aGUgcmVxdWVzdHMgc2hvdWxkIGJlIHRyZWF0ZWQgYXMgY3Jvc3Mgb3JpZ2luXG5cdCAqXG5cdCAqIEBwcm9wZXJ0eSBjcm9zc29yaWdpblxuXHQgKiBAdHlwZSBCb29sZWFuXG5cdCAqL1xuXHR0aGlzLmNyb3Nzb3JpZ2luID0gY3Jvc3NvcmlnaW47XG5cblx0LyoqXG5cdCAqIFtyZWFkLW9ubHldIFRoZSBiYXNlIHVybCBvZiB0aGUgYml0bWFwIGZvbnQgZGF0YVxuXHQgKlxuXHQgKiBAcHJvcGVydHkgYmFzZVVybFxuXHQgKiBAdHlwZSBTdHJpbmdcblx0ICogQHJlYWRPbmx5XG5cdCAqL1xuXHR0aGlzLmJhc2VVcmwgPSB1cmwucmVwbGFjZSgvW15cXC9dKiQvLCBcIlwiKTtcblxuXHQvKipcblx0ICogW3JlYWQtb25seV0gV2hldGhlciB0aGUgZGF0YSBoYXMgbG9hZGVkIHlldFxuXHQgKlxuXHQgKiBAcHJvcGVydHkgbG9hZGVkXG5cdCAqIEB0eXBlIEJvb2xlYW5cblx0ICogQHJlYWRPbmx5XG5cdCAqL1xuXHR0aGlzLmxvYWRlZCA9IGZhbHNlO1xuXG59O1xuXG4vLyBjb25zdHJ1Y3RvclxuUElYSS5Kc29uTG9hZGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFBJWEkuSnNvbkxvYWRlcjtcblxuLyoqXG4gKiBMb2FkcyB0aGUgSlNPTiBkYXRhXG4gKlxuICogQG1ldGhvZCBsb2FkXG4gKi9cblBJWEkuSnNvbkxvYWRlci5wcm90b3R5cGUubG9hZCA9IGZ1bmN0aW9uICgpIHtcblx0dGhpcy5hamF4UmVxdWVzdCA9IG5ldyBBamF4UmVxdWVzdCgpO1xuXHR2YXIgc2NvcGUgPSB0aGlzO1xuXHR0aGlzLmFqYXhSZXF1ZXN0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcblx0XHRzY29wZS5vbkpTT05Mb2FkZWQoKTtcblx0fTtcblxuXHR0aGlzLmFqYXhSZXF1ZXN0Lm9wZW4oXCJHRVRcIiwgdGhpcy51cmwsIHRydWUpO1xuXHRpZiAodGhpcy5hamF4UmVxdWVzdC5vdmVycmlkZU1pbWVUeXBlKSB0aGlzLmFqYXhSZXF1ZXN0Lm92ZXJyaWRlTWltZVR5cGUoXCJhcHBsaWNhdGlvbi9qc29uXCIpO1xuXHR0aGlzLmFqYXhSZXF1ZXN0LnNlbmQobnVsbCk7XG59O1xuXG4vKipcbiAqIEludm9rZSB3aGVuIEpTT04gZmlsZSBpcyBsb2FkZWRcbiAqXG4gKiBAbWV0aG9kIG9uSlNPTkxvYWRlZFxuICogQHByaXZhdGVcbiAqL1xuUElYSS5Kc29uTG9hZGVyLnByb3RvdHlwZS5vbkpTT05Mb2FkZWQgPSBmdW5jdGlvbiAoKSB7XG5cdGlmICh0aGlzLmFqYXhSZXF1ZXN0LnJlYWR5U3RhdGUgPT0gNCkge1xuXHRcdGlmICh0aGlzLmFqYXhSZXF1ZXN0LnN0YXR1cyA9PSAyMDAgfHwgd2luZG93LmxvY2F0aW9uLmhyZWYuaW5kZXhPZihcImh0dHBcIikgPT0gLTEpIHtcblx0XHRcdHRoaXMuanNvbiA9IEpTT04ucGFyc2UodGhpcy5hamF4UmVxdWVzdC5yZXNwb25zZVRleHQpO1xuXG5cdFx0XHRpZih0aGlzLmpzb24uZnJhbWVzKVxuXHRcdFx0e1xuXHRcdFx0XHQvLyBzcHJpdGUgc2hlZXRcblx0XHRcdFx0dmFyIHNjb3BlID0gdGhpcztcblx0XHRcdFx0dmFyIHRleHR1cmVVcmwgPSB0aGlzLmJhc2VVcmwgKyB0aGlzLmpzb24ubWV0YS5pbWFnZTtcblx0XHRcdFx0dmFyIGltYWdlID0gbmV3IFBJWEkuSW1hZ2VMb2FkZXIodGV4dHVyZVVybCwgdGhpcy5jcm9zc29yaWdpbik7XG5cdFx0XHRcdHZhciBmcmFtZURhdGEgPSB0aGlzLmpzb24uZnJhbWVzO1xuXG5cdFx0XHRcdHRoaXMudGV4dHVyZSA9IGltYWdlLnRleHR1cmUuYmFzZVRleHR1cmU7XG5cdFx0XHRcdGltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkZWRcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XG5cdFx0XHRcdFx0c2NvcGUub25Mb2FkZWQoKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdFx0Zm9yICh2YXIgaSBpbiBmcmFtZURhdGEpIHtcblx0XHRcdFx0XHR2YXIgcmVjdCA9IGZyYW1lRGF0YVtpXS5mcmFtZTtcblx0XHRcdFx0XHRpZiAocmVjdCkge1xuXHRcdFx0XHRcdFx0UElYSS5UZXh0dXJlQ2FjaGVbaV0gPSBuZXcgUElYSS5UZXh0dXJlKHRoaXMudGV4dHVyZSwge1xuXHRcdFx0XHRcdFx0XHR4OiByZWN0LngsXG5cdFx0XHRcdFx0XHRcdHk6IHJlY3QueSxcblx0XHRcdFx0XHRcdFx0d2lkdGg6IHJlY3Qudyxcblx0XHRcdFx0XHRcdFx0aGVpZ2h0OiByZWN0Lmhcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0aWYgKGZyYW1lRGF0YVtpXS50cmltbWVkKSB7XG5cdFx0XHRcdFx0XHRcdC8vdmFyIHJlYWxTaXplID0gZnJhbWVEYXRhW2ldLnNwcml0ZVNvdXJjZVNpemU7XG5cdFx0XHRcdFx0XHRcdFBJWEkuVGV4dHVyZUNhY2hlW2ldLnJlYWxTaXplID0gZnJhbWVEYXRhW2ldLnNwcml0ZVNvdXJjZVNpemU7XG5cdFx0XHRcdFx0XHRcdFBJWEkuVGV4dHVyZUNhY2hlW2ldLnRyaW0ueCA9IDA7IC8vIChyZWFsU2l6ZS54IC8gcmVjdC53KVxuXHRcdFx0XHRcdFx0XHQvLyBjYWxjdWxhdGUgdGhlIG9mZnNldCFcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpbWFnZS5sb2FkKCk7XG5cblx0XHRcdH1cblx0XHRcdGVsc2UgaWYodGhpcy5qc29uLmJvbmVzKVxuXHRcdFx0e1xuXHRcdFx0XHQvLyBzcGluZSBhbmltYXRpb25cblx0XHRcdFx0dmFyIHNwaW5lSnNvblBhcnNlciA9IG5ldyBzcGluZS5Ta2VsZXRvbkpzb24oKTtcblx0XHRcdFx0dmFyIHNrZWxldG9uRGF0YSA9IHNwaW5lSnNvblBhcnNlci5yZWFkU2tlbGV0b25EYXRhKHRoaXMuanNvbik7XG5cdFx0XHRcdFBJWEkuQW5pbUNhY2hlW3RoaXMudXJsXSA9IHNrZWxldG9uRGF0YTtcblx0XHRcdFx0dGhpcy5vbkxvYWRlZCgpO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZVxuXHRcdFx0e1xuXHRcdFx0XHR0aGlzLm9uTG9hZGVkKCk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGVsc2Vcblx0XHR7XG5cdFx0XHR0aGlzLm9uRXJyb3IoKTtcblx0XHR9XG5cdH1cbn07XG5cbi8qKlxuICogSW52b2tlIHdoZW4ganNvbiBmaWxlIGxvYWRlZFxuICpcbiAqIEBtZXRob2Qgb25Mb2FkZWRcbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuSnNvbkxvYWRlci5wcm90b3R5cGUub25Mb2FkZWQgPSBmdW5jdGlvbiAoKSB7XG5cdHRoaXMubG9hZGVkID0gdHJ1ZTtcblx0dGhpcy5kaXNwYXRjaEV2ZW50KHtcblx0XHR0eXBlOiBcImxvYWRlZFwiLFxuXHRcdGNvbnRlbnQ6IHRoaXNcblx0fSk7XG59O1xuXG4vKipcbiAqIEludm9rZSB3aGVuIGVycm9yIG9jY3VyZWRcbiAqXG4gKiBAbWV0aG9kIG9uRXJyb3JcbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuSnNvbkxvYWRlci5wcm90b3R5cGUub25FcnJvciA9IGZ1bmN0aW9uICgpIHtcblx0dGhpcy5kaXNwYXRjaEV2ZW50KHtcblx0XHR0eXBlOiBcImVycm9yXCIsXG5cdFx0Y29udGVudDogdGhpc1xuXHR9KTtcbn07XG4vKipcbiAqIEBhdXRob3IgTWF0IEdyb3ZlcyBodHRwOi8vbWF0Z3JvdmVzLmNvbS8gQERvb3JtYXQyM1xuICovXG5cbi8qKlxuICogVGhlIHNwcml0ZSBzaGVldCBsb2FkZXIgaXMgdXNlZCB0byBsb2FkIGluIEpTT04gc3ByaXRlIHNoZWV0IGRhdGFcbiAqIFRvIGdlbmVyYXRlIHRoZSBkYXRhIHlvdSBjYW4gdXNlIGh0dHA6Ly93d3cuY29kZWFuZHdlYi5jb20vdGV4dHVyZXBhY2tlciBhbmQgcHVibGlzaCB0aGUgXCJKU09OXCIgZm9ybWF0XG4gKiBUaGVyZSBpcyBhIGZyZWUgdmVyc2lvbiBzbyB0aGF0cyBuaWNlLCBhbHRob3VnaCB0aGUgcGFpZCB2ZXJzaW9uIGlzIGdyZWF0IHZhbHVlIGZvciBtb25leS5cbiAqIEl0IGlzIGhpZ2hseSByZWNvbW1lbmRlZCB0byB1c2UgU3ByaXRlIHNoZWV0cyAoYWxzbyBrbm93IGFzIHRleHR1cmUgYXRsYXNcIikgYXMgaXQgbWVhbnMgc3ByaXRlXCJzIGNhbiBiZSBiYXRjaGVkIGFuZCBkcmF3biB0b2dldGhlciBmb3IgaGlnaGx5IGluY3JlYXNlZCByZW5kZXJpbmcgc3BlZWQuXG4gKiBPbmNlIHRoZSBkYXRhIGhhcyBiZWVuIGxvYWRlZCB0aGUgZnJhbWVzIGFyZSBzdG9yZWQgaW4gdGhlIFBJWEkgdGV4dHVyZSBjYWNoZSBhbmQgY2FuIGJlIGFjY2Vzc2VkIHRob3VnaCBQSVhJLlRleHR1cmUuZnJvbUZyYW1lSWQoKSBhbmQgUElYSS5TcHJpdGUuZnJvbUZyb21lSWQoKVxuICogVGhpcyBsb2FkZXIgd2lsbCBhbHNvIGxvYWQgdGhlIGltYWdlIGZpbGUgdGhhdCB0aGUgU3ByaXRlc2hlZXQgcG9pbnRzIHRvIGFzIHdlbGwgYXMgdGhlIGRhdGEuXG4gKiBXaGVuIGxvYWRlZCB0aGlzIGNsYXNzIHdpbGwgZGlzcGF0Y2ggYSBcImxvYWRlZFwiIGV2ZW50XG4gKlxuICogQGNsYXNzIFNwcml0ZVNoZWV0TG9hZGVyXG4gKiBAdXNlcyBFdmVudFRhcmdldFxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0gdXJsIHtTdHJpbmd9IFRoZSB1cmwgb2YgdGhlIHNwcml0ZSBzaGVldCBKU09OIGZpbGVcbiAqIEBwYXJhbSBjcm9zc29yaWdpbiB7Qm9vbGVhbn0gV2hldGhlciByZXF1ZXN0cyBzaG91bGQgYmUgdHJlYXRlZCBhcyBjcm9zc29yaWdpblxuICovXG5cblBJWEkuU3ByaXRlU2hlZXRMb2FkZXIgPSBmdW5jdGlvbiAodXJsLCBjcm9zc29yaWdpbikge1xuXHQvKlxuXHQgKiBpIHVzZSB0ZXh0dXJlIHBhY2tlciB0byBsb2FkIHRoZSBhc3NldHMuLlxuXHQgKiBodHRwOi8vd3d3LmNvZGVhbmR3ZWIuY29tL3RleHR1cmVwYWNrZXJcblx0ICogbWFrZSBzdXJlIHRvIHNldCB0aGUgZm9ybWF0IGFzIFwiSlNPTlwiXG5cdCAqL1xuXHRQSVhJLkV2ZW50VGFyZ2V0LmNhbGwodGhpcyk7XG5cblx0LyoqXG5cdCAqIFRoZSB1cmwgb2YgdGhlIGJpdG1hcCBmb250IGRhdGFcblx0ICpcblx0ICogQHByb3BlcnR5IHVybFxuXHQgKiBAdHlwZSBTdHJpbmdcblx0ICovXG5cdHRoaXMudXJsID0gdXJsO1xuXG5cdC8qKlxuXHQgKiBXaGV0aGVyIHRoZSByZXF1ZXN0cyBzaG91bGQgYmUgdHJlYXRlZCBhcyBjcm9zcyBvcmlnaW5cblx0ICpcblx0ICogQHByb3BlcnR5IGNyb3Nzb3JpZ2luXG5cdCAqIEB0eXBlIEJvb2xlYW5cblx0ICovXG5cdHRoaXMuY3Jvc3NvcmlnaW4gPSBjcm9zc29yaWdpbjtcblxuXHQvKipcblx0ICogW3JlYWQtb25seV0gVGhlIGJhc2UgdXJsIG9mIHRoZSBiaXRtYXAgZm9udCBkYXRhXG5cdCAqXG5cdCAqIEBwcm9wZXJ0eSBiYXNlVXJsXG5cdCAqIEB0eXBlIFN0cmluZ1xuXHQgKiBAcmVhZE9ubHlcblx0ICovXG5cdHRoaXMuYmFzZVVybCA9IHVybC5yZXBsYWNlKC9bXlxcL10qJC8sIFwiXCIpO1xuXG4gICAgLyoqXG4gICAgICogVGhlIHRleHR1cmUgYmVpbmcgbG9hZGVkXG4gICAgICpcbiAgICAgKiBAcHJvcGVydHkgdGV4dHVyZVxuICAgICAqIEB0eXBlIFRleHR1cmVcbiAgICAgKi9cbiAgICB0aGlzLnRleHR1cmUgPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGZyYW1lcyBvZiB0aGUgc3ByaXRlIHNoZWV0XG4gICAgICpcbiAgICAgKiBAcHJvcGVydHkgZnJhbWVzXG4gICAgICogQHR5cGUgT2JqZWN0XG4gICAgICovXG5cdHRoaXMuZnJhbWVzID0ge307XG59O1xuXG4vLyBjb25zdHJ1Y3RvclxuUElYSS5TcHJpdGVTaGVldExvYWRlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBQSVhJLlNwcml0ZVNoZWV0TG9hZGVyO1xuXG4vKipcbiAqIFRoaXMgd2lsbCBiZWdpbiBsb2FkaW5nIHRoZSBKU09OIGZpbGVcbiAqXG4gKiBAbWV0aG9kIGxvYWRcbiAqL1xuUElYSS5TcHJpdGVTaGVldExvYWRlci5wcm90b3R5cGUubG9hZCA9IGZ1bmN0aW9uICgpIHtcblx0dmFyIHNjb3BlID0gdGhpcztcblx0dmFyIGpzb25Mb2FkZXIgPSBuZXcgUElYSS5Kc29uTG9hZGVyKHRoaXMudXJsLCB0aGlzLmNyb3Nzb3JpZ2luKTtcblx0anNvbkxvYWRlci5hZGRFdmVudExpc3RlbmVyKFwibG9hZGVkXCIsIGZ1bmN0aW9uIChldmVudCkge1xuXHRcdHNjb3BlLmpzb24gPSBldmVudC5jb250ZW50Lmpzb247XG5cdFx0c2NvcGUub25KU09OTG9hZGVkKCk7XG5cdH0pO1xuXHRqc29uTG9hZGVyLmxvYWQoKTtcbn07XG5cbi8qKlxuICogSW52b2tlIHdoZW4gSlNPTiBmaWxlIGlzIGxvYWRlZFxuICpcbiAqIEBtZXRob2Qgb25KU09OTG9hZGVkXG4gKiBAcHJpdmF0ZVxuICovXG5QSVhJLlNwcml0ZVNoZWV0TG9hZGVyLnByb3RvdHlwZS5vbkpTT05Mb2FkZWQgPSBmdW5jdGlvbiAoKSB7XG5cdHZhciBzY29wZSA9IHRoaXM7XG5cdHZhciB0ZXh0dXJlVXJsID0gdGhpcy5iYXNlVXJsICsgdGhpcy5qc29uLm1ldGEuaW1hZ2U7XG5cdHZhciBpbWFnZSA9IG5ldyBQSVhJLkltYWdlTG9hZGVyKHRleHR1cmVVcmwsIHRoaXMuY3Jvc3NvcmlnaW4pO1xuXHR2YXIgZnJhbWVEYXRhID0gdGhpcy5qc29uLmZyYW1lcztcblxuXHR0aGlzLnRleHR1cmUgPSBpbWFnZS50ZXh0dXJlLmJhc2VUZXh0dXJlO1xuXHRpbWFnZS5hZGRFdmVudExpc3RlbmVyKFwibG9hZGVkXCIsIGZ1bmN0aW9uIChldmVudCkge1xuXHRcdHNjb3BlLm9uTG9hZGVkKCk7XG5cdH0pO1xuXG5cdGZvciAodmFyIGkgaW4gZnJhbWVEYXRhKSB7XG5cdFx0dmFyIHJlY3QgPSBmcmFtZURhdGFbaV0uZnJhbWU7XG5cdFx0aWYgKHJlY3QpIHtcblx0XHRcdFBJWEkuVGV4dHVyZUNhY2hlW2ldID0gbmV3IFBJWEkuVGV4dHVyZSh0aGlzLnRleHR1cmUsIHtcblx0XHRcdFx0eDogcmVjdC54LFxuXHRcdFx0XHR5OiByZWN0LnksXG5cdFx0XHRcdHdpZHRoOiByZWN0LncsXG5cdFx0XHRcdGhlaWdodDogcmVjdC5oXG5cdFx0XHR9KTtcblx0XHRcdGlmIChmcmFtZURhdGFbaV0udHJpbW1lZCkge1xuXHRcdFx0XHQvL3ZhciByZWFsU2l6ZSA9IGZyYW1lRGF0YVtpXS5zcHJpdGVTb3VyY2VTaXplO1xuXHRcdFx0XHRQSVhJLlRleHR1cmVDYWNoZVtpXS5yZWFsU2l6ZSA9IGZyYW1lRGF0YVtpXS5zcHJpdGVTb3VyY2VTaXplO1xuXHRcdFx0XHRQSVhJLlRleHR1cmVDYWNoZVtpXS50cmltLnggPSAwOyAvLyAocmVhbFNpemUueCAvIHJlY3Qudylcblx0XHRcdFx0Ly8gY2FsY3VsYXRlIHRoZSBvZmZzZXQhXG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0aW1hZ2UubG9hZCgpO1xufTtcbi8qKlxuICogSW52b2tlIHdoZW4gYWxsIGZpbGVzIGFyZSBsb2FkZWQgKGpzb24gYW5kIHRleHR1cmUpXG4gKlxuICogQG1ldGhvZCBvbkxvYWRlZFxuICogQHByaXZhdGVcbiAqL1xuUElYSS5TcHJpdGVTaGVldExvYWRlci5wcm90b3R5cGUub25Mb2FkZWQgPSBmdW5jdGlvbiAoKSB7XG5cdHRoaXMuZGlzcGF0Y2hFdmVudCh7XG5cdFx0dHlwZTogXCJsb2FkZWRcIixcblx0XHRjb250ZW50OiB0aGlzXG5cdH0pO1xufTtcblxuLyoqXG4gKiBAYXV0aG9yIE1hdCBHcm92ZXMgaHR0cDovL21hdGdyb3Zlcy5jb20vIEBEb29ybWF0MjNcbiAqL1xuXG4vKipcbiAqIFRoZSBpbWFnZSBsb2FkZXIgY2xhc3MgaXMgcmVzcG9uc2libGUgZm9yIGxvYWRpbmcgaW1hZ2VzIGZpbGUgZm9ybWF0cyAoXCJqcGVnXCIsIFwianBnXCIsIFwicG5nXCIgYW5kIFwiZ2lmXCIpXG4gKiBPbmNlIHRoZSBpbWFnZSBoYXMgYmVlbiBsb2FkZWQgaXQgaXMgc3RvcmVkIGluIHRoZSBQSVhJIHRleHR1cmUgY2FjaGUgYW5kIGNhbiBiZSBhY2Nlc3NlZCB0aG91Z2ggUElYSS5UZXh0dXJlLmZyb21GcmFtZUlkKCkgYW5kIFBJWEkuU3ByaXRlLmZyb21Gcm9tZUlkKClcbiAqIFdoZW4gbG9hZGVkIHRoaXMgY2xhc3Mgd2lsbCBkaXNwYXRjaCBhICdsb2FkZWQnIGV2ZW50XG4gKlxuICogQGNsYXNzIEltYWdlTG9hZGVyXG4gKiBAdXNlcyBFdmVudFRhcmdldFxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0gdXJsIHtTdHJpbmd9IFRoZSB1cmwgb2YgdGhlIGltYWdlXG4gKiBAcGFyYW0gY3Jvc3NvcmlnaW4ge0Jvb2xlYW59IFdoZXRoZXIgcmVxdWVzdHMgc2hvdWxkIGJlIHRyZWF0ZWQgYXMgY3Jvc3NvcmlnaW5cbiAqL1xuUElYSS5JbWFnZUxvYWRlciA9IGZ1bmN0aW9uKHVybCwgY3Jvc3NvcmlnaW4pXG57XG4gICAgUElYSS5FdmVudFRhcmdldC5jYWxsKHRoaXMpO1xuXG4gICAgLyoqXG4gICAgICogVGhlIHRleHR1cmUgYmVpbmcgbG9hZGVkXG4gICAgICpcbiAgICAgKiBAcHJvcGVydHkgdGV4dHVyZVxuICAgICAqIEB0eXBlIFRleHR1cmVcbiAgICAgKi9cbiAgICB0aGlzLnRleHR1cmUgPSBQSVhJLlRleHR1cmUuZnJvbUltYWdlKHVybCwgY3Jvc3NvcmlnaW4pO1xuXG4gICAgLyoqXG4gICAgICogaWYgdGhlIGltYWdlIGlzIGxvYWRlZCB3aXRoIGxvYWRGcmFtZWRTcHJpdGVTaGVldFxuICAgICAqIGZyYW1lcyB3aWxsIGNvbnRhaW4gdGhlIHNwcml0ZSBzaGVldCBmcmFtZXNcbiAgICAgKlxuICAgICAqL1xuICAgIHRoaXMuZnJhbWVzID0gW107XG59O1xuXG4vLyBjb25zdHJ1Y3RvclxuUElYSS5JbWFnZUxvYWRlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBQSVhJLkltYWdlTG9hZGVyO1xuXG4vKipcbiAqIExvYWRzIGltYWdlIG9yIHRha2VzIGl0IGZyb20gY2FjaGVcbiAqXG4gKiBAbWV0aG9kIGxvYWRcbiAqL1xuUElYSS5JbWFnZUxvYWRlci5wcm90b3R5cGUubG9hZCA9IGZ1bmN0aW9uKClcbntcbiAgICBpZighdGhpcy50ZXh0dXJlLmJhc2VUZXh0dXJlLmhhc0xvYWRlZClcbiAgICB7XG4gICAgICAgIHZhciBzY29wZSA9IHRoaXM7XG4gICAgICAgIHRoaXMudGV4dHVyZS5iYXNlVGV4dHVyZS5hZGRFdmVudExpc3RlbmVyKFwibG9hZGVkXCIsIGZ1bmN0aW9uKClcbiAgICAgICAge1xuICAgICAgICAgICAgc2NvcGUub25Mb2FkZWQoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2VcbiAgICB7XG4gICAgICAgIHRoaXMub25Mb2FkZWQoKTtcbiAgICB9XG59O1xuXG4vKipcbiAqIEludm9rZWQgd2hlbiBpbWFnZSBmaWxlIGlzIGxvYWRlZCBvciBpdCBpcyBhbHJlYWR5IGNhY2hlZCBhbmQgcmVhZHkgdG8gdXNlXG4gKlxuICogQG1ldGhvZCBvbkxvYWRlZFxuICogQHByaXZhdGVcbiAqL1xuUElYSS5JbWFnZUxvYWRlci5wcm90b3R5cGUub25Mb2FkZWQgPSBmdW5jdGlvbigpXG57XG4gICAgdGhpcy5kaXNwYXRjaEV2ZW50KHt0eXBlOiBcImxvYWRlZFwiLCBjb250ZW50OiB0aGlzfSk7XG59O1xuXG4vKipcbiAqIExvYWRzIGltYWdlIGFuZCBzcGxpdCBpdCB0byB1bmlmb3JtIHNpemVkIGZyYW1lc1xuICpcbiAqXG4gKiBAbWV0aG9kIGxvYWRGcmFtZWRTcHJpdGVTaGVldFxuICogQHBhcmFtIGZyYW1lV2lkdGgge051bWJlcn0gd2l0aCBvZiBlYWNoIGZyYW1lXG4gKiBAcGFyYW0gZnJhbWVIZWlnaHQge051bWJlcn0gaGVpZ2h0IG9mIGVhY2ggZnJhbWVcbiAqIEBwYXJhbSB0ZXh0dXJlTmFtZSB7U3RyaW5nfSBpZiBnaXZlbiwgdGhlIGZyYW1lcyB3aWxsIGJlIGNhY2hlZCBpbiA8dGV4dHVyZU5hbWU+LTxvcmQ+IGZvcm1hdCBcbiAqL1xuUElYSS5JbWFnZUxvYWRlci5wcm90b3R5cGUubG9hZEZyYW1lZFNwcml0ZVNoZWV0ID0gZnVuY3Rpb24oZnJhbWVXaWR0aCwgZnJhbWVIZWlnaHQsIHRleHR1cmVOYW1lKVxue1xuICAgIHRoaXMuZnJhbWVzID0gW107XG4gICAgdmFyIGNvbHMgPSBNYXRoLmZsb29yKHRoaXMudGV4dHVyZS53aWR0aCAvIGZyYW1lV2lkdGgpO1xuICAgIHZhciByb3dzID0gTWF0aC5mbG9vcih0aGlzLnRleHR1cmUuaGVpZ2h0IC8gZnJhbWVIZWlnaHQpO1xuXG4gICAgdmFyIGk9MDtcbiAgICBmb3IgKHZhciB5PTA7IHk8cm93czsgeSsrKVxuICAgIHtcbiAgICAgICAgZm9yICh2YXIgeD0wOyB4PGNvbHM7IHgrKyxpKyspXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZhciB0ZXh0dXJlID0gbmV3IFBJWEkuVGV4dHVyZSh0aGlzLnRleHR1cmUsIHtcbiAgICAgICAgICAgICAgICB4OiB4KmZyYW1lV2lkdGgsXG4gICAgICAgICAgICAgICAgeTogeSpmcmFtZUhlaWdodCxcbiAgICAgICAgICAgICAgICB3aWR0aDogZnJhbWVXaWR0aCxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IGZyYW1lSGVpZ2h0XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5mcmFtZXMucHVzaCh0ZXh0dXJlKTtcbiAgICAgICAgICAgIGlmICh0ZXh0dXJlTmFtZSkgUElYSS5UZXh0dXJlQ2FjaGVbdGV4dHVyZU5hbWUrJy0nK2ldID0gdGV4dHVyZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmKCF0aGlzLnRleHR1cmUuYmFzZVRleHR1cmUuaGFzTG9hZGVkKVxuICAgIHtcbiAgICAgICAgdmFyIHNjb3BlID0gdGhpcztcbiAgICAgICAgdGhpcy50ZXh0dXJlLmJhc2VUZXh0dXJlLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkZWRcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzY29wZS5vbkxvYWRlZCgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZVxuICAgIHtcbiAgICAgICAgdGhpcy5vbkxvYWRlZCgpO1xuICAgIH1cbn07XG4vKipcbiAqIEBhdXRob3IgTWF0IEdyb3ZlcyBodHRwOi8vbWF0Z3JvdmVzLmNvbS8gQERvb3JtYXQyM1xuICovXG5cbi8qKlxuICogVGhlIHhtbCBsb2FkZXIgaXMgdXNlZCB0byBsb2FkIGluIFhNTCBiaXRtYXAgZm9udCBkYXRhIChcInhtbFwiIG9yIFwiZm50XCIpXG4gKiBUbyBnZW5lcmF0ZSB0aGUgZGF0YSB5b3UgY2FuIHVzZSBodHRwOi8vd3d3LmFuZ2VsY29kZS5jb20vcHJvZHVjdHMvYm1mb250L1xuICogVGhpcyBsb2FkZXIgd2lsbCBhbHNvIGxvYWQgdGhlIGltYWdlIGZpbGUgYXMgdGhlIGRhdGEuXG4gKiBXaGVuIGxvYWRlZCB0aGlzIGNsYXNzIHdpbGwgZGlzcGF0Y2ggYSBcImxvYWRlZFwiIGV2ZW50XG4gKlxuICogQGNsYXNzIEJpdG1hcEZvbnRMb2FkZXJcbiAqIEB1c2VzIEV2ZW50VGFyZ2V0XG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB1cmwge1N0cmluZ30gVGhlIHVybCBvZiB0aGUgc3ByaXRlIHNoZWV0IEpTT04gZmlsZVxuICogQHBhcmFtIGNyb3Nzb3JpZ2luIHtCb29sZWFufSBXaGV0aGVyIHJlcXVlc3RzIHNob3VsZCBiZSB0cmVhdGVkIGFzIGNyb3Nzb3JpZ2luXG4gKi9cblBJWEkuQml0bWFwRm9udExvYWRlciA9IGZ1bmN0aW9uKHVybCwgY3Jvc3NvcmlnaW4pXG57XG4gICAgLypcbiAgICAgKiBpIHVzZSB0ZXh0dXJlIHBhY2tlciB0byBsb2FkIHRoZSBhc3NldHMuLlxuICAgICAqIGh0dHA6Ly93d3cuY29kZWFuZHdlYi5jb20vdGV4dHVyZXBhY2tlclxuICAgICAqIG1ha2Ugc3VyZSB0byBzZXQgdGhlIGZvcm1hdCBhcyBcIkpTT05cIlxuICAgICAqL1xuICAgIFBJWEkuRXZlbnRUYXJnZXQuY2FsbCh0aGlzKTtcblxuICAgIC8qKlxuICAgICAqIFRoZSB1cmwgb2YgdGhlIGJpdG1hcCBmb250IGRhdGFcbiAgICAgKlxuICAgICAqIEBwcm9wZXJ0eSB1cmxcbiAgICAgKiBAdHlwZSBTdHJpbmdcbiAgICAgKi9cbiAgICB0aGlzLnVybCA9IHVybDtcblxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgdGhlIHJlcXVlc3RzIHNob3VsZCBiZSB0cmVhdGVkIGFzIGNyb3NzIG9yaWdpblxuICAgICAqXG4gICAgICogQHByb3BlcnR5IGNyb3Nzb3JpZ2luXG4gICAgICogQHR5cGUgQm9vbGVhblxuICAgICAqL1xuICAgIHRoaXMuY3Jvc3NvcmlnaW4gPSBjcm9zc29yaWdpbjtcblxuICAgIC8qKlxuICAgICAqIFtyZWFkLW9ubHldIFRoZSBiYXNlIHVybCBvZiB0aGUgYml0bWFwIGZvbnQgZGF0YVxuICAgICAqXG4gICAgICogQHByb3BlcnR5IGJhc2VVcmxcbiAgICAgKiBAdHlwZSBTdHJpbmdcbiAgICAgKiBAcmVhZE9ubHlcbiAgICAgKi9cbiAgICB0aGlzLmJhc2VVcmwgPSB1cmwucmVwbGFjZSgvW15cXC9dKiQvLCBcIlwiKTtcblxuICAgIC8qKlxuICAgICAqIFtyZWFkLW9ubHldIFRoZSB0ZXh0dXJlIG9mIHRoZSBiaXRtYXAgZm9udFxuICAgICAqXG4gICAgICogQHByb3BlcnR5IGJhc2VVcmxcbiAgICAgKiBAdHlwZSBTdHJpbmdcbiAgICAgKi9cbiAgICB0aGlzLnRleHR1cmUgPSBudWxsO1xufTtcblxuLy8gY29uc3RydWN0b3JcblBJWEkuQml0bWFwRm9udExvYWRlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBQSVhJLkJpdG1hcEZvbnRMb2FkZXI7XG5cbi8qKlxuICogTG9hZHMgdGhlIFhNTCBmb250IGRhdGFcbiAqXG4gKiBAbWV0aG9kIGxvYWRcbiAqL1xuUElYSS5CaXRtYXBGb250TG9hZGVyLnByb3RvdHlwZS5sb2FkID0gZnVuY3Rpb24oKVxue1xuICAgIHRoaXMuYWpheFJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICB2YXIgc2NvcGUgPSB0aGlzO1xuICAgIHRoaXMuYWpheFJlcXVlc3Qub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKVxuICAgIHtcbiAgICAgICAgc2NvcGUub25YTUxMb2FkZWQoKTtcbiAgICB9O1xuXG4gICAgdGhpcy5hamF4UmVxdWVzdC5vcGVuKFwiR0VUXCIsIHRoaXMudXJsLCB0cnVlKTtcbiAgICBpZiAodGhpcy5hamF4UmVxdWVzdC5vdmVycmlkZU1pbWVUeXBlKSB0aGlzLmFqYXhSZXF1ZXN0Lm92ZXJyaWRlTWltZVR5cGUoXCJhcHBsaWNhdGlvbi94bWxcIik7XG4gICAgdGhpcy5hamF4UmVxdWVzdC5zZW5kKG51bGwpXG59O1xuXG4vKipcbiAqIEludm9rZWQgd2hlbiBYTUwgZmlsZSBpcyBsb2FkZWQsIHBhcnNlcyB0aGUgZGF0YVxuICpcbiAqIEBtZXRob2Qgb25YTUxMb2FkZWRcbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuQml0bWFwRm9udExvYWRlci5wcm90b3R5cGUub25YTUxMb2FkZWQgPSBmdW5jdGlvbigpXG57XG4gICAgaWYgKHRoaXMuYWpheFJlcXVlc3QucmVhZHlTdGF0ZSA9PSA0KVxuICAgIHtcbiAgICAgICAgaWYgKHRoaXMuYWpheFJlcXVlc3Quc3RhdHVzID09IDIwMCB8fCB3aW5kb3cubG9jYXRpb24uaHJlZi5pbmRleE9mKFwiaHR0cFwiKSA9PSAtMSlcbiAgICAgICAge1xuICAgICAgICAgICAgdmFyIHRleHR1cmVVcmwgPSB0aGlzLmJhc2VVcmwgKyB0aGlzLmFqYXhSZXF1ZXN0LnJlc3BvbnNlWE1MLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwicGFnZVwiKVswXS5hdHRyaWJ1dGVzLmdldE5hbWVkSXRlbShcImZpbGVcIikubm9kZVZhbHVlO1xuICAgICAgICAgICAgdmFyIGltYWdlID0gbmV3IFBJWEkuSW1hZ2VMb2FkZXIodGV4dHVyZVVybCwgdGhpcy5jcm9zc29yaWdpbik7XG4gICAgICAgICAgICB0aGlzLnRleHR1cmUgPSBpbWFnZS50ZXh0dXJlLmJhc2VUZXh0dXJlO1xuXG4gICAgICAgICAgICB2YXIgZGF0YSA9IHt9O1xuICAgICAgICAgICAgdmFyIGluZm8gPSB0aGlzLmFqYXhSZXF1ZXN0LnJlc3BvbnNlWE1MLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaW5mb1wiKVswXTtcbiAgICAgICAgICAgIHZhciBjb21tb24gPSB0aGlzLmFqYXhSZXF1ZXN0LnJlc3BvbnNlWE1MLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiY29tbW9uXCIpWzBdO1xuICAgICAgICAgICAgZGF0YS5mb250ID0gaW5mby5hdHRyaWJ1dGVzLmdldE5hbWVkSXRlbShcImZhY2VcIikubm9kZVZhbHVlO1xuICAgICAgICAgICAgZGF0YS5zaXplID0gcGFyc2VJbnQoaW5mby5hdHRyaWJ1dGVzLmdldE5hbWVkSXRlbShcInNpemVcIikubm9kZVZhbHVlLCAxMCk7XG4gICAgICAgICAgICBkYXRhLmxpbmVIZWlnaHQgPSBwYXJzZUludChjb21tb24uYXR0cmlidXRlcy5nZXROYW1lZEl0ZW0oXCJsaW5lSGVpZ2h0XCIpLm5vZGVWYWx1ZSwgMTApO1xuICAgICAgICAgICAgZGF0YS5jaGFycyA9IHt9O1xuXG4gICAgICAgICAgICAvL3BhcnNlIGxldHRlcnNcbiAgICAgICAgICAgIHZhciBsZXR0ZXJzID0gdGhpcy5hamF4UmVxdWVzdC5yZXNwb25zZVhNTC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImNoYXJcIik7XG5cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGV0dGVycy5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB2YXIgY2hhckNvZGUgPSBwYXJzZUludChsZXR0ZXJzW2ldLmF0dHJpYnV0ZXMuZ2V0TmFtZWRJdGVtKFwiaWRcIikubm9kZVZhbHVlLCAxMCk7XG5cbiAgICAgICAgICAgICAgICB2YXIgdGV4dHVyZVJlY3QgPSBuZXcgUElYSS5SZWN0YW5nbGUoXG4gICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KGxldHRlcnNbaV0uYXR0cmlidXRlcy5nZXROYW1lZEl0ZW0oXCJ4XCIpLm5vZGVWYWx1ZSwgMTApLFxuICAgICAgICAgICAgICAgICAgICBwYXJzZUludChsZXR0ZXJzW2ldLmF0dHJpYnV0ZXMuZ2V0TmFtZWRJdGVtKFwieVwiKS5ub2RlVmFsdWUsIDEwKSxcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQobGV0dGVyc1tpXS5hdHRyaWJ1dGVzLmdldE5hbWVkSXRlbShcIndpZHRoXCIpLm5vZGVWYWx1ZSwgMTApLFxuICAgICAgICAgICAgICAgICAgICBwYXJzZUludChsZXR0ZXJzW2ldLmF0dHJpYnV0ZXMuZ2V0TmFtZWRJdGVtKFwiaGVpZ2h0XCIpLm5vZGVWYWx1ZSwgMTApXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIGRhdGEuY2hhcnNbY2hhckNvZGVdID0ge1xuICAgICAgICAgICAgICAgICAgICB4T2Zmc2V0OiBwYXJzZUludChsZXR0ZXJzW2ldLmF0dHJpYnV0ZXMuZ2V0TmFtZWRJdGVtKFwieG9mZnNldFwiKS5ub2RlVmFsdWUsIDEwKSxcbiAgICAgICAgICAgICAgICAgICAgeU9mZnNldDogcGFyc2VJbnQobGV0dGVyc1tpXS5hdHRyaWJ1dGVzLmdldE5hbWVkSXRlbShcInlvZmZzZXRcIikubm9kZVZhbHVlLCAxMCksXG4gICAgICAgICAgICAgICAgICAgIHhBZHZhbmNlOiBwYXJzZUludChsZXR0ZXJzW2ldLmF0dHJpYnV0ZXMuZ2V0TmFtZWRJdGVtKFwieGFkdmFuY2VcIikubm9kZVZhbHVlLCAxMCksXG4gICAgICAgICAgICAgICAgICAgIGtlcm5pbmc6IHt9LFxuICAgICAgICAgICAgICAgICAgICB0ZXh0dXJlOiBQSVhJLlRleHR1cmVDYWNoZVtjaGFyQ29kZV0gPSBuZXcgUElYSS5UZXh0dXJlKHRoaXMudGV4dHVyZSwgdGV4dHVyZVJlY3QpXG5cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL3BhcnNlIGtlcm5pbmdzXG4gICAgICAgICAgICB2YXIga2VybmluZ3MgPSB0aGlzLmFqYXhSZXF1ZXN0LnJlc3BvbnNlWE1MLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwia2VybmluZ1wiKTtcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBrZXJuaW5ncy5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgIHZhciBmaXJzdCA9IHBhcnNlSW50KGtlcm5pbmdzW2ldLmF0dHJpYnV0ZXMuZ2V0TmFtZWRJdGVtKFwiZmlyc3RcIikubm9kZVZhbHVlLCAxMCk7XG4gICAgICAgICAgICAgICB2YXIgc2Vjb25kID0gcGFyc2VJbnQoa2VybmluZ3NbaV0uYXR0cmlidXRlcy5nZXROYW1lZEl0ZW0oXCJzZWNvbmRcIikubm9kZVZhbHVlLCAxMCk7XG4gICAgICAgICAgICAgICB2YXIgYW1vdW50ID0gcGFyc2VJbnQoa2VybmluZ3NbaV0uYXR0cmlidXRlcy5nZXROYW1lZEl0ZW0oXCJhbW91bnRcIikubm9kZVZhbHVlLCAxMCk7XG5cbiAgICAgICAgICAgICAgICBkYXRhLmNoYXJzW3NlY29uZF0ua2VybmluZ1tmaXJzdF0gPSBhbW91bnQ7XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgUElYSS5CaXRtYXBUZXh0LmZvbnRzW2RhdGEuZm9udF0gPSBkYXRhO1xuXG4gICAgICAgICAgICB2YXIgc2NvcGUgPSB0aGlzO1xuICAgICAgICAgICAgaW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRlZFwiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBzY29wZS5vbkxvYWRlZCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpbWFnZS5sb2FkKCk7XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG4vKipcbiAqIEludm9rZWQgd2hlbiBhbGwgZmlsZXMgYXJlIGxvYWRlZCAoeG1sL2ZudCBhbmQgdGV4dHVyZSlcbiAqXG4gKiBAbWV0aG9kIG9uTG9hZGVkXG4gKiBAcHJpdmF0ZVxuICovXG5QSVhJLkJpdG1hcEZvbnRMb2FkZXIucHJvdG90eXBlLm9uTG9hZGVkID0gZnVuY3Rpb24oKVxue1xuICAgIHRoaXMuZGlzcGF0Y2hFdmVudCh7dHlwZTogXCJsb2FkZWRcIiwgY29udGVudDogdGhpc30pO1xufTtcblxuLyoqXG4gKiBAYXV0aG9yIE1hdCBHcm92ZXMgaHR0cDovL21hdGdyb3Zlcy5jb20vIEBEb29ybWF0MjNcbiAqIGJhc2VkIG9uIHBpeGkgaW1wYWN0IHNwaW5lIGltcGxlbWVudGF0aW9uIG1hZGUgYnkgRWVtZWxpIEtlbG9rb3JwaSAoQGVrZWxva29ycGkpIGh0dHBzOi8vZ2l0aHViLmNvbS9la2Vsb2tvcnBpXG4gKlxuICogQXdlc29tZSBKUyBydW4gdGltZSBwcm92aWRlZCBieSBFc290ZXJpY1NvZnR3YXJlXG4gKiBodHRwczovL2dpdGh1Yi5jb20vRXNvdGVyaWNTb2Z0d2FyZS9zcGluZS1ydW50aW1lc1xuICpcbiAqL1xuXG4vKipcbiAqIFRoZSBTcGluZSBsb2FkZXIgaXMgdXNlZCB0byBsb2FkIGluIEpTT04gc3BpbmUgZGF0YVxuICogVG8gZ2VuZXJhdGUgdGhlIGRhdGEgeW91IG5lZWQgdG8gdXNlIGh0dHA6Ly9lc290ZXJpY3NvZnR3YXJlLmNvbS8gYW5kIGV4cG9ydCB0aGUgXCJKU09OXCIgZm9ybWF0XG4gKiBEdWUgdG8gYSBjbGFzaCBvZiBuYW1lcyAgWW91IHdpbGwgbmVlZCB0byBjaGFuZ2UgdGhlIGV4dGVuc2lvbiBvZiB0aGUgc3BpbmUgZmlsZSBmcm9tICouanNvbiB0byAqLmFuaW0gZm9yIGl0IHRvIGxvYWRcbiAqIFNlZSBleGFtcGxlIDEyIChodHRwOi8vd3d3Lmdvb2Rib3lkaWdpdGFsLmNvbS9waXhpanMvZXhhbXBsZXMvMTIvKSB0byBzZWUgYSB3b3JraW5nIGV4YW1wbGUgYW5kIGNoZWNrIG91dCB0aGUgc291cmNlXG4gKiBZb3Ugd2lsbCBuZWVkIHRvIGdlbmVyYXRlIGEgc3ByaXRlIHNoZWV0IHRvIGFjY29tcGFueSB0aGUgc3BpbmUgZGF0YVxuICogV2hlbiBsb2FkZWQgdGhpcyBjbGFzcyB3aWxsIGRpc3BhdGNoIGEgXCJsb2FkZWRcIiBldmVudFxuICpcbiAqIEBjbGFzcyBTcGluZVxuICogQHVzZXMgRXZlbnRUYXJnZXRcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHVybCB7U3RyaW5nfSBUaGUgdXJsIG9mIHRoZSBKU09OIGZpbGVcbiAqIEBwYXJhbSBjcm9zc29yaWdpbiB7Qm9vbGVhbn0gV2hldGhlciByZXF1ZXN0cyBzaG91bGQgYmUgdHJlYXRlZCBhcyBjcm9zc29yaWdpblxuICovXG5QSVhJLlNwaW5lTG9hZGVyID0gZnVuY3Rpb24odXJsLCBjcm9zc29yaWdpbilcbntcblx0UElYSS5FdmVudFRhcmdldC5jYWxsKHRoaXMpO1xuXG5cdC8qKlxuXHQgKiBUaGUgdXJsIG9mIHRoZSBiaXRtYXAgZm9udCBkYXRhXG5cdCAqXG5cdCAqIEBwcm9wZXJ0eSB1cmxcblx0ICogQHR5cGUgU3RyaW5nXG5cdCAqL1xuXHR0aGlzLnVybCA9IHVybDtcblxuXHQvKipcblx0ICogV2hldGhlciB0aGUgcmVxdWVzdHMgc2hvdWxkIGJlIHRyZWF0ZWQgYXMgY3Jvc3Mgb3JpZ2luXG5cdCAqXG5cdCAqIEBwcm9wZXJ0eSBjcm9zc29yaWdpblxuXHQgKiBAdHlwZSBCb29sZWFuXG5cdCAqL1xuXHR0aGlzLmNyb3Nzb3JpZ2luID0gY3Jvc3NvcmlnaW47XG5cblx0LyoqXG5cdCAqIFtyZWFkLW9ubHldIFdoZXRoZXIgdGhlIGRhdGEgaGFzIGxvYWRlZCB5ZXRcblx0ICpcblx0ICogQHByb3BlcnR5IGxvYWRlZFxuXHQgKiBAdHlwZSBCb29sZWFuXG5cdCAqIEByZWFkT25seVxuXHQgKi9cblx0dGhpcy5sb2FkZWQgPSBmYWxzZTtcbn1cblxuUElYSS5TcGluZUxvYWRlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBQSVhJLlNwaW5lTG9hZGVyO1xuXG4vKipcbiAqIExvYWRzIHRoZSBKU09OIGRhdGFcbiAqXG4gKiBAbWV0aG9kIGxvYWRcbiAqL1xuUElYSS5TcGluZUxvYWRlci5wcm90b3R5cGUubG9hZCA9IGZ1bmN0aW9uICgpIHtcblxuXHR2YXIgc2NvcGUgPSB0aGlzO1xuXHR2YXIganNvbkxvYWRlciA9IG5ldyBQSVhJLkpzb25Mb2FkZXIodGhpcy51cmwsIHRoaXMuY3Jvc3NvcmlnaW4pO1xuXHRqc29uTG9hZGVyLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkZWRcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XG5cdFx0c2NvcGUuanNvbiA9IGV2ZW50LmNvbnRlbnQuanNvbjtcblx0XHRzY29wZS5vbkpTT05Mb2FkZWQoKTtcblx0fSk7XG5cdGpzb25Mb2FkZXIubG9hZCgpO1xufTtcblxuLyoqXG4gKiBJbnZva2Ugd2hlbiBKU09OIGZpbGUgaXMgbG9hZGVkXG4gKlxuICogQG1ldGhvZCBvbkpTT05Mb2FkZWRcbiAqIEBwcml2YXRlXG4gKi9cblBJWEkuU3BpbmVMb2FkZXIucHJvdG90eXBlLm9uSlNPTkxvYWRlZCA9IGZ1bmN0aW9uIChldmVudCkge1xuXHR2YXIgc3BpbmVKc29uUGFyc2VyID0gbmV3IHNwaW5lLlNrZWxldG9uSnNvbigpO1xuXHR2YXIgc2tlbGV0b25EYXRhID0gc3BpbmVKc29uUGFyc2VyLnJlYWRTa2VsZXRvbkRhdGEodGhpcy5qc29uKTtcblxuXHRQSVhJLkFuaW1DYWNoZVt0aGlzLnVybF0gPSBza2VsZXRvbkRhdGE7XG5cblx0dGhpcy5vbkxvYWRlZCgpO1xufTtcblxuLyoqXG4gKiBJbnZva2Ugd2hlbiBKU09OIGZpbGUgaXMgbG9hZGVkXG4gKlxuICogQG1ldGhvZCBvbkxvYWRlZFxuICogQHByaXZhdGVcbiAqL1xuUElYSS5TcGluZUxvYWRlci5wcm90b3R5cGUub25Mb2FkZWQgPSBmdW5jdGlvbiAoKSB7XG5cdHRoaXMubG9hZGVkID0gdHJ1ZTtcbiAgICB0aGlzLmRpc3BhdGNoRXZlbnQoe3R5cGU6IFwibG9hZGVkXCIsIGNvbnRlbnQ6IHRoaXN9KTtcbn07XG5cblxuLyoqXG4gKiBAYXV0aG9yIE1hdCBHcm92ZXMgaHR0cDovL21hdGdyb3Zlcy5jb20vIEBEb29ybWF0MjNcbiAqL1xuXG5cbi8qKlxuICogVGhpcyBpcyB0aGUgYmFzZSBjbGFzcyBmb3IgIGNyZWF0aW5nIGEgcGl4aS5qcyBmaWx0ZXIuIEN1cnJlbnRseSBvbmx5IHdlYkdMIHN1cHBvcnRzIGZpbHRlcnMuXG4gKiBJZiB5b3Ugd2FudCB0byBtYWtlIGEgY3VzdG9tIGZpbHRlciB0aGlzIHNob3VsZCBiZSB5b3VyIGJhc2UgY2xhc3MuXG4gKiBAY2xhc3MgQWJzdHJhY3RGaWx0ZXJcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIGZyYWdtZW50U3JjXG4gKiBAcGFyYW0gdW5pZnJvbXMgIFxuICovXG5QSVhJLkFic3RyYWN0RmlsdGVyID0gZnVuY3Rpb24oZnJhZ21lbnRTcmMsIHVuaWZyb21zKVxue1xuXHQvKipcblx0KiBBbiBhcnJheSBvZiBwYXNzZXMgLSBzb21lIGZpbHRlcnMgY29udGFpbiBhIGZldyBzdGVwcyB0aGlzIGFycmF5IHNpbXBseSBzdG9yZXMgdGhlIHN0ZXBzIGluIGEgbGluaWVhciBmYXNoaW9uLlxuXHQqIEZvciBleGFtcGxlIHRoZSBibHVyIGZpbHRlciBoYXMgdHdvIHBhc3NlcyBibHVyWCBhbmQgYmx1clkuXG5cdCogQHByb3BlcnR5IHBhc3Nlc1xuXHQqIEB0eXBlIEFycmF5IGFuIGFycmF5IG9mIGZpbHRlciBvYmplY3RzXG5cdCogQHByaXZhdGVcblx0Ki9cblx0dGhpcy5wYXNzZXMgPSBbdGhpc107XG5cblxuXHR0aGlzLmRpcnR5ID0gdHJ1ZTtcblx0dGhpcy5wYWRkaW5nID0gMDtcblxuXHQvKipcblx0QHByb3BlcnR5IHVuaWZvcm1zXG5cdEBwcml2YXRlXG5cdCovXG5cdHRoaXMudW5pZm9ybXMgPSB1bmlmcm9tcyB8fCB7fTtcblx0XG5cdHRoaXMuZnJhZ21lbnRTcmMgPSBmcmFnbWVudFNyYyB8fCBbXTtcbn1cblxuXG4vKipcbiAqIEBhdXRob3IgTWF0IEdyb3ZlcyBodHRwOi8vbWF0Z3JvdmVzLmNvbS8gQERvb3JtYXQyM1xuICovXG5cbi8qKlxuICogXG4gKiBUaGUgQ29sb3JNYXRyaXhGaWx0ZXIgY2xhc3MgbGV0cyB5b3UgYXBwbHkgYSA0eDQgbWF0cml4IHRyYW5zZm9ybWF0aW9uIG9uIHRoZSBSR0JBIFxuICogY29sb3IgYW5kIGFscGhhIHZhbHVlcyBvZiBldmVyeSBwaXhlbCBvbiB5b3VyIGRpc3BsYXlPYmplY3QgdG8gcHJvZHVjZSBhIHJlc3VsdCBcbiAqIHdpdGggYSBuZXcgc2V0IG9mIFJHQkEgY29sb3IgYW5kIGFscGhhIHZhbHVlcy4gSXRzIHByZXR0eSBwb3dlcmZ1bCFcbiAqIEBjbGFzcyBDb2xvck1hdHJpeEZpbHRlclxuICogQGNvbnRydWN0b3JcbiAqL1xuUElYSS5Db2xvck1hdHJpeEZpbHRlciA9IGZ1bmN0aW9uKClcbntcblx0UElYSS5BYnN0cmFjdEZpbHRlci5jYWxsKCB0aGlzICk7XG5cdFxuXHR0aGlzLnBhc3NlcyA9IFt0aGlzXTtcblx0XG5cdC8vIHNldCB0aGUgdW5pZm9ybXNcblx0dGhpcy51bmlmb3JtcyA9IHtcblx0XHRtYXRyaXg6IHt0eXBlOiAnbWF0NCcsIHZhbHVlOiBbMSwwLDAsMCxcblx0XHRcdFx0XHRcdFx0XHRcdCAgIDAsMSwwLDAsXG5cdFx0XHRcdFx0XHRcdFx0XHQgICAwLDAsMSwwLFxuXHRcdFx0XHRcdFx0XHRcdFx0ICAgMCwwLDAsMV19LFxuXHR9O1xuXHRcblx0dGhpcy5mcmFnbWVudFNyYyA9IFtcblx0ICBcInByZWNpc2lvbiBtZWRpdW1wIGZsb2F0O1wiLFxuXHQgIFwidmFyeWluZyB2ZWMyIHZUZXh0dXJlQ29vcmQ7XCIsXG5cdCAgXCJ2YXJ5aW5nIGZsb2F0IHZDb2xvcjtcIixcblx0ICBcInVuaWZvcm0gZmxvYXQgaW52ZXJ0O1wiLFxuXHQgIFwidW5pZm9ybSBtYXQ0IG1hdHJpeDtcIixcblx0ICBcInVuaWZvcm0gc2FtcGxlcjJEIHVTYW1wbGVyO1wiLFxuXHQgIFwidm9pZCBtYWluKHZvaWQpIHtcIixcblx0ICAgIFwiZ2xfRnJhZ0NvbG9yID0gdGV4dHVyZTJEKHVTYW1wbGVyLCB2VGV4dHVyZUNvb3JkKSAqIG1hdHJpeDtcIixcblx0ICAgIFwiZ2xfRnJhZ0NvbG9yID0gZ2xfRnJhZ0NvbG9yICogdkNvbG9yO1wiLFxuXHQgIFwifVwiXG5cdF07XG5cdFxufVxuXG5QSVhJLkNvbG9yTWF0cml4RmlsdGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIFBJWEkuQWJzdHJhY3RGaWx0ZXIucHJvdG90eXBlICk7XG5QSVhJLkNvbG9yTWF0cml4RmlsdGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFBJWEkuQ29sb3JNYXRyaXhGaWx0ZXI7XG5cbi8qKlxuICogU2V0cyB0aGUgbWF0cml4IG9mIHRoZSBjb2xvciBtYXRyaXggZmlsdGVyXG4gKlxuICogQHByb3BlcnR5IG1hdHJpeFxuICogQHR5cGUgQXJyYXkgYW5kIGFycmF5IG9mIDI2IG51bWJlcnNcbiAqIEBkZWZhdWx0IFsxLDAsMCwwLDAsMSwwLDAsMCwwLDEsMCwwLDAsMCwxXVxuICovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoUElYSS5Db2xvck1hdHJpeEZpbHRlci5wcm90b3R5cGUsICdtYXRyaXgnLCB7XG4gICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5pZm9ybXMubWF0cml4LnZhbHVlO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgIFx0dGhpcy51bmlmb3Jtcy5tYXRyaXgudmFsdWUgPSB2YWx1ZTtcbiAgICB9XG59KTtcbi8qKlxuICogQGF1dGhvciBNYXQgR3JvdmVzIGh0dHA6Ly9tYXRncm92ZXMuY29tLyBARG9vcm1hdDIzXG4gKi9cblxuXG4vKipcbiAqIFxuICogVGhpcyB0dXJucyB5b3VyIGRpc3BsYXlPYmplY3RzIHRvIGJsYWNrIGFuZCB3aGl0ZS5cbiAqIEBjbGFzcyBHcmV5RmlsdGVyXG4gKiBAY29udHJ1Y3RvclxuICovXG5QSVhJLkdyZXlGaWx0ZXIgPSBmdW5jdGlvbigpXG57XG5cdFBJWEkuQWJzdHJhY3RGaWx0ZXIuY2FsbCggdGhpcyApO1xuXHRcblx0dGhpcy5wYXNzZXMgPSBbdGhpc107XG5cdFxuXHQvLyBzZXQgdGhlIHVuaWZvcm1zXG5cdHRoaXMudW5pZm9ybXMgPSB7XG5cdFx0Z3JleToge3R5cGU6ICdmJywgdmFsdWU6IDF9LFxuXHR9O1xuXHRcblx0dGhpcy5mcmFnbWVudFNyYyA9IFtcblx0ICBcInByZWNpc2lvbiBtZWRpdW1wIGZsb2F0O1wiLFxuXHQgIFwidmFyeWluZyB2ZWMyIHZUZXh0dXJlQ29vcmQ7XCIsXG5cdCAgXCJ2YXJ5aW5nIGZsb2F0IHZDb2xvcjtcIixcblx0ICBcInVuaWZvcm0gc2FtcGxlcjJEIHVTYW1wbGVyO1wiLFxuXHQgIFwidW5pZm9ybSBmbG9hdCBncmV5O1wiLFxuXHQgIFwidm9pZCBtYWluKHZvaWQpIHtcIixcblx0ICAgIFwiZ2xfRnJhZ0NvbG9yID0gdGV4dHVyZTJEKHVTYW1wbGVyLCB2VGV4dHVyZUNvb3JkKTtcIixcblx0XHRcImdsX0ZyYWdDb2xvci5yZ2IgPSBtaXgoZ2xfRnJhZ0NvbG9yLnJnYiwgdmVjMygwLjIxMjYqZ2xfRnJhZ0NvbG9yLnIgKyAwLjcxNTIqZ2xfRnJhZ0NvbG9yLmcgKyAwLjA3MjIqZ2xfRnJhZ0NvbG9yLmIpLCBncmV5KTtcIixcblx0ICAgIFwiZ2xfRnJhZ0NvbG9yID0gZ2xfRnJhZ0NvbG9yICogdkNvbG9yO1wiLFxuXHQgIFwifVwiXG5cdF07XG59XG5cblBJWEkuR3JleUZpbHRlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBQSVhJLkFic3RyYWN0RmlsdGVyLnByb3RvdHlwZSApO1xuUElYSS5HcmV5RmlsdGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFBJWEkuR3JleUZpbHRlcjtcblxuLyoqXG5UaGUgc3RyZW5ndGggb2YgdGhlIGdyZXkuIDEgd2lsbCBtYWtlIHRoZSBvYmplY3QgYmxhY2sgYW5kIHdoaXRlLCAwIHdpbGwgbWFrZSB0aGUgb2JqZWN0IGl0cyBub3JtYWwgY29sb3JcbkBwcm9wZXJ0eSBncmV5XG4qL1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KFBJWEkuR3JleUZpbHRlci5wcm90b3R5cGUsICdncmV5Jywge1xuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVuaWZvcm1zLmdyZXkudmFsdWU7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgXHR0aGlzLnVuaWZvcm1zLmdyZXkudmFsdWUgPSB2YWx1ZTtcbiAgICB9XG59KTtcblxuLyoqXG4gKiBAYXV0aG9yIE1hdCBHcm92ZXMgaHR0cDovL21hdGdyb3Zlcy5jb20vIEBEb29ybWF0MjNcbiAqL1xuXG5cbi8qKlxuICogXG4gKiBUaGUgRGlzcGxhY2VtZW50RmlsdGVyIGNsYXNzIHVzZXMgdGhlIHBpeGVsIHZhbHVlcyBmcm9tIHRoZSBzcGVjaWZpZWQgdGV4dHVyZSAoY2FsbGVkIHRoZSBkaXNwbGFjZW1lbnQgbWFwKSB0byBwZXJmb3JtIGEgZGlzcGxhY2VtZW50IG9mIGFuIG9iamVjdC4gXG4gKiBZb3UgY2FuIHVzZSB0aGlzIGZpbHRlciB0byBhcHBseSBhbGwgbWFub3Igb2YgY3Jhenkgd2FycGluZyBlZmZlY3RzXG4gKiBDdXJyZW50bHkgdGhlIHIgcHJvcGVydHkgb2YgdGhlIHRleHR1cmUgaXMgdXNlZCBvZmZzZXQgdGhlIHggYW5kIHRoZSBnIHByb3Blcnkgb2YgdGhlIHRleHR1cmUgaXMgdXNlZCB0byBvZmZzZXQgdGhlIHkuXG4gKiBAY2xhc3MgRGlzcGxhY2VtZW50RmlsdGVyXG4gKiBAY29udHJ1Y3RvclxuICogQHBhcmFtIHRleHR1cmUge1RleHR1cmV9IFRoZSB0ZXh0dXJlIHVzZWQgZm9yIHRoZSBkaXNwbGFjZW10ZW50IG1hcCAqIG11c3QgYmUgcG93ZXIgb2YgMiB0ZXh0dXJlIGF0IHRoZSBtb21lbnRcbiAqL1xuUElYSS5EaXNwbGFjZW1lbnRGaWx0ZXIgPSBmdW5jdGlvbih0ZXh0dXJlKVxue1xuXHRQSVhJLkFic3RyYWN0RmlsdGVyLmNhbGwoIHRoaXMgKTtcblx0XG5cdHRoaXMucGFzc2VzID0gW3RoaXNdO1xuXHR0ZXh0dXJlLmJhc2VUZXh0dXJlLl9wb3dlck9mMiA9IHRydWU7XG5cblx0Ly8gc2V0IHRoZSB1bmlmb3Jtc1xuXHQvL2NvbnNvbGUubG9nKClcblx0dGhpcy51bmlmb3JtcyA9IHtcblx0XHRkaXNwbGFjZW1lbnRNYXA6IHt0eXBlOiAnc2FtcGxlcjJEJywgdmFsdWU6dGV4dHVyZX0sXG5cdFx0c2NhbGU6XHRcdFx0IHt0eXBlOiAnZjInLCB2YWx1ZTp7eDozMCwgeTozMH19LFxuXHRcdG9mZnNldDpcdFx0XHQge3R5cGU6ICdmMicsIHZhbHVlOnt4OjAsIHk6MH19LFxuXHRcdG1hcERpbWVuc2lvbnM6ICAge3R5cGU6ICdmMicsIHZhbHVlOnt4OjEsIHk6NTExMn19LFxuXHRcdGRpbWVuc2lvbnM6ICAge3R5cGU6ICdmNCcsIHZhbHVlOlswLDAsMCwwXX1cblx0fTtcblx0XG5cblx0aWYodGV4dHVyZS5iYXNlVGV4dHVyZS5oYXNMb2FkZWQpXG5cdHtcblx0XHR0aGlzLnVuaWZvcm1zLm1hcERpbWVuc2lvbnMudmFsdWUueCA9IHRleHR1cmUud2lkdGg7XG5cdFx0dGhpcy51bmlmb3Jtcy5tYXBEaW1lbnNpb25zLnZhbHVlLnkgPSB0ZXh0dXJlLmhlaWdodDtcblx0fVxuXHRlbHNlXG5cdHtcblx0XHR0aGlzLmJvdW5kTG9hZGVkRnVuY3Rpb24gPSB0aGlzLm9uVGV4dHVyZUxvYWRlZC5iaW5kKHRoaXMpO1xuXG5cdFx0dGV4dHVyZS5iYXNlVGV4dHVyZS5vbihcImxvYWRlZFwiLCB0aGlzLmJvdW5kTG9hZGVkRnVuY3Rpb24pO1xuXHR9XG5cblx0dGhpcy5mcmFnbWVudFNyYyA9IFtcblx0ICBcInByZWNpc2lvbiBtZWRpdW1wIGZsb2F0O1wiLFxuXHQgIFwidmFyeWluZyB2ZWMyIHZUZXh0dXJlQ29vcmQ7XCIsXG5cdCAgXCJ2YXJ5aW5nIGZsb2F0IHZDb2xvcjtcIixcblx0ICBcInVuaWZvcm0gc2FtcGxlcjJEIGRpc3BsYWNlbWVudE1hcDtcIixcblx0ICBcInVuaWZvcm0gc2FtcGxlcjJEIHVTYW1wbGVyO1wiLFxuXHQgIFwidW5pZm9ybSB2ZWMyIHNjYWxlO1wiLFxuXHQgIFwidW5pZm9ybSB2ZWMyIG9mZnNldDtcIixcblx0ICBcInVuaWZvcm0gdmVjNCBkaW1lbnNpb25zO1wiLFxuXHQgIFwidW5pZm9ybSB2ZWMyIG1hcERpbWVuc2lvbnM7XCIsLy8gPSB2ZWMyKDI1Ni4wLCAyNTYuMCk7XCIsXG5cdCAvLyBcImNvbnN0IHZlYzIgdGV4dHVyZURpbWVuc2lvbnMgPSB2ZWMyKDc1MC4wLCA3NTAuMCk7XCIsXG5cdCAgXG5cdCAgXCJ2b2lkIG1haW4odm9pZCkge1wiLFxuXHQgIFx0XCJ2ZWMyIG1hcENvcmRzID0gdlRleHR1cmVDb29yZC54eTtcIixcbi8vXHQgIFx0XCJtYXBDb3JkcyAtPSA7XCIsXG5cdCBcdFwibWFwQ29yZHMgKz0gKGRpbWVuc2lvbnMuencgKyBvZmZzZXQpLyBkaW1lbnNpb25zLnh5IDtcIixcblx0IFx0XCJtYXBDb3Jkcy55ICo9IC0xLjA7XCIsXG5cdCBcdFwibWFwQ29yZHMueSArPSAxLjA7XCIsXG5cdCAgXHRcInZlYzIgbWF0U2FtcGxlID0gdGV4dHVyZTJEKGRpc3BsYWNlbWVudE1hcCwgbWFwQ29yZHMpLnh5O1wiLFxuXHRcdFwibWF0U2FtcGxlIC09IDAuNTtcIixcdCAgXG5cdCBcdFwibWF0U2FtcGxlICo9IHNjYWxlO1wiLFxuXHQgXHRcIm1hdFNhbXBsZSAvPSBtYXBEaW1lbnNpb25zO1wiLFxuXHQgICAgXCJnbF9GcmFnQ29sb3IgPSB0ZXh0dXJlMkQodVNhbXBsZXIsIHZlYzIodlRleHR1cmVDb29yZC54ICsgbWF0U2FtcGxlLngsIHZUZXh0dXJlQ29vcmQueSArIG1hdFNhbXBsZS55KSk7XCIsXG5cdFx0XCJnbF9GcmFnQ29sb3IucmdiID0gbWl4KCBnbF9GcmFnQ29sb3IucmdiLCBnbF9GcmFnQ29sb3IucmdiLCAxLjApO1wiLFxuXHRcdFwidmVjMiBjb3JkID0gdlRleHR1cmVDb29yZDtcIixcblx0XHRcblx0XHQvL1wiZ2xfRnJhZ0NvbG9yID0gIHRleHR1cmUyRChkaXNwbGFjZW1lbnRNYXAsIGNvcmQpO1wiLFxuXHQgICAgXCJnbF9GcmFnQ29sb3IgPSBnbF9GcmFnQ29sb3IgKiB2Q29sb3I7XCIsXG5cdCAgICBcblx0ICBcIn1cIlxuXHRdO1xuXHRcbn1cblxuUElYSS5EaXNwbGFjZW1lbnRGaWx0ZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggUElYSS5BYnN0cmFjdEZpbHRlci5wcm90b3R5cGUgKTtcblBJWEkuRGlzcGxhY2VtZW50RmlsdGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFBJWEkuRGlzcGxhY2VtZW50RmlsdGVyO1xuXG5QSVhJLkRpc3BsYWNlbWVudEZpbHRlci5wcm90b3R5cGUub25UZXh0dXJlTG9hZGVkID0gZnVuY3Rpb24oKVxue1xuXHRcblx0dGhpcy51bmlmb3Jtcy5tYXBEaW1lbnNpb25zLnZhbHVlLnggPSB0aGlzLnVuaWZvcm1zLmRpc3BsYWNlbWVudE1hcC52YWx1ZS53aWR0aDtcblx0dGhpcy51bmlmb3Jtcy5tYXBEaW1lbnNpb25zLnZhbHVlLnkgPSB0aGlzLnVuaWZvcm1zLmRpc3BsYWNlbWVudE1hcC52YWx1ZS5oZWlnaHQ7XG5cblx0dGhpcy51bmlmb3Jtcy5kaXNwbGFjZW1lbnRNYXAudmFsdWUuYmFzZVRleHR1cmUub2ZmKFwibG9hZGVkXCIsIHRoaXMuYm91bmRMb2FkZWRGdW5jdGlvbilcblxufVxuXG4vKipcbiAqIFRoZSB0ZXh0dXJlIHVzZWQgZm9yIHRoZSBkaXNwbGFjZW10ZW50IG1hcCAqIG11c3QgYmUgcG93ZXIgb2YgMiB0ZXh0dXJlIGF0IHRoZSBtb21lbnRcbiAqXG4gKiBAcHJvcGVydHkgbWFwXG4gKiBAdHlwZSBUZXh0dXJlXG4gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShQSVhJLkRpc3BsYWNlbWVudEZpbHRlci5wcm90b3R5cGUsICdtYXAnLCB7XG4gICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5pZm9ybXMuZGlzcGxhY2VtZW50TWFwLnZhbHVlO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgIFx0dGhpcy51bmlmb3Jtcy5kaXNwbGFjZW1lbnRNYXAudmFsdWUgPSB2YWx1ZTtcbiAgICB9XG59KTtcblxuLyoqXG4gKiBUaGUgbXVsdGlwbGllciB1c2VkIHRvIHNjYWxlIHRoZSBkaXNwbGFjZW1lbnQgcmVzdWx0IGZyb20gdGhlIG1hcCBjYWxjdWxhdGlvbi5cbiAqXG4gKiBAcHJvcGVydHkgc2NhbGVcbiAqIEB0eXBlIFBvaW50XG4gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShQSVhJLkRpc3BsYWNlbWVudEZpbHRlci5wcm90b3R5cGUsICdzY2FsZScsIHtcbiAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy51bmlmb3Jtcy5zY2FsZS52YWx1ZTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICBcdHRoaXMudW5pZm9ybXMuc2NhbGUudmFsdWUgPSB2YWx1ZTtcbiAgICB9XG59KTtcblxuLyoqXG4gKiBUaGUgb2Zmc2V0IHVzZWQgdG8gbW92ZSB0aGUgZGlzcGxhY2VtZW50IG1hcC5cbiAqXG4gKiBAcHJvcGVydHkgb2Zmc2V0XG4gKiBAdHlwZSBQb2ludFxuICovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoUElYSS5EaXNwbGFjZW1lbnRGaWx0ZXIucHJvdG90eXBlLCAnb2Zmc2V0Jywge1xuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVuaWZvcm1zLm9mZnNldC52YWx1ZTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICBcdHRoaXMudW5pZm9ybXMub2Zmc2V0LnZhbHVlID0gdmFsdWU7XG4gICAgfVxufSk7XG4vKipcbiAqIEBhdXRob3IgTWF0IEdyb3ZlcyBodHRwOi8vbWF0Z3JvdmVzLmNvbS8gQERvb3JtYXQyM1xuICovXG5cbi8qKlxuICogXG4gKiBUaGlzIGZpbHRlciBhcHBsaWVzIGEgcGl4bGF0ZSBlZmZlY3QgbWFraW5nIGRpc3BsYXkgb2JqZWN0cyBhcHBlYXIgXCJibG9ja3lcIlxuICogQGNsYXNzIFBpeGVsYXRlRmlsdGVyXG4gKiBAY29udHJ1Y3RvclxuICovXG5QSVhJLlBpeGVsYXRlRmlsdGVyID0gZnVuY3Rpb24oKVxue1xuXHRQSVhJLkFic3RyYWN0RmlsdGVyLmNhbGwoIHRoaXMgKTtcblxuXHR0aGlzLnBhc3NlcyA9IFt0aGlzXTtcblx0XG5cdC8vIHNldCB0aGUgdW5pZm9ybXNcblx0dGhpcy51bmlmb3JtcyA9IHtcblx0XHRpbnZlcnQ6IHt0eXBlOiAnZicsIHZhbHVlOiAwfSxcblx0XHRkaW1lbnNpb25zOiB7dHlwZTogJ2Y0JywgdmFsdWU6bmV3IEZsb2F0MzJBcnJheShbMTAwMDAsIDEwMCwgMTAsIDEwXSl9LFxuXHRcdHBpeGVsU2l6ZToge3R5cGU6ICdmMicsIHZhbHVlOnt4OjEwLCB5OjEwfX0sXG5cdH07XG5cblx0dGhpcy5mcmFnbWVudFNyYyA9IFtcblx0ICBcInByZWNpc2lvbiBtZWRpdW1wIGZsb2F0O1wiLFxuXHQgIFwidmFyeWluZyB2ZWMyIHZUZXh0dXJlQ29vcmQ7XCIsXG5cdCAgXCJ2YXJ5aW5nIGZsb2F0IHZDb2xvcjtcIixcblx0ICBcInVuaWZvcm0gdmVjMiB0ZXN0RGltO1wiLFxuXHQgIFwidW5pZm9ybSB2ZWM0IGRpbWVuc2lvbnM7XCIsXG5cdCAgXCJ1bmlmb3JtIHZlYzIgcGl4ZWxTaXplO1wiLFxuXHQgIFwidW5pZm9ybSBzYW1wbGVyMkQgdVNhbXBsZXI7XCIsXG5cdCAgXCJ2b2lkIG1haW4odm9pZCkge1wiLFxuXHQgXHRcInZlYzIgY29vcmQgPSB2VGV4dHVyZUNvb3JkO1wiLFxuXG5cdCBcdFwidmVjMiBzaXplID0gZGltZW5zaW9ucy54eS9waXhlbFNpemU7XCIsXG5cblx0IFx0XCJ2ZWMyIGNvbG9yID0gZmxvb3IoICggdlRleHR1cmVDb29yZCAqIHNpemUgKSApIC8gc2l6ZSArIHBpeGVsU2l6ZS9kaW1lbnNpb25zLnh5ICogMC41O1wiLFxuXHQgICAgXCJnbF9GcmFnQ29sb3IgPSB0ZXh0dXJlMkQodVNhbXBsZXIsIGNvbG9yKTtcIixcblx0ICBcIn1cIlxuXHRdO1xuXHRcblxufVxuXG5QSVhJLlBpeGVsYXRlRmlsdGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIFBJWEkuQWJzdHJhY3RGaWx0ZXIucHJvdG90eXBlICk7XG5QSVhJLlBpeGVsYXRlRmlsdGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFBJWEkuUGl4ZWxhdGVGaWx0ZXI7XG5cbi8qKlxuICogXG4gKiBUaGlzIGEgcG9pbnQgdGhhdCBkZXNjcmliZXMgdGhlIHNpemUgb2YgdGhlIGJsb2NzLiB4IGlzIHRoZSB3aWR0aCBvZiB0aGUgYmxvY2sgYW5kIHkgaXMgdGhlIHRoZSBoZWlnaHRcbiAqIEBwcm9wZXJ0eSBzaXplXG4gKiBAdHlwZSBQb2ludFxuICovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoUElYSS5QaXhlbGF0ZUZpbHRlci5wcm90b3R5cGUsICdzaXplJywge1xuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVuaWZvcm1zLnBpeGVsU2l6ZS52YWx1ZTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICBcdHRoaXMuZGlydHkgPSB0cnVlO1xuICAgIFx0dGhpcy51bmlmb3Jtcy5waXhlbFNpemUudmFsdWUgPSB2YWx1ZTtcbiAgICB9XG59KTtcbi8qKlxuICogQGF1dGhvciBNYXQgR3JvdmVzIGh0dHA6Ly9tYXRncm92ZXMuY29tLyBARG9vcm1hdDIzXG4gKi9cblxuXG5cblBJWEkuQmx1clhGaWx0ZXIgPSBmdW5jdGlvbigpXG57XG5cdFBJWEkuQWJzdHJhY3RGaWx0ZXIuY2FsbCggdGhpcyApO1xuXHRcblx0dGhpcy5wYXNzZXMgPSBbdGhpc107XG5cdFxuXHQvLyBzZXQgdGhlIHVuaWZvcm1zXG5cdHRoaXMudW5pZm9ybXMgPSB7XG5cdFx0Ymx1cjoge3R5cGU6ICdmJywgdmFsdWU6IDEvNTEyfSxcblx0fTtcblx0XG5cdHRoaXMuZnJhZ21lbnRTcmMgPSBbXG5cdCAgXCJwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcIixcblx0ICBcInZhcnlpbmcgdmVjMiB2VGV4dHVyZUNvb3JkO1wiLFxuXHQgIFwidmFyeWluZyBmbG9hdCB2Q29sb3I7XCIsXG5cdCAgXCJ1bmlmb3JtIGZsb2F0IGJsdXI7XCIsXG5cdCAgXCJ1bmlmb3JtIHNhbXBsZXIyRCB1U2FtcGxlcjtcIixcblx0ICAgIFwidm9pZCBtYWluKHZvaWQpIHtcIixcblx0ICBcdFwidmVjNCBzdW0gPSB2ZWM0KDAuMCk7XCIsXG5cblx0ICBcdFwic3VtICs9IHRleHR1cmUyRCh1U2FtcGxlciwgdmVjMih2VGV4dHVyZUNvb3JkLnggLSA0LjAqYmx1ciwgdlRleHR1cmVDb29yZC55KSkgKiAwLjA1O1wiLFxuXHQgICAgXCJzdW0gKz0gdGV4dHVyZTJEKHVTYW1wbGVyLCB2ZWMyKHZUZXh0dXJlQ29vcmQueCAtIDMuMCpibHVyLCB2VGV4dHVyZUNvb3JkLnkpKSAqIDAuMDk7XCIsXG5cdCAgICBcInN1bSArPSB0ZXh0dXJlMkQodVNhbXBsZXIsIHZlYzIodlRleHR1cmVDb29yZC54IC0gMi4wKmJsdXIsIHZUZXh0dXJlQ29vcmQueSkpICogMC4xMjtcIixcblx0ICAgIFwic3VtICs9IHRleHR1cmUyRCh1U2FtcGxlciwgdmVjMih2VGV4dHVyZUNvb3JkLnggLSBibHVyLCB2VGV4dHVyZUNvb3JkLnkpKSAqIDAuMTU7XCIsXG5cdCAgICBcInN1bSArPSB0ZXh0dXJlMkQodVNhbXBsZXIsIHZlYzIodlRleHR1cmVDb29yZC54LCB2VGV4dHVyZUNvb3JkLnkpKSAqIDAuMTY7XCIsXG5cdCAgICBcInN1bSArPSB0ZXh0dXJlMkQodVNhbXBsZXIsIHZlYzIodlRleHR1cmVDb29yZC54ICsgYmx1ciwgdlRleHR1cmVDb29yZC55KSkgKiAwLjE1O1wiLFxuXHQgICAgXCJzdW0gKz0gdGV4dHVyZTJEKHVTYW1wbGVyLCB2ZWMyKHZUZXh0dXJlQ29vcmQueCArIDIuMCpibHVyLCB2VGV4dHVyZUNvb3JkLnkpKSAqIDAuMTI7XCIsXG5cdCAgICBcInN1bSArPSB0ZXh0dXJlMkQodVNhbXBsZXIsIHZlYzIodlRleHR1cmVDb29yZC54ICsgMy4wKmJsdXIsIHZUZXh0dXJlQ29vcmQueSkpICogMC4wOTtcIixcblx0ICAgIFwic3VtICs9IHRleHR1cmUyRCh1U2FtcGxlciwgdmVjMih2VGV4dHVyZUNvb3JkLnggKyA0LjAqYmx1ciwgdlRleHR1cmVDb29yZC55KSkgKiAwLjA1O1wiLFxuXHQgXG5cdFx0XCJnbF9GcmFnQ29sb3IgPSBzdW07XCIsXG5cblx0ICBcIn1cIlxuXHRdO1xufVxuXG5QSVhJLkJsdXJYRmlsdGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIFBJWEkuQWJzdHJhY3RGaWx0ZXIucHJvdG90eXBlICk7XG5QSVhJLkJsdXJYRmlsdGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFBJWEkuQmx1clhGaWx0ZXI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KFBJWEkuQmx1clhGaWx0ZXIucHJvdG90eXBlLCAnYmx1cicsIHtcbiAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy51bmlmb3Jtcy5ibHVyLnZhbHVlIC8gKDEvNzAwMCk7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgXG4gICAgXHR0aGlzLmRpcnR5ID0gdHJ1ZTtcbiAgICBcdHRoaXMudW5pZm9ybXMuYmx1ci52YWx1ZSA9ICgxLzcwMDApICogdmFsdWU7XG4gICAgfVxufSk7XG5cbi8qKlxuICogQGF1dGhvciBNYXQgR3JvdmVzIGh0dHA6Ly9tYXRncm92ZXMuY29tLyBARG9vcm1hdDIzXG4gKi9cblxuXG5cblBJWEkuQmx1cllGaWx0ZXIgPSBmdW5jdGlvbigpXG57XG5cdFBJWEkuQWJzdHJhY3RGaWx0ZXIuY2FsbCggdGhpcyApO1xuXHRcblx0dGhpcy5wYXNzZXMgPSBbdGhpc107XG5cdFxuXHQvLyBzZXQgdGhlIHVuaWZvcm1zXG5cdHRoaXMudW5pZm9ybXMgPSB7XG5cdFx0Ymx1cjoge3R5cGU6ICdmJywgdmFsdWU6IDEvNTEyfSxcblx0fTtcblx0XG5cdHRoaXMuZnJhZ21lbnRTcmMgPSBbXG5cdCAgXCJwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcIixcblx0ICBcInZhcnlpbmcgdmVjMiB2VGV4dHVyZUNvb3JkO1wiLFxuXHQgIFwidmFyeWluZyBmbG9hdCB2Q29sb3I7XCIsXG5cdCAgXCJ1bmlmb3JtIGZsb2F0IGJsdXI7XCIsXG5cdCAgXCJ1bmlmb3JtIHNhbXBsZXIyRCB1U2FtcGxlcjtcIixcblx0ICAgIFwidm9pZCBtYWluKHZvaWQpIHtcIixcblx0ICBcdFwidmVjNCBzdW0gPSB2ZWM0KDAuMCk7XCIsXG5cblx0ICBcdFwic3VtICs9IHRleHR1cmUyRCh1U2FtcGxlciwgdmVjMih2VGV4dHVyZUNvb3JkLngsIHZUZXh0dXJlQ29vcmQueSAtIDQuMCpibHVyKSkgKiAwLjA1O1wiLFxuXHQgICAgXCJzdW0gKz0gdGV4dHVyZTJEKHVTYW1wbGVyLCB2ZWMyKHZUZXh0dXJlQ29vcmQueCwgdlRleHR1cmVDb29yZC55IC0gMy4wKmJsdXIpKSAqIDAuMDk7XCIsXG5cdCAgICBcInN1bSArPSB0ZXh0dXJlMkQodVNhbXBsZXIsIHZlYzIodlRleHR1cmVDb29yZC54LCB2VGV4dHVyZUNvb3JkLnkgLSAyLjAqYmx1cikpICogMC4xMjtcIixcblx0ICAgIFwic3VtICs9IHRleHR1cmUyRCh1U2FtcGxlciwgdmVjMih2VGV4dHVyZUNvb3JkLngsIHZUZXh0dXJlQ29vcmQueSAtIGJsdXIpKSAqIDAuMTU7XCIsXG5cdCAgICBcInN1bSArPSB0ZXh0dXJlMkQodVNhbXBsZXIsIHZlYzIodlRleHR1cmVDb29yZC54LCB2VGV4dHVyZUNvb3JkLnkpKSAqIDAuMTY7XCIsXG5cdCAgICBcInN1bSArPSB0ZXh0dXJlMkQodVNhbXBsZXIsIHZlYzIodlRleHR1cmVDb29yZC54LCB2VGV4dHVyZUNvb3JkLnkgKyBibHVyKSkgKiAwLjE1O1wiLFxuXHQgICAgXCJzdW0gKz0gdGV4dHVyZTJEKHVTYW1wbGVyLCB2ZWMyKHZUZXh0dXJlQ29vcmQueCwgdlRleHR1cmVDb29yZC55ICsgMi4wKmJsdXIpKSAqIDAuMTI7XCIsXG5cdCAgICBcInN1bSArPSB0ZXh0dXJlMkQodVNhbXBsZXIsIHZlYzIodlRleHR1cmVDb29yZC54LCB2VGV4dHVyZUNvb3JkLnkgKyAzLjAqYmx1cikpICogMC4wOTtcIixcblx0ICAgIFwic3VtICs9IHRleHR1cmUyRCh1U2FtcGxlciwgdmVjMih2VGV4dHVyZUNvb3JkLngsIHZUZXh0dXJlQ29vcmQueSArIDQuMCpibHVyKSkgKiAwLjA1O1wiLFxuXHQgXG5cdFx0XCJnbF9GcmFnQ29sb3IgPSBzdW07XCIsXG5cblx0ICBcIn1cIlxuXHRdO1xufVxuXG5QSVhJLkJsdXJZRmlsdGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIFBJWEkuQWJzdHJhY3RGaWx0ZXIucHJvdG90eXBlICk7XG5QSVhJLkJsdXJZRmlsdGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFBJWEkuQmx1cllGaWx0ZXI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShQSVhJLkJsdXJZRmlsdGVyLnByb3RvdHlwZSwgJ2JsdXInLCB7XG4gICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5pZm9ybXMuYmx1ci52YWx1ZSAvICgxLzcwMDApO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgIFx0Ly90aGlzLnBhZGRpbmcgPSB2YWx1ZTtcbiAgICBcdHRoaXMudW5pZm9ybXMuYmx1ci52YWx1ZSA9ICgxLzcwMDApICogdmFsdWU7XG4gICAgfVxufSk7XG5cbi8qKlxuICogQGF1dGhvciBNYXQgR3JvdmVzIGh0dHA6Ly9tYXRncm92ZXMuY29tLyBARG9vcm1hdDIzXG4gKi9cblxuXG4vKipcbiAqIFxuICogVGhlIEJsdXJGaWx0ZXIgYXBwbGllcyBhIEdhdXNzaWFuIGJsdXIgdG8gYW4gb2JqZWN0LiBcbiAqIFRoZSBzdHJlbmd0aCBvZiB0aGUgYmx1ciBjYW4gYmUgc2V0IGZvciB4LSBhbmQgeS1heGlzIHNlcGFyYXRlbHkgKGFsd2F5cyByZWxhdGl2ZSB0byB0aGUgc3RhZ2UpLlxuICpcbiAqIEBjbGFzcyBCbHVyRmlsdGVyXG4gKiBAY29udHJ1Y3RvclxuICovXG5QSVhJLkJsdXJGaWx0ZXIgPSBmdW5jdGlvbigpXG57XG4gICAgXG5cdHRoaXMuYmx1clhGaWx0ZXIgPSBuZXcgUElYSS5CbHVyWEZpbHRlcigpO1xuXHR0aGlzLmJsdXJZRmlsdGVyID0gbmV3IFBJWEkuQmx1cllGaWx0ZXIoKTtcblxuXHR0aGlzLnBhc3NlcyA9W3RoaXMuYmx1clhGaWx0ZXIsIHRoaXMuYmx1cllGaWx0ZXJdO1xuXHRcbn1cblxuLyoqXG4gKiBTZXRzIHRoZSBzdHJlbmd0aCBvZiBib3RoIHRoZSBibHVyWCBhbmQgYmx1clkgcHJvcGVydGllcyBzaW11bHRhbmVvdXNseVxuICpcbiAqIEBwcm9wZXJ0eSBibHVyXG4gKiBAdHlwZSBOdW1iZXIgdGhlIHN0cmVuZ3RoIG9mIHRoZSBibHVyXG4gKiBAZGVmYXVsdCAyXG4gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShQSVhJLkJsdXJGaWx0ZXIucHJvdG90eXBlLCAnYmx1cicsIHtcbiAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ibHVyWEZpbHRlci5ibHVyO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICBcdFx0dGhpcy5ibHVyWEZpbHRlci5ibHVyID0gdGhpcy5ibHVyWUZpbHRlci5ibHVyID0gdmFsdWU7XG4gICAgfVxufSk7XG5cbi8qKlxuICogU2V0cyB0aGUgc3RyZW5ndGggb2YgdGhlIGJsdXJYIHByb3BlcnR5IHNpbXVsdGFuZW91c2x5XG4gKlxuICogQHByb3BlcnR5IGJsdXJYXG4gKiBAdHlwZSBOdW1iZXIgdGhlIHN0cmVuZ3RoIG9mIHRoZSBibHVyWFxuICogQGRlZmF1bHQgMlxuICovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoUElYSS5CbHVyRmlsdGVyLnByb3RvdHlwZSwgJ2JsdXJYJywge1xuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJsdXJYRmlsdGVyLmJsdXI7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgXHR0aGlzLmJsdXJYRmlsdGVyLmJsdXIgPSB2YWx1ZTtcbiAgICB9XG59KTtcblxuLyoqXG4gKiBTZXRzIHRoZSBzdHJlbmd0aCBvZiB0aGUgYmx1clggcHJvcGVydHkgc2ltdWx0YW5lb3VzbHlcbiAqXG4gKiBAcHJvcGVydHkgYmx1cllcbiAqIEB0eXBlIE51bWJlciB0aGUgc3RyZW5ndGggb2YgdGhlIGJsdXJZXG4gKiBAZGVmYXVsdCAyXG4gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShQSVhJLkJsdXJGaWx0ZXIucHJvdG90eXBlLCAnYmx1clknLCB7XG4gICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYmx1cllGaWx0ZXIuYmx1cjtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICBcdHRoaXMuYmx1cllGaWx0ZXIuYmx1ciA9IHZhbHVlO1xuICAgIH1cbn0pO1xuXG4vKipcbiAqIEBhdXRob3IgTWF0IEdyb3ZlcyBodHRwOi8vbWF0Z3JvdmVzLmNvbS8gQERvb3JtYXQyM1xuICovXG5cbi8qKlxuICogXG4gKiBUaGlzIGludmVydHMgeW91ciBkaXNwbGF5T2JqZWN0cyBjb2xvcnMuXG4gKiBAY2xhc3MgSW52ZXJ0RmlsdGVyXG4gKiBAY29udHJ1Y3RvclxuICovXG5QSVhJLkludmVydEZpbHRlciA9IGZ1bmN0aW9uKClcbntcblx0UElYSS5BYnN0cmFjdEZpbHRlci5jYWxsKCB0aGlzICk7XG5cdFxuXHR0aGlzLnBhc3NlcyA9IFt0aGlzXTtcblx0XG5cdC8vIHNldCB0aGUgdW5pZm9ybXNcblx0dGhpcy51bmlmb3JtcyA9IHtcblx0XHRpbnZlcnQ6IHt0eXBlOiAnZicsIHZhbHVlOiAxfSxcblx0fTtcblx0XG5cdHRoaXMuZnJhZ21lbnRTcmMgPSBbXG5cdCAgXCJwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcIixcblx0ICBcInZhcnlpbmcgdmVjMiB2VGV4dHVyZUNvb3JkO1wiLFxuXHQgIFwidmFyeWluZyBmbG9hdCB2Q29sb3I7XCIsXG5cdCAgXCJ1bmlmb3JtIGZsb2F0IGludmVydDtcIixcblx0ICBcInVuaWZvcm0gc2FtcGxlcjJEIHVTYW1wbGVyO1wiLFxuXHQgIFwidm9pZCBtYWluKHZvaWQpIHtcIixcblx0ICAgIFwiZ2xfRnJhZ0NvbG9yID0gdGV4dHVyZTJEKHVTYW1wbGVyLCB2VGV4dHVyZUNvb3JkKTtcIixcblx0XHRcImdsX0ZyYWdDb2xvci5yZ2IgPSBtaXgoICh2ZWMzKDEpLWdsX0ZyYWdDb2xvci5yZ2IpICogZ2xfRnJhZ0NvbG9yLmEsIGdsX0ZyYWdDb2xvci5yZ2IsIDEuMCAtIGludmVydCk7XCIsXG5cdFx0Ly9cImdsX0ZyYWdDb2xvci5yZ2IgPSBnbF9GcmFnQ29sb3IucmdiICAqIGdsX0ZyYWdDb2xvci5hO1wiLFxuXHQgICAgXCJnbF9GcmFnQ29sb3IgPSBnbF9GcmFnQ29sb3IgKiB2Q29sb3I7XCIsXG5cdCAgXCJ9XCJcblx0XTtcblx0XG59XG5cblBJWEkuSW52ZXJ0RmlsdGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIFBJWEkuQWJzdHJhY3RGaWx0ZXIucHJvdG90eXBlICk7XG5QSVhJLkludmVydEZpbHRlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBQSVhJLkludmVydEZpbHRlcjtcblxuLyoqXG5UaGUgc3RyZW5ndGggb2YgdGhlIGludmVydC4gMSB3aWxsIGZ1bGx5IGludmVydCB0aGUgY29sb3JzLCAwIHdpbGwgbWFrZSB0aGUgb2JqZWN0IGl0cyBub3JtYWwgY29sb3JcbkBwcm9wZXJ0eSBpbnZlcnRcbiovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoUElYSS5JbnZlcnRGaWx0ZXIucHJvdG90eXBlLCAnaW52ZXJ0Jywge1xuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVuaWZvcm1zLmludmVydC52YWx1ZTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICBcdHRoaXMudW5pZm9ybXMuaW52ZXJ0LnZhbHVlID0gdmFsdWU7XG4gICAgfVxufSk7XG4vKipcbi8qKlxuICogQGF1dGhvciBNYXQgR3JvdmVzIGh0dHA6Ly9tYXRncm92ZXMuY29tLyBARG9vcm1hdDIzXG4gKi9cblxuXG4vKipcbiAqIFxuICogVGhpcyBhcHBsaWVzIGEgc2VwaWEgZWZmZWN0IHRvIHlvdXIgZGlzcGxheU9iamVjdHMuXG4gKiBAY2xhc3MgU2VwaWFGaWx0ZXJcbiAqIEBjb250cnVjdG9yXG4gKi9cblBJWEkuU2VwaWFGaWx0ZXIgPSBmdW5jdGlvbigpXG57XG5cdFBJWEkuQWJzdHJhY3RGaWx0ZXIuY2FsbCggdGhpcyApO1xuXHRcblx0dGhpcy5wYXNzZXMgPSBbdGhpc107XG5cdFxuXHQvLyBzZXQgdGhlIHVuaWZvcm1zXG5cdHRoaXMudW5pZm9ybXMgPSB7XG5cdFx0c2VwaWE6IHt0eXBlOiAnZicsIHZhbHVlOiAxfSxcblx0fTtcblx0XG5cdHRoaXMuZnJhZ21lbnRTcmMgPSBbXG5cdCAgXCJwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcIixcblx0ICBcInZhcnlpbmcgdmVjMiB2VGV4dHVyZUNvb3JkO1wiLFxuXHQgIFwidmFyeWluZyBmbG9hdCB2Q29sb3I7XCIsXG5cdCAgXCJ1bmlmb3JtIGZsb2F0IHNlcGlhO1wiLFxuXHQgIFwidW5pZm9ybSBzYW1wbGVyMkQgdVNhbXBsZXI7XCIsXG5cdCBcdCAgIFxuXHQgIFwiY29uc3QgbWF0MyBzZXBpYU1hdHJpeCA9IG1hdDMoMC4zNTg4LCAwLjcwNDQsIDAuMTM2OCwgMC4yOTkwLCAwLjU4NzAsIDAuMTE0MCwgMC4yMzkyLCAwLjQ2OTYsIDAuMDkxMik7XCIsXG5cdCAgXCJ2b2lkIG1haW4odm9pZCkge1wiLFxuXHQgICAgXCJnbF9GcmFnQ29sb3IgPSB0ZXh0dXJlMkQodVNhbXBsZXIsIHZUZXh0dXJlQ29vcmQpO1wiLFxuXHRcdFwiZ2xfRnJhZ0NvbG9yLnJnYiA9IG1peCggZ2xfRnJhZ0NvbG9yLnJnYiwgZ2xfRnJhZ0NvbG9yLnJnYiAqIHNlcGlhTWF0cml4LCBzZXBpYSk7XCIsXG5cdCAgICBcImdsX0ZyYWdDb2xvciA9IGdsX0ZyYWdDb2xvciAqIHZDb2xvcjtcIixcblx0ICBcIn1cIlxuXHRdO1xuXHRcbn1cblxuUElYSS5TZXBpYUZpbHRlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBQSVhJLkFic3RyYWN0RmlsdGVyLnByb3RvdHlwZSApO1xuUElYSS5TZXBpYUZpbHRlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBQSVhJLlNlcGlhRmlsdGVyO1xuXG4vKipcblRoZSBzdHJlbmd0aCBvZiB0aGUgc2VwaWEuIDEgd2lsbCBhcHBseSB0aGUgZnVsbCBzZXBpYSBlZmZlY3QsIDAgd2lsbCBtYWtlIHRoZSBvYmplY3QgaXRzIG5vcm1hbCBjb2xvclxuQHByb3BlcnR5IHNlcGlhXG4qL1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KFBJWEkuU2VwaWFGaWx0ZXIucHJvdG90eXBlLCAnc2VwaWEnLCB7XG4gICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5pZm9ybXMuc2VwaWEudmFsdWU7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgXHR0aGlzLnVuaWZvcm1zLnNlcGlhLnZhbHVlID0gdmFsdWU7XG4gICAgfVxufSk7XG5cbi8qKlxuICogQGF1dGhvciBNYXQgR3JvdmVzIGh0dHA6Ly9tYXRncm92ZXMuY29tLyBARG9vcm1hdDIzXG4gKi9cblxuLyoqXG4gKiBcbiAqIFRoaXMgZmlsdGVyIGFwcGxpZXMgYSBwaXhsYXRlIGVmZmVjdCBtYWtpbmcgZGlzcGxheSBvYmplY3RzIGFwcGVhciBcImJsb2NreVwiXG4gKiBAY2xhc3MgUGl4ZWxhdGVGaWx0ZXJcbiAqIEBjb250cnVjdG9yXG4gKi9cblBJWEkuVHdpc3RGaWx0ZXIgPSBmdW5jdGlvbigpXG57XG5cdFBJWEkuQWJzdHJhY3RGaWx0ZXIuY2FsbCggdGhpcyApO1xuXG5cdHRoaXMucGFzc2VzID0gW3RoaXNdO1xuXHRcblx0Ly8gc2V0IHRoZSB1bmlmb3Jtc1xuXHR0aGlzLnVuaWZvcm1zID0ge1xuXHRcdHJhZGl1czoge3R5cGU6ICdmJywgdmFsdWU6MC41fSxcblx0XHRhbmdsZToge3R5cGU6ICdmJywgdmFsdWU6NX0sXG5cdFx0b2Zmc2V0OiB7dHlwZTogJ2YyJywgdmFsdWU6e3g6MC41LCB5OjAuNX19LFxuXHR9O1xuXG5cdHRoaXMuZnJhZ21lbnRTcmMgPSBbXG5cdCAgXCJwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcIixcblx0ICBcInZhcnlpbmcgdmVjMiB2VGV4dHVyZUNvb3JkO1wiLFxuXHQgIFwidmFyeWluZyBmbG9hdCB2Q29sb3I7XCIsXG5cdCAgXCJ1bmlmb3JtIHZlYzQgZGltZW5zaW9ucztcIixcblx0ICBcInVuaWZvcm0gc2FtcGxlcjJEIHVTYW1wbGVyO1wiLFxuXHQgIFxuXHQgIFwidW5pZm9ybSBmbG9hdCByYWRpdXM7XCIsXG4gICAgICBcInVuaWZvcm0gZmxvYXQgYW5nbGU7XCIsXG4gICAgICBcInVuaWZvcm0gdmVjMiBvZmZzZXQ7XCIsXG5cblx0ICBcInZvaWQgbWFpbih2b2lkKSB7XCIsXG5cdCBcdFwidmVjMiBjb29yZCA9IHZUZXh0dXJlQ29vcmQgLSBvZmZzZXQ7XCIsXG5cdFx0XCJmbG9hdCBkaXN0YW5jZSA9IGxlbmd0aChjb29yZCk7XCIsXG5cdCBcdFxuXHQgXHRcImlmIChkaXN0YW5jZSA8IHJhZGl1cyl7XCIsXG5cblx0XHQgXHRcImZsb2F0IHJhdGlvID0gKHJhZGl1cyAtIGRpc3RhbmNlKSAvIHJhZGl1cztcIixcblx0XHQgXHRcImZsb2F0IGFuZ2xlTW9kID0gcmF0aW8gKiByYXRpbyAqIGFuZ2xlO1wiLFxuXHRcdCBcdFwiZmxvYXQgcyA9IHNpbihhbmdsZU1vZCk7XCIsXG5cdFx0IFx0XCJmbG9hdCBjID0gY29zKGFuZ2xlTW9kKTtcIixcblx0XHQgXHRcImNvb3JkID0gdmVjMihjb29yZC54ICogYyAtIGNvb3JkLnkgKiBzLCBjb29yZC54ICogcyArIGNvb3JkLnkgKiBjKTtcIixcblxuXHQgXHRcIn1cIixcblxuXHQgICAgXCJnbF9GcmFnQ29sb3IgPSB0ZXh0dXJlMkQodVNhbXBsZXIsIGNvb3JkK29mZnNldCk7XCIsXG5cdCAgXCJ9XCJcblx0XTtcbn1cblxuUElYSS5Ud2lzdEZpbHRlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBQSVhJLkFic3RyYWN0RmlsdGVyLnByb3RvdHlwZSApO1xuUElYSS5Ud2lzdEZpbHRlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBQSVhJLlR3aXN0RmlsdGVyO1xuXG4vKipcbiAqIFxuICogVGhpcyBwb2ludCBkZXNjcmliZXMgdGhlIHRoZSBvZmZzZXQgb2YgdGhlIHR3aXN0XG4gKiBAcHJvcGVydHkgc2l6ZVxuICogQHR5cGUgUG9pbnRcbiAqL1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KFBJWEkuVHdpc3RGaWx0ZXIucHJvdG90eXBlLCAnb2Zmc2V0Jywge1xuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVuaWZvcm1zLm9mZnNldC52YWx1ZTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICBcdHRoaXMuZGlydHkgPSB0cnVlO1xuICAgIFx0dGhpcy51bmlmb3Jtcy5vZmZzZXQudmFsdWUgPSB2YWx1ZTtcbiAgICB9XG59KTtcblxuLyoqXG4gKiBcbiAqIFRoaXMgcmFkaXVzIGRlc2NyaWJlcyBzaXplIG9mIHRoZSB0d2lzdFxuICogQHByb3BlcnR5IHNpemVcbiAqIEB0eXBlIE51bWJlclxuICovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoUElYSS5Ud2lzdEZpbHRlci5wcm90b3R5cGUsICdyYWRpdXMnLCB7XG4gICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5pZm9ybXMucmFkaXVzLnZhbHVlO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgIFx0dGhpcy5kaXJ0eSA9IHRydWU7XG4gICAgXHR0aGlzLnVuaWZvcm1zLnJhZGl1cy52YWx1ZSA9IHZhbHVlO1xuICAgIH1cbn0pO1xuXG4vKipcbiAqIFxuICogVGhpcyByYWRpdXMgZGVzY3JpYmVzIGFuZ2xlIG9mIHRoZSB0d2lzdFxuICogQHByb3BlcnR5IGFuZ2xlXG4gKiBAdHlwZSBOdW1iZXJcbiAqL1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KFBJWEkuVHdpc3RGaWx0ZXIucHJvdG90eXBlLCAnYW5nbGUnLCB7XG4gICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5pZm9ybXMuYW5nbGUudmFsdWU7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgXHR0aGlzLmRpcnR5ID0gdHJ1ZTtcbiAgICBcdHRoaXMudW5pZm9ybXMuYW5nbGUudmFsdWUgPSB2YWx1ZTtcbiAgICB9XG59KTtcbi8qKlxuICogQGF1dGhvciBNYXQgR3JvdmVzIGh0dHA6Ly9tYXRncm92ZXMuY29tLyBARG9vcm1hdDIzXG4gKi9cblxuXG4vKipcbiAqIFxuICogVGhpcyB0dXJucyB5b3VyIGRpc3BsYXlPYmplY3RzIHRvIGJsYWNrIGFuZCB3aGl0ZS5cbiAqIEBjbGFzcyBHcmV5RmlsdGVyXG4gKiBAY29udHJ1Y3RvclxuICovXG5QSVhJLkNvbG9yU3RlcEZpbHRlciA9IGZ1bmN0aW9uKClcbntcblx0UElYSS5BYnN0cmFjdEZpbHRlci5jYWxsKCB0aGlzICk7XG5cdFxuXHR0aGlzLnBhc3NlcyA9IFt0aGlzXTtcblx0XG5cdC8vIHNldCB0aGUgdW5pZm9ybXNcblx0dGhpcy51bmlmb3JtcyA9IHtcblx0XHRzdGVwOiB7dHlwZTogJ2YnLCB2YWx1ZTogNX0sXG5cdH07XG5cdFxuXHR0aGlzLmZyYWdtZW50U3JjID0gW1xuXHQgIFwicHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7XCIsXG5cdCAgXCJ2YXJ5aW5nIHZlYzIgdlRleHR1cmVDb29yZDtcIixcblx0ICBcInZhcnlpbmcgZmxvYXQgdkNvbG9yO1wiLFxuXHQgIFwidW5pZm9ybSBzYW1wbGVyMkQgdVNhbXBsZXI7XCIsXG5cdCAgXCJ1bmlmb3JtIGZsb2F0IHN0ZXA7XCIsXG5cdCAgXCJ2b2lkIG1haW4odm9pZCkge1wiLFxuXHQgICAgXCJ2ZWM0IGNvbG9yID0gdGV4dHVyZTJEKHVTYW1wbGVyLCB2VGV4dHVyZUNvb3JkKTtcIixcblx0ICAgIFwiY29sb3IgPSBmbG9vcihjb2xvciAqIHN0ZXApIC8gc3RlcDtcIixcblx0ICAgIFwiZ2xfRnJhZ0NvbG9yID0gY29sb3IgKiB2Q29sb3I7XCIsXG5cdCAgXCJ9XCJcblx0XTtcbn1cblxuUElYSS5Db2xvclN0ZXBGaWx0ZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggUElYSS5BYnN0cmFjdEZpbHRlci5wcm90b3R5cGUgKTtcblBJWEkuQ29sb3JTdGVwRmlsdGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFBJWEkuQ29sb3JTdGVwRmlsdGVyO1xuXG4vKipcblRoZSBudW1iZXIgb2Ygc3RlcHMuXG5AcHJvcGVydHkgc3RlcFxuKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShQSVhJLkNvbG9yU3RlcEZpbHRlci5wcm90b3R5cGUsICdzdGVwJywge1xuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVuaWZvcm1zLnN0ZXAudmFsdWU7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgXHR0aGlzLnVuaWZvcm1zLnN0ZXAudmFsdWUgPSB2YWx1ZTtcbiAgICB9XG59KTtcblxuLyoqXG4gKiBAYXV0aG9yIE1hdCBHcm92ZXMgaHR0cDovL21hdGdyb3Zlcy5jb20vIEBEb29ybWF0MjNcbiAqIG9yaWdpbmFsIGZpbHRlcjogaHR0cHM6Ly9naXRodWIuY29tL2V2YW53L2dsZnguanMvYmxvYi9tYXN0ZXIvc3JjL2ZpbHRlcnMvZnVuL2RvdHNjcmVlbi5qc1xuICovXG5cbi8qKlxuICogXG4gKiBUaGlzIGZpbHRlciBhcHBsaWVzIGEgcGl4bGF0ZSBlZmZlY3QgbWFraW5nIGRpc3BsYXkgb2JqZWN0cyBhcHBlYXIgXCJibG9ja3lcIlxuICogQGNsYXNzIFBpeGVsYXRlRmlsdGVyXG4gKiBAY29udHJ1Y3RvclxuICovXG5QSVhJLkRvdFNjcmVlbkZpbHRlciA9IGZ1bmN0aW9uKClcbntcblx0UElYSS5BYnN0cmFjdEZpbHRlci5jYWxsKCB0aGlzICk7XG5cblx0dGhpcy5wYXNzZXMgPSBbdGhpc107XG5cdFxuXHQvLyBzZXQgdGhlIHVuaWZvcm1zXG5cdHRoaXMudW5pZm9ybXMgPSB7XG5cdFx0c2NhbGU6IHt0eXBlOiAnZicsIHZhbHVlOjF9LFxuXHRcdGFuZ2xlOiB7dHlwZTogJ2YnLCB2YWx1ZTo1fSxcblx0XHRkaW1lbnNpb25zOiAgIHt0eXBlOiAnZjQnLCB2YWx1ZTpbMCwwLDAsMF19XG5cdH07XG5cblx0dGhpcy5mcmFnbWVudFNyYyA9IFtcblx0ICBcInByZWNpc2lvbiBtZWRpdW1wIGZsb2F0O1wiLFxuXHQgIFwidmFyeWluZyB2ZWMyIHZUZXh0dXJlQ29vcmQ7XCIsXG5cdCAgXCJ2YXJ5aW5nIGZsb2F0IHZDb2xvcjtcIixcblx0ICBcInVuaWZvcm0gdmVjNCBkaW1lbnNpb25zO1wiLFxuXHQgIFwidW5pZm9ybSBzYW1wbGVyMkQgdVNhbXBsZXI7XCIsXG5cblx0ICAgIFwidW5pZm9ybSBmbG9hdCBhbmdsZTtcIixcblx0ICAgIFwidW5pZm9ybSBmbG9hdCBzY2FsZTtcIixcblxuXHQgICAgXCJmbG9hdCBwYXR0ZXJuKCkge1wiLFxuXHQgICAgXHRcImZsb2F0IHMgPSBzaW4oYW5nbGUpLCBjID0gY29zKGFuZ2xlKTtcIixcblx0ICAgIFx0XCJ2ZWMyIHRleCA9IHZUZXh0dXJlQ29vcmQgKiBkaW1lbnNpb25zLnh5O1wiLFxuXHQgICAgXHRcInZlYzIgcG9pbnQgPSB2ZWMyKFwiLFxuXHQgICAgXHRcdFwiYyAqIHRleC54IC0gcyAqIHRleC55LFwiLFxuXHQgICAgXHRcdFwicyAqIHRleC54ICsgYyAqIHRleC55XCIsXG5cdCAgICBcdFwiKSAqIHNjYWxlO1wiLFxuXHQgICAgXHRcInJldHVybiAoc2luKHBvaW50LngpICogc2luKHBvaW50LnkpKSAqIDQuMDtcIixcblx0ICAgIFwifVwiLFxuXG5cdCAgICBcInZvaWQgbWFpbigpIHtcIixcbiAgICAgICAgICAgIFwidmVjNCBjb2xvciA9IHRleHR1cmUyRCh1U2FtcGxlciwgdlRleHR1cmVDb29yZCk7XCIsXG4gICAgICAgICAgICBcImZsb2F0IGF2ZXJhZ2UgPSAoY29sb3IuciArIGNvbG9yLmcgKyBjb2xvci5iKSAvIDMuMDtcIixcbiAgICAgICAgICAgIFwiZ2xfRnJhZ0NvbG9yID0gdmVjNCh2ZWMzKGF2ZXJhZ2UgKiAxMC4wIC0gNS4wICsgcGF0dGVybigpKSwgY29sb3IuYSk7XCIsXG4gICAgICAgIFwifVwiLFxuXHRdO1xufVxuXG5QSVhJLkRvdFNjcmVlbkZpbHRlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBQSVhJLkRvdFNjcmVlbkZpbHRlci5wcm90b3R5cGUgKTtcblBJWEkuRG90U2NyZWVuRmlsdGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFBJWEkuRG90U2NyZWVuRmlsdGVyO1xuXG4vKipcbiAqIFxuICogVGhpcyBkZXNjcmliZXMgdGhlIHRoZSBzY2FsZVxuICogQHByb3BlcnR5IHNjYWxlXG4gKiBAdHlwZSBOdW1iZXJcbiAqL1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KFBJWEkuRG90U2NyZWVuRmlsdGVyLnByb3RvdHlwZSwgJ3NjYWxlJywge1xuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVuaWZvcm1zLnNjYWxlLnZhbHVlO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgIFx0dGhpcy5kaXJ0eSA9IHRydWU7XG4gICAgXHR0aGlzLnVuaWZvcm1zLnNjYWxlLnZhbHVlID0gdmFsdWU7XG4gICAgfVxufSk7XG5cbi8qKlxuICogXG4gKiBUaGlzIHJhZGl1cyBkZXNjcmliZXMgYW5nbGVcbiAqIEBwcm9wZXJ0eSBhbmdsZVxuICogQHR5cGUgTnVtYmVyXG4gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShQSVhJLkRvdFNjcmVlbkZpbHRlci5wcm90b3R5cGUsICdhbmdsZScsIHtcbiAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy51bmlmb3Jtcy5hbmdsZS52YWx1ZTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICBcdHRoaXMuZGlydHkgPSB0cnVlO1xuICAgIFx0dGhpcy51bmlmb3Jtcy5hbmdsZS52YWx1ZSA9IHZhbHVlO1xuICAgIH1cbn0pO1xuLyoqXG4gKiBAYXV0aG9yIE1hdCBHcm92ZXMgaHR0cDovL21hdGdyb3Zlcy5jb20vIEBEb29ybWF0MjNcbiAqL1xuXG5cblxuUElYSS5Dcm9zc0hhdGNoRmlsdGVyID0gZnVuY3Rpb24oKVxue1xuXHRQSVhJLkFic3RyYWN0RmlsdGVyLmNhbGwoIHRoaXMgKTtcblx0XG5cdHRoaXMucGFzc2VzID0gW3RoaXNdO1xuXHRcblx0Ly8gc2V0IHRoZSB1bmlmb3Jtc1xuXHR0aGlzLnVuaWZvcm1zID0ge1xuXHRcdGJsdXI6IHt0eXBlOiAnZicsIHZhbHVlOiAxLzUxMn0sXG5cdH07XG5cdFxuXHR0aGlzLmZyYWdtZW50U3JjID0gW1xuXHQgIFwicHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7XCIsXG5cdCAgXCJ2YXJ5aW5nIHZlYzIgdlRleHR1cmVDb29yZDtcIixcblx0ICBcInZhcnlpbmcgZmxvYXQgdkNvbG9yO1wiLFxuXHQgIFwidW5pZm9ybSBmbG9hdCBibHVyO1wiLFxuXHQgIFwidW5pZm9ybSBzYW1wbGVyMkQgdVNhbXBsZXI7XCIsXG5cdCAgICBcInZvaWQgbWFpbih2b2lkKSB7XCIsXG5cdCAgXHRcblx0ICAgIFxuXHRcdFwiICAgIGZsb2F0IGx1bSA9IGxlbmd0aCh0ZXh0dXJlMkQodVNhbXBsZXIsIHZUZXh0dXJlQ29vcmQueHkpLnJnYik7XCIsXG5cdFx0XCIgICAgIFwiLFxuXHRcdFwiICAgIGdsX0ZyYWdDb2xvciA9IHZlYzQoMS4wLCAxLjAsIDEuMCwgMS4wKTtcIixcblx0XHRcIiAgICAgXCIsXG5cdFx0XCIgICAgaWYgKGx1bSA8IDEuMDApIHtcIixcblx0XHRcIiAgICAgICAgaWYgKG1vZChnbF9GcmFnQ29vcmQueCArIGdsX0ZyYWdDb29yZC55LCAxMC4wKSA9PSAwLjApIHtcIixcblx0XHRcIiAgICAgICAgICAgIGdsX0ZyYWdDb2xvciA9IHZlYzQoMC4wLCAwLjAsIDAuMCwgMS4wKTtcIixcblx0XHRcIiAgICAgICAgfVwiLFxuXHRcdFwiICAgIH1cIixcblx0XHRcIiAgICAgXCIsXG5cdFx0XCIgICAgaWYgKGx1bSA8IDAuNzUpIHtcIixcblx0XHRcIiAgICAgICAgaWYgKG1vZChnbF9GcmFnQ29vcmQueCAtIGdsX0ZyYWdDb29yZC55LCAxMC4wKSA9PSAwLjApIHtcIixcblx0XHRcIiAgICAgICAgICAgIGdsX0ZyYWdDb2xvciA9IHZlYzQoMC4wLCAwLjAsIDAuMCwgMS4wKTtcIixcblx0XHRcIiAgICAgICAgfVwiLFxuXHRcdFwiICAgIH1cIixcblx0XHRcIiAgICAgXCIsXG5cdFx0XCIgICAgaWYgKGx1bSA8IDAuNTApIHtcIixcblx0XHRcIiAgICAgICAgaWYgKG1vZChnbF9GcmFnQ29vcmQueCArIGdsX0ZyYWdDb29yZC55IC0gNS4wLCAxMC4wKSA9PSAwLjApIHtcIixcblx0XHRcIiAgICAgICAgICAgIGdsX0ZyYWdDb2xvciA9IHZlYzQoMC4wLCAwLjAsIDAuMCwgMS4wKTtcIixcblx0XHRcIiAgICAgICAgfVwiLFxuXHRcdFwiICAgIH1cIixcblx0XHRcIiAgICAgXCIsXG5cdFx0XCIgICAgaWYgKGx1bSA8IDAuMykge1wiLFxuXHRcdFwiICAgICAgICBpZiAobW9kKGdsX0ZyYWdDb29yZC54IC0gZ2xfRnJhZ0Nvb3JkLnkgLSA1LjAsIDEwLjApID09IDAuMCkge1wiLFxuXHRcdFwiICAgICAgICAgICAgZ2xfRnJhZ0NvbG9yID0gdmVjNCgwLjAsIDAuMCwgMC4wLCAxLjApO1wiLFxuXHRcdFwiICAgICAgICB9XCIsXG5cdFx0XCIgICAgfVwiLFxuXHRcdFwifVwiXG5cdF07XG59XG5cblBJWEkuQ3Jvc3NIYXRjaEZpbHRlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBQSVhJLkFic3RyYWN0RmlsdGVyLnByb3RvdHlwZSApO1xuUElYSS5Dcm9zc0hhdGNoRmlsdGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFBJWEkuQmx1cllGaWx0ZXI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShQSVhJLkNyb3NzSGF0Y2hGaWx0ZXIucHJvdG90eXBlLCAnYmx1cicsIHtcbiAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy51bmlmb3Jtcy5ibHVyLnZhbHVlIC8gKDEvNzAwMCk7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgXHQvL3RoaXMucGFkZGluZyA9IHZhbHVlO1xuICAgIFx0dGhpcy51bmlmb3Jtcy5ibHVyLnZhbHVlID0gKDEvNzAwMCkgKiB2YWx1ZTtcbiAgICB9XG59KTtcblxuLyoqXG4gKiBAYXV0aG9yIE1hdCBHcm92ZXMgaHR0cDovL21hdGdyb3Zlcy5jb20vIEBEb29ybWF0MjNcbiAqL1xuXG5cblxuUElYSS5SR0JTcGxpdEZpbHRlciA9IGZ1bmN0aW9uKClcbntcblx0UElYSS5BYnN0cmFjdEZpbHRlci5jYWxsKCB0aGlzICk7XG5cdFxuXHR0aGlzLnBhc3NlcyA9IFt0aGlzXTtcblx0XG5cdC8vIHNldCB0aGUgdW5pZm9ybXNcblx0dGhpcy51bmlmb3JtcyA9IHtcblx0XHRyZWQ6IHt0eXBlOiAnZjInLCB2YWx1ZToge3g6MjAsIHk6MjB9fSxcblx0XHRncmVlbjoge3R5cGU6ICdmMicsIHZhbHVlOiB7eDotMjAsIHk6MjB9fSxcblx0XHRibHVlOiB7dHlwZTogJ2YyJywgdmFsdWU6IHt4OjIwLCB5Oi0yMH19LFxuXHRcdGRpbWVuc2lvbnM6ICAge3R5cGU6ICdmNCcsIHZhbHVlOlswLDAsMCwwXX1cblx0fTtcblx0XG5cdHRoaXMuZnJhZ21lbnRTcmMgPSBbXG5cdCAgXCJwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcIixcblx0ICBcInZhcnlpbmcgdmVjMiB2VGV4dHVyZUNvb3JkO1wiLFxuXHQgIFwidmFyeWluZyBmbG9hdCB2Q29sb3I7XCIsXG5cdCAgXCJ1bmlmb3JtIHZlYzIgcmVkO1wiLFxuXHQgIFwidW5pZm9ybSB2ZWMyIGdyZWVuO1wiLFxuXHQgIFwidW5pZm9ybSB2ZWMyIGJsdWU7XCIsXG5cdCAgXCJ1bmlmb3JtIHZlYzQgZGltZW5zaW9ucztcIixcblx0ICBcInVuaWZvcm0gc2FtcGxlcjJEIHVTYW1wbGVyO1wiLFxuXHQgICAgXCJ2b2lkIG1haW4odm9pZCkge1wiLFxuXHQgIFx0ICBcImdsX0ZyYWdDb2xvci5yID0gdGV4dHVyZTJEKHVTYW1wbGVyLCB2VGV4dHVyZUNvb3JkICsgcmVkL2RpbWVuc2lvbnMueHkpLnI7XCIsXG5cdCAgXHQgIFwiZ2xfRnJhZ0NvbG9yLmcgPSB0ZXh0dXJlMkQodVNhbXBsZXIsIHZUZXh0dXJlQ29vcmQgKyBncmVlbi9kaW1lbnNpb25zLnh5KS5nO1wiLFxuXHQgIFx0ICBcImdsX0ZyYWdDb2xvci5iID0gdGV4dHVyZTJEKHVTYW1wbGVyLCB2VGV4dHVyZUNvb3JkICsgYmx1ZS9kaW1lbnNpb25zLnh5KS5iO1wiLFxuXHQgIFx0ICBcImdsX0ZyYWdDb2xvci5hID0gdGV4dHVyZTJEKHVTYW1wbGVyLCB2VGV4dHVyZUNvb3JkKS5hO1wiLFxuXHQgIFwifVwiXG5cdF07XG59XG5cblBJWEkuUkdCU3BsaXRGaWx0ZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggUElYSS5BYnN0cmFjdEZpbHRlci5wcm90b3R5cGUgKTtcblBJWEkuUkdCU3BsaXRGaWx0ZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gUElYSS5SR0JTcGxpdEZpbHRlcjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KFBJWEkuUkdCU3BsaXRGaWx0ZXIucHJvdG90eXBlLCAnYW5nbGUnLCB7XG4gICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5pZm9ybXMuYmx1ci52YWx1ZSAvICgxLzcwMDApO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgIFx0Ly90aGlzLnBhZGRpbmcgPSB2YWx1ZTtcbiAgICBcdHRoaXMudW5pZm9ybXMuYmx1ci52YWx1ZSA9ICgxLzcwMDApICogdmFsdWU7XG4gICAgfVxufSk7XG5cbi8qKlxuICogQGF1dGhvciBNYXQgR3JvdmVzIGh0dHA6Ly9tYXRncm92ZXMuY29tLyBARG9vcm1hdDIzXG4gKi9cblxuICAgIGlmICh0eXBlb2YgZXhwb3J0cyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnICYmIG1vZHVsZS5leHBvcnRzKSB7XG4gICAgICAgICAgICBleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBQSVhJO1xuICAgICAgICB9XG4gICAgICAgIGV4cG9ydHMuUElYSSA9IFBJWEk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZGVmaW5lICE9PSAndW5kZWZpbmVkJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgICAgIGRlZmluZShQSVhJKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByb290LlBJWEkgPSBQSVhJO1xuICAgIH1cbn0pLmNhbGwodGhpcyk7XG4vL0Agc291cmNlTWFwcGluZ1VSTD1waXhpLmRldi5qcy5tYXAiLCJyZXF1aXJlKCdlczUtc2hpbWlmeScpXG5cbnJlcXVpcmUoJ3NwaW5lJylcbnJlcXVpcmUoJ3NwaW5lL2xpYi9sb2NhbCcpXG5yZXF1aXJlKCdzcGluZS9saWIvbWFuYWdlcicpXG5yZXF1aXJlKCdzcGluZS9saWIvcm91dGUnKVxuXG5yZXF1aXJlKCcuL3NwaW5lLmFqYXgnKVxucmVxdWlyZSgnLi9zcGluZS5hd2FpdGFqYXgnKVxuXG5cbndpbmRvdy5NYXRoMiA9IHJlcXVpcmUoJy4vTWF0aDInKVxuXG4kIC0+XG4gIHJldHVybiBpZiB3aW5kb3cuYXBwXG4gIEFwcCA9IHJlcXVpcmUgXCIuLi9waXhpanMtcGxheWdyb3VuZFwiXG4gIHdpbmRvdy5hcHAgPSBuZXcgQXBwIGVsOiAkIFwiYm9keVwiXG4iLCJTcGluZSAgID0gQFNwaW5lIG9yIHJlcXVpcmUgXCJzcGluZVwiXG57TW9kZWx9ID0gU3BpbmVcbiMge1BpcGVsaW5lcn0gPSByZXF1aXJlICcvbGliL2ljZWRsaWInXG5cblxuQWpheCA9XG4gIGdldFVSTDogKG9iamVjdCkgLT5cbiAgICBvYmplY3QgYW5kIG9iamVjdC51cmw/KCkgb3Igb2JqZWN0LnVybFxuXG4gIGVuYWJsZWQ6IHRydWVcblxuICBkaXNhYmxlOiAoY2FsbGJhY2spIC0+XG4gICAgaWYgQGVuYWJsZWRcbiAgICAgIEBlbmFibGVkID0gZmFsc2VcbiAgICAgIHRyeVxuICAgICAgICBkbyBjYWxsYmFja1xuICAgICAgY2F0Y2ggZVxuICAgICAgICB0aHJvdyBlXG4gICAgICBmaW5hbGx5XG4gICAgICAgIEBlbmFibGVkID0gdHJ1ZVxuICAgIGVsc2VcbiAgICAgIGRvIGNhbGxiYWNrXG5cbiAgbWF4OiAxMDBcbiAgdGhyb3R0bGU6IDBcblxuICBxdWV1ZTogKHJlcXVlc3QpIC0+XG4gICAgQHBpcGVsaW5lciBvcj0gbmV3IFBpcGVsaW5lciBAbWF4LCBAdGhyb3R0bGVcbiAgICByZXR1cm4gQHBpcGVsaW5lci5xdWV1ZSB1bmxlc3MgcmVxdWVzdFxuICAgIGF3YWl0IEBwaXBlbGluZXIud2FpdEluUXVldWUgZGVmZXIoKVxuICAgIHJlcXVlc3QgQHBpcGVsaW5lci5kZWZlcigpXG5cbiAgY2xlYXJRdWV1ZTogLT5cbiAgICBAcGlwZWxpbmVyLnF1ZXVlID0gW11cbiAgICBAcGlwZWxpbmVyLm5fb3V0ID0gMFxuXG5jbGFzcyBCYXNlXG4gIGRlZmF1bHRzOlxuICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbidcbiAgICBkYXRhVHlwZTogJ2pzb24nXG4gICAgcHJvY2Vzc0RhdGE6IGZhbHNlXG4gICAgaGVhZGVyczogeydYLVJlcXVlc3RlZC1XaXRoJzogJ1hNTEh0dHBSZXF1ZXN0J31cblxuICBxdWV1ZTogQWpheC5xdWV1ZVxuXG4gIGFqYXg6IChwYXJhbXMsIGRlZmF1bHRzKSAtPlxuICAgIG5ldyAkLmFqYXggQGFqYXhTZXR0aW5ncyhwYXJhbXMsIGRlZmF1bHRzKVxuXG4gIGFqYXhRdWV1ZTogKHBhcmFtcywgZGVmYXVsdHMpIC0+XG4gICAgeGhyID0gbnVsbFxuICAgIHJ2ICA9IG5ldyBpY2VkLlJlbmRlenZvdXNcblxuICAgIHNldHRpbmdzICAgICA9IEBhamF4U2V0dGluZ3MocGFyYW1zLCBkZWZhdWx0cylcbiAgICBkZWZlcnN1Y2Nlc3MgPSBzZXR0aW5ncy5zdWNjZXNzXG4gICAgZGVmZXJlcnJvciAgID0gc2V0dGluZ3MuZXJyb3JcblxuICAgIHNldHRpbmdzLnN1Y2Nlc3MgPSBydi5pZCgnc3VjY2VzcycpLmRlZmVyIGRhdGEsIHN0YXR1c1RleHQsIHhoclxuICAgIHNldHRpbmdzLmVycm9yICAgPSBydi5pZCgnZXJyb3InKS5kZWZlciB4aHIsIHN0YXR1c1RleHQsIGVycm9yXG5cbiAgICByZXF1ZXN0ID0gKG5leHQpIC0+XG4gICAgICB4aHIgPSBuZXcgJC5BamF4KHNldHRpbmdzKVxuICAgICAgYXdhaXQgcnYud2FpdCBkZWZlciBzdGF0dXNcbiAgICAgIHN3aXRjaCBzdGF0dXNcbiAgICAgICAgd2hlbiAnc3VjY2VzcycgdGhlbiBkZWZlcnN1Y2Nlc3MgZGF0YSwgc3RhdHVzVGV4dCwgeGhyXG4gICAgICAgIHdoZW4gJ2Vycm9yJyB0aGVuIGRlZmVyZXJyb3IgeGhyLCBzdGF0dXNUZXh0LCBlcnJvclxuICAgICAgbmV4dCgpXG5cbiAgICByZXF1ZXN0LmFib3J0ID0gKHN0YXR1c1RleHQpIC0+XG4gICAgICByZXR1cm4geGhyLmFib3J0KHN0YXR1c1RleHQpIGlmIHhoclxuICAgICAgaW5kZXggPSBAcXVldWUoKS5pbmRleE9mKHJlcXVlc3QpXG4gICAgICBAcXVldWUoKS5zcGxpY2UoaW5kZXgsIDEpIGlmIGluZGV4ID4gLTFcbiAgICAgIEFqYXgucGlwZWxpbmVyLm5fb3V0LS0gaWYgQWpheC5waXBlbGluZXJcblxuICAgICAgIyBkZWZlcnJlZC5yZWplY3RXaXRoKFxuICAgICAgIyAgIHNldHRpbmdzLmNvbnRleHQgb3Igc2V0dGluZ3MsXG4gICAgICAjICAgW3hociwgc3RhdHVzVGV4dCwgJyddXG4gICAgICAjIClcbiAgICAgIHJlcXVlc3RcblxuICAgIHJldHVybiByZXF1ZXN0IHVubGVzcyBBamF4LmVuYWJsZWRcbiAgICBAcXVldWUgcmVxdWVzdFxuICAgIHJlcXVlc3RcblxuICBhamF4U2V0dGluZ3M6IChwYXJhbXMsIGRlZmF1bHRzKSAtPlxuICAgICQuZXh0ZW5kKHt9LCBAZGVmYXVsdHMsIGRlZmF1bHRzLCBwYXJhbXMpXG5cbmNsYXNzIENvbGxlY3Rpb24gZXh0ZW5kcyBCYXNlXG4gIGNvbnN0cnVjdG9yOiAoQG1vZGVsKSAtPlxuXG4gIGZpbmQ6IChpZCwgcGFyYW1zKSAtPlxuICAgIHJlY29yZCA9IG5ldyBAbW9kZWwoaWQ6IGlkKVxuICAgIEBhamF4UXVldWUgcGFyYW1zLFxuICAgICAgdHlwZTogJ0dFVCcsXG4gICAgICB1cmw6ICBBamF4LmdldFVSTChyZWNvcmQpXG4gICAgICBzdWNjZXNzOiBAcmVjb3Jkc1Jlc3BvbnNlXG4gICAgICBlcnJvcjogQGZhaWxSZXNwb25zZVxuXG4gIGFsbDogKHBhcmFtcykgLT5cbiAgICBAYWpheFF1ZXVlIHBhcmFtcyxcbiAgICAgIHR5cGU6ICdHRVQnLFxuICAgICAgdXJsOiAgQWpheC5nZXRVUkwoQG1vZGVsKVxuICAgICAgc3VjY2VzczogQHJlY29yZHNSZXNwb25zZVxuICAgICAgZXJyb3I6IEBmYWlsUmVzcG9uc2VcblxuICBmZXRjaDogKHBhcmFtcyA9IHt9LCBvcHRpb25zID0ge30pIC0+XG4gICAgaWYgaWQgPSBwYXJhbXMuaWRcbiAgICAgIGRlbGV0ZSBwYXJhbXMuaWRcbiAgICAgIEBmaW5kKGlkLCBwYXJhbXMpLmRvbmUgKHJlY29yZCkgPT5cbiAgICAgICAgQG1vZGVsLnJlZnJlc2gocmVjb3JkLCBvcHRpb25zKVxuICAgIGVsc2VcbiAgICAgIEBhbGwocGFyYW1zKS5kb25lIChyZWNvcmRzKSA9PlxuICAgICAgICBAbW9kZWwucmVmcmVzaChyZWNvcmRzLCBvcHRpb25zKVxuXG4gICMgUHJpdmF0ZVxuXG4gIHJlY29yZHNSZXNwb25zZTogKGRhdGEsIHN0YXR1cywgeGhyKSA9PlxuICAgIEBtb2RlbC50cmlnZ2VyKCdhamF4U3VjY2VzcycsIG51bGwsIHN0YXR1cywgeGhyKVxuXG4gIGZhaWxSZXNwb25zZTogKHhociwgc3RhdHVzVGV4dCwgZXJyb3IpID0+XG4gICAgQG1vZGVsLnRyaWdnZXIoJ2FqYXhFcnJvcicsIG51bGwsIHhociwgc3RhdHVzVGV4dCwgZXJyb3IpXG5cbmNsYXNzIFNpbmdsZXRvbiBleHRlbmRzIEJhc2VcbiAgY29uc3RydWN0b3I6IChAcmVjb3JkKSAtPlxuICAgIEBtb2RlbCA9IEByZWNvcmQuY29uc3RydWN0b3JcblxuICByZWxvYWQ6IChwYXJhbXMsIG9wdGlvbnMpIC0+XG4gICAgQGFqYXhRdWV1ZSBwYXJhbXMsXG4gICAgICB0eXBlOiAnR0VUJ1xuICAgICAgdXJsOiAgQWpheC5nZXRVUkwoQHJlY29yZClcbiAgICAgIHN1Y2Nlc3M6IEByZWNvcmRSZXNwb25zZShvcHRpb25zKVxuICAgICAgZXJyb3I6IEBmYWlsUmVzcG9uc2Uob3B0aW9ucylcblxuICBjcmVhdGU6IChwYXJhbXMsIG9wdGlvbnMpIC0+XG4gICAgQGFqYXhRdWV1ZSBwYXJhbXMsXG4gICAgICB0eXBlOiAnUE9TVCdcbiAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KEByZWNvcmQpXG4gICAgICB1cmw6ICBBamF4LmdldFVSTChAbW9kZWwpXG4gICAgICBzdWNjZXNzOiBAcmVjb3JkUmVzcG9uc2Uob3B0aW9ucylcbiAgICAgIGVycm9yOiBAZmFpbFJlc3BvbnNlKG9wdGlvbnMpXG5cbiAgdXBkYXRlOiAocGFyYW1zLCBvcHRpb25zKSAtPlxuICAgIEBhamF4UXVldWUgcGFyYW1zLFxuICAgICAgdHlwZTogJ1BVVCdcbiAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KEByZWNvcmQpXG4gICAgICB1cmw6ICBBamF4LmdldFVSTChAcmVjb3JkKVxuICAgICAgc3VjY2VzczogQHJlY29yZFJlc3BvbnNlKG9wdGlvbnMpXG4gICAgICBlcnJvcjogQGZhaWxSZXNwb25zZShvcHRpb25zKVxuXG4gIGRlc3Ryb3k6IChwYXJhbXMsIG9wdGlvbnMpIC0+XG4gICAgQGFqYXhRdWV1ZSBwYXJhbXMsXG4gICAgICB0eXBlOiAnREVMRVRFJ1xuICAgICAgdXJsOiAgQWpheC5nZXRVUkwoQHJlY29yZClcbiAgICAgIHN1Y2Nlc3M6IEByZWNvcmRSZXNwb25zZShvcHRpb25zKVxuICAgICAgZXJyb3I6IEBmYWlsUmVzcG9uc2Uob3B0aW9ucylcblxuICAjIFByaXZhdGVcblxuICByZWNvcmRSZXNwb25zZTogKG9wdGlvbnMgPSB7fSkgPT5cbiAgICAoZGF0YSwgc3RhdHVzLCB4aHIpID0+XG4gICAgICBpZiBTcGluZS5pc0JsYW5rKGRhdGEpXG4gICAgICAgIGRhdGEgPSBmYWxzZVxuICAgICAgZWxzZVxuICAgICAgICBkYXRhID0gQG1vZGVsLmZyb21KU09OKGRhdGEpXG5cbiAgICAgIEFqYXguZGlzYWJsZSA9PlxuICAgICAgICBpZiBkYXRhXG4gICAgICAgICAgIyBJRCBjaGFuZ2UsIG5lZWQgdG8gZG8gc29tZSBzaGlmdGluZ1xuICAgICAgICAgIGlmIGRhdGEuaWQgYW5kIEByZWNvcmQuaWQgaXNudCBkYXRhLmlkXG4gICAgICAgICAgICBAcmVjb3JkLmNoYW5nZUlEKGRhdGEuaWQpXG5cbiAgICAgICAgICAjIFVwZGF0ZSB3aXRoIGxhdGVzdCBkYXRhXG4gICAgICAgICAgQHJlY29yZC51cGRhdGVBdHRyaWJ1dGVzKGRhdGEuYXR0cmlidXRlcygpKVxuXG4gICAgICBAcmVjb3JkLnRyaWdnZXIoJ2FqYXhTdWNjZXNzJywgZGF0YSwgc3RhdHVzLCB4aHIpXG4gICAgICBvcHRpb25zLnN1Y2Nlc3M/LmFwcGx5KEByZWNvcmQpICMgRGVwcmVjYXRlZFxuICAgICAgb3B0aW9ucy5kb25lPy5hcHBseShAcmVjb3JkKVxuXG4gIGZhaWxSZXNwb25zZTogKG9wdGlvbnMgPSB7fSkgPT5cbiAgICAoeGhyLCBzdGF0dXNUZXh0LCBlcnJvcikgPT5cbiAgICAgIEByZWNvcmQudHJpZ2dlcignYWpheEVycm9yJywgeGhyLCBzdGF0dXNUZXh0LCBlcnJvcilcbiAgICAgIG9wdGlvbnMuZXJyb3I/LmFwcGx5KEByZWNvcmQpICMgRGVwcmVjYXRlZFxuICAgICAgb3B0aW9ucy5mYWlsPy5hcHBseShAcmVjb3JkKVxuXG4jIEFqYXggZW5kcG9pbnRcbk1vZGVsLmhvc3QgPSAnJ1xuXG5JbmNsdWRlID1cbiAgYWpheDogLT4gbmV3IFNpbmdsZXRvbih0aGlzKVxuXG4gIHVybDogKGFyZ3MuLi4pIC0+XG4gICAgdXJsID0gQWpheC5nZXRVUkwoQGNvbnN0cnVjdG9yKVxuICAgIHVybCArPSAnLycgdW5sZXNzIHVybC5jaGFyQXQodXJsLmxlbmd0aCAtIDEpIGlzICcvJ1xuICAgIHVybCArPSBUaWdlci5BamF4LmVuY29kZShAaWQpXG4gICAgYXJncy51bnNoaWZ0KHVybClcbiAgICBhcmdzLmpvaW4oJy8nKVxuXG5FeHRlbmQgPVxuICBhamF4OiAtPiBuZXcgQ29sbGVjdGlvbih0aGlzKVxuXG4gIHVybDogKGFyZ3MuLi4pIC0+XG4gICAgYXJncy51bnNoaWZ0KEBjbGFzc05hbWUudG9Mb3dlckNhc2UoKSArICdzJylcbiAgICBhcmdzLnVuc2hpZnQoTW9kZWwuaG9zdClcbiAgICBhcmdzLmpvaW4oJy8nKVxuXG5Nb2RlbC5BamF4ID1cbiAgZXh0ZW5kZWQ6IC0+XG4gICAgQGZldGNoIEBhamF4RmV0Y2hcbiAgICBAY2hhbmdlIEBhamF4Q2hhbmdlXG5cbiAgICBAZXh0ZW5kIEV4dGVuZFxuICAgIEBpbmNsdWRlIEluY2x1ZGVcblxuICAjIFByaXZhdGVcblxuICBhamF4RmV0Y2g6IC0+XG4gICAgQGFqYXgoKS5mZXRjaChhcmd1bWVudHMuLi4pXG5cbiAgYWpheENoYW5nZTogKHJlY29yZCwgdHlwZSwgb3B0aW9ucyA9IHt9KSAtPlxuICAgIHJldHVybiBpZiBvcHRpb25zLmFqYXggaXMgZmFsc2VcbiAgICByZWNvcmQuYWpheCgpW3R5cGVdKG9wdGlvbnMuYWpheCwgb3B0aW9ucylcblxuTW9kZWwuQWpheC5NZXRob2RzID1cbiAgZXh0ZW5kZWQ6IC0+XG4gICAgQGV4dGVuZCBFeHRlbmRcbiAgICBAaW5jbHVkZSBJbmNsdWRlXG5cblxuIyBHbG9iYWxzXG5BamF4LmRlZmF1bHRzICAgICAgICAgICA9IEJhc2U6OmRlZmF1bHRzXG5BamF4LkJhc2UgICAgICAgICAgICAgICA9IEJhc2VcbkFqYXguU2luZ2xldG9uICAgICAgICAgID0gU2luZ2xldG9uXG5BamF4LkNvbGxlY3Rpb24gICAgICAgICA9IENvbGxlY3Rpb25cblNwaW5lLkFqYXggICAgICAgICAgICAgID0gQWpheFxuU3BpbmUuQWpheC5Nb2RlbEFkYXB0ZXIgPSBBamF4XG5TcGluZS5BamF4LlEgICAgICAgICAgICA9IEJhc2Vcbm1vZHVsZT8uZXhwb3J0cyAgICAgICAgICA9IEFqYXgiLCJTcGluZSA9IEBTcGluZSBvciByZXF1aXJlIFwic3BpbmVcIlxuXG5cbmF3YWl0QWpheCA9XG4gIGF3YWl0QWpheDogKG9wdGlvbnMsIGNiLCBxdWV1ZSA9IGZhbHNlKSAtPlxuICAgIHJ2ID0gbmV3IGljZWQuUmVuZGV6dm91cygpXG5cbiAgICBvcHRpb25zLnN1Y2Nlc3MgPSBydi5pZCgnc3VjY2VzcycpLmRlZmVyIGRhdGEsIHN0YXR1c1RleHQsIHhociAjIGRhdGEsIHN0YXR1c1RleHQsIHhoclxuICAgIG9wdGlvbnMuZXJyb3IgICA9IHJ2LmlkKCdlcnJvcicpLmRlZmVyIHhociwgc3RhdHVzVGV4dCwgZGF0YSAjIHhociwgc3RhdHVzVGV4dCwgZXJyb3JcblxuICAgIGlmIHF1ZXVlIHRoZW4gQFEuYWpheFF1ZXVlIG9wdGlvbnNcbiAgICBlbHNlIG5ldyAkLmFqYXggb3B0aW9uc1xuXG4gICAgYXdhaXQgcnYud2FpdCBkZWZlciBzdGF0dXNcbiAgICBjYiBzdGF0dXMsIHhociwgc3RhdHVzVGV4dCwgZGF0YVxuXG4gIGF3YWl0R2V0OiAob3B0aW9ucywgY2IsIHF1ZXVlKSAtPlxuICAgIG9wdGlvbnMubWV0aG9kID0gJ0dFVCdcbiAgICBAYXdhaXRBamF4IG9wdGlvbnMsIGNiLCBxdWV1ZVxuXG4gIGF3YWl0UG9zdDogKG9wdGlvbnMsIGNiLCBxdWV1ZSkgLT5cbiAgICBvcHRpb25zLm1ldGhvZCA9ICdHRVQnXG4gICAgQGF3YWl0QWpheCBvcHRpb25zLCBjYiwgcXVldWVcblxuICBhd2FpdFF1ZXVlZEFqYXg6IChvcHRpb25zLCBjYikgLT5cbiAgICBAYXdhaXRBamF4IG9wdGlvbnMsIGNiLCB0cnVlXG5cbiAgYXdhaXRRdWV1ZWRHZXQ6IChvcHRpb25zLCBjYikgLT5cbiAgICBAYXdhaXRHZXQgb3B0aW9ucywgY2IsIHRydWVcblxuICBhd2FpdFF1ZXVlZFBvc3Q6IChvcHRpb25zLCBjYikgLT5cbiAgICBAYXdhaXRQb3N0IG9wdGlvbnMsIGNiLCB0cnVlXG5cblxuU3BpbmUuQ2xhc3MuZXh0ZW5kLmNhbGwgU3BpbmUuQWpheCwgYXdhaXRBamF4XG5tb2R1bGU/LmV4cG9ydHMgPSBhd2FpdEFqYXgiLCJTcGluZSA9IHJlcXVpcmUgXCJzcGluZVwiXG5cblxubG9hZEV4YW1wbGUgPSAodXJsLCBhdXRvY2IpIC0+XG4gIGF3YWl0IFNwaW5lLkFqYXguYXdhaXRHZXQge3VybDogdXJsfSwgZGVmZXIgc3RhdHVzLCB4aHIsIHN0YXR1c1RleHQsIGRhdGFcbiAgc3dpdGNoIHN0YXR1c1xuICAgIHdoZW4gXCJlcnJvclwiIHRoZW4gXCJFcnJvciAje3N0YXR1c1RleHR9OiAje2RhdGF9XCJcbiAgICB3aGVuIFwic3VjY2Vzc1wiIHRoZW4gZGF0YVxuXG5cbmV4YW1wbGVMaXN0ID1cbiAgYnVubnk6ICAgICAgICAgXCIuL2V4YW1wbGVzL2J1bm55LmNvZmZlZVwiXG4gIFwiYnVubnktc2hvcnRcIjogXCIuL2V4YW1wbGVzL2J1bm55LXNob3J0LmNvZmZlZVwiXG4gIGRyYWdnaW5nOiAgICAgIFwiLi9leGFtcGxlcy9kcmFnZ2luZy5jb2ZmZWVcIlxuICBiYWxsczogICAgICAgICBcIi4vZXhhbXBsZXMvYmFsbHMuY29mZmVlXCJcbiAgYnVubnltYXJrOiAgICAgXCIuL2V4YW1wbGVzL2J1bm55bWFyay5jb2ZmZWVcIlxuICBtb3JwaDogICAgICAgICBcIi4vZXhhbXBsZXMvbW9ycGguY29mZmVlXCJcbiAgcHJpbWl0aXZlczogICAgXCIuL2V4YW1wbGVzL3ByaW1pdGl2ZXMuY29mZmVlXCJcbiAgcmVuZGVydGV4dHVyZTogXCIuL2V4YW1wbGVzL3JlbmRlcnRleHR1cmUuY29mZmVlXCJcbiAgdGV4dDogICAgICAgICAgXCIuL2V4YW1wbGVzL3RleHQuaWNlZFwiXG4gIGZpbHRlcnM6ICAgICAgIFwiLi9leGFtcGxlcy9maWx0ZXJzLmNvZmZlZVwiXG5cbmV4YW1wbGVzID0ge31cbmZvciBuYW1lLCBwYXRoIG9mIGV4YW1wbGVMaXN0IHRoZW4gZG8gKHBhdGgpIC0+XG4gIGV4YW1wbGVzW25hbWVdID0gKGNiKSAtPiBsb2FkRXhhbXBsZSBwYXRoLCBjYlxuXG5tb2R1bGUuZXhwb3J0cyA9IGV4YW1wbGVzIiwicmVxdWlyZSAnLi9saWIvc2V0dXAnXG5lbW9qaSAgICAgPSByZXF1aXJlICdlbW9qaS1pbWFnZXMnXG5cblNwaW5lICAgID0gcmVxdWlyZSAnc3BpbmUnXG5TdGFnZSAgICA9IHJlcXVpcmUgJy4vY29udHJvbGxlcnMvc3RhZ2UnXG5Db25zb2xlICA9IHJlcXVpcmUgJy4vY29udHJvbGxlcnMvY29uc29sZSdcbkVkaXRvciAgID0gcmVxdWlyZSAnLi9jb250cm9sbGVycy9lZGl0b3InXG5leGFtcGxlcyA9IHJlcXVpcmUgJy4vbW9kZWxzL2V4YW1wbGVzJ1xuXG5cbmVzY2FwZUhUTUwgPSAocykgLT5cbiAgcy5yZXBsYWNlKC8mL2csJyZhbXA7JykucmVwbGFjZSgvPC9nLCcmbHQ7JykucmVwbGFjZSgvPi9nLCcmZ3Q7Jyk7XG5cblxuY2xhc3MgUGxheWdyb3VuZCBleHRlbmRzIFNwaW5lLkNvbnRyb2xsZXJcbiAgbG9nUHJlZml4OiBcIihQbGF5Z3JvdW5kOkFwcClcIlxuXG4gIERFRkFVTFRfU0VUVElOR1MgPVxuICAgIGV4YW1wbGU6IFwiYnVubnltYXJrXCJcbiAgICBsYW5nOiBcImNvZmZlZVwiXG5cbiAgZWxlbWVudHM6XG4gICAgXCJhc2lkZSNvdXRwdXRcIjogXCJvdXRwdXRcIlxuICAgIFwic2VjdGlvbi5wbGF5Z3JvdW5kXCI6IFwicGxheWdyb3VuZFwiXG4gICAgXCJidXR0b24ucmVmcmVzaC1wbGF5Z3JvdW5kXCI6IFwiYnV0dG9uUmVmcmVzaFBsYXlncm91bmRcIlxuXG4gIHJlZnJlc2hQbGF5Z3JvdW5kOiAtPlxuICAgIGJ1dHRvbiA9ICQgXCJidXR0b24ucnVuXCJcbiAgICBpZiBidXR0b24uaXMgXCIuc2VsZWN0ZWRcIiB0aGVuIGJ1dHRvbi50cmlnZ2VyIFwiY2xpY2tcIiwgdGFyZ2V0OiBidXR0b25bMF1cbiAgICBAc3RhZ2UucmVmcmVzaCgpXG4gICAgQCQoXCIuZGcubWFpblwiKS5hZGQoXCIuY291bnRlclwiKS5yZW1vdmUoKVxuXG4gIHNlbGVjdEV4YW1wbGU6IChlKSAtPiBAZWRpdG9yLnJlbmRlciAkKGUudGFyZ2V0KS52YWwoKVxuXG4gIG1vdXNlZW50ZXJQbGF5Z3JvdW5kUmVmcmVzaDogICAgIC0+IEBidXR0b25SZWZyZXNoUGxheWdyb3VuZC5mYWRlSW4gMTgwIGlmIEBzdGFnZVxuICBtb3VzZWVudGVyS2VlcFBsYXlncm91bmRSZWZyZXNoOiAtPiBAYnV0dG9uUmVmcmVzaFBsYXlncm91bmQuc3RvcCh0cnVlKS5mYWRlVG8gMSwgMVxuICBtb3VzZWxlYXZlUGxheWdyb3VuZFJlZnJlc2g6ICAgICAtPiBAYnV0dG9uUmVmcmVzaFBsYXlncm91bmQuZmFkZU91dCAxODBcblxuICBldmVudHM6XG4gICAgXCJjbGljayBidXR0b24ucmVmcmVzaC1wbGF5Z3JvdW5kXCI6IFwicmVmcmVzaFBsYXlncm91bmRcIlxuICAgIFwiY2hhbmdlIHNlbGVjdC5leGFtcGxlc1wiOiBcInNlbGVjdEV4YW1wbGVcIlxuICAgIFwibW91c2VlbnRlciBzZWN0aW9uLnBsYXlncm91bmRcIjogXCJtb3VzZWVudGVyUGxheWdyb3VuZFJlZnJlc2hcIlxuICAgIFwibW91c2VlbnRlciBidXR0b24ucmVmcmVzaC1wbGF5Z3JvdW5kXCI6IFwibW91c2VlbnRlcktlZXBQbGF5Z3JvdW5kUmVmcmVzaFwiXG4gICAgXCJtb3VzZWxlYXZlIHNlY3Rpb24ucGxheWdyb3VuZFwiOiBcIm1vdXNlbGVhdmVQbGF5Z3JvdW5kUmVmcmVzaFwiXG5cbiAgY29uc3RydWN0b3I6IChvcHRpb25zLCBzZXR0aW5ncyA9IHt9KSAtPlxuICAgIHN1cGVyXG4gICAgQGxvZyBcImluaXRpYWxpemluZ1wiXG5cbiAgICBAc2V0dGluZ3MgPSAkLmV4dGVuZCh7fSwgREVGQVVMVF9TRVRUSU5HUylcblxuICAgIGlmIGxvY2FsU3RvcmFnZSBhbmQgbG9jYWxTdG9yYWdlLnNldHRpbmdzXG4gICAgICBmb3IgaywgdiBvZiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5zZXR0aW5ncylcbiAgICAgICAgQHNldHRpbmdzW2tdID0gdlxuICAgICAgICBzd2l0Y2gga1xuICAgICAgICAgIHdoZW4gXCJzY3JpcHRcIiB0aGVuIGRvICh2KSAtPlxuICAgICAgICAgICAgZXhhbXBsZXNbXCJsb2NhbC1zYXZlZFwiXSA9IChjYikgLT4gY2IgdlxuXG4gICAgZm9yIG93biBrLCB2IG9mIHNldHRpbmdzXG4gICAgICBAc2V0dGluZ3Nba10gPSB2XG5cbiAgICBleGFtcGxlbGlzdCA9IChuYW1lIGZvciBvd24gbmFtZSBvZiBleGFtcGxlcylcbiAgICBAcmVuZGVyIGV4YW1wbGVsaXN0LCBAc2V0dGluZ3MuZXhhbXBsZVxuXG4gIGluaXRTdGFnZTogLT5cbiAgICBAc3RhZ2UgPz0gbmV3IFN0YWdlIGVsOiBAcGxheWdyb3VuZFxuICAgIEBzdGFnZS5zaG93U3RhdHMoKVxuICAgIEBidXR0b25SZWZyZXNoUGxheWdyb3VuZC5zaG93KClcblxuICByZW5kZXI6IChleGFtcGxlbGlzdCA9IFtdLCBleGFtcGxlKSAtPlxuICAgIEB2aWV3ID0gKHJlcXVpcmUgXCIuL3ZpZXdzL3RlbXBsYXRlc1wiKS5pbmRleCBleGFtcGxlczogZXhhbXBsZWxpc3QsIGV4YW1wbGU6IGV4YW1wbGVcbiAgICBAdmlldyA9IGVtb2ppIEB2aWV3LCBcImltYWdlcy9lbW9qaVwiLCAyMFxuICAgIEBodG1sIEB2aWV3XG5cbiAgICBAY29uc29sZSAgPSBuZXcgQ29uc29sZSBlbDogQG91dHB1dCwgaW5wdXQ6IEAkIFwiaW5wdXQucmVwbFwiXG4gICAgQGVkaXRvciAgID0gbmV3IEVkaXRvciBlbDogQGVsLCBleGFtcGxlczogZXhhbXBsZXMsIGNvbnNvbGU6IEBjb25zb2xlXG4gICAgQGVkaXRvci5vbiBcInByZXNhdmVcIiwgQHByb3h5IEBpbml0U3RhZ2VcbiAgICBAZWRpdG9yLm9uIFwibGFuZ2NoYW5nZVwiLCBAY29uc29sZS5wcm94eSBAY29uc29sZS5sYW5nXG4gICAgQGVkaXRvci5sYW5nIEBzZXR0aW5ncy5sYW5nXG5cbiAgICBAcmVmcmVzaFBsYXlncm91bmQoKSBpZiBAc3RhZ2VcbiAgICBAZWRpdG9yLnJlbmRlciBleGFtcGxlIHVubGVzcyBAc2V0dGluZ3Muc2NyaXB0IGFuZCBAc2V0dGluZ3Muc2NyaXB0LnRyaW0oKSBpc250IFwiXCJcblxuICBsYW5nQ2hhbmdlOiAobmFtZSkgLT4gQHNldHRpbmdzLmxhbmcgPSBuYW1lXG5cblxubW9kdWxlLmV4cG9ydHMgPSBQbGF5Z3JvdW5kXG4iLCJ2YXIgamFkZSA9IHJlcXVpcmUoJ0BsdWtla2FycnlzL2phZGUtcnVudGltZScpO1xuXG52YXIgdGVtcGxhdGl6ZXIgPSB7fTtcblxuXG5cbi8vIGhlbHAuamFkZSBjb21waWxlZCB0ZW1wbGF0ZVxudGVtcGxhdGl6ZXJbXCJoZWxwXCJdID0gZnVuY3Rpb24gdG1wbF9oZWxwKCkge1xuICAgIHJldHVybiAnPGFzaWRlIGlkPVwiaGVscFwiPjxoND5FZGl0b3I8L2g0PjxkbD48ZHQ+OmljZWNyZWFtOjwvZHQ+PGRkPnN3aXRjaCBjb2RlIHRvIHZhbmlsbGEgSlMgKGNvbXBpbGVzKTwvZGQ+PGR0Pjpjb2ZmZWU6PC9kdD48ZGQ+c3dpdGNoIGNvZGUgdG8gSWNlZCBDb2ZmZWVTY3JpcHQgKGRvZXMgbm90IGNvbXBpbGUpPC9kZD48ZHQ+PGJ1dHRvbiBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tcmVmcmVzaFwiPjwvYnV0dG9uPjwvZHQ+PGRkPlJlZnJlc2ggZXhhbXBsZSBmcm9tIENvZmZlZVNjcmlwdCBzb3VyY2U8L2RkPjxkdD48YnV0dG9uIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1mbG9wcHktZGlza1wiPjwvYnV0dG9uPjwvZHQ+PGRkPlNhdmUgc2NyaXB0IGFuZCBhc3NldHMgdG8gaW4tYnJvd3NlciBMb2NhbCBTdG9yYWdlPC9kZD48L2RsPjxoND5TdGFnZS9DYW52YXM8L2g0PjxkbD48ZHQ+PGJ1dHRvbiBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tcmVmcmVzaFwiPjwvYnV0dG9uPjwvZHQ+PGRkPlJlbW92ZSBjaGlsZHJlbiBmcm9tIHN0YWdlIChhbmQgc3RvcCBhbmltYXRpb24pPC9kZD48L2RsPjxoND5Db25zb2xlPC9oND48ZGw+PGR0PjxidXR0b24gY2xhc3M9XCJnbHlwaGljb24gZ2x5cGhpY29uLXJlZnJlc2hcIj48L2J1dHRvbj48L2R0PjxkZD5DbGVhciBjb25zb2xlPC9kZD48ZHQ+OmFycm93X3VwOjphcnJvd19kb3duOjwvZHQ+PGRkPkJyb3dzZSBSRVBMIGhpc3Rvcnk8L2RkPjxkdD46bGVmdHdhcmRzX2Fycm93X3dpdGhfaG9vazo8L2R0PjxkZD5SdW4gY29tbWFuZDwvZGQ+PC9kbD48aDQ+R2xvYmFsIHZhcmlhYmxlczwvaDQ+PGRsIGNsYXNzPVwiZ2xvYmFsc1wiPjxkdD5hcHA8L2R0PjxkZD5pbnN0YW5jZSBvZiB0aGlzIHBpeGlqcy1wbGF5Z3JvdW5kIHdlYmFwcDwvZGQ+PGR0PnN0YXRzPC9kdD48ZGQ+aW5zdGFuY2Ugb2YgTXIuIERvb2JcXCdzJm5ic3A7PGEgaHJlZj1cImh0dHBzOi8vZ2l0aHViLmNvbS9tcmRvb2Ivc3RhdHMuanNcIj5zdGF0cy5qczwvYT48L2RkPjxkdD5mcmFtZTwvZHQ+PGRkPmlkIG9mIGFuaW1hdGlvbiBmcmFtZSAodXNlZnVsIHdpdGgmbmJzcDs8dHQ+Y2FuY2VsQW5pbWF0aW9uRnJhbWUoZnJhbWUpPC90dD4pPC9kZD48ZHQ+c3RhZ2U8L2R0PjxkZD5jdXJyZW50IGluc3RhbmNlIG9mJm5ic3A7PGEgaHJlZj1cImh0dHA6Ly93d3cuZ29vZGJveWRpZ2l0YWwuY29tL3BpeGlqcy9kb2NzL2NsYXNzZXMvU3RhZ2UuaHRtbFwiPlBJWEkuU3RhZ2U8L2E+Jm5ic3A7KHdoZW4gcnVubmluZyk8L2RkPjxkdD5yZW5kZXJlcjwvZHQ+PGRkPmN1cnJlbnQgaW5zdGFuY2Ugb2YgZWl0aGVyJm5ic3A7PGEgaHJlZj1cImh0dHA6Ly93d3cuZ29vZGJveWRpZ2l0YWwuY29tL3BpeGlqcy9kb2NzL2NsYXNzZXMvV2ViR0xSZW5kZXJlci5odG1sXCI+UElYSS5XZWJHTFJlbmRlcmVyPC9hPiZuYnNwO29yJm5ic3A7PGEgaHJlZj1cImh0dHA6Ly93d3cuZ29vZGJveWRpZ2l0YWwuY29tL3BpeGlqcy9kb2NzL2NsYXNzZXMvQ2FudmFzUmVuZGVyZXIuaHRtbFwiPlBJWEkuQ2FudmFzUmVuZGVyZXI8L2E+LCBkZXBlbmRpbmcgb24gdGhlIHJlc3VsdCBvZiA8dHQ+UElYSS5hdXRvRGV0ZWN0UmVuZGVyZXI8L3R0PiAod2hlbiBydW5uaW5nKTwvZGQ+PGR0PmFuaTwvZHQ+PGRkPjxlbT4oZnVuY3Rpb24pPC9lbT4gQW5pbWF0aW9uIExvb3Agd3JhcHBlci4gU3RhcnRzL2VuZHMgc3RhdHMsIGNhbGxzIGZyYW1lIGZuLFxcbnJlbmRlcnMgZnJhbWUgdG8gc3RhZ2UsIGFuZCBsb29wcy48cHJlPmFuaTogKGxvb3BmbikgLT5cXG4gIHJlY3Vyc2l2ZWxvb3AgPSAtPlxcbiAgICBAc3RhdHMuYmVnaW4oKVxcbiAgICBsb29wZm4oKVxcbiAgICBAcmVuZGVyZXIucmVuZGVyIEBzdGFnZVxcbiAgICB3aW5kb3cuZnJhbWUgPSByZXF1ZXN0QW5pbUZyYW1lIHJlY3Vyc2l2ZWxvb3BcXG4gICAgQHN0YXRzLmVuZCgpXFxuICB3aW5kb3cuZnJhbWUgPSByZXF1ZXN0QW5pbUZyYW1lIHJlY3Vyc2l2ZWxvb3A8L3ByZT48L2RkPjxhIGhyZWY9XCJodHRwczovL2dpdGh1Yi5jb20vbmV4dG9yaWdpbi9waXhpanMtcGxheWdyb3VuZFwiIGNsYXNzPVwiZm9ya21lXCI+PGltZyBzcmM9XCJodHRwczovL3MzLmFtYXpvbmF3cy5jb20vZ2l0aHViL3JpYmJvbnMvZm9ya21lX3JpZ2h0X2RhcmtibHVlXzEyMTYyMS5wbmdcIiBhbHQ9XCJGb3JrIG1lIG9uIEdpdEh1YlwiLz48L2E+PC9kbD48L2FzaWRlPic7XG59O1xuXG4vLyBpbmRleC5qYWRlIGNvbXBpbGVkIHRlbXBsYXRlXG50ZW1wbGF0aXplcltcImluZGV4XCJdID0gZnVuY3Rpb24gdG1wbF9pbmRleChsb2NhbHMpIHtcbiAgICB2YXIgYnVmID0gW107XG4gICAgdmFyIGphZGVfbWl4aW5zID0ge307XG4gICAgdmFyIGphZGVfaW50ZXJwO1xuICAgIHZhciBsb2NhbHNfZm9yX3dpdGggPSBsb2NhbHMgfHwge307XG4gICAgKGZ1bmN0aW9uKGV4YW1wbGUsIGV4YW1wbGVzLCB1bmRlZmluZWQpIHtcbiAgICAgICAgYnVmLnB1c2goJzxoZWFkZXI+PGgyPlBpeGkuanMgUGxheWdyb3VuZDwvaDI+PC9oZWFkZXI+PHNlY3Rpb24gY2xhc3M9XCJwbGF5Z3JvdW5kXCI+PC9zZWN0aW9uPjxidXR0b24gY2xhc3M9XCJyZWZyZXNoLXBsYXlncm91bmQgZ2x5cGhpY29uIGdseXBoaWNvbi1yZWZyZXNoXCI+PC9idXR0b24+PGFzaWRlIGlkPVwib3V0cHV0XCI+PC9hc2lkZT48aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cInJlcGxcIi8+PHNwYW4gY2xhc3M9XCJjb25zb2xlLWxhYmVsXCI+Q29uc29sZTwvc3Bhbj48dGV4dGFyZWEgdmFsdWU9XCIvLyBQaXhpLmpzIFBsYXlncm91bmRcIiBjbGFzcz1cInNhbmRib3hcIj48L3RleHRhcmVhPjxzZWxlY3QgY2xhc3M9XCJleGFtcGxlc1wiPicpO1xuICAgICAgICAoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgJCRvYmogPSBleGFtcGxlcztcbiAgICAgICAgICAgIGlmIChcIm51bWJlclwiID09IHR5cGVvZiAkJG9iai5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciAkaW5kZXggPSAwLCAkJGwgPSAkJG9iai5sZW5ndGg7ICRpbmRleCA8ICQkbDsgJGluZGV4KyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5hbWUgPSAkJG9ialskaW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICBidWYucHVzaChcIjxvcHRpb25cIiArIGphZGUuYXR0cihcInZhbHVlXCIsIG5hbWUsIHRydWUsIGZhbHNlKSArIGphZGUuYXR0cihcInNlbGVjdGVkXCIsIGV4YW1wbGUgPT0gbmFtZSwgdHJ1ZSwgZmFsc2UpICsgXCI+XCIgKyBqYWRlLmVzY2FwZSgoamFkZV9pbnRlcnAgPSBuYW1lKSA9PSBudWxsID8gXCJcIiA6IGphZGVfaW50ZXJwKSArIFwiPC9vcHRpb24+XCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyICQkbCA9IDA7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgJGluZGV4IGluICQkb2JqKSB7XG4gICAgICAgICAgICAgICAgICAgICQkbCsrO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbmFtZSA9ICQkb2JqWyRpbmRleF07XG4gICAgICAgICAgICAgICAgICAgIGJ1Zi5wdXNoKFwiPG9wdGlvblwiICsgamFkZS5hdHRyKFwidmFsdWVcIiwgbmFtZSwgdHJ1ZSwgZmFsc2UpICsgamFkZS5hdHRyKFwic2VsZWN0ZWRcIiwgZXhhbXBsZSA9PSBuYW1lLCB0cnVlLCBmYWxzZSkgKyBcIj5cIiArIGphZGUuZXNjYXBlKChqYWRlX2ludGVycCA9IG5hbWUpID09IG51bGwgPyBcIlwiIDogamFkZV9pbnRlcnApICsgXCI8L29wdGlvbj5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KS5jYWxsKHRoaXMpO1xuICAgICAgICBidWYucHVzaCgnPC9zZWxlY3Q+PGJ1dHRvbiBjbGFzcz1cInJ1blwiPlJ1biE8L2J1dHRvbj48bmF2IGNsYXNzPVwic2FuZGJveFwiPjxidXR0b24gY2xhc3M9XCJoZWxwIGdseXBoaWNvbiBnbHlwaGljb24tcXVlc3Rpb24tc2lnblwiPjwvYnV0dG9uPjxidXR0b24gY2xhc3M9XCJzYXZlIGdseXBoaWNvbiBnbHlwaGljb24tZmxvcHB5LWRpc2tcIj48L2J1dHRvbj48YnV0dG9uIGNsYXNzPVwibGFuZ3N3aXRjaC1jb2ZmZWUgc2VsZWN0ZWRcIj46Y29mZmVlOjwvYnV0dG9uPjxidXR0b24gY2xhc3M9XCJsYW5nc3dpdGNoLXZhbmlsbGFcIj46aWNlY3JlYW06PC9idXR0b24+PGJ1dHRvbiBjbGFzcz1cInJlZnJlc2gtZXhhbXBsZSBnbHlwaGljb24gZ2x5cGhpY29uLXJlZnJlc2hcIj48L2J1dHRvbj48L25hdj48YXNpZGUgaWQ9XCJoZWxwXCI+PGg0PkVkaXRvcjwvaDQ+PGRsPjxkdD46aWNlY3JlYW06PC9kdD48ZGQ+c3dpdGNoIGNvZGUgdG8gdmFuaWxsYSBKUyAoY29tcGlsZXMpPC9kZD48ZHQ+OmNvZmZlZTo8L2R0PjxkZD5zd2l0Y2ggY29kZSB0byBJY2VkIENvZmZlZVNjcmlwdCAoZG9lcyBub3QgY29tcGlsZSk8L2RkPjxkdD48YnV0dG9uIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1yZWZyZXNoXCI+PC9idXR0b24+PC9kdD48ZGQ+UmVmcmVzaCBleGFtcGxlIGZyb20gQ29mZmVlU2NyaXB0IHNvdXJjZTwvZGQ+PGR0PjxidXR0b24gY2xhc3M9XCJnbHlwaGljb24gZ2x5cGhpY29uLWZsb3BweS1kaXNrXCI+PC9idXR0b24+PC9kdD48ZGQ+U2F2ZSBzY3JpcHQgYW5kIGFzc2V0cyB0byBpbi1icm93c2VyIExvY2FsIFN0b3JhZ2U8L2RkPjwvZGw+PGg0PlN0YWdlL0NhbnZhczwvaDQ+PGRsPjxkdD48YnV0dG9uIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1yZWZyZXNoXCI+PC9idXR0b24+PC9kdD48ZGQ+UmVtb3ZlIGNoaWxkcmVuIGZyb20gc3RhZ2UgKGFuZCBzdG9wIGFuaW1hdGlvbik8L2RkPjwvZGw+PGg0PkNvbnNvbGU8L2g0PjxkbD48ZHQ+PGJ1dHRvbiBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tcmVmcmVzaFwiPjwvYnV0dG9uPjwvZHQ+PGRkPkNsZWFyIGNvbnNvbGU8L2RkPjxkdD46YXJyb3dfdXA6OmFycm93X2Rvd246PC9kdD48ZGQ+QnJvd3NlIFJFUEwgaGlzdG9yeTwvZGQ+PGR0PjpsZWZ0d2FyZHNfYXJyb3dfd2l0aF9ob29rOjwvZHQ+PGRkPlJ1biBjb21tYW5kPC9kZD48L2RsPjxoND5HbG9iYWwgdmFyaWFibGVzPC9oND48ZGwgY2xhc3M9XCJnbG9iYWxzXCI+PGR0PmFwcDwvZHQ+PGRkPmluc3RhbmNlIG9mIHRoaXMgcGl4aWpzLXBsYXlncm91bmQgd2ViYXBwPC9kZD48ZHQ+c3RhdHM8L2R0PjxkZD5pbnN0YW5jZSBvZiBNci4gRG9vYlxcJ3MmbmJzcDs8YSBocmVmPVwiaHR0cHM6Ly9naXRodWIuY29tL21yZG9vYi9zdGF0cy5qc1wiPnN0YXRzLmpzPC9hPjwvZGQ+PGR0PmZyYW1lPC9kdD48ZGQ+aWQgb2YgYW5pbWF0aW9uIGZyYW1lICh1c2VmdWwgd2l0aCZuYnNwOzx0dD5jYW5jZWxBbmltYXRpb25GcmFtZShmcmFtZSk8L3R0Pik8L2RkPjxkdD5zdGFnZTwvZHQ+PGRkPmN1cnJlbnQgaW5zdGFuY2Ugb2YmbmJzcDs8YSBocmVmPVwiaHR0cDovL3d3dy5nb29kYm95ZGlnaXRhbC5jb20vcGl4aWpzL2RvY3MvY2xhc3Nlcy9TdGFnZS5odG1sXCI+UElYSS5TdGFnZTwvYT4mbmJzcDsod2hlbiBydW5uaW5nKTwvZGQ+PGR0PnJlbmRlcmVyPC9kdD48ZGQ+Y3VycmVudCBpbnN0YW5jZSBvZiBlaXRoZXImbmJzcDs8YSBocmVmPVwiaHR0cDovL3d3dy5nb29kYm95ZGlnaXRhbC5jb20vcGl4aWpzL2RvY3MvY2xhc3Nlcy9XZWJHTFJlbmRlcmVyLmh0bWxcIj5QSVhJLldlYkdMUmVuZGVyZXI8L2E+Jm5ic3A7b3ImbmJzcDs8YSBocmVmPVwiaHR0cDovL3d3dy5nb29kYm95ZGlnaXRhbC5jb20vcGl4aWpzL2RvY3MvY2xhc3Nlcy9DYW52YXNSZW5kZXJlci5odG1sXCI+UElYSS5DYW52YXNSZW5kZXJlcjwvYT4sIGRlcGVuZGluZyBvbiB0aGUgcmVzdWx0IG9mIDx0dD5QSVhJLmF1dG9EZXRlY3RSZW5kZXJlcjwvdHQ+ICh3aGVuIHJ1bm5pbmcpPC9kZD48ZHQ+YW5pPC9kdD48ZGQ+PGVtPihmdW5jdGlvbik8L2VtPiBBbmltYXRpb24gTG9vcCB3cmFwcGVyLiBTdGFydHMvZW5kcyBzdGF0cywgY2FsbHMgZnJhbWUgZm4sXFxucmVuZGVycyBmcmFtZSB0byBzdGFnZSwgYW5kIGxvb3BzLjxwcmU+YW5pOiAobG9vcGZuKSAtPlxcbiAgcmVjdXJzaXZlbG9vcCA9IC0+XFxuICAgIEBzdGF0cy5iZWdpbigpXFxuICAgIGxvb3BmbigpXFxuICAgIEByZW5kZXJlci5yZW5kZXIgQHN0YWdlXFxuICAgIHdpbmRvdy5mcmFtZSA9IHJlcXVlc3RBbmltRnJhbWUgcmVjdXJzaXZlbG9vcFxcbiAgICBAc3RhdHMuZW5kKClcXG4gIHdpbmRvdy5mcmFtZSA9IHJlcXVlc3RBbmltRnJhbWUgcmVjdXJzaXZlbG9vcDwvcHJlPjwvZGQ+PGEgaHJlZj1cImh0dHBzOi8vZ2l0aHViLmNvbS9uZXh0b3JpZ2luL3BpeGlqcy1wbGF5Z3JvdW5kXCIgY2xhc3M9XCJmb3JrbWVcIj48aW1nIHNyYz1cImh0dHBzOi8vczMuYW1hem9uYXdzLmNvbS9naXRodWIvcmliYm9ucy9mb3JrbWVfcmlnaHRfZGFya2JsdWVfMTIxNjIxLnBuZ1wiIGFsdD1cIkZvcmsgbWUgb24gR2l0SHViXCIvPjwvYT48L2RsPjwvYXNpZGU+PGEgaWQ9XCJwaXhpXCIgaHJlZj1cIi8vcGl4aWpzLmNvbVwiPjwvYT48Zm9vdGVyPjxoMz5kcmFnIGZpbGVzIGhlcmU8L2gzPjxzcGFuPiZjb3B5OyAyMDEzIC0gMjAxNiZuYnNwOzxhIGhyZWY9XCJodHRwOi8vbmV4dG9yaWcuaW5cIj5OZXh0IE9yaWdpbjwvYT48L3NwYW4+PC9mb290ZXI+Jyk7XG4gICAgfSkuY2FsbCh0aGlzLCBcImV4YW1wbGVcIiBpbiBsb2NhbHNfZm9yX3dpdGggPyBsb2NhbHNfZm9yX3dpdGguZXhhbXBsZSA6IHR5cGVvZiBleGFtcGxlICE9PSBcInVuZGVmaW5lZFwiID8gZXhhbXBsZSA6IHVuZGVmaW5lZCwgXCJleGFtcGxlc1wiIGluIGxvY2Fsc19mb3Jfd2l0aCA/IGxvY2Fsc19mb3Jfd2l0aC5leGFtcGxlcyA6IHR5cGVvZiBleGFtcGxlcyAhPT0gXCJ1bmRlZmluZWRcIiA/IGV4YW1wbGVzIDogdW5kZWZpbmVkLCBcInVuZGVmaW5lZFwiIGluIGxvY2Fsc19mb3Jfd2l0aCA/IGxvY2Fsc19mb3Jfd2l0aC51bmRlZmluZWQgOiB0eXBlb2YgdW5kZWZpbmVkICE9PSBcInVuZGVmaW5lZFwiID8gdW5kZWZpbmVkIDogdW5kZWZpbmVkKTtcbiAgICByZXR1cm4gYnVmLmpvaW4oXCJcIik7XG59O1xuXG5cbm1vZHVsZS5leHBvcnRzID0gdGVtcGxhdGl6ZXI7XG4iLCIvKipcbiAqIEBhdXRob3Igc29sZSAvIGh0dHA6Ly9zb2xlZGFkcGVuYWRlcy5jb21cbiAqIEBhdXRob3IgbXJkb29iIC8gaHR0cDovL21yZG9vYi5jb21cbiAqIEBhdXRob3IgUm9iZXJ0IEVpc2VsZSAvIGh0dHA6Ly93d3cueGFyZy5vcmdcbiAqIEBhdXRob3IgUGhpbGlwcGUgLyBodHRwOi8vcGhpbGlwcGUuZWxzYXNzLm1lXG4gKiBAYXV0aG9yIFJvYmVydCBQZW5uZXIgLyBodHRwOi8vd3d3LnJvYmVydHBlbm5lci5jb20vZWFzaW5nX3Rlcm1zX29mX3VzZS5odG1sXG4gKiBAYXV0aG9yIFBhdWwgTGV3aXMgLyBodHRwOi8vd3d3LmFlcm90d2lzdC5jb20vXG4gKiBAYXV0aG9yIGxlY2hlY2FjaGFycm9cbiAqIEBhdXRob3IgSm9zaCBGYXVsIC8gaHR0cDovL2pvY2FmYS5jb20vXG4gKiBAYXV0aG9yIGVncmFldGhlciAvIGh0dHA6Ly9lZ3JhZXRoZXIuY29tL1xuICogQGF1dGhvciBlbmRlbCAvIGh0dHA6Ly9lbmRlbC5tZVxuICogQGF1dGhvciBCZW4gRGVsYXJyZSAvIGh0dHA6Ly9kZWxhcnJlLm5ldFxuICovXG5cbi8vIERhdGUubm93IHNoaW0gZm9yIChhaGVtKSBJbnRlcm5ldCBFeHBsbyhkfHIpZXJcbmlmICggRGF0ZS5ub3cgPT09IHVuZGVmaW5lZCApIHtcblxuXHREYXRlLm5vdyA9IGZ1bmN0aW9uICgpIHtcblxuXHRcdHJldHVybiBuZXcgRGF0ZSgpLnZhbHVlT2YoKTtcblxuXHR9O1xuXG59XG5cbnZhciBUV0VFTiA9IFRXRUVOIHx8ICggZnVuY3Rpb24gKCkge1xuXG5cdHZhciBfdHdlZW5zID0gW107XG5cblx0cmV0dXJuIHtcblxuXHRcdFJFVklTSU9OOiAnMTInLFxuXG5cdFx0Z2V0QWxsOiBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdHJldHVybiBfdHdlZW5zO1xuXG5cdFx0fSxcblxuXHRcdHJlbW92ZUFsbDogZnVuY3Rpb24gKCkge1xuXG5cdFx0XHRfdHdlZW5zID0gW107XG5cblx0XHR9LFxuXG5cdFx0YWRkOiBmdW5jdGlvbiAoIHR3ZWVuICkge1xuXG5cdFx0XHRfdHdlZW5zLnB1c2goIHR3ZWVuICk7XG5cblx0XHR9LFxuXG5cdFx0cmVtb3ZlOiBmdW5jdGlvbiAoIHR3ZWVuICkge1xuXG5cdFx0XHR2YXIgaSA9IF90d2VlbnMuaW5kZXhPZiggdHdlZW4gKTtcblxuXHRcdFx0aWYgKCBpICE9PSAtMSApIHtcblxuXHRcdFx0XHRfdHdlZW5zLnNwbGljZSggaSwgMSApO1xuXG5cdFx0XHR9XG5cblx0XHR9LFxuXG5cdFx0dXBkYXRlOiBmdW5jdGlvbiAoIHRpbWUgKSB7XG5cblx0XHRcdGlmICggX3R3ZWVucy5sZW5ndGggPT09IDAgKSByZXR1cm4gZmFsc2U7XG5cblx0XHRcdHZhciBpID0gMDtcblxuXHRcdFx0dGltZSA9IHRpbWUgIT09IHVuZGVmaW5lZCA/IHRpbWUgOiAoIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5wZXJmb3JtYW5jZSAhPT0gdW5kZWZpbmVkICYmIHdpbmRvdy5wZXJmb3JtYW5jZS5ub3cgIT09IHVuZGVmaW5lZCA/IHdpbmRvdy5wZXJmb3JtYW5jZS5ub3coKSA6IERhdGUubm93KCkgKTtcblxuXHRcdFx0d2hpbGUgKCBpIDwgX3R3ZWVucy5sZW5ndGggKSB7XG5cblx0XHRcdFx0aWYgKCBfdHdlZW5zWyBpIF0udXBkYXRlKCB0aW1lICkgKSB7XG5cblx0XHRcdFx0XHRpKys7XG5cblx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdF90d2VlbnMuc3BsaWNlKCBpLCAxICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiB0cnVlO1xuXG5cdFx0fVxuXHR9O1xuXG59ICkoKTtcblxuVFdFRU4uVHdlZW4gPSBmdW5jdGlvbiAoIG9iamVjdCApIHtcblxuXHR2YXIgX29iamVjdCA9IG9iamVjdDtcblx0dmFyIF92YWx1ZXNTdGFydCA9IHt9O1xuXHR2YXIgX3ZhbHVlc0VuZCA9IHt9O1xuXHR2YXIgX3ZhbHVlc1N0YXJ0UmVwZWF0ID0ge307XG5cdHZhciBfZHVyYXRpb24gPSAxMDAwO1xuXHR2YXIgX3JlcGVhdCA9IDA7XG5cdHZhciBfeW95byA9IGZhbHNlO1xuXHR2YXIgX2lzUGxheWluZyA9IGZhbHNlO1xuXHR2YXIgX3JldmVyc2VkID0gZmFsc2U7XG5cdHZhciBfZGVsYXlUaW1lID0gMDtcblx0dmFyIF9zdGFydFRpbWUgPSBudWxsO1xuXHR2YXIgX2Vhc2luZ0Z1bmN0aW9uID0gVFdFRU4uRWFzaW5nLkxpbmVhci5Ob25lO1xuXHR2YXIgX2ludGVycG9sYXRpb25GdW5jdGlvbiA9IFRXRUVOLkludGVycG9sYXRpb24uTGluZWFyO1xuXHR2YXIgX2NoYWluZWRUd2VlbnMgPSBbXTtcblx0dmFyIF9vblN0YXJ0Q2FsbGJhY2sgPSBudWxsO1xuXHR2YXIgX29uU3RhcnRDYWxsYmFja0ZpcmVkID0gZmFsc2U7XG5cdHZhciBfb25VcGRhdGVDYWxsYmFjayA9IG51bGw7XG5cdHZhciBfb25Db21wbGV0ZUNhbGxiYWNrID0gbnVsbDtcblxuXHQvLyBTZXQgYWxsIHN0YXJ0aW5nIHZhbHVlcyBwcmVzZW50IG9uIHRoZSB0YXJnZXQgb2JqZWN0XG5cdGZvciAoIHZhciBmaWVsZCBpbiBvYmplY3QgKSB7XG5cblx0XHRfdmFsdWVzU3RhcnRbIGZpZWxkIF0gPSBwYXJzZUZsb2F0KG9iamVjdFtmaWVsZF0sIDEwKTtcblxuXHR9XG5cblx0dGhpcy50byA9IGZ1bmN0aW9uICggcHJvcGVydGllcywgZHVyYXRpb24gKSB7XG5cblx0XHRpZiAoIGR1cmF0aW9uICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdF9kdXJhdGlvbiA9IGR1cmF0aW9uO1xuXG5cdFx0fVxuXG5cdFx0X3ZhbHVlc0VuZCA9IHByb3BlcnRpZXM7XG5cblx0XHRyZXR1cm4gdGhpcztcblxuXHR9O1xuXG5cdHRoaXMuc3RhcnQgPSBmdW5jdGlvbiAoIHRpbWUgKSB7XG5cblx0XHRUV0VFTi5hZGQoIHRoaXMgKTtcblxuXHRcdF9pc1BsYXlpbmcgPSB0cnVlO1xuXG5cdFx0X29uU3RhcnRDYWxsYmFja0ZpcmVkID0gZmFsc2U7XG5cblx0XHRfc3RhcnRUaW1lID0gdGltZSAhPT0gdW5kZWZpbmVkID8gdGltZSA6ICggdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LnBlcmZvcm1hbmNlICE9PSB1bmRlZmluZWQgJiYgd2luZG93LnBlcmZvcm1hbmNlLm5vdyAhPT0gdW5kZWZpbmVkID8gd2luZG93LnBlcmZvcm1hbmNlLm5vdygpIDogRGF0ZS5ub3coKSApO1xuXHRcdF9zdGFydFRpbWUgKz0gX2RlbGF5VGltZTtcblxuXHRcdGZvciAoIHZhciBwcm9wZXJ0eSBpbiBfdmFsdWVzRW5kICkge1xuXG5cdFx0XHQvLyBjaGVjayBpZiBhbiBBcnJheSB3YXMgcHJvdmlkZWQgYXMgcHJvcGVydHkgdmFsdWVcblx0XHRcdGlmICggX3ZhbHVlc0VuZFsgcHJvcGVydHkgXSBpbnN0YW5jZW9mIEFycmF5ICkge1xuXG5cdFx0XHRcdGlmICggX3ZhbHVlc0VuZFsgcHJvcGVydHkgXS5sZW5ndGggPT09IDAgKSB7XG5cblx0XHRcdFx0XHRjb250aW51ZTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gY3JlYXRlIGEgbG9jYWwgY29weSBvZiB0aGUgQXJyYXkgd2l0aCB0aGUgc3RhcnQgdmFsdWUgYXQgdGhlIGZyb250XG5cdFx0XHRcdF92YWx1ZXNFbmRbIHByb3BlcnR5IF0gPSBbIF9vYmplY3RbIHByb3BlcnR5IF0gXS5jb25jYXQoIF92YWx1ZXNFbmRbIHByb3BlcnR5IF0gKTtcblxuXHRcdFx0fVxuXG5cdFx0XHRfdmFsdWVzU3RhcnRbIHByb3BlcnR5IF0gPSBfb2JqZWN0WyBwcm9wZXJ0eSBdO1xuXG5cdFx0XHRpZiggKCBfdmFsdWVzU3RhcnRbIHByb3BlcnR5IF0gaW5zdGFuY2VvZiBBcnJheSApID09PSBmYWxzZSApIHtcblx0XHRcdFx0X3ZhbHVlc1N0YXJ0WyBwcm9wZXJ0eSBdICo9IDEuMDsgLy8gRW5zdXJlcyB3ZSdyZSB1c2luZyBudW1iZXJzLCBub3Qgc3RyaW5nc1xuXHRcdFx0fVxuXG5cdFx0XHRfdmFsdWVzU3RhcnRSZXBlYXRbIHByb3BlcnR5IF0gPSBfdmFsdWVzU3RhcnRbIHByb3BlcnR5IF0gfHwgMDtcblxuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzO1xuXG5cdH07XG5cblx0dGhpcy5zdG9wID0gZnVuY3Rpb24gKCkge1xuXG5cdFx0aWYgKCAhX2lzUGxheWluZyApIHtcblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH1cblxuXHRcdFRXRUVOLnJlbW92ZSggdGhpcyApO1xuXHRcdF9pc1BsYXlpbmcgPSBmYWxzZTtcblx0XHR0aGlzLnN0b3BDaGFpbmVkVHdlZW5zKCk7XG5cdFx0cmV0dXJuIHRoaXM7XG5cblx0fTtcblxuXHR0aGlzLnN0b3BDaGFpbmVkVHdlZW5zID0gZnVuY3Rpb24gKCkge1xuXG5cdFx0Zm9yICggdmFyIGkgPSAwLCBudW1DaGFpbmVkVHdlZW5zID0gX2NoYWluZWRUd2VlbnMubGVuZ3RoOyBpIDwgbnVtQ2hhaW5lZFR3ZWVuczsgaSsrICkge1xuXG5cdFx0XHRfY2hhaW5lZFR3ZWVuc1sgaSBdLnN0b3AoKTtcblxuXHRcdH1cblxuXHR9O1xuXG5cdHRoaXMuZGVsYXkgPSBmdW5jdGlvbiAoIGFtb3VudCApIHtcblxuXHRcdF9kZWxheVRpbWUgPSBhbW91bnQ7XG5cdFx0cmV0dXJuIHRoaXM7XG5cblx0fTtcblxuXHR0aGlzLnJlcGVhdCA9IGZ1bmN0aW9uICggdGltZXMgKSB7XG5cblx0XHRfcmVwZWF0ID0gdGltZXM7XG5cdFx0cmV0dXJuIHRoaXM7XG5cblx0fTtcblxuXHR0aGlzLnlveW8gPSBmdW5jdGlvbiggeW95byApIHtcblxuXHRcdF95b3lvID0geW95bztcblx0XHRyZXR1cm4gdGhpcztcblxuXHR9O1xuXG5cblx0dGhpcy5lYXNpbmcgPSBmdW5jdGlvbiAoIGVhc2luZyApIHtcblxuXHRcdF9lYXNpbmdGdW5jdGlvbiA9IGVhc2luZztcblx0XHRyZXR1cm4gdGhpcztcblxuXHR9O1xuXG5cdHRoaXMuaW50ZXJwb2xhdGlvbiA9IGZ1bmN0aW9uICggaW50ZXJwb2xhdGlvbiApIHtcblxuXHRcdF9pbnRlcnBvbGF0aW9uRnVuY3Rpb24gPSBpbnRlcnBvbGF0aW9uO1xuXHRcdHJldHVybiB0aGlzO1xuXG5cdH07XG5cblx0dGhpcy5jaGFpbiA9IGZ1bmN0aW9uICgpIHtcblxuXHRcdF9jaGFpbmVkVHdlZW5zID0gYXJndW1lbnRzO1xuXHRcdHJldHVybiB0aGlzO1xuXG5cdH07XG5cblx0dGhpcy5vblN0YXJ0ID0gZnVuY3Rpb24gKCBjYWxsYmFjayApIHtcblxuXHRcdF9vblN0YXJ0Q2FsbGJhY2sgPSBjYWxsYmFjaztcblx0XHRyZXR1cm4gdGhpcztcblxuXHR9O1xuXG5cdHRoaXMub25VcGRhdGUgPSBmdW5jdGlvbiAoIGNhbGxiYWNrICkge1xuXG5cdFx0X29uVXBkYXRlQ2FsbGJhY2sgPSBjYWxsYmFjaztcblx0XHRyZXR1cm4gdGhpcztcblxuXHR9O1xuXG5cdHRoaXMub25Db21wbGV0ZSA9IGZ1bmN0aW9uICggY2FsbGJhY2sgKSB7XG5cblx0XHRfb25Db21wbGV0ZUNhbGxiYWNrID0gY2FsbGJhY2s7XG5cdFx0cmV0dXJuIHRoaXM7XG5cblx0fTtcblxuXHR0aGlzLnVwZGF0ZSA9IGZ1bmN0aW9uICggdGltZSApIHtcblxuXHRcdHZhciBwcm9wZXJ0eTtcblxuXHRcdGlmICggdGltZSA8IF9zdGFydFRpbWUgKSB7XG5cblx0XHRcdHJldHVybiB0cnVlO1xuXG5cdFx0fVxuXG5cdFx0aWYgKCBfb25TdGFydENhbGxiYWNrRmlyZWQgPT09IGZhbHNlICkge1xuXG5cdFx0XHRpZiAoIF9vblN0YXJ0Q2FsbGJhY2sgIT09IG51bGwgKSB7XG5cblx0XHRcdFx0X29uU3RhcnRDYWxsYmFjay5jYWxsKCBfb2JqZWN0ICk7XG5cblx0XHRcdH1cblxuXHRcdFx0X29uU3RhcnRDYWxsYmFja0ZpcmVkID0gdHJ1ZTtcblxuXHRcdH1cblxuXHRcdHZhciBlbGFwc2VkID0gKCB0aW1lIC0gX3N0YXJ0VGltZSApIC8gX2R1cmF0aW9uO1xuXHRcdGVsYXBzZWQgPSBlbGFwc2VkID4gMSA/IDEgOiBlbGFwc2VkO1xuXG5cdFx0dmFyIHZhbHVlID0gX2Vhc2luZ0Z1bmN0aW9uKCBlbGFwc2VkICk7XG5cblx0XHRmb3IgKCBwcm9wZXJ0eSBpbiBfdmFsdWVzRW5kICkge1xuXG5cdFx0XHR2YXIgc3RhcnQgPSBfdmFsdWVzU3RhcnRbIHByb3BlcnR5IF0gfHwgMDtcblx0XHRcdHZhciBlbmQgPSBfdmFsdWVzRW5kWyBwcm9wZXJ0eSBdO1xuXG5cdFx0XHRpZiAoIGVuZCBpbnN0YW5jZW9mIEFycmF5ICkge1xuXG5cdFx0XHRcdF9vYmplY3RbIHByb3BlcnR5IF0gPSBfaW50ZXJwb2xhdGlvbkZ1bmN0aW9uKCBlbmQsIHZhbHVlICk7XG5cblx0XHRcdH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAvLyBQYXJzZXMgcmVsYXRpdmUgZW5kIHZhbHVlcyB3aXRoIHN0YXJ0IGFzIGJhc2UgKGUuZy46ICsxMCwgLTMpXG5cdFx0XHRcdGlmICggdHlwZW9mKGVuZCkgPT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRcdFx0ZW5kID0gc3RhcnQgKyBwYXJzZUZsb2F0KGVuZCwgMTApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gcHJvdGVjdCBhZ2FpbnN0IG5vbiBudW1lcmljIHByb3BlcnRpZXMuXG4gICAgICAgICAgICAgICAgaWYgKCB0eXBlb2YoZW5kKSA9PT0gXCJudW1iZXJcIiApIHtcblx0XHRcdFx0XHRfb2JqZWN0WyBwcm9wZXJ0eSBdID0gc3RhcnQgKyAoIGVuZCAtIHN0YXJ0ICkgKiB2YWx1ZTtcblx0XHRcdFx0fVxuXG5cdFx0XHR9XG5cblx0XHR9XG5cblx0XHRpZiAoIF9vblVwZGF0ZUNhbGxiYWNrICE9PSBudWxsICkge1xuXG5cdFx0XHRfb25VcGRhdGVDYWxsYmFjay5jYWxsKCBfb2JqZWN0LCB2YWx1ZSApO1xuXG5cdFx0fVxuXG5cdFx0aWYgKCBlbGFwc2VkID09IDEgKSB7XG5cblx0XHRcdGlmICggX3JlcGVhdCA+IDAgKSB7XG5cblx0XHRcdFx0aWYoIGlzRmluaXRlKCBfcmVwZWF0ICkgKSB7XG5cdFx0XHRcdFx0X3JlcGVhdC0tO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gcmVhc3NpZ24gc3RhcnRpbmcgdmFsdWVzLCByZXN0YXJ0IGJ5IG1ha2luZyBzdGFydFRpbWUgPSBub3dcblx0XHRcdFx0Zm9yKCBwcm9wZXJ0eSBpbiBfdmFsdWVzU3RhcnRSZXBlYXQgKSB7XG5cblx0XHRcdFx0XHRpZiAoIHR5cGVvZiggX3ZhbHVlc0VuZFsgcHJvcGVydHkgXSApID09PSBcInN0cmluZ1wiICkge1xuXHRcdFx0XHRcdFx0X3ZhbHVlc1N0YXJ0UmVwZWF0WyBwcm9wZXJ0eSBdID0gX3ZhbHVlc1N0YXJ0UmVwZWF0WyBwcm9wZXJ0eSBdICsgcGFyc2VGbG9hdChfdmFsdWVzRW5kWyBwcm9wZXJ0eSBdLCAxMCk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0aWYgKF95b3lvKSB7XG5cdFx0XHRcdFx0XHR2YXIgdG1wID0gX3ZhbHVlc1N0YXJ0UmVwZWF0WyBwcm9wZXJ0eSBdO1xuXHRcdFx0XHRcdFx0X3ZhbHVlc1N0YXJ0UmVwZWF0WyBwcm9wZXJ0eSBdID0gX3ZhbHVlc0VuZFsgcHJvcGVydHkgXTtcblx0XHRcdFx0XHRcdF92YWx1ZXNFbmRbIHByb3BlcnR5IF0gPSB0bXA7XG5cdFx0XHRcdFx0XHRfcmV2ZXJzZWQgPSAhX3JldmVyc2VkO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRfdmFsdWVzU3RhcnRbIHByb3BlcnR5IF0gPSBfdmFsdWVzU3RhcnRSZXBlYXRbIHByb3BlcnR5IF07XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdF9zdGFydFRpbWUgPSB0aW1lICsgX2RlbGF5VGltZTtcblxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblxuXHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRpZiAoIF9vbkNvbXBsZXRlQ2FsbGJhY2sgIT09IG51bGwgKSB7XG5cblx0XHRcdFx0XHRfb25Db21wbGV0ZUNhbGxiYWNrLmNhbGwoIF9vYmplY3QgKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Zm9yICggdmFyIGkgPSAwLCBudW1DaGFpbmVkVHdlZW5zID0gX2NoYWluZWRUd2VlbnMubGVuZ3RoOyBpIDwgbnVtQ2hhaW5lZFR3ZWVuczsgaSsrICkge1xuXG5cdFx0XHRcdFx0X2NoYWluZWRUd2VlbnNbIGkgXS5zdGFydCggdGltZSApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cblx0XHRcdH1cblxuXHRcdH1cblxuXHRcdHJldHVybiB0cnVlO1xuXG5cdH07XG5cbn07XG5cblxuVFdFRU4uRWFzaW5nID0ge1xuXG5cdExpbmVhcjoge1xuXG5cdFx0Tm9uZTogZnVuY3Rpb24gKCBrICkge1xuXG5cdFx0XHRyZXR1cm4gaztcblxuXHRcdH1cblxuXHR9LFxuXG5cdFF1YWRyYXRpYzoge1xuXG5cdFx0SW46IGZ1bmN0aW9uICggayApIHtcblxuXHRcdFx0cmV0dXJuIGsgKiBrO1xuXG5cdFx0fSxcblxuXHRcdE91dDogZnVuY3Rpb24gKCBrICkge1xuXG5cdFx0XHRyZXR1cm4gayAqICggMiAtIGsgKTtcblxuXHRcdH0sXG5cblx0XHRJbk91dDogZnVuY3Rpb24gKCBrICkge1xuXG5cdFx0XHRpZiAoICggayAqPSAyICkgPCAxICkgcmV0dXJuIDAuNSAqIGsgKiBrO1xuXHRcdFx0cmV0dXJuIC0gMC41ICogKCAtLWsgKiAoIGsgLSAyICkgLSAxICk7XG5cblx0XHR9XG5cblx0fSxcblxuXHRDdWJpYzoge1xuXG5cdFx0SW46IGZ1bmN0aW9uICggayApIHtcblxuXHRcdFx0cmV0dXJuIGsgKiBrICogaztcblxuXHRcdH0sXG5cblx0XHRPdXQ6IGZ1bmN0aW9uICggayApIHtcblxuXHRcdFx0cmV0dXJuIC0tayAqIGsgKiBrICsgMTtcblxuXHRcdH0sXG5cblx0XHRJbk91dDogZnVuY3Rpb24gKCBrICkge1xuXG5cdFx0XHRpZiAoICggayAqPSAyICkgPCAxICkgcmV0dXJuIDAuNSAqIGsgKiBrICogaztcblx0XHRcdHJldHVybiAwLjUgKiAoICggayAtPSAyICkgKiBrICogayArIDIgKTtcblxuXHRcdH1cblxuXHR9LFxuXG5cdFF1YXJ0aWM6IHtcblxuXHRcdEluOiBmdW5jdGlvbiAoIGsgKSB7XG5cblx0XHRcdHJldHVybiBrICogayAqIGsgKiBrO1xuXG5cdFx0fSxcblxuXHRcdE91dDogZnVuY3Rpb24gKCBrICkge1xuXG5cdFx0XHRyZXR1cm4gMSAtICggLS1rICogayAqIGsgKiBrICk7XG5cblx0XHR9LFxuXG5cdFx0SW5PdXQ6IGZ1bmN0aW9uICggayApIHtcblxuXHRcdFx0aWYgKCAoIGsgKj0gMiApIDwgMSkgcmV0dXJuIDAuNSAqIGsgKiBrICogayAqIGs7XG5cdFx0XHRyZXR1cm4gLSAwLjUgKiAoICggayAtPSAyICkgKiBrICogayAqIGsgLSAyICk7XG5cblx0XHR9XG5cblx0fSxcblxuXHRRdWludGljOiB7XG5cblx0XHRJbjogZnVuY3Rpb24gKCBrICkge1xuXG5cdFx0XHRyZXR1cm4gayAqIGsgKiBrICogayAqIGs7XG5cblx0XHR9LFxuXG5cdFx0T3V0OiBmdW5jdGlvbiAoIGsgKSB7XG5cblx0XHRcdHJldHVybiAtLWsgKiBrICogayAqIGsgKiBrICsgMTtcblxuXHRcdH0sXG5cblx0XHRJbk91dDogZnVuY3Rpb24gKCBrICkge1xuXG5cdFx0XHRpZiAoICggayAqPSAyICkgPCAxICkgcmV0dXJuIDAuNSAqIGsgKiBrICogayAqIGsgKiBrO1xuXHRcdFx0cmV0dXJuIDAuNSAqICggKCBrIC09IDIgKSAqIGsgKiBrICogayAqIGsgKyAyICk7XG5cblx0XHR9XG5cblx0fSxcblxuXHRTaW51c29pZGFsOiB7XG5cblx0XHRJbjogZnVuY3Rpb24gKCBrICkge1xuXG5cdFx0XHRyZXR1cm4gMSAtIE1hdGguY29zKCBrICogTWF0aC5QSSAvIDIgKTtcblxuXHRcdH0sXG5cblx0XHRPdXQ6IGZ1bmN0aW9uICggayApIHtcblxuXHRcdFx0cmV0dXJuIE1hdGguc2luKCBrICogTWF0aC5QSSAvIDIgKTtcblxuXHRcdH0sXG5cblx0XHRJbk91dDogZnVuY3Rpb24gKCBrICkge1xuXG5cdFx0XHRyZXR1cm4gMC41ICogKCAxIC0gTWF0aC5jb3MoIE1hdGguUEkgKiBrICkgKTtcblxuXHRcdH1cblxuXHR9LFxuXG5cdEV4cG9uZW50aWFsOiB7XG5cblx0XHRJbjogZnVuY3Rpb24gKCBrICkge1xuXG5cdFx0XHRyZXR1cm4gayA9PT0gMCA/IDAgOiBNYXRoLnBvdyggMTAyNCwgayAtIDEgKTtcblxuXHRcdH0sXG5cblx0XHRPdXQ6IGZ1bmN0aW9uICggayApIHtcblxuXHRcdFx0cmV0dXJuIGsgPT09IDEgPyAxIDogMSAtIE1hdGgucG93KCAyLCAtIDEwICogayApO1xuXG5cdFx0fSxcblxuXHRcdEluT3V0OiBmdW5jdGlvbiAoIGsgKSB7XG5cblx0XHRcdGlmICggayA9PT0gMCApIHJldHVybiAwO1xuXHRcdFx0aWYgKCBrID09PSAxICkgcmV0dXJuIDE7XG5cdFx0XHRpZiAoICggayAqPSAyICkgPCAxICkgcmV0dXJuIDAuNSAqIE1hdGgucG93KCAxMDI0LCBrIC0gMSApO1xuXHRcdFx0cmV0dXJuIDAuNSAqICggLSBNYXRoLnBvdyggMiwgLSAxMCAqICggayAtIDEgKSApICsgMiApO1xuXG5cdFx0fVxuXG5cdH0sXG5cblx0Q2lyY3VsYXI6IHtcblxuXHRcdEluOiBmdW5jdGlvbiAoIGsgKSB7XG5cblx0XHRcdHJldHVybiAxIC0gTWF0aC5zcXJ0KCAxIC0gayAqIGsgKTtcblxuXHRcdH0sXG5cblx0XHRPdXQ6IGZ1bmN0aW9uICggayApIHtcblxuXHRcdFx0cmV0dXJuIE1hdGguc3FydCggMSAtICggLS1rICogayApICk7XG5cblx0XHR9LFxuXG5cdFx0SW5PdXQ6IGZ1bmN0aW9uICggayApIHtcblxuXHRcdFx0aWYgKCAoIGsgKj0gMiApIDwgMSkgcmV0dXJuIC0gMC41ICogKCBNYXRoLnNxcnQoIDEgLSBrICogaykgLSAxKTtcblx0XHRcdHJldHVybiAwLjUgKiAoIE1hdGguc3FydCggMSAtICggayAtPSAyKSAqIGspICsgMSk7XG5cblx0XHR9XG5cblx0fSxcblxuXHRFbGFzdGljOiB7XG5cblx0XHRJbjogZnVuY3Rpb24gKCBrICkge1xuXG5cdFx0XHR2YXIgcywgYSA9IDAuMSwgcCA9IDAuNDtcblx0XHRcdGlmICggayA9PT0gMCApIHJldHVybiAwO1xuXHRcdFx0aWYgKCBrID09PSAxICkgcmV0dXJuIDE7XG5cdFx0XHRpZiAoICFhIHx8IGEgPCAxICkgeyBhID0gMTsgcyA9IHAgLyA0OyB9XG5cdFx0XHRlbHNlIHMgPSBwICogTWF0aC5hc2luKCAxIC8gYSApIC8gKCAyICogTWF0aC5QSSApO1xuXHRcdFx0cmV0dXJuIC0gKCBhICogTWF0aC5wb3coIDIsIDEwICogKCBrIC09IDEgKSApICogTWF0aC5zaW4oICggayAtIHMgKSAqICggMiAqIE1hdGguUEkgKSAvIHAgKSApO1xuXG5cdFx0fSxcblxuXHRcdE91dDogZnVuY3Rpb24gKCBrICkge1xuXG5cdFx0XHR2YXIgcywgYSA9IDAuMSwgcCA9IDAuNDtcblx0XHRcdGlmICggayA9PT0gMCApIHJldHVybiAwO1xuXHRcdFx0aWYgKCBrID09PSAxICkgcmV0dXJuIDE7XG5cdFx0XHRpZiAoICFhIHx8IGEgPCAxICkgeyBhID0gMTsgcyA9IHAgLyA0OyB9XG5cdFx0XHRlbHNlIHMgPSBwICogTWF0aC5hc2luKCAxIC8gYSApIC8gKCAyICogTWF0aC5QSSApO1xuXHRcdFx0cmV0dXJuICggYSAqIE1hdGgucG93KCAyLCAtIDEwICogaykgKiBNYXRoLnNpbiggKCBrIC0gcyApICogKCAyICogTWF0aC5QSSApIC8gcCApICsgMSApO1xuXG5cdFx0fSxcblxuXHRcdEluT3V0OiBmdW5jdGlvbiAoIGsgKSB7XG5cblx0XHRcdHZhciBzLCBhID0gMC4xLCBwID0gMC40O1xuXHRcdFx0aWYgKCBrID09PSAwICkgcmV0dXJuIDA7XG5cdFx0XHRpZiAoIGsgPT09IDEgKSByZXR1cm4gMTtcblx0XHRcdGlmICggIWEgfHwgYSA8IDEgKSB7IGEgPSAxOyBzID0gcCAvIDQ7IH1cblx0XHRcdGVsc2UgcyA9IHAgKiBNYXRoLmFzaW4oIDEgLyBhICkgLyAoIDIgKiBNYXRoLlBJICk7XG5cdFx0XHRpZiAoICggayAqPSAyICkgPCAxICkgcmV0dXJuIC0gMC41ICogKCBhICogTWF0aC5wb3coIDIsIDEwICogKCBrIC09IDEgKSApICogTWF0aC5zaW4oICggayAtIHMgKSAqICggMiAqIE1hdGguUEkgKSAvIHAgKSApO1xuXHRcdFx0cmV0dXJuIGEgKiBNYXRoLnBvdyggMiwgLTEwICogKCBrIC09IDEgKSApICogTWF0aC5zaW4oICggayAtIHMgKSAqICggMiAqIE1hdGguUEkgKSAvIHAgKSAqIDAuNSArIDE7XG5cblx0XHR9XG5cblx0fSxcblxuXHRCYWNrOiB7XG5cblx0XHRJbjogZnVuY3Rpb24gKCBrICkge1xuXG5cdFx0XHR2YXIgcyA9IDEuNzAxNTg7XG5cdFx0XHRyZXR1cm4gayAqIGsgKiAoICggcyArIDEgKSAqIGsgLSBzICk7XG5cblx0XHR9LFxuXG5cdFx0T3V0OiBmdW5jdGlvbiAoIGsgKSB7XG5cblx0XHRcdHZhciBzID0gMS43MDE1ODtcblx0XHRcdHJldHVybiAtLWsgKiBrICogKCAoIHMgKyAxICkgKiBrICsgcyApICsgMTtcblxuXHRcdH0sXG5cblx0XHRJbk91dDogZnVuY3Rpb24gKCBrICkge1xuXG5cdFx0XHR2YXIgcyA9IDEuNzAxNTggKiAxLjUyNTtcblx0XHRcdGlmICggKCBrICo9IDIgKSA8IDEgKSByZXR1cm4gMC41ICogKCBrICogayAqICggKCBzICsgMSApICogayAtIHMgKSApO1xuXHRcdFx0cmV0dXJuIDAuNSAqICggKCBrIC09IDIgKSAqIGsgKiAoICggcyArIDEgKSAqIGsgKyBzICkgKyAyICk7XG5cblx0XHR9XG5cblx0fSxcblxuXHRCb3VuY2U6IHtcblxuXHRcdEluOiBmdW5jdGlvbiAoIGsgKSB7XG5cblx0XHRcdHJldHVybiAxIC0gVFdFRU4uRWFzaW5nLkJvdW5jZS5PdXQoIDEgLSBrICk7XG5cblx0XHR9LFxuXG5cdFx0T3V0OiBmdW5jdGlvbiAoIGsgKSB7XG5cblx0XHRcdGlmICggayA8ICggMSAvIDIuNzUgKSApIHtcblxuXHRcdFx0XHRyZXR1cm4gNy41NjI1ICogayAqIGs7XG5cblx0XHRcdH0gZWxzZSBpZiAoIGsgPCAoIDIgLyAyLjc1ICkgKSB7XG5cblx0XHRcdFx0cmV0dXJuIDcuNTYyNSAqICggayAtPSAoIDEuNSAvIDIuNzUgKSApICogayArIDAuNzU7XG5cblx0XHRcdH0gZWxzZSBpZiAoIGsgPCAoIDIuNSAvIDIuNzUgKSApIHtcblxuXHRcdFx0XHRyZXR1cm4gNy41NjI1ICogKCBrIC09ICggMi4yNSAvIDIuNzUgKSApICogayArIDAuOTM3NTtcblxuXHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRyZXR1cm4gNy41NjI1ICogKCBrIC09ICggMi42MjUgLyAyLjc1ICkgKSAqIGsgKyAwLjk4NDM3NTtcblxuXHRcdFx0fVxuXG5cdFx0fSxcblxuXHRcdEluT3V0OiBmdW5jdGlvbiAoIGsgKSB7XG5cblx0XHRcdGlmICggayA8IDAuNSApIHJldHVybiBUV0VFTi5FYXNpbmcuQm91bmNlLkluKCBrICogMiApICogMC41O1xuXHRcdFx0cmV0dXJuIFRXRUVOLkVhc2luZy5Cb3VuY2UuT3V0KCBrICogMiAtIDEgKSAqIDAuNSArIDAuNTtcblxuXHRcdH1cblxuXHR9XG5cbn07XG5cblRXRUVOLkludGVycG9sYXRpb24gPSB7XG5cblx0TGluZWFyOiBmdW5jdGlvbiAoIHYsIGsgKSB7XG5cblx0XHR2YXIgbSA9IHYubGVuZ3RoIC0gMSwgZiA9IG0gKiBrLCBpID0gTWF0aC5mbG9vciggZiApLCBmbiA9IFRXRUVOLkludGVycG9sYXRpb24uVXRpbHMuTGluZWFyO1xuXG5cdFx0aWYgKCBrIDwgMCApIHJldHVybiBmbiggdlsgMCBdLCB2WyAxIF0sIGYgKTtcblx0XHRpZiAoIGsgPiAxICkgcmV0dXJuIGZuKCB2WyBtIF0sIHZbIG0gLSAxIF0sIG0gLSBmICk7XG5cblx0XHRyZXR1cm4gZm4oIHZbIGkgXSwgdlsgaSArIDEgPiBtID8gbSA6IGkgKyAxIF0sIGYgLSBpICk7XG5cblx0fSxcblxuXHRCZXppZXI6IGZ1bmN0aW9uICggdiwgayApIHtcblxuXHRcdHZhciBiID0gMCwgbiA9IHYubGVuZ3RoIC0gMSwgcHcgPSBNYXRoLnBvdywgYm4gPSBUV0VFTi5JbnRlcnBvbGF0aW9uLlV0aWxzLkJlcm5zdGVpbiwgaTtcblxuXHRcdGZvciAoIGkgPSAwOyBpIDw9IG47IGkrKyApIHtcblx0XHRcdGIgKz0gcHcoIDEgLSBrLCBuIC0gaSApICogcHcoIGssIGkgKSAqIHZbIGkgXSAqIGJuKCBuLCBpICk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGI7XG5cblx0fSxcblxuXHRDYXRtdWxsUm9tOiBmdW5jdGlvbiAoIHYsIGsgKSB7XG5cblx0XHR2YXIgbSA9IHYubGVuZ3RoIC0gMSwgZiA9IG0gKiBrLCBpID0gTWF0aC5mbG9vciggZiApLCBmbiA9IFRXRUVOLkludGVycG9sYXRpb24uVXRpbHMuQ2F0bXVsbFJvbTtcblxuXHRcdGlmICggdlsgMCBdID09PSB2WyBtIF0gKSB7XG5cblx0XHRcdGlmICggayA8IDAgKSBpID0gTWF0aC5mbG9vciggZiA9IG0gKiAoIDEgKyBrICkgKTtcblxuXHRcdFx0cmV0dXJuIGZuKCB2WyAoIGkgLSAxICsgbSApICUgbSBdLCB2WyBpIF0sIHZbICggaSArIDEgKSAlIG0gXSwgdlsgKCBpICsgMiApICUgbSBdLCBmIC0gaSApO1xuXG5cdFx0fSBlbHNlIHtcblxuXHRcdFx0aWYgKCBrIDwgMCApIHJldHVybiB2WyAwIF0gLSAoIGZuKCB2WyAwIF0sIHZbIDAgXSwgdlsgMSBdLCB2WyAxIF0sIC1mICkgLSB2WyAwIF0gKTtcblx0XHRcdGlmICggayA+IDEgKSByZXR1cm4gdlsgbSBdIC0gKCBmbiggdlsgbSBdLCB2WyBtIF0sIHZbIG0gLSAxIF0sIHZbIG0gLSAxIF0sIGYgLSBtICkgLSB2WyBtIF0gKTtcblxuXHRcdFx0cmV0dXJuIGZuKCB2WyBpID8gaSAtIDEgOiAwIF0sIHZbIGkgXSwgdlsgbSA8IGkgKyAxID8gbSA6IGkgKyAxIF0sIHZbIG0gPCBpICsgMiA/IG0gOiBpICsgMiBdLCBmIC0gaSApO1xuXG5cdFx0fVxuXG5cdH0sXG5cblx0VXRpbHM6IHtcblxuXHRcdExpbmVhcjogZnVuY3Rpb24gKCBwMCwgcDEsIHQgKSB7XG5cblx0XHRcdHJldHVybiAoIHAxIC0gcDAgKSAqIHQgKyBwMDtcblxuXHRcdH0sXG5cblx0XHRCZXJuc3RlaW46IGZ1bmN0aW9uICggbiAsIGkgKSB7XG5cblx0XHRcdHZhciBmYyA9IFRXRUVOLkludGVycG9sYXRpb24uVXRpbHMuRmFjdG9yaWFsO1xuXHRcdFx0cmV0dXJuIGZjKCBuICkgLyBmYyggaSApIC8gZmMoIG4gLSBpICk7XG5cblx0XHR9LFxuXG5cdFx0RmFjdG9yaWFsOiAoIGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0dmFyIGEgPSBbIDEgXTtcblxuXHRcdFx0cmV0dXJuIGZ1bmN0aW9uICggbiApIHtcblxuXHRcdFx0XHR2YXIgcyA9IDEsIGk7XG5cdFx0XHRcdGlmICggYVsgbiBdICkgcmV0dXJuIGFbIG4gXTtcblx0XHRcdFx0Zm9yICggaSA9IG47IGkgPiAxOyBpLS0gKSBzICo9IGk7XG5cdFx0XHRcdHJldHVybiBhWyBuIF0gPSBzO1xuXG5cdFx0XHR9O1xuXG5cdFx0fSApKCksXG5cblx0XHRDYXRtdWxsUm9tOiBmdW5jdGlvbiAoIHAwLCBwMSwgcDIsIHAzLCB0ICkge1xuXG5cdFx0XHR2YXIgdjAgPSAoIHAyIC0gcDAgKSAqIDAuNSwgdjEgPSAoIHAzIC0gcDEgKSAqIDAuNSwgdDIgPSB0ICogdCwgdDMgPSB0ICogdDI7XG5cdFx0XHRyZXR1cm4gKCAyICogcDEgLSAyICogcDIgKyB2MCArIHYxICkgKiB0MyArICggLSAzICogcDEgKyAzICogcDIgLSAyICogdjAgLSB2MSApICogdDIgKyB2MCAqIHQgKyBwMTtcblxuXHRcdH1cblxuXHR9XG5cbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbi8qKlxuICogTWVyZ2UgdHdvIGF0dHJpYnV0ZSBvYmplY3RzIGdpdmluZyBwcmVjZWRlbmNlXG4gKiB0byB2YWx1ZXMgaW4gb2JqZWN0IGBiYC4gQ2xhc3NlcyBhcmUgc3BlY2lhbC1jYXNlZFxuICogYWxsb3dpbmcgZm9yIGFycmF5cyBhbmQgbWVyZ2luZy9qb2luaW5nIGFwcHJvcHJpYXRlbHlcbiAqIHJlc3VsdGluZyBpbiBhIHN0cmluZy5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gYVxuICogQHBhcmFtIHtPYmplY3R9IGJcbiAqIEByZXR1cm4ge09iamVjdH0gYVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZXhwb3J0cy5tZXJnZSA9IGZ1bmN0aW9uIG1lcmdlKGEsIGIpIHtcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHtcbiAgICB2YXIgYXR0cnMgPSBhWzBdO1xuICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYS5sZW5ndGg7IGkrKykge1xuICAgICAgYXR0cnMgPSBtZXJnZShhdHRycywgYVtpXSk7XG4gICAgfVxuICAgIHJldHVybiBhdHRycztcbiAgfVxuICB2YXIgYWMgPSBhWydjbGFzcyddO1xuICB2YXIgYmMgPSBiWydjbGFzcyddO1xuXG4gIGlmIChhYyB8fCBiYykge1xuICAgIGFjID0gYWMgfHwgW107XG4gICAgYmMgPSBiYyB8fCBbXTtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoYWMpKSBhYyA9IFthY107XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGJjKSkgYmMgPSBbYmNdO1xuICAgIGFbJ2NsYXNzJ10gPSBhYy5jb25jYXQoYmMpLmZpbHRlcihudWxscyk7XG4gIH1cblxuICBmb3IgKHZhciBrZXkgaW4gYikge1xuICAgIGlmIChrZXkgIT0gJ2NsYXNzJykge1xuICAgICAgYVtrZXldID0gYltrZXldO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBhO1xufTtcblxuLyoqXG4gKiBGaWx0ZXIgbnVsbCBgdmFsYHMuXG4gKlxuICogQHBhcmFtIHsqfSB2YWxcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBudWxscyh2YWwpIHtcbiAgcmV0dXJuIHZhbCAhPSBudWxsICYmIHZhbCAhPT0gJyc7XG59XG5cbi8qKlxuICogam9pbiBhcnJheSBhcyBjbGFzc2VzLlxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cbmV4cG9ydHMuam9pbkNsYXNzZXMgPSBqb2luQ2xhc3NlcztcbmZ1bmN0aW9uIGpvaW5DbGFzc2VzKHZhbCkge1xuICByZXR1cm4gKEFycmF5LmlzQXJyYXkodmFsKSA/IHZhbC5tYXAoam9pbkNsYXNzZXMpIDpcbiAgICAodmFsICYmIHR5cGVvZiB2YWwgPT09ICdvYmplY3QnKSA/IE9iamVjdC5rZXlzKHZhbCkuZmlsdGVyKGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIHZhbFtrZXldOyB9KSA6XG4gICAgW3ZhbF0pLmZpbHRlcihudWxscykuam9pbignICcpO1xufVxuXG4vKipcbiAqIFJlbmRlciB0aGUgZ2l2ZW4gY2xhc3Nlcy5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSBjbGFzc2VzXG4gKiBAcGFyYW0ge0FycmF5LjxCb29sZWFuPn0gZXNjYXBlZFxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5leHBvcnRzLmNscyA9IGZ1bmN0aW9uIGNscyhjbGFzc2VzLCBlc2NhcGVkKSB7XG4gIHZhciBidWYgPSBbXTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBjbGFzc2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKGVzY2FwZWQgJiYgZXNjYXBlZFtpXSkge1xuICAgICAgYnVmLnB1c2goZXhwb3J0cy5lc2NhcGUoam9pbkNsYXNzZXMoW2NsYXNzZXNbaV1dKSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBidWYucHVzaChqb2luQ2xhc3NlcyhjbGFzc2VzW2ldKSk7XG4gICAgfVxuICB9XG4gIHZhciB0ZXh0ID0gam9pbkNsYXNzZXMoYnVmKTtcbiAgaWYgKHRleHQubGVuZ3RoKSB7XG4gICAgcmV0dXJuICcgY2xhc3M9XCInICsgdGV4dCArICdcIic7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuICcnO1xuICB9XG59O1xuXG5cbmV4cG9ydHMuc3R5bGUgPSBmdW5jdGlvbiAodmFsKSB7XG4gIGlmICh2YWwgJiYgdHlwZW9mIHZhbCA9PT0gJ29iamVjdCcpIHtcbiAgICByZXR1cm4gT2JqZWN0LmtleXModmFsKS5tYXAoZnVuY3Rpb24gKHN0eWxlKSB7XG4gICAgICByZXR1cm4gc3R5bGUgKyAnOicgKyB2YWxbc3R5bGVdO1xuICAgIH0pLmpvaW4oJzsnKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gdmFsO1xuICB9XG59O1xuLyoqXG4gKiBSZW5kZXIgdGhlIGdpdmVuIGF0dHJpYnV0ZS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gKiBAcGFyYW0ge1N0cmluZ30gdmFsXG4gKiBAcGFyYW0ge0Jvb2xlYW59IGVzY2FwZWRcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gdGVyc2VcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuZXhwb3J0cy5hdHRyID0gZnVuY3Rpb24gYXR0cihrZXksIHZhbCwgZXNjYXBlZCwgdGVyc2UpIHtcbiAgaWYgKGtleSA9PT0gJ3N0eWxlJykge1xuICAgIHZhbCA9IGV4cG9ydHMuc3R5bGUodmFsKTtcbiAgfVxuICBpZiAoJ2Jvb2xlYW4nID09IHR5cGVvZiB2YWwgfHwgbnVsbCA9PSB2YWwpIHtcbiAgICBpZiAodmFsKSB7XG4gICAgICByZXR1cm4gJyAnICsgKHRlcnNlID8ga2V5IDoga2V5ICsgJz1cIicgKyBrZXkgKyAnXCInKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICcnO1xuICAgIH1cbiAgfSBlbHNlIGlmICgwID09IGtleS5pbmRleE9mKCdkYXRhJykgJiYgJ3N0cmluZycgIT0gdHlwZW9mIHZhbCkge1xuICAgIGlmIChKU09OLnN0cmluZ2lmeSh2YWwpLmluZGV4T2YoJyYnKSAhPT0gLTEpIHtcbiAgICAgIGNvbnNvbGUud2FybignU2luY2UgSmFkZSAyLjAuMCwgYW1wZXJzYW5kcyAoYCZgKSBpbiBkYXRhIGF0dHJpYnV0ZXMgJyArXG4gICAgICAgICAgICAgICAgICAgJ3dpbGwgYmUgZXNjYXBlZCB0byBgJmFtcDtgJyk7XG4gICAgfTtcbiAgICBpZiAodmFsICYmIHR5cGVvZiB2YWwudG9JU09TdHJpbmcgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGNvbnNvbGUud2FybignSmFkZSB3aWxsIGVsaW1pbmF0ZSB0aGUgZG91YmxlIHF1b3RlcyBhcm91bmQgZGF0ZXMgaW4gJyArXG4gICAgICAgICAgICAgICAgICAgJ0lTTyBmb3JtIGFmdGVyIDIuMC4wJyk7XG4gICAgfVxuICAgIHJldHVybiAnICcgKyBrZXkgKyBcIj0nXCIgKyBKU09OLnN0cmluZ2lmeSh2YWwpLnJlcGxhY2UoLycvZywgJyZhcG9zOycpICsgXCInXCI7XG4gIH0gZWxzZSBpZiAoZXNjYXBlZCkge1xuICAgIGlmICh2YWwgJiYgdHlwZW9mIHZhbC50b0lTT1N0cmluZyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgY29uc29sZS53YXJuKCdKYWRlIHdpbGwgc3RyaW5naWZ5IGRhdGVzIGluIElTTyBmb3JtIGFmdGVyIDIuMC4wJyk7XG4gICAgfVxuICAgIHJldHVybiAnICcgKyBrZXkgKyAnPVwiJyArIGV4cG9ydHMuZXNjYXBlKHZhbCkgKyAnXCInO1xuICB9IGVsc2Uge1xuICAgIGlmICh2YWwgJiYgdHlwZW9mIHZhbC50b0lTT1N0cmluZyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgY29uc29sZS53YXJuKCdKYWRlIHdpbGwgc3RyaW5naWZ5IGRhdGVzIGluIElTTyBmb3JtIGFmdGVyIDIuMC4wJyk7XG4gICAgfVxuICAgIHJldHVybiAnICcgKyBrZXkgKyAnPVwiJyArIHZhbCArICdcIic7XG4gIH1cbn07XG5cbi8qKlxuICogUmVuZGVyIHRoZSBnaXZlbiBhdHRyaWJ1dGVzIG9iamVjdC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKiBAcGFyYW0ge09iamVjdH0gZXNjYXBlZFxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5leHBvcnRzLmF0dHJzID0gZnVuY3Rpb24gYXR0cnMob2JqLCB0ZXJzZSl7XG4gIHZhciBidWYgPSBbXTtcblxuICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iaik7XG5cbiAgaWYgKGtleXMubGVuZ3RoKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKSB7XG4gICAgICB2YXIga2V5ID0ga2V5c1tpXVxuICAgICAgICAsIHZhbCA9IG9ialtrZXldO1xuXG4gICAgICBpZiAoJ2NsYXNzJyA9PSBrZXkpIHtcbiAgICAgICAgaWYgKHZhbCA9IGpvaW5DbGFzc2VzKHZhbCkpIHtcbiAgICAgICAgICBidWYucHVzaCgnICcgKyBrZXkgKyAnPVwiJyArIHZhbCArICdcIicpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBidWYucHVzaChleHBvcnRzLmF0dHIoa2V5LCB2YWwsIGZhbHNlLCB0ZXJzZSkpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBidWYuam9pbignJyk7XG59O1xuXG4vKipcbiAqIEVzY2FwZSB0aGUgZ2l2ZW4gc3RyaW5nIG9mIGBodG1sYC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gaHRtbFxuICogQHJldHVybiB7U3RyaW5nfVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxudmFyIGphZGVfZW5jb2RlX2h0bWxfcnVsZXMgPSB7XG4gICcmJzogJyZhbXA7JyxcbiAgJzwnOiAnJmx0OycsXG4gICc+JzogJyZndDsnLFxuICAnXCInOiAnJnF1b3Q7J1xufTtcbnZhciBqYWRlX21hdGNoX2h0bWwgPSAvWyY8PlwiXS9nO1xuXG5mdW5jdGlvbiBqYWRlX2VuY29kZV9jaGFyKGMpIHtcbiAgcmV0dXJuIGphZGVfZW5jb2RlX2h0bWxfcnVsZXNbY10gfHwgYztcbn1cblxuZXhwb3J0cy5lc2NhcGUgPSBqYWRlX2VzY2FwZTtcbmZ1bmN0aW9uIGphZGVfZXNjYXBlKGh0bWwpe1xuICB2YXIgcmVzdWx0ID0gU3RyaW5nKGh0bWwpLnJlcGxhY2UoamFkZV9tYXRjaF9odG1sLCBqYWRlX2VuY29kZV9jaGFyKTtcbiAgaWYgKHJlc3VsdCA9PT0gJycgKyBodG1sKSByZXR1cm4gaHRtbDtcbiAgZWxzZSByZXR1cm4gcmVzdWx0O1xufTtcblxuLyoqXG4gKiBSZS10aHJvdyB0aGUgZ2l2ZW4gYGVycmAgaW4gY29udGV4dCB0byB0aGVcbiAqIHRoZSBqYWRlIGluIGBmaWxlbmFtZWAgYXQgdGhlIGdpdmVuIGBsaW5lbm9gLlxuICpcbiAqIEBwYXJhbSB7RXJyb3J9IGVyclxuICogQHBhcmFtIHtTdHJpbmd9IGZpbGVuYW1lXG4gKiBAcGFyYW0ge1N0cmluZ30gbGluZW5vXG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5leHBvcnRzLnJldGhyb3cgPSBmdW5jdGlvbiByZXRocm93KGVyciwgZmlsZW5hbWUsIGxpbmVubywgc3RyKXtcbiAgaWYgKCEoZXJyIGluc3RhbmNlb2YgRXJyb3IpKSB0aHJvdyBlcnI7XG4gIGlmICgodHlwZW9mIHdpbmRvdyAhPSAndW5kZWZpbmVkJyB8fCAhZmlsZW5hbWUpICYmICFzdHIpIHtcbiAgICBlcnIubWVzc2FnZSArPSAnIG9uIGxpbmUgJyArIGxpbmVubztcbiAgICB0aHJvdyBlcnI7XG4gIH1cbiAgdHJ5IHtcbiAgICBzdHIgPSBzdHIgfHwgcmVxdWlyZSgnZnMnKS5yZWFkRmlsZVN5bmMoZmlsZW5hbWUsICd1dGY4JylcbiAgfSBjYXRjaCAoZXgpIHtcbiAgICByZXRocm93KGVyciwgbnVsbCwgbGluZW5vKVxuICB9XG4gIHZhciBjb250ZXh0ID0gM1xuICAgICwgbGluZXMgPSBzdHIuc3BsaXQoJ1xcbicpXG4gICAgLCBzdGFydCA9IE1hdGgubWF4KGxpbmVubyAtIGNvbnRleHQsIDApXG4gICAgLCBlbmQgPSBNYXRoLm1pbihsaW5lcy5sZW5ndGgsIGxpbmVubyArIGNvbnRleHQpO1xuXG4gIC8vIEVycm9yIGNvbnRleHRcbiAgdmFyIGNvbnRleHQgPSBsaW5lcy5zbGljZShzdGFydCwgZW5kKS5tYXAoZnVuY3Rpb24obGluZSwgaSl7XG4gICAgdmFyIGN1cnIgPSBpICsgc3RhcnQgKyAxO1xuICAgIHJldHVybiAoY3VyciA9PSBsaW5lbm8gPyAnICA+ICcgOiAnICAgICcpXG4gICAgICArIGN1cnJcbiAgICAgICsgJ3wgJ1xuICAgICAgKyBsaW5lO1xuICB9KS5qb2luKCdcXG4nKTtcblxuICAvLyBBbHRlciBleGNlcHRpb24gbWVzc2FnZVxuICBlcnIucGF0aCA9IGZpbGVuYW1lO1xuICBlcnIubWVzc2FnZSA9IChmaWxlbmFtZSB8fCAnSmFkZScpICsgJzonICsgbGluZW5vXG4gICAgKyAnXFxuJyArIGNvbnRleHQgKyAnXFxuXFxuJyArIGVyci5tZXNzYWdlO1xuICB0aHJvdyBlcnI7XG59O1xuXG5leHBvcnRzLkRlYnVnSXRlbSA9IGZ1bmN0aW9uIERlYnVnSXRlbShsaW5lbm8sIGZpbGVuYW1lKSB7XG4gIHRoaXMubGluZW5vID0gbGluZW5vO1xuICB0aGlzLmZpbGVuYW1lID0gZmlsZW5hbWU7XG59IiwiIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjYuM1xuLypcbkJhc2VkIG9mZiBzb3VyY2VzIGZyb20gdGhlIGZvbGxvd2luZyBjb2RlYmFzZXM6XG5odHRwczovL2dpdGh1Yi5jb20vcGlja2hhcmR0L2NvZmZlZXNjcmlwdC1jb2RlbWlycm9yLW1vZGVcbmh0dHBzOi8vZ2l0aHViLmNvbS94aXhpeGFvL1RlYVRhYmxlL2Jsb2IvbWFzdGVyL3NjcmlwdHMvY29tcGlsZXJzL2ljZWRjb2ZmZWVzY3JpcHQvaGlnaGxpZ2h0ZXIuY29mZmVlXG4qL1xuXG5cbihmdW5jdGlvbigpIHtcbiAgdmFyIENvZGVNaXJyb3JJY2VkQ29mZmVlU2NyaXB0ID0gZnVuY3Rpb24gKGNvbmYpIHtcbiAgICB2YXIgRVJST1JDTEFTUywgYW55SXMsIGJvdW5kYXJ5VG9rZW4sIGNsYXNzSWRlbnRpZmllcnMsIGNvbW1vbkNvbnN0YW50cywgY29tbW9uS2V5d29yZHMsIGNvbnN0YW50SWRlbnRpZmllcnMsIGNvbnN0YW50cywgZGVkZW50LCBkb3VibGVEZWxpbWl0ZXJzLCBkb3VibGVPcGVyYXRvcnMsIGZpZWxkLCBmdW5jdGlvbkRlY2xhcmF0aW9uLCBmdW5jdGlvbklkZW50aWZpZXIsIGljZWRLZXl3b3JkcywgaWRlbnRpZmllcnMsIGluZGVudCwgaW5kZW50S2V5d29yZHMsIGtleXdvcmRzLCBsb25nQ29tbWVudCwgb3RoZXJLZXl3b3JkcywgcGFyZW5Db25zdHJ1Y3RvcnMsIHJlZ2V4UHJlZml4ZXMsIHJlZ2V4VG9rZW4sIHNpbXBsZVRva2VuTWF0Y2hlciwgc2luZ2xlRGVsaW1pdGVycywgc2luZ2xlT3BlcmF0b3JzLCBzdHJpbmdQcmVmaXhlcywgdG9rZW5CYXNlLCB0b2tlbkZhY3RvcnksIHRva2VuTGV4ZXIsIHRyaXBsZURlbGltaXRlcnMsIHdvcmRPcGVyYXRvcnMsIHdvcmRSZWdleHA7XG4gICAgRVJST1JDTEFTUyA9ICdlcnJvcic7XG4gICAgd29yZFJlZ2V4cCA9IGZ1bmN0aW9uKHdvcmRzKSB7XG4gICAgICByZXR1cm4gbmV3IFJlZ0V4cChcIl4oKFwiICsgd29yZHMuam9pbihcIil8KFwiKSArIFwiKSlcXFxcYlwiKTtcbiAgICB9O1xuICAgIHNpbmdsZU9wZXJhdG9ycyA9IG5ldyBSZWdFeHAoXCJeW1xcXFwrXFxcXC1cXFxcKi8lJnxcXFxcXn48PiE/XVwiKTtcbiAgICBzaW5nbGVEZWxpbWl0ZXJzID0gbmV3IFJlZ0V4cChcIl5bXFxcXChcXFxcKUAsYDtcXFxcLl1cIik7XG4gICAgZG91YmxlT3BlcmF0b3JzID0gbmV3IFJlZ0V4cChcIl4oKD0pfCg6KXwoLT4pfCg9Pil8KFxcXFwrXFxcXCspfChcXFxcK1xcXFw9KXwoXFxcXC1cXFxcLSl8KFxcXFwtXFxcXD0pfChcXFxcKlxcXFwqKXwoXFxcXCpcXFxcPSl8KFxcXFwvXFxcXC8pfChcXFxcL1xcXFw9KXwoPT0pfCghPSl8KDw9KXwoPj0pfCg8Pil8KDw8KXwoPj4pfCgvLykpXCIpO1xuICAgIGRvdWJsZURlbGltaXRlcnMgPSBuZXcgUmVnRXhwKFwiXigoXFxcXC5cXFxcLil8KFxcXFwrPSl8KFxcXFwtPSl8KFxcXFwqPSl8KCU9KXwoLz0pfCgmPSl8KFxcXFx8PSl8KFxcXFxePSl8KCYmPSl8KFxcXFx8fD0pKVwiKTtcbiAgICB0cmlwbGVEZWxpbWl0ZXJzID0gbmV3IFJlZ0V4cChcIl4oKFxcXFwuXFxcXC5cXFxcLil8KC8vPSl8KD4+PSl8KDw8PSl8KFxcXFwqXFxcXCo9KSlcIik7XG4gICAgcGFyZW5Db25zdHJ1Y3RvcnMgPSBuZXcgUmVnRXhwKFwiXltcXFxcW1xcXFxdXFxcXHtcXFxcfV1cIik7XG4gICAgY29uc3RhbnRJZGVudGlmaWVycyA9IG5ldyBSZWdFeHAoXCJeW19BLVokXVtfQS1aJDAtOV0rXFxcXGJcIik7XG4gICAgY2xhc3NJZGVudGlmaWVycyA9IG5ldyBSZWdFeHAoXCJeW19BLVokXVtfQS1aYS16JDAtOV0qXCIpO1xuICAgIGlkZW50aWZpZXJzID0gbmV3IFJlZ0V4cChcIl5bX2EteiRdW19BLVphLXokMC05XSpcIik7XG4gICAgZmllbGQgPSBuZXcgUmVnRXhwKFwiXkBbX0EtWmEteiRdW19BLVphLXokMC05XSpcIik7XG4gICAgZnVuY3Rpb25JZGVudGlmaWVyID0gbmV3IFJlZ0V4cChcIl5bX2EteiRdW19BLVphLXokMC05XSpcXFxccz8oOnw9KVxcXFxzPyhcXFxcKFtfQS1aYS16JDAtOUAsPVxcXFwuXFxcXFtcXFxcXVxcXFxzXSpcXFxcKVxcXFxzKik/KCgtPil8KD0+KSlcIik7XG4gICAgZnVuY3Rpb25EZWNsYXJhdGlvbiA9IG5ldyBSZWdFeHAoXCJeKFxcXFwoW19BLVphLXokMC05QCw9XFxcXC5cXFxcW1xcXFxdXFxcXHNdKlxcXFwpXFxcXHMqKT8oKC0+KXwoPT4pKVwiKTtcbiAgICB3b3JkT3BlcmF0b3JzID0gd29yZFJlZ2V4cChbJ2FuZCcsICdvcicsICdub3QnLCAnaXMnLCAnaXNudCcsICdpbicsICdpbnN0YW5jZW9mJywgJ3R5cGVvZiddKTtcbiAgICBpbmRlbnRLZXl3b3JkcyA9IFsnZm9yJywgJ3doaWxlJywgJ2xvb3AnLCAnaWYnLCAndW5sZXNzJywgJ2Vsc2UnLCAnc3dpdGNoJywgJ3RyeScsICdjYXRjaCcsICdmaW5hbGx5JywgJ2NsYXNzJ107XG4gICAgY29tbW9uS2V5d29yZHMgPSBbJ2JyZWFrJywgJ2J5JywgJ2NvbnRpbnVlJywgJ2RlbGV0ZScsICdkbycsICdpbicsICdvZicsICduZXcnLCAncmV0dXJuJywgJ3RoZW4nLCAndGhyb3cnLCAnd2hlbicsICd1bnRpbCcsICdleHRlbmRzJ107XG4gICAgb3RoZXJLZXl3b3JkcyA9IHdvcmRSZWdleHAoWydkZWJ1Z2dlcicsICd0aGlzJ10pO1xuICAgIGljZWRLZXl3b3JkcyA9IHdvcmRSZWdleHAoWydhd2FpdCcsICdkZWZlciddKTtcbiAgICBrZXl3b3JkcyA9IHdvcmRSZWdleHAoaW5kZW50S2V5d29yZHMuY29uY2F0KGNvbW1vbktleXdvcmRzKSk7XG4gICAgaW5kZW50S2V5d29yZHMgPSB3b3JkUmVnZXhwKGluZGVudEtleXdvcmRzKTtcbiAgICBzdHJpbmdQcmVmaXhlcyA9IG5ldyBSZWdFeHAoXCJeKCd7M318XFxcInszfXxbJ1xcXCJdKVwiKTtcbiAgICByZWdleFByZWZpeGVzID0gbmV3IFJlZ0V4cChcIl4oL3szfXwvKVwiKTtcbiAgICBjb21tb25Db25zdGFudHMgPSBbXCJJbmZpbml0eVwiLCBcIk5hTlwiLCBcInVuZGVmaW5lZFwiLCBcIm51bGxcIiwgXCJ0cnVlXCIsIFwiZmFsc2VcIiwgXCJvblwiLCBcIm9mZlwiLCBcInllc1wiLCBcIm5vXCJdO1xuICAgIGNvbnN0YW50cyA9IHdvcmRSZWdleHAoY29tbW9uQ29uc3RhbnRzKTtcbiAgICB0b2tlbkJhc2UgPSBmdW5jdGlvbihzdHJlYW0sIHN0YXRlKSB7XG4gICAgICB2YXIgY2gsIGZsb2F0TGl0ZXJhbCwgbGluZU9mZnNldCwgc2NvcGVPZmZzZXQsIHRva2VuO1xuICAgICAgaWYgKHN0cmVhbS5zb2woKSkge1xuICAgICAgICBzY29wZU9mZnNldCA9IHN0YXRlLnNjb3Blc1swXS5vZmZzZXQ7XG4gICAgICAgIGlmIChzdHJlYW0uZWF0U3BhY2UoKSkge1xuICAgICAgICAgIGxpbmVPZmZzZXQgPSBzdHJlYW0uaW5kZW50YXRpb24oKTtcbiAgICAgICAgICBpZiAobGluZU9mZnNldCA+IHNjb3BlT2Zmc2V0KSB7XG4gICAgICAgICAgICByZXR1cm4gJ2luZGVudCc7XG4gICAgICAgICAgfSBlbHNlIGlmIChsaW5lT2Zmc2V0IDwgc2NvcGVPZmZzZXQpIHtcbiAgICAgICAgICAgIHJldHVybiAnZGVkZW50JztcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH0gZWxzZSBpZiAoc2NvcGVPZmZzZXQgPiAwKSB7XG4gICAgICAgICAgZGVkZW50KHN0cmVhbSwgc3RhdGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoc3RyZWFtLmVhdFNwYWNlKCkpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICBjaCA9IHN0cmVhbS5wZWVrKCk7XG4gICAgICBpZiAoc3RyZWFtLm1hdGNoKFwiIyMjXCIpKSB7XG4gICAgICAgIHN0YXRlLnRva2VuaXplID0gbG9uZ0NvbW1lbnQ7XG4gICAgICAgIHJldHVybiBzdGF0ZS50b2tlbml6ZShzdHJlYW0sIHN0YXRlKTtcbiAgICAgIH1cbiAgICAgIGlmIChjaCA9PT0gXCIjXCIpIHtcbiAgICAgICAgc3RyZWFtLnNraXBUb0VuZCgpO1xuICAgICAgICByZXR1cm4gXCJjb21tZW50XCI7XG4gICAgICB9XG4gICAgICBpZiAoc3RyZWFtLm1hdGNoKC9eLT9bMC05XFwuXS8sIGZhbHNlKSkge1xuICAgICAgICBmbG9hdExpdGVyYWwgPSBmYWxzZTtcbiAgICAgICAgaWYgKChzdHJlYW0ubWF0Y2goL14tP1xcZCpcXC5cXGQrKGVbXFwrXFwtXT9cXGQrKT8vaSkpIHx8IChzdHJlYW0ubWF0Y2goL14tP1xcZCtcXC5cXGQqLykpIHx8IChzdHJlYW0ubWF0Y2goL14tP1xcLlxcZCsvKSkpIHtcbiAgICAgICAgICBmbG9hdExpdGVyYWwgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChmbG9hdExpdGVyYWwpIHtcbiAgICAgICAgICBpZiAoc3RyZWFtLnBlZWsoKSA9PT0gXCIuXCIpIHtcbiAgICAgICAgICAgIHN0cmVhbS5iYWNrVXAoMSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBcIm51bWJlclwiO1xuICAgICAgICB9XG4gICAgICAgIGlmICgoc3RyZWFtLm1hdGNoKC9eLT8weFswLTlhLWZdKy9pKSkgfHwgKHN0cmVhbS5tYXRjaCgvXi0/WzEtOV1cXGQqKGVbXFwrXFwtXT9cXGQrKT8vKSkgfHwgKHN0cmVhbS5tYXRjaCgvXi0/MCg/IVtcXGR4XSkvaSkpKSB7XG4gICAgICAgICAgcmV0dXJuIFwibnVtYmVyXCI7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChzdHJlYW0ubWF0Y2goc3RyaW5nUHJlZml4ZXMpKSB7XG4gICAgICAgIHN0YXRlLnRva2VuaXplID0gdG9rZW5GYWN0b3J5KHN0cmVhbS5jdXJyZW50KCksIFwic3RyaW5nXCIpO1xuICAgICAgICByZXR1cm4gc3RhdGUudG9rZW5pemUoc3RyZWFtLCBzdGF0ZSk7XG4gICAgICB9XG4gICAgICBpZiAoc3RyZWFtLm1hdGNoKHJlZ2V4UHJlZml4ZXMpKSB7XG4gICAgICAgIGlmIChzdHJlYW0uY3VycmVudCgpICE9PSBcIi9cIiB8fCBzdHJlYW0ubWF0Y2goL14uKlxcLy8sIGZhbHNlKSkge1xuICAgICAgICAgIHN0YXRlLnRva2VuaXplID0gcmVnZXhUb2tlbihzdHJlYW0uY3VycmVudCgpLCBcInN0cmluZy0yXCIpO1xuICAgICAgICAgIHJldHVybiBzdGF0ZS50b2tlbml6ZShzdHJlYW0sIHN0YXRlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzdHJlYW0uYmFja1VwKDEpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoc3RyZWFtLm1hdGNoKGZ1bmN0aW9uSWRlbnRpZmllciwgZmFsc2UpKSB7XG4gICAgICAgIHN0cmVhbS5tYXRjaChpZGVudGlmaWVycyk7XG4gICAgICAgIHJldHVybiBcImZ1bmN0aW9uaWRcIjtcbiAgICAgIH1cbiAgICAgIHRva2VuID0gc2ltcGxlVG9rZW5NYXRjaGVyKHN0cmVhbSwgW1wiZnVuY3Rpb25kZWNcIiwgZnVuY3Rpb25EZWNsYXJhdGlvbiwgXCJmaWVsZFwiLCBmaWVsZCwgXCJvcGVyYXRvclwiLCB0cmlwbGVEZWxpbWl0ZXJzLCBkb3VibGVEZWxpbWl0ZXJzLCBcIm9wZXJhdG9yXCIsIGRvdWJsZU9wZXJhdG9ycywgc2luZ2xlT3BlcmF0b3JzLCB3b3JkT3BlcmF0b3JzLCBcInB1bmN0dWF0aW9uXCIsIHNpbmdsZURlbGltaXRlcnMsIFwiYXRvbVwiLCBjb25zdGFudHMsIFwia2V5d29yZFwiLCBrZXl3b3JkcywgXCJrZXl3b3JkMlwiLCBvdGhlcktleXdvcmRzLCBcImtleXdvcmQzXCIsIGljZWRLZXl3b3JkcywgXCJjb25zdHJ1Y3RvclwiLCBwYXJlbkNvbnN0cnVjdG9ycywgXCJjb25zdGFudFwiLCBjb25zdGFudElkZW50aWZpZXJzLCBcImNsYXNzbmFtZVwiLCBjbGFzc0lkZW50aWZpZXJzLCBcInZhcmlhYmxlXCIsIGlkZW50aWZpZXJzXSk7XG4gICAgICBpZiAodG9rZW4pIHtcbiAgICAgICAgcmV0dXJuIHRva2VuO1xuICAgICAgfVxuICAgICAgc3RyZWFtLm5leHQoKTtcbiAgICAgIHJldHVybiBFUlJPUkNMQVNTO1xuICAgIH07XG4gICAgc2ltcGxlVG9rZW5NYXRjaGVyID0gZnVuY3Rpb24oc3RyZWFtLCBrZXlzRm9yUGF0dGVybnMpIHtcbiAgICAgIHZhciBpdGVtLCB0b2tlbiwgdG9rZW5NYXRjaGVzLCBfaSwgX2xlbjtcbiAgICAgIHRva2VuID0gXCJcIjtcbiAgICAgIHRva2VuTWF0Y2hlcyA9IGZhbHNlO1xuICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBrZXlzRm9yUGF0dGVybnMubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgaXRlbSA9IGtleXNGb3JQYXR0ZXJuc1tfaV07XG4gICAgICAgIGlmICh0eXBlb2YgaXRlbSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICBpZiAodG9rZW5NYXRjaGVzKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgdG9rZW4gPSBpdGVtO1xuICAgICAgICAgIHRva2VuTWF0Y2hlcyA9IGZhbHNlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRva2VuTWF0Y2hlcyB8fCAodG9rZW5NYXRjaGVzID0gc3RyZWFtLm1hdGNoKGl0ZW0pKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHRva2VuTWF0Y2hlcykge1xuICAgICAgICByZXR1cm4gdG9rZW47XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICB9O1xuICAgIHRva2VuRmFjdG9yeSA9IGZ1bmN0aW9uKGRlbGltaXRlciwgb3V0Y2xhc3MpIHtcbiAgICAgIHJldHVybiBib3VuZGFyeVRva2VuKGRlbGltaXRlciwgb3V0Y2xhc3MpO1xuICAgIH07XG4gICAgcmVnZXhUb2tlbiA9IGZ1bmN0aW9uKGRlbGltaXRlciwgb3V0Y2xhc3MpIHtcbiAgICAgIHJldHVybiBib3VuZGFyeVRva2VuKGRlbGltaXRlciwgb3V0Y2xhc3MsIGZ1bmN0aW9uKHN0cmVhbSkge1xuICAgICAgICByZXR1cm4gc3RyZWFtLm1hdGNoKC9eW2lnbV0qXFxiLyk7XG4gICAgICB9KTtcbiAgICB9O1xuICAgIGJvdW5kYXJ5VG9rZW4gPSBmdW5jdGlvbihkZWxpbWl0ZXIsIG91dGNsYXNzLCBzdWZmaXgpIHtcbiAgICAgIHZhciBzaW5nbGVsaW5lO1xuICAgICAgc2luZ2xlbGluZSA9IGRlbGltaXRlci5sZW5ndGggPT09IDE7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oc3RyZWFtLCBzdGF0ZSkge1xuICAgICAgICB3aGlsZSAoIXN0cmVhbS5lb2woKSkge1xuICAgICAgICAgIHN0cmVhbS5lYXRXaGlsZSgvW14nXCJcXC9cXFxcXS8pO1xuICAgICAgICAgIGlmIChzdHJlYW0uZWF0KFwiXFxcXFwiKSkge1xuICAgICAgICAgICAgc3RyZWFtLm5leHQoKTtcbiAgICAgICAgICAgIGlmIChzaW5nbGVsaW5lICYmIHN0cmVhbS5lb2woKSkge1xuICAgICAgICAgICAgICByZXR1cm4gb3V0Y2xhc3M7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIGlmIChzdHJlYW0ubWF0Y2goZGVsaW1pdGVyKSkge1xuICAgICAgICAgICAgc3RhdGUudG9rZW5pemUgPSB0b2tlbkJhc2U7XG4gICAgICAgICAgICBpZiAoc3VmZml4KSB7XG4gICAgICAgICAgICAgIHN1ZmZpeChzdHJlYW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG91dGNsYXNzO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzdHJlYW0uZWF0KC9bJ1wiXFwvXS8pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoc2luZ2xlbGluZSkge1xuICAgICAgICAgIGlmIChjb25mLm1vZGUuc2luZ2xlTGluZVN0cmluZ0Vycm9ycykge1xuICAgICAgICAgICAgb3V0Y2xhc3MgPSBFUlJPUkNMQVNTO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzdGF0ZS50b2tlbml6ZSA9IHRva2VuQmFzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dGNsYXNzO1xuICAgICAgfTtcbiAgICB9O1xuICAgIGxvbmdDb21tZW50ID0gZnVuY3Rpb24oc3RyZWFtLCBzdGF0ZSkge1xuICAgICAgd2hpbGUgKCFzdHJlYW0uZW9sKCkpIHtcbiAgICAgICAgc3RyZWFtLmVhdFdoaWxlKC9bXiNdLyk7XG4gICAgICAgIGlmIChzdHJlYW0ubWF0Y2goXCIjIyNcIikpIHtcbiAgICAgICAgICBzdGF0ZS50b2tlbml6ZSA9IHRva2VuQmFzZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBzdHJlYW0uZWF0V2hpbGUoXCIjXCIpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFwiY29tbWVudFwiO1xuICAgIH07XG4gICAgaW5kZW50ID0gZnVuY3Rpb24oc3RyZWFtLCBzdGF0ZSwgdHlwZSkge1xuICAgICAgdmFyIGluZGVudFVuaXQsIHNjb3BlLCBfaSwgX2xlbiwgX3JlZjtcbiAgICAgIHR5cGUgPSB0eXBlIHx8IFwiY29mZmVlXCI7XG4gICAgICBpbmRlbnRVbml0ID0gMDtcbiAgICAgIGlmICh0eXBlID09PSBcImNvZmZlZVwiKSB7XG4gICAgICAgIF9yZWYgPSBzdGF0ZS5zY29wZXM7XG4gICAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICAgIHNjb3BlID0gX3JlZltfaV07XG4gICAgICAgICAgaWYgKHNjb3BlLnR5cGUgPT09IFwiY29mZmVlXCIpIHtcbiAgICAgICAgICAgIGluZGVudFVuaXQgPSBzY29wZS5vZmZzZXQgKyBjb25mLmluZGVudFVuaXQ7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGluZGVudFVuaXQgPSBzdHJlYW0uY29sdW1uKCkgKyBzdHJlYW0uY3VycmVudCgpLmxlbmd0aDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBzdGF0ZS5zY29wZXMudW5zaGlmdCh7XG4gICAgICAgIG9mZnNldDogaW5kZW50VW5pdCxcbiAgICAgICAgdHlwZTogdHlwZVxuICAgICAgfSk7XG4gICAgfTtcbiAgICBkZWRlbnQgPSBmdW5jdGlvbihzdHJlYW0sIHN0YXRlKSB7XG4gICAgICB2YXIgaSwgc2NvcGUsIF9pLCBfaW5kZW50LCBfaW5kZW50X2luZGV4LCBfbGVuLCBfcmVmO1xuICAgICAgaWYgKHN0YXRlLnNjb3Blcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKHN0YXRlLnNjb3Blc1swXS50eXBlID09PSBcImNvZmZlZVwiKSB7XG4gICAgICAgIF9pbmRlbnQgPSBzdHJlYW0uaW5kZW50YXRpb24oKTtcbiAgICAgICAgX2luZGVudF9pbmRleCA9IC0xO1xuICAgICAgICBfcmVmID0gc3RhdGUuc2NvcGVzO1xuICAgICAgICBmb3IgKGkgPSBfaSA9IDAsIF9sZW4gPSBfcmVmLmxlbmd0aDsgX2kgPCBfbGVuOyBpID0gKytfaSkge1xuICAgICAgICAgIHNjb3BlID0gX3JlZltpXTtcbiAgICAgICAgICBpZiAoX2luZGVudCA9PT0gc2NvcGUub2Zmc2V0KSB7XG4gICAgICAgICAgICBfaW5kZW50X2luZGV4ID0gaTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoX2luZGVudF9pbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICB3aGlsZSAoc3RhdGUuc2NvcGVzWzBdLm9mZnNldCAhPT0gX2luZGVudCkge1xuICAgICAgICAgIHN0YXRlLnNjb3Blcy5zaGlmdCgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0YXRlLnNjb3Blcy5zaGlmdCgpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfTtcbiAgICB0b2tlbkxleGVyID0gZnVuY3Rpb24oc3RyZWFtLCBzdGF0ZSkge1xuICAgICAgdmFyIGN1cnJlbnQsIGRlbGltaXRlcl9pbmRleCwgc3R5bGU7XG4gICAgICBzdHlsZSA9IHN0YXRlLnRva2VuaXplKHN0cmVhbSwgc3RhdGUpO1xuICAgICAgY3VycmVudCA9IHN0cmVhbS5jdXJyZW50KCk7XG4gICAgICBpZiAoY3VycmVudCA9PT0gXCIuXCIpIHtcbiAgICAgICAgc3R5bGUgPSBzdGF0ZS50b2tlbml6ZShzdHJlYW0sIHN0YXRlKTtcbiAgICAgICAgY3VycmVudCA9IHN0cmVhbS5jdXJyZW50KCk7XG4gICAgICAgIGlmIChhbnlJcyhbXCJ2YXJpYWJsZVwiLCBcImNvbnN0YW50XCIsIFwiY2xhc3NuYW1lXCIsIFwiZnVuY3Rpb25pZFwiXSwgc3R5bGUpKSB7XG4gICAgICAgICAgcmV0dXJuIHN0eWxlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBFUlJPUkNMQVNTO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoY3VycmVudCA9PT0gXCJAXCIpIHtcbiAgICAgICAgc3RyZWFtLmVhdChcIkBcIik7XG4gICAgICAgIHJldHVybiBcImtleXdvcmRcIjtcbiAgICAgIH1cbiAgICAgIGlmIChjdXJyZW50ID09PSBcInJldHVyblwiKSB7XG4gICAgICAgIHN0YXRlLmRlZGVudCArPSAxO1xuICAgICAgfVxuICAgICAgaWYgKCgoY3VycmVudCA9PT0gXCItPlwiIHx8IGN1cnJlbnQgPT09IFwiPT5cIikgJiYgIXN0YXRlLmxhbWJkYSAmJiBzdGF0ZS5zY29wZXNbMF0udHlwZSA9PT0gXCJjb2ZmZWVcIiAmJiBzdHJlYW0ucGVlaygpID09PSBcIlwiKSB8fCBzdHlsZSA9PT0gXCJpbmRlbnRcIikge1xuICAgICAgICBpbmRlbnQoc3RyZWFtLCBzdGF0ZSk7XG4gICAgICB9XG4gICAgICBkZWxpbWl0ZXJfaW5kZXggPSBcIlsoe1wiLmluZGV4T2YoY3VycmVudCk7XG4gICAgICBpZiAoZGVsaW1pdGVyX2luZGV4ICE9PSAtMSkge1xuICAgICAgICBpbmRlbnQoc3RyZWFtLCBzdGF0ZSwgXCJdKX1cIi5zbGljZShkZWxpbWl0ZXJfaW5kZXgsIGRlbGltaXRlcl9pbmRleCArIDEpKTtcbiAgICAgIH1cbiAgICAgIGlmIChpbmRlbnRLZXl3b3Jkcy5leGVjKGN1cnJlbnQpKSB7XG4gICAgICAgIGluZGVudChzdHJlYW0sIHN0YXRlKTtcbiAgICAgIH1cbiAgICAgIGlmIChjdXJyZW50ID09PSBcInRoZW5cIikge1xuICAgICAgICBkZWRlbnQoc3RyZWFtLCBzdGF0ZSk7XG4gICAgICB9XG4gICAgICBpZiAoc3R5bGUgPT09IFwiZGVkZW50XCIgJiYgZGVkZW50KHN0cmVhbSwgc3RhdGUpKSB7XG4gICAgICAgIHJldHVybiBFUlJPUkNMQVNTO1xuICAgICAgfVxuICAgICAgZGVsaW1pdGVyX2luZGV4ID0gXCJdKX1cIi5pbmRleE9mKGN1cnJlbnQpO1xuICAgICAgaWYgKGRlbGltaXRlcl9pbmRleCAhPT0gLTEgJiYgZGVkZW50KHN0cmVhbSwgc3RhdGUpKSB7XG4gICAgICAgIHJldHVybiBFUlJPUkNMQVNTO1xuICAgICAgfVxuICAgICAgaWYgKHN0YXRlLmRlZGVudCA+IDAgJiYgc3RyZWFtLmVvbCgpICYmIHN0YXRlLnNjb3Blc1swXS50eXBlID09PSBcImNvZmZlZVwiKSB7XG4gICAgICAgIGlmIChzdGF0ZS5zY29wZXMubGVuZ3RoID4gMSkge1xuICAgICAgICAgIHN0YXRlLnNjb3Blcy5zaGlmdCgpO1xuICAgICAgICB9XG4gICAgICAgIHN0YXRlLmRlZGVudCAtPSAxO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHN0eWxlO1xuICAgIH07XG4gICAgYW55SXMgPSBmdW5jdGlvbihsaXN0LCB3aGF0KSB7XG4gICAgICB2YXIgaXRlbSwgX2ksIF9sZW47XG4gICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IGxpc3QubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgaXRlbSA9IGxpc3RbX2ldO1xuICAgICAgICBpZiAoaXRlbSA9PT0gd2hhdCkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbiAgICByZXR1cm4ge1xuICAgICAgc3RhcnRTdGF0ZTogZnVuY3Rpb24oYmFzZWNvbHVtbikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHRva2VuaXplOiB0b2tlbkJhc2UsXG4gICAgICAgICAgc2NvcGVzOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIG9mZnNldDogYmFzZWNvbHVtbiB8fCAwLFxuICAgICAgICAgICAgICB0eXBlOiBcImNvZmZlZVwiXG4gICAgICAgICAgICB9XG4gICAgICAgICAgXSxcbiAgICAgICAgICBsYXN0VG9rZW46IG51bGwsXG4gICAgICAgICAgbGFtYmRhOiBmYWxzZSxcbiAgICAgICAgICBkZWRlbnQ6IDBcbiAgICAgICAgfTtcbiAgICAgIH0sXG4gICAgICB0b2tlbjogZnVuY3Rpb24oc3RyZWFtLCBzdGF0ZSkge1xuICAgICAgICB2YXIgc3R5bGU7XG4gICAgICAgIHN0eWxlID0gdG9rZW5MZXhlcihzdHJlYW0sIHN0YXRlKTtcbiAgICAgICAgc3RhdGUubGFzdFRva2VuID0ge1xuICAgICAgICAgIHN0eWxlOiBzdHlsZSxcbiAgICAgICAgICBjb250ZW50OiBzdHJlYW0uY3VycmVudCgpXG4gICAgICAgIH07XG4gICAgICAgIGlmIChzdHJlYW0uZW9sKCkgJiYgc3RyZWFtLmxhbWJkYSkge1xuICAgICAgICAgIHN0YXRlLmxhbWJkYSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdHlsZTtcbiAgICAgIH0sXG4gICAgICBpbmRlbnQ6IGZ1bmN0aW9uKHN0YXRlLCB0ZXh0QWZ0ZXIpIHtcbiAgICAgICAgaWYgKHN0YXRlLnRva2VuaXplICE9PSB0b2tlbkJhc2UpIHtcbiAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RhdGUuc2NvcGVzWzBdLm9mZnNldDtcbiAgICAgIH1cbiAgICB9O1xuICB9O1xuXG4gIGlmICghQ29kZU1pcnJvciAmJiAhd2luZG93LkNvZGVNaXJyb3IpIHZhciBDb2RlTWlycm9yID0gd2luZG93LkNvZGVNaXJyb3IgPSByZXF1aXJlKFwiY29kZW1pcnJvclwiKTtcbiAgQ29kZU1pcnJvci5kZWZpbmVNb2RlKFwiaWNlZGNvZmZlZXNjcmlwdFwiLCBDb2RlTWlycm9ySWNlZENvZmZlZVNjcmlwdCk7XG4gIENvZGVNaXJyb3IuZGVmaW5lTUlNRShcInRleHQveC1pY2VkY29mZmVlc2NyaXB0XCIsIFwiaWNlZGNvZmZlZXNjcmlwdFwiKTtcbiAgaWYgKHR5cGVvZiBleHBvcnRzID09IFwib2JqZWN0XCIgJiYgdHlwZW9mIG1vZHVsZSA9PSBcIm9iamVjdFwiKSBtb2R1bGUuZXhwb3J0cyA9IENvZGVNaXJyb3JJY2VkQ29mZmVlU2NyaXB0O1xuXG59KS5jYWxsKHRoaXMpO1xuIiwiLy8gQ29kZU1pcnJvciwgY29weXJpZ2h0IChjKSBieSBNYXJpam4gSGF2ZXJiZWtlIGFuZCBvdGhlcnNcbi8vIERpc3RyaWJ1dGVkIHVuZGVyIGFuIE1JVCBsaWNlbnNlOiBodHRwOi8vY29kZW1pcnJvci5uZXQvTElDRU5TRVxuXG4vLyBUaGlzIGlzIENvZGVNaXJyb3IgKGh0dHA6Ly9jb2RlbWlycm9yLm5ldCksIGEgY29kZSBlZGl0b3Jcbi8vIGltcGxlbWVudGVkIGluIEphdmFTY3JpcHQgb24gdG9wIG9mIHRoZSBicm93c2VyJ3MgRE9NLlxuLy9cbi8vIFlvdSBjYW4gZmluZCBzb21lIHRlY2huaWNhbCBiYWNrZ3JvdW5kIGZvciBzb21lIG9mIHRoZSBjb2RlIGJlbG93XG4vLyBhdCBodHRwOi8vbWFyaWpuaGF2ZXJiZWtlLm5sL2Jsb2cvI2NtLWludGVybmFscyAuXG5cbihmdW5jdGlvbihtb2QpIHtcbiAgaWYgKHR5cGVvZiBleHBvcnRzID09IFwib2JqZWN0XCIgJiYgdHlwZW9mIG1vZHVsZSA9PSBcIm9iamVjdFwiKSAvLyBDb21tb25KU1xuICAgIG1vZHVsZS5leHBvcnRzID0gbW9kKCk7XG4gIGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQpIC8vIEFNRFxuICAgIHJldHVybiBkZWZpbmUoW10sIG1vZCk7XG4gIGVsc2UgLy8gUGxhaW4gYnJvd3NlciBlbnZcbiAgICAodGhpcyB8fCB3aW5kb3cpLkNvZGVNaXJyb3IgPSBtb2QoKTtcbn0pKGZ1bmN0aW9uKCkge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICAvLyBCUk9XU0VSIFNOSUZGSU5HXG5cbiAgLy8gS2x1ZGdlcyBmb3IgYnVncyBhbmQgYmVoYXZpb3IgZGlmZmVyZW5jZXMgdGhhdCBjYW4ndCBiZSBmZWF0dXJlXG4gIC8vIGRldGVjdGVkIGFyZSBlbmFibGVkIGJhc2VkIG9uIHVzZXJBZ2VudCBldGMgc25pZmZpbmcuXG4gIHZhciB1c2VyQWdlbnQgPSBuYXZpZ2F0b3IudXNlckFnZW50O1xuICB2YXIgcGxhdGZvcm0gPSBuYXZpZ2F0b3IucGxhdGZvcm07XG5cbiAgdmFyIGdlY2tvID0gL2dlY2tvXFwvXFxkL2kudGVzdCh1c2VyQWdlbnQpO1xuICB2YXIgaWVfdXB0bzEwID0gL01TSUUgXFxkLy50ZXN0KHVzZXJBZ2VudCk7XG4gIHZhciBpZV8xMXVwID0gL1RyaWRlbnRcXC8oPzpbNy05XXxcXGR7Mix9KVxcLi4qcnY6KFxcZCspLy5leGVjKHVzZXJBZ2VudCk7XG4gIHZhciBpZSA9IGllX3VwdG8xMCB8fCBpZV8xMXVwO1xuICB2YXIgaWVfdmVyc2lvbiA9IGllICYmIChpZV91cHRvMTAgPyBkb2N1bWVudC5kb2N1bWVudE1vZGUgfHwgNiA6IGllXzExdXBbMV0pO1xuICB2YXIgd2Via2l0ID0gL1dlYktpdFxcLy8udGVzdCh1c2VyQWdlbnQpO1xuICB2YXIgcXR3ZWJraXQgPSB3ZWJraXQgJiYgL1F0XFwvXFxkK1xcLlxcZCsvLnRlc3QodXNlckFnZW50KTtcbiAgdmFyIGNocm9tZSA9IC9DaHJvbWVcXC8vLnRlc3QodXNlckFnZW50KTtcbiAgdmFyIHByZXN0byA9IC9PcGVyYVxcLy8udGVzdCh1c2VyQWdlbnQpO1xuICB2YXIgc2FmYXJpID0gL0FwcGxlIENvbXB1dGVyLy50ZXN0KG5hdmlnYXRvci52ZW5kb3IpO1xuICB2YXIgbWFjX2dlTW91bnRhaW5MaW9uID0gL01hYyBPUyBYIDFcXGRcXEQoWzgtOV18XFxkXFxkKVxcRC8udGVzdCh1c2VyQWdlbnQpO1xuICB2YXIgcGhhbnRvbSA9IC9QaGFudG9tSlMvLnRlc3QodXNlckFnZW50KTtcblxuICB2YXIgaW9zID0gL0FwcGxlV2ViS2l0Ly50ZXN0KHVzZXJBZ2VudCkgJiYgL01vYmlsZVxcL1xcdysvLnRlc3QodXNlckFnZW50KTtcbiAgLy8gVGhpcyBpcyB3b2VmdWxseSBpbmNvbXBsZXRlLiBTdWdnZXN0aW9ucyBmb3IgYWx0ZXJuYXRpdmUgbWV0aG9kcyB3ZWxjb21lLlxuICB2YXIgbW9iaWxlID0gaW9zIHx8IC9BbmRyb2lkfHdlYk9TfEJsYWNrQmVycnl8T3BlcmEgTWluaXxPcGVyYSBNb2JpfElFTW9iaWxlL2kudGVzdCh1c2VyQWdlbnQpO1xuICB2YXIgbWFjID0gaW9zIHx8IC9NYWMvLnRlc3QocGxhdGZvcm0pO1xuICB2YXIgY2hyb21lT1MgPSAvXFxiQ3JPU1xcYi8udGVzdCh1c2VyQWdlbnQpO1xuICB2YXIgd2luZG93cyA9IC93aW4vaS50ZXN0KHBsYXRmb3JtKTtcblxuICB2YXIgcHJlc3RvX3ZlcnNpb24gPSBwcmVzdG8gJiYgdXNlckFnZW50Lm1hdGNoKC9WZXJzaW9uXFwvKFxcZCpcXC5cXGQqKS8pO1xuICBpZiAocHJlc3RvX3ZlcnNpb24pIHByZXN0b192ZXJzaW9uID0gTnVtYmVyKHByZXN0b192ZXJzaW9uWzFdKTtcbiAgaWYgKHByZXN0b192ZXJzaW9uICYmIHByZXN0b192ZXJzaW9uID49IDE1KSB7IHByZXN0byA9IGZhbHNlOyB3ZWJraXQgPSB0cnVlOyB9XG4gIC8vIFNvbWUgYnJvd3NlcnMgdXNlIHRoZSB3cm9uZyBldmVudCBwcm9wZXJ0aWVzIHRvIHNpZ25hbCBjbWQvY3RybCBvbiBPUyBYXG4gIHZhciBmbGlwQ3RybENtZCA9IG1hYyAmJiAocXR3ZWJraXQgfHwgcHJlc3RvICYmIChwcmVzdG9fdmVyc2lvbiA9PSBudWxsIHx8IHByZXN0b192ZXJzaW9uIDwgMTIuMTEpKTtcbiAgdmFyIGNhcHR1cmVSaWdodENsaWNrID0gZ2Vja28gfHwgKGllICYmIGllX3ZlcnNpb24gPj0gOSk7XG5cbiAgLy8gT3B0aW1pemUgc29tZSBjb2RlIHdoZW4gdGhlc2UgZmVhdHVyZXMgYXJlIG5vdCB1c2VkLlxuICB2YXIgc2F3UmVhZE9ubHlTcGFucyA9IGZhbHNlLCBzYXdDb2xsYXBzZWRTcGFucyA9IGZhbHNlO1xuXG4gIC8vIEVESVRPUiBDT05TVFJVQ1RPUlxuXG4gIC8vIEEgQ29kZU1pcnJvciBpbnN0YW5jZSByZXByZXNlbnRzIGFuIGVkaXRvci4gVGhpcyBpcyB0aGUgb2JqZWN0XG4gIC8vIHRoYXQgdXNlciBjb2RlIGlzIHVzdWFsbHkgZGVhbGluZyB3aXRoLlxuXG4gIGZ1bmN0aW9uIENvZGVNaXJyb3IocGxhY2UsIG9wdGlvbnMpIHtcbiAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgQ29kZU1pcnJvcikpIHJldHVybiBuZXcgQ29kZU1pcnJvcihwbGFjZSwgb3B0aW9ucyk7XG5cbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zID0gb3B0aW9ucyA/IGNvcHlPYmoob3B0aW9ucykgOiB7fTtcbiAgICAvLyBEZXRlcm1pbmUgZWZmZWN0aXZlIG9wdGlvbnMgYmFzZWQgb24gZ2l2ZW4gdmFsdWVzIGFuZCBkZWZhdWx0cy5cbiAgICBjb3B5T2JqKGRlZmF1bHRzLCBvcHRpb25zLCBmYWxzZSk7XG4gICAgc2V0R3V0dGVyc0ZvckxpbmVOdW1iZXJzKG9wdGlvbnMpO1xuXG4gICAgdmFyIGRvYyA9IG9wdGlvbnMudmFsdWU7XG4gICAgaWYgKHR5cGVvZiBkb2MgPT0gXCJzdHJpbmdcIikgZG9jID0gbmV3IERvYyhkb2MsIG9wdGlvbnMubW9kZSwgbnVsbCwgb3B0aW9ucy5saW5lU2VwYXJhdG9yKTtcbiAgICB0aGlzLmRvYyA9IGRvYztcblxuICAgIHZhciBpbnB1dCA9IG5ldyBDb2RlTWlycm9yLmlucHV0U3R5bGVzW29wdGlvbnMuaW5wdXRTdHlsZV0odGhpcyk7XG4gICAgdmFyIGRpc3BsYXkgPSB0aGlzLmRpc3BsYXkgPSBuZXcgRGlzcGxheShwbGFjZSwgZG9jLCBpbnB1dCk7XG4gICAgZGlzcGxheS53cmFwcGVyLkNvZGVNaXJyb3IgPSB0aGlzO1xuICAgIHVwZGF0ZUd1dHRlcnModGhpcyk7XG4gICAgdGhlbWVDaGFuZ2VkKHRoaXMpO1xuICAgIGlmIChvcHRpb25zLmxpbmVXcmFwcGluZylcbiAgICAgIHRoaXMuZGlzcGxheS53cmFwcGVyLmNsYXNzTmFtZSArPSBcIiBDb2RlTWlycm9yLXdyYXBcIjtcbiAgICBpZiAob3B0aW9ucy5hdXRvZm9jdXMgJiYgIW1vYmlsZSkgZGlzcGxheS5pbnB1dC5mb2N1cygpO1xuICAgIGluaXRTY3JvbGxiYXJzKHRoaXMpO1xuXG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGtleU1hcHM6IFtdLCAgLy8gc3RvcmVzIG1hcHMgYWRkZWQgYnkgYWRkS2V5TWFwXG4gICAgICBvdmVybGF5czogW10sIC8vIGhpZ2hsaWdodGluZyBvdmVybGF5cywgYXMgYWRkZWQgYnkgYWRkT3ZlcmxheVxuICAgICAgbW9kZUdlbjogMCwgICAvLyBidW1wZWQgd2hlbiBtb2RlL292ZXJsYXkgY2hhbmdlcywgdXNlZCB0byBpbnZhbGlkYXRlIGhpZ2hsaWdodGluZyBpbmZvXG4gICAgICBvdmVyd3JpdGU6IGZhbHNlLFxuICAgICAgZGVsYXlpbmdCbHVyRXZlbnQ6IGZhbHNlLFxuICAgICAgZm9jdXNlZDogZmFsc2UsXG4gICAgICBzdXBwcmVzc0VkaXRzOiBmYWxzZSwgLy8gdXNlZCB0byBkaXNhYmxlIGVkaXRpbmcgZHVyaW5nIGtleSBoYW5kbGVycyB3aGVuIGluIHJlYWRPbmx5IG1vZGVcbiAgICAgIHBhc3RlSW5jb21pbmc6IGZhbHNlLCBjdXRJbmNvbWluZzogZmFsc2UsIC8vIGhlbHAgcmVjb2duaXplIHBhc3RlL2N1dCBlZGl0cyBpbiBpbnB1dC5wb2xsXG4gICAgICBzZWxlY3RpbmdUZXh0OiBmYWxzZSxcbiAgICAgIGRyYWdnaW5nVGV4dDogZmFsc2UsXG4gICAgICBoaWdobGlnaHQ6IG5ldyBEZWxheWVkKCksIC8vIHN0b3JlcyBoaWdobGlnaHQgd29ya2VyIHRpbWVvdXRcbiAgICAgIGtleVNlcTogbnVsbCwgIC8vIFVuZmluaXNoZWQga2V5IHNlcXVlbmNlXG4gICAgICBzcGVjaWFsQ2hhcnM6IG51bGxcbiAgICB9O1xuXG4gICAgdmFyIGNtID0gdGhpcztcblxuICAgIC8vIE92ZXJyaWRlIG1hZ2ljIHRleHRhcmVhIGNvbnRlbnQgcmVzdG9yZSB0aGF0IElFIHNvbWV0aW1lcyBkb2VzXG4gICAgLy8gb24gb3VyIGhpZGRlbiB0ZXh0YXJlYSBvbiByZWxvYWRcbiAgICBpZiAoaWUgJiYgaWVfdmVyc2lvbiA8IDExKSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgeyBjbS5kaXNwbGF5LmlucHV0LnJlc2V0KHRydWUpOyB9LCAyMCk7XG5cbiAgICByZWdpc3RlckV2ZW50SGFuZGxlcnModGhpcyk7XG4gICAgZW5zdXJlR2xvYmFsSGFuZGxlcnMoKTtcblxuICAgIHN0YXJ0T3BlcmF0aW9uKHRoaXMpO1xuICAgIHRoaXMuY3VyT3AuZm9yY2VVcGRhdGUgPSB0cnVlO1xuICAgIGF0dGFjaERvYyh0aGlzLCBkb2MpO1xuXG4gICAgaWYgKChvcHRpb25zLmF1dG9mb2N1cyAmJiAhbW9iaWxlKSB8fCBjbS5oYXNGb2N1cygpKVxuICAgICAgc2V0VGltZW91dChiaW5kKG9uRm9jdXMsIHRoaXMpLCAyMCk7XG4gICAgZWxzZVxuICAgICAgb25CbHVyKHRoaXMpO1xuXG4gICAgZm9yICh2YXIgb3B0IGluIG9wdGlvbkhhbmRsZXJzKSBpZiAob3B0aW9uSGFuZGxlcnMuaGFzT3duUHJvcGVydHkob3B0KSlcbiAgICAgIG9wdGlvbkhhbmRsZXJzW29wdF0odGhpcywgb3B0aW9uc1tvcHRdLCBJbml0KTtcbiAgICBtYXliZVVwZGF0ZUxpbmVOdW1iZXJXaWR0aCh0aGlzKTtcbiAgICBpZiAob3B0aW9ucy5maW5pc2hJbml0KSBvcHRpb25zLmZpbmlzaEluaXQodGhpcyk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbml0SG9va3MubGVuZ3RoOyArK2kpIGluaXRIb29rc1tpXSh0aGlzKTtcbiAgICBlbmRPcGVyYXRpb24odGhpcyk7XG4gICAgLy8gU3VwcHJlc3Mgb3B0aW1pemVsZWdpYmlsaXR5IGluIFdlYmtpdCwgc2luY2UgaXQgYnJlYWtzIHRleHRcbiAgICAvLyBtZWFzdXJpbmcgb24gbGluZSB3cmFwcGluZyBib3VuZGFyaWVzLlxuICAgIGlmICh3ZWJraXQgJiYgb3B0aW9ucy5saW5lV3JhcHBpbmcgJiZcbiAgICAgICAgZ2V0Q29tcHV0ZWRTdHlsZShkaXNwbGF5LmxpbmVEaXYpLnRleHRSZW5kZXJpbmcgPT0gXCJvcHRpbWl6ZWxlZ2liaWxpdHlcIilcbiAgICAgIGRpc3BsYXkubGluZURpdi5zdHlsZS50ZXh0UmVuZGVyaW5nID0gXCJhdXRvXCI7XG4gIH1cblxuICAvLyBESVNQTEFZIENPTlNUUlVDVE9SXG5cbiAgLy8gVGhlIGRpc3BsYXkgaGFuZGxlcyB0aGUgRE9NIGludGVncmF0aW9uLCBib3RoIGZvciBpbnB1dCByZWFkaW5nXG4gIC8vIGFuZCBjb250ZW50IGRyYXdpbmcuIEl0IGhvbGRzIHJlZmVyZW5jZXMgdG8gRE9NIG5vZGVzIGFuZFxuICAvLyBkaXNwbGF5LXJlbGF0ZWQgc3RhdGUuXG5cbiAgZnVuY3Rpb24gRGlzcGxheShwbGFjZSwgZG9jLCBpbnB1dCkge1xuICAgIHZhciBkID0gdGhpcztcbiAgICB0aGlzLmlucHV0ID0gaW5wdXQ7XG5cbiAgICAvLyBDb3ZlcnMgYm90dG9tLXJpZ2h0IHNxdWFyZSB3aGVuIGJvdGggc2Nyb2xsYmFycyBhcmUgcHJlc2VudC5cbiAgICBkLnNjcm9sbGJhckZpbGxlciA9IGVsdChcImRpdlwiLCBudWxsLCBcIkNvZGVNaXJyb3Itc2Nyb2xsYmFyLWZpbGxlclwiKTtcbiAgICBkLnNjcm9sbGJhckZpbGxlci5zZXRBdHRyaWJ1dGUoXCJjbS1ub3QtY29udGVudFwiLCBcInRydWVcIik7XG4gICAgLy8gQ292ZXJzIGJvdHRvbSBvZiBndXR0ZXIgd2hlbiBjb3Zlckd1dHRlck5leHRUb1Njcm9sbGJhciBpcyBvblxuICAgIC8vIGFuZCBoIHNjcm9sbGJhciBpcyBwcmVzZW50LlxuICAgIGQuZ3V0dGVyRmlsbGVyID0gZWx0KFwiZGl2XCIsIG51bGwsIFwiQ29kZU1pcnJvci1ndXR0ZXItZmlsbGVyXCIpO1xuICAgIGQuZ3V0dGVyRmlsbGVyLnNldEF0dHJpYnV0ZShcImNtLW5vdC1jb250ZW50XCIsIFwidHJ1ZVwiKTtcbiAgICAvLyBXaWxsIGNvbnRhaW4gdGhlIGFjdHVhbCBjb2RlLCBwb3NpdGlvbmVkIHRvIGNvdmVyIHRoZSB2aWV3cG9ydC5cbiAgICBkLmxpbmVEaXYgPSBlbHQoXCJkaXZcIiwgbnVsbCwgXCJDb2RlTWlycm9yLWNvZGVcIik7XG4gICAgLy8gRWxlbWVudHMgYXJlIGFkZGVkIHRvIHRoZXNlIHRvIHJlcHJlc2VudCBzZWxlY3Rpb24gYW5kIGN1cnNvcnMuXG4gICAgZC5zZWxlY3Rpb25EaXYgPSBlbHQoXCJkaXZcIiwgbnVsbCwgbnVsbCwgXCJwb3NpdGlvbjogcmVsYXRpdmU7IHotaW5kZXg6IDFcIik7XG4gICAgZC5jdXJzb3JEaXYgPSBlbHQoXCJkaXZcIiwgbnVsbCwgXCJDb2RlTWlycm9yLWN1cnNvcnNcIik7XG4gICAgLy8gQSB2aXNpYmlsaXR5OiBoaWRkZW4gZWxlbWVudCB1c2VkIHRvIGZpbmQgdGhlIHNpemUgb2YgdGhpbmdzLlxuICAgIGQubWVhc3VyZSA9IGVsdChcImRpdlwiLCBudWxsLCBcIkNvZGVNaXJyb3ItbWVhc3VyZVwiKTtcbiAgICAvLyBXaGVuIGxpbmVzIG91dHNpZGUgb2YgdGhlIHZpZXdwb3J0IGFyZSBtZWFzdXJlZCwgdGhleSBhcmUgZHJhd24gaW4gdGhpcy5cbiAgICBkLmxpbmVNZWFzdXJlID0gZWx0KFwiZGl2XCIsIG51bGwsIFwiQ29kZU1pcnJvci1tZWFzdXJlXCIpO1xuICAgIC8vIFdyYXBzIGV2ZXJ5dGhpbmcgdGhhdCBuZWVkcyB0byBleGlzdCBpbnNpZGUgdGhlIHZlcnRpY2FsbHktcGFkZGVkIGNvb3JkaW5hdGUgc3lzdGVtXG4gICAgZC5saW5lU3BhY2UgPSBlbHQoXCJkaXZcIiwgW2QubWVhc3VyZSwgZC5saW5lTWVhc3VyZSwgZC5zZWxlY3Rpb25EaXYsIGQuY3Vyc29yRGl2LCBkLmxpbmVEaXZdLFxuICAgICAgICAgICAgICAgICAgICAgIG51bGwsIFwicG9zaXRpb246IHJlbGF0aXZlOyBvdXRsaW5lOiBub25lXCIpO1xuICAgIC8vIE1vdmVkIGFyb3VuZCBpdHMgcGFyZW50IHRvIGNvdmVyIHZpc2libGUgdmlldy5cbiAgICBkLm1vdmVyID0gZWx0KFwiZGl2XCIsIFtlbHQoXCJkaXZcIiwgW2QubGluZVNwYWNlXSwgXCJDb2RlTWlycm9yLWxpbmVzXCIpXSwgbnVsbCwgXCJwb3NpdGlvbjogcmVsYXRpdmVcIik7XG4gICAgLy8gU2V0IHRvIHRoZSBoZWlnaHQgb2YgdGhlIGRvY3VtZW50LCBhbGxvd2luZyBzY3JvbGxpbmcuXG4gICAgZC5zaXplciA9IGVsdChcImRpdlwiLCBbZC5tb3Zlcl0sIFwiQ29kZU1pcnJvci1zaXplclwiKTtcbiAgICBkLnNpemVyV2lkdGggPSBudWxsO1xuICAgIC8vIEJlaGF2aW9yIG9mIGVsdHMgd2l0aCBvdmVyZmxvdzogYXV0byBhbmQgcGFkZGluZyBpc1xuICAgIC8vIGluY29uc2lzdGVudCBhY3Jvc3MgYnJvd3NlcnMuIFRoaXMgaXMgdXNlZCB0byBlbnN1cmUgdGhlXG4gICAgLy8gc2Nyb2xsYWJsZSBhcmVhIGlzIGJpZyBlbm91Z2guXG4gICAgZC5oZWlnaHRGb3JjZXIgPSBlbHQoXCJkaXZcIiwgbnVsbCwgbnVsbCwgXCJwb3NpdGlvbjogYWJzb2x1dGU7IGhlaWdodDogXCIgKyBzY3JvbGxlckdhcCArIFwicHg7IHdpZHRoOiAxcHg7XCIpO1xuICAgIC8vIFdpbGwgY29udGFpbiB0aGUgZ3V0dGVycywgaWYgYW55LlxuICAgIGQuZ3V0dGVycyA9IGVsdChcImRpdlwiLCBudWxsLCBcIkNvZGVNaXJyb3ItZ3V0dGVyc1wiKTtcbiAgICBkLmxpbmVHdXR0ZXIgPSBudWxsO1xuICAgIC8vIEFjdHVhbCBzY3JvbGxhYmxlIGVsZW1lbnQuXG4gICAgZC5zY3JvbGxlciA9IGVsdChcImRpdlwiLCBbZC5zaXplciwgZC5oZWlnaHRGb3JjZXIsIGQuZ3V0dGVyc10sIFwiQ29kZU1pcnJvci1zY3JvbGxcIik7XG4gICAgZC5zY3JvbGxlci5zZXRBdHRyaWJ1dGUoXCJ0YWJJbmRleFwiLCBcIi0xXCIpO1xuICAgIC8vIFRoZSBlbGVtZW50IGluIHdoaWNoIHRoZSBlZGl0b3IgbGl2ZXMuXG4gICAgZC53cmFwcGVyID0gZWx0KFwiZGl2XCIsIFtkLnNjcm9sbGJhckZpbGxlciwgZC5ndXR0ZXJGaWxsZXIsIGQuc2Nyb2xsZXJdLCBcIkNvZGVNaXJyb3JcIik7XG5cbiAgICAvLyBXb3JrIGFyb3VuZCBJRTcgei1pbmRleCBidWcgKG5vdCBwZXJmZWN0LCBoZW5jZSBJRTcgbm90IHJlYWxseSBiZWluZyBzdXBwb3J0ZWQpXG4gICAgaWYgKGllICYmIGllX3ZlcnNpb24gPCA4KSB7IGQuZ3V0dGVycy5zdHlsZS56SW5kZXggPSAtMTsgZC5zY3JvbGxlci5zdHlsZS5wYWRkaW5nUmlnaHQgPSAwOyB9XG4gICAgaWYgKCF3ZWJraXQgJiYgIShnZWNrbyAmJiBtb2JpbGUpKSBkLnNjcm9sbGVyLmRyYWdnYWJsZSA9IHRydWU7XG5cbiAgICBpZiAocGxhY2UpIHtcbiAgICAgIGlmIChwbGFjZS5hcHBlbmRDaGlsZCkgcGxhY2UuYXBwZW5kQ2hpbGQoZC53cmFwcGVyKTtcbiAgICAgIGVsc2UgcGxhY2UoZC53cmFwcGVyKTtcbiAgICB9XG5cbiAgICAvLyBDdXJyZW50IHJlbmRlcmVkIHJhbmdlIChtYXkgYmUgYmlnZ2VyIHRoYW4gdGhlIHZpZXcgd2luZG93KS5cbiAgICBkLnZpZXdGcm9tID0gZC52aWV3VG8gPSBkb2MuZmlyc3Q7XG4gICAgZC5yZXBvcnRlZFZpZXdGcm9tID0gZC5yZXBvcnRlZFZpZXdUbyA9IGRvYy5maXJzdDtcbiAgICAvLyBJbmZvcm1hdGlvbiBhYm91dCB0aGUgcmVuZGVyZWQgbGluZXMuXG4gICAgZC52aWV3ID0gW107XG4gICAgZC5yZW5kZXJlZFZpZXcgPSBudWxsO1xuICAgIC8vIEhvbGRzIGluZm8gYWJvdXQgYSBzaW5nbGUgcmVuZGVyZWQgbGluZSB3aGVuIGl0IHdhcyByZW5kZXJlZFxuICAgIC8vIGZvciBtZWFzdXJlbWVudCwgd2hpbGUgbm90IGluIHZpZXcuXG4gICAgZC5leHRlcm5hbE1lYXN1cmVkID0gbnVsbDtcbiAgICAvLyBFbXB0eSBzcGFjZSAoaW4gcGl4ZWxzKSBhYm92ZSB0aGUgdmlld1xuICAgIGQudmlld09mZnNldCA9IDA7XG4gICAgZC5sYXN0V3JhcEhlaWdodCA9IGQubGFzdFdyYXBXaWR0aCA9IDA7XG4gICAgZC51cGRhdGVMaW5lTnVtYmVycyA9IG51bGw7XG5cbiAgICBkLm5hdGl2ZUJhcldpZHRoID0gZC5iYXJIZWlnaHQgPSBkLmJhcldpZHRoID0gMDtcbiAgICBkLnNjcm9sbGJhcnNDbGlwcGVkID0gZmFsc2U7XG5cbiAgICAvLyBVc2VkIHRvIG9ubHkgcmVzaXplIHRoZSBsaW5lIG51bWJlciBndXR0ZXIgd2hlbiBuZWNlc3NhcnkgKHdoZW5cbiAgICAvLyB0aGUgYW1vdW50IG9mIGxpbmVzIGNyb3NzZXMgYSBib3VuZGFyeSB0aGF0IG1ha2VzIGl0cyB3aWR0aCBjaGFuZ2UpXG4gICAgZC5saW5lTnVtV2lkdGggPSBkLmxpbmVOdW1Jbm5lcldpZHRoID0gZC5saW5lTnVtQ2hhcnMgPSBudWxsO1xuICAgIC8vIFNldCB0byB0cnVlIHdoZW4gYSBub24taG9yaXpvbnRhbC1zY3JvbGxpbmcgbGluZSB3aWRnZXQgaXNcbiAgICAvLyBhZGRlZC4gQXMgYW4gb3B0aW1pemF0aW9uLCBsaW5lIHdpZGdldCBhbGlnbmluZyBpcyBza2lwcGVkIHdoZW5cbiAgICAvLyB0aGlzIGlzIGZhbHNlLlxuICAgIGQuYWxpZ25XaWRnZXRzID0gZmFsc2U7XG5cbiAgICBkLmNhY2hlZENoYXJXaWR0aCA9IGQuY2FjaGVkVGV4dEhlaWdodCA9IGQuY2FjaGVkUGFkZGluZ0ggPSBudWxsO1xuXG4gICAgLy8gVHJhY2tzIHRoZSBtYXhpbXVtIGxpbmUgbGVuZ3RoIHNvIHRoYXQgdGhlIGhvcml6b250YWwgc2Nyb2xsYmFyXG4gICAgLy8gY2FuIGJlIGtlcHQgc3RhdGljIHdoZW4gc2Nyb2xsaW5nLlxuICAgIGQubWF4TGluZSA9IG51bGw7XG4gICAgZC5tYXhMaW5lTGVuZ3RoID0gMDtcbiAgICBkLm1heExpbmVDaGFuZ2VkID0gZmFsc2U7XG5cbiAgICAvLyBVc2VkIGZvciBtZWFzdXJpbmcgd2hlZWwgc2Nyb2xsaW5nIGdyYW51bGFyaXR5XG4gICAgZC53aGVlbERYID0gZC53aGVlbERZID0gZC53aGVlbFN0YXJ0WCA9IGQud2hlZWxTdGFydFkgPSBudWxsO1xuXG4gICAgLy8gVHJ1ZSB3aGVuIHNoaWZ0IGlzIGhlbGQgZG93bi5cbiAgICBkLnNoaWZ0ID0gZmFsc2U7XG5cbiAgICAvLyBVc2VkIHRvIHRyYWNrIHdoZXRoZXIgYW55dGhpbmcgaGFwcGVuZWQgc2luY2UgdGhlIGNvbnRleHQgbWVudVxuICAgIC8vIHdhcyBvcGVuZWQuXG4gICAgZC5zZWxGb3JDb250ZXh0TWVudSA9IG51bGw7XG5cbiAgICBkLmFjdGl2ZVRvdWNoID0gbnVsbDtcblxuICAgIGlucHV0LmluaXQoZCk7XG4gIH1cblxuICAvLyBTVEFURSBVUERBVEVTXG5cbiAgLy8gVXNlZCB0byBnZXQgdGhlIGVkaXRvciBpbnRvIGEgY29uc2lzdGVudCBzdGF0ZSBhZ2FpbiB3aGVuIG9wdGlvbnMgY2hhbmdlLlxuXG4gIGZ1bmN0aW9uIGxvYWRNb2RlKGNtKSB7XG4gICAgY20uZG9jLm1vZGUgPSBDb2RlTWlycm9yLmdldE1vZGUoY20ub3B0aW9ucywgY20uZG9jLm1vZGVPcHRpb24pO1xuICAgIHJlc2V0TW9kZVN0YXRlKGNtKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlc2V0TW9kZVN0YXRlKGNtKSB7XG4gICAgY20uZG9jLml0ZXIoZnVuY3Rpb24obGluZSkge1xuICAgICAgaWYgKGxpbmUuc3RhdGVBZnRlcikgbGluZS5zdGF0ZUFmdGVyID0gbnVsbDtcbiAgICAgIGlmIChsaW5lLnN0eWxlcykgbGluZS5zdHlsZXMgPSBudWxsO1xuICAgIH0pO1xuICAgIGNtLmRvYy5mcm9udGllciA9IGNtLmRvYy5maXJzdDtcbiAgICBzdGFydFdvcmtlcihjbSwgMTAwKTtcbiAgICBjbS5zdGF0ZS5tb2RlR2VuKys7XG4gICAgaWYgKGNtLmN1ck9wKSByZWdDaGFuZ2UoY20pO1xuICB9XG5cbiAgZnVuY3Rpb24gd3JhcHBpbmdDaGFuZ2VkKGNtKSB7XG4gICAgaWYgKGNtLm9wdGlvbnMubGluZVdyYXBwaW5nKSB7XG4gICAgICBhZGRDbGFzcyhjbS5kaXNwbGF5LndyYXBwZXIsIFwiQ29kZU1pcnJvci13cmFwXCIpO1xuICAgICAgY20uZGlzcGxheS5zaXplci5zdHlsZS5taW5XaWR0aCA9IFwiXCI7XG4gICAgICBjbS5kaXNwbGF5LnNpemVyV2lkdGggPSBudWxsO1xuICAgIH0gZWxzZSB7XG4gICAgICBybUNsYXNzKGNtLmRpc3BsYXkud3JhcHBlciwgXCJDb2RlTWlycm9yLXdyYXBcIik7XG4gICAgICBmaW5kTWF4TGluZShjbSk7XG4gICAgfVxuICAgIGVzdGltYXRlTGluZUhlaWdodHMoY20pO1xuICAgIHJlZ0NoYW5nZShjbSk7XG4gICAgY2xlYXJDYWNoZXMoY20pO1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXt1cGRhdGVTY3JvbGxiYXJzKGNtKTt9LCAxMDApO1xuICB9XG5cbiAgLy8gUmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgZXN0aW1hdGVzIHRoZSBoZWlnaHQgb2YgYSBsaW5lLCB0byB1c2UgYXNcbiAgLy8gZmlyc3QgYXBwcm94aW1hdGlvbiB1bnRpbCB0aGUgbGluZSBiZWNvbWVzIHZpc2libGUgKGFuZCBpcyB0aHVzXG4gIC8vIHByb3Blcmx5IG1lYXN1cmFibGUpLlxuICBmdW5jdGlvbiBlc3RpbWF0ZUhlaWdodChjbSkge1xuICAgIHZhciB0aCA9IHRleHRIZWlnaHQoY20uZGlzcGxheSksIHdyYXBwaW5nID0gY20ub3B0aW9ucy5saW5lV3JhcHBpbmc7XG4gICAgdmFyIHBlckxpbmUgPSB3cmFwcGluZyAmJiBNYXRoLm1heCg1LCBjbS5kaXNwbGF5LnNjcm9sbGVyLmNsaWVudFdpZHRoIC8gY2hhcldpZHRoKGNtLmRpc3BsYXkpIC0gMyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGxpbmUpIHtcbiAgICAgIGlmIChsaW5lSXNIaWRkZW4oY20uZG9jLCBsaW5lKSkgcmV0dXJuIDA7XG5cbiAgICAgIHZhciB3aWRnZXRzSGVpZ2h0ID0gMDtcbiAgICAgIGlmIChsaW5lLndpZGdldHMpIGZvciAodmFyIGkgPSAwOyBpIDwgbGluZS53aWRnZXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChsaW5lLndpZGdldHNbaV0uaGVpZ2h0KSB3aWRnZXRzSGVpZ2h0ICs9IGxpbmUud2lkZ2V0c1tpXS5oZWlnaHQ7XG4gICAgICB9XG5cbiAgICAgIGlmICh3cmFwcGluZylcbiAgICAgICAgcmV0dXJuIHdpZGdldHNIZWlnaHQgKyAoTWF0aC5jZWlsKGxpbmUudGV4dC5sZW5ndGggLyBwZXJMaW5lKSB8fCAxKSAqIHRoO1xuICAgICAgZWxzZVxuICAgICAgICByZXR1cm4gd2lkZ2V0c0hlaWdodCArIHRoO1xuICAgIH07XG4gIH1cblxuICBmdW5jdGlvbiBlc3RpbWF0ZUxpbmVIZWlnaHRzKGNtKSB7XG4gICAgdmFyIGRvYyA9IGNtLmRvYywgZXN0ID0gZXN0aW1hdGVIZWlnaHQoY20pO1xuICAgIGRvYy5pdGVyKGZ1bmN0aW9uKGxpbmUpIHtcbiAgICAgIHZhciBlc3RIZWlnaHQgPSBlc3QobGluZSk7XG4gICAgICBpZiAoZXN0SGVpZ2h0ICE9IGxpbmUuaGVpZ2h0KSB1cGRhdGVMaW5lSGVpZ2h0KGxpbmUsIGVzdEhlaWdodCk7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiB0aGVtZUNoYW5nZWQoY20pIHtcbiAgICBjbS5kaXNwbGF5LndyYXBwZXIuY2xhc3NOYW1lID0gY20uZGlzcGxheS53cmFwcGVyLmNsYXNzTmFtZS5yZXBsYWNlKC9cXHMqY20tcy1cXFMrL2csIFwiXCIpICtcbiAgICAgIGNtLm9wdGlvbnMudGhlbWUucmVwbGFjZSgvKF58XFxzKVxccyovZywgXCIgY20tcy1cIik7XG4gICAgY2xlYXJDYWNoZXMoY20pO1xuICB9XG5cbiAgZnVuY3Rpb24gZ3V0dGVyc0NoYW5nZWQoY20pIHtcbiAgICB1cGRhdGVHdXR0ZXJzKGNtKTtcbiAgICByZWdDaGFuZ2UoY20pO1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXthbGlnbkhvcml6b250YWxseShjbSk7fSwgMjApO1xuICB9XG5cbiAgLy8gUmVidWlsZCB0aGUgZ3V0dGVyIGVsZW1lbnRzLCBlbnN1cmUgdGhlIG1hcmdpbiB0byB0aGUgbGVmdCBvZiB0aGVcbiAgLy8gY29kZSBtYXRjaGVzIHRoZWlyIHdpZHRoLlxuICBmdW5jdGlvbiB1cGRhdGVHdXR0ZXJzKGNtKSB7XG4gICAgdmFyIGd1dHRlcnMgPSBjbS5kaXNwbGF5Lmd1dHRlcnMsIHNwZWNzID0gY20ub3B0aW9ucy5ndXR0ZXJzO1xuICAgIHJlbW92ZUNoaWxkcmVuKGd1dHRlcnMpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3BlY3MubGVuZ3RoOyArK2kpIHtcbiAgICAgIHZhciBndXR0ZXJDbGFzcyA9IHNwZWNzW2ldO1xuICAgICAgdmFyIGdFbHQgPSBndXR0ZXJzLmFwcGVuZENoaWxkKGVsdChcImRpdlwiLCBudWxsLCBcIkNvZGVNaXJyb3ItZ3V0dGVyIFwiICsgZ3V0dGVyQ2xhc3MpKTtcbiAgICAgIGlmIChndXR0ZXJDbGFzcyA9PSBcIkNvZGVNaXJyb3ItbGluZW51bWJlcnNcIikge1xuICAgICAgICBjbS5kaXNwbGF5LmxpbmVHdXR0ZXIgPSBnRWx0O1xuICAgICAgICBnRWx0LnN0eWxlLndpZHRoID0gKGNtLmRpc3BsYXkubGluZU51bVdpZHRoIHx8IDEpICsgXCJweFwiO1xuICAgICAgfVxuICAgIH1cbiAgICBndXR0ZXJzLnN0eWxlLmRpc3BsYXkgPSBpID8gXCJcIiA6IFwibm9uZVwiO1xuICAgIHVwZGF0ZUd1dHRlclNwYWNlKGNtKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZUd1dHRlclNwYWNlKGNtKSB7XG4gICAgdmFyIHdpZHRoID0gY20uZGlzcGxheS5ndXR0ZXJzLm9mZnNldFdpZHRoO1xuICAgIGNtLmRpc3BsYXkuc2l6ZXIuc3R5bGUubWFyZ2luTGVmdCA9IHdpZHRoICsgXCJweFwiO1xuICB9XG5cbiAgLy8gQ29tcHV0ZSB0aGUgY2hhcmFjdGVyIGxlbmd0aCBvZiBhIGxpbmUsIHRha2luZyBpbnRvIGFjY291bnRcbiAgLy8gY29sbGFwc2VkIHJhbmdlcyAoc2VlIG1hcmtUZXh0KSB0aGF0IG1pZ2h0IGhpZGUgcGFydHMsIGFuZCBqb2luXG4gIC8vIG90aGVyIGxpbmVzIG9udG8gaXQuXG4gIGZ1bmN0aW9uIGxpbmVMZW5ndGgobGluZSkge1xuICAgIGlmIChsaW5lLmhlaWdodCA9PSAwKSByZXR1cm4gMDtcbiAgICB2YXIgbGVuID0gbGluZS50ZXh0Lmxlbmd0aCwgbWVyZ2VkLCBjdXIgPSBsaW5lO1xuICAgIHdoaWxlIChtZXJnZWQgPSBjb2xsYXBzZWRTcGFuQXRTdGFydChjdXIpKSB7XG4gICAgICB2YXIgZm91bmQgPSBtZXJnZWQuZmluZCgwLCB0cnVlKTtcbiAgICAgIGN1ciA9IGZvdW5kLmZyb20ubGluZTtcbiAgICAgIGxlbiArPSBmb3VuZC5mcm9tLmNoIC0gZm91bmQudG8uY2g7XG4gICAgfVxuICAgIGN1ciA9IGxpbmU7XG4gICAgd2hpbGUgKG1lcmdlZCA9IGNvbGxhcHNlZFNwYW5BdEVuZChjdXIpKSB7XG4gICAgICB2YXIgZm91bmQgPSBtZXJnZWQuZmluZCgwLCB0cnVlKTtcbiAgICAgIGxlbiAtPSBjdXIudGV4dC5sZW5ndGggLSBmb3VuZC5mcm9tLmNoO1xuICAgICAgY3VyID0gZm91bmQudG8ubGluZTtcbiAgICAgIGxlbiArPSBjdXIudGV4dC5sZW5ndGggLSBmb3VuZC50by5jaDtcbiAgICB9XG4gICAgcmV0dXJuIGxlbjtcbiAgfVxuXG4gIC8vIEZpbmQgdGhlIGxvbmdlc3QgbGluZSBpbiB0aGUgZG9jdW1lbnQuXG4gIGZ1bmN0aW9uIGZpbmRNYXhMaW5lKGNtKSB7XG4gICAgdmFyIGQgPSBjbS5kaXNwbGF5LCBkb2MgPSBjbS5kb2M7XG4gICAgZC5tYXhMaW5lID0gZ2V0TGluZShkb2MsIGRvYy5maXJzdCk7XG4gICAgZC5tYXhMaW5lTGVuZ3RoID0gbGluZUxlbmd0aChkLm1heExpbmUpO1xuICAgIGQubWF4TGluZUNoYW5nZWQgPSB0cnVlO1xuICAgIGRvYy5pdGVyKGZ1bmN0aW9uKGxpbmUpIHtcbiAgICAgIHZhciBsZW4gPSBsaW5lTGVuZ3RoKGxpbmUpO1xuICAgICAgaWYgKGxlbiA+IGQubWF4TGluZUxlbmd0aCkge1xuICAgICAgICBkLm1heExpbmVMZW5ndGggPSBsZW47XG4gICAgICAgIGQubWF4TGluZSA9IGxpbmU7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvLyBNYWtlIHN1cmUgdGhlIGd1dHRlcnMgb3B0aW9ucyBjb250YWlucyB0aGUgZWxlbWVudFxuICAvLyBcIkNvZGVNaXJyb3ItbGluZW51bWJlcnNcIiB3aGVuIHRoZSBsaW5lTnVtYmVycyBvcHRpb24gaXMgdHJ1ZS5cbiAgZnVuY3Rpb24gc2V0R3V0dGVyc0ZvckxpbmVOdW1iZXJzKG9wdGlvbnMpIHtcbiAgICB2YXIgZm91bmQgPSBpbmRleE9mKG9wdGlvbnMuZ3V0dGVycywgXCJDb2RlTWlycm9yLWxpbmVudW1iZXJzXCIpO1xuICAgIGlmIChmb3VuZCA9PSAtMSAmJiBvcHRpb25zLmxpbmVOdW1iZXJzKSB7XG4gICAgICBvcHRpb25zLmd1dHRlcnMgPSBvcHRpb25zLmd1dHRlcnMuY29uY2F0KFtcIkNvZGVNaXJyb3ItbGluZW51bWJlcnNcIl0pO1xuICAgIH0gZWxzZSBpZiAoZm91bmQgPiAtMSAmJiAhb3B0aW9ucy5saW5lTnVtYmVycykge1xuICAgICAgb3B0aW9ucy5ndXR0ZXJzID0gb3B0aW9ucy5ndXR0ZXJzLnNsaWNlKDApO1xuICAgICAgb3B0aW9ucy5ndXR0ZXJzLnNwbGljZShmb3VuZCwgMSk7XG4gICAgfVxuICB9XG5cbiAgLy8gU0NST0xMQkFSU1xuXG4gIC8vIFByZXBhcmUgRE9NIHJlYWRzIG5lZWRlZCB0byB1cGRhdGUgdGhlIHNjcm9sbGJhcnMuIERvbmUgaW4gb25lXG4gIC8vIHNob3QgdG8gbWluaW1pemUgdXBkYXRlL21lYXN1cmUgcm91bmR0cmlwcy5cbiAgZnVuY3Rpb24gbWVhc3VyZUZvclNjcm9sbGJhcnMoY20pIHtcbiAgICB2YXIgZCA9IGNtLmRpc3BsYXksIGd1dHRlclcgPSBkLmd1dHRlcnMub2Zmc2V0V2lkdGg7XG4gICAgdmFyIGRvY0ggPSBNYXRoLnJvdW5kKGNtLmRvYy5oZWlnaHQgKyBwYWRkaW5nVmVydChjbS5kaXNwbGF5KSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNsaWVudEhlaWdodDogZC5zY3JvbGxlci5jbGllbnRIZWlnaHQsXG4gICAgICB2aWV3SGVpZ2h0OiBkLndyYXBwZXIuY2xpZW50SGVpZ2h0LFxuICAgICAgc2Nyb2xsV2lkdGg6IGQuc2Nyb2xsZXIuc2Nyb2xsV2lkdGgsIGNsaWVudFdpZHRoOiBkLnNjcm9sbGVyLmNsaWVudFdpZHRoLFxuICAgICAgdmlld1dpZHRoOiBkLndyYXBwZXIuY2xpZW50V2lkdGgsXG4gICAgICBiYXJMZWZ0OiBjbS5vcHRpb25zLmZpeGVkR3V0dGVyID8gZ3V0dGVyVyA6IDAsXG4gICAgICBkb2NIZWlnaHQ6IGRvY0gsXG4gICAgICBzY3JvbGxIZWlnaHQ6IGRvY0ggKyBzY3JvbGxHYXAoY20pICsgZC5iYXJIZWlnaHQsXG4gICAgICBuYXRpdmVCYXJXaWR0aDogZC5uYXRpdmVCYXJXaWR0aCxcbiAgICAgIGd1dHRlcldpZHRoOiBndXR0ZXJXXG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIE5hdGl2ZVNjcm9sbGJhcnMocGxhY2UsIHNjcm9sbCwgY20pIHtcbiAgICB0aGlzLmNtID0gY207XG4gICAgdmFyIHZlcnQgPSB0aGlzLnZlcnQgPSBlbHQoXCJkaXZcIiwgW2VsdChcImRpdlwiLCBudWxsLCBudWxsLCBcIm1pbi13aWR0aDogMXB4XCIpXSwgXCJDb2RlTWlycm9yLXZzY3JvbGxiYXJcIik7XG4gICAgdmFyIGhvcml6ID0gdGhpcy5ob3JpeiA9IGVsdChcImRpdlwiLCBbZWx0KFwiZGl2XCIsIG51bGwsIG51bGwsIFwiaGVpZ2h0OiAxMDAlOyBtaW4taGVpZ2h0OiAxcHhcIildLCBcIkNvZGVNaXJyb3ItaHNjcm9sbGJhclwiKTtcbiAgICBwbGFjZSh2ZXJ0KTsgcGxhY2UoaG9yaXopO1xuXG4gICAgb24odmVydCwgXCJzY3JvbGxcIiwgZnVuY3Rpb24oKSB7XG4gICAgICBpZiAodmVydC5jbGllbnRIZWlnaHQpIHNjcm9sbCh2ZXJ0LnNjcm9sbFRvcCwgXCJ2ZXJ0aWNhbFwiKTtcbiAgICB9KTtcbiAgICBvbihob3JpeiwgXCJzY3JvbGxcIiwgZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoaG9yaXouY2xpZW50V2lkdGgpIHNjcm9sbChob3Jpei5zY3JvbGxMZWZ0LCBcImhvcml6b250YWxcIik7XG4gICAgfSk7XG5cbiAgICB0aGlzLmNoZWNrZWRaZXJvV2lkdGggPSBmYWxzZTtcbiAgICAvLyBOZWVkIHRvIHNldCBhIG1pbmltdW0gd2lkdGggdG8gc2VlIHRoZSBzY3JvbGxiYXIgb24gSUU3IChidXQgbXVzdCBub3Qgc2V0IGl0IG9uIElFOCkuXG4gICAgaWYgKGllICYmIGllX3ZlcnNpb24gPCA4KSB0aGlzLmhvcml6LnN0eWxlLm1pbkhlaWdodCA9IHRoaXMudmVydC5zdHlsZS5taW5XaWR0aCA9IFwiMThweFwiO1xuICB9XG5cbiAgTmF0aXZlU2Nyb2xsYmFycy5wcm90b3R5cGUgPSBjb3B5T2JqKHtcbiAgICB1cGRhdGU6IGZ1bmN0aW9uKG1lYXN1cmUpIHtcbiAgICAgIHZhciBuZWVkc0ggPSBtZWFzdXJlLnNjcm9sbFdpZHRoID4gbWVhc3VyZS5jbGllbnRXaWR0aCArIDE7XG4gICAgICB2YXIgbmVlZHNWID0gbWVhc3VyZS5zY3JvbGxIZWlnaHQgPiBtZWFzdXJlLmNsaWVudEhlaWdodCArIDE7XG4gICAgICB2YXIgc1dpZHRoID0gbWVhc3VyZS5uYXRpdmVCYXJXaWR0aDtcblxuICAgICAgaWYgKG5lZWRzVikge1xuICAgICAgICB0aGlzLnZlcnQuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgdGhpcy52ZXJ0LnN0eWxlLmJvdHRvbSA9IG5lZWRzSCA/IHNXaWR0aCArIFwicHhcIiA6IFwiMFwiO1xuICAgICAgICB2YXIgdG90YWxIZWlnaHQgPSBtZWFzdXJlLnZpZXdIZWlnaHQgLSAobmVlZHNIID8gc1dpZHRoIDogMCk7XG4gICAgICAgIC8vIEEgYnVnIGluIElFOCBjYW4gY2F1c2UgdGhpcyB2YWx1ZSB0byBiZSBuZWdhdGl2ZSwgc28gZ3VhcmQgaXQuXG4gICAgICAgIHRoaXMudmVydC5maXJzdENoaWxkLnN0eWxlLmhlaWdodCA9XG4gICAgICAgICAgTWF0aC5tYXgoMCwgbWVhc3VyZS5zY3JvbGxIZWlnaHQgLSBtZWFzdXJlLmNsaWVudEhlaWdodCArIHRvdGFsSGVpZ2h0KSArIFwicHhcIjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMudmVydC5zdHlsZS5kaXNwbGF5ID0gXCJcIjtcbiAgICAgICAgdGhpcy52ZXJ0LmZpcnN0Q2hpbGQuc3R5bGUuaGVpZ2h0ID0gXCIwXCI7XG4gICAgICB9XG5cbiAgICAgIGlmIChuZWVkc0gpIHtcbiAgICAgICAgdGhpcy5ob3Jpei5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICB0aGlzLmhvcml6LnN0eWxlLnJpZ2h0ID0gbmVlZHNWID8gc1dpZHRoICsgXCJweFwiIDogXCIwXCI7XG4gICAgICAgIHRoaXMuaG9yaXouc3R5bGUubGVmdCA9IG1lYXN1cmUuYmFyTGVmdCArIFwicHhcIjtcbiAgICAgICAgdmFyIHRvdGFsV2lkdGggPSBtZWFzdXJlLnZpZXdXaWR0aCAtIG1lYXN1cmUuYmFyTGVmdCAtIChuZWVkc1YgPyBzV2lkdGggOiAwKTtcbiAgICAgICAgdGhpcy5ob3Jpei5maXJzdENoaWxkLnN0eWxlLndpZHRoID1cbiAgICAgICAgICAobWVhc3VyZS5zY3JvbGxXaWR0aCAtIG1lYXN1cmUuY2xpZW50V2lkdGggKyB0b3RhbFdpZHRoKSArIFwicHhcIjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuaG9yaXouc3R5bGUuZGlzcGxheSA9IFwiXCI7XG4gICAgICAgIHRoaXMuaG9yaXouZmlyc3RDaGlsZC5zdHlsZS53aWR0aCA9IFwiMFwiO1xuICAgICAgfVxuXG4gICAgICBpZiAoIXRoaXMuY2hlY2tlZFplcm9XaWR0aCAmJiBtZWFzdXJlLmNsaWVudEhlaWdodCA+IDApIHtcbiAgICAgICAgaWYgKHNXaWR0aCA9PSAwKSB0aGlzLnplcm9XaWR0aEhhY2soKTtcbiAgICAgICAgdGhpcy5jaGVja2VkWmVyb1dpZHRoID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHtyaWdodDogbmVlZHNWID8gc1dpZHRoIDogMCwgYm90dG9tOiBuZWVkc0ggPyBzV2lkdGggOiAwfTtcbiAgICB9LFxuICAgIHNldFNjcm9sbExlZnQ6IGZ1bmN0aW9uKHBvcykge1xuICAgICAgaWYgKHRoaXMuaG9yaXouc2Nyb2xsTGVmdCAhPSBwb3MpIHRoaXMuaG9yaXouc2Nyb2xsTGVmdCA9IHBvcztcbiAgICAgIGlmICh0aGlzLmRpc2FibGVIb3JpeikgdGhpcy5lbmFibGVaZXJvV2lkdGhCYXIodGhpcy5ob3JpeiwgdGhpcy5kaXNhYmxlSG9yaXopO1xuICAgIH0sXG4gICAgc2V0U2Nyb2xsVG9wOiBmdW5jdGlvbihwb3MpIHtcbiAgICAgIGlmICh0aGlzLnZlcnQuc2Nyb2xsVG9wICE9IHBvcykgdGhpcy52ZXJ0LnNjcm9sbFRvcCA9IHBvcztcbiAgICAgIGlmICh0aGlzLmRpc2FibGVWZXJ0KSB0aGlzLmVuYWJsZVplcm9XaWR0aEJhcih0aGlzLnZlcnQsIHRoaXMuZGlzYWJsZVZlcnQpO1xuICAgIH0sXG4gICAgemVyb1dpZHRoSGFjazogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgdyA9IG1hYyAmJiAhbWFjX2dlTW91bnRhaW5MaW9uID8gXCIxMnB4XCIgOiBcIjE4cHhcIjtcbiAgICAgIHRoaXMuaG9yaXouc3R5bGUuaGVpZ2h0ID0gdGhpcy52ZXJ0LnN0eWxlLndpZHRoID0gdztcbiAgICAgIHRoaXMuaG9yaXouc3R5bGUucG9pbnRlckV2ZW50cyA9IHRoaXMudmVydC5zdHlsZS5wb2ludGVyRXZlbnRzID0gXCJub25lXCI7XG4gICAgICB0aGlzLmRpc2FibGVIb3JpeiA9IG5ldyBEZWxheWVkO1xuICAgICAgdGhpcy5kaXNhYmxlVmVydCA9IG5ldyBEZWxheWVkO1xuICAgIH0sXG4gICAgZW5hYmxlWmVyb1dpZHRoQmFyOiBmdW5jdGlvbihiYXIsIGRlbGF5KSB7XG4gICAgICBiYXIuc3R5bGUucG9pbnRlckV2ZW50cyA9IFwiYXV0b1wiO1xuICAgICAgZnVuY3Rpb24gbWF5YmVEaXNhYmxlKCkge1xuICAgICAgICAvLyBUbyBmaW5kIG91dCB3aGV0aGVyIHRoZSBzY3JvbGxiYXIgaXMgc3RpbGwgdmlzaWJsZSwgd2VcbiAgICAgICAgLy8gY2hlY2sgd2hldGhlciB0aGUgZWxlbWVudCB1bmRlciB0aGUgcGl4ZWwgaW4gdGhlIGJvdHRvbVxuICAgICAgICAvLyBsZWZ0IGNvcm5lciBvZiB0aGUgc2Nyb2xsYmFyIGJveCBpcyB0aGUgc2Nyb2xsYmFyIGJveFxuICAgICAgICAvLyBpdHNlbGYgKHdoZW4gdGhlIGJhciBpcyBzdGlsbCB2aXNpYmxlKSBvciBpdHMgZmlsbGVyIGNoaWxkXG4gICAgICAgIC8vICh3aGVuIHRoZSBiYXIgaXMgaGlkZGVuKS4gSWYgaXQgaXMgc3RpbGwgdmlzaWJsZSwgd2Uga2VlcFxuICAgICAgICAvLyBpdCBlbmFibGVkLCBpZiBpdCdzIGhpZGRlbiwgd2UgZGlzYWJsZSBwb2ludGVyIGV2ZW50cy5cbiAgICAgICAgdmFyIGJveCA9IGJhci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgdmFyIGVsdCA9IGRvY3VtZW50LmVsZW1lbnRGcm9tUG9pbnQoYm94LmxlZnQgKyAxLCBib3guYm90dG9tIC0gMSk7XG4gICAgICAgIGlmIChlbHQgIT0gYmFyKSBiYXIuc3R5bGUucG9pbnRlckV2ZW50cyA9IFwibm9uZVwiO1xuICAgICAgICBlbHNlIGRlbGF5LnNldCgxMDAwLCBtYXliZURpc2FibGUpO1xuICAgICAgfVxuICAgICAgZGVsYXkuc2V0KDEwMDAsIG1heWJlRGlzYWJsZSk7XG4gICAgfSxcbiAgICBjbGVhcjogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcGFyZW50ID0gdGhpcy5ob3Jpei5wYXJlbnROb2RlO1xuICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKHRoaXMuaG9yaXopO1xuICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKHRoaXMudmVydCk7XG4gICAgfVxuICB9LCBOYXRpdmVTY3JvbGxiYXJzLnByb3RvdHlwZSk7XG5cbiAgZnVuY3Rpb24gTnVsbFNjcm9sbGJhcnMoKSB7fVxuXG4gIE51bGxTY3JvbGxiYXJzLnByb3RvdHlwZSA9IGNvcHlPYmooe1xuICAgIHVwZGF0ZTogZnVuY3Rpb24oKSB7IHJldHVybiB7Ym90dG9tOiAwLCByaWdodDogMH07IH0sXG4gICAgc2V0U2Nyb2xsTGVmdDogZnVuY3Rpb24oKSB7fSxcbiAgICBzZXRTY3JvbGxUb3A6IGZ1bmN0aW9uKCkge30sXG4gICAgY2xlYXI6IGZ1bmN0aW9uKCkge31cbiAgfSwgTnVsbFNjcm9sbGJhcnMucHJvdG90eXBlKTtcblxuICBDb2RlTWlycm9yLnNjcm9sbGJhck1vZGVsID0ge1wibmF0aXZlXCI6IE5hdGl2ZVNjcm9sbGJhcnMsIFwibnVsbFwiOiBOdWxsU2Nyb2xsYmFyc307XG5cbiAgZnVuY3Rpb24gaW5pdFNjcm9sbGJhcnMoY20pIHtcbiAgICBpZiAoY20uZGlzcGxheS5zY3JvbGxiYXJzKSB7XG4gICAgICBjbS5kaXNwbGF5LnNjcm9sbGJhcnMuY2xlYXIoKTtcbiAgICAgIGlmIChjbS5kaXNwbGF5LnNjcm9sbGJhcnMuYWRkQ2xhc3MpXG4gICAgICAgIHJtQ2xhc3MoY20uZGlzcGxheS53cmFwcGVyLCBjbS5kaXNwbGF5LnNjcm9sbGJhcnMuYWRkQ2xhc3MpO1xuICAgIH1cblxuICAgIGNtLmRpc3BsYXkuc2Nyb2xsYmFycyA9IG5ldyBDb2RlTWlycm9yLnNjcm9sbGJhck1vZGVsW2NtLm9wdGlvbnMuc2Nyb2xsYmFyU3R5bGVdKGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgIGNtLmRpc3BsYXkud3JhcHBlci5pbnNlcnRCZWZvcmUobm9kZSwgY20uZGlzcGxheS5zY3JvbGxiYXJGaWxsZXIpO1xuICAgICAgLy8gUHJldmVudCBjbGlja3MgaW4gdGhlIHNjcm9sbGJhcnMgZnJvbSBraWxsaW5nIGZvY3VzXG4gICAgICBvbihub2RlLCBcIm1vdXNlZG93blwiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKGNtLnN0YXRlLmZvY3VzZWQpIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IGNtLmRpc3BsYXkuaW5wdXQuZm9jdXMoKTsgfSwgMCk7XG4gICAgICB9KTtcbiAgICAgIG5vZGUuc2V0QXR0cmlidXRlKFwiY20tbm90LWNvbnRlbnRcIiwgXCJ0cnVlXCIpO1xuICAgIH0sIGZ1bmN0aW9uKHBvcywgYXhpcykge1xuICAgICAgaWYgKGF4aXMgPT0gXCJob3Jpem9udGFsXCIpIHNldFNjcm9sbExlZnQoY20sIHBvcyk7XG4gICAgICBlbHNlIHNldFNjcm9sbFRvcChjbSwgcG9zKTtcbiAgICB9LCBjbSk7XG4gICAgaWYgKGNtLmRpc3BsYXkuc2Nyb2xsYmFycy5hZGRDbGFzcylcbiAgICAgIGFkZENsYXNzKGNtLmRpc3BsYXkud3JhcHBlciwgY20uZGlzcGxheS5zY3JvbGxiYXJzLmFkZENsYXNzKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZVNjcm9sbGJhcnMoY20sIG1lYXN1cmUpIHtcbiAgICBpZiAoIW1lYXN1cmUpIG1lYXN1cmUgPSBtZWFzdXJlRm9yU2Nyb2xsYmFycyhjbSk7XG4gICAgdmFyIHN0YXJ0V2lkdGggPSBjbS5kaXNwbGF5LmJhcldpZHRoLCBzdGFydEhlaWdodCA9IGNtLmRpc3BsYXkuYmFySGVpZ2h0O1xuICAgIHVwZGF0ZVNjcm9sbGJhcnNJbm5lcihjbSwgbWVhc3VyZSk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCA0ICYmIHN0YXJ0V2lkdGggIT0gY20uZGlzcGxheS5iYXJXaWR0aCB8fCBzdGFydEhlaWdodCAhPSBjbS5kaXNwbGF5LmJhckhlaWdodDsgaSsrKSB7XG4gICAgICBpZiAoc3RhcnRXaWR0aCAhPSBjbS5kaXNwbGF5LmJhcldpZHRoICYmIGNtLm9wdGlvbnMubGluZVdyYXBwaW5nKVxuICAgICAgICB1cGRhdGVIZWlnaHRzSW5WaWV3cG9ydChjbSk7XG4gICAgICB1cGRhdGVTY3JvbGxiYXJzSW5uZXIoY20sIG1lYXN1cmVGb3JTY3JvbGxiYXJzKGNtKSk7XG4gICAgICBzdGFydFdpZHRoID0gY20uZGlzcGxheS5iYXJXaWR0aDsgc3RhcnRIZWlnaHQgPSBjbS5kaXNwbGF5LmJhckhlaWdodDtcbiAgICB9XG4gIH1cblxuICAvLyBSZS1zeW5jaHJvbml6ZSB0aGUgZmFrZSBzY3JvbGxiYXJzIHdpdGggdGhlIGFjdHVhbCBzaXplIG9mIHRoZVxuICAvLyBjb250ZW50LlxuICBmdW5jdGlvbiB1cGRhdGVTY3JvbGxiYXJzSW5uZXIoY20sIG1lYXN1cmUpIHtcbiAgICB2YXIgZCA9IGNtLmRpc3BsYXk7XG4gICAgdmFyIHNpemVzID0gZC5zY3JvbGxiYXJzLnVwZGF0ZShtZWFzdXJlKTtcblxuICAgIGQuc2l6ZXIuc3R5bGUucGFkZGluZ1JpZ2h0ID0gKGQuYmFyV2lkdGggPSBzaXplcy5yaWdodCkgKyBcInB4XCI7XG4gICAgZC5zaXplci5zdHlsZS5wYWRkaW5nQm90dG9tID0gKGQuYmFySGVpZ2h0ID0gc2l6ZXMuYm90dG9tKSArIFwicHhcIjtcbiAgICBkLmhlaWdodEZvcmNlci5zdHlsZS5ib3JkZXJCb3R0b20gPSBzaXplcy5ib3R0b20gKyBcInB4IHNvbGlkIHRyYW5zcGFyZW50XCJcblxuICAgIGlmIChzaXplcy5yaWdodCAmJiBzaXplcy5ib3R0b20pIHtcbiAgICAgIGQuc2Nyb2xsYmFyRmlsbGVyLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICBkLnNjcm9sbGJhckZpbGxlci5zdHlsZS5oZWlnaHQgPSBzaXplcy5ib3R0b20gKyBcInB4XCI7XG4gICAgICBkLnNjcm9sbGJhckZpbGxlci5zdHlsZS53aWR0aCA9IHNpemVzLnJpZ2h0ICsgXCJweFwiO1xuICAgIH0gZWxzZSBkLnNjcm9sbGJhckZpbGxlci5zdHlsZS5kaXNwbGF5ID0gXCJcIjtcbiAgICBpZiAoc2l6ZXMuYm90dG9tICYmIGNtLm9wdGlvbnMuY292ZXJHdXR0ZXJOZXh0VG9TY3JvbGxiYXIgJiYgY20ub3B0aW9ucy5maXhlZEd1dHRlcikge1xuICAgICAgZC5ndXR0ZXJGaWxsZXIuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgIGQuZ3V0dGVyRmlsbGVyLnN0eWxlLmhlaWdodCA9IHNpemVzLmJvdHRvbSArIFwicHhcIjtcbiAgICAgIGQuZ3V0dGVyRmlsbGVyLnN0eWxlLndpZHRoID0gbWVhc3VyZS5ndXR0ZXJXaWR0aCArIFwicHhcIjtcbiAgICB9IGVsc2UgZC5ndXR0ZXJGaWxsZXIuc3R5bGUuZGlzcGxheSA9IFwiXCI7XG4gIH1cblxuICAvLyBDb21wdXRlIHRoZSBsaW5lcyB0aGF0IGFyZSB2aXNpYmxlIGluIGEgZ2l2ZW4gdmlld3BvcnQgKGRlZmF1bHRzXG4gIC8vIHRoZSB0aGUgY3VycmVudCBzY3JvbGwgcG9zaXRpb24pLiB2aWV3cG9ydCBtYXkgY29udGFpbiB0b3AsXG4gIC8vIGhlaWdodCwgYW5kIGVuc3VyZSAoc2VlIG9wLnNjcm9sbFRvUG9zKSBwcm9wZXJ0aWVzLlxuICBmdW5jdGlvbiB2aXNpYmxlTGluZXMoZGlzcGxheSwgZG9jLCB2aWV3cG9ydCkge1xuICAgIHZhciB0b3AgPSB2aWV3cG9ydCAmJiB2aWV3cG9ydC50b3AgIT0gbnVsbCA/IE1hdGgubWF4KDAsIHZpZXdwb3J0LnRvcCkgOiBkaXNwbGF5LnNjcm9sbGVyLnNjcm9sbFRvcDtcbiAgICB0b3AgPSBNYXRoLmZsb29yKHRvcCAtIHBhZGRpbmdUb3AoZGlzcGxheSkpO1xuICAgIHZhciBib3R0b20gPSB2aWV3cG9ydCAmJiB2aWV3cG9ydC5ib3R0b20gIT0gbnVsbCA/IHZpZXdwb3J0LmJvdHRvbSA6IHRvcCArIGRpc3BsYXkud3JhcHBlci5jbGllbnRIZWlnaHQ7XG5cbiAgICB2YXIgZnJvbSA9IGxpbmVBdEhlaWdodChkb2MsIHRvcCksIHRvID0gbGluZUF0SGVpZ2h0KGRvYywgYm90dG9tKTtcbiAgICAvLyBFbnN1cmUgaXMgYSB7ZnJvbToge2xpbmUsIGNofSwgdG86IHtsaW5lLCBjaH19IG9iamVjdCwgYW5kXG4gICAgLy8gZm9yY2VzIHRob3NlIGxpbmVzIGludG8gdGhlIHZpZXdwb3J0IChpZiBwb3NzaWJsZSkuXG4gICAgaWYgKHZpZXdwb3J0ICYmIHZpZXdwb3J0LmVuc3VyZSkge1xuICAgICAgdmFyIGVuc3VyZUZyb20gPSB2aWV3cG9ydC5lbnN1cmUuZnJvbS5saW5lLCBlbnN1cmVUbyA9IHZpZXdwb3J0LmVuc3VyZS50by5saW5lO1xuICAgICAgaWYgKGVuc3VyZUZyb20gPCBmcm9tKSB7XG4gICAgICAgIGZyb20gPSBlbnN1cmVGcm9tO1xuICAgICAgICB0byA9IGxpbmVBdEhlaWdodChkb2MsIGhlaWdodEF0TGluZShnZXRMaW5lKGRvYywgZW5zdXJlRnJvbSkpICsgZGlzcGxheS53cmFwcGVyLmNsaWVudEhlaWdodCk7XG4gICAgICB9IGVsc2UgaWYgKE1hdGgubWluKGVuc3VyZVRvLCBkb2MubGFzdExpbmUoKSkgPj0gdG8pIHtcbiAgICAgICAgZnJvbSA9IGxpbmVBdEhlaWdodChkb2MsIGhlaWdodEF0TGluZShnZXRMaW5lKGRvYywgZW5zdXJlVG8pKSAtIGRpc3BsYXkud3JhcHBlci5jbGllbnRIZWlnaHQpO1xuICAgICAgICB0byA9IGVuc3VyZVRvO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4ge2Zyb206IGZyb20sIHRvOiBNYXRoLm1heCh0bywgZnJvbSArIDEpfTtcbiAgfVxuXG4gIC8vIExJTkUgTlVNQkVSU1xuXG4gIC8vIFJlLWFsaWduIGxpbmUgbnVtYmVycyBhbmQgZ3V0dGVyIG1hcmtzIHRvIGNvbXBlbnNhdGUgZm9yXG4gIC8vIGhvcml6b250YWwgc2Nyb2xsaW5nLlxuICBmdW5jdGlvbiBhbGlnbkhvcml6b250YWxseShjbSkge1xuICAgIHZhciBkaXNwbGF5ID0gY20uZGlzcGxheSwgdmlldyA9IGRpc3BsYXkudmlldztcbiAgICBpZiAoIWRpc3BsYXkuYWxpZ25XaWRnZXRzICYmICghZGlzcGxheS5ndXR0ZXJzLmZpcnN0Q2hpbGQgfHwgIWNtLm9wdGlvbnMuZml4ZWRHdXR0ZXIpKSByZXR1cm47XG4gICAgdmFyIGNvbXAgPSBjb21wZW5zYXRlRm9ySFNjcm9sbChkaXNwbGF5KSAtIGRpc3BsYXkuc2Nyb2xsZXIuc2Nyb2xsTGVmdCArIGNtLmRvYy5zY3JvbGxMZWZ0O1xuICAgIHZhciBndXR0ZXJXID0gZGlzcGxheS5ndXR0ZXJzLm9mZnNldFdpZHRoLCBsZWZ0ID0gY29tcCArIFwicHhcIjtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZpZXcubGVuZ3RoOyBpKyspIGlmICghdmlld1tpXS5oaWRkZW4pIHtcbiAgICAgIGlmIChjbS5vcHRpb25zLmZpeGVkR3V0dGVyICYmIHZpZXdbaV0uZ3V0dGVyKVxuICAgICAgICB2aWV3W2ldLmd1dHRlci5zdHlsZS5sZWZ0ID0gbGVmdDtcbiAgICAgIHZhciBhbGlnbiA9IHZpZXdbaV0uYWxpZ25hYmxlO1xuICAgICAgaWYgKGFsaWduKSBmb3IgKHZhciBqID0gMDsgaiA8IGFsaWduLmxlbmd0aDsgaisrKVxuICAgICAgICBhbGlnbltqXS5zdHlsZS5sZWZ0ID0gbGVmdDtcbiAgICB9XG4gICAgaWYgKGNtLm9wdGlvbnMuZml4ZWRHdXR0ZXIpXG4gICAgICBkaXNwbGF5Lmd1dHRlcnMuc3R5bGUubGVmdCA9IChjb21wICsgZ3V0dGVyVykgKyBcInB4XCI7XG4gIH1cblxuICAvLyBVc2VkIHRvIGVuc3VyZSB0aGF0IHRoZSBsaW5lIG51bWJlciBndXR0ZXIgaXMgc3RpbGwgdGhlIHJpZ2h0XG4gIC8vIHNpemUgZm9yIHRoZSBjdXJyZW50IGRvY3VtZW50IHNpemUuIFJldHVybnMgdHJ1ZSB3aGVuIGFuIHVwZGF0ZVxuICAvLyBpcyBuZWVkZWQuXG4gIGZ1bmN0aW9uIG1heWJlVXBkYXRlTGluZU51bWJlcldpZHRoKGNtKSB7XG4gICAgaWYgKCFjbS5vcHRpb25zLmxpbmVOdW1iZXJzKSByZXR1cm4gZmFsc2U7XG4gICAgdmFyIGRvYyA9IGNtLmRvYywgbGFzdCA9IGxpbmVOdW1iZXJGb3IoY20ub3B0aW9ucywgZG9jLmZpcnN0ICsgZG9jLnNpemUgLSAxKSwgZGlzcGxheSA9IGNtLmRpc3BsYXk7XG4gICAgaWYgKGxhc3QubGVuZ3RoICE9IGRpc3BsYXkubGluZU51bUNoYXJzKSB7XG4gICAgICB2YXIgdGVzdCA9IGRpc3BsYXkubWVhc3VyZS5hcHBlbmRDaGlsZChlbHQoXCJkaXZcIiwgW2VsdChcImRpdlwiLCBsYXN0KV0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJDb2RlTWlycm9yLWxpbmVudW1iZXIgQ29kZU1pcnJvci1ndXR0ZXItZWx0XCIpKTtcbiAgICAgIHZhciBpbm5lclcgPSB0ZXN0LmZpcnN0Q2hpbGQub2Zmc2V0V2lkdGgsIHBhZGRpbmcgPSB0ZXN0Lm9mZnNldFdpZHRoIC0gaW5uZXJXO1xuICAgICAgZGlzcGxheS5saW5lR3V0dGVyLnN0eWxlLndpZHRoID0gXCJcIjtcbiAgICAgIGRpc3BsYXkubGluZU51bUlubmVyV2lkdGggPSBNYXRoLm1heChpbm5lclcsIGRpc3BsYXkubGluZUd1dHRlci5vZmZzZXRXaWR0aCAtIHBhZGRpbmcpICsgMTtcbiAgICAgIGRpc3BsYXkubGluZU51bVdpZHRoID0gZGlzcGxheS5saW5lTnVtSW5uZXJXaWR0aCArIHBhZGRpbmc7XG4gICAgICBkaXNwbGF5LmxpbmVOdW1DaGFycyA9IGRpc3BsYXkubGluZU51bUlubmVyV2lkdGggPyBsYXN0Lmxlbmd0aCA6IC0xO1xuICAgICAgZGlzcGxheS5saW5lR3V0dGVyLnN0eWxlLndpZHRoID0gZGlzcGxheS5saW5lTnVtV2lkdGggKyBcInB4XCI7XG4gICAgICB1cGRhdGVHdXR0ZXJTcGFjZShjbSk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgZnVuY3Rpb24gbGluZU51bWJlckZvcihvcHRpb25zLCBpKSB7XG4gICAgcmV0dXJuIFN0cmluZyhvcHRpb25zLmxpbmVOdW1iZXJGb3JtYXR0ZXIoaSArIG9wdGlvbnMuZmlyc3RMaW5lTnVtYmVyKSk7XG4gIH1cblxuICAvLyBDb21wdXRlcyBkaXNwbGF5LnNjcm9sbGVyLnNjcm9sbExlZnQgKyBkaXNwbGF5Lmd1dHRlcnMub2Zmc2V0V2lkdGgsXG4gIC8vIGJ1dCB1c2luZyBnZXRCb3VuZGluZ0NsaWVudFJlY3QgdG8gZ2V0IGEgc3ViLXBpeGVsLWFjY3VyYXRlXG4gIC8vIHJlc3VsdC5cbiAgZnVuY3Rpb24gY29tcGVuc2F0ZUZvckhTY3JvbGwoZGlzcGxheSkge1xuICAgIHJldHVybiBkaXNwbGF5LnNjcm9sbGVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQgLSBkaXNwbGF5LnNpemVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQ7XG4gIH1cblxuICAvLyBESVNQTEFZIERSQVdJTkdcblxuICBmdW5jdGlvbiBEaXNwbGF5VXBkYXRlKGNtLCB2aWV3cG9ydCwgZm9yY2UpIHtcbiAgICB2YXIgZGlzcGxheSA9IGNtLmRpc3BsYXk7XG5cbiAgICB0aGlzLnZpZXdwb3J0ID0gdmlld3BvcnQ7XG4gICAgLy8gU3RvcmUgc29tZSB2YWx1ZXMgdGhhdCB3ZSdsbCBuZWVkIGxhdGVyIChidXQgZG9uJ3Qgd2FudCB0byBmb3JjZSBhIHJlbGF5b3V0IGZvcilcbiAgICB0aGlzLnZpc2libGUgPSB2aXNpYmxlTGluZXMoZGlzcGxheSwgY20uZG9jLCB2aWV3cG9ydCk7XG4gICAgdGhpcy5lZGl0b3JJc0hpZGRlbiA9ICFkaXNwbGF5LndyYXBwZXIub2Zmc2V0V2lkdGg7XG4gICAgdGhpcy53cmFwcGVySGVpZ2h0ID0gZGlzcGxheS53cmFwcGVyLmNsaWVudEhlaWdodDtcbiAgICB0aGlzLndyYXBwZXJXaWR0aCA9IGRpc3BsYXkud3JhcHBlci5jbGllbnRXaWR0aDtcbiAgICB0aGlzLm9sZERpc3BsYXlXaWR0aCA9IGRpc3BsYXlXaWR0aChjbSk7XG4gICAgdGhpcy5mb3JjZSA9IGZvcmNlO1xuICAgIHRoaXMuZGltcyA9IGdldERpbWVuc2lvbnMoY20pO1xuICAgIHRoaXMuZXZlbnRzID0gW107XG4gIH1cblxuICBEaXNwbGF5VXBkYXRlLnByb3RvdHlwZS5zaWduYWwgPSBmdW5jdGlvbihlbWl0dGVyLCB0eXBlKSB7XG4gICAgaWYgKGhhc0hhbmRsZXIoZW1pdHRlciwgdHlwZSkpXG4gICAgICB0aGlzLmV2ZW50cy5wdXNoKGFyZ3VtZW50cyk7XG4gIH07XG4gIERpc3BsYXlVcGRhdGUucHJvdG90eXBlLmZpbmlzaCA9IGZ1bmN0aW9uKCkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5ldmVudHMubGVuZ3RoOyBpKyspXG4gICAgICBzaWduYWwuYXBwbHkobnVsbCwgdGhpcy5ldmVudHNbaV0pO1xuICB9O1xuXG4gIGZ1bmN0aW9uIG1heWJlQ2xpcFNjcm9sbGJhcnMoY20pIHtcbiAgICB2YXIgZGlzcGxheSA9IGNtLmRpc3BsYXk7XG4gICAgaWYgKCFkaXNwbGF5LnNjcm9sbGJhcnNDbGlwcGVkICYmIGRpc3BsYXkuc2Nyb2xsZXIub2Zmc2V0V2lkdGgpIHtcbiAgICAgIGRpc3BsYXkubmF0aXZlQmFyV2lkdGggPSBkaXNwbGF5LnNjcm9sbGVyLm9mZnNldFdpZHRoIC0gZGlzcGxheS5zY3JvbGxlci5jbGllbnRXaWR0aDtcbiAgICAgIGRpc3BsYXkuaGVpZ2h0Rm9yY2VyLnN0eWxlLmhlaWdodCA9IHNjcm9sbEdhcChjbSkgKyBcInB4XCI7XG4gICAgICBkaXNwbGF5LnNpemVyLnN0eWxlLm1hcmdpbkJvdHRvbSA9IC1kaXNwbGF5Lm5hdGl2ZUJhcldpZHRoICsgXCJweFwiO1xuICAgICAgZGlzcGxheS5zaXplci5zdHlsZS5ib3JkZXJSaWdodFdpZHRoID0gc2Nyb2xsR2FwKGNtKSArIFwicHhcIjtcbiAgICAgIGRpc3BsYXkuc2Nyb2xsYmFyc0NsaXBwZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIC8vIERvZXMgdGhlIGFjdHVhbCB1cGRhdGluZyBvZiB0aGUgbGluZSBkaXNwbGF5LiBCYWlscyBvdXRcbiAgLy8gKHJldHVybmluZyBmYWxzZSkgd2hlbiB0aGVyZSBpcyBub3RoaW5nIHRvIGJlIGRvbmUgYW5kIGZvcmNlZCBpc1xuICAvLyBmYWxzZS5cbiAgZnVuY3Rpb24gdXBkYXRlRGlzcGxheUlmTmVlZGVkKGNtLCB1cGRhdGUpIHtcbiAgICB2YXIgZGlzcGxheSA9IGNtLmRpc3BsYXksIGRvYyA9IGNtLmRvYztcblxuICAgIGlmICh1cGRhdGUuZWRpdG9ySXNIaWRkZW4pIHtcbiAgICAgIHJlc2V0VmlldyhjbSk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gQmFpbCBvdXQgaWYgdGhlIHZpc2libGUgYXJlYSBpcyBhbHJlYWR5IHJlbmRlcmVkIGFuZCBub3RoaW5nIGNoYW5nZWQuXG4gICAgaWYgKCF1cGRhdGUuZm9yY2UgJiZcbiAgICAgICAgdXBkYXRlLnZpc2libGUuZnJvbSA+PSBkaXNwbGF5LnZpZXdGcm9tICYmIHVwZGF0ZS52aXNpYmxlLnRvIDw9IGRpc3BsYXkudmlld1RvICYmXG4gICAgICAgIChkaXNwbGF5LnVwZGF0ZUxpbmVOdW1iZXJzID09IG51bGwgfHwgZGlzcGxheS51cGRhdGVMaW5lTnVtYmVycyA+PSBkaXNwbGF5LnZpZXdUbykgJiZcbiAgICAgICAgZGlzcGxheS5yZW5kZXJlZFZpZXcgPT0gZGlzcGxheS52aWV3ICYmIGNvdW50RGlydHlWaWV3KGNtKSA9PSAwKVxuICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgaWYgKG1heWJlVXBkYXRlTGluZU51bWJlcldpZHRoKGNtKSkge1xuICAgICAgcmVzZXRWaWV3KGNtKTtcbiAgICAgIHVwZGF0ZS5kaW1zID0gZ2V0RGltZW5zaW9ucyhjbSk7XG4gICAgfVxuXG4gICAgLy8gQ29tcHV0ZSBhIHN1aXRhYmxlIG5ldyB2aWV3cG9ydCAoZnJvbSAmIHRvKVxuICAgIHZhciBlbmQgPSBkb2MuZmlyc3QgKyBkb2Muc2l6ZTtcbiAgICB2YXIgZnJvbSA9IE1hdGgubWF4KHVwZGF0ZS52aXNpYmxlLmZyb20gLSBjbS5vcHRpb25zLnZpZXdwb3J0TWFyZ2luLCBkb2MuZmlyc3QpO1xuICAgIHZhciB0byA9IE1hdGgubWluKGVuZCwgdXBkYXRlLnZpc2libGUudG8gKyBjbS5vcHRpb25zLnZpZXdwb3J0TWFyZ2luKTtcbiAgICBpZiAoZGlzcGxheS52aWV3RnJvbSA8IGZyb20gJiYgZnJvbSAtIGRpc3BsYXkudmlld0Zyb20gPCAyMCkgZnJvbSA9IE1hdGgubWF4KGRvYy5maXJzdCwgZGlzcGxheS52aWV3RnJvbSk7XG4gICAgaWYgKGRpc3BsYXkudmlld1RvID4gdG8gJiYgZGlzcGxheS52aWV3VG8gLSB0byA8IDIwKSB0byA9IE1hdGgubWluKGVuZCwgZGlzcGxheS52aWV3VG8pO1xuICAgIGlmIChzYXdDb2xsYXBzZWRTcGFucykge1xuICAgICAgZnJvbSA9IHZpc3VhbExpbmVObyhjbS5kb2MsIGZyb20pO1xuICAgICAgdG8gPSB2aXN1YWxMaW5lRW5kTm8oY20uZG9jLCB0byk7XG4gICAgfVxuXG4gICAgdmFyIGRpZmZlcmVudCA9IGZyb20gIT0gZGlzcGxheS52aWV3RnJvbSB8fCB0byAhPSBkaXNwbGF5LnZpZXdUbyB8fFxuICAgICAgZGlzcGxheS5sYXN0V3JhcEhlaWdodCAhPSB1cGRhdGUud3JhcHBlckhlaWdodCB8fCBkaXNwbGF5Lmxhc3RXcmFwV2lkdGggIT0gdXBkYXRlLndyYXBwZXJXaWR0aDtcbiAgICBhZGp1c3RWaWV3KGNtLCBmcm9tLCB0byk7XG5cbiAgICBkaXNwbGF5LnZpZXdPZmZzZXQgPSBoZWlnaHRBdExpbmUoZ2V0TGluZShjbS5kb2MsIGRpc3BsYXkudmlld0Zyb20pKTtcbiAgICAvLyBQb3NpdGlvbiB0aGUgbW92ZXIgZGl2IHRvIGFsaWduIHdpdGggdGhlIGN1cnJlbnQgc2Nyb2xsIHBvc2l0aW9uXG4gICAgY20uZGlzcGxheS5tb3Zlci5zdHlsZS50b3AgPSBkaXNwbGF5LnZpZXdPZmZzZXQgKyBcInB4XCI7XG5cbiAgICB2YXIgdG9VcGRhdGUgPSBjb3VudERpcnR5VmlldyhjbSk7XG4gICAgaWYgKCFkaWZmZXJlbnQgJiYgdG9VcGRhdGUgPT0gMCAmJiAhdXBkYXRlLmZvcmNlICYmIGRpc3BsYXkucmVuZGVyZWRWaWV3ID09IGRpc3BsYXkudmlldyAmJlxuICAgICAgICAoZGlzcGxheS51cGRhdGVMaW5lTnVtYmVycyA9PSBudWxsIHx8IGRpc3BsYXkudXBkYXRlTGluZU51bWJlcnMgPj0gZGlzcGxheS52aWV3VG8pKVxuICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgLy8gRm9yIGJpZyBjaGFuZ2VzLCB3ZSBoaWRlIHRoZSBlbmNsb3NpbmcgZWxlbWVudCBkdXJpbmcgdGhlXG4gICAgLy8gdXBkYXRlLCBzaW5jZSB0aGF0IHNwZWVkcyB1cCB0aGUgb3BlcmF0aW9ucyBvbiBtb3N0IGJyb3dzZXJzLlxuICAgIHZhciBmb2N1c2VkID0gYWN0aXZlRWx0KCk7XG4gICAgaWYgKHRvVXBkYXRlID4gNCkgZGlzcGxheS5saW5lRGl2LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICBwYXRjaERpc3BsYXkoY20sIGRpc3BsYXkudXBkYXRlTGluZU51bWJlcnMsIHVwZGF0ZS5kaW1zKTtcbiAgICBpZiAodG9VcGRhdGUgPiA0KSBkaXNwbGF5LmxpbmVEaXYuc3R5bGUuZGlzcGxheSA9IFwiXCI7XG4gICAgZGlzcGxheS5yZW5kZXJlZFZpZXcgPSBkaXNwbGF5LnZpZXc7XG4gICAgLy8gVGhlcmUgbWlnaHQgaGF2ZSBiZWVuIGEgd2lkZ2V0IHdpdGggYSBmb2N1c2VkIGVsZW1lbnQgdGhhdCBnb3RcbiAgICAvLyBoaWRkZW4gb3IgdXBkYXRlZCwgaWYgc28gcmUtZm9jdXMgaXQuXG4gICAgaWYgKGZvY3VzZWQgJiYgYWN0aXZlRWx0KCkgIT0gZm9jdXNlZCAmJiBmb2N1c2VkLm9mZnNldEhlaWdodCkgZm9jdXNlZC5mb2N1cygpO1xuXG4gICAgLy8gUHJldmVudCBzZWxlY3Rpb24gYW5kIGN1cnNvcnMgZnJvbSBpbnRlcmZlcmluZyB3aXRoIHRoZSBzY3JvbGxcbiAgICAvLyB3aWR0aCBhbmQgaGVpZ2h0LlxuICAgIHJlbW92ZUNoaWxkcmVuKGRpc3BsYXkuY3Vyc29yRGl2KTtcbiAgICByZW1vdmVDaGlsZHJlbihkaXNwbGF5LnNlbGVjdGlvbkRpdik7XG4gICAgZGlzcGxheS5ndXR0ZXJzLnN0eWxlLmhlaWdodCA9IGRpc3BsYXkuc2l6ZXIuc3R5bGUubWluSGVpZ2h0ID0gMDtcblxuICAgIGlmIChkaWZmZXJlbnQpIHtcbiAgICAgIGRpc3BsYXkubGFzdFdyYXBIZWlnaHQgPSB1cGRhdGUud3JhcHBlckhlaWdodDtcbiAgICAgIGRpc3BsYXkubGFzdFdyYXBXaWR0aCA9IHVwZGF0ZS53cmFwcGVyV2lkdGg7XG4gICAgICBzdGFydFdvcmtlcihjbSwgNDAwKTtcbiAgICB9XG5cbiAgICBkaXNwbGF5LnVwZGF0ZUxpbmVOdW1iZXJzID0gbnVsbDtcblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgZnVuY3Rpb24gcG9zdFVwZGF0ZURpc3BsYXkoY20sIHVwZGF0ZSkge1xuICAgIHZhciB2aWV3cG9ydCA9IHVwZGF0ZS52aWV3cG9ydDtcblxuICAgIGZvciAodmFyIGZpcnN0ID0gdHJ1ZTs7IGZpcnN0ID0gZmFsc2UpIHtcbiAgICAgIGlmICghZmlyc3QgfHwgIWNtLm9wdGlvbnMubGluZVdyYXBwaW5nIHx8IHVwZGF0ZS5vbGREaXNwbGF5V2lkdGggPT0gZGlzcGxheVdpZHRoKGNtKSkge1xuICAgICAgICAvLyBDbGlwIGZvcmNlZCB2aWV3cG9ydCB0byBhY3R1YWwgc2Nyb2xsYWJsZSBhcmVhLlxuICAgICAgICBpZiAodmlld3BvcnQgJiYgdmlld3BvcnQudG9wICE9IG51bGwpXG4gICAgICAgICAgdmlld3BvcnQgPSB7dG9wOiBNYXRoLm1pbihjbS5kb2MuaGVpZ2h0ICsgcGFkZGluZ1ZlcnQoY20uZGlzcGxheSkgLSBkaXNwbGF5SGVpZ2h0KGNtKSwgdmlld3BvcnQudG9wKX07XG4gICAgICAgIC8vIFVwZGF0ZWQgbGluZSBoZWlnaHRzIG1pZ2h0IHJlc3VsdCBpbiB0aGUgZHJhd24gYXJlYSBub3RcbiAgICAgICAgLy8gYWN0dWFsbHkgY292ZXJpbmcgdGhlIHZpZXdwb3J0LiBLZWVwIGxvb3BpbmcgdW50aWwgaXQgZG9lcy5cbiAgICAgICAgdXBkYXRlLnZpc2libGUgPSB2aXNpYmxlTGluZXMoY20uZGlzcGxheSwgY20uZG9jLCB2aWV3cG9ydCk7XG4gICAgICAgIGlmICh1cGRhdGUudmlzaWJsZS5mcm9tID49IGNtLmRpc3BsYXkudmlld0Zyb20gJiYgdXBkYXRlLnZpc2libGUudG8gPD0gY20uZGlzcGxheS52aWV3VG8pXG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBpZiAoIXVwZGF0ZURpc3BsYXlJZk5lZWRlZChjbSwgdXBkYXRlKSkgYnJlYWs7XG4gICAgICB1cGRhdGVIZWlnaHRzSW5WaWV3cG9ydChjbSk7XG4gICAgICB2YXIgYmFyTWVhc3VyZSA9IG1lYXN1cmVGb3JTY3JvbGxiYXJzKGNtKTtcbiAgICAgIHVwZGF0ZVNlbGVjdGlvbihjbSk7XG4gICAgICB1cGRhdGVTY3JvbGxiYXJzKGNtLCBiYXJNZWFzdXJlKTtcbiAgICAgIHNldERvY3VtZW50SGVpZ2h0KGNtLCBiYXJNZWFzdXJlKTtcbiAgICB9XG5cbiAgICB1cGRhdGUuc2lnbmFsKGNtLCBcInVwZGF0ZVwiLCBjbSk7XG4gICAgaWYgKGNtLmRpc3BsYXkudmlld0Zyb20gIT0gY20uZGlzcGxheS5yZXBvcnRlZFZpZXdGcm9tIHx8IGNtLmRpc3BsYXkudmlld1RvICE9IGNtLmRpc3BsYXkucmVwb3J0ZWRWaWV3VG8pIHtcbiAgICAgIHVwZGF0ZS5zaWduYWwoY20sIFwidmlld3BvcnRDaGFuZ2VcIiwgY20sIGNtLmRpc3BsYXkudmlld0Zyb20sIGNtLmRpc3BsYXkudmlld1RvKTtcbiAgICAgIGNtLmRpc3BsYXkucmVwb3J0ZWRWaWV3RnJvbSA9IGNtLmRpc3BsYXkudmlld0Zyb207IGNtLmRpc3BsYXkucmVwb3J0ZWRWaWV3VG8gPSBjbS5kaXNwbGF5LnZpZXdUbztcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiB1cGRhdGVEaXNwbGF5U2ltcGxlKGNtLCB2aWV3cG9ydCkge1xuICAgIHZhciB1cGRhdGUgPSBuZXcgRGlzcGxheVVwZGF0ZShjbSwgdmlld3BvcnQpO1xuICAgIGlmICh1cGRhdGVEaXNwbGF5SWZOZWVkZWQoY20sIHVwZGF0ZSkpIHtcbiAgICAgIHVwZGF0ZUhlaWdodHNJblZpZXdwb3J0KGNtKTtcbiAgICAgIHBvc3RVcGRhdGVEaXNwbGF5KGNtLCB1cGRhdGUpO1xuICAgICAgdmFyIGJhck1lYXN1cmUgPSBtZWFzdXJlRm9yU2Nyb2xsYmFycyhjbSk7XG4gICAgICB1cGRhdGVTZWxlY3Rpb24oY20pO1xuICAgICAgdXBkYXRlU2Nyb2xsYmFycyhjbSwgYmFyTWVhc3VyZSk7XG4gICAgICBzZXREb2N1bWVudEhlaWdodChjbSwgYmFyTWVhc3VyZSk7XG4gICAgICB1cGRhdGUuZmluaXNoKCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc2V0RG9jdW1lbnRIZWlnaHQoY20sIG1lYXN1cmUpIHtcbiAgICBjbS5kaXNwbGF5LnNpemVyLnN0eWxlLm1pbkhlaWdodCA9IG1lYXN1cmUuZG9jSGVpZ2h0ICsgXCJweFwiO1xuICAgIGNtLmRpc3BsYXkuaGVpZ2h0Rm9yY2VyLnN0eWxlLnRvcCA9IG1lYXN1cmUuZG9jSGVpZ2h0ICsgXCJweFwiO1xuICAgIGNtLmRpc3BsYXkuZ3V0dGVycy5zdHlsZS5oZWlnaHQgPSAobWVhc3VyZS5kb2NIZWlnaHQgKyBjbS5kaXNwbGF5LmJhckhlaWdodCArIHNjcm9sbEdhcChjbSkpICsgXCJweFwiO1xuICB9XG5cbiAgLy8gUmVhZCB0aGUgYWN0dWFsIGhlaWdodHMgb2YgdGhlIHJlbmRlcmVkIGxpbmVzLCBhbmQgdXBkYXRlIHRoZWlyXG4gIC8vIHN0b3JlZCBoZWlnaHRzIHRvIG1hdGNoLlxuICBmdW5jdGlvbiB1cGRhdGVIZWlnaHRzSW5WaWV3cG9ydChjbSkge1xuICAgIHZhciBkaXNwbGF5ID0gY20uZGlzcGxheTtcbiAgICB2YXIgcHJldkJvdHRvbSA9IGRpc3BsYXkubGluZURpdi5vZmZzZXRUb3A7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkaXNwbGF5LnZpZXcubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBjdXIgPSBkaXNwbGF5LnZpZXdbaV0sIGhlaWdodDtcbiAgICAgIGlmIChjdXIuaGlkZGVuKSBjb250aW51ZTtcbiAgICAgIGlmIChpZSAmJiBpZV92ZXJzaW9uIDwgOCkge1xuICAgICAgICB2YXIgYm90ID0gY3VyLm5vZGUub2Zmc2V0VG9wICsgY3VyLm5vZGUub2Zmc2V0SGVpZ2h0O1xuICAgICAgICBoZWlnaHQgPSBib3QgLSBwcmV2Qm90dG9tO1xuICAgICAgICBwcmV2Qm90dG9tID0gYm90O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGJveCA9IGN1ci5ub2RlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICBoZWlnaHQgPSBib3guYm90dG9tIC0gYm94LnRvcDtcbiAgICAgIH1cbiAgICAgIHZhciBkaWZmID0gY3VyLmxpbmUuaGVpZ2h0IC0gaGVpZ2h0O1xuICAgICAgaWYgKGhlaWdodCA8IDIpIGhlaWdodCA9IHRleHRIZWlnaHQoZGlzcGxheSk7XG4gICAgICBpZiAoZGlmZiA+IC4wMDEgfHwgZGlmZiA8IC0uMDAxKSB7XG4gICAgICAgIHVwZGF0ZUxpbmVIZWlnaHQoY3VyLmxpbmUsIGhlaWdodCk7XG4gICAgICAgIHVwZGF0ZVdpZGdldEhlaWdodChjdXIubGluZSk7XG4gICAgICAgIGlmIChjdXIucmVzdCkgZm9yICh2YXIgaiA9IDA7IGogPCBjdXIucmVzdC5sZW5ndGg7IGorKylcbiAgICAgICAgICB1cGRhdGVXaWRnZXRIZWlnaHQoY3VyLnJlc3Rbal0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIFJlYWQgYW5kIHN0b3JlIHRoZSBoZWlnaHQgb2YgbGluZSB3aWRnZXRzIGFzc29jaWF0ZWQgd2l0aCB0aGVcbiAgLy8gZ2l2ZW4gbGluZS5cbiAgZnVuY3Rpb24gdXBkYXRlV2lkZ2V0SGVpZ2h0KGxpbmUpIHtcbiAgICBpZiAobGluZS53aWRnZXRzKSBmb3IgKHZhciBpID0gMDsgaSA8IGxpbmUud2lkZ2V0cy5sZW5ndGg7ICsraSlcbiAgICAgIGxpbmUud2lkZ2V0c1tpXS5oZWlnaHQgPSBsaW5lLndpZGdldHNbaV0ubm9kZS5wYXJlbnROb2RlLm9mZnNldEhlaWdodDtcbiAgfVxuXG4gIC8vIERvIGEgYnVsay1yZWFkIG9mIHRoZSBET00gcG9zaXRpb25zIGFuZCBzaXplcyBuZWVkZWQgdG8gZHJhdyB0aGVcbiAgLy8gdmlldywgc28gdGhhdCB3ZSBkb24ndCBpbnRlcmxlYXZlIHJlYWRpbmcgYW5kIHdyaXRpbmcgdG8gdGhlIERPTS5cbiAgZnVuY3Rpb24gZ2V0RGltZW5zaW9ucyhjbSkge1xuICAgIHZhciBkID0gY20uZGlzcGxheSwgbGVmdCA9IHt9LCB3aWR0aCA9IHt9O1xuICAgIHZhciBndXR0ZXJMZWZ0ID0gZC5ndXR0ZXJzLmNsaWVudExlZnQ7XG4gICAgZm9yICh2YXIgbiA9IGQuZ3V0dGVycy5maXJzdENoaWxkLCBpID0gMDsgbjsgbiA9IG4ubmV4dFNpYmxpbmcsICsraSkge1xuICAgICAgbGVmdFtjbS5vcHRpb25zLmd1dHRlcnNbaV1dID0gbi5vZmZzZXRMZWZ0ICsgbi5jbGllbnRMZWZ0ICsgZ3V0dGVyTGVmdDtcbiAgICAgIHdpZHRoW2NtLm9wdGlvbnMuZ3V0dGVyc1tpXV0gPSBuLmNsaWVudFdpZHRoO1xuICAgIH1cbiAgICByZXR1cm4ge2ZpeGVkUG9zOiBjb21wZW5zYXRlRm9ySFNjcm9sbChkKSxcbiAgICAgICAgICAgIGd1dHRlclRvdGFsV2lkdGg6IGQuZ3V0dGVycy5vZmZzZXRXaWR0aCxcbiAgICAgICAgICAgIGd1dHRlckxlZnQ6IGxlZnQsXG4gICAgICAgICAgICBndXR0ZXJXaWR0aDogd2lkdGgsXG4gICAgICAgICAgICB3cmFwcGVyV2lkdGg6IGQud3JhcHBlci5jbGllbnRXaWR0aH07XG4gIH1cblxuICAvLyBTeW5jIHRoZSBhY3R1YWwgZGlzcGxheSBET00gc3RydWN0dXJlIHdpdGggZGlzcGxheS52aWV3LCByZW1vdmluZ1xuICAvLyBub2RlcyBmb3IgbGluZXMgdGhhdCBhcmUgbm8gbG9uZ2VyIGluIHZpZXcsIGFuZCBjcmVhdGluZyB0aGUgb25lc1xuICAvLyB0aGF0IGFyZSBub3QgdGhlcmUgeWV0LCBhbmQgdXBkYXRpbmcgdGhlIG9uZXMgdGhhdCBhcmUgb3V0IG9mXG4gIC8vIGRhdGUuXG4gIGZ1bmN0aW9uIHBhdGNoRGlzcGxheShjbSwgdXBkYXRlTnVtYmVyc0Zyb20sIGRpbXMpIHtcbiAgICB2YXIgZGlzcGxheSA9IGNtLmRpc3BsYXksIGxpbmVOdW1iZXJzID0gY20ub3B0aW9ucy5saW5lTnVtYmVycztcbiAgICB2YXIgY29udGFpbmVyID0gZGlzcGxheS5saW5lRGl2LCBjdXIgPSBjb250YWluZXIuZmlyc3RDaGlsZDtcblxuICAgIGZ1bmN0aW9uIHJtKG5vZGUpIHtcbiAgICAgIHZhciBuZXh0ID0gbm9kZS5uZXh0U2libGluZztcbiAgICAgIC8vIFdvcmtzIGFyb3VuZCBhIHRocm93LXNjcm9sbCBidWcgaW4gT1MgWCBXZWJraXRcbiAgICAgIGlmICh3ZWJraXQgJiYgbWFjICYmIGNtLmRpc3BsYXkuY3VycmVudFdoZWVsVGFyZ2V0ID09IG5vZGUpXG4gICAgICAgIG5vZGUuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgZWxzZVxuICAgICAgICBub2RlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobm9kZSk7XG4gICAgICByZXR1cm4gbmV4dDtcbiAgICB9XG5cbiAgICB2YXIgdmlldyA9IGRpc3BsYXkudmlldywgbGluZU4gPSBkaXNwbGF5LnZpZXdGcm9tO1xuICAgIC8vIExvb3Agb3ZlciB0aGUgZWxlbWVudHMgaW4gdGhlIHZpZXcsIHN5bmNpbmcgY3VyICh0aGUgRE9NIG5vZGVzXG4gICAgLy8gaW4gZGlzcGxheS5saW5lRGl2KSB3aXRoIHRoZSB2aWV3IGFzIHdlIGdvLlxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmlldy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGxpbmVWaWV3ID0gdmlld1tpXTtcbiAgICAgIGlmIChsaW5lVmlldy5oaWRkZW4pIHtcbiAgICAgIH0gZWxzZSBpZiAoIWxpbmVWaWV3Lm5vZGUgfHwgbGluZVZpZXcubm9kZS5wYXJlbnROb2RlICE9IGNvbnRhaW5lcikgeyAvLyBOb3QgZHJhd24geWV0XG4gICAgICAgIHZhciBub2RlID0gYnVpbGRMaW5lRWxlbWVudChjbSwgbGluZVZpZXcsIGxpbmVOLCBkaW1zKTtcbiAgICAgICAgY29udGFpbmVyLmluc2VydEJlZm9yZShub2RlLCBjdXIpO1xuICAgICAgfSBlbHNlIHsgLy8gQWxyZWFkeSBkcmF3blxuICAgICAgICB3aGlsZSAoY3VyICE9IGxpbmVWaWV3Lm5vZGUpIGN1ciA9IHJtKGN1cik7XG4gICAgICAgIHZhciB1cGRhdGVOdW1iZXIgPSBsaW5lTnVtYmVycyAmJiB1cGRhdGVOdW1iZXJzRnJvbSAhPSBudWxsICYmXG4gICAgICAgICAgdXBkYXRlTnVtYmVyc0Zyb20gPD0gbGluZU4gJiYgbGluZVZpZXcubGluZU51bWJlcjtcbiAgICAgICAgaWYgKGxpbmVWaWV3LmNoYW5nZXMpIHtcbiAgICAgICAgICBpZiAoaW5kZXhPZihsaW5lVmlldy5jaGFuZ2VzLCBcImd1dHRlclwiKSA+IC0xKSB1cGRhdGVOdW1iZXIgPSBmYWxzZTtcbiAgICAgICAgICB1cGRhdGVMaW5lRm9yQ2hhbmdlcyhjbSwgbGluZVZpZXcsIGxpbmVOLCBkaW1zKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodXBkYXRlTnVtYmVyKSB7XG4gICAgICAgICAgcmVtb3ZlQ2hpbGRyZW4obGluZVZpZXcubGluZU51bWJlcik7XG4gICAgICAgICAgbGluZVZpZXcubGluZU51bWJlci5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShsaW5lTnVtYmVyRm9yKGNtLm9wdGlvbnMsIGxpbmVOKSkpO1xuICAgICAgICB9XG4gICAgICAgIGN1ciA9IGxpbmVWaWV3Lm5vZGUubmV4dFNpYmxpbmc7XG4gICAgICB9XG4gICAgICBsaW5lTiArPSBsaW5lVmlldy5zaXplO1xuICAgIH1cbiAgICB3aGlsZSAoY3VyKSBjdXIgPSBybShjdXIpO1xuICB9XG5cbiAgLy8gV2hlbiBhbiBhc3BlY3Qgb2YgYSBsaW5lIGNoYW5nZXMsIGEgc3RyaW5nIGlzIGFkZGVkIHRvXG4gIC8vIGxpbmVWaWV3LmNoYW5nZXMuIFRoaXMgdXBkYXRlcyB0aGUgcmVsZXZhbnQgcGFydCBvZiB0aGUgbGluZSdzXG4gIC8vIERPTSBzdHJ1Y3R1cmUuXG4gIGZ1bmN0aW9uIHVwZGF0ZUxpbmVGb3JDaGFuZ2VzKGNtLCBsaW5lVmlldywgbGluZU4sIGRpbXMpIHtcbiAgICBmb3IgKHZhciBqID0gMDsgaiA8IGxpbmVWaWV3LmNoYW5nZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgIHZhciB0eXBlID0gbGluZVZpZXcuY2hhbmdlc1tqXTtcbiAgICAgIGlmICh0eXBlID09IFwidGV4dFwiKSB1cGRhdGVMaW5lVGV4dChjbSwgbGluZVZpZXcpO1xuICAgICAgZWxzZSBpZiAodHlwZSA9PSBcImd1dHRlclwiKSB1cGRhdGVMaW5lR3V0dGVyKGNtLCBsaW5lVmlldywgbGluZU4sIGRpbXMpO1xuICAgICAgZWxzZSBpZiAodHlwZSA9PSBcImNsYXNzXCIpIHVwZGF0ZUxpbmVDbGFzc2VzKGxpbmVWaWV3KTtcbiAgICAgIGVsc2UgaWYgKHR5cGUgPT0gXCJ3aWRnZXRcIikgdXBkYXRlTGluZVdpZGdldHMoY20sIGxpbmVWaWV3LCBkaW1zKTtcbiAgICB9XG4gICAgbGluZVZpZXcuY2hhbmdlcyA9IG51bGw7XG4gIH1cblxuICAvLyBMaW5lcyB3aXRoIGd1dHRlciBlbGVtZW50cywgd2lkZ2V0cyBvciBhIGJhY2tncm91bmQgY2xhc3MgbmVlZCB0b1xuICAvLyBiZSB3cmFwcGVkLCBhbmQgaGF2ZSB0aGUgZXh0cmEgZWxlbWVudHMgYWRkZWQgdG8gdGhlIHdyYXBwZXIgZGl2XG4gIGZ1bmN0aW9uIGVuc3VyZUxpbmVXcmFwcGVkKGxpbmVWaWV3KSB7XG4gICAgaWYgKGxpbmVWaWV3Lm5vZGUgPT0gbGluZVZpZXcudGV4dCkge1xuICAgICAgbGluZVZpZXcubm9kZSA9IGVsdChcImRpdlwiLCBudWxsLCBudWxsLCBcInBvc2l0aW9uOiByZWxhdGl2ZVwiKTtcbiAgICAgIGlmIChsaW5lVmlldy50ZXh0LnBhcmVudE5vZGUpXG4gICAgICAgIGxpbmVWaWV3LnRleHQucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQobGluZVZpZXcubm9kZSwgbGluZVZpZXcudGV4dCk7XG4gICAgICBsaW5lVmlldy5ub2RlLmFwcGVuZENoaWxkKGxpbmVWaWV3LnRleHQpO1xuICAgICAgaWYgKGllICYmIGllX3ZlcnNpb24gPCA4KSBsaW5lVmlldy5ub2RlLnN0eWxlLnpJbmRleCA9IDI7XG4gICAgfVxuICAgIHJldHVybiBsaW5lVmlldy5ub2RlO1xuICB9XG5cbiAgZnVuY3Rpb24gdXBkYXRlTGluZUJhY2tncm91bmQobGluZVZpZXcpIHtcbiAgICB2YXIgY2xzID0gbGluZVZpZXcuYmdDbGFzcyA/IGxpbmVWaWV3LmJnQ2xhc3MgKyBcIiBcIiArIChsaW5lVmlldy5saW5lLmJnQ2xhc3MgfHwgXCJcIikgOiBsaW5lVmlldy5saW5lLmJnQ2xhc3M7XG4gICAgaWYgKGNscykgY2xzICs9IFwiIENvZGVNaXJyb3ItbGluZWJhY2tncm91bmRcIjtcbiAgICBpZiAobGluZVZpZXcuYmFja2dyb3VuZCkge1xuICAgICAgaWYgKGNscykgbGluZVZpZXcuYmFja2dyb3VuZC5jbGFzc05hbWUgPSBjbHM7XG4gICAgICBlbHNlIHsgbGluZVZpZXcuYmFja2dyb3VuZC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGxpbmVWaWV3LmJhY2tncm91bmQpOyBsaW5lVmlldy5iYWNrZ3JvdW5kID0gbnVsbDsgfVxuICAgIH0gZWxzZSBpZiAoY2xzKSB7XG4gICAgICB2YXIgd3JhcCA9IGVuc3VyZUxpbmVXcmFwcGVkKGxpbmVWaWV3KTtcbiAgICAgIGxpbmVWaWV3LmJhY2tncm91bmQgPSB3cmFwLmluc2VydEJlZm9yZShlbHQoXCJkaXZcIiwgbnVsbCwgY2xzKSwgd3JhcC5maXJzdENoaWxkKTtcbiAgICB9XG4gIH1cblxuICAvLyBXcmFwcGVyIGFyb3VuZCBidWlsZExpbmVDb250ZW50IHdoaWNoIHdpbGwgcmV1c2UgdGhlIHN0cnVjdHVyZVxuICAvLyBpbiBkaXNwbGF5LmV4dGVybmFsTWVhc3VyZWQgd2hlbiBwb3NzaWJsZS5cbiAgZnVuY3Rpb24gZ2V0TGluZUNvbnRlbnQoY20sIGxpbmVWaWV3KSB7XG4gICAgdmFyIGV4dCA9IGNtLmRpc3BsYXkuZXh0ZXJuYWxNZWFzdXJlZDtcbiAgICBpZiAoZXh0ICYmIGV4dC5saW5lID09IGxpbmVWaWV3LmxpbmUpIHtcbiAgICAgIGNtLmRpc3BsYXkuZXh0ZXJuYWxNZWFzdXJlZCA9IG51bGw7XG4gICAgICBsaW5lVmlldy5tZWFzdXJlID0gZXh0Lm1lYXN1cmU7XG4gICAgICByZXR1cm4gZXh0LmJ1aWx0O1xuICAgIH1cbiAgICByZXR1cm4gYnVpbGRMaW5lQ29udGVudChjbSwgbGluZVZpZXcpO1xuICB9XG5cbiAgLy8gUmVkcmF3IHRoZSBsaW5lJ3MgdGV4dC4gSW50ZXJhY3RzIHdpdGggdGhlIGJhY2tncm91bmQgYW5kIHRleHRcbiAgLy8gY2xhc3NlcyBiZWNhdXNlIHRoZSBtb2RlIG1heSBvdXRwdXQgdG9rZW5zIHRoYXQgaW5mbHVlbmNlIHRoZXNlXG4gIC8vIGNsYXNzZXMuXG4gIGZ1bmN0aW9uIHVwZGF0ZUxpbmVUZXh0KGNtLCBsaW5lVmlldykge1xuICAgIHZhciBjbHMgPSBsaW5lVmlldy50ZXh0LmNsYXNzTmFtZTtcbiAgICB2YXIgYnVpbHQgPSBnZXRMaW5lQ29udGVudChjbSwgbGluZVZpZXcpO1xuICAgIGlmIChsaW5lVmlldy50ZXh0ID09IGxpbmVWaWV3Lm5vZGUpIGxpbmVWaWV3Lm5vZGUgPSBidWlsdC5wcmU7XG4gICAgbGluZVZpZXcudGV4dC5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChidWlsdC5wcmUsIGxpbmVWaWV3LnRleHQpO1xuICAgIGxpbmVWaWV3LnRleHQgPSBidWlsdC5wcmU7XG4gICAgaWYgKGJ1aWx0LmJnQ2xhc3MgIT0gbGluZVZpZXcuYmdDbGFzcyB8fCBidWlsdC50ZXh0Q2xhc3MgIT0gbGluZVZpZXcudGV4dENsYXNzKSB7XG4gICAgICBsaW5lVmlldy5iZ0NsYXNzID0gYnVpbHQuYmdDbGFzcztcbiAgICAgIGxpbmVWaWV3LnRleHRDbGFzcyA9IGJ1aWx0LnRleHRDbGFzcztcbiAgICAgIHVwZGF0ZUxpbmVDbGFzc2VzKGxpbmVWaWV3KTtcbiAgICB9IGVsc2UgaWYgKGNscykge1xuICAgICAgbGluZVZpZXcudGV4dC5jbGFzc05hbWUgPSBjbHM7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gdXBkYXRlTGluZUNsYXNzZXMobGluZVZpZXcpIHtcbiAgICB1cGRhdGVMaW5lQmFja2dyb3VuZChsaW5lVmlldyk7XG4gICAgaWYgKGxpbmVWaWV3LmxpbmUud3JhcENsYXNzKVxuICAgICAgZW5zdXJlTGluZVdyYXBwZWQobGluZVZpZXcpLmNsYXNzTmFtZSA9IGxpbmVWaWV3LmxpbmUud3JhcENsYXNzO1xuICAgIGVsc2UgaWYgKGxpbmVWaWV3Lm5vZGUgIT0gbGluZVZpZXcudGV4dClcbiAgICAgIGxpbmVWaWV3Lm5vZGUuY2xhc3NOYW1lID0gXCJcIjtcbiAgICB2YXIgdGV4dENsYXNzID0gbGluZVZpZXcudGV4dENsYXNzID8gbGluZVZpZXcudGV4dENsYXNzICsgXCIgXCIgKyAobGluZVZpZXcubGluZS50ZXh0Q2xhc3MgfHwgXCJcIikgOiBsaW5lVmlldy5saW5lLnRleHRDbGFzcztcbiAgICBsaW5lVmlldy50ZXh0LmNsYXNzTmFtZSA9IHRleHRDbGFzcyB8fCBcIlwiO1xuICB9XG5cbiAgZnVuY3Rpb24gdXBkYXRlTGluZUd1dHRlcihjbSwgbGluZVZpZXcsIGxpbmVOLCBkaW1zKSB7XG4gICAgaWYgKGxpbmVWaWV3Lmd1dHRlcikge1xuICAgICAgbGluZVZpZXcubm9kZS5yZW1vdmVDaGlsZChsaW5lVmlldy5ndXR0ZXIpO1xuICAgICAgbGluZVZpZXcuZ3V0dGVyID0gbnVsbDtcbiAgICB9XG4gICAgaWYgKGxpbmVWaWV3Lmd1dHRlckJhY2tncm91bmQpIHtcbiAgICAgIGxpbmVWaWV3Lm5vZGUucmVtb3ZlQ2hpbGQobGluZVZpZXcuZ3V0dGVyQmFja2dyb3VuZCk7XG4gICAgICBsaW5lVmlldy5ndXR0ZXJCYWNrZ3JvdW5kID0gbnVsbDtcbiAgICB9XG4gICAgaWYgKGxpbmVWaWV3LmxpbmUuZ3V0dGVyQ2xhc3MpIHtcbiAgICAgIHZhciB3cmFwID0gZW5zdXJlTGluZVdyYXBwZWQobGluZVZpZXcpO1xuICAgICAgbGluZVZpZXcuZ3V0dGVyQmFja2dyb3VuZCA9IGVsdChcImRpdlwiLCBudWxsLCBcIkNvZGVNaXJyb3ItZ3V0dGVyLWJhY2tncm91bmQgXCIgKyBsaW5lVmlldy5saW5lLmd1dHRlckNsYXNzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImxlZnQ6IFwiICsgKGNtLm9wdGlvbnMuZml4ZWRHdXR0ZXIgPyBkaW1zLmZpeGVkUG9zIDogLWRpbXMuZ3V0dGVyVG90YWxXaWR0aCkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInB4OyB3aWR0aDogXCIgKyBkaW1zLmd1dHRlclRvdGFsV2lkdGggKyBcInB4XCIpO1xuICAgICAgd3JhcC5pbnNlcnRCZWZvcmUobGluZVZpZXcuZ3V0dGVyQmFja2dyb3VuZCwgbGluZVZpZXcudGV4dCk7XG4gICAgfVxuICAgIHZhciBtYXJrZXJzID0gbGluZVZpZXcubGluZS5ndXR0ZXJNYXJrZXJzO1xuICAgIGlmIChjbS5vcHRpb25zLmxpbmVOdW1iZXJzIHx8IG1hcmtlcnMpIHtcbiAgICAgIHZhciB3cmFwID0gZW5zdXJlTGluZVdyYXBwZWQobGluZVZpZXcpO1xuICAgICAgdmFyIGd1dHRlcldyYXAgPSBsaW5lVmlldy5ndXR0ZXIgPSBlbHQoXCJkaXZcIiwgbnVsbCwgXCJDb2RlTWlycm9yLWd1dHRlci13cmFwcGVyXCIsIFwibGVmdDogXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGNtLm9wdGlvbnMuZml4ZWRHdXR0ZXIgPyBkaW1zLmZpeGVkUG9zIDogLWRpbXMuZ3V0dGVyVG90YWxXaWR0aCkgKyBcInB4XCIpO1xuICAgICAgY20uZGlzcGxheS5pbnB1dC5zZXRVbmVkaXRhYmxlKGd1dHRlcldyYXApO1xuICAgICAgd3JhcC5pbnNlcnRCZWZvcmUoZ3V0dGVyV3JhcCwgbGluZVZpZXcudGV4dCk7XG4gICAgICBpZiAobGluZVZpZXcubGluZS5ndXR0ZXJDbGFzcylcbiAgICAgICAgZ3V0dGVyV3JhcC5jbGFzc05hbWUgKz0gXCIgXCIgKyBsaW5lVmlldy5saW5lLmd1dHRlckNsYXNzO1xuICAgICAgaWYgKGNtLm9wdGlvbnMubGluZU51bWJlcnMgJiYgKCFtYXJrZXJzIHx8ICFtYXJrZXJzW1wiQ29kZU1pcnJvci1saW5lbnVtYmVyc1wiXSkpXG4gICAgICAgIGxpbmVWaWV3LmxpbmVOdW1iZXIgPSBndXR0ZXJXcmFwLmFwcGVuZENoaWxkKFxuICAgICAgICAgIGVsdChcImRpdlwiLCBsaW5lTnVtYmVyRm9yKGNtLm9wdGlvbnMsIGxpbmVOKSxcbiAgICAgICAgICAgICAgXCJDb2RlTWlycm9yLWxpbmVudW1iZXIgQ29kZU1pcnJvci1ndXR0ZXItZWx0XCIsXG4gICAgICAgICAgICAgIFwibGVmdDogXCIgKyBkaW1zLmd1dHRlckxlZnRbXCJDb2RlTWlycm9yLWxpbmVudW1iZXJzXCJdICsgXCJweDsgd2lkdGg6IFwiXG4gICAgICAgICAgICAgICsgY20uZGlzcGxheS5saW5lTnVtSW5uZXJXaWR0aCArIFwicHhcIikpO1xuICAgICAgaWYgKG1hcmtlcnMpIGZvciAodmFyIGsgPSAwOyBrIDwgY20ub3B0aW9ucy5ndXR0ZXJzLmxlbmd0aDsgKytrKSB7XG4gICAgICAgIHZhciBpZCA9IGNtLm9wdGlvbnMuZ3V0dGVyc1trXSwgZm91bmQgPSBtYXJrZXJzLmhhc093blByb3BlcnR5KGlkKSAmJiBtYXJrZXJzW2lkXTtcbiAgICAgICAgaWYgKGZvdW5kKVxuICAgICAgICAgIGd1dHRlcldyYXAuYXBwZW5kQ2hpbGQoZWx0KFwiZGl2XCIsIFtmb3VuZF0sIFwiQ29kZU1pcnJvci1ndXR0ZXItZWx0XCIsIFwibGVmdDogXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpbXMuZ3V0dGVyTGVmdFtpZF0gKyBcInB4OyB3aWR0aDogXCIgKyBkaW1zLmd1dHRlcldpZHRoW2lkXSArIFwicHhcIikpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZUxpbmVXaWRnZXRzKGNtLCBsaW5lVmlldywgZGltcykge1xuICAgIGlmIChsaW5lVmlldy5hbGlnbmFibGUpIGxpbmVWaWV3LmFsaWduYWJsZSA9IG51bGw7XG4gICAgZm9yICh2YXIgbm9kZSA9IGxpbmVWaWV3Lm5vZGUuZmlyc3RDaGlsZCwgbmV4dDsgbm9kZTsgbm9kZSA9IG5leHQpIHtcbiAgICAgIHZhciBuZXh0ID0gbm9kZS5uZXh0U2libGluZztcbiAgICAgIGlmIChub2RlLmNsYXNzTmFtZSA9PSBcIkNvZGVNaXJyb3ItbGluZXdpZGdldFwiKVxuICAgICAgICBsaW5lVmlldy5ub2RlLnJlbW92ZUNoaWxkKG5vZGUpO1xuICAgIH1cbiAgICBpbnNlcnRMaW5lV2lkZ2V0cyhjbSwgbGluZVZpZXcsIGRpbXMpO1xuICB9XG5cbiAgLy8gQnVpbGQgYSBsaW5lJ3MgRE9NIHJlcHJlc2VudGF0aW9uIGZyb20gc2NyYXRjaFxuICBmdW5jdGlvbiBidWlsZExpbmVFbGVtZW50KGNtLCBsaW5lVmlldywgbGluZU4sIGRpbXMpIHtcbiAgICB2YXIgYnVpbHQgPSBnZXRMaW5lQ29udGVudChjbSwgbGluZVZpZXcpO1xuICAgIGxpbmVWaWV3LnRleHQgPSBsaW5lVmlldy5ub2RlID0gYnVpbHQucHJlO1xuICAgIGlmIChidWlsdC5iZ0NsYXNzKSBsaW5lVmlldy5iZ0NsYXNzID0gYnVpbHQuYmdDbGFzcztcbiAgICBpZiAoYnVpbHQudGV4dENsYXNzKSBsaW5lVmlldy50ZXh0Q2xhc3MgPSBidWlsdC50ZXh0Q2xhc3M7XG5cbiAgICB1cGRhdGVMaW5lQ2xhc3NlcyhsaW5lVmlldyk7XG4gICAgdXBkYXRlTGluZUd1dHRlcihjbSwgbGluZVZpZXcsIGxpbmVOLCBkaW1zKTtcbiAgICBpbnNlcnRMaW5lV2lkZ2V0cyhjbSwgbGluZVZpZXcsIGRpbXMpO1xuICAgIHJldHVybiBsaW5lVmlldy5ub2RlO1xuICB9XG5cbiAgLy8gQSBsaW5lVmlldyBtYXkgY29udGFpbiBtdWx0aXBsZSBsb2dpY2FsIGxpbmVzICh3aGVuIG1lcmdlZCBieVxuICAvLyBjb2xsYXBzZWQgc3BhbnMpLiBUaGUgd2lkZ2V0cyBmb3IgYWxsIG9mIHRoZW0gbmVlZCB0byBiZSBkcmF3bi5cbiAgZnVuY3Rpb24gaW5zZXJ0TGluZVdpZGdldHMoY20sIGxpbmVWaWV3LCBkaW1zKSB7XG4gICAgaW5zZXJ0TGluZVdpZGdldHNGb3IoY20sIGxpbmVWaWV3LmxpbmUsIGxpbmVWaWV3LCBkaW1zLCB0cnVlKTtcbiAgICBpZiAobGluZVZpZXcucmVzdCkgZm9yICh2YXIgaSA9IDA7IGkgPCBsaW5lVmlldy5yZXN0Lmxlbmd0aDsgaSsrKVxuICAgICAgaW5zZXJ0TGluZVdpZGdldHNGb3IoY20sIGxpbmVWaWV3LnJlc3RbaV0sIGxpbmVWaWV3LCBkaW1zLCBmYWxzZSk7XG4gIH1cblxuICBmdW5jdGlvbiBpbnNlcnRMaW5lV2lkZ2V0c0ZvcihjbSwgbGluZSwgbGluZVZpZXcsIGRpbXMsIGFsbG93QWJvdmUpIHtcbiAgICBpZiAoIWxpbmUud2lkZ2V0cykgcmV0dXJuO1xuICAgIHZhciB3cmFwID0gZW5zdXJlTGluZVdyYXBwZWQobGluZVZpZXcpO1xuICAgIGZvciAodmFyIGkgPSAwLCB3cyA9IGxpbmUud2lkZ2V0czsgaSA8IHdzLmxlbmd0aDsgKytpKSB7XG4gICAgICB2YXIgd2lkZ2V0ID0gd3NbaV0sIG5vZGUgPSBlbHQoXCJkaXZcIiwgW3dpZGdldC5ub2RlXSwgXCJDb2RlTWlycm9yLWxpbmV3aWRnZXRcIik7XG4gICAgICBpZiAoIXdpZGdldC5oYW5kbGVNb3VzZUV2ZW50cykgbm9kZS5zZXRBdHRyaWJ1dGUoXCJjbS1pZ25vcmUtZXZlbnRzXCIsIFwidHJ1ZVwiKTtcbiAgICAgIHBvc2l0aW9uTGluZVdpZGdldCh3aWRnZXQsIG5vZGUsIGxpbmVWaWV3LCBkaW1zKTtcbiAgICAgIGNtLmRpc3BsYXkuaW5wdXQuc2V0VW5lZGl0YWJsZShub2RlKTtcbiAgICAgIGlmIChhbGxvd0Fib3ZlICYmIHdpZGdldC5hYm92ZSlcbiAgICAgICAgd3JhcC5pbnNlcnRCZWZvcmUobm9kZSwgbGluZVZpZXcuZ3V0dGVyIHx8IGxpbmVWaWV3LnRleHQpO1xuICAgICAgZWxzZVxuICAgICAgICB3cmFwLmFwcGVuZENoaWxkKG5vZGUpO1xuICAgICAgc2lnbmFsTGF0ZXIod2lkZ2V0LCBcInJlZHJhd1wiKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBwb3NpdGlvbkxpbmVXaWRnZXQod2lkZ2V0LCBub2RlLCBsaW5lVmlldywgZGltcykge1xuICAgIGlmICh3aWRnZXQubm9IU2Nyb2xsKSB7XG4gICAgICAobGluZVZpZXcuYWxpZ25hYmxlIHx8IChsaW5lVmlldy5hbGlnbmFibGUgPSBbXSkpLnB1c2gobm9kZSk7XG4gICAgICB2YXIgd2lkdGggPSBkaW1zLndyYXBwZXJXaWR0aDtcbiAgICAgIG5vZGUuc3R5bGUubGVmdCA9IGRpbXMuZml4ZWRQb3MgKyBcInB4XCI7XG4gICAgICBpZiAoIXdpZGdldC5jb3Zlckd1dHRlcikge1xuICAgICAgICB3aWR0aCAtPSBkaW1zLmd1dHRlclRvdGFsV2lkdGg7XG4gICAgICAgIG5vZGUuc3R5bGUucGFkZGluZ0xlZnQgPSBkaW1zLmd1dHRlclRvdGFsV2lkdGggKyBcInB4XCI7XG4gICAgICB9XG4gICAgICBub2RlLnN0eWxlLndpZHRoID0gd2lkdGggKyBcInB4XCI7XG4gICAgfVxuICAgIGlmICh3aWRnZXQuY292ZXJHdXR0ZXIpIHtcbiAgICAgIG5vZGUuc3R5bGUuekluZGV4ID0gNTtcbiAgICAgIG5vZGUuc3R5bGUucG9zaXRpb24gPSBcInJlbGF0aXZlXCI7XG4gICAgICBpZiAoIXdpZGdldC5ub0hTY3JvbGwpIG5vZGUuc3R5bGUubWFyZ2luTGVmdCA9IC1kaW1zLmd1dHRlclRvdGFsV2lkdGggKyBcInB4XCI7XG4gICAgfVxuICB9XG5cbiAgLy8gUE9TSVRJT04gT0JKRUNUXG5cbiAgLy8gQSBQb3MgaW5zdGFuY2UgcmVwcmVzZW50cyBhIHBvc2l0aW9uIHdpdGhpbiB0aGUgdGV4dC5cbiAgdmFyIFBvcyA9IENvZGVNaXJyb3IuUG9zID0gZnVuY3Rpb24obGluZSwgY2gpIHtcbiAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgUG9zKSkgcmV0dXJuIG5ldyBQb3MobGluZSwgY2gpO1xuICAgIHRoaXMubGluZSA9IGxpbmU7IHRoaXMuY2ggPSBjaDtcbiAgfTtcblxuICAvLyBDb21wYXJlIHR3byBwb3NpdGlvbnMsIHJldHVybiAwIGlmIHRoZXkgYXJlIHRoZSBzYW1lLCBhIG5lZ2F0aXZlXG4gIC8vIG51bWJlciB3aGVuIGEgaXMgbGVzcywgYW5kIGEgcG9zaXRpdmUgbnVtYmVyIG90aGVyd2lzZS5cbiAgdmFyIGNtcCA9IENvZGVNaXJyb3IuY21wUG9zID0gZnVuY3Rpb24oYSwgYikgeyByZXR1cm4gYS5saW5lIC0gYi5saW5lIHx8IGEuY2ggLSBiLmNoOyB9O1xuXG4gIGZ1bmN0aW9uIGNvcHlQb3MoeCkge3JldHVybiBQb3MoeC5saW5lLCB4LmNoKTt9XG4gIGZ1bmN0aW9uIG1heFBvcyhhLCBiKSB7IHJldHVybiBjbXAoYSwgYikgPCAwID8gYiA6IGE7IH1cbiAgZnVuY3Rpb24gbWluUG9zKGEsIGIpIHsgcmV0dXJuIGNtcChhLCBiKSA8IDAgPyBhIDogYjsgfVxuXG4gIC8vIElOUFVUIEhBTkRMSU5HXG5cbiAgZnVuY3Rpb24gZW5zdXJlRm9jdXMoY20pIHtcbiAgICBpZiAoIWNtLnN0YXRlLmZvY3VzZWQpIHsgY20uZGlzcGxheS5pbnB1dC5mb2N1cygpOyBvbkZvY3VzKGNtKTsgfVxuICB9XG5cbiAgLy8gVGhpcyB3aWxsIGJlIHNldCB0byBhbiBhcnJheSBvZiBzdHJpbmdzIHdoZW4gY29weWluZywgc28gdGhhdCxcbiAgLy8gd2hlbiBwYXN0aW5nLCB3ZSBrbm93IHdoYXQga2luZCBvZiBzZWxlY3Rpb25zIHRoZSBjb3BpZWQgdGV4dFxuICAvLyB3YXMgbWFkZSBvdXQgb2YuXG4gIHZhciBsYXN0Q29waWVkID0gbnVsbDtcblxuICBmdW5jdGlvbiBhcHBseVRleHRJbnB1dChjbSwgaW5zZXJ0ZWQsIGRlbGV0ZWQsIHNlbCwgb3JpZ2luKSB7XG4gICAgdmFyIGRvYyA9IGNtLmRvYztcbiAgICBjbS5kaXNwbGF5LnNoaWZ0ID0gZmFsc2U7XG4gICAgaWYgKCFzZWwpIHNlbCA9IGRvYy5zZWw7XG5cbiAgICB2YXIgcGFzdGUgPSBjbS5zdGF0ZS5wYXN0ZUluY29taW5nIHx8IG9yaWdpbiA9PSBcInBhc3RlXCI7XG4gICAgdmFyIHRleHRMaW5lcyA9IGRvYy5zcGxpdExpbmVzKGluc2VydGVkKSwgbXVsdGlQYXN0ZSA9IG51bGw7XG4gICAgLy8gV2hlbiBwYXNpbmcgTiBsaW5lcyBpbnRvIE4gc2VsZWN0aW9ucywgaW5zZXJ0IG9uZSBsaW5lIHBlciBzZWxlY3Rpb25cbiAgICBpZiAocGFzdGUgJiYgc2VsLnJhbmdlcy5sZW5ndGggPiAxKSB7XG4gICAgICBpZiAobGFzdENvcGllZCAmJiBsYXN0Q29waWVkLmpvaW4oXCJcXG5cIikgPT0gaW5zZXJ0ZWQpIHtcbiAgICAgICAgaWYgKHNlbC5yYW5nZXMubGVuZ3RoICUgbGFzdENvcGllZC5sZW5ndGggPT0gMCkge1xuICAgICAgICAgIG11bHRpUGFzdGUgPSBbXTtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxhc3RDb3BpZWQubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICBtdWx0aVBhc3RlLnB1c2goZG9jLnNwbGl0TGluZXMobGFzdENvcGllZFtpXSkpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHRleHRMaW5lcy5sZW5ndGggPT0gc2VsLnJhbmdlcy5sZW5ndGgpIHtcbiAgICAgICAgbXVsdGlQYXN0ZSA9IG1hcCh0ZXh0TGluZXMsIGZ1bmN0aW9uKGwpIHsgcmV0dXJuIFtsXTsgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gTm9ybWFsIGJlaGF2aW9yIGlzIHRvIGluc2VydCB0aGUgbmV3IHRleHQgaW50byBldmVyeSBzZWxlY3Rpb25cbiAgICBmb3IgKHZhciBpID0gc2VsLnJhbmdlcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgdmFyIHJhbmdlID0gc2VsLnJhbmdlc1tpXTtcbiAgICAgIHZhciBmcm9tID0gcmFuZ2UuZnJvbSgpLCB0byA9IHJhbmdlLnRvKCk7XG4gICAgICBpZiAocmFuZ2UuZW1wdHkoKSkge1xuICAgICAgICBpZiAoZGVsZXRlZCAmJiBkZWxldGVkID4gMCkgLy8gSGFuZGxlIGRlbGV0aW9uXG4gICAgICAgICAgZnJvbSA9IFBvcyhmcm9tLmxpbmUsIGZyb20uY2ggLSBkZWxldGVkKTtcbiAgICAgICAgZWxzZSBpZiAoY20uc3RhdGUub3ZlcndyaXRlICYmICFwYXN0ZSkgLy8gSGFuZGxlIG92ZXJ3cml0ZVxuICAgICAgICAgIHRvID0gUG9zKHRvLmxpbmUsIE1hdGgubWluKGdldExpbmUoZG9jLCB0by5saW5lKS50ZXh0Lmxlbmd0aCwgdG8uY2ggKyBsc3QodGV4dExpbmVzKS5sZW5ndGgpKTtcbiAgICAgIH1cbiAgICAgIHZhciB1cGRhdGVJbnB1dCA9IGNtLmN1ck9wLnVwZGF0ZUlucHV0O1xuICAgICAgdmFyIGNoYW5nZUV2ZW50ID0ge2Zyb206IGZyb20sIHRvOiB0bywgdGV4dDogbXVsdGlQYXN0ZSA/IG11bHRpUGFzdGVbaSAlIG11bHRpUGFzdGUubGVuZ3RoXSA6IHRleHRMaW5lcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW46IG9yaWdpbiB8fCAocGFzdGUgPyBcInBhc3RlXCIgOiBjbS5zdGF0ZS5jdXRJbmNvbWluZyA/IFwiY3V0XCIgOiBcIitpbnB1dFwiKX07XG4gICAgICBtYWtlQ2hhbmdlKGNtLmRvYywgY2hhbmdlRXZlbnQpO1xuICAgICAgc2lnbmFsTGF0ZXIoY20sIFwiaW5wdXRSZWFkXCIsIGNtLCBjaGFuZ2VFdmVudCk7XG4gICAgfVxuICAgIGlmIChpbnNlcnRlZCAmJiAhcGFzdGUpXG4gICAgICB0cmlnZ2VyRWxlY3RyaWMoY20sIGluc2VydGVkKTtcblxuICAgIGVuc3VyZUN1cnNvclZpc2libGUoY20pO1xuICAgIGNtLmN1ck9wLnVwZGF0ZUlucHV0ID0gdXBkYXRlSW5wdXQ7XG4gICAgY20uY3VyT3AudHlwaW5nID0gdHJ1ZTtcbiAgICBjbS5zdGF0ZS5wYXN0ZUluY29taW5nID0gY20uc3RhdGUuY3V0SW5jb21pbmcgPSBmYWxzZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGhhbmRsZVBhc3RlKGUsIGNtKSB7XG4gICAgdmFyIHBhc3RlZCA9IGUuY2xpcGJvYXJkRGF0YSAmJiBlLmNsaXBib2FyZERhdGEuZ2V0RGF0YShcInRleHQvcGxhaW5cIik7XG4gICAgaWYgKHBhc3RlZCkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgaWYgKCFjbS5pc1JlYWRPbmx5KCkgJiYgIWNtLm9wdGlvbnMuZGlzYWJsZUlucHV0KVxuICAgICAgICBydW5Jbk9wKGNtLCBmdW5jdGlvbigpIHsgYXBwbHlUZXh0SW5wdXQoY20sIHBhc3RlZCwgMCwgbnVsbCwgXCJwYXN0ZVwiKTsgfSk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiB0cmlnZ2VyRWxlY3RyaWMoY20sIGluc2VydGVkKSB7XG4gICAgLy8gV2hlbiBhbiAnZWxlY3RyaWMnIGNoYXJhY3RlciBpcyBpbnNlcnRlZCwgaW1tZWRpYXRlbHkgdHJpZ2dlciBhIHJlaW5kZW50XG4gICAgaWYgKCFjbS5vcHRpb25zLmVsZWN0cmljQ2hhcnMgfHwgIWNtLm9wdGlvbnMuc21hcnRJbmRlbnQpIHJldHVybjtcbiAgICB2YXIgc2VsID0gY20uZG9jLnNlbDtcblxuICAgIGZvciAodmFyIGkgPSBzZWwucmFuZ2VzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICB2YXIgcmFuZ2UgPSBzZWwucmFuZ2VzW2ldO1xuICAgICAgaWYgKHJhbmdlLmhlYWQuY2ggPiAxMDAgfHwgKGkgJiYgc2VsLnJhbmdlc1tpIC0gMV0uaGVhZC5saW5lID09IHJhbmdlLmhlYWQubGluZSkpIGNvbnRpbnVlO1xuICAgICAgdmFyIG1vZGUgPSBjbS5nZXRNb2RlQXQocmFuZ2UuaGVhZCk7XG4gICAgICB2YXIgaW5kZW50ZWQgPSBmYWxzZTtcbiAgICAgIGlmIChtb2RlLmVsZWN0cmljQ2hhcnMpIHtcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBtb2RlLmVsZWN0cmljQ2hhcnMubGVuZ3RoOyBqKyspXG4gICAgICAgICAgaWYgKGluc2VydGVkLmluZGV4T2YobW9kZS5lbGVjdHJpY0NoYXJzLmNoYXJBdChqKSkgPiAtMSkge1xuICAgICAgICAgICAgaW5kZW50ZWQgPSBpbmRlbnRMaW5lKGNtLCByYW5nZS5oZWFkLmxpbmUsIFwic21hcnRcIik7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKG1vZGUuZWxlY3RyaWNJbnB1dCkge1xuICAgICAgICBpZiAobW9kZS5lbGVjdHJpY0lucHV0LnRlc3QoZ2V0TGluZShjbS5kb2MsIHJhbmdlLmhlYWQubGluZSkudGV4dC5zbGljZSgwLCByYW5nZS5oZWFkLmNoKSkpXG4gICAgICAgICAgaW5kZW50ZWQgPSBpbmRlbnRMaW5lKGNtLCByYW5nZS5oZWFkLmxpbmUsIFwic21hcnRcIik7XG4gICAgICB9XG4gICAgICBpZiAoaW5kZW50ZWQpIHNpZ25hbExhdGVyKGNtLCBcImVsZWN0cmljSW5wdXRcIiwgY20sIHJhbmdlLmhlYWQubGluZSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gY29weWFibGVSYW5nZXMoY20pIHtcbiAgICB2YXIgdGV4dCA9IFtdLCByYW5nZXMgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNtLmRvYy5zZWwucmFuZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgbGluZSA9IGNtLmRvYy5zZWwucmFuZ2VzW2ldLmhlYWQubGluZTtcbiAgICAgIHZhciBsaW5lUmFuZ2UgPSB7YW5jaG9yOiBQb3MobGluZSwgMCksIGhlYWQ6IFBvcyhsaW5lICsgMSwgMCl9O1xuICAgICAgcmFuZ2VzLnB1c2gobGluZVJhbmdlKTtcbiAgICAgIHRleHQucHVzaChjbS5nZXRSYW5nZShsaW5lUmFuZ2UuYW5jaG9yLCBsaW5lUmFuZ2UuaGVhZCkpO1xuICAgIH1cbiAgICByZXR1cm4ge3RleHQ6IHRleHQsIHJhbmdlczogcmFuZ2VzfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRpc2FibGVCcm93c2VyTWFnaWMoZmllbGQpIHtcbiAgICBmaWVsZC5zZXRBdHRyaWJ1dGUoXCJhdXRvY29ycmVjdFwiLCBcIm9mZlwiKTtcbiAgICBmaWVsZC5zZXRBdHRyaWJ1dGUoXCJhdXRvY2FwaXRhbGl6ZVwiLCBcIm9mZlwiKTtcbiAgICBmaWVsZC5zZXRBdHRyaWJ1dGUoXCJzcGVsbGNoZWNrXCIsIFwiZmFsc2VcIik7XG4gIH1cblxuICAvLyBURVhUQVJFQSBJTlBVVCBTVFlMRVxuXG4gIGZ1bmN0aW9uIFRleHRhcmVhSW5wdXQoY20pIHtcbiAgICB0aGlzLmNtID0gY207XG4gICAgLy8gU2VlIGlucHV0LnBvbGwgYW5kIGlucHV0LnJlc2V0XG4gICAgdGhpcy5wcmV2SW5wdXQgPSBcIlwiO1xuXG4gICAgLy8gRmxhZyB0aGF0IGluZGljYXRlcyB3aGV0aGVyIHdlIGV4cGVjdCBpbnB1dCB0byBhcHBlYXIgcmVhbCBzb29uXG4gICAgLy8gbm93IChhZnRlciBzb21lIGV2ZW50IGxpa2UgJ2tleXByZXNzJyBvciAnaW5wdXQnKSBhbmQgYXJlXG4gICAgLy8gcG9sbGluZyBpbnRlbnNpdmVseS5cbiAgICB0aGlzLnBvbGxpbmdGYXN0ID0gZmFsc2U7XG4gICAgLy8gU2VsZi1yZXNldHRpbmcgdGltZW91dCBmb3IgdGhlIHBvbGxlclxuICAgIHRoaXMucG9sbGluZyA9IG5ldyBEZWxheWVkKCk7XG4gICAgLy8gVHJhY2tzIHdoZW4gaW5wdXQucmVzZXQgaGFzIHB1bnRlZCB0byBqdXN0IHB1dHRpbmcgYSBzaG9ydFxuICAgIC8vIHN0cmluZyBpbnRvIHRoZSB0ZXh0YXJlYSBpbnN0ZWFkIG9mIHRoZSBmdWxsIHNlbGVjdGlvbi5cbiAgICB0aGlzLmluYWNjdXJhdGVTZWxlY3Rpb24gPSBmYWxzZTtcbiAgICAvLyBVc2VkIHRvIHdvcmsgYXJvdW5kIElFIGlzc3VlIHdpdGggc2VsZWN0aW9uIGJlaW5nIGZvcmdvdHRlbiB3aGVuIGZvY3VzIG1vdmVzIGF3YXkgZnJvbSB0ZXh0YXJlYVxuICAgIHRoaXMuaGFzU2VsZWN0aW9uID0gZmFsc2U7XG4gICAgdGhpcy5jb21wb3NpbmcgPSBudWxsO1xuICB9O1xuXG4gIGZ1bmN0aW9uIGhpZGRlblRleHRhcmVhKCkge1xuICAgIHZhciB0ZSA9IGVsdChcInRleHRhcmVhXCIsIG51bGwsIG51bGwsIFwicG9zaXRpb246IGFic29sdXRlOyBwYWRkaW5nOiAwOyB3aWR0aDogMXB4OyBoZWlnaHQ6IDFlbTsgb3V0bGluZTogbm9uZVwiKTtcbiAgICB2YXIgZGl2ID0gZWx0KFwiZGl2XCIsIFt0ZV0sIG51bGwsIFwib3ZlcmZsb3c6IGhpZGRlbjsgcG9zaXRpb246IHJlbGF0aXZlOyB3aWR0aDogM3B4OyBoZWlnaHQ6IDBweDtcIik7XG4gICAgLy8gVGhlIHRleHRhcmVhIGlzIGtlcHQgcG9zaXRpb25lZCBuZWFyIHRoZSBjdXJzb3IgdG8gcHJldmVudCB0aGVcbiAgICAvLyBmYWN0IHRoYXQgaXQnbGwgYmUgc2Nyb2xsZWQgaW50byB2aWV3IG9uIGlucHV0IGZyb20gc2Nyb2xsaW5nXG4gICAgLy8gb3VyIGZha2UgY3Vyc29yIG91dCBvZiB2aWV3LiBPbiB3ZWJraXQsIHdoZW4gd3JhcD1vZmYsIHBhc3RlIGlzXG4gICAgLy8gdmVyeSBzbG93LiBTbyBtYWtlIHRoZSBhcmVhIHdpZGUgaW5zdGVhZC5cbiAgICBpZiAod2Via2l0KSB0ZS5zdHlsZS53aWR0aCA9IFwiMTAwMHB4XCI7XG4gICAgZWxzZSB0ZS5zZXRBdHRyaWJ1dGUoXCJ3cmFwXCIsIFwib2ZmXCIpO1xuICAgIC8vIElmIGJvcmRlcjogMDsgLS0gaU9TIGZhaWxzIHRvIG9wZW4ga2V5Ym9hcmQgKGlzc3VlICMxMjg3KVxuICAgIGlmIChpb3MpIHRlLnN0eWxlLmJvcmRlciA9IFwiMXB4IHNvbGlkIGJsYWNrXCI7XG4gICAgZGlzYWJsZUJyb3dzZXJNYWdpYyh0ZSk7XG4gICAgcmV0dXJuIGRpdjtcbiAgfVxuXG4gIFRleHRhcmVhSW5wdXQucHJvdG90eXBlID0gY29weU9iaih7XG4gICAgaW5pdDogZnVuY3Rpb24oZGlzcGxheSkge1xuICAgICAgdmFyIGlucHV0ID0gdGhpcywgY20gPSB0aGlzLmNtO1xuXG4gICAgICAvLyBXcmFwcyBhbmQgaGlkZXMgaW5wdXQgdGV4dGFyZWFcbiAgICAgIHZhciBkaXYgPSB0aGlzLndyYXBwZXIgPSBoaWRkZW5UZXh0YXJlYSgpO1xuICAgICAgLy8gVGhlIHNlbWloaWRkZW4gdGV4dGFyZWEgdGhhdCBpcyBmb2N1c2VkIHdoZW4gdGhlIGVkaXRvciBpc1xuICAgICAgLy8gZm9jdXNlZCwgYW5kIHJlY2VpdmVzIGlucHV0LlxuICAgICAgdmFyIHRlID0gdGhpcy50ZXh0YXJlYSA9IGRpdi5maXJzdENoaWxkO1xuICAgICAgZGlzcGxheS53cmFwcGVyLmluc2VydEJlZm9yZShkaXYsIGRpc3BsYXkud3JhcHBlci5maXJzdENoaWxkKTtcblxuICAgICAgLy8gTmVlZGVkIHRvIGhpZGUgYmlnIGJsdWUgYmxpbmtpbmcgY3Vyc29yIG9uIE1vYmlsZSBTYWZhcmkgKGRvZXNuJ3Qgc2VlbSB0byB3b3JrIGluIGlPUyA4IGFueW1vcmUpXG4gICAgICBpZiAoaW9zKSB0ZS5zdHlsZS53aWR0aCA9IFwiMHB4XCI7XG5cbiAgICAgIG9uKHRlLCBcImlucHV0XCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoaWUgJiYgaWVfdmVyc2lvbiA+PSA5ICYmIGlucHV0Lmhhc1NlbGVjdGlvbikgaW5wdXQuaGFzU2VsZWN0aW9uID0gbnVsbDtcbiAgICAgICAgaW5wdXQucG9sbCgpO1xuICAgICAgfSk7XG5cbiAgICAgIG9uKHRlLCBcInBhc3RlXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgaWYgKHNpZ25hbERPTUV2ZW50KGNtLCBlKSB8fCBoYW5kbGVQYXN0ZShlLCBjbSkpIHJldHVyblxuXG4gICAgICAgIGNtLnN0YXRlLnBhc3RlSW5jb21pbmcgPSB0cnVlO1xuICAgICAgICBpbnB1dC5mYXN0UG9sbCgpO1xuICAgICAgfSk7XG5cbiAgICAgIGZ1bmN0aW9uIHByZXBhcmVDb3B5Q3V0KGUpIHtcbiAgICAgICAgaWYgKHNpZ25hbERPTUV2ZW50KGNtLCBlKSkgcmV0dXJuXG4gICAgICAgIGlmIChjbS5zb21ldGhpbmdTZWxlY3RlZCgpKSB7XG4gICAgICAgICAgbGFzdENvcGllZCA9IGNtLmdldFNlbGVjdGlvbnMoKTtcbiAgICAgICAgICBpZiAoaW5wdXQuaW5hY2N1cmF0ZVNlbGVjdGlvbikge1xuICAgICAgICAgICAgaW5wdXQucHJldklucHV0ID0gXCJcIjtcbiAgICAgICAgICAgIGlucHV0LmluYWNjdXJhdGVTZWxlY3Rpb24gPSBmYWxzZTtcbiAgICAgICAgICAgIHRlLnZhbHVlID0gbGFzdENvcGllZC5qb2luKFwiXFxuXCIpO1xuICAgICAgICAgICAgc2VsZWN0SW5wdXQodGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICghY20ub3B0aW9ucy5saW5lV2lzZUNvcHlDdXQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIHJhbmdlcyA9IGNvcHlhYmxlUmFuZ2VzKGNtKTtcbiAgICAgICAgICBsYXN0Q29waWVkID0gcmFuZ2VzLnRleHQ7XG4gICAgICAgICAgaWYgKGUudHlwZSA9PSBcImN1dFwiKSB7XG4gICAgICAgICAgICBjbS5zZXRTZWxlY3Rpb25zKHJhbmdlcy5yYW5nZXMsIG51bGwsIHNlbF9kb250U2Nyb2xsKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaW5wdXQucHJldklucHV0ID0gXCJcIjtcbiAgICAgICAgICAgIHRlLnZhbHVlID0gcmFuZ2VzLnRleHQuam9pbihcIlxcblwiKTtcbiAgICAgICAgICAgIHNlbGVjdElucHV0KHRlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGUudHlwZSA9PSBcImN1dFwiKSBjbS5zdGF0ZS5jdXRJbmNvbWluZyA9IHRydWU7XG4gICAgICB9XG4gICAgICBvbih0ZSwgXCJjdXRcIiwgcHJlcGFyZUNvcHlDdXQpO1xuICAgICAgb24odGUsIFwiY29weVwiLCBwcmVwYXJlQ29weUN1dCk7XG5cbiAgICAgIG9uKGRpc3BsYXkuc2Nyb2xsZXIsIFwicGFzdGVcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICBpZiAoZXZlbnRJbldpZGdldChkaXNwbGF5LCBlKSB8fCBzaWduYWxET01FdmVudChjbSwgZSkpIHJldHVybjtcbiAgICAgICAgY20uc3RhdGUucGFzdGVJbmNvbWluZyA9IHRydWU7XG4gICAgICAgIGlucHV0LmZvY3VzKCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gUHJldmVudCBub3JtYWwgc2VsZWN0aW9uIGluIHRoZSBlZGl0b3IgKHdlIGhhbmRsZSBvdXIgb3duKVxuICAgICAgb24oZGlzcGxheS5saW5lU3BhY2UsIFwic2VsZWN0c3RhcnRcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICBpZiAoIWV2ZW50SW5XaWRnZXQoZGlzcGxheSwgZSkpIGVfcHJldmVudERlZmF1bHQoZSk7XG4gICAgICB9KTtcblxuICAgICAgb24odGUsIFwiY29tcG9zaXRpb25zdGFydFwiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHN0YXJ0ID0gY20uZ2V0Q3Vyc29yKFwiZnJvbVwiKTtcbiAgICAgICAgaWYgKGlucHV0LmNvbXBvc2luZykgaW5wdXQuY29tcG9zaW5nLnJhbmdlLmNsZWFyKClcbiAgICAgICAgaW5wdXQuY29tcG9zaW5nID0ge1xuICAgICAgICAgIHN0YXJ0OiBzdGFydCxcbiAgICAgICAgICByYW5nZTogY20ubWFya1RleHQoc3RhcnQsIGNtLmdldEN1cnNvcihcInRvXCIpLCB7Y2xhc3NOYW1lOiBcIkNvZGVNaXJyb3ItY29tcG9zaW5nXCJ9KVxuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgICBvbih0ZSwgXCJjb21wb3NpdGlvbmVuZFwiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKGlucHV0LmNvbXBvc2luZykge1xuICAgICAgICAgIGlucHV0LnBvbGwoKTtcbiAgICAgICAgICBpbnB1dC5jb21wb3NpbmcucmFuZ2UuY2xlYXIoKTtcbiAgICAgICAgICBpbnB1dC5jb21wb3NpbmcgPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LFxuXG4gICAgcHJlcGFyZVNlbGVjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAvLyBSZWRyYXcgdGhlIHNlbGVjdGlvbiBhbmQvb3IgY3Vyc29yXG4gICAgICB2YXIgY20gPSB0aGlzLmNtLCBkaXNwbGF5ID0gY20uZGlzcGxheSwgZG9jID0gY20uZG9jO1xuICAgICAgdmFyIHJlc3VsdCA9IHByZXBhcmVTZWxlY3Rpb24oY20pO1xuXG4gICAgICAvLyBNb3ZlIHRoZSBoaWRkZW4gdGV4dGFyZWEgbmVhciB0aGUgY3Vyc29yIHRvIHByZXZlbnQgc2Nyb2xsaW5nIGFydGlmYWN0c1xuICAgICAgaWYgKGNtLm9wdGlvbnMubW92ZUlucHV0V2l0aEN1cnNvcikge1xuICAgICAgICB2YXIgaGVhZFBvcyA9IGN1cnNvckNvb3JkcyhjbSwgZG9jLnNlbC5wcmltYXJ5KCkuaGVhZCwgXCJkaXZcIik7XG4gICAgICAgIHZhciB3cmFwT2ZmID0gZGlzcGxheS53cmFwcGVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLCBsaW5lT2ZmID0gZGlzcGxheS5saW5lRGl2LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICByZXN1bHQudGVUb3AgPSBNYXRoLm1heCgwLCBNYXRoLm1pbihkaXNwbGF5LndyYXBwZXIuY2xpZW50SGVpZ2h0IC0gMTAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRQb3MudG9wICsgbGluZU9mZi50b3AgLSB3cmFwT2ZmLnRvcCkpO1xuICAgICAgICByZXN1bHQudGVMZWZ0ID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oZGlzcGxheS53cmFwcGVyLmNsaWVudFdpZHRoIC0gMTAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkUG9zLmxlZnQgKyBsaW5lT2ZmLmxlZnQgLSB3cmFwT2ZmLmxlZnQpKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9LFxuXG4gICAgc2hvd1NlbGVjdGlvbjogZnVuY3Rpb24oZHJhd24pIHtcbiAgICAgIHZhciBjbSA9IHRoaXMuY20sIGRpc3BsYXkgPSBjbS5kaXNwbGF5O1xuICAgICAgcmVtb3ZlQ2hpbGRyZW5BbmRBZGQoZGlzcGxheS5jdXJzb3JEaXYsIGRyYXduLmN1cnNvcnMpO1xuICAgICAgcmVtb3ZlQ2hpbGRyZW5BbmRBZGQoZGlzcGxheS5zZWxlY3Rpb25EaXYsIGRyYXduLnNlbGVjdGlvbik7XG4gICAgICBpZiAoZHJhd24udGVUb3AgIT0gbnVsbCkge1xuICAgICAgICB0aGlzLndyYXBwZXIuc3R5bGUudG9wID0gZHJhd24udGVUb3AgKyBcInB4XCI7XG4gICAgICAgIHRoaXMud3JhcHBlci5zdHlsZS5sZWZ0ID0gZHJhd24udGVMZWZ0ICsgXCJweFwiO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICAvLyBSZXNldCB0aGUgaW5wdXQgdG8gY29ycmVzcG9uZCB0byB0aGUgc2VsZWN0aW9uIChvciB0byBiZSBlbXB0eSxcbiAgICAvLyB3aGVuIG5vdCB0eXBpbmcgYW5kIG5vdGhpbmcgaXMgc2VsZWN0ZWQpXG4gICAgcmVzZXQ6IGZ1bmN0aW9uKHR5cGluZykge1xuICAgICAgaWYgKHRoaXMuY29udGV4dE1lbnVQZW5kaW5nKSByZXR1cm47XG4gICAgICB2YXIgbWluaW1hbCwgc2VsZWN0ZWQsIGNtID0gdGhpcy5jbSwgZG9jID0gY20uZG9jO1xuICAgICAgaWYgKGNtLnNvbWV0aGluZ1NlbGVjdGVkKCkpIHtcbiAgICAgICAgdGhpcy5wcmV2SW5wdXQgPSBcIlwiO1xuICAgICAgICB2YXIgcmFuZ2UgPSBkb2Muc2VsLnByaW1hcnkoKTtcbiAgICAgICAgbWluaW1hbCA9IGhhc0NvcHlFdmVudCAmJlxuICAgICAgICAgIChyYW5nZS50bygpLmxpbmUgLSByYW5nZS5mcm9tKCkubGluZSA+IDEwMCB8fCAoc2VsZWN0ZWQgPSBjbS5nZXRTZWxlY3Rpb24oKSkubGVuZ3RoID4gMTAwMCk7XG4gICAgICAgIHZhciBjb250ZW50ID0gbWluaW1hbCA/IFwiLVwiIDogc2VsZWN0ZWQgfHwgY20uZ2V0U2VsZWN0aW9uKCk7XG4gICAgICAgIHRoaXMudGV4dGFyZWEudmFsdWUgPSBjb250ZW50O1xuICAgICAgICBpZiAoY20uc3RhdGUuZm9jdXNlZCkgc2VsZWN0SW5wdXQodGhpcy50ZXh0YXJlYSk7XG4gICAgICAgIGlmIChpZSAmJiBpZV92ZXJzaW9uID49IDkpIHRoaXMuaGFzU2VsZWN0aW9uID0gY29udGVudDtcbiAgICAgIH0gZWxzZSBpZiAoIXR5cGluZykge1xuICAgICAgICB0aGlzLnByZXZJbnB1dCA9IHRoaXMudGV4dGFyZWEudmFsdWUgPSBcIlwiO1xuICAgICAgICBpZiAoaWUgJiYgaWVfdmVyc2lvbiA+PSA5KSB0aGlzLmhhc1NlbGVjdGlvbiA9IG51bGw7XG4gICAgICB9XG4gICAgICB0aGlzLmluYWNjdXJhdGVTZWxlY3Rpb24gPSBtaW5pbWFsO1xuICAgIH0sXG5cbiAgICBnZXRGaWVsZDogZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzLnRleHRhcmVhOyB9LFxuXG4gICAgc3VwcG9ydHNUb3VjaDogZnVuY3Rpb24oKSB7IHJldHVybiBmYWxzZTsgfSxcblxuICAgIGZvY3VzOiBmdW5jdGlvbigpIHtcbiAgICAgIGlmICh0aGlzLmNtLm9wdGlvbnMucmVhZE9ubHkgIT0gXCJub2N1cnNvclwiICYmICghbW9iaWxlIHx8IGFjdGl2ZUVsdCgpICE9IHRoaXMudGV4dGFyZWEpKSB7XG4gICAgICAgIHRyeSB7IHRoaXMudGV4dGFyZWEuZm9jdXMoKTsgfVxuICAgICAgICBjYXRjaCAoZSkge30gLy8gSUU4IHdpbGwgdGhyb3cgaWYgdGhlIHRleHRhcmVhIGlzIGRpc3BsYXk6IG5vbmUgb3Igbm90IGluIERPTVxuICAgICAgfVxuICAgIH0sXG5cbiAgICBibHVyOiBmdW5jdGlvbigpIHsgdGhpcy50ZXh0YXJlYS5ibHVyKCk7IH0sXG5cbiAgICByZXNldFBvc2l0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMud3JhcHBlci5zdHlsZS50b3AgPSB0aGlzLndyYXBwZXIuc3R5bGUubGVmdCA9IDA7XG4gICAgfSxcblxuICAgIHJlY2VpdmVkRm9jdXM6IGZ1bmN0aW9uKCkgeyB0aGlzLnNsb3dQb2xsKCk7IH0sXG5cbiAgICAvLyBQb2xsIGZvciBpbnB1dCBjaGFuZ2VzLCB1c2luZyB0aGUgbm9ybWFsIHJhdGUgb2YgcG9sbGluZy4gVGhpc1xuICAgIC8vIHJ1bnMgYXMgbG9uZyBhcyB0aGUgZWRpdG9yIGlzIGZvY3VzZWQuXG4gICAgc2xvd1BvbGw6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGlucHV0ID0gdGhpcztcbiAgICAgIGlmIChpbnB1dC5wb2xsaW5nRmFzdCkgcmV0dXJuO1xuICAgICAgaW5wdXQucG9sbGluZy5zZXQodGhpcy5jbS5vcHRpb25zLnBvbGxJbnRlcnZhbCwgZnVuY3Rpb24oKSB7XG4gICAgICAgIGlucHV0LnBvbGwoKTtcbiAgICAgICAgaWYgKGlucHV0LmNtLnN0YXRlLmZvY3VzZWQpIGlucHV0LnNsb3dQb2xsKCk7XG4gICAgICB9KTtcbiAgICB9LFxuXG4gICAgLy8gV2hlbiBhbiBldmVudCBoYXMganVzdCBjb21lIGluIHRoYXQgaXMgbGlrZWx5IHRvIGFkZCBvciBjaGFuZ2VcbiAgICAvLyBzb21ldGhpbmcgaW4gdGhlIGlucHV0IHRleHRhcmVhLCB3ZSBwb2xsIGZhc3RlciwgdG8gZW5zdXJlIHRoYXRcbiAgICAvLyB0aGUgY2hhbmdlIGFwcGVhcnMgb24gdGhlIHNjcmVlbiBxdWlja2x5LlxuICAgIGZhc3RQb2xsOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBtaXNzZWQgPSBmYWxzZSwgaW5wdXQgPSB0aGlzO1xuICAgICAgaW5wdXQucG9sbGluZ0Zhc3QgPSB0cnVlO1xuICAgICAgZnVuY3Rpb24gcCgpIHtcbiAgICAgICAgdmFyIGNoYW5nZWQgPSBpbnB1dC5wb2xsKCk7XG4gICAgICAgIGlmICghY2hhbmdlZCAmJiAhbWlzc2VkKSB7bWlzc2VkID0gdHJ1ZTsgaW5wdXQucG9sbGluZy5zZXQoNjAsIHApO31cbiAgICAgICAgZWxzZSB7aW5wdXQucG9sbGluZ0Zhc3QgPSBmYWxzZTsgaW5wdXQuc2xvd1BvbGwoKTt9XG4gICAgICB9XG4gICAgICBpbnB1dC5wb2xsaW5nLnNldCgyMCwgcCk7XG4gICAgfSxcblxuICAgIC8vIFJlYWQgaW5wdXQgZnJvbSB0aGUgdGV4dGFyZWEsIGFuZCB1cGRhdGUgdGhlIGRvY3VtZW50IHRvIG1hdGNoLlxuICAgIC8vIFdoZW4gc29tZXRoaW5nIGlzIHNlbGVjdGVkLCBpdCBpcyBwcmVzZW50IGluIHRoZSB0ZXh0YXJlYSwgYW5kXG4gICAgLy8gc2VsZWN0ZWQgKHVubGVzcyBpdCBpcyBodWdlLCBpbiB3aGljaCBjYXNlIGEgcGxhY2Vob2xkZXIgaXNcbiAgICAvLyB1c2VkKS4gV2hlbiBub3RoaW5nIGlzIHNlbGVjdGVkLCB0aGUgY3Vyc29yIHNpdHMgYWZ0ZXIgcHJldmlvdXNseVxuICAgIC8vIHNlZW4gdGV4dCAoY2FuIGJlIGVtcHR5KSwgd2hpY2ggaXMgc3RvcmVkIGluIHByZXZJbnB1dCAod2UgbXVzdFxuICAgIC8vIG5vdCByZXNldCB0aGUgdGV4dGFyZWEgd2hlbiB0eXBpbmcsIGJlY2F1c2UgdGhhdCBicmVha3MgSU1FKS5cbiAgICBwb2xsOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBjbSA9IHRoaXMuY20sIGlucHV0ID0gdGhpcy50ZXh0YXJlYSwgcHJldklucHV0ID0gdGhpcy5wcmV2SW5wdXQ7XG4gICAgICAvLyBTaW5jZSB0aGlzIGlzIGNhbGxlZCBhICpsb3QqLCB0cnkgdG8gYmFpbCBvdXQgYXMgY2hlYXBseSBhc1xuICAgICAgLy8gcG9zc2libGUgd2hlbiBpdCBpcyBjbGVhciB0aGF0IG5vdGhpbmcgaGFwcGVuZWQuIGhhc1NlbGVjdGlvblxuICAgICAgLy8gd2lsbCBiZSB0aGUgY2FzZSB3aGVuIHRoZXJlIGlzIGEgbG90IG9mIHRleHQgaW4gdGhlIHRleHRhcmVhLFxuICAgICAgLy8gaW4gd2hpY2ggY2FzZSByZWFkaW5nIGl0cyB2YWx1ZSB3b3VsZCBiZSBleHBlbnNpdmUuXG4gICAgICBpZiAodGhpcy5jb250ZXh0TWVudVBlbmRpbmcgfHwgIWNtLnN0YXRlLmZvY3VzZWQgfHxcbiAgICAgICAgICAoaGFzU2VsZWN0aW9uKGlucHV0KSAmJiAhcHJldklucHV0ICYmICF0aGlzLmNvbXBvc2luZykgfHxcbiAgICAgICAgICBjbS5pc1JlYWRPbmx5KCkgfHwgY20ub3B0aW9ucy5kaXNhYmxlSW5wdXQgfHwgY20uc3RhdGUua2V5U2VxKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICAgIHZhciB0ZXh0ID0gaW5wdXQudmFsdWU7XG4gICAgICAvLyBJZiBub3RoaW5nIGNoYW5nZWQsIGJhaWwuXG4gICAgICBpZiAodGV4dCA9PSBwcmV2SW5wdXQgJiYgIWNtLnNvbWV0aGluZ1NlbGVjdGVkKCkpIHJldHVybiBmYWxzZTtcbiAgICAgIC8vIFdvcmsgYXJvdW5kIG5vbnNlbnNpY2FsIHNlbGVjdGlvbiByZXNldHRpbmcgaW4gSUU5LzEwLCBhbmRcbiAgICAgIC8vIGluZXhwbGljYWJsZSBhcHBlYXJhbmNlIG9mIHByaXZhdGUgYXJlYSB1bmljb2RlIGNoYXJhY3RlcnMgb25cbiAgICAgIC8vIHNvbWUga2V5IGNvbWJvcyBpbiBNYWMgKCMyNjg5KS5cbiAgICAgIGlmIChpZSAmJiBpZV92ZXJzaW9uID49IDkgJiYgdGhpcy5oYXNTZWxlY3Rpb24gPT09IHRleHQgfHxcbiAgICAgICAgICBtYWMgJiYgL1tcXHVmNzAwLVxcdWY3ZmZdLy50ZXN0KHRleHQpKSB7XG4gICAgICAgIGNtLmRpc3BsYXkuaW5wdXQucmVzZXQoKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBpZiAoY20uZG9jLnNlbCA9PSBjbS5kaXNwbGF5LnNlbEZvckNvbnRleHRNZW51KSB7XG4gICAgICAgIHZhciBmaXJzdCA9IHRleHQuY2hhckNvZGVBdCgwKTtcbiAgICAgICAgaWYgKGZpcnN0ID09IDB4MjAwYiAmJiAhcHJldklucHV0KSBwcmV2SW5wdXQgPSBcIlxcdTIwMGJcIjtcbiAgICAgICAgaWYgKGZpcnN0ID09IDB4MjFkYSkgeyB0aGlzLnJlc2V0KCk7IHJldHVybiB0aGlzLmNtLmV4ZWNDb21tYW5kKFwidW5kb1wiKTsgfVxuICAgICAgfVxuICAgICAgLy8gRmluZCB0aGUgcGFydCBvZiB0aGUgaW5wdXQgdGhhdCBpcyBhY3R1YWxseSBuZXdcbiAgICAgIHZhciBzYW1lID0gMCwgbCA9IE1hdGgubWluKHByZXZJbnB1dC5sZW5ndGgsIHRleHQubGVuZ3RoKTtcbiAgICAgIHdoaWxlIChzYW1lIDwgbCAmJiBwcmV2SW5wdXQuY2hhckNvZGVBdChzYW1lKSA9PSB0ZXh0LmNoYXJDb2RlQXQoc2FtZSkpICsrc2FtZTtcblxuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgcnVuSW5PcChjbSwgZnVuY3Rpb24oKSB7XG4gICAgICAgIGFwcGx5VGV4dElucHV0KGNtLCB0ZXh0LnNsaWNlKHNhbWUpLCBwcmV2SW5wdXQubGVuZ3RoIC0gc2FtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgbnVsbCwgc2VsZi5jb21wb3NpbmcgPyBcIipjb21wb3NlXCIgOiBudWxsKTtcblxuICAgICAgICAvLyBEb24ndCBsZWF2ZSBsb25nIHRleHQgaW4gdGhlIHRleHRhcmVhLCBzaW5jZSBpdCBtYWtlcyBmdXJ0aGVyIHBvbGxpbmcgc2xvd1xuICAgICAgICBpZiAodGV4dC5sZW5ndGggPiAxMDAwIHx8IHRleHQuaW5kZXhPZihcIlxcblwiKSA+IC0xKSBpbnB1dC52YWx1ZSA9IHNlbGYucHJldklucHV0ID0gXCJcIjtcbiAgICAgICAgZWxzZSBzZWxmLnByZXZJbnB1dCA9IHRleHQ7XG5cbiAgICAgICAgaWYgKHNlbGYuY29tcG9zaW5nKSB7XG4gICAgICAgICAgc2VsZi5jb21wb3NpbmcucmFuZ2UuY2xlYXIoKTtcbiAgICAgICAgICBzZWxmLmNvbXBvc2luZy5yYW5nZSA9IGNtLm1hcmtUZXh0KHNlbGYuY29tcG9zaW5nLnN0YXJ0LCBjbS5nZXRDdXJzb3IoXCJ0b1wiKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjbGFzc05hbWU6IFwiQ29kZU1pcnJvci1jb21wb3NpbmdcIn0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0sXG5cbiAgICBlbnN1cmVQb2xsZWQ6IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKHRoaXMucG9sbGluZ0Zhc3QgJiYgdGhpcy5wb2xsKCkpIHRoaXMucG9sbGluZ0Zhc3QgPSBmYWxzZTtcbiAgICB9LFxuXG4gICAgb25LZXlQcmVzczogZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoaWUgJiYgaWVfdmVyc2lvbiA+PSA5KSB0aGlzLmhhc1NlbGVjdGlvbiA9IG51bGw7XG4gICAgICB0aGlzLmZhc3RQb2xsKCk7XG4gICAgfSxcblxuICAgIG9uQ29udGV4dE1lbnU6IGZ1bmN0aW9uKGUpIHtcbiAgICAgIHZhciBpbnB1dCA9IHRoaXMsIGNtID0gaW5wdXQuY20sIGRpc3BsYXkgPSBjbS5kaXNwbGF5LCB0ZSA9IGlucHV0LnRleHRhcmVhO1xuICAgICAgdmFyIHBvcyA9IHBvc0Zyb21Nb3VzZShjbSwgZSksIHNjcm9sbFBvcyA9IGRpc3BsYXkuc2Nyb2xsZXIuc2Nyb2xsVG9wO1xuICAgICAgaWYgKCFwb3MgfHwgcHJlc3RvKSByZXR1cm47IC8vIE9wZXJhIGlzIGRpZmZpY3VsdC5cblxuICAgICAgLy8gUmVzZXQgdGhlIGN1cnJlbnQgdGV4dCBzZWxlY3Rpb24gb25seSBpZiB0aGUgY2xpY2sgaXMgZG9uZSBvdXRzaWRlIG9mIHRoZSBzZWxlY3Rpb25cbiAgICAgIC8vIGFuZCAncmVzZXRTZWxlY3Rpb25PbkNvbnRleHRNZW51JyBvcHRpb24gaXMgdHJ1ZS5cbiAgICAgIHZhciByZXNldCA9IGNtLm9wdGlvbnMucmVzZXRTZWxlY3Rpb25PbkNvbnRleHRNZW51O1xuICAgICAgaWYgKHJlc2V0ICYmIGNtLmRvYy5zZWwuY29udGFpbnMocG9zKSA9PSAtMSlcbiAgICAgICAgb3BlcmF0aW9uKGNtLCBzZXRTZWxlY3Rpb24pKGNtLmRvYywgc2ltcGxlU2VsZWN0aW9uKHBvcyksIHNlbF9kb250U2Nyb2xsKTtcblxuICAgICAgdmFyIG9sZENTUyA9IHRlLnN0eWxlLmNzc1RleHQsIG9sZFdyYXBwZXJDU1MgPSBpbnB1dC53cmFwcGVyLnN0eWxlLmNzc1RleHQ7XG4gICAgICBpbnB1dC53cmFwcGVyLnN0eWxlLmNzc1RleHQgPSBcInBvc2l0aW9uOiBhYnNvbHV0ZVwiXG4gICAgICB2YXIgd3JhcHBlckJveCA9IGlucHV0LndyYXBwZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcbiAgICAgIHRlLnN0eWxlLmNzc1RleHQgPSBcInBvc2l0aW9uOiBhYnNvbHV0ZTsgd2lkdGg6IDMwcHg7IGhlaWdodDogMzBweDsgdG9wOiBcIiArIChlLmNsaWVudFkgLSB3cmFwcGVyQm94LnRvcCAtIDUpICtcbiAgICAgICAgXCJweDsgbGVmdDogXCIgKyAoZS5jbGllbnRYIC0gd3JhcHBlckJveC5sZWZ0IC0gNSkgKyBcInB4OyB6LWluZGV4OiAxMDAwOyBiYWNrZ3JvdW5kOiBcIiArXG4gICAgICAgIChpZSA/IFwicmdiYSgyNTUsIDI1NSwgMjU1LCAuMDUpXCIgOiBcInRyYW5zcGFyZW50XCIpICtcbiAgICAgICAgXCI7IG91dGxpbmU6IG5vbmU7IGJvcmRlci13aWR0aDogMDsgb3V0bGluZTogbm9uZTsgb3ZlcmZsb3c6IGhpZGRlbjsgb3BhY2l0eTogLjA1OyBmaWx0ZXI6IGFscGhhKG9wYWNpdHk9NSk7XCI7XG4gICAgICBpZiAod2Via2l0KSB2YXIgb2xkU2Nyb2xsWSA9IHdpbmRvdy5zY3JvbGxZOyAvLyBXb3JrIGFyb3VuZCBDaHJvbWUgaXNzdWUgKCMyNzEyKVxuICAgICAgZGlzcGxheS5pbnB1dC5mb2N1cygpO1xuICAgICAgaWYgKHdlYmtpdCkgd2luZG93LnNjcm9sbFRvKG51bGwsIG9sZFNjcm9sbFkpO1xuICAgICAgZGlzcGxheS5pbnB1dC5yZXNldCgpO1xuICAgICAgLy8gQWRkcyBcIlNlbGVjdCBhbGxcIiB0byBjb250ZXh0IG1lbnUgaW4gRkZcbiAgICAgIGlmICghY20uc29tZXRoaW5nU2VsZWN0ZWQoKSkgdGUudmFsdWUgPSBpbnB1dC5wcmV2SW5wdXQgPSBcIiBcIjtcbiAgICAgIGlucHV0LmNvbnRleHRNZW51UGVuZGluZyA9IHRydWU7XG4gICAgICBkaXNwbGF5LnNlbEZvckNvbnRleHRNZW51ID0gY20uZG9jLnNlbDtcbiAgICAgIGNsZWFyVGltZW91dChkaXNwbGF5LmRldGVjdGluZ1NlbGVjdEFsbCk7XG5cbiAgICAgIC8vIFNlbGVjdC1hbGwgd2lsbCBiZSBncmV5ZWQgb3V0IGlmIHRoZXJlJ3Mgbm90aGluZyB0byBzZWxlY3QsIHNvXG4gICAgICAvLyB0aGlzIGFkZHMgYSB6ZXJvLXdpZHRoIHNwYWNlIHNvIHRoYXQgd2UgY2FuIGxhdGVyIGNoZWNrIHdoZXRoZXJcbiAgICAgIC8vIGl0IGdvdCBzZWxlY3RlZC5cbiAgICAgIGZ1bmN0aW9uIHByZXBhcmVTZWxlY3RBbGxIYWNrKCkge1xuICAgICAgICBpZiAodGUuc2VsZWN0aW9uU3RhcnQgIT0gbnVsbCkge1xuICAgICAgICAgIHZhciBzZWxlY3RlZCA9IGNtLnNvbWV0aGluZ1NlbGVjdGVkKCk7XG4gICAgICAgICAgdmFyIGV4dHZhbCA9IFwiXFx1MjAwYlwiICsgKHNlbGVjdGVkID8gdGUudmFsdWUgOiBcIlwiKTtcbiAgICAgICAgICB0ZS52YWx1ZSA9IFwiXFx1MjFkYVwiOyAvLyBVc2VkIHRvIGNhdGNoIGNvbnRleHQtbWVudSB1bmRvXG4gICAgICAgICAgdGUudmFsdWUgPSBleHR2YWw7XG4gICAgICAgICAgaW5wdXQucHJldklucHV0ID0gc2VsZWN0ZWQgPyBcIlwiIDogXCJcXHUyMDBiXCI7XG4gICAgICAgICAgdGUuc2VsZWN0aW9uU3RhcnQgPSAxOyB0ZS5zZWxlY3Rpb25FbmQgPSBleHR2YWwubGVuZ3RoO1xuICAgICAgICAgIC8vIFJlLXNldCB0aGlzLCBpbiBjYXNlIHNvbWUgb3RoZXIgaGFuZGxlciB0b3VjaGVkIHRoZVxuICAgICAgICAgIC8vIHNlbGVjdGlvbiBpbiB0aGUgbWVhbnRpbWUuXG4gICAgICAgICAgZGlzcGxheS5zZWxGb3JDb250ZXh0TWVudSA9IGNtLmRvYy5zZWw7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGZ1bmN0aW9uIHJlaGlkZSgpIHtcbiAgICAgICAgaW5wdXQuY29udGV4dE1lbnVQZW5kaW5nID0gZmFsc2U7XG4gICAgICAgIGlucHV0LndyYXBwZXIuc3R5bGUuY3NzVGV4dCA9IG9sZFdyYXBwZXJDU1NcbiAgICAgICAgdGUuc3R5bGUuY3NzVGV4dCA9IG9sZENTUztcbiAgICAgICAgaWYgKGllICYmIGllX3ZlcnNpb24gPCA5KSBkaXNwbGF5LnNjcm9sbGJhcnMuc2V0U2Nyb2xsVG9wKGRpc3BsYXkuc2Nyb2xsZXIuc2Nyb2xsVG9wID0gc2Nyb2xsUG9zKTtcblxuICAgICAgICAvLyBUcnkgdG8gZGV0ZWN0IHRoZSB1c2VyIGNob29zaW5nIHNlbGVjdC1hbGxcbiAgICAgICAgaWYgKHRlLnNlbGVjdGlvblN0YXJ0ICE9IG51bGwpIHtcbiAgICAgICAgICBpZiAoIWllIHx8IChpZSAmJiBpZV92ZXJzaW9uIDwgOSkpIHByZXBhcmVTZWxlY3RBbGxIYWNrKCk7XG4gICAgICAgICAgdmFyIGkgPSAwLCBwb2xsID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoZGlzcGxheS5zZWxGb3JDb250ZXh0TWVudSA9PSBjbS5kb2Muc2VsICYmIHRlLnNlbGVjdGlvblN0YXJ0ID09IDAgJiZcbiAgICAgICAgICAgICAgICB0ZS5zZWxlY3Rpb25FbmQgPiAwICYmIGlucHV0LnByZXZJbnB1dCA9PSBcIlxcdTIwMGJcIilcbiAgICAgICAgICAgICAgb3BlcmF0aW9uKGNtLCBjb21tYW5kcy5zZWxlY3RBbGwpKGNtKTtcbiAgICAgICAgICAgIGVsc2UgaWYgKGkrKyA8IDEwKSBkaXNwbGF5LmRldGVjdGluZ1NlbGVjdEFsbCA9IHNldFRpbWVvdXQocG9sbCwgNTAwKTtcbiAgICAgICAgICAgIGVsc2UgZGlzcGxheS5pbnB1dC5yZXNldCgpO1xuICAgICAgICAgIH07XG4gICAgICAgICAgZGlzcGxheS5kZXRlY3RpbmdTZWxlY3RBbGwgPSBzZXRUaW1lb3V0KHBvbGwsIDIwMCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGllICYmIGllX3ZlcnNpb24gPj0gOSkgcHJlcGFyZVNlbGVjdEFsbEhhY2soKTtcbiAgICAgIGlmIChjYXB0dXJlUmlnaHRDbGljaykge1xuICAgICAgICBlX3N0b3AoZSk7XG4gICAgICAgIHZhciBtb3VzZXVwID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgb2ZmKHdpbmRvdywgXCJtb3VzZXVwXCIsIG1vdXNldXApO1xuICAgICAgICAgIHNldFRpbWVvdXQocmVoaWRlLCAyMCk7XG4gICAgICAgIH07XG4gICAgICAgIG9uKHdpbmRvdywgXCJtb3VzZXVwXCIsIG1vdXNldXApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2V0VGltZW91dChyZWhpZGUsIDUwKTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgcmVhZE9ubHlDaGFuZ2VkOiBmdW5jdGlvbih2YWwpIHtcbiAgICAgIGlmICghdmFsKSB0aGlzLnJlc2V0KCk7XG4gICAgfSxcblxuICAgIHNldFVuZWRpdGFibGU6IG5vdGhpbmcsXG5cbiAgICBuZWVkc0NvbnRlbnRBdHRyaWJ1dGU6IGZhbHNlXG4gIH0sIFRleHRhcmVhSW5wdXQucHJvdG90eXBlKTtcblxuICAvLyBDT05URU5URURJVEFCTEUgSU5QVVQgU1RZTEVcblxuICBmdW5jdGlvbiBDb250ZW50RWRpdGFibGVJbnB1dChjbSkge1xuICAgIHRoaXMuY20gPSBjbTtcbiAgICB0aGlzLmxhc3RBbmNob3JOb2RlID0gdGhpcy5sYXN0QW5jaG9yT2Zmc2V0ID0gdGhpcy5sYXN0Rm9jdXNOb2RlID0gdGhpcy5sYXN0Rm9jdXNPZmZzZXQgPSBudWxsO1xuICAgIHRoaXMucG9sbGluZyA9IG5ldyBEZWxheWVkKCk7XG4gICAgdGhpcy5ncmFjZVBlcmlvZCA9IGZhbHNlO1xuICB9XG5cbiAgQ29udGVudEVkaXRhYmxlSW5wdXQucHJvdG90eXBlID0gY29weU9iaih7XG4gICAgaW5pdDogZnVuY3Rpb24oZGlzcGxheSkge1xuICAgICAgdmFyIGlucHV0ID0gdGhpcywgY20gPSBpbnB1dC5jbTtcbiAgICAgIHZhciBkaXYgPSBpbnB1dC5kaXYgPSBkaXNwbGF5LmxpbmVEaXY7XG4gICAgICBkaXNhYmxlQnJvd3Nlck1hZ2ljKGRpdik7XG5cbiAgICAgIG9uKGRpdiwgXCJwYXN0ZVwiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGlmICghc2lnbmFsRE9NRXZlbnQoY20sIGUpKSBoYW5kbGVQYXN0ZShlLCBjbSk7XG4gICAgICB9KVxuXG4gICAgICBvbihkaXYsIFwiY29tcG9zaXRpb25zdGFydFwiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIHZhciBkYXRhID0gZS5kYXRhO1xuICAgICAgICBpbnB1dC5jb21wb3NpbmcgPSB7c2VsOiBjbS5kb2Muc2VsLCBkYXRhOiBkYXRhLCBzdGFydERhdGE6IGRhdGF9O1xuICAgICAgICBpZiAoIWRhdGEpIHJldHVybjtcbiAgICAgICAgdmFyIHByaW0gPSBjbS5kb2Muc2VsLnByaW1hcnkoKTtcbiAgICAgICAgdmFyIGxpbmUgPSBjbS5nZXRMaW5lKHByaW0uaGVhZC5saW5lKTtcbiAgICAgICAgdmFyIGZvdW5kID0gbGluZS5pbmRleE9mKGRhdGEsIE1hdGgubWF4KDAsIHByaW0uaGVhZC5jaCAtIGRhdGEubGVuZ3RoKSk7XG4gICAgICAgIGlmIChmb3VuZCA+IC0xICYmIGZvdW5kIDw9IHByaW0uaGVhZC5jaClcbiAgICAgICAgICBpbnB1dC5jb21wb3Npbmcuc2VsID0gc2ltcGxlU2VsZWN0aW9uKFBvcyhwcmltLmhlYWQubGluZSwgZm91bmQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUG9zKHByaW0uaGVhZC5saW5lLCBmb3VuZCArIGRhdGEubGVuZ3RoKSk7XG4gICAgICB9KTtcbiAgICAgIG9uKGRpdiwgXCJjb21wb3NpdGlvbnVwZGF0ZVwiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGlucHV0LmNvbXBvc2luZy5kYXRhID0gZS5kYXRhO1xuICAgICAgfSk7XG4gICAgICBvbihkaXYsIFwiY29tcG9zaXRpb25lbmRcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICB2YXIgb3VycyA9IGlucHV0LmNvbXBvc2luZztcbiAgICAgICAgaWYgKCFvdXJzKSByZXR1cm47XG4gICAgICAgIGlmIChlLmRhdGEgIT0gb3Vycy5zdGFydERhdGEgJiYgIS9cXHUyMDBiLy50ZXN0KGUuZGF0YSkpXG4gICAgICAgICAgb3Vycy5kYXRhID0gZS5kYXRhO1xuICAgICAgICAvLyBOZWVkIGEgc21hbGwgZGVsYXkgdG8gcHJldmVudCBvdGhlciBjb2RlIChpbnB1dCBldmVudCxcbiAgICAgICAgLy8gc2VsZWN0aW9uIHBvbGxpbmcpIGZyb20gZG9pbmcgZGFtYWdlIHdoZW4gZmlyZWQgcmlnaHQgYWZ0ZXJcbiAgICAgICAgLy8gY29tcG9zaXRpb25lbmQuXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgaWYgKCFvdXJzLmhhbmRsZWQpXG4gICAgICAgICAgICBpbnB1dC5hcHBseUNvbXBvc2l0aW9uKG91cnMpO1xuICAgICAgICAgIGlmIChpbnB1dC5jb21wb3NpbmcgPT0gb3VycylcbiAgICAgICAgICAgIGlucHV0LmNvbXBvc2luZyA9IG51bGw7XG4gICAgICAgIH0sIDUwKTtcbiAgICAgIH0pO1xuXG4gICAgICBvbihkaXYsIFwidG91Y2hzdGFydFwiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgaW5wdXQuZm9yY2VDb21wb3NpdGlvbkVuZCgpO1xuICAgICAgfSk7XG5cbiAgICAgIG9uKGRpdiwgXCJpbnB1dFwiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKGlucHV0LmNvbXBvc2luZykgcmV0dXJuO1xuICAgICAgICBpZiAoY20uaXNSZWFkT25seSgpIHx8ICFpbnB1dC5wb2xsQ29udGVudCgpKVxuICAgICAgICAgIHJ1bkluT3AoaW5wdXQuY20sIGZ1bmN0aW9uKCkge3JlZ0NoYW5nZShjbSk7fSk7XG4gICAgICB9KTtcblxuICAgICAgZnVuY3Rpb24gb25Db3B5Q3V0KGUpIHtcbiAgICAgICAgaWYgKHNpZ25hbERPTUV2ZW50KGNtLCBlKSkgcmV0dXJuXG4gICAgICAgIGlmIChjbS5zb21ldGhpbmdTZWxlY3RlZCgpKSB7XG4gICAgICAgICAgbGFzdENvcGllZCA9IGNtLmdldFNlbGVjdGlvbnMoKTtcbiAgICAgICAgICBpZiAoZS50eXBlID09IFwiY3V0XCIpIGNtLnJlcGxhY2VTZWxlY3Rpb24oXCJcIiwgbnVsbCwgXCJjdXRcIik7XG4gICAgICAgIH0gZWxzZSBpZiAoIWNtLm9wdGlvbnMubGluZVdpc2VDb3B5Q3V0KSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciByYW5nZXMgPSBjb3B5YWJsZVJhbmdlcyhjbSk7XG4gICAgICAgICAgbGFzdENvcGllZCA9IHJhbmdlcy50ZXh0O1xuICAgICAgICAgIGlmIChlLnR5cGUgPT0gXCJjdXRcIikge1xuICAgICAgICAgICAgY20ub3BlcmF0aW9uKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICBjbS5zZXRTZWxlY3Rpb25zKHJhbmdlcy5yYW5nZXMsIDAsIHNlbF9kb250U2Nyb2xsKTtcbiAgICAgICAgICAgICAgY20ucmVwbGFjZVNlbGVjdGlvbihcIlwiLCBudWxsLCBcImN1dFwiKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBpT1MgZXhwb3NlcyB0aGUgY2xpcGJvYXJkIEFQSSwgYnV0IHNlZW1zIHRvIGRpc2NhcmQgY29udGVudCBpbnNlcnRlZCBpbnRvIGl0XG4gICAgICAgIGlmIChlLmNsaXBib2FyZERhdGEgJiYgIWlvcykge1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICBlLmNsaXBib2FyZERhdGEuY2xlYXJEYXRhKCk7XG4gICAgICAgICAgZS5jbGlwYm9hcmREYXRhLnNldERhdGEoXCJ0ZXh0L3BsYWluXCIsIGxhc3RDb3BpZWQuam9pbihcIlxcblwiKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gT2xkLWZhc2hpb25lZCBicmllZmx5LWZvY3VzLWEtdGV4dGFyZWEgaGFja1xuICAgICAgICAgIHZhciBrbHVkZ2UgPSBoaWRkZW5UZXh0YXJlYSgpLCB0ZSA9IGtsdWRnZS5maXJzdENoaWxkO1xuICAgICAgICAgIGNtLmRpc3BsYXkubGluZVNwYWNlLmluc2VydEJlZm9yZShrbHVkZ2UsIGNtLmRpc3BsYXkubGluZVNwYWNlLmZpcnN0Q2hpbGQpO1xuICAgICAgICAgIHRlLnZhbHVlID0gbGFzdENvcGllZC5qb2luKFwiXFxuXCIpO1xuICAgICAgICAgIHZhciBoYWRGb2N1cyA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7XG4gICAgICAgICAgc2VsZWN0SW5wdXQodGUpO1xuICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBjbS5kaXNwbGF5LmxpbmVTcGFjZS5yZW1vdmVDaGlsZChrbHVkZ2UpO1xuICAgICAgICAgICAgaGFkRm9jdXMuZm9jdXMoKTtcbiAgICAgICAgICB9LCA1MCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIG9uKGRpdiwgXCJjb3B5XCIsIG9uQ29weUN1dCk7XG4gICAgICBvbihkaXYsIFwiY3V0XCIsIG9uQ29weUN1dCk7XG4gICAgfSxcblxuICAgIHByZXBhcmVTZWxlY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHJlc3VsdCA9IHByZXBhcmVTZWxlY3Rpb24odGhpcy5jbSwgZmFsc2UpO1xuICAgICAgcmVzdWx0LmZvY3VzID0gdGhpcy5jbS5zdGF0ZS5mb2N1c2VkO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9LFxuXG4gICAgc2hvd1NlbGVjdGlvbjogZnVuY3Rpb24oaW5mbykge1xuICAgICAgaWYgKCFpbmZvIHx8ICF0aGlzLmNtLmRpc3BsYXkudmlldy5sZW5ndGgpIHJldHVybjtcbiAgICAgIGlmIChpbmZvLmZvY3VzKSB0aGlzLnNob3dQcmltYXJ5U2VsZWN0aW9uKCk7XG4gICAgICB0aGlzLnNob3dNdWx0aXBsZVNlbGVjdGlvbnMoaW5mbyk7XG4gICAgfSxcblxuICAgIHNob3dQcmltYXJ5U2VsZWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWwgPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCksIHByaW0gPSB0aGlzLmNtLmRvYy5zZWwucHJpbWFyeSgpO1xuICAgICAgdmFyIGN1ckFuY2hvciA9IGRvbVRvUG9zKHRoaXMuY20sIHNlbC5hbmNob3JOb2RlLCBzZWwuYW5jaG9yT2Zmc2V0KTtcbiAgICAgIHZhciBjdXJGb2N1cyA9IGRvbVRvUG9zKHRoaXMuY20sIHNlbC5mb2N1c05vZGUsIHNlbC5mb2N1c09mZnNldCk7XG4gICAgICBpZiAoY3VyQW5jaG9yICYmICFjdXJBbmNob3IuYmFkICYmIGN1ckZvY3VzICYmICFjdXJGb2N1cy5iYWQgJiZcbiAgICAgICAgICBjbXAobWluUG9zKGN1ckFuY2hvciwgY3VyRm9jdXMpLCBwcmltLmZyb20oKSkgPT0gMCAmJlxuICAgICAgICAgIGNtcChtYXhQb3MoY3VyQW5jaG9yLCBjdXJGb2N1cyksIHByaW0udG8oKSkgPT0gMClcbiAgICAgICAgcmV0dXJuO1xuXG4gICAgICB2YXIgc3RhcnQgPSBwb3NUb0RPTSh0aGlzLmNtLCBwcmltLmZyb20oKSk7XG4gICAgICB2YXIgZW5kID0gcG9zVG9ET00odGhpcy5jbSwgcHJpbS50bygpKTtcbiAgICAgIGlmICghc3RhcnQgJiYgIWVuZCkgcmV0dXJuO1xuXG4gICAgICB2YXIgdmlldyA9IHRoaXMuY20uZGlzcGxheS52aWV3O1xuICAgICAgdmFyIG9sZCA9IHNlbC5yYW5nZUNvdW50ICYmIHNlbC5nZXRSYW5nZUF0KDApO1xuICAgICAgaWYgKCFzdGFydCkge1xuICAgICAgICBzdGFydCA9IHtub2RlOiB2aWV3WzBdLm1lYXN1cmUubWFwWzJdLCBvZmZzZXQ6IDB9O1xuICAgICAgfSBlbHNlIGlmICghZW5kKSB7IC8vIEZJWE1FIGRhbmdlcm91c2x5IGhhY2t5XG4gICAgICAgIHZhciBtZWFzdXJlID0gdmlld1t2aWV3Lmxlbmd0aCAtIDFdLm1lYXN1cmU7XG4gICAgICAgIHZhciBtYXAgPSBtZWFzdXJlLm1hcHMgPyBtZWFzdXJlLm1hcHNbbWVhc3VyZS5tYXBzLmxlbmd0aCAtIDFdIDogbWVhc3VyZS5tYXA7XG4gICAgICAgIGVuZCA9IHtub2RlOiBtYXBbbWFwLmxlbmd0aCAtIDFdLCBvZmZzZXQ6IG1hcFttYXAubGVuZ3RoIC0gMl0gLSBtYXBbbWFwLmxlbmd0aCAtIDNdfTtcbiAgICAgIH1cblxuICAgICAgdHJ5IHsgdmFyIHJuZyA9IHJhbmdlKHN0YXJ0Lm5vZGUsIHN0YXJ0Lm9mZnNldCwgZW5kLm9mZnNldCwgZW5kLm5vZGUpOyB9XG4gICAgICBjYXRjaChlKSB7fSAvLyBPdXIgbW9kZWwgb2YgdGhlIERPTSBtaWdodCBiZSBvdXRkYXRlZCwgaW4gd2hpY2ggY2FzZSB0aGUgcmFuZ2Ugd2UgdHJ5IHRvIHNldCBjYW4gYmUgaW1wb3NzaWJsZVxuICAgICAgaWYgKHJuZykge1xuICAgICAgICBpZiAoIWdlY2tvICYmIHRoaXMuY20uc3RhdGUuZm9jdXNlZCkge1xuICAgICAgICAgIHNlbC5jb2xsYXBzZShzdGFydC5ub2RlLCBzdGFydC5vZmZzZXQpO1xuICAgICAgICAgIGlmICghcm5nLmNvbGxhcHNlZCkgc2VsLmFkZFJhbmdlKHJuZyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2VsLnJlbW92ZUFsbFJhbmdlcygpO1xuICAgICAgICAgIHNlbC5hZGRSYW5nZShybmcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvbGQgJiYgc2VsLmFuY2hvck5vZGUgPT0gbnVsbCkgc2VsLmFkZFJhbmdlKG9sZCk7XG4gICAgICAgIGVsc2UgaWYgKGdlY2tvKSB0aGlzLnN0YXJ0R3JhY2VQZXJpb2QoKTtcbiAgICAgIH1cbiAgICAgIHRoaXMucmVtZW1iZXJTZWxlY3Rpb24oKTtcbiAgICB9LFxuXG4gICAgc3RhcnRHcmFjZVBlcmlvZDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgaW5wdXQgPSB0aGlzO1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuZ3JhY2VQZXJpb2QpO1xuICAgICAgdGhpcy5ncmFjZVBlcmlvZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIGlucHV0LmdyYWNlUGVyaW9kID0gZmFsc2U7XG4gICAgICAgIGlmIChpbnB1dC5zZWxlY3Rpb25DaGFuZ2VkKCkpXG4gICAgICAgICAgaW5wdXQuY20ub3BlcmF0aW9uKGZ1bmN0aW9uKCkgeyBpbnB1dC5jbS5jdXJPcC5zZWxlY3Rpb25DaGFuZ2VkID0gdHJ1ZTsgfSk7XG4gICAgICB9LCAyMCk7XG4gICAgfSxcblxuICAgIHNob3dNdWx0aXBsZVNlbGVjdGlvbnM6IGZ1bmN0aW9uKGluZm8pIHtcbiAgICAgIHJlbW92ZUNoaWxkcmVuQW5kQWRkKHRoaXMuY20uZGlzcGxheS5jdXJzb3JEaXYsIGluZm8uY3Vyc29ycyk7XG4gICAgICByZW1vdmVDaGlsZHJlbkFuZEFkZCh0aGlzLmNtLmRpc3BsYXkuc2VsZWN0aW9uRGl2LCBpbmZvLnNlbGVjdGlvbik7XG4gICAgfSxcblxuICAgIHJlbWVtYmVyU2VsZWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWwgPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk7XG4gICAgICB0aGlzLmxhc3RBbmNob3JOb2RlID0gc2VsLmFuY2hvck5vZGU7IHRoaXMubGFzdEFuY2hvck9mZnNldCA9IHNlbC5hbmNob3JPZmZzZXQ7XG4gICAgICB0aGlzLmxhc3RGb2N1c05vZGUgPSBzZWwuZm9jdXNOb2RlOyB0aGlzLmxhc3RGb2N1c09mZnNldCA9IHNlbC5mb2N1c09mZnNldDtcbiAgICB9LFxuXG4gICAgc2VsZWN0aW9uSW5FZGl0b3I6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbCA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTtcbiAgICAgIGlmICghc2VsLnJhbmdlQ291bnQpIHJldHVybiBmYWxzZTtcbiAgICAgIHZhciBub2RlID0gc2VsLmdldFJhbmdlQXQoMCkuY29tbW9uQW5jZXN0b3JDb250YWluZXI7XG4gICAgICByZXR1cm4gY29udGFpbnModGhpcy5kaXYsIG5vZGUpO1xuICAgIH0sXG5cbiAgICBmb2N1czogZnVuY3Rpb24oKSB7XG4gICAgICBpZiAodGhpcy5jbS5vcHRpb25zLnJlYWRPbmx5ICE9IFwibm9jdXJzb3JcIikgdGhpcy5kaXYuZm9jdXMoKTtcbiAgICB9LFxuICAgIGJsdXI6IGZ1bmN0aW9uKCkgeyB0aGlzLmRpdi5ibHVyKCk7IH0sXG4gICAgZ2V0RmllbGQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy5kaXY7IH0sXG5cbiAgICBzdXBwb3J0c1RvdWNoOiBmdW5jdGlvbigpIHsgcmV0dXJuIHRydWU7IH0sXG5cbiAgICByZWNlaXZlZEZvY3VzOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBpbnB1dCA9IHRoaXM7XG4gICAgICBpZiAodGhpcy5zZWxlY3Rpb25JbkVkaXRvcigpKVxuICAgICAgICB0aGlzLnBvbGxTZWxlY3Rpb24oKTtcbiAgICAgIGVsc2VcbiAgICAgICAgcnVuSW5PcCh0aGlzLmNtLCBmdW5jdGlvbigpIHsgaW5wdXQuY20uY3VyT3Auc2VsZWN0aW9uQ2hhbmdlZCA9IHRydWU7IH0pO1xuXG4gICAgICBmdW5jdGlvbiBwb2xsKCkge1xuICAgICAgICBpZiAoaW5wdXQuY20uc3RhdGUuZm9jdXNlZCkge1xuICAgICAgICAgIGlucHV0LnBvbGxTZWxlY3Rpb24oKTtcbiAgICAgICAgICBpbnB1dC5wb2xsaW5nLnNldChpbnB1dC5jbS5vcHRpb25zLnBvbGxJbnRlcnZhbCwgcG9sbCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRoaXMucG9sbGluZy5zZXQodGhpcy5jbS5vcHRpb25zLnBvbGxJbnRlcnZhbCwgcG9sbCk7XG4gICAgfSxcblxuICAgIHNlbGVjdGlvbkNoYW5nZWQ6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbCA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTtcbiAgICAgIHJldHVybiBzZWwuYW5jaG9yTm9kZSAhPSB0aGlzLmxhc3RBbmNob3JOb2RlIHx8IHNlbC5hbmNob3JPZmZzZXQgIT0gdGhpcy5sYXN0QW5jaG9yT2Zmc2V0IHx8XG4gICAgICAgIHNlbC5mb2N1c05vZGUgIT0gdGhpcy5sYXN0Rm9jdXNOb2RlIHx8IHNlbC5mb2N1c09mZnNldCAhPSB0aGlzLmxhc3RGb2N1c09mZnNldDtcbiAgICB9LFxuXG4gICAgcG9sbFNlbGVjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoIXRoaXMuY29tcG9zaW5nICYmICF0aGlzLmdyYWNlUGVyaW9kICYmIHRoaXMuc2VsZWN0aW9uQ2hhbmdlZCgpKSB7XG4gICAgICAgIHZhciBzZWwgPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCksIGNtID0gdGhpcy5jbTtcbiAgICAgICAgdGhpcy5yZW1lbWJlclNlbGVjdGlvbigpO1xuICAgICAgICB2YXIgYW5jaG9yID0gZG9tVG9Qb3MoY20sIHNlbC5hbmNob3JOb2RlLCBzZWwuYW5jaG9yT2Zmc2V0KTtcbiAgICAgICAgdmFyIGhlYWQgPSBkb21Ub1BvcyhjbSwgc2VsLmZvY3VzTm9kZSwgc2VsLmZvY3VzT2Zmc2V0KTtcbiAgICAgICAgaWYgKGFuY2hvciAmJiBoZWFkKSBydW5Jbk9wKGNtLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBzZXRTZWxlY3Rpb24oY20uZG9jLCBzaW1wbGVTZWxlY3Rpb24oYW5jaG9yLCBoZWFkKSwgc2VsX2RvbnRTY3JvbGwpO1xuICAgICAgICAgIGlmIChhbmNob3IuYmFkIHx8IGhlYWQuYmFkKSBjbS5jdXJPcC5zZWxlY3Rpb25DaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIHBvbGxDb250ZW50OiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBjbSA9IHRoaXMuY20sIGRpc3BsYXkgPSBjbS5kaXNwbGF5LCBzZWwgPSBjbS5kb2Muc2VsLnByaW1hcnkoKTtcbiAgICAgIHZhciBmcm9tID0gc2VsLmZyb20oKSwgdG8gPSBzZWwudG8oKTtcbiAgICAgIGlmIChmcm9tLmxpbmUgPCBkaXNwbGF5LnZpZXdGcm9tIHx8IHRvLmxpbmUgPiBkaXNwbGF5LnZpZXdUbyAtIDEpIHJldHVybiBmYWxzZTtcblxuICAgICAgdmFyIGZyb21JbmRleDtcbiAgICAgIGlmIChmcm9tLmxpbmUgPT0gZGlzcGxheS52aWV3RnJvbSB8fCAoZnJvbUluZGV4ID0gZmluZFZpZXdJbmRleChjbSwgZnJvbS5saW5lKSkgPT0gMCkge1xuICAgICAgICB2YXIgZnJvbUxpbmUgPSBsaW5lTm8oZGlzcGxheS52aWV3WzBdLmxpbmUpO1xuICAgICAgICB2YXIgZnJvbU5vZGUgPSBkaXNwbGF5LnZpZXdbMF0ubm9kZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBmcm9tTGluZSA9IGxpbmVObyhkaXNwbGF5LnZpZXdbZnJvbUluZGV4XS5saW5lKTtcbiAgICAgICAgdmFyIGZyb21Ob2RlID0gZGlzcGxheS52aWV3W2Zyb21JbmRleCAtIDFdLm5vZGUubmV4dFNpYmxpbmc7XG4gICAgICB9XG4gICAgICB2YXIgdG9JbmRleCA9IGZpbmRWaWV3SW5kZXgoY20sIHRvLmxpbmUpO1xuICAgICAgaWYgKHRvSW5kZXggPT0gZGlzcGxheS52aWV3Lmxlbmd0aCAtIDEpIHtcbiAgICAgICAgdmFyIHRvTGluZSA9IGRpc3BsYXkudmlld1RvIC0gMTtcbiAgICAgICAgdmFyIHRvTm9kZSA9IGRpc3BsYXkubGluZURpdi5sYXN0Q2hpbGQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgdG9MaW5lID0gbGluZU5vKGRpc3BsYXkudmlld1t0b0luZGV4ICsgMV0ubGluZSkgLSAxO1xuICAgICAgICB2YXIgdG9Ob2RlID0gZGlzcGxheS52aWV3W3RvSW5kZXggKyAxXS5ub2RlLnByZXZpb3VzU2libGluZztcbiAgICAgIH1cblxuICAgICAgdmFyIG5ld1RleHQgPSBjbS5kb2Muc3BsaXRMaW5lcyhkb21UZXh0QmV0d2VlbihjbSwgZnJvbU5vZGUsIHRvTm9kZSwgZnJvbUxpbmUsIHRvTGluZSkpO1xuICAgICAgdmFyIG9sZFRleHQgPSBnZXRCZXR3ZWVuKGNtLmRvYywgUG9zKGZyb21MaW5lLCAwKSwgUG9zKHRvTGluZSwgZ2V0TGluZShjbS5kb2MsIHRvTGluZSkudGV4dC5sZW5ndGgpKTtcbiAgICAgIHdoaWxlIChuZXdUZXh0Lmxlbmd0aCA+IDEgJiYgb2xkVGV4dC5sZW5ndGggPiAxKSB7XG4gICAgICAgIGlmIChsc3QobmV3VGV4dCkgPT0gbHN0KG9sZFRleHQpKSB7IG5ld1RleHQucG9wKCk7IG9sZFRleHQucG9wKCk7IHRvTGluZS0tOyB9XG4gICAgICAgIGVsc2UgaWYgKG5ld1RleHRbMF0gPT0gb2xkVGV4dFswXSkgeyBuZXdUZXh0LnNoaWZ0KCk7IG9sZFRleHQuc2hpZnQoKTsgZnJvbUxpbmUrKzsgfVxuICAgICAgICBlbHNlIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICB2YXIgY3V0RnJvbnQgPSAwLCBjdXRFbmQgPSAwO1xuICAgICAgdmFyIG5ld1RvcCA9IG5ld1RleHRbMF0sIG9sZFRvcCA9IG9sZFRleHRbMF0sIG1heEN1dEZyb250ID0gTWF0aC5taW4obmV3VG9wLmxlbmd0aCwgb2xkVG9wLmxlbmd0aCk7XG4gICAgICB3aGlsZSAoY3V0RnJvbnQgPCBtYXhDdXRGcm9udCAmJiBuZXdUb3AuY2hhckNvZGVBdChjdXRGcm9udCkgPT0gb2xkVG9wLmNoYXJDb2RlQXQoY3V0RnJvbnQpKVxuICAgICAgICArK2N1dEZyb250O1xuICAgICAgdmFyIG5ld0JvdCA9IGxzdChuZXdUZXh0KSwgb2xkQm90ID0gbHN0KG9sZFRleHQpO1xuICAgICAgdmFyIG1heEN1dEVuZCA9IE1hdGgubWluKG5ld0JvdC5sZW5ndGggLSAobmV3VGV4dC5sZW5ndGggPT0gMSA/IGN1dEZyb250IDogMCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2xkQm90Lmxlbmd0aCAtIChvbGRUZXh0Lmxlbmd0aCA9PSAxID8gY3V0RnJvbnQgOiAwKSk7XG4gICAgICB3aGlsZSAoY3V0RW5kIDwgbWF4Q3V0RW5kICYmXG4gICAgICAgICAgICAgbmV3Qm90LmNoYXJDb2RlQXQobmV3Qm90Lmxlbmd0aCAtIGN1dEVuZCAtIDEpID09IG9sZEJvdC5jaGFyQ29kZUF0KG9sZEJvdC5sZW5ndGggLSBjdXRFbmQgLSAxKSlcbiAgICAgICAgKytjdXRFbmQ7XG5cbiAgICAgIG5ld1RleHRbbmV3VGV4dC5sZW5ndGggLSAxXSA9IG5ld0JvdC5zbGljZSgwLCBuZXdCb3QubGVuZ3RoIC0gY3V0RW5kKTtcbiAgICAgIG5ld1RleHRbMF0gPSBuZXdUZXh0WzBdLnNsaWNlKGN1dEZyb250KTtcblxuICAgICAgdmFyIGNoRnJvbSA9IFBvcyhmcm9tTGluZSwgY3V0RnJvbnQpO1xuICAgICAgdmFyIGNoVG8gPSBQb3ModG9MaW5lLCBvbGRUZXh0Lmxlbmd0aCA/IGxzdChvbGRUZXh0KS5sZW5ndGggLSBjdXRFbmQgOiAwKTtcbiAgICAgIGlmIChuZXdUZXh0Lmxlbmd0aCA+IDEgfHwgbmV3VGV4dFswXSB8fCBjbXAoY2hGcm9tLCBjaFRvKSkge1xuICAgICAgICByZXBsYWNlUmFuZ2UoY20uZG9jLCBuZXdUZXh0LCBjaEZyb20sIGNoVG8sIFwiK2lucHV0XCIpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgZW5zdXJlUG9sbGVkOiBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMuZm9yY2VDb21wb3NpdGlvbkVuZCgpO1xuICAgIH0sXG4gICAgcmVzZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5mb3JjZUNvbXBvc2l0aW9uRW5kKCk7XG4gICAgfSxcbiAgICBmb3JjZUNvbXBvc2l0aW9uRW5kOiBmdW5jdGlvbigpIHtcbiAgICAgIGlmICghdGhpcy5jb21wb3NpbmcgfHwgdGhpcy5jb21wb3NpbmcuaGFuZGxlZCkgcmV0dXJuO1xuICAgICAgdGhpcy5hcHBseUNvbXBvc2l0aW9uKHRoaXMuY29tcG9zaW5nKTtcbiAgICAgIHRoaXMuY29tcG9zaW5nLmhhbmRsZWQgPSB0cnVlO1xuICAgICAgdGhpcy5kaXYuYmx1cigpO1xuICAgICAgdGhpcy5kaXYuZm9jdXMoKTtcbiAgICB9LFxuICAgIGFwcGx5Q29tcG9zaXRpb246IGZ1bmN0aW9uKGNvbXBvc2luZykge1xuICAgICAgaWYgKHRoaXMuY20uaXNSZWFkT25seSgpKVxuICAgICAgICBvcGVyYXRpb24odGhpcy5jbSwgcmVnQ2hhbmdlKSh0aGlzLmNtKVxuICAgICAgZWxzZSBpZiAoY29tcG9zaW5nLmRhdGEgJiYgY29tcG9zaW5nLmRhdGEgIT0gY29tcG9zaW5nLnN0YXJ0RGF0YSlcbiAgICAgICAgb3BlcmF0aW9uKHRoaXMuY20sIGFwcGx5VGV4dElucHV0KSh0aGlzLmNtLCBjb21wb3NpbmcuZGF0YSwgMCwgY29tcG9zaW5nLnNlbCk7XG4gICAgfSxcblxuICAgIHNldFVuZWRpdGFibGU6IGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgIG5vZGUuY29udGVudEVkaXRhYmxlID0gXCJmYWxzZVwiXG4gICAgfSxcblxuICAgIG9uS2V5UHJlc3M6IGZ1bmN0aW9uKGUpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGlmICghdGhpcy5jbS5pc1JlYWRPbmx5KCkpXG4gICAgICAgIG9wZXJhdGlvbih0aGlzLmNtLCBhcHBseVRleHRJbnB1dCkodGhpcy5jbSwgU3RyaW5nLmZyb21DaGFyQ29kZShlLmNoYXJDb2RlID09IG51bGwgPyBlLmtleUNvZGUgOiBlLmNoYXJDb2RlKSwgMCk7XG4gICAgfSxcblxuICAgIHJlYWRPbmx5Q2hhbmdlZDogZnVuY3Rpb24odmFsKSB7XG4gICAgICB0aGlzLmRpdi5jb250ZW50RWRpdGFibGUgPSBTdHJpbmcodmFsICE9IFwibm9jdXJzb3JcIilcbiAgICB9LFxuXG4gICAgb25Db250ZXh0TWVudTogbm90aGluZyxcbiAgICByZXNldFBvc2l0aW9uOiBub3RoaW5nLFxuXG4gICAgbmVlZHNDb250ZW50QXR0cmlidXRlOiB0cnVlXG4gIH0sIENvbnRlbnRFZGl0YWJsZUlucHV0LnByb3RvdHlwZSk7XG5cbiAgZnVuY3Rpb24gcG9zVG9ET00oY20sIHBvcykge1xuICAgIHZhciB2aWV3ID0gZmluZFZpZXdGb3JMaW5lKGNtLCBwb3MubGluZSk7XG4gICAgaWYgKCF2aWV3IHx8IHZpZXcuaGlkZGVuKSByZXR1cm4gbnVsbDtcbiAgICB2YXIgbGluZSA9IGdldExpbmUoY20uZG9jLCBwb3MubGluZSk7XG4gICAgdmFyIGluZm8gPSBtYXBGcm9tTGluZVZpZXcodmlldywgbGluZSwgcG9zLmxpbmUpO1xuXG4gICAgdmFyIG9yZGVyID0gZ2V0T3JkZXIobGluZSksIHNpZGUgPSBcImxlZnRcIjtcbiAgICBpZiAob3JkZXIpIHtcbiAgICAgIHZhciBwYXJ0UG9zID0gZ2V0QmlkaVBhcnRBdChvcmRlciwgcG9zLmNoKTtcbiAgICAgIHNpZGUgPSBwYXJ0UG9zICUgMiA/IFwicmlnaHRcIiA6IFwibGVmdFwiO1xuICAgIH1cbiAgICB2YXIgcmVzdWx0ID0gbm9kZUFuZE9mZnNldEluTGluZU1hcChpbmZvLm1hcCwgcG9zLmNoLCBzaWRlKTtcbiAgICByZXN1bHQub2Zmc2V0ID0gcmVzdWx0LmNvbGxhcHNlID09IFwicmlnaHRcIiA/IHJlc3VsdC5lbmQgOiByZXN1bHQuc3RhcnQ7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGJhZFBvcyhwb3MsIGJhZCkgeyBpZiAoYmFkKSBwb3MuYmFkID0gdHJ1ZTsgcmV0dXJuIHBvczsgfVxuXG4gIGZ1bmN0aW9uIGRvbVRvUG9zKGNtLCBub2RlLCBvZmZzZXQpIHtcbiAgICB2YXIgbGluZU5vZGU7XG4gICAgaWYgKG5vZGUgPT0gY20uZGlzcGxheS5saW5lRGl2KSB7XG4gICAgICBsaW5lTm9kZSA9IGNtLmRpc3BsYXkubGluZURpdi5jaGlsZE5vZGVzW29mZnNldF07XG4gICAgICBpZiAoIWxpbmVOb2RlKSByZXR1cm4gYmFkUG9zKGNtLmNsaXBQb3MoUG9zKGNtLmRpc3BsYXkudmlld1RvIC0gMSkpLCB0cnVlKTtcbiAgICAgIG5vZGUgPSBudWxsOyBvZmZzZXQgPSAwO1xuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKGxpbmVOb2RlID0gbm9kZTs7IGxpbmVOb2RlID0gbGluZU5vZGUucGFyZW50Tm9kZSkge1xuICAgICAgICBpZiAoIWxpbmVOb2RlIHx8IGxpbmVOb2RlID09IGNtLmRpc3BsYXkubGluZURpdikgcmV0dXJuIG51bGw7XG4gICAgICAgIGlmIChsaW5lTm9kZS5wYXJlbnROb2RlICYmIGxpbmVOb2RlLnBhcmVudE5vZGUgPT0gY20uZGlzcGxheS5saW5lRGl2KSBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjbS5kaXNwbGF5LnZpZXcubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBsaW5lVmlldyA9IGNtLmRpc3BsYXkudmlld1tpXTtcbiAgICAgIGlmIChsaW5lVmlldy5ub2RlID09IGxpbmVOb2RlKVxuICAgICAgICByZXR1cm4gbG9jYXRlTm9kZUluTGluZVZpZXcobGluZVZpZXcsIG5vZGUsIG9mZnNldCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gbG9jYXRlTm9kZUluTGluZVZpZXcobGluZVZpZXcsIG5vZGUsIG9mZnNldCkge1xuICAgIHZhciB3cmFwcGVyID0gbGluZVZpZXcudGV4dC5maXJzdENoaWxkLCBiYWQgPSBmYWxzZTtcbiAgICBpZiAoIW5vZGUgfHwgIWNvbnRhaW5zKHdyYXBwZXIsIG5vZGUpKSByZXR1cm4gYmFkUG9zKFBvcyhsaW5lTm8obGluZVZpZXcubGluZSksIDApLCB0cnVlKTtcbiAgICBpZiAobm9kZSA9PSB3cmFwcGVyKSB7XG4gICAgICBiYWQgPSB0cnVlO1xuICAgICAgbm9kZSA9IHdyYXBwZXIuY2hpbGROb2Rlc1tvZmZzZXRdO1xuICAgICAgb2Zmc2V0ID0gMDtcbiAgICAgIGlmICghbm9kZSkge1xuICAgICAgICB2YXIgbGluZSA9IGxpbmVWaWV3LnJlc3QgPyBsc3QobGluZVZpZXcucmVzdCkgOiBsaW5lVmlldy5saW5lO1xuICAgICAgICByZXR1cm4gYmFkUG9zKFBvcyhsaW5lTm8obGluZSksIGxpbmUudGV4dC5sZW5ndGgpLCBiYWQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciB0ZXh0Tm9kZSA9IG5vZGUubm9kZVR5cGUgPT0gMyA/IG5vZGUgOiBudWxsLCB0b3BOb2RlID0gbm9kZTtcbiAgICBpZiAoIXRleHROb2RlICYmIG5vZGUuY2hpbGROb2Rlcy5sZW5ndGggPT0gMSAmJiBub2RlLmZpcnN0Q2hpbGQubm9kZVR5cGUgPT0gMykge1xuICAgICAgdGV4dE5vZGUgPSBub2RlLmZpcnN0Q2hpbGQ7XG4gICAgICBpZiAob2Zmc2V0KSBvZmZzZXQgPSB0ZXh0Tm9kZS5ub2RlVmFsdWUubGVuZ3RoO1xuICAgIH1cbiAgICB3aGlsZSAodG9wTm9kZS5wYXJlbnROb2RlICE9IHdyYXBwZXIpIHRvcE5vZGUgPSB0b3BOb2RlLnBhcmVudE5vZGU7XG4gICAgdmFyIG1lYXN1cmUgPSBsaW5lVmlldy5tZWFzdXJlLCBtYXBzID0gbWVhc3VyZS5tYXBzO1xuXG4gICAgZnVuY3Rpb24gZmluZCh0ZXh0Tm9kZSwgdG9wTm9kZSwgb2Zmc2V0KSB7XG4gICAgICBmb3IgKHZhciBpID0gLTE7IGkgPCAobWFwcyA/IG1hcHMubGVuZ3RoIDogMCk7IGkrKykge1xuICAgICAgICB2YXIgbWFwID0gaSA8IDAgPyBtZWFzdXJlLm1hcCA6IG1hcHNbaV07XG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbWFwLmxlbmd0aDsgaiArPSAzKSB7XG4gICAgICAgICAgdmFyIGN1ck5vZGUgPSBtYXBbaiArIDJdO1xuICAgICAgICAgIGlmIChjdXJOb2RlID09IHRleHROb2RlIHx8IGN1ck5vZGUgPT0gdG9wTm9kZSkge1xuICAgICAgICAgICAgdmFyIGxpbmUgPSBsaW5lTm8oaSA8IDAgPyBsaW5lVmlldy5saW5lIDogbGluZVZpZXcucmVzdFtpXSk7XG4gICAgICAgICAgICB2YXIgY2ggPSBtYXBbal0gKyBvZmZzZXQ7XG4gICAgICAgICAgICBpZiAob2Zmc2V0IDwgMCB8fCBjdXJOb2RlICE9IHRleHROb2RlKSBjaCA9IG1hcFtqICsgKG9mZnNldCA/IDEgOiAwKV07XG4gICAgICAgICAgICByZXR1cm4gUG9zKGxpbmUsIGNoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgdmFyIGZvdW5kID0gZmluZCh0ZXh0Tm9kZSwgdG9wTm9kZSwgb2Zmc2V0KTtcbiAgICBpZiAoZm91bmQpIHJldHVybiBiYWRQb3MoZm91bmQsIGJhZCk7XG5cbiAgICAvLyBGSVhNRSB0aGlzIGlzIGFsbCByZWFsbHkgc2hha3kuIG1pZ2h0IGhhbmRsZSB0aGUgZmV3IGNhc2VzIGl0IG5lZWRzIHRvIGhhbmRsZSwgYnV0IGxpa2VseSB0byBjYXVzZSBwcm9ibGVtc1xuICAgIGZvciAodmFyIGFmdGVyID0gdG9wTm9kZS5uZXh0U2libGluZywgZGlzdCA9IHRleHROb2RlID8gdGV4dE5vZGUubm9kZVZhbHVlLmxlbmd0aCAtIG9mZnNldCA6IDA7IGFmdGVyOyBhZnRlciA9IGFmdGVyLm5leHRTaWJsaW5nKSB7XG4gICAgICBmb3VuZCA9IGZpbmQoYWZ0ZXIsIGFmdGVyLmZpcnN0Q2hpbGQsIDApO1xuICAgICAgaWYgKGZvdW5kKVxuICAgICAgICByZXR1cm4gYmFkUG9zKFBvcyhmb3VuZC5saW5lLCBmb3VuZC5jaCAtIGRpc3QpLCBiYWQpO1xuICAgICAgZWxzZVxuICAgICAgICBkaXN0ICs9IGFmdGVyLnRleHRDb250ZW50Lmxlbmd0aDtcbiAgICB9XG4gICAgZm9yICh2YXIgYmVmb3JlID0gdG9wTm9kZS5wcmV2aW91c1NpYmxpbmcsIGRpc3QgPSBvZmZzZXQ7IGJlZm9yZTsgYmVmb3JlID0gYmVmb3JlLnByZXZpb3VzU2libGluZykge1xuICAgICAgZm91bmQgPSBmaW5kKGJlZm9yZSwgYmVmb3JlLmZpcnN0Q2hpbGQsIC0xKTtcbiAgICAgIGlmIChmb3VuZClcbiAgICAgICAgcmV0dXJuIGJhZFBvcyhQb3MoZm91bmQubGluZSwgZm91bmQuY2ggKyBkaXN0KSwgYmFkKTtcbiAgICAgIGVsc2VcbiAgICAgICAgZGlzdCArPSBhZnRlci50ZXh0Q29udGVudC5sZW5ndGg7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZG9tVGV4dEJldHdlZW4oY20sIGZyb20sIHRvLCBmcm9tTGluZSwgdG9MaW5lKSB7XG4gICAgdmFyIHRleHQgPSBcIlwiLCBjbG9zaW5nID0gZmFsc2UsIGxpbmVTZXAgPSBjbS5kb2MubGluZVNlcGFyYXRvcigpO1xuICAgIGZ1bmN0aW9uIHJlY29nbml6ZU1hcmtlcihpZCkgeyByZXR1cm4gZnVuY3Rpb24obWFya2VyKSB7IHJldHVybiBtYXJrZXIuaWQgPT0gaWQ7IH07IH1cbiAgICBmdW5jdGlvbiB3YWxrKG5vZGUpIHtcbiAgICAgIGlmIChub2RlLm5vZGVUeXBlID09IDEpIHtcbiAgICAgICAgdmFyIGNtVGV4dCA9IG5vZGUuZ2V0QXR0cmlidXRlKFwiY20tdGV4dFwiKTtcbiAgICAgICAgaWYgKGNtVGV4dCAhPSBudWxsKSB7XG4gICAgICAgICAgaWYgKGNtVGV4dCA9PSBcIlwiKSBjbVRleHQgPSBub2RlLnRleHRDb250ZW50LnJlcGxhY2UoL1xcdTIwMGIvZywgXCJcIik7XG4gICAgICAgICAgdGV4dCArPSBjbVRleHQ7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBtYXJrZXJJRCA9IG5vZGUuZ2V0QXR0cmlidXRlKFwiY20tbWFya2VyXCIpLCByYW5nZTtcbiAgICAgICAgaWYgKG1hcmtlcklEKSB7XG4gICAgICAgICAgdmFyIGZvdW5kID0gY20uZmluZE1hcmtzKFBvcyhmcm9tTGluZSwgMCksIFBvcyh0b0xpbmUgKyAxLCAwKSwgcmVjb2duaXplTWFya2VyKCttYXJrZXJJRCkpO1xuICAgICAgICAgIGlmIChmb3VuZC5sZW5ndGggJiYgKHJhbmdlID0gZm91bmRbMF0uZmluZCgpKSlcbiAgICAgICAgICAgIHRleHQgKz0gZ2V0QmV0d2VlbihjbS5kb2MsIHJhbmdlLmZyb20sIHJhbmdlLnRvKS5qb2luKGxpbmVTZXApO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAobm9kZS5nZXRBdHRyaWJ1dGUoXCJjb250ZW50ZWRpdGFibGVcIikgPT0gXCJmYWxzZVwiKSByZXR1cm47XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbm9kZS5jaGlsZE5vZGVzLmxlbmd0aDsgaSsrKVxuICAgICAgICAgIHdhbGsobm9kZS5jaGlsZE5vZGVzW2ldKTtcbiAgICAgICAgaWYgKC9eKHByZXxkaXZ8cCkkL2kudGVzdChub2RlLm5vZGVOYW1lKSlcbiAgICAgICAgICBjbG9zaW5nID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSBpZiAobm9kZS5ub2RlVHlwZSA9PSAzKSB7XG4gICAgICAgIHZhciB2YWwgPSBub2RlLm5vZGVWYWx1ZTtcbiAgICAgICAgaWYgKCF2YWwpIHJldHVybjtcbiAgICAgICAgaWYgKGNsb3NpbmcpIHtcbiAgICAgICAgICB0ZXh0ICs9IGxpbmVTZXA7XG4gICAgICAgICAgY2xvc2luZyA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHRleHQgKz0gdmFsO1xuICAgICAgfVxuICAgIH1cbiAgICBmb3IgKDs7KSB7XG4gICAgICB3YWxrKGZyb20pO1xuICAgICAgaWYgKGZyb20gPT0gdG8pIGJyZWFrO1xuICAgICAgZnJvbSA9IGZyb20ubmV4dFNpYmxpbmc7XG4gICAgfVxuICAgIHJldHVybiB0ZXh0O1xuICB9XG5cbiAgQ29kZU1pcnJvci5pbnB1dFN0eWxlcyA9IHtcInRleHRhcmVhXCI6IFRleHRhcmVhSW5wdXQsIFwiY29udGVudGVkaXRhYmxlXCI6IENvbnRlbnRFZGl0YWJsZUlucHV0fTtcblxuICAvLyBTRUxFQ1RJT04gLyBDVVJTT1JcblxuICAvLyBTZWxlY3Rpb24gb2JqZWN0cyBhcmUgaW1tdXRhYmxlLiBBIG5ldyBvbmUgaXMgY3JlYXRlZCBldmVyeSB0aW1lXG4gIC8vIHRoZSBzZWxlY3Rpb24gY2hhbmdlcy4gQSBzZWxlY3Rpb24gaXMgb25lIG9yIG1vcmUgbm9uLW92ZXJsYXBwaW5nXG4gIC8vIChhbmQgbm9uLXRvdWNoaW5nKSByYW5nZXMsIHNvcnRlZCwgYW5kIGFuIGludGVnZXIgdGhhdCBpbmRpY2F0ZXNcbiAgLy8gd2hpY2ggb25lIGlzIHRoZSBwcmltYXJ5IHNlbGVjdGlvbiAodGhlIG9uZSB0aGF0J3Mgc2Nyb2xsZWQgaW50b1xuICAvLyB2aWV3LCB0aGF0IGdldEN1cnNvciByZXR1cm5zLCBldGMpLlxuICBmdW5jdGlvbiBTZWxlY3Rpb24ocmFuZ2VzLCBwcmltSW5kZXgpIHtcbiAgICB0aGlzLnJhbmdlcyA9IHJhbmdlcztcbiAgICB0aGlzLnByaW1JbmRleCA9IHByaW1JbmRleDtcbiAgfVxuXG4gIFNlbGVjdGlvbi5wcm90b3R5cGUgPSB7XG4gICAgcHJpbWFyeTogZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzLnJhbmdlc1t0aGlzLnByaW1JbmRleF07IH0sXG4gICAgZXF1YWxzOiBmdW5jdGlvbihvdGhlcikge1xuICAgICAgaWYgKG90aGVyID09IHRoaXMpIHJldHVybiB0cnVlO1xuICAgICAgaWYgKG90aGVyLnByaW1JbmRleCAhPSB0aGlzLnByaW1JbmRleCB8fCBvdGhlci5yYW5nZXMubGVuZ3RoICE9IHRoaXMucmFuZ2VzLmxlbmd0aCkgcmV0dXJuIGZhbHNlO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnJhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgaGVyZSA9IHRoaXMucmFuZ2VzW2ldLCB0aGVyZSA9IG90aGVyLnJhbmdlc1tpXTtcbiAgICAgICAgaWYgKGNtcChoZXJlLmFuY2hvciwgdGhlcmUuYW5jaG9yKSAhPSAwIHx8IGNtcChoZXJlLmhlYWQsIHRoZXJlLmhlYWQpICE9IDApIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0sXG4gICAgZGVlcENvcHk6IGZ1bmN0aW9uKCkge1xuICAgICAgZm9yICh2YXIgb3V0ID0gW10sIGkgPSAwOyBpIDwgdGhpcy5yYW5nZXMubGVuZ3RoOyBpKyspXG4gICAgICAgIG91dFtpXSA9IG5ldyBSYW5nZShjb3B5UG9zKHRoaXMucmFuZ2VzW2ldLmFuY2hvciksIGNvcHlQb3ModGhpcy5yYW5nZXNbaV0uaGVhZCkpO1xuICAgICAgcmV0dXJuIG5ldyBTZWxlY3Rpb24ob3V0LCB0aGlzLnByaW1JbmRleCk7XG4gICAgfSxcbiAgICBzb21ldGhpbmdTZWxlY3RlZDogZnVuY3Rpb24oKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMucmFuZ2VzLmxlbmd0aDsgaSsrKVxuICAgICAgICBpZiAoIXRoaXMucmFuZ2VzW2ldLmVtcHR5KCkpIHJldHVybiB0cnVlO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0sXG4gICAgY29udGFpbnM6IGZ1bmN0aW9uKHBvcywgZW5kKSB7XG4gICAgICBpZiAoIWVuZCkgZW5kID0gcG9zO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnJhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgcmFuZ2UgPSB0aGlzLnJhbmdlc1tpXTtcbiAgICAgICAgaWYgKGNtcChlbmQsIHJhbmdlLmZyb20oKSkgPj0gMCAmJiBjbXAocG9zLCByYW5nZS50bygpKSA8PSAwKVxuICAgICAgICAgIHJldHVybiBpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIC0xO1xuICAgIH1cbiAgfTtcblxuICBmdW5jdGlvbiBSYW5nZShhbmNob3IsIGhlYWQpIHtcbiAgICB0aGlzLmFuY2hvciA9IGFuY2hvcjsgdGhpcy5oZWFkID0gaGVhZDtcbiAgfVxuXG4gIFJhbmdlLnByb3RvdHlwZSA9IHtcbiAgICBmcm9tOiBmdW5jdGlvbigpIHsgcmV0dXJuIG1pblBvcyh0aGlzLmFuY2hvciwgdGhpcy5oZWFkKTsgfSxcbiAgICB0bzogZnVuY3Rpb24oKSB7IHJldHVybiBtYXhQb3ModGhpcy5hbmNob3IsIHRoaXMuaGVhZCk7IH0sXG4gICAgZW1wdHk6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMuaGVhZC5saW5lID09IHRoaXMuYW5jaG9yLmxpbmUgJiYgdGhpcy5oZWFkLmNoID09IHRoaXMuYW5jaG9yLmNoO1xuICAgIH1cbiAgfTtcblxuICAvLyBUYWtlIGFuIHVuc29ydGVkLCBwb3RlbnRpYWxseSBvdmVybGFwcGluZyBzZXQgb2YgcmFuZ2VzLCBhbmRcbiAgLy8gYnVpbGQgYSBzZWxlY3Rpb24gb3V0IG9mIGl0LiAnQ29uc3VtZXMnIHJhbmdlcyBhcnJheSAobW9kaWZ5aW5nXG4gIC8vIGl0KS5cbiAgZnVuY3Rpb24gbm9ybWFsaXplU2VsZWN0aW9uKHJhbmdlcywgcHJpbUluZGV4KSB7XG4gICAgdmFyIHByaW0gPSByYW5nZXNbcHJpbUluZGV4XTtcbiAgICByYW5nZXMuc29ydChmdW5jdGlvbihhLCBiKSB7IHJldHVybiBjbXAoYS5mcm9tKCksIGIuZnJvbSgpKTsgfSk7XG4gICAgcHJpbUluZGV4ID0gaW5kZXhPZihyYW5nZXMsIHByaW0pO1xuICAgIGZvciAodmFyIGkgPSAxOyBpIDwgcmFuZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgY3VyID0gcmFuZ2VzW2ldLCBwcmV2ID0gcmFuZ2VzW2kgLSAxXTtcbiAgICAgIGlmIChjbXAocHJldi50bygpLCBjdXIuZnJvbSgpKSA+PSAwKSB7XG4gICAgICAgIHZhciBmcm9tID0gbWluUG9zKHByZXYuZnJvbSgpLCBjdXIuZnJvbSgpKSwgdG8gPSBtYXhQb3MocHJldi50bygpLCBjdXIudG8oKSk7XG4gICAgICAgIHZhciBpbnYgPSBwcmV2LmVtcHR5KCkgPyBjdXIuZnJvbSgpID09IGN1ci5oZWFkIDogcHJldi5mcm9tKCkgPT0gcHJldi5oZWFkO1xuICAgICAgICBpZiAoaSA8PSBwcmltSW5kZXgpIC0tcHJpbUluZGV4O1xuICAgICAgICByYW5nZXMuc3BsaWNlKC0taSwgMiwgbmV3IFJhbmdlKGludiA/IHRvIDogZnJvbSwgaW52ID8gZnJvbSA6IHRvKSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuZXcgU2VsZWN0aW9uKHJhbmdlcywgcHJpbUluZGV4KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNpbXBsZVNlbGVjdGlvbihhbmNob3IsIGhlYWQpIHtcbiAgICByZXR1cm4gbmV3IFNlbGVjdGlvbihbbmV3IFJhbmdlKGFuY2hvciwgaGVhZCB8fCBhbmNob3IpXSwgMCk7XG4gIH1cblxuICAvLyBNb3N0IG9mIHRoZSBleHRlcm5hbCBBUEkgY2xpcHMgZ2l2ZW4gcG9zaXRpb25zIHRvIG1ha2Ugc3VyZSB0aGV5XG4gIC8vIGFjdHVhbGx5IGV4aXN0IHdpdGhpbiB0aGUgZG9jdW1lbnQuXG4gIGZ1bmN0aW9uIGNsaXBMaW5lKGRvYywgbikge3JldHVybiBNYXRoLm1heChkb2MuZmlyc3QsIE1hdGgubWluKG4sIGRvYy5maXJzdCArIGRvYy5zaXplIC0gMSkpO31cbiAgZnVuY3Rpb24gY2xpcFBvcyhkb2MsIHBvcykge1xuICAgIGlmIChwb3MubGluZSA8IGRvYy5maXJzdCkgcmV0dXJuIFBvcyhkb2MuZmlyc3QsIDApO1xuICAgIHZhciBsYXN0ID0gZG9jLmZpcnN0ICsgZG9jLnNpemUgLSAxO1xuICAgIGlmIChwb3MubGluZSA+IGxhc3QpIHJldHVybiBQb3MobGFzdCwgZ2V0TGluZShkb2MsIGxhc3QpLnRleHQubGVuZ3RoKTtcbiAgICByZXR1cm4gY2xpcFRvTGVuKHBvcywgZ2V0TGluZShkb2MsIHBvcy5saW5lKS50ZXh0Lmxlbmd0aCk7XG4gIH1cbiAgZnVuY3Rpb24gY2xpcFRvTGVuKHBvcywgbGluZWxlbikge1xuICAgIHZhciBjaCA9IHBvcy5jaDtcbiAgICBpZiAoY2ggPT0gbnVsbCB8fCBjaCA+IGxpbmVsZW4pIHJldHVybiBQb3MocG9zLmxpbmUsIGxpbmVsZW4pO1xuICAgIGVsc2UgaWYgKGNoIDwgMCkgcmV0dXJuIFBvcyhwb3MubGluZSwgMCk7XG4gICAgZWxzZSByZXR1cm4gcG9zO1xuICB9XG4gIGZ1bmN0aW9uIGlzTGluZShkb2MsIGwpIHtyZXR1cm4gbCA+PSBkb2MuZmlyc3QgJiYgbCA8IGRvYy5maXJzdCArIGRvYy5zaXplO31cbiAgZnVuY3Rpb24gY2xpcFBvc0FycmF5KGRvYywgYXJyYXkpIHtcbiAgICBmb3IgKHZhciBvdXQgPSBbXSwgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7IGkrKykgb3V0W2ldID0gY2xpcFBvcyhkb2MsIGFycmF5W2ldKTtcbiAgICByZXR1cm4gb3V0O1xuICB9XG5cbiAgLy8gU0VMRUNUSU9OIFVQREFURVNcblxuICAvLyBUaGUgJ3Njcm9sbCcgcGFyYW1ldGVyIGdpdmVuIHRvIG1hbnkgb2YgdGhlc2UgaW5kaWNhdGVkIHdoZXRoZXJcbiAgLy8gdGhlIG5ldyBjdXJzb3IgcG9zaXRpb24gc2hvdWxkIGJlIHNjcm9sbGVkIGludG8gdmlldyBhZnRlclxuICAvLyBtb2RpZnlpbmcgdGhlIHNlbGVjdGlvbi5cblxuICAvLyBJZiBzaGlmdCBpcyBoZWxkIG9yIHRoZSBleHRlbmQgZmxhZyBpcyBzZXQsIGV4dGVuZHMgYSByYW5nZSB0b1xuICAvLyBpbmNsdWRlIGEgZ2l2ZW4gcG9zaXRpb24gKGFuZCBvcHRpb25hbGx5IGEgc2Vjb25kIHBvc2l0aW9uKS5cbiAgLy8gT3RoZXJ3aXNlLCBzaW1wbHkgcmV0dXJucyB0aGUgcmFuZ2UgYmV0d2VlbiB0aGUgZ2l2ZW4gcG9zaXRpb25zLlxuICAvLyBVc2VkIGZvciBjdXJzb3IgbW90aW9uIGFuZCBzdWNoLlxuICBmdW5jdGlvbiBleHRlbmRSYW5nZShkb2MsIHJhbmdlLCBoZWFkLCBvdGhlcikge1xuICAgIGlmIChkb2MuY20gJiYgZG9jLmNtLmRpc3BsYXkuc2hpZnQgfHwgZG9jLmV4dGVuZCkge1xuICAgICAgdmFyIGFuY2hvciA9IHJhbmdlLmFuY2hvcjtcbiAgICAgIGlmIChvdGhlcikge1xuICAgICAgICB2YXIgcG9zQmVmb3JlID0gY21wKGhlYWQsIGFuY2hvcikgPCAwO1xuICAgICAgICBpZiAocG9zQmVmb3JlICE9IChjbXAob3RoZXIsIGFuY2hvcikgPCAwKSkge1xuICAgICAgICAgIGFuY2hvciA9IGhlYWQ7XG4gICAgICAgICAgaGVhZCA9IG90aGVyO1xuICAgICAgICB9IGVsc2UgaWYgKHBvc0JlZm9yZSAhPSAoY21wKGhlYWQsIG90aGVyKSA8IDApKSB7XG4gICAgICAgICAgaGVhZCA9IG90aGVyO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gbmV3IFJhbmdlKGFuY2hvciwgaGVhZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBuZXcgUmFuZ2Uob3RoZXIgfHwgaGVhZCwgaGVhZCk7XG4gICAgfVxuICB9XG5cbiAgLy8gRXh0ZW5kIHRoZSBwcmltYXJ5IHNlbGVjdGlvbiByYW5nZSwgZGlzY2FyZCB0aGUgcmVzdC5cbiAgZnVuY3Rpb24gZXh0ZW5kU2VsZWN0aW9uKGRvYywgaGVhZCwgb3RoZXIsIG9wdGlvbnMpIHtcbiAgICBzZXRTZWxlY3Rpb24oZG9jLCBuZXcgU2VsZWN0aW9uKFtleHRlbmRSYW5nZShkb2MsIGRvYy5zZWwucHJpbWFyeSgpLCBoZWFkLCBvdGhlcildLCAwKSwgb3B0aW9ucyk7XG4gIH1cblxuICAvLyBFeHRlbmQgYWxsIHNlbGVjdGlvbnMgKHBvcyBpcyBhbiBhcnJheSBvZiBzZWxlY3Rpb25zIHdpdGggbGVuZ3RoXG4gIC8vIGVxdWFsIHRoZSBudW1iZXIgb2Ygc2VsZWN0aW9ucylcbiAgZnVuY3Rpb24gZXh0ZW5kU2VsZWN0aW9ucyhkb2MsIGhlYWRzLCBvcHRpb25zKSB7XG4gICAgZm9yICh2YXIgb3V0ID0gW10sIGkgPSAwOyBpIDwgZG9jLnNlbC5yYW5nZXMubGVuZ3RoOyBpKyspXG4gICAgICBvdXRbaV0gPSBleHRlbmRSYW5nZShkb2MsIGRvYy5zZWwucmFuZ2VzW2ldLCBoZWFkc1tpXSwgbnVsbCk7XG4gICAgdmFyIG5ld1NlbCA9IG5vcm1hbGl6ZVNlbGVjdGlvbihvdXQsIGRvYy5zZWwucHJpbUluZGV4KTtcbiAgICBzZXRTZWxlY3Rpb24oZG9jLCBuZXdTZWwsIG9wdGlvbnMpO1xuICB9XG5cbiAgLy8gVXBkYXRlcyBhIHNpbmdsZSByYW5nZSBpbiB0aGUgc2VsZWN0aW9uLlxuICBmdW5jdGlvbiByZXBsYWNlT25lU2VsZWN0aW9uKGRvYywgaSwgcmFuZ2UsIG9wdGlvbnMpIHtcbiAgICB2YXIgcmFuZ2VzID0gZG9jLnNlbC5yYW5nZXMuc2xpY2UoMCk7XG4gICAgcmFuZ2VzW2ldID0gcmFuZ2U7XG4gICAgc2V0U2VsZWN0aW9uKGRvYywgbm9ybWFsaXplU2VsZWN0aW9uKHJhbmdlcywgZG9jLnNlbC5wcmltSW5kZXgpLCBvcHRpb25zKTtcbiAgfVxuXG4gIC8vIFJlc2V0IHRoZSBzZWxlY3Rpb24gdG8gYSBzaW5nbGUgcmFuZ2UuXG4gIGZ1bmN0aW9uIHNldFNpbXBsZVNlbGVjdGlvbihkb2MsIGFuY2hvciwgaGVhZCwgb3B0aW9ucykge1xuICAgIHNldFNlbGVjdGlvbihkb2MsIHNpbXBsZVNlbGVjdGlvbihhbmNob3IsIGhlYWQpLCBvcHRpb25zKTtcbiAgfVxuXG4gIC8vIEdpdmUgYmVmb3JlU2VsZWN0aW9uQ2hhbmdlIGhhbmRsZXJzIGEgY2hhbmdlIHRvIGluZmx1ZW5jZSBhXG4gIC8vIHNlbGVjdGlvbiB1cGRhdGUuXG4gIGZ1bmN0aW9uIGZpbHRlclNlbGVjdGlvbkNoYW5nZShkb2MsIHNlbCwgb3B0aW9ucykge1xuICAgIHZhciBvYmogPSB7XG4gICAgICByYW5nZXM6IHNlbC5yYW5nZXMsXG4gICAgICB1cGRhdGU6IGZ1bmN0aW9uKHJhbmdlcykge1xuICAgICAgICB0aGlzLnJhbmdlcyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJhbmdlcy5sZW5ndGg7IGkrKylcbiAgICAgICAgICB0aGlzLnJhbmdlc1tpXSA9IG5ldyBSYW5nZShjbGlwUG9zKGRvYywgcmFuZ2VzW2ldLmFuY2hvciksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpcFBvcyhkb2MsIHJhbmdlc1tpXS5oZWFkKSk7XG4gICAgICB9LFxuICAgICAgb3JpZ2luOiBvcHRpb25zICYmIG9wdGlvbnMub3JpZ2luXG4gICAgfTtcbiAgICBzaWduYWwoZG9jLCBcImJlZm9yZVNlbGVjdGlvbkNoYW5nZVwiLCBkb2MsIG9iaik7XG4gICAgaWYgKGRvYy5jbSkgc2lnbmFsKGRvYy5jbSwgXCJiZWZvcmVTZWxlY3Rpb25DaGFuZ2VcIiwgZG9jLmNtLCBvYmopO1xuICAgIGlmIChvYmoucmFuZ2VzICE9IHNlbC5yYW5nZXMpIHJldHVybiBub3JtYWxpemVTZWxlY3Rpb24ob2JqLnJhbmdlcywgb2JqLnJhbmdlcy5sZW5ndGggLSAxKTtcbiAgICBlbHNlIHJldHVybiBzZWw7XG4gIH1cblxuICBmdW5jdGlvbiBzZXRTZWxlY3Rpb25SZXBsYWNlSGlzdG9yeShkb2MsIHNlbCwgb3B0aW9ucykge1xuICAgIHZhciBkb25lID0gZG9jLmhpc3RvcnkuZG9uZSwgbGFzdCA9IGxzdChkb25lKTtcbiAgICBpZiAobGFzdCAmJiBsYXN0LnJhbmdlcykge1xuICAgICAgZG9uZVtkb25lLmxlbmd0aCAtIDFdID0gc2VsO1xuICAgICAgc2V0U2VsZWN0aW9uTm9VbmRvKGRvYywgc2VsLCBvcHRpb25zKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2V0U2VsZWN0aW9uKGRvYywgc2VsLCBvcHRpb25zKTtcbiAgICB9XG4gIH1cblxuICAvLyBTZXQgYSBuZXcgc2VsZWN0aW9uLlxuICBmdW5jdGlvbiBzZXRTZWxlY3Rpb24oZG9jLCBzZWwsIG9wdGlvbnMpIHtcbiAgICBzZXRTZWxlY3Rpb25Ob1VuZG8oZG9jLCBzZWwsIG9wdGlvbnMpO1xuICAgIGFkZFNlbGVjdGlvblRvSGlzdG9yeShkb2MsIGRvYy5zZWwsIGRvYy5jbSA/IGRvYy5jbS5jdXJPcC5pZCA6IE5hTiwgb3B0aW9ucyk7XG4gIH1cblxuICBmdW5jdGlvbiBzZXRTZWxlY3Rpb25Ob1VuZG8oZG9jLCBzZWwsIG9wdGlvbnMpIHtcbiAgICBpZiAoaGFzSGFuZGxlcihkb2MsIFwiYmVmb3JlU2VsZWN0aW9uQ2hhbmdlXCIpIHx8IGRvYy5jbSAmJiBoYXNIYW5kbGVyKGRvYy5jbSwgXCJiZWZvcmVTZWxlY3Rpb25DaGFuZ2VcIikpXG4gICAgICBzZWwgPSBmaWx0ZXJTZWxlY3Rpb25DaGFuZ2UoZG9jLCBzZWwsIG9wdGlvbnMpO1xuXG4gICAgdmFyIGJpYXMgPSBvcHRpb25zICYmIG9wdGlvbnMuYmlhcyB8fFxuICAgICAgKGNtcChzZWwucHJpbWFyeSgpLmhlYWQsIGRvYy5zZWwucHJpbWFyeSgpLmhlYWQpIDwgMCA/IC0xIDogMSk7XG4gICAgc2V0U2VsZWN0aW9uSW5uZXIoZG9jLCBza2lwQXRvbWljSW5TZWxlY3Rpb24oZG9jLCBzZWwsIGJpYXMsIHRydWUpKTtcblxuICAgIGlmICghKG9wdGlvbnMgJiYgb3B0aW9ucy5zY3JvbGwgPT09IGZhbHNlKSAmJiBkb2MuY20pXG4gICAgICBlbnN1cmVDdXJzb3JWaXNpYmxlKGRvYy5jbSk7XG4gIH1cblxuICBmdW5jdGlvbiBzZXRTZWxlY3Rpb25Jbm5lcihkb2MsIHNlbCkge1xuICAgIGlmIChzZWwuZXF1YWxzKGRvYy5zZWwpKSByZXR1cm47XG5cbiAgICBkb2Muc2VsID0gc2VsO1xuXG4gICAgaWYgKGRvYy5jbSkge1xuICAgICAgZG9jLmNtLmN1ck9wLnVwZGF0ZUlucHV0ID0gZG9jLmNtLmN1ck9wLnNlbGVjdGlvbkNoYW5nZWQgPSB0cnVlO1xuICAgICAgc2lnbmFsQ3Vyc29yQWN0aXZpdHkoZG9jLmNtKTtcbiAgICB9XG4gICAgc2lnbmFsTGF0ZXIoZG9jLCBcImN1cnNvckFjdGl2aXR5XCIsIGRvYyk7XG4gIH1cblxuICAvLyBWZXJpZnkgdGhhdCB0aGUgc2VsZWN0aW9uIGRvZXMgbm90IHBhcnRpYWxseSBzZWxlY3QgYW55IGF0b21pY1xuICAvLyBtYXJrZWQgcmFuZ2VzLlxuICBmdW5jdGlvbiByZUNoZWNrU2VsZWN0aW9uKGRvYykge1xuICAgIHNldFNlbGVjdGlvbklubmVyKGRvYywgc2tpcEF0b21pY0luU2VsZWN0aW9uKGRvYywgZG9jLnNlbCwgbnVsbCwgZmFsc2UpLCBzZWxfZG9udFNjcm9sbCk7XG4gIH1cblxuICAvLyBSZXR1cm4gYSBzZWxlY3Rpb24gdGhhdCBkb2VzIG5vdCBwYXJ0aWFsbHkgc2VsZWN0IGFueSBhdG9taWNcbiAgLy8gcmFuZ2VzLlxuICBmdW5jdGlvbiBza2lwQXRvbWljSW5TZWxlY3Rpb24oZG9jLCBzZWwsIGJpYXMsIG1heUNsZWFyKSB7XG4gICAgdmFyIG91dDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlbC5yYW5nZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciByYW5nZSA9IHNlbC5yYW5nZXNbaV07XG4gICAgICB2YXIgb2xkID0gc2VsLnJhbmdlcy5sZW5ndGggPT0gZG9jLnNlbC5yYW5nZXMubGVuZ3RoICYmIGRvYy5zZWwucmFuZ2VzW2ldO1xuICAgICAgdmFyIG5ld0FuY2hvciA9IHNraXBBdG9taWMoZG9jLCByYW5nZS5hbmNob3IsIG9sZCAmJiBvbGQuYW5jaG9yLCBiaWFzLCBtYXlDbGVhcik7XG4gICAgICB2YXIgbmV3SGVhZCA9IHNraXBBdG9taWMoZG9jLCByYW5nZS5oZWFkLCBvbGQgJiYgb2xkLmhlYWQsIGJpYXMsIG1heUNsZWFyKTtcbiAgICAgIGlmIChvdXQgfHwgbmV3QW5jaG9yICE9IHJhbmdlLmFuY2hvciB8fCBuZXdIZWFkICE9IHJhbmdlLmhlYWQpIHtcbiAgICAgICAgaWYgKCFvdXQpIG91dCA9IHNlbC5yYW5nZXMuc2xpY2UoMCwgaSk7XG4gICAgICAgIG91dFtpXSA9IG5ldyBSYW5nZShuZXdBbmNob3IsIG5ld0hlYWQpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gb3V0ID8gbm9ybWFsaXplU2VsZWN0aW9uKG91dCwgc2VsLnByaW1JbmRleCkgOiBzZWw7XG4gIH1cblxuICBmdW5jdGlvbiBza2lwQXRvbWljSW5uZXIoZG9jLCBwb3MsIG9sZFBvcywgZGlyLCBtYXlDbGVhcikge1xuICAgIHZhciBsaW5lID0gZ2V0TGluZShkb2MsIHBvcy5saW5lKTtcbiAgICBpZiAobGluZS5tYXJrZWRTcGFucykgZm9yICh2YXIgaSA9IDA7IGkgPCBsaW5lLm1hcmtlZFNwYW5zLmxlbmd0aDsgKytpKSB7XG4gICAgICB2YXIgc3AgPSBsaW5lLm1hcmtlZFNwYW5zW2ldLCBtID0gc3AubWFya2VyO1xuICAgICAgaWYgKChzcC5mcm9tID09IG51bGwgfHwgKG0uaW5jbHVzaXZlTGVmdCA/IHNwLmZyb20gPD0gcG9zLmNoIDogc3AuZnJvbSA8IHBvcy5jaCkpICYmXG4gICAgICAgICAgKHNwLnRvID09IG51bGwgfHwgKG0uaW5jbHVzaXZlUmlnaHQgPyBzcC50byA+PSBwb3MuY2ggOiBzcC50byA+IHBvcy5jaCkpKSB7XG4gICAgICAgIGlmIChtYXlDbGVhcikge1xuICAgICAgICAgIHNpZ25hbChtLCBcImJlZm9yZUN1cnNvckVudGVyXCIpO1xuICAgICAgICAgIGlmIChtLmV4cGxpY2l0bHlDbGVhcmVkKSB7XG4gICAgICAgICAgICBpZiAoIWxpbmUubWFya2VkU3BhbnMpIGJyZWFrO1xuICAgICAgICAgICAgZWxzZSB7LS1pOyBjb250aW51ZTt9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghbS5hdG9taWMpIGNvbnRpbnVlO1xuXG4gICAgICAgIGlmIChvbGRQb3MpIHtcbiAgICAgICAgICB2YXIgbmVhciA9IG0uZmluZChkaXIgPCAwID8gMSA6IC0xKSwgZGlmZjtcbiAgICAgICAgICBpZiAoZGlyIDwgMCA/IG0uaW5jbHVzaXZlUmlnaHQgOiBtLmluY2x1c2l2ZUxlZnQpXG4gICAgICAgICAgICBuZWFyID0gbW92ZVBvcyhkb2MsIG5lYXIsIC1kaXIsIG5lYXIgJiYgbmVhci5saW5lID09IHBvcy5saW5lID8gbGluZSA6IG51bGwpO1xuICAgICAgICAgIGlmIChuZWFyICYmIG5lYXIubGluZSA9PSBwb3MubGluZSAmJiAoZGlmZiA9IGNtcChuZWFyLCBvbGRQb3MpKSAmJiAoZGlyIDwgMCA/IGRpZmYgPCAwIDogZGlmZiA+IDApKVxuICAgICAgICAgICAgcmV0dXJuIHNraXBBdG9taWNJbm5lcihkb2MsIG5lYXIsIHBvcywgZGlyLCBtYXlDbGVhcik7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZmFyID0gbS5maW5kKGRpciA8IDAgPyAtMSA6IDEpO1xuICAgICAgICBpZiAoZGlyIDwgMCA/IG0uaW5jbHVzaXZlTGVmdCA6IG0uaW5jbHVzaXZlUmlnaHQpXG4gICAgICAgICAgZmFyID0gbW92ZVBvcyhkb2MsIGZhciwgZGlyLCBmYXIubGluZSA9PSBwb3MubGluZSA/IGxpbmUgOiBudWxsKTtcbiAgICAgICAgcmV0dXJuIGZhciA/IHNraXBBdG9taWNJbm5lcihkb2MsIGZhciwgcG9zLCBkaXIsIG1heUNsZWFyKSA6IG51bGw7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBwb3M7XG4gIH1cblxuICAvLyBFbnN1cmUgYSBnaXZlbiBwb3NpdGlvbiBpcyBub3QgaW5zaWRlIGFuIGF0b21pYyByYW5nZS5cbiAgZnVuY3Rpb24gc2tpcEF0b21pYyhkb2MsIHBvcywgb2xkUG9zLCBiaWFzLCBtYXlDbGVhcikge1xuICAgIHZhciBkaXIgPSBiaWFzIHx8IDE7XG4gICAgdmFyIGZvdW5kID0gc2tpcEF0b21pY0lubmVyKGRvYywgcG9zLCBvbGRQb3MsIGRpciwgbWF5Q2xlYXIpIHx8XG4gICAgICAgICghbWF5Q2xlYXIgJiYgc2tpcEF0b21pY0lubmVyKGRvYywgcG9zLCBvbGRQb3MsIGRpciwgdHJ1ZSkpIHx8XG4gICAgICAgIHNraXBBdG9taWNJbm5lcihkb2MsIHBvcywgb2xkUG9zLCAtZGlyLCBtYXlDbGVhcikgfHxcbiAgICAgICAgKCFtYXlDbGVhciAmJiBza2lwQXRvbWljSW5uZXIoZG9jLCBwb3MsIG9sZFBvcywgLWRpciwgdHJ1ZSkpO1xuICAgIGlmICghZm91bmQpIHtcbiAgICAgIGRvYy5jYW50RWRpdCA9IHRydWU7XG4gICAgICByZXR1cm4gUG9zKGRvYy5maXJzdCwgMCk7XG4gICAgfVxuICAgIHJldHVybiBmb3VuZDtcbiAgfVxuXG4gIGZ1bmN0aW9uIG1vdmVQb3MoZG9jLCBwb3MsIGRpciwgbGluZSkge1xuICAgIGlmIChkaXIgPCAwICYmIHBvcy5jaCA9PSAwKSB7XG4gICAgICBpZiAocG9zLmxpbmUgPiBkb2MuZmlyc3QpIHJldHVybiBjbGlwUG9zKGRvYywgUG9zKHBvcy5saW5lIC0gMSkpO1xuICAgICAgZWxzZSByZXR1cm4gbnVsbDtcbiAgICB9IGVsc2UgaWYgKGRpciA+IDAgJiYgcG9zLmNoID09IChsaW5lIHx8IGdldExpbmUoZG9jLCBwb3MubGluZSkpLnRleHQubGVuZ3RoKSB7XG4gICAgICBpZiAocG9zLmxpbmUgPCBkb2MuZmlyc3QgKyBkb2Muc2l6ZSAtIDEpIHJldHVybiBQb3MocG9zLmxpbmUgKyAxLCAwKTtcbiAgICAgIGVsc2UgcmV0dXJuIG51bGw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBuZXcgUG9zKHBvcy5saW5lLCBwb3MuY2ggKyBkaXIpO1xuICAgIH1cbiAgfVxuXG4gIC8vIFNFTEVDVElPTiBEUkFXSU5HXG5cbiAgZnVuY3Rpb24gdXBkYXRlU2VsZWN0aW9uKGNtKSB7XG4gICAgY20uZGlzcGxheS5pbnB1dC5zaG93U2VsZWN0aW9uKGNtLmRpc3BsYXkuaW5wdXQucHJlcGFyZVNlbGVjdGlvbigpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHByZXBhcmVTZWxlY3Rpb24oY20sIHByaW1hcnkpIHtcbiAgICB2YXIgZG9jID0gY20uZG9jLCByZXN1bHQgPSB7fTtcbiAgICB2YXIgY3VyRnJhZ21lbnQgPSByZXN1bHQuY3Vyc29ycyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgICB2YXIgc2VsRnJhZ21lbnQgPSByZXN1bHQuc2VsZWN0aW9uID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkb2Muc2VsLnJhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHByaW1hcnkgPT09IGZhbHNlICYmIGkgPT0gZG9jLnNlbC5wcmltSW5kZXgpIGNvbnRpbnVlO1xuICAgICAgdmFyIHJhbmdlID0gZG9jLnNlbC5yYW5nZXNbaV07XG4gICAgICBpZiAocmFuZ2UuZnJvbSgpLmxpbmUgPj0gY20uZGlzcGxheS52aWV3VG8gfHwgcmFuZ2UudG8oKS5saW5lIDwgY20uZGlzcGxheS52aWV3RnJvbSkgY29udGludWU7XG4gICAgICB2YXIgY29sbGFwc2VkID0gcmFuZ2UuZW1wdHkoKTtcbiAgICAgIGlmIChjb2xsYXBzZWQgfHwgY20ub3B0aW9ucy5zaG93Q3Vyc29yV2hlblNlbGVjdGluZylcbiAgICAgICAgZHJhd1NlbGVjdGlvbkN1cnNvcihjbSwgcmFuZ2UuaGVhZCwgY3VyRnJhZ21lbnQpO1xuICAgICAgaWYgKCFjb2xsYXBzZWQpXG4gICAgICAgIGRyYXdTZWxlY3Rpb25SYW5nZShjbSwgcmFuZ2UsIHNlbEZyYWdtZW50KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8vIERyYXdzIGEgY3Vyc29yIGZvciB0aGUgZ2l2ZW4gcmFuZ2VcbiAgZnVuY3Rpb24gZHJhd1NlbGVjdGlvbkN1cnNvcihjbSwgaGVhZCwgb3V0cHV0KSB7XG4gICAgdmFyIHBvcyA9IGN1cnNvckNvb3JkcyhjbSwgaGVhZCwgXCJkaXZcIiwgbnVsbCwgbnVsbCwgIWNtLm9wdGlvbnMuc2luZ2xlQ3Vyc29ySGVpZ2h0UGVyTGluZSk7XG5cbiAgICB2YXIgY3Vyc29yID0gb3V0cHV0LmFwcGVuZENoaWxkKGVsdChcImRpdlwiLCBcIlxcdTAwYTBcIiwgXCJDb2RlTWlycm9yLWN1cnNvclwiKSk7XG4gICAgY3Vyc29yLnN0eWxlLmxlZnQgPSBwb3MubGVmdCArIFwicHhcIjtcbiAgICBjdXJzb3Iuc3R5bGUudG9wID0gcG9zLnRvcCArIFwicHhcIjtcbiAgICBjdXJzb3Iuc3R5bGUuaGVpZ2h0ID0gTWF0aC5tYXgoMCwgcG9zLmJvdHRvbSAtIHBvcy50b3ApICogY20ub3B0aW9ucy5jdXJzb3JIZWlnaHQgKyBcInB4XCI7XG5cbiAgICBpZiAocG9zLm90aGVyKSB7XG4gICAgICAvLyBTZWNvbmRhcnkgY3Vyc29yLCBzaG93biB3aGVuIG9uIGEgJ2p1bXAnIGluIGJpLWRpcmVjdGlvbmFsIHRleHRcbiAgICAgIHZhciBvdGhlckN1cnNvciA9IG91dHB1dC5hcHBlbmRDaGlsZChlbHQoXCJkaXZcIiwgXCJcXHUwMGEwXCIsIFwiQ29kZU1pcnJvci1jdXJzb3IgQ29kZU1pcnJvci1zZWNvbmRhcnljdXJzb3JcIikpO1xuICAgICAgb3RoZXJDdXJzb3Iuc3R5bGUuZGlzcGxheSA9IFwiXCI7XG4gICAgICBvdGhlckN1cnNvci5zdHlsZS5sZWZ0ID0gcG9zLm90aGVyLmxlZnQgKyBcInB4XCI7XG4gICAgICBvdGhlckN1cnNvci5zdHlsZS50b3AgPSBwb3Mub3RoZXIudG9wICsgXCJweFwiO1xuICAgICAgb3RoZXJDdXJzb3Iuc3R5bGUuaGVpZ2h0ID0gKHBvcy5vdGhlci5ib3R0b20gLSBwb3Mub3RoZXIudG9wKSAqIC44NSArIFwicHhcIjtcbiAgICB9XG4gIH1cblxuICAvLyBEcmF3cyB0aGUgZ2l2ZW4gcmFuZ2UgYXMgYSBoaWdobGlnaHRlZCBzZWxlY3Rpb25cbiAgZnVuY3Rpb24gZHJhd1NlbGVjdGlvblJhbmdlKGNtLCByYW5nZSwgb3V0cHV0KSB7XG4gICAgdmFyIGRpc3BsYXkgPSBjbS5kaXNwbGF5LCBkb2MgPSBjbS5kb2M7XG4gICAgdmFyIGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgIHZhciBwYWRkaW5nID0gcGFkZGluZ0goY20uZGlzcGxheSksIGxlZnRTaWRlID0gcGFkZGluZy5sZWZ0O1xuICAgIHZhciByaWdodFNpZGUgPSBNYXRoLm1heChkaXNwbGF5LnNpemVyV2lkdGgsIGRpc3BsYXlXaWR0aChjbSkgLSBkaXNwbGF5LnNpemVyLm9mZnNldExlZnQpIC0gcGFkZGluZy5yaWdodDtcblxuICAgIGZ1bmN0aW9uIGFkZChsZWZ0LCB0b3AsIHdpZHRoLCBib3R0b20pIHtcbiAgICAgIGlmICh0b3AgPCAwKSB0b3AgPSAwO1xuICAgICAgdG9wID0gTWF0aC5yb3VuZCh0b3ApO1xuICAgICAgYm90dG9tID0gTWF0aC5yb3VuZChib3R0b20pO1xuICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQoZWx0KFwiZGl2XCIsIG51bGwsIFwiQ29kZU1pcnJvci1zZWxlY3RlZFwiLCBcInBvc2l0aW9uOiBhYnNvbHV0ZTsgbGVmdDogXCIgKyBsZWZ0ICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInB4OyB0b3A6IFwiICsgdG9wICsgXCJweDsgd2lkdGg6IFwiICsgKHdpZHRoID09IG51bGwgPyByaWdodFNpZGUgLSBsZWZ0IDogd2lkdGgpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInB4OyBoZWlnaHQ6IFwiICsgKGJvdHRvbSAtIHRvcCkgKyBcInB4XCIpKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkcmF3Rm9yTGluZShsaW5lLCBmcm9tQXJnLCB0b0FyZykge1xuICAgICAgdmFyIGxpbmVPYmogPSBnZXRMaW5lKGRvYywgbGluZSk7XG4gICAgICB2YXIgbGluZUxlbiA9IGxpbmVPYmoudGV4dC5sZW5ndGg7XG4gICAgICB2YXIgc3RhcnQsIGVuZDtcbiAgICAgIGZ1bmN0aW9uIGNvb3JkcyhjaCwgYmlhcykge1xuICAgICAgICByZXR1cm4gY2hhckNvb3JkcyhjbSwgUG9zKGxpbmUsIGNoKSwgXCJkaXZcIiwgbGluZU9iaiwgYmlhcyk7XG4gICAgICB9XG5cbiAgICAgIGl0ZXJhdGVCaWRpU2VjdGlvbnMoZ2V0T3JkZXIobGluZU9iaiksIGZyb21BcmcgfHwgMCwgdG9BcmcgPT0gbnVsbCA/IGxpbmVMZW4gOiB0b0FyZywgZnVuY3Rpb24oZnJvbSwgdG8sIGRpcikge1xuICAgICAgICB2YXIgbGVmdFBvcyA9IGNvb3Jkcyhmcm9tLCBcImxlZnRcIiksIHJpZ2h0UG9zLCBsZWZ0LCByaWdodDtcbiAgICAgICAgaWYgKGZyb20gPT0gdG8pIHtcbiAgICAgICAgICByaWdodFBvcyA9IGxlZnRQb3M7XG4gICAgICAgICAgbGVmdCA9IHJpZ2h0ID0gbGVmdFBvcy5sZWZ0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJpZ2h0UG9zID0gY29vcmRzKHRvIC0gMSwgXCJyaWdodFwiKTtcbiAgICAgICAgICBpZiAoZGlyID09IFwicnRsXCIpIHsgdmFyIHRtcCA9IGxlZnRQb3M7IGxlZnRQb3MgPSByaWdodFBvczsgcmlnaHRQb3MgPSB0bXA7IH1cbiAgICAgICAgICBsZWZ0ID0gbGVmdFBvcy5sZWZ0O1xuICAgICAgICAgIHJpZ2h0ID0gcmlnaHRQb3MucmlnaHQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZyb21BcmcgPT0gbnVsbCAmJiBmcm9tID09IDApIGxlZnQgPSBsZWZ0U2lkZTtcbiAgICAgICAgaWYgKHJpZ2h0UG9zLnRvcCAtIGxlZnRQb3MudG9wID4gMykgeyAvLyBEaWZmZXJlbnQgbGluZXMsIGRyYXcgdG9wIHBhcnRcbiAgICAgICAgICBhZGQobGVmdCwgbGVmdFBvcy50b3AsIG51bGwsIGxlZnRQb3MuYm90dG9tKTtcbiAgICAgICAgICBsZWZ0ID0gbGVmdFNpZGU7XG4gICAgICAgICAgaWYgKGxlZnRQb3MuYm90dG9tIDwgcmlnaHRQb3MudG9wKSBhZGQobGVmdCwgbGVmdFBvcy5ib3R0b20sIG51bGwsIHJpZ2h0UG9zLnRvcCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRvQXJnID09IG51bGwgJiYgdG8gPT0gbGluZUxlbikgcmlnaHQgPSByaWdodFNpZGU7XG4gICAgICAgIGlmICghc3RhcnQgfHwgbGVmdFBvcy50b3AgPCBzdGFydC50b3AgfHwgbGVmdFBvcy50b3AgPT0gc3RhcnQudG9wICYmIGxlZnRQb3MubGVmdCA8IHN0YXJ0LmxlZnQpXG4gICAgICAgICAgc3RhcnQgPSBsZWZ0UG9zO1xuICAgICAgICBpZiAoIWVuZCB8fCByaWdodFBvcy5ib3R0b20gPiBlbmQuYm90dG9tIHx8IHJpZ2h0UG9zLmJvdHRvbSA9PSBlbmQuYm90dG9tICYmIHJpZ2h0UG9zLnJpZ2h0ID4gZW5kLnJpZ2h0KVxuICAgICAgICAgIGVuZCA9IHJpZ2h0UG9zO1xuICAgICAgICBpZiAobGVmdCA8IGxlZnRTaWRlICsgMSkgbGVmdCA9IGxlZnRTaWRlO1xuICAgICAgICBhZGQobGVmdCwgcmlnaHRQb3MudG9wLCByaWdodCAtIGxlZnQsIHJpZ2h0UG9zLmJvdHRvbSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiB7c3RhcnQ6IHN0YXJ0LCBlbmQ6IGVuZH07XG4gICAgfVxuXG4gICAgdmFyIHNGcm9tID0gcmFuZ2UuZnJvbSgpLCBzVG8gPSByYW5nZS50bygpO1xuICAgIGlmIChzRnJvbS5saW5lID09IHNUby5saW5lKSB7XG4gICAgICBkcmF3Rm9yTGluZShzRnJvbS5saW5lLCBzRnJvbS5jaCwgc1RvLmNoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGZyb21MaW5lID0gZ2V0TGluZShkb2MsIHNGcm9tLmxpbmUpLCB0b0xpbmUgPSBnZXRMaW5lKGRvYywgc1RvLmxpbmUpO1xuICAgICAgdmFyIHNpbmdsZVZMaW5lID0gdmlzdWFsTGluZShmcm9tTGluZSkgPT0gdmlzdWFsTGluZSh0b0xpbmUpO1xuICAgICAgdmFyIGxlZnRFbmQgPSBkcmF3Rm9yTGluZShzRnJvbS5saW5lLCBzRnJvbS5jaCwgc2luZ2xlVkxpbmUgPyBmcm9tTGluZS50ZXh0Lmxlbmd0aCArIDEgOiBudWxsKS5lbmQ7XG4gICAgICB2YXIgcmlnaHRTdGFydCA9IGRyYXdGb3JMaW5lKHNUby5saW5lLCBzaW5nbGVWTGluZSA/IDAgOiBudWxsLCBzVG8uY2gpLnN0YXJ0O1xuICAgICAgaWYgKHNpbmdsZVZMaW5lKSB7XG4gICAgICAgIGlmIChsZWZ0RW5kLnRvcCA8IHJpZ2h0U3RhcnQudG9wIC0gMikge1xuICAgICAgICAgIGFkZChsZWZ0RW5kLnJpZ2h0LCBsZWZ0RW5kLnRvcCwgbnVsbCwgbGVmdEVuZC5ib3R0b20pO1xuICAgICAgICAgIGFkZChsZWZ0U2lkZSwgcmlnaHRTdGFydC50b3AsIHJpZ2h0U3RhcnQubGVmdCwgcmlnaHRTdGFydC5ib3R0b20pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGFkZChsZWZ0RW5kLnJpZ2h0LCBsZWZ0RW5kLnRvcCwgcmlnaHRTdGFydC5sZWZ0IC0gbGVmdEVuZC5yaWdodCwgbGVmdEVuZC5ib3R0b20pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAobGVmdEVuZC5ib3R0b20gPCByaWdodFN0YXJ0LnRvcClcbiAgICAgICAgYWRkKGxlZnRTaWRlLCBsZWZ0RW5kLmJvdHRvbSwgbnVsbCwgcmlnaHRTdGFydC50b3ApO1xuICAgIH1cblxuICAgIG91dHB1dC5hcHBlbmRDaGlsZChmcmFnbWVudCk7XG4gIH1cblxuICAvLyBDdXJzb3ItYmxpbmtpbmdcbiAgZnVuY3Rpb24gcmVzdGFydEJsaW5rKGNtKSB7XG4gICAgaWYgKCFjbS5zdGF0ZS5mb2N1c2VkKSByZXR1cm47XG4gICAgdmFyIGRpc3BsYXkgPSBjbS5kaXNwbGF5O1xuICAgIGNsZWFySW50ZXJ2YWwoZGlzcGxheS5ibGlua2VyKTtcbiAgICB2YXIgb24gPSB0cnVlO1xuICAgIGRpc3BsYXkuY3Vyc29yRGl2LnN0eWxlLnZpc2liaWxpdHkgPSBcIlwiO1xuICAgIGlmIChjbS5vcHRpb25zLmN1cnNvckJsaW5rUmF0ZSA+IDApXG4gICAgICBkaXNwbGF5LmJsaW5rZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHtcbiAgICAgICAgZGlzcGxheS5jdXJzb3JEaXYuc3R5bGUudmlzaWJpbGl0eSA9IChvbiA9ICFvbikgPyBcIlwiIDogXCJoaWRkZW5cIjtcbiAgICAgIH0sIGNtLm9wdGlvbnMuY3Vyc29yQmxpbmtSYXRlKTtcbiAgICBlbHNlIGlmIChjbS5vcHRpb25zLmN1cnNvckJsaW5rUmF0ZSA8IDApXG4gICAgICBkaXNwbGF5LmN1cnNvckRpdi5zdHlsZS52aXNpYmlsaXR5ID0gXCJoaWRkZW5cIjtcbiAgfVxuXG4gIC8vIEhJR0hMSUdIVCBXT1JLRVJcblxuICBmdW5jdGlvbiBzdGFydFdvcmtlcihjbSwgdGltZSkge1xuICAgIGlmIChjbS5kb2MubW9kZS5zdGFydFN0YXRlICYmIGNtLmRvYy5mcm9udGllciA8IGNtLmRpc3BsYXkudmlld1RvKVxuICAgICAgY20uc3RhdGUuaGlnaGxpZ2h0LnNldCh0aW1lLCBiaW5kKGhpZ2hsaWdodFdvcmtlciwgY20pKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGhpZ2hsaWdodFdvcmtlcihjbSkge1xuICAgIHZhciBkb2MgPSBjbS5kb2M7XG4gICAgaWYgKGRvYy5mcm9udGllciA8IGRvYy5maXJzdCkgZG9jLmZyb250aWVyID0gZG9jLmZpcnN0O1xuICAgIGlmIChkb2MuZnJvbnRpZXIgPj0gY20uZGlzcGxheS52aWV3VG8pIHJldHVybjtcbiAgICB2YXIgZW5kID0gK25ldyBEYXRlICsgY20ub3B0aW9ucy53b3JrVGltZTtcbiAgICB2YXIgc3RhdGUgPSBjb3B5U3RhdGUoZG9jLm1vZGUsIGdldFN0YXRlQmVmb3JlKGNtLCBkb2MuZnJvbnRpZXIpKTtcbiAgICB2YXIgY2hhbmdlZExpbmVzID0gW107XG5cbiAgICBkb2MuaXRlcihkb2MuZnJvbnRpZXIsIE1hdGgubWluKGRvYy5maXJzdCArIGRvYy5zaXplLCBjbS5kaXNwbGF5LnZpZXdUbyArIDUwMCksIGZ1bmN0aW9uKGxpbmUpIHtcbiAgICAgIGlmIChkb2MuZnJvbnRpZXIgPj0gY20uZGlzcGxheS52aWV3RnJvbSkgeyAvLyBWaXNpYmxlXG4gICAgICAgIHZhciBvbGRTdHlsZXMgPSBsaW5lLnN0eWxlcywgdG9vTG9uZyA9IGxpbmUudGV4dC5sZW5ndGggPiBjbS5vcHRpb25zLm1heEhpZ2hsaWdodExlbmd0aDtcbiAgICAgICAgdmFyIGhpZ2hsaWdodGVkID0gaGlnaGxpZ2h0TGluZShjbSwgbGluZSwgdG9vTG9uZyA/IGNvcHlTdGF0ZShkb2MubW9kZSwgc3RhdGUpIDogc3RhdGUsIHRydWUpO1xuICAgICAgICBsaW5lLnN0eWxlcyA9IGhpZ2hsaWdodGVkLnN0eWxlcztcbiAgICAgICAgdmFyIG9sZENscyA9IGxpbmUuc3R5bGVDbGFzc2VzLCBuZXdDbHMgPSBoaWdobGlnaHRlZC5jbGFzc2VzO1xuICAgICAgICBpZiAobmV3Q2xzKSBsaW5lLnN0eWxlQ2xhc3NlcyA9IG5ld0NscztcbiAgICAgICAgZWxzZSBpZiAob2xkQ2xzKSBsaW5lLnN0eWxlQ2xhc3NlcyA9IG51bGw7XG4gICAgICAgIHZhciBpc2NoYW5nZSA9ICFvbGRTdHlsZXMgfHwgb2xkU3R5bGVzLmxlbmd0aCAhPSBsaW5lLnN0eWxlcy5sZW5ndGggfHxcbiAgICAgICAgICBvbGRDbHMgIT0gbmV3Q2xzICYmICghb2xkQ2xzIHx8ICFuZXdDbHMgfHwgb2xkQ2xzLmJnQ2xhc3MgIT0gbmV3Q2xzLmJnQ2xhc3MgfHwgb2xkQ2xzLnRleHRDbGFzcyAhPSBuZXdDbHMudGV4dENsYXNzKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7ICFpc2NoYW5nZSAmJiBpIDwgb2xkU3R5bGVzLmxlbmd0aDsgKytpKSBpc2NoYW5nZSA9IG9sZFN0eWxlc1tpXSAhPSBsaW5lLnN0eWxlc1tpXTtcbiAgICAgICAgaWYgKGlzY2hhbmdlKSBjaGFuZ2VkTGluZXMucHVzaChkb2MuZnJvbnRpZXIpO1xuICAgICAgICBsaW5lLnN0YXRlQWZ0ZXIgPSB0b29Mb25nID8gc3RhdGUgOiBjb3B5U3RhdGUoZG9jLm1vZGUsIHN0YXRlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChsaW5lLnRleHQubGVuZ3RoIDw9IGNtLm9wdGlvbnMubWF4SGlnaGxpZ2h0TGVuZ3RoKVxuICAgICAgICAgIHByb2Nlc3NMaW5lKGNtLCBsaW5lLnRleHQsIHN0YXRlKTtcbiAgICAgICAgbGluZS5zdGF0ZUFmdGVyID0gZG9jLmZyb250aWVyICUgNSA9PSAwID8gY29weVN0YXRlKGRvYy5tb2RlLCBzdGF0ZSkgOiBudWxsO1xuICAgICAgfVxuICAgICAgKytkb2MuZnJvbnRpZXI7XG4gICAgICBpZiAoK25ldyBEYXRlID4gZW5kKSB7XG4gICAgICAgIHN0YXJ0V29ya2VyKGNtLCBjbS5vcHRpb25zLndvcmtEZWxheSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGlmIChjaGFuZ2VkTGluZXMubGVuZ3RoKSBydW5Jbk9wKGNtLCBmdW5jdGlvbigpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hhbmdlZExpbmVzLmxlbmd0aDsgaSsrKVxuICAgICAgICByZWdMaW5lQ2hhbmdlKGNtLCBjaGFuZ2VkTGluZXNbaV0sIFwidGV4dFwiKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIEZpbmRzIHRoZSBsaW5lIHRvIHN0YXJ0IHdpdGggd2hlbiBzdGFydGluZyBhIHBhcnNlLiBUcmllcyB0b1xuICAvLyBmaW5kIGEgbGluZSB3aXRoIGEgc3RhdGVBZnRlciwgc28gdGhhdCBpdCBjYW4gc3RhcnQgd2l0aCBhXG4gIC8vIHZhbGlkIHN0YXRlLiBJZiB0aGF0IGZhaWxzLCBpdCByZXR1cm5zIHRoZSBsaW5lIHdpdGggdGhlXG4gIC8vIHNtYWxsZXN0IGluZGVudGF0aW9uLCB3aGljaCB0ZW5kcyB0byBuZWVkIHRoZSBsZWFzdCBjb250ZXh0IHRvXG4gIC8vIHBhcnNlIGNvcnJlY3RseS5cbiAgZnVuY3Rpb24gZmluZFN0YXJ0TGluZShjbSwgbiwgcHJlY2lzZSkge1xuICAgIHZhciBtaW5pbmRlbnQsIG1pbmxpbmUsIGRvYyA9IGNtLmRvYztcbiAgICB2YXIgbGltID0gcHJlY2lzZSA/IC0xIDogbiAtIChjbS5kb2MubW9kZS5pbm5lck1vZGUgPyAxMDAwIDogMTAwKTtcbiAgICBmb3IgKHZhciBzZWFyY2ggPSBuOyBzZWFyY2ggPiBsaW07IC0tc2VhcmNoKSB7XG4gICAgICBpZiAoc2VhcmNoIDw9IGRvYy5maXJzdCkgcmV0dXJuIGRvYy5maXJzdDtcbiAgICAgIHZhciBsaW5lID0gZ2V0TGluZShkb2MsIHNlYXJjaCAtIDEpO1xuICAgICAgaWYgKGxpbmUuc3RhdGVBZnRlciAmJiAoIXByZWNpc2UgfHwgc2VhcmNoIDw9IGRvYy5mcm9udGllcikpIHJldHVybiBzZWFyY2g7XG4gICAgICB2YXIgaW5kZW50ZWQgPSBjb3VudENvbHVtbihsaW5lLnRleHQsIG51bGwsIGNtLm9wdGlvbnMudGFiU2l6ZSk7XG4gICAgICBpZiAobWlubGluZSA9PSBudWxsIHx8IG1pbmluZGVudCA+IGluZGVudGVkKSB7XG4gICAgICAgIG1pbmxpbmUgPSBzZWFyY2ggLSAxO1xuICAgICAgICBtaW5pbmRlbnQgPSBpbmRlbnRlZDtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1pbmxpbmU7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRTdGF0ZUJlZm9yZShjbSwgbiwgcHJlY2lzZSkge1xuICAgIHZhciBkb2MgPSBjbS5kb2MsIGRpc3BsYXkgPSBjbS5kaXNwbGF5O1xuICAgIGlmICghZG9jLm1vZGUuc3RhcnRTdGF0ZSkgcmV0dXJuIHRydWU7XG4gICAgdmFyIHBvcyA9IGZpbmRTdGFydExpbmUoY20sIG4sIHByZWNpc2UpLCBzdGF0ZSA9IHBvcyA+IGRvYy5maXJzdCAmJiBnZXRMaW5lKGRvYywgcG9zLTEpLnN0YXRlQWZ0ZXI7XG4gICAgaWYgKCFzdGF0ZSkgc3RhdGUgPSBzdGFydFN0YXRlKGRvYy5tb2RlKTtcbiAgICBlbHNlIHN0YXRlID0gY29weVN0YXRlKGRvYy5tb2RlLCBzdGF0ZSk7XG4gICAgZG9jLml0ZXIocG9zLCBuLCBmdW5jdGlvbihsaW5lKSB7XG4gICAgICBwcm9jZXNzTGluZShjbSwgbGluZS50ZXh0LCBzdGF0ZSk7XG4gICAgICB2YXIgc2F2ZSA9IHBvcyA9PSBuIC0gMSB8fCBwb3MgJSA1ID09IDAgfHwgcG9zID49IGRpc3BsYXkudmlld0Zyb20gJiYgcG9zIDwgZGlzcGxheS52aWV3VG87XG4gICAgICBsaW5lLnN0YXRlQWZ0ZXIgPSBzYXZlID8gY29weVN0YXRlKGRvYy5tb2RlLCBzdGF0ZSkgOiBudWxsO1xuICAgICAgKytwb3M7XG4gICAgfSk7XG4gICAgaWYgKHByZWNpc2UpIGRvYy5mcm9udGllciA9IHBvcztcbiAgICByZXR1cm4gc3RhdGU7XG4gIH1cblxuICAvLyBQT1NJVElPTiBNRUFTVVJFTUVOVFxuXG4gIGZ1bmN0aW9uIHBhZGRpbmdUb3AoZGlzcGxheSkge3JldHVybiBkaXNwbGF5LmxpbmVTcGFjZS5vZmZzZXRUb3A7fVxuICBmdW5jdGlvbiBwYWRkaW5nVmVydChkaXNwbGF5KSB7cmV0dXJuIGRpc3BsYXkubW92ZXIub2Zmc2V0SGVpZ2h0IC0gZGlzcGxheS5saW5lU3BhY2Uub2Zmc2V0SGVpZ2h0O31cbiAgZnVuY3Rpb24gcGFkZGluZ0goZGlzcGxheSkge1xuICAgIGlmIChkaXNwbGF5LmNhY2hlZFBhZGRpbmdIKSByZXR1cm4gZGlzcGxheS5jYWNoZWRQYWRkaW5nSDtcbiAgICB2YXIgZSA9IHJlbW92ZUNoaWxkcmVuQW5kQWRkKGRpc3BsYXkubWVhc3VyZSwgZWx0KFwicHJlXCIsIFwieFwiKSk7XG4gICAgdmFyIHN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUgPyB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlKSA6IGUuY3VycmVudFN0eWxlO1xuICAgIHZhciBkYXRhID0ge2xlZnQ6IHBhcnNlSW50KHN0eWxlLnBhZGRpbmdMZWZ0KSwgcmlnaHQ6IHBhcnNlSW50KHN0eWxlLnBhZGRpbmdSaWdodCl9O1xuICAgIGlmICghaXNOYU4oZGF0YS5sZWZ0KSAmJiAhaXNOYU4oZGF0YS5yaWdodCkpIGRpc3BsYXkuY2FjaGVkUGFkZGluZ0ggPSBkYXRhO1xuICAgIHJldHVybiBkYXRhO1xuICB9XG5cbiAgZnVuY3Rpb24gc2Nyb2xsR2FwKGNtKSB7IHJldHVybiBzY3JvbGxlckdhcCAtIGNtLmRpc3BsYXkubmF0aXZlQmFyV2lkdGg7IH1cbiAgZnVuY3Rpb24gZGlzcGxheVdpZHRoKGNtKSB7XG4gICAgcmV0dXJuIGNtLmRpc3BsYXkuc2Nyb2xsZXIuY2xpZW50V2lkdGggLSBzY3JvbGxHYXAoY20pIC0gY20uZGlzcGxheS5iYXJXaWR0aDtcbiAgfVxuICBmdW5jdGlvbiBkaXNwbGF5SGVpZ2h0KGNtKSB7XG4gICAgcmV0dXJuIGNtLmRpc3BsYXkuc2Nyb2xsZXIuY2xpZW50SGVpZ2h0IC0gc2Nyb2xsR2FwKGNtKSAtIGNtLmRpc3BsYXkuYmFySGVpZ2h0O1xuICB9XG5cbiAgLy8gRW5zdXJlIHRoZSBsaW5lVmlldy53cmFwcGluZy5oZWlnaHRzIGFycmF5IGlzIHBvcHVsYXRlZC4gVGhpcyBpc1xuICAvLyBhbiBhcnJheSBvZiBib3R0b20gb2Zmc2V0cyBmb3IgdGhlIGxpbmVzIHRoYXQgbWFrZSB1cCBhIGRyYXduXG4gIC8vIGxpbmUuIFdoZW4gbGluZVdyYXBwaW5nIGlzIG9uLCB0aGVyZSBtaWdodCBiZSBtb3JlIHRoYW4gb25lXG4gIC8vIGhlaWdodC5cbiAgZnVuY3Rpb24gZW5zdXJlTGluZUhlaWdodHMoY20sIGxpbmVWaWV3LCByZWN0KSB7XG4gICAgdmFyIHdyYXBwaW5nID0gY20ub3B0aW9ucy5saW5lV3JhcHBpbmc7XG4gICAgdmFyIGN1cldpZHRoID0gd3JhcHBpbmcgJiYgZGlzcGxheVdpZHRoKGNtKTtcbiAgICBpZiAoIWxpbmVWaWV3Lm1lYXN1cmUuaGVpZ2h0cyB8fCB3cmFwcGluZyAmJiBsaW5lVmlldy5tZWFzdXJlLndpZHRoICE9IGN1cldpZHRoKSB7XG4gICAgICB2YXIgaGVpZ2h0cyA9IGxpbmVWaWV3Lm1lYXN1cmUuaGVpZ2h0cyA9IFtdO1xuICAgICAgaWYgKHdyYXBwaW5nKSB7XG4gICAgICAgIGxpbmVWaWV3Lm1lYXN1cmUud2lkdGggPSBjdXJXaWR0aDtcbiAgICAgICAgdmFyIHJlY3RzID0gbGluZVZpZXcudGV4dC5maXJzdENoaWxkLmdldENsaWVudFJlY3RzKCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVjdHMubGVuZ3RoIC0gMTsgaSsrKSB7XG4gICAgICAgICAgdmFyIGN1ciA9IHJlY3RzW2ldLCBuZXh0ID0gcmVjdHNbaSArIDFdO1xuICAgICAgICAgIGlmIChNYXRoLmFicyhjdXIuYm90dG9tIC0gbmV4dC5ib3R0b20pID4gMilcbiAgICAgICAgICAgIGhlaWdodHMucHVzaCgoY3VyLmJvdHRvbSArIG5leHQudG9wKSAvIDIgLSByZWN0LnRvcCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGhlaWdodHMucHVzaChyZWN0LmJvdHRvbSAtIHJlY3QudG9wKTtcbiAgICB9XG4gIH1cblxuICAvLyBGaW5kIGEgbGluZSBtYXAgKG1hcHBpbmcgY2hhcmFjdGVyIG9mZnNldHMgdG8gdGV4dCBub2RlcykgYW5kIGFcbiAgLy8gbWVhc3VyZW1lbnQgY2FjaGUgZm9yIHRoZSBnaXZlbiBsaW5lIG51bWJlci4gKEEgbGluZSB2aWV3IG1pZ2h0XG4gIC8vIGNvbnRhaW4gbXVsdGlwbGUgbGluZXMgd2hlbiBjb2xsYXBzZWQgcmFuZ2VzIGFyZSBwcmVzZW50LilcbiAgZnVuY3Rpb24gbWFwRnJvbUxpbmVWaWV3KGxpbmVWaWV3LCBsaW5lLCBsaW5lTikge1xuICAgIGlmIChsaW5lVmlldy5saW5lID09IGxpbmUpXG4gICAgICByZXR1cm4ge21hcDogbGluZVZpZXcubWVhc3VyZS5tYXAsIGNhY2hlOiBsaW5lVmlldy5tZWFzdXJlLmNhY2hlfTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpbmVWaWV3LnJlc3QubGVuZ3RoOyBpKyspXG4gICAgICBpZiAobGluZVZpZXcucmVzdFtpXSA9PSBsaW5lKVxuICAgICAgICByZXR1cm4ge21hcDogbGluZVZpZXcubWVhc3VyZS5tYXBzW2ldLCBjYWNoZTogbGluZVZpZXcubWVhc3VyZS5jYWNoZXNbaV19O1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGluZVZpZXcucmVzdC5sZW5ndGg7IGkrKylcbiAgICAgIGlmIChsaW5lTm8obGluZVZpZXcucmVzdFtpXSkgPiBsaW5lTilcbiAgICAgICAgcmV0dXJuIHttYXA6IGxpbmVWaWV3Lm1lYXN1cmUubWFwc1tpXSwgY2FjaGU6IGxpbmVWaWV3Lm1lYXN1cmUuY2FjaGVzW2ldLCBiZWZvcmU6IHRydWV9O1xuICB9XG5cbiAgLy8gUmVuZGVyIGEgbGluZSBpbnRvIHRoZSBoaWRkZW4gbm9kZSBkaXNwbGF5LmV4dGVybmFsTWVhc3VyZWQuIFVzZWRcbiAgLy8gd2hlbiBtZWFzdXJlbWVudCBpcyBuZWVkZWQgZm9yIGEgbGluZSB0aGF0J3Mgbm90IGluIHRoZSB2aWV3cG9ydC5cbiAgZnVuY3Rpb24gdXBkYXRlRXh0ZXJuYWxNZWFzdXJlbWVudChjbSwgbGluZSkge1xuICAgIGxpbmUgPSB2aXN1YWxMaW5lKGxpbmUpO1xuICAgIHZhciBsaW5lTiA9IGxpbmVObyhsaW5lKTtcbiAgICB2YXIgdmlldyA9IGNtLmRpc3BsYXkuZXh0ZXJuYWxNZWFzdXJlZCA9IG5ldyBMaW5lVmlldyhjbS5kb2MsIGxpbmUsIGxpbmVOKTtcbiAgICB2aWV3LmxpbmVOID0gbGluZU47XG4gICAgdmFyIGJ1aWx0ID0gdmlldy5idWlsdCA9IGJ1aWxkTGluZUNvbnRlbnQoY20sIHZpZXcpO1xuICAgIHZpZXcudGV4dCA9IGJ1aWx0LnByZTtcbiAgICByZW1vdmVDaGlsZHJlbkFuZEFkZChjbS5kaXNwbGF5LmxpbmVNZWFzdXJlLCBidWlsdC5wcmUpO1xuICAgIHJldHVybiB2aWV3O1xuICB9XG5cbiAgLy8gR2V0IGEge3RvcCwgYm90dG9tLCBsZWZ0LCByaWdodH0gYm94IChpbiBsaW5lLWxvY2FsIGNvb3JkaW5hdGVzKVxuICAvLyBmb3IgYSBnaXZlbiBjaGFyYWN0ZXIuXG4gIGZ1bmN0aW9uIG1lYXN1cmVDaGFyKGNtLCBsaW5lLCBjaCwgYmlhcykge1xuICAgIHJldHVybiBtZWFzdXJlQ2hhclByZXBhcmVkKGNtLCBwcmVwYXJlTWVhc3VyZUZvckxpbmUoY20sIGxpbmUpLCBjaCwgYmlhcyk7XG4gIH1cblxuICAvLyBGaW5kIGEgbGluZSB2aWV3IHRoYXQgY29ycmVzcG9uZHMgdG8gdGhlIGdpdmVuIGxpbmUgbnVtYmVyLlxuICBmdW5jdGlvbiBmaW5kVmlld0ZvckxpbmUoY20sIGxpbmVOKSB7XG4gICAgaWYgKGxpbmVOID49IGNtLmRpc3BsYXkudmlld0Zyb20gJiYgbGluZU4gPCBjbS5kaXNwbGF5LnZpZXdUbylcbiAgICAgIHJldHVybiBjbS5kaXNwbGF5LnZpZXdbZmluZFZpZXdJbmRleChjbSwgbGluZU4pXTtcbiAgICB2YXIgZXh0ID0gY20uZGlzcGxheS5leHRlcm5hbE1lYXN1cmVkO1xuICAgIGlmIChleHQgJiYgbGluZU4gPj0gZXh0LmxpbmVOICYmIGxpbmVOIDwgZXh0LmxpbmVOICsgZXh0LnNpemUpXG4gICAgICByZXR1cm4gZXh0O1xuICB9XG5cbiAgLy8gTWVhc3VyZW1lbnQgY2FuIGJlIHNwbGl0IGluIHR3byBzdGVwcywgdGhlIHNldC11cCB3b3JrIHRoYXRcbiAgLy8gYXBwbGllcyB0byB0aGUgd2hvbGUgbGluZSwgYW5kIHRoZSBtZWFzdXJlbWVudCBvZiB0aGUgYWN0dWFsXG4gIC8vIGNoYXJhY3Rlci4gRnVuY3Rpb25zIGxpa2UgY29vcmRzQ2hhciwgdGhhdCBuZWVkIHRvIGRvIGEgbG90IG9mXG4gIC8vIG1lYXN1cmVtZW50cyBpbiBhIHJvdywgY2FuIHRodXMgZW5zdXJlIHRoYXQgdGhlIHNldC11cCB3b3JrIGlzXG4gIC8vIG9ubHkgZG9uZSBvbmNlLlxuICBmdW5jdGlvbiBwcmVwYXJlTWVhc3VyZUZvckxpbmUoY20sIGxpbmUpIHtcbiAgICB2YXIgbGluZU4gPSBsaW5lTm8obGluZSk7XG4gICAgdmFyIHZpZXcgPSBmaW5kVmlld0ZvckxpbmUoY20sIGxpbmVOKTtcbiAgICBpZiAodmlldyAmJiAhdmlldy50ZXh0KSB7XG4gICAgICB2aWV3ID0gbnVsbDtcbiAgICB9IGVsc2UgaWYgKHZpZXcgJiYgdmlldy5jaGFuZ2VzKSB7XG4gICAgICB1cGRhdGVMaW5lRm9yQ2hhbmdlcyhjbSwgdmlldywgbGluZU4sIGdldERpbWVuc2lvbnMoY20pKTtcbiAgICAgIGNtLmN1ck9wLmZvcmNlVXBkYXRlID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKCF2aWV3KVxuICAgICAgdmlldyA9IHVwZGF0ZUV4dGVybmFsTWVhc3VyZW1lbnQoY20sIGxpbmUpO1xuXG4gICAgdmFyIGluZm8gPSBtYXBGcm9tTGluZVZpZXcodmlldywgbGluZSwgbGluZU4pO1xuICAgIHJldHVybiB7XG4gICAgICBsaW5lOiBsaW5lLCB2aWV3OiB2aWV3LCByZWN0OiBudWxsLFxuICAgICAgbWFwOiBpbmZvLm1hcCwgY2FjaGU6IGluZm8uY2FjaGUsIGJlZm9yZTogaW5mby5iZWZvcmUsXG4gICAgICBoYXNIZWlnaHRzOiBmYWxzZVxuICAgIH07XG4gIH1cblxuICAvLyBHaXZlbiBhIHByZXBhcmVkIG1lYXN1cmVtZW50IG9iamVjdCwgbWVhc3VyZXMgdGhlIHBvc2l0aW9uIG9mIGFuXG4gIC8vIGFjdHVhbCBjaGFyYWN0ZXIgKG9yIGZldGNoZXMgaXQgZnJvbSB0aGUgY2FjaGUpLlxuICBmdW5jdGlvbiBtZWFzdXJlQ2hhclByZXBhcmVkKGNtLCBwcmVwYXJlZCwgY2gsIGJpYXMsIHZhckhlaWdodCkge1xuICAgIGlmIChwcmVwYXJlZC5iZWZvcmUpIGNoID0gLTE7XG4gICAgdmFyIGtleSA9IGNoICsgKGJpYXMgfHwgXCJcIiksIGZvdW5kO1xuICAgIGlmIChwcmVwYXJlZC5jYWNoZS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICBmb3VuZCA9IHByZXBhcmVkLmNhY2hlW2tleV07XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICghcHJlcGFyZWQucmVjdClcbiAgICAgICAgcHJlcGFyZWQucmVjdCA9IHByZXBhcmVkLnZpZXcudGV4dC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgIGlmICghcHJlcGFyZWQuaGFzSGVpZ2h0cykge1xuICAgICAgICBlbnN1cmVMaW5lSGVpZ2h0cyhjbSwgcHJlcGFyZWQudmlldywgcHJlcGFyZWQucmVjdCk7XG4gICAgICAgIHByZXBhcmVkLmhhc0hlaWdodHMgPSB0cnVlO1xuICAgICAgfVxuICAgICAgZm91bmQgPSBtZWFzdXJlQ2hhcklubmVyKGNtLCBwcmVwYXJlZCwgY2gsIGJpYXMpO1xuICAgICAgaWYgKCFmb3VuZC5ib2d1cykgcHJlcGFyZWQuY2FjaGVba2V5XSA9IGZvdW5kO1xuICAgIH1cbiAgICByZXR1cm4ge2xlZnQ6IGZvdW5kLmxlZnQsIHJpZ2h0OiBmb3VuZC5yaWdodCxcbiAgICAgICAgICAgIHRvcDogdmFySGVpZ2h0ID8gZm91bmQucnRvcCA6IGZvdW5kLnRvcCxcbiAgICAgICAgICAgIGJvdHRvbTogdmFySGVpZ2h0ID8gZm91bmQucmJvdHRvbSA6IGZvdW5kLmJvdHRvbX07XG4gIH1cblxuICB2YXIgbnVsbFJlY3QgPSB7bGVmdDogMCwgcmlnaHQ6IDAsIHRvcDogMCwgYm90dG9tOiAwfTtcblxuICBmdW5jdGlvbiBub2RlQW5kT2Zmc2V0SW5MaW5lTWFwKG1hcCwgY2gsIGJpYXMpIHtcbiAgICB2YXIgbm9kZSwgc3RhcnQsIGVuZCwgY29sbGFwc2U7XG4gICAgLy8gRmlyc3QsIHNlYXJjaCB0aGUgbGluZSBtYXAgZm9yIHRoZSB0ZXh0IG5vZGUgY29ycmVzcG9uZGluZyB0byxcbiAgICAvLyBvciBjbG9zZXN0IHRvLCB0aGUgdGFyZ2V0IGNoYXJhY3Rlci5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1hcC5sZW5ndGg7IGkgKz0gMykge1xuICAgICAgdmFyIG1TdGFydCA9IG1hcFtpXSwgbUVuZCA9IG1hcFtpICsgMV07XG4gICAgICBpZiAoY2ggPCBtU3RhcnQpIHtcbiAgICAgICAgc3RhcnQgPSAwOyBlbmQgPSAxO1xuICAgICAgICBjb2xsYXBzZSA9IFwibGVmdFwiO1xuICAgICAgfSBlbHNlIGlmIChjaCA8IG1FbmQpIHtcbiAgICAgICAgc3RhcnQgPSBjaCAtIG1TdGFydDtcbiAgICAgICAgZW5kID0gc3RhcnQgKyAxO1xuICAgICAgfSBlbHNlIGlmIChpID09IG1hcC5sZW5ndGggLSAzIHx8IGNoID09IG1FbmQgJiYgbWFwW2kgKyAzXSA+IGNoKSB7XG4gICAgICAgIGVuZCA9IG1FbmQgLSBtU3RhcnQ7XG4gICAgICAgIHN0YXJ0ID0gZW5kIC0gMTtcbiAgICAgICAgaWYgKGNoID49IG1FbmQpIGNvbGxhcHNlID0gXCJyaWdodFwiO1xuICAgICAgfVxuICAgICAgaWYgKHN0YXJ0ICE9IG51bGwpIHtcbiAgICAgICAgbm9kZSA9IG1hcFtpICsgMl07XG4gICAgICAgIGlmIChtU3RhcnQgPT0gbUVuZCAmJiBiaWFzID09IChub2RlLmluc2VydExlZnQgPyBcImxlZnRcIiA6IFwicmlnaHRcIikpXG4gICAgICAgICAgY29sbGFwc2UgPSBiaWFzO1xuICAgICAgICBpZiAoYmlhcyA9PSBcImxlZnRcIiAmJiBzdGFydCA9PSAwKVxuICAgICAgICAgIHdoaWxlIChpICYmIG1hcFtpIC0gMl0gPT0gbWFwW2kgLSAzXSAmJiBtYXBbaSAtIDFdLmluc2VydExlZnQpIHtcbiAgICAgICAgICAgIG5vZGUgPSBtYXBbKGkgLT0gMykgKyAyXTtcbiAgICAgICAgICAgIGNvbGxhcHNlID0gXCJsZWZ0XCI7XG4gICAgICAgICAgfVxuICAgICAgICBpZiAoYmlhcyA9PSBcInJpZ2h0XCIgJiYgc3RhcnQgPT0gbUVuZCAtIG1TdGFydClcbiAgICAgICAgICB3aGlsZSAoaSA8IG1hcC5sZW5ndGggLSAzICYmIG1hcFtpICsgM10gPT0gbWFwW2kgKyA0XSAmJiAhbWFwW2kgKyA1XS5pbnNlcnRMZWZ0KSB7XG4gICAgICAgICAgICBub2RlID0gbWFwWyhpICs9IDMpICsgMl07XG4gICAgICAgICAgICBjb2xsYXBzZSA9IFwicmlnaHRcIjtcbiAgICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4ge25vZGU6IG5vZGUsIHN0YXJ0OiBzdGFydCwgZW5kOiBlbmQsIGNvbGxhcHNlOiBjb2xsYXBzZSwgY292ZXJTdGFydDogbVN0YXJ0LCBjb3ZlckVuZDogbUVuZH07XG4gIH1cblxuICBmdW5jdGlvbiBtZWFzdXJlQ2hhcklubmVyKGNtLCBwcmVwYXJlZCwgY2gsIGJpYXMpIHtcbiAgICB2YXIgcGxhY2UgPSBub2RlQW5kT2Zmc2V0SW5MaW5lTWFwKHByZXBhcmVkLm1hcCwgY2gsIGJpYXMpO1xuICAgIHZhciBub2RlID0gcGxhY2Uubm9kZSwgc3RhcnQgPSBwbGFjZS5zdGFydCwgZW5kID0gcGxhY2UuZW5kLCBjb2xsYXBzZSA9IHBsYWNlLmNvbGxhcHNlO1xuXG4gICAgdmFyIHJlY3Q7XG4gICAgaWYgKG5vZGUubm9kZVR5cGUgPT0gMykgeyAvLyBJZiBpdCBpcyBhIHRleHQgbm9kZSwgdXNlIGEgcmFuZ2UgdG8gcmV0cmlldmUgdGhlIGNvb3JkaW5hdGVzLlxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA0OyBpKyspIHsgLy8gUmV0cnkgYSBtYXhpbXVtIG9mIDQgdGltZXMgd2hlbiBub25zZW5zZSByZWN0YW5nbGVzIGFyZSByZXR1cm5lZFxuICAgICAgICB3aGlsZSAoc3RhcnQgJiYgaXNFeHRlbmRpbmdDaGFyKHByZXBhcmVkLmxpbmUudGV4dC5jaGFyQXQocGxhY2UuY292ZXJTdGFydCArIHN0YXJ0KSkpIC0tc3RhcnQ7XG4gICAgICAgIHdoaWxlIChwbGFjZS5jb3ZlclN0YXJ0ICsgZW5kIDwgcGxhY2UuY292ZXJFbmQgJiYgaXNFeHRlbmRpbmdDaGFyKHByZXBhcmVkLmxpbmUudGV4dC5jaGFyQXQocGxhY2UuY292ZXJTdGFydCArIGVuZCkpKSArK2VuZDtcbiAgICAgICAgaWYgKGllICYmIGllX3ZlcnNpb24gPCA5ICYmIHN0YXJ0ID09IDAgJiYgZW5kID09IHBsYWNlLmNvdmVyRW5kIC0gcGxhY2UuY292ZXJTdGFydCkge1xuICAgICAgICAgIHJlY3QgPSBub2RlLnBhcmVudE5vZGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIH0gZWxzZSBpZiAoaWUgJiYgY20ub3B0aW9ucy5saW5lV3JhcHBpbmcpIHtcbiAgICAgICAgICB2YXIgcmVjdHMgPSByYW5nZShub2RlLCBzdGFydCwgZW5kKS5nZXRDbGllbnRSZWN0cygpO1xuICAgICAgICAgIGlmIChyZWN0cy5sZW5ndGgpXG4gICAgICAgICAgICByZWN0ID0gcmVjdHNbYmlhcyA9PSBcInJpZ2h0XCIgPyByZWN0cy5sZW5ndGggLSAxIDogMF07XG4gICAgICAgICAgZWxzZVxuICAgICAgICAgICAgcmVjdCA9IG51bGxSZWN0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlY3QgPSByYW5nZShub2RlLCBzdGFydCwgZW5kKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSB8fCBudWxsUmVjdDtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVjdC5sZWZ0IHx8IHJlY3QucmlnaHQgfHwgc3RhcnQgPT0gMCkgYnJlYWs7XG4gICAgICAgIGVuZCA9IHN0YXJ0O1xuICAgICAgICBzdGFydCA9IHN0YXJ0IC0gMTtcbiAgICAgICAgY29sbGFwc2UgPSBcInJpZ2h0XCI7XG4gICAgICB9XG4gICAgICBpZiAoaWUgJiYgaWVfdmVyc2lvbiA8IDExKSByZWN0ID0gbWF5YmVVcGRhdGVSZWN0Rm9yWm9vbWluZyhjbS5kaXNwbGF5Lm1lYXN1cmUsIHJlY3QpO1xuICAgIH0gZWxzZSB7IC8vIElmIGl0IGlzIGEgd2lkZ2V0LCBzaW1wbHkgZ2V0IHRoZSBib3ggZm9yIHRoZSB3aG9sZSB3aWRnZXQuXG4gICAgICBpZiAoc3RhcnQgPiAwKSBjb2xsYXBzZSA9IGJpYXMgPSBcInJpZ2h0XCI7XG4gICAgICB2YXIgcmVjdHM7XG4gICAgICBpZiAoY20ub3B0aW9ucy5saW5lV3JhcHBpbmcgJiYgKHJlY3RzID0gbm9kZS5nZXRDbGllbnRSZWN0cygpKS5sZW5ndGggPiAxKVxuICAgICAgICByZWN0ID0gcmVjdHNbYmlhcyA9PSBcInJpZ2h0XCIgPyByZWN0cy5sZW5ndGggLSAxIDogMF07XG4gICAgICBlbHNlXG4gICAgICAgIHJlY3QgPSBub2RlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIH1cbiAgICBpZiAoaWUgJiYgaWVfdmVyc2lvbiA8IDkgJiYgIXN0YXJ0ICYmICghcmVjdCB8fCAhcmVjdC5sZWZ0ICYmICFyZWN0LnJpZ2h0KSkge1xuICAgICAgdmFyIHJTcGFuID0gbm9kZS5wYXJlbnROb2RlLmdldENsaWVudFJlY3RzKClbMF07XG4gICAgICBpZiAoclNwYW4pXG4gICAgICAgIHJlY3QgPSB7bGVmdDogclNwYW4ubGVmdCwgcmlnaHQ6IHJTcGFuLmxlZnQgKyBjaGFyV2lkdGgoY20uZGlzcGxheSksIHRvcDogclNwYW4udG9wLCBib3R0b206IHJTcGFuLmJvdHRvbX07XG4gICAgICBlbHNlXG4gICAgICAgIHJlY3QgPSBudWxsUmVjdDtcbiAgICB9XG5cbiAgICB2YXIgcnRvcCA9IHJlY3QudG9wIC0gcHJlcGFyZWQucmVjdC50b3AsIHJib3QgPSByZWN0LmJvdHRvbSAtIHByZXBhcmVkLnJlY3QudG9wO1xuICAgIHZhciBtaWQgPSAocnRvcCArIHJib3QpIC8gMjtcbiAgICB2YXIgaGVpZ2h0cyA9IHByZXBhcmVkLnZpZXcubWVhc3VyZS5oZWlnaHRzO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaGVpZ2h0cy5sZW5ndGggLSAxOyBpKyspXG4gICAgICBpZiAobWlkIDwgaGVpZ2h0c1tpXSkgYnJlYWs7XG4gICAgdmFyIHRvcCA9IGkgPyBoZWlnaHRzW2kgLSAxXSA6IDAsIGJvdCA9IGhlaWdodHNbaV07XG4gICAgdmFyIHJlc3VsdCA9IHtsZWZ0OiAoY29sbGFwc2UgPT0gXCJyaWdodFwiID8gcmVjdC5yaWdodCA6IHJlY3QubGVmdCkgLSBwcmVwYXJlZC5yZWN0LmxlZnQsXG4gICAgICAgICAgICAgICAgICByaWdodDogKGNvbGxhcHNlID09IFwibGVmdFwiID8gcmVjdC5sZWZ0IDogcmVjdC5yaWdodCkgLSBwcmVwYXJlZC5yZWN0LmxlZnQsXG4gICAgICAgICAgICAgICAgICB0b3A6IHRvcCwgYm90dG9tOiBib3R9O1xuICAgIGlmICghcmVjdC5sZWZ0ICYmICFyZWN0LnJpZ2h0KSByZXN1bHQuYm9ndXMgPSB0cnVlO1xuICAgIGlmICghY20ub3B0aW9ucy5zaW5nbGVDdXJzb3JIZWlnaHRQZXJMaW5lKSB7IHJlc3VsdC5ydG9wID0gcnRvcDsgcmVzdWx0LnJib3R0b20gPSByYm90OyB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLy8gV29yayBhcm91bmQgcHJvYmxlbSB3aXRoIGJvdW5kaW5nIGNsaWVudCByZWN0cyBvbiByYW5nZXMgYmVpbmdcbiAgLy8gcmV0dXJuZWQgaW5jb3JyZWN0bHkgd2hlbiB6b29tZWQgb24gSUUxMCBhbmQgYmVsb3cuXG4gIGZ1bmN0aW9uIG1heWJlVXBkYXRlUmVjdEZvclpvb21pbmcobWVhc3VyZSwgcmVjdCkge1xuICAgIGlmICghd2luZG93LnNjcmVlbiB8fCBzY3JlZW4ubG9naWNhbFhEUEkgPT0gbnVsbCB8fFxuICAgICAgICBzY3JlZW4ubG9naWNhbFhEUEkgPT0gc2NyZWVuLmRldmljZVhEUEkgfHwgIWhhc0JhZFpvb21lZFJlY3RzKG1lYXN1cmUpKVxuICAgICAgcmV0dXJuIHJlY3Q7XG4gICAgdmFyIHNjYWxlWCA9IHNjcmVlbi5sb2dpY2FsWERQSSAvIHNjcmVlbi5kZXZpY2VYRFBJO1xuICAgIHZhciBzY2FsZVkgPSBzY3JlZW4ubG9naWNhbFlEUEkgLyBzY3JlZW4uZGV2aWNlWURQSTtcbiAgICByZXR1cm4ge2xlZnQ6IHJlY3QubGVmdCAqIHNjYWxlWCwgcmlnaHQ6IHJlY3QucmlnaHQgKiBzY2FsZVgsXG4gICAgICAgICAgICB0b3A6IHJlY3QudG9wICogc2NhbGVZLCBib3R0b206IHJlY3QuYm90dG9tICogc2NhbGVZfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNsZWFyTGluZU1lYXN1cmVtZW50Q2FjaGVGb3IobGluZVZpZXcpIHtcbiAgICBpZiAobGluZVZpZXcubWVhc3VyZSkge1xuICAgICAgbGluZVZpZXcubWVhc3VyZS5jYWNoZSA9IHt9O1xuICAgICAgbGluZVZpZXcubWVhc3VyZS5oZWlnaHRzID0gbnVsbDtcbiAgICAgIGlmIChsaW5lVmlldy5yZXN0KSBmb3IgKHZhciBpID0gMDsgaSA8IGxpbmVWaWV3LnJlc3QubGVuZ3RoOyBpKyspXG4gICAgICAgIGxpbmVWaWV3Lm1lYXN1cmUuY2FjaGVzW2ldID0ge307XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gY2xlYXJMaW5lTWVhc3VyZW1lbnRDYWNoZShjbSkge1xuICAgIGNtLmRpc3BsYXkuZXh0ZXJuYWxNZWFzdXJlID0gbnVsbDtcbiAgICByZW1vdmVDaGlsZHJlbihjbS5kaXNwbGF5LmxpbmVNZWFzdXJlKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNtLmRpc3BsYXkudmlldy5sZW5ndGg7IGkrKylcbiAgICAgIGNsZWFyTGluZU1lYXN1cmVtZW50Q2FjaGVGb3IoY20uZGlzcGxheS52aWV3W2ldKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNsZWFyQ2FjaGVzKGNtKSB7XG4gICAgY2xlYXJMaW5lTWVhc3VyZW1lbnRDYWNoZShjbSk7XG4gICAgY20uZGlzcGxheS5jYWNoZWRDaGFyV2lkdGggPSBjbS5kaXNwbGF5LmNhY2hlZFRleHRIZWlnaHQgPSBjbS5kaXNwbGF5LmNhY2hlZFBhZGRpbmdIID0gbnVsbDtcbiAgICBpZiAoIWNtLm9wdGlvbnMubGluZVdyYXBwaW5nKSBjbS5kaXNwbGF5Lm1heExpbmVDaGFuZ2VkID0gdHJ1ZTtcbiAgICBjbS5kaXNwbGF5LmxpbmVOdW1DaGFycyA9IG51bGw7XG4gIH1cblxuICBmdW5jdGlvbiBwYWdlU2Nyb2xsWCgpIHsgcmV0dXJuIHdpbmRvdy5wYWdlWE9mZnNldCB8fCAoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50IHx8IGRvY3VtZW50LmJvZHkpLnNjcm9sbExlZnQ7IH1cbiAgZnVuY3Rpb24gcGFnZVNjcm9sbFkoKSB7IHJldHVybiB3aW5kb3cucGFnZVlPZmZzZXQgfHwgKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCB8fCBkb2N1bWVudC5ib2R5KS5zY3JvbGxUb3A7IH1cblxuICAvLyBDb252ZXJ0cyBhIHt0b3AsIGJvdHRvbSwgbGVmdCwgcmlnaHR9IGJveCBmcm9tIGxpbmUtbG9jYWxcbiAgLy8gY29vcmRpbmF0ZXMgaW50byBhbm90aGVyIGNvb3JkaW5hdGUgc3lzdGVtLiBDb250ZXh0IG1heSBiZSBvbmUgb2ZcbiAgLy8gXCJsaW5lXCIsIFwiZGl2XCIgKGRpc3BsYXkubGluZURpdiksIFwibG9jYWxcIi9udWxsIChlZGl0b3IpLCBcIndpbmRvd1wiLFxuICAvLyBvciBcInBhZ2VcIi5cbiAgZnVuY3Rpb24gaW50b0Nvb3JkU3lzdGVtKGNtLCBsaW5lT2JqLCByZWN0LCBjb250ZXh0KSB7XG4gICAgaWYgKGxpbmVPYmoud2lkZ2V0cykgZm9yICh2YXIgaSA9IDA7IGkgPCBsaW5lT2JqLndpZGdldHMubGVuZ3RoOyArK2kpIGlmIChsaW5lT2JqLndpZGdldHNbaV0uYWJvdmUpIHtcbiAgICAgIHZhciBzaXplID0gd2lkZ2V0SGVpZ2h0KGxpbmVPYmoud2lkZ2V0c1tpXSk7XG4gICAgICByZWN0LnRvcCArPSBzaXplOyByZWN0LmJvdHRvbSArPSBzaXplO1xuICAgIH1cbiAgICBpZiAoY29udGV4dCA9PSBcImxpbmVcIikgcmV0dXJuIHJlY3Q7XG4gICAgaWYgKCFjb250ZXh0KSBjb250ZXh0ID0gXCJsb2NhbFwiO1xuICAgIHZhciB5T2ZmID0gaGVpZ2h0QXRMaW5lKGxpbmVPYmopO1xuICAgIGlmIChjb250ZXh0ID09IFwibG9jYWxcIikgeU9mZiArPSBwYWRkaW5nVG9wKGNtLmRpc3BsYXkpO1xuICAgIGVsc2UgeU9mZiAtPSBjbS5kaXNwbGF5LnZpZXdPZmZzZXQ7XG4gICAgaWYgKGNvbnRleHQgPT0gXCJwYWdlXCIgfHwgY29udGV4dCA9PSBcIndpbmRvd1wiKSB7XG4gICAgICB2YXIgbE9mZiA9IGNtLmRpc3BsYXkubGluZVNwYWNlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgeU9mZiArPSBsT2ZmLnRvcCArIChjb250ZXh0ID09IFwid2luZG93XCIgPyAwIDogcGFnZVNjcm9sbFkoKSk7XG4gICAgICB2YXIgeE9mZiA9IGxPZmYubGVmdCArIChjb250ZXh0ID09IFwid2luZG93XCIgPyAwIDogcGFnZVNjcm9sbFgoKSk7XG4gICAgICByZWN0LmxlZnQgKz0geE9mZjsgcmVjdC5yaWdodCArPSB4T2ZmO1xuICAgIH1cbiAgICByZWN0LnRvcCArPSB5T2ZmOyByZWN0LmJvdHRvbSArPSB5T2ZmO1xuICAgIHJldHVybiByZWN0O1xuICB9XG5cbiAgLy8gQ292ZXJ0cyBhIGJveCBmcm9tIFwiZGl2XCIgY29vcmRzIHRvIGFub3RoZXIgY29vcmRpbmF0ZSBzeXN0ZW0uXG4gIC8vIENvbnRleHQgbWF5IGJlIFwid2luZG93XCIsIFwicGFnZVwiLCBcImRpdlwiLCBvciBcImxvY2FsXCIvbnVsbC5cbiAgZnVuY3Rpb24gZnJvbUNvb3JkU3lzdGVtKGNtLCBjb29yZHMsIGNvbnRleHQpIHtcbiAgICBpZiAoY29udGV4dCA9PSBcImRpdlwiKSByZXR1cm4gY29vcmRzO1xuICAgIHZhciBsZWZ0ID0gY29vcmRzLmxlZnQsIHRvcCA9IGNvb3Jkcy50b3A7XG4gICAgLy8gRmlyc3QgbW92ZSBpbnRvIFwicGFnZVwiIGNvb3JkaW5hdGUgc3lzdGVtXG4gICAgaWYgKGNvbnRleHQgPT0gXCJwYWdlXCIpIHtcbiAgICAgIGxlZnQgLT0gcGFnZVNjcm9sbFgoKTtcbiAgICAgIHRvcCAtPSBwYWdlU2Nyb2xsWSgpO1xuICAgIH0gZWxzZSBpZiAoY29udGV4dCA9PSBcImxvY2FsXCIgfHwgIWNvbnRleHQpIHtcbiAgICAgIHZhciBsb2NhbEJveCA9IGNtLmRpc3BsYXkuc2l6ZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICBsZWZ0ICs9IGxvY2FsQm94LmxlZnQ7XG4gICAgICB0b3AgKz0gbG9jYWxCb3gudG9wO1xuICAgIH1cblxuICAgIHZhciBsaW5lU3BhY2VCb3ggPSBjbS5kaXNwbGF5LmxpbmVTcGFjZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICByZXR1cm4ge2xlZnQ6IGxlZnQgLSBsaW5lU3BhY2VCb3gubGVmdCwgdG9wOiB0b3AgLSBsaW5lU3BhY2VCb3gudG9wfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNoYXJDb29yZHMoY20sIHBvcywgY29udGV4dCwgbGluZU9iaiwgYmlhcykge1xuICAgIGlmICghbGluZU9iaikgbGluZU9iaiA9IGdldExpbmUoY20uZG9jLCBwb3MubGluZSk7XG4gICAgcmV0dXJuIGludG9Db29yZFN5c3RlbShjbSwgbGluZU9iaiwgbWVhc3VyZUNoYXIoY20sIGxpbmVPYmosIHBvcy5jaCwgYmlhcyksIGNvbnRleHQpO1xuICB9XG5cbiAgLy8gUmV0dXJucyBhIGJveCBmb3IgYSBnaXZlbiBjdXJzb3IgcG9zaXRpb24sIHdoaWNoIG1heSBoYXZlIGFuXG4gIC8vICdvdGhlcicgcHJvcGVydHkgY29udGFpbmluZyB0aGUgcG9zaXRpb24gb2YgdGhlIHNlY29uZGFyeSBjdXJzb3JcbiAgLy8gb24gYSBiaWRpIGJvdW5kYXJ5LlxuICBmdW5jdGlvbiBjdXJzb3JDb29yZHMoY20sIHBvcywgY29udGV4dCwgbGluZU9iaiwgcHJlcGFyZWRNZWFzdXJlLCB2YXJIZWlnaHQpIHtcbiAgICBsaW5lT2JqID0gbGluZU9iaiB8fCBnZXRMaW5lKGNtLmRvYywgcG9zLmxpbmUpO1xuICAgIGlmICghcHJlcGFyZWRNZWFzdXJlKSBwcmVwYXJlZE1lYXN1cmUgPSBwcmVwYXJlTWVhc3VyZUZvckxpbmUoY20sIGxpbmVPYmopO1xuICAgIGZ1bmN0aW9uIGdldChjaCwgcmlnaHQpIHtcbiAgICAgIHZhciBtID0gbWVhc3VyZUNoYXJQcmVwYXJlZChjbSwgcHJlcGFyZWRNZWFzdXJlLCBjaCwgcmlnaHQgPyBcInJpZ2h0XCIgOiBcImxlZnRcIiwgdmFySGVpZ2h0KTtcbiAgICAgIGlmIChyaWdodCkgbS5sZWZ0ID0gbS5yaWdodDsgZWxzZSBtLnJpZ2h0ID0gbS5sZWZ0O1xuICAgICAgcmV0dXJuIGludG9Db29yZFN5c3RlbShjbSwgbGluZU9iaiwgbSwgY29udGV4dCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldEJpZGkoY2gsIHBhcnRQb3MpIHtcbiAgICAgIHZhciBwYXJ0ID0gb3JkZXJbcGFydFBvc10sIHJpZ2h0ID0gcGFydC5sZXZlbCAlIDI7XG4gICAgICBpZiAoY2ggPT0gYmlkaUxlZnQocGFydCkgJiYgcGFydFBvcyAmJiBwYXJ0LmxldmVsIDwgb3JkZXJbcGFydFBvcyAtIDFdLmxldmVsKSB7XG4gICAgICAgIHBhcnQgPSBvcmRlclstLXBhcnRQb3NdO1xuICAgICAgICBjaCA9IGJpZGlSaWdodChwYXJ0KSAtIChwYXJ0LmxldmVsICUgMiA/IDAgOiAxKTtcbiAgICAgICAgcmlnaHQgPSB0cnVlO1xuICAgICAgfSBlbHNlIGlmIChjaCA9PSBiaWRpUmlnaHQocGFydCkgJiYgcGFydFBvcyA8IG9yZGVyLmxlbmd0aCAtIDEgJiYgcGFydC5sZXZlbCA8IG9yZGVyW3BhcnRQb3MgKyAxXS5sZXZlbCkge1xuICAgICAgICBwYXJ0ID0gb3JkZXJbKytwYXJ0UG9zXTtcbiAgICAgICAgY2ggPSBiaWRpTGVmdChwYXJ0KSAtIHBhcnQubGV2ZWwgJSAyO1xuICAgICAgICByaWdodCA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgaWYgKHJpZ2h0ICYmIGNoID09IHBhcnQudG8gJiYgY2ggPiBwYXJ0LmZyb20pIHJldHVybiBnZXQoY2ggLSAxKTtcbiAgICAgIHJldHVybiBnZXQoY2gsIHJpZ2h0KTtcbiAgICB9XG4gICAgdmFyIG9yZGVyID0gZ2V0T3JkZXIobGluZU9iaiksIGNoID0gcG9zLmNoO1xuICAgIGlmICghb3JkZXIpIHJldHVybiBnZXQoY2gpO1xuICAgIHZhciBwYXJ0UG9zID0gZ2V0QmlkaVBhcnRBdChvcmRlciwgY2gpO1xuICAgIHZhciB2YWwgPSBnZXRCaWRpKGNoLCBwYXJ0UG9zKTtcbiAgICBpZiAoYmlkaU90aGVyICE9IG51bGwpIHZhbC5vdGhlciA9IGdldEJpZGkoY2gsIGJpZGlPdGhlcik7XG4gICAgcmV0dXJuIHZhbDtcbiAgfVxuXG4gIC8vIFVzZWQgdG8gY2hlYXBseSBlc3RpbWF0ZSB0aGUgY29vcmRpbmF0ZXMgZm9yIGEgcG9zaXRpb24uIFVzZWQgZm9yXG4gIC8vIGludGVybWVkaWF0ZSBzY3JvbGwgdXBkYXRlcy5cbiAgZnVuY3Rpb24gZXN0aW1hdGVDb29yZHMoY20sIHBvcykge1xuICAgIHZhciBsZWZ0ID0gMCwgcG9zID0gY2xpcFBvcyhjbS5kb2MsIHBvcyk7XG4gICAgaWYgKCFjbS5vcHRpb25zLmxpbmVXcmFwcGluZykgbGVmdCA9IGNoYXJXaWR0aChjbS5kaXNwbGF5KSAqIHBvcy5jaDtcbiAgICB2YXIgbGluZU9iaiA9IGdldExpbmUoY20uZG9jLCBwb3MubGluZSk7XG4gICAgdmFyIHRvcCA9IGhlaWdodEF0TGluZShsaW5lT2JqKSArIHBhZGRpbmdUb3AoY20uZGlzcGxheSk7XG4gICAgcmV0dXJuIHtsZWZ0OiBsZWZ0LCByaWdodDogbGVmdCwgdG9wOiB0b3AsIGJvdHRvbTogdG9wICsgbGluZU9iai5oZWlnaHR9O1xuICB9XG5cbiAgLy8gUG9zaXRpb25zIHJldHVybmVkIGJ5IGNvb3Jkc0NoYXIgY29udGFpbiBzb21lIGV4dHJhIGluZm9ybWF0aW9uLlxuICAvLyB4UmVsIGlzIHRoZSByZWxhdGl2ZSB4IHBvc2l0aW9uIG9mIHRoZSBpbnB1dCBjb29yZGluYXRlcyBjb21wYXJlZFxuICAvLyB0byB0aGUgZm91bmQgcG9zaXRpb24gKHNvIHhSZWwgPiAwIG1lYW5zIHRoZSBjb29yZGluYXRlcyBhcmUgdG9cbiAgLy8gdGhlIHJpZ2h0IG9mIHRoZSBjaGFyYWN0ZXIgcG9zaXRpb24sIGZvciBleGFtcGxlKS4gV2hlbiBvdXRzaWRlXG4gIC8vIGlzIHRydWUsIHRoYXQgbWVhbnMgdGhlIGNvb3JkaW5hdGVzIGxpZSBvdXRzaWRlIHRoZSBsaW5lJ3NcbiAgLy8gdmVydGljYWwgcmFuZ2UuXG4gIGZ1bmN0aW9uIFBvc1dpdGhJbmZvKGxpbmUsIGNoLCBvdXRzaWRlLCB4UmVsKSB7XG4gICAgdmFyIHBvcyA9IFBvcyhsaW5lLCBjaCk7XG4gICAgcG9zLnhSZWwgPSB4UmVsO1xuICAgIGlmIChvdXRzaWRlKSBwb3Mub3V0c2lkZSA9IHRydWU7XG4gICAgcmV0dXJuIHBvcztcbiAgfVxuXG4gIC8vIENvbXB1dGUgdGhlIGNoYXJhY3RlciBwb3NpdGlvbiBjbG9zZXN0IHRvIHRoZSBnaXZlbiBjb29yZGluYXRlcy5cbiAgLy8gSW5wdXQgbXVzdCBiZSBsaW5lU3BhY2UtbG9jYWwgKFwiZGl2XCIgY29vcmRpbmF0ZSBzeXN0ZW0pLlxuICBmdW5jdGlvbiBjb29yZHNDaGFyKGNtLCB4LCB5KSB7XG4gICAgdmFyIGRvYyA9IGNtLmRvYztcbiAgICB5ICs9IGNtLmRpc3BsYXkudmlld09mZnNldDtcbiAgICBpZiAoeSA8IDApIHJldHVybiBQb3NXaXRoSW5mbyhkb2MuZmlyc3QsIDAsIHRydWUsIC0xKTtcbiAgICB2YXIgbGluZU4gPSBsaW5lQXRIZWlnaHQoZG9jLCB5KSwgbGFzdCA9IGRvYy5maXJzdCArIGRvYy5zaXplIC0gMTtcbiAgICBpZiAobGluZU4gPiBsYXN0KVxuICAgICAgcmV0dXJuIFBvc1dpdGhJbmZvKGRvYy5maXJzdCArIGRvYy5zaXplIC0gMSwgZ2V0TGluZShkb2MsIGxhc3QpLnRleHQubGVuZ3RoLCB0cnVlLCAxKTtcbiAgICBpZiAoeCA8IDApIHggPSAwO1xuXG4gICAgdmFyIGxpbmVPYmogPSBnZXRMaW5lKGRvYywgbGluZU4pO1xuICAgIGZvciAoOzspIHtcbiAgICAgIHZhciBmb3VuZCA9IGNvb3Jkc0NoYXJJbm5lcihjbSwgbGluZU9iaiwgbGluZU4sIHgsIHkpO1xuICAgICAgdmFyIG1lcmdlZCA9IGNvbGxhcHNlZFNwYW5BdEVuZChsaW5lT2JqKTtcbiAgICAgIHZhciBtZXJnZWRQb3MgPSBtZXJnZWQgJiYgbWVyZ2VkLmZpbmQoMCwgdHJ1ZSk7XG4gICAgICBpZiAobWVyZ2VkICYmIChmb3VuZC5jaCA+IG1lcmdlZFBvcy5mcm9tLmNoIHx8IGZvdW5kLmNoID09IG1lcmdlZFBvcy5mcm9tLmNoICYmIGZvdW5kLnhSZWwgPiAwKSlcbiAgICAgICAgbGluZU4gPSBsaW5lTm8obGluZU9iaiA9IG1lcmdlZFBvcy50by5saW5lKTtcbiAgICAgIGVsc2VcbiAgICAgICAgcmV0dXJuIGZvdW5kO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGNvb3Jkc0NoYXJJbm5lcihjbSwgbGluZU9iaiwgbGluZU5vLCB4LCB5KSB7XG4gICAgdmFyIGlubmVyT2ZmID0geSAtIGhlaWdodEF0TGluZShsaW5lT2JqKTtcbiAgICB2YXIgd3JvbmdMaW5lID0gZmFsc2UsIGFkanVzdCA9IDIgKiBjbS5kaXNwbGF5LndyYXBwZXIuY2xpZW50V2lkdGg7XG4gICAgdmFyIHByZXBhcmVkTWVhc3VyZSA9IHByZXBhcmVNZWFzdXJlRm9yTGluZShjbSwgbGluZU9iaik7XG5cbiAgICBmdW5jdGlvbiBnZXRYKGNoKSB7XG4gICAgICB2YXIgc3AgPSBjdXJzb3JDb29yZHMoY20sIFBvcyhsaW5lTm8sIGNoKSwgXCJsaW5lXCIsIGxpbmVPYmosIHByZXBhcmVkTWVhc3VyZSk7XG4gICAgICB3cm9uZ0xpbmUgPSB0cnVlO1xuICAgICAgaWYgKGlubmVyT2ZmID4gc3AuYm90dG9tKSByZXR1cm4gc3AubGVmdCAtIGFkanVzdDtcbiAgICAgIGVsc2UgaWYgKGlubmVyT2ZmIDwgc3AudG9wKSByZXR1cm4gc3AubGVmdCArIGFkanVzdDtcbiAgICAgIGVsc2Ugd3JvbmdMaW5lID0gZmFsc2U7XG4gICAgICByZXR1cm4gc3AubGVmdDtcbiAgICB9XG5cbiAgICB2YXIgYmlkaSA9IGdldE9yZGVyKGxpbmVPYmopLCBkaXN0ID0gbGluZU9iai50ZXh0Lmxlbmd0aDtcbiAgICB2YXIgZnJvbSA9IGxpbmVMZWZ0KGxpbmVPYmopLCB0byA9IGxpbmVSaWdodChsaW5lT2JqKTtcbiAgICB2YXIgZnJvbVggPSBnZXRYKGZyb20pLCBmcm9tT3V0c2lkZSA9IHdyb25nTGluZSwgdG9YID0gZ2V0WCh0byksIHRvT3V0c2lkZSA9IHdyb25nTGluZTtcblxuICAgIGlmICh4ID4gdG9YKSByZXR1cm4gUG9zV2l0aEluZm8obGluZU5vLCB0bywgdG9PdXRzaWRlLCAxKTtcbiAgICAvLyBEbyBhIGJpbmFyeSBzZWFyY2ggYmV0d2VlbiB0aGVzZSBib3VuZHMuXG4gICAgZm9yICg7Oykge1xuICAgICAgaWYgKGJpZGkgPyB0byA9PSBmcm9tIHx8IHRvID09IG1vdmVWaXN1YWxseShsaW5lT2JqLCBmcm9tLCAxKSA6IHRvIC0gZnJvbSA8PSAxKSB7XG4gICAgICAgIHZhciBjaCA9IHggPCBmcm9tWCB8fCB4IC0gZnJvbVggPD0gdG9YIC0geCA/IGZyb20gOiB0bztcbiAgICAgICAgdmFyIHhEaWZmID0geCAtIChjaCA9PSBmcm9tID8gZnJvbVggOiB0b1gpO1xuICAgICAgICB3aGlsZSAoaXNFeHRlbmRpbmdDaGFyKGxpbmVPYmoudGV4dC5jaGFyQXQoY2gpKSkgKytjaDtcbiAgICAgICAgdmFyIHBvcyA9IFBvc1dpdGhJbmZvKGxpbmVObywgY2gsIGNoID09IGZyb20gPyBmcm9tT3V0c2lkZSA6IHRvT3V0c2lkZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHhEaWZmIDwgLTEgPyAtMSA6IHhEaWZmID4gMSA/IDEgOiAwKTtcbiAgICAgICAgcmV0dXJuIHBvcztcbiAgICAgIH1cbiAgICAgIHZhciBzdGVwID0gTWF0aC5jZWlsKGRpc3QgLyAyKSwgbWlkZGxlID0gZnJvbSArIHN0ZXA7XG4gICAgICBpZiAoYmlkaSkge1xuICAgICAgICBtaWRkbGUgPSBmcm9tO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0ZXA7ICsraSkgbWlkZGxlID0gbW92ZVZpc3VhbGx5KGxpbmVPYmosIG1pZGRsZSwgMSk7XG4gICAgICB9XG4gICAgICB2YXIgbWlkZGxlWCA9IGdldFgobWlkZGxlKTtcbiAgICAgIGlmIChtaWRkbGVYID4geCkge3RvID0gbWlkZGxlOyB0b1ggPSBtaWRkbGVYOyBpZiAodG9PdXRzaWRlID0gd3JvbmdMaW5lKSB0b1ggKz0gMTAwMDsgZGlzdCA9IHN0ZXA7fVxuICAgICAgZWxzZSB7ZnJvbSA9IG1pZGRsZTsgZnJvbVggPSBtaWRkbGVYOyBmcm9tT3V0c2lkZSA9IHdyb25nTGluZTsgZGlzdCAtPSBzdGVwO31cbiAgICB9XG4gIH1cblxuICB2YXIgbWVhc3VyZVRleHQ7XG4gIC8vIENvbXB1dGUgdGhlIGRlZmF1bHQgdGV4dCBoZWlnaHQuXG4gIGZ1bmN0aW9uIHRleHRIZWlnaHQoZGlzcGxheSkge1xuICAgIGlmIChkaXNwbGF5LmNhY2hlZFRleHRIZWlnaHQgIT0gbnVsbCkgcmV0dXJuIGRpc3BsYXkuY2FjaGVkVGV4dEhlaWdodDtcbiAgICBpZiAobWVhc3VyZVRleHQgPT0gbnVsbCkge1xuICAgICAgbWVhc3VyZVRleHQgPSBlbHQoXCJwcmVcIik7XG4gICAgICAvLyBNZWFzdXJlIGEgYnVuY2ggb2YgbGluZXMsIGZvciBicm93c2VycyB0aGF0IGNvbXB1dGVcbiAgICAgIC8vIGZyYWN0aW9uYWwgaGVpZ2h0cy5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNDk7ICsraSkge1xuICAgICAgICBtZWFzdXJlVGV4dC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcInhcIikpO1xuICAgICAgICBtZWFzdXJlVGV4dC5hcHBlbmRDaGlsZChlbHQoXCJiclwiKSk7XG4gICAgICB9XG4gICAgICBtZWFzdXJlVGV4dC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcInhcIikpO1xuICAgIH1cbiAgICByZW1vdmVDaGlsZHJlbkFuZEFkZChkaXNwbGF5Lm1lYXN1cmUsIG1lYXN1cmVUZXh0KTtcbiAgICB2YXIgaGVpZ2h0ID0gbWVhc3VyZVRleHQub2Zmc2V0SGVpZ2h0IC8gNTA7XG4gICAgaWYgKGhlaWdodCA+IDMpIGRpc3BsYXkuY2FjaGVkVGV4dEhlaWdodCA9IGhlaWdodDtcbiAgICByZW1vdmVDaGlsZHJlbihkaXNwbGF5Lm1lYXN1cmUpO1xuICAgIHJldHVybiBoZWlnaHQgfHwgMTtcbiAgfVxuXG4gIC8vIENvbXB1dGUgdGhlIGRlZmF1bHQgY2hhcmFjdGVyIHdpZHRoLlxuICBmdW5jdGlvbiBjaGFyV2lkdGgoZGlzcGxheSkge1xuICAgIGlmIChkaXNwbGF5LmNhY2hlZENoYXJXaWR0aCAhPSBudWxsKSByZXR1cm4gZGlzcGxheS5jYWNoZWRDaGFyV2lkdGg7XG4gICAgdmFyIGFuY2hvciA9IGVsdChcInNwYW5cIiwgXCJ4eHh4eHh4eHh4XCIpO1xuICAgIHZhciBwcmUgPSBlbHQoXCJwcmVcIiwgW2FuY2hvcl0pO1xuICAgIHJlbW92ZUNoaWxkcmVuQW5kQWRkKGRpc3BsYXkubWVhc3VyZSwgcHJlKTtcbiAgICB2YXIgcmVjdCA9IGFuY2hvci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSwgd2lkdGggPSAocmVjdC5yaWdodCAtIHJlY3QubGVmdCkgLyAxMDtcbiAgICBpZiAod2lkdGggPiAyKSBkaXNwbGF5LmNhY2hlZENoYXJXaWR0aCA9IHdpZHRoO1xuICAgIHJldHVybiB3aWR0aCB8fCAxMDtcbiAgfVxuXG4gIC8vIE9QRVJBVElPTlNcblxuICAvLyBPcGVyYXRpb25zIGFyZSB1c2VkIHRvIHdyYXAgYSBzZXJpZXMgb2YgY2hhbmdlcyB0byB0aGUgZWRpdG9yXG4gIC8vIHN0YXRlIGluIHN1Y2ggYSB3YXkgdGhhdCBlYWNoIGNoYW5nZSB3b24ndCBoYXZlIHRvIHVwZGF0ZSB0aGVcbiAgLy8gY3Vyc29yIGFuZCBkaXNwbGF5ICh3aGljaCB3b3VsZCBiZSBhd2t3YXJkLCBzbG93LCBhbmRcbiAgLy8gZXJyb3ItcHJvbmUpLiBJbnN0ZWFkLCBkaXNwbGF5IHVwZGF0ZXMgYXJlIGJhdGNoZWQgYW5kIHRoZW4gYWxsXG4gIC8vIGNvbWJpbmVkIGFuZCBleGVjdXRlZCBhdCBvbmNlLlxuXG4gIHZhciBvcGVyYXRpb25Hcm91cCA9IG51bGw7XG5cbiAgdmFyIG5leHRPcElkID0gMDtcbiAgLy8gU3RhcnQgYSBuZXcgb3BlcmF0aW9uLlxuICBmdW5jdGlvbiBzdGFydE9wZXJhdGlvbihjbSkge1xuICAgIGNtLmN1ck9wID0ge1xuICAgICAgY206IGNtLFxuICAgICAgdmlld0NoYW5nZWQ6IGZhbHNlLCAgICAgIC8vIEZsYWcgdGhhdCBpbmRpY2F0ZXMgdGhhdCBsaW5lcyBtaWdodCBuZWVkIHRvIGJlIHJlZHJhd25cbiAgICAgIHN0YXJ0SGVpZ2h0OiBjbS5kb2MuaGVpZ2h0LCAvLyBVc2VkIHRvIGRldGVjdCBuZWVkIHRvIHVwZGF0ZSBzY3JvbGxiYXJcbiAgICAgIGZvcmNlVXBkYXRlOiBmYWxzZSwgICAgICAvLyBVc2VkIHRvIGZvcmNlIGEgcmVkcmF3XG4gICAgICB1cGRhdGVJbnB1dDogbnVsbCwgICAgICAgLy8gV2hldGhlciB0byByZXNldCB0aGUgaW5wdXQgdGV4dGFyZWFcbiAgICAgIHR5cGluZzogZmFsc2UsICAgICAgICAgICAvLyBXaGV0aGVyIHRoaXMgcmVzZXQgc2hvdWxkIGJlIGNhcmVmdWwgdG8gbGVhdmUgZXhpc3RpbmcgdGV4dCAoZm9yIGNvbXBvc2l0aW5nKVxuICAgICAgY2hhbmdlT2JqczogbnVsbCwgICAgICAgIC8vIEFjY3VtdWxhdGVkIGNoYW5nZXMsIGZvciBmaXJpbmcgY2hhbmdlIGV2ZW50c1xuICAgICAgY3Vyc29yQWN0aXZpdHlIYW5kbGVyczogbnVsbCwgLy8gU2V0IG9mIGhhbmRsZXJzIHRvIGZpcmUgY3Vyc29yQWN0aXZpdHkgb25cbiAgICAgIGN1cnNvckFjdGl2aXR5Q2FsbGVkOiAwLCAvLyBUcmFja3Mgd2hpY2ggY3Vyc29yQWN0aXZpdHkgaGFuZGxlcnMgaGF2ZSBiZWVuIGNhbGxlZCBhbHJlYWR5XG4gICAgICBzZWxlY3Rpb25DaGFuZ2VkOiBmYWxzZSwgLy8gV2hldGhlciB0aGUgc2VsZWN0aW9uIG5lZWRzIHRvIGJlIHJlZHJhd25cbiAgICAgIHVwZGF0ZU1heExpbmU6IGZhbHNlLCAgICAvLyBTZXQgd2hlbiB0aGUgd2lkZXN0IGxpbmUgbmVlZHMgdG8gYmUgZGV0ZXJtaW5lZCBhbmV3XG4gICAgICBzY3JvbGxMZWZ0OiBudWxsLCBzY3JvbGxUb3A6IG51bGwsIC8vIEludGVybWVkaWF0ZSBzY3JvbGwgcG9zaXRpb24sIG5vdCBwdXNoZWQgdG8gRE9NIHlldFxuICAgICAgc2Nyb2xsVG9Qb3M6IG51bGwsICAgICAgIC8vIFVzZWQgdG8gc2Nyb2xsIHRvIGEgc3BlY2lmaWMgcG9zaXRpb25cbiAgICAgIGZvY3VzOiBmYWxzZSxcbiAgICAgIGlkOiArK25leHRPcElkICAgICAgICAgICAvLyBVbmlxdWUgSURcbiAgICB9O1xuICAgIGlmIChvcGVyYXRpb25Hcm91cCkge1xuICAgICAgb3BlcmF0aW9uR3JvdXAub3BzLnB1c2goY20uY3VyT3ApO1xuICAgIH0gZWxzZSB7XG4gICAgICBjbS5jdXJPcC5vd25zR3JvdXAgPSBvcGVyYXRpb25Hcm91cCA9IHtcbiAgICAgICAgb3BzOiBbY20uY3VyT3BdLFxuICAgICAgICBkZWxheWVkQ2FsbGJhY2tzOiBbXVxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBmaXJlQ2FsbGJhY2tzRm9yT3BzKGdyb3VwKSB7XG4gICAgLy8gQ2FsbHMgZGVsYXllZCBjYWxsYmFja3MgYW5kIGN1cnNvckFjdGl2aXR5IGhhbmRsZXJzIHVudGlsIG5vXG4gICAgLy8gbmV3IG9uZXMgYXBwZWFyXG4gICAgdmFyIGNhbGxiYWNrcyA9IGdyb3VwLmRlbGF5ZWRDYWxsYmFja3MsIGkgPSAwO1xuICAgIGRvIHtcbiAgICAgIGZvciAoOyBpIDwgY2FsbGJhY2tzLmxlbmd0aDsgaSsrKVxuICAgICAgICBjYWxsYmFja3NbaV0uY2FsbChudWxsKTtcbiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZ3JvdXAub3BzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIHZhciBvcCA9IGdyb3VwLm9wc1tqXTtcbiAgICAgICAgaWYgKG9wLmN1cnNvckFjdGl2aXR5SGFuZGxlcnMpXG4gICAgICAgICAgd2hpbGUgKG9wLmN1cnNvckFjdGl2aXR5Q2FsbGVkIDwgb3AuY3Vyc29yQWN0aXZpdHlIYW5kbGVycy5sZW5ndGgpXG4gICAgICAgICAgICBvcC5jdXJzb3JBY3Rpdml0eUhhbmRsZXJzW29wLmN1cnNvckFjdGl2aXR5Q2FsbGVkKytdLmNhbGwobnVsbCwgb3AuY20pO1xuICAgICAgfVxuICAgIH0gd2hpbGUgKGkgPCBjYWxsYmFja3MubGVuZ3RoKTtcbiAgfVxuXG4gIC8vIEZpbmlzaCBhbiBvcGVyYXRpb24sIHVwZGF0aW5nIHRoZSBkaXNwbGF5IGFuZCBzaWduYWxsaW5nIGRlbGF5ZWQgZXZlbnRzXG4gIGZ1bmN0aW9uIGVuZE9wZXJhdGlvbihjbSkge1xuICAgIHZhciBvcCA9IGNtLmN1ck9wLCBncm91cCA9IG9wLm93bnNHcm91cDtcbiAgICBpZiAoIWdyb3VwKSByZXR1cm47XG5cbiAgICB0cnkgeyBmaXJlQ2FsbGJhY2tzRm9yT3BzKGdyb3VwKTsgfVxuICAgIGZpbmFsbHkge1xuICAgICAgb3BlcmF0aW9uR3JvdXAgPSBudWxsO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBncm91cC5vcHMubGVuZ3RoOyBpKyspXG4gICAgICAgIGdyb3VwLm9wc1tpXS5jbS5jdXJPcCA9IG51bGw7XG4gICAgICBlbmRPcGVyYXRpb25zKGdyb3VwKTtcbiAgICB9XG4gIH1cblxuICAvLyBUaGUgRE9NIHVwZGF0ZXMgZG9uZSB3aGVuIGFuIG9wZXJhdGlvbiBmaW5pc2hlcyBhcmUgYmF0Y2hlZCBzb1xuICAvLyB0aGF0IHRoZSBtaW5pbXVtIG51bWJlciBvZiByZWxheW91dHMgYXJlIHJlcXVpcmVkLlxuICBmdW5jdGlvbiBlbmRPcGVyYXRpb25zKGdyb3VwKSB7XG4gICAgdmFyIG9wcyA9IGdyb3VwLm9wcztcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9wcy5sZW5ndGg7IGkrKykgLy8gUmVhZCBET01cbiAgICAgIGVuZE9wZXJhdGlvbl9SMShvcHNbaV0pO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3BzLmxlbmd0aDsgaSsrKSAvLyBXcml0ZSBET00gKG1heWJlKVxuICAgICAgZW5kT3BlcmF0aW9uX1cxKG9wc1tpXSk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvcHMubGVuZ3RoOyBpKyspIC8vIFJlYWQgRE9NXG4gICAgICBlbmRPcGVyYXRpb25fUjIob3BzW2ldKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9wcy5sZW5ndGg7IGkrKykgLy8gV3JpdGUgRE9NIChtYXliZSlcbiAgICAgIGVuZE9wZXJhdGlvbl9XMihvcHNbaV0pO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3BzLmxlbmd0aDsgaSsrKSAvLyBSZWFkIERPTVxuICAgICAgZW5kT3BlcmF0aW9uX2ZpbmlzaChvcHNbaV0pO1xuICB9XG5cbiAgZnVuY3Rpb24gZW5kT3BlcmF0aW9uX1IxKG9wKSB7XG4gICAgdmFyIGNtID0gb3AuY20sIGRpc3BsYXkgPSBjbS5kaXNwbGF5O1xuICAgIG1heWJlQ2xpcFNjcm9sbGJhcnMoY20pO1xuICAgIGlmIChvcC51cGRhdGVNYXhMaW5lKSBmaW5kTWF4TGluZShjbSk7XG5cbiAgICBvcC5tdXN0VXBkYXRlID0gb3Audmlld0NoYW5nZWQgfHwgb3AuZm9yY2VVcGRhdGUgfHwgb3Auc2Nyb2xsVG9wICE9IG51bGwgfHxcbiAgICAgIG9wLnNjcm9sbFRvUG9zICYmIChvcC5zY3JvbGxUb1Bvcy5mcm9tLmxpbmUgPCBkaXNwbGF5LnZpZXdGcm9tIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgb3Auc2Nyb2xsVG9Qb3MudG8ubGluZSA+PSBkaXNwbGF5LnZpZXdUbykgfHxcbiAgICAgIGRpc3BsYXkubWF4TGluZUNoYW5nZWQgJiYgY20ub3B0aW9ucy5saW5lV3JhcHBpbmc7XG4gICAgb3AudXBkYXRlID0gb3AubXVzdFVwZGF0ZSAmJlxuICAgICAgbmV3IERpc3BsYXlVcGRhdGUoY20sIG9wLm11c3RVcGRhdGUgJiYge3RvcDogb3Auc2Nyb2xsVG9wLCBlbnN1cmU6IG9wLnNjcm9sbFRvUG9zfSwgb3AuZm9yY2VVcGRhdGUpO1xuICB9XG5cbiAgZnVuY3Rpb24gZW5kT3BlcmF0aW9uX1cxKG9wKSB7XG4gICAgb3AudXBkYXRlZERpc3BsYXkgPSBvcC5tdXN0VXBkYXRlICYmIHVwZGF0ZURpc3BsYXlJZk5lZWRlZChvcC5jbSwgb3AudXBkYXRlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGVuZE9wZXJhdGlvbl9SMihvcCkge1xuICAgIHZhciBjbSA9IG9wLmNtLCBkaXNwbGF5ID0gY20uZGlzcGxheTtcbiAgICBpZiAob3AudXBkYXRlZERpc3BsYXkpIHVwZGF0ZUhlaWdodHNJblZpZXdwb3J0KGNtKTtcblxuICAgIG9wLmJhck1lYXN1cmUgPSBtZWFzdXJlRm9yU2Nyb2xsYmFycyhjbSk7XG5cbiAgICAvLyBJZiB0aGUgbWF4IGxpbmUgY2hhbmdlZCBzaW5jZSBpdCB3YXMgbGFzdCBtZWFzdXJlZCwgbWVhc3VyZSBpdCxcbiAgICAvLyBhbmQgZW5zdXJlIHRoZSBkb2N1bWVudCdzIHdpZHRoIG1hdGNoZXMgaXQuXG4gICAgLy8gdXBkYXRlRGlzcGxheV9XMiB3aWxsIHVzZSB0aGVzZSBwcm9wZXJ0aWVzIHRvIGRvIHRoZSBhY3R1YWwgcmVzaXppbmdcbiAgICBpZiAoZGlzcGxheS5tYXhMaW5lQ2hhbmdlZCAmJiAhY20ub3B0aW9ucy5saW5lV3JhcHBpbmcpIHtcbiAgICAgIG9wLmFkanVzdFdpZHRoVG8gPSBtZWFzdXJlQ2hhcihjbSwgZGlzcGxheS5tYXhMaW5lLCBkaXNwbGF5Lm1heExpbmUudGV4dC5sZW5ndGgpLmxlZnQgKyAzO1xuICAgICAgY20uZGlzcGxheS5zaXplcldpZHRoID0gb3AuYWRqdXN0V2lkdGhUbztcbiAgICAgIG9wLmJhck1lYXN1cmUuc2Nyb2xsV2lkdGggPVxuICAgICAgICBNYXRoLm1heChkaXNwbGF5LnNjcm9sbGVyLmNsaWVudFdpZHRoLCBkaXNwbGF5LnNpemVyLm9mZnNldExlZnQgKyBvcC5hZGp1c3RXaWR0aFRvICsgc2Nyb2xsR2FwKGNtKSArIGNtLmRpc3BsYXkuYmFyV2lkdGgpO1xuICAgICAgb3AubWF4U2Nyb2xsTGVmdCA9IE1hdGgubWF4KDAsIGRpc3BsYXkuc2l6ZXIub2Zmc2V0TGVmdCArIG9wLmFkanVzdFdpZHRoVG8gLSBkaXNwbGF5V2lkdGgoY20pKTtcbiAgICB9XG5cbiAgICBpZiAob3AudXBkYXRlZERpc3BsYXkgfHwgb3Auc2VsZWN0aW9uQ2hhbmdlZClcbiAgICAgIG9wLnByZXBhcmVkU2VsZWN0aW9uID0gZGlzcGxheS5pbnB1dC5wcmVwYXJlU2VsZWN0aW9uKCk7XG4gIH1cblxuICBmdW5jdGlvbiBlbmRPcGVyYXRpb25fVzIob3ApIHtcbiAgICB2YXIgY20gPSBvcC5jbTtcblxuICAgIGlmIChvcC5hZGp1c3RXaWR0aFRvICE9IG51bGwpIHtcbiAgICAgIGNtLmRpc3BsYXkuc2l6ZXIuc3R5bGUubWluV2lkdGggPSBvcC5hZGp1c3RXaWR0aFRvICsgXCJweFwiO1xuICAgICAgaWYgKG9wLm1heFNjcm9sbExlZnQgPCBjbS5kb2Muc2Nyb2xsTGVmdClcbiAgICAgICAgc2V0U2Nyb2xsTGVmdChjbSwgTWF0aC5taW4oY20uZGlzcGxheS5zY3JvbGxlci5zY3JvbGxMZWZ0LCBvcC5tYXhTY3JvbGxMZWZ0KSwgdHJ1ZSk7XG4gICAgICBjbS5kaXNwbGF5Lm1heExpbmVDaGFuZ2VkID0gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKG9wLnByZXBhcmVkU2VsZWN0aW9uKVxuICAgICAgY20uZGlzcGxheS5pbnB1dC5zaG93U2VsZWN0aW9uKG9wLnByZXBhcmVkU2VsZWN0aW9uKTtcbiAgICBpZiAob3AudXBkYXRlZERpc3BsYXkgfHwgb3Auc3RhcnRIZWlnaHQgIT0gY20uZG9jLmhlaWdodClcbiAgICAgIHVwZGF0ZVNjcm9sbGJhcnMoY20sIG9wLmJhck1lYXN1cmUpO1xuICAgIGlmIChvcC51cGRhdGVkRGlzcGxheSlcbiAgICAgIHNldERvY3VtZW50SGVpZ2h0KGNtLCBvcC5iYXJNZWFzdXJlKTtcblxuICAgIGlmIChvcC5zZWxlY3Rpb25DaGFuZ2VkKSByZXN0YXJ0QmxpbmsoY20pO1xuXG4gICAgaWYgKGNtLnN0YXRlLmZvY3VzZWQgJiYgb3AudXBkYXRlSW5wdXQpXG4gICAgICBjbS5kaXNwbGF5LmlucHV0LnJlc2V0KG9wLnR5cGluZyk7XG4gICAgaWYgKG9wLmZvY3VzICYmIG9wLmZvY3VzID09IGFjdGl2ZUVsdCgpICYmICghZG9jdW1lbnQuaGFzRm9jdXMgfHwgZG9jdW1lbnQuaGFzRm9jdXMoKSkpXG4gICAgICBlbnN1cmVGb2N1cyhvcC5jbSk7XG4gIH1cblxuICBmdW5jdGlvbiBlbmRPcGVyYXRpb25fZmluaXNoKG9wKSB7XG4gICAgdmFyIGNtID0gb3AuY20sIGRpc3BsYXkgPSBjbS5kaXNwbGF5LCBkb2MgPSBjbS5kb2M7XG5cbiAgICBpZiAob3AudXBkYXRlZERpc3BsYXkpIHBvc3RVcGRhdGVEaXNwbGF5KGNtLCBvcC51cGRhdGUpO1xuXG4gICAgLy8gQWJvcnQgbW91c2Ugd2hlZWwgZGVsdGEgbWVhc3VyZW1lbnQsIHdoZW4gc2Nyb2xsaW5nIGV4cGxpY2l0bHlcbiAgICBpZiAoZGlzcGxheS53aGVlbFN0YXJ0WCAhPSBudWxsICYmIChvcC5zY3JvbGxUb3AgIT0gbnVsbCB8fCBvcC5zY3JvbGxMZWZ0ICE9IG51bGwgfHwgb3Auc2Nyb2xsVG9Qb3MpKVxuICAgICAgZGlzcGxheS53aGVlbFN0YXJ0WCA9IGRpc3BsYXkud2hlZWxTdGFydFkgPSBudWxsO1xuXG4gICAgLy8gUHJvcGFnYXRlIHRoZSBzY3JvbGwgcG9zaXRpb24gdG8gdGhlIGFjdHVhbCBET00gc2Nyb2xsZXJcbiAgICBpZiAob3Auc2Nyb2xsVG9wICE9IG51bGwgJiYgKGRpc3BsYXkuc2Nyb2xsZXIuc2Nyb2xsVG9wICE9IG9wLnNjcm9sbFRvcCB8fCBvcC5mb3JjZVNjcm9sbCkpIHtcbiAgICAgIGRvYy5zY3JvbGxUb3AgPSBNYXRoLm1heCgwLCBNYXRoLm1pbihkaXNwbGF5LnNjcm9sbGVyLnNjcm9sbEhlaWdodCAtIGRpc3BsYXkuc2Nyb2xsZXIuY2xpZW50SGVpZ2h0LCBvcC5zY3JvbGxUb3ApKTtcbiAgICAgIGRpc3BsYXkuc2Nyb2xsYmFycy5zZXRTY3JvbGxUb3AoZG9jLnNjcm9sbFRvcCk7XG4gICAgICBkaXNwbGF5LnNjcm9sbGVyLnNjcm9sbFRvcCA9IGRvYy5zY3JvbGxUb3A7XG4gICAgfVxuICAgIGlmIChvcC5zY3JvbGxMZWZ0ICE9IG51bGwgJiYgKGRpc3BsYXkuc2Nyb2xsZXIuc2Nyb2xsTGVmdCAhPSBvcC5zY3JvbGxMZWZ0IHx8IG9wLmZvcmNlU2Nyb2xsKSkge1xuICAgICAgZG9jLnNjcm9sbExlZnQgPSBNYXRoLm1heCgwLCBNYXRoLm1pbihkaXNwbGF5LnNjcm9sbGVyLnNjcm9sbFdpZHRoIC0gZGlzcGxheS5zY3JvbGxlci5jbGllbnRXaWR0aCwgb3Auc2Nyb2xsTGVmdCkpO1xuICAgICAgZGlzcGxheS5zY3JvbGxiYXJzLnNldFNjcm9sbExlZnQoZG9jLnNjcm9sbExlZnQpO1xuICAgICAgZGlzcGxheS5zY3JvbGxlci5zY3JvbGxMZWZ0ID0gZG9jLnNjcm9sbExlZnQ7XG4gICAgICBhbGlnbkhvcml6b250YWxseShjbSk7XG4gICAgfVxuICAgIC8vIElmIHdlIG5lZWQgdG8gc2Nyb2xsIGEgc3BlY2lmaWMgcG9zaXRpb24gaW50byB2aWV3LCBkbyBzby5cbiAgICBpZiAob3Auc2Nyb2xsVG9Qb3MpIHtcbiAgICAgIHZhciBjb29yZHMgPSBzY3JvbGxQb3NJbnRvVmlldyhjbSwgY2xpcFBvcyhkb2MsIG9wLnNjcm9sbFRvUG9zLmZyb20pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaXBQb3MoZG9jLCBvcC5zY3JvbGxUb1Bvcy50byksIG9wLnNjcm9sbFRvUG9zLm1hcmdpbik7XG4gICAgICBpZiAob3Auc2Nyb2xsVG9Qb3MuaXNDdXJzb3IgJiYgY20uc3RhdGUuZm9jdXNlZCkgbWF5YmVTY3JvbGxXaW5kb3coY20sIGNvb3Jkcyk7XG4gICAgfVxuXG4gICAgLy8gRmlyZSBldmVudHMgZm9yIG1hcmtlcnMgdGhhdCBhcmUgaGlkZGVuL3VuaWRkZW4gYnkgZWRpdGluZyBvclxuICAgIC8vIHVuZG9pbmdcbiAgICB2YXIgaGlkZGVuID0gb3AubWF5YmVIaWRkZW5NYXJrZXJzLCB1bmhpZGRlbiA9IG9wLm1heWJlVW5oaWRkZW5NYXJrZXJzO1xuICAgIGlmIChoaWRkZW4pIGZvciAodmFyIGkgPSAwOyBpIDwgaGlkZGVuLmxlbmd0aDsgKytpKVxuICAgICAgaWYgKCFoaWRkZW5baV0ubGluZXMubGVuZ3RoKSBzaWduYWwoaGlkZGVuW2ldLCBcImhpZGVcIik7XG4gICAgaWYgKHVuaGlkZGVuKSBmb3IgKHZhciBpID0gMDsgaSA8IHVuaGlkZGVuLmxlbmd0aDsgKytpKVxuICAgICAgaWYgKHVuaGlkZGVuW2ldLmxpbmVzLmxlbmd0aCkgc2lnbmFsKHVuaGlkZGVuW2ldLCBcInVuaGlkZVwiKTtcblxuICAgIGlmIChkaXNwbGF5LndyYXBwZXIub2Zmc2V0SGVpZ2h0KVxuICAgICAgZG9jLnNjcm9sbFRvcCA9IGNtLmRpc3BsYXkuc2Nyb2xsZXIuc2Nyb2xsVG9wO1xuXG4gICAgLy8gRmlyZSBjaGFuZ2UgZXZlbnRzLCBhbmQgZGVsYXllZCBldmVudCBoYW5kbGVyc1xuICAgIGlmIChvcC5jaGFuZ2VPYmpzKVxuICAgICAgc2lnbmFsKGNtLCBcImNoYW5nZXNcIiwgY20sIG9wLmNoYW5nZU9ianMpO1xuICAgIGlmIChvcC51cGRhdGUpXG4gICAgICBvcC51cGRhdGUuZmluaXNoKCk7XG4gIH1cblxuICAvLyBSdW4gdGhlIGdpdmVuIGZ1bmN0aW9uIGluIGFuIG9wZXJhdGlvblxuICBmdW5jdGlvbiBydW5Jbk9wKGNtLCBmKSB7XG4gICAgaWYgKGNtLmN1ck9wKSByZXR1cm4gZigpO1xuICAgIHN0YXJ0T3BlcmF0aW9uKGNtKTtcbiAgICB0cnkgeyByZXR1cm4gZigpOyB9XG4gICAgZmluYWxseSB7IGVuZE9wZXJhdGlvbihjbSk7IH1cbiAgfVxuICAvLyBXcmFwcyBhIGZ1bmN0aW9uIGluIGFuIG9wZXJhdGlvbi4gUmV0dXJucyB0aGUgd3JhcHBlZCBmdW5jdGlvbi5cbiAgZnVuY3Rpb24gb3BlcmF0aW9uKGNtLCBmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKGNtLmN1ck9wKSByZXR1cm4gZi5hcHBseShjbSwgYXJndW1lbnRzKTtcbiAgICAgIHN0YXJ0T3BlcmF0aW9uKGNtKTtcbiAgICAgIHRyeSB7IHJldHVybiBmLmFwcGx5KGNtLCBhcmd1bWVudHMpOyB9XG4gICAgICBmaW5hbGx5IHsgZW5kT3BlcmF0aW9uKGNtKTsgfVxuICAgIH07XG4gIH1cbiAgLy8gVXNlZCB0byBhZGQgbWV0aG9kcyB0byBlZGl0b3IgYW5kIGRvYyBpbnN0YW5jZXMsIHdyYXBwaW5nIHRoZW0gaW5cbiAgLy8gb3BlcmF0aW9ucy5cbiAgZnVuY3Rpb24gbWV0aG9kT3AoZikge1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIGlmICh0aGlzLmN1ck9wKSByZXR1cm4gZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgc3RhcnRPcGVyYXRpb24odGhpcyk7XG4gICAgICB0cnkgeyByZXR1cm4gZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9XG4gICAgICBmaW5hbGx5IHsgZW5kT3BlcmF0aW9uKHRoaXMpOyB9XG4gICAgfTtcbiAgfVxuICBmdW5jdGlvbiBkb2NNZXRob2RPcChmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGNtID0gdGhpcy5jbTtcbiAgICAgIGlmICghY20gfHwgY20uY3VyT3ApIHJldHVybiBmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICBzdGFydE9wZXJhdGlvbihjbSk7XG4gICAgICB0cnkgeyByZXR1cm4gZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9XG4gICAgICBmaW5hbGx5IHsgZW5kT3BlcmF0aW9uKGNtKTsgfVxuICAgIH07XG4gIH1cblxuICAvLyBWSUVXIFRSQUNLSU5HXG5cbiAgLy8gVGhlc2Ugb2JqZWN0cyBhcmUgdXNlZCB0byByZXByZXNlbnQgdGhlIHZpc2libGUgKGN1cnJlbnRseSBkcmF3bilcbiAgLy8gcGFydCBvZiB0aGUgZG9jdW1lbnQuIEEgTGluZVZpZXcgbWF5IGNvcnJlc3BvbmQgdG8gbXVsdGlwbGVcbiAgLy8gbG9naWNhbCBsaW5lcywgaWYgdGhvc2UgYXJlIGNvbm5lY3RlZCBieSBjb2xsYXBzZWQgcmFuZ2VzLlxuICBmdW5jdGlvbiBMaW5lVmlldyhkb2MsIGxpbmUsIGxpbmVOKSB7XG4gICAgLy8gVGhlIHN0YXJ0aW5nIGxpbmVcbiAgICB0aGlzLmxpbmUgPSBsaW5lO1xuICAgIC8vIENvbnRpbnVpbmcgbGluZXMsIGlmIGFueVxuICAgIHRoaXMucmVzdCA9IHZpc3VhbExpbmVDb250aW51ZWQobGluZSk7XG4gICAgLy8gTnVtYmVyIG9mIGxvZ2ljYWwgbGluZXMgaW4gdGhpcyB2aXN1YWwgbGluZVxuICAgIHRoaXMuc2l6ZSA9IHRoaXMucmVzdCA/IGxpbmVObyhsc3QodGhpcy5yZXN0KSkgLSBsaW5lTiArIDEgOiAxO1xuICAgIHRoaXMubm9kZSA9IHRoaXMudGV4dCA9IG51bGw7XG4gICAgdGhpcy5oaWRkZW4gPSBsaW5lSXNIaWRkZW4oZG9jLCBsaW5lKTtcbiAgfVxuXG4gIC8vIENyZWF0ZSBhIHJhbmdlIG9mIExpbmVWaWV3IG9iamVjdHMgZm9yIHRoZSBnaXZlbiBsaW5lcy5cbiAgZnVuY3Rpb24gYnVpbGRWaWV3QXJyYXkoY20sIGZyb20sIHRvKSB7XG4gICAgdmFyIGFycmF5ID0gW10sIG5leHRQb3M7XG4gICAgZm9yICh2YXIgcG9zID0gZnJvbTsgcG9zIDwgdG87IHBvcyA9IG5leHRQb3MpIHtcbiAgICAgIHZhciB2aWV3ID0gbmV3IExpbmVWaWV3KGNtLmRvYywgZ2V0TGluZShjbS5kb2MsIHBvcyksIHBvcyk7XG4gICAgICBuZXh0UG9zID0gcG9zICsgdmlldy5zaXplO1xuICAgICAgYXJyYXkucHVzaCh2aWV3KTtcbiAgICB9XG4gICAgcmV0dXJuIGFycmF5O1xuICB9XG5cbiAgLy8gVXBkYXRlcyB0aGUgZGlzcGxheS52aWV3IGRhdGEgc3RydWN0dXJlIGZvciBhIGdpdmVuIGNoYW5nZSB0byB0aGVcbiAgLy8gZG9jdW1lbnQuIEZyb20gYW5kIHRvIGFyZSBpbiBwcmUtY2hhbmdlIGNvb3JkaW5hdGVzLiBMZW5kaWZmIGlzXG4gIC8vIHRoZSBhbW91bnQgb2YgbGluZXMgYWRkZWQgb3Igc3VidHJhY3RlZCBieSB0aGUgY2hhbmdlLiBUaGlzIGlzXG4gIC8vIHVzZWQgZm9yIGNoYW5nZXMgdGhhdCBzcGFuIG11bHRpcGxlIGxpbmVzLCBvciBjaGFuZ2UgdGhlIHdheVxuICAvLyBsaW5lcyBhcmUgZGl2aWRlZCBpbnRvIHZpc3VhbCBsaW5lcy4gcmVnTGluZUNoYW5nZSAoYmVsb3cpXG4gIC8vIHJlZ2lzdGVycyBzaW5nbGUtbGluZSBjaGFuZ2VzLlxuICBmdW5jdGlvbiByZWdDaGFuZ2UoY20sIGZyb20sIHRvLCBsZW5kaWZmKSB7XG4gICAgaWYgKGZyb20gPT0gbnVsbCkgZnJvbSA9IGNtLmRvYy5maXJzdDtcbiAgICBpZiAodG8gPT0gbnVsbCkgdG8gPSBjbS5kb2MuZmlyc3QgKyBjbS5kb2Muc2l6ZTtcbiAgICBpZiAoIWxlbmRpZmYpIGxlbmRpZmYgPSAwO1xuXG4gICAgdmFyIGRpc3BsYXkgPSBjbS5kaXNwbGF5O1xuICAgIGlmIChsZW5kaWZmICYmIHRvIDwgZGlzcGxheS52aWV3VG8gJiZcbiAgICAgICAgKGRpc3BsYXkudXBkYXRlTGluZU51bWJlcnMgPT0gbnVsbCB8fCBkaXNwbGF5LnVwZGF0ZUxpbmVOdW1iZXJzID4gZnJvbSkpXG4gICAgICBkaXNwbGF5LnVwZGF0ZUxpbmVOdW1iZXJzID0gZnJvbTtcblxuICAgIGNtLmN1ck9wLnZpZXdDaGFuZ2VkID0gdHJ1ZTtcblxuICAgIGlmIChmcm9tID49IGRpc3BsYXkudmlld1RvKSB7IC8vIENoYW5nZSBhZnRlclxuICAgICAgaWYgKHNhd0NvbGxhcHNlZFNwYW5zICYmIHZpc3VhbExpbmVObyhjbS5kb2MsIGZyb20pIDwgZGlzcGxheS52aWV3VG8pXG4gICAgICAgIHJlc2V0VmlldyhjbSk7XG4gICAgfSBlbHNlIGlmICh0byA8PSBkaXNwbGF5LnZpZXdGcm9tKSB7IC8vIENoYW5nZSBiZWZvcmVcbiAgICAgIGlmIChzYXdDb2xsYXBzZWRTcGFucyAmJiB2aXN1YWxMaW5lRW5kTm8oY20uZG9jLCB0byArIGxlbmRpZmYpID4gZGlzcGxheS52aWV3RnJvbSkge1xuICAgICAgICByZXNldFZpZXcoY20pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGlzcGxheS52aWV3RnJvbSArPSBsZW5kaWZmO1xuICAgICAgICBkaXNwbGF5LnZpZXdUbyArPSBsZW5kaWZmO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoZnJvbSA8PSBkaXNwbGF5LnZpZXdGcm9tICYmIHRvID49IGRpc3BsYXkudmlld1RvKSB7IC8vIEZ1bGwgb3ZlcmxhcFxuICAgICAgcmVzZXRWaWV3KGNtKTtcbiAgICB9IGVsc2UgaWYgKGZyb20gPD0gZGlzcGxheS52aWV3RnJvbSkgeyAvLyBUb3Agb3ZlcmxhcFxuICAgICAgdmFyIGN1dCA9IHZpZXdDdXR0aW5nUG9pbnQoY20sIHRvLCB0byArIGxlbmRpZmYsIDEpO1xuICAgICAgaWYgKGN1dCkge1xuICAgICAgICBkaXNwbGF5LnZpZXcgPSBkaXNwbGF5LnZpZXcuc2xpY2UoY3V0LmluZGV4KTtcbiAgICAgICAgZGlzcGxheS52aWV3RnJvbSA9IGN1dC5saW5lTjtcbiAgICAgICAgZGlzcGxheS52aWV3VG8gKz0gbGVuZGlmZjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc2V0VmlldyhjbSk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0byA+PSBkaXNwbGF5LnZpZXdUbykgeyAvLyBCb3R0b20gb3ZlcmxhcFxuICAgICAgdmFyIGN1dCA9IHZpZXdDdXR0aW5nUG9pbnQoY20sIGZyb20sIGZyb20sIC0xKTtcbiAgICAgIGlmIChjdXQpIHtcbiAgICAgICAgZGlzcGxheS52aWV3ID0gZGlzcGxheS52aWV3LnNsaWNlKDAsIGN1dC5pbmRleCk7XG4gICAgICAgIGRpc3BsYXkudmlld1RvID0gY3V0LmxpbmVOO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzZXRWaWV3KGNtKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgeyAvLyBHYXAgaW4gdGhlIG1pZGRsZVxuICAgICAgdmFyIGN1dFRvcCA9IHZpZXdDdXR0aW5nUG9pbnQoY20sIGZyb20sIGZyb20sIC0xKTtcbiAgICAgIHZhciBjdXRCb3QgPSB2aWV3Q3V0dGluZ1BvaW50KGNtLCB0bywgdG8gKyBsZW5kaWZmLCAxKTtcbiAgICAgIGlmIChjdXRUb3AgJiYgY3V0Qm90KSB7XG4gICAgICAgIGRpc3BsYXkudmlldyA9IGRpc3BsYXkudmlldy5zbGljZSgwLCBjdXRUb3AuaW5kZXgpXG4gICAgICAgICAgLmNvbmNhdChidWlsZFZpZXdBcnJheShjbSwgY3V0VG9wLmxpbmVOLCBjdXRCb3QubGluZU4pKVxuICAgICAgICAgIC5jb25jYXQoZGlzcGxheS52aWV3LnNsaWNlKGN1dEJvdC5pbmRleCkpO1xuICAgICAgICBkaXNwbGF5LnZpZXdUbyArPSBsZW5kaWZmO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzZXRWaWV3KGNtKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgZXh0ID0gZGlzcGxheS5leHRlcm5hbE1lYXN1cmVkO1xuICAgIGlmIChleHQpIHtcbiAgICAgIGlmICh0byA8IGV4dC5saW5lTilcbiAgICAgICAgZXh0LmxpbmVOICs9IGxlbmRpZmY7XG4gICAgICBlbHNlIGlmIChmcm9tIDwgZXh0LmxpbmVOICsgZXh0LnNpemUpXG4gICAgICAgIGRpc3BsYXkuZXh0ZXJuYWxNZWFzdXJlZCA9IG51bGw7XG4gICAgfVxuICB9XG5cbiAgLy8gUmVnaXN0ZXIgYSBjaGFuZ2UgdG8gYSBzaW5nbGUgbGluZS4gVHlwZSBtdXN0IGJlIG9uZSBvZiBcInRleHRcIixcbiAgLy8gXCJndXR0ZXJcIiwgXCJjbGFzc1wiLCBcIndpZGdldFwiXG4gIGZ1bmN0aW9uIHJlZ0xpbmVDaGFuZ2UoY20sIGxpbmUsIHR5cGUpIHtcbiAgICBjbS5jdXJPcC52aWV3Q2hhbmdlZCA9IHRydWU7XG4gICAgdmFyIGRpc3BsYXkgPSBjbS5kaXNwbGF5LCBleHQgPSBjbS5kaXNwbGF5LmV4dGVybmFsTWVhc3VyZWQ7XG4gICAgaWYgKGV4dCAmJiBsaW5lID49IGV4dC5saW5lTiAmJiBsaW5lIDwgZXh0LmxpbmVOICsgZXh0LnNpemUpXG4gICAgICBkaXNwbGF5LmV4dGVybmFsTWVhc3VyZWQgPSBudWxsO1xuXG4gICAgaWYgKGxpbmUgPCBkaXNwbGF5LnZpZXdGcm9tIHx8IGxpbmUgPj0gZGlzcGxheS52aWV3VG8pIHJldHVybjtcbiAgICB2YXIgbGluZVZpZXcgPSBkaXNwbGF5LnZpZXdbZmluZFZpZXdJbmRleChjbSwgbGluZSldO1xuICAgIGlmIChsaW5lVmlldy5ub2RlID09IG51bGwpIHJldHVybjtcbiAgICB2YXIgYXJyID0gbGluZVZpZXcuY2hhbmdlcyB8fCAobGluZVZpZXcuY2hhbmdlcyA9IFtdKTtcbiAgICBpZiAoaW5kZXhPZihhcnIsIHR5cGUpID09IC0xKSBhcnIucHVzaCh0eXBlKTtcbiAgfVxuXG4gIC8vIENsZWFyIHRoZSB2aWV3LlxuICBmdW5jdGlvbiByZXNldFZpZXcoY20pIHtcbiAgICBjbS5kaXNwbGF5LnZpZXdGcm9tID0gY20uZGlzcGxheS52aWV3VG8gPSBjbS5kb2MuZmlyc3Q7XG4gICAgY20uZGlzcGxheS52aWV3ID0gW107XG4gICAgY20uZGlzcGxheS52aWV3T2Zmc2V0ID0gMDtcbiAgfVxuXG4gIC8vIEZpbmQgdGhlIHZpZXcgZWxlbWVudCBjb3JyZXNwb25kaW5nIHRvIGEgZ2l2ZW4gbGluZS4gUmV0dXJuIG51bGxcbiAgLy8gd2hlbiB0aGUgbGluZSBpc24ndCB2aXNpYmxlLlxuICBmdW5jdGlvbiBmaW5kVmlld0luZGV4KGNtLCBuKSB7XG4gICAgaWYgKG4gPj0gY20uZGlzcGxheS52aWV3VG8pIHJldHVybiBudWxsO1xuICAgIG4gLT0gY20uZGlzcGxheS52aWV3RnJvbTtcbiAgICBpZiAobiA8IDApIHJldHVybiBudWxsO1xuICAgIHZhciB2aWV3ID0gY20uZGlzcGxheS52aWV3O1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmlldy5sZW5ndGg7IGkrKykge1xuICAgICAgbiAtPSB2aWV3W2ldLnNpemU7XG4gICAgICBpZiAobiA8IDApIHJldHVybiBpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHZpZXdDdXR0aW5nUG9pbnQoY20sIG9sZE4sIG5ld04sIGRpcikge1xuICAgIHZhciBpbmRleCA9IGZpbmRWaWV3SW5kZXgoY20sIG9sZE4pLCBkaWZmLCB2aWV3ID0gY20uZGlzcGxheS52aWV3O1xuICAgIGlmICghc2F3Q29sbGFwc2VkU3BhbnMgfHwgbmV3TiA9PSBjbS5kb2MuZmlyc3QgKyBjbS5kb2Muc2l6ZSlcbiAgICAgIHJldHVybiB7aW5kZXg6IGluZGV4LCBsaW5lTjogbmV3Tn07XG4gICAgZm9yICh2YXIgaSA9IDAsIG4gPSBjbS5kaXNwbGF5LnZpZXdGcm9tOyBpIDwgaW5kZXg7IGkrKylcbiAgICAgIG4gKz0gdmlld1tpXS5zaXplO1xuICAgIGlmIChuICE9IG9sZE4pIHtcbiAgICAgIGlmIChkaXIgPiAwKSB7XG4gICAgICAgIGlmIChpbmRleCA9PSB2aWV3Lmxlbmd0aCAtIDEpIHJldHVybiBudWxsO1xuICAgICAgICBkaWZmID0gKG4gKyB2aWV3W2luZGV4XS5zaXplKSAtIG9sZE47XG4gICAgICAgIGluZGV4Kys7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkaWZmID0gbiAtIG9sZE47XG4gICAgICB9XG4gICAgICBvbGROICs9IGRpZmY7IG5ld04gKz0gZGlmZjtcbiAgICB9XG4gICAgd2hpbGUgKHZpc3VhbExpbmVObyhjbS5kb2MsIG5ld04pICE9IG5ld04pIHtcbiAgICAgIGlmIChpbmRleCA9PSAoZGlyIDwgMCA/IDAgOiB2aWV3Lmxlbmd0aCAtIDEpKSByZXR1cm4gbnVsbDtcbiAgICAgIG5ld04gKz0gZGlyICogdmlld1tpbmRleCAtIChkaXIgPCAwID8gMSA6IDApXS5zaXplO1xuICAgICAgaW5kZXggKz0gZGlyO1xuICAgIH1cbiAgICByZXR1cm4ge2luZGV4OiBpbmRleCwgbGluZU46IG5ld059O1xuICB9XG5cbiAgLy8gRm9yY2UgdGhlIHZpZXcgdG8gY292ZXIgYSBnaXZlbiByYW5nZSwgYWRkaW5nIGVtcHR5IHZpZXcgZWxlbWVudFxuICAvLyBvciBjbGlwcGluZyBvZmYgZXhpc3Rpbmcgb25lcyBhcyBuZWVkZWQuXG4gIGZ1bmN0aW9uIGFkanVzdFZpZXcoY20sIGZyb20sIHRvKSB7XG4gICAgdmFyIGRpc3BsYXkgPSBjbS5kaXNwbGF5LCB2aWV3ID0gZGlzcGxheS52aWV3O1xuICAgIGlmICh2aWV3Lmxlbmd0aCA9PSAwIHx8IGZyb20gPj0gZGlzcGxheS52aWV3VG8gfHwgdG8gPD0gZGlzcGxheS52aWV3RnJvbSkge1xuICAgICAgZGlzcGxheS52aWV3ID0gYnVpbGRWaWV3QXJyYXkoY20sIGZyb20sIHRvKTtcbiAgICAgIGRpc3BsYXkudmlld0Zyb20gPSBmcm9tO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoZGlzcGxheS52aWV3RnJvbSA+IGZyb20pXG4gICAgICAgIGRpc3BsYXkudmlldyA9IGJ1aWxkVmlld0FycmF5KGNtLCBmcm9tLCBkaXNwbGF5LnZpZXdGcm9tKS5jb25jYXQoZGlzcGxheS52aWV3KTtcbiAgICAgIGVsc2UgaWYgKGRpc3BsYXkudmlld0Zyb20gPCBmcm9tKVxuICAgICAgICBkaXNwbGF5LnZpZXcgPSBkaXNwbGF5LnZpZXcuc2xpY2UoZmluZFZpZXdJbmRleChjbSwgZnJvbSkpO1xuICAgICAgZGlzcGxheS52aWV3RnJvbSA9IGZyb207XG4gICAgICBpZiAoZGlzcGxheS52aWV3VG8gPCB0bylcbiAgICAgICAgZGlzcGxheS52aWV3ID0gZGlzcGxheS52aWV3LmNvbmNhdChidWlsZFZpZXdBcnJheShjbSwgZGlzcGxheS52aWV3VG8sIHRvKSk7XG4gICAgICBlbHNlIGlmIChkaXNwbGF5LnZpZXdUbyA+IHRvKVxuICAgICAgICBkaXNwbGF5LnZpZXcgPSBkaXNwbGF5LnZpZXcuc2xpY2UoMCwgZmluZFZpZXdJbmRleChjbSwgdG8pKTtcbiAgICB9XG4gICAgZGlzcGxheS52aWV3VG8gPSB0bztcbiAgfVxuXG4gIC8vIENvdW50IHRoZSBudW1iZXIgb2YgbGluZXMgaW4gdGhlIHZpZXcgd2hvc2UgRE9NIHJlcHJlc2VudGF0aW9uIGlzXG4gIC8vIG91dCBvZiBkYXRlIChvciBub25leGlzdGVudCkuXG4gIGZ1bmN0aW9uIGNvdW50RGlydHlWaWV3KGNtKSB7XG4gICAgdmFyIHZpZXcgPSBjbS5kaXNwbGF5LnZpZXcsIGRpcnR5ID0gMDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZpZXcubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBsaW5lVmlldyA9IHZpZXdbaV07XG4gICAgICBpZiAoIWxpbmVWaWV3LmhpZGRlbiAmJiAoIWxpbmVWaWV3Lm5vZGUgfHwgbGluZVZpZXcuY2hhbmdlcykpICsrZGlydHk7XG4gICAgfVxuICAgIHJldHVybiBkaXJ0eTtcbiAgfVxuXG4gIC8vIEVWRU5UIEhBTkRMRVJTXG5cbiAgLy8gQXR0YWNoIHRoZSBuZWNlc3NhcnkgZXZlbnQgaGFuZGxlcnMgd2hlbiBpbml0aWFsaXppbmcgdGhlIGVkaXRvclxuICBmdW5jdGlvbiByZWdpc3RlckV2ZW50SGFuZGxlcnMoY20pIHtcbiAgICB2YXIgZCA9IGNtLmRpc3BsYXk7XG4gICAgb24oZC5zY3JvbGxlciwgXCJtb3VzZWRvd25cIiwgb3BlcmF0aW9uKGNtLCBvbk1vdXNlRG93bikpO1xuICAgIC8vIE9sZGVyIElFJ3Mgd2lsbCBub3QgZmlyZSBhIHNlY29uZCBtb3VzZWRvd24gZm9yIGEgZG91YmxlIGNsaWNrXG4gICAgaWYgKGllICYmIGllX3ZlcnNpb24gPCAxMSlcbiAgICAgIG9uKGQuc2Nyb2xsZXIsIFwiZGJsY2xpY2tcIiwgb3BlcmF0aW9uKGNtLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGlmIChzaWduYWxET01FdmVudChjbSwgZSkpIHJldHVybjtcbiAgICAgICAgdmFyIHBvcyA9IHBvc0Zyb21Nb3VzZShjbSwgZSk7XG4gICAgICAgIGlmICghcG9zIHx8IGNsaWNrSW5HdXR0ZXIoY20sIGUpIHx8IGV2ZW50SW5XaWRnZXQoY20uZGlzcGxheSwgZSkpIHJldHVybjtcbiAgICAgICAgZV9wcmV2ZW50RGVmYXVsdChlKTtcbiAgICAgICAgdmFyIHdvcmQgPSBjbS5maW5kV29yZEF0KHBvcyk7XG4gICAgICAgIGV4dGVuZFNlbGVjdGlvbihjbS5kb2MsIHdvcmQuYW5jaG9yLCB3b3JkLmhlYWQpO1xuICAgICAgfSkpO1xuICAgIGVsc2VcbiAgICAgIG9uKGQuc2Nyb2xsZXIsIFwiZGJsY2xpY2tcIiwgZnVuY3Rpb24oZSkgeyBzaWduYWxET01FdmVudChjbSwgZSkgfHwgZV9wcmV2ZW50RGVmYXVsdChlKTsgfSk7XG4gICAgLy8gU29tZSBicm93c2VycyBmaXJlIGNvbnRleHRtZW51ICphZnRlciogb3BlbmluZyB0aGUgbWVudSwgYXRcbiAgICAvLyB3aGljaCBwb2ludCB3ZSBjYW4ndCBtZXNzIHdpdGggaXQgYW55bW9yZS4gQ29udGV4dCBtZW51IGlzXG4gICAgLy8gaGFuZGxlZCBpbiBvbk1vdXNlRG93biBmb3IgdGhlc2UgYnJvd3NlcnMuXG4gICAgaWYgKCFjYXB0dXJlUmlnaHRDbGljaykgb24oZC5zY3JvbGxlciwgXCJjb250ZXh0bWVudVwiLCBmdW5jdGlvbihlKSB7b25Db250ZXh0TWVudShjbSwgZSk7fSk7XG5cbiAgICAvLyBVc2VkIHRvIHN1cHByZXNzIG1vdXNlIGV2ZW50IGhhbmRsaW5nIHdoZW4gYSB0b3VjaCBoYXBwZW5zXG4gICAgdmFyIHRvdWNoRmluaXNoZWQsIHByZXZUb3VjaCA9IHtlbmQ6IDB9O1xuICAgIGZ1bmN0aW9uIGZpbmlzaFRvdWNoKCkge1xuICAgICAgaWYgKGQuYWN0aXZlVG91Y2gpIHtcbiAgICAgICAgdG91Y2hGaW5pc2hlZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7ZC5hY3RpdmVUb3VjaCA9IG51bGw7fSwgMTAwMCk7XG4gICAgICAgIHByZXZUb3VjaCA9IGQuYWN0aXZlVG91Y2g7XG4gICAgICAgIHByZXZUb3VjaC5lbmQgPSArbmV3IERhdGU7XG4gICAgICB9XG4gICAgfTtcbiAgICBmdW5jdGlvbiBpc01vdXNlTGlrZVRvdWNoRXZlbnQoZSkge1xuICAgICAgaWYgKGUudG91Y2hlcy5sZW5ndGggIT0gMSkgcmV0dXJuIGZhbHNlO1xuICAgICAgdmFyIHRvdWNoID0gZS50b3VjaGVzWzBdO1xuICAgICAgcmV0dXJuIHRvdWNoLnJhZGl1c1ggPD0gMSAmJiB0b3VjaC5yYWRpdXNZIDw9IDE7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGZhckF3YXkodG91Y2gsIG90aGVyKSB7XG4gICAgICBpZiAob3RoZXIubGVmdCA9PSBudWxsKSByZXR1cm4gdHJ1ZTtcbiAgICAgIHZhciBkeCA9IG90aGVyLmxlZnQgLSB0b3VjaC5sZWZ0LCBkeSA9IG90aGVyLnRvcCAtIHRvdWNoLnRvcDtcbiAgICAgIHJldHVybiBkeCAqIGR4ICsgZHkgKiBkeSA+IDIwICogMjA7XG4gICAgfVxuICAgIG9uKGQuc2Nyb2xsZXIsIFwidG91Y2hzdGFydFwiLCBmdW5jdGlvbihlKSB7XG4gICAgICBpZiAoIXNpZ25hbERPTUV2ZW50KGNtLCBlKSAmJiAhaXNNb3VzZUxpa2VUb3VjaEV2ZW50KGUpKSB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0b3VjaEZpbmlzaGVkKTtcbiAgICAgICAgdmFyIG5vdyA9ICtuZXcgRGF0ZTtcbiAgICAgICAgZC5hY3RpdmVUb3VjaCA9IHtzdGFydDogbm93LCBtb3ZlZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgcHJldjogbm93IC0gcHJldlRvdWNoLmVuZCA8PSAzMDAgPyBwcmV2VG91Y2ggOiBudWxsfTtcbiAgICAgICAgaWYgKGUudG91Y2hlcy5sZW5ndGggPT0gMSkge1xuICAgICAgICAgIGQuYWN0aXZlVG91Y2gubGVmdCA9IGUudG91Y2hlc1swXS5wYWdlWDtcbiAgICAgICAgICBkLmFjdGl2ZVRvdWNoLnRvcCA9IGUudG91Y2hlc1swXS5wYWdlWTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICAgIG9uKGQuc2Nyb2xsZXIsIFwidG91Y2htb3ZlXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKGQuYWN0aXZlVG91Y2gpIGQuYWN0aXZlVG91Y2gubW92ZWQgPSB0cnVlO1xuICAgIH0pO1xuICAgIG9uKGQuc2Nyb2xsZXIsIFwidG91Y2hlbmRcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgdmFyIHRvdWNoID0gZC5hY3RpdmVUb3VjaDtcbiAgICAgIGlmICh0b3VjaCAmJiAhZXZlbnRJbldpZGdldChkLCBlKSAmJiB0b3VjaC5sZWZ0ICE9IG51bGwgJiZcbiAgICAgICAgICAhdG91Y2gubW92ZWQgJiYgbmV3IERhdGUgLSB0b3VjaC5zdGFydCA8IDMwMCkge1xuICAgICAgICB2YXIgcG9zID0gY20uY29vcmRzQ2hhcihkLmFjdGl2ZVRvdWNoLCBcInBhZ2VcIiksIHJhbmdlO1xuICAgICAgICBpZiAoIXRvdWNoLnByZXYgfHwgZmFyQXdheSh0b3VjaCwgdG91Y2gucHJldikpIC8vIFNpbmdsZSB0YXBcbiAgICAgICAgICByYW5nZSA9IG5ldyBSYW5nZShwb3MsIHBvcyk7XG4gICAgICAgIGVsc2UgaWYgKCF0b3VjaC5wcmV2LnByZXYgfHwgZmFyQXdheSh0b3VjaCwgdG91Y2gucHJldi5wcmV2KSkgLy8gRG91YmxlIHRhcFxuICAgICAgICAgIHJhbmdlID0gY20uZmluZFdvcmRBdChwb3MpO1xuICAgICAgICBlbHNlIC8vIFRyaXBsZSB0YXBcbiAgICAgICAgICByYW5nZSA9IG5ldyBSYW5nZShQb3MocG9zLmxpbmUsIDApLCBjbGlwUG9zKGNtLmRvYywgUG9zKHBvcy5saW5lICsgMSwgMCkpKTtcbiAgICAgICAgY20uc2V0U2VsZWN0aW9uKHJhbmdlLmFuY2hvciwgcmFuZ2UuaGVhZCk7XG4gICAgICAgIGNtLmZvY3VzKCk7XG4gICAgICAgIGVfcHJldmVudERlZmF1bHQoZSk7XG4gICAgICB9XG4gICAgICBmaW5pc2hUb3VjaCgpO1xuICAgIH0pO1xuICAgIG9uKGQuc2Nyb2xsZXIsIFwidG91Y2hjYW5jZWxcIiwgZmluaXNoVG91Y2gpO1xuXG4gICAgLy8gU3luYyBzY3JvbGxpbmcgYmV0d2VlbiBmYWtlIHNjcm9sbGJhcnMgYW5kIHJlYWwgc2Nyb2xsYWJsZVxuICAgIC8vIGFyZWEsIGVuc3VyZSB2aWV3cG9ydCBpcyB1cGRhdGVkIHdoZW4gc2Nyb2xsaW5nLlxuICAgIG9uKGQuc2Nyb2xsZXIsIFwic2Nyb2xsXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKGQuc2Nyb2xsZXIuY2xpZW50SGVpZ2h0KSB7XG4gICAgICAgIHNldFNjcm9sbFRvcChjbSwgZC5zY3JvbGxlci5zY3JvbGxUb3ApO1xuICAgICAgICBzZXRTY3JvbGxMZWZ0KGNtLCBkLnNjcm9sbGVyLnNjcm9sbExlZnQsIHRydWUpO1xuICAgICAgICBzaWduYWwoY20sIFwic2Nyb2xsXCIsIGNtKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIExpc3RlbiB0byB3aGVlbCBldmVudHMgaW4gb3JkZXIgdG8gdHJ5IGFuZCB1cGRhdGUgdGhlIHZpZXdwb3J0IG9uIHRpbWUuXG4gICAgb24oZC5zY3JvbGxlciwgXCJtb3VzZXdoZWVsXCIsIGZ1bmN0aW9uKGUpe29uU2Nyb2xsV2hlZWwoY20sIGUpO30pO1xuICAgIG9uKGQuc2Nyb2xsZXIsIFwiRE9NTW91c2VTY3JvbGxcIiwgZnVuY3Rpb24oZSl7b25TY3JvbGxXaGVlbChjbSwgZSk7fSk7XG5cbiAgICAvLyBQcmV2ZW50IHdyYXBwZXIgZnJvbSBldmVyIHNjcm9sbGluZ1xuICAgIG9uKGQud3JhcHBlciwgXCJzY3JvbGxcIiwgZnVuY3Rpb24oKSB7IGQud3JhcHBlci5zY3JvbGxUb3AgPSBkLndyYXBwZXIuc2Nyb2xsTGVmdCA9IDA7IH0pO1xuXG4gICAgZC5kcmFnRnVuY3Rpb25zID0ge1xuICAgICAgZW50ZXI6IGZ1bmN0aW9uKGUpIHtpZiAoIXNpZ25hbERPTUV2ZW50KGNtLCBlKSkgZV9zdG9wKGUpO30sXG4gICAgICBvdmVyOiBmdW5jdGlvbihlKSB7aWYgKCFzaWduYWxET01FdmVudChjbSwgZSkpIHsgb25EcmFnT3ZlcihjbSwgZSk7IGVfc3RvcChlKTsgfX0sXG4gICAgICBzdGFydDogZnVuY3Rpb24oZSl7b25EcmFnU3RhcnQoY20sIGUpO30sXG4gICAgICBkcm9wOiBvcGVyYXRpb24oY20sIG9uRHJvcCksXG4gICAgICBsZWF2ZTogZnVuY3Rpb24oZSkge2lmICghc2lnbmFsRE9NRXZlbnQoY20sIGUpKSB7IGNsZWFyRHJhZ0N1cnNvcihjbSk7IH19XG4gICAgfTtcblxuICAgIHZhciBpbnAgPSBkLmlucHV0LmdldEZpZWxkKCk7XG4gICAgb24oaW5wLCBcImtleXVwXCIsIGZ1bmN0aW9uKGUpIHsgb25LZXlVcC5jYWxsKGNtLCBlKTsgfSk7XG4gICAgb24oaW5wLCBcImtleWRvd25cIiwgb3BlcmF0aW9uKGNtLCBvbktleURvd24pKTtcbiAgICBvbihpbnAsIFwia2V5cHJlc3NcIiwgb3BlcmF0aW9uKGNtLCBvbktleVByZXNzKSk7XG4gICAgb24oaW5wLCBcImZvY3VzXCIsIGJpbmQob25Gb2N1cywgY20pKTtcbiAgICBvbihpbnAsIFwiYmx1clwiLCBiaW5kKG9uQmx1ciwgY20pKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRyYWdEcm9wQ2hhbmdlZChjbSwgdmFsdWUsIG9sZCkge1xuICAgIHZhciB3YXNPbiA9IG9sZCAmJiBvbGQgIT0gQ29kZU1pcnJvci5Jbml0O1xuICAgIGlmICghdmFsdWUgIT0gIXdhc09uKSB7XG4gICAgICB2YXIgZnVuY3MgPSBjbS5kaXNwbGF5LmRyYWdGdW5jdGlvbnM7XG4gICAgICB2YXIgdG9nZ2xlID0gdmFsdWUgPyBvbiA6IG9mZjtcbiAgICAgIHRvZ2dsZShjbS5kaXNwbGF5LnNjcm9sbGVyLCBcImRyYWdzdGFydFwiLCBmdW5jcy5zdGFydCk7XG4gICAgICB0b2dnbGUoY20uZGlzcGxheS5zY3JvbGxlciwgXCJkcmFnZW50ZXJcIiwgZnVuY3MuZW50ZXIpO1xuICAgICAgdG9nZ2xlKGNtLmRpc3BsYXkuc2Nyb2xsZXIsIFwiZHJhZ292ZXJcIiwgZnVuY3Mub3Zlcik7XG4gICAgICB0b2dnbGUoY20uZGlzcGxheS5zY3JvbGxlciwgXCJkcmFnbGVhdmVcIiwgZnVuY3MubGVhdmUpO1xuICAgICAgdG9nZ2xlKGNtLmRpc3BsYXkuc2Nyb2xsZXIsIFwiZHJvcFwiLCBmdW5jcy5kcm9wKTtcbiAgICB9XG4gIH1cblxuICAvLyBDYWxsZWQgd2hlbiB0aGUgd2luZG93IHJlc2l6ZXNcbiAgZnVuY3Rpb24gb25SZXNpemUoY20pIHtcbiAgICB2YXIgZCA9IGNtLmRpc3BsYXk7XG4gICAgaWYgKGQubGFzdFdyYXBIZWlnaHQgPT0gZC53cmFwcGVyLmNsaWVudEhlaWdodCAmJiBkLmxhc3RXcmFwV2lkdGggPT0gZC53cmFwcGVyLmNsaWVudFdpZHRoKVxuICAgICAgcmV0dXJuO1xuICAgIC8vIE1pZ2h0IGJlIGEgdGV4dCBzY2FsaW5nIG9wZXJhdGlvbiwgY2xlYXIgc2l6ZSBjYWNoZXMuXG4gICAgZC5jYWNoZWRDaGFyV2lkdGggPSBkLmNhY2hlZFRleHRIZWlnaHQgPSBkLmNhY2hlZFBhZGRpbmdIID0gbnVsbDtcbiAgICBkLnNjcm9sbGJhcnNDbGlwcGVkID0gZmFsc2U7XG4gICAgY20uc2V0U2l6ZSgpO1xuICB9XG5cbiAgLy8gTU9VU0UgRVZFTlRTXG5cbiAgLy8gUmV0dXJuIHRydWUgd2hlbiB0aGUgZ2l2ZW4gbW91c2UgZXZlbnQgaGFwcGVuZWQgaW4gYSB3aWRnZXRcbiAgZnVuY3Rpb24gZXZlbnRJbldpZGdldChkaXNwbGF5LCBlKSB7XG4gICAgZm9yICh2YXIgbiA9IGVfdGFyZ2V0KGUpOyBuICE9IGRpc3BsYXkud3JhcHBlcjsgbiA9IG4ucGFyZW50Tm9kZSkge1xuICAgICAgaWYgKCFuIHx8IChuLm5vZGVUeXBlID09IDEgJiYgbi5nZXRBdHRyaWJ1dGUoXCJjbS1pZ25vcmUtZXZlbnRzXCIpID09IFwidHJ1ZVwiKSB8fFxuICAgICAgICAgIChuLnBhcmVudE5vZGUgPT0gZGlzcGxheS5zaXplciAmJiBuICE9IGRpc3BsYXkubW92ZXIpKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICAvLyBHaXZlbiBhIG1vdXNlIGV2ZW50LCBmaW5kIHRoZSBjb3JyZXNwb25kaW5nIHBvc2l0aW9uLiBJZiBsaWJlcmFsXG4gIC8vIGlzIGZhbHNlLCBpdCBjaGVja3Mgd2hldGhlciBhIGd1dHRlciBvciBzY3JvbGxiYXIgd2FzIGNsaWNrZWQsXG4gIC8vIGFuZCByZXR1cm5zIG51bGwgaWYgaXQgd2FzLiBmb3JSZWN0IGlzIHVzZWQgYnkgcmVjdGFuZ3VsYXJcbiAgLy8gc2VsZWN0aW9ucywgYW5kIHRyaWVzIHRvIGVzdGltYXRlIGEgY2hhcmFjdGVyIHBvc2l0aW9uIGV2ZW4gZm9yXG4gIC8vIGNvb3JkaW5hdGVzIGJleW9uZCB0aGUgcmlnaHQgb2YgdGhlIHRleHQuXG4gIGZ1bmN0aW9uIHBvc0Zyb21Nb3VzZShjbSwgZSwgbGliZXJhbCwgZm9yUmVjdCkge1xuICAgIHZhciBkaXNwbGF5ID0gY20uZGlzcGxheTtcbiAgICBpZiAoIWxpYmVyYWwgJiYgZV90YXJnZXQoZSkuZ2V0QXR0cmlidXRlKFwiY20tbm90LWNvbnRlbnRcIikgPT0gXCJ0cnVlXCIpIHJldHVybiBudWxsO1xuXG4gICAgdmFyIHgsIHksIHNwYWNlID0gZGlzcGxheS5saW5lU3BhY2UuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgLy8gRmFpbHMgdW5wcmVkaWN0YWJseSBvbiBJRVs2N10gd2hlbiBtb3VzZSBpcyBkcmFnZ2VkIGFyb3VuZCBxdWlja2x5LlxuICAgIHRyeSB7IHggPSBlLmNsaWVudFggLSBzcGFjZS5sZWZ0OyB5ID0gZS5jbGllbnRZIC0gc3BhY2UudG9wOyB9XG4gICAgY2F0Y2ggKGUpIHsgcmV0dXJuIG51bGw7IH1cbiAgICB2YXIgY29vcmRzID0gY29vcmRzQ2hhcihjbSwgeCwgeSksIGxpbmU7XG4gICAgaWYgKGZvclJlY3QgJiYgY29vcmRzLnhSZWwgPT0gMSAmJiAobGluZSA9IGdldExpbmUoY20uZG9jLCBjb29yZHMubGluZSkudGV4dCkubGVuZ3RoID09IGNvb3Jkcy5jaCkge1xuICAgICAgdmFyIGNvbERpZmYgPSBjb3VudENvbHVtbihsaW5lLCBsaW5lLmxlbmd0aCwgY20ub3B0aW9ucy50YWJTaXplKSAtIGxpbmUubGVuZ3RoO1xuICAgICAgY29vcmRzID0gUG9zKGNvb3Jkcy5saW5lLCBNYXRoLm1heCgwLCBNYXRoLnJvdW5kKCh4IC0gcGFkZGluZ0goY20uZGlzcGxheSkubGVmdCkgLyBjaGFyV2lkdGgoY20uZGlzcGxheSkpIC0gY29sRGlmZikpO1xuICAgIH1cbiAgICByZXR1cm4gY29vcmRzO1xuICB9XG5cbiAgLy8gQSBtb3VzZSBkb3duIGNhbiBiZSBhIHNpbmdsZSBjbGljaywgZG91YmxlIGNsaWNrLCB0cmlwbGUgY2xpY2ssXG4gIC8vIHN0YXJ0IG9mIHNlbGVjdGlvbiBkcmFnLCBzdGFydCBvZiB0ZXh0IGRyYWcsIG5ldyBjdXJzb3JcbiAgLy8gKGN0cmwtY2xpY2spLCByZWN0YW5nbGUgZHJhZyAoYWx0LWRyYWcpLCBvciB4d2luXG4gIC8vIG1pZGRsZS1jbGljay1wYXN0ZS4gT3IgaXQgbWlnaHQgYmUgYSBjbGljayBvbiBzb21ldGhpbmcgd2Ugc2hvdWxkXG4gIC8vIG5vdCBpbnRlcmZlcmUgd2l0aCwgc3VjaCBhcyBhIHNjcm9sbGJhciBvciB3aWRnZXQuXG4gIGZ1bmN0aW9uIG9uTW91c2VEb3duKGUpIHtcbiAgICB2YXIgY20gPSB0aGlzLCBkaXNwbGF5ID0gY20uZGlzcGxheTtcbiAgICBpZiAoc2lnbmFsRE9NRXZlbnQoY20sIGUpIHx8IGRpc3BsYXkuYWN0aXZlVG91Y2ggJiYgZGlzcGxheS5pbnB1dC5zdXBwb3J0c1RvdWNoKCkpIHJldHVybjtcbiAgICBkaXNwbGF5LnNoaWZ0ID0gZS5zaGlmdEtleTtcblxuICAgIGlmIChldmVudEluV2lkZ2V0KGRpc3BsYXksIGUpKSB7XG4gICAgICBpZiAoIXdlYmtpdCkge1xuICAgICAgICAvLyBCcmllZmx5IHR1cm4gb2ZmIGRyYWdnYWJpbGl0eSwgdG8gYWxsb3cgd2lkZ2V0cyB0byBkb1xuICAgICAgICAvLyBub3JtYWwgZHJhZ2dpbmcgdGhpbmdzLlxuICAgICAgICBkaXNwbGF5LnNjcm9sbGVyLmRyYWdnYWJsZSA9IGZhbHNlO1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZGlzcGxheS5zY3JvbGxlci5kcmFnZ2FibGUgPSB0cnVlO30sIDEwMCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChjbGlja0luR3V0dGVyKGNtLCBlKSkgcmV0dXJuO1xuICAgIHZhciBzdGFydCA9IHBvc0Zyb21Nb3VzZShjbSwgZSk7XG4gICAgd2luZG93LmZvY3VzKCk7XG5cbiAgICBzd2l0Y2ggKGVfYnV0dG9uKGUpKSB7XG4gICAgY2FzZSAxOlxuICAgICAgLy8gIzMyNjE6IG1ha2Ugc3VyZSwgdGhhdCB3ZSdyZSBub3Qgc3RhcnRpbmcgYSBzZWNvbmQgc2VsZWN0aW9uXG4gICAgICBpZiAoY20uc3RhdGUuc2VsZWN0aW5nVGV4dClcbiAgICAgICAgY20uc3RhdGUuc2VsZWN0aW5nVGV4dChlKTtcbiAgICAgIGVsc2UgaWYgKHN0YXJ0KVxuICAgICAgICBsZWZ0QnV0dG9uRG93bihjbSwgZSwgc3RhcnQpO1xuICAgICAgZWxzZSBpZiAoZV90YXJnZXQoZSkgPT0gZGlzcGxheS5zY3JvbGxlcilcbiAgICAgICAgZV9wcmV2ZW50RGVmYXVsdChlKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgMjpcbiAgICAgIGlmICh3ZWJraXQpIGNtLnN0YXRlLmxhc3RNaWRkbGVEb3duID0gK25ldyBEYXRlO1xuICAgICAgaWYgKHN0YXJ0KSBleHRlbmRTZWxlY3Rpb24oY20uZG9jLCBzdGFydCk7XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge2Rpc3BsYXkuaW5wdXQuZm9jdXMoKTt9LCAyMCk7XG4gICAgICBlX3ByZXZlbnREZWZhdWx0KGUpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAzOlxuICAgICAgaWYgKGNhcHR1cmVSaWdodENsaWNrKSBvbkNvbnRleHRNZW51KGNtLCBlKTtcbiAgICAgIGVsc2UgZGVsYXlCbHVyRXZlbnQoY20pO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgdmFyIGxhc3RDbGljaywgbGFzdERvdWJsZUNsaWNrO1xuICBmdW5jdGlvbiBsZWZ0QnV0dG9uRG93bihjbSwgZSwgc3RhcnQpIHtcbiAgICBpZiAoaWUpIHNldFRpbWVvdXQoYmluZChlbnN1cmVGb2N1cywgY20pLCAwKTtcbiAgICBlbHNlIGNtLmN1ck9wLmZvY3VzID0gYWN0aXZlRWx0KCk7XG5cbiAgICB2YXIgbm93ID0gK25ldyBEYXRlLCB0eXBlO1xuICAgIGlmIChsYXN0RG91YmxlQ2xpY2sgJiYgbGFzdERvdWJsZUNsaWNrLnRpbWUgPiBub3cgLSA0MDAgJiYgY21wKGxhc3REb3VibGVDbGljay5wb3MsIHN0YXJ0KSA9PSAwKSB7XG4gICAgICB0eXBlID0gXCJ0cmlwbGVcIjtcbiAgICB9IGVsc2UgaWYgKGxhc3RDbGljayAmJiBsYXN0Q2xpY2sudGltZSA+IG5vdyAtIDQwMCAmJiBjbXAobGFzdENsaWNrLnBvcywgc3RhcnQpID09IDApIHtcbiAgICAgIHR5cGUgPSBcImRvdWJsZVwiO1xuICAgICAgbGFzdERvdWJsZUNsaWNrID0ge3RpbWU6IG5vdywgcG9zOiBzdGFydH07XG4gICAgfSBlbHNlIHtcbiAgICAgIHR5cGUgPSBcInNpbmdsZVwiO1xuICAgICAgbGFzdENsaWNrID0ge3RpbWU6IG5vdywgcG9zOiBzdGFydH07XG4gICAgfVxuXG4gICAgdmFyIHNlbCA9IGNtLmRvYy5zZWwsIG1vZGlmaWVyID0gbWFjID8gZS5tZXRhS2V5IDogZS5jdHJsS2V5LCBjb250YWluZWQ7XG4gICAgaWYgKGNtLm9wdGlvbnMuZHJhZ0Ryb3AgJiYgZHJhZ0FuZERyb3AgJiYgIWNtLmlzUmVhZE9ubHkoKSAmJlxuICAgICAgICB0eXBlID09IFwic2luZ2xlXCIgJiYgKGNvbnRhaW5lZCA9IHNlbC5jb250YWlucyhzdGFydCkpID4gLTEgJiZcbiAgICAgICAgKGNtcCgoY29udGFpbmVkID0gc2VsLnJhbmdlc1tjb250YWluZWRdKS5mcm9tKCksIHN0YXJ0KSA8IDAgfHwgc3RhcnQueFJlbCA+IDApICYmXG4gICAgICAgIChjbXAoY29udGFpbmVkLnRvKCksIHN0YXJ0KSA+IDAgfHwgc3RhcnQueFJlbCA8IDApKVxuICAgICAgbGVmdEJ1dHRvblN0YXJ0RHJhZyhjbSwgZSwgc3RhcnQsIG1vZGlmaWVyKTtcbiAgICBlbHNlXG4gICAgICBsZWZ0QnV0dG9uU2VsZWN0KGNtLCBlLCBzdGFydCwgdHlwZSwgbW9kaWZpZXIpO1xuICB9XG5cbiAgLy8gU3RhcnQgYSB0ZXh0IGRyYWcuIFdoZW4gaXQgZW5kcywgc2VlIGlmIGFueSBkcmFnZ2luZyBhY3R1YWxseVxuICAvLyBoYXBwZW4sIGFuZCB0cmVhdCBhcyBhIGNsaWNrIGlmIGl0IGRpZG4ndC5cbiAgZnVuY3Rpb24gbGVmdEJ1dHRvblN0YXJ0RHJhZyhjbSwgZSwgc3RhcnQsIG1vZGlmaWVyKSB7XG4gICAgdmFyIGRpc3BsYXkgPSBjbS5kaXNwbGF5LCBzdGFydFRpbWUgPSArbmV3IERhdGU7XG4gICAgdmFyIGRyYWdFbmQgPSBvcGVyYXRpb24oY20sIGZ1bmN0aW9uKGUyKSB7XG4gICAgICBpZiAod2Via2l0KSBkaXNwbGF5LnNjcm9sbGVyLmRyYWdnYWJsZSA9IGZhbHNlO1xuICAgICAgY20uc3RhdGUuZHJhZ2dpbmdUZXh0ID0gZmFsc2U7XG4gICAgICBvZmYoZG9jdW1lbnQsIFwibW91c2V1cFwiLCBkcmFnRW5kKTtcbiAgICAgIG9mZihkaXNwbGF5LnNjcm9sbGVyLCBcImRyb3BcIiwgZHJhZ0VuZCk7XG4gICAgICBpZiAoTWF0aC5hYnMoZS5jbGllbnRYIC0gZTIuY2xpZW50WCkgKyBNYXRoLmFicyhlLmNsaWVudFkgLSBlMi5jbGllbnRZKSA8IDEwKSB7XG4gICAgICAgIGVfcHJldmVudERlZmF1bHQoZTIpO1xuICAgICAgICBpZiAoIW1vZGlmaWVyICYmICtuZXcgRGF0ZSAtIDIwMCA8IHN0YXJ0VGltZSlcbiAgICAgICAgICBleHRlbmRTZWxlY3Rpb24oY20uZG9jLCBzdGFydCk7XG4gICAgICAgIC8vIFdvcmsgYXJvdW5kIHVuZXhwbGFpbmFibGUgZm9jdXMgcHJvYmxlbSBpbiBJRTkgKCMyMTI3KSBhbmQgQ2hyb21lICgjMzA4MSlcbiAgICAgICAgaWYgKHdlYmtpdCB8fCBpZSAmJiBpZV92ZXJzaW9uID09IDkpXG4gICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtkb2N1bWVudC5ib2R5LmZvY3VzKCk7IGRpc3BsYXkuaW5wdXQuZm9jdXMoKTt9LCAyMCk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICBkaXNwbGF5LmlucHV0LmZvY3VzKCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgLy8gTGV0IHRoZSBkcmFnIGhhbmRsZXIgaGFuZGxlIHRoaXMuXG4gICAgaWYgKHdlYmtpdCkgZGlzcGxheS5zY3JvbGxlci5kcmFnZ2FibGUgPSB0cnVlO1xuICAgIGNtLnN0YXRlLmRyYWdnaW5nVGV4dCA9IGRyYWdFbmQ7XG4gICAgLy8gSUUncyBhcHByb2FjaCB0byBkcmFnZ2FibGVcbiAgICBpZiAoZGlzcGxheS5zY3JvbGxlci5kcmFnRHJvcCkgZGlzcGxheS5zY3JvbGxlci5kcmFnRHJvcCgpO1xuICAgIG9uKGRvY3VtZW50LCBcIm1vdXNldXBcIiwgZHJhZ0VuZCk7XG4gICAgb24oZGlzcGxheS5zY3JvbGxlciwgXCJkcm9wXCIsIGRyYWdFbmQpO1xuICB9XG5cbiAgLy8gTm9ybWFsIHNlbGVjdGlvbiwgYXMgb3Bwb3NlZCB0byB0ZXh0IGRyYWdnaW5nLlxuICBmdW5jdGlvbiBsZWZ0QnV0dG9uU2VsZWN0KGNtLCBlLCBzdGFydCwgdHlwZSwgYWRkTmV3KSB7XG4gICAgdmFyIGRpc3BsYXkgPSBjbS5kaXNwbGF5LCBkb2MgPSBjbS5kb2M7XG4gICAgZV9wcmV2ZW50RGVmYXVsdChlKTtcblxuICAgIHZhciBvdXJSYW5nZSwgb3VySW5kZXgsIHN0YXJ0U2VsID0gZG9jLnNlbCwgcmFuZ2VzID0gc3RhcnRTZWwucmFuZ2VzO1xuICAgIGlmIChhZGROZXcgJiYgIWUuc2hpZnRLZXkpIHtcbiAgICAgIG91ckluZGV4ID0gZG9jLnNlbC5jb250YWlucyhzdGFydCk7XG4gICAgICBpZiAob3VySW5kZXggPiAtMSlcbiAgICAgICAgb3VyUmFuZ2UgPSByYW5nZXNbb3VySW5kZXhdO1xuICAgICAgZWxzZVxuICAgICAgICBvdXJSYW5nZSA9IG5ldyBSYW5nZShzdGFydCwgc3RhcnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBvdXJSYW5nZSA9IGRvYy5zZWwucHJpbWFyeSgpO1xuICAgICAgb3VySW5kZXggPSBkb2Muc2VsLnByaW1JbmRleDtcbiAgICB9XG5cbiAgICBpZiAoY2hyb21lT1MgPyBlLnNoaWZ0S2V5ICYmIGUubWV0YUtleSA6IGUuYWx0S2V5KSB7XG4gICAgICB0eXBlID0gXCJyZWN0XCI7XG4gICAgICBpZiAoIWFkZE5ldykgb3VyUmFuZ2UgPSBuZXcgUmFuZ2Uoc3RhcnQsIHN0YXJ0KTtcbiAgICAgIHN0YXJ0ID0gcG9zRnJvbU1vdXNlKGNtLCBlLCB0cnVlLCB0cnVlKTtcbiAgICAgIG91ckluZGV4ID0gLTE7XG4gICAgfSBlbHNlIGlmICh0eXBlID09IFwiZG91YmxlXCIpIHtcbiAgICAgIHZhciB3b3JkID0gY20uZmluZFdvcmRBdChzdGFydCk7XG4gICAgICBpZiAoY20uZGlzcGxheS5zaGlmdCB8fCBkb2MuZXh0ZW5kKVxuICAgICAgICBvdXJSYW5nZSA9IGV4dGVuZFJhbmdlKGRvYywgb3VyUmFuZ2UsIHdvcmQuYW5jaG9yLCB3b3JkLmhlYWQpO1xuICAgICAgZWxzZVxuICAgICAgICBvdXJSYW5nZSA9IHdvcmQ7XG4gICAgfSBlbHNlIGlmICh0eXBlID09IFwidHJpcGxlXCIpIHtcbiAgICAgIHZhciBsaW5lID0gbmV3IFJhbmdlKFBvcyhzdGFydC5saW5lLCAwKSwgY2xpcFBvcyhkb2MsIFBvcyhzdGFydC5saW5lICsgMSwgMCkpKTtcbiAgICAgIGlmIChjbS5kaXNwbGF5LnNoaWZ0IHx8IGRvYy5leHRlbmQpXG4gICAgICAgIG91clJhbmdlID0gZXh0ZW5kUmFuZ2UoZG9jLCBvdXJSYW5nZSwgbGluZS5hbmNob3IsIGxpbmUuaGVhZCk7XG4gICAgICBlbHNlXG4gICAgICAgIG91clJhbmdlID0gbGluZTtcbiAgICB9IGVsc2Uge1xuICAgICAgb3VyUmFuZ2UgPSBleHRlbmRSYW5nZShkb2MsIG91clJhbmdlLCBzdGFydCk7XG4gICAgfVxuXG4gICAgaWYgKCFhZGROZXcpIHtcbiAgICAgIG91ckluZGV4ID0gMDtcbiAgICAgIHNldFNlbGVjdGlvbihkb2MsIG5ldyBTZWxlY3Rpb24oW291clJhbmdlXSwgMCksIHNlbF9tb3VzZSk7XG4gICAgICBzdGFydFNlbCA9IGRvYy5zZWw7XG4gICAgfSBlbHNlIGlmIChvdXJJbmRleCA9PSAtMSkge1xuICAgICAgb3VySW5kZXggPSByYW5nZXMubGVuZ3RoO1xuICAgICAgc2V0U2VsZWN0aW9uKGRvYywgbm9ybWFsaXplU2VsZWN0aW9uKHJhbmdlcy5jb25jYXQoW291clJhbmdlXSksIG91ckluZGV4KSxcbiAgICAgICAgICAgICAgICAgICB7c2Nyb2xsOiBmYWxzZSwgb3JpZ2luOiBcIiptb3VzZVwifSk7XG4gICAgfSBlbHNlIGlmIChyYW5nZXMubGVuZ3RoID4gMSAmJiByYW5nZXNbb3VySW5kZXhdLmVtcHR5KCkgJiYgdHlwZSA9PSBcInNpbmdsZVwiICYmICFlLnNoaWZ0S2V5KSB7XG4gICAgICBzZXRTZWxlY3Rpb24oZG9jLCBub3JtYWxpemVTZWxlY3Rpb24ocmFuZ2VzLnNsaWNlKDAsIG91ckluZGV4KS5jb25jYXQocmFuZ2VzLnNsaWNlKG91ckluZGV4ICsgMSkpLCAwKSxcbiAgICAgICAgICAgICAgICAgICB7c2Nyb2xsOiBmYWxzZSwgb3JpZ2luOiBcIiptb3VzZVwifSk7XG4gICAgICBzdGFydFNlbCA9IGRvYy5zZWw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlcGxhY2VPbmVTZWxlY3Rpb24oZG9jLCBvdXJJbmRleCwgb3VyUmFuZ2UsIHNlbF9tb3VzZSk7XG4gICAgfVxuXG4gICAgdmFyIGxhc3RQb3MgPSBzdGFydDtcbiAgICBmdW5jdGlvbiBleHRlbmRUbyhwb3MpIHtcbiAgICAgIGlmIChjbXAobGFzdFBvcywgcG9zKSA9PSAwKSByZXR1cm47XG4gICAgICBsYXN0UG9zID0gcG9zO1xuXG4gICAgICBpZiAodHlwZSA9PSBcInJlY3RcIikge1xuICAgICAgICB2YXIgcmFuZ2VzID0gW10sIHRhYlNpemUgPSBjbS5vcHRpb25zLnRhYlNpemU7XG4gICAgICAgIHZhciBzdGFydENvbCA9IGNvdW50Q29sdW1uKGdldExpbmUoZG9jLCBzdGFydC5saW5lKS50ZXh0LCBzdGFydC5jaCwgdGFiU2l6ZSk7XG4gICAgICAgIHZhciBwb3NDb2wgPSBjb3VudENvbHVtbihnZXRMaW5lKGRvYywgcG9zLmxpbmUpLnRleHQsIHBvcy5jaCwgdGFiU2l6ZSk7XG4gICAgICAgIHZhciBsZWZ0ID0gTWF0aC5taW4oc3RhcnRDb2wsIHBvc0NvbCksIHJpZ2h0ID0gTWF0aC5tYXgoc3RhcnRDb2wsIHBvc0NvbCk7XG4gICAgICAgIGZvciAodmFyIGxpbmUgPSBNYXRoLm1pbihzdGFydC5saW5lLCBwb3MubGluZSksIGVuZCA9IE1hdGgubWluKGNtLmxhc3RMaW5lKCksIE1hdGgubWF4KHN0YXJ0LmxpbmUsIHBvcy5saW5lKSk7XG4gICAgICAgICAgICAgbGluZSA8PSBlbmQ7IGxpbmUrKykge1xuICAgICAgICAgIHZhciB0ZXh0ID0gZ2V0TGluZShkb2MsIGxpbmUpLnRleHQsIGxlZnRQb3MgPSBmaW5kQ29sdW1uKHRleHQsIGxlZnQsIHRhYlNpemUpO1xuICAgICAgICAgIGlmIChsZWZ0ID09IHJpZ2h0KVxuICAgICAgICAgICAgcmFuZ2VzLnB1c2gobmV3IFJhbmdlKFBvcyhsaW5lLCBsZWZ0UG9zKSwgUG9zKGxpbmUsIGxlZnRQb3MpKSk7XG4gICAgICAgICAgZWxzZSBpZiAodGV4dC5sZW5ndGggPiBsZWZ0UG9zKVxuICAgICAgICAgICAgcmFuZ2VzLnB1c2gobmV3IFJhbmdlKFBvcyhsaW5lLCBsZWZ0UG9zKSwgUG9zKGxpbmUsIGZpbmRDb2x1bW4odGV4dCwgcmlnaHQsIHRhYlNpemUpKSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghcmFuZ2VzLmxlbmd0aCkgcmFuZ2VzLnB1c2gobmV3IFJhbmdlKHN0YXJ0LCBzdGFydCkpO1xuICAgICAgICBzZXRTZWxlY3Rpb24oZG9jLCBub3JtYWxpemVTZWxlY3Rpb24oc3RhcnRTZWwucmFuZ2VzLnNsaWNlKDAsIG91ckluZGV4KS5jb25jYXQocmFuZ2VzKSwgb3VySW5kZXgpLFxuICAgICAgICAgICAgICAgICAgICAge29yaWdpbjogXCIqbW91c2VcIiwgc2Nyb2xsOiBmYWxzZX0pO1xuICAgICAgICBjbS5zY3JvbGxJbnRvVmlldyhwb3MpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIG9sZFJhbmdlID0gb3VyUmFuZ2U7XG4gICAgICAgIHZhciBhbmNob3IgPSBvbGRSYW5nZS5hbmNob3IsIGhlYWQgPSBwb3M7XG4gICAgICAgIGlmICh0eXBlICE9IFwic2luZ2xlXCIpIHtcbiAgICAgICAgICBpZiAodHlwZSA9PSBcImRvdWJsZVwiKVxuICAgICAgICAgICAgdmFyIHJhbmdlID0gY20uZmluZFdvcmRBdChwb3MpO1xuICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIHZhciByYW5nZSA9IG5ldyBSYW5nZShQb3MocG9zLmxpbmUsIDApLCBjbGlwUG9zKGRvYywgUG9zKHBvcy5saW5lICsgMSwgMCkpKTtcbiAgICAgICAgICBpZiAoY21wKHJhbmdlLmFuY2hvciwgYW5jaG9yKSA+IDApIHtcbiAgICAgICAgICAgIGhlYWQgPSByYW5nZS5oZWFkO1xuICAgICAgICAgICAgYW5jaG9yID0gbWluUG9zKG9sZFJhbmdlLmZyb20oKSwgcmFuZ2UuYW5jaG9yKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaGVhZCA9IHJhbmdlLmFuY2hvcjtcbiAgICAgICAgICAgIGFuY2hvciA9IG1heFBvcyhvbGRSYW5nZS50bygpLCByYW5nZS5oZWFkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJhbmdlcyA9IHN0YXJ0U2VsLnJhbmdlcy5zbGljZSgwKTtcbiAgICAgICAgcmFuZ2VzW291ckluZGV4XSA9IG5ldyBSYW5nZShjbGlwUG9zKGRvYywgYW5jaG9yKSwgaGVhZCk7XG4gICAgICAgIHNldFNlbGVjdGlvbihkb2MsIG5vcm1hbGl6ZVNlbGVjdGlvbihyYW5nZXMsIG91ckluZGV4KSwgc2VsX21vdXNlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgZWRpdG9yU2l6ZSA9IGRpc3BsYXkud3JhcHBlci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAvLyBVc2VkIHRvIGVuc3VyZSB0aW1lb3V0IHJlLXRyaWVzIGRvbid0IGZpcmUgd2hlbiBhbm90aGVyIGV4dGVuZFxuICAgIC8vIGhhcHBlbmVkIGluIHRoZSBtZWFudGltZSAoY2xlYXJUaW1lb3V0IGlzbid0IHJlbGlhYmxlIC0tIGF0XG4gICAgLy8gbGVhc3Qgb24gQ2hyb21lLCB0aGUgdGltZW91dHMgc3RpbGwgaGFwcGVuIGV2ZW4gd2hlbiBjbGVhcmVkLFxuICAgIC8vIGlmIHRoZSBjbGVhciBoYXBwZW5zIGFmdGVyIHRoZWlyIHNjaGVkdWxlZCBmaXJpbmcgdGltZSkuXG4gICAgdmFyIGNvdW50ZXIgPSAwO1xuXG4gICAgZnVuY3Rpb24gZXh0ZW5kKGUpIHtcbiAgICAgIHZhciBjdXJDb3VudCA9ICsrY291bnRlcjtcbiAgICAgIHZhciBjdXIgPSBwb3NGcm9tTW91c2UoY20sIGUsIHRydWUsIHR5cGUgPT0gXCJyZWN0XCIpO1xuICAgICAgaWYgKCFjdXIpIHJldHVybjtcbiAgICAgIGlmIChjbXAoY3VyLCBsYXN0UG9zKSAhPSAwKSB7XG4gICAgICAgIGNtLmN1ck9wLmZvY3VzID0gYWN0aXZlRWx0KCk7XG4gICAgICAgIGV4dGVuZFRvKGN1cik7XG4gICAgICAgIHZhciB2aXNpYmxlID0gdmlzaWJsZUxpbmVzKGRpc3BsYXksIGRvYyk7XG4gICAgICAgIGlmIChjdXIubGluZSA+PSB2aXNpYmxlLnRvIHx8IGN1ci5saW5lIDwgdmlzaWJsZS5mcm9tKVxuICAgICAgICAgIHNldFRpbWVvdXQob3BlcmF0aW9uKGNtLCBmdW5jdGlvbigpe2lmIChjb3VudGVyID09IGN1ckNvdW50KSBleHRlbmQoZSk7fSksIDE1MCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgb3V0c2lkZSA9IGUuY2xpZW50WSA8IGVkaXRvclNpemUudG9wID8gLTIwIDogZS5jbGllbnRZID4gZWRpdG9yU2l6ZS5ib3R0b20gPyAyMCA6IDA7XG4gICAgICAgIGlmIChvdXRzaWRlKSBzZXRUaW1lb3V0KG9wZXJhdGlvbihjbSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgaWYgKGNvdW50ZXIgIT0gY3VyQ291bnQpIHJldHVybjtcbiAgICAgICAgICBkaXNwbGF5LnNjcm9sbGVyLnNjcm9sbFRvcCArPSBvdXRzaWRlO1xuICAgICAgICAgIGV4dGVuZChlKTtcbiAgICAgICAgfSksIDUwKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkb25lKGUpIHtcbiAgICAgIGNtLnN0YXRlLnNlbGVjdGluZ1RleHQgPSBmYWxzZTtcbiAgICAgIGNvdW50ZXIgPSBJbmZpbml0eTtcbiAgICAgIGVfcHJldmVudERlZmF1bHQoZSk7XG4gICAgICBkaXNwbGF5LmlucHV0LmZvY3VzKCk7XG4gICAgICBvZmYoZG9jdW1lbnQsIFwibW91c2Vtb3ZlXCIsIG1vdmUpO1xuICAgICAgb2ZmKGRvY3VtZW50LCBcIm1vdXNldXBcIiwgdXApO1xuICAgICAgZG9jLmhpc3RvcnkubGFzdFNlbE9yaWdpbiA9IG51bGw7XG4gICAgfVxuXG4gICAgdmFyIG1vdmUgPSBvcGVyYXRpb24oY20sIGZ1bmN0aW9uKGUpIHtcbiAgICAgIGlmICghZV9idXR0b24oZSkpIGRvbmUoZSk7XG4gICAgICBlbHNlIGV4dGVuZChlKTtcbiAgICB9KTtcbiAgICB2YXIgdXAgPSBvcGVyYXRpb24oY20sIGRvbmUpO1xuICAgIGNtLnN0YXRlLnNlbGVjdGluZ1RleHQgPSB1cDtcbiAgICBvbihkb2N1bWVudCwgXCJtb3VzZW1vdmVcIiwgbW92ZSk7XG4gICAgb24oZG9jdW1lbnQsIFwibW91c2V1cFwiLCB1cCk7XG4gIH1cblxuICAvLyBEZXRlcm1pbmVzIHdoZXRoZXIgYW4gZXZlbnQgaGFwcGVuZWQgaW4gdGhlIGd1dHRlciwgYW5kIGZpcmVzIHRoZVxuICAvLyBoYW5kbGVycyBmb3IgdGhlIGNvcnJlc3BvbmRpbmcgZXZlbnQuXG4gIGZ1bmN0aW9uIGd1dHRlckV2ZW50KGNtLCBlLCB0eXBlLCBwcmV2ZW50KSB7XG4gICAgdHJ5IHsgdmFyIG1YID0gZS5jbGllbnRYLCBtWSA9IGUuY2xpZW50WTsgfVxuICAgIGNhdGNoKGUpIHsgcmV0dXJuIGZhbHNlOyB9XG4gICAgaWYgKG1YID49IE1hdGguZmxvb3IoY20uZGlzcGxheS5ndXR0ZXJzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnJpZ2h0KSkgcmV0dXJuIGZhbHNlO1xuICAgIGlmIChwcmV2ZW50KSBlX3ByZXZlbnREZWZhdWx0KGUpO1xuXG4gICAgdmFyIGRpc3BsYXkgPSBjbS5kaXNwbGF5O1xuICAgIHZhciBsaW5lQm94ID0gZGlzcGxheS5saW5lRGl2LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gICAgaWYgKG1ZID4gbGluZUJveC5ib3R0b20gfHwgIWhhc0hhbmRsZXIoY20sIHR5cGUpKSByZXR1cm4gZV9kZWZhdWx0UHJldmVudGVkKGUpO1xuICAgIG1ZIC09IGxpbmVCb3gudG9wIC0gZGlzcGxheS52aWV3T2Zmc2V0O1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjbS5vcHRpb25zLmd1dHRlcnMubGVuZ3RoOyArK2kpIHtcbiAgICAgIHZhciBnID0gZGlzcGxheS5ndXR0ZXJzLmNoaWxkTm9kZXNbaV07XG4gICAgICBpZiAoZyAmJiBnLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnJpZ2h0ID49IG1YKSB7XG4gICAgICAgIHZhciBsaW5lID0gbGluZUF0SGVpZ2h0KGNtLmRvYywgbVkpO1xuICAgICAgICB2YXIgZ3V0dGVyID0gY20ub3B0aW9ucy5ndXR0ZXJzW2ldO1xuICAgICAgICBzaWduYWwoY20sIHR5cGUsIGNtLCBsaW5lLCBndXR0ZXIsIGUpO1xuICAgICAgICByZXR1cm4gZV9kZWZhdWx0UHJldmVudGVkKGUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGNsaWNrSW5HdXR0ZXIoY20sIGUpIHtcbiAgICByZXR1cm4gZ3V0dGVyRXZlbnQoY20sIGUsIFwiZ3V0dGVyQ2xpY2tcIiwgdHJ1ZSk7XG4gIH1cblxuICAvLyBLbHVkZ2UgdG8gd29yayBhcm91bmQgc3RyYW5nZSBJRSBiZWhhdmlvciB3aGVyZSBpdCdsbCBzb21ldGltZXNcbiAgLy8gcmUtZmlyZSBhIHNlcmllcyBvZiBkcmFnLXJlbGF0ZWQgZXZlbnRzIHJpZ2h0IGFmdGVyIHRoZSBkcm9wICgjMTU1MSlcbiAgdmFyIGxhc3REcm9wID0gMDtcblxuICBmdW5jdGlvbiBvbkRyb3AoZSkge1xuICAgIHZhciBjbSA9IHRoaXM7XG4gICAgY2xlYXJEcmFnQ3Vyc29yKGNtKTtcbiAgICBpZiAoc2lnbmFsRE9NRXZlbnQoY20sIGUpIHx8IGV2ZW50SW5XaWRnZXQoY20uZGlzcGxheSwgZSkpXG4gICAgICByZXR1cm47XG4gICAgZV9wcmV2ZW50RGVmYXVsdChlKTtcbiAgICBpZiAoaWUpIGxhc3REcm9wID0gK25ldyBEYXRlO1xuICAgIHZhciBwb3MgPSBwb3NGcm9tTW91c2UoY20sIGUsIHRydWUpLCBmaWxlcyA9IGUuZGF0YVRyYW5zZmVyLmZpbGVzO1xuICAgIGlmICghcG9zIHx8IGNtLmlzUmVhZE9ubHkoKSkgcmV0dXJuO1xuICAgIC8vIE1pZ2h0IGJlIGEgZmlsZSBkcm9wLCBpbiB3aGljaCBjYXNlIHdlIHNpbXBseSBleHRyYWN0IHRoZSB0ZXh0XG4gICAgLy8gYW5kIGluc2VydCBpdC5cbiAgICBpZiAoZmlsZXMgJiYgZmlsZXMubGVuZ3RoICYmIHdpbmRvdy5GaWxlUmVhZGVyICYmIHdpbmRvdy5GaWxlKSB7XG4gICAgICB2YXIgbiA9IGZpbGVzLmxlbmd0aCwgdGV4dCA9IEFycmF5KG4pLCByZWFkID0gMDtcbiAgICAgIHZhciBsb2FkRmlsZSA9IGZ1bmN0aW9uKGZpbGUsIGkpIHtcbiAgICAgICAgaWYgKGNtLm9wdGlvbnMuYWxsb3dEcm9wRmlsZVR5cGVzICYmXG4gICAgICAgICAgICBpbmRleE9mKGNtLm9wdGlvbnMuYWxsb3dEcm9wRmlsZVR5cGVzLCBmaWxlLnR5cGUpID09IC0xKVxuICAgICAgICAgIHJldHVybjtcblxuICAgICAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXI7XG4gICAgICAgIHJlYWRlci5vbmxvYWQgPSBvcGVyYXRpb24oY20sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciBjb250ZW50ID0gcmVhZGVyLnJlc3VsdDtcbiAgICAgICAgICBpZiAoL1tcXHgwMC1cXHgwOFxceDBlLVxceDFmXXsyfS8udGVzdChjb250ZW50KSkgY29udGVudCA9IFwiXCI7XG4gICAgICAgICAgdGV4dFtpXSA9IGNvbnRlbnQ7XG4gICAgICAgICAgaWYgKCsrcmVhZCA9PSBuKSB7XG4gICAgICAgICAgICBwb3MgPSBjbGlwUG9zKGNtLmRvYywgcG9zKTtcbiAgICAgICAgICAgIHZhciBjaGFuZ2UgPSB7ZnJvbTogcG9zLCB0bzogcG9zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBjbS5kb2Muc3BsaXRMaW5lcyh0ZXh0LmpvaW4oY20uZG9jLmxpbmVTZXBhcmF0b3IoKSkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW46IFwicGFzdGVcIn07XG4gICAgICAgICAgICBtYWtlQ2hhbmdlKGNtLmRvYywgY2hhbmdlKTtcbiAgICAgICAgICAgIHNldFNlbGVjdGlvblJlcGxhY2VIaXN0b3J5KGNtLmRvYywgc2ltcGxlU2VsZWN0aW9uKHBvcywgY2hhbmdlRW5kKGNoYW5nZSkpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZWFkZXIucmVhZEFzVGV4dChmaWxlKTtcbiAgICAgIH07XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG47ICsraSkgbG9hZEZpbGUoZmlsZXNbaV0sIGkpO1xuICAgIH0gZWxzZSB7IC8vIE5vcm1hbCBkcm9wXG4gICAgICAvLyBEb24ndCBkbyBhIHJlcGxhY2UgaWYgdGhlIGRyb3AgaGFwcGVuZWQgaW5zaWRlIG9mIHRoZSBzZWxlY3RlZCB0ZXh0LlxuICAgICAgaWYgKGNtLnN0YXRlLmRyYWdnaW5nVGV4dCAmJiBjbS5kb2Muc2VsLmNvbnRhaW5zKHBvcykgPiAtMSkge1xuICAgICAgICBjbS5zdGF0ZS5kcmFnZ2luZ1RleHQoZSk7XG4gICAgICAgIC8vIEVuc3VyZSB0aGUgZWRpdG9yIGlzIHJlLWZvY3VzZWRcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtjbS5kaXNwbGF5LmlucHV0LmZvY3VzKCk7fSwgMjApO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0cnkge1xuICAgICAgICB2YXIgdGV4dCA9IGUuZGF0YVRyYW5zZmVyLmdldERhdGEoXCJUZXh0XCIpO1xuICAgICAgICBpZiAodGV4dCkge1xuICAgICAgICAgIGlmIChjbS5zdGF0ZS5kcmFnZ2luZ1RleHQgJiYgIShtYWMgPyBlLmFsdEtleSA6IGUuY3RybEtleSkpXG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWQgPSBjbS5saXN0U2VsZWN0aW9ucygpO1xuICAgICAgICAgIHNldFNlbGVjdGlvbk5vVW5kbyhjbS5kb2MsIHNpbXBsZVNlbGVjdGlvbihwb3MsIHBvcykpO1xuICAgICAgICAgIGlmIChzZWxlY3RlZCkgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWxlY3RlZC5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgIHJlcGxhY2VSYW5nZShjbS5kb2MsIFwiXCIsIHNlbGVjdGVkW2ldLmFuY2hvciwgc2VsZWN0ZWRbaV0uaGVhZCwgXCJkcmFnXCIpO1xuICAgICAgICAgIGNtLnJlcGxhY2VTZWxlY3Rpb24odGV4dCwgXCJhcm91bmRcIiwgXCJwYXN0ZVwiKTtcbiAgICAgICAgICBjbS5kaXNwbGF5LmlucHV0LmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNhdGNoKGUpe31cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBvbkRyYWdTdGFydChjbSwgZSkge1xuICAgIGlmIChpZSAmJiAoIWNtLnN0YXRlLmRyYWdnaW5nVGV4dCB8fCArbmV3IERhdGUgLSBsYXN0RHJvcCA8IDEwMCkpIHsgZV9zdG9wKGUpOyByZXR1cm47IH1cbiAgICBpZiAoc2lnbmFsRE9NRXZlbnQoY20sIGUpIHx8IGV2ZW50SW5XaWRnZXQoY20uZGlzcGxheSwgZSkpIHJldHVybjtcblxuICAgIGUuZGF0YVRyYW5zZmVyLnNldERhdGEoXCJUZXh0XCIsIGNtLmdldFNlbGVjdGlvbigpKTtcbiAgICBlLmRhdGFUcmFuc2Zlci5lZmZlY3RBbGxvd2VkID0gXCJjb3B5TW92ZVwiXG5cbiAgICAvLyBVc2UgZHVtbXkgaW1hZ2UgaW5zdGVhZCBvZiBkZWZhdWx0IGJyb3dzZXJzIGltYWdlLlxuICAgIC8vIFJlY2VudCBTYWZhcmkgKH42LjAuMikgaGF2ZSBhIHRlbmRlbmN5IHRvIHNlZ2ZhdWx0IHdoZW4gdGhpcyBoYXBwZW5zLCBzbyB3ZSBkb24ndCBkbyBpdCB0aGVyZS5cbiAgICBpZiAoZS5kYXRhVHJhbnNmZXIuc2V0RHJhZ0ltYWdlICYmICFzYWZhcmkpIHtcbiAgICAgIHZhciBpbWcgPSBlbHQoXCJpbWdcIiwgbnVsbCwgbnVsbCwgXCJwb3NpdGlvbjogZml4ZWQ7IGxlZnQ6IDA7IHRvcDogMDtcIik7XG4gICAgICBpbWcuc3JjID0gXCJkYXRhOmltYWdlL2dpZjtiYXNlNjQsUjBsR09EbGhBUUFCQUFBQUFDSDVCQUVLQUFFQUxBQUFBQUFCQUFFQUFBSUNUQUVBT3c9PVwiO1xuICAgICAgaWYgKHByZXN0bykge1xuICAgICAgICBpbWcud2lkdGggPSBpbWcuaGVpZ2h0ID0gMTtcbiAgICAgICAgY20uZGlzcGxheS53cmFwcGVyLmFwcGVuZENoaWxkKGltZyk7XG4gICAgICAgIC8vIEZvcmNlIGEgcmVsYXlvdXQsIG9yIE9wZXJhIHdvbid0IHVzZSBvdXIgaW1hZ2UgZm9yIHNvbWUgb2JzY3VyZSByZWFzb25cbiAgICAgICAgaW1nLl90b3AgPSBpbWcub2Zmc2V0VG9wO1xuICAgICAgfVxuICAgICAgZS5kYXRhVHJhbnNmZXIuc2V0RHJhZ0ltYWdlKGltZywgMCwgMCk7XG4gICAgICBpZiAocHJlc3RvKSBpbWcucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChpbWcpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG9uRHJhZ092ZXIoY20sIGUpIHtcbiAgICB2YXIgcG9zID0gcG9zRnJvbU1vdXNlKGNtLCBlKTtcbiAgICBpZiAoIXBvcykgcmV0dXJuO1xuICAgIHZhciBmcmFnID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgIGRyYXdTZWxlY3Rpb25DdXJzb3IoY20sIHBvcywgZnJhZyk7XG4gICAgaWYgKCFjbS5kaXNwbGF5LmRyYWdDdXJzb3IpIHtcbiAgICAgIGNtLmRpc3BsYXkuZHJhZ0N1cnNvciA9IGVsdChcImRpdlwiLCBudWxsLCBcIkNvZGVNaXJyb3ItY3Vyc29ycyBDb2RlTWlycm9yLWRyYWdjdXJzb3JzXCIpO1xuICAgICAgY20uZGlzcGxheS5saW5lU3BhY2UuaW5zZXJ0QmVmb3JlKGNtLmRpc3BsYXkuZHJhZ0N1cnNvciwgY20uZGlzcGxheS5jdXJzb3JEaXYpO1xuICAgIH1cbiAgICByZW1vdmVDaGlsZHJlbkFuZEFkZChjbS5kaXNwbGF5LmRyYWdDdXJzb3IsIGZyYWcpO1xuICB9XG5cbiAgZnVuY3Rpb24gY2xlYXJEcmFnQ3Vyc29yKGNtKSB7XG4gICAgaWYgKGNtLmRpc3BsYXkuZHJhZ0N1cnNvcikge1xuICAgICAgY20uZGlzcGxheS5saW5lU3BhY2UucmVtb3ZlQ2hpbGQoY20uZGlzcGxheS5kcmFnQ3Vyc29yKTtcbiAgICAgIGNtLmRpc3BsYXkuZHJhZ0N1cnNvciA9IG51bGw7XG4gICAgfVxuICB9XG5cbiAgLy8gU0NST0xMIEVWRU5UU1xuXG4gIC8vIFN5bmMgdGhlIHNjcm9sbGFibGUgYXJlYSBhbmQgc2Nyb2xsYmFycywgZW5zdXJlIHRoZSB2aWV3cG9ydFxuICAvLyBjb3ZlcnMgdGhlIHZpc2libGUgYXJlYS5cbiAgZnVuY3Rpb24gc2V0U2Nyb2xsVG9wKGNtLCB2YWwpIHtcbiAgICBpZiAoTWF0aC5hYnMoY20uZG9jLnNjcm9sbFRvcCAtIHZhbCkgPCAyKSByZXR1cm47XG4gICAgY20uZG9jLnNjcm9sbFRvcCA9IHZhbDtcbiAgICBpZiAoIWdlY2tvKSB1cGRhdGVEaXNwbGF5U2ltcGxlKGNtLCB7dG9wOiB2YWx9KTtcbiAgICBpZiAoY20uZGlzcGxheS5zY3JvbGxlci5zY3JvbGxUb3AgIT0gdmFsKSBjbS5kaXNwbGF5LnNjcm9sbGVyLnNjcm9sbFRvcCA9IHZhbDtcbiAgICBjbS5kaXNwbGF5LnNjcm9sbGJhcnMuc2V0U2Nyb2xsVG9wKHZhbCk7XG4gICAgaWYgKGdlY2tvKSB1cGRhdGVEaXNwbGF5U2ltcGxlKGNtKTtcbiAgICBzdGFydFdvcmtlcihjbSwgMTAwKTtcbiAgfVxuICAvLyBTeW5jIHNjcm9sbGVyIGFuZCBzY3JvbGxiYXIsIGVuc3VyZSB0aGUgZ3V0dGVyIGVsZW1lbnRzIGFyZVxuICAvLyBhbGlnbmVkLlxuICBmdW5jdGlvbiBzZXRTY3JvbGxMZWZ0KGNtLCB2YWwsIGlzU2Nyb2xsZXIpIHtcbiAgICBpZiAoaXNTY3JvbGxlciA/IHZhbCA9PSBjbS5kb2Muc2Nyb2xsTGVmdCA6IE1hdGguYWJzKGNtLmRvYy5zY3JvbGxMZWZ0IC0gdmFsKSA8IDIpIHJldHVybjtcbiAgICB2YWwgPSBNYXRoLm1pbih2YWwsIGNtLmRpc3BsYXkuc2Nyb2xsZXIuc2Nyb2xsV2lkdGggLSBjbS5kaXNwbGF5LnNjcm9sbGVyLmNsaWVudFdpZHRoKTtcbiAgICBjbS5kb2Muc2Nyb2xsTGVmdCA9IHZhbDtcbiAgICBhbGlnbkhvcml6b250YWxseShjbSk7XG4gICAgaWYgKGNtLmRpc3BsYXkuc2Nyb2xsZXIuc2Nyb2xsTGVmdCAhPSB2YWwpIGNtLmRpc3BsYXkuc2Nyb2xsZXIuc2Nyb2xsTGVmdCA9IHZhbDtcbiAgICBjbS5kaXNwbGF5LnNjcm9sbGJhcnMuc2V0U2Nyb2xsTGVmdCh2YWwpO1xuICB9XG5cbiAgLy8gU2luY2UgdGhlIGRlbHRhIHZhbHVlcyByZXBvcnRlZCBvbiBtb3VzZSB3aGVlbCBldmVudHMgYXJlXG4gIC8vIHVuc3RhbmRhcmRpemVkIGJldHdlZW4gYnJvd3NlcnMgYW5kIGV2ZW4gYnJvd3NlciB2ZXJzaW9ucywgYW5kXG4gIC8vIGdlbmVyYWxseSBob3JyaWJseSB1bnByZWRpY3RhYmxlLCB0aGlzIGNvZGUgc3RhcnRzIGJ5IG1lYXN1cmluZ1xuICAvLyB0aGUgc2Nyb2xsIGVmZmVjdCB0aGF0IHRoZSBmaXJzdCBmZXcgbW91c2Ugd2hlZWwgZXZlbnRzIGhhdmUsXG4gIC8vIGFuZCwgZnJvbSB0aGF0LCBkZXRlY3RzIHRoZSB3YXkgaXQgY2FuIGNvbnZlcnQgZGVsdGFzIHRvIHBpeGVsXG4gIC8vIG9mZnNldHMgYWZ0ZXJ3YXJkcy5cbiAgLy9cbiAgLy8gVGhlIHJlYXNvbiB3ZSB3YW50IHRvIGtub3cgdGhlIGFtb3VudCBhIHdoZWVsIGV2ZW50IHdpbGwgc2Nyb2xsXG4gIC8vIGlzIHRoYXQgaXQgZ2l2ZXMgdXMgYSBjaGFuY2UgdG8gdXBkYXRlIHRoZSBkaXNwbGF5IGJlZm9yZSB0aGVcbiAgLy8gYWN0dWFsIHNjcm9sbGluZyBoYXBwZW5zLCByZWR1Y2luZyBmbGlja2VyaW5nLlxuXG4gIHZhciB3aGVlbFNhbXBsZXMgPSAwLCB3aGVlbFBpeGVsc1BlclVuaXQgPSBudWxsO1xuICAvLyBGaWxsIGluIGEgYnJvd3Nlci1kZXRlY3RlZCBzdGFydGluZyB2YWx1ZSBvbiBicm93c2VycyB3aGVyZSB3ZVxuICAvLyBrbm93IG9uZS4gVGhlc2UgZG9uJ3QgaGF2ZSB0byBiZSBhY2N1cmF0ZSAtLSB0aGUgcmVzdWx0IG9mIHRoZW1cbiAgLy8gYmVpbmcgd3Jvbmcgd291bGQganVzdCBiZSBhIHNsaWdodCBmbGlja2VyIG9uIHRoZSBmaXJzdCB3aGVlbFxuICAvLyBzY3JvbGwgKGlmIGl0IGlzIGxhcmdlIGVub3VnaCkuXG4gIGlmIChpZSkgd2hlZWxQaXhlbHNQZXJVbml0ID0gLS41MztcbiAgZWxzZSBpZiAoZ2Vja28pIHdoZWVsUGl4ZWxzUGVyVW5pdCA9IDE1O1xuICBlbHNlIGlmIChjaHJvbWUpIHdoZWVsUGl4ZWxzUGVyVW5pdCA9IC0uNztcbiAgZWxzZSBpZiAoc2FmYXJpKSB3aGVlbFBpeGVsc1BlclVuaXQgPSAtMS8zO1xuXG4gIHZhciB3aGVlbEV2ZW50RGVsdGEgPSBmdW5jdGlvbihlKSB7XG4gICAgdmFyIGR4ID0gZS53aGVlbERlbHRhWCwgZHkgPSBlLndoZWVsRGVsdGFZO1xuICAgIGlmIChkeCA9PSBudWxsICYmIGUuZGV0YWlsICYmIGUuYXhpcyA9PSBlLkhPUklaT05UQUxfQVhJUykgZHggPSBlLmRldGFpbDtcbiAgICBpZiAoZHkgPT0gbnVsbCAmJiBlLmRldGFpbCAmJiBlLmF4aXMgPT0gZS5WRVJUSUNBTF9BWElTKSBkeSA9IGUuZGV0YWlsO1xuICAgIGVsc2UgaWYgKGR5ID09IG51bGwpIGR5ID0gZS53aGVlbERlbHRhO1xuICAgIHJldHVybiB7eDogZHgsIHk6IGR5fTtcbiAgfTtcbiAgQ29kZU1pcnJvci53aGVlbEV2ZW50UGl4ZWxzID0gZnVuY3Rpb24oZSkge1xuICAgIHZhciBkZWx0YSA9IHdoZWVsRXZlbnREZWx0YShlKTtcbiAgICBkZWx0YS54ICo9IHdoZWVsUGl4ZWxzUGVyVW5pdDtcbiAgICBkZWx0YS55ICo9IHdoZWVsUGl4ZWxzUGVyVW5pdDtcbiAgICByZXR1cm4gZGVsdGE7XG4gIH07XG5cbiAgZnVuY3Rpb24gb25TY3JvbGxXaGVlbChjbSwgZSkge1xuICAgIHZhciBkZWx0YSA9IHdoZWVsRXZlbnREZWx0YShlKSwgZHggPSBkZWx0YS54LCBkeSA9IGRlbHRhLnk7XG5cbiAgICB2YXIgZGlzcGxheSA9IGNtLmRpc3BsYXksIHNjcm9sbCA9IGRpc3BsYXkuc2Nyb2xsZXI7XG4gICAgLy8gUXVpdCBpZiB0aGVyZSdzIG5vdGhpbmcgdG8gc2Nyb2xsIGhlcmVcbiAgICB2YXIgY2FuU2Nyb2xsWCA9IHNjcm9sbC5zY3JvbGxXaWR0aCA+IHNjcm9sbC5jbGllbnRXaWR0aDtcbiAgICB2YXIgY2FuU2Nyb2xsWSA9IHNjcm9sbC5zY3JvbGxIZWlnaHQgPiBzY3JvbGwuY2xpZW50SGVpZ2h0O1xuICAgIGlmICghKGR4ICYmIGNhblNjcm9sbFggfHwgZHkgJiYgY2FuU2Nyb2xsWSkpIHJldHVybjtcblxuICAgIC8vIFdlYmtpdCBicm93c2VycyBvbiBPUyBYIGFib3J0IG1vbWVudHVtIHNjcm9sbHMgd2hlbiB0aGUgdGFyZ2V0XG4gICAgLy8gb2YgdGhlIHNjcm9sbCBldmVudCBpcyByZW1vdmVkIGZyb20gdGhlIHNjcm9sbGFibGUgZWxlbWVudC5cbiAgICAvLyBUaGlzIGhhY2sgKHNlZSByZWxhdGVkIGNvZGUgaW4gcGF0Y2hEaXNwbGF5KSBtYWtlcyBzdXJlIHRoZVxuICAgIC8vIGVsZW1lbnQgaXMga2VwdCBhcm91bmQuXG4gICAgaWYgKGR5ICYmIG1hYyAmJiB3ZWJraXQpIHtcbiAgICAgIG91dGVyOiBmb3IgKHZhciBjdXIgPSBlLnRhcmdldCwgdmlldyA9IGRpc3BsYXkudmlldzsgY3VyICE9IHNjcm9sbDsgY3VyID0gY3VyLnBhcmVudE5vZGUpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2aWV3Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYgKHZpZXdbaV0ubm9kZSA9PSBjdXIpIHtcbiAgICAgICAgICAgIGNtLmRpc3BsYXkuY3VycmVudFdoZWVsVGFyZ2V0ID0gY3VyO1xuICAgICAgICAgICAgYnJlYWsgb3V0ZXI7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gT24gc29tZSBicm93c2VycywgaG9yaXpvbnRhbCBzY3JvbGxpbmcgd2lsbCBjYXVzZSByZWRyYXdzIHRvXG4gICAgLy8gaGFwcGVuIGJlZm9yZSB0aGUgZ3V0dGVyIGhhcyBiZWVuIHJlYWxpZ25lZCwgY2F1c2luZyBpdCB0b1xuICAgIC8vIHdyaWdnbGUgYXJvdW5kIGluIGEgbW9zdCB1bnNlZW1seSB3YXkuIFdoZW4gd2UgaGF2ZSBhblxuICAgIC8vIGVzdGltYXRlZCBwaXhlbHMvZGVsdGEgdmFsdWUsIHdlIGp1c3QgaGFuZGxlIGhvcml6b250YWxcbiAgICAvLyBzY3JvbGxpbmcgZW50aXJlbHkgaGVyZS4gSXQnbGwgYmUgc2xpZ2h0bHkgb2ZmIGZyb20gbmF0aXZlLCBidXRcbiAgICAvLyBiZXR0ZXIgdGhhbiBnbGl0Y2hpbmcgb3V0LlxuICAgIGlmIChkeCAmJiAhZ2Vja28gJiYgIXByZXN0byAmJiB3aGVlbFBpeGVsc1BlclVuaXQgIT0gbnVsbCkge1xuICAgICAgaWYgKGR5ICYmIGNhblNjcm9sbFkpXG4gICAgICAgIHNldFNjcm9sbFRvcChjbSwgTWF0aC5tYXgoMCwgTWF0aC5taW4oc2Nyb2xsLnNjcm9sbFRvcCArIGR5ICogd2hlZWxQaXhlbHNQZXJVbml0LCBzY3JvbGwuc2Nyb2xsSGVpZ2h0IC0gc2Nyb2xsLmNsaWVudEhlaWdodCkpKTtcbiAgICAgIHNldFNjcm9sbExlZnQoY20sIE1hdGgubWF4KDAsIE1hdGgubWluKHNjcm9sbC5zY3JvbGxMZWZ0ICsgZHggKiB3aGVlbFBpeGVsc1BlclVuaXQsIHNjcm9sbC5zY3JvbGxXaWR0aCAtIHNjcm9sbC5jbGllbnRXaWR0aCkpKTtcbiAgICAgIC8vIE9ubHkgcHJldmVudCBkZWZhdWx0IHNjcm9sbGluZyBpZiB2ZXJ0aWNhbCBzY3JvbGxpbmcgaXNcbiAgICAgIC8vIGFjdHVhbGx5IHBvc3NpYmxlLiBPdGhlcndpc2UsIGl0IGNhdXNlcyB2ZXJ0aWNhbCBzY3JvbGxcbiAgICAgIC8vIGppdHRlciBvbiBPU1ggdHJhY2twYWRzIHdoZW4gZGVsdGFYIGlzIHNtYWxsIGFuZCBkZWx0YVlcbiAgICAgIC8vIGlzIGxhcmdlIChpc3N1ZSAjMzU3OSlcbiAgICAgIGlmICghZHkgfHwgKGR5ICYmIGNhblNjcm9sbFkpKVxuICAgICAgICBlX3ByZXZlbnREZWZhdWx0KGUpO1xuICAgICAgZGlzcGxheS53aGVlbFN0YXJ0WCA9IG51bGw7IC8vIEFib3J0IG1lYXN1cmVtZW50LCBpZiBpbiBwcm9ncmVzc1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vICdQcm9qZWN0JyB0aGUgdmlzaWJsZSB2aWV3cG9ydCB0byBjb3ZlciB0aGUgYXJlYSB0aGF0IGlzIGJlaW5nXG4gICAgLy8gc2Nyb2xsZWQgaW50byB2aWV3IChpZiB3ZSBrbm93IGVub3VnaCB0byBlc3RpbWF0ZSBpdCkuXG4gICAgaWYgKGR5ICYmIHdoZWVsUGl4ZWxzUGVyVW5pdCAhPSBudWxsKSB7XG4gICAgICB2YXIgcGl4ZWxzID0gZHkgKiB3aGVlbFBpeGVsc1BlclVuaXQ7XG4gICAgICB2YXIgdG9wID0gY20uZG9jLnNjcm9sbFRvcCwgYm90ID0gdG9wICsgZGlzcGxheS53cmFwcGVyLmNsaWVudEhlaWdodDtcbiAgICAgIGlmIChwaXhlbHMgPCAwKSB0b3AgPSBNYXRoLm1heCgwLCB0b3AgKyBwaXhlbHMgLSA1MCk7XG4gICAgICBlbHNlIGJvdCA9IE1hdGgubWluKGNtLmRvYy5oZWlnaHQsIGJvdCArIHBpeGVscyArIDUwKTtcbiAgICAgIHVwZGF0ZURpc3BsYXlTaW1wbGUoY20sIHt0b3A6IHRvcCwgYm90dG9tOiBib3R9KTtcbiAgICB9XG5cbiAgICBpZiAod2hlZWxTYW1wbGVzIDwgMjApIHtcbiAgICAgIGlmIChkaXNwbGF5LndoZWVsU3RhcnRYID09IG51bGwpIHtcbiAgICAgICAgZGlzcGxheS53aGVlbFN0YXJ0WCA9IHNjcm9sbC5zY3JvbGxMZWZ0OyBkaXNwbGF5LndoZWVsU3RhcnRZID0gc2Nyb2xsLnNjcm9sbFRvcDtcbiAgICAgICAgZGlzcGxheS53aGVlbERYID0gZHg7IGRpc3BsYXkud2hlZWxEWSA9IGR5O1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGlmIChkaXNwbGF5LndoZWVsU3RhcnRYID09IG51bGwpIHJldHVybjtcbiAgICAgICAgICB2YXIgbW92ZWRYID0gc2Nyb2xsLnNjcm9sbExlZnQgLSBkaXNwbGF5LndoZWVsU3RhcnRYO1xuICAgICAgICAgIHZhciBtb3ZlZFkgPSBzY3JvbGwuc2Nyb2xsVG9wIC0gZGlzcGxheS53aGVlbFN0YXJ0WTtcbiAgICAgICAgICB2YXIgc2FtcGxlID0gKG1vdmVkWSAmJiBkaXNwbGF5LndoZWVsRFkgJiYgbW92ZWRZIC8gZGlzcGxheS53aGVlbERZKSB8fFxuICAgICAgICAgICAgKG1vdmVkWCAmJiBkaXNwbGF5LndoZWVsRFggJiYgbW92ZWRYIC8gZGlzcGxheS53aGVlbERYKTtcbiAgICAgICAgICBkaXNwbGF5LndoZWVsU3RhcnRYID0gZGlzcGxheS53aGVlbFN0YXJ0WSA9IG51bGw7XG4gICAgICAgICAgaWYgKCFzYW1wbGUpIHJldHVybjtcbiAgICAgICAgICB3aGVlbFBpeGVsc1BlclVuaXQgPSAod2hlZWxQaXhlbHNQZXJVbml0ICogd2hlZWxTYW1wbGVzICsgc2FtcGxlKSAvICh3aGVlbFNhbXBsZXMgKyAxKTtcbiAgICAgICAgICArK3doZWVsU2FtcGxlcztcbiAgICAgICAgfSwgMjAwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRpc3BsYXkud2hlZWxEWCArPSBkeDsgZGlzcGxheS53aGVlbERZICs9IGR5O1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIEtFWSBFVkVOVFNcblxuICAvLyBSdW4gYSBoYW5kbGVyIHRoYXQgd2FzIGJvdW5kIHRvIGEga2V5LlxuICBmdW5jdGlvbiBkb0hhbmRsZUJpbmRpbmcoY20sIGJvdW5kLCBkcm9wU2hpZnQpIHtcbiAgICBpZiAodHlwZW9mIGJvdW5kID09IFwic3RyaW5nXCIpIHtcbiAgICAgIGJvdW5kID0gY29tbWFuZHNbYm91bmRdO1xuICAgICAgaWYgKCFib3VuZCkgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICAvLyBFbnN1cmUgcHJldmlvdXMgaW5wdXQgaGFzIGJlZW4gcmVhZCwgc28gdGhhdCB0aGUgaGFuZGxlciBzZWVzIGFcbiAgICAvLyBjb25zaXN0ZW50IHZpZXcgb2YgdGhlIGRvY3VtZW50XG4gICAgY20uZGlzcGxheS5pbnB1dC5lbnN1cmVQb2xsZWQoKTtcbiAgICB2YXIgcHJldlNoaWZ0ID0gY20uZGlzcGxheS5zaGlmdCwgZG9uZSA9IGZhbHNlO1xuICAgIHRyeSB7XG4gICAgICBpZiAoY20uaXNSZWFkT25seSgpKSBjbS5zdGF0ZS5zdXBwcmVzc0VkaXRzID0gdHJ1ZTtcbiAgICAgIGlmIChkcm9wU2hpZnQpIGNtLmRpc3BsYXkuc2hpZnQgPSBmYWxzZTtcbiAgICAgIGRvbmUgPSBib3VuZChjbSkgIT0gUGFzcztcbiAgICB9IGZpbmFsbHkge1xuICAgICAgY20uZGlzcGxheS5zaGlmdCA9IHByZXZTaGlmdDtcbiAgICAgIGNtLnN0YXRlLnN1cHByZXNzRWRpdHMgPSBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIGRvbmU7XG4gIH1cblxuICBmdW5jdGlvbiBsb29rdXBLZXlGb3JFZGl0b3IoY20sIG5hbWUsIGhhbmRsZSkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY20uc3RhdGUua2V5TWFwcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHJlc3VsdCA9IGxvb2t1cEtleShuYW1lLCBjbS5zdGF0ZS5rZXlNYXBzW2ldLCBoYW5kbGUsIGNtKTtcbiAgICAgIGlmIChyZXN1bHQpIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIHJldHVybiAoY20ub3B0aW9ucy5leHRyYUtleXMgJiYgbG9va3VwS2V5KG5hbWUsIGNtLm9wdGlvbnMuZXh0cmFLZXlzLCBoYW5kbGUsIGNtKSlcbiAgICAgIHx8IGxvb2t1cEtleShuYW1lLCBjbS5vcHRpb25zLmtleU1hcCwgaGFuZGxlLCBjbSk7XG4gIH1cblxuICB2YXIgc3RvcFNlcSA9IG5ldyBEZWxheWVkO1xuICBmdW5jdGlvbiBkaXNwYXRjaEtleShjbSwgbmFtZSwgZSwgaGFuZGxlKSB7XG4gICAgdmFyIHNlcSA9IGNtLnN0YXRlLmtleVNlcTtcbiAgICBpZiAoc2VxKSB7XG4gICAgICBpZiAoaXNNb2RpZmllcktleShuYW1lKSkgcmV0dXJuIFwiaGFuZGxlZFwiO1xuICAgICAgc3RvcFNlcS5zZXQoNTAsIGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoY20uc3RhdGUua2V5U2VxID09IHNlcSkge1xuICAgICAgICAgIGNtLnN0YXRlLmtleVNlcSA9IG51bGw7XG4gICAgICAgICAgY20uZGlzcGxheS5pbnB1dC5yZXNldCgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIG5hbWUgPSBzZXEgKyBcIiBcIiArIG5hbWU7XG4gICAgfVxuICAgIHZhciByZXN1bHQgPSBsb29rdXBLZXlGb3JFZGl0b3IoY20sIG5hbWUsIGhhbmRsZSk7XG5cbiAgICBpZiAocmVzdWx0ID09IFwibXVsdGlcIilcbiAgICAgIGNtLnN0YXRlLmtleVNlcSA9IG5hbWU7XG4gICAgaWYgKHJlc3VsdCA9PSBcImhhbmRsZWRcIilcbiAgICAgIHNpZ25hbExhdGVyKGNtLCBcImtleUhhbmRsZWRcIiwgY20sIG5hbWUsIGUpO1xuXG4gICAgaWYgKHJlc3VsdCA9PSBcImhhbmRsZWRcIiB8fCByZXN1bHQgPT0gXCJtdWx0aVwiKSB7XG4gICAgICBlX3ByZXZlbnREZWZhdWx0KGUpO1xuICAgICAgcmVzdGFydEJsaW5rKGNtKTtcbiAgICB9XG5cbiAgICBpZiAoc2VxICYmICFyZXN1bHQgJiYgL1xcJyQvLnRlc3QobmFtZSkpIHtcbiAgICAgIGVfcHJldmVudERlZmF1bHQoZSk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuICEhcmVzdWx0O1xuICB9XG5cbiAgLy8gSGFuZGxlIGEga2V5IGZyb20gdGhlIGtleWRvd24gZXZlbnQuXG4gIGZ1bmN0aW9uIGhhbmRsZUtleUJpbmRpbmcoY20sIGUpIHtcbiAgICB2YXIgbmFtZSA9IGtleU5hbWUoZSwgdHJ1ZSk7XG4gICAgaWYgKCFuYW1lKSByZXR1cm4gZmFsc2U7XG5cbiAgICBpZiAoZS5zaGlmdEtleSAmJiAhY20uc3RhdGUua2V5U2VxKSB7XG4gICAgICAvLyBGaXJzdCB0cnkgdG8gcmVzb2x2ZSBmdWxsIG5hbWUgKGluY2x1ZGluZyAnU2hpZnQtJykuIEZhaWxpbmdcbiAgICAgIC8vIHRoYXQsIHNlZSBpZiB0aGVyZSBpcyBhIGN1cnNvci1tb3Rpb24gY29tbWFuZCAoc3RhcnRpbmcgd2l0aFxuICAgICAgLy8gJ2dvJykgYm91bmQgdG8gdGhlIGtleW5hbWUgd2l0aG91dCAnU2hpZnQtJy5cbiAgICAgIHJldHVybiBkaXNwYXRjaEtleShjbSwgXCJTaGlmdC1cIiArIG5hbWUsIGUsIGZ1bmN0aW9uKGIpIHtyZXR1cm4gZG9IYW5kbGVCaW5kaW5nKGNtLCBiLCB0cnVlKTt9KVxuICAgICAgICAgIHx8IGRpc3BhdGNoS2V5KGNtLCBuYW1lLCBlLCBmdW5jdGlvbihiKSB7XG4gICAgICAgICAgICAgICBpZiAodHlwZW9mIGIgPT0gXCJzdHJpbmdcIiA/IC9eZ29bQS1aXS8udGVzdChiKSA6IGIubW90aW9uKVxuICAgICAgICAgICAgICAgICByZXR1cm4gZG9IYW5kbGVCaW5kaW5nKGNtLCBiKTtcbiAgICAgICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGRpc3BhdGNoS2V5KGNtLCBuYW1lLCBlLCBmdW5jdGlvbihiKSB7IHJldHVybiBkb0hhbmRsZUJpbmRpbmcoY20sIGIpOyB9KTtcbiAgICB9XG4gIH1cblxuICAvLyBIYW5kbGUgYSBrZXkgZnJvbSB0aGUga2V5cHJlc3MgZXZlbnRcbiAgZnVuY3Rpb24gaGFuZGxlQ2hhckJpbmRpbmcoY20sIGUsIGNoKSB7XG4gICAgcmV0dXJuIGRpc3BhdGNoS2V5KGNtLCBcIidcIiArIGNoICsgXCInXCIsIGUsXG4gICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGIpIHsgcmV0dXJuIGRvSGFuZGxlQmluZGluZyhjbSwgYiwgdHJ1ZSk7IH0pO1xuICB9XG5cbiAgdmFyIGxhc3RTdG9wcGVkS2V5ID0gbnVsbDtcbiAgZnVuY3Rpb24gb25LZXlEb3duKGUpIHtcbiAgICB2YXIgY20gPSB0aGlzO1xuICAgIGNtLmN1ck9wLmZvY3VzID0gYWN0aXZlRWx0KCk7XG4gICAgaWYgKHNpZ25hbERPTUV2ZW50KGNtLCBlKSkgcmV0dXJuO1xuICAgIC8vIElFIGRvZXMgc3RyYW5nZSB0aGluZ3Mgd2l0aCBlc2NhcGUuXG4gICAgaWYgKGllICYmIGllX3ZlcnNpb24gPCAxMSAmJiBlLmtleUNvZGUgPT0gMjcpIGUucmV0dXJuVmFsdWUgPSBmYWxzZTtcbiAgICB2YXIgY29kZSA9IGUua2V5Q29kZTtcbiAgICBjbS5kaXNwbGF5LnNoaWZ0ID0gY29kZSA9PSAxNiB8fCBlLnNoaWZ0S2V5O1xuICAgIHZhciBoYW5kbGVkID0gaGFuZGxlS2V5QmluZGluZyhjbSwgZSk7XG4gICAgaWYgKHByZXN0bykge1xuICAgICAgbGFzdFN0b3BwZWRLZXkgPSBoYW5kbGVkID8gY29kZSA6IG51bGw7XG4gICAgICAvLyBPcGVyYSBoYXMgbm8gY3V0IGV2ZW50Li4uIHdlIHRyeSB0byBhdCBsZWFzdCBjYXRjaCB0aGUga2V5IGNvbWJvXG4gICAgICBpZiAoIWhhbmRsZWQgJiYgY29kZSA9PSA4OCAmJiAhaGFzQ29weUV2ZW50ICYmIChtYWMgPyBlLm1ldGFLZXkgOiBlLmN0cmxLZXkpKVxuICAgICAgICBjbS5yZXBsYWNlU2VsZWN0aW9uKFwiXCIsIG51bGwsIFwiY3V0XCIpO1xuICAgIH1cblxuICAgIC8vIFR1cm4gbW91c2UgaW50byBjcm9zc2hhaXIgd2hlbiBBbHQgaXMgaGVsZCBvbiBNYWMuXG4gICAgaWYgKGNvZGUgPT0gMTggJiYgIS9cXGJDb2RlTWlycm9yLWNyb3NzaGFpclxcYi8udGVzdChjbS5kaXNwbGF5LmxpbmVEaXYuY2xhc3NOYW1lKSlcbiAgICAgIHNob3dDcm9zc0hhaXIoY20pO1xuICB9XG5cbiAgZnVuY3Rpb24gc2hvd0Nyb3NzSGFpcihjbSkge1xuICAgIHZhciBsaW5lRGl2ID0gY20uZGlzcGxheS5saW5lRGl2O1xuICAgIGFkZENsYXNzKGxpbmVEaXYsIFwiQ29kZU1pcnJvci1jcm9zc2hhaXJcIik7XG5cbiAgICBmdW5jdGlvbiB1cChlKSB7XG4gICAgICBpZiAoZS5rZXlDb2RlID09IDE4IHx8ICFlLmFsdEtleSkge1xuICAgICAgICBybUNsYXNzKGxpbmVEaXYsIFwiQ29kZU1pcnJvci1jcm9zc2hhaXJcIik7XG4gICAgICAgIG9mZihkb2N1bWVudCwgXCJrZXl1cFwiLCB1cCk7XG4gICAgICAgIG9mZihkb2N1bWVudCwgXCJtb3VzZW92ZXJcIiwgdXApO1xuICAgICAgfVxuICAgIH1cbiAgICBvbihkb2N1bWVudCwgXCJrZXl1cFwiLCB1cCk7XG4gICAgb24oZG9jdW1lbnQsIFwibW91c2VvdmVyXCIsIHVwKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uS2V5VXAoZSkge1xuICAgIGlmIChlLmtleUNvZGUgPT0gMTYpIHRoaXMuZG9jLnNlbC5zaGlmdCA9IGZhbHNlO1xuICAgIHNpZ25hbERPTUV2ZW50KHRoaXMsIGUpO1xuICB9XG5cbiAgZnVuY3Rpb24gb25LZXlQcmVzcyhlKSB7XG4gICAgdmFyIGNtID0gdGhpcztcbiAgICBpZiAoZXZlbnRJbldpZGdldChjbS5kaXNwbGF5LCBlKSB8fCBzaWduYWxET01FdmVudChjbSwgZSkgfHwgZS5jdHJsS2V5ICYmICFlLmFsdEtleSB8fCBtYWMgJiYgZS5tZXRhS2V5KSByZXR1cm47XG4gICAgdmFyIGtleUNvZGUgPSBlLmtleUNvZGUsIGNoYXJDb2RlID0gZS5jaGFyQ29kZTtcbiAgICBpZiAocHJlc3RvICYmIGtleUNvZGUgPT0gbGFzdFN0b3BwZWRLZXkpIHtsYXN0U3RvcHBlZEtleSA9IG51bGw7IGVfcHJldmVudERlZmF1bHQoZSk7IHJldHVybjt9XG4gICAgaWYgKChwcmVzdG8gJiYgKCFlLndoaWNoIHx8IGUud2hpY2ggPCAxMCkpICYmIGhhbmRsZUtleUJpbmRpbmcoY20sIGUpKSByZXR1cm47XG4gICAgdmFyIGNoID0gU3RyaW5nLmZyb21DaGFyQ29kZShjaGFyQ29kZSA9PSBudWxsID8ga2V5Q29kZSA6IGNoYXJDb2RlKTtcbiAgICBpZiAoaGFuZGxlQ2hhckJpbmRpbmcoY20sIGUsIGNoKSkgcmV0dXJuO1xuICAgIGNtLmRpc3BsYXkuaW5wdXQub25LZXlQcmVzcyhlKTtcbiAgfVxuXG4gIC8vIEZPQ1VTL0JMVVIgRVZFTlRTXG5cbiAgZnVuY3Rpb24gZGVsYXlCbHVyRXZlbnQoY20pIHtcbiAgICBjbS5zdGF0ZS5kZWxheWluZ0JsdXJFdmVudCA9IHRydWU7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgIGlmIChjbS5zdGF0ZS5kZWxheWluZ0JsdXJFdmVudCkge1xuICAgICAgICBjbS5zdGF0ZS5kZWxheWluZ0JsdXJFdmVudCA9IGZhbHNlO1xuICAgICAgICBvbkJsdXIoY20pO1xuICAgICAgfVxuICAgIH0sIDEwMCk7XG4gIH1cblxuICBmdW5jdGlvbiBvbkZvY3VzKGNtKSB7XG4gICAgaWYgKGNtLnN0YXRlLmRlbGF5aW5nQmx1ckV2ZW50KSBjbS5zdGF0ZS5kZWxheWluZ0JsdXJFdmVudCA9IGZhbHNlO1xuXG4gICAgaWYgKGNtLm9wdGlvbnMucmVhZE9ubHkgPT0gXCJub2N1cnNvclwiKSByZXR1cm47XG4gICAgaWYgKCFjbS5zdGF0ZS5mb2N1c2VkKSB7XG4gICAgICBzaWduYWwoY20sIFwiZm9jdXNcIiwgY20pO1xuICAgICAgY20uc3RhdGUuZm9jdXNlZCA9IHRydWU7XG4gICAgICBhZGRDbGFzcyhjbS5kaXNwbGF5LndyYXBwZXIsIFwiQ29kZU1pcnJvci1mb2N1c2VkXCIpO1xuICAgICAgLy8gVGhpcyB0ZXN0IHByZXZlbnRzIHRoaXMgZnJvbSBmaXJpbmcgd2hlbiBhIGNvbnRleHRcbiAgICAgIC8vIG1lbnUgaXMgY2xvc2VkIChzaW5jZSB0aGUgaW5wdXQgcmVzZXQgd291bGQga2lsbCB0aGVcbiAgICAgIC8vIHNlbGVjdC1hbGwgZGV0ZWN0aW9uIGhhY2spXG4gICAgICBpZiAoIWNtLmN1ck9wICYmIGNtLmRpc3BsYXkuc2VsRm9yQ29udGV4dE1lbnUgIT0gY20uZG9jLnNlbCkge1xuICAgICAgICBjbS5kaXNwbGF5LmlucHV0LnJlc2V0KCk7XG4gICAgICAgIGlmICh3ZWJraXQpIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IGNtLmRpc3BsYXkuaW5wdXQucmVzZXQodHJ1ZSk7IH0sIDIwKTsgLy8gSXNzdWUgIzE3MzBcbiAgICAgIH1cbiAgICAgIGNtLmRpc3BsYXkuaW5wdXQucmVjZWl2ZWRGb2N1cygpO1xuICAgIH1cbiAgICByZXN0YXJ0QmxpbmsoY20pO1xuICB9XG4gIGZ1bmN0aW9uIG9uQmx1cihjbSkge1xuICAgIGlmIChjbS5zdGF0ZS5kZWxheWluZ0JsdXJFdmVudCkgcmV0dXJuO1xuXG4gICAgaWYgKGNtLnN0YXRlLmZvY3VzZWQpIHtcbiAgICAgIHNpZ25hbChjbSwgXCJibHVyXCIsIGNtKTtcbiAgICAgIGNtLnN0YXRlLmZvY3VzZWQgPSBmYWxzZTtcbiAgICAgIHJtQ2xhc3MoY20uZGlzcGxheS53cmFwcGVyLCBcIkNvZGVNaXJyb3ItZm9jdXNlZFwiKTtcbiAgICB9XG4gICAgY2xlYXJJbnRlcnZhbChjbS5kaXNwbGF5LmJsaW5rZXIpO1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7aWYgKCFjbS5zdGF0ZS5mb2N1c2VkKSBjbS5kaXNwbGF5LnNoaWZ0ID0gZmFsc2U7fSwgMTUwKTtcbiAgfVxuXG4gIC8vIENPTlRFWFQgTUVOVSBIQU5ETElOR1xuXG4gIC8vIFRvIG1ha2UgdGhlIGNvbnRleHQgbWVudSB3b3JrLCB3ZSBuZWVkIHRvIGJyaWVmbHkgdW5oaWRlIHRoZVxuICAvLyB0ZXh0YXJlYSAobWFraW5nIGl0IGFzIHVub2J0cnVzaXZlIGFzIHBvc3NpYmxlKSB0byBsZXQgdGhlXG4gIC8vIHJpZ2h0LWNsaWNrIHRha2UgZWZmZWN0IG9uIGl0LlxuICBmdW5jdGlvbiBvbkNvbnRleHRNZW51KGNtLCBlKSB7XG4gICAgaWYgKGV2ZW50SW5XaWRnZXQoY20uZGlzcGxheSwgZSkgfHwgY29udGV4dE1lbnVJbkd1dHRlcihjbSwgZSkpIHJldHVybjtcbiAgICBpZiAoc2lnbmFsRE9NRXZlbnQoY20sIGUsIFwiY29udGV4dG1lbnVcIikpIHJldHVybjtcbiAgICBjbS5kaXNwbGF5LmlucHV0Lm9uQ29udGV4dE1lbnUoZSk7XG4gIH1cblxuICBmdW5jdGlvbiBjb250ZXh0TWVudUluR3V0dGVyKGNtLCBlKSB7XG4gICAgaWYgKCFoYXNIYW5kbGVyKGNtLCBcImd1dHRlckNvbnRleHRNZW51XCIpKSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIGd1dHRlckV2ZW50KGNtLCBlLCBcImd1dHRlckNvbnRleHRNZW51XCIsIGZhbHNlKTtcbiAgfVxuXG4gIC8vIFVQREFUSU5HXG5cbiAgLy8gQ29tcHV0ZSB0aGUgcG9zaXRpb24gb2YgdGhlIGVuZCBvZiBhIGNoYW5nZSAoaXRzICd0bycgcHJvcGVydHlcbiAgLy8gcmVmZXJzIHRvIHRoZSBwcmUtY2hhbmdlIGVuZCkuXG4gIHZhciBjaGFuZ2VFbmQgPSBDb2RlTWlycm9yLmNoYW5nZUVuZCA9IGZ1bmN0aW9uKGNoYW5nZSkge1xuICAgIGlmICghY2hhbmdlLnRleHQpIHJldHVybiBjaGFuZ2UudG87XG4gICAgcmV0dXJuIFBvcyhjaGFuZ2UuZnJvbS5saW5lICsgY2hhbmdlLnRleHQubGVuZ3RoIC0gMSxcbiAgICAgICAgICAgICAgIGxzdChjaGFuZ2UudGV4dCkubGVuZ3RoICsgKGNoYW5nZS50ZXh0Lmxlbmd0aCA9PSAxID8gY2hhbmdlLmZyb20uY2ggOiAwKSk7XG4gIH07XG5cbiAgLy8gQWRqdXN0IGEgcG9zaXRpb24gdG8gcmVmZXIgdG8gdGhlIHBvc3QtY2hhbmdlIHBvc2l0aW9uIG9mIHRoZVxuICAvLyBzYW1lIHRleHQsIG9yIHRoZSBlbmQgb2YgdGhlIGNoYW5nZSBpZiB0aGUgY2hhbmdlIGNvdmVycyBpdC5cbiAgZnVuY3Rpb24gYWRqdXN0Rm9yQ2hhbmdlKHBvcywgY2hhbmdlKSB7XG4gICAgaWYgKGNtcChwb3MsIGNoYW5nZS5mcm9tKSA8IDApIHJldHVybiBwb3M7XG4gICAgaWYgKGNtcChwb3MsIGNoYW5nZS50bykgPD0gMCkgcmV0dXJuIGNoYW5nZUVuZChjaGFuZ2UpO1xuXG4gICAgdmFyIGxpbmUgPSBwb3MubGluZSArIGNoYW5nZS50ZXh0Lmxlbmd0aCAtIChjaGFuZ2UudG8ubGluZSAtIGNoYW5nZS5mcm9tLmxpbmUpIC0gMSwgY2ggPSBwb3MuY2g7XG4gICAgaWYgKHBvcy5saW5lID09IGNoYW5nZS50by5saW5lKSBjaCArPSBjaGFuZ2VFbmQoY2hhbmdlKS5jaCAtIGNoYW5nZS50by5jaDtcbiAgICByZXR1cm4gUG9zKGxpbmUsIGNoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNvbXB1dGVTZWxBZnRlckNoYW5nZShkb2MsIGNoYW5nZSkge1xuICAgIHZhciBvdXQgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRvYy5zZWwucmFuZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgcmFuZ2UgPSBkb2Muc2VsLnJhbmdlc1tpXTtcbiAgICAgIG91dC5wdXNoKG5ldyBSYW5nZShhZGp1c3RGb3JDaGFuZ2UocmFuZ2UuYW5jaG9yLCBjaGFuZ2UpLFxuICAgICAgICAgICAgICAgICAgICAgICAgIGFkanVzdEZvckNoYW5nZShyYW5nZS5oZWFkLCBjaGFuZ2UpKSk7XG4gICAgfVxuICAgIHJldHVybiBub3JtYWxpemVTZWxlY3Rpb24ob3V0LCBkb2Muc2VsLnByaW1JbmRleCk7XG4gIH1cblxuICBmdW5jdGlvbiBvZmZzZXRQb3MocG9zLCBvbGQsIG53KSB7XG4gICAgaWYgKHBvcy5saW5lID09IG9sZC5saW5lKVxuICAgICAgcmV0dXJuIFBvcyhudy5saW5lLCBwb3MuY2ggLSBvbGQuY2ggKyBudy5jaCk7XG4gICAgZWxzZVxuICAgICAgcmV0dXJuIFBvcyhudy5saW5lICsgKHBvcy5saW5lIC0gb2xkLmxpbmUpLCBwb3MuY2gpO1xuICB9XG5cbiAgLy8gVXNlZCBieSByZXBsYWNlU2VsZWN0aW9ucyB0byBhbGxvdyBtb3ZpbmcgdGhlIHNlbGVjdGlvbiB0byB0aGVcbiAgLy8gc3RhcnQgb3IgYXJvdW5kIHRoZSByZXBsYWNlZCB0ZXN0LiBIaW50IG1heSBiZSBcInN0YXJ0XCIgb3IgXCJhcm91bmRcIi5cbiAgZnVuY3Rpb24gY29tcHV0ZVJlcGxhY2VkU2VsKGRvYywgY2hhbmdlcywgaGludCkge1xuICAgIHZhciBvdXQgPSBbXTtcbiAgICB2YXIgb2xkUHJldiA9IFBvcyhkb2MuZmlyc3QsIDApLCBuZXdQcmV2ID0gb2xkUHJldjtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoYW5nZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBjaGFuZ2UgPSBjaGFuZ2VzW2ldO1xuICAgICAgdmFyIGZyb20gPSBvZmZzZXRQb3MoY2hhbmdlLmZyb20sIG9sZFByZXYsIG5ld1ByZXYpO1xuICAgICAgdmFyIHRvID0gb2Zmc2V0UG9zKGNoYW5nZUVuZChjaGFuZ2UpLCBvbGRQcmV2LCBuZXdQcmV2KTtcbiAgICAgIG9sZFByZXYgPSBjaGFuZ2UudG87XG4gICAgICBuZXdQcmV2ID0gdG87XG4gICAgICBpZiAoaGludCA9PSBcImFyb3VuZFwiKSB7XG4gICAgICAgIHZhciByYW5nZSA9IGRvYy5zZWwucmFuZ2VzW2ldLCBpbnYgPSBjbXAocmFuZ2UuaGVhZCwgcmFuZ2UuYW5jaG9yKSA8IDA7XG4gICAgICAgIG91dFtpXSA9IG5ldyBSYW5nZShpbnYgPyB0byA6IGZyb20sIGludiA/IGZyb20gOiB0byk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvdXRbaV0gPSBuZXcgUmFuZ2UoZnJvbSwgZnJvbSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuZXcgU2VsZWN0aW9uKG91dCwgZG9jLnNlbC5wcmltSW5kZXgpO1xuICB9XG5cbiAgLy8gQWxsb3cgXCJiZWZvcmVDaGFuZ2VcIiBldmVudCBoYW5kbGVycyB0byBpbmZsdWVuY2UgYSBjaGFuZ2VcbiAgZnVuY3Rpb24gZmlsdGVyQ2hhbmdlKGRvYywgY2hhbmdlLCB1cGRhdGUpIHtcbiAgICB2YXIgb2JqID0ge1xuICAgICAgY2FuY2VsZWQ6IGZhbHNlLFxuICAgICAgZnJvbTogY2hhbmdlLmZyb20sXG4gICAgICB0bzogY2hhbmdlLnRvLFxuICAgICAgdGV4dDogY2hhbmdlLnRleHQsXG4gICAgICBvcmlnaW46IGNoYW5nZS5vcmlnaW4sXG4gICAgICBjYW5jZWw6IGZ1bmN0aW9uKCkgeyB0aGlzLmNhbmNlbGVkID0gdHJ1ZTsgfVxuICAgIH07XG4gICAgaWYgKHVwZGF0ZSkgb2JqLnVwZGF0ZSA9IGZ1bmN0aW9uKGZyb20sIHRvLCB0ZXh0LCBvcmlnaW4pIHtcbiAgICAgIGlmIChmcm9tKSB0aGlzLmZyb20gPSBjbGlwUG9zKGRvYywgZnJvbSk7XG4gICAgICBpZiAodG8pIHRoaXMudG8gPSBjbGlwUG9zKGRvYywgdG8pO1xuICAgICAgaWYgKHRleHQpIHRoaXMudGV4dCA9IHRleHQ7XG4gICAgICBpZiAob3JpZ2luICE9PSB1bmRlZmluZWQpIHRoaXMub3JpZ2luID0gb3JpZ2luO1xuICAgIH07XG4gICAgc2lnbmFsKGRvYywgXCJiZWZvcmVDaGFuZ2VcIiwgZG9jLCBvYmopO1xuICAgIGlmIChkb2MuY20pIHNpZ25hbChkb2MuY20sIFwiYmVmb3JlQ2hhbmdlXCIsIGRvYy5jbSwgb2JqKTtcblxuICAgIGlmIChvYmouY2FuY2VsZWQpIHJldHVybiBudWxsO1xuICAgIHJldHVybiB7ZnJvbTogb2JqLmZyb20sIHRvOiBvYmoudG8sIHRleHQ6IG9iai50ZXh0LCBvcmlnaW46IG9iai5vcmlnaW59O1xuICB9XG5cbiAgLy8gQXBwbHkgYSBjaGFuZ2UgdG8gYSBkb2N1bWVudCwgYW5kIGFkZCBpdCB0byB0aGUgZG9jdW1lbnQnc1xuICAvLyBoaXN0b3J5LCBhbmQgcHJvcGFnYXRpbmcgaXQgdG8gYWxsIGxpbmtlZCBkb2N1bWVudHMuXG4gIGZ1bmN0aW9uIG1ha2VDaGFuZ2UoZG9jLCBjaGFuZ2UsIGlnbm9yZVJlYWRPbmx5KSB7XG4gICAgaWYgKGRvYy5jbSkge1xuICAgICAgaWYgKCFkb2MuY20uY3VyT3ApIHJldHVybiBvcGVyYXRpb24oZG9jLmNtLCBtYWtlQ2hhbmdlKShkb2MsIGNoYW5nZSwgaWdub3JlUmVhZE9ubHkpO1xuICAgICAgaWYgKGRvYy5jbS5zdGF0ZS5zdXBwcmVzc0VkaXRzKSByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGhhc0hhbmRsZXIoZG9jLCBcImJlZm9yZUNoYW5nZVwiKSB8fCBkb2MuY20gJiYgaGFzSGFuZGxlcihkb2MuY20sIFwiYmVmb3JlQ2hhbmdlXCIpKSB7XG4gICAgICBjaGFuZ2UgPSBmaWx0ZXJDaGFuZ2UoZG9jLCBjaGFuZ2UsIHRydWUpO1xuICAgICAgaWYgKCFjaGFuZ2UpIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBQb3NzaWJseSBzcGxpdCBvciBzdXBwcmVzcyB0aGUgdXBkYXRlIGJhc2VkIG9uIHRoZSBwcmVzZW5jZVxuICAgIC8vIG9mIHJlYWQtb25seSBzcGFucyBpbiBpdHMgcmFuZ2UuXG4gICAgdmFyIHNwbGl0ID0gc2F3UmVhZE9ubHlTcGFucyAmJiAhaWdub3JlUmVhZE9ubHkgJiYgcmVtb3ZlUmVhZE9ubHlSYW5nZXMoZG9jLCBjaGFuZ2UuZnJvbSwgY2hhbmdlLnRvKTtcbiAgICBpZiAoc3BsaXQpIHtcbiAgICAgIGZvciAodmFyIGkgPSBzcGxpdC5sZW5ndGggLSAxOyBpID49IDA7IC0taSlcbiAgICAgICAgbWFrZUNoYW5nZUlubmVyKGRvYywge2Zyb206IHNwbGl0W2ldLmZyb20sIHRvOiBzcGxpdFtpXS50bywgdGV4dDogaSA/IFtcIlwiXSA6IGNoYW5nZS50ZXh0fSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG1ha2VDaGFuZ2VJbm5lcihkb2MsIGNoYW5nZSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gbWFrZUNoYW5nZUlubmVyKGRvYywgY2hhbmdlKSB7XG4gICAgaWYgKGNoYW5nZS50ZXh0Lmxlbmd0aCA9PSAxICYmIGNoYW5nZS50ZXh0WzBdID09IFwiXCIgJiYgY21wKGNoYW5nZS5mcm9tLCBjaGFuZ2UudG8pID09IDApIHJldHVybjtcbiAgICB2YXIgc2VsQWZ0ZXIgPSBjb21wdXRlU2VsQWZ0ZXJDaGFuZ2UoZG9jLCBjaGFuZ2UpO1xuICAgIGFkZENoYW5nZVRvSGlzdG9yeShkb2MsIGNoYW5nZSwgc2VsQWZ0ZXIsIGRvYy5jbSA/IGRvYy5jbS5jdXJPcC5pZCA6IE5hTik7XG5cbiAgICBtYWtlQ2hhbmdlU2luZ2xlRG9jKGRvYywgY2hhbmdlLCBzZWxBZnRlciwgc3RyZXRjaFNwYW5zT3ZlckNoYW5nZShkb2MsIGNoYW5nZSkpO1xuICAgIHZhciByZWJhc2VkID0gW107XG5cbiAgICBsaW5rZWREb2NzKGRvYywgZnVuY3Rpb24oZG9jLCBzaGFyZWRIaXN0KSB7XG4gICAgICBpZiAoIXNoYXJlZEhpc3QgJiYgaW5kZXhPZihyZWJhc2VkLCBkb2MuaGlzdG9yeSkgPT0gLTEpIHtcbiAgICAgICAgcmViYXNlSGlzdChkb2MuaGlzdG9yeSwgY2hhbmdlKTtcbiAgICAgICAgcmViYXNlZC5wdXNoKGRvYy5oaXN0b3J5KTtcbiAgICAgIH1cbiAgICAgIG1ha2VDaGFuZ2VTaW5nbGVEb2MoZG9jLCBjaGFuZ2UsIG51bGwsIHN0cmV0Y2hTcGFuc092ZXJDaGFuZ2UoZG9jLCBjaGFuZ2UpKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIFJldmVydCBhIGNoYW5nZSBzdG9yZWQgaW4gYSBkb2N1bWVudCdzIGhpc3RvcnkuXG4gIGZ1bmN0aW9uIG1ha2VDaGFuZ2VGcm9tSGlzdG9yeShkb2MsIHR5cGUsIGFsbG93U2VsZWN0aW9uT25seSkge1xuICAgIGlmIChkb2MuY20gJiYgZG9jLmNtLnN0YXRlLnN1cHByZXNzRWRpdHMpIHJldHVybjtcblxuICAgIHZhciBoaXN0ID0gZG9jLmhpc3RvcnksIGV2ZW50LCBzZWxBZnRlciA9IGRvYy5zZWw7XG4gICAgdmFyIHNvdXJjZSA9IHR5cGUgPT0gXCJ1bmRvXCIgPyBoaXN0LmRvbmUgOiBoaXN0LnVuZG9uZSwgZGVzdCA9IHR5cGUgPT0gXCJ1bmRvXCIgPyBoaXN0LnVuZG9uZSA6IGhpc3QuZG9uZTtcblxuICAgIC8vIFZlcmlmeSB0aGF0IHRoZXJlIGlzIGEgdXNlYWJsZSBldmVudCAoc28gdGhhdCBjdHJsLXogd29uJ3RcbiAgICAvLyBuZWVkbGVzc2x5IGNsZWFyIHNlbGVjdGlvbiBldmVudHMpXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzb3VyY2UubGVuZ3RoOyBpKyspIHtcbiAgICAgIGV2ZW50ID0gc291cmNlW2ldO1xuICAgICAgaWYgKGFsbG93U2VsZWN0aW9uT25seSA/IGV2ZW50LnJhbmdlcyAmJiAhZXZlbnQuZXF1YWxzKGRvYy5zZWwpIDogIWV2ZW50LnJhbmdlcylcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGlmIChpID09IHNvdXJjZS5sZW5ndGgpIHJldHVybjtcbiAgICBoaXN0Lmxhc3RPcmlnaW4gPSBoaXN0Lmxhc3RTZWxPcmlnaW4gPSBudWxsO1xuXG4gICAgZm9yICg7Oykge1xuICAgICAgZXZlbnQgPSBzb3VyY2UucG9wKCk7XG4gICAgICBpZiAoZXZlbnQucmFuZ2VzKSB7XG4gICAgICAgIHB1c2hTZWxlY3Rpb25Ub0hpc3RvcnkoZXZlbnQsIGRlc3QpO1xuICAgICAgICBpZiAoYWxsb3dTZWxlY3Rpb25Pbmx5ICYmICFldmVudC5lcXVhbHMoZG9jLnNlbCkpIHtcbiAgICAgICAgICBzZXRTZWxlY3Rpb24oZG9jLCBldmVudCwge2NsZWFyUmVkbzogZmFsc2V9KTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgc2VsQWZ0ZXIgPSBldmVudDtcbiAgICAgIH1cbiAgICAgIGVsc2UgYnJlYWs7XG4gICAgfVxuXG4gICAgLy8gQnVpbGQgdXAgYSByZXZlcnNlIGNoYW5nZSBvYmplY3QgdG8gYWRkIHRvIHRoZSBvcHBvc2l0ZSBoaXN0b3J5XG4gICAgLy8gc3RhY2sgKHJlZG8gd2hlbiB1bmRvaW5nLCBhbmQgdmljZSB2ZXJzYSkuXG4gICAgdmFyIGFudGlDaGFuZ2VzID0gW107XG4gICAgcHVzaFNlbGVjdGlvblRvSGlzdG9yeShzZWxBZnRlciwgZGVzdCk7XG4gICAgZGVzdC5wdXNoKHtjaGFuZ2VzOiBhbnRpQ2hhbmdlcywgZ2VuZXJhdGlvbjogaGlzdC5nZW5lcmF0aW9ufSk7XG4gICAgaGlzdC5nZW5lcmF0aW9uID0gZXZlbnQuZ2VuZXJhdGlvbiB8fCArK2hpc3QubWF4R2VuZXJhdGlvbjtcblxuICAgIHZhciBmaWx0ZXIgPSBoYXNIYW5kbGVyKGRvYywgXCJiZWZvcmVDaGFuZ2VcIikgfHwgZG9jLmNtICYmIGhhc0hhbmRsZXIoZG9jLmNtLCBcImJlZm9yZUNoYW5nZVwiKTtcblxuICAgIGZvciAodmFyIGkgPSBldmVudC5jaGFuZ2VzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICB2YXIgY2hhbmdlID0gZXZlbnQuY2hhbmdlc1tpXTtcbiAgICAgIGNoYW5nZS5vcmlnaW4gPSB0eXBlO1xuICAgICAgaWYgKGZpbHRlciAmJiAhZmlsdGVyQ2hhbmdlKGRvYywgY2hhbmdlLCBmYWxzZSkpIHtcbiAgICAgICAgc291cmNlLmxlbmd0aCA9IDA7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgYW50aUNoYW5nZXMucHVzaChoaXN0b3J5Q2hhbmdlRnJvbUNoYW5nZShkb2MsIGNoYW5nZSkpO1xuXG4gICAgICB2YXIgYWZ0ZXIgPSBpID8gY29tcHV0ZVNlbEFmdGVyQ2hhbmdlKGRvYywgY2hhbmdlKSA6IGxzdChzb3VyY2UpO1xuICAgICAgbWFrZUNoYW5nZVNpbmdsZURvYyhkb2MsIGNoYW5nZSwgYWZ0ZXIsIG1lcmdlT2xkU3BhbnMoZG9jLCBjaGFuZ2UpKTtcbiAgICAgIGlmICghaSAmJiBkb2MuY20pIGRvYy5jbS5zY3JvbGxJbnRvVmlldyh7ZnJvbTogY2hhbmdlLmZyb20sIHRvOiBjaGFuZ2VFbmQoY2hhbmdlKX0pO1xuICAgICAgdmFyIHJlYmFzZWQgPSBbXTtcblxuICAgICAgLy8gUHJvcGFnYXRlIHRvIHRoZSBsaW5rZWQgZG9jdW1lbnRzXG4gICAgICBsaW5rZWREb2NzKGRvYywgZnVuY3Rpb24oZG9jLCBzaGFyZWRIaXN0KSB7XG4gICAgICAgIGlmICghc2hhcmVkSGlzdCAmJiBpbmRleE9mKHJlYmFzZWQsIGRvYy5oaXN0b3J5KSA9PSAtMSkge1xuICAgICAgICAgIHJlYmFzZUhpc3QoZG9jLmhpc3RvcnksIGNoYW5nZSk7XG4gICAgICAgICAgcmViYXNlZC5wdXNoKGRvYy5oaXN0b3J5KTtcbiAgICAgICAgfVxuICAgICAgICBtYWtlQ2hhbmdlU2luZ2xlRG9jKGRvYywgY2hhbmdlLCBudWxsLCBtZXJnZU9sZFNwYW5zKGRvYywgY2hhbmdlKSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvLyBTdWItdmlld3MgbmVlZCB0aGVpciBsaW5lIG51bWJlcnMgc2hpZnRlZCB3aGVuIHRleHQgaXMgYWRkZWRcbiAgLy8gYWJvdmUgb3IgYmVsb3cgdGhlbSBpbiB0aGUgcGFyZW50IGRvY3VtZW50LlxuICBmdW5jdGlvbiBzaGlmdERvYyhkb2MsIGRpc3RhbmNlKSB7XG4gICAgaWYgKGRpc3RhbmNlID09IDApIHJldHVybjtcbiAgICBkb2MuZmlyc3QgKz0gZGlzdGFuY2U7XG4gICAgZG9jLnNlbCA9IG5ldyBTZWxlY3Rpb24obWFwKGRvYy5zZWwucmFuZ2VzLCBmdW5jdGlvbihyYW5nZSkge1xuICAgICAgcmV0dXJuIG5ldyBSYW5nZShQb3MocmFuZ2UuYW5jaG9yLmxpbmUgKyBkaXN0YW5jZSwgcmFuZ2UuYW5jaG9yLmNoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgUG9zKHJhbmdlLmhlYWQubGluZSArIGRpc3RhbmNlLCByYW5nZS5oZWFkLmNoKSk7XG4gICAgfSksIGRvYy5zZWwucHJpbUluZGV4KTtcbiAgICBpZiAoZG9jLmNtKSB7XG4gICAgICByZWdDaGFuZ2UoZG9jLmNtLCBkb2MuZmlyc3QsIGRvYy5maXJzdCAtIGRpc3RhbmNlLCBkaXN0YW5jZSk7XG4gICAgICBmb3IgKHZhciBkID0gZG9jLmNtLmRpc3BsYXksIGwgPSBkLnZpZXdGcm9tOyBsIDwgZC52aWV3VG87IGwrKylcbiAgICAgICAgcmVnTGluZUNoYW5nZShkb2MuY20sIGwsIFwiZ3V0dGVyXCIpO1xuICAgIH1cbiAgfVxuXG4gIC8vIE1vcmUgbG93ZXItbGV2ZWwgY2hhbmdlIGZ1bmN0aW9uLCBoYW5kbGluZyBvbmx5IGEgc2luZ2xlIGRvY3VtZW50XG4gIC8vIChub3QgbGlua2VkIG9uZXMpLlxuICBmdW5jdGlvbiBtYWtlQ2hhbmdlU2luZ2xlRG9jKGRvYywgY2hhbmdlLCBzZWxBZnRlciwgc3BhbnMpIHtcbiAgICBpZiAoZG9jLmNtICYmICFkb2MuY20uY3VyT3ApXG4gICAgICByZXR1cm4gb3BlcmF0aW9uKGRvYy5jbSwgbWFrZUNoYW5nZVNpbmdsZURvYykoZG9jLCBjaGFuZ2UsIHNlbEFmdGVyLCBzcGFucyk7XG5cbiAgICBpZiAoY2hhbmdlLnRvLmxpbmUgPCBkb2MuZmlyc3QpIHtcbiAgICAgIHNoaWZ0RG9jKGRvYywgY2hhbmdlLnRleHQubGVuZ3RoIC0gMSAtIChjaGFuZ2UudG8ubGluZSAtIGNoYW5nZS5mcm9tLmxpbmUpKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGNoYW5nZS5mcm9tLmxpbmUgPiBkb2MubGFzdExpbmUoKSkgcmV0dXJuO1xuXG4gICAgLy8gQ2xpcCB0aGUgY2hhbmdlIHRvIHRoZSBzaXplIG9mIHRoaXMgZG9jXG4gICAgaWYgKGNoYW5nZS5mcm9tLmxpbmUgPCBkb2MuZmlyc3QpIHtcbiAgICAgIHZhciBzaGlmdCA9IGNoYW5nZS50ZXh0Lmxlbmd0aCAtIDEgLSAoZG9jLmZpcnN0IC0gY2hhbmdlLmZyb20ubGluZSk7XG4gICAgICBzaGlmdERvYyhkb2MsIHNoaWZ0KTtcbiAgICAgIGNoYW5nZSA9IHtmcm9tOiBQb3MoZG9jLmZpcnN0LCAwKSwgdG86IFBvcyhjaGFuZ2UudG8ubGluZSArIHNoaWZ0LCBjaGFuZ2UudG8uY2gpLFxuICAgICAgICAgICAgICAgIHRleHQ6IFtsc3QoY2hhbmdlLnRleHQpXSwgb3JpZ2luOiBjaGFuZ2Uub3JpZ2lufTtcbiAgICB9XG4gICAgdmFyIGxhc3QgPSBkb2MubGFzdExpbmUoKTtcbiAgICBpZiAoY2hhbmdlLnRvLmxpbmUgPiBsYXN0KSB7XG4gICAgICBjaGFuZ2UgPSB7ZnJvbTogY2hhbmdlLmZyb20sIHRvOiBQb3MobGFzdCwgZ2V0TGluZShkb2MsIGxhc3QpLnRleHQubGVuZ3RoKSxcbiAgICAgICAgICAgICAgICB0ZXh0OiBbY2hhbmdlLnRleHRbMF1dLCBvcmlnaW46IGNoYW5nZS5vcmlnaW59O1xuICAgIH1cblxuICAgIGNoYW5nZS5yZW1vdmVkID0gZ2V0QmV0d2Vlbihkb2MsIGNoYW5nZS5mcm9tLCBjaGFuZ2UudG8pO1xuXG4gICAgaWYgKCFzZWxBZnRlcikgc2VsQWZ0ZXIgPSBjb21wdXRlU2VsQWZ0ZXJDaGFuZ2UoZG9jLCBjaGFuZ2UpO1xuICAgIGlmIChkb2MuY20pIG1ha2VDaGFuZ2VTaW5nbGVEb2NJbkVkaXRvcihkb2MuY20sIGNoYW5nZSwgc3BhbnMpO1xuICAgIGVsc2UgdXBkYXRlRG9jKGRvYywgY2hhbmdlLCBzcGFucyk7XG4gICAgc2V0U2VsZWN0aW9uTm9VbmRvKGRvYywgc2VsQWZ0ZXIsIHNlbF9kb250U2Nyb2xsKTtcbiAgfVxuXG4gIC8vIEhhbmRsZSB0aGUgaW50ZXJhY3Rpb24gb2YgYSBjaGFuZ2UgdG8gYSBkb2N1bWVudCB3aXRoIHRoZSBlZGl0b3JcbiAgLy8gdGhhdCB0aGlzIGRvY3VtZW50IGlzIHBhcnQgb2YuXG4gIGZ1bmN0aW9uIG1ha2VDaGFuZ2VTaW5nbGVEb2NJbkVkaXRvcihjbSwgY2hhbmdlLCBzcGFucykge1xuICAgIHZhciBkb2MgPSBjbS5kb2MsIGRpc3BsYXkgPSBjbS5kaXNwbGF5LCBmcm9tID0gY2hhbmdlLmZyb20sIHRvID0gY2hhbmdlLnRvO1xuXG4gICAgdmFyIHJlY29tcHV0ZU1heExlbmd0aCA9IGZhbHNlLCBjaGVja1dpZHRoU3RhcnQgPSBmcm9tLmxpbmU7XG4gICAgaWYgKCFjbS5vcHRpb25zLmxpbmVXcmFwcGluZykge1xuICAgICAgY2hlY2tXaWR0aFN0YXJ0ID0gbGluZU5vKHZpc3VhbExpbmUoZ2V0TGluZShkb2MsIGZyb20ubGluZSkpKTtcbiAgICAgIGRvYy5pdGVyKGNoZWNrV2lkdGhTdGFydCwgdG8ubGluZSArIDEsIGZ1bmN0aW9uKGxpbmUpIHtcbiAgICAgICAgaWYgKGxpbmUgPT0gZGlzcGxheS5tYXhMaW5lKSB7XG4gICAgICAgICAgcmVjb21wdXRlTWF4TGVuZ3RoID0gdHJ1ZTtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKGRvYy5zZWwuY29udGFpbnMoY2hhbmdlLmZyb20sIGNoYW5nZS50bykgPiAtMSlcbiAgICAgIHNpZ25hbEN1cnNvckFjdGl2aXR5KGNtKTtcblxuICAgIHVwZGF0ZURvYyhkb2MsIGNoYW5nZSwgc3BhbnMsIGVzdGltYXRlSGVpZ2h0KGNtKSk7XG5cbiAgICBpZiAoIWNtLm9wdGlvbnMubGluZVdyYXBwaW5nKSB7XG4gICAgICBkb2MuaXRlcihjaGVja1dpZHRoU3RhcnQsIGZyb20ubGluZSArIGNoYW5nZS50ZXh0Lmxlbmd0aCwgZnVuY3Rpb24obGluZSkge1xuICAgICAgICB2YXIgbGVuID0gbGluZUxlbmd0aChsaW5lKTtcbiAgICAgICAgaWYgKGxlbiA+IGRpc3BsYXkubWF4TGluZUxlbmd0aCkge1xuICAgICAgICAgIGRpc3BsYXkubWF4TGluZSA9IGxpbmU7XG4gICAgICAgICAgZGlzcGxheS5tYXhMaW5lTGVuZ3RoID0gbGVuO1xuICAgICAgICAgIGRpc3BsYXkubWF4TGluZUNoYW5nZWQgPSB0cnVlO1xuICAgICAgICAgIHJlY29tcHV0ZU1heExlbmd0aCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGlmIChyZWNvbXB1dGVNYXhMZW5ndGgpIGNtLmN1ck9wLnVwZGF0ZU1heExpbmUgPSB0cnVlO1xuICAgIH1cblxuICAgIC8vIEFkanVzdCBmcm9udGllciwgc2NoZWR1bGUgd29ya2VyXG4gICAgZG9jLmZyb250aWVyID0gTWF0aC5taW4oZG9jLmZyb250aWVyLCBmcm9tLmxpbmUpO1xuICAgIHN0YXJ0V29ya2VyKGNtLCA0MDApO1xuXG4gICAgdmFyIGxlbmRpZmYgPSBjaGFuZ2UudGV4dC5sZW5ndGggLSAodG8ubGluZSAtIGZyb20ubGluZSkgLSAxO1xuICAgIC8vIFJlbWVtYmVyIHRoYXQgdGhlc2UgbGluZXMgY2hhbmdlZCwgZm9yIHVwZGF0aW5nIHRoZSBkaXNwbGF5XG4gICAgaWYgKGNoYW5nZS5mdWxsKVxuICAgICAgcmVnQ2hhbmdlKGNtKTtcbiAgICBlbHNlIGlmIChmcm9tLmxpbmUgPT0gdG8ubGluZSAmJiBjaGFuZ2UudGV4dC5sZW5ndGggPT0gMSAmJiAhaXNXaG9sZUxpbmVVcGRhdGUoY20uZG9jLCBjaGFuZ2UpKVxuICAgICAgcmVnTGluZUNoYW5nZShjbSwgZnJvbS5saW5lLCBcInRleHRcIik7XG4gICAgZWxzZVxuICAgICAgcmVnQ2hhbmdlKGNtLCBmcm9tLmxpbmUsIHRvLmxpbmUgKyAxLCBsZW5kaWZmKTtcblxuICAgIHZhciBjaGFuZ2VzSGFuZGxlciA9IGhhc0hhbmRsZXIoY20sIFwiY2hhbmdlc1wiKSwgY2hhbmdlSGFuZGxlciA9IGhhc0hhbmRsZXIoY20sIFwiY2hhbmdlXCIpO1xuICAgIGlmIChjaGFuZ2VIYW5kbGVyIHx8IGNoYW5nZXNIYW5kbGVyKSB7XG4gICAgICB2YXIgb2JqID0ge1xuICAgICAgICBmcm9tOiBmcm9tLCB0bzogdG8sXG4gICAgICAgIHRleHQ6IGNoYW5nZS50ZXh0LFxuICAgICAgICByZW1vdmVkOiBjaGFuZ2UucmVtb3ZlZCxcbiAgICAgICAgb3JpZ2luOiBjaGFuZ2Uub3JpZ2luXG4gICAgICB9O1xuICAgICAgaWYgKGNoYW5nZUhhbmRsZXIpIHNpZ25hbExhdGVyKGNtLCBcImNoYW5nZVwiLCBjbSwgb2JqKTtcbiAgICAgIGlmIChjaGFuZ2VzSGFuZGxlcikgKGNtLmN1ck9wLmNoYW5nZU9ianMgfHwgKGNtLmN1ck9wLmNoYW5nZU9ianMgPSBbXSkpLnB1c2gob2JqKTtcbiAgICB9XG4gICAgY20uZGlzcGxheS5zZWxGb3JDb250ZXh0TWVudSA9IG51bGw7XG4gIH1cblxuICBmdW5jdGlvbiByZXBsYWNlUmFuZ2UoZG9jLCBjb2RlLCBmcm9tLCB0bywgb3JpZ2luKSB7XG4gICAgaWYgKCF0bykgdG8gPSBmcm9tO1xuICAgIGlmIChjbXAodG8sIGZyb20pIDwgMCkgeyB2YXIgdG1wID0gdG87IHRvID0gZnJvbTsgZnJvbSA9IHRtcDsgfVxuICAgIGlmICh0eXBlb2YgY29kZSA9PSBcInN0cmluZ1wiKSBjb2RlID0gZG9jLnNwbGl0TGluZXMoY29kZSk7XG4gICAgbWFrZUNoYW5nZShkb2MsIHtmcm9tOiBmcm9tLCB0bzogdG8sIHRleHQ6IGNvZGUsIG9yaWdpbjogb3JpZ2lufSk7XG4gIH1cblxuICAvLyBTQ1JPTExJTkcgVEhJTkdTIElOVE8gVklFV1xuXG4gIC8vIElmIGFuIGVkaXRvciBzaXRzIG9uIHRoZSB0b3Agb3IgYm90dG9tIG9mIHRoZSB3aW5kb3csIHBhcnRpYWxseVxuICAvLyBzY3JvbGxlZCBvdXQgb2YgdmlldywgdGhpcyBlbnN1cmVzIHRoYXQgdGhlIGN1cnNvciBpcyB2aXNpYmxlLlxuICBmdW5jdGlvbiBtYXliZVNjcm9sbFdpbmRvdyhjbSwgY29vcmRzKSB7XG4gICAgaWYgKHNpZ25hbERPTUV2ZW50KGNtLCBcInNjcm9sbEN1cnNvckludG9WaWV3XCIpKSByZXR1cm47XG5cbiAgICB2YXIgZGlzcGxheSA9IGNtLmRpc3BsYXksIGJveCA9IGRpc3BsYXkuc2l6ZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksIGRvU2Nyb2xsID0gbnVsbDtcbiAgICBpZiAoY29vcmRzLnRvcCArIGJveC50b3AgPCAwKSBkb1Njcm9sbCA9IHRydWU7XG4gICAgZWxzZSBpZiAoY29vcmRzLmJvdHRvbSArIGJveC50b3AgPiAod2luZG93LmlubmVySGVpZ2h0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQpKSBkb1Njcm9sbCA9IGZhbHNlO1xuICAgIGlmIChkb1Njcm9sbCAhPSBudWxsICYmICFwaGFudG9tKSB7XG4gICAgICB2YXIgc2Nyb2xsTm9kZSA9IGVsdChcImRpdlwiLCBcIlxcdTIwMGJcIiwgbnVsbCwgXCJwb3NpdGlvbjogYWJzb2x1dGU7IHRvcDogXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgKGNvb3Jkcy50b3AgLSBkaXNwbGF5LnZpZXdPZmZzZXQgLSBwYWRkaW5nVG9wKGNtLmRpc3BsYXkpKSArIFwicHg7IGhlaWdodDogXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgKGNvb3Jkcy5ib3R0b20gLSBjb29yZHMudG9wICsgc2Nyb2xsR2FwKGNtKSArIGRpc3BsYXkuYmFySGVpZ2h0KSArIFwicHg7IGxlZnQ6IFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvb3Jkcy5sZWZ0ICsgXCJweDsgd2lkdGg6IDJweDtcIik7XG4gICAgICBjbS5kaXNwbGF5LmxpbmVTcGFjZS5hcHBlbmRDaGlsZChzY3JvbGxOb2RlKTtcbiAgICAgIHNjcm9sbE5vZGUuc2Nyb2xsSW50b1ZpZXcoZG9TY3JvbGwpO1xuICAgICAgY20uZGlzcGxheS5saW5lU3BhY2UucmVtb3ZlQ2hpbGQoc2Nyb2xsTm9kZSk7XG4gICAgfVxuICB9XG5cbiAgLy8gU2Nyb2xsIGEgZ2l2ZW4gcG9zaXRpb24gaW50byB2aWV3IChpbW1lZGlhdGVseSksIHZlcmlmeWluZyB0aGF0XG4gIC8vIGl0IGFjdHVhbGx5IGJlY2FtZSB2aXNpYmxlIChhcyBsaW5lIGhlaWdodHMgYXJlIGFjY3VyYXRlbHlcbiAgLy8gbWVhc3VyZWQsIHRoZSBwb3NpdGlvbiBvZiBzb21ldGhpbmcgbWF5ICdkcmlmdCcgZHVyaW5nIGRyYXdpbmcpLlxuICBmdW5jdGlvbiBzY3JvbGxQb3NJbnRvVmlldyhjbSwgcG9zLCBlbmQsIG1hcmdpbikge1xuICAgIGlmIChtYXJnaW4gPT0gbnVsbCkgbWFyZ2luID0gMDtcbiAgICBmb3IgKHZhciBsaW1pdCA9IDA7IGxpbWl0IDwgNTsgbGltaXQrKykge1xuICAgICAgdmFyIGNoYW5nZWQgPSBmYWxzZSwgY29vcmRzID0gY3Vyc29yQ29vcmRzKGNtLCBwb3MpO1xuICAgICAgdmFyIGVuZENvb3JkcyA9ICFlbmQgfHwgZW5kID09IHBvcyA/IGNvb3JkcyA6IGN1cnNvckNvb3JkcyhjbSwgZW5kKTtcbiAgICAgIHZhciBzY3JvbGxQb3MgPSBjYWxjdWxhdGVTY3JvbGxQb3MoY20sIE1hdGgubWluKGNvb3Jkcy5sZWZ0LCBlbmRDb29yZHMubGVmdCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdGgubWluKGNvb3Jkcy50b3AsIGVuZENvb3Jkcy50b3ApIC0gbWFyZ2luLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXRoLm1heChjb29yZHMubGVmdCwgZW5kQ29vcmRzLmxlZnQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXRoLm1heChjb29yZHMuYm90dG9tLCBlbmRDb29yZHMuYm90dG9tKSArIG1hcmdpbik7XG4gICAgICB2YXIgc3RhcnRUb3AgPSBjbS5kb2Muc2Nyb2xsVG9wLCBzdGFydExlZnQgPSBjbS5kb2Muc2Nyb2xsTGVmdDtcbiAgICAgIGlmIChzY3JvbGxQb3Muc2Nyb2xsVG9wICE9IG51bGwpIHtcbiAgICAgICAgc2V0U2Nyb2xsVG9wKGNtLCBzY3JvbGxQb3Muc2Nyb2xsVG9wKTtcbiAgICAgICAgaWYgKE1hdGguYWJzKGNtLmRvYy5zY3JvbGxUb3AgLSBzdGFydFRvcCkgPiAxKSBjaGFuZ2VkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGlmIChzY3JvbGxQb3Muc2Nyb2xsTGVmdCAhPSBudWxsKSB7XG4gICAgICAgIHNldFNjcm9sbExlZnQoY20sIHNjcm9sbFBvcy5zY3JvbGxMZWZ0KTtcbiAgICAgICAgaWYgKE1hdGguYWJzKGNtLmRvYy5zY3JvbGxMZWZ0IC0gc3RhcnRMZWZ0KSA+IDEpIGNoYW5nZWQgPSB0cnVlO1xuICAgICAgfVxuICAgICAgaWYgKCFjaGFuZ2VkKSBicmVhaztcbiAgICB9XG4gICAgcmV0dXJuIGNvb3JkcztcbiAgfVxuXG4gIC8vIFNjcm9sbCBhIGdpdmVuIHNldCBvZiBjb29yZGluYXRlcyBpbnRvIHZpZXcgKGltbWVkaWF0ZWx5KS5cbiAgZnVuY3Rpb24gc2Nyb2xsSW50b1ZpZXcoY20sIHgxLCB5MSwgeDIsIHkyKSB7XG4gICAgdmFyIHNjcm9sbFBvcyA9IGNhbGN1bGF0ZVNjcm9sbFBvcyhjbSwgeDEsIHkxLCB4MiwgeTIpO1xuICAgIGlmIChzY3JvbGxQb3Muc2Nyb2xsVG9wICE9IG51bGwpIHNldFNjcm9sbFRvcChjbSwgc2Nyb2xsUG9zLnNjcm9sbFRvcCk7XG4gICAgaWYgKHNjcm9sbFBvcy5zY3JvbGxMZWZ0ICE9IG51bGwpIHNldFNjcm9sbExlZnQoY20sIHNjcm9sbFBvcy5zY3JvbGxMZWZ0KTtcbiAgfVxuXG4gIC8vIENhbGN1bGF0ZSBhIG5ldyBzY3JvbGwgcG9zaXRpb24gbmVlZGVkIHRvIHNjcm9sbCB0aGUgZ2l2ZW5cbiAgLy8gcmVjdGFuZ2xlIGludG8gdmlldy4gUmV0dXJucyBhbiBvYmplY3Qgd2l0aCBzY3JvbGxUb3AgYW5kXG4gIC8vIHNjcm9sbExlZnQgcHJvcGVydGllcy4gV2hlbiB0aGVzZSBhcmUgdW5kZWZpbmVkLCB0aGVcbiAgLy8gdmVydGljYWwvaG9yaXpvbnRhbCBwb3NpdGlvbiBkb2VzIG5vdCBuZWVkIHRvIGJlIGFkanVzdGVkLlxuICBmdW5jdGlvbiBjYWxjdWxhdGVTY3JvbGxQb3MoY20sIHgxLCB5MSwgeDIsIHkyKSB7XG4gICAgdmFyIGRpc3BsYXkgPSBjbS5kaXNwbGF5LCBzbmFwTWFyZ2luID0gdGV4dEhlaWdodChjbS5kaXNwbGF5KTtcbiAgICBpZiAoeTEgPCAwKSB5MSA9IDA7XG4gICAgdmFyIHNjcmVlbnRvcCA9IGNtLmN1ck9wICYmIGNtLmN1ck9wLnNjcm9sbFRvcCAhPSBudWxsID8gY20uY3VyT3Auc2Nyb2xsVG9wIDogZGlzcGxheS5zY3JvbGxlci5zY3JvbGxUb3A7XG4gICAgdmFyIHNjcmVlbiA9IGRpc3BsYXlIZWlnaHQoY20pLCByZXN1bHQgPSB7fTtcbiAgICBpZiAoeTIgLSB5MSA+IHNjcmVlbikgeTIgPSB5MSArIHNjcmVlbjtcbiAgICB2YXIgZG9jQm90dG9tID0gY20uZG9jLmhlaWdodCArIHBhZGRpbmdWZXJ0KGRpc3BsYXkpO1xuICAgIHZhciBhdFRvcCA9IHkxIDwgc25hcE1hcmdpbiwgYXRCb3R0b20gPSB5MiA+IGRvY0JvdHRvbSAtIHNuYXBNYXJnaW47XG4gICAgaWYgKHkxIDwgc2NyZWVudG9wKSB7XG4gICAgICByZXN1bHQuc2Nyb2xsVG9wID0gYXRUb3AgPyAwIDogeTE7XG4gICAgfSBlbHNlIGlmICh5MiA+IHNjcmVlbnRvcCArIHNjcmVlbikge1xuICAgICAgdmFyIG5ld1RvcCA9IE1hdGgubWluKHkxLCAoYXRCb3R0b20gPyBkb2NCb3R0b20gOiB5MikgLSBzY3JlZW4pO1xuICAgICAgaWYgKG5ld1RvcCAhPSBzY3JlZW50b3ApIHJlc3VsdC5zY3JvbGxUb3AgPSBuZXdUb3A7XG4gICAgfVxuXG4gICAgdmFyIHNjcmVlbmxlZnQgPSBjbS5jdXJPcCAmJiBjbS5jdXJPcC5zY3JvbGxMZWZ0ICE9IG51bGwgPyBjbS5jdXJPcC5zY3JvbGxMZWZ0IDogZGlzcGxheS5zY3JvbGxlci5zY3JvbGxMZWZ0O1xuICAgIHZhciBzY3JlZW53ID0gZGlzcGxheVdpZHRoKGNtKSAtIChjbS5vcHRpb25zLmZpeGVkR3V0dGVyID8gZGlzcGxheS5ndXR0ZXJzLm9mZnNldFdpZHRoIDogMCk7XG4gICAgdmFyIHRvb1dpZGUgPSB4MiAtIHgxID4gc2NyZWVudztcbiAgICBpZiAodG9vV2lkZSkgeDIgPSB4MSArIHNjcmVlbnc7XG4gICAgaWYgKHgxIDwgMTApXG4gICAgICByZXN1bHQuc2Nyb2xsTGVmdCA9IDA7XG4gICAgZWxzZSBpZiAoeDEgPCBzY3JlZW5sZWZ0KVxuICAgICAgcmVzdWx0LnNjcm9sbExlZnQgPSBNYXRoLm1heCgwLCB4MSAtICh0b29XaWRlID8gMCA6IDEwKSk7XG4gICAgZWxzZSBpZiAoeDIgPiBzY3JlZW53ICsgc2NyZWVubGVmdCAtIDMpXG4gICAgICByZXN1bHQuc2Nyb2xsTGVmdCA9IHgyICsgKHRvb1dpZGUgPyAwIDogMTApIC0gc2NyZWVudztcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLy8gU3RvcmUgYSByZWxhdGl2ZSBhZGp1c3RtZW50IHRvIHRoZSBzY3JvbGwgcG9zaXRpb24gaW4gdGhlIGN1cnJlbnRcbiAgLy8gb3BlcmF0aW9uICh0byBiZSBhcHBsaWVkIHdoZW4gdGhlIG9wZXJhdGlvbiBmaW5pc2hlcykuXG4gIGZ1bmN0aW9uIGFkZFRvU2Nyb2xsUG9zKGNtLCBsZWZ0LCB0b3ApIHtcbiAgICBpZiAobGVmdCAhPSBudWxsIHx8IHRvcCAhPSBudWxsKSByZXNvbHZlU2Nyb2xsVG9Qb3MoY20pO1xuICAgIGlmIChsZWZ0ICE9IG51bGwpXG4gICAgICBjbS5jdXJPcC5zY3JvbGxMZWZ0ID0gKGNtLmN1ck9wLnNjcm9sbExlZnQgPT0gbnVsbCA/IGNtLmRvYy5zY3JvbGxMZWZ0IDogY20uY3VyT3Auc2Nyb2xsTGVmdCkgKyBsZWZ0O1xuICAgIGlmICh0b3AgIT0gbnVsbClcbiAgICAgIGNtLmN1ck9wLnNjcm9sbFRvcCA9IChjbS5jdXJPcC5zY3JvbGxUb3AgPT0gbnVsbCA/IGNtLmRvYy5zY3JvbGxUb3AgOiBjbS5jdXJPcC5zY3JvbGxUb3ApICsgdG9wO1xuICB9XG5cbiAgLy8gTWFrZSBzdXJlIHRoYXQgYXQgdGhlIGVuZCBvZiB0aGUgb3BlcmF0aW9uIHRoZSBjdXJyZW50IGN1cnNvciBpc1xuICAvLyBzaG93bi5cbiAgZnVuY3Rpb24gZW5zdXJlQ3Vyc29yVmlzaWJsZShjbSkge1xuICAgIHJlc29sdmVTY3JvbGxUb1BvcyhjbSk7XG4gICAgdmFyIGN1ciA9IGNtLmdldEN1cnNvcigpLCBmcm9tID0gY3VyLCB0byA9IGN1cjtcbiAgICBpZiAoIWNtLm9wdGlvbnMubGluZVdyYXBwaW5nKSB7XG4gICAgICBmcm9tID0gY3VyLmNoID8gUG9zKGN1ci5saW5lLCBjdXIuY2ggLSAxKSA6IGN1cjtcbiAgICAgIHRvID0gUG9zKGN1ci5saW5lLCBjdXIuY2ggKyAxKTtcbiAgICB9XG4gICAgY20uY3VyT3Auc2Nyb2xsVG9Qb3MgPSB7ZnJvbTogZnJvbSwgdG86IHRvLCBtYXJnaW46IGNtLm9wdGlvbnMuY3Vyc29yU2Nyb2xsTWFyZ2luLCBpc0N1cnNvcjogdHJ1ZX07XG4gIH1cblxuICAvLyBXaGVuIGFuIG9wZXJhdGlvbiBoYXMgaXRzIHNjcm9sbFRvUG9zIHByb3BlcnR5IHNldCwgYW5kIGFub3RoZXJcbiAgLy8gc2Nyb2xsIGFjdGlvbiBpcyBhcHBsaWVkIGJlZm9yZSB0aGUgZW5kIG9mIHRoZSBvcGVyYXRpb24sIHRoaXNcbiAgLy8gJ3NpbXVsYXRlcycgc2Nyb2xsaW5nIHRoYXQgcG9zaXRpb24gaW50byB2aWV3IGluIGEgY2hlYXAgd2F5LCBzb1xuICAvLyB0aGF0IHRoZSBlZmZlY3Qgb2YgaW50ZXJtZWRpYXRlIHNjcm9sbCBjb21tYW5kcyBpcyBub3QgaWdub3JlZC5cbiAgZnVuY3Rpb24gcmVzb2x2ZVNjcm9sbFRvUG9zKGNtKSB7XG4gICAgdmFyIHJhbmdlID0gY20uY3VyT3Auc2Nyb2xsVG9Qb3M7XG4gICAgaWYgKHJhbmdlKSB7XG4gICAgICBjbS5jdXJPcC5zY3JvbGxUb1BvcyA9IG51bGw7XG4gICAgICB2YXIgZnJvbSA9IGVzdGltYXRlQ29vcmRzKGNtLCByYW5nZS5mcm9tKSwgdG8gPSBlc3RpbWF0ZUNvb3JkcyhjbSwgcmFuZ2UudG8pO1xuICAgICAgdmFyIHNQb3MgPSBjYWxjdWxhdGVTY3JvbGxQb3MoY20sIE1hdGgubWluKGZyb20ubGVmdCwgdG8ubGVmdCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXRoLm1pbihmcm9tLnRvcCwgdG8udG9wKSAtIHJhbmdlLm1hcmdpbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdGgubWF4KGZyb20ucmlnaHQsIHRvLnJpZ2h0KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdGgubWF4KGZyb20uYm90dG9tLCB0by5ib3R0b20pICsgcmFuZ2UubWFyZ2luKTtcbiAgICAgIGNtLnNjcm9sbFRvKHNQb3Muc2Nyb2xsTGVmdCwgc1Bvcy5zY3JvbGxUb3ApO1xuICAgIH1cbiAgfVxuXG4gIC8vIEFQSSBVVElMSVRJRVNcblxuICAvLyBJbmRlbnQgdGhlIGdpdmVuIGxpbmUuIFRoZSBob3cgcGFyYW1ldGVyIGNhbiBiZSBcInNtYXJ0XCIsXG4gIC8vIFwiYWRkXCIvbnVsbCwgXCJzdWJ0cmFjdFwiLCBvciBcInByZXZcIi4gV2hlbiBhZ2dyZXNzaXZlIGlzIGZhbHNlXG4gIC8vICh0eXBpY2FsbHkgc2V0IHRvIHRydWUgZm9yIGZvcmNlZCBzaW5nbGUtbGluZSBpbmRlbnRzKSwgZW1wdHlcbiAgLy8gbGluZXMgYXJlIG5vdCBpbmRlbnRlZCwgYW5kIHBsYWNlcyB3aGVyZSB0aGUgbW9kZSByZXR1cm5zIFBhc3NcbiAgLy8gYXJlIGxlZnQgYWxvbmUuXG4gIGZ1bmN0aW9uIGluZGVudExpbmUoY20sIG4sIGhvdywgYWdncmVzc2l2ZSkge1xuICAgIHZhciBkb2MgPSBjbS5kb2MsIHN0YXRlO1xuICAgIGlmIChob3cgPT0gbnVsbCkgaG93ID0gXCJhZGRcIjtcbiAgICBpZiAoaG93ID09IFwic21hcnRcIikge1xuICAgICAgLy8gRmFsbCBiYWNrIHRvIFwicHJldlwiIHdoZW4gdGhlIG1vZGUgZG9lc24ndCBoYXZlIGFuIGluZGVudGF0aW9uXG4gICAgICAvLyBtZXRob2QuXG4gICAgICBpZiAoIWRvYy5tb2RlLmluZGVudCkgaG93ID0gXCJwcmV2XCI7XG4gICAgICBlbHNlIHN0YXRlID0gZ2V0U3RhdGVCZWZvcmUoY20sIG4pO1xuICAgIH1cblxuICAgIHZhciB0YWJTaXplID0gY20ub3B0aW9ucy50YWJTaXplO1xuICAgIHZhciBsaW5lID0gZ2V0TGluZShkb2MsIG4pLCBjdXJTcGFjZSA9IGNvdW50Q29sdW1uKGxpbmUudGV4dCwgbnVsbCwgdGFiU2l6ZSk7XG4gICAgaWYgKGxpbmUuc3RhdGVBZnRlcikgbGluZS5zdGF0ZUFmdGVyID0gbnVsbDtcbiAgICB2YXIgY3VyU3BhY2VTdHJpbmcgPSBsaW5lLnRleHQubWF0Y2goL15cXHMqLylbMF0sIGluZGVudGF0aW9uO1xuICAgIGlmICghYWdncmVzc2l2ZSAmJiAhL1xcUy8udGVzdChsaW5lLnRleHQpKSB7XG4gICAgICBpbmRlbnRhdGlvbiA9IDA7XG4gICAgICBob3cgPSBcIm5vdFwiO1xuICAgIH0gZWxzZSBpZiAoaG93ID09IFwic21hcnRcIikge1xuICAgICAgaW5kZW50YXRpb24gPSBkb2MubW9kZS5pbmRlbnQoc3RhdGUsIGxpbmUudGV4dC5zbGljZShjdXJTcGFjZVN0cmluZy5sZW5ndGgpLCBsaW5lLnRleHQpO1xuICAgICAgaWYgKGluZGVudGF0aW9uID09IFBhc3MgfHwgaW5kZW50YXRpb24gPiAxNTApIHtcbiAgICAgICAgaWYgKCFhZ2dyZXNzaXZlKSByZXR1cm47XG4gICAgICAgIGhvdyA9IFwicHJldlwiO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoaG93ID09IFwicHJldlwiKSB7XG4gICAgICBpZiAobiA+IGRvYy5maXJzdCkgaW5kZW50YXRpb24gPSBjb3VudENvbHVtbihnZXRMaW5lKGRvYywgbi0xKS50ZXh0LCBudWxsLCB0YWJTaXplKTtcbiAgICAgIGVsc2UgaW5kZW50YXRpb24gPSAwO1xuICAgIH0gZWxzZSBpZiAoaG93ID09IFwiYWRkXCIpIHtcbiAgICAgIGluZGVudGF0aW9uID0gY3VyU3BhY2UgKyBjbS5vcHRpb25zLmluZGVudFVuaXQ7XG4gICAgfSBlbHNlIGlmIChob3cgPT0gXCJzdWJ0cmFjdFwiKSB7XG4gICAgICBpbmRlbnRhdGlvbiA9IGN1clNwYWNlIC0gY20ub3B0aW9ucy5pbmRlbnRVbml0O1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGhvdyA9PSBcIm51bWJlclwiKSB7XG4gICAgICBpbmRlbnRhdGlvbiA9IGN1clNwYWNlICsgaG93O1xuICAgIH1cbiAgICBpbmRlbnRhdGlvbiA9IE1hdGgubWF4KDAsIGluZGVudGF0aW9uKTtcblxuICAgIHZhciBpbmRlbnRTdHJpbmcgPSBcIlwiLCBwb3MgPSAwO1xuICAgIGlmIChjbS5vcHRpb25zLmluZGVudFdpdGhUYWJzKVxuICAgICAgZm9yICh2YXIgaSA9IE1hdGguZmxvb3IoaW5kZW50YXRpb24gLyB0YWJTaXplKTsgaTsgLS1pKSB7cG9zICs9IHRhYlNpemU7IGluZGVudFN0cmluZyArPSBcIlxcdFwiO31cbiAgICBpZiAocG9zIDwgaW5kZW50YXRpb24pIGluZGVudFN0cmluZyArPSBzcGFjZVN0cihpbmRlbnRhdGlvbiAtIHBvcyk7XG5cbiAgICBpZiAoaW5kZW50U3RyaW5nICE9IGN1clNwYWNlU3RyaW5nKSB7XG4gICAgICByZXBsYWNlUmFuZ2UoZG9jLCBpbmRlbnRTdHJpbmcsIFBvcyhuLCAwKSwgUG9zKG4sIGN1clNwYWNlU3RyaW5nLmxlbmd0aCksIFwiK2lucHV0XCIpO1xuICAgICAgbGluZS5zdGF0ZUFmdGVyID0gbnVsbDtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBFbnN1cmUgdGhhdCwgaWYgdGhlIGN1cnNvciB3YXMgaW4gdGhlIHdoaXRlc3BhY2UgYXQgdGhlIHN0YXJ0XG4gICAgICAvLyBvZiB0aGUgbGluZSwgaXQgaXMgbW92ZWQgdG8gdGhlIGVuZCBvZiB0aGF0IHNwYWNlLlxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkb2Muc2VsLnJhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgcmFuZ2UgPSBkb2Muc2VsLnJhbmdlc1tpXTtcbiAgICAgICAgaWYgKHJhbmdlLmhlYWQubGluZSA9PSBuICYmIHJhbmdlLmhlYWQuY2ggPCBjdXJTcGFjZVN0cmluZy5sZW5ndGgpIHtcbiAgICAgICAgICB2YXIgcG9zID0gUG9zKG4sIGN1clNwYWNlU3RyaW5nLmxlbmd0aCk7XG4gICAgICAgICAgcmVwbGFjZU9uZVNlbGVjdGlvbihkb2MsIGksIG5ldyBSYW5nZShwb3MsIHBvcykpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gVXRpbGl0eSBmb3IgYXBwbHlpbmcgYSBjaGFuZ2UgdG8gYSBsaW5lIGJ5IGhhbmRsZSBvciBudW1iZXIsXG4gIC8vIHJldHVybmluZyB0aGUgbnVtYmVyIGFuZCBvcHRpb25hbGx5IHJlZ2lzdGVyaW5nIHRoZSBsaW5lIGFzXG4gIC8vIGNoYW5nZWQuXG4gIGZ1bmN0aW9uIGNoYW5nZUxpbmUoZG9jLCBoYW5kbGUsIGNoYW5nZVR5cGUsIG9wKSB7XG4gICAgdmFyIG5vID0gaGFuZGxlLCBsaW5lID0gaGFuZGxlO1xuICAgIGlmICh0eXBlb2YgaGFuZGxlID09IFwibnVtYmVyXCIpIGxpbmUgPSBnZXRMaW5lKGRvYywgY2xpcExpbmUoZG9jLCBoYW5kbGUpKTtcbiAgICBlbHNlIG5vID0gbGluZU5vKGhhbmRsZSk7XG4gICAgaWYgKG5vID09IG51bGwpIHJldHVybiBudWxsO1xuICAgIGlmIChvcChsaW5lLCBubykgJiYgZG9jLmNtKSByZWdMaW5lQ2hhbmdlKGRvYy5jbSwgbm8sIGNoYW5nZVR5cGUpO1xuICAgIHJldHVybiBsaW5lO1xuICB9XG5cbiAgLy8gSGVscGVyIGZvciBkZWxldGluZyB0ZXh0IG5lYXIgdGhlIHNlbGVjdGlvbihzKSwgdXNlZCB0byBpbXBsZW1lbnRcbiAgLy8gYmFja3NwYWNlLCBkZWxldGUsIGFuZCBzaW1pbGFyIGZ1bmN0aW9uYWxpdHkuXG4gIGZ1bmN0aW9uIGRlbGV0ZU5lYXJTZWxlY3Rpb24oY20sIGNvbXB1dGUpIHtcbiAgICB2YXIgcmFuZ2VzID0gY20uZG9jLnNlbC5yYW5nZXMsIGtpbGwgPSBbXTtcbiAgICAvLyBCdWlsZCB1cCBhIHNldCBvZiByYW5nZXMgdG8ga2lsbCBmaXJzdCwgbWVyZ2luZyBvdmVybGFwcGluZ1xuICAgIC8vIHJhbmdlcy5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHRvS2lsbCA9IGNvbXB1dGUocmFuZ2VzW2ldKTtcbiAgICAgIHdoaWxlIChraWxsLmxlbmd0aCAmJiBjbXAodG9LaWxsLmZyb20sIGxzdChraWxsKS50bykgPD0gMCkge1xuICAgICAgICB2YXIgcmVwbGFjZWQgPSBraWxsLnBvcCgpO1xuICAgICAgICBpZiAoY21wKHJlcGxhY2VkLmZyb20sIHRvS2lsbC5mcm9tKSA8IDApIHtcbiAgICAgICAgICB0b0tpbGwuZnJvbSA9IHJlcGxhY2VkLmZyb207XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGtpbGwucHVzaCh0b0tpbGwpO1xuICAgIH1cbiAgICAvLyBOZXh0LCByZW1vdmUgdGhvc2UgYWN0dWFsIHJhbmdlcy5cbiAgICBydW5Jbk9wKGNtLCBmdW5jdGlvbigpIHtcbiAgICAgIGZvciAodmFyIGkgPSBraWxsLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKVxuICAgICAgICByZXBsYWNlUmFuZ2UoY20uZG9jLCBcIlwiLCBraWxsW2ldLmZyb20sIGtpbGxbaV0udG8sIFwiK2RlbGV0ZVwiKTtcbiAgICAgIGVuc3VyZUN1cnNvclZpc2libGUoY20pO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gVXNlZCBmb3IgaG9yaXpvbnRhbCByZWxhdGl2ZSBtb3Rpb24uIERpciBpcyAtMSBvciAxIChsZWZ0IG9yXG4gIC8vIHJpZ2h0KSwgdW5pdCBjYW4gYmUgXCJjaGFyXCIsIFwiY29sdW1uXCIgKGxpa2UgY2hhciwgYnV0IGRvZXNuJ3RcbiAgLy8gY3Jvc3MgbGluZSBib3VuZGFyaWVzKSwgXCJ3b3JkXCIgKGFjcm9zcyBuZXh0IHdvcmQpLCBvciBcImdyb3VwXCIgKHRvXG4gIC8vIHRoZSBzdGFydCBvZiBuZXh0IGdyb3VwIG9mIHdvcmQgb3Igbm9uLXdvcmQtbm9uLXdoaXRlc3BhY2VcbiAgLy8gY2hhcnMpLiBUaGUgdmlzdWFsbHkgcGFyYW0gY29udHJvbHMgd2hldGhlciwgaW4gcmlnaHQtdG8tbGVmdFxuICAvLyB0ZXh0LCBkaXJlY3Rpb24gMSBtZWFucyB0byBtb3ZlIHRvd2FyZHMgdGhlIG5leHQgaW5kZXggaW4gdGhlXG4gIC8vIHN0cmluZywgb3IgdG93YXJkcyB0aGUgY2hhcmFjdGVyIHRvIHRoZSByaWdodCBvZiB0aGUgY3VycmVudFxuICAvLyBwb3NpdGlvbi4gVGhlIHJlc3VsdGluZyBwb3NpdGlvbiB3aWxsIGhhdmUgYSBoaXRTaWRlPXRydWVcbiAgLy8gcHJvcGVydHkgaWYgaXQgcmVhY2hlZCB0aGUgZW5kIG9mIHRoZSBkb2N1bWVudC5cbiAgZnVuY3Rpb24gZmluZFBvc0goZG9jLCBwb3MsIGRpciwgdW5pdCwgdmlzdWFsbHkpIHtcbiAgICB2YXIgbGluZSA9IHBvcy5saW5lLCBjaCA9IHBvcy5jaCwgb3JpZ0RpciA9IGRpcjtcbiAgICB2YXIgbGluZU9iaiA9IGdldExpbmUoZG9jLCBsaW5lKTtcbiAgICBmdW5jdGlvbiBmaW5kTmV4dExpbmUoKSB7XG4gICAgICB2YXIgbCA9IGxpbmUgKyBkaXI7XG4gICAgICBpZiAobCA8IGRvYy5maXJzdCB8fCBsID49IGRvYy5maXJzdCArIGRvYy5zaXplKSByZXR1cm4gZmFsc2VcbiAgICAgIGxpbmUgPSBsO1xuICAgICAgcmV0dXJuIGxpbmVPYmogPSBnZXRMaW5lKGRvYywgbCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG1vdmVPbmNlKGJvdW5kVG9MaW5lKSB7XG4gICAgICB2YXIgbmV4dCA9ICh2aXN1YWxseSA/IG1vdmVWaXN1YWxseSA6IG1vdmVMb2dpY2FsbHkpKGxpbmVPYmosIGNoLCBkaXIsIHRydWUpO1xuICAgICAgaWYgKG5leHQgPT0gbnVsbCkge1xuICAgICAgICBpZiAoIWJvdW5kVG9MaW5lICYmIGZpbmROZXh0TGluZSgpKSB7XG4gICAgICAgICAgaWYgKHZpc3VhbGx5KSBjaCA9IChkaXIgPCAwID8gbGluZVJpZ2h0IDogbGluZUxlZnQpKGxpbmVPYmopO1xuICAgICAgICAgIGVsc2UgY2ggPSBkaXIgPCAwID8gbGluZU9iai50ZXh0Lmxlbmd0aCA6IDA7XG4gICAgICAgIH0gZWxzZSByZXR1cm4gZmFsc2VcbiAgICAgIH0gZWxzZSBjaCA9IG5leHQ7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAodW5pdCA9PSBcImNoYXJcIikge1xuICAgICAgbW92ZU9uY2UoKVxuICAgIH0gZWxzZSBpZiAodW5pdCA9PSBcImNvbHVtblwiKSB7XG4gICAgICBtb3ZlT25jZSh0cnVlKVxuICAgIH0gZWxzZSBpZiAodW5pdCA9PSBcIndvcmRcIiB8fCB1bml0ID09IFwiZ3JvdXBcIikge1xuICAgICAgdmFyIHNhd1R5cGUgPSBudWxsLCBncm91cCA9IHVuaXQgPT0gXCJncm91cFwiO1xuICAgICAgdmFyIGhlbHBlciA9IGRvYy5jbSAmJiBkb2MuY20uZ2V0SGVscGVyKHBvcywgXCJ3b3JkQ2hhcnNcIik7XG4gICAgICBmb3IgKHZhciBmaXJzdCA9IHRydWU7OyBmaXJzdCA9IGZhbHNlKSB7XG4gICAgICAgIGlmIChkaXIgPCAwICYmICFtb3ZlT25jZSghZmlyc3QpKSBicmVhaztcbiAgICAgICAgdmFyIGN1ciA9IGxpbmVPYmoudGV4dC5jaGFyQXQoY2gpIHx8IFwiXFxuXCI7XG4gICAgICAgIHZhciB0eXBlID0gaXNXb3JkQ2hhcihjdXIsIGhlbHBlcikgPyBcIndcIlxuICAgICAgICAgIDogZ3JvdXAgJiYgY3VyID09IFwiXFxuXCIgPyBcIm5cIlxuICAgICAgICAgIDogIWdyb3VwIHx8IC9cXHMvLnRlc3QoY3VyKSA/IG51bGxcbiAgICAgICAgICA6IFwicFwiO1xuICAgICAgICBpZiAoZ3JvdXAgJiYgIWZpcnN0ICYmICF0eXBlKSB0eXBlID0gXCJzXCI7XG4gICAgICAgIGlmIChzYXdUeXBlICYmIHNhd1R5cGUgIT0gdHlwZSkge1xuICAgICAgICAgIGlmIChkaXIgPCAwKSB7ZGlyID0gMTsgbW92ZU9uY2UoKTt9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHlwZSkgc2F3VHlwZSA9IHR5cGU7XG4gICAgICAgIGlmIChkaXIgPiAwICYmICFtb3ZlT25jZSghZmlyc3QpKSBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgdmFyIHJlc3VsdCA9IHNraXBBdG9taWMoZG9jLCBQb3MobGluZSwgY2gpLCBwb3MsIG9yaWdEaXIsIHRydWUpO1xuICAgIGlmICghY21wKHBvcywgcmVzdWx0KSkgcmVzdWx0LmhpdFNpZGUgPSB0cnVlO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvLyBGb3IgcmVsYXRpdmUgdmVydGljYWwgbW92ZW1lbnQuIERpciBtYXkgYmUgLTEgb3IgMS4gVW5pdCBjYW4gYmVcbiAgLy8gXCJwYWdlXCIgb3IgXCJsaW5lXCIuIFRoZSByZXN1bHRpbmcgcG9zaXRpb24gd2lsbCBoYXZlIGEgaGl0U2lkZT10cnVlXG4gIC8vIHByb3BlcnR5IGlmIGl0IHJlYWNoZWQgdGhlIGVuZCBvZiB0aGUgZG9jdW1lbnQuXG4gIGZ1bmN0aW9uIGZpbmRQb3NWKGNtLCBwb3MsIGRpciwgdW5pdCkge1xuICAgIHZhciBkb2MgPSBjbS5kb2MsIHggPSBwb3MubGVmdCwgeTtcbiAgICBpZiAodW5pdCA9PSBcInBhZ2VcIikge1xuICAgICAgdmFyIHBhZ2VTaXplID0gTWF0aC5taW4oY20uZGlzcGxheS53cmFwcGVyLmNsaWVudEhlaWdodCwgd2luZG93LmlubmVySGVpZ2h0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQpO1xuICAgICAgeSA9IHBvcy50b3AgKyBkaXIgKiAocGFnZVNpemUgLSAoZGlyIDwgMCA/IDEuNSA6IC41KSAqIHRleHRIZWlnaHQoY20uZGlzcGxheSkpO1xuICAgIH0gZWxzZSBpZiAodW5pdCA9PSBcImxpbmVcIikge1xuICAgICAgeSA9IGRpciA+IDAgPyBwb3MuYm90dG9tICsgMyA6IHBvcy50b3AgLSAzO1xuICAgIH1cbiAgICBmb3IgKDs7KSB7XG4gICAgICB2YXIgdGFyZ2V0ID0gY29vcmRzQ2hhcihjbSwgeCwgeSk7XG4gICAgICBpZiAoIXRhcmdldC5vdXRzaWRlKSBicmVhaztcbiAgICAgIGlmIChkaXIgPCAwID8geSA8PSAwIDogeSA+PSBkb2MuaGVpZ2h0KSB7IHRhcmdldC5oaXRTaWRlID0gdHJ1ZTsgYnJlYWs7IH1cbiAgICAgIHkgKz0gZGlyICogNTtcbiAgICB9XG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfVxuXG4gIC8vIEVESVRPUiBNRVRIT0RTXG5cbiAgLy8gVGhlIHB1YmxpY2x5IHZpc2libGUgQVBJLiBOb3RlIHRoYXQgbWV0aG9kT3AoZikgbWVhbnNcbiAgLy8gJ3dyYXAgZiBpbiBhbiBvcGVyYXRpb24sIHBlcmZvcm1lZCBvbiBpdHMgYHRoaXNgIHBhcmFtZXRlcicuXG5cbiAgLy8gVGhpcyBpcyBub3QgdGhlIGNvbXBsZXRlIHNldCBvZiBlZGl0b3IgbWV0aG9kcy4gTW9zdCBvZiB0aGVcbiAgLy8gbWV0aG9kcyBkZWZpbmVkIG9uIHRoZSBEb2MgdHlwZSBhcmUgYWxzbyBpbmplY3RlZCBpbnRvXG4gIC8vIENvZGVNaXJyb3IucHJvdG90eXBlLCBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkgYW5kXG4gIC8vIGNvbnZlbmllbmNlLlxuXG4gIENvZGVNaXJyb3IucHJvdG90eXBlID0ge1xuICAgIGNvbnN0cnVjdG9yOiBDb2RlTWlycm9yLFxuICAgIGZvY3VzOiBmdW5jdGlvbigpe3dpbmRvdy5mb2N1cygpOyB0aGlzLmRpc3BsYXkuaW5wdXQuZm9jdXMoKTt9LFxuXG4gICAgc2V0T3B0aW9uOiBmdW5jdGlvbihvcHRpb24sIHZhbHVlKSB7XG4gICAgICB2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9ucywgb2xkID0gb3B0aW9uc1tvcHRpb25dO1xuICAgICAgaWYgKG9wdGlvbnNbb3B0aW9uXSA9PSB2YWx1ZSAmJiBvcHRpb24gIT0gXCJtb2RlXCIpIHJldHVybjtcbiAgICAgIG9wdGlvbnNbb3B0aW9uXSA9IHZhbHVlO1xuICAgICAgaWYgKG9wdGlvbkhhbmRsZXJzLmhhc093blByb3BlcnR5KG9wdGlvbikpXG4gICAgICAgIG9wZXJhdGlvbih0aGlzLCBvcHRpb25IYW5kbGVyc1tvcHRpb25dKSh0aGlzLCB2YWx1ZSwgb2xkKTtcbiAgICB9LFxuXG4gICAgZ2V0T3B0aW9uOiBmdW5jdGlvbihvcHRpb24pIHtyZXR1cm4gdGhpcy5vcHRpb25zW29wdGlvbl07fSxcbiAgICBnZXREb2M6IGZ1bmN0aW9uKCkge3JldHVybiB0aGlzLmRvYzt9LFxuXG4gICAgYWRkS2V5TWFwOiBmdW5jdGlvbihtYXAsIGJvdHRvbSkge1xuICAgICAgdGhpcy5zdGF0ZS5rZXlNYXBzW2JvdHRvbSA/IFwicHVzaFwiIDogXCJ1bnNoaWZ0XCJdKGdldEtleU1hcChtYXApKTtcbiAgICB9LFxuICAgIHJlbW92ZUtleU1hcDogZnVuY3Rpb24obWFwKSB7XG4gICAgICB2YXIgbWFwcyA9IHRoaXMuc3RhdGUua2V5TWFwcztcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWFwcy5sZW5ndGg7ICsraSlcbiAgICAgICAgaWYgKG1hcHNbaV0gPT0gbWFwIHx8IG1hcHNbaV0ubmFtZSA9PSBtYXApIHtcbiAgICAgICAgICBtYXBzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBhZGRPdmVybGF5OiBtZXRob2RPcChmdW5jdGlvbihzcGVjLCBvcHRpb25zKSB7XG4gICAgICB2YXIgbW9kZSA9IHNwZWMudG9rZW4gPyBzcGVjIDogQ29kZU1pcnJvci5nZXRNb2RlKHRoaXMub3B0aW9ucywgc3BlYyk7XG4gICAgICBpZiAobW9kZS5zdGFydFN0YXRlKSB0aHJvdyBuZXcgRXJyb3IoXCJPdmVybGF5cyBtYXkgbm90IGJlIHN0YXRlZnVsLlwiKTtcbiAgICAgIHRoaXMuc3RhdGUub3ZlcmxheXMucHVzaCh7bW9kZTogbW9kZSwgbW9kZVNwZWM6IHNwZWMsIG9wYXF1ZTogb3B0aW9ucyAmJiBvcHRpb25zLm9wYXF1ZX0pO1xuICAgICAgdGhpcy5zdGF0ZS5tb2RlR2VuKys7XG4gICAgICByZWdDaGFuZ2UodGhpcyk7XG4gICAgfSksXG4gICAgcmVtb3ZlT3ZlcmxheTogbWV0aG9kT3AoZnVuY3Rpb24oc3BlYykge1xuICAgICAgdmFyIG92ZXJsYXlzID0gdGhpcy5zdGF0ZS5vdmVybGF5cztcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3ZlcmxheXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIGN1ciA9IG92ZXJsYXlzW2ldLm1vZGVTcGVjO1xuICAgICAgICBpZiAoY3VyID09IHNwZWMgfHwgdHlwZW9mIHNwZWMgPT0gXCJzdHJpbmdcIiAmJiBjdXIubmFtZSA9PSBzcGVjKSB7XG4gICAgICAgICAgb3ZlcmxheXMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgIHRoaXMuc3RhdGUubW9kZUdlbisrO1xuICAgICAgICAgIHJlZ0NoYW5nZSh0aGlzKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KSxcblxuICAgIGluZGVudExpbmU6IG1ldGhvZE9wKGZ1bmN0aW9uKG4sIGRpciwgYWdncmVzc2l2ZSkge1xuICAgICAgaWYgKHR5cGVvZiBkaXIgIT0gXCJzdHJpbmdcIiAmJiB0eXBlb2YgZGlyICE9IFwibnVtYmVyXCIpIHtcbiAgICAgICAgaWYgKGRpciA9PSBudWxsKSBkaXIgPSB0aGlzLm9wdGlvbnMuc21hcnRJbmRlbnQgPyBcInNtYXJ0XCIgOiBcInByZXZcIjtcbiAgICAgICAgZWxzZSBkaXIgPSBkaXIgPyBcImFkZFwiIDogXCJzdWJ0cmFjdFwiO1xuICAgICAgfVxuICAgICAgaWYgKGlzTGluZSh0aGlzLmRvYywgbikpIGluZGVudExpbmUodGhpcywgbiwgZGlyLCBhZ2dyZXNzaXZlKTtcbiAgICB9KSxcbiAgICBpbmRlbnRTZWxlY3Rpb246IG1ldGhvZE9wKGZ1bmN0aW9uKGhvdykge1xuICAgICAgdmFyIHJhbmdlcyA9IHRoaXMuZG9jLnNlbC5yYW5nZXMsIGVuZCA9IC0xO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByYW5nZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIHJhbmdlID0gcmFuZ2VzW2ldO1xuICAgICAgICBpZiAoIXJhbmdlLmVtcHR5KCkpIHtcbiAgICAgICAgICB2YXIgZnJvbSA9IHJhbmdlLmZyb20oKSwgdG8gPSByYW5nZS50bygpO1xuICAgICAgICAgIHZhciBzdGFydCA9IE1hdGgubWF4KGVuZCwgZnJvbS5saW5lKTtcbiAgICAgICAgICBlbmQgPSBNYXRoLm1pbih0aGlzLmxhc3RMaW5lKCksIHRvLmxpbmUgLSAodG8uY2ggPyAwIDogMSkpICsgMTtcbiAgICAgICAgICBmb3IgKHZhciBqID0gc3RhcnQ7IGogPCBlbmQ7ICsrailcbiAgICAgICAgICAgIGluZGVudExpbmUodGhpcywgaiwgaG93KTtcbiAgICAgICAgICB2YXIgbmV3UmFuZ2VzID0gdGhpcy5kb2Muc2VsLnJhbmdlcztcbiAgICAgICAgICBpZiAoZnJvbS5jaCA9PSAwICYmIHJhbmdlcy5sZW5ndGggPT0gbmV3UmFuZ2VzLmxlbmd0aCAmJiBuZXdSYW5nZXNbaV0uZnJvbSgpLmNoID4gMClcbiAgICAgICAgICAgIHJlcGxhY2VPbmVTZWxlY3Rpb24odGhpcy5kb2MsIGksIG5ldyBSYW5nZShmcm9tLCBuZXdSYW5nZXNbaV0udG8oKSksIHNlbF9kb250U2Nyb2xsKTtcbiAgICAgICAgfSBlbHNlIGlmIChyYW5nZS5oZWFkLmxpbmUgPiBlbmQpIHtcbiAgICAgICAgICBpbmRlbnRMaW5lKHRoaXMsIHJhbmdlLmhlYWQubGluZSwgaG93LCB0cnVlKTtcbiAgICAgICAgICBlbmQgPSByYW5nZS5oZWFkLmxpbmU7XG4gICAgICAgICAgaWYgKGkgPT0gdGhpcy5kb2Muc2VsLnByaW1JbmRleCkgZW5zdXJlQ3Vyc29yVmlzaWJsZSh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pLFxuXG4gICAgLy8gRmV0Y2ggdGhlIHBhcnNlciB0b2tlbiBmb3IgYSBnaXZlbiBjaGFyYWN0ZXIuIFVzZWZ1bCBmb3IgaGFja3NcbiAgICAvLyB0aGF0IHdhbnQgdG8gaW5zcGVjdCB0aGUgbW9kZSBzdGF0ZSAoc2F5LCBmb3IgY29tcGxldGlvbikuXG4gICAgZ2V0VG9rZW5BdDogZnVuY3Rpb24ocG9zLCBwcmVjaXNlKSB7XG4gICAgICByZXR1cm4gdGFrZVRva2VuKHRoaXMsIHBvcywgcHJlY2lzZSk7XG4gICAgfSxcblxuICAgIGdldExpbmVUb2tlbnM6IGZ1bmN0aW9uKGxpbmUsIHByZWNpc2UpIHtcbiAgICAgIHJldHVybiB0YWtlVG9rZW4odGhpcywgUG9zKGxpbmUpLCBwcmVjaXNlLCB0cnVlKTtcbiAgICB9LFxuXG4gICAgZ2V0VG9rZW5UeXBlQXQ6IGZ1bmN0aW9uKHBvcykge1xuICAgICAgcG9zID0gY2xpcFBvcyh0aGlzLmRvYywgcG9zKTtcbiAgICAgIHZhciBzdHlsZXMgPSBnZXRMaW5lU3R5bGVzKHRoaXMsIGdldExpbmUodGhpcy5kb2MsIHBvcy5saW5lKSk7XG4gICAgICB2YXIgYmVmb3JlID0gMCwgYWZ0ZXIgPSAoc3R5bGVzLmxlbmd0aCAtIDEpIC8gMiwgY2ggPSBwb3MuY2g7XG4gICAgICB2YXIgdHlwZTtcbiAgICAgIGlmIChjaCA9PSAwKSB0eXBlID0gc3R5bGVzWzJdO1xuICAgICAgZWxzZSBmb3IgKDs7KSB7XG4gICAgICAgIHZhciBtaWQgPSAoYmVmb3JlICsgYWZ0ZXIpID4+IDE7XG4gICAgICAgIGlmICgobWlkID8gc3R5bGVzW21pZCAqIDIgLSAxXSA6IDApID49IGNoKSBhZnRlciA9IG1pZDtcbiAgICAgICAgZWxzZSBpZiAoc3R5bGVzW21pZCAqIDIgKyAxXSA8IGNoKSBiZWZvcmUgPSBtaWQgKyAxO1xuICAgICAgICBlbHNlIHsgdHlwZSA9IHN0eWxlc1ttaWQgKiAyICsgMl07IGJyZWFrOyB9XG4gICAgICB9XG4gICAgICB2YXIgY3V0ID0gdHlwZSA/IHR5cGUuaW5kZXhPZihcImNtLW92ZXJsYXkgXCIpIDogLTE7XG4gICAgICByZXR1cm4gY3V0IDwgMCA/IHR5cGUgOiBjdXQgPT0gMCA/IG51bGwgOiB0eXBlLnNsaWNlKDAsIGN1dCAtIDEpO1xuICAgIH0sXG5cbiAgICBnZXRNb2RlQXQ6IGZ1bmN0aW9uKHBvcykge1xuICAgICAgdmFyIG1vZGUgPSB0aGlzLmRvYy5tb2RlO1xuICAgICAgaWYgKCFtb2RlLmlubmVyTW9kZSkgcmV0dXJuIG1vZGU7XG4gICAgICByZXR1cm4gQ29kZU1pcnJvci5pbm5lck1vZGUobW9kZSwgdGhpcy5nZXRUb2tlbkF0KHBvcykuc3RhdGUpLm1vZGU7XG4gICAgfSxcblxuICAgIGdldEhlbHBlcjogZnVuY3Rpb24ocG9zLCB0eXBlKSB7XG4gICAgICByZXR1cm4gdGhpcy5nZXRIZWxwZXJzKHBvcywgdHlwZSlbMF07XG4gICAgfSxcblxuICAgIGdldEhlbHBlcnM6IGZ1bmN0aW9uKHBvcywgdHlwZSkge1xuICAgICAgdmFyIGZvdW5kID0gW107XG4gICAgICBpZiAoIWhlbHBlcnMuaGFzT3duUHJvcGVydHkodHlwZSkpIHJldHVybiBmb3VuZDtcbiAgICAgIHZhciBoZWxwID0gaGVscGVyc1t0eXBlXSwgbW9kZSA9IHRoaXMuZ2V0TW9kZUF0KHBvcyk7XG4gICAgICBpZiAodHlwZW9mIG1vZGVbdHlwZV0gPT0gXCJzdHJpbmdcIikge1xuICAgICAgICBpZiAoaGVscFttb2RlW3R5cGVdXSkgZm91bmQucHVzaChoZWxwW21vZGVbdHlwZV1dKTtcbiAgICAgIH0gZWxzZSBpZiAobW9kZVt0eXBlXSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1vZGVbdHlwZV0ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICB2YXIgdmFsID0gaGVscFttb2RlW3R5cGVdW2ldXTtcbiAgICAgICAgICBpZiAodmFsKSBmb3VuZC5wdXNoKHZhbCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAobW9kZS5oZWxwZXJUeXBlICYmIGhlbHBbbW9kZS5oZWxwZXJUeXBlXSkge1xuICAgICAgICBmb3VuZC5wdXNoKGhlbHBbbW9kZS5oZWxwZXJUeXBlXSk7XG4gICAgICB9IGVsc2UgaWYgKGhlbHBbbW9kZS5uYW1lXSkge1xuICAgICAgICBmb3VuZC5wdXNoKGhlbHBbbW9kZS5uYW1lXSk7XG4gICAgICB9XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGhlbHAuX2dsb2JhbC5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgY3VyID0gaGVscC5fZ2xvYmFsW2ldO1xuICAgICAgICBpZiAoY3VyLnByZWQobW9kZSwgdGhpcykgJiYgaW5kZXhPZihmb3VuZCwgY3VyLnZhbCkgPT0gLTEpXG4gICAgICAgICAgZm91bmQucHVzaChjdXIudmFsKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmb3VuZDtcbiAgICB9LFxuXG4gICAgZ2V0U3RhdGVBZnRlcjogZnVuY3Rpb24obGluZSwgcHJlY2lzZSkge1xuICAgICAgdmFyIGRvYyA9IHRoaXMuZG9jO1xuICAgICAgbGluZSA9IGNsaXBMaW5lKGRvYywgbGluZSA9PSBudWxsID8gZG9jLmZpcnN0ICsgZG9jLnNpemUgLSAxOiBsaW5lKTtcbiAgICAgIHJldHVybiBnZXRTdGF0ZUJlZm9yZSh0aGlzLCBsaW5lICsgMSwgcHJlY2lzZSk7XG4gICAgfSxcblxuICAgIGN1cnNvckNvb3JkczogZnVuY3Rpb24oc3RhcnQsIG1vZGUpIHtcbiAgICAgIHZhciBwb3MsIHJhbmdlID0gdGhpcy5kb2Muc2VsLnByaW1hcnkoKTtcbiAgICAgIGlmIChzdGFydCA9PSBudWxsKSBwb3MgPSByYW5nZS5oZWFkO1xuICAgICAgZWxzZSBpZiAodHlwZW9mIHN0YXJ0ID09IFwib2JqZWN0XCIpIHBvcyA9IGNsaXBQb3ModGhpcy5kb2MsIHN0YXJ0KTtcbiAgICAgIGVsc2UgcG9zID0gc3RhcnQgPyByYW5nZS5mcm9tKCkgOiByYW5nZS50bygpO1xuICAgICAgcmV0dXJuIGN1cnNvckNvb3Jkcyh0aGlzLCBwb3MsIG1vZGUgfHwgXCJwYWdlXCIpO1xuICAgIH0sXG5cbiAgICBjaGFyQ29vcmRzOiBmdW5jdGlvbihwb3MsIG1vZGUpIHtcbiAgICAgIHJldHVybiBjaGFyQ29vcmRzKHRoaXMsIGNsaXBQb3ModGhpcy5kb2MsIHBvcyksIG1vZGUgfHwgXCJwYWdlXCIpO1xuICAgIH0sXG5cbiAgICBjb29yZHNDaGFyOiBmdW5jdGlvbihjb29yZHMsIG1vZGUpIHtcbiAgICAgIGNvb3JkcyA9IGZyb21Db29yZFN5c3RlbSh0aGlzLCBjb29yZHMsIG1vZGUgfHwgXCJwYWdlXCIpO1xuICAgICAgcmV0dXJuIGNvb3Jkc0NoYXIodGhpcywgY29vcmRzLmxlZnQsIGNvb3Jkcy50b3ApO1xuICAgIH0sXG5cbiAgICBsaW5lQXRIZWlnaHQ6IGZ1bmN0aW9uKGhlaWdodCwgbW9kZSkge1xuICAgICAgaGVpZ2h0ID0gZnJvbUNvb3JkU3lzdGVtKHRoaXMsIHt0b3A6IGhlaWdodCwgbGVmdDogMH0sIG1vZGUgfHwgXCJwYWdlXCIpLnRvcDtcbiAgICAgIHJldHVybiBsaW5lQXRIZWlnaHQodGhpcy5kb2MsIGhlaWdodCArIHRoaXMuZGlzcGxheS52aWV3T2Zmc2V0KTtcbiAgICB9LFxuICAgIGhlaWdodEF0TGluZTogZnVuY3Rpb24obGluZSwgbW9kZSkge1xuICAgICAgdmFyIGVuZCA9IGZhbHNlLCBsaW5lT2JqO1xuICAgICAgaWYgKHR5cGVvZiBsaW5lID09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgdmFyIGxhc3QgPSB0aGlzLmRvYy5maXJzdCArIHRoaXMuZG9jLnNpemUgLSAxO1xuICAgICAgICBpZiAobGluZSA8IHRoaXMuZG9jLmZpcnN0KSBsaW5lID0gdGhpcy5kb2MuZmlyc3Q7XG4gICAgICAgIGVsc2UgaWYgKGxpbmUgPiBsYXN0KSB7IGxpbmUgPSBsYXN0OyBlbmQgPSB0cnVlOyB9XG4gICAgICAgIGxpbmVPYmogPSBnZXRMaW5lKHRoaXMuZG9jLCBsaW5lKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxpbmVPYmogPSBsaW5lO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGludG9Db29yZFN5c3RlbSh0aGlzLCBsaW5lT2JqLCB7dG9wOiAwLCBsZWZ0OiAwfSwgbW9kZSB8fCBcInBhZ2VcIikudG9wICtcbiAgICAgICAgKGVuZCA/IHRoaXMuZG9jLmhlaWdodCAtIGhlaWdodEF0TGluZShsaW5lT2JqKSA6IDApO1xuICAgIH0sXG5cbiAgICBkZWZhdWx0VGV4dEhlaWdodDogZnVuY3Rpb24oKSB7IHJldHVybiB0ZXh0SGVpZ2h0KHRoaXMuZGlzcGxheSk7IH0sXG4gICAgZGVmYXVsdENoYXJXaWR0aDogZnVuY3Rpb24oKSB7IHJldHVybiBjaGFyV2lkdGgodGhpcy5kaXNwbGF5KTsgfSxcblxuICAgIHNldEd1dHRlck1hcmtlcjogbWV0aG9kT3AoZnVuY3Rpb24obGluZSwgZ3V0dGVySUQsIHZhbHVlKSB7XG4gICAgICByZXR1cm4gY2hhbmdlTGluZSh0aGlzLmRvYywgbGluZSwgXCJndXR0ZXJcIiwgZnVuY3Rpb24obGluZSkge1xuICAgICAgICB2YXIgbWFya2VycyA9IGxpbmUuZ3V0dGVyTWFya2VycyB8fCAobGluZS5ndXR0ZXJNYXJrZXJzID0ge30pO1xuICAgICAgICBtYXJrZXJzW2d1dHRlcklEXSA9IHZhbHVlO1xuICAgICAgICBpZiAoIXZhbHVlICYmIGlzRW1wdHkobWFya2VycykpIGxpbmUuZ3V0dGVyTWFya2VycyA9IG51bGw7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSk7XG4gICAgfSksXG5cbiAgICBjbGVhckd1dHRlcjogbWV0aG9kT3AoZnVuY3Rpb24oZ3V0dGVySUQpIHtcbiAgICAgIHZhciBjbSA9IHRoaXMsIGRvYyA9IGNtLmRvYywgaSA9IGRvYy5maXJzdDtcbiAgICAgIGRvYy5pdGVyKGZ1bmN0aW9uKGxpbmUpIHtcbiAgICAgICAgaWYgKGxpbmUuZ3V0dGVyTWFya2VycyAmJiBsaW5lLmd1dHRlck1hcmtlcnNbZ3V0dGVySURdKSB7XG4gICAgICAgICAgbGluZS5ndXR0ZXJNYXJrZXJzW2d1dHRlcklEXSA9IG51bGw7XG4gICAgICAgICAgcmVnTGluZUNoYW5nZShjbSwgaSwgXCJndXR0ZXJcIik7XG4gICAgICAgICAgaWYgKGlzRW1wdHkobGluZS5ndXR0ZXJNYXJrZXJzKSkgbGluZS5ndXR0ZXJNYXJrZXJzID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICArK2k7XG4gICAgICB9KTtcbiAgICB9KSxcblxuICAgIGxpbmVJbmZvOiBmdW5jdGlvbihsaW5lKSB7XG4gICAgICBpZiAodHlwZW9mIGxpbmUgPT0gXCJudW1iZXJcIikge1xuICAgICAgICBpZiAoIWlzTGluZSh0aGlzLmRvYywgbGluZSkpIHJldHVybiBudWxsO1xuICAgICAgICB2YXIgbiA9IGxpbmU7XG4gICAgICAgIGxpbmUgPSBnZXRMaW5lKHRoaXMuZG9jLCBsaW5lKTtcbiAgICAgICAgaWYgKCFsaW5lKSByZXR1cm4gbnVsbDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBuID0gbGluZU5vKGxpbmUpO1xuICAgICAgICBpZiAobiA9PSBudWxsKSByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIHJldHVybiB7bGluZTogbiwgaGFuZGxlOiBsaW5lLCB0ZXh0OiBsaW5lLnRleHQsIGd1dHRlck1hcmtlcnM6IGxpbmUuZ3V0dGVyTWFya2VycyxcbiAgICAgICAgICAgICAgdGV4dENsYXNzOiBsaW5lLnRleHRDbGFzcywgYmdDbGFzczogbGluZS5iZ0NsYXNzLCB3cmFwQ2xhc3M6IGxpbmUud3JhcENsYXNzLFxuICAgICAgICAgICAgICB3aWRnZXRzOiBsaW5lLndpZGdldHN9O1xuICAgIH0sXG5cbiAgICBnZXRWaWV3cG9ydDogZnVuY3Rpb24oKSB7IHJldHVybiB7ZnJvbTogdGhpcy5kaXNwbGF5LnZpZXdGcm9tLCB0bzogdGhpcy5kaXNwbGF5LnZpZXdUb307fSxcblxuICAgIGFkZFdpZGdldDogZnVuY3Rpb24ocG9zLCBub2RlLCBzY3JvbGwsIHZlcnQsIGhvcml6KSB7XG4gICAgICB2YXIgZGlzcGxheSA9IHRoaXMuZGlzcGxheTtcbiAgICAgIHBvcyA9IGN1cnNvckNvb3Jkcyh0aGlzLCBjbGlwUG9zKHRoaXMuZG9jLCBwb3MpKTtcbiAgICAgIHZhciB0b3AgPSBwb3MuYm90dG9tLCBsZWZ0ID0gcG9zLmxlZnQ7XG4gICAgICBub2RlLnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xuICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoXCJjbS1pZ25vcmUtZXZlbnRzXCIsIFwidHJ1ZVwiKTtcbiAgICAgIHRoaXMuZGlzcGxheS5pbnB1dC5zZXRVbmVkaXRhYmxlKG5vZGUpO1xuICAgICAgZGlzcGxheS5zaXplci5hcHBlbmRDaGlsZChub2RlKTtcbiAgICAgIGlmICh2ZXJ0ID09IFwib3ZlclwiKSB7XG4gICAgICAgIHRvcCA9IHBvcy50b3A7XG4gICAgICB9IGVsc2UgaWYgKHZlcnQgPT0gXCJhYm92ZVwiIHx8IHZlcnQgPT0gXCJuZWFyXCIpIHtcbiAgICAgICAgdmFyIHZzcGFjZSA9IE1hdGgubWF4KGRpc3BsYXkud3JhcHBlci5jbGllbnRIZWlnaHQsIHRoaXMuZG9jLmhlaWdodCksXG4gICAgICAgIGhzcGFjZSA9IE1hdGgubWF4KGRpc3BsYXkuc2l6ZXIuY2xpZW50V2lkdGgsIGRpc3BsYXkubGluZVNwYWNlLmNsaWVudFdpZHRoKTtcbiAgICAgICAgLy8gRGVmYXVsdCB0byBwb3NpdGlvbmluZyBhYm92ZSAoaWYgc3BlY2lmaWVkIGFuZCBwb3NzaWJsZSk7IG90aGVyd2lzZSBkZWZhdWx0IHRvIHBvc2l0aW9uaW5nIGJlbG93XG4gICAgICAgIGlmICgodmVydCA9PSAnYWJvdmUnIHx8IHBvcy5ib3R0b20gKyBub2RlLm9mZnNldEhlaWdodCA+IHZzcGFjZSkgJiYgcG9zLnRvcCA+IG5vZGUub2Zmc2V0SGVpZ2h0KVxuICAgICAgICAgIHRvcCA9IHBvcy50b3AgLSBub2RlLm9mZnNldEhlaWdodDtcbiAgICAgICAgZWxzZSBpZiAocG9zLmJvdHRvbSArIG5vZGUub2Zmc2V0SGVpZ2h0IDw9IHZzcGFjZSlcbiAgICAgICAgICB0b3AgPSBwb3MuYm90dG9tO1xuICAgICAgICBpZiAobGVmdCArIG5vZGUub2Zmc2V0V2lkdGggPiBoc3BhY2UpXG4gICAgICAgICAgbGVmdCA9IGhzcGFjZSAtIG5vZGUub2Zmc2V0V2lkdGg7XG4gICAgICB9XG4gICAgICBub2RlLnN0eWxlLnRvcCA9IHRvcCArIFwicHhcIjtcbiAgICAgIG5vZGUuc3R5bGUubGVmdCA9IG5vZGUuc3R5bGUucmlnaHQgPSBcIlwiO1xuICAgICAgaWYgKGhvcml6ID09IFwicmlnaHRcIikge1xuICAgICAgICBsZWZ0ID0gZGlzcGxheS5zaXplci5jbGllbnRXaWR0aCAtIG5vZGUub2Zmc2V0V2lkdGg7XG4gICAgICAgIG5vZGUuc3R5bGUucmlnaHQgPSBcIjBweFwiO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGhvcml6ID09IFwibGVmdFwiKSBsZWZ0ID0gMDtcbiAgICAgICAgZWxzZSBpZiAoaG9yaXogPT0gXCJtaWRkbGVcIikgbGVmdCA9IChkaXNwbGF5LnNpemVyLmNsaWVudFdpZHRoIC0gbm9kZS5vZmZzZXRXaWR0aCkgLyAyO1xuICAgICAgICBub2RlLnN0eWxlLmxlZnQgPSBsZWZ0ICsgXCJweFwiO1xuICAgICAgfVxuICAgICAgaWYgKHNjcm9sbClcbiAgICAgICAgc2Nyb2xsSW50b1ZpZXcodGhpcywgbGVmdCwgdG9wLCBsZWZ0ICsgbm9kZS5vZmZzZXRXaWR0aCwgdG9wICsgbm9kZS5vZmZzZXRIZWlnaHQpO1xuICAgIH0sXG5cbiAgICB0cmlnZ2VyT25LZXlEb3duOiBtZXRob2RPcChvbktleURvd24pLFxuICAgIHRyaWdnZXJPbktleVByZXNzOiBtZXRob2RPcChvbktleVByZXNzKSxcbiAgICB0cmlnZ2VyT25LZXlVcDogb25LZXlVcCxcblxuICAgIGV4ZWNDb21tYW5kOiBmdW5jdGlvbihjbWQpIHtcbiAgICAgIGlmIChjb21tYW5kcy5oYXNPd25Qcm9wZXJ0eShjbWQpKVxuICAgICAgICByZXR1cm4gY29tbWFuZHNbY21kXS5jYWxsKG51bGwsIHRoaXMpO1xuICAgIH0sXG5cbiAgICB0cmlnZ2VyRWxlY3RyaWM6IG1ldGhvZE9wKGZ1bmN0aW9uKHRleHQpIHsgdHJpZ2dlckVsZWN0cmljKHRoaXMsIHRleHQpOyB9KSxcblxuICAgIGZpbmRQb3NIOiBmdW5jdGlvbihmcm9tLCBhbW91bnQsIHVuaXQsIHZpc3VhbGx5KSB7XG4gICAgICB2YXIgZGlyID0gMTtcbiAgICAgIGlmIChhbW91bnQgPCAwKSB7IGRpciA9IC0xOyBhbW91bnQgPSAtYW1vdW50OyB9XG4gICAgICBmb3IgKHZhciBpID0gMCwgY3VyID0gY2xpcFBvcyh0aGlzLmRvYywgZnJvbSk7IGkgPCBhbW91bnQ7ICsraSkge1xuICAgICAgICBjdXIgPSBmaW5kUG9zSCh0aGlzLmRvYywgY3VyLCBkaXIsIHVuaXQsIHZpc3VhbGx5KTtcbiAgICAgICAgaWYgKGN1ci5oaXRTaWRlKSBicmVhaztcbiAgICAgIH1cbiAgICAgIHJldHVybiBjdXI7XG4gICAgfSxcblxuICAgIG1vdmVIOiBtZXRob2RPcChmdW5jdGlvbihkaXIsIHVuaXQpIHtcbiAgICAgIHZhciBjbSA9IHRoaXM7XG4gICAgICBjbS5leHRlbmRTZWxlY3Rpb25zQnkoZnVuY3Rpb24ocmFuZ2UpIHtcbiAgICAgICAgaWYgKGNtLmRpc3BsYXkuc2hpZnQgfHwgY20uZG9jLmV4dGVuZCB8fCByYW5nZS5lbXB0eSgpKVxuICAgICAgICAgIHJldHVybiBmaW5kUG9zSChjbS5kb2MsIHJhbmdlLmhlYWQsIGRpciwgdW5pdCwgY20ub3B0aW9ucy5ydGxNb3ZlVmlzdWFsbHkpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgcmV0dXJuIGRpciA8IDAgPyByYW5nZS5mcm9tKCkgOiByYW5nZS50bygpO1xuICAgICAgfSwgc2VsX21vdmUpO1xuICAgIH0pLFxuXG4gICAgZGVsZXRlSDogbWV0aG9kT3AoZnVuY3Rpb24oZGlyLCB1bml0KSB7XG4gICAgICB2YXIgc2VsID0gdGhpcy5kb2Muc2VsLCBkb2MgPSB0aGlzLmRvYztcbiAgICAgIGlmIChzZWwuc29tZXRoaW5nU2VsZWN0ZWQoKSlcbiAgICAgICAgZG9jLnJlcGxhY2VTZWxlY3Rpb24oXCJcIiwgbnVsbCwgXCIrZGVsZXRlXCIpO1xuICAgICAgZWxzZVxuICAgICAgICBkZWxldGVOZWFyU2VsZWN0aW9uKHRoaXMsIGZ1bmN0aW9uKHJhbmdlKSB7XG4gICAgICAgICAgdmFyIG90aGVyID0gZmluZFBvc0goZG9jLCByYW5nZS5oZWFkLCBkaXIsIHVuaXQsIGZhbHNlKTtcbiAgICAgICAgICByZXR1cm4gZGlyIDwgMCA/IHtmcm9tOiBvdGhlciwgdG86IHJhbmdlLmhlYWR9IDoge2Zyb206IHJhbmdlLmhlYWQsIHRvOiBvdGhlcn07XG4gICAgICAgIH0pO1xuICAgIH0pLFxuXG4gICAgZmluZFBvc1Y6IGZ1bmN0aW9uKGZyb20sIGFtb3VudCwgdW5pdCwgZ29hbENvbHVtbikge1xuICAgICAgdmFyIGRpciA9IDEsIHggPSBnb2FsQ29sdW1uO1xuICAgICAgaWYgKGFtb3VudCA8IDApIHsgZGlyID0gLTE7IGFtb3VudCA9IC1hbW91bnQ7IH1cbiAgICAgIGZvciAodmFyIGkgPSAwLCBjdXIgPSBjbGlwUG9zKHRoaXMuZG9jLCBmcm9tKTsgaSA8IGFtb3VudDsgKytpKSB7XG4gICAgICAgIHZhciBjb29yZHMgPSBjdXJzb3JDb29yZHModGhpcywgY3VyLCBcImRpdlwiKTtcbiAgICAgICAgaWYgKHggPT0gbnVsbCkgeCA9IGNvb3Jkcy5sZWZ0O1xuICAgICAgICBlbHNlIGNvb3Jkcy5sZWZ0ID0geDtcbiAgICAgICAgY3VyID0gZmluZFBvc1YodGhpcywgY29vcmRzLCBkaXIsIHVuaXQpO1xuICAgICAgICBpZiAoY3VyLmhpdFNpZGUpIGJyZWFrO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGN1cjtcbiAgICB9LFxuXG4gICAgbW92ZVY6IG1ldGhvZE9wKGZ1bmN0aW9uKGRpciwgdW5pdCkge1xuICAgICAgdmFyIGNtID0gdGhpcywgZG9jID0gdGhpcy5kb2MsIGdvYWxzID0gW107XG4gICAgICB2YXIgY29sbGFwc2UgPSAhY20uZGlzcGxheS5zaGlmdCAmJiAhZG9jLmV4dGVuZCAmJiBkb2Muc2VsLnNvbWV0aGluZ1NlbGVjdGVkKCk7XG4gICAgICBkb2MuZXh0ZW5kU2VsZWN0aW9uc0J5KGZ1bmN0aW9uKHJhbmdlKSB7XG4gICAgICAgIGlmIChjb2xsYXBzZSlcbiAgICAgICAgICByZXR1cm4gZGlyIDwgMCA/IHJhbmdlLmZyb20oKSA6IHJhbmdlLnRvKCk7XG4gICAgICAgIHZhciBoZWFkUG9zID0gY3Vyc29yQ29vcmRzKGNtLCByYW5nZS5oZWFkLCBcImRpdlwiKTtcbiAgICAgICAgaWYgKHJhbmdlLmdvYWxDb2x1bW4gIT0gbnVsbCkgaGVhZFBvcy5sZWZ0ID0gcmFuZ2UuZ29hbENvbHVtbjtcbiAgICAgICAgZ29hbHMucHVzaChoZWFkUG9zLmxlZnQpO1xuICAgICAgICB2YXIgcG9zID0gZmluZFBvc1YoY20sIGhlYWRQb3MsIGRpciwgdW5pdCk7XG4gICAgICAgIGlmICh1bml0ID09IFwicGFnZVwiICYmIHJhbmdlID09IGRvYy5zZWwucHJpbWFyeSgpKVxuICAgICAgICAgIGFkZFRvU2Nyb2xsUG9zKGNtLCBudWxsLCBjaGFyQ29vcmRzKGNtLCBwb3MsIFwiZGl2XCIpLnRvcCAtIGhlYWRQb3MudG9wKTtcbiAgICAgICAgcmV0dXJuIHBvcztcbiAgICAgIH0sIHNlbF9tb3ZlKTtcbiAgICAgIGlmIChnb2Fscy5sZW5ndGgpIGZvciAodmFyIGkgPSAwOyBpIDwgZG9jLnNlbC5yYW5nZXMubGVuZ3RoOyBpKyspXG4gICAgICAgIGRvYy5zZWwucmFuZ2VzW2ldLmdvYWxDb2x1bW4gPSBnb2Fsc1tpXTtcbiAgICB9KSxcblxuICAgIC8vIEZpbmQgdGhlIHdvcmQgYXQgdGhlIGdpdmVuIHBvc2l0aW9uIChhcyByZXR1cm5lZCBieSBjb29yZHNDaGFyKS5cbiAgICBmaW5kV29yZEF0OiBmdW5jdGlvbihwb3MpIHtcbiAgICAgIHZhciBkb2MgPSB0aGlzLmRvYywgbGluZSA9IGdldExpbmUoZG9jLCBwb3MubGluZSkudGV4dDtcbiAgICAgIHZhciBzdGFydCA9IHBvcy5jaCwgZW5kID0gcG9zLmNoO1xuICAgICAgaWYgKGxpbmUpIHtcbiAgICAgICAgdmFyIGhlbHBlciA9IHRoaXMuZ2V0SGVscGVyKHBvcywgXCJ3b3JkQ2hhcnNcIik7XG4gICAgICAgIGlmICgocG9zLnhSZWwgPCAwIHx8IGVuZCA9PSBsaW5lLmxlbmd0aCkgJiYgc3RhcnQpIC0tc3RhcnQ7IGVsc2UgKytlbmQ7XG4gICAgICAgIHZhciBzdGFydENoYXIgPSBsaW5lLmNoYXJBdChzdGFydCk7XG4gICAgICAgIHZhciBjaGVjayA9IGlzV29yZENoYXIoc3RhcnRDaGFyLCBoZWxwZXIpXG4gICAgICAgICAgPyBmdW5jdGlvbihjaCkgeyByZXR1cm4gaXNXb3JkQ2hhcihjaCwgaGVscGVyKTsgfVxuICAgICAgICAgIDogL1xccy8udGVzdChzdGFydENoYXIpID8gZnVuY3Rpb24oY2gpIHtyZXR1cm4gL1xccy8udGVzdChjaCk7fVxuICAgICAgICAgIDogZnVuY3Rpb24oY2gpIHtyZXR1cm4gIS9cXHMvLnRlc3QoY2gpICYmICFpc1dvcmRDaGFyKGNoKTt9O1xuICAgICAgICB3aGlsZSAoc3RhcnQgPiAwICYmIGNoZWNrKGxpbmUuY2hhckF0KHN0YXJ0IC0gMSkpKSAtLXN0YXJ0O1xuICAgICAgICB3aGlsZSAoZW5kIDwgbGluZS5sZW5ndGggJiYgY2hlY2sobGluZS5jaGFyQXQoZW5kKSkpICsrZW5kO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG5ldyBSYW5nZShQb3MocG9zLmxpbmUsIHN0YXJ0KSwgUG9zKHBvcy5saW5lLCBlbmQpKTtcbiAgICB9LFxuXG4gICAgdG9nZ2xlT3ZlcndyaXRlOiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgaWYgKHZhbHVlICE9IG51bGwgJiYgdmFsdWUgPT0gdGhpcy5zdGF0ZS5vdmVyd3JpdGUpIHJldHVybjtcbiAgICAgIGlmICh0aGlzLnN0YXRlLm92ZXJ3cml0ZSA9ICF0aGlzLnN0YXRlLm92ZXJ3cml0ZSlcbiAgICAgICAgYWRkQ2xhc3ModGhpcy5kaXNwbGF5LmN1cnNvckRpdiwgXCJDb2RlTWlycm9yLW92ZXJ3cml0ZVwiKTtcbiAgICAgIGVsc2VcbiAgICAgICAgcm1DbGFzcyh0aGlzLmRpc3BsYXkuY3Vyc29yRGl2LCBcIkNvZGVNaXJyb3Itb3ZlcndyaXRlXCIpO1xuXG4gICAgICBzaWduYWwodGhpcywgXCJvdmVyd3JpdGVUb2dnbGVcIiwgdGhpcywgdGhpcy5zdGF0ZS5vdmVyd3JpdGUpO1xuICAgIH0sXG4gICAgaGFzRm9jdXM6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy5kaXNwbGF5LmlucHV0LmdldEZpZWxkKCkgPT0gYWN0aXZlRWx0KCk7IH0sXG4gICAgaXNSZWFkT25seTogZnVuY3Rpb24oKSB7IHJldHVybiAhISh0aGlzLm9wdGlvbnMucmVhZE9ubHkgfHwgdGhpcy5kb2MuY2FudEVkaXQpOyB9LFxuXG4gICAgc2Nyb2xsVG86IG1ldGhvZE9wKGZ1bmN0aW9uKHgsIHkpIHtcbiAgICAgIGlmICh4ICE9IG51bGwgfHwgeSAhPSBudWxsKSByZXNvbHZlU2Nyb2xsVG9Qb3ModGhpcyk7XG4gICAgICBpZiAoeCAhPSBudWxsKSB0aGlzLmN1ck9wLnNjcm9sbExlZnQgPSB4O1xuICAgICAgaWYgKHkgIT0gbnVsbCkgdGhpcy5jdXJPcC5zY3JvbGxUb3AgPSB5O1xuICAgIH0pLFxuICAgIGdldFNjcm9sbEluZm86IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNjcm9sbGVyID0gdGhpcy5kaXNwbGF5LnNjcm9sbGVyO1xuICAgICAgcmV0dXJuIHtsZWZ0OiBzY3JvbGxlci5zY3JvbGxMZWZ0LCB0b3A6IHNjcm9sbGVyLnNjcm9sbFRvcCxcbiAgICAgICAgICAgICAgaGVpZ2h0OiBzY3JvbGxlci5zY3JvbGxIZWlnaHQgLSBzY3JvbGxHYXAodGhpcykgLSB0aGlzLmRpc3BsYXkuYmFySGVpZ2h0LFxuICAgICAgICAgICAgICB3aWR0aDogc2Nyb2xsZXIuc2Nyb2xsV2lkdGggLSBzY3JvbGxHYXAodGhpcykgLSB0aGlzLmRpc3BsYXkuYmFyV2lkdGgsXG4gICAgICAgICAgICAgIGNsaWVudEhlaWdodDogZGlzcGxheUhlaWdodCh0aGlzKSwgY2xpZW50V2lkdGg6IGRpc3BsYXlXaWR0aCh0aGlzKX07XG4gICAgfSxcblxuICAgIHNjcm9sbEludG9WaWV3OiBtZXRob2RPcChmdW5jdGlvbihyYW5nZSwgbWFyZ2luKSB7XG4gICAgICBpZiAocmFuZ2UgPT0gbnVsbCkge1xuICAgICAgICByYW5nZSA9IHtmcm9tOiB0aGlzLmRvYy5zZWwucHJpbWFyeSgpLmhlYWQsIHRvOiBudWxsfTtcbiAgICAgICAgaWYgKG1hcmdpbiA9PSBudWxsKSBtYXJnaW4gPSB0aGlzLm9wdGlvbnMuY3Vyc29yU2Nyb2xsTWFyZ2luO1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgcmFuZ2UgPT0gXCJudW1iZXJcIikge1xuICAgICAgICByYW5nZSA9IHtmcm9tOiBQb3MocmFuZ2UsIDApLCB0bzogbnVsbH07XG4gICAgICB9IGVsc2UgaWYgKHJhbmdlLmZyb20gPT0gbnVsbCkge1xuICAgICAgICByYW5nZSA9IHtmcm9tOiByYW5nZSwgdG86IG51bGx9O1xuICAgICAgfVxuICAgICAgaWYgKCFyYW5nZS50bykgcmFuZ2UudG8gPSByYW5nZS5mcm9tO1xuICAgICAgcmFuZ2UubWFyZ2luID0gbWFyZ2luIHx8IDA7XG5cbiAgICAgIGlmIChyYW5nZS5mcm9tLmxpbmUgIT0gbnVsbCkge1xuICAgICAgICByZXNvbHZlU2Nyb2xsVG9Qb3ModGhpcyk7XG4gICAgICAgIHRoaXMuY3VyT3Auc2Nyb2xsVG9Qb3MgPSByYW5nZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBzUG9zID0gY2FsY3VsYXRlU2Nyb2xsUG9zKHRoaXMsIE1hdGgubWluKHJhbmdlLmZyb20ubGVmdCwgcmFuZ2UudG8ubGVmdCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdGgubWluKHJhbmdlLmZyb20udG9wLCByYW5nZS50by50b3ApIC0gcmFuZ2UubWFyZ2luLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXRoLm1heChyYW5nZS5mcm9tLnJpZ2h0LCByYW5nZS50by5yaWdodCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdGgubWF4KHJhbmdlLmZyb20uYm90dG9tLCByYW5nZS50by5ib3R0b20pICsgcmFuZ2UubWFyZ2luKTtcbiAgICAgICAgdGhpcy5zY3JvbGxUbyhzUG9zLnNjcm9sbExlZnQsIHNQb3Muc2Nyb2xsVG9wKTtcbiAgICAgIH1cbiAgICB9KSxcblxuICAgIHNldFNpemU6IG1ldGhvZE9wKGZ1bmN0aW9uKHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgIHZhciBjbSA9IHRoaXM7XG4gICAgICBmdW5jdGlvbiBpbnRlcnByZXQodmFsKSB7XG4gICAgICAgIHJldHVybiB0eXBlb2YgdmFsID09IFwibnVtYmVyXCIgfHwgL15cXGQrJC8udGVzdChTdHJpbmcodmFsKSkgPyB2YWwgKyBcInB4XCIgOiB2YWw7XG4gICAgICB9XG4gICAgICBpZiAod2lkdGggIT0gbnVsbCkgY20uZGlzcGxheS53cmFwcGVyLnN0eWxlLndpZHRoID0gaW50ZXJwcmV0KHdpZHRoKTtcbiAgICAgIGlmIChoZWlnaHQgIT0gbnVsbCkgY20uZGlzcGxheS53cmFwcGVyLnN0eWxlLmhlaWdodCA9IGludGVycHJldChoZWlnaHQpO1xuICAgICAgaWYgKGNtLm9wdGlvbnMubGluZVdyYXBwaW5nKSBjbGVhckxpbmVNZWFzdXJlbWVudENhY2hlKHRoaXMpO1xuICAgICAgdmFyIGxpbmVObyA9IGNtLmRpc3BsYXkudmlld0Zyb207XG4gICAgICBjbS5kb2MuaXRlcihsaW5lTm8sIGNtLmRpc3BsYXkudmlld1RvLCBmdW5jdGlvbihsaW5lKSB7XG4gICAgICAgIGlmIChsaW5lLndpZGdldHMpIGZvciAodmFyIGkgPSAwOyBpIDwgbGluZS53aWRnZXRzLmxlbmd0aDsgaSsrKVxuICAgICAgICAgIGlmIChsaW5lLndpZGdldHNbaV0ubm9IU2Nyb2xsKSB7IHJlZ0xpbmVDaGFuZ2UoY20sIGxpbmVObywgXCJ3aWRnZXRcIik7IGJyZWFrOyB9XG4gICAgICAgICsrbGluZU5vO1xuICAgICAgfSk7XG4gICAgICBjbS5jdXJPcC5mb3JjZVVwZGF0ZSA9IHRydWU7XG4gICAgICBzaWduYWwoY20sIFwicmVmcmVzaFwiLCB0aGlzKTtcbiAgICB9KSxcblxuICAgIG9wZXJhdGlvbjogZnVuY3Rpb24oZil7cmV0dXJuIHJ1bkluT3AodGhpcywgZik7fSxcblxuICAgIHJlZnJlc2g6IG1ldGhvZE9wKGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIG9sZEhlaWdodCA9IHRoaXMuZGlzcGxheS5jYWNoZWRUZXh0SGVpZ2h0O1xuICAgICAgcmVnQ2hhbmdlKHRoaXMpO1xuICAgICAgdGhpcy5jdXJPcC5mb3JjZVVwZGF0ZSA9IHRydWU7XG4gICAgICBjbGVhckNhY2hlcyh0aGlzKTtcbiAgICAgIHRoaXMuc2Nyb2xsVG8odGhpcy5kb2Muc2Nyb2xsTGVmdCwgdGhpcy5kb2Muc2Nyb2xsVG9wKTtcbiAgICAgIHVwZGF0ZUd1dHRlclNwYWNlKHRoaXMpO1xuICAgICAgaWYgKG9sZEhlaWdodCA9PSBudWxsIHx8IE1hdGguYWJzKG9sZEhlaWdodCAtIHRleHRIZWlnaHQodGhpcy5kaXNwbGF5KSkgPiAuNSlcbiAgICAgICAgZXN0aW1hdGVMaW5lSGVpZ2h0cyh0aGlzKTtcbiAgICAgIHNpZ25hbCh0aGlzLCBcInJlZnJlc2hcIiwgdGhpcyk7XG4gICAgfSksXG5cbiAgICBzd2FwRG9jOiBtZXRob2RPcChmdW5jdGlvbihkb2MpIHtcbiAgICAgIHZhciBvbGQgPSB0aGlzLmRvYztcbiAgICAgIG9sZC5jbSA9IG51bGw7XG4gICAgICBhdHRhY2hEb2ModGhpcywgZG9jKTtcbiAgICAgIGNsZWFyQ2FjaGVzKHRoaXMpO1xuICAgICAgdGhpcy5kaXNwbGF5LmlucHV0LnJlc2V0KCk7XG4gICAgICB0aGlzLnNjcm9sbFRvKGRvYy5zY3JvbGxMZWZ0LCBkb2Muc2Nyb2xsVG9wKTtcbiAgICAgIHRoaXMuY3VyT3AuZm9yY2VTY3JvbGwgPSB0cnVlO1xuICAgICAgc2lnbmFsTGF0ZXIodGhpcywgXCJzd2FwRG9jXCIsIHRoaXMsIG9sZCk7XG4gICAgICByZXR1cm4gb2xkO1xuICAgIH0pLFxuXG4gICAgZ2V0SW5wdXRGaWVsZDogZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kaXNwbGF5LmlucHV0LmdldEZpZWxkKCk7fSxcbiAgICBnZXRXcmFwcGVyRWxlbWVudDogZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kaXNwbGF5LndyYXBwZXI7fSxcbiAgICBnZXRTY3JvbGxlckVsZW1lbnQ6IGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGlzcGxheS5zY3JvbGxlcjt9LFxuICAgIGdldEd1dHRlckVsZW1lbnQ6IGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGlzcGxheS5ndXR0ZXJzO31cbiAgfTtcbiAgZXZlbnRNaXhpbihDb2RlTWlycm9yKTtcblxuICAvLyBPUFRJT04gREVGQVVMVFNcblxuICAvLyBUaGUgZGVmYXVsdCBjb25maWd1cmF0aW9uIG9wdGlvbnMuXG4gIHZhciBkZWZhdWx0cyA9IENvZGVNaXJyb3IuZGVmYXVsdHMgPSB7fTtcbiAgLy8gRnVuY3Rpb25zIHRvIHJ1biB3aGVuIG9wdGlvbnMgYXJlIGNoYW5nZWQuXG4gIHZhciBvcHRpb25IYW5kbGVycyA9IENvZGVNaXJyb3Iub3B0aW9uSGFuZGxlcnMgPSB7fTtcblxuICBmdW5jdGlvbiBvcHRpb24obmFtZSwgZGVmbHQsIGhhbmRsZSwgbm90T25Jbml0KSB7XG4gICAgQ29kZU1pcnJvci5kZWZhdWx0c1tuYW1lXSA9IGRlZmx0O1xuICAgIGlmIChoYW5kbGUpIG9wdGlvbkhhbmRsZXJzW25hbWVdID1cbiAgICAgIG5vdE9uSW5pdCA/IGZ1bmN0aW9uKGNtLCB2YWwsIG9sZCkge2lmIChvbGQgIT0gSW5pdCkgaGFuZGxlKGNtLCB2YWwsIG9sZCk7fSA6IGhhbmRsZTtcbiAgfVxuXG4gIC8vIFBhc3NlZCB0byBvcHRpb24gaGFuZGxlcnMgd2hlbiB0aGVyZSBpcyBubyBvbGQgdmFsdWUuXG4gIHZhciBJbml0ID0gQ29kZU1pcnJvci5Jbml0ID0ge3RvU3RyaW5nOiBmdW5jdGlvbigpe3JldHVybiBcIkNvZGVNaXJyb3IuSW5pdFwiO319O1xuXG4gIC8vIFRoZXNlIHR3byBhcmUsIG9uIGluaXQsIGNhbGxlZCBmcm9tIHRoZSBjb25zdHJ1Y3RvciBiZWNhdXNlIHRoZXlcbiAgLy8gaGF2ZSB0byBiZSBpbml0aWFsaXplZCBiZWZvcmUgdGhlIGVkaXRvciBjYW4gc3RhcnQgYXQgYWxsLlxuICBvcHRpb24oXCJ2YWx1ZVwiLCBcIlwiLCBmdW5jdGlvbihjbSwgdmFsKSB7XG4gICAgY20uc2V0VmFsdWUodmFsKTtcbiAgfSwgdHJ1ZSk7XG4gIG9wdGlvbihcIm1vZGVcIiwgbnVsbCwgZnVuY3Rpb24oY20sIHZhbCkge1xuICAgIGNtLmRvYy5tb2RlT3B0aW9uID0gdmFsO1xuICAgIGxvYWRNb2RlKGNtKTtcbiAgfSwgdHJ1ZSk7XG5cbiAgb3B0aW9uKFwiaW5kZW50VW5pdFwiLCAyLCBsb2FkTW9kZSwgdHJ1ZSk7XG4gIG9wdGlvbihcImluZGVudFdpdGhUYWJzXCIsIGZhbHNlKTtcbiAgb3B0aW9uKFwic21hcnRJbmRlbnRcIiwgdHJ1ZSk7XG4gIG9wdGlvbihcInRhYlNpemVcIiwgNCwgZnVuY3Rpb24oY20pIHtcbiAgICByZXNldE1vZGVTdGF0ZShjbSk7XG4gICAgY2xlYXJDYWNoZXMoY20pO1xuICAgIHJlZ0NoYW5nZShjbSk7XG4gIH0sIHRydWUpO1xuICBvcHRpb24oXCJsaW5lU2VwYXJhdG9yXCIsIG51bGwsIGZ1bmN0aW9uKGNtLCB2YWwpIHtcbiAgICBjbS5kb2MubGluZVNlcCA9IHZhbDtcbiAgICBpZiAoIXZhbCkgcmV0dXJuO1xuICAgIHZhciBuZXdCcmVha3MgPSBbXSwgbGluZU5vID0gY20uZG9jLmZpcnN0O1xuICAgIGNtLmRvYy5pdGVyKGZ1bmN0aW9uKGxpbmUpIHtcbiAgICAgIGZvciAodmFyIHBvcyA9IDA7Oykge1xuICAgICAgICB2YXIgZm91bmQgPSBsaW5lLnRleHQuaW5kZXhPZih2YWwsIHBvcyk7XG4gICAgICAgIGlmIChmb3VuZCA9PSAtMSkgYnJlYWs7XG4gICAgICAgIHBvcyA9IGZvdW5kICsgdmFsLmxlbmd0aDtcbiAgICAgICAgbmV3QnJlYWtzLnB1c2goUG9zKGxpbmVObywgZm91bmQpKTtcbiAgICAgIH1cbiAgICAgIGxpbmVObysrO1xuICAgIH0pO1xuICAgIGZvciAodmFyIGkgPSBuZXdCcmVha3MubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pXG4gICAgICByZXBsYWNlUmFuZ2UoY20uZG9jLCB2YWwsIG5ld0JyZWFrc1tpXSwgUG9zKG5ld0JyZWFrc1tpXS5saW5lLCBuZXdCcmVha3NbaV0uY2ggKyB2YWwubGVuZ3RoKSlcbiAgfSk7XG4gIG9wdGlvbihcInNwZWNpYWxDaGFyc1wiLCAvW1xcdFxcdTAwMDAtXFx1MDAxOVxcdTAwYWRcXHUyMDBiLVxcdTIwMGZcXHUyMDI4XFx1MjAyOVxcdWZlZmZdL2csIGZ1bmN0aW9uKGNtLCB2YWwsIG9sZCkge1xuICAgIGNtLnN0YXRlLnNwZWNpYWxDaGFycyA9IG5ldyBSZWdFeHAodmFsLnNvdXJjZSArICh2YWwudGVzdChcIlxcdFwiKSA/IFwiXCIgOiBcInxcXHRcIiksIFwiZ1wiKTtcbiAgICBpZiAob2xkICE9IENvZGVNaXJyb3IuSW5pdCkgY20ucmVmcmVzaCgpO1xuICB9KTtcbiAgb3B0aW9uKFwic3BlY2lhbENoYXJQbGFjZWhvbGRlclwiLCBkZWZhdWx0U3BlY2lhbENoYXJQbGFjZWhvbGRlciwgZnVuY3Rpb24oY20pIHtjbS5yZWZyZXNoKCk7fSwgdHJ1ZSk7XG4gIG9wdGlvbihcImVsZWN0cmljQ2hhcnNcIiwgdHJ1ZSk7XG4gIG9wdGlvbihcImlucHV0U3R5bGVcIiwgbW9iaWxlID8gXCJjb250ZW50ZWRpdGFibGVcIiA6IFwidGV4dGFyZWFcIiwgZnVuY3Rpb24oKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiaW5wdXRTdHlsZSBjYW4gbm90ICh5ZXQpIGJlIGNoYW5nZWQgaW4gYSBydW5uaW5nIGVkaXRvclwiKTsgLy8gRklYTUVcbiAgfSwgdHJ1ZSk7XG4gIG9wdGlvbihcInJ0bE1vdmVWaXN1YWxseVwiLCAhd2luZG93cyk7XG4gIG9wdGlvbihcIndob2xlTGluZVVwZGF0ZUJlZm9yZVwiLCB0cnVlKTtcblxuICBvcHRpb24oXCJ0aGVtZVwiLCBcImRlZmF1bHRcIiwgZnVuY3Rpb24oY20pIHtcbiAgICB0aGVtZUNoYW5nZWQoY20pO1xuICAgIGd1dHRlcnNDaGFuZ2VkKGNtKTtcbiAgfSwgdHJ1ZSk7XG4gIG9wdGlvbihcImtleU1hcFwiLCBcImRlZmF1bHRcIiwgZnVuY3Rpb24oY20sIHZhbCwgb2xkKSB7XG4gICAgdmFyIG5leHQgPSBnZXRLZXlNYXAodmFsKTtcbiAgICB2YXIgcHJldiA9IG9sZCAhPSBDb2RlTWlycm9yLkluaXQgJiYgZ2V0S2V5TWFwKG9sZCk7XG4gICAgaWYgKHByZXYgJiYgcHJldi5kZXRhY2gpIHByZXYuZGV0YWNoKGNtLCBuZXh0KTtcbiAgICBpZiAobmV4dC5hdHRhY2gpIG5leHQuYXR0YWNoKGNtLCBwcmV2IHx8IG51bGwpO1xuICB9KTtcbiAgb3B0aW9uKFwiZXh0cmFLZXlzXCIsIG51bGwpO1xuXG4gIG9wdGlvbihcImxpbmVXcmFwcGluZ1wiLCBmYWxzZSwgd3JhcHBpbmdDaGFuZ2VkLCB0cnVlKTtcbiAgb3B0aW9uKFwiZ3V0dGVyc1wiLCBbXSwgZnVuY3Rpb24oY20pIHtcbiAgICBzZXRHdXR0ZXJzRm9yTGluZU51bWJlcnMoY20ub3B0aW9ucyk7XG4gICAgZ3V0dGVyc0NoYW5nZWQoY20pO1xuICB9LCB0cnVlKTtcbiAgb3B0aW9uKFwiZml4ZWRHdXR0ZXJcIiwgdHJ1ZSwgZnVuY3Rpb24oY20sIHZhbCkge1xuICAgIGNtLmRpc3BsYXkuZ3V0dGVycy5zdHlsZS5sZWZ0ID0gdmFsID8gY29tcGVuc2F0ZUZvckhTY3JvbGwoY20uZGlzcGxheSkgKyBcInB4XCIgOiBcIjBcIjtcbiAgICBjbS5yZWZyZXNoKCk7XG4gIH0sIHRydWUpO1xuICBvcHRpb24oXCJjb3Zlckd1dHRlck5leHRUb1Njcm9sbGJhclwiLCBmYWxzZSwgZnVuY3Rpb24oY20pIHt1cGRhdGVTY3JvbGxiYXJzKGNtKTt9LCB0cnVlKTtcbiAgb3B0aW9uKFwic2Nyb2xsYmFyU3R5bGVcIiwgXCJuYXRpdmVcIiwgZnVuY3Rpb24oY20pIHtcbiAgICBpbml0U2Nyb2xsYmFycyhjbSk7XG4gICAgdXBkYXRlU2Nyb2xsYmFycyhjbSk7XG4gICAgY20uZGlzcGxheS5zY3JvbGxiYXJzLnNldFNjcm9sbFRvcChjbS5kb2Muc2Nyb2xsVG9wKTtcbiAgICBjbS5kaXNwbGF5LnNjcm9sbGJhcnMuc2V0U2Nyb2xsTGVmdChjbS5kb2Muc2Nyb2xsTGVmdCk7XG4gIH0sIHRydWUpO1xuICBvcHRpb24oXCJsaW5lTnVtYmVyc1wiLCBmYWxzZSwgZnVuY3Rpb24oY20pIHtcbiAgICBzZXRHdXR0ZXJzRm9yTGluZU51bWJlcnMoY20ub3B0aW9ucyk7XG4gICAgZ3V0dGVyc0NoYW5nZWQoY20pO1xuICB9LCB0cnVlKTtcbiAgb3B0aW9uKFwiZmlyc3RMaW5lTnVtYmVyXCIsIDEsIGd1dHRlcnNDaGFuZ2VkLCB0cnVlKTtcbiAgb3B0aW9uKFwibGluZU51bWJlckZvcm1hdHRlclwiLCBmdW5jdGlvbihpbnRlZ2VyKSB7cmV0dXJuIGludGVnZXI7fSwgZ3V0dGVyc0NoYW5nZWQsIHRydWUpO1xuICBvcHRpb24oXCJzaG93Q3Vyc29yV2hlblNlbGVjdGluZ1wiLCBmYWxzZSwgdXBkYXRlU2VsZWN0aW9uLCB0cnVlKTtcblxuICBvcHRpb24oXCJyZXNldFNlbGVjdGlvbk9uQ29udGV4dE1lbnVcIiwgdHJ1ZSk7XG4gIG9wdGlvbihcImxpbmVXaXNlQ29weUN1dFwiLCB0cnVlKTtcblxuICBvcHRpb24oXCJyZWFkT25seVwiLCBmYWxzZSwgZnVuY3Rpb24oY20sIHZhbCkge1xuICAgIGlmICh2YWwgPT0gXCJub2N1cnNvclwiKSB7XG4gICAgICBvbkJsdXIoY20pO1xuICAgICAgY20uZGlzcGxheS5pbnB1dC5ibHVyKCk7XG4gICAgICBjbS5kaXNwbGF5LmRpc2FibGVkID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgY20uZGlzcGxheS5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIH1cbiAgICBjbS5kaXNwbGF5LmlucHV0LnJlYWRPbmx5Q2hhbmdlZCh2YWwpXG4gIH0pO1xuICBvcHRpb24oXCJkaXNhYmxlSW5wdXRcIiwgZmFsc2UsIGZ1bmN0aW9uKGNtLCB2YWwpIHtpZiAoIXZhbCkgY20uZGlzcGxheS5pbnB1dC5yZXNldCgpO30sIHRydWUpO1xuICBvcHRpb24oXCJkcmFnRHJvcFwiLCB0cnVlLCBkcmFnRHJvcENoYW5nZWQpO1xuICBvcHRpb24oXCJhbGxvd0Ryb3BGaWxlVHlwZXNcIiwgbnVsbCk7XG5cbiAgb3B0aW9uKFwiY3Vyc29yQmxpbmtSYXRlXCIsIDUzMCk7XG4gIG9wdGlvbihcImN1cnNvclNjcm9sbE1hcmdpblwiLCAwKTtcbiAgb3B0aW9uKFwiY3Vyc29ySGVpZ2h0XCIsIDEsIHVwZGF0ZVNlbGVjdGlvbiwgdHJ1ZSk7XG4gIG9wdGlvbihcInNpbmdsZUN1cnNvckhlaWdodFBlckxpbmVcIiwgdHJ1ZSwgdXBkYXRlU2VsZWN0aW9uLCB0cnVlKTtcbiAgb3B0aW9uKFwid29ya1RpbWVcIiwgMTAwKTtcbiAgb3B0aW9uKFwid29ya0RlbGF5XCIsIDEwMCk7XG4gIG9wdGlvbihcImZsYXR0ZW5TcGFuc1wiLCB0cnVlLCByZXNldE1vZGVTdGF0ZSwgdHJ1ZSk7XG4gIG9wdGlvbihcImFkZE1vZGVDbGFzc1wiLCBmYWxzZSwgcmVzZXRNb2RlU3RhdGUsIHRydWUpO1xuICBvcHRpb24oXCJwb2xsSW50ZXJ2YWxcIiwgMTAwKTtcbiAgb3B0aW9uKFwidW5kb0RlcHRoXCIsIDIwMCwgZnVuY3Rpb24oY20sIHZhbCl7Y20uZG9jLmhpc3RvcnkudW5kb0RlcHRoID0gdmFsO30pO1xuICBvcHRpb24oXCJoaXN0b3J5RXZlbnREZWxheVwiLCAxMjUwKTtcbiAgb3B0aW9uKFwidmlld3BvcnRNYXJnaW5cIiwgMTAsIGZ1bmN0aW9uKGNtKXtjbS5yZWZyZXNoKCk7fSwgdHJ1ZSk7XG4gIG9wdGlvbihcIm1heEhpZ2hsaWdodExlbmd0aFwiLCAxMDAwMCwgcmVzZXRNb2RlU3RhdGUsIHRydWUpO1xuICBvcHRpb24oXCJtb3ZlSW5wdXRXaXRoQ3Vyc29yXCIsIHRydWUsIGZ1bmN0aW9uKGNtLCB2YWwpIHtcbiAgICBpZiAoIXZhbCkgY20uZGlzcGxheS5pbnB1dC5yZXNldFBvc2l0aW9uKCk7XG4gIH0pO1xuXG4gIG9wdGlvbihcInRhYmluZGV4XCIsIG51bGwsIGZ1bmN0aW9uKGNtLCB2YWwpIHtcbiAgICBjbS5kaXNwbGF5LmlucHV0LmdldEZpZWxkKCkudGFiSW5kZXggPSB2YWwgfHwgXCJcIjtcbiAgfSk7XG4gIG9wdGlvbihcImF1dG9mb2N1c1wiLCBudWxsKTtcblxuICAvLyBNT0RFIERFRklOSVRJT04gQU5EIFFVRVJZSU5HXG5cbiAgLy8gS25vd24gbW9kZXMsIGJ5IG5hbWUgYW5kIGJ5IE1JTUVcbiAgdmFyIG1vZGVzID0gQ29kZU1pcnJvci5tb2RlcyA9IHt9LCBtaW1lTW9kZXMgPSBDb2RlTWlycm9yLm1pbWVNb2RlcyA9IHt9O1xuXG4gIC8vIEV4dHJhIGFyZ3VtZW50cyBhcmUgc3RvcmVkIGFzIHRoZSBtb2RlJ3MgZGVwZW5kZW5jaWVzLCB3aGljaCBpc1xuICAvLyB1c2VkIGJ5IChsZWdhY3kpIG1lY2hhbmlzbXMgbGlrZSBsb2FkbW9kZS5qcyB0byBhdXRvbWF0aWNhbGx5XG4gIC8vIGxvYWQgYSBtb2RlLiAoUHJlZmVycmVkIG1lY2hhbmlzbSBpcyB0aGUgcmVxdWlyZS9kZWZpbmUgY2FsbHMuKVxuICBDb2RlTWlycm9yLmRlZmluZU1vZGUgPSBmdW5jdGlvbihuYW1lLCBtb2RlKSB7XG4gICAgaWYgKCFDb2RlTWlycm9yLmRlZmF1bHRzLm1vZGUgJiYgbmFtZSAhPSBcIm51bGxcIikgQ29kZU1pcnJvci5kZWZhdWx0cy5tb2RlID0gbmFtZTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDIpXG4gICAgICBtb2RlLmRlcGVuZGVuY2llcyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMik7XG4gICAgbW9kZXNbbmFtZV0gPSBtb2RlO1xuICB9O1xuXG4gIENvZGVNaXJyb3IuZGVmaW5lTUlNRSA9IGZ1bmN0aW9uKG1pbWUsIHNwZWMpIHtcbiAgICBtaW1lTW9kZXNbbWltZV0gPSBzcGVjO1xuICB9O1xuXG4gIC8vIEdpdmVuIGEgTUlNRSB0eXBlLCBhIHtuYW1lLCAuLi5vcHRpb25zfSBjb25maWcgb2JqZWN0LCBvciBhIG5hbWVcbiAgLy8gc3RyaW5nLCByZXR1cm4gYSBtb2RlIGNvbmZpZyBvYmplY3QuXG4gIENvZGVNaXJyb3IucmVzb2x2ZU1vZGUgPSBmdW5jdGlvbihzcGVjKSB7XG4gICAgaWYgKHR5cGVvZiBzcGVjID09IFwic3RyaW5nXCIgJiYgbWltZU1vZGVzLmhhc093blByb3BlcnR5KHNwZWMpKSB7XG4gICAgICBzcGVjID0gbWltZU1vZGVzW3NwZWNdO1xuICAgIH0gZWxzZSBpZiAoc3BlYyAmJiB0eXBlb2Ygc3BlYy5uYW1lID09IFwic3RyaW5nXCIgJiYgbWltZU1vZGVzLmhhc093blByb3BlcnR5KHNwZWMubmFtZSkpIHtcbiAgICAgIHZhciBmb3VuZCA9IG1pbWVNb2Rlc1tzcGVjLm5hbWVdO1xuICAgICAgaWYgKHR5cGVvZiBmb3VuZCA9PSBcInN0cmluZ1wiKSBmb3VuZCA9IHtuYW1lOiBmb3VuZH07XG4gICAgICBzcGVjID0gY3JlYXRlT2JqKGZvdW5kLCBzcGVjKTtcbiAgICAgIHNwZWMubmFtZSA9IGZvdW5kLm5hbWU7XG4gICAgfSBlbHNlIGlmICh0eXBlb2Ygc3BlYyA9PSBcInN0cmluZ1wiICYmIC9eW1xcd1xcLV0rXFwvW1xcd1xcLV0rXFwreG1sJC8udGVzdChzcGVjKSkge1xuICAgICAgcmV0dXJuIENvZGVNaXJyb3IucmVzb2x2ZU1vZGUoXCJhcHBsaWNhdGlvbi94bWxcIik7XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygc3BlYyA9PSBcInN0cmluZ1wiKSByZXR1cm4ge25hbWU6IHNwZWN9O1xuICAgIGVsc2UgcmV0dXJuIHNwZWMgfHwge25hbWU6IFwibnVsbFwifTtcbiAgfTtcblxuICAvLyBHaXZlbiBhIG1vZGUgc3BlYyAoYW55dGhpbmcgdGhhdCByZXNvbHZlTW9kZSBhY2NlcHRzKSwgZmluZCBhbmRcbiAgLy8gaW5pdGlhbGl6ZSBhbiBhY3R1YWwgbW9kZSBvYmplY3QuXG4gIENvZGVNaXJyb3IuZ2V0TW9kZSA9IGZ1bmN0aW9uKG9wdGlvbnMsIHNwZWMpIHtcbiAgICB2YXIgc3BlYyA9IENvZGVNaXJyb3IucmVzb2x2ZU1vZGUoc3BlYyk7XG4gICAgdmFyIG1mYWN0b3J5ID0gbW9kZXNbc3BlYy5uYW1lXTtcbiAgICBpZiAoIW1mYWN0b3J5KSByZXR1cm4gQ29kZU1pcnJvci5nZXRNb2RlKG9wdGlvbnMsIFwidGV4dC9wbGFpblwiKTtcbiAgICB2YXIgbW9kZU9iaiA9IG1mYWN0b3J5KG9wdGlvbnMsIHNwZWMpO1xuICAgIGlmIChtb2RlRXh0ZW5zaW9ucy5oYXNPd25Qcm9wZXJ0eShzcGVjLm5hbWUpKSB7XG4gICAgICB2YXIgZXh0cyA9IG1vZGVFeHRlbnNpb25zW3NwZWMubmFtZV07XG4gICAgICBmb3IgKHZhciBwcm9wIGluIGV4dHMpIHtcbiAgICAgICAgaWYgKCFleHRzLmhhc093blByb3BlcnR5KHByb3ApKSBjb250aW51ZTtcbiAgICAgICAgaWYgKG1vZGVPYmouaGFzT3duUHJvcGVydHkocHJvcCkpIG1vZGVPYmpbXCJfXCIgKyBwcm9wXSA9IG1vZGVPYmpbcHJvcF07XG4gICAgICAgIG1vZGVPYmpbcHJvcF0gPSBleHRzW3Byb3BdO1xuICAgICAgfVxuICAgIH1cbiAgICBtb2RlT2JqLm5hbWUgPSBzcGVjLm5hbWU7XG4gICAgaWYgKHNwZWMuaGVscGVyVHlwZSkgbW9kZU9iai5oZWxwZXJUeXBlID0gc3BlYy5oZWxwZXJUeXBlO1xuICAgIGlmIChzcGVjLm1vZGVQcm9wcykgZm9yICh2YXIgcHJvcCBpbiBzcGVjLm1vZGVQcm9wcylcbiAgICAgIG1vZGVPYmpbcHJvcF0gPSBzcGVjLm1vZGVQcm9wc1twcm9wXTtcblxuICAgIHJldHVybiBtb2RlT2JqO1xuICB9O1xuXG4gIC8vIE1pbmltYWwgZGVmYXVsdCBtb2RlLlxuICBDb2RlTWlycm9yLmRlZmluZU1vZGUoXCJudWxsXCIsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7dG9rZW46IGZ1bmN0aW9uKHN0cmVhbSkge3N0cmVhbS5za2lwVG9FbmQoKTt9fTtcbiAgfSk7XG4gIENvZGVNaXJyb3IuZGVmaW5lTUlNRShcInRleHQvcGxhaW5cIiwgXCJudWxsXCIpO1xuXG4gIC8vIFRoaXMgY2FuIGJlIHVzZWQgdG8gYXR0YWNoIHByb3BlcnRpZXMgdG8gbW9kZSBvYmplY3RzIGZyb21cbiAgLy8gb3V0c2lkZSB0aGUgYWN0dWFsIG1vZGUgZGVmaW5pdGlvbi5cbiAgdmFyIG1vZGVFeHRlbnNpb25zID0gQ29kZU1pcnJvci5tb2RlRXh0ZW5zaW9ucyA9IHt9O1xuICBDb2RlTWlycm9yLmV4dGVuZE1vZGUgPSBmdW5jdGlvbihtb2RlLCBwcm9wZXJ0aWVzKSB7XG4gICAgdmFyIGV4dHMgPSBtb2RlRXh0ZW5zaW9ucy5oYXNPd25Qcm9wZXJ0eShtb2RlKSA/IG1vZGVFeHRlbnNpb25zW21vZGVdIDogKG1vZGVFeHRlbnNpb25zW21vZGVdID0ge30pO1xuICAgIGNvcHlPYmoocHJvcGVydGllcywgZXh0cyk7XG4gIH07XG5cbiAgLy8gRVhURU5TSU9OU1xuXG4gIENvZGVNaXJyb3IuZGVmaW5lRXh0ZW5zaW9uID0gZnVuY3Rpb24obmFtZSwgZnVuYykge1xuICAgIENvZGVNaXJyb3IucHJvdG90eXBlW25hbWVdID0gZnVuYztcbiAgfTtcbiAgQ29kZU1pcnJvci5kZWZpbmVEb2NFeHRlbnNpb24gPSBmdW5jdGlvbihuYW1lLCBmdW5jKSB7XG4gICAgRG9jLnByb3RvdHlwZVtuYW1lXSA9IGZ1bmM7XG4gIH07XG4gIENvZGVNaXJyb3IuZGVmaW5lT3B0aW9uID0gb3B0aW9uO1xuXG4gIHZhciBpbml0SG9va3MgPSBbXTtcbiAgQ29kZU1pcnJvci5kZWZpbmVJbml0SG9vayA9IGZ1bmN0aW9uKGYpIHtpbml0SG9va3MucHVzaChmKTt9O1xuXG4gIHZhciBoZWxwZXJzID0gQ29kZU1pcnJvci5oZWxwZXJzID0ge307XG4gIENvZGVNaXJyb3IucmVnaXN0ZXJIZWxwZXIgPSBmdW5jdGlvbih0eXBlLCBuYW1lLCB2YWx1ZSkge1xuICAgIGlmICghaGVscGVycy5oYXNPd25Qcm9wZXJ0eSh0eXBlKSkgaGVscGVyc1t0eXBlXSA9IENvZGVNaXJyb3JbdHlwZV0gPSB7X2dsb2JhbDogW119O1xuICAgIGhlbHBlcnNbdHlwZV1bbmFtZV0gPSB2YWx1ZTtcbiAgfTtcbiAgQ29kZU1pcnJvci5yZWdpc3Rlckdsb2JhbEhlbHBlciA9IGZ1bmN0aW9uKHR5cGUsIG5hbWUsIHByZWRpY2F0ZSwgdmFsdWUpIHtcbiAgICBDb2RlTWlycm9yLnJlZ2lzdGVySGVscGVyKHR5cGUsIG5hbWUsIHZhbHVlKTtcbiAgICBoZWxwZXJzW3R5cGVdLl9nbG9iYWwucHVzaCh7cHJlZDogcHJlZGljYXRlLCB2YWw6IHZhbHVlfSk7XG4gIH07XG5cbiAgLy8gTU9ERSBTVEFURSBIQU5ETElOR1xuXG4gIC8vIFV0aWxpdHkgZnVuY3Rpb25zIGZvciB3b3JraW5nIHdpdGggc3RhdGUuIEV4cG9ydGVkIGJlY2F1c2UgbmVzdGVkXG4gIC8vIG1vZGVzIG5lZWQgdG8gZG8gdGhpcyBmb3IgdGhlaXIgaW5uZXIgbW9kZXMuXG5cbiAgdmFyIGNvcHlTdGF0ZSA9IENvZGVNaXJyb3IuY29weVN0YXRlID0gZnVuY3Rpb24obW9kZSwgc3RhdGUpIHtcbiAgICBpZiAoc3RhdGUgPT09IHRydWUpIHJldHVybiBzdGF0ZTtcbiAgICBpZiAobW9kZS5jb3B5U3RhdGUpIHJldHVybiBtb2RlLmNvcHlTdGF0ZShzdGF0ZSk7XG4gICAgdmFyIG5zdGF0ZSA9IHt9O1xuICAgIGZvciAodmFyIG4gaW4gc3RhdGUpIHtcbiAgICAgIHZhciB2YWwgPSBzdGF0ZVtuXTtcbiAgICAgIGlmICh2YWwgaW5zdGFuY2VvZiBBcnJheSkgdmFsID0gdmFsLmNvbmNhdChbXSk7XG4gICAgICBuc3RhdGVbbl0gPSB2YWw7XG4gICAgfVxuICAgIHJldHVybiBuc3RhdGU7XG4gIH07XG5cbiAgdmFyIHN0YXJ0U3RhdGUgPSBDb2RlTWlycm9yLnN0YXJ0U3RhdGUgPSBmdW5jdGlvbihtb2RlLCBhMSwgYTIpIHtcbiAgICByZXR1cm4gbW9kZS5zdGFydFN0YXRlID8gbW9kZS5zdGFydFN0YXRlKGExLCBhMikgOiB0cnVlO1xuICB9O1xuXG4gIC8vIEdpdmVuIGEgbW9kZSBhbmQgYSBzdGF0ZSAoZm9yIHRoYXQgbW9kZSksIGZpbmQgdGhlIGlubmVyIG1vZGUgYW5kXG4gIC8vIHN0YXRlIGF0IHRoZSBwb3NpdGlvbiB0aGF0IHRoZSBzdGF0ZSByZWZlcnMgdG8uXG4gIENvZGVNaXJyb3IuaW5uZXJNb2RlID0gZnVuY3Rpb24obW9kZSwgc3RhdGUpIHtcbiAgICB3aGlsZSAobW9kZS5pbm5lck1vZGUpIHtcbiAgICAgIHZhciBpbmZvID0gbW9kZS5pbm5lck1vZGUoc3RhdGUpO1xuICAgICAgaWYgKCFpbmZvIHx8IGluZm8ubW9kZSA9PSBtb2RlKSBicmVhaztcbiAgICAgIHN0YXRlID0gaW5mby5zdGF0ZTtcbiAgICAgIG1vZGUgPSBpbmZvLm1vZGU7XG4gICAgfVxuICAgIHJldHVybiBpbmZvIHx8IHttb2RlOiBtb2RlLCBzdGF0ZTogc3RhdGV9O1xuICB9O1xuXG4gIC8vIFNUQU5EQVJEIENPTU1BTkRTXG5cbiAgLy8gQ29tbWFuZHMgYXJlIHBhcmFtZXRlci1sZXNzIGFjdGlvbnMgdGhhdCBjYW4gYmUgcGVyZm9ybWVkIG9uIGFuXG4gIC8vIGVkaXRvciwgbW9zdGx5IHVzZWQgZm9yIGtleWJpbmRpbmdzLlxuICB2YXIgY29tbWFuZHMgPSBDb2RlTWlycm9yLmNvbW1hbmRzID0ge1xuICAgIHNlbGVjdEFsbDogZnVuY3Rpb24oY20pIHtjbS5zZXRTZWxlY3Rpb24oUG9zKGNtLmZpcnN0TGluZSgpLCAwKSwgUG9zKGNtLmxhc3RMaW5lKCkpLCBzZWxfZG9udFNjcm9sbCk7fSxcbiAgICBzaW5nbGVTZWxlY3Rpb246IGZ1bmN0aW9uKGNtKSB7XG4gICAgICBjbS5zZXRTZWxlY3Rpb24oY20uZ2V0Q3Vyc29yKFwiYW5jaG9yXCIpLCBjbS5nZXRDdXJzb3IoXCJoZWFkXCIpLCBzZWxfZG9udFNjcm9sbCk7XG4gICAgfSxcbiAgICBraWxsTGluZTogZnVuY3Rpb24oY20pIHtcbiAgICAgIGRlbGV0ZU5lYXJTZWxlY3Rpb24oY20sIGZ1bmN0aW9uKHJhbmdlKSB7XG4gICAgICAgIGlmIChyYW5nZS5lbXB0eSgpKSB7XG4gICAgICAgICAgdmFyIGxlbiA9IGdldExpbmUoY20uZG9jLCByYW5nZS5oZWFkLmxpbmUpLnRleHQubGVuZ3RoO1xuICAgICAgICAgIGlmIChyYW5nZS5oZWFkLmNoID09IGxlbiAmJiByYW5nZS5oZWFkLmxpbmUgPCBjbS5sYXN0TGluZSgpKVxuICAgICAgICAgICAgcmV0dXJuIHtmcm9tOiByYW5nZS5oZWFkLCB0bzogUG9zKHJhbmdlLmhlYWQubGluZSArIDEsIDApfTtcbiAgICAgICAgICBlbHNlXG4gICAgICAgICAgICByZXR1cm4ge2Zyb206IHJhbmdlLmhlYWQsIHRvOiBQb3MocmFuZ2UuaGVhZC5saW5lLCBsZW4pfTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4ge2Zyb206IHJhbmdlLmZyb20oKSwgdG86IHJhbmdlLnRvKCl9O1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LFxuICAgIGRlbGV0ZUxpbmU6IGZ1bmN0aW9uKGNtKSB7XG4gICAgICBkZWxldGVOZWFyU2VsZWN0aW9uKGNtLCBmdW5jdGlvbihyYW5nZSkge1xuICAgICAgICByZXR1cm4ge2Zyb206IFBvcyhyYW5nZS5mcm9tKCkubGluZSwgMCksXG4gICAgICAgICAgICAgICAgdG86IGNsaXBQb3MoY20uZG9jLCBQb3MocmFuZ2UudG8oKS5saW5lICsgMSwgMCkpfTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgZGVsTGluZUxlZnQ6IGZ1bmN0aW9uKGNtKSB7XG4gICAgICBkZWxldGVOZWFyU2VsZWN0aW9uKGNtLCBmdW5jdGlvbihyYW5nZSkge1xuICAgICAgICByZXR1cm4ge2Zyb206IFBvcyhyYW5nZS5mcm9tKCkubGluZSwgMCksIHRvOiByYW5nZS5mcm9tKCl9O1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBkZWxXcmFwcGVkTGluZUxlZnQ6IGZ1bmN0aW9uKGNtKSB7XG4gICAgICBkZWxldGVOZWFyU2VsZWN0aW9uKGNtLCBmdW5jdGlvbihyYW5nZSkge1xuICAgICAgICB2YXIgdG9wID0gY20uY2hhckNvb3JkcyhyYW5nZS5oZWFkLCBcImRpdlwiKS50b3AgKyA1O1xuICAgICAgICB2YXIgbGVmdFBvcyA9IGNtLmNvb3Jkc0NoYXIoe2xlZnQ6IDAsIHRvcDogdG9wfSwgXCJkaXZcIik7XG4gICAgICAgIHJldHVybiB7ZnJvbTogbGVmdFBvcywgdG86IHJhbmdlLmZyb20oKX07XG4gICAgICB9KTtcbiAgICB9LFxuICAgIGRlbFdyYXBwZWRMaW5lUmlnaHQ6IGZ1bmN0aW9uKGNtKSB7XG4gICAgICBkZWxldGVOZWFyU2VsZWN0aW9uKGNtLCBmdW5jdGlvbihyYW5nZSkge1xuICAgICAgICB2YXIgdG9wID0gY20uY2hhckNvb3JkcyhyYW5nZS5oZWFkLCBcImRpdlwiKS50b3AgKyA1O1xuICAgICAgICB2YXIgcmlnaHRQb3MgPSBjbS5jb29yZHNDaGFyKHtsZWZ0OiBjbS5kaXNwbGF5LmxpbmVEaXYub2Zmc2V0V2lkdGggKyAxMDAsIHRvcDogdG9wfSwgXCJkaXZcIik7XG4gICAgICAgIHJldHVybiB7ZnJvbTogcmFuZ2UuZnJvbSgpLCB0bzogcmlnaHRQb3MgfTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgdW5kbzogZnVuY3Rpb24oY20pIHtjbS51bmRvKCk7fSxcbiAgICByZWRvOiBmdW5jdGlvbihjbSkge2NtLnJlZG8oKTt9LFxuICAgIHVuZG9TZWxlY3Rpb246IGZ1bmN0aW9uKGNtKSB7Y20udW5kb1NlbGVjdGlvbigpO30sXG4gICAgcmVkb1NlbGVjdGlvbjogZnVuY3Rpb24oY20pIHtjbS5yZWRvU2VsZWN0aW9uKCk7fSxcbiAgICBnb0RvY1N0YXJ0OiBmdW5jdGlvbihjbSkge2NtLmV4dGVuZFNlbGVjdGlvbihQb3MoY20uZmlyc3RMaW5lKCksIDApKTt9LFxuICAgIGdvRG9jRW5kOiBmdW5jdGlvbihjbSkge2NtLmV4dGVuZFNlbGVjdGlvbihQb3MoY20ubGFzdExpbmUoKSkpO30sXG4gICAgZ29MaW5lU3RhcnQ6IGZ1bmN0aW9uKGNtKSB7XG4gICAgICBjbS5leHRlbmRTZWxlY3Rpb25zQnkoZnVuY3Rpb24ocmFuZ2UpIHsgcmV0dXJuIGxpbmVTdGFydChjbSwgcmFuZ2UuaGVhZC5saW5lKTsgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7b3JpZ2luOiBcIittb3ZlXCIsIGJpYXM6IDF9KTtcbiAgICB9LFxuICAgIGdvTGluZVN0YXJ0U21hcnQ6IGZ1bmN0aW9uKGNtKSB7XG4gICAgICBjbS5leHRlbmRTZWxlY3Rpb25zQnkoZnVuY3Rpb24ocmFuZ2UpIHtcbiAgICAgICAgcmV0dXJuIGxpbmVTdGFydFNtYXJ0KGNtLCByYW5nZS5oZWFkKTtcbiAgICAgIH0sIHtvcmlnaW46IFwiK21vdmVcIiwgYmlhczogMX0pO1xuICAgIH0sXG4gICAgZ29MaW5lRW5kOiBmdW5jdGlvbihjbSkge1xuICAgICAgY20uZXh0ZW5kU2VsZWN0aW9uc0J5KGZ1bmN0aW9uKHJhbmdlKSB7IHJldHVybiBsaW5lRW5kKGNtLCByYW5nZS5oZWFkLmxpbmUpOyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtvcmlnaW46IFwiK21vdmVcIiwgYmlhczogLTF9KTtcbiAgICB9LFxuICAgIGdvTGluZVJpZ2h0OiBmdW5jdGlvbihjbSkge1xuICAgICAgY20uZXh0ZW5kU2VsZWN0aW9uc0J5KGZ1bmN0aW9uKHJhbmdlKSB7XG4gICAgICAgIHZhciB0b3AgPSBjbS5jaGFyQ29vcmRzKHJhbmdlLmhlYWQsIFwiZGl2XCIpLnRvcCArIDU7XG4gICAgICAgIHJldHVybiBjbS5jb29yZHNDaGFyKHtsZWZ0OiBjbS5kaXNwbGF5LmxpbmVEaXYub2Zmc2V0V2lkdGggKyAxMDAsIHRvcDogdG9wfSwgXCJkaXZcIik7XG4gICAgICB9LCBzZWxfbW92ZSk7XG4gICAgfSxcbiAgICBnb0xpbmVMZWZ0OiBmdW5jdGlvbihjbSkge1xuICAgICAgY20uZXh0ZW5kU2VsZWN0aW9uc0J5KGZ1bmN0aW9uKHJhbmdlKSB7XG4gICAgICAgIHZhciB0b3AgPSBjbS5jaGFyQ29vcmRzKHJhbmdlLmhlYWQsIFwiZGl2XCIpLnRvcCArIDU7XG4gICAgICAgIHJldHVybiBjbS5jb29yZHNDaGFyKHtsZWZ0OiAwLCB0b3A6IHRvcH0sIFwiZGl2XCIpO1xuICAgICAgfSwgc2VsX21vdmUpO1xuICAgIH0sXG4gICAgZ29MaW5lTGVmdFNtYXJ0OiBmdW5jdGlvbihjbSkge1xuICAgICAgY20uZXh0ZW5kU2VsZWN0aW9uc0J5KGZ1bmN0aW9uKHJhbmdlKSB7XG4gICAgICAgIHZhciB0b3AgPSBjbS5jaGFyQ29vcmRzKHJhbmdlLmhlYWQsIFwiZGl2XCIpLnRvcCArIDU7XG4gICAgICAgIHZhciBwb3MgPSBjbS5jb29yZHNDaGFyKHtsZWZ0OiAwLCB0b3A6IHRvcH0sIFwiZGl2XCIpO1xuICAgICAgICBpZiAocG9zLmNoIDwgY20uZ2V0TGluZShwb3MubGluZSkuc2VhcmNoKC9cXFMvKSkgcmV0dXJuIGxpbmVTdGFydFNtYXJ0KGNtLCByYW5nZS5oZWFkKTtcbiAgICAgICAgcmV0dXJuIHBvcztcbiAgICAgIH0sIHNlbF9tb3ZlKTtcbiAgICB9LFxuICAgIGdvTGluZVVwOiBmdW5jdGlvbihjbSkge2NtLm1vdmVWKC0xLCBcImxpbmVcIik7fSxcbiAgICBnb0xpbmVEb3duOiBmdW5jdGlvbihjbSkge2NtLm1vdmVWKDEsIFwibGluZVwiKTt9LFxuICAgIGdvUGFnZVVwOiBmdW5jdGlvbihjbSkge2NtLm1vdmVWKC0xLCBcInBhZ2VcIik7fSxcbiAgICBnb1BhZ2VEb3duOiBmdW5jdGlvbihjbSkge2NtLm1vdmVWKDEsIFwicGFnZVwiKTt9LFxuICAgIGdvQ2hhckxlZnQ6IGZ1bmN0aW9uKGNtKSB7Y20ubW92ZUgoLTEsIFwiY2hhclwiKTt9LFxuICAgIGdvQ2hhclJpZ2h0OiBmdW5jdGlvbihjbSkge2NtLm1vdmVIKDEsIFwiY2hhclwiKTt9LFxuICAgIGdvQ29sdW1uTGVmdDogZnVuY3Rpb24oY20pIHtjbS5tb3ZlSCgtMSwgXCJjb2x1bW5cIik7fSxcbiAgICBnb0NvbHVtblJpZ2h0OiBmdW5jdGlvbihjbSkge2NtLm1vdmVIKDEsIFwiY29sdW1uXCIpO30sXG4gICAgZ29Xb3JkTGVmdDogZnVuY3Rpb24oY20pIHtjbS5tb3ZlSCgtMSwgXCJ3b3JkXCIpO30sXG4gICAgZ29Hcm91cFJpZ2h0OiBmdW5jdGlvbihjbSkge2NtLm1vdmVIKDEsIFwiZ3JvdXBcIik7fSxcbiAgICBnb0dyb3VwTGVmdDogZnVuY3Rpb24oY20pIHtjbS5tb3ZlSCgtMSwgXCJncm91cFwiKTt9LFxuICAgIGdvV29yZFJpZ2h0OiBmdW5jdGlvbihjbSkge2NtLm1vdmVIKDEsIFwid29yZFwiKTt9LFxuICAgIGRlbENoYXJCZWZvcmU6IGZ1bmN0aW9uKGNtKSB7Y20uZGVsZXRlSCgtMSwgXCJjaGFyXCIpO30sXG4gICAgZGVsQ2hhckFmdGVyOiBmdW5jdGlvbihjbSkge2NtLmRlbGV0ZUgoMSwgXCJjaGFyXCIpO30sXG4gICAgZGVsV29yZEJlZm9yZTogZnVuY3Rpb24oY20pIHtjbS5kZWxldGVIKC0xLCBcIndvcmRcIik7fSxcbiAgICBkZWxXb3JkQWZ0ZXI6IGZ1bmN0aW9uKGNtKSB7Y20uZGVsZXRlSCgxLCBcIndvcmRcIik7fSxcbiAgICBkZWxHcm91cEJlZm9yZTogZnVuY3Rpb24oY20pIHtjbS5kZWxldGVIKC0xLCBcImdyb3VwXCIpO30sXG4gICAgZGVsR3JvdXBBZnRlcjogZnVuY3Rpb24oY20pIHtjbS5kZWxldGVIKDEsIFwiZ3JvdXBcIik7fSxcbiAgICBpbmRlbnRBdXRvOiBmdW5jdGlvbihjbSkge2NtLmluZGVudFNlbGVjdGlvbihcInNtYXJ0XCIpO30sXG4gICAgaW5kZW50TW9yZTogZnVuY3Rpb24oY20pIHtjbS5pbmRlbnRTZWxlY3Rpb24oXCJhZGRcIik7fSxcbiAgICBpbmRlbnRMZXNzOiBmdW5jdGlvbihjbSkge2NtLmluZGVudFNlbGVjdGlvbihcInN1YnRyYWN0XCIpO30sXG4gICAgaW5zZXJ0VGFiOiBmdW5jdGlvbihjbSkge2NtLnJlcGxhY2VTZWxlY3Rpb24oXCJcXHRcIik7fSxcbiAgICBpbnNlcnRTb2Z0VGFiOiBmdW5jdGlvbihjbSkge1xuICAgICAgdmFyIHNwYWNlcyA9IFtdLCByYW5nZXMgPSBjbS5saXN0U2VsZWN0aW9ucygpLCB0YWJTaXplID0gY20ub3B0aW9ucy50YWJTaXplO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByYW5nZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIHBvcyA9IHJhbmdlc1tpXS5mcm9tKCk7XG4gICAgICAgIHZhciBjb2wgPSBjb3VudENvbHVtbihjbS5nZXRMaW5lKHBvcy5saW5lKSwgcG9zLmNoLCB0YWJTaXplKTtcbiAgICAgICAgc3BhY2VzLnB1c2gobmV3IEFycmF5KHRhYlNpemUgLSBjb2wgJSB0YWJTaXplICsgMSkuam9pbihcIiBcIikpO1xuICAgICAgfVxuICAgICAgY20ucmVwbGFjZVNlbGVjdGlvbnMoc3BhY2VzKTtcbiAgICB9LFxuICAgIGRlZmF1bHRUYWI6IGZ1bmN0aW9uKGNtKSB7XG4gICAgICBpZiAoY20uc29tZXRoaW5nU2VsZWN0ZWQoKSkgY20uaW5kZW50U2VsZWN0aW9uKFwiYWRkXCIpO1xuICAgICAgZWxzZSBjbS5leGVjQ29tbWFuZChcImluc2VydFRhYlwiKTtcbiAgICB9LFxuICAgIHRyYW5zcG9zZUNoYXJzOiBmdW5jdGlvbihjbSkge1xuICAgICAgcnVuSW5PcChjbSwgZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciByYW5nZXMgPSBjbS5saXN0U2VsZWN0aW9ucygpLCBuZXdTZWwgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByYW5nZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICB2YXIgY3VyID0gcmFuZ2VzW2ldLmhlYWQsIGxpbmUgPSBnZXRMaW5lKGNtLmRvYywgY3VyLmxpbmUpLnRleHQ7XG4gICAgICAgICAgaWYgKGxpbmUpIHtcbiAgICAgICAgICAgIGlmIChjdXIuY2ggPT0gbGluZS5sZW5ndGgpIGN1ciA9IG5ldyBQb3MoY3VyLmxpbmUsIGN1ci5jaCAtIDEpO1xuICAgICAgICAgICAgaWYgKGN1ci5jaCA+IDApIHtcbiAgICAgICAgICAgICAgY3VyID0gbmV3IFBvcyhjdXIubGluZSwgY3VyLmNoICsgMSk7XG4gICAgICAgICAgICAgIGNtLnJlcGxhY2VSYW5nZShsaW5lLmNoYXJBdChjdXIuY2ggLSAxKSArIGxpbmUuY2hhckF0KGN1ci5jaCAtIDIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUG9zKGN1ci5saW5lLCBjdXIuY2ggLSAyKSwgY3VyLCBcIit0cmFuc3Bvc2VcIik7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGN1ci5saW5lID4gY20uZG9jLmZpcnN0KSB7XG4gICAgICAgICAgICAgIHZhciBwcmV2ID0gZ2V0TGluZShjbS5kb2MsIGN1ci5saW5lIC0gMSkudGV4dDtcbiAgICAgICAgICAgICAgaWYgKHByZXYpXG4gICAgICAgICAgICAgICAgY20ucmVwbGFjZVJhbmdlKGxpbmUuY2hhckF0KDApICsgY20uZG9jLmxpbmVTZXBhcmF0b3IoKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXYuY2hhckF0KHByZXYubGVuZ3RoIC0gMSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBvcyhjdXIubGluZSAtIDEsIHByZXYubGVuZ3RoIC0gMSksIFBvcyhjdXIubGluZSwgMSksIFwiK3RyYW5zcG9zZVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgbmV3U2VsLnB1c2gobmV3IFJhbmdlKGN1ciwgY3VyKSk7XG4gICAgICAgIH1cbiAgICAgICAgY20uc2V0U2VsZWN0aW9ucyhuZXdTZWwpO1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBuZXdsaW5lQW5kSW5kZW50OiBmdW5jdGlvbihjbSkge1xuICAgICAgcnVuSW5PcChjbSwgZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBsZW4gPSBjbS5saXN0U2VsZWN0aW9ucygpLmxlbmd0aDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgIHZhciByYW5nZSA9IGNtLmxpc3RTZWxlY3Rpb25zKClbaV07XG4gICAgICAgICAgY20ucmVwbGFjZVJhbmdlKGNtLmRvYy5saW5lU2VwYXJhdG9yKCksIHJhbmdlLmFuY2hvciwgcmFuZ2UuaGVhZCwgXCIraW5wdXRcIik7XG4gICAgICAgICAgY20uaW5kZW50TGluZShyYW5nZS5mcm9tKCkubGluZSArIDEsIG51bGwsIHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIGVuc3VyZUN1cnNvclZpc2libGUoY20pO1xuICAgICAgfSk7XG4gICAgfSxcbiAgICB0b2dnbGVPdmVyd3JpdGU6IGZ1bmN0aW9uKGNtKSB7Y20udG9nZ2xlT3ZlcndyaXRlKCk7fVxuICB9O1xuXG5cbiAgLy8gU1RBTkRBUkQgS0VZTUFQU1xuXG4gIHZhciBrZXlNYXAgPSBDb2RlTWlycm9yLmtleU1hcCA9IHt9O1xuXG4gIGtleU1hcC5iYXNpYyA9IHtcbiAgICBcIkxlZnRcIjogXCJnb0NoYXJMZWZ0XCIsIFwiUmlnaHRcIjogXCJnb0NoYXJSaWdodFwiLCBcIlVwXCI6IFwiZ29MaW5lVXBcIiwgXCJEb3duXCI6IFwiZ29MaW5lRG93blwiLFxuICAgIFwiRW5kXCI6IFwiZ29MaW5lRW5kXCIsIFwiSG9tZVwiOiBcImdvTGluZVN0YXJ0U21hcnRcIiwgXCJQYWdlVXBcIjogXCJnb1BhZ2VVcFwiLCBcIlBhZ2VEb3duXCI6IFwiZ29QYWdlRG93blwiLFxuICAgIFwiRGVsZXRlXCI6IFwiZGVsQ2hhckFmdGVyXCIsIFwiQmFja3NwYWNlXCI6IFwiZGVsQ2hhckJlZm9yZVwiLCBcIlNoaWZ0LUJhY2tzcGFjZVwiOiBcImRlbENoYXJCZWZvcmVcIixcbiAgICBcIlRhYlwiOiBcImRlZmF1bHRUYWJcIiwgXCJTaGlmdC1UYWJcIjogXCJpbmRlbnRBdXRvXCIsXG4gICAgXCJFbnRlclwiOiBcIm5ld2xpbmVBbmRJbmRlbnRcIiwgXCJJbnNlcnRcIjogXCJ0b2dnbGVPdmVyd3JpdGVcIixcbiAgICBcIkVzY1wiOiBcInNpbmdsZVNlbGVjdGlvblwiXG4gIH07XG4gIC8vIE5vdGUgdGhhdCB0aGUgc2F2ZSBhbmQgZmluZC1yZWxhdGVkIGNvbW1hbmRzIGFyZW4ndCBkZWZpbmVkIGJ5XG4gIC8vIGRlZmF1bHQuIFVzZXIgY29kZSBvciBhZGRvbnMgY2FuIGRlZmluZSB0aGVtLiBVbmtub3duIGNvbW1hbmRzXG4gIC8vIGFyZSBzaW1wbHkgaWdub3JlZC5cbiAga2V5TWFwLnBjRGVmYXVsdCA9IHtcbiAgICBcIkN0cmwtQVwiOiBcInNlbGVjdEFsbFwiLCBcIkN0cmwtRFwiOiBcImRlbGV0ZUxpbmVcIiwgXCJDdHJsLVpcIjogXCJ1bmRvXCIsIFwiU2hpZnQtQ3RybC1aXCI6IFwicmVkb1wiLCBcIkN0cmwtWVwiOiBcInJlZG9cIixcbiAgICBcIkN0cmwtSG9tZVwiOiBcImdvRG9jU3RhcnRcIiwgXCJDdHJsLUVuZFwiOiBcImdvRG9jRW5kXCIsIFwiQ3RybC1VcFwiOiBcImdvTGluZVVwXCIsIFwiQ3RybC1Eb3duXCI6IFwiZ29MaW5lRG93blwiLFxuICAgIFwiQ3RybC1MZWZ0XCI6IFwiZ29Hcm91cExlZnRcIiwgXCJDdHJsLVJpZ2h0XCI6IFwiZ29Hcm91cFJpZ2h0XCIsIFwiQWx0LUxlZnRcIjogXCJnb0xpbmVTdGFydFwiLCBcIkFsdC1SaWdodFwiOiBcImdvTGluZUVuZFwiLFxuICAgIFwiQ3RybC1CYWNrc3BhY2VcIjogXCJkZWxHcm91cEJlZm9yZVwiLCBcIkN0cmwtRGVsZXRlXCI6IFwiZGVsR3JvdXBBZnRlclwiLCBcIkN0cmwtU1wiOiBcInNhdmVcIiwgXCJDdHJsLUZcIjogXCJmaW5kXCIsXG4gICAgXCJDdHJsLUdcIjogXCJmaW5kTmV4dFwiLCBcIlNoaWZ0LUN0cmwtR1wiOiBcImZpbmRQcmV2XCIsIFwiU2hpZnQtQ3RybC1GXCI6IFwicmVwbGFjZVwiLCBcIlNoaWZ0LUN0cmwtUlwiOiBcInJlcGxhY2VBbGxcIixcbiAgICBcIkN0cmwtW1wiOiBcImluZGVudExlc3NcIiwgXCJDdHJsLV1cIjogXCJpbmRlbnRNb3JlXCIsXG4gICAgXCJDdHJsLVVcIjogXCJ1bmRvU2VsZWN0aW9uXCIsIFwiU2hpZnQtQ3RybC1VXCI6IFwicmVkb1NlbGVjdGlvblwiLCBcIkFsdC1VXCI6IFwicmVkb1NlbGVjdGlvblwiLFxuICAgIGZhbGx0aHJvdWdoOiBcImJhc2ljXCJcbiAgfTtcbiAgLy8gVmVyeSBiYXNpYyByZWFkbGluZS9lbWFjcy1zdHlsZSBiaW5kaW5ncywgd2hpY2ggYXJlIHN0YW5kYXJkIG9uIE1hYy5cbiAga2V5TWFwLmVtYWNzeSA9IHtcbiAgICBcIkN0cmwtRlwiOiBcImdvQ2hhclJpZ2h0XCIsIFwiQ3RybC1CXCI6IFwiZ29DaGFyTGVmdFwiLCBcIkN0cmwtUFwiOiBcImdvTGluZVVwXCIsIFwiQ3RybC1OXCI6IFwiZ29MaW5lRG93blwiLFxuICAgIFwiQWx0LUZcIjogXCJnb1dvcmRSaWdodFwiLCBcIkFsdC1CXCI6IFwiZ29Xb3JkTGVmdFwiLCBcIkN0cmwtQVwiOiBcImdvTGluZVN0YXJ0XCIsIFwiQ3RybC1FXCI6IFwiZ29MaW5lRW5kXCIsXG4gICAgXCJDdHJsLVZcIjogXCJnb1BhZ2VEb3duXCIsIFwiU2hpZnQtQ3RybC1WXCI6IFwiZ29QYWdlVXBcIiwgXCJDdHJsLURcIjogXCJkZWxDaGFyQWZ0ZXJcIiwgXCJDdHJsLUhcIjogXCJkZWxDaGFyQmVmb3JlXCIsXG4gICAgXCJBbHQtRFwiOiBcImRlbFdvcmRBZnRlclwiLCBcIkFsdC1CYWNrc3BhY2VcIjogXCJkZWxXb3JkQmVmb3JlXCIsIFwiQ3RybC1LXCI6IFwia2lsbExpbmVcIiwgXCJDdHJsLVRcIjogXCJ0cmFuc3Bvc2VDaGFyc1wiXG4gIH07XG4gIGtleU1hcC5tYWNEZWZhdWx0ID0ge1xuICAgIFwiQ21kLUFcIjogXCJzZWxlY3RBbGxcIiwgXCJDbWQtRFwiOiBcImRlbGV0ZUxpbmVcIiwgXCJDbWQtWlwiOiBcInVuZG9cIiwgXCJTaGlmdC1DbWQtWlwiOiBcInJlZG9cIiwgXCJDbWQtWVwiOiBcInJlZG9cIixcbiAgICBcIkNtZC1Ib21lXCI6IFwiZ29Eb2NTdGFydFwiLCBcIkNtZC1VcFwiOiBcImdvRG9jU3RhcnRcIiwgXCJDbWQtRW5kXCI6IFwiZ29Eb2NFbmRcIiwgXCJDbWQtRG93blwiOiBcImdvRG9jRW5kXCIsIFwiQWx0LUxlZnRcIjogXCJnb0dyb3VwTGVmdFwiLFxuICAgIFwiQWx0LVJpZ2h0XCI6IFwiZ29Hcm91cFJpZ2h0XCIsIFwiQ21kLUxlZnRcIjogXCJnb0xpbmVMZWZ0XCIsIFwiQ21kLVJpZ2h0XCI6IFwiZ29MaW5lUmlnaHRcIiwgXCJBbHQtQmFja3NwYWNlXCI6IFwiZGVsR3JvdXBCZWZvcmVcIixcbiAgICBcIkN0cmwtQWx0LUJhY2tzcGFjZVwiOiBcImRlbEdyb3VwQWZ0ZXJcIiwgXCJBbHQtRGVsZXRlXCI6IFwiZGVsR3JvdXBBZnRlclwiLCBcIkNtZC1TXCI6IFwic2F2ZVwiLCBcIkNtZC1GXCI6IFwiZmluZFwiLFxuICAgIFwiQ21kLUdcIjogXCJmaW5kTmV4dFwiLCBcIlNoaWZ0LUNtZC1HXCI6IFwiZmluZFByZXZcIiwgXCJDbWQtQWx0LUZcIjogXCJyZXBsYWNlXCIsIFwiU2hpZnQtQ21kLUFsdC1GXCI6IFwicmVwbGFjZUFsbFwiLFxuICAgIFwiQ21kLVtcIjogXCJpbmRlbnRMZXNzXCIsIFwiQ21kLV1cIjogXCJpbmRlbnRNb3JlXCIsIFwiQ21kLUJhY2tzcGFjZVwiOiBcImRlbFdyYXBwZWRMaW5lTGVmdFwiLCBcIkNtZC1EZWxldGVcIjogXCJkZWxXcmFwcGVkTGluZVJpZ2h0XCIsXG4gICAgXCJDbWQtVVwiOiBcInVuZG9TZWxlY3Rpb25cIiwgXCJTaGlmdC1DbWQtVVwiOiBcInJlZG9TZWxlY3Rpb25cIiwgXCJDdHJsLVVwXCI6IFwiZ29Eb2NTdGFydFwiLCBcIkN0cmwtRG93blwiOiBcImdvRG9jRW5kXCIsXG4gICAgZmFsbHRocm91Z2g6IFtcImJhc2ljXCIsIFwiZW1hY3N5XCJdXG4gIH07XG4gIGtleU1hcFtcImRlZmF1bHRcIl0gPSBtYWMgPyBrZXlNYXAubWFjRGVmYXVsdCA6IGtleU1hcC5wY0RlZmF1bHQ7XG5cbiAgLy8gS0VZTUFQIERJU1BBVENIXG5cbiAgZnVuY3Rpb24gbm9ybWFsaXplS2V5TmFtZShuYW1lKSB7XG4gICAgdmFyIHBhcnRzID0gbmFtZS5zcGxpdCgvLSg/ISQpLyksIG5hbWUgPSBwYXJ0c1twYXJ0cy5sZW5ndGggLSAxXTtcbiAgICB2YXIgYWx0LCBjdHJsLCBzaGlmdCwgY21kO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGFydHMubGVuZ3RoIC0gMTsgaSsrKSB7XG4gICAgICB2YXIgbW9kID0gcGFydHNbaV07XG4gICAgICBpZiAoL14oY21kfG1ldGF8bSkkL2kudGVzdChtb2QpKSBjbWQgPSB0cnVlO1xuICAgICAgZWxzZSBpZiAoL15hKGx0KT8kL2kudGVzdChtb2QpKSBhbHQgPSB0cnVlO1xuICAgICAgZWxzZSBpZiAoL14oY3xjdHJsfGNvbnRyb2wpJC9pLnRlc3QobW9kKSkgY3RybCA9IHRydWU7XG4gICAgICBlbHNlIGlmICgvXnMoaGlmdCkkL2kudGVzdChtb2QpKSBzaGlmdCA9IHRydWU7XG4gICAgICBlbHNlIHRocm93IG5ldyBFcnJvcihcIlVucmVjb2duaXplZCBtb2RpZmllciBuYW1lOiBcIiArIG1vZCk7XG4gICAgfVxuICAgIGlmIChhbHQpIG5hbWUgPSBcIkFsdC1cIiArIG5hbWU7XG4gICAgaWYgKGN0cmwpIG5hbWUgPSBcIkN0cmwtXCIgKyBuYW1lO1xuICAgIGlmIChjbWQpIG5hbWUgPSBcIkNtZC1cIiArIG5hbWU7XG4gICAgaWYgKHNoaWZ0KSBuYW1lID0gXCJTaGlmdC1cIiArIG5hbWU7XG4gICAgcmV0dXJuIG5hbWU7XG4gIH1cblxuICAvLyBUaGlzIGlzIGEga2x1ZGdlIHRvIGtlZXAga2V5bWFwcyBtb3N0bHkgd29ya2luZyBhcyByYXcgb2JqZWN0c1xuICAvLyAoYmFja3dhcmRzIGNvbXBhdGliaWxpdHkpIHdoaWxlIGF0IHRoZSBzYW1lIHRpbWUgc3VwcG9ydCBmZWF0dXJlc1xuICAvLyBsaWtlIG5vcm1hbGl6YXRpb24gYW5kIG11bHRpLXN0cm9rZSBrZXkgYmluZGluZ3MuIEl0IGNvbXBpbGVzIGFcbiAgLy8gbmV3IG5vcm1hbGl6ZWQga2V5bWFwLCBhbmQgdGhlbiB1cGRhdGVzIHRoZSBvbGQgb2JqZWN0IHRvIHJlZmxlY3RcbiAgLy8gdGhpcy5cbiAgQ29kZU1pcnJvci5ub3JtYWxpemVLZXlNYXAgPSBmdW5jdGlvbihrZXltYXApIHtcbiAgICB2YXIgY29weSA9IHt9O1xuICAgIGZvciAodmFyIGtleW5hbWUgaW4ga2V5bWFwKSBpZiAoa2V5bWFwLmhhc093blByb3BlcnR5KGtleW5hbWUpKSB7XG4gICAgICB2YXIgdmFsdWUgPSBrZXltYXBba2V5bmFtZV07XG4gICAgICBpZiAoL14obmFtZXxmYWxsdGhyb3VnaHwoZGV8YXQpdGFjaCkkLy50ZXN0KGtleW5hbWUpKSBjb250aW51ZTtcbiAgICAgIGlmICh2YWx1ZSA9PSBcIi4uLlwiKSB7IGRlbGV0ZSBrZXltYXBba2V5bmFtZV07IGNvbnRpbnVlOyB9XG5cbiAgICAgIHZhciBrZXlzID0gbWFwKGtleW5hbWUuc3BsaXQoXCIgXCIpLCBub3JtYWxpemVLZXlOYW1lKTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgdmFsLCBuYW1lO1xuICAgICAgICBpZiAoaSA9PSBrZXlzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICBuYW1lID0ga2V5cy5qb2luKFwiIFwiKTtcbiAgICAgICAgICB2YWwgPSB2YWx1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuYW1lID0ga2V5cy5zbGljZSgwLCBpICsgMSkuam9pbihcIiBcIik7XG4gICAgICAgICAgdmFsID0gXCIuLi5cIjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcHJldiA9IGNvcHlbbmFtZV07XG4gICAgICAgIGlmICghcHJldikgY29weVtuYW1lXSA9IHZhbDtcbiAgICAgICAgZWxzZSBpZiAocHJldiAhPSB2YWwpIHRocm93IG5ldyBFcnJvcihcIkluY29uc2lzdGVudCBiaW5kaW5ncyBmb3IgXCIgKyBuYW1lKTtcbiAgICAgIH1cbiAgICAgIGRlbGV0ZSBrZXltYXBba2V5bmFtZV07XG4gICAgfVxuICAgIGZvciAodmFyIHByb3AgaW4gY29weSkga2V5bWFwW3Byb3BdID0gY29weVtwcm9wXTtcbiAgICByZXR1cm4ga2V5bWFwO1xuICB9O1xuXG4gIHZhciBsb29rdXBLZXkgPSBDb2RlTWlycm9yLmxvb2t1cEtleSA9IGZ1bmN0aW9uKGtleSwgbWFwLCBoYW5kbGUsIGNvbnRleHQpIHtcbiAgICBtYXAgPSBnZXRLZXlNYXAobWFwKTtcbiAgICB2YXIgZm91bmQgPSBtYXAuY2FsbCA/IG1hcC5jYWxsKGtleSwgY29udGV4dCkgOiBtYXBba2V5XTtcbiAgICBpZiAoZm91bmQgPT09IGZhbHNlKSByZXR1cm4gXCJub3RoaW5nXCI7XG4gICAgaWYgKGZvdW5kID09PSBcIi4uLlwiKSByZXR1cm4gXCJtdWx0aVwiO1xuICAgIGlmIChmb3VuZCAhPSBudWxsICYmIGhhbmRsZShmb3VuZCkpIHJldHVybiBcImhhbmRsZWRcIjtcblxuICAgIGlmIChtYXAuZmFsbHRocm91Z2gpIHtcbiAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobWFwLmZhbGx0aHJvdWdoKSAhPSBcIltvYmplY3QgQXJyYXldXCIpXG4gICAgICAgIHJldHVybiBsb29rdXBLZXkoa2V5LCBtYXAuZmFsbHRocm91Z2gsIGhhbmRsZSwgY29udGV4dCk7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1hcC5mYWxsdGhyb3VnaC5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgcmVzdWx0ID0gbG9va3VwS2V5KGtleSwgbWFwLmZhbGx0aHJvdWdoW2ldLCBoYW5kbGUsIGNvbnRleHQpO1xuICAgICAgICBpZiAocmVzdWx0KSByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICAvLyBNb2RpZmllciBrZXkgcHJlc3NlcyBkb24ndCBjb3VudCBhcyAncmVhbCcga2V5IHByZXNzZXMgZm9yIHRoZVxuICAvLyBwdXJwb3NlIG9mIGtleW1hcCBmYWxsdGhyb3VnaC5cbiAgdmFyIGlzTW9kaWZpZXJLZXkgPSBDb2RlTWlycm9yLmlzTW9kaWZpZXJLZXkgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHZhciBuYW1lID0gdHlwZW9mIHZhbHVlID09IFwic3RyaW5nXCIgPyB2YWx1ZSA6IGtleU5hbWVzW3ZhbHVlLmtleUNvZGVdO1xuICAgIHJldHVybiBuYW1lID09IFwiQ3RybFwiIHx8IG5hbWUgPT0gXCJBbHRcIiB8fCBuYW1lID09IFwiU2hpZnRcIiB8fCBuYW1lID09IFwiTW9kXCI7XG4gIH07XG5cbiAgLy8gTG9vayB1cCB0aGUgbmFtZSBvZiBhIGtleSBhcyBpbmRpY2F0ZWQgYnkgYW4gZXZlbnQgb2JqZWN0LlxuICB2YXIga2V5TmFtZSA9IENvZGVNaXJyb3Iua2V5TmFtZSA9IGZ1bmN0aW9uKGV2ZW50LCBub1NoaWZ0KSB7XG4gICAgaWYgKHByZXN0byAmJiBldmVudC5rZXlDb2RlID09IDM0ICYmIGV2ZW50W1wiY2hhclwiXSkgcmV0dXJuIGZhbHNlO1xuICAgIHZhciBiYXNlID0ga2V5TmFtZXNbZXZlbnQua2V5Q29kZV0sIG5hbWUgPSBiYXNlO1xuICAgIGlmIChuYW1lID09IG51bGwgfHwgZXZlbnQuYWx0R3JhcGhLZXkpIHJldHVybiBmYWxzZTtcbiAgICBpZiAoZXZlbnQuYWx0S2V5ICYmIGJhc2UgIT0gXCJBbHRcIikgbmFtZSA9IFwiQWx0LVwiICsgbmFtZTtcbiAgICBpZiAoKGZsaXBDdHJsQ21kID8gZXZlbnQubWV0YUtleSA6IGV2ZW50LmN0cmxLZXkpICYmIGJhc2UgIT0gXCJDdHJsXCIpIG5hbWUgPSBcIkN0cmwtXCIgKyBuYW1lO1xuICAgIGlmICgoZmxpcEN0cmxDbWQgPyBldmVudC5jdHJsS2V5IDogZXZlbnQubWV0YUtleSkgJiYgYmFzZSAhPSBcIkNtZFwiKSBuYW1lID0gXCJDbWQtXCIgKyBuYW1lO1xuICAgIGlmICghbm9TaGlmdCAmJiBldmVudC5zaGlmdEtleSAmJiBiYXNlICE9IFwiU2hpZnRcIikgbmFtZSA9IFwiU2hpZnQtXCIgKyBuYW1lO1xuICAgIHJldHVybiBuYW1lO1xuICB9O1xuXG4gIGZ1bmN0aW9uIGdldEtleU1hcCh2YWwpIHtcbiAgICByZXR1cm4gdHlwZW9mIHZhbCA9PSBcInN0cmluZ1wiID8ga2V5TWFwW3ZhbF0gOiB2YWw7XG4gIH1cblxuICAvLyBGUk9NVEVYVEFSRUFcblxuICBDb2RlTWlycm9yLmZyb21UZXh0QXJlYSA9IGZ1bmN0aW9uKHRleHRhcmVhLCBvcHRpb25zKSB7XG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgPyBjb3B5T2JqKG9wdGlvbnMpIDoge307XG4gICAgb3B0aW9ucy52YWx1ZSA9IHRleHRhcmVhLnZhbHVlO1xuICAgIGlmICghb3B0aW9ucy50YWJpbmRleCAmJiB0ZXh0YXJlYS50YWJJbmRleClcbiAgICAgIG9wdGlvbnMudGFiaW5kZXggPSB0ZXh0YXJlYS50YWJJbmRleDtcbiAgICBpZiAoIW9wdGlvbnMucGxhY2Vob2xkZXIgJiYgdGV4dGFyZWEucGxhY2Vob2xkZXIpXG4gICAgICBvcHRpb25zLnBsYWNlaG9sZGVyID0gdGV4dGFyZWEucGxhY2Vob2xkZXI7XG4gICAgLy8gU2V0IGF1dG9mb2N1cyB0byB0cnVlIGlmIHRoaXMgdGV4dGFyZWEgaXMgZm9jdXNlZCwgb3IgaWYgaXQgaGFzXG4gICAgLy8gYXV0b2ZvY3VzIGFuZCBubyBvdGhlciBlbGVtZW50IGlzIGZvY3VzZWQuXG4gICAgaWYgKG9wdGlvbnMuYXV0b2ZvY3VzID09IG51bGwpIHtcbiAgICAgIHZhciBoYXNGb2N1cyA9IGFjdGl2ZUVsdCgpO1xuICAgICAgb3B0aW9ucy5hdXRvZm9jdXMgPSBoYXNGb2N1cyA9PSB0ZXh0YXJlYSB8fFxuICAgICAgICB0ZXh0YXJlYS5nZXRBdHRyaWJ1dGUoXCJhdXRvZm9jdXNcIikgIT0gbnVsbCAmJiBoYXNGb2N1cyA9PSBkb2N1bWVudC5ib2R5O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNhdmUoKSB7dGV4dGFyZWEudmFsdWUgPSBjbS5nZXRWYWx1ZSgpO31cbiAgICBpZiAodGV4dGFyZWEuZm9ybSkge1xuICAgICAgb24odGV4dGFyZWEuZm9ybSwgXCJzdWJtaXRcIiwgc2F2ZSk7XG4gICAgICAvLyBEZXBsb3JhYmxlIGhhY2sgdG8gbWFrZSB0aGUgc3VibWl0IG1ldGhvZCBkbyB0aGUgcmlnaHQgdGhpbmcuXG4gICAgICBpZiAoIW9wdGlvbnMubGVhdmVTdWJtaXRNZXRob2RBbG9uZSkge1xuICAgICAgICB2YXIgZm9ybSA9IHRleHRhcmVhLmZvcm0sIHJlYWxTdWJtaXQgPSBmb3JtLnN1Ym1pdDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICB2YXIgd3JhcHBlZFN1Ym1pdCA9IGZvcm0uc3VibWl0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzYXZlKCk7XG4gICAgICAgICAgICBmb3JtLnN1Ym1pdCA9IHJlYWxTdWJtaXQ7XG4gICAgICAgICAgICBmb3JtLnN1Ym1pdCgpO1xuICAgICAgICAgICAgZm9ybS5zdWJtaXQgPSB3cmFwcGVkU3VibWl0O1xuICAgICAgICAgIH07XG4gICAgICAgIH0gY2F0Y2goZSkge31cbiAgICAgIH1cbiAgICB9XG5cbiAgICBvcHRpb25zLmZpbmlzaEluaXQgPSBmdW5jdGlvbihjbSkge1xuICAgICAgY20uc2F2ZSA9IHNhdmU7XG4gICAgICBjbS5nZXRUZXh0QXJlYSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGV4dGFyZWE7IH07XG4gICAgICBjbS50b1RleHRBcmVhID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGNtLnRvVGV4dEFyZWEgPSBpc05hTjsgLy8gUHJldmVudCB0aGlzIGZyb20gYmVpbmcgcmFuIHR3aWNlXG4gICAgICAgIHNhdmUoKTtcbiAgICAgICAgdGV4dGFyZWEucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChjbS5nZXRXcmFwcGVyRWxlbWVudCgpKTtcbiAgICAgICAgdGV4dGFyZWEuc3R5bGUuZGlzcGxheSA9IFwiXCI7XG4gICAgICAgIGlmICh0ZXh0YXJlYS5mb3JtKSB7XG4gICAgICAgICAgb2ZmKHRleHRhcmVhLmZvcm0sIFwic3VibWl0XCIsIHNhdmUpO1xuICAgICAgICAgIGlmICh0eXBlb2YgdGV4dGFyZWEuZm9ybS5zdWJtaXQgPT0gXCJmdW5jdGlvblwiKVxuICAgICAgICAgICAgdGV4dGFyZWEuZm9ybS5zdWJtaXQgPSByZWFsU3VibWl0O1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH07XG5cbiAgICB0ZXh0YXJlYS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgdmFyIGNtID0gQ29kZU1pcnJvcihmdW5jdGlvbihub2RlKSB7XG4gICAgICB0ZXh0YXJlYS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShub2RlLCB0ZXh0YXJlYS5uZXh0U2libGluZyk7XG4gICAgfSwgb3B0aW9ucyk7XG4gICAgcmV0dXJuIGNtO1xuICB9O1xuXG4gIC8vIFNUUklORyBTVFJFQU1cblxuICAvLyBGZWQgdG8gdGhlIG1vZGUgcGFyc2VycywgcHJvdmlkZXMgaGVscGVyIGZ1bmN0aW9ucyB0byBtYWtlXG4gIC8vIHBhcnNlcnMgbW9yZSBzdWNjaW5jdC5cblxuICB2YXIgU3RyaW5nU3RyZWFtID0gQ29kZU1pcnJvci5TdHJpbmdTdHJlYW0gPSBmdW5jdGlvbihzdHJpbmcsIHRhYlNpemUpIHtcbiAgICB0aGlzLnBvcyA9IHRoaXMuc3RhcnQgPSAwO1xuICAgIHRoaXMuc3RyaW5nID0gc3RyaW5nO1xuICAgIHRoaXMudGFiU2l6ZSA9IHRhYlNpemUgfHwgODtcbiAgICB0aGlzLmxhc3RDb2x1bW5Qb3MgPSB0aGlzLmxhc3RDb2x1bW5WYWx1ZSA9IDA7XG4gICAgdGhpcy5saW5lU3RhcnQgPSAwO1xuICB9O1xuXG4gIFN0cmluZ1N0cmVhbS5wcm90b3R5cGUgPSB7XG4gICAgZW9sOiBmdW5jdGlvbigpIHtyZXR1cm4gdGhpcy5wb3MgPj0gdGhpcy5zdHJpbmcubGVuZ3RoO30sXG4gICAgc29sOiBmdW5jdGlvbigpIHtyZXR1cm4gdGhpcy5wb3MgPT0gdGhpcy5saW5lU3RhcnQ7fSxcbiAgICBwZWVrOiBmdW5jdGlvbigpIHtyZXR1cm4gdGhpcy5zdHJpbmcuY2hhckF0KHRoaXMucG9zKSB8fCB1bmRlZmluZWQ7fSxcbiAgICBuZXh0OiBmdW5jdGlvbigpIHtcbiAgICAgIGlmICh0aGlzLnBvcyA8IHRoaXMuc3RyaW5nLmxlbmd0aClcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RyaW5nLmNoYXJBdCh0aGlzLnBvcysrKTtcbiAgICB9LFxuICAgIGVhdDogZnVuY3Rpb24obWF0Y2gpIHtcbiAgICAgIHZhciBjaCA9IHRoaXMuc3RyaW5nLmNoYXJBdCh0aGlzLnBvcyk7XG4gICAgICBpZiAodHlwZW9mIG1hdGNoID09IFwic3RyaW5nXCIpIHZhciBvayA9IGNoID09IG1hdGNoO1xuICAgICAgZWxzZSB2YXIgb2sgPSBjaCAmJiAobWF0Y2gudGVzdCA/IG1hdGNoLnRlc3QoY2gpIDogbWF0Y2goY2gpKTtcbiAgICAgIGlmIChvaykgeysrdGhpcy5wb3M7IHJldHVybiBjaDt9XG4gICAgfSxcbiAgICBlYXRXaGlsZTogZnVuY3Rpb24obWF0Y2gpIHtcbiAgICAgIHZhciBzdGFydCA9IHRoaXMucG9zO1xuICAgICAgd2hpbGUgKHRoaXMuZWF0KG1hdGNoKSl7fVxuICAgICAgcmV0dXJuIHRoaXMucG9zID4gc3RhcnQ7XG4gICAgfSxcbiAgICBlYXRTcGFjZTogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc3RhcnQgPSB0aGlzLnBvcztcbiAgICAgIHdoaWxlICgvW1xcc1xcdTAwYTBdLy50ZXN0KHRoaXMuc3RyaW5nLmNoYXJBdCh0aGlzLnBvcykpKSArK3RoaXMucG9zO1xuICAgICAgcmV0dXJuIHRoaXMucG9zID4gc3RhcnQ7XG4gICAgfSxcbiAgICBza2lwVG9FbmQ6IGZ1bmN0aW9uKCkge3RoaXMucG9zID0gdGhpcy5zdHJpbmcubGVuZ3RoO30sXG4gICAgc2tpcFRvOiBmdW5jdGlvbihjaCkge1xuICAgICAgdmFyIGZvdW5kID0gdGhpcy5zdHJpbmcuaW5kZXhPZihjaCwgdGhpcy5wb3MpO1xuICAgICAgaWYgKGZvdW5kID4gLTEpIHt0aGlzLnBvcyA9IGZvdW5kOyByZXR1cm4gdHJ1ZTt9XG4gICAgfSxcbiAgICBiYWNrVXA6IGZ1bmN0aW9uKG4pIHt0aGlzLnBvcyAtPSBuO30sXG4gICAgY29sdW1uOiBmdW5jdGlvbigpIHtcbiAgICAgIGlmICh0aGlzLmxhc3RDb2x1bW5Qb3MgPCB0aGlzLnN0YXJ0KSB7XG4gICAgICAgIHRoaXMubGFzdENvbHVtblZhbHVlID0gY291bnRDb2x1bW4odGhpcy5zdHJpbmcsIHRoaXMuc3RhcnQsIHRoaXMudGFiU2l6ZSwgdGhpcy5sYXN0Q29sdW1uUG9zLCB0aGlzLmxhc3RDb2x1bW5WYWx1ZSk7XG4gICAgICAgIHRoaXMubGFzdENvbHVtblBvcyA9IHRoaXMuc3RhcnQ7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5sYXN0Q29sdW1uVmFsdWUgLSAodGhpcy5saW5lU3RhcnQgPyBjb3VudENvbHVtbih0aGlzLnN0cmluZywgdGhpcy5saW5lU3RhcnQsIHRoaXMudGFiU2l6ZSkgOiAwKTtcbiAgICB9LFxuICAgIGluZGVudGF0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBjb3VudENvbHVtbih0aGlzLnN0cmluZywgbnVsbCwgdGhpcy50YWJTaXplKSAtXG4gICAgICAgICh0aGlzLmxpbmVTdGFydCA/IGNvdW50Q29sdW1uKHRoaXMuc3RyaW5nLCB0aGlzLmxpbmVTdGFydCwgdGhpcy50YWJTaXplKSA6IDApO1xuICAgIH0sXG4gICAgbWF0Y2g6IGZ1bmN0aW9uKHBhdHRlcm4sIGNvbnN1bWUsIGNhc2VJbnNlbnNpdGl2ZSkge1xuICAgICAgaWYgKHR5cGVvZiBwYXR0ZXJuID09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgdmFyIGNhc2VkID0gZnVuY3Rpb24oc3RyKSB7cmV0dXJuIGNhc2VJbnNlbnNpdGl2ZSA/IHN0ci50b0xvd2VyQ2FzZSgpIDogc3RyO307XG4gICAgICAgIHZhciBzdWJzdHIgPSB0aGlzLnN0cmluZy5zdWJzdHIodGhpcy5wb3MsIHBhdHRlcm4ubGVuZ3RoKTtcbiAgICAgICAgaWYgKGNhc2VkKHN1YnN0cikgPT0gY2FzZWQocGF0dGVybikpIHtcbiAgICAgICAgICBpZiAoY29uc3VtZSAhPT0gZmFsc2UpIHRoaXMucG9zICs9IHBhdHRlcm4ubGVuZ3RoO1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgbWF0Y2ggPSB0aGlzLnN0cmluZy5zbGljZSh0aGlzLnBvcykubWF0Y2gocGF0dGVybik7XG4gICAgICAgIGlmIChtYXRjaCAmJiBtYXRjaC5pbmRleCA+IDApIHJldHVybiBudWxsO1xuICAgICAgICBpZiAobWF0Y2ggJiYgY29uc3VtZSAhPT0gZmFsc2UpIHRoaXMucG9zICs9IG1hdGNoWzBdLmxlbmd0aDtcbiAgICAgICAgcmV0dXJuIG1hdGNoO1xuICAgICAgfVxuICAgIH0sXG4gICAgY3VycmVudDogZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdHJpbmcuc2xpY2UodGhpcy5zdGFydCwgdGhpcy5wb3MpO30sXG4gICAgaGlkZUZpcnN0Q2hhcnM6IGZ1bmN0aW9uKG4sIGlubmVyKSB7XG4gICAgICB0aGlzLmxpbmVTdGFydCArPSBuO1xuICAgICAgdHJ5IHsgcmV0dXJuIGlubmVyKCk7IH1cbiAgICAgIGZpbmFsbHkgeyB0aGlzLmxpbmVTdGFydCAtPSBuOyB9XG4gICAgfVxuICB9O1xuXG4gIC8vIFRFWFRNQVJLRVJTXG5cbiAgLy8gQ3JlYXRlZCB3aXRoIG1hcmtUZXh0IGFuZCBzZXRCb29rbWFyayBtZXRob2RzLiBBIFRleHRNYXJrZXIgaXMgYVxuICAvLyBoYW5kbGUgdGhhdCBjYW4gYmUgdXNlZCB0byBjbGVhciBvciBmaW5kIGEgbWFya2VkIHBvc2l0aW9uIGluIHRoZVxuICAvLyBkb2N1bWVudC4gTGluZSBvYmplY3RzIGhvbGQgYXJyYXlzIChtYXJrZWRTcGFucykgY29udGFpbmluZ1xuICAvLyB7ZnJvbSwgdG8sIG1hcmtlcn0gb2JqZWN0IHBvaW50aW5nIHRvIHN1Y2ggbWFya2VyIG9iamVjdHMsIGFuZFxuICAvLyBpbmRpY2F0aW5nIHRoYXQgc3VjaCBhIG1hcmtlciBpcyBwcmVzZW50IG9uIHRoYXQgbGluZS4gTXVsdGlwbGVcbiAgLy8gbGluZXMgbWF5IHBvaW50IHRvIHRoZSBzYW1lIG1hcmtlciB3aGVuIGl0IHNwYW5zIGFjcm9zcyBsaW5lcy5cbiAgLy8gVGhlIHNwYW5zIHdpbGwgaGF2ZSBudWxsIGZvciB0aGVpciBmcm9tL3RvIHByb3BlcnRpZXMgd2hlbiB0aGVcbiAgLy8gbWFya2VyIGNvbnRpbnVlcyBiZXlvbmQgdGhlIHN0YXJ0L2VuZCBvZiB0aGUgbGluZS4gTWFya2VycyBoYXZlXG4gIC8vIGxpbmtzIGJhY2sgdG8gdGhlIGxpbmVzIHRoZXkgY3VycmVudGx5IHRvdWNoLlxuXG4gIHZhciBuZXh0TWFya2VySWQgPSAwO1xuXG4gIHZhciBUZXh0TWFya2VyID0gQ29kZU1pcnJvci5UZXh0TWFya2VyID0gZnVuY3Rpb24oZG9jLCB0eXBlKSB7XG4gICAgdGhpcy5saW5lcyA9IFtdO1xuICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgdGhpcy5kb2MgPSBkb2M7XG4gICAgdGhpcy5pZCA9ICsrbmV4dE1hcmtlcklkO1xuICB9O1xuICBldmVudE1peGluKFRleHRNYXJrZXIpO1xuXG4gIC8vIENsZWFyIHRoZSBtYXJrZXIuXG4gIFRleHRNYXJrZXIucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMuZXhwbGljaXRseUNsZWFyZWQpIHJldHVybjtcbiAgICB2YXIgY20gPSB0aGlzLmRvYy5jbSwgd2l0aE9wID0gY20gJiYgIWNtLmN1ck9wO1xuICAgIGlmICh3aXRoT3ApIHN0YXJ0T3BlcmF0aW9uKGNtKTtcbiAgICBpZiAoaGFzSGFuZGxlcih0aGlzLCBcImNsZWFyXCIpKSB7XG4gICAgICB2YXIgZm91bmQgPSB0aGlzLmZpbmQoKTtcbiAgICAgIGlmIChmb3VuZCkgc2lnbmFsTGF0ZXIodGhpcywgXCJjbGVhclwiLCBmb3VuZC5mcm9tLCBmb3VuZC50byk7XG4gICAgfVxuICAgIHZhciBtaW4gPSBudWxsLCBtYXggPSBudWxsO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5saW5lcy5sZW5ndGg7ICsraSkge1xuICAgICAgdmFyIGxpbmUgPSB0aGlzLmxpbmVzW2ldO1xuICAgICAgdmFyIHNwYW4gPSBnZXRNYXJrZWRTcGFuRm9yKGxpbmUubWFya2VkU3BhbnMsIHRoaXMpO1xuICAgICAgaWYgKGNtICYmICF0aGlzLmNvbGxhcHNlZCkgcmVnTGluZUNoYW5nZShjbSwgbGluZU5vKGxpbmUpLCBcInRleHRcIik7XG4gICAgICBlbHNlIGlmIChjbSkge1xuICAgICAgICBpZiAoc3Bhbi50byAhPSBudWxsKSBtYXggPSBsaW5lTm8obGluZSk7XG4gICAgICAgIGlmIChzcGFuLmZyb20gIT0gbnVsbCkgbWluID0gbGluZU5vKGxpbmUpO1xuICAgICAgfVxuICAgICAgbGluZS5tYXJrZWRTcGFucyA9IHJlbW92ZU1hcmtlZFNwYW4obGluZS5tYXJrZWRTcGFucywgc3Bhbik7XG4gICAgICBpZiAoc3Bhbi5mcm9tID09IG51bGwgJiYgdGhpcy5jb2xsYXBzZWQgJiYgIWxpbmVJc0hpZGRlbih0aGlzLmRvYywgbGluZSkgJiYgY20pXG4gICAgICAgIHVwZGF0ZUxpbmVIZWlnaHQobGluZSwgdGV4dEhlaWdodChjbS5kaXNwbGF5KSk7XG4gICAgfVxuICAgIGlmIChjbSAmJiB0aGlzLmNvbGxhcHNlZCAmJiAhY20ub3B0aW9ucy5saW5lV3JhcHBpbmcpIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5saW5lcy5sZW5ndGg7ICsraSkge1xuICAgICAgdmFyIHZpc3VhbCA9IHZpc3VhbExpbmUodGhpcy5saW5lc1tpXSksIGxlbiA9IGxpbmVMZW5ndGgodmlzdWFsKTtcbiAgICAgIGlmIChsZW4gPiBjbS5kaXNwbGF5Lm1heExpbmVMZW5ndGgpIHtcbiAgICAgICAgY20uZGlzcGxheS5tYXhMaW5lID0gdmlzdWFsO1xuICAgICAgICBjbS5kaXNwbGF5Lm1heExpbmVMZW5ndGggPSBsZW47XG4gICAgICAgIGNtLmRpc3BsYXkubWF4TGluZUNoYW5nZWQgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChtaW4gIT0gbnVsbCAmJiBjbSAmJiB0aGlzLmNvbGxhcHNlZCkgcmVnQ2hhbmdlKGNtLCBtaW4sIG1heCArIDEpO1xuICAgIHRoaXMubGluZXMubGVuZ3RoID0gMDtcbiAgICB0aGlzLmV4cGxpY2l0bHlDbGVhcmVkID0gdHJ1ZTtcbiAgICBpZiAodGhpcy5hdG9taWMgJiYgdGhpcy5kb2MuY2FudEVkaXQpIHtcbiAgICAgIHRoaXMuZG9jLmNhbnRFZGl0ID0gZmFsc2U7XG4gICAgICBpZiAoY20pIHJlQ2hlY2tTZWxlY3Rpb24oY20uZG9jKTtcbiAgICB9XG4gICAgaWYgKGNtKSBzaWduYWxMYXRlcihjbSwgXCJtYXJrZXJDbGVhcmVkXCIsIGNtLCB0aGlzKTtcbiAgICBpZiAod2l0aE9wKSBlbmRPcGVyYXRpb24oY20pO1xuICAgIGlmICh0aGlzLnBhcmVudCkgdGhpcy5wYXJlbnQuY2xlYXIoKTtcbiAgfTtcblxuICAvLyBGaW5kIHRoZSBwb3NpdGlvbiBvZiB0aGUgbWFya2VyIGluIHRoZSBkb2N1bWVudC4gUmV0dXJucyBhIHtmcm9tLFxuICAvLyB0b30gb2JqZWN0IGJ5IGRlZmF1bHQuIFNpZGUgY2FuIGJlIHBhc3NlZCB0byBnZXQgYSBzcGVjaWZpYyBzaWRlXG4gIC8vIC0tIDAgKGJvdGgpLCAtMSAobGVmdCksIG9yIDEgKHJpZ2h0KS4gV2hlbiBsaW5lT2JqIGlzIHRydWUsIHRoZVxuICAvLyBQb3Mgb2JqZWN0cyByZXR1cm5lZCBjb250YWluIGEgbGluZSBvYmplY3QsIHJhdGhlciB0aGFuIGEgbGluZVxuICAvLyBudW1iZXIgKHVzZWQgdG8gcHJldmVudCBsb29raW5nIHVwIHRoZSBzYW1lIGxpbmUgdHdpY2UpLlxuICBUZXh0TWFya2VyLnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24oc2lkZSwgbGluZU9iaikge1xuICAgIGlmIChzaWRlID09IG51bGwgJiYgdGhpcy50eXBlID09IFwiYm9va21hcmtcIikgc2lkZSA9IDE7XG4gICAgdmFyIGZyb20sIHRvO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5saW5lcy5sZW5ndGg7ICsraSkge1xuICAgICAgdmFyIGxpbmUgPSB0aGlzLmxpbmVzW2ldO1xuICAgICAgdmFyIHNwYW4gPSBnZXRNYXJrZWRTcGFuRm9yKGxpbmUubWFya2VkU3BhbnMsIHRoaXMpO1xuICAgICAgaWYgKHNwYW4uZnJvbSAhPSBudWxsKSB7XG4gICAgICAgIGZyb20gPSBQb3MobGluZU9iaiA/IGxpbmUgOiBsaW5lTm8obGluZSksIHNwYW4uZnJvbSk7XG4gICAgICAgIGlmIChzaWRlID09IC0xKSByZXR1cm4gZnJvbTtcbiAgICAgIH1cbiAgICAgIGlmIChzcGFuLnRvICE9IG51bGwpIHtcbiAgICAgICAgdG8gPSBQb3MobGluZU9iaiA/IGxpbmUgOiBsaW5lTm8obGluZSksIHNwYW4udG8pO1xuICAgICAgICBpZiAoc2lkZSA9PSAxKSByZXR1cm4gdG87XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmcm9tICYmIHtmcm9tOiBmcm9tLCB0bzogdG99O1xuICB9O1xuXG4gIC8vIFNpZ25hbHMgdGhhdCB0aGUgbWFya2VyJ3Mgd2lkZ2V0IGNoYW5nZWQsIGFuZCBzdXJyb3VuZGluZyBsYXlvdXRcbiAgLy8gc2hvdWxkIGJlIHJlY29tcHV0ZWQuXG4gIFRleHRNYXJrZXIucHJvdG90eXBlLmNoYW5nZWQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgcG9zID0gdGhpcy5maW5kKC0xLCB0cnVlKSwgd2lkZ2V0ID0gdGhpcywgY20gPSB0aGlzLmRvYy5jbTtcbiAgICBpZiAoIXBvcyB8fCAhY20pIHJldHVybjtcbiAgICBydW5Jbk9wKGNtLCBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBsaW5lID0gcG9zLmxpbmUsIGxpbmVOID0gbGluZU5vKHBvcy5saW5lKTtcbiAgICAgIHZhciB2aWV3ID0gZmluZFZpZXdGb3JMaW5lKGNtLCBsaW5lTik7XG4gICAgICBpZiAodmlldykge1xuICAgICAgICBjbGVhckxpbmVNZWFzdXJlbWVudENhY2hlRm9yKHZpZXcpO1xuICAgICAgICBjbS5jdXJPcC5zZWxlY3Rpb25DaGFuZ2VkID0gY20uY3VyT3AuZm9yY2VVcGRhdGUgPSB0cnVlO1xuICAgICAgfVxuICAgICAgY20uY3VyT3AudXBkYXRlTWF4TGluZSA9IHRydWU7XG4gICAgICBpZiAoIWxpbmVJc0hpZGRlbih3aWRnZXQuZG9jLCBsaW5lKSAmJiB3aWRnZXQuaGVpZ2h0ICE9IG51bGwpIHtcbiAgICAgICAgdmFyIG9sZEhlaWdodCA9IHdpZGdldC5oZWlnaHQ7XG4gICAgICAgIHdpZGdldC5oZWlnaHQgPSBudWxsO1xuICAgICAgICB2YXIgZEhlaWdodCA9IHdpZGdldEhlaWdodCh3aWRnZXQpIC0gb2xkSGVpZ2h0O1xuICAgICAgICBpZiAoZEhlaWdodClcbiAgICAgICAgICB1cGRhdGVMaW5lSGVpZ2h0KGxpbmUsIGxpbmUuaGVpZ2h0ICsgZEhlaWdodCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgVGV4dE1hcmtlci5wcm90b3R5cGUuYXR0YWNoTGluZSA9IGZ1bmN0aW9uKGxpbmUpIHtcbiAgICBpZiAoIXRoaXMubGluZXMubGVuZ3RoICYmIHRoaXMuZG9jLmNtKSB7XG4gICAgICB2YXIgb3AgPSB0aGlzLmRvYy5jbS5jdXJPcDtcbiAgICAgIGlmICghb3AubWF5YmVIaWRkZW5NYXJrZXJzIHx8IGluZGV4T2Yob3AubWF5YmVIaWRkZW5NYXJrZXJzLCB0aGlzKSA9PSAtMSlcbiAgICAgICAgKG9wLm1heWJlVW5oaWRkZW5NYXJrZXJzIHx8IChvcC5tYXliZVVuaGlkZGVuTWFya2VycyA9IFtdKSkucHVzaCh0aGlzKTtcbiAgICB9XG4gICAgdGhpcy5saW5lcy5wdXNoKGxpbmUpO1xuICB9O1xuICBUZXh0TWFya2VyLnByb3RvdHlwZS5kZXRhY2hMaW5lID0gZnVuY3Rpb24obGluZSkge1xuICAgIHRoaXMubGluZXMuc3BsaWNlKGluZGV4T2YodGhpcy5saW5lcywgbGluZSksIDEpO1xuICAgIGlmICghdGhpcy5saW5lcy5sZW5ndGggJiYgdGhpcy5kb2MuY20pIHtcbiAgICAgIHZhciBvcCA9IHRoaXMuZG9jLmNtLmN1ck9wO1xuICAgICAgKG9wLm1heWJlSGlkZGVuTWFya2VycyB8fCAob3AubWF5YmVIaWRkZW5NYXJrZXJzID0gW10pKS5wdXNoKHRoaXMpO1xuICAgIH1cbiAgfTtcblxuICAvLyBDb2xsYXBzZWQgbWFya2VycyBoYXZlIHVuaXF1ZSBpZHMsIGluIG9yZGVyIHRvIGJlIGFibGUgdG8gb3JkZXJcbiAgLy8gdGhlbSwgd2hpY2ggaXMgbmVlZGVkIGZvciB1bmlxdWVseSBkZXRlcm1pbmluZyBhbiBvdXRlciBtYXJrZXJcbiAgLy8gd2hlbiB0aGV5IG92ZXJsYXAgKHRoZXkgbWF5IG5lc3QsIGJ1dCBub3QgcGFydGlhbGx5IG92ZXJsYXApLlxuICB2YXIgbmV4dE1hcmtlcklkID0gMDtcblxuICAvLyBDcmVhdGUgYSBtYXJrZXIsIHdpcmUgaXQgdXAgdG8gdGhlIHJpZ2h0IGxpbmVzLCBhbmRcbiAgZnVuY3Rpb24gbWFya1RleHQoZG9jLCBmcm9tLCB0bywgb3B0aW9ucywgdHlwZSkge1xuICAgIC8vIFNoYXJlZCBtYXJrZXJzIChhY3Jvc3MgbGlua2VkIGRvY3VtZW50cykgYXJlIGhhbmRsZWQgc2VwYXJhdGVseVxuICAgIC8vIChtYXJrVGV4dFNoYXJlZCB3aWxsIGNhbGwgb3V0IHRvIHRoaXMgYWdhaW4sIG9uY2UgcGVyXG4gICAgLy8gZG9jdW1lbnQpLlxuICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuc2hhcmVkKSByZXR1cm4gbWFya1RleHRTaGFyZWQoZG9jLCBmcm9tLCB0bywgb3B0aW9ucywgdHlwZSk7XG4gICAgLy8gRW5zdXJlIHdlIGFyZSBpbiBhbiBvcGVyYXRpb24uXG4gICAgaWYgKGRvYy5jbSAmJiAhZG9jLmNtLmN1ck9wKSByZXR1cm4gb3BlcmF0aW9uKGRvYy5jbSwgbWFya1RleHQpKGRvYywgZnJvbSwgdG8sIG9wdGlvbnMsIHR5cGUpO1xuXG4gICAgdmFyIG1hcmtlciA9IG5ldyBUZXh0TWFya2VyKGRvYywgdHlwZSksIGRpZmYgPSBjbXAoZnJvbSwgdG8pO1xuICAgIGlmIChvcHRpb25zKSBjb3B5T2JqKG9wdGlvbnMsIG1hcmtlciwgZmFsc2UpO1xuICAgIC8vIERvbid0IGNvbm5lY3QgZW1wdHkgbWFya2VycyB1bmxlc3MgY2xlYXJXaGVuRW1wdHkgaXMgZmFsc2VcbiAgICBpZiAoZGlmZiA+IDAgfHwgZGlmZiA9PSAwICYmIG1hcmtlci5jbGVhcldoZW5FbXB0eSAhPT0gZmFsc2UpXG4gICAgICByZXR1cm4gbWFya2VyO1xuICAgIGlmIChtYXJrZXIucmVwbGFjZWRXaXRoKSB7XG4gICAgICAvLyBTaG93aW5nIHVwIGFzIGEgd2lkZ2V0IGltcGxpZXMgY29sbGFwc2VkICh3aWRnZXQgcmVwbGFjZXMgdGV4dClcbiAgICAgIG1hcmtlci5jb2xsYXBzZWQgPSB0cnVlO1xuICAgICAgbWFya2VyLndpZGdldE5vZGUgPSBlbHQoXCJzcGFuXCIsIFttYXJrZXIucmVwbGFjZWRXaXRoXSwgXCJDb2RlTWlycm9yLXdpZGdldFwiKTtcbiAgICAgIGlmICghb3B0aW9ucy5oYW5kbGVNb3VzZUV2ZW50cykgbWFya2VyLndpZGdldE5vZGUuc2V0QXR0cmlidXRlKFwiY20taWdub3JlLWV2ZW50c1wiLCBcInRydWVcIik7XG4gICAgICBpZiAob3B0aW9ucy5pbnNlcnRMZWZ0KSBtYXJrZXIud2lkZ2V0Tm9kZS5pbnNlcnRMZWZ0ID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKG1hcmtlci5jb2xsYXBzZWQpIHtcbiAgICAgIGlmIChjb25mbGljdGluZ0NvbGxhcHNlZFJhbmdlKGRvYywgZnJvbS5saW5lLCBmcm9tLCB0bywgbWFya2VyKSB8fFxuICAgICAgICAgIGZyb20ubGluZSAhPSB0by5saW5lICYmIGNvbmZsaWN0aW5nQ29sbGFwc2VkUmFuZ2UoZG9jLCB0by5saW5lLCBmcm9tLCB0bywgbWFya2VyKSlcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW5zZXJ0aW5nIGNvbGxhcHNlZCBtYXJrZXIgcGFydGlhbGx5IG92ZXJsYXBwaW5nIGFuIGV4aXN0aW5nIG9uZVwiKTtcbiAgICAgIHNhd0NvbGxhcHNlZFNwYW5zID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAobWFya2VyLmFkZFRvSGlzdG9yeSlcbiAgICAgIGFkZENoYW5nZVRvSGlzdG9yeShkb2MsIHtmcm9tOiBmcm9tLCB0bzogdG8sIG9yaWdpbjogXCJtYXJrVGV4dFwifSwgZG9jLnNlbCwgTmFOKTtcblxuICAgIHZhciBjdXJMaW5lID0gZnJvbS5saW5lLCBjbSA9IGRvYy5jbSwgdXBkYXRlTWF4TGluZTtcbiAgICBkb2MuaXRlcihjdXJMaW5lLCB0by5saW5lICsgMSwgZnVuY3Rpb24obGluZSkge1xuICAgICAgaWYgKGNtICYmIG1hcmtlci5jb2xsYXBzZWQgJiYgIWNtLm9wdGlvbnMubGluZVdyYXBwaW5nICYmIHZpc3VhbExpbmUobGluZSkgPT0gY20uZGlzcGxheS5tYXhMaW5lKVxuICAgICAgICB1cGRhdGVNYXhMaW5lID0gdHJ1ZTtcbiAgICAgIGlmIChtYXJrZXIuY29sbGFwc2VkICYmIGN1ckxpbmUgIT0gZnJvbS5saW5lKSB1cGRhdGVMaW5lSGVpZ2h0KGxpbmUsIDApO1xuICAgICAgYWRkTWFya2VkU3BhbihsaW5lLCBuZXcgTWFya2VkU3BhbihtYXJrZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1ckxpbmUgPT0gZnJvbS5saW5lID8gZnJvbS5jaCA6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1ckxpbmUgPT0gdG8ubGluZSA/IHRvLmNoIDogbnVsbCkpO1xuICAgICAgKytjdXJMaW5lO1xuICAgIH0pO1xuICAgIC8vIGxpbmVJc0hpZGRlbiBkZXBlbmRzIG9uIHRoZSBwcmVzZW5jZSBvZiB0aGUgc3BhbnMsIHNvIG5lZWRzIGEgc2Vjb25kIHBhc3NcbiAgICBpZiAobWFya2VyLmNvbGxhcHNlZCkgZG9jLml0ZXIoZnJvbS5saW5lLCB0by5saW5lICsgMSwgZnVuY3Rpb24obGluZSkge1xuICAgICAgaWYgKGxpbmVJc0hpZGRlbihkb2MsIGxpbmUpKSB1cGRhdGVMaW5lSGVpZ2h0KGxpbmUsIDApO1xuICAgIH0pO1xuXG4gICAgaWYgKG1hcmtlci5jbGVhck9uRW50ZXIpIG9uKG1hcmtlciwgXCJiZWZvcmVDdXJzb3JFbnRlclwiLCBmdW5jdGlvbigpIHsgbWFya2VyLmNsZWFyKCk7IH0pO1xuXG4gICAgaWYgKG1hcmtlci5yZWFkT25seSkge1xuICAgICAgc2F3UmVhZE9ubHlTcGFucyA9IHRydWU7XG4gICAgICBpZiAoZG9jLmhpc3RvcnkuZG9uZS5sZW5ndGggfHwgZG9jLmhpc3RvcnkudW5kb25lLmxlbmd0aClcbiAgICAgICAgZG9jLmNsZWFySGlzdG9yeSgpO1xuICAgIH1cbiAgICBpZiAobWFya2VyLmNvbGxhcHNlZCkge1xuICAgICAgbWFya2VyLmlkID0gKytuZXh0TWFya2VySWQ7XG4gICAgICBtYXJrZXIuYXRvbWljID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKGNtKSB7XG4gICAgICAvLyBTeW5jIGVkaXRvciBzdGF0ZVxuICAgICAgaWYgKHVwZGF0ZU1heExpbmUpIGNtLmN1ck9wLnVwZGF0ZU1heExpbmUgPSB0cnVlO1xuICAgICAgaWYgKG1hcmtlci5jb2xsYXBzZWQpXG4gICAgICAgIHJlZ0NoYW5nZShjbSwgZnJvbS5saW5lLCB0by5saW5lICsgMSk7XG4gICAgICBlbHNlIGlmIChtYXJrZXIuY2xhc3NOYW1lIHx8IG1hcmtlci50aXRsZSB8fCBtYXJrZXIuc3RhcnRTdHlsZSB8fCBtYXJrZXIuZW5kU3R5bGUgfHwgbWFya2VyLmNzcylcbiAgICAgICAgZm9yICh2YXIgaSA9IGZyb20ubGluZTsgaSA8PSB0by5saW5lOyBpKyspIHJlZ0xpbmVDaGFuZ2UoY20sIGksIFwidGV4dFwiKTtcbiAgICAgIGlmIChtYXJrZXIuYXRvbWljKSByZUNoZWNrU2VsZWN0aW9uKGNtLmRvYyk7XG4gICAgICBzaWduYWxMYXRlcihjbSwgXCJtYXJrZXJBZGRlZFwiLCBjbSwgbWFya2VyKTtcbiAgICB9XG4gICAgcmV0dXJuIG1hcmtlcjtcbiAgfVxuXG4gIC8vIFNIQVJFRCBURVhUTUFSS0VSU1xuXG4gIC8vIEEgc2hhcmVkIG1hcmtlciBzcGFucyBtdWx0aXBsZSBsaW5rZWQgZG9jdW1lbnRzLiBJdCBpc1xuICAvLyBpbXBsZW1lbnRlZCBhcyBhIG1ldGEtbWFya2VyLW9iamVjdCBjb250cm9sbGluZyBtdWx0aXBsZSBub3JtYWxcbiAgLy8gbWFya2Vycy5cbiAgdmFyIFNoYXJlZFRleHRNYXJrZXIgPSBDb2RlTWlycm9yLlNoYXJlZFRleHRNYXJrZXIgPSBmdW5jdGlvbihtYXJrZXJzLCBwcmltYXJ5KSB7XG4gICAgdGhpcy5tYXJrZXJzID0gbWFya2VycztcbiAgICB0aGlzLnByaW1hcnkgPSBwcmltYXJ5O1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWFya2Vycy5sZW5ndGg7ICsraSlcbiAgICAgIG1hcmtlcnNbaV0ucGFyZW50ID0gdGhpcztcbiAgfTtcbiAgZXZlbnRNaXhpbihTaGFyZWRUZXh0TWFya2VyKTtcblxuICBTaGFyZWRUZXh0TWFya2VyLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLmV4cGxpY2l0bHlDbGVhcmVkKSByZXR1cm47XG4gICAgdGhpcy5leHBsaWNpdGx5Q2xlYXJlZCA9IHRydWU7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLm1hcmtlcnMubGVuZ3RoOyArK2kpXG4gICAgICB0aGlzLm1hcmtlcnNbaV0uY2xlYXIoKTtcbiAgICBzaWduYWxMYXRlcih0aGlzLCBcImNsZWFyXCIpO1xuICB9O1xuICBTaGFyZWRUZXh0TWFya2VyLnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24oc2lkZSwgbGluZU9iaikge1xuICAgIHJldHVybiB0aGlzLnByaW1hcnkuZmluZChzaWRlLCBsaW5lT2JqKTtcbiAgfTtcblxuICBmdW5jdGlvbiBtYXJrVGV4dFNoYXJlZChkb2MsIGZyb20sIHRvLCBvcHRpb25zLCB0eXBlKSB7XG4gICAgb3B0aW9ucyA9IGNvcHlPYmoob3B0aW9ucyk7XG4gICAgb3B0aW9ucy5zaGFyZWQgPSBmYWxzZTtcbiAgICB2YXIgbWFya2VycyA9IFttYXJrVGV4dChkb2MsIGZyb20sIHRvLCBvcHRpb25zLCB0eXBlKV0sIHByaW1hcnkgPSBtYXJrZXJzWzBdO1xuICAgIHZhciB3aWRnZXQgPSBvcHRpb25zLndpZGdldE5vZGU7XG4gICAgbGlua2VkRG9jcyhkb2MsIGZ1bmN0aW9uKGRvYykge1xuICAgICAgaWYgKHdpZGdldCkgb3B0aW9ucy53aWRnZXROb2RlID0gd2lkZ2V0LmNsb25lTm9kZSh0cnVlKTtcbiAgICAgIG1hcmtlcnMucHVzaChtYXJrVGV4dChkb2MsIGNsaXBQb3MoZG9jLCBmcm9tKSwgY2xpcFBvcyhkb2MsIHRvKSwgb3B0aW9ucywgdHlwZSkpO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkb2MubGlua2VkLmxlbmd0aDsgKytpKVxuICAgICAgICBpZiAoZG9jLmxpbmtlZFtpXS5pc1BhcmVudCkgcmV0dXJuO1xuICAgICAgcHJpbWFyeSA9IGxzdChtYXJrZXJzKTtcbiAgICB9KTtcbiAgICByZXR1cm4gbmV3IFNoYXJlZFRleHRNYXJrZXIobWFya2VycywgcHJpbWFyeSk7XG4gIH1cblxuICBmdW5jdGlvbiBmaW5kU2hhcmVkTWFya2Vycyhkb2MpIHtcbiAgICByZXR1cm4gZG9jLmZpbmRNYXJrcyhQb3MoZG9jLmZpcnN0LCAwKSwgZG9jLmNsaXBQb3MoUG9zKGRvYy5sYXN0TGluZSgpKSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24obSkgeyByZXR1cm4gbS5wYXJlbnQ7IH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gY29weVNoYXJlZE1hcmtlcnMoZG9jLCBtYXJrZXJzKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXJrZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgbWFya2VyID0gbWFya2Vyc1tpXSwgcG9zID0gbWFya2VyLmZpbmQoKTtcbiAgICAgIHZhciBtRnJvbSA9IGRvYy5jbGlwUG9zKHBvcy5mcm9tKSwgbVRvID0gZG9jLmNsaXBQb3MocG9zLnRvKTtcbiAgICAgIGlmIChjbXAobUZyb20sIG1UbykpIHtcbiAgICAgICAgdmFyIHN1Yk1hcmsgPSBtYXJrVGV4dChkb2MsIG1Gcm9tLCBtVG8sIG1hcmtlci5wcmltYXJ5LCBtYXJrZXIucHJpbWFyeS50eXBlKTtcbiAgICAgICAgbWFya2VyLm1hcmtlcnMucHVzaChzdWJNYXJrKTtcbiAgICAgICAgc3ViTWFyay5wYXJlbnQgPSBtYXJrZXI7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZGV0YWNoU2hhcmVkTWFya2VycyhtYXJrZXJzKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXJrZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgbWFya2VyID0gbWFya2Vyc1tpXSwgbGlua2VkID0gW21hcmtlci5wcmltYXJ5LmRvY107O1xuICAgICAgbGlua2VkRG9jcyhtYXJrZXIucHJpbWFyeS5kb2MsIGZ1bmN0aW9uKGQpIHsgbGlua2VkLnB1c2goZCk7IH0pO1xuICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBtYXJrZXIubWFya2Vycy5sZW5ndGg7IGorKykge1xuICAgICAgICB2YXIgc3ViTWFya2VyID0gbWFya2VyLm1hcmtlcnNbal07XG4gICAgICAgIGlmIChpbmRleE9mKGxpbmtlZCwgc3ViTWFya2VyLmRvYykgPT0gLTEpIHtcbiAgICAgICAgICBzdWJNYXJrZXIucGFyZW50ID0gbnVsbDtcbiAgICAgICAgICBtYXJrZXIubWFya2Vycy5zcGxpY2Uoai0tLCAxKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIFRFWFRNQVJLRVIgU1BBTlNcblxuICBmdW5jdGlvbiBNYXJrZWRTcGFuKG1hcmtlciwgZnJvbSwgdG8pIHtcbiAgICB0aGlzLm1hcmtlciA9IG1hcmtlcjtcbiAgICB0aGlzLmZyb20gPSBmcm9tOyB0aGlzLnRvID0gdG87XG4gIH1cblxuICAvLyBTZWFyY2ggYW4gYXJyYXkgb2Ygc3BhbnMgZm9yIGEgc3BhbiBtYXRjaGluZyB0aGUgZ2l2ZW4gbWFya2VyLlxuICBmdW5jdGlvbiBnZXRNYXJrZWRTcGFuRm9yKHNwYW5zLCBtYXJrZXIpIHtcbiAgICBpZiAoc3BhbnMpIGZvciAodmFyIGkgPSAwOyBpIDwgc3BhbnMubGVuZ3RoOyArK2kpIHtcbiAgICAgIHZhciBzcGFuID0gc3BhbnNbaV07XG4gICAgICBpZiAoc3Bhbi5tYXJrZXIgPT0gbWFya2VyKSByZXR1cm4gc3BhbjtcbiAgICB9XG4gIH1cbiAgLy8gUmVtb3ZlIGEgc3BhbiBmcm9tIGFuIGFycmF5LCByZXR1cm5pbmcgdW5kZWZpbmVkIGlmIG5vIHNwYW5zIGFyZVxuICAvLyBsZWZ0ICh3ZSBkb24ndCBzdG9yZSBhcnJheXMgZm9yIGxpbmVzIHdpdGhvdXQgc3BhbnMpLlxuICBmdW5jdGlvbiByZW1vdmVNYXJrZWRTcGFuKHNwYW5zLCBzcGFuKSB7XG4gICAgZm9yICh2YXIgciwgaSA9IDA7IGkgPCBzcGFucy5sZW5ndGg7ICsraSlcbiAgICAgIGlmIChzcGFuc1tpXSAhPSBzcGFuKSAociB8fCAociA9IFtdKSkucHVzaChzcGFuc1tpXSk7XG4gICAgcmV0dXJuIHI7XG4gIH1cbiAgLy8gQWRkIGEgc3BhbiB0byBhIGxpbmUuXG4gIGZ1bmN0aW9uIGFkZE1hcmtlZFNwYW4obGluZSwgc3Bhbikge1xuICAgIGxpbmUubWFya2VkU3BhbnMgPSBsaW5lLm1hcmtlZFNwYW5zID8gbGluZS5tYXJrZWRTcGFucy5jb25jYXQoW3NwYW5dKSA6IFtzcGFuXTtcbiAgICBzcGFuLm1hcmtlci5hdHRhY2hMaW5lKGxpbmUpO1xuICB9XG5cbiAgLy8gVXNlZCBmb3IgdGhlIGFsZ29yaXRobSB0aGF0IGFkanVzdHMgbWFya2VycyBmb3IgYSBjaGFuZ2UgaW4gdGhlXG4gIC8vIGRvY3VtZW50LiBUaGVzZSBmdW5jdGlvbnMgY3V0IGFuIGFycmF5IG9mIHNwYW5zIGF0IGEgZ2l2ZW5cbiAgLy8gY2hhcmFjdGVyIHBvc2l0aW9uLCByZXR1cm5pbmcgYW4gYXJyYXkgb2YgcmVtYWluaW5nIGNodW5rcyAob3JcbiAgLy8gdW5kZWZpbmVkIGlmIG5vdGhpbmcgcmVtYWlucykuXG4gIGZ1bmN0aW9uIG1hcmtlZFNwYW5zQmVmb3JlKG9sZCwgc3RhcnRDaCwgaXNJbnNlcnQpIHtcbiAgICBpZiAob2xkKSBmb3IgKHZhciBpID0gMCwgbnc7IGkgPCBvbGQubGVuZ3RoOyArK2kpIHtcbiAgICAgIHZhciBzcGFuID0gb2xkW2ldLCBtYXJrZXIgPSBzcGFuLm1hcmtlcjtcbiAgICAgIHZhciBzdGFydHNCZWZvcmUgPSBzcGFuLmZyb20gPT0gbnVsbCB8fCAobWFya2VyLmluY2x1c2l2ZUxlZnQgPyBzcGFuLmZyb20gPD0gc3RhcnRDaCA6IHNwYW4uZnJvbSA8IHN0YXJ0Q2gpO1xuICAgICAgaWYgKHN0YXJ0c0JlZm9yZSB8fCBzcGFuLmZyb20gPT0gc3RhcnRDaCAmJiBtYXJrZXIudHlwZSA9PSBcImJvb2ttYXJrXCIgJiYgKCFpc0luc2VydCB8fCAhc3Bhbi5tYXJrZXIuaW5zZXJ0TGVmdCkpIHtcbiAgICAgICAgdmFyIGVuZHNBZnRlciA9IHNwYW4udG8gPT0gbnVsbCB8fCAobWFya2VyLmluY2x1c2l2ZVJpZ2h0ID8gc3Bhbi50byA+PSBzdGFydENoIDogc3Bhbi50byA+IHN0YXJ0Q2gpO1xuICAgICAgICAobncgfHwgKG53ID0gW10pKS5wdXNoKG5ldyBNYXJrZWRTcGFuKG1hcmtlciwgc3Bhbi5mcm9tLCBlbmRzQWZ0ZXIgPyBudWxsIDogc3Bhbi50bykpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnc7XG4gIH1cbiAgZnVuY3Rpb24gbWFya2VkU3BhbnNBZnRlcihvbGQsIGVuZENoLCBpc0luc2VydCkge1xuICAgIGlmIChvbGQpIGZvciAodmFyIGkgPSAwLCBudzsgaSA8IG9sZC5sZW5ndGg7ICsraSkge1xuICAgICAgdmFyIHNwYW4gPSBvbGRbaV0sIG1hcmtlciA9IHNwYW4ubWFya2VyO1xuICAgICAgdmFyIGVuZHNBZnRlciA9IHNwYW4udG8gPT0gbnVsbCB8fCAobWFya2VyLmluY2x1c2l2ZVJpZ2h0ID8gc3Bhbi50byA+PSBlbmRDaCA6IHNwYW4udG8gPiBlbmRDaCk7XG4gICAgICBpZiAoZW5kc0FmdGVyIHx8IHNwYW4uZnJvbSA9PSBlbmRDaCAmJiBtYXJrZXIudHlwZSA9PSBcImJvb2ttYXJrXCIgJiYgKCFpc0luc2VydCB8fCBzcGFuLm1hcmtlci5pbnNlcnRMZWZ0KSkge1xuICAgICAgICB2YXIgc3RhcnRzQmVmb3JlID0gc3Bhbi5mcm9tID09IG51bGwgfHwgKG1hcmtlci5pbmNsdXNpdmVMZWZ0ID8gc3Bhbi5mcm9tIDw9IGVuZENoIDogc3Bhbi5mcm9tIDwgZW5kQ2gpO1xuICAgICAgICAobncgfHwgKG53ID0gW10pKS5wdXNoKG5ldyBNYXJrZWRTcGFuKG1hcmtlciwgc3RhcnRzQmVmb3JlID8gbnVsbCA6IHNwYW4uZnJvbSAtIGVuZENoLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwYW4udG8gPT0gbnVsbCA/IG51bGwgOiBzcGFuLnRvIC0gZW5kQ2gpKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG53O1xuICB9XG5cbiAgLy8gR2l2ZW4gYSBjaGFuZ2Ugb2JqZWN0LCBjb21wdXRlIHRoZSBuZXcgc2V0IG9mIG1hcmtlciBzcGFucyB0aGF0XG4gIC8vIGNvdmVyIHRoZSBsaW5lIGluIHdoaWNoIHRoZSBjaGFuZ2UgdG9vayBwbGFjZS4gUmVtb3ZlcyBzcGFuc1xuICAvLyBlbnRpcmVseSB3aXRoaW4gdGhlIGNoYW5nZSwgcmVjb25uZWN0cyBzcGFucyBiZWxvbmdpbmcgdG8gdGhlXG4gIC8vIHNhbWUgbWFya2VyIHRoYXQgYXBwZWFyIG9uIGJvdGggc2lkZXMgb2YgdGhlIGNoYW5nZSwgYW5kIGN1dHMgb2ZmXG4gIC8vIHNwYW5zIHBhcnRpYWxseSB3aXRoaW4gdGhlIGNoYW5nZS4gUmV0dXJucyBhbiBhcnJheSBvZiBzcGFuXG4gIC8vIGFycmF5cyB3aXRoIG9uZSBlbGVtZW50IGZvciBlYWNoIGxpbmUgaW4gKGFmdGVyKSB0aGUgY2hhbmdlLlxuICBmdW5jdGlvbiBzdHJldGNoU3BhbnNPdmVyQ2hhbmdlKGRvYywgY2hhbmdlKSB7XG4gICAgaWYgKGNoYW5nZS5mdWxsKSByZXR1cm4gbnVsbDtcbiAgICB2YXIgb2xkRmlyc3QgPSBpc0xpbmUoZG9jLCBjaGFuZ2UuZnJvbS5saW5lKSAmJiBnZXRMaW5lKGRvYywgY2hhbmdlLmZyb20ubGluZSkubWFya2VkU3BhbnM7XG4gICAgdmFyIG9sZExhc3QgPSBpc0xpbmUoZG9jLCBjaGFuZ2UudG8ubGluZSkgJiYgZ2V0TGluZShkb2MsIGNoYW5nZS50by5saW5lKS5tYXJrZWRTcGFucztcbiAgICBpZiAoIW9sZEZpcnN0ICYmICFvbGRMYXN0KSByZXR1cm4gbnVsbDtcblxuICAgIHZhciBzdGFydENoID0gY2hhbmdlLmZyb20uY2gsIGVuZENoID0gY2hhbmdlLnRvLmNoLCBpc0luc2VydCA9IGNtcChjaGFuZ2UuZnJvbSwgY2hhbmdlLnRvKSA9PSAwO1xuICAgIC8vIEdldCB0aGUgc3BhbnMgdGhhdCAnc3RpY2sgb3V0JyBvbiBib3RoIHNpZGVzXG4gICAgdmFyIGZpcnN0ID0gbWFya2VkU3BhbnNCZWZvcmUob2xkRmlyc3QsIHN0YXJ0Q2gsIGlzSW5zZXJ0KTtcbiAgICB2YXIgbGFzdCA9IG1hcmtlZFNwYW5zQWZ0ZXIob2xkTGFzdCwgZW5kQ2gsIGlzSW5zZXJ0KTtcblxuICAgIC8vIE5leHQsIG1lcmdlIHRob3NlIHR3byBlbmRzXG4gICAgdmFyIHNhbWVMaW5lID0gY2hhbmdlLnRleHQubGVuZ3RoID09IDEsIG9mZnNldCA9IGxzdChjaGFuZ2UudGV4dCkubGVuZ3RoICsgKHNhbWVMaW5lID8gc3RhcnRDaCA6IDApO1xuICAgIGlmIChmaXJzdCkge1xuICAgICAgLy8gRml4IHVwIC50byBwcm9wZXJ0aWVzIG9mIGZpcnN0XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZpcnN0Lmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHZhciBzcGFuID0gZmlyc3RbaV07XG4gICAgICAgIGlmIChzcGFuLnRvID09IG51bGwpIHtcbiAgICAgICAgICB2YXIgZm91bmQgPSBnZXRNYXJrZWRTcGFuRm9yKGxhc3QsIHNwYW4ubWFya2VyKTtcbiAgICAgICAgICBpZiAoIWZvdW5kKSBzcGFuLnRvID0gc3RhcnRDaDtcbiAgICAgICAgICBlbHNlIGlmIChzYW1lTGluZSkgc3Bhbi50byA9IGZvdW5kLnRvID09IG51bGwgPyBudWxsIDogZm91bmQudG8gKyBvZmZzZXQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGxhc3QpIHtcbiAgICAgIC8vIEZpeCB1cCAuZnJvbSBpbiBsYXN0IChvciBtb3ZlIHRoZW0gaW50byBmaXJzdCBpbiBjYXNlIG9mIHNhbWVMaW5lKVxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsYXN0Lmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHZhciBzcGFuID0gbGFzdFtpXTtcbiAgICAgICAgaWYgKHNwYW4udG8gIT0gbnVsbCkgc3Bhbi50byArPSBvZmZzZXQ7XG4gICAgICAgIGlmIChzcGFuLmZyb20gPT0gbnVsbCkge1xuICAgICAgICAgIHZhciBmb3VuZCA9IGdldE1hcmtlZFNwYW5Gb3IoZmlyc3QsIHNwYW4ubWFya2VyKTtcbiAgICAgICAgICBpZiAoIWZvdW5kKSB7XG4gICAgICAgICAgICBzcGFuLmZyb20gPSBvZmZzZXQ7XG4gICAgICAgICAgICBpZiAoc2FtZUxpbmUpIChmaXJzdCB8fCAoZmlyc3QgPSBbXSkpLnB1c2goc3Bhbik7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNwYW4uZnJvbSArPSBvZmZzZXQ7XG4gICAgICAgICAgaWYgKHNhbWVMaW5lKSAoZmlyc3QgfHwgKGZpcnN0ID0gW10pKS5wdXNoKHNwYW4pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIC8vIE1ha2Ugc3VyZSB3ZSBkaWRuJ3QgY3JlYXRlIGFueSB6ZXJvLWxlbmd0aCBzcGFuc1xuICAgIGlmIChmaXJzdCkgZmlyc3QgPSBjbGVhckVtcHR5U3BhbnMoZmlyc3QpO1xuICAgIGlmIChsYXN0ICYmIGxhc3QgIT0gZmlyc3QpIGxhc3QgPSBjbGVhckVtcHR5U3BhbnMobGFzdCk7XG5cbiAgICB2YXIgbmV3TWFya2VycyA9IFtmaXJzdF07XG4gICAgaWYgKCFzYW1lTGluZSkge1xuICAgICAgLy8gRmlsbCBnYXAgd2l0aCB3aG9sZS1saW5lLXNwYW5zXG4gICAgICB2YXIgZ2FwID0gY2hhbmdlLnRleHQubGVuZ3RoIC0gMiwgZ2FwTWFya2VycztcbiAgICAgIGlmIChnYXAgPiAwICYmIGZpcnN0KVxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZpcnN0Lmxlbmd0aDsgKytpKVxuICAgICAgICAgIGlmIChmaXJzdFtpXS50byA9PSBudWxsKVxuICAgICAgICAgICAgKGdhcE1hcmtlcnMgfHwgKGdhcE1hcmtlcnMgPSBbXSkpLnB1c2gobmV3IE1hcmtlZFNwYW4oZmlyc3RbaV0ubWFya2VyLCBudWxsLCBudWxsKSk7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGdhcDsgKytpKVxuICAgICAgICBuZXdNYXJrZXJzLnB1c2goZ2FwTWFya2Vycyk7XG4gICAgICBuZXdNYXJrZXJzLnB1c2gobGFzdCk7XG4gICAgfVxuICAgIHJldHVybiBuZXdNYXJrZXJzO1xuICB9XG5cbiAgLy8gUmVtb3ZlIHNwYW5zIHRoYXQgYXJlIGVtcHR5IGFuZCBkb24ndCBoYXZlIGEgY2xlYXJXaGVuRW1wdHlcbiAgLy8gb3B0aW9uIG9mIGZhbHNlLlxuICBmdW5jdGlvbiBjbGVhckVtcHR5U3BhbnMoc3BhbnMpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNwYW5zLmxlbmd0aDsgKytpKSB7XG4gICAgICB2YXIgc3BhbiA9IHNwYW5zW2ldO1xuICAgICAgaWYgKHNwYW4uZnJvbSAhPSBudWxsICYmIHNwYW4uZnJvbSA9PSBzcGFuLnRvICYmIHNwYW4ubWFya2VyLmNsZWFyV2hlbkVtcHR5ICE9PSBmYWxzZSlcbiAgICAgICAgc3BhbnMuc3BsaWNlKGktLSwgMSk7XG4gICAgfVxuICAgIGlmICghc3BhbnMubGVuZ3RoKSByZXR1cm4gbnVsbDtcbiAgICByZXR1cm4gc3BhbnM7XG4gIH1cblxuICAvLyBVc2VkIGZvciB1bi9yZS1kb2luZyBjaGFuZ2VzIGZyb20gdGhlIGhpc3RvcnkuIENvbWJpbmVzIHRoZVxuICAvLyByZXN1bHQgb2YgY29tcHV0aW5nIHRoZSBleGlzdGluZyBzcGFucyB3aXRoIHRoZSBzZXQgb2Ygc3BhbnMgdGhhdFxuICAvLyBleGlzdGVkIGluIHRoZSBoaXN0b3J5IChzbyB0aGF0IGRlbGV0aW5nIGFyb3VuZCBhIHNwYW4gYW5kIHRoZW5cbiAgLy8gdW5kb2luZyBicmluZ3MgYmFjayB0aGUgc3BhbikuXG4gIGZ1bmN0aW9uIG1lcmdlT2xkU3BhbnMoZG9jLCBjaGFuZ2UpIHtcbiAgICB2YXIgb2xkID0gZ2V0T2xkU3BhbnMoZG9jLCBjaGFuZ2UpO1xuICAgIHZhciBzdHJldGNoZWQgPSBzdHJldGNoU3BhbnNPdmVyQ2hhbmdlKGRvYywgY2hhbmdlKTtcbiAgICBpZiAoIW9sZCkgcmV0dXJuIHN0cmV0Y2hlZDtcbiAgICBpZiAoIXN0cmV0Y2hlZCkgcmV0dXJuIG9sZDtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2xkLmxlbmd0aDsgKytpKSB7XG4gICAgICB2YXIgb2xkQ3VyID0gb2xkW2ldLCBzdHJldGNoQ3VyID0gc3RyZXRjaGVkW2ldO1xuICAgICAgaWYgKG9sZEN1ciAmJiBzdHJldGNoQ3VyKSB7XG4gICAgICAgIHNwYW5zOiBmb3IgKHZhciBqID0gMDsgaiA8IHN0cmV0Y2hDdXIubGVuZ3RoOyArK2opIHtcbiAgICAgICAgICB2YXIgc3BhbiA9IHN0cmV0Y2hDdXJbal07XG4gICAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBvbGRDdXIubGVuZ3RoOyArK2spXG4gICAgICAgICAgICBpZiAob2xkQ3VyW2tdLm1hcmtlciA9PSBzcGFuLm1hcmtlcikgY29udGludWUgc3BhbnM7XG4gICAgICAgICAgb2xkQ3VyLnB1c2goc3Bhbik7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoc3RyZXRjaEN1cikge1xuICAgICAgICBvbGRbaV0gPSBzdHJldGNoQ3VyO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gb2xkO1xuICB9XG5cbiAgLy8gVXNlZCB0byAnY2xpcCcgb3V0IHJlYWRPbmx5IHJhbmdlcyB3aGVuIG1ha2luZyBhIGNoYW5nZS5cbiAgZnVuY3Rpb24gcmVtb3ZlUmVhZE9ubHlSYW5nZXMoZG9jLCBmcm9tLCB0bykge1xuICAgIHZhciBtYXJrZXJzID0gbnVsbDtcbiAgICBkb2MuaXRlcihmcm9tLmxpbmUsIHRvLmxpbmUgKyAxLCBmdW5jdGlvbihsaW5lKSB7XG4gICAgICBpZiAobGluZS5tYXJrZWRTcGFucykgZm9yICh2YXIgaSA9IDA7IGkgPCBsaW5lLm1hcmtlZFNwYW5zLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHZhciBtYXJrID0gbGluZS5tYXJrZWRTcGFuc1tpXS5tYXJrZXI7XG4gICAgICAgIGlmIChtYXJrLnJlYWRPbmx5ICYmICghbWFya2VycyB8fCBpbmRleE9mKG1hcmtlcnMsIG1hcmspID09IC0xKSlcbiAgICAgICAgICAobWFya2VycyB8fCAobWFya2VycyA9IFtdKSkucHVzaChtYXJrKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBpZiAoIW1hcmtlcnMpIHJldHVybiBudWxsO1xuICAgIHZhciBwYXJ0cyA9IFt7ZnJvbTogZnJvbSwgdG86IHRvfV07XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXJrZXJzLmxlbmd0aDsgKytpKSB7XG4gICAgICB2YXIgbWsgPSBtYXJrZXJzW2ldLCBtID0gbWsuZmluZCgwKTtcbiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgcGFydHMubGVuZ3RoOyArK2opIHtcbiAgICAgICAgdmFyIHAgPSBwYXJ0c1tqXTtcbiAgICAgICAgaWYgKGNtcChwLnRvLCBtLmZyb20pIDwgMCB8fCBjbXAocC5mcm9tLCBtLnRvKSA+IDApIGNvbnRpbnVlO1xuICAgICAgICB2YXIgbmV3UGFydHMgPSBbaiwgMV0sIGRmcm9tID0gY21wKHAuZnJvbSwgbS5mcm9tKSwgZHRvID0gY21wKHAudG8sIG0udG8pO1xuICAgICAgICBpZiAoZGZyb20gPCAwIHx8ICFtay5pbmNsdXNpdmVMZWZ0ICYmICFkZnJvbSlcbiAgICAgICAgICBuZXdQYXJ0cy5wdXNoKHtmcm9tOiBwLmZyb20sIHRvOiBtLmZyb219KTtcbiAgICAgICAgaWYgKGR0byA+IDAgfHwgIW1rLmluY2x1c2l2ZVJpZ2h0ICYmICFkdG8pXG4gICAgICAgICAgbmV3UGFydHMucHVzaCh7ZnJvbTogbS50bywgdG86IHAudG99KTtcbiAgICAgICAgcGFydHMuc3BsaWNlLmFwcGx5KHBhcnRzLCBuZXdQYXJ0cyk7XG4gICAgICAgIGogKz0gbmV3UGFydHMubGVuZ3RoIC0gMTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHBhcnRzO1xuICB9XG5cbiAgLy8gQ29ubmVjdCBvciBkaXNjb25uZWN0IHNwYW5zIGZyb20gYSBsaW5lLlxuICBmdW5jdGlvbiBkZXRhY2hNYXJrZWRTcGFucyhsaW5lKSB7XG4gICAgdmFyIHNwYW5zID0gbGluZS5tYXJrZWRTcGFucztcbiAgICBpZiAoIXNwYW5zKSByZXR1cm47XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzcGFucy5sZW5ndGg7ICsraSlcbiAgICAgIHNwYW5zW2ldLm1hcmtlci5kZXRhY2hMaW5lKGxpbmUpO1xuICAgIGxpbmUubWFya2VkU3BhbnMgPSBudWxsO1xuICB9XG4gIGZ1bmN0aW9uIGF0dGFjaE1hcmtlZFNwYW5zKGxpbmUsIHNwYW5zKSB7XG4gICAgaWYgKCFzcGFucykgcmV0dXJuO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3BhbnMubGVuZ3RoOyArK2kpXG4gICAgICBzcGFuc1tpXS5tYXJrZXIuYXR0YWNoTGluZShsaW5lKTtcbiAgICBsaW5lLm1hcmtlZFNwYW5zID0gc3BhbnM7XG4gIH1cblxuICAvLyBIZWxwZXJzIHVzZWQgd2hlbiBjb21wdXRpbmcgd2hpY2ggb3ZlcmxhcHBpbmcgY29sbGFwc2VkIHNwYW5cbiAgLy8gY291bnRzIGFzIHRoZSBsYXJnZXIgb25lLlxuICBmdW5jdGlvbiBleHRyYUxlZnQobWFya2VyKSB7IHJldHVybiBtYXJrZXIuaW5jbHVzaXZlTGVmdCA/IC0xIDogMDsgfVxuICBmdW5jdGlvbiBleHRyYVJpZ2h0KG1hcmtlcikgeyByZXR1cm4gbWFya2VyLmluY2x1c2l2ZVJpZ2h0ID8gMSA6IDA7IH1cblxuICAvLyBSZXR1cm5zIGEgbnVtYmVyIGluZGljYXRpbmcgd2hpY2ggb2YgdHdvIG92ZXJsYXBwaW5nIGNvbGxhcHNlZFxuICAvLyBzcGFucyBpcyBsYXJnZXIgKGFuZCB0aHVzIGluY2x1ZGVzIHRoZSBvdGhlcikuIEZhbGxzIGJhY2sgdG9cbiAgLy8gY29tcGFyaW5nIGlkcyB3aGVuIHRoZSBzcGFucyBjb3ZlciBleGFjdGx5IHRoZSBzYW1lIHJhbmdlLlxuICBmdW5jdGlvbiBjb21wYXJlQ29sbGFwc2VkTWFya2VycyhhLCBiKSB7XG4gICAgdmFyIGxlbkRpZmYgPSBhLmxpbmVzLmxlbmd0aCAtIGIubGluZXMubGVuZ3RoO1xuICAgIGlmIChsZW5EaWZmICE9IDApIHJldHVybiBsZW5EaWZmO1xuICAgIHZhciBhUG9zID0gYS5maW5kKCksIGJQb3MgPSBiLmZpbmQoKTtcbiAgICB2YXIgZnJvbUNtcCA9IGNtcChhUG9zLmZyb20sIGJQb3MuZnJvbSkgfHwgZXh0cmFMZWZ0KGEpIC0gZXh0cmFMZWZ0KGIpO1xuICAgIGlmIChmcm9tQ21wKSByZXR1cm4gLWZyb21DbXA7XG4gICAgdmFyIHRvQ21wID0gY21wKGFQb3MudG8sIGJQb3MudG8pIHx8IGV4dHJhUmlnaHQoYSkgLSBleHRyYVJpZ2h0KGIpO1xuICAgIGlmICh0b0NtcCkgcmV0dXJuIHRvQ21wO1xuICAgIHJldHVybiBiLmlkIC0gYS5pZDtcbiAgfVxuXG4gIC8vIEZpbmQgb3V0IHdoZXRoZXIgYSBsaW5lIGVuZHMgb3Igc3RhcnRzIGluIGEgY29sbGFwc2VkIHNwYW4uIElmXG4gIC8vIHNvLCByZXR1cm4gdGhlIG1hcmtlciBmb3IgdGhhdCBzcGFuLlxuICBmdW5jdGlvbiBjb2xsYXBzZWRTcGFuQXRTaWRlKGxpbmUsIHN0YXJ0KSB7XG4gICAgdmFyIHNwcyA9IHNhd0NvbGxhcHNlZFNwYW5zICYmIGxpbmUubWFya2VkU3BhbnMsIGZvdW5kO1xuICAgIGlmIChzcHMpIGZvciAodmFyIHNwLCBpID0gMDsgaSA8IHNwcy5sZW5ndGg7ICsraSkge1xuICAgICAgc3AgPSBzcHNbaV07XG4gICAgICBpZiAoc3AubWFya2VyLmNvbGxhcHNlZCAmJiAoc3RhcnQgPyBzcC5mcm9tIDogc3AudG8pID09IG51bGwgJiZcbiAgICAgICAgICAoIWZvdW5kIHx8IGNvbXBhcmVDb2xsYXBzZWRNYXJrZXJzKGZvdW5kLCBzcC5tYXJrZXIpIDwgMCkpXG4gICAgICAgIGZvdW5kID0gc3AubWFya2VyO1xuICAgIH1cbiAgICByZXR1cm4gZm91bmQ7XG4gIH1cbiAgZnVuY3Rpb24gY29sbGFwc2VkU3BhbkF0U3RhcnQobGluZSkgeyByZXR1cm4gY29sbGFwc2VkU3BhbkF0U2lkZShsaW5lLCB0cnVlKTsgfVxuICBmdW5jdGlvbiBjb2xsYXBzZWRTcGFuQXRFbmQobGluZSkgeyByZXR1cm4gY29sbGFwc2VkU3BhbkF0U2lkZShsaW5lLCBmYWxzZSk7IH1cblxuICAvLyBUZXN0IHdoZXRoZXIgdGhlcmUgZXhpc3RzIGEgY29sbGFwc2VkIHNwYW4gdGhhdCBwYXJ0aWFsbHlcbiAgLy8gb3ZlcmxhcHMgKGNvdmVycyB0aGUgc3RhcnQgb3IgZW5kLCBidXQgbm90IGJvdGgpIG9mIGEgbmV3IHNwYW4uXG4gIC8vIFN1Y2ggb3ZlcmxhcCBpcyBub3QgYWxsb3dlZC5cbiAgZnVuY3Rpb24gY29uZmxpY3RpbmdDb2xsYXBzZWRSYW5nZShkb2MsIGxpbmVObywgZnJvbSwgdG8sIG1hcmtlcikge1xuICAgIHZhciBsaW5lID0gZ2V0TGluZShkb2MsIGxpbmVObyk7XG4gICAgdmFyIHNwcyA9IHNhd0NvbGxhcHNlZFNwYW5zICYmIGxpbmUubWFya2VkU3BhbnM7XG4gICAgaWYgKHNwcykgZm9yICh2YXIgaSA9IDA7IGkgPCBzcHMubGVuZ3RoOyArK2kpIHtcbiAgICAgIHZhciBzcCA9IHNwc1tpXTtcbiAgICAgIGlmICghc3AubWFya2VyLmNvbGxhcHNlZCkgY29udGludWU7XG4gICAgICB2YXIgZm91bmQgPSBzcC5tYXJrZXIuZmluZCgwKTtcbiAgICAgIHZhciBmcm9tQ21wID0gY21wKGZvdW5kLmZyb20sIGZyb20pIHx8IGV4dHJhTGVmdChzcC5tYXJrZXIpIC0gZXh0cmFMZWZ0KG1hcmtlcik7XG4gICAgICB2YXIgdG9DbXAgPSBjbXAoZm91bmQudG8sIHRvKSB8fCBleHRyYVJpZ2h0KHNwLm1hcmtlcikgLSBleHRyYVJpZ2h0KG1hcmtlcik7XG4gICAgICBpZiAoZnJvbUNtcCA+PSAwICYmIHRvQ21wIDw9IDAgfHwgZnJvbUNtcCA8PSAwICYmIHRvQ21wID49IDApIGNvbnRpbnVlO1xuICAgICAgaWYgKGZyb21DbXAgPD0gMCAmJiAoY21wKGZvdW5kLnRvLCBmcm9tKSA+IDAgfHwgKHNwLm1hcmtlci5pbmNsdXNpdmVSaWdodCAmJiBtYXJrZXIuaW5jbHVzaXZlTGVmdCkpIHx8XG4gICAgICAgICAgZnJvbUNtcCA+PSAwICYmIChjbXAoZm91bmQuZnJvbSwgdG8pIDwgMCB8fCAoc3AubWFya2VyLmluY2x1c2l2ZUxlZnQgJiYgbWFya2VyLmluY2x1c2l2ZVJpZ2h0KSkpXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIC8vIEEgdmlzdWFsIGxpbmUgaXMgYSBsaW5lIGFzIGRyYXduIG9uIHRoZSBzY3JlZW4uIEZvbGRpbmcsIGZvclxuICAvLyBleGFtcGxlLCBjYW4gY2F1c2UgbXVsdGlwbGUgbG9naWNhbCBsaW5lcyB0byBhcHBlYXIgb24gdGhlIHNhbWVcbiAgLy8gdmlzdWFsIGxpbmUuIFRoaXMgZmluZHMgdGhlIHN0YXJ0IG9mIHRoZSB2aXN1YWwgbGluZSB0aGF0IHRoZVxuICAvLyBnaXZlbiBsaW5lIGlzIHBhcnQgb2YgKHVzdWFsbHkgdGhhdCBpcyB0aGUgbGluZSBpdHNlbGYpLlxuICBmdW5jdGlvbiB2aXN1YWxMaW5lKGxpbmUpIHtcbiAgICB2YXIgbWVyZ2VkO1xuICAgIHdoaWxlIChtZXJnZWQgPSBjb2xsYXBzZWRTcGFuQXRTdGFydChsaW5lKSlcbiAgICAgIGxpbmUgPSBtZXJnZWQuZmluZCgtMSwgdHJ1ZSkubGluZTtcbiAgICByZXR1cm4gbGluZTtcbiAgfVxuXG4gIC8vIFJldHVybnMgYW4gYXJyYXkgb2YgbG9naWNhbCBsaW5lcyB0aGF0IGNvbnRpbnVlIHRoZSB2aXN1YWwgbGluZVxuICAvLyBzdGFydGVkIGJ5IHRoZSBhcmd1bWVudCwgb3IgdW5kZWZpbmVkIGlmIHRoZXJlIGFyZSBubyBzdWNoIGxpbmVzLlxuICBmdW5jdGlvbiB2aXN1YWxMaW5lQ29udGludWVkKGxpbmUpIHtcbiAgICB2YXIgbWVyZ2VkLCBsaW5lcztcbiAgICB3aGlsZSAobWVyZ2VkID0gY29sbGFwc2VkU3BhbkF0RW5kKGxpbmUpKSB7XG4gICAgICBsaW5lID0gbWVyZ2VkLmZpbmQoMSwgdHJ1ZSkubGluZTtcbiAgICAgIChsaW5lcyB8fCAobGluZXMgPSBbXSkpLnB1c2gobGluZSk7XG4gICAgfVxuICAgIHJldHVybiBsaW5lcztcbiAgfVxuXG4gIC8vIEdldCB0aGUgbGluZSBudW1iZXIgb2YgdGhlIHN0YXJ0IG9mIHRoZSB2aXN1YWwgbGluZSB0aGF0IHRoZVxuICAvLyBnaXZlbiBsaW5lIG51bWJlciBpcyBwYXJ0IG9mLlxuICBmdW5jdGlvbiB2aXN1YWxMaW5lTm8oZG9jLCBsaW5lTikge1xuICAgIHZhciBsaW5lID0gZ2V0TGluZShkb2MsIGxpbmVOKSwgdmlzID0gdmlzdWFsTGluZShsaW5lKTtcbiAgICBpZiAobGluZSA9PSB2aXMpIHJldHVybiBsaW5lTjtcbiAgICByZXR1cm4gbGluZU5vKHZpcyk7XG4gIH1cbiAgLy8gR2V0IHRoZSBsaW5lIG51bWJlciBvZiB0aGUgc3RhcnQgb2YgdGhlIG5leHQgdmlzdWFsIGxpbmUgYWZ0ZXJcbiAgLy8gdGhlIGdpdmVuIGxpbmUuXG4gIGZ1bmN0aW9uIHZpc3VhbExpbmVFbmRObyhkb2MsIGxpbmVOKSB7XG4gICAgaWYgKGxpbmVOID4gZG9jLmxhc3RMaW5lKCkpIHJldHVybiBsaW5lTjtcbiAgICB2YXIgbGluZSA9IGdldExpbmUoZG9jLCBsaW5lTiksIG1lcmdlZDtcbiAgICBpZiAoIWxpbmVJc0hpZGRlbihkb2MsIGxpbmUpKSByZXR1cm4gbGluZU47XG4gICAgd2hpbGUgKG1lcmdlZCA9IGNvbGxhcHNlZFNwYW5BdEVuZChsaW5lKSlcbiAgICAgIGxpbmUgPSBtZXJnZWQuZmluZCgxLCB0cnVlKS5saW5lO1xuICAgIHJldHVybiBsaW5lTm8obGluZSkgKyAxO1xuICB9XG5cbiAgLy8gQ29tcHV0ZSB3aGV0aGVyIGEgbGluZSBpcyBoaWRkZW4uIExpbmVzIGNvdW50IGFzIGhpZGRlbiB3aGVuIHRoZXlcbiAgLy8gYXJlIHBhcnQgb2YgYSB2aXN1YWwgbGluZSB0aGF0IHN0YXJ0cyB3aXRoIGFub3RoZXIgbGluZSwgb3Igd2hlblxuICAvLyB0aGV5IGFyZSBlbnRpcmVseSBjb3ZlcmVkIGJ5IGNvbGxhcHNlZCwgbm9uLXdpZGdldCBzcGFuLlxuICBmdW5jdGlvbiBsaW5lSXNIaWRkZW4oZG9jLCBsaW5lKSB7XG4gICAgdmFyIHNwcyA9IHNhd0NvbGxhcHNlZFNwYW5zICYmIGxpbmUubWFya2VkU3BhbnM7XG4gICAgaWYgKHNwcykgZm9yICh2YXIgc3AsIGkgPSAwOyBpIDwgc3BzLmxlbmd0aDsgKytpKSB7XG4gICAgICBzcCA9IHNwc1tpXTtcbiAgICAgIGlmICghc3AubWFya2VyLmNvbGxhcHNlZCkgY29udGludWU7XG4gICAgICBpZiAoc3AuZnJvbSA9PSBudWxsKSByZXR1cm4gdHJ1ZTtcbiAgICAgIGlmIChzcC5tYXJrZXIud2lkZ2V0Tm9kZSkgY29udGludWU7XG4gICAgICBpZiAoc3AuZnJvbSA9PSAwICYmIHNwLm1hcmtlci5pbmNsdXNpdmVMZWZ0ICYmIGxpbmVJc0hpZGRlbklubmVyKGRvYywgbGluZSwgc3ApKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24gbGluZUlzSGlkZGVuSW5uZXIoZG9jLCBsaW5lLCBzcGFuKSB7XG4gICAgaWYgKHNwYW4udG8gPT0gbnVsbCkge1xuICAgICAgdmFyIGVuZCA9IHNwYW4ubWFya2VyLmZpbmQoMSwgdHJ1ZSk7XG4gICAgICByZXR1cm4gbGluZUlzSGlkZGVuSW5uZXIoZG9jLCBlbmQubGluZSwgZ2V0TWFya2VkU3BhbkZvcihlbmQubGluZS5tYXJrZWRTcGFucywgc3Bhbi5tYXJrZXIpKTtcbiAgICB9XG4gICAgaWYgKHNwYW4ubWFya2VyLmluY2x1c2l2ZVJpZ2h0ICYmIHNwYW4udG8gPT0gbGluZS50ZXh0Lmxlbmd0aClcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIGZvciAodmFyIHNwLCBpID0gMDsgaSA8IGxpbmUubWFya2VkU3BhbnMubGVuZ3RoOyArK2kpIHtcbiAgICAgIHNwID0gbGluZS5tYXJrZWRTcGFuc1tpXTtcbiAgICAgIGlmIChzcC5tYXJrZXIuY29sbGFwc2VkICYmICFzcC5tYXJrZXIud2lkZ2V0Tm9kZSAmJiBzcC5mcm9tID09IHNwYW4udG8gJiZcbiAgICAgICAgICAoc3AudG8gPT0gbnVsbCB8fCBzcC50byAhPSBzcGFuLmZyb20pICYmXG4gICAgICAgICAgKHNwLm1hcmtlci5pbmNsdXNpdmVMZWZ0IHx8IHNwYW4ubWFya2VyLmluY2x1c2l2ZVJpZ2h0KSAmJlxuICAgICAgICAgIGxpbmVJc0hpZGRlbklubmVyKGRvYywgbGluZSwgc3ApKSByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICAvLyBMSU5FIFdJREdFVFNcblxuICAvLyBMaW5lIHdpZGdldHMgYXJlIGJsb2NrIGVsZW1lbnRzIGRpc3BsYXllZCBhYm92ZSBvciBiZWxvdyBhIGxpbmUuXG5cbiAgdmFyIExpbmVXaWRnZXQgPSBDb2RlTWlycm9yLkxpbmVXaWRnZXQgPSBmdW5jdGlvbihkb2MsIG5vZGUsIG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucykgZm9yICh2YXIgb3B0IGluIG9wdGlvbnMpIGlmIChvcHRpb25zLmhhc093blByb3BlcnR5KG9wdCkpXG4gICAgICB0aGlzW29wdF0gPSBvcHRpb25zW29wdF07XG4gICAgdGhpcy5kb2MgPSBkb2M7XG4gICAgdGhpcy5ub2RlID0gbm9kZTtcbiAgfTtcbiAgZXZlbnRNaXhpbihMaW5lV2lkZ2V0KTtcblxuICBmdW5jdGlvbiBhZGp1c3RTY3JvbGxXaGVuQWJvdmVWaXNpYmxlKGNtLCBsaW5lLCBkaWZmKSB7XG4gICAgaWYgKGhlaWdodEF0TGluZShsaW5lKSA8ICgoY20uY3VyT3AgJiYgY20uY3VyT3Auc2Nyb2xsVG9wKSB8fCBjbS5kb2Muc2Nyb2xsVG9wKSlcbiAgICAgIGFkZFRvU2Nyb2xsUG9zKGNtLCBudWxsLCBkaWZmKTtcbiAgfVxuXG4gIExpbmVXaWRnZXQucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGNtID0gdGhpcy5kb2MuY20sIHdzID0gdGhpcy5saW5lLndpZGdldHMsIGxpbmUgPSB0aGlzLmxpbmUsIG5vID0gbGluZU5vKGxpbmUpO1xuICAgIGlmIChubyA9PSBudWxsIHx8ICF3cykgcmV0dXJuO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgd3MubGVuZ3RoOyArK2kpIGlmICh3c1tpXSA9PSB0aGlzKSB3cy5zcGxpY2UoaS0tLCAxKTtcbiAgICBpZiAoIXdzLmxlbmd0aCkgbGluZS53aWRnZXRzID0gbnVsbDtcbiAgICB2YXIgaGVpZ2h0ID0gd2lkZ2V0SGVpZ2h0KHRoaXMpO1xuICAgIHVwZGF0ZUxpbmVIZWlnaHQobGluZSwgTWF0aC5tYXgoMCwgbGluZS5oZWlnaHQgLSBoZWlnaHQpKTtcbiAgICBpZiAoY20pIHJ1bkluT3AoY20sIGZ1bmN0aW9uKCkge1xuICAgICAgYWRqdXN0U2Nyb2xsV2hlbkFib3ZlVmlzaWJsZShjbSwgbGluZSwgLWhlaWdodCk7XG4gICAgICByZWdMaW5lQ2hhbmdlKGNtLCBubywgXCJ3aWRnZXRcIik7XG4gICAgfSk7XG4gIH07XG4gIExpbmVXaWRnZXQucHJvdG90eXBlLmNoYW5nZWQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgb2xkSCA9IHRoaXMuaGVpZ2h0LCBjbSA9IHRoaXMuZG9jLmNtLCBsaW5lID0gdGhpcy5saW5lO1xuICAgIHRoaXMuaGVpZ2h0ID0gbnVsbDtcbiAgICB2YXIgZGlmZiA9IHdpZGdldEhlaWdodCh0aGlzKSAtIG9sZEg7XG4gICAgaWYgKCFkaWZmKSByZXR1cm47XG4gICAgdXBkYXRlTGluZUhlaWdodChsaW5lLCBsaW5lLmhlaWdodCArIGRpZmYpO1xuICAgIGlmIChjbSkgcnVuSW5PcChjbSwgZnVuY3Rpb24oKSB7XG4gICAgICBjbS5jdXJPcC5mb3JjZVVwZGF0ZSA9IHRydWU7XG4gICAgICBhZGp1c3RTY3JvbGxXaGVuQWJvdmVWaXNpYmxlKGNtLCBsaW5lLCBkaWZmKTtcbiAgICB9KTtcbiAgfTtcblxuICBmdW5jdGlvbiB3aWRnZXRIZWlnaHQod2lkZ2V0KSB7XG4gICAgaWYgKHdpZGdldC5oZWlnaHQgIT0gbnVsbCkgcmV0dXJuIHdpZGdldC5oZWlnaHQ7XG4gICAgdmFyIGNtID0gd2lkZ2V0LmRvYy5jbTtcbiAgICBpZiAoIWNtKSByZXR1cm4gMDtcbiAgICBpZiAoIWNvbnRhaW5zKGRvY3VtZW50LmJvZHksIHdpZGdldC5ub2RlKSkge1xuICAgICAgdmFyIHBhcmVudFN0eWxlID0gXCJwb3NpdGlvbjogcmVsYXRpdmU7XCI7XG4gICAgICBpZiAod2lkZ2V0LmNvdmVyR3V0dGVyKVxuICAgICAgICBwYXJlbnRTdHlsZSArPSBcIm1hcmdpbi1sZWZ0OiAtXCIgKyBjbS5kaXNwbGF5Lmd1dHRlcnMub2Zmc2V0V2lkdGggKyBcInB4O1wiO1xuICAgICAgaWYgKHdpZGdldC5ub0hTY3JvbGwpXG4gICAgICAgIHBhcmVudFN0eWxlICs9IFwid2lkdGg6IFwiICsgY20uZGlzcGxheS53cmFwcGVyLmNsaWVudFdpZHRoICsgXCJweDtcIjtcbiAgICAgIHJlbW92ZUNoaWxkcmVuQW5kQWRkKGNtLmRpc3BsYXkubWVhc3VyZSwgZWx0KFwiZGl2XCIsIFt3aWRnZXQubm9kZV0sIG51bGwsIHBhcmVudFN0eWxlKSk7XG4gICAgfVxuICAgIHJldHVybiB3aWRnZXQuaGVpZ2h0ID0gd2lkZ2V0Lm5vZGUucGFyZW50Tm9kZS5vZmZzZXRIZWlnaHQ7XG4gIH1cblxuICBmdW5jdGlvbiBhZGRMaW5lV2lkZ2V0KGRvYywgaGFuZGxlLCBub2RlLCBvcHRpb25zKSB7XG4gICAgdmFyIHdpZGdldCA9IG5ldyBMaW5lV2lkZ2V0KGRvYywgbm9kZSwgb3B0aW9ucyk7XG4gICAgdmFyIGNtID0gZG9jLmNtO1xuICAgIGlmIChjbSAmJiB3aWRnZXQubm9IU2Nyb2xsKSBjbS5kaXNwbGF5LmFsaWduV2lkZ2V0cyA9IHRydWU7XG4gICAgY2hhbmdlTGluZShkb2MsIGhhbmRsZSwgXCJ3aWRnZXRcIiwgZnVuY3Rpb24obGluZSkge1xuICAgICAgdmFyIHdpZGdldHMgPSBsaW5lLndpZGdldHMgfHwgKGxpbmUud2lkZ2V0cyA9IFtdKTtcbiAgICAgIGlmICh3aWRnZXQuaW5zZXJ0QXQgPT0gbnVsbCkgd2lkZ2V0cy5wdXNoKHdpZGdldCk7XG4gICAgICBlbHNlIHdpZGdldHMuc3BsaWNlKE1hdGgubWluKHdpZGdldHMubGVuZ3RoIC0gMSwgTWF0aC5tYXgoMCwgd2lkZ2V0Lmluc2VydEF0KSksIDAsIHdpZGdldCk7XG4gICAgICB3aWRnZXQubGluZSA9IGxpbmU7XG4gICAgICBpZiAoY20gJiYgIWxpbmVJc0hpZGRlbihkb2MsIGxpbmUpKSB7XG4gICAgICAgIHZhciBhYm92ZVZpc2libGUgPSBoZWlnaHRBdExpbmUobGluZSkgPCBkb2Muc2Nyb2xsVG9wO1xuICAgICAgICB1cGRhdGVMaW5lSGVpZ2h0KGxpbmUsIGxpbmUuaGVpZ2h0ICsgd2lkZ2V0SGVpZ2h0KHdpZGdldCkpO1xuICAgICAgICBpZiAoYWJvdmVWaXNpYmxlKSBhZGRUb1Njcm9sbFBvcyhjbSwgbnVsbCwgd2lkZ2V0LmhlaWdodCk7XG4gICAgICAgIGNtLmN1ck9wLmZvcmNlVXBkYXRlID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0pO1xuICAgIHJldHVybiB3aWRnZXQ7XG4gIH1cblxuICAvLyBMSU5FIERBVEEgU1RSVUNUVVJFXG5cbiAgLy8gTGluZSBvYmplY3RzLiBUaGVzZSBob2xkIHN0YXRlIHJlbGF0ZWQgdG8gYSBsaW5lLCBpbmNsdWRpbmdcbiAgLy8gaGlnaGxpZ2h0aW5nIGluZm8gKHRoZSBzdHlsZXMgYXJyYXkpLlxuICB2YXIgTGluZSA9IENvZGVNaXJyb3IuTGluZSA9IGZ1bmN0aW9uKHRleHQsIG1hcmtlZFNwYW5zLCBlc3RpbWF0ZUhlaWdodCkge1xuICAgIHRoaXMudGV4dCA9IHRleHQ7XG4gICAgYXR0YWNoTWFya2VkU3BhbnModGhpcywgbWFya2VkU3BhbnMpO1xuICAgIHRoaXMuaGVpZ2h0ID0gZXN0aW1hdGVIZWlnaHQgPyBlc3RpbWF0ZUhlaWdodCh0aGlzKSA6IDE7XG4gIH07XG4gIGV2ZW50TWl4aW4oTGluZSk7XG4gIExpbmUucHJvdG90eXBlLmxpbmVObyA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gbGluZU5vKHRoaXMpOyB9O1xuXG4gIC8vIENoYW5nZSB0aGUgY29udGVudCAodGV4dCwgbWFya2Vycykgb2YgYSBsaW5lLiBBdXRvbWF0aWNhbGx5XG4gIC8vIGludmFsaWRhdGVzIGNhY2hlZCBpbmZvcm1hdGlvbiBhbmQgdHJpZXMgdG8gcmUtZXN0aW1hdGUgdGhlXG4gIC8vIGxpbmUncyBoZWlnaHQuXG4gIGZ1bmN0aW9uIHVwZGF0ZUxpbmUobGluZSwgdGV4dCwgbWFya2VkU3BhbnMsIGVzdGltYXRlSGVpZ2h0KSB7XG4gICAgbGluZS50ZXh0ID0gdGV4dDtcbiAgICBpZiAobGluZS5zdGF0ZUFmdGVyKSBsaW5lLnN0YXRlQWZ0ZXIgPSBudWxsO1xuICAgIGlmIChsaW5lLnN0eWxlcykgbGluZS5zdHlsZXMgPSBudWxsO1xuICAgIGlmIChsaW5lLm9yZGVyICE9IG51bGwpIGxpbmUub3JkZXIgPSBudWxsO1xuICAgIGRldGFjaE1hcmtlZFNwYW5zKGxpbmUpO1xuICAgIGF0dGFjaE1hcmtlZFNwYW5zKGxpbmUsIG1hcmtlZFNwYW5zKTtcbiAgICB2YXIgZXN0SGVpZ2h0ID0gZXN0aW1hdGVIZWlnaHQgPyBlc3RpbWF0ZUhlaWdodChsaW5lKSA6IDE7XG4gICAgaWYgKGVzdEhlaWdodCAhPSBsaW5lLmhlaWdodCkgdXBkYXRlTGluZUhlaWdodChsaW5lLCBlc3RIZWlnaHQpO1xuICB9XG5cbiAgLy8gRGV0YWNoIGEgbGluZSBmcm9tIHRoZSBkb2N1bWVudCB0cmVlIGFuZCBpdHMgbWFya2Vycy5cbiAgZnVuY3Rpb24gY2xlYW5VcExpbmUobGluZSkge1xuICAgIGxpbmUucGFyZW50ID0gbnVsbDtcbiAgICBkZXRhY2hNYXJrZWRTcGFucyhsaW5lKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGV4dHJhY3RMaW5lQ2xhc3Nlcyh0eXBlLCBvdXRwdXQpIHtcbiAgICBpZiAodHlwZSkgZm9yICg7Oykge1xuICAgICAgdmFyIGxpbmVDbGFzcyA9IHR5cGUubWF0Y2goLyg/Ol58XFxzKylsaW5lLShiYWNrZ3JvdW5kLSk/KFxcUyspLyk7XG4gICAgICBpZiAoIWxpbmVDbGFzcykgYnJlYWs7XG4gICAgICB0eXBlID0gdHlwZS5zbGljZSgwLCBsaW5lQ2xhc3MuaW5kZXgpICsgdHlwZS5zbGljZShsaW5lQ2xhc3MuaW5kZXggKyBsaW5lQ2xhc3NbMF0ubGVuZ3RoKTtcbiAgICAgIHZhciBwcm9wID0gbGluZUNsYXNzWzFdID8gXCJiZ0NsYXNzXCIgOiBcInRleHRDbGFzc1wiO1xuICAgICAgaWYgKG91dHB1dFtwcm9wXSA9PSBudWxsKVxuICAgICAgICBvdXRwdXRbcHJvcF0gPSBsaW5lQ2xhc3NbMl07XG4gICAgICBlbHNlIGlmICghKG5ldyBSZWdFeHAoXCIoPzpefFxccylcIiArIGxpbmVDbGFzc1syXSArIFwiKD86JHxcXHMpXCIpKS50ZXN0KG91dHB1dFtwcm9wXSkpXG4gICAgICAgIG91dHB1dFtwcm9wXSArPSBcIiBcIiArIGxpbmVDbGFzc1syXTtcbiAgICB9XG4gICAgcmV0dXJuIHR5cGU7XG4gIH1cblxuICBmdW5jdGlvbiBjYWxsQmxhbmtMaW5lKG1vZGUsIHN0YXRlKSB7XG4gICAgaWYgKG1vZGUuYmxhbmtMaW5lKSByZXR1cm4gbW9kZS5ibGFua0xpbmUoc3RhdGUpO1xuICAgIGlmICghbW9kZS5pbm5lck1vZGUpIHJldHVybjtcbiAgICB2YXIgaW5uZXIgPSBDb2RlTWlycm9yLmlubmVyTW9kZShtb2RlLCBzdGF0ZSk7XG4gICAgaWYgKGlubmVyLm1vZGUuYmxhbmtMaW5lKSByZXR1cm4gaW5uZXIubW9kZS5ibGFua0xpbmUoaW5uZXIuc3RhdGUpO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVhZFRva2VuKG1vZGUsIHN0cmVhbSwgc3RhdGUsIGlubmVyKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCAxMDsgaSsrKSB7XG4gICAgICBpZiAoaW5uZXIpIGlubmVyWzBdID0gQ29kZU1pcnJvci5pbm5lck1vZGUobW9kZSwgc3RhdGUpLm1vZGU7XG4gICAgICB2YXIgc3R5bGUgPSBtb2RlLnRva2VuKHN0cmVhbSwgc3RhdGUpO1xuICAgICAgaWYgKHN0cmVhbS5wb3MgPiBzdHJlYW0uc3RhcnQpIHJldHVybiBzdHlsZTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiTW9kZSBcIiArIG1vZGUubmFtZSArIFwiIGZhaWxlZCB0byBhZHZhbmNlIHN0cmVhbS5cIik7XG4gIH1cblxuICAvLyBVdGlsaXR5IGZvciBnZXRUb2tlbkF0IGFuZCBnZXRMaW5lVG9rZW5zXG4gIGZ1bmN0aW9uIHRha2VUb2tlbihjbSwgcG9zLCBwcmVjaXNlLCBhc0FycmF5KSB7XG4gICAgZnVuY3Rpb24gZ2V0T2JqKGNvcHkpIHtcbiAgICAgIHJldHVybiB7c3RhcnQ6IHN0cmVhbS5zdGFydCwgZW5kOiBzdHJlYW0ucG9zLFxuICAgICAgICAgICAgICBzdHJpbmc6IHN0cmVhbS5jdXJyZW50KCksXG4gICAgICAgICAgICAgIHR5cGU6IHN0eWxlIHx8IG51bGwsXG4gICAgICAgICAgICAgIHN0YXRlOiBjb3B5ID8gY29weVN0YXRlKGRvYy5tb2RlLCBzdGF0ZSkgOiBzdGF0ZX07XG4gICAgfVxuXG4gICAgdmFyIGRvYyA9IGNtLmRvYywgbW9kZSA9IGRvYy5tb2RlLCBzdHlsZTtcbiAgICBwb3MgPSBjbGlwUG9zKGRvYywgcG9zKTtcbiAgICB2YXIgbGluZSA9IGdldExpbmUoZG9jLCBwb3MubGluZSksIHN0YXRlID0gZ2V0U3RhdGVCZWZvcmUoY20sIHBvcy5saW5lLCBwcmVjaXNlKTtcbiAgICB2YXIgc3RyZWFtID0gbmV3IFN0cmluZ1N0cmVhbShsaW5lLnRleHQsIGNtLm9wdGlvbnMudGFiU2l6ZSksIHRva2VucztcbiAgICBpZiAoYXNBcnJheSkgdG9rZW5zID0gW107XG4gICAgd2hpbGUgKChhc0FycmF5IHx8IHN0cmVhbS5wb3MgPCBwb3MuY2gpICYmICFzdHJlYW0uZW9sKCkpIHtcbiAgICAgIHN0cmVhbS5zdGFydCA9IHN0cmVhbS5wb3M7XG4gICAgICBzdHlsZSA9IHJlYWRUb2tlbihtb2RlLCBzdHJlYW0sIHN0YXRlKTtcbiAgICAgIGlmIChhc0FycmF5KSB0b2tlbnMucHVzaChnZXRPYmoodHJ1ZSkpO1xuICAgIH1cbiAgICByZXR1cm4gYXNBcnJheSA/IHRva2VucyA6IGdldE9iaigpO1xuICB9XG5cbiAgLy8gUnVuIHRoZSBnaXZlbiBtb2RlJ3MgcGFyc2VyIG92ZXIgYSBsaW5lLCBjYWxsaW5nIGYgZm9yIGVhY2ggdG9rZW4uXG4gIGZ1bmN0aW9uIHJ1bk1vZGUoY20sIHRleHQsIG1vZGUsIHN0YXRlLCBmLCBsaW5lQ2xhc3NlcywgZm9yY2VUb0VuZCkge1xuICAgIHZhciBmbGF0dGVuU3BhbnMgPSBtb2RlLmZsYXR0ZW5TcGFucztcbiAgICBpZiAoZmxhdHRlblNwYW5zID09IG51bGwpIGZsYXR0ZW5TcGFucyA9IGNtLm9wdGlvbnMuZmxhdHRlblNwYW5zO1xuICAgIHZhciBjdXJTdGFydCA9IDAsIGN1clN0eWxlID0gbnVsbDtcbiAgICB2YXIgc3RyZWFtID0gbmV3IFN0cmluZ1N0cmVhbSh0ZXh0LCBjbS5vcHRpb25zLnRhYlNpemUpLCBzdHlsZTtcbiAgICB2YXIgaW5uZXIgPSBjbS5vcHRpb25zLmFkZE1vZGVDbGFzcyAmJiBbbnVsbF07XG4gICAgaWYgKHRleHQgPT0gXCJcIikgZXh0cmFjdExpbmVDbGFzc2VzKGNhbGxCbGFua0xpbmUobW9kZSwgc3RhdGUpLCBsaW5lQ2xhc3Nlcyk7XG4gICAgd2hpbGUgKCFzdHJlYW0uZW9sKCkpIHtcbiAgICAgIGlmIChzdHJlYW0ucG9zID4gY20ub3B0aW9ucy5tYXhIaWdobGlnaHRMZW5ndGgpIHtcbiAgICAgICAgZmxhdHRlblNwYW5zID0gZmFsc2U7XG4gICAgICAgIGlmIChmb3JjZVRvRW5kKSBwcm9jZXNzTGluZShjbSwgdGV4dCwgc3RhdGUsIHN0cmVhbS5wb3MpO1xuICAgICAgICBzdHJlYW0ucG9zID0gdGV4dC5sZW5ndGg7XG4gICAgICAgIHN0eWxlID0gbnVsbDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0eWxlID0gZXh0cmFjdExpbmVDbGFzc2VzKHJlYWRUb2tlbihtb2RlLCBzdHJlYW0sIHN0YXRlLCBpbm5lciksIGxpbmVDbGFzc2VzKTtcbiAgICAgIH1cbiAgICAgIGlmIChpbm5lcikge1xuICAgICAgICB2YXIgbU5hbWUgPSBpbm5lclswXS5uYW1lO1xuICAgICAgICBpZiAobU5hbWUpIHN0eWxlID0gXCJtLVwiICsgKHN0eWxlID8gbU5hbWUgKyBcIiBcIiArIHN0eWxlIDogbU5hbWUpO1xuICAgICAgfVxuICAgICAgaWYgKCFmbGF0dGVuU3BhbnMgfHwgY3VyU3R5bGUgIT0gc3R5bGUpIHtcbiAgICAgICAgd2hpbGUgKGN1clN0YXJ0IDwgc3RyZWFtLnN0YXJ0KSB7XG4gICAgICAgICAgY3VyU3RhcnQgPSBNYXRoLm1pbihzdHJlYW0uc3RhcnQsIGN1clN0YXJ0ICsgNTAwMDApO1xuICAgICAgICAgIGYoY3VyU3RhcnQsIGN1clN0eWxlKTtcbiAgICAgICAgfVxuICAgICAgICBjdXJTdHlsZSA9IHN0eWxlO1xuICAgICAgfVxuICAgICAgc3RyZWFtLnN0YXJ0ID0gc3RyZWFtLnBvcztcbiAgICB9XG4gICAgd2hpbGUgKGN1clN0YXJ0IDwgc3RyZWFtLnBvcykge1xuICAgICAgLy8gV2Via2l0IHNlZW1zIHRvIHJlZnVzZSB0byByZW5kZXIgdGV4dCBub2RlcyBsb25nZXIgdGhhbiA1NzQ0NCBjaGFyYWN0ZXJzXG4gICAgICB2YXIgcG9zID0gTWF0aC5taW4oc3RyZWFtLnBvcywgY3VyU3RhcnQgKyA1MDAwMCk7XG4gICAgICBmKHBvcywgY3VyU3R5bGUpO1xuICAgICAgY3VyU3RhcnQgPSBwb3M7XG4gICAgfVxuICB9XG5cbiAgLy8gQ29tcHV0ZSBhIHN0eWxlIGFycmF5IChhbiBhcnJheSBzdGFydGluZyB3aXRoIGEgbW9kZSBnZW5lcmF0aW9uXG4gIC8vIC0tIGZvciBpbnZhbGlkYXRpb24gLS0gZm9sbG93ZWQgYnkgcGFpcnMgb2YgZW5kIHBvc2l0aW9ucyBhbmRcbiAgLy8gc3R5bGUgc3RyaW5ncyksIHdoaWNoIGlzIHVzZWQgdG8gaGlnaGxpZ2h0IHRoZSB0b2tlbnMgb24gdGhlXG4gIC8vIGxpbmUuXG4gIGZ1bmN0aW9uIGhpZ2hsaWdodExpbmUoY20sIGxpbmUsIHN0YXRlLCBmb3JjZVRvRW5kKSB7XG4gICAgLy8gQSBzdHlsZXMgYXJyYXkgYWx3YXlzIHN0YXJ0cyB3aXRoIGEgbnVtYmVyIGlkZW50aWZ5aW5nIHRoZVxuICAgIC8vIG1vZGUvb3ZlcmxheXMgdGhhdCBpdCBpcyBiYXNlZCBvbiAoZm9yIGVhc3kgaW52YWxpZGF0aW9uKS5cbiAgICB2YXIgc3QgPSBbY20uc3RhdGUubW9kZUdlbl0sIGxpbmVDbGFzc2VzID0ge307XG4gICAgLy8gQ29tcHV0ZSB0aGUgYmFzZSBhcnJheSBvZiBzdHlsZXNcbiAgICBydW5Nb2RlKGNtLCBsaW5lLnRleHQsIGNtLmRvYy5tb2RlLCBzdGF0ZSwgZnVuY3Rpb24oZW5kLCBzdHlsZSkge1xuICAgICAgc3QucHVzaChlbmQsIHN0eWxlKTtcbiAgICB9LCBsaW5lQ2xhc3NlcywgZm9yY2VUb0VuZCk7XG5cbiAgICAvLyBSdW4gb3ZlcmxheXMsIGFkanVzdCBzdHlsZSBhcnJheS5cbiAgICBmb3IgKHZhciBvID0gMDsgbyA8IGNtLnN0YXRlLm92ZXJsYXlzLmxlbmd0aDsgKytvKSB7XG4gICAgICB2YXIgb3ZlcmxheSA9IGNtLnN0YXRlLm92ZXJsYXlzW29dLCBpID0gMSwgYXQgPSAwO1xuICAgICAgcnVuTW9kZShjbSwgbGluZS50ZXh0LCBvdmVybGF5Lm1vZGUsIHRydWUsIGZ1bmN0aW9uKGVuZCwgc3R5bGUpIHtcbiAgICAgICAgdmFyIHN0YXJ0ID0gaTtcbiAgICAgICAgLy8gRW5zdXJlIHRoZXJlJ3MgYSB0b2tlbiBlbmQgYXQgdGhlIGN1cnJlbnQgcG9zaXRpb24sIGFuZCB0aGF0IGkgcG9pbnRzIGF0IGl0XG4gICAgICAgIHdoaWxlIChhdCA8IGVuZCkge1xuICAgICAgICAgIHZhciBpX2VuZCA9IHN0W2ldO1xuICAgICAgICAgIGlmIChpX2VuZCA+IGVuZClcbiAgICAgICAgICAgIHN0LnNwbGljZShpLCAxLCBlbmQsIHN0W2krMV0sIGlfZW5kKTtcbiAgICAgICAgICBpICs9IDI7XG4gICAgICAgICAgYXQgPSBNYXRoLm1pbihlbmQsIGlfZW5kKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXN0eWxlKSByZXR1cm47XG4gICAgICAgIGlmIChvdmVybGF5Lm9wYXF1ZSkge1xuICAgICAgICAgIHN0LnNwbGljZShzdGFydCwgaSAtIHN0YXJ0LCBlbmQsIFwiY20tb3ZlcmxheSBcIiArIHN0eWxlKTtcbiAgICAgICAgICBpID0gc3RhcnQgKyAyO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZvciAoOyBzdGFydCA8IGk7IHN0YXJ0ICs9IDIpIHtcbiAgICAgICAgICAgIHZhciBjdXIgPSBzdFtzdGFydCsxXTtcbiAgICAgICAgICAgIHN0W3N0YXJ0KzFdID0gKGN1ciA/IGN1ciArIFwiIFwiIDogXCJcIikgKyBcImNtLW92ZXJsYXkgXCIgKyBzdHlsZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sIGxpbmVDbGFzc2VzKTtcbiAgICB9XG5cbiAgICByZXR1cm4ge3N0eWxlczogc3QsIGNsYXNzZXM6IGxpbmVDbGFzc2VzLmJnQ2xhc3MgfHwgbGluZUNsYXNzZXMudGV4dENsYXNzID8gbGluZUNsYXNzZXMgOiBudWxsfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldExpbmVTdHlsZXMoY20sIGxpbmUsIHVwZGF0ZUZyb250aWVyKSB7XG4gICAgaWYgKCFsaW5lLnN0eWxlcyB8fCBsaW5lLnN0eWxlc1swXSAhPSBjbS5zdGF0ZS5tb2RlR2VuKSB7XG4gICAgICB2YXIgc3RhdGUgPSBnZXRTdGF0ZUJlZm9yZShjbSwgbGluZU5vKGxpbmUpKTtcbiAgICAgIHZhciByZXN1bHQgPSBoaWdobGlnaHRMaW5lKGNtLCBsaW5lLCBsaW5lLnRleHQubGVuZ3RoID4gY20ub3B0aW9ucy5tYXhIaWdobGlnaHRMZW5ndGggPyBjb3B5U3RhdGUoY20uZG9jLm1vZGUsIHN0YXRlKSA6IHN0YXRlKTtcbiAgICAgIGxpbmUuc3RhdGVBZnRlciA9IHN0YXRlO1xuICAgICAgbGluZS5zdHlsZXMgPSByZXN1bHQuc3R5bGVzO1xuICAgICAgaWYgKHJlc3VsdC5jbGFzc2VzKSBsaW5lLnN0eWxlQ2xhc3NlcyA9IHJlc3VsdC5jbGFzc2VzO1xuICAgICAgZWxzZSBpZiAobGluZS5zdHlsZUNsYXNzZXMpIGxpbmUuc3R5bGVDbGFzc2VzID0gbnVsbDtcbiAgICAgIGlmICh1cGRhdGVGcm9udGllciA9PT0gY20uZG9jLmZyb250aWVyKSBjbS5kb2MuZnJvbnRpZXIrKztcbiAgICB9XG4gICAgcmV0dXJuIGxpbmUuc3R5bGVzO1xuICB9XG5cbiAgLy8gTGlnaHR3ZWlnaHQgZm9ybSBvZiBoaWdobGlnaHQgLS0gcHJvY2VlZCBvdmVyIHRoaXMgbGluZSBhbmRcbiAgLy8gdXBkYXRlIHN0YXRlLCBidXQgZG9uJ3Qgc2F2ZSBhIHN0eWxlIGFycmF5LiBVc2VkIGZvciBsaW5lcyB0aGF0XG4gIC8vIGFyZW4ndCBjdXJyZW50bHkgdmlzaWJsZS5cbiAgZnVuY3Rpb24gcHJvY2Vzc0xpbmUoY20sIHRleHQsIHN0YXRlLCBzdGFydEF0KSB7XG4gICAgdmFyIG1vZGUgPSBjbS5kb2MubW9kZTtcbiAgICB2YXIgc3RyZWFtID0gbmV3IFN0cmluZ1N0cmVhbSh0ZXh0LCBjbS5vcHRpb25zLnRhYlNpemUpO1xuICAgIHN0cmVhbS5zdGFydCA9IHN0cmVhbS5wb3MgPSBzdGFydEF0IHx8IDA7XG4gICAgaWYgKHRleHQgPT0gXCJcIikgY2FsbEJsYW5rTGluZShtb2RlLCBzdGF0ZSk7XG4gICAgd2hpbGUgKCFzdHJlYW0uZW9sKCkpIHtcbiAgICAgIHJlYWRUb2tlbihtb2RlLCBzdHJlYW0sIHN0YXRlKTtcbiAgICAgIHN0cmVhbS5zdGFydCA9IHN0cmVhbS5wb3M7XG4gICAgfVxuICB9XG5cbiAgLy8gQ29udmVydCBhIHN0eWxlIGFzIHJldHVybmVkIGJ5IGEgbW9kZSAoZWl0aGVyIG51bGwsIG9yIGEgc3RyaW5nXG4gIC8vIGNvbnRhaW5pbmcgb25lIG9yIG1vcmUgc3R5bGVzKSB0byBhIENTUyBzdHlsZS4gVGhpcyBpcyBjYWNoZWQsXG4gIC8vIGFuZCBhbHNvIGxvb2tzIGZvciBsaW5lLXdpZGUgc3R5bGVzLlxuICB2YXIgc3R5bGVUb0NsYXNzQ2FjaGUgPSB7fSwgc3R5bGVUb0NsYXNzQ2FjaGVXaXRoTW9kZSA9IHt9O1xuICBmdW5jdGlvbiBpbnRlcnByZXRUb2tlblN0eWxlKHN0eWxlLCBvcHRpb25zKSB7XG4gICAgaWYgKCFzdHlsZSB8fCAvXlxccyokLy50ZXN0KHN0eWxlKSkgcmV0dXJuIG51bGw7XG4gICAgdmFyIGNhY2hlID0gb3B0aW9ucy5hZGRNb2RlQ2xhc3MgPyBzdHlsZVRvQ2xhc3NDYWNoZVdpdGhNb2RlIDogc3R5bGVUb0NsYXNzQ2FjaGU7XG4gICAgcmV0dXJuIGNhY2hlW3N0eWxlXSB8fFxuICAgICAgKGNhY2hlW3N0eWxlXSA9IHN0eWxlLnJlcGxhY2UoL1xcUysvZywgXCJjbS0kJlwiKSk7XG4gIH1cblxuICAvLyBSZW5kZXIgdGhlIERPTSByZXByZXNlbnRhdGlvbiBvZiB0aGUgdGV4dCBvZiBhIGxpbmUuIEFsc28gYnVpbGRzXG4gIC8vIHVwIGEgJ2xpbmUgbWFwJywgd2hpY2ggcG9pbnRzIGF0IHRoZSBET00gbm9kZXMgdGhhdCByZXByZXNlbnRcbiAgLy8gc3BlY2lmaWMgc3RyZXRjaGVzIG9mIHRleHQsIGFuZCBpcyB1c2VkIGJ5IHRoZSBtZWFzdXJpbmcgY29kZS5cbiAgLy8gVGhlIHJldHVybmVkIG9iamVjdCBjb250YWlucyB0aGUgRE9NIG5vZGUsIHRoaXMgbWFwLCBhbmRcbiAgLy8gaW5mb3JtYXRpb24gYWJvdXQgbGluZS13aWRlIHN0eWxlcyB0aGF0IHdlcmUgc2V0IGJ5IHRoZSBtb2RlLlxuICBmdW5jdGlvbiBidWlsZExpbmVDb250ZW50KGNtLCBsaW5lVmlldykge1xuICAgIC8vIFRoZSBwYWRkaW5nLXJpZ2h0IGZvcmNlcyB0aGUgZWxlbWVudCB0byBoYXZlIGEgJ2JvcmRlcicsIHdoaWNoXG4gICAgLy8gaXMgbmVlZGVkIG9uIFdlYmtpdCB0byBiZSBhYmxlIHRvIGdldCBsaW5lLWxldmVsIGJvdW5kaW5nXG4gICAgLy8gcmVjdGFuZ2xlcyBmb3IgaXQgKGluIG1lYXN1cmVDaGFyKS5cbiAgICB2YXIgY29udGVudCA9IGVsdChcInNwYW5cIiwgbnVsbCwgbnVsbCwgd2Via2l0ID8gXCJwYWRkaW5nLXJpZ2h0OiAuMXB4XCIgOiBudWxsKTtcbiAgICB2YXIgYnVpbGRlciA9IHtwcmU6IGVsdChcInByZVwiLCBbY29udGVudF0sIFwiQ29kZU1pcnJvci1saW5lXCIpLCBjb250ZW50OiBjb250ZW50LFxuICAgICAgICAgICAgICAgICAgIGNvbDogMCwgcG9zOiAwLCBjbTogY20sXG4gICAgICAgICAgICAgICAgICAgc3BsaXRTcGFjZXM6IChpZSB8fCB3ZWJraXQpICYmIGNtLmdldE9wdGlvbihcImxpbmVXcmFwcGluZ1wiKX07XG4gICAgbGluZVZpZXcubWVhc3VyZSA9IHt9O1xuXG4gICAgLy8gSXRlcmF0ZSBvdmVyIHRoZSBsb2dpY2FsIGxpbmVzIHRoYXQgbWFrZSB1cCB0aGlzIHZpc3VhbCBsaW5lLlxuICAgIGZvciAodmFyIGkgPSAwOyBpIDw9IChsaW5lVmlldy5yZXN0ID8gbGluZVZpZXcucmVzdC5sZW5ndGggOiAwKTsgaSsrKSB7XG4gICAgICB2YXIgbGluZSA9IGkgPyBsaW5lVmlldy5yZXN0W2kgLSAxXSA6IGxpbmVWaWV3LmxpbmUsIG9yZGVyO1xuICAgICAgYnVpbGRlci5wb3MgPSAwO1xuICAgICAgYnVpbGRlci5hZGRUb2tlbiA9IGJ1aWxkVG9rZW47XG4gICAgICAvLyBPcHRpb25hbGx5IHdpcmUgaW4gc29tZSBoYWNrcyBpbnRvIHRoZSB0b2tlbi1yZW5kZXJpbmdcbiAgICAgIC8vIGFsZ29yaXRobSwgdG8gZGVhbCB3aXRoIGJyb3dzZXIgcXVpcmtzLlxuICAgICAgaWYgKGhhc0JhZEJpZGlSZWN0cyhjbS5kaXNwbGF5Lm1lYXN1cmUpICYmIChvcmRlciA9IGdldE9yZGVyKGxpbmUpKSlcbiAgICAgICAgYnVpbGRlci5hZGRUb2tlbiA9IGJ1aWxkVG9rZW5CYWRCaWRpKGJ1aWxkZXIuYWRkVG9rZW4sIG9yZGVyKTtcbiAgICAgIGJ1aWxkZXIubWFwID0gW107XG4gICAgICB2YXIgYWxsb3dGcm9udGllclVwZGF0ZSA9IGxpbmVWaWV3ICE9IGNtLmRpc3BsYXkuZXh0ZXJuYWxNZWFzdXJlZCAmJiBsaW5lTm8obGluZSk7XG4gICAgICBpbnNlcnRMaW5lQ29udGVudChsaW5lLCBidWlsZGVyLCBnZXRMaW5lU3R5bGVzKGNtLCBsaW5lLCBhbGxvd0Zyb250aWVyVXBkYXRlKSk7XG4gICAgICBpZiAobGluZS5zdHlsZUNsYXNzZXMpIHtcbiAgICAgICAgaWYgKGxpbmUuc3R5bGVDbGFzc2VzLmJnQ2xhc3MpXG4gICAgICAgICAgYnVpbGRlci5iZ0NsYXNzID0gam9pbkNsYXNzZXMobGluZS5zdHlsZUNsYXNzZXMuYmdDbGFzcywgYnVpbGRlci5iZ0NsYXNzIHx8IFwiXCIpO1xuICAgICAgICBpZiAobGluZS5zdHlsZUNsYXNzZXMudGV4dENsYXNzKVxuICAgICAgICAgIGJ1aWxkZXIudGV4dENsYXNzID0gam9pbkNsYXNzZXMobGluZS5zdHlsZUNsYXNzZXMudGV4dENsYXNzLCBidWlsZGVyLnRleHRDbGFzcyB8fCBcIlwiKTtcbiAgICAgIH1cblxuICAgICAgLy8gRW5zdXJlIGF0IGxlYXN0IGEgc2luZ2xlIG5vZGUgaXMgcHJlc2VudCwgZm9yIG1lYXN1cmluZy5cbiAgICAgIGlmIChidWlsZGVyLm1hcC5sZW5ndGggPT0gMClcbiAgICAgICAgYnVpbGRlci5tYXAucHVzaCgwLCAwLCBidWlsZGVyLmNvbnRlbnQuYXBwZW5kQ2hpbGQoemVyb1dpZHRoRWxlbWVudChjbS5kaXNwbGF5Lm1lYXN1cmUpKSk7XG5cbiAgICAgIC8vIFN0b3JlIHRoZSBtYXAgYW5kIGEgY2FjaGUgb2JqZWN0IGZvciB0aGUgY3VycmVudCBsb2dpY2FsIGxpbmVcbiAgICAgIGlmIChpID09IDApIHtcbiAgICAgICAgbGluZVZpZXcubWVhc3VyZS5tYXAgPSBidWlsZGVyLm1hcDtcbiAgICAgICAgbGluZVZpZXcubWVhc3VyZS5jYWNoZSA9IHt9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgKGxpbmVWaWV3Lm1lYXN1cmUubWFwcyB8fCAobGluZVZpZXcubWVhc3VyZS5tYXBzID0gW10pKS5wdXNoKGJ1aWxkZXIubWFwKTtcbiAgICAgICAgKGxpbmVWaWV3Lm1lYXN1cmUuY2FjaGVzIHx8IChsaW5lVmlldy5tZWFzdXJlLmNhY2hlcyA9IFtdKSkucHVzaCh7fSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gU2VlIGlzc3VlICMyOTAxXG4gICAgaWYgKHdlYmtpdCAmJiAvXFxiY20tdGFiXFxiLy50ZXN0KGJ1aWxkZXIuY29udGVudC5sYXN0Q2hpbGQuY2xhc3NOYW1lKSlcbiAgICAgIGJ1aWxkZXIuY29udGVudC5jbGFzc05hbWUgPSBcImNtLXRhYi13cmFwLWhhY2tcIjtcblxuICAgIHNpZ25hbChjbSwgXCJyZW5kZXJMaW5lXCIsIGNtLCBsaW5lVmlldy5saW5lLCBidWlsZGVyLnByZSk7XG4gICAgaWYgKGJ1aWxkZXIucHJlLmNsYXNzTmFtZSlcbiAgICAgIGJ1aWxkZXIudGV4dENsYXNzID0gam9pbkNsYXNzZXMoYnVpbGRlci5wcmUuY2xhc3NOYW1lLCBidWlsZGVyLnRleHRDbGFzcyB8fCBcIlwiKTtcblxuICAgIHJldHVybiBidWlsZGVyO1xuICB9XG5cbiAgZnVuY3Rpb24gZGVmYXVsdFNwZWNpYWxDaGFyUGxhY2Vob2xkZXIoY2gpIHtcbiAgICB2YXIgdG9rZW4gPSBlbHQoXCJzcGFuXCIsIFwiXFx1MjAyMlwiLCBcImNtLWludmFsaWRjaGFyXCIpO1xuICAgIHRva2VuLnRpdGxlID0gXCJcXFxcdVwiICsgY2guY2hhckNvZGVBdCgwKS50b1N0cmluZygxNik7XG4gICAgdG9rZW4uc2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbFwiLCB0b2tlbi50aXRsZSk7XG4gICAgcmV0dXJuIHRva2VuO1xuICB9XG5cbiAgLy8gQnVpbGQgdXAgdGhlIERPTSByZXByZXNlbnRhdGlvbiBmb3IgYSBzaW5nbGUgdG9rZW4sIGFuZCBhZGQgaXQgdG9cbiAgLy8gdGhlIGxpbmUgbWFwLiBUYWtlcyBjYXJlIHRvIHJlbmRlciBzcGVjaWFsIGNoYXJhY3RlcnMgc2VwYXJhdGVseS5cbiAgZnVuY3Rpb24gYnVpbGRUb2tlbihidWlsZGVyLCB0ZXh0LCBzdHlsZSwgc3RhcnRTdHlsZSwgZW5kU3R5bGUsIHRpdGxlLCBjc3MpIHtcbiAgICBpZiAoIXRleHQpIHJldHVybjtcbiAgICB2YXIgZGlzcGxheVRleHQgPSBidWlsZGVyLnNwbGl0U3BhY2VzID8gdGV4dC5yZXBsYWNlKC8gezMsfS9nLCBzcGxpdFNwYWNlcykgOiB0ZXh0O1xuICAgIHZhciBzcGVjaWFsID0gYnVpbGRlci5jbS5zdGF0ZS5zcGVjaWFsQ2hhcnMsIG11c3RXcmFwID0gZmFsc2U7XG4gICAgaWYgKCFzcGVjaWFsLnRlc3QodGV4dCkpIHtcbiAgICAgIGJ1aWxkZXIuY29sICs9IHRleHQubGVuZ3RoO1xuICAgICAgdmFyIGNvbnRlbnQgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShkaXNwbGF5VGV4dCk7XG4gICAgICBidWlsZGVyLm1hcC5wdXNoKGJ1aWxkZXIucG9zLCBidWlsZGVyLnBvcyArIHRleHQubGVuZ3RoLCBjb250ZW50KTtcbiAgICAgIGlmIChpZSAmJiBpZV92ZXJzaW9uIDwgOSkgbXVzdFdyYXAgPSB0cnVlO1xuICAgICAgYnVpbGRlci5wb3MgKz0gdGV4dC5sZW5ndGg7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBjb250ZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLCBwb3MgPSAwO1xuICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgc3BlY2lhbC5sYXN0SW5kZXggPSBwb3M7XG4gICAgICAgIHZhciBtID0gc3BlY2lhbC5leGVjKHRleHQpO1xuICAgICAgICB2YXIgc2tpcHBlZCA9IG0gPyBtLmluZGV4IC0gcG9zIDogdGV4dC5sZW5ndGggLSBwb3M7XG4gICAgICAgIGlmIChza2lwcGVkKSB7XG4gICAgICAgICAgdmFyIHR4dCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGRpc3BsYXlUZXh0LnNsaWNlKHBvcywgcG9zICsgc2tpcHBlZCkpO1xuICAgICAgICAgIGlmIChpZSAmJiBpZV92ZXJzaW9uIDwgOSkgY29udGVudC5hcHBlbmRDaGlsZChlbHQoXCJzcGFuXCIsIFt0eHRdKSk7XG4gICAgICAgICAgZWxzZSBjb250ZW50LmFwcGVuZENoaWxkKHR4dCk7XG4gICAgICAgICAgYnVpbGRlci5tYXAucHVzaChidWlsZGVyLnBvcywgYnVpbGRlci5wb3MgKyBza2lwcGVkLCB0eHQpO1xuICAgICAgICAgIGJ1aWxkZXIuY29sICs9IHNraXBwZWQ7XG4gICAgICAgICAgYnVpbGRlci5wb3MgKz0gc2tpcHBlZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIW0pIGJyZWFrO1xuICAgICAgICBwb3MgKz0gc2tpcHBlZCArIDE7XG4gICAgICAgIGlmIChtWzBdID09IFwiXFx0XCIpIHtcbiAgICAgICAgICB2YXIgdGFiU2l6ZSA9IGJ1aWxkZXIuY20ub3B0aW9ucy50YWJTaXplLCB0YWJXaWR0aCA9IHRhYlNpemUgLSBidWlsZGVyLmNvbCAlIHRhYlNpemU7XG4gICAgICAgICAgdmFyIHR4dCA9IGNvbnRlbnQuYXBwZW5kQ2hpbGQoZWx0KFwic3BhblwiLCBzcGFjZVN0cih0YWJXaWR0aCksIFwiY20tdGFiXCIpKTtcbiAgICAgICAgICB0eHQuc2V0QXR0cmlidXRlKFwicm9sZVwiLCBcInByZXNlbnRhdGlvblwiKTtcbiAgICAgICAgICB0eHQuc2V0QXR0cmlidXRlKFwiY20tdGV4dFwiLCBcIlxcdFwiKTtcbiAgICAgICAgICBidWlsZGVyLmNvbCArPSB0YWJXaWR0aDtcbiAgICAgICAgfSBlbHNlIGlmIChtWzBdID09IFwiXFxyXCIgfHwgbVswXSA9PSBcIlxcblwiKSB7XG4gICAgICAgICAgdmFyIHR4dCA9IGNvbnRlbnQuYXBwZW5kQ2hpbGQoZWx0KFwic3BhblwiLCBtWzBdID09IFwiXFxyXCIgPyBcIlxcdTI0MGRcIiA6IFwiXFx1MjQyNFwiLCBcImNtLWludmFsaWRjaGFyXCIpKTtcbiAgICAgICAgICB0eHQuc2V0QXR0cmlidXRlKFwiY20tdGV4dFwiLCBtWzBdKTtcbiAgICAgICAgICBidWlsZGVyLmNvbCArPSAxO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciB0eHQgPSBidWlsZGVyLmNtLm9wdGlvbnMuc3BlY2lhbENoYXJQbGFjZWhvbGRlcihtWzBdKTtcbiAgICAgICAgICB0eHQuc2V0QXR0cmlidXRlKFwiY20tdGV4dFwiLCBtWzBdKTtcbiAgICAgICAgICBpZiAoaWUgJiYgaWVfdmVyc2lvbiA8IDkpIGNvbnRlbnQuYXBwZW5kQ2hpbGQoZWx0KFwic3BhblwiLCBbdHh0XSkpO1xuICAgICAgICAgIGVsc2UgY29udGVudC5hcHBlbmRDaGlsZCh0eHQpO1xuICAgICAgICAgIGJ1aWxkZXIuY29sICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgYnVpbGRlci5tYXAucHVzaChidWlsZGVyLnBvcywgYnVpbGRlci5wb3MgKyAxLCB0eHQpO1xuICAgICAgICBidWlsZGVyLnBvcysrO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoc3R5bGUgfHwgc3RhcnRTdHlsZSB8fCBlbmRTdHlsZSB8fCBtdXN0V3JhcCB8fCBjc3MpIHtcbiAgICAgIHZhciBmdWxsU3R5bGUgPSBzdHlsZSB8fCBcIlwiO1xuICAgICAgaWYgKHN0YXJ0U3R5bGUpIGZ1bGxTdHlsZSArPSBzdGFydFN0eWxlO1xuICAgICAgaWYgKGVuZFN0eWxlKSBmdWxsU3R5bGUgKz0gZW5kU3R5bGU7XG4gICAgICB2YXIgdG9rZW4gPSBlbHQoXCJzcGFuXCIsIFtjb250ZW50XSwgZnVsbFN0eWxlLCBjc3MpO1xuICAgICAgaWYgKHRpdGxlKSB0b2tlbi50aXRsZSA9IHRpdGxlO1xuICAgICAgcmV0dXJuIGJ1aWxkZXIuY29udGVudC5hcHBlbmRDaGlsZCh0b2tlbik7XG4gICAgfVxuICAgIGJ1aWxkZXIuY29udGVudC5hcHBlbmRDaGlsZChjb250ZW50KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNwbGl0U3BhY2VzKG9sZCkge1xuICAgIHZhciBvdXQgPSBcIiBcIjtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9sZC5sZW5ndGggLSAyOyArK2kpIG91dCArPSBpICUgMiA/IFwiIFwiIDogXCJcXHUwMGEwXCI7XG4gICAgb3V0ICs9IFwiIFwiO1xuICAgIHJldHVybiBvdXQ7XG4gIH1cblxuICAvLyBXb3JrIGFyb3VuZCBub25zZW5zZSBkaW1lbnNpb25zIGJlaW5nIHJlcG9ydGVkIGZvciBzdHJldGNoZXMgb2ZcbiAgLy8gcmlnaHQtdG8tbGVmdCB0ZXh0LlxuICBmdW5jdGlvbiBidWlsZFRva2VuQmFkQmlkaShpbm5lciwgb3JkZXIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oYnVpbGRlciwgdGV4dCwgc3R5bGUsIHN0YXJ0U3R5bGUsIGVuZFN0eWxlLCB0aXRsZSwgY3NzKSB7XG4gICAgICBzdHlsZSA9IHN0eWxlID8gc3R5bGUgKyBcIiBjbS1mb3JjZS1ib3JkZXJcIiA6IFwiY20tZm9yY2UtYm9yZGVyXCI7XG4gICAgICB2YXIgc3RhcnQgPSBidWlsZGVyLnBvcywgZW5kID0gc3RhcnQgKyB0ZXh0Lmxlbmd0aDtcbiAgICAgIGZvciAoOzspIHtcbiAgICAgICAgLy8gRmluZCB0aGUgcGFydCB0aGF0IG92ZXJsYXBzIHdpdGggdGhlIHN0YXJ0IG9mIHRoaXMgdGV4dFxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9yZGVyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgdmFyIHBhcnQgPSBvcmRlcltpXTtcbiAgICAgICAgICBpZiAocGFydC50byA+IHN0YXJ0ICYmIHBhcnQuZnJvbSA8PSBzdGFydCkgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnQudG8gPj0gZW5kKSByZXR1cm4gaW5uZXIoYnVpbGRlciwgdGV4dCwgc3R5bGUsIHN0YXJ0U3R5bGUsIGVuZFN0eWxlLCB0aXRsZSwgY3NzKTtcbiAgICAgICAgaW5uZXIoYnVpbGRlciwgdGV4dC5zbGljZSgwLCBwYXJ0LnRvIC0gc3RhcnQpLCBzdHlsZSwgc3RhcnRTdHlsZSwgbnVsbCwgdGl0bGUsIGNzcyk7XG4gICAgICAgIHN0YXJ0U3R5bGUgPSBudWxsO1xuICAgICAgICB0ZXh0ID0gdGV4dC5zbGljZShwYXJ0LnRvIC0gc3RhcnQpO1xuICAgICAgICBzdGFydCA9IHBhcnQudG87XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGJ1aWxkQ29sbGFwc2VkU3BhbihidWlsZGVyLCBzaXplLCBtYXJrZXIsIGlnbm9yZVdpZGdldCkge1xuICAgIHZhciB3aWRnZXQgPSAhaWdub3JlV2lkZ2V0ICYmIG1hcmtlci53aWRnZXROb2RlO1xuICAgIGlmICh3aWRnZXQpIGJ1aWxkZXIubWFwLnB1c2goYnVpbGRlci5wb3MsIGJ1aWxkZXIucG9zICsgc2l6ZSwgd2lkZ2V0KTtcbiAgICBpZiAoIWlnbm9yZVdpZGdldCAmJiBidWlsZGVyLmNtLmRpc3BsYXkuaW5wdXQubmVlZHNDb250ZW50QXR0cmlidXRlKSB7XG4gICAgICBpZiAoIXdpZGdldClcbiAgICAgICAgd2lkZ2V0ID0gYnVpbGRlci5jb250ZW50LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpKTtcbiAgICAgIHdpZGdldC5zZXRBdHRyaWJ1dGUoXCJjbS1tYXJrZXJcIiwgbWFya2VyLmlkKTtcbiAgICB9XG4gICAgaWYgKHdpZGdldCkge1xuICAgICAgYnVpbGRlci5jbS5kaXNwbGF5LmlucHV0LnNldFVuZWRpdGFibGUod2lkZ2V0KTtcbiAgICAgIGJ1aWxkZXIuY29udGVudC5hcHBlbmRDaGlsZCh3aWRnZXQpO1xuICAgIH1cbiAgICBidWlsZGVyLnBvcyArPSBzaXplO1xuICB9XG5cbiAgLy8gT3V0cHV0cyBhIG51bWJlciBvZiBzcGFucyB0byBtYWtlIHVwIGEgbGluZSwgdGFraW5nIGhpZ2hsaWdodGluZ1xuICAvLyBhbmQgbWFya2VkIHRleHQgaW50byBhY2NvdW50LlxuICBmdW5jdGlvbiBpbnNlcnRMaW5lQ29udGVudChsaW5lLCBidWlsZGVyLCBzdHlsZXMpIHtcbiAgICB2YXIgc3BhbnMgPSBsaW5lLm1hcmtlZFNwYW5zLCBhbGxUZXh0ID0gbGluZS50ZXh0LCBhdCA9IDA7XG4gICAgaWYgKCFzcGFucykge1xuICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBzdHlsZXMubGVuZ3RoOyBpKz0yKVxuICAgICAgICBidWlsZGVyLmFkZFRva2VuKGJ1aWxkZXIsIGFsbFRleHQuc2xpY2UoYXQsIGF0ID0gc3R5bGVzW2ldKSwgaW50ZXJwcmV0VG9rZW5TdHlsZShzdHlsZXNbaSsxXSwgYnVpbGRlci5jbS5vcHRpb25zKSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGxlbiA9IGFsbFRleHQubGVuZ3RoLCBwb3MgPSAwLCBpID0gMSwgdGV4dCA9IFwiXCIsIHN0eWxlLCBjc3M7XG4gICAgdmFyIG5leHRDaGFuZ2UgPSAwLCBzcGFuU3R5bGUsIHNwYW5FbmRTdHlsZSwgc3BhblN0YXJ0U3R5bGUsIHRpdGxlLCBjb2xsYXBzZWQ7XG4gICAgZm9yICg7Oykge1xuICAgICAgaWYgKG5leHRDaGFuZ2UgPT0gcG9zKSB7IC8vIFVwZGF0ZSBjdXJyZW50IG1hcmtlciBzZXRcbiAgICAgICAgc3BhblN0eWxlID0gc3BhbkVuZFN0eWxlID0gc3BhblN0YXJ0U3R5bGUgPSB0aXRsZSA9IGNzcyA9IFwiXCI7XG4gICAgICAgIGNvbGxhcHNlZCA9IG51bGw7IG5leHRDaGFuZ2UgPSBJbmZpbml0eTtcbiAgICAgICAgdmFyIGZvdW5kQm9va21hcmtzID0gW10sIGVuZFN0eWxlc1xuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHNwYW5zLmxlbmd0aDsgKytqKSB7XG4gICAgICAgICAgdmFyIHNwID0gc3BhbnNbal0sIG0gPSBzcC5tYXJrZXI7XG4gICAgICAgICAgaWYgKG0udHlwZSA9PSBcImJvb2ttYXJrXCIgJiYgc3AuZnJvbSA9PSBwb3MgJiYgbS53aWRnZXROb2RlKSB7XG4gICAgICAgICAgICBmb3VuZEJvb2ttYXJrcy5wdXNoKG0pO1xuICAgICAgICAgIH0gZWxzZSBpZiAoc3AuZnJvbSA8PSBwb3MgJiYgKHNwLnRvID09IG51bGwgfHwgc3AudG8gPiBwb3MgfHwgbS5jb2xsYXBzZWQgJiYgc3AudG8gPT0gcG9zICYmIHNwLmZyb20gPT0gcG9zKSkge1xuICAgICAgICAgICAgaWYgKHNwLnRvICE9IG51bGwgJiYgc3AudG8gIT0gcG9zICYmIG5leHRDaGFuZ2UgPiBzcC50bykge1xuICAgICAgICAgICAgICBuZXh0Q2hhbmdlID0gc3AudG87XG4gICAgICAgICAgICAgIHNwYW5FbmRTdHlsZSA9IFwiXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobS5jbGFzc05hbWUpIHNwYW5TdHlsZSArPSBcIiBcIiArIG0uY2xhc3NOYW1lO1xuICAgICAgICAgICAgaWYgKG0uY3NzKSBjc3MgPSAoY3NzID8gY3NzICsgXCI7XCIgOiBcIlwiKSArIG0uY3NzO1xuICAgICAgICAgICAgaWYgKG0uc3RhcnRTdHlsZSAmJiBzcC5mcm9tID09IHBvcykgc3BhblN0YXJ0U3R5bGUgKz0gXCIgXCIgKyBtLnN0YXJ0U3R5bGU7XG4gICAgICAgICAgICBpZiAobS5lbmRTdHlsZSAmJiBzcC50byA9PSBuZXh0Q2hhbmdlKSAoZW5kU3R5bGVzIHx8IChlbmRTdHlsZXMgPSBbXSkpLnB1c2gobS5lbmRTdHlsZSwgc3AudG8pXG4gICAgICAgICAgICBpZiAobS50aXRsZSAmJiAhdGl0bGUpIHRpdGxlID0gbS50aXRsZTtcbiAgICAgICAgICAgIGlmIChtLmNvbGxhcHNlZCAmJiAoIWNvbGxhcHNlZCB8fCBjb21wYXJlQ29sbGFwc2VkTWFya2Vycyhjb2xsYXBzZWQubWFya2VyLCBtKSA8IDApKVxuICAgICAgICAgICAgICBjb2xsYXBzZWQgPSBzcDtcbiAgICAgICAgICB9IGVsc2UgaWYgKHNwLmZyb20gPiBwb3MgJiYgbmV4dENoYW5nZSA+IHNwLmZyb20pIHtcbiAgICAgICAgICAgIG5leHRDaGFuZ2UgPSBzcC5mcm9tO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZW5kU3R5bGVzKSBmb3IgKHZhciBqID0gMDsgaiA8IGVuZFN0eWxlcy5sZW5ndGg7IGogKz0gMilcbiAgICAgICAgICBpZiAoZW5kU3R5bGVzW2ogKyAxXSA9PSBuZXh0Q2hhbmdlKSBzcGFuRW5kU3R5bGUgKz0gXCIgXCIgKyBlbmRTdHlsZXNbal1cblxuICAgICAgICBpZiAoIWNvbGxhcHNlZCB8fCBjb2xsYXBzZWQuZnJvbSA9PSBwb3MpIGZvciAodmFyIGogPSAwOyBqIDwgZm91bmRCb29rbWFya3MubGVuZ3RoOyArK2opXG4gICAgICAgICAgYnVpbGRDb2xsYXBzZWRTcGFuKGJ1aWxkZXIsIDAsIGZvdW5kQm9va21hcmtzW2pdKTtcbiAgICAgICAgaWYgKGNvbGxhcHNlZCAmJiAoY29sbGFwc2VkLmZyb20gfHwgMCkgPT0gcG9zKSB7XG4gICAgICAgICAgYnVpbGRDb2xsYXBzZWRTcGFuKGJ1aWxkZXIsIChjb2xsYXBzZWQudG8gPT0gbnVsbCA/IGxlbiArIDEgOiBjb2xsYXBzZWQudG8pIC0gcG9zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xsYXBzZWQubWFya2VyLCBjb2xsYXBzZWQuZnJvbSA9PSBudWxsKTtcbiAgICAgICAgICBpZiAoY29sbGFwc2VkLnRvID09IG51bGwpIHJldHVybjtcbiAgICAgICAgICBpZiAoY29sbGFwc2VkLnRvID09IHBvcykgY29sbGFwc2VkID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChwb3MgPj0gbGVuKSBicmVhaztcblxuICAgICAgdmFyIHVwdG8gPSBNYXRoLm1pbihsZW4sIG5leHRDaGFuZ2UpO1xuICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgaWYgKHRleHQpIHtcbiAgICAgICAgICB2YXIgZW5kID0gcG9zICsgdGV4dC5sZW5ndGg7XG4gICAgICAgICAgaWYgKCFjb2xsYXBzZWQpIHtcbiAgICAgICAgICAgIHZhciB0b2tlblRleHQgPSBlbmQgPiB1cHRvID8gdGV4dC5zbGljZSgwLCB1cHRvIC0gcG9zKSA6IHRleHQ7XG4gICAgICAgICAgICBidWlsZGVyLmFkZFRva2VuKGJ1aWxkZXIsIHRva2VuVGV4dCwgc3R5bGUgPyBzdHlsZSArIHNwYW5TdHlsZSA6IHNwYW5TdHlsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BhblN0YXJ0U3R5bGUsIHBvcyArIHRva2VuVGV4dC5sZW5ndGggPT0gbmV4dENoYW5nZSA/IHNwYW5FbmRTdHlsZSA6IFwiXCIsIHRpdGxlLCBjc3MpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoZW5kID49IHVwdG8pIHt0ZXh0ID0gdGV4dC5zbGljZSh1cHRvIC0gcG9zKTsgcG9zID0gdXB0bzsgYnJlYWs7fVxuICAgICAgICAgIHBvcyA9IGVuZDtcbiAgICAgICAgICBzcGFuU3RhcnRTdHlsZSA9IFwiXCI7XG4gICAgICAgIH1cbiAgICAgICAgdGV4dCA9IGFsbFRleHQuc2xpY2UoYXQsIGF0ID0gc3R5bGVzW2krK10pO1xuICAgICAgICBzdHlsZSA9IGludGVycHJldFRva2VuU3R5bGUoc3R5bGVzW2krK10sIGJ1aWxkZXIuY20ub3B0aW9ucyk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gRE9DVU1FTlQgREFUQSBTVFJVQ1RVUkVcblxuICAvLyBCeSBkZWZhdWx0LCB1cGRhdGVzIHRoYXQgc3RhcnQgYW5kIGVuZCBhdCB0aGUgYmVnaW5uaW5nIG9mIGEgbGluZVxuICAvLyBhcmUgdHJlYXRlZCBzcGVjaWFsbHksIGluIG9yZGVyIHRvIG1ha2UgdGhlIGFzc29jaWF0aW9uIG9mIGxpbmVcbiAgLy8gd2lkZ2V0cyBhbmQgbWFya2VyIGVsZW1lbnRzIHdpdGggdGhlIHRleHQgYmVoYXZlIG1vcmUgaW50dWl0aXZlLlxuICBmdW5jdGlvbiBpc1dob2xlTGluZVVwZGF0ZShkb2MsIGNoYW5nZSkge1xuICAgIHJldHVybiBjaGFuZ2UuZnJvbS5jaCA9PSAwICYmIGNoYW5nZS50by5jaCA9PSAwICYmIGxzdChjaGFuZ2UudGV4dCkgPT0gXCJcIiAmJlxuICAgICAgKCFkb2MuY20gfHwgZG9jLmNtLm9wdGlvbnMud2hvbGVMaW5lVXBkYXRlQmVmb3JlKTtcbiAgfVxuXG4gIC8vIFBlcmZvcm0gYSBjaGFuZ2Ugb24gdGhlIGRvY3VtZW50IGRhdGEgc3RydWN0dXJlLlxuICBmdW5jdGlvbiB1cGRhdGVEb2MoZG9jLCBjaGFuZ2UsIG1hcmtlZFNwYW5zLCBlc3RpbWF0ZUhlaWdodCkge1xuICAgIGZ1bmN0aW9uIHNwYW5zRm9yKG4pIHtyZXR1cm4gbWFya2VkU3BhbnMgPyBtYXJrZWRTcGFuc1tuXSA6IG51bGw7fVxuICAgIGZ1bmN0aW9uIHVwZGF0ZShsaW5lLCB0ZXh0LCBzcGFucykge1xuICAgICAgdXBkYXRlTGluZShsaW5lLCB0ZXh0LCBzcGFucywgZXN0aW1hdGVIZWlnaHQpO1xuICAgICAgc2lnbmFsTGF0ZXIobGluZSwgXCJjaGFuZ2VcIiwgbGluZSwgY2hhbmdlKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gbGluZXNGb3Ioc3RhcnQsIGVuZCkge1xuICAgICAgZm9yICh2YXIgaSA9IHN0YXJ0LCByZXN1bHQgPSBbXTsgaSA8IGVuZDsgKytpKVxuICAgICAgICByZXN1bHQucHVzaChuZXcgTGluZSh0ZXh0W2ldLCBzcGFuc0ZvcihpKSwgZXN0aW1hdGVIZWlnaHQpKTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgdmFyIGZyb20gPSBjaGFuZ2UuZnJvbSwgdG8gPSBjaGFuZ2UudG8sIHRleHQgPSBjaGFuZ2UudGV4dDtcbiAgICB2YXIgZmlyc3RMaW5lID0gZ2V0TGluZShkb2MsIGZyb20ubGluZSksIGxhc3RMaW5lID0gZ2V0TGluZShkb2MsIHRvLmxpbmUpO1xuICAgIHZhciBsYXN0VGV4dCA9IGxzdCh0ZXh0KSwgbGFzdFNwYW5zID0gc3BhbnNGb3IodGV4dC5sZW5ndGggLSAxKSwgbmxpbmVzID0gdG8ubGluZSAtIGZyb20ubGluZTtcblxuICAgIC8vIEFkanVzdCB0aGUgbGluZSBzdHJ1Y3R1cmVcbiAgICBpZiAoY2hhbmdlLmZ1bGwpIHtcbiAgICAgIGRvYy5pbnNlcnQoMCwgbGluZXNGb3IoMCwgdGV4dC5sZW5ndGgpKTtcbiAgICAgIGRvYy5yZW1vdmUodGV4dC5sZW5ndGgsIGRvYy5zaXplIC0gdGV4dC5sZW5ndGgpO1xuICAgIH0gZWxzZSBpZiAoaXNXaG9sZUxpbmVVcGRhdGUoZG9jLCBjaGFuZ2UpKSB7XG4gICAgICAvLyBUaGlzIGlzIGEgd2hvbGUtbGluZSByZXBsYWNlLiBUcmVhdGVkIHNwZWNpYWxseSB0byBtYWtlXG4gICAgICAvLyBzdXJlIGxpbmUgb2JqZWN0cyBtb3ZlIHRoZSB3YXkgdGhleSBhcmUgc3VwcG9zZWQgdG8uXG4gICAgICB2YXIgYWRkZWQgPSBsaW5lc0ZvcigwLCB0ZXh0Lmxlbmd0aCAtIDEpO1xuICAgICAgdXBkYXRlKGxhc3RMaW5lLCBsYXN0TGluZS50ZXh0LCBsYXN0U3BhbnMpO1xuICAgICAgaWYgKG5saW5lcykgZG9jLnJlbW92ZShmcm9tLmxpbmUsIG5saW5lcyk7XG4gICAgICBpZiAoYWRkZWQubGVuZ3RoKSBkb2MuaW5zZXJ0KGZyb20ubGluZSwgYWRkZWQpO1xuICAgIH0gZWxzZSBpZiAoZmlyc3RMaW5lID09IGxhc3RMaW5lKSB7XG4gICAgICBpZiAodGV4dC5sZW5ndGggPT0gMSkge1xuICAgICAgICB1cGRhdGUoZmlyc3RMaW5lLCBmaXJzdExpbmUudGV4dC5zbGljZSgwLCBmcm9tLmNoKSArIGxhc3RUZXh0ICsgZmlyc3RMaW5lLnRleHQuc2xpY2UodG8uY2gpLCBsYXN0U3BhbnMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGFkZGVkID0gbGluZXNGb3IoMSwgdGV4dC5sZW5ndGggLSAxKTtcbiAgICAgICAgYWRkZWQucHVzaChuZXcgTGluZShsYXN0VGV4dCArIGZpcnN0TGluZS50ZXh0LnNsaWNlKHRvLmNoKSwgbGFzdFNwYW5zLCBlc3RpbWF0ZUhlaWdodCkpO1xuICAgICAgICB1cGRhdGUoZmlyc3RMaW5lLCBmaXJzdExpbmUudGV4dC5zbGljZSgwLCBmcm9tLmNoKSArIHRleHRbMF0sIHNwYW5zRm9yKDApKTtcbiAgICAgICAgZG9jLmluc2VydChmcm9tLmxpbmUgKyAxLCBhZGRlZCk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0ZXh0Lmxlbmd0aCA9PSAxKSB7XG4gICAgICB1cGRhdGUoZmlyc3RMaW5lLCBmaXJzdExpbmUudGV4dC5zbGljZSgwLCBmcm9tLmNoKSArIHRleHRbMF0gKyBsYXN0TGluZS50ZXh0LnNsaWNlKHRvLmNoKSwgc3BhbnNGb3IoMCkpO1xuICAgICAgZG9jLnJlbW92ZShmcm9tLmxpbmUgKyAxLCBubGluZXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICB1cGRhdGUoZmlyc3RMaW5lLCBmaXJzdExpbmUudGV4dC5zbGljZSgwLCBmcm9tLmNoKSArIHRleHRbMF0sIHNwYW5zRm9yKDApKTtcbiAgICAgIHVwZGF0ZShsYXN0TGluZSwgbGFzdFRleHQgKyBsYXN0TGluZS50ZXh0LnNsaWNlKHRvLmNoKSwgbGFzdFNwYW5zKTtcbiAgICAgIHZhciBhZGRlZCA9IGxpbmVzRm9yKDEsIHRleHQubGVuZ3RoIC0gMSk7XG4gICAgICBpZiAobmxpbmVzID4gMSkgZG9jLnJlbW92ZShmcm9tLmxpbmUgKyAxLCBubGluZXMgLSAxKTtcbiAgICAgIGRvYy5pbnNlcnQoZnJvbS5saW5lICsgMSwgYWRkZWQpO1xuICAgIH1cblxuICAgIHNpZ25hbExhdGVyKGRvYywgXCJjaGFuZ2VcIiwgZG9jLCBjaGFuZ2UpO1xuICB9XG5cbiAgLy8gVGhlIGRvY3VtZW50IGlzIHJlcHJlc2VudGVkIGFzIGEgQlRyZWUgY29uc2lzdGluZyBvZiBsZWF2ZXMsIHdpdGhcbiAgLy8gY2h1bmsgb2YgbGluZXMgaW4gdGhlbSwgYW5kIGJyYW5jaGVzLCB3aXRoIHVwIHRvIHRlbiBsZWF2ZXMgb3JcbiAgLy8gb3RoZXIgYnJhbmNoIG5vZGVzIGJlbG93IHRoZW0uIFRoZSB0b3Agbm9kZSBpcyBhbHdheXMgYSBicmFuY2hcbiAgLy8gbm9kZSwgYW5kIGlzIHRoZSBkb2N1bWVudCBvYmplY3QgaXRzZWxmIChtZWFuaW5nIGl0IGhhc1xuICAvLyBhZGRpdGlvbmFsIG1ldGhvZHMgYW5kIHByb3BlcnRpZXMpLlxuICAvL1xuICAvLyBBbGwgbm9kZXMgaGF2ZSBwYXJlbnQgbGlua3MuIFRoZSB0cmVlIGlzIHVzZWQgYm90aCB0byBnbyBmcm9tXG4gIC8vIGxpbmUgbnVtYmVycyB0byBsaW5lIG9iamVjdHMsIGFuZCB0byBnbyBmcm9tIG9iamVjdHMgdG8gbnVtYmVycy5cbiAgLy8gSXQgYWxzbyBpbmRleGVzIGJ5IGhlaWdodCwgYW5kIGlzIHVzZWQgdG8gY29udmVydCBiZXR3ZWVuIGhlaWdodFxuICAvLyBhbmQgbGluZSBvYmplY3QsIGFuZCB0byBmaW5kIHRoZSB0b3RhbCBoZWlnaHQgb2YgdGhlIGRvY3VtZW50LlxuICAvL1xuICAvLyBTZWUgYWxzbyBodHRwOi8vbWFyaWpuaGF2ZXJiZWtlLm5sL2Jsb2cvY29kZW1pcnJvci1saW5lLXRyZWUuaHRtbFxuXG4gIGZ1bmN0aW9uIExlYWZDaHVuayhsaW5lcykge1xuICAgIHRoaXMubGluZXMgPSBsaW5lcztcbiAgICB0aGlzLnBhcmVudCA9IG51bGw7XG4gICAgZm9yICh2YXIgaSA9IDAsIGhlaWdodCA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7ICsraSkge1xuICAgICAgbGluZXNbaV0ucGFyZW50ID0gdGhpcztcbiAgICAgIGhlaWdodCArPSBsaW5lc1tpXS5oZWlnaHQ7XG4gICAgfVxuICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICB9XG5cbiAgTGVhZkNodW5rLnByb3RvdHlwZSA9IHtcbiAgICBjaHVua1NpemU6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy5saW5lcy5sZW5ndGg7IH0sXG4gICAgLy8gUmVtb3ZlIHRoZSBuIGxpbmVzIGF0IG9mZnNldCAnYXQnLlxuICAgIHJlbW92ZUlubmVyOiBmdW5jdGlvbihhdCwgbikge1xuICAgICAgZm9yICh2YXIgaSA9IGF0LCBlID0gYXQgKyBuOyBpIDwgZTsgKytpKSB7XG4gICAgICAgIHZhciBsaW5lID0gdGhpcy5saW5lc1tpXTtcbiAgICAgICAgdGhpcy5oZWlnaHQgLT0gbGluZS5oZWlnaHQ7XG4gICAgICAgIGNsZWFuVXBMaW5lKGxpbmUpO1xuICAgICAgICBzaWduYWxMYXRlcihsaW5lLCBcImRlbGV0ZVwiKTtcbiAgICAgIH1cbiAgICAgIHRoaXMubGluZXMuc3BsaWNlKGF0LCBuKTtcbiAgICB9LFxuICAgIC8vIEhlbHBlciB1c2VkIHRvIGNvbGxhcHNlIGEgc21hbGwgYnJhbmNoIGludG8gYSBzaW5nbGUgbGVhZi5cbiAgICBjb2xsYXBzZTogZnVuY3Rpb24obGluZXMpIHtcbiAgICAgIGxpbmVzLnB1c2guYXBwbHkobGluZXMsIHRoaXMubGluZXMpO1xuICAgIH0sXG4gICAgLy8gSW5zZXJ0IHRoZSBnaXZlbiBhcnJheSBvZiBsaW5lcyBhdCBvZmZzZXQgJ2F0JywgY291bnQgdGhlbSBhc1xuICAgIC8vIGhhdmluZyB0aGUgZ2l2ZW4gaGVpZ2h0LlxuICAgIGluc2VydElubmVyOiBmdW5jdGlvbihhdCwgbGluZXMsIGhlaWdodCkge1xuICAgICAgdGhpcy5oZWlnaHQgKz0gaGVpZ2h0O1xuICAgICAgdGhpcy5saW5lcyA9IHRoaXMubGluZXMuc2xpY2UoMCwgYXQpLmNvbmNhdChsaW5lcykuY29uY2F0KHRoaXMubGluZXMuc2xpY2UoYXQpKTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyArK2kpIGxpbmVzW2ldLnBhcmVudCA9IHRoaXM7XG4gICAgfSxcbiAgICAvLyBVc2VkIHRvIGl0ZXJhdGUgb3ZlciBhIHBhcnQgb2YgdGhlIHRyZWUuXG4gICAgaXRlck46IGZ1bmN0aW9uKGF0LCBuLCBvcCkge1xuICAgICAgZm9yICh2YXIgZSA9IGF0ICsgbjsgYXQgPCBlOyArK2F0KVxuICAgICAgICBpZiAob3AodGhpcy5saW5lc1thdF0pKSByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH07XG5cbiAgZnVuY3Rpb24gQnJhbmNoQ2h1bmsoY2hpbGRyZW4pIHtcbiAgICB0aGlzLmNoaWxkcmVuID0gY2hpbGRyZW47XG4gICAgdmFyIHNpemUgPSAwLCBoZWlnaHQgPSAwO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyArK2kpIHtcbiAgICAgIHZhciBjaCA9IGNoaWxkcmVuW2ldO1xuICAgICAgc2l6ZSArPSBjaC5jaHVua1NpemUoKTsgaGVpZ2h0ICs9IGNoLmhlaWdodDtcbiAgICAgIGNoLnBhcmVudCA9IHRoaXM7XG4gICAgfVxuICAgIHRoaXMuc2l6ZSA9IHNpemU7XG4gICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgdGhpcy5wYXJlbnQgPSBudWxsO1xuICB9XG5cbiAgQnJhbmNoQ2h1bmsucHJvdG90eXBlID0ge1xuICAgIGNodW5rU2l6ZTogZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzLnNpemU7IH0sXG4gICAgcmVtb3ZlSW5uZXI6IGZ1bmN0aW9uKGF0LCBuKSB7XG4gICAgICB0aGlzLnNpemUgLT0gbjtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5jaGlsZHJlbi5sZW5ndGg7ICsraSkge1xuICAgICAgICB2YXIgY2hpbGQgPSB0aGlzLmNoaWxkcmVuW2ldLCBzeiA9IGNoaWxkLmNodW5rU2l6ZSgpO1xuICAgICAgICBpZiAoYXQgPCBzeikge1xuICAgICAgICAgIHZhciBybSA9IE1hdGgubWluKG4sIHN6IC0gYXQpLCBvbGRIZWlnaHQgPSBjaGlsZC5oZWlnaHQ7XG4gICAgICAgICAgY2hpbGQucmVtb3ZlSW5uZXIoYXQsIHJtKTtcbiAgICAgICAgICB0aGlzLmhlaWdodCAtPSBvbGRIZWlnaHQgLSBjaGlsZC5oZWlnaHQ7XG4gICAgICAgICAgaWYgKHN6ID09IHJtKSB7IHRoaXMuY2hpbGRyZW4uc3BsaWNlKGktLSwgMSk7IGNoaWxkLnBhcmVudCA9IG51bGw7IH1cbiAgICAgICAgICBpZiAoKG4gLT0gcm0pID09IDApIGJyZWFrO1xuICAgICAgICAgIGF0ID0gMDtcbiAgICAgICAgfSBlbHNlIGF0IC09IHN6O1xuICAgICAgfVxuICAgICAgLy8gSWYgdGhlIHJlc3VsdCBpcyBzbWFsbGVyIHRoYW4gMjUgbGluZXMsIGVuc3VyZSB0aGF0IGl0IGlzIGFcbiAgICAgIC8vIHNpbmdsZSBsZWFmIG5vZGUuXG4gICAgICBpZiAodGhpcy5zaXplIC0gbiA8IDI1ICYmXG4gICAgICAgICAgKHRoaXMuY2hpbGRyZW4ubGVuZ3RoID4gMSB8fCAhKHRoaXMuY2hpbGRyZW5bMF0gaW5zdGFuY2VvZiBMZWFmQ2h1bmspKSkge1xuICAgICAgICB2YXIgbGluZXMgPSBbXTtcbiAgICAgICAgdGhpcy5jb2xsYXBzZShsaW5lcyk7XG4gICAgICAgIHRoaXMuY2hpbGRyZW4gPSBbbmV3IExlYWZDaHVuayhsaW5lcyldO1xuICAgICAgICB0aGlzLmNoaWxkcmVuWzBdLnBhcmVudCA9IHRoaXM7XG4gICAgICB9XG4gICAgfSxcbiAgICBjb2xsYXBzZTogZnVuY3Rpb24obGluZXMpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5jaGlsZHJlbi5sZW5ndGg7ICsraSkgdGhpcy5jaGlsZHJlbltpXS5jb2xsYXBzZShsaW5lcyk7XG4gICAgfSxcbiAgICBpbnNlcnRJbm5lcjogZnVuY3Rpb24oYXQsIGxpbmVzLCBoZWlnaHQpIHtcbiAgICAgIHRoaXMuc2l6ZSArPSBsaW5lcy5sZW5ndGg7XG4gICAgICB0aGlzLmhlaWdodCArPSBoZWlnaHQ7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuY2hpbGRyZW4ubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIGNoaWxkID0gdGhpcy5jaGlsZHJlbltpXSwgc3ogPSBjaGlsZC5jaHVua1NpemUoKTtcbiAgICAgICAgaWYgKGF0IDw9IHN6KSB7XG4gICAgICAgICAgY2hpbGQuaW5zZXJ0SW5uZXIoYXQsIGxpbmVzLCBoZWlnaHQpO1xuICAgICAgICAgIGlmIChjaGlsZC5saW5lcyAmJiBjaGlsZC5saW5lcy5sZW5ndGggPiA1MCkge1xuICAgICAgICAgICAgd2hpbGUgKGNoaWxkLmxpbmVzLmxlbmd0aCA+IDUwKSB7XG4gICAgICAgICAgICAgIHZhciBzcGlsbGVkID0gY2hpbGQubGluZXMuc3BsaWNlKGNoaWxkLmxpbmVzLmxlbmd0aCAtIDI1LCAyNSk7XG4gICAgICAgICAgICAgIHZhciBuZXdsZWFmID0gbmV3IExlYWZDaHVuayhzcGlsbGVkKTtcbiAgICAgICAgICAgICAgY2hpbGQuaGVpZ2h0IC09IG5ld2xlYWYuaGVpZ2h0O1xuICAgICAgICAgICAgICB0aGlzLmNoaWxkcmVuLnNwbGljZShpICsgMSwgMCwgbmV3bGVhZik7XG4gICAgICAgICAgICAgIG5ld2xlYWYucGFyZW50ID0gdGhpcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubWF5YmVTcGlsbCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBhdCAtPSBzejtcbiAgICAgIH1cbiAgICB9LFxuICAgIC8vIFdoZW4gYSBub2RlIGhhcyBncm93biwgY2hlY2sgd2hldGhlciBpdCBzaG91bGQgYmUgc3BsaXQuXG4gICAgbWF5YmVTcGlsbDogZnVuY3Rpb24oKSB7XG4gICAgICBpZiAodGhpcy5jaGlsZHJlbi5sZW5ndGggPD0gMTApIHJldHVybjtcbiAgICAgIHZhciBtZSA9IHRoaXM7XG4gICAgICBkbyB7XG4gICAgICAgIHZhciBzcGlsbGVkID0gbWUuY2hpbGRyZW4uc3BsaWNlKG1lLmNoaWxkcmVuLmxlbmd0aCAtIDUsIDUpO1xuICAgICAgICB2YXIgc2libGluZyA9IG5ldyBCcmFuY2hDaHVuayhzcGlsbGVkKTtcbiAgICAgICAgaWYgKCFtZS5wYXJlbnQpIHsgLy8gQmVjb21lIHRoZSBwYXJlbnQgbm9kZVxuICAgICAgICAgIHZhciBjb3B5ID0gbmV3IEJyYW5jaENodW5rKG1lLmNoaWxkcmVuKTtcbiAgICAgICAgICBjb3B5LnBhcmVudCA9IG1lO1xuICAgICAgICAgIG1lLmNoaWxkcmVuID0gW2NvcHksIHNpYmxpbmddO1xuICAgICAgICAgIG1lID0gY29weTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBtZS5zaXplIC09IHNpYmxpbmcuc2l6ZTtcbiAgICAgICAgICBtZS5oZWlnaHQgLT0gc2libGluZy5oZWlnaHQ7XG4gICAgICAgICAgdmFyIG15SW5kZXggPSBpbmRleE9mKG1lLnBhcmVudC5jaGlsZHJlbiwgbWUpO1xuICAgICAgICAgIG1lLnBhcmVudC5jaGlsZHJlbi5zcGxpY2UobXlJbmRleCArIDEsIDAsIHNpYmxpbmcpO1xuICAgICAgICB9XG4gICAgICAgIHNpYmxpbmcucGFyZW50ID0gbWUucGFyZW50O1xuICAgICAgfSB3aGlsZSAobWUuY2hpbGRyZW4ubGVuZ3RoID4gMTApO1xuICAgICAgbWUucGFyZW50Lm1heWJlU3BpbGwoKTtcbiAgICB9LFxuICAgIGl0ZXJOOiBmdW5jdGlvbihhdCwgbiwgb3ApIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5jaGlsZHJlbi5sZW5ndGg7ICsraSkge1xuICAgICAgICB2YXIgY2hpbGQgPSB0aGlzLmNoaWxkcmVuW2ldLCBzeiA9IGNoaWxkLmNodW5rU2l6ZSgpO1xuICAgICAgICBpZiAoYXQgPCBzeikge1xuICAgICAgICAgIHZhciB1c2VkID0gTWF0aC5taW4obiwgc3ogLSBhdCk7XG4gICAgICAgICAgaWYgKGNoaWxkLml0ZXJOKGF0LCB1c2VkLCBvcCkpIHJldHVybiB0cnVlO1xuICAgICAgICAgIGlmICgobiAtPSB1c2VkKSA9PSAwKSBicmVhaztcbiAgICAgICAgICBhdCA9IDA7XG4gICAgICAgIH0gZWxzZSBhdCAtPSBzejtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgdmFyIG5leHREb2NJZCA9IDA7XG4gIHZhciBEb2MgPSBDb2RlTWlycm9yLkRvYyA9IGZ1bmN0aW9uKHRleHQsIG1vZGUsIGZpcnN0TGluZSwgbGluZVNlcCkge1xuICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBEb2MpKSByZXR1cm4gbmV3IERvYyh0ZXh0LCBtb2RlLCBmaXJzdExpbmUsIGxpbmVTZXApO1xuICAgIGlmIChmaXJzdExpbmUgPT0gbnVsbCkgZmlyc3RMaW5lID0gMDtcblxuICAgIEJyYW5jaENodW5rLmNhbGwodGhpcywgW25ldyBMZWFmQ2h1bmsoW25ldyBMaW5lKFwiXCIsIG51bGwpXSldKTtcbiAgICB0aGlzLmZpcnN0ID0gZmlyc3RMaW5lO1xuICAgIHRoaXMuc2Nyb2xsVG9wID0gdGhpcy5zY3JvbGxMZWZ0ID0gMDtcbiAgICB0aGlzLmNhbnRFZGl0ID0gZmFsc2U7XG4gICAgdGhpcy5jbGVhbkdlbmVyYXRpb24gPSAxO1xuICAgIHRoaXMuZnJvbnRpZXIgPSBmaXJzdExpbmU7XG4gICAgdmFyIHN0YXJ0ID0gUG9zKGZpcnN0TGluZSwgMCk7XG4gICAgdGhpcy5zZWwgPSBzaW1wbGVTZWxlY3Rpb24oc3RhcnQpO1xuICAgIHRoaXMuaGlzdG9yeSA9IG5ldyBIaXN0b3J5KG51bGwpO1xuICAgIHRoaXMuaWQgPSArK25leHREb2NJZDtcbiAgICB0aGlzLm1vZGVPcHRpb24gPSBtb2RlO1xuICAgIHRoaXMubGluZVNlcCA9IGxpbmVTZXA7XG4gICAgdGhpcy5leHRlbmQgPSBmYWxzZTtcblxuICAgIGlmICh0eXBlb2YgdGV4dCA9PSBcInN0cmluZ1wiKSB0ZXh0ID0gdGhpcy5zcGxpdExpbmVzKHRleHQpO1xuICAgIHVwZGF0ZURvYyh0aGlzLCB7ZnJvbTogc3RhcnQsIHRvOiBzdGFydCwgdGV4dDogdGV4dH0pO1xuICAgIHNldFNlbGVjdGlvbih0aGlzLCBzaW1wbGVTZWxlY3Rpb24oc3RhcnQpLCBzZWxfZG9udFNjcm9sbCk7XG4gIH07XG5cbiAgRG9jLnByb3RvdHlwZSA9IGNyZWF0ZU9iaihCcmFuY2hDaHVuay5wcm90b3R5cGUsIHtcbiAgICBjb25zdHJ1Y3RvcjogRG9jLFxuICAgIC8vIEl0ZXJhdGUgb3ZlciB0aGUgZG9jdW1lbnQuIFN1cHBvcnRzIHR3byBmb3JtcyAtLSB3aXRoIG9ubHkgb25lXG4gICAgLy8gYXJndW1lbnQsIGl0IGNhbGxzIHRoYXQgZm9yIGVhY2ggbGluZSBpbiB0aGUgZG9jdW1lbnQuIFdpdGhcbiAgICAvLyB0aHJlZSwgaXQgaXRlcmF0ZXMgb3ZlciB0aGUgcmFuZ2UgZ2l2ZW4gYnkgdGhlIGZpcnN0IHR3byAod2l0aFxuICAgIC8vIHRoZSBzZWNvbmQgYmVpbmcgbm9uLWluY2x1c2l2ZSkuXG4gICAgaXRlcjogZnVuY3Rpb24oZnJvbSwgdG8sIG9wKSB7XG4gICAgICBpZiAob3ApIHRoaXMuaXRlck4oZnJvbSAtIHRoaXMuZmlyc3QsIHRvIC0gZnJvbSwgb3ApO1xuICAgICAgZWxzZSB0aGlzLml0ZXJOKHRoaXMuZmlyc3QsIHRoaXMuZmlyc3QgKyB0aGlzLnNpemUsIGZyb20pO1xuICAgIH0sXG5cbiAgICAvLyBOb24tcHVibGljIGludGVyZmFjZSBmb3IgYWRkaW5nIGFuZCByZW1vdmluZyBsaW5lcy5cbiAgICBpbnNlcnQ6IGZ1bmN0aW9uKGF0LCBsaW5lcykge1xuICAgICAgdmFyIGhlaWdodCA9IDA7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgKytpKSBoZWlnaHQgKz0gbGluZXNbaV0uaGVpZ2h0O1xuICAgICAgdGhpcy5pbnNlcnRJbm5lcihhdCAtIHRoaXMuZmlyc3QsIGxpbmVzLCBoZWlnaHQpO1xuICAgIH0sXG4gICAgcmVtb3ZlOiBmdW5jdGlvbihhdCwgbikgeyB0aGlzLnJlbW92ZUlubmVyKGF0IC0gdGhpcy5maXJzdCwgbik7IH0sXG5cbiAgICAvLyBGcm9tIGhlcmUsIHRoZSBtZXRob2RzIGFyZSBwYXJ0IG9mIHRoZSBwdWJsaWMgaW50ZXJmYWNlLiBNb3N0XG4gICAgLy8gYXJlIGFsc28gYXZhaWxhYmxlIGZyb20gQ29kZU1pcnJvciAoZWRpdG9yKSBpbnN0YW5jZXMuXG5cbiAgICBnZXRWYWx1ZTogZnVuY3Rpb24obGluZVNlcCkge1xuICAgICAgdmFyIGxpbmVzID0gZ2V0TGluZXModGhpcywgdGhpcy5maXJzdCwgdGhpcy5maXJzdCArIHRoaXMuc2l6ZSk7XG4gICAgICBpZiAobGluZVNlcCA9PT0gZmFsc2UpIHJldHVybiBsaW5lcztcbiAgICAgIHJldHVybiBsaW5lcy5qb2luKGxpbmVTZXAgfHwgdGhpcy5saW5lU2VwYXJhdG9yKCkpO1xuICAgIH0sXG4gICAgc2V0VmFsdWU6IGRvY01ldGhvZE9wKGZ1bmN0aW9uKGNvZGUpIHtcbiAgICAgIHZhciB0b3AgPSBQb3ModGhpcy5maXJzdCwgMCksIGxhc3QgPSB0aGlzLmZpcnN0ICsgdGhpcy5zaXplIC0gMTtcbiAgICAgIG1ha2VDaGFuZ2UodGhpcywge2Zyb206IHRvcCwgdG86IFBvcyhsYXN0LCBnZXRMaW5lKHRoaXMsIGxhc3QpLnRleHQubGVuZ3RoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IHRoaXMuc3BsaXRMaW5lcyhjb2RlKSwgb3JpZ2luOiBcInNldFZhbHVlXCIsIGZ1bGw6IHRydWV9LCB0cnVlKTtcbiAgICAgIHNldFNlbGVjdGlvbih0aGlzLCBzaW1wbGVTZWxlY3Rpb24odG9wKSk7XG4gICAgfSksXG4gICAgcmVwbGFjZVJhbmdlOiBmdW5jdGlvbihjb2RlLCBmcm9tLCB0bywgb3JpZ2luKSB7XG4gICAgICBmcm9tID0gY2xpcFBvcyh0aGlzLCBmcm9tKTtcbiAgICAgIHRvID0gdG8gPyBjbGlwUG9zKHRoaXMsIHRvKSA6IGZyb207XG4gICAgICByZXBsYWNlUmFuZ2UodGhpcywgY29kZSwgZnJvbSwgdG8sIG9yaWdpbik7XG4gICAgfSxcbiAgICBnZXRSYW5nZTogZnVuY3Rpb24oZnJvbSwgdG8sIGxpbmVTZXApIHtcbiAgICAgIHZhciBsaW5lcyA9IGdldEJldHdlZW4odGhpcywgY2xpcFBvcyh0aGlzLCBmcm9tKSwgY2xpcFBvcyh0aGlzLCB0bykpO1xuICAgICAgaWYgKGxpbmVTZXAgPT09IGZhbHNlKSByZXR1cm4gbGluZXM7XG4gICAgICByZXR1cm4gbGluZXMuam9pbihsaW5lU2VwIHx8IHRoaXMubGluZVNlcGFyYXRvcigpKTtcbiAgICB9LFxuXG4gICAgZ2V0TGluZTogZnVuY3Rpb24obGluZSkge3ZhciBsID0gdGhpcy5nZXRMaW5lSGFuZGxlKGxpbmUpOyByZXR1cm4gbCAmJiBsLnRleHQ7fSxcblxuICAgIGdldExpbmVIYW5kbGU6IGZ1bmN0aW9uKGxpbmUpIHtpZiAoaXNMaW5lKHRoaXMsIGxpbmUpKSByZXR1cm4gZ2V0TGluZSh0aGlzLCBsaW5lKTt9LFxuICAgIGdldExpbmVOdW1iZXI6IGZ1bmN0aW9uKGxpbmUpIHtyZXR1cm4gbGluZU5vKGxpbmUpO30sXG5cbiAgICBnZXRMaW5lSGFuZGxlVmlzdWFsU3RhcnQ6IGZ1bmN0aW9uKGxpbmUpIHtcbiAgICAgIGlmICh0eXBlb2YgbGluZSA9PSBcIm51bWJlclwiKSBsaW5lID0gZ2V0TGluZSh0aGlzLCBsaW5lKTtcbiAgICAgIHJldHVybiB2aXN1YWxMaW5lKGxpbmUpO1xuICAgIH0sXG5cbiAgICBsaW5lQ291bnQ6IGZ1bmN0aW9uKCkge3JldHVybiB0aGlzLnNpemU7fSxcbiAgICBmaXJzdExpbmU6IGZ1bmN0aW9uKCkge3JldHVybiB0aGlzLmZpcnN0O30sXG4gICAgbGFzdExpbmU6IGZ1bmN0aW9uKCkge3JldHVybiB0aGlzLmZpcnN0ICsgdGhpcy5zaXplIC0gMTt9LFxuXG4gICAgY2xpcFBvczogZnVuY3Rpb24ocG9zKSB7cmV0dXJuIGNsaXBQb3ModGhpcywgcG9zKTt9LFxuXG4gICAgZ2V0Q3Vyc29yOiBmdW5jdGlvbihzdGFydCkge1xuICAgICAgdmFyIHJhbmdlID0gdGhpcy5zZWwucHJpbWFyeSgpLCBwb3M7XG4gICAgICBpZiAoc3RhcnQgPT0gbnVsbCB8fCBzdGFydCA9PSBcImhlYWRcIikgcG9zID0gcmFuZ2UuaGVhZDtcbiAgICAgIGVsc2UgaWYgKHN0YXJ0ID09IFwiYW5jaG9yXCIpIHBvcyA9IHJhbmdlLmFuY2hvcjtcbiAgICAgIGVsc2UgaWYgKHN0YXJ0ID09IFwiZW5kXCIgfHwgc3RhcnQgPT0gXCJ0b1wiIHx8IHN0YXJ0ID09PSBmYWxzZSkgcG9zID0gcmFuZ2UudG8oKTtcbiAgICAgIGVsc2UgcG9zID0gcmFuZ2UuZnJvbSgpO1xuICAgICAgcmV0dXJuIHBvcztcbiAgICB9LFxuICAgIGxpc3RTZWxlY3Rpb25zOiBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXMuc2VsLnJhbmdlczsgfSxcbiAgICBzb21ldGhpbmdTZWxlY3RlZDogZnVuY3Rpb24oKSB7cmV0dXJuIHRoaXMuc2VsLnNvbWV0aGluZ1NlbGVjdGVkKCk7fSxcblxuICAgIHNldEN1cnNvcjogZG9jTWV0aG9kT3AoZnVuY3Rpb24obGluZSwgY2gsIG9wdGlvbnMpIHtcbiAgICAgIHNldFNpbXBsZVNlbGVjdGlvbih0aGlzLCBjbGlwUG9zKHRoaXMsIHR5cGVvZiBsaW5lID09IFwibnVtYmVyXCIgPyBQb3MobGluZSwgY2ggfHwgMCkgOiBsaW5lKSwgbnVsbCwgb3B0aW9ucyk7XG4gICAgfSksXG4gICAgc2V0U2VsZWN0aW9uOiBkb2NNZXRob2RPcChmdW5jdGlvbihhbmNob3IsIGhlYWQsIG9wdGlvbnMpIHtcbiAgICAgIHNldFNpbXBsZVNlbGVjdGlvbih0aGlzLCBjbGlwUG9zKHRoaXMsIGFuY2hvciksIGNsaXBQb3ModGhpcywgaGVhZCB8fCBhbmNob3IpLCBvcHRpb25zKTtcbiAgICB9KSxcbiAgICBleHRlbmRTZWxlY3Rpb246IGRvY01ldGhvZE9wKGZ1bmN0aW9uKGhlYWQsIG90aGVyLCBvcHRpb25zKSB7XG4gICAgICBleHRlbmRTZWxlY3Rpb24odGhpcywgY2xpcFBvcyh0aGlzLCBoZWFkKSwgb3RoZXIgJiYgY2xpcFBvcyh0aGlzLCBvdGhlciksIG9wdGlvbnMpO1xuICAgIH0pLFxuICAgIGV4dGVuZFNlbGVjdGlvbnM6IGRvY01ldGhvZE9wKGZ1bmN0aW9uKGhlYWRzLCBvcHRpb25zKSB7XG4gICAgICBleHRlbmRTZWxlY3Rpb25zKHRoaXMsIGNsaXBQb3NBcnJheSh0aGlzLCBoZWFkcyksIG9wdGlvbnMpO1xuICAgIH0pLFxuICAgIGV4dGVuZFNlbGVjdGlvbnNCeTogZG9jTWV0aG9kT3AoZnVuY3Rpb24oZiwgb3B0aW9ucykge1xuICAgICAgdmFyIGhlYWRzID0gbWFwKHRoaXMuc2VsLnJhbmdlcywgZik7XG4gICAgICBleHRlbmRTZWxlY3Rpb25zKHRoaXMsIGNsaXBQb3NBcnJheSh0aGlzLCBoZWFkcyksIG9wdGlvbnMpO1xuICAgIH0pLFxuICAgIHNldFNlbGVjdGlvbnM6IGRvY01ldGhvZE9wKGZ1bmN0aW9uKHJhbmdlcywgcHJpbWFyeSwgb3B0aW9ucykge1xuICAgICAgaWYgKCFyYW5nZXMubGVuZ3RoKSByZXR1cm47XG4gICAgICBmb3IgKHZhciBpID0gMCwgb3V0ID0gW107IGkgPCByYW5nZXMubGVuZ3RoOyBpKyspXG4gICAgICAgIG91dFtpXSA9IG5ldyBSYW5nZShjbGlwUG9zKHRoaXMsIHJhbmdlc1tpXS5hbmNob3IpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpcFBvcyh0aGlzLCByYW5nZXNbaV0uaGVhZCkpO1xuICAgICAgaWYgKHByaW1hcnkgPT0gbnVsbCkgcHJpbWFyeSA9IE1hdGgubWluKHJhbmdlcy5sZW5ndGggLSAxLCB0aGlzLnNlbC5wcmltSW5kZXgpO1xuICAgICAgc2V0U2VsZWN0aW9uKHRoaXMsIG5vcm1hbGl6ZVNlbGVjdGlvbihvdXQsIHByaW1hcnkpLCBvcHRpb25zKTtcbiAgICB9KSxcbiAgICBhZGRTZWxlY3Rpb246IGRvY01ldGhvZE9wKGZ1bmN0aW9uKGFuY2hvciwgaGVhZCwgb3B0aW9ucykge1xuICAgICAgdmFyIHJhbmdlcyA9IHRoaXMuc2VsLnJhbmdlcy5zbGljZSgwKTtcbiAgICAgIHJhbmdlcy5wdXNoKG5ldyBSYW5nZShjbGlwUG9zKHRoaXMsIGFuY2hvciksIGNsaXBQb3ModGhpcywgaGVhZCB8fCBhbmNob3IpKSk7XG4gICAgICBzZXRTZWxlY3Rpb24odGhpcywgbm9ybWFsaXplU2VsZWN0aW9uKHJhbmdlcywgcmFuZ2VzLmxlbmd0aCAtIDEpLCBvcHRpb25zKTtcbiAgICB9KSxcblxuICAgIGdldFNlbGVjdGlvbjogZnVuY3Rpb24obGluZVNlcCkge1xuICAgICAgdmFyIHJhbmdlcyA9IHRoaXMuc2VsLnJhbmdlcywgbGluZXM7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgc2VsID0gZ2V0QmV0d2Vlbih0aGlzLCByYW5nZXNbaV0uZnJvbSgpLCByYW5nZXNbaV0udG8oKSk7XG4gICAgICAgIGxpbmVzID0gbGluZXMgPyBsaW5lcy5jb25jYXQoc2VsKSA6IHNlbDtcbiAgICAgIH1cbiAgICAgIGlmIChsaW5lU2VwID09PSBmYWxzZSkgcmV0dXJuIGxpbmVzO1xuICAgICAgZWxzZSByZXR1cm4gbGluZXMuam9pbihsaW5lU2VwIHx8IHRoaXMubGluZVNlcGFyYXRvcigpKTtcbiAgICB9LFxuICAgIGdldFNlbGVjdGlvbnM6IGZ1bmN0aW9uKGxpbmVTZXApIHtcbiAgICAgIHZhciBwYXJ0cyA9IFtdLCByYW5nZXMgPSB0aGlzLnNlbC5yYW5nZXM7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgc2VsID0gZ2V0QmV0d2Vlbih0aGlzLCByYW5nZXNbaV0uZnJvbSgpLCByYW5nZXNbaV0udG8oKSk7XG4gICAgICAgIGlmIChsaW5lU2VwICE9PSBmYWxzZSkgc2VsID0gc2VsLmpvaW4obGluZVNlcCB8fCB0aGlzLmxpbmVTZXBhcmF0b3IoKSk7XG4gICAgICAgIHBhcnRzW2ldID0gc2VsO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHBhcnRzO1xuICAgIH0sXG4gICAgcmVwbGFjZVNlbGVjdGlvbjogZnVuY3Rpb24oY29kZSwgY29sbGFwc2UsIG9yaWdpbikge1xuICAgICAgdmFyIGR1cCA9IFtdO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnNlbC5yYW5nZXMubGVuZ3RoOyBpKyspXG4gICAgICAgIGR1cFtpXSA9IGNvZGU7XG4gICAgICB0aGlzLnJlcGxhY2VTZWxlY3Rpb25zKGR1cCwgY29sbGFwc2UsIG9yaWdpbiB8fCBcIitpbnB1dFwiKTtcbiAgICB9LFxuICAgIHJlcGxhY2VTZWxlY3Rpb25zOiBkb2NNZXRob2RPcChmdW5jdGlvbihjb2RlLCBjb2xsYXBzZSwgb3JpZ2luKSB7XG4gICAgICB2YXIgY2hhbmdlcyA9IFtdLCBzZWwgPSB0aGlzLnNlbDtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2VsLnJhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgcmFuZ2UgPSBzZWwucmFuZ2VzW2ldO1xuICAgICAgICBjaGFuZ2VzW2ldID0ge2Zyb206IHJhbmdlLmZyb20oKSwgdG86IHJhbmdlLnRvKCksIHRleHQ6IHRoaXMuc3BsaXRMaW5lcyhjb2RlW2ldKSwgb3JpZ2luOiBvcmlnaW59O1xuICAgICAgfVxuICAgICAgdmFyIG5ld1NlbCA9IGNvbGxhcHNlICYmIGNvbGxhcHNlICE9IFwiZW5kXCIgJiYgY29tcHV0ZVJlcGxhY2VkU2VsKHRoaXMsIGNoYW5nZXMsIGNvbGxhcHNlKTtcbiAgICAgIGZvciAodmFyIGkgPSBjaGFuZ2VzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKVxuICAgICAgICBtYWtlQ2hhbmdlKHRoaXMsIGNoYW5nZXNbaV0pO1xuICAgICAgaWYgKG5ld1NlbCkgc2V0U2VsZWN0aW9uUmVwbGFjZUhpc3RvcnkodGhpcywgbmV3U2VsKTtcbiAgICAgIGVsc2UgaWYgKHRoaXMuY20pIGVuc3VyZUN1cnNvclZpc2libGUodGhpcy5jbSk7XG4gICAgfSksXG4gICAgdW5kbzogZG9jTWV0aG9kT3AoZnVuY3Rpb24oKSB7bWFrZUNoYW5nZUZyb21IaXN0b3J5KHRoaXMsIFwidW5kb1wiKTt9KSxcbiAgICByZWRvOiBkb2NNZXRob2RPcChmdW5jdGlvbigpIHttYWtlQ2hhbmdlRnJvbUhpc3RvcnkodGhpcywgXCJyZWRvXCIpO30pLFxuICAgIHVuZG9TZWxlY3Rpb246IGRvY01ldGhvZE9wKGZ1bmN0aW9uKCkge21ha2VDaGFuZ2VGcm9tSGlzdG9yeSh0aGlzLCBcInVuZG9cIiwgdHJ1ZSk7fSksXG4gICAgcmVkb1NlbGVjdGlvbjogZG9jTWV0aG9kT3AoZnVuY3Rpb24oKSB7bWFrZUNoYW5nZUZyb21IaXN0b3J5KHRoaXMsIFwicmVkb1wiLCB0cnVlKTt9KSxcblxuICAgIHNldEV4dGVuZGluZzogZnVuY3Rpb24odmFsKSB7dGhpcy5leHRlbmQgPSB2YWw7fSxcbiAgICBnZXRFeHRlbmRpbmc6IGZ1bmN0aW9uKCkge3JldHVybiB0aGlzLmV4dGVuZDt9LFxuXG4gICAgaGlzdG9yeVNpemU6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGhpc3QgPSB0aGlzLmhpc3RvcnksIGRvbmUgPSAwLCB1bmRvbmUgPSAwO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBoaXN0LmRvbmUubGVuZ3RoOyBpKyspIGlmICghaGlzdC5kb25lW2ldLnJhbmdlcykgKytkb25lO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBoaXN0LnVuZG9uZS5sZW5ndGg7IGkrKykgaWYgKCFoaXN0LnVuZG9uZVtpXS5yYW5nZXMpICsrdW5kb25lO1xuICAgICAgcmV0dXJuIHt1bmRvOiBkb25lLCByZWRvOiB1bmRvbmV9O1xuICAgIH0sXG4gICAgY2xlYXJIaXN0b3J5OiBmdW5jdGlvbigpIHt0aGlzLmhpc3RvcnkgPSBuZXcgSGlzdG9yeSh0aGlzLmhpc3RvcnkubWF4R2VuZXJhdGlvbik7fSxcblxuICAgIG1hcmtDbGVhbjogZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLmNsZWFuR2VuZXJhdGlvbiA9IHRoaXMuY2hhbmdlR2VuZXJhdGlvbih0cnVlKTtcbiAgICB9LFxuICAgIGNoYW5nZUdlbmVyYXRpb246IGZ1bmN0aW9uKGZvcmNlU3BsaXQpIHtcbiAgICAgIGlmIChmb3JjZVNwbGl0KVxuICAgICAgICB0aGlzLmhpc3RvcnkubGFzdE9wID0gdGhpcy5oaXN0b3J5Lmxhc3RTZWxPcCA9IHRoaXMuaGlzdG9yeS5sYXN0T3JpZ2luID0gbnVsbDtcbiAgICAgIHJldHVybiB0aGlzLmhpc3RvcnkuZ2VuZXJhdGlvbjtcbiAgICB9LFxuICAgIGlzQ2xlYW46IGZ1bmN0aW9uIChnZW4pIHtcbiAgICAgIHJldHVybiB0aGlzLmhpc3RvcnkuZ2VuZXJhdGlvbiA9PSAoZ2VuIHx8IHRoaXMuY2xlYW5HZW5lcmF0aW9uKTtcbiAgICB9LFxuXG4gICAgZ2V0SGlzdG9yeTogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4ge2RvbmU6IGNvcHlIaXN0b3J5QXJyYXkodGhpcy5oaXN0b3J5LmRvbmUpLFxuICAgICAgICAgICAgICB1bmRvbmU6IGNvcHlIaXN0b3J5QXJyYXkodGhpcy5oaXN0b3J5LnVuZG9uZSl9O1xuICAgIH0sXG4gICAgc2V0SGlzdG9yeTogZnVuY3Rpb24oaGlzdERhdGEpIHtcbiAgICAgIHZhciBoaXN0ID0gdGhpcy5oaXN0b3J5ID0gbmV3IEhpc3RvcnkodGhpcy5oaXN0b3J5Lm1heEdlbmVyYXRpb24pO1xuICAgICAgaGlzdC5kb25lID0gY29weUhpc3RvcnlBcnJheShoaXN0RGF0YS5kb25lLnNsaWNlKDApLCBudWxsLCB0cnVlKTtcbiAgICAgIGhpc3QudW5kb25lID0gY29weUhpc3RvcnlBcnJheShoaXN0RGF0YS51bmRvbmUuc2xpY2UoMCksIG51bGwsIHRydWUpO1xuICAgIH0sXG5cbiAgICBhZGRMaW5lQ2xhc3M6IGRvY01ldGhvZE9wKGZ1bmN0aW9uKGhhbmRsZSwgd2hlcmUsIGNscykge1xuICAgICAgcmV0dXJuIGNoYW5nZUxpbmUodGhpcywgaGFuZGxlLCB3aGVyZSA9PSBcImd1dHRlclwiID8gXCJndXR0ZXJcIiA6IFwiY2xhc3NcIiwgZnVuY3Rpb24obGluZSkge1xuICAgICAgICB2YXIgcHJvcCA9IHdoZXJlID09IFwidGV4dFwiID8gXCJ0ZXh0Q2xhc3NcIlxuICAgICAgICAgICAgICAgICA6IHdoZXJlID09IFwiYmFja2dyb3VuZFwiID8gXCJiZ0NsYXNzXCJcbiAgICAgICAgICAgICAgICAgOiB3aGVyZSA9PSBcImd1dHRlclwiID8gXCJndXR0ZXJDbGFzc1wiIDogXCJ3cmFwQ2xhc3NcIjtcbiAgICAgICAgaWYgKCFsaW5lW3Byb3BdKSBsaW5lW3Byb3BdID0gY2xzO1xuICAgICAgICBlbHNlIGlmIChjbGFzc1Rlc3QoY2xzKS50ZXN0KGxpbmVbcHJvcF0pKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIGVsc2UgbGluZVtwcm9wXSArPSBcIiBcIiArIGNscztcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9KTtcbiAgICB9KSxcbiAgICByZW1vdmVMaW5lQ2xhc3M6IGRvY01ldGhvZE9wKGZ1bmN0aW9uKGhhbmRsZSwgd2hlcmUsIGNscykge1xuICAgICAgcmV0dXJuIGNoYW5nZUxpbmUodGhpcywgaGFuZGxlLCB3aGVyZSA9PSBcImd1dHRlclwiID8gXCJndXR0ZXJcIiA6IFwiY2xhc3NcIiwgZnVuY3Rpb24obGluZSkge1xuICAgICAgICB2YXIgcHJvcCA9IHdoZXJlID09IFwidGV4dFwiID8gXCJ0ZXh0Q2xhc3NcIlxuICAgICAgICAgICAgICAgICA6IHdoZXJlID09IFwiYmFja2dyb3VuZFwiID8gXCJiZ0NsYXNzXCJcbiAgICAgICAgICAgICAgICAgOiB3aGVyZSA9PSBcImd1dHRlclwiID8gXCJndXR0ZXJDbGFzc1wiIDogXCJ3cmFwQ2xhc3NcIjtcbiAgICAgICAgdmFyIGN1ciA9IGxpbmVbcHJvcF07XG4gICAgICAgIGlmICghY3VyKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIGVsc2UgaWYgKGNscyA9PSBudWxsKSBsaW5lW3Byb3BdID0gbnVsbDtcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgdmFyIGZvdW5kID0gY3VyLm1hdGNoKGNsYXNzVGVzdChjbHMpKTtcbiAgICAgICAgICBpZiAoIWZvdW5kKSByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgdmFyIGVuZCA9IGZvdW5kLmluZGV4ICsgZm91bmRbMF0ubGVuZ3RoO1xuICAgICAgICAgIGxpbmVbcHJvcF0gPSBjdXIuc2xpY2UoMCwgZm91bmQuaW5kZXgpICsgKCFmb3VuZC5pbmRleCB8fCBlbmQgPT0gY3VyLmxlbmd0aCA/IFwiXCIgOiBcIiBcIikgKyBjdXIuc2xpY2UoZW5kKSB8fCBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSk7XG4gICAgfSksXG5cbiAgICBhZGRMaW5lV2lkZ2V0OiBkb2NNZXRob2RPcChmdW5jdGlvbihoYW5kbGUsIG5vZGUsIG9wdGlvbnMpIHtcbiAgICAgIHJldHVybiBhZGRMaW5lV2lkZ2V0KHRoaXMsIGhhbmRsZSwgbm9kZSwgb3B0aW9ucyk7XG4gICAgfSksXG4gICAgcmVtb3ZlTGluZVdpZGdldDogZnVuY3Rpb24od2lkZ2V0KSB7IHdpZGdldC5jbGVhcigpOyB9LFxuXG4gICAgbWFya1RleHQ6IGZ1bmN0aW9uKGZyb20sIHRvLCBvcHRpb25zKSB7XG4gICAgICByZXR1cm4gbWFya1RleHQodGhpcywgY2xpcFBvcyh0aGlzLCBmcm9tKSwgY2xpcFBvcyh0aGlzLCB0byksIG9wdGlvbnMsIG9wdGlvbnMgJiYgb3B0aW9ucy50eXBlIHx8IFwicmFuZ2VcIik7XG4gICAgfSxcbiAgICBzZXRCb29rbWFyazogZnVuY3Rpb24ocG9zLCBvcHRpb25zKSB7XG4gICAgICB2YXIgcmVhbE9wdHMgPSB7cmVwbGFjZWRXaXRoOiBvcHRpb25zICYmIChvcHRpb25zLm5vZGVUeXBlID09IG51bGwgPyBvcHRpb25zLndpZGdldCA6IG9wdGlvbnMpLFxuICAgICAgICAgICAgICAgICAgICAgIGluc2VydExlZnQ6IG9wdGlvbnMgJiYgb3B0aW9ucy5pbnNlcnRMZWZ0LFxuICAgICAgICAgICAgICAgICAgICAgIGNsZWFyV2hlbkVtcHR5OiBmYWxzZSwgc2hhcmVkOiBvcHRpb25zICYmIG9wdGlvbnMuc2hhcmVkLFxuICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZU1vdXNlRXZlbnRzOiBvcHRpb25zICYmIG9wdGlvbnMuaGFuZGxlTW91c2VFdmVudHN9O1xuICAgICAgcG9zID0gY2xpcFBvcyh0aGlzLCBwb3MpO1xuICAgICAgcmV0dXJuIG1hcmtUZXh0KHRoaXMsIHBvcywgcG9zLCByZWFsT3B0cywgXCJib29rbWFya1wiKTtcbiAgICB9LFxuICAgIGZpbmRNYXJrc0F0OiBmdW5jdGlvbihwb3MpIHtcbiAgICAgIHBvcyA9IGNsaXBQb3ModGhpcywgcG9zKTtcbiAgICAgIHZhciBtYXJrZXJzID0gW10sIHNwYW5zID0gZ2V0TGluZSh0aGlzLCBwb3MubGluZSkubWFya2VkU3BhbnM7XG4gICAgICBpZiAoc3BhbnMpIGZvciAodmFyIGkgPSAwOyBpIDwgc3BhbnMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIHNwYW4gPSBzcGFuc1tpXTtcbiAgICAgICAgaWYgKChzcGFuLmZyb20gPT0gbnVsbCB8fCBzcGFuLmZyb20gPD0gcG9zLmNoKSAmJlxuICAgICAgICAgICAgKHNwYW4udG8gPT0gbnVsbCB8fCBzcGFuLnRvID49IHBvcy5jaCkpXG4gICAgICAgICAgbWFya2Vycy5wdXNoKHNwYW4ubWFya2VyLnBhcmVudCB8fCBzcGFuLm1hcmtlcik7XG4gICAgICB9XG4gICAgICByZXR1cm4gbWFya2VycztcbiAgICB9LFxuICAgIGZpbmRNYXJrczogZnVuY3Rpb24oZnJvbSwgdG8sIGZpbHRlcikge1xuICAgICAgZnJvbSA9IGNsaXBQb3ModGhpcywgZnJvbSk7IHRvID0gY2xpcFBvcyh0aGlzLCB0byk7XG4gICAgICB2YXIgZm91bmQgPSBbXSwgbGluZU5vID0gZnJvbS5saW5lO1xuICAgICAgdGhpcy5pdGVyKGZyb20ubGluZSwgdG8ubGluZSArIDEsIGZ1bmN0aW9uKGxpbmUpIHtcbiAgICAgICAgdmFyIHNwYW5zID0gbGluZS5tYXJrZWRTcGFucztcbiAgICAgICAgaWYgKHNwYW5zKSBmb3IgKHZhciBpID0gMDsgaSA8IHNwYW5zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgdmFyIHNwYW4gPSBzcGFuc1tpXTtcbiAgICAgICAgICBpZiAoIShzcGFuLnRvICE9IG51bGwgJiYgbGluZU5vID09IGZyb20ubGluZSAmJiBmcm9tLmNoID49IHNwYW4udG8gfHxcbiAgICAgICAgICAgICAgICBzcGFuLmZyb20gPT0gbnVsbCAmJiBsaW5lTm8gIT0gZnJvbS5saW5lIHx8XG4gICAgICAgICAgICAgICAgc3Bhbi5mcm9tICE9IG51bGwgJiYgbGluZU5vID09IHRvLmxpbmUgJiYgc3Bhbi5mcm9tID49IHRvLmNoKSAmJlxuICAgICAgICAgICAgICAoIWZpbHRlciB8fCBmaWx0ZXIoc3Bhbi5tYXJrZXIpKSlcbiAgICAgICAgICAgIGZvdW5kLnB1c2goc3Bhbi5tYXJrZXIucGFyZW50IHx8IHNwYW4ubWFya2VyKTtcbiAgICAgICAgfVxuICAgICAgICArK2xpbmVObztcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGZvdW5kO1xuICAgIH0sXG4gICAgZ2V0QWxsTWFya3M6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIG1hcmtlcnMgPSBbXTtcbiAgICAgIHRoaXMuaXRlcihmdW5jdGlvbihsaW5lKSB7XG4gICAgICAgIHZhciBzcHMgPSBsaW5lLm1hcmtlZFNwYW5zO1xuICAgICAgICBpZiAoc3BzKSBmb3IgKHZhciBpID0gMDsgaSA8IHNwcy5sZW5ndGg7ICsraSlcbiAgICAgICAgICBpZiAoc3BzW2ldLmZyb20gIT0gbnVsbCkgbWFya2Vycy5wdXNoKHNwc1tpXS5tYXJrZXIpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gbWFya2VycztcbiAgICB9LFxuXG4gICAgcG9zRnJvbUluZGV4OiBmdW5jdGlvbihvZmYpIHtcbiAgICAgIHZhciBjaCwgbGluZU5vID0gdGhpcy5maXJzdCwgc2VwU2l6ZSA9IHRoaXMubGluZVNlcGFyYXRvcigpLmxlbmd0aDtcbiAgICAgIHRoaXMuaXRlcihmdW5jdGlvbihsaW5lKSB7XG4gICAgICAgIHZhciBzeiA9IGxpbmUudGV4dC5sZW5ndGggKyBzZXBTaXplO1xuICAgICAgICBpZiAoc3ogPiBvZmYpIHsgY2ggPSBvZmY7IHJldHVybiB0cnVlOyB9XG4gICAgICAgIG9mZiAtPSBzejtcbiAgICAgICAgKytsaW5lTm87XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBjbGlwUG9zKHRoaXMsIFBvcyhsaW5lTm8sIGNoKSk7XG4gICAgfSxcbiAgICBpbmRleEZyb21Qb3M6IGZ1bmN0aW9uIChjb29yZHMpIHtcbiAgICAgIGNvb3JkcyA9IGNsaXBQb3ModGhpcywgY29vcmRzKTtcbiAgICAgIHZhciBpbmRleCA9IGNvb3Jkcy5jaDtcbiAgICAgIGlmIChjb29yZHMubGluZSA8IHRoaXMuZmlyc3QgfHwgY29vcmRzLmNoIDwgMCkgcmV0dXJuIDA7XG4gICAgICB2YXIgc2VwU2l6ZSA9IHRoaXMubGluZVNlcGFyYXRvcigpLmxlbmd0aDtcbiAgICAgIHRoaXMuaXRlcih0aGlzLmZpcnN0LCBjb29yZHMubGluZSwgZnVuY3Rpb24gKGxpbmUpIHtcbiAgICAgICAgaW5kZXggKz0gbGluZS50ZXh0Lmxlbmd0aCArIHNlcFNpemU7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBpbmRleDtcbiAgICB9LFxuXG4gICAgY29weTogZnVuY3Rpb24oY29weUhpc3RvcnkpIHtcbiAgICAgIHZhciBkb2MgPSBuZXcgRG9jKGdldExpbmVzKHRoaXMsIHRoaXMuZmlyc3QsIHRoaXMuZmlyc3QgKyB0aGlzLnNpemUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tb2RlT3B0aW9uLCB0aGlzLmZpcnN0LCB0aGlzLmxpbmVTZXApO1xuICAgICAgZG9jLnNjcm9sbFRvcCA9IHRoaXMuc2Nyb2xsVG9wOyBkb2Muc2Nyb2xsTGVmdCA9IHRoaXMuc2Nyb2xsTGVmdDtcbiAgICAgIGRvYy5zZWwgPSB0aGlzLnNlbDtcbiAgICAgIGRvYy5leHRlbmQgPSBmYWxzZTtcbiAgICAgIGlmIChjb3B5SGlzdG9yeSkge1xuICAgICAgICBkb2MuaGlzdG9yeS51bmRvRGVwdGggPSB0aGlzLmhpc3RvcnkudW5kb0RlcHRoO1xuICAgICAgICBkb2Muc2V0SGlzdG9yeSh0aGlzLmdldEhpc3RvcnkoKSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZG9jO1xuICAgIH0sXG5cbiAgICBsaW5rZWREb2M6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIGlmICghb3B0aW9ucykgb3B0aW9ucyA9IHt9O1xuICAgICAgdmFyIGZyb20gPSB0aGlzLmZpcnN0LCB0byA9IHRoaXMuZmlyc3QgKyB0aGlzLnNpemU7XG4gICAgICBpZiAob3B0aW9ucy5mcm9tICE9IG51bGwgJiYgb3B0aW9ucy5mcm9tID4gZnJvbSkgZnJvbSA9IG9wdGlvbnMuZnJvbTtcbiAgICAgIGlmIChvcHRpb25zLnRvICE9IG51bGwgJiYgb3B0aW9ucy50byA8IHRvKSB0byA9IG9wdGlvbnMudG87XG4gICAgICB2YXIgY29weSA9IG5ldyBEb2MoZ2V0TGluZXModGhpcywgZnJvbSwgdG8pLCBvcHRpb25zLm1vZGUgfHwgdGhpcy5tb2RlT3B0aW9uLCBmcm9tLCB0aGlzLmxpbmVTZXApO1xuICAgICAgaWYgKG9wdGlvbnMuc2hhcmVkSGlzdCkgY29weS5oaXN0b3J5ID0gdGhpcy5oaXN0b3J5O1xuICAgICAgKHRoaXMubGlua2VkIHx8ICh0aGlzLmxpbmtlZCA9IFtdKSkucHVzaCh7ZG9jOiBjb3B5LCBzaGFyZWRIaXN0OiBvcHRpb25zLnNoYXJlZEhpc3R9KTtcbiAgICAgIGNvcHkubGlua2VkID0gW3tkb2M6IHRoaXMsIGlzUGFyZW50OiB0cnVlLCBzaGFyZWRIaXN0OiBvcHRpb25zLnNoYXJlZEhpc3R9XTtcbiAgICAgIGNvcHlTaGFyZWRNYXJrZXJzKGNvcHksIGZpbmRTaGFyZWRNYXJrZXJzKHRoaXMpKTtcbiAgICAgIHJldHVybiBjb3B5O1xuICAgIH0sXG4gICAgdW5saW5rRG9jOiBmdW5jdGlvbihvdGhlcikge1xuICAgICAgaWYgKG90aGVyIGluc3RhbmNlb2YgQ29kZU1pcnJvcikgb3RoZXIgPSBvdGhlci5kb2M7XG4gICAgICBpZiAodGhpcy5saW5rZWQpIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5saW5rZWQubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIGxpbmsgPSB0aGlzLmxpbmtlZFtpXTtcbiAgICAgICAgaWYgKGxpbmsuZG9jICE9IG90aGVyKSBjb250aW51ZTtcbiAgICAgICAgdGhpcy5saW5rZWQuc3BsaWNlKGksIDEpO1xuICAgICAgICBvdGhlci51bmxpbmtEb2ModGhpcyk7XG4gICAgICAgIGRldGFjaFNoYXJlZE1hcmtlcnMoZmluZFNoYXJlZE1hcmtlcnModGhpcykpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIC8vIElmIHRoZSBoaXN0b3JpZXMgd2VyZSBzaGFyZWQsIHNwbGl0IHRoZW0gYWdhaW5cbiAgICAgIGlmIChvdGhlci5oaXN0b3J5ID09IHRoaXMuaGlzdG9yeSkge1xuICAgICAgICB2YXIgc3BsaXRJZHMgPSBbb3RoZXIuaWRdO1xuICAgICAgICBsaW5rZWREb2NzKG90aGVyLCBmdW5jdGlvbihkb2MpIHtzcGxpdElkcy5wdXNoKGRvYy5pZCk7fSwgdHJ1ZSk7XG4gICAgICAgIG90aGVyLmhpc3RvcnkgPSBuZXcgSGlzdG9yeShudWxsKTtcbiAgICAgICAgb3RoZXIuaGlzdG9yeS5kb25lID0gY29weUhpc3RvcnlBcnJheSh0aGlzLmhpc3RvcnkuZG9uZSwgc3BsaXRJZHMpO1xuICAgICAgICBvdGhlci5oaXN0b3J5LnVuZG9uZSA9IGNvcHlIaXN0b3J5QXJyYXkodGhpcy5oaXN0b3J5LnVuZG9uZSwgc3BsaXRJZHMpO1xuICAgICAgfVxuICAgIH0sXG4gICAgaXRlckxpbmtlZERvY3M6IGZ1bmN0aW9uKGYpIHtsaW5rZWREb2NzKHRoaXMsIGYpO30sXG5cbiAgICBnZXRNb2RlOiBmdW5jdGlvbigpIHtyZXR1cm4gdGhpcy5tb2RlO30sXG4gICAgZ2V0RWRpdG9yOiBmdW5jdGlvbigpIHtyZXR1cm4gdGhpcy5jbTt9LFxuXG4gICAgc3BsaXRMaW5lczogZnVuY3Rpb24oc3RyKSB7XG4gICAgICBpZiAodGhpcy5saW5lU2VwKSByZXR1cm4gc3RyLnNwbGl0KHRoaXMubGluZVNlcCk7XG4gICAgICByZXR1cm4gc3BsaXRMaW5lc0F1dG8oc3RyKTtcbiAgICB9LFxuICAgIGxpbmVTZXBhcmF0b3I6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy5saW5lU2VwIHx8IFwiXFxuXCI7IH1cbiAgfSk7XG5cbiAgLy8gUHVibGljIGFsaWFzLlxuICBEb2MucHJvdG90eXBlLmVhY2hMaW5lID0gRG9jLnByb3RvdHlwZS5pdGVyO1xuXG4gIC8vIFNldCB1cCBtZXRob2RzIG9uIENvZGVNaXJyb3IncyBwcm90b3R5cGUgdG8gcmVkaXJlY3QgdG8gdGhlIGVkaXRvcidzIGRvY3VtZW50LlxuICB2YXIgZG9udERlbGVnYXRlID0gXCJpdGVyIGluc2VydCByZW1vdmUgY29weSBnZXRFZGl0b3IgY29uc3RydWN0b3JcIi5zcGxpdChcIiBcIik7XG4gIGZvciAodmFyIHByb3AgaW4gRG9jLnByb3RvdHlwZSkgaWYgKERvYy5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkocHJvcCkgJiYgaW5kZXhPZihkb250RGVsZWdhdGUsIHByb3ApIDwgMClcbiAgICBDb2RlTWlycm9yLnByb3RvdHlwZVtwcm9wXSA9IChmdW5jdGlvbihtZXRob2QpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbigpIHtyZXR1cm4gbWV0aG9kLmFwcGx5KHRoaXMuZG9jLCBhcmd1bWVudHMpO307XG4gICAgfSkoRG9jLnByb3RvdHlwZVtwcm9wXSk7XG5cbiAgZXZlbnRNaXhpbihEb2MpO1xuXG4gIC8vIENhbGwgZiBmb3IgYWxsIGxpbmtlZCBkb2N1bWVudHMuXG4gIGZ1bmN0aW9uIGxpbmtlZERvY3MoZG9jLCBmLCBzaGFyZWRIaXN0T25seSkge1xuICAgIGZ1bmN0aW9uIHByb3BhZ2F0ZShkb2MsIHNraXAsIHNoYXJlZEhpc3QpIHtcbiAgICAgIGlmIChkb2MubGlua2VkKSBmb3IgKHZhciBpID0gMDsgaSA8IGRvYy5saW5rZWQubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIHJlbCA9IGRvYy5saW5rZWRbaV07XG4gICAgICAgIGlmIChyZWwuZG9jID09IHNraXApIGNvbnRpbnVlO1xuICAgICAgICB2YXIgc2hhcmVkID0gc2hhcmVkSGlzdCAmJiByZWwuc2hhcmVkSGlzdDtcbiAgICAgICAgaWYgKHNoYXJlZEhpc3RPbmx5ICYmICFzaGFyZWQpIGNvbnRpbnVlO1xuICAgICAgICBmKHJlbC5kb2MsIHNoYXJlZCk7XG4gICAgICAgIHByb3BhZ2F0ZShyZWwuZG9jLCBkb2MsIHNoYXJlZCk7XG4gICAgICB9XG4gICAgfVxuICAgIHByb3BhZ2F0ZShkb2MsIG51bGwsIHRydWUpO1xuICB9XG5cbiAgLy8gQXR0YWNoIGEgZG9jdW1lbnQgdG8gYW4gZWRpdG9yLlxuICBmdW5jdGlvbiBhdHRhY2hEb2MoY20sIGRvYykge1xuICAgIGlmIChkb2MuY20pIHRocm93IG5ldyBFcnJvcihcIlRoaXMgZG9jdW1lbnQgaXMgYWxyZWFkeSBpbiB1c2UuXCIpO1xuICAgIGNtLmRvYyA9IGRvYztcbiAgICBkb2MuY20gPSBjbTtcbiAgICBlc3RpbWF0ZUxpbmVIZWlnaHRzKGNtKTtcbiAgICBsb2FkTW9kZShjbSk7XG4gICAgaWYgKCFjbS5vcHRpb25zLmxpbmVXcmFwcGluZykgZmluZE1heExpbmUoY20pO1xuICAgIGNtLm9wdGlvbnMubW9kZSA9IGRvYy5tb2RlT3B0aW9uO1xuICAgIHJlZ0NoYW5nZShjbSk7XG4gIH1cblxuICAvLyBMSU5FIFVUSUxJVElFU1xuXG4gIC8vIEZpbmQgdGhlIGxpbmUgb2JqZWN0IGNvcnJlc3BvbmRpbmcgdG8gdGhlIGdpdmVuIGxpbmUgbnVtYmVyLlxuICBmdW5jdGlvbiBnZXRMaW5lKGRvYywgbikge1xuICAgIG4gLT0gZG9jLmZpcnN0O1xuICAgIGlmIChuIDwgMCB8fCBuID49IGRvYy5zaXplKSB0aHJvdyBuZXcgRXJyb3IoXCJUaGVyZSBpcyBubyBsaW5lIFwiICsgKG4gKyBkb2MuZmlyc3QpICsgXCIgaW4gdGhlIGRvY3VtZW50LlwiKTtcbiAgICBmb3IgKHZhciBjaHVuayA9IGRvYzsgIWNodW5rLmxpbmVzOykge1xuICAgICAgZm9yICh2YXIgaSA9IDA7OyArK2kpIHtcbiAgICAgICAgdmFyIGNoaWxkID0gY2h1bmsuY2hpbGRyZW5baV0sIHN6ID0gY2hpbGQuY2h1bmtTaXplKCk7XG4gICAgICAgIGlmIChuIDwgc3opIHsgY2h1bmsgPSBjaGlsZDsgYnJlYWs7IH1cbiAgICAgICAgbiAtPSBzejtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGNodW5rLmxpbmVzW25dO1xuICB9XG5cbiAgLy8gR2V0IHRoZSBwYXJ0IG9mIGEgZG9jdW1lbnQgYmV0d2VlbiB0d28gcG9zaXRpb25zLCBhcyBhbiBhcnJheSBvZlxuICAvLyBzdHJpbmdzLlxuICBmdW5jdGlvbiBnZXRCZXR3ZWVuKGRvYywgc3RhcnQsIGVuZCkge1xuICAgIHZhciBvdXQgPSBbXSwgbiA9IHN0YXJ0LmxpbmU7XG4gICAgZG9jLml0ZXIoc3RhcnQubGluZSwgZW5kLmxpbmUgKyAxLCBmdW5jdGlvbihsaW5lKSB7XG4gICAgICB2YXIgdGV4dCA9IGxpbmUudGV4dDtcbiAgICAgIGlmIChuID09IGVuZC5saW5lKSB0ZXh0ID0gdGV4dC5zbGljZSgwLCBlbmQuY2gpO1xuICAgICAgaWYgKG4gPT0gc3RhcnQubGluZSkgdGV4dCA9IHRleHQuc2xpY2Uoc3RhcnQuY2gpO1xuICAgICAgb3V0LnB1c2godGV4dCk7XG4gICAgICArK247XG4gICAgfSk7XG4gICAgcmV0dXJuIG91dDtcbiAgfVxuICAvLyBHZXQgdGhlIGxpbmVzIGJldHdlZW4gZnJvbSBhbmQgdG8sIGFzIGFycmF5IG9mIHN0cmluZ3MuXG4gIGZ1bmN0aW9uIGdldExpbmVzKGRvYywgZnJvbSwgdG8pIHtcbiAgICB2YXIgb3V0ID0gW107XG4gICAgZG9jLml0ZXIoZnJvbSwgdG8sIGZ1bmN0aW9uKGxpbmUpIHsgb3V0LnB1c2gobGluZS50ZXh0KTsgfSk7XG4gICAgcmV0dXJuIG91dDtcbiAgfVxuXG4gIC8vIFVwZGF0ZSB0aGUgaGVpZ2h0IG9mIGEgbGluZSwgcHJvcGFnYXRpbmcgdGhlIGhlaWdodCBjaGFuZ2VcbiAgLy8gdXB3YXJkcyB0byBwYXJlbnQgbm9kZXMuXG4gIGZ1bmN0aW9uIHVwZGF0ZUxpbmVIZWlnaHQobGluZSwgaGVpZ2h0KSB7XG4gICAgdmFyIGRpZmYgPSBoZWlnaHQgLSBsaW5lLmhlaWdodDtcbiAgICBpZiAoZGlmZikgZm9yICh2YXIgbiA9IGxpbmU7IG47IG4gPSBuLnBhcmVudCkgbi5oZWlnaHQgKz0gZGlmZjtcbiAgfVxuXG4gIC8vIEdpdmVuIGEgbGluZSBvYmplY3QsIGZpbmQgaXRzIGxpbmUgbnVtYmVyIGJ5IHdhbGtpbmcgdXAgdGhyb3VnaFxuICAvLyBpdHMgcGFyZW50IGxpbmtzLlxuICBmdW5jdGlvbiBsaW5lTm8obGluZSkge1xuICAgIGlmIChsaW5lLnBhcmVudCA9PSBudWxsKSByZXR1cm4gbnVsbDtcbiAgICB2YXIgY3VyID0gbGluZS5wYXJlbnQsIG5vID0gaW5kZXhPZihjdXIubGluZXMsIGxpbmUpO1xuICAgIGZvciAodmFyIGNodW5rID0gY3VyLnBhcmVudDsgY2h1bms7IGN1ciA9IGNodW5rLCBjaHVuayA9IGNodW5rLnBhcmVudCkge1xuICAgICAgZm9yICh2YXIgaSA9IDA7OyArK2kpIHtcbiAgICAgICAgaWYgKGNodW5rLmNoaWxkcmVuW2ldID09IGN1cikgYnJlYWs7XG4gICAgICAgIG5vICs9IGNodW5rLmNoaWxkcmVuW2ldLmNodW5rU2l6ZSgpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbm8gKyBjdXIuZmlyc3Q7XG4gIH1cblxuICAvLyBGaW5kIHRoZSBsaW5lIGF0IHRoZSBnaXZlbiB2ZXJ0aWNhbCBwb3NpdGlvbiwgdXNpbmcgdGhlIGhlaWdodFxuICAvLyBpbmZvcm1hdGlvbiBpbiB0aGUgZG9jdW1lbnQgdHJlZS5cbiAgZnVuY3Rpb24gbGluZUF0SGVpZ2h0KGNodW5rLCBoKSB7XG4gICAgdmFyIG4gPSBjaHVuay5maXJzdDtcbiAgICBvdXRlcjogZG8ge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaHVuay5jaGlsZHJlbi5sZW5ndGg7ICsraSkge1xuICAgICAgICB2YXIgY2hpbGQgPSBjaHVuay5jaGlsZHJlbltpXSwgY2ggPSBjaGlsZC5oZWlnaHQ7XG4gICAgICAgIGlmIChoIDwgY2gpIHsgY2h1bmsgPSBjaGlsZDsgY29udGludWUgb3V0ZXI7IH1cbiAgICAgICAgaCAtPSBjaDtcbiAgICAgICAgbiArPSBjaGlsZC5jaHVua1NpemUoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBuO1xuICAgIH0gd2hpbGUgKCFjaHVuay5saW5lcyk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaHVuay5saW5lcy5sZW5ndGg7ICsraSkge1xuICAgICAgdmFyIGxpbmUgPSBjaHVuay5saW5lc1tpXSwgbGggPSBsaW5lLmhlaWdodDtcbiAgICAgIGlmIChoIDwgbGgpIGJyZWFrO1xuICAgICAgaCAtPSBsaDtcbiAgICB9XG4gICAgcmV0dXJuIG4gKyBpO1xuICB9XG5cblxuICAvLyBGaW5kIHRoZSBoZWlnaHQgYWJvdmUgdGhlIGdpdmVuIGxpbmUuXG4gIGZ1bmN0aW9uIGhlaWdodEF0TGluZShsaW5lT2JqKSB7XG4gICAgbGluZU9iaiA9IHZpc3VhbExpbmUobGluZU9iaik7XG5cbiAgICB2YXIgaCA9IDAsIGNodW5rID0gbGluZU9iai5wYXJlbnQ7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaHVuay5saW5lcy5sZW5ndGg7ICsraSkge1xuICAgICAgdmFyIGxpbmUgPSBjaHVuay5saW5lc1tpXTtcbiAgICAgIGlmIChsaW5lID09IGxpbmVPYmopIGJyZWFrO1xuICAgICAgZWxzZSBoICs9IGxpbmUuaGVpZ2h0O1xuICAgIH1cbiAgICBmb3IgKHZhciBwID0gY2h1bmsucGFyZW50OyBwOyBjaHVuayA9IHAsIHAgPSBjaHVuay5wYXJlbnQpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcC5jaGlsZHJlbi5sZW5ndGg7ICsraSkge1xuICAgICAgICB2YXIgY3VyID0gcC5jaGlsZHJlbltpXTtcbiAgICAgICAgaWYgKGN1ciA9PSBjaHVuaykgYnJlYWs7XG4gICAgICAgIGVsc2UgaCArPSBjdXIuaGVpZ2h0O1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gaDtcbiAgfVxuXG4gIC8vIEdldCB0aGUgYmlkaSBvcmRlcmluZyBmb3IgdGhlIGdpdmVuIGxpbmUgKGFuZCBjYWNoZSBpdCkuIFJldHVybnNcbiAgLy8gZmFsc2UgZm9yIGxpbmVzIHRoYXQgYXJlIGZ1bGx5IGxlZnQtdG8tcmlnaHQsIGFuZCBhbiBhcnJheSBvZlxuICAvLyBCaWRpU3BhbiBvYmplY3RzIG90aGVyd2lzZS5cbiAgZnVuY3Rpb24gZ2V0T3JkZXIobGluZSkge1xuICAgIHZhciBvcmRlciA9IGxpbmUub3JkZXI7XG4gICAgaWYgKG9yZGVyID09IG51bGwpIG9yZGVyID0gbGluZS5vcmRlciA9IGJpZGlPcmRlcmluZyhsaW5lLnRleHQpO1xuICAgIHJldHVybiBvcmRlcjtcbiAgfVxuXG4gIC8vIEhJU1RPUllcblxuICBmdW5jdGlvbiBIaXN0b3J5KHN0YXJ0R2VuKSB7XG4gICAgLy8gQXJyYXlzIG9mIGNoYW5nZSBldmVudHMgYW5kIHNlbGVjdGlvbnMuIERvaW5nIHNvbWV0aGluZyBhZGRzIGFuXG4gICAgLy8gZXZlbnQgdG8gZG9uZSBhbmQgY2xlYXJzIHVuZG8uIFVuZG9pbmcgbW92ZXMgZXZlbnRzIGZyb20gZG9uZVxuICAgIC8vIHRvIHVuZG9uZSwgcmVkb2luZyBtb3ZlcyB0aGVtIGluIHRoZSBvdGhlciBkaXJlY3Rpb24uXG4gICAgdGhpcy5kb25lID0gW107IHRoaXMudW5kb25lID0gW107XG4gICAgdGhpcy51bmRvRGVwdGggPSBJbmZpbml0eTtcbiAgICAvLyBVc2VkIHRvIHRyYWNrIHdoZW4gY2hhbmdlcyBjYW4gYmUgbWVyZ2VkIGludG8gYSBzaW5nbGUgdW5kb1xuICAgIC8vIGV2ZW50XG4gICAgdGhpcy5sYXN0TW9kVGltZSA9IHRoaXMubGFzdFNlbFRpbWUgPSAwO1xuICAgIHRoaXMubGFzdE9wID0gdGhpcy5sYXN0U2VsT3AgPSBudWxsO1xuICAgIHRoaXMubGFzdE9yaWdpbiA9IHRoaXMubGFzdFNlbE9yaWdpbiA9IG51bGw7XG4gICAgLy8gVXNlZCBieSB0aGUgaXNDbGVhbigpIG1ldGhvZFxuICAgIHRoaXMuZ2VuZXJhdGlvbiA9IHRoaXMubWF4R2VuZXJhdGlvbiA9IHN0YXJ0R2VuIHx8IDE7XG4gIH1cblxuICAvLyBDcmVhdGUgYSBoaXN0b3J5IGNoYW5nZSBldmVudCBmcm9tIGFuIHVwZGF0ZURvYy1zdHlsZSBjaGFuZ2VcbiAgLy8gb2JqZWN0LlxuICBmdW5jdGlvbiBoaXN0b3J5Q2hhbmdlRnJvbUNoYW5nZShkb2MsIGNoYW5nZSkge1xuICAgIHZhciBoaXN0Q2hhbmdlID0ge2Zyb206IGNvcHlQb3MoY2hhbmdlLmZyb20pLCB0bzogY2hhbmdlRW5kKGNoYW5nZSksIHRleHQ6IGdldEJldHdlZW4oZG9jLCBjaGFuZ2UuZnJvbSwgY2hhbmdlLnRvKX07XG4gICAgYXR0YWNoTG9jYWxTcGFucyhkb2MsIGhpc3RDaGFuZ2UsIGNoYW5nZS5mcm9tLmxpbmUsIGNoYW5nZS50by5saW5lICsgMSk7XG4gICAgbGlua2VkRG9jcyhkb2MsIGZ1bmN0aW9uKGRvYykge2F0dGFjaExvY2FsU3BhbnMoZG9jLCBoaXN0Q2hhbmdlLCBjaGFuZ2UuZnJvbS5saW5lLCBjaGFuZ2UudG8ubGluZSArIDEpO30sIHRydWUpO1xuICAgIHJldHVybiBoaXN0Q2hhbmdlO1xuICB9XG5cbiAgLy8gUG9wIGFsbCBzZWxlY3Rpb24gZXZlbnRzIG9mZiB0aGUgZW5kIG9mIGEgaGlzdG9yeSBhcnJheS4gU3RvcCBhdFxuICAvLyBhIGNoYW5nZSBldmVudC5cbiAgZnVuY3Rpb24gY2xlYXJTZWxlY3Rpb25FdmVudHMoYXJyYXkpIHtcbiAgICB3aGlsZSAoYXJyYXkubGVuZ3RoKSB7XG4gICAgICB2YXIgbGFzdCA9IGxzdChhcnJheSk7XG4gICAgICBpZiAobGFzdC5yYW5nZXMpIGFycmF5LnBvcCgpO1xuICAgICAgZWxzZSBicmVhaztcbiAgICB9XG4gIH1cblxuICAvLyBGaW5kIHRoZSB0b3AgY2hhbmdlIGV2ZW50IGluIHRoZSBoaXN0b3J5LiBQb3Agb2ZmIHNlbGVjdGlvblxuICAvLyBldmVudHMgdGhhdCBhcmUgaW4gdGhlIHdheS5cbiAgZnVuY3Rpb24gbGFzdENoYW5nZUV2ZW50KGhpc3QsIGZvcmNlKSB7XG4gICAgaWYgKGZvcmNlKSB7XG4gICAgICBjbGVhclNlbGVjdGlvbkV2ZW50cyhoaXN0LmRvbmUpO1xuICAgICAgcmV0dXJuIGxzdChoaXN0LmRvbmUpO1xuICAgIH0gZWxzZSBpZiAoaGlzdC5kb25lLmxlbmd0aCAmJiAhbHN0KGhpc3QuZG9uZSkucmFuZ2VzKSB7XG4gICAgICByZXR1cm4gbHN0KGhpc3QuZG9uZSk7XG4gICAgfSBlbHNlIGlmIChoaXN0LmRvbmUubGVuZ3RoID4gMSAmJiAhaGlzdC5kb25lW2hpc3QuZG9uZS5sZW5ndGggLSAyXS5yYW5nZXMpIHtcbiAgICAgIGhpc3QuZG9uZS5wb3AoKTtcbiAgICAgIHJldHVybiBsc3QoaGlzdC5kb25lKTtcbiAgICB9XG4gIH1cblxuICAvLyBSZWdpc3RlciBhIGNoYW5nZSBpbiB0aGUgaGlzdG9yeS4gTWVyZ2VzIGNoYW5nZXMgdGhhdCBhcmUgd2l0aGluXG4gIC8vIGEgc2luZ2xlIG9wZXJhdGlvbiwgb3JlIGFyZSBjbG9zZSB0b2dldGhlciB3aXRoIGFuIG9yaWdpbiB0aGF0XG4gIC8vIGFsbG93cyBtZXJnaW5nIChzdGFydGluZyB3aXRoIFwiK1wiKSBpbnRvIGEgc2luZ2xlIGV2ZW50LlxuICBmdW5jdGlvbiBhZGRDaGFuZ2VUb0hpc3RvcnkoZG9jLCBjaGFuZ2UsIHNlbEFmdGVyLCBvcElkKSB7XG4gICAgdmFyIGhpc3QgPSBkb2MuaGlzdG9yeTtcbiAgICBoaXN0LnVuZG9uZS5sZW5ndGggPSAwO1xuICAgIHZhciB0aW1lID0gK25ldyBEYXRlLCBjdXI7XG5cbiAgICBpZiAoKGhpc3QubGFzdE9wID09IG9wSWQgfHxcbiAgICAgICAgIGhpc3QubGFzdE9yaWdpbiA9PSBjaGFuZ2Uub3JpZ2luICYmIGNoYW5nZS5vcmlnaW4gJiZcbiAgICAgICAgICgoY2hhbmdlLm9yaWdpbi5jaGFyQXQoMCkgPT0gXCIrXCIgJiYgZG9jLmNtICYmIGhpc3QubGFzdE1vZFRpbWUgPiB0aW1lIC0gZG9jLmNtLm9wdGlvbnMuaGlzdG9yeUV2ZW50RGVsYXkpIHx8XG4gICAgICAgICAgY2hhbmdlLm9yaWdpbi5jaGFyQXQoMCkgPT0gXCIqXCIpKSAmJlxuICAgICAgICAoY3VyID0gbGFzdENoYW5nZUV2ZW50KGhpc3QsIGhpc3QubGFzdE9wID09IG9wSWQpKSkge1xuICAgICAgLy8gTWVyZ2UgdGhpcyBjaGFuZ2UgaW50byB0aGUgbGFzdCBldmVudFxuICAgICAgdmFyIGxhc3QgPSBsc3QoY3VyLmNoYW5nZXMpO1xuICAgICAgaWYgKGNtcChjaGFuZ2UuZnJvbSwgY2hhbmdlLnRvKSA9PSAwICYmIGNtcChjaGFuZ2UuZnJvbSwgbGFzdC50bykgPT0gMCkge1xuICAgICAgICAvLyBPcHRpbWl6ZWQgY2FzZSBmb3Igc2ltcGxlIGluc2VydGlvbiAtLSBkb24ndCB3YW50IHRvIGFkZFxuICAgICAgICAvLyBuZXcgY2hhbmdlc2V0cyBmb3IgZXZlcnkgY2hhcmFjdGVyIHR5cGVkXG4gICAgICAgIGxhc3QudG8gPSBjaGFuZ2VFbmQoY2hhbmdlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEFkZCBuZXcgc3ViLWV2ZW50XG4gICAgICAgIGN1ci5jaGFuZ2VzLnB1c2goaGlzdG9yeUNoYW5nZUZyb21DaGFuZ2UoZG9jLCBjaGFuZ2UpKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gQ2FuIG5vdCBiZSBtZXJnZWQsIHN0YXJ0IGEgbmV3IGV2ZW50LlxuICAgICAgdmFyIGJlZm9yZSA9IGxzdChoaXN0LmRvbmUpO1xuICAgICAgaWYgKCFiZWZvcmUgfHwgIWJlZm9yZS5yYW5nZXMpXG4gICAgICAgIHB1c2hTZWxlY3Rpb25Ub0hpc3RvcnkoZG9jLnNlbCwgaGlzdC5kb25lKTtcbiAgICAgIGN1ciA9IHtjaGFuZ2VzOiBbaGlzdG9yeUNoYW5nZUZyb21DaGFuZ2UoZG9jLCBjaGFuZ2UpXSxcbiAgICAgICAgICAgICBnZW5lcmF0aW9uOiBoaXN0LmdlbmVyYXRpb259O1xuICAgICAgaGlzdC5kb25lLnB1c2goY3VyKTtcbiAgICAgIHdoaWxlIChoaXN0LmRvbmUubGVuZ3RoID4gaGlzdC51bmRvRGVwdGgpIHtcbiAgICAgICAgaGlzdC5kb25lLnNoaWZ0KCk7XG4gICAgICAgIGlmICghaGlzdC5kb25lWzBdLnJhbmdlcykgaGlzdC5kb25lLnNoaWZ0KCk7XG4gICAgICB9XG4gICAgfVxuICAgIGhpc3QuZG9uZS5wdXNoKHNlbEFmdGVyKTtcbiAgICBoaXN0LmdlbmVyYXRpb24gPSArK2hpc3QubWF4R2VuZXJhdGlvbjtcbiAgICBoaXN0Lmxhc3RNb2RUaW1lID0gaGlzdC5sYXN0U2VsVGltZSA9IHRpbWU7XG4gICAgaGlzdC5sYXN0T3AgPSBoaXN0Lmxhc3RTZWxPcCA9IG9wSWQ7XG4gICAgaGlzdC5sYXN0T3JpZ2luID0gaGlzdC5sYXN0U2VsT3JpZ2luID0gY2hhbmdlLm9yaWdpbjtcblxuICAgIGlmICghbGFzdCkgc2lnbmFsKGRvYywgXCJoaXN0b3J5QWRkZWRcIik7XG4gIH1cblxuICBmdW5jdGlvbiBzZWxlY3Rpb25FdmVudENhbkJlTWVyZ2VkKGRvYywgb3JpZ2luLCBwcmV2LCBzZWwpIHtcbiAgICB2YXIgY2ggPSBvcmlnaW4uY2hhckF0KDApO1xuICAgIHJldHVybiBjaCA9PSBcIipcIiB8fFxuICAgICAgY2ggPT0gXCIrXCIgJiZcbiAgICAgIHByZXYucmFuZ2VzLmxlbmd0aCA9PSBzZWwucmFuZ2VzLmxlbmd0aCAmJlxuICAgICAgcHJldi5zb21ldGhpbmdTZWxlY3RlZCgpID09IHNlbC5zb21ldGhpbmdTZWxlY3RlZCgpICYmXG4gICAgICBuZXcgRGF0ZSAtIGRvYy5oaXN0b3J5Lmxhc3RTZWxUaW1lIDw9IChkb2MuY20gPyBkb2MuY20ub3B0aW9ucy5oaXN0b3J5RXZlbnREZWxheSA6IDUwMCk7XG4gIH1cblxuICAvLyBDYWxsZWQgd2hlbmV2ZXIgdGhlIHNlbGVjdGlvbiBjaGFuZ2VzLCBzZXRzIHRoZSBuZXcgc2VsZWN0aW9uIGFzXG4gIC8vIHRoZSBwZW5kaW5nIHNlbGVjdGlvbiBpbiB0aGUgaGlzdG9yeSwgYW5kIHB1c2hlcyB0aGUgb2xkIHBlbmRpbmdcbiAgLy8gc2VsZWN0aW9uIGludG8gdGhlICdkb25lJyBhcnJheSB3aGVuIGl0IHdhcyBzaWduaWZpY2FudGx5XG4gIC8vIGRpZmZlcmVudCAoaW4gbnVtYmVyIG9mIHNlbGVjdGVkIHJhbmdlcywgZW1wdGluZXNzLCBvciB0aW1lKS5cbiAgZnVuY3Rpb24gYWRkU2VsZWN0aW9uVG9IaXN0b3J5KGRvYywgc2VsLCBvcElkLCBvcHRpb25zKSB7XG4gICAgdmFyIGhpc3QgPSBkb2MuaGlzdG9yeSwgb3JpZ2luID0gb3B0aW9ucyAmJiBvcHRpb25zLm9yaWdpbjtcblxuICAgIC8vIEEgbmV3IGV2ZW50IGlzIHN0YXJ0ZWQgd2hlbiB0aGUgcHJldmlvdXMgb3JpZ2luIGRvZXMgbm90IG1hdGNoXG4gICAgLy8gdGhlIGN1cnJlbnQsIG9yIHRoZSBvcmlnaW5zIGRvbid0IGFsbG93IG1hdGNoaW5nLiBPcmlnaW5zXG4gICAgLy8gc3RhcnRpbmcgd2l0aCAqIGFyZSBhbHdheXMgbWVyZ2VkLCB0aG9zZSBzdGFydGluZyB3aXRoICsgYXJlXG4gICAgLy8gbWVyZ2VkIHdoZW4gc2ltaWxhciBhbmQgY2xvc2UgdG9nZXRoZXIgaW4gdGltZS5cbiAgICBpZiAob3BJZCA9PSBoaXN0Lmxhc3RTZWxPcCB8fFxuICAgICAgICAob3JpZ2luICYmIGhpc3QubGFzdFNlbE9yaWdpbiA9PSBvcmlnaW4gJiZcbiAgICAgICAgIChoaXN0Lmxhc3RNb2RUaW1lID09IGhpc3QubGFzdFNlbFRpbWUgJiYgaGlzdC5sYXN0T3JpZ2luID09IG9yaWdpbiB8fFxuICAgICAgICAgIHNlbGVjdGlvbkV2ZW50Q2FuQmVNZXJnZWQoZG9jLCBvcmlnaW4sIGxzdChoaXN0LmRvbmUpLCBzZWwpKSkpXG4gICAgICBoaXN0LmRvbmVbaGlzdC5kb25lLmxlbmd0aCAtIDFdID0gc2VsO1xuICAgIGVsc2VcbiAgICAgIHB1c2hTZWxlY3Rpb25Ub0hpc3Rvcnkoc2VsLCBoaXN0LmRvbmUpO1xuXG4gICAgaGlzdC5sYXN0U2VsVGltZSA9ICtuZXcgRGF0ZTtcbiAgICBoaXN0Lmxhc3RTZWxPcmlnaW4gPSBvcmlnaW47XG4gICAgaGlzdC5sYXN0U2VsT3AgPSBvcElkO1xuICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuY2xlYXJSZWRvICE9PSBmYWxzZSlcbiAgICAgIGNsZWFyU2VsZWN0aW9uRXZlbnRzKGhpc3QudW5kb25lKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHB1c2hTZWxlY3Rpb25Ub0hpc3Rvcnkoc2VsLCBkZXN0KSB7XG4gICAgdmFyIHRvcCA9IGxzdChkZXN0KTtcbiAgICBpZiAoISh0b3AgJiYgdG9wLnJhbmdlcyAmJiB0b3AuZXF1YWxzKHNlbCkpKVxuICAgICAgZGVzdC5wdXNoKHNlbCk7XG4gIH1cblxuICAvLyBVc2VkIHRvIHN0b3JlIG1hcmtlZCBzcGFuIGluZm9ybWF0aW9uIGluIHRoZSBoaXN0b3J5LlxuICBmdW5jdGlvbiBhdHRhY2hMb2NhbFNwYW5zKGRvYywgY2hhbmdlLCBmcm9tLCB0bykge1xuICAgIHZhciBleGlzdGluZyA9IGNoYW5nZVtcInNwYW5zX1wiICsgZG9jLmlkXSwgbiA9IDA7XG4gICAgZG9jLml0ZXIoTWF0aC5tYXgoZG9jLmZpcnN0LCBmcm9tKSwgTWF0aC5taW4oZG9jLmZpcnN0ICsgZG9jLnNpemUsIHRvKSwgZnVuY3Rpb24obGluZSkge1xuICAgICAgaWYgKGxpbmUubWFya2VkU3BhbnMpXG4gICAgICAgIChleGlzdGluZyB8fCAoZXhpc3RpbmcgPSBjaGFuZ2VbXCJzcGFuc19cIiArIGRvYy5pZF0gPSB7fSkpW25dID0gbGluZS5tYXJrZWRTcGFucztcbiAgICAgICsrbjtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIFdoZW4gdW4vcmUtZG9pbmcgcmVzdG9yZXMgdGV4dCBjb250YWluaW5nIG1hcmtlZCBzcGFucywgdGhvc2VcbiAgLy8gdGhhdCBoYXZlIGJlZW4gZXhwbGljaXRseSBjbGVhcmVkIHNob3VsZCBub3QgYmUgcmVzdG9yZWQuXG4gIGZ1bmN0aW9uIHJlbW92ZUNsZWFyZWRTcGFucyhzcGFucykge1xuICAgIGlmICghc3BhbnMpIHJldHVybiBudWxsO1xuICAgIGZvciAodmFyIGkgPSAwLCBvdXQ7IGkgPCBzcGFucy5sZW5ndGg7ICsraSkge1xuICAgICAgaWYgKHNwYW5zW2ldLm1hcmtlci5leHBsaWNpdGx5Q2xlYXJlZCkgeyBpZiAoIW91dCkgb3V0ID0gc3BhbnMuc2xpY2UoMCwgaSk7IH1cbiAgICAgIGVsc2UgaWYgKG91dCkgb3V0LnB1c2goc3BhbnNbaV0pO1xuICAgIH1cbiAgICByZXR1cm4gIW91dCA/IHNwYW5zIDogb3V0Lmxlbmd0aCA/IG91dCA6IG51bGw7XG4gIH1cblxuICAvLyBSZXRyaWV2ZSBhbmQgZmlsdGVyIHRoZSBvbGQgbWFya2VkIHNwYW5zIHN0b3JlZCBpbiBhIGNoYW5nZSBldmVudC5cbiAgZnVuY3Rpb24gZ2V0T2xkU3BhbnMoZG9jLCBjaGFuZ2UpIHtcbiAgICB2YXIgZm91bmQgPSBjaGFuZ2VbXCJzcGFuc19cIiArIGRvYy5pZF07XG4gICAgaWYgKCFmb3VuZCkgcmV0dXJuIG51bGw7XG4gICAgZm9yICh2YXIgaSA9IDAsIG53ID0gW107IGkgPCBjaGFuZ2UudGV4dC5sZW5ndGg7ICsraSlcbiAgICAgIG53LnB1c2gocmVtb3ZlQ2xlYXJlZFNwYW5zKGZvdW5kW2ldKSk7XG4gICAgcmV0dXJuIG53O1xuICB9XG5cbiAgLy8gVXNlZCBib3RoIHRvIHByb3ZpZGUgYSBKU09OLXNhZmUgb2JqZWN0IGluIC5nZXRIaXN0b3J5LCBhbmQsIHdoZW5cbiAgLy8gZGV0YWNoaW5nIGEgZG9jdW1lbnQsIHRvIHNwbGl0IHRoZSBoaXN0b3J5IGluIHR3b1xuICBmdW5jdGlvbiBjb3B5SGlzdG9yeUFycmF5KGV2ZW50cywgbmV3R3JvdXAsIGluc3RhbnRpYXRlU2VsKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGNvcHkgPSBbXTsgaSA8IGV2ZW50cy5sZW5ndGg7ICsraSkge1xuICAgICAgdmFyIGV2ZW50ID0gZXZlbnRzW2ldO1xuICAgICAgaWYgKGV2ZW50LnJhbmdlcykge1xuICAgICAgICBjb3B5LnB1c2goaW5zdGFudGlhdGVTZWwgPyBTZWxlY3Rpb24ucHJvdG90eXBlLmRlZXBDb3B5LmNhbGwoZXZlbnQpIDogZXZlbnQpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIHZhciBjaGFuZ2VzID0gZXZlbnQuY2hhbmdlcywgbmV3Q2hhbmdlcyA9IFtdO1xuICAgICAgY29weS5wdXNoKHtjaGFuZ2VzOiBuZXdDaGFuZ2VzfSk7XG4gICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGNoYW5nZXMubGVuZ3RoOyArK2opIHtcbiAgICAgICAgdmFyIGNoYW5nZSA9IGNoYW5nZXNbal0sIG07XG4gICAgICAgIG5ld0NoYW5nZXMucHVzaCh7ZnJvbTogY2hhbmdlLmZyb20sIHRvOiBjaGFuZ2UudG8sIHRleHQ6IGNoYW5nZS50ZXh0fSk7XG4gICAgICAgIGlmIChuZXdHcm91cCkgZm9yICh2YXIgcHJvcCBpbiBjaGFuZ2UpIGlmIChtID0gcHJvcC5tYXRjaCgvXnNwYW5zXyhcXGQrKSQvKSkge1xuICAgICAgICAgIGlmIChpbmRleE9mKG5ld0dyb3VwLCBOdW1iZXIobVsxXSkpID4gLTEpIHtcbiAgICAgICAgICAgIGxzdChuZXdDaGFuZ2VzKVtwcm9wXSA9IGNoYW5nZVtwcm9wXTtcbiAgICAgICAgICAgIGRlbGV0ZSBjaGFuZ2VbcHJvcF07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjb3B5O1xuICB9XG5cbiAgLy8gUmViYXNpbmcvcmVzZXR0aW5nIGhpc3RvcnkgdG8gZGVhbCB3aXRoIGV4dGVybmFsbHktc291cmNlZCBjaGFuZ2VzXG5cbiAgZnVuY3Rpb24gcmViYXNlSGlzdFNlbFNpbmdsZShwb3MsIGZyb20sIHRvLCBkaWZmKSB7XG4gICAgaWYgKHRvIDwgcG9zLmxpbmUpIHtcbiAgICAgIHBvcy5saW5lICs9IGRpZmY7XG4gICAgfSBlbHNlIGlmIChmcm9tIDwgcG9zLmxpbmUpIHtcbiAgICAgIHBvcy5saW5lID0gZnJvbTtcbiAgICAgIHBvcy5jaCA9IDA7XG4gICAgfVxuICB9XG5cbiAgLy8gVHJpZXMgdG8gcmViYXNlIGFuIGFycmF5IG9mIGhpc3RvcnkgZXZlbnRzIGdpdmVuIGEgY2hhbmdlIGluIHRoZVxuICAvLyBkb2N1bWVudC4gSWYgdGhlIGNoYW5nZSB0b3VjaGVzIHRoZSBzYW1lIGxpbmVzIGFzIHRoZSBldmVudCwgdGhlXG4gIC8vIGV2ZW50LCBhbmQgZXZlcnl0aGluZyAnYmVoaW5kJyBpdCwgaXMgZGlzY2FyZGVkLiBJZiB0aGUgY2hhbmdlIGlzXG4gIC8vIGJlZm9yZSB0aGUgZXZlbnQsIHRoZSBldmVudCdzIHBvc2l0aW9ucyBhcmUgdXBkYXRlZC4gVXNlcyBhXG4gIC8vIGNvcHktb24td3JpdGUgc2NoZW1lIGZvciB0aGUgcG9zaXRpb25zLCB0byBhdm9pZCBoYXZpbmcgdG9cbiAgLy8gcmVhbGxvY2F0ZSB0aGVtIGFsbCBvbiBldmVyeSByZWJhc2UsIGJ1dCBhbHNvIGF2b2lkIHByb2JsZW1zIHdpdGhcbiAgLy8gc2hhcmVkIHBvc2l0aW9uIG9iamVjdHMgYmVpbmcgdW5zYWZlbHkgdXBkYXRlZC5cbiAgZnVuY3Rpb24gcmViYXNlSGlzdEFycmF5KGFycmF5LCBmcm9tLCB0bywgZGlmZikge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyArK2kpIHtcbiAgICAgIHZhciBzdWIgPSBhcnJheVtpXSwgb2sgPSB0cnVlO1xuICAgICAgaWYgKHN1Yi5yYW5nZXMpIHtcbiAgICAgICAgaWYgKCFzdWIuY29waWVkKSB7IHN1YiA9IGFycmF5W2ldID0gc3ViLmRlZXBDb3B5KCk7IHN1Yi5jb3BpZWQgPSB0cnVlOyB9XG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgc3ViLnJhbmdlcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgIHJlYmFzZUhpc3RTZWxTaW5nbGUoc3ViLnJhbmdlc1tqXS5hbmNob3IsIGZyb20sIHRvLCBkaWZmKTtcbiAgICAgICAgICByZWJhc2VIaXN0U2VsU2luZ2xlKHN1Yi5yYW5nZXNbal0uaGVhZCwgZnJvbSwgdG8sIGRpZmYpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBzdWIuY2hhbmdlcy5sZW5ndGg7ICsraikge1xuICAgICAgICB2YXIgY3VyID0gc3ViLmNoYW5nZXNbal07XG4gICAgICAgIGlmICh0byA8IGN1ci5mcm9tLmxpbmUpIHtcbiAgICAgICAgICBjdXIuZnJvbSA9IFBvcyhjdXIuZnJvbS5saW5lICsgZGlmZiwgY3VyLmZyb20uY2gpO1xuICAgICAgICAgIGN1ci50byA9IFBvcyhjdXIudG8ubGluZSArIGRpZmYsIGN1ci50by5jaCk7XG4gICAgICAgIH0gZWxzZSBpZiAoZnJvbSA8PSBjdXIudG8ubGluZSkge1xuICAgICAgICAgIG9rID0gZmFsc2U7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICghb2spIHtcbiAgICAgICAgYXJyYXkuc3BsaWNlKDAsIGkgKyAxKTtcbiAgICAgICAgaSA9IDA7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gcmViYXNlSGlzdChoaXN0LCBjaGFuZ2UpIHtcbiAgICB2YXIgZnJvbSA9IGNoYW5nZS5mcm9tLmxpbmUsIHRvID0gY2hhbmdlLnRvLmxpbmUsIGRpZmYgPSBjaGFuZ2UudGV4dC5sZW5ndGggLSAodG8gLSBmcm9tKSAtIDE7XG4gICAgcmViYXNlSGlzdEFycmF5KGhpc3QuZG9uZSwgZnJvbSwgdG8sIGRpZmYpO1xuICAgIHJlYmFzZUhpc3RBcnJheShoaXN0LnVuZG9uZSwgZnJvbSwgdG8sIGRpZmYpO1xuICB9XG5cbiAgLy8gRVZFTlQgVVRJTElUSUVTXG5cbiAgLy8gRHVlIHRvIHRoZSBmYWN0IHRoYXQgd2Ugc3RpbGwgc3VwcG9ydCBqdXJhc3NpYyBJRSB2ZXJzaW9ucywgc29tZVxuICAvLyBjb21wYXRpYmlsaXR5IHdyYXBwZXJzIGFyZSBuZWVkZWQuXG5cbiAgdmFyIGVfcHJldmVudERlZmF1bHQgPSBDb2RlTWlycm9yLmVfcHJldmVudERlZmF1bHQgPSBmdW5jdGlvbihlKSB7XG4gICAgaWYgKGUucHJldmVudERlZmF1bHQpIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBlbHNlIGUucmV0dXJuVmFsdWUgPSBmYWxzZTtcbiAgfTtcbiAgdmFyIGVfc3RvcFByb3BhZ2F0aW9uID0gQ29kZU1pcnJvci5lX3N0b3BQcm9wYWdhdGlvbiA9IGZ1bmN0aW9uKGUpIHtcbiAgICBpZiAoZS5zdG9wUHJvcGFnYXRpb24pIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgZWxzZSBlLmNhbmNlbEJ1YmJsZSA9IHRydWU7XG4gIH07XG4gIGZ1bmN0aW9uIGVfZGVmYXVsdFByZXZlbnRlZChlKSB7XG4gICAgcmV0dXJuIGUuZGVmYXVsdFByZXZlbnRlZCAhPSBudWxsID8gZS5kZWZhdWx0UHJldmVudGVkIDogZS5yZXR1cm5WYWx1ZSA9PSBmYWxzZTtcbiAgfVxuICB2YXIgZV9zdG9wID0gQ29kZU1pcnJvci5lX3N0b3AgPSBmdW5jdGlvbihlKSB7ZV9wcmV2ZW50RGVmYXVsdChlKTsgZV9zdG9wUHJvcGFnYXRpb24oZSk7fTtcblxuICBmdW5jdGlvbiBlX3RhcmdldChlKSB7cmV0dXJuIGUudGFyZ2V0IHx8IGUuc3JjRWxlbWVudDt9XG4gIGZ1bmN0aW9uIGVfYnV0dG9uKGUpIHtcbiAgICB2YXIgYiA9IGUud2hpY2g7XG4gICAgaWYgKGIgPT0gbnVsbCkge1xuICAgICAgaWYgKGUuYnV0dG9uICYgMSkgYiA9IDE7XG4gICAgICBlbHNlIGlmIChlLmJ1dHRvbiAmIDIpIGIgPSAzO1xuICAgICAgZWxzZSBpZiAoZS5idXR0b24gJiA0KSBiID0gMjtcbiAgICB9XG4gICAgaWYgKG1hYyAmJiBlLmN0cmxLZXkgJiYgYiA9PSAxKSBiID0gMztcbiAgICByZXR1cm4gYjtcbiAgfVxuXG4gIC8vIEVWRU5UIEhBTkRMSU5HXG5cbiAgLy8gTGlnaHR3ZWlnaHQgZXZlbnQgZnJhbWV3b3JrLiBvbi9vZmYgYWxzbyB3b3JrIG9uIERPTSBub2RlcyxcbiAgLy8gcmVnaXN0ZXJpbmcgbmF0aXZlIERPTSBoYW5kbGVycy5cblxuICB2YXIgb24gPSBDb2RlTWlycm9yLm9uID0gZnVuY3Rpb24oZW1pdHRlciwgdHlwZSwgZikge1xuICAgIGlmIChlbWl0dGVyLmFkZEV2ZW50TGlzdGVuZXIpXG4gICAgICBlbWl0dGVyLmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgZiwgZmFsc2UpO1xuICAgIGVsc2UgaWYgKGVtaXR0ZXIuYXR0YWNoRXZlbnQpXG4gICAgICBlbWl0dGVyLmF0dGFjaEV2ZW50KFwib25cIiArIHR5cGUsIGYpO1xuICAgIGVsc2Uge1xuICAgICAgdmFyIG1hcCA9IGVtaXR0ZXIuX2hhbmRsZXJzIHx8IChlbWl0dGVyLl9oYW5kbGVycyA9IHt9KTtcbiAgICAgIHZhciBhcnIgPSBtYXBbdHlwZV0gfHwgKG1hcFt0eXBlXSA9IFtdKTtcbiAgICAgIGFyci5wdXNoKGYpO1xuICAgIH1cbiAgfTtcblxuICB2YXIgbm9IYW5kbGVycyA9IFtdXG4gIGZ1bmN0aW9uIGdldEhhbmRsZXJzKGVtaXR0ZXIsIHR5cGUsIGNvcHkpIHtcbiAgICB2YXIgYXJyID0gZW1pdHRlci5faGFuZGxlcnMgJiYgZW1pdHRlci5faGFuZGxlcnNbdHlwZV1cbiAgICBpZiAoY29weSkgcmV0dXJuIGFyciAmJiBhcnIubGVuZ3RoID4gMCA/IGFyci5zbGljZSgpIDogbm9IYW5kbGVyc1xuICAgIGVsc2UgcmV0dXJuIGFyciB8fCBub0hhbmRsZXJzXG4gIH1cblxuICB2YXIgb2ZmID0gQ29kZU1pcnJvci5vZmYgPSBmdW5jdGlvbihlbWl0dGVyLCB0eXBlLCBmKSB7XG4gICAgaWYgKGVtaXR0ZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcilcbiAgICAgIGVtaXR0ZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBmLCBmYWxzZSk7XG4gICAgZWxzZSBpZiAoZW1pdHRlci5kZXRhY2hFdmVudClcbiAgICAgIGVtaXR0ZXIuZGV0YWNoRXZlbnQoXCJvblwiICsgdHlwZSwgZik7XG4gICAgZWxzZSB7XG4gICAgICB2YXIgaGFuZGxlcnMgPSBnZXRIYW5kbGVycyhlbWl0dGVyLCB0eXBlLCBmYWxzZSlcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaGFuZGxlcnMubGVuZ3RoOyArK2kpXG4gICAgICAgIGlmIChoYW5kbGVyc1tpXSA9PSBmKSB7IGhhbmRsZXJzLnNwbGljZShpLCAxKTsgYnJlYWs7IH1cbiAgICB9XG4gIH07XG5cbiAgdmFyIHNpZ25hbCA9IENvZGVNaXJyb3Iuc2lnbmFsID0gZnVuY3Rpb24oZW1pdHRlciwgdHlwZSAvKiwgdmFsdWVzLi4uKi8pIHtcbiAgICB2YXIgaGFuZGxlcnMgPSBnZXRIYW5kbGVycyhlbWl0dGVyLCB0eXBlLCB0cnVlKVxuICAgIGlmICghaGFuZGxlcnMubGVuZ3RoKSByZXR1cm47XG4gICAgdmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDIpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaGFuZGxlcnMubGVuZ3RoOyArK2kpIGhhbmRsZXJzW2ldLmFwcGx5KG51bGwsIGFyZ3MpO1xuICB9O1xuXG4gIHZhciBvcnBoYW5EZWxheWVkQ2FsbGJhY2tzID0gbnVsbDtcblxuICAvLyBPZnRlbiwgd2Ugd2FudCB0byBzaWduYWwgZXZlbnRzIGF0IGEgcG9pbnQgd2hlcmUgd2UgYXJlIGluIHRoZVxuICAvLyBtaWRkbGUgb2Ygc29tZSB3b3JrLCBidXQgZG9uJ3Qgd2FudCB0aGUgaGFuZGxlciB0byBzdGFydCBjYWxsaW5nXG4gIC8vIG90aGVyIG1ldGhvZHMgb24gdGhlIGVkaXRvciwgd2hpY2ggbWlnaHQgYmUgaW4gYW4gaW5jb25zaXN0ZW50XG4gIC8vIHN0YXRlIG9yIHNpbXBseSBub3QgZXhwZWN0IGFueSBvdGhlciBldmVudHMgdG8gaGFwcGVuLlxuICAvLyBzaWduYWxMYXRlciBsb29rcyB3aGV0aGVyIHRoZXJlIGFyZSBhbnkgaGFuZGxlcnMsIGFuZCBzY2hlZHVsZXNcbiAgLy8gdGhlbSB0byBiZSBleGVjdXRlZCB3aGVuIHRoZSBsYXN0IG9wZXJhdGlvbiBlbmRzLCBvciwgaWYgbm9cbiAgLy8gb3BlcmF0aW9uIGlzIGFjdGl2ZSwgd2hlbiBhIHRpbWVvdXQgZmlyZXMuXG4gIGZ1bmN0aW9uIHNpZ25hbExhdGVyKGVtaXR0ZXIsIHR5cGUgLyosIHZhbHVlcy4uLiovKSB7XG4gICAgdmFyIGFyciA9IGdldEhhbmRsZXJzKGVtaXR0ZXIsIHR5cGUsIGZhbHNlKVxuICAgIGlmICghYXJyLmxlbmd0aCkgcmV0dXJuO1xuICAgIHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAyKSwgbGlzdDtcbiAgICBpZiAob3BlcmF0aW9uR3JvdXApIHtcbiAgICAgIGxpc3QgPSBvcGVyYXRpb25Hcm91cC5kZWxheWVkQ2FsbGJhY2tzO1xuICAgIH0gZWxzZSBpZiAob3JwaGFuRGVsYXllZENhbGxiYWNrcykge1xuICAgICAgbGlzdCA9IG9ycGhhbkRlbGF5ZWRDYWxsYmFja3M7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxpc3QgPSBvcnBoYW5EZWxheWVkQ2FsbGJhY2tzID0gW107XG4gICAgICBzZXRUaW1lb3V0KGZpcmVPcnBoYW5EZWxheWVkLCAwKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gYm5kKGYpIHtyZXR1cm4gZnVuY3Rpb24oKXtmLmFwcGx5KG51bGwsIGFyZ3MpO307fTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7ICsraSlcbiAgICAgIGxpc3QucHVzaChibmQoYXJyW2ldKSk7XG4gIH1cblxuICBmdW5jdGlvbiBmaXJlT3JwaGFuRGVsYXllZCgpIHtcbiAgICB2YXIgZGVsYXllZCA9IG9ycGhhbkRlbGF5ZWRDYWxsYmFja3M7XG4gICAgb3JwaGFuRGVsYXllZENhbGxiYWNrcyA9IG51bGw7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkZWxheWVkLmxlbmd0aDsgKytpKSBkZWxheWVkW2ldKCk7XG4gIH1cblxuICAvLyBUaGUgRE9NIGV2ZW50cyB0aGF0IENvZGVNaXJyb3IgaGFuZGxlcyBjYW4gYmUgb3ZlcnJpZGRlbiBieVxuICAvLyByZWdpc3RlcmluZyBhIChub24tRE9NKSBoYW5kbGVyIG9uIHRoZSBlZGl0b3IgZm9yIHRoZSBldmVudCBuYW1lLFxuICAvLyBhbmQgcHJldmVudERlZmF1bHQtaW5nIHRoZSBldmVudCBpbiB0aGF0IGhhbmRsZXIuXG4gIGZ1bmN0aW9uIHNpZ25hbERPTUV2ZW50KGNtLCBlLCBvdmVycmlkZSkge1xuICAgIGlmICh0eXBlb2YgZSA9PSBcInN0cmluZ1wiKVxuICAgICAgZSA9IHt0eXBlOiBlLCBwcmV2ZW50RGVmYXVsdDogZnVuY3Rpb24oKSB7IHRoaXMuZGVmYXVsdFByZXZlbnRlZCA9IHRydWU7IH19O1xuICAgIHNpZ25hbChjbSwgb3ZlcnJpZGUgfHwgZS50eXBlLCBjbSwgZSk7XG4gICAgcmV0dXJuIGVfZGVmYXVsdFByZXZlbnRlZChlKSB8fCBlLmNvZGVtaXJyb3JJZ25vcmU7XG4gIH1cblxuICBmdW5jdGlvbiBzaWduYWxDdXJzb3JBY3Rpdml0eShjbSkge1xuICAgIHZhciBhcnIgPSBjbS5faGFuZGxlcnMgJiYgY20uX2hhbmRsZXJzLmN1cnNvckFjdGl2aXR5O1xuICAgIGlmICghYXJyKSByZXR1cm47XG4gICAgdmFyIHNldCA9IGNtLmN1ck9wLmN1cnNvckFjdGl2aXR5SGFuZGxlcnMgfHwgKGNtLmN1ck9wLmN1cnNvckFjdGl2aXR5SGFuZGxlcnMgPSBbXSk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyArK2kpIGlmIChpbmRleE9mKHNldCwgYXJyW2ldKSA9PSAtMSlcbiAgICAgIHNldC5wdXNoKGFycltpXSk7XG4gIH1cblxuICBmdW5jdGlvbiBoYXNIYW5kbGVyKGVtaXR0ZXIsIHR5cGUpIHtcbiAgICByZXR1cm4gZ2V0SGFuZGxlcnMoZW1pdHRlciwgdHlwZSkubGVuZ3RoID4gMFxuICB9XG5cbiAgLy8gQWRkIG9uIGFuZCBvZmYgbWV0aG9kcyB0byBhIGNvbnN0cnVjdG9yJ3MgcHJvdG90eXBlLCB0byBtYWtlXG4gIC8vIHJlZ2lzdGVyaW5nIGV2ZW50cyBvbiBzdWNoIG9iamVjdHMgbW9yZSBjb252ZW5pZW50LlxuICBmdW5jdGlvbiBldmVudE1peGluKGN0b3IpIHtcbiAgICBjdG9yLnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uKHR5cGUsIGYpIHtvbih0aGlzLCB0eXBlLCBmKTt9O1xuICAgIGN0b3IucHJvdG90eXBlLm9mZiA9IGZ1bmN0aW9uKHR5cGUsIGYpIHtvZmYodGhpcywgdHlwZSwgZik7fTtcbiAgfVxuXG4gIC8vIE1JU0MgVVRJTElUSUVTXG5cbiAgLy8gTnVtYmVyIG9mIHBpeGVscyBhZGRlZCB0byBzY3JvbGxlciBhbmQgc2l6ZXIgdG8gaGlkZSBzY3JvbGxiYXJcbiAgdmFyIHNjcm9sbGVyR2FwID0gMzA7XG5cbiAgLy8gUmV0dXJuZWQgb3IgdGhyb3duIGJ5IHZhcmlvdXMgcHJvdG9jb2xzIHRvIHNpZ25hbCAnSSdtIG5vdFxuICAvLyBoYW5kbGluZyB0aGlzJy5cbiAgdmFyIFBhc3MgPSBDb2RlTWlycm9yLlBhc3MgPSB7dG9TdHJpbmc6IGZ1bmN0aW9uKCl7cmV0dXJuIFwiQ29kZU1pcnJvci5QYXNzXCI7fX07XG5cbiAgLy8gUmV1c2VkIG9wdGlvbiBvYmplY3RzIGZvciBzZXRTZWxlY3Rpb24gJiBmcmllbmRzXG4gIHZhciBzZWxfZG9udFNjcm9sbCA9IHtzY3JvbGw6IGZhbHNlfSwgc2VsX21vdXNlID0ge29yaWdpbjogXCIqbW91c2VcIn0sIHNlbF9tb3ZlID0ge29yaWdpbjogXCIrbW92ZVwifTtcblxuICBmdW5jdGlvbiBEZWxheWVkKCkge3RoaXMuaWQgPSBudWxsO31cbiAgRGVsYXllZC5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24obXMsIGYpIHtcbiAgICBjbGVhclRpbWVvdXQodGhpcy5pZCk7XG4gICAgdGhpcy5pZCA9IHNldFRpbWVvdXQoZiwgbXMpO1xuICB9O1xuXG4gIC8vIENvdW50cyB0aGUgY29sdW1uIG9mZnNldCBpbiBhIHN0cmluZywgdGFraW5nIHRhYnMgaW50byBhY2NvdW50LlxuICAvLyBVc2VkIG1vc3RseSB0byBmaW5kIGluZGVudGF0aW9uLlxuICB2YXIgY291bnRDb2x1bW4gPSBDb2RlTWlycm9yLmNvdW50Q29sdW1uID0gZnVuY3Rpb24oc3RyaW5nLCBlbmQsIHRhYlNpemUsIHN0YXJ0SW5kZXgsIHN0YXJ0VmFsdWUpIHtcbiAgICBpZiAoZW5kID09IG51bGwpIHtcbiAgICAgIGVuZCA9IHN0cmluZy5zZWFyY2goL1teXFxzXFx1MDBhMF0vKTtcbiAgICAgIGlmIChlbmQgPT0gLTEpIGVuZCA9IHN0cmluZy5sZW5ndGg7XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSBzdGFydEluZGV4IHx8IDAsIG4gPSBzdGFydFZhbHVlIHx8IDA7Oykge1xuICAgICAgdmFyIG5leHRUYWIgPSBzdHJpbmcuaW5kZXhPZihcIlxcdFwiLCBpKTtcbiAgICAgIGlmIChuZXh0VGFiIDwgMCB8fCBuZXh0VGFiID49IGVuZClcbiAgICAgICAgcmV0dXJuIG4gKyAoZW5kIC0gaSk7XG4gICAgICBuICs9IG5leHRUYWIgLSBpO1xuICAgICAgbiArPSB0YWJTaXplIC0gKG4gJSB0YWJTaXplKTtcbiAgICAgIGkgPSBuZXh0VGFiICsgMTtcbiAgICB9XG4gIH07XG5cbiAgLy8gVGhlIGludmVyc2Ugb2YgY291bnRDb2x1bW4gLS0gZmluZCB0aGUgb2Zmc2V0IHRoYXQgY29ycmVzcG9uZHMgdG9cbiAgLy8gYSBwYXJ0aWN1bGFyIGNvbHVtbi5cbiAgdmFyIGZpbmRDb2x1bW4gPSBDb2RlTWlycm9yLmZpbmRDb2x1bW4gPSBmdW5jdGlvbihzdHJpbmcsIGdvYWwsIHRhYlNpemUpIHtcbiAgICBmb3IgKHZhciBwb3MgPSAwLCBjb2wgPSAwOzspIHtcbiAgICAgIHZhciBuZXh0VGFiID0gc3RyaW5nLmluZGV4T2YoXCJcXHRcIiwgcG9zKTtcbiAgICAgIGlmIChuZXh0VGFiID09IC0xKSBuZXh0VGFiID0gc3RyaW5nLmxlbmd0aDtcbiAgICAgIHZhciBza2lwcGVkID0gbmV4dFRhYiAtIHBvcztcbiAgICAgIGlmIChuZXh0VGFiID09IHN0cmluZy5sZW5ndGggfHwgY29sICsgc2tpcHBlZCA+PSBnb2FsKVxuICAgICAgICByZXR1cm4gcG9zICsgTWF0aC5taW4oc2tpcHBlZCwgZ29hbCAtIGNvbCk7XG4gICAgICBjb2wgKz0gbmV4dFRhYiAtIHBvcztcbiAgICAgIGNvbCArPSB0YWJTaXplIC0gKGNvbCAlIHRhYlNpemUpO1xuICAgICAgcG9zID0gbmV4dFRhYiArIDE7XG4gICAgICBpZiAoY29sID49IGdvYWwpIHJldHVybiBwb3M7XG4gICAgfVxuICB9XG5cbiAgdmFyIHNwYWNlU3RycyA9IFtcIlwiXTtcbiAgZnVuY3Rpb24gc3BhY2VTdHIobikge1xuICAgIHdoaWxlIChzcGFjZVN0cnMubGVuZ3RoIDw9IG4pXG4gICAgICBzcGFjZVN0cnMucHVzaChsc3Qoc3BhY2VTdHJzKSArIFwiIFwiKTtcbiAgICByZXR1cm4gc3BhY2VTdHJzW25dO1xuICB9XG5cbiAgZnVuY3Rpb24gbHN0KGFycikgeyByZXR1cm4gYXJyW2Fyci5sZW5ndGgtMV07IH1cblxuICB2YXIgc2VsZWN0SW5wdXQgPSBmdW5jdGlvbihub2RlKSB7IG5vZGUuc2VsZWN0KCk7IH07XG4gIGlmIChpb3MpIC8vIE1vYmlsZSBTYWZhcmkgYXBwYXJlbnRseSBoYXMgYSBidWcgd2hlcmUgc2VsZWN0KCkgaXMgYnJva2VuLlxuICAgIHNlbGVjdElucHV0ID0gZnVuY3Rpb24obm9kZSkgeyBub2RlLnNlbGVjdGlvblN0YXJ0ID0gMDsgbm9kZS5zZWxlY3Rpb25FbmQgPSBub2RlLnZhbHVlLmxlbmd0aDsgfTtcbiAgZWxzZSBpZiAoaWUpIC8vIFN1cHByZXNzIG15c3RlcmlvdXMgSUUxMCBlcnJvcnNcbiAgICBzZWxlY3RJbnB1dCA9IGZ1bmN0aW9uKG5vZGUpIHsgdHJ5IHsgbm9kZS5zZWxlY3QoKTsgfSBjYXRjaChfZSkge30gfTtcblxuICBmdW5jdGlvbiBpbmRleE9mKGFycmF5LCBlbHQpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgKytpKVxuICAgICAgaWYgKGFycmF5W2ldID09IGVsdCkgcmV0dXJuIGk7XG4gICAgcmV0dXJuIC0xO1xuICB9XG4gIGZ1bmN0aW9uIG1hcChhcnJheSwgZikge1xuICAgIHZhciBvdXQgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKSBvdXRbaV0gPSBmKGFycmF5W2ldLCBpKTtcbiAgICByZXR1cm4gb3V0O1xuICB9XG5cbiAgZnVuY3Rpb24gbm90aGluZygpIHt9XG5cbiAgZnVuY3Rpb24gY3JlYXRlT2JqKGJhc2UsIHByb3BzKSB7XG4gICAgdmFyIGluc3Q7XG4gICAgaWYgKE9iamVjdC5jcmVhdGUpIHtcbiAgICAgIGluc3QgPSBPYmplY3QuY3JlYXRlKGJhc2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICBub3RoaW5nLnByb3RvdHlwZSA9IGJhc2U7XG4gICAgICBpbnN0ID0gbmV3IG5vdGhpbmcoKTtcbiAgICB9XG4gICAgaWYgKHByb3BzKSBjb3B5T2JqKHByb3BzLCBpbnN0KTtcbiAgICByZXR1cm4gaW5zdDtcbiAgfTtcblxuICBmdW5jdGlvbiBjb3B5T2JqKG9iaiwgdGFyZ2V0LCBvdmVyd3JpdGUpIHtcbiAgICBpZiAoIXRhcmdldCkgdGFyZ2V0ID0ge307XG4gICAgZm9yICh2YXIgcHJvcCBpbiBvYmopXG4gICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KHByb3ApICYmIChvdmVyd3JpdGUgIT09IGZhbHNlIHx8ICF0YXJnZXQuaGFzT3duUHJvcGVydHkocHJvcCkpKVxuICAgICAgICB0YXJnZXRbcHJvcF0gPSBvYmpbcHJvcF07XG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGJpbmQoZikge1xuICAgIHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcbiAgICByZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZi5hcHBseShudWxsLCBhcmdzKTt9O1xuICB9XG5cbiAgdmFyIG5vbkFTQ0lJU2luZ2xlQ2FzZVdvcmRDaGFyID0gL1tcXHUwMGRmXFx1MDU4N1xcdTA1OTAtXFx1MDVmNFxcdTA2MDAtXFx1MDZmZlxcdTMwNDAtXFx1MzA5ZlxcdTMwYTAtXFx1MzBmZlxcdTM0MDAtXFx1NGRiNVxcdTRlMDAtXFx1OWZjY1xcdWFjMDAtXFx1ZDdhZl0vO1xuICB2YXIgaXNXb3JkQ2hhckJhc2ljID0gQ29kZU1pcnJvci5pc1dvcmRDaGFyID0gZnVuY3Rpb24oY2gpIHtcbiAgICByZXR1cm4gL1xcdy8udGVzdChjaCkgfHwgY2ggPiBcIlxceDgwXCIgJiZcbiAgICAgIChjaC50b1VwcGVyQ2FzZSgpICE9IGNoLnRvTG93ZXJDYXNlKCkgfHwgbm9uQVNDSUlTaW5nbGVDYXNlV29yZENoYXIudGVzdChjaCkpO1xuICB9O1xuICBmdW5jdGlvbiBpc1dvcmRDaGFyKGNoLCBoZWxwZXIpIHtcbiAgICBpZiAoIWhlbHBlcikgcmV0dXJuIGlzV29yZENoYXJCYXNpYyhjaCk7XG4gICAgaWYgKGhlbHBlci5zb3VyY2UuaW5kZXhPZihcIlxcXFx3XCIpID4gLTEgJiYgaXNXb3JkQ2hhckJhc2ljKGNoKSkgcmV0dXJuIHRydWU7XG4gICAgcmV0dXJuIGhlbHBlci50ZXN0KGNoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGlzRW1wdHkob2JqKSB7XG4gICAgZm9yICh2YXIgbiBpbiBvYmopIGlmIChvYmouaGFzT3duUHJvcGVydHkobikgJiYgb2JqW25dKSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvLyBFeHRlbmRpbmcgdW5pY29kZSBjaGFyYWN0ZXJzLiBBIHNlcmllcyBvZiBhIG5vbi1leHRlbmRpbmcgY2hhciArXG4gIC8vIGFueSBudW1iZXIgb2YgZXh0ZW5kaW5nIGNoYXJzIGlzIHRyZWF0ZWQgYXMgYSBzaW5nbGUgdW5pdCBhcyBmYXJcbiAgLy8gYXMgZWRpdGluZyBhbmQgbWVhc3VyaW5nIGlzIGNvbmNlcm5lZC4gVGhpcyBpcyBub3QgZnVsbHkgY29ycmVjdCxcbiAgLy8gc2luY2Ugc29tZSBzY3JpcHRzL2ZvbnRzL2Jyb3dzZXJzIGFsc28gdHJlYXQgb3RoZXIgY29uZmlndXJhdGlvbnNcbiAgLy8gb2YgY29kZSBwb2ludHMgYXMgYSBncm91cC5cbiAgdmFyIGV4dGVuZGluZ0NoYXJzID0gL1tcXHUwMzAwLVxcdTAzNmZcXHUwNDgzLVxcdTA0ODlcXHUwNTkxLVxcdTA1YmRcXHUwNWJmXFx1MDVjMVxcdTA1YzJcXHUwNWM0XFx1MDVjNVxcdTA1YzdcXHUwNjEwLVxcdTA2MWFcXHUwNjRiLVxcdTA2NWVcXHUwNjcwXFx1MDZkNi1cXHUwNmRjXFx1MDZkZS1cXHUwNmU0XFx1MDZlN1xcdTA2ZThcXHUwNmVhLVxcdTA2ZWRcXHUwNzExXFx1MDczMC1cXHUwNzRhXFx1MDdhNi1cXHUwN2IwXFx1MDdlYi1cXHUwN2YzXFx1MDgxNi1cXHUwODE5XFx1MDgxYi1cXHUwODIzXFx1MDgyNS1cXHUwODI3XFx1MDgyOS1cXHUwODJkXFx1MDkwMC1cXHUwOTAyXFx1MDkzY1xcdTA5NDEtXFx1MDk0OFxcdTA5NGRcXHUwOTUxLVxcdTA5NTVcXHUwOTYyXFx1MDk2M1xcdTA5ODFcXHUwOWJjXFx1MDliZVxcdTA5YzEtXFx1MDljNFxcdTA5Y2RcXHUwOWQ3XFx1MDllMlxcdTA5ZTNcXHUwYTAxXFx1MGEwMlxcdTBhM2NcXHUwYTQxXFx1MGE0MlxcdTBhNDdcXHUwYTQ4XFx1MGE0Yi1cXHUwYTRkXFx1MGE1MVxcdTBhNzBcXHUwYTcxXFx1MGE3NVxcdTBhODFcXHUwYTgyXFx1MGFiY1xcdTBhYzEtXFx1MGFjNVxcdTBhYzdcXHUwYWM4XFx1MGFjZFxcdTBhZTJcXHUwYWUzXFx1MGIwMVxcdTBiM2NcXHUwYjNlXFx1MGIzZlxcdTBiNDEtXFx1MGI0NFxcdTBiNGRcXHUwYjU2XFx1MGI1N1xcdTBiNjJcXHUwYjYzXFx1MGI4MlxcdTBiYmVcXHUwYmMwXFx1MGJjZFxcdTBiZDdcXHUwYzNlLVxcdTBjNDBcXHUwYzQ2LVxcdTBjNDhcXHUwYzRhLVxcdTBjNGRcXHUwYzU1XFx1MGM1NlxcdTBjNjJcXHUwYzYzXFx1MGNiY1xcdTBjYmZcXHUwY2MyXFx1MGNjNlxcdTBjY2NcXHUwY2NkXFx1MGNkNVxcdTBjZDZcXHUwY2UyXFx1MGNlM1xcdTBkM2VcXHUwZDQxLVxcdTBkNDRcXHUwZDRkXFx1MGQ1N1xcdTBkNjJcXHUwZDYzXFx1MGRjYVxcdTBkY2ZcXHUwZGQyLVxcdTBkZDRcXHUwZGQ2XFx1MGRkZlxcdTBlMzFcXHUwZTM0LVxcdTBlM2FcXHUwZTQ3LVxcdTBlNGVcXHUwZWIxXFx1MGViNC1cXHUwZWI5XFx1MGViYlxcdTBlYmNcXHUwZWM4LVxcdTBlY2RcXHUwZjE4XFx1MGYxOVxcdTBmMzVcXHUwZjM3XFx1MGYzOVxcdTBmNzEtXFx1MGY3ZVxcdTBmODAtXFx1MGY4NFxcdTBmODZcXHUwZjg3XFx1MGY5MC1cXHUwZjk3XFx1MGY5OS1cXHUwZmJjXFx1MGZjNlxcdTEwMmQtXFx1MTAzMFxcdTEwMzItXFx1MTAzN1xcdTEwMzlcXHUxMDNhXFx1MTAzZFxcdTEwM2VcXHUxMDU4XFx1MTA1OVxcdTEwNWUtXFx1MTA2MFxcdTEwNzEtXFx1MTA3NFxcdTEwODJcXHUxMDg1XFx1MTA4NlxcdTEwOGRcXHUxMDlkXFx1MTM1ZlxcdTE3MTItXFx1MTcxNFxcdTE3MzItXFx1MTczNFxcdTE3NTJcXHUxNzUzXFx1MTc3MlxcdTE3NzNcXHUxN2I3LVxcdTE3YmRcXHUxN2M2XFx1MTdjOS1cXHUxN2QzXFx1MTdkZFxcdTE4MGItXFx1MTgwZFxcdTE4YTlcXHUxOTIwLVxcdTE5MjJcXHUxOTI3XFx1MTkyOFxcdTE5MzJcXHUxOTM5LVxcdTE5M2JcXHUxYTE3XFx1MWExOFxcdTFhNTZcXHUxYTU4LVxcdTFhNWVcXHUxYTYwXFx1MWE2MlxcdTFhNjUtXFx1MWE2Y1xcdTFhNzMtXFx1MWE3Y1xcdTFhN2ZcXHUxYjAwLVxcdTFiMDNcXHUxYjM0XFx1MWIzNi1cXHUxYjNhXFx1MWIzY1xcdTFiNDJcXHUxYjZiLVxcdTFiNzNcXHUxYjgwXFx1MWI4MVxcdTFiYTItXFx1MWJhNVxcdTFiYThcXHUxYmE5XFx1MWMyYy1cXHUxYzMzXFx1MWMzNlxcdTFjMzdcXHUxY2QwLVxcdTFjZDJcXHUxY2Q0LVxcdTFjZTBcXHUxY2UyLVxcdTFjZThcXHUxY2VkXFx1MWRjMC1cXHUxZGU2XFx1MWRmZC1cXHUxZGZmXFx1MjAwY1xcdTIwMGRcXHUyMGQwLVxcdTIwZjBcXHUyY2VmLVxcdTJjZjFcXHUyZGUwLVxcdTJkZmZcXHUzMDJhLVxcdTMwMmZcXHUzMDk5XFx1MzA5YVxcdWE2NmYtXFx1YTY3MlxcdWE2N2NcXHVhNjdkXFx1YTZmMFxcdWE2ZjFcXHVhODAyXFx1YTgwNlxcdWE4MGJcXHVhODI1XFx1YTgyNlxcdWE4YzRcXHVhOGUwLVxcdWE4ZjFcXHVhOTI2LVxcdWE5MmRcXHVhOTQ3LVxcdWE5NTFcXHVhOTgwLVxcdWE5ODJcXHVhOWIzXFx1YTliNi1cXHVhOWI5XFx1YTliY1xcdWFhMjktXFx1YWEyZVxcdWFhMzFcXHVhYTMyXFx1YWEzNVxcdWFhMzZcXHVhYTQzXFx1YWE0Y1xcdWFhYjBcXHVhYWIyLVxcdWFhYjRcXHVhYWI3XFx1YWFiOFxcdWFhYmVcXHVhYWJmXFx1YWFjMVxcdWFiZTVcXHVhYmU4XFx1YWJlZFxcdWRjMDAtXFx1ZGZmZlxcdWZiMWVcXHVmZTAwLVxcdWZlMGZcXHVmZTIwLVxcdWZlMjZcXHVmZjllXFx1ZmY5Zl0vO1xuICBmdW5jdGlvbiBpc0V4dGVuZGluZ0NoYXIoY2gpIHsgcmV0dXJuIGNoLmNoYXJDb2RlQXQoMCkgPj0gNzY4ICYmIGV4dGVuZGluZ0NoYXJzLnRlc3QoY2gpOyB9XG5cbiAgLy8gRE9NIFVUSUxJVElFU1xuXG4gIGZ1bmN0aW9uIGVsdCh0YWcsIGNvbnRlbnQsIGNsYXNzTmFtZSwgc3R5bGUpIHtcbiAgICB2YXIgZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnKTtcbiAgICBpZiAoY2xhc3NOYW1lKSBlLmNsYXNzTmFtZSA9IGNsYXNzTmFtZTtcbiAgICBpZiAoc3R5bGUpIGUuc3R5bGUuY3NzVGV4dCA9IHN0eWxlO1xuICAgIGlmICh0eXBlb2YgY29udGVudCA9PSBcInN0cmluZ1wiKSBlLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNvbnRlbnQpKTtcbiAgICBlbHNlIGlmIChjb250ZW50KSBmb3IgKHZhciBpID0gMDsgaSA8IGNvbnRlbnQubGVuZ3RoOyArK2kpIGUuYXBwZW5kQ2hpbGQoY29udGVudFtpXSk7XG4gICAgcmV0dXJuIGU7XG4gIH1cblxuICB2YXIgcmFuZ2U7XG4gIGlmIChkb2N1bWVudC5jcmVhdGVSYW5nZSkgcmFuZ2UgPSBmdW5jdGlvbihub2RlLCBzdGFydCwgZW5kLCBlbmROb2RlKSB7XG4gICAgdmFyIHIgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpO1xuICAgIHIuc2V0RW5kKGVuZE5vZGUgfHwgbm9kZSwgZW5kKTtcbiAgICByLnNldFN0YXJ0KG5vZGUsIHN0YXJ0KTtcbiAgICByZXR1cm4gcjtcbiAgfTtcbiAgZWxzZSByYW5nZSA9IGZ1bmN0aW9uKG5vZGUsIHN0YXJ0LCBlbmQpIHtcbiAgICB2YXIgciA9IGRvY3VtZW50LmJvZHkuY3JlYXRlVGV4dFJhbmdlKCk7XG4gICAgdHJ5IHsgci5tb3ZlVG9FbGVtZW50VGV4dChub2RlLnBhcmVudE5vZGUpOyB9XG4gICAgY2F0Y2goZSkgeyByZXR1cm4gcjsgfVxuICAgIHIuY29sbGFwc2UodHJ1ZSk7XG4gICAgci5tb3ZlRW5kKFwiY2hhcmFjdGVyXCIsIGVuZCk7XG4gICAgci5tb3ZlU3RhcnQoXCJjaGFyYWN0ZXJcIiwgc3RhcnQpO1xuICAgIHJldHVybiByO1xuICB9O1xuXG4gIGZ1bmN0aW9uIHJlbW92ZUNoaWxkcmVuKGUpIHtcbiAgICBmb3IgKHZhciBjb3VudCA9IGUuY2hpbGROb2Rlcy5sZW5ndGg7IGNvdW50ID4gMDsgLS1jb3VudClcbiAgICAgIGUucmVtb3ZlQ2hpbGQoZS5maXJzdENoaWxkKTtcbiAgICByZXR1cm4gZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbW92ZUNoaWxkcmVuQW5kQWRkKHBhcmVudCwgZSkge1xuICAgIHJldHVybiByZW1vdmVDaGlsZHJlbihwYXJlbnQpLmFwcGVuZENoaWxkKGUpO1xuICB9XG5cbiAgdmFyIGNvbnRhaW5zID0gQ29kZU1pcnJvci5jb250YWlucyA9IGZ1bmN0aW9uKHBhcmVudCwgY2hpbGQpIHtcbiAgICBpZiAoY2hpbGQubm9kZVR5cGUgPT0gMykgLy8gQW5kcm9pZCBicm93c2VyIGFsd2F5cyByZXR1cm5zIGZhbHNlIHdoZW4gY2hpbGQgaXMgYSB0ZXh0bm9kZVxuICAgICAgY2hpbGQgPSBjaGlsZC5wYXJlbnROb2RlO1xuICAgIGlmIChwYXJlbnQuY29udGFpbnMpXG4gICAgICByZXR1cm4gcGFyZW50LmNvbnRhaW5zKGNoaWxkKTtcbiAgICBkbyB7XG4gICAgICBpZiAoY2hpbGQubm9kZVR5cGUgPT0gMTEpIGNoaWxkID0gY2hpbGQuaG9zdDtcbiAgICAgIGlmIChjaGlsZCA9PSBwYXJlbnQpIHJldHVybiB0cnVlO1xuICAgIH0gd2hpbGUgKGNoaWxkID0gY2hpbGQucGFyZW50Tm9kZSk7XG4gIH07XG5cbiAgZnVuY3Rpb24gYWN0aXZlRWx0KCkge1xuICAgIHZhciBhY3RpdmVFbGVtZW50ID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtcbiAgICB3aGlsZSAoYWN0aXZlRWxlbWVudCAmJiBhY3RpdmVFbGVtZW50LnJvb3QgJiYgYWN0aXZlRWxlbWVudC5yb290LmFjdGl2ZUVsZW1lbnQpXG4gICAgICBhY3RpdmVFbGVtZW50ID0gYWN0aXZlRWxlbWVudC5yb290LmFjdGl2ZUVsZW1lbnQ7XG4gICAgcmV0dXJuIGFjdGl2ZUVsZW1lbnQ7XG4gIH1cbiAgLy8gT2xkZXIgdmVyc2lvbnMgb2YgSUUgdGhyb3dzIHVuc3BlY2lmaWVkIGVycm9yIHdoZW4gdG91Y2hpbmdcbiAgLy8gZG9jdW1lbnQuYWN0aXZlRWxlbWVudCBpbiBzb21lIGNhc2VzIChkdXJpbmcgbG9hZGluZywgaW4gaWZyYW1lKVxuICBpZiAoaWUgJiYgaWVfdmVyc2lvbiA8IDExKSBhY3RpdmVFbHQgPSBmdW5jdGlvbigpIHtcbiAgICB0cnkgeyByZXR1cm4gZG9jdW1lbnQuYWN0aXZlRWxlbWVudDsgfVxuICAgIGNhdGNoKGUpIHsgcmV0dXJuIGRvY3VtZW50LmJvZHk7IH1cbiAgfTtcblxuICBmdW5jdGlvbiBjbGFzc1Rlc3QoY2xzKSB7IHJldHVybiBuZXcgUmVnRXhwKFwiKF58XFxcXHMpXCIgKyBjbHMgKyBcIig/OiR8XFxcXHMpXFxcXHMqXCIpOyB9XG4gIHZhciBybUNsYXNzID0gQ29kZU1pcnJvci5ybUNsYXNzID0gZnVuY3Rpb24obm9kZSwgY2xzKSB7XG4gICAgdmFyIGN1cnJlbnQgPSBub2RlLmNsYXNzTmFtZTtcbiAgICB2YXIgbWF0Y2ggPSBjbGFzc1Rlc3QoY2xzKS5leGVjKGN1cnJlbnQpO1xuICAgIGlmIChtYXRjaCkge1xuICAgICAgdmFyIGFmdGVyID0gY3VycmVudC5zbGljZShtYXRjaC5pbmRleCArIG1hdGNoWzBdLmxlbmd0aCk7XG4gICAgICBub2RlLmNsYXNzTmFtZSA9IGN1cnJlbnQuc2xpY2UoMCwgbWF0Y2guaW5kZXgpICsgKGFmdGVyID8gbWF0Y2hbMV0gKyBhZnRlciA6IFwiXCIpO1xuICAgIH1cbiAgfTtcbiAgdmFyIGFkZENsYXNzID0gQ29kZU1pcnJvci5hZGRDbGFzcyA9IGZ1bmN0aW9uKG5vZGUsIGNscykge1xuICAgIHZhciBjdXJyZW50ID0gbm9kZS5jbGFzc05hbWU7XG4gICAgaWYgKCFjbGFzc1Rlc3QoY2xzKS50ZXN0KGN1cnJlbnQpKSBub2RlLmNsYXNzTmFtZSArPSAoY3VycmVudCA/IFwiIFwiIDogXCJcIikgKyBjbHM7XG4gIH07XG4gIGZ1bmN0aW9uIGpvaW5DbGFzc2VzKGEsIGIpIHtcbiAgICB2YXIgYXMgPSBhLnNwbGl0KFwiIFwiKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFzLmxlbmd0aDsgaSsrKVxuICAgICAgaWYgKGFzW2ldICYmICFjbGFzc1Rlc3QoYXNbaV0pLnRlc3QoYikpIGIgKz0gXCIgXCIgKyBhc1tpXTtcbiAgICByZXR1cm4gYjtcbiAgfVxuXG4gIC8vIFdJTkRPVy1XSURFIEVWRU5UU1xuXG4gIC8vIFRoZXNlIG11c3QgYmUgaGFuZGxlZCBjYXJlZnVsbHksIGJlY2F1c2UgbmFpdmVseSByZWdpc3RlcmluZyBhXG4gIC8vIGhhbmRsZXIgZm9yIGVhY2ggZWRpdG9yIHdpbGwgY2F1c2UgdGhlIGVkaXRvcnMgdG8gbmV2ZXIgYmVcbiAgLy8gZ2FyYmFnZSBjb2xsZWN0ZWQuXG5cbiAgZnVuY3Rpb24gZm9yRWFjaENvZGVNaXJyb3IoZikge1xuICAgIGlmICghZG9jdW1lbnQuYm9keS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKSByZXR1cm47XG4gICAgdmFyIGJ5Q2xhc3MgPSBkb2N1bWVudC5ib2R5LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJDb2RlTWlycm9yXCIpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYnlDbGFzcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGNtID0gYnlDbGFzc1tpXS5Db2RlTWlycm9yO1xuICAgICAgaWYgKGNtKSBmKGNtKTtcbiAgICB9XG4gIH1cblxuICB2YXIgZ2xvYmFsc1JlZ2lzdGVyZWQgPSBmYWxzZTtcbiAgZnVuY3Rpb24gZW5zdXJlR2xvYmFsSGFuZGxlcnMoKSB7XG4gICAgaWYgKGdsb2JhbHNSZWdpc3RlcmVkKSByZXR1cm47XG4gICAgcmVnaXN0ZXJHbG9iYWxIYW5kbGVycygpO1xuICAgIGdsb2JhbHNSZWdpc3RlcmVkID0gdHJ1ZTtcbiAgfVxuICBmdW5jdGlvbiByZWdpc3Rlckdsb2JhbEhhbmRsZXJzKCkge1xuICAgIC8vIFdoZW4gdGhlIHdpbmRvdyByZXNpemVzLCB3ZSBuZWVkIHRvIHJlZnJlc2ggYWN0aXZlIGVkaXRvcnMuXG4gICAgdmFyIHJlc2l6ZVRpbWVyO1xuICAgIG9uKHdpbmRvdywgXCJyZXNpemVcIiwgZnVuY3Rpb24oKSB7XG4gICAgICBpZiAocmVzaXplVGltZXIgPT0gbnVsbCkgcmVzaXplVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICByZXNpemVUaW1lciA9IG51bGw7XG4gICAgICAgIGZvckVhY2hDb2RlTWlycm9yKG9uUmVzaXplKTtcbiAgICAgIH0sIDEwMCk7XG4gICAgfSk7XG4gICAgLy8gV2hlbiB0aGUgd2luZG93IGxvc2VzIGZvY3VzLCB3ZSB3YW50IHRvIHNob3cgdGhlIGVkaXRvciBhcyBibHVycmVkXG4gICAgb24od2luZG93LCBcImJsdXJcIiwgZnVuY3Rpb24oKSB7XG4gICAgICBmb3JFYWNoQ29kZU1pcnJvcihvbkJsdXIpO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gRkVBVFVSRSBERVRFQ1RJT05cblxuICAvLyBEZXRlY3QgZHJhZy1hbmQtZHJvcFxuICB2YXIgZHJhZ0FuZERyb3AgPSBmdW5jdGlvbigpIHtcbiAgICAvLyBUaGVyZSBpcyAqc29tZSoga2luZCBvZiBkcmFnLWFuZC1kcm9wIHN1cHBvcnQgaW4gSUU2LTgsIGJ1dCBJXG4gICAgLy8gY291bGRuJ3QgZ2V0IGl0IHRvIHdvcmsgeWV0LlxuICAgIGlmIChpZSAmJiBpZV92ZXJzaW9uIDwgOSkgcmV0dXJuIGZhbHNlO1xuICAgIHZhciBkaXYgPSBlbHQoJ2RpdicpO1xuICAgIHJldHVybiBcImRyYWdnYWJsZVwiIGluIGRpdiB8fCBcImRyYWdEcm9wXCIgaW4gZGl2O1xuICB9KCk7XG5cbiAgdmFyIHp3c3BTdXBwb3J0ZWQ7XG4gIGZ1bmN0aW9uIHplcm9XaWR0aEVsZW1lbnQobWVhc3VyZSkge1xuICAgIGlmICh6d3NwU3VwcG9ydGVkID09IG51bGwpIHtcbiAgICAgIHZhciB0ZXN0ID0gZWx0KFwic3BhblwiLCBcIlxcdTIwMGJcIik7XG4gICAgICByZW1vdmVDaGlsZHJlbkFuZEFkZChtZWFzdXJlLCBlbHQoXCJzcGFuXCIsIFt0ZXN0LCBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcInhcIildKSk7XG4gICAgICBpZiAobWVhc3VyZS5maXJzdENoaWxkLm9mZnNldEhlaWdodCAhPSAwKVxuICAgICAgICB6d3NwU3VwcG9ydGVkID0gdGVzdC5vZmZzZXRXaWR0aCA8PSAxICYmIHRlc3Qub2Zmc2V0SGVpZ2h0ID4gMiAmJiAhKGllICYmIGllX3ZlcnNpb24gPCA4KTtcbiAgICB9XG4gICAgdmFyIG5vZGUgPSB6d3NwU3VwcG9ydGVkID8gZWx0KFwic3BhblwiLCBcIlxcdTIwMGJcIikgOlxuICAgICAgZWx0KFwic3BhblwiLCBcIlxcdTAwYTBcIiwgbnVsbCwgXCJkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IHdpZHRoOiAxcHg7IG1hcmdpbi1yaWdodDogLTFweFwiKTtcbiAgICBub2RlLnNldEF0dHJpYnV0ZShcImNtLXRleHRcIiwgXCJcIik7XG4gICAgcmV0dXJuIG5vZGU7XG4gIH1cblxuICAvLyBGZWF0dXJlLWRldGVjdCBJRSdzIGNydW1teSBjbGllbnQgcmVjdCByZXBvcnRpbmcgZm9yIGJpZGkgdGV4dFxuICB2YXIgYmFkQmlkaVJlY3RzO1xuICBmdW5jdGlvbiBoYXNCYWRCaWRpUmVjdHMobWVhc3VyZSkge1xuICAgIGlmIChiYWRCaWRpUmVjdHMgIT0gbnVsbCkgcmV0dXJuIGJhZEJpZGlSZWN0cztcbiAgICB2YXIgdHh0ID0gcmVtb3ZlQ2hpbGRyZW5BbmRBZGQobWVhc3VyZSwgZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoXCJBXFx1MDYyZUFcIikpO1xuICAgIHZhciByMCA9IHJhbmdlKHR4dCwgMCwgMSkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgaWYgKCFyMCB8fCByMC5sZWZ0ID09IHIwLnJpZ2h0KSByZXR1cm4gZmFsc2U7IC8vIFNhZmFyaSByZXR1cm5zIG51bGwgaW4gc29tZSBjYXNlcyAoIzI3ODApXG4gICAgdmFyIHIxID0gcmFuZ2UodHh0LCAxLCAyKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICByZXR1cm4gYmFkQmlkaVJlY3RzID0gKHIxLnJpZ2h0IC0gcjAucmlnaHQgPCAzKTtcbiAgfVxuXG4gIC8vIFNlZSBpZiBcIlwiLnNwbGl0IGlzIHRoZSBicm9rZW4gSUUgdmVyc2lvbiwgaWYgc28sIHByb3ZpZGUgYW5cbiAgLy8gYWx0ZXJuYXRpdmUgd2F5IHRvIHNwbGl0IGxpbmVzLlxuICB2YXIgc3BsaXRMaW5lc0F1dG8gPSBDb2RlTWlycm9yLnNwbGl0TGluZXMgPSBcIlxcblxcbmJcIi5zcGxpdCgvXFxuLykubGVuZ3RoICE9IDMgPyBmdW5jdGlvbihzdHJpbmcpIHtcbiAgICB2YXIgcG9zID0gMCwgcmVzdWx0ID0gW10sIGwgPSBzdHJpbmcubGVuZ3RoO1xuICAgIHdoaWxlIChwb3MgPD0gbCkge1xuICAgICAgdmFyIG5sID0gc3RyaW5nLmluZGV4T2YoXCJcXG5cIiwgcG9zKTtcbiAgICAgIGlmIChubCA9PSAtMSkgbmwgPSBzdHJpbmcubGVuZ3RoO1xuICAgICAgdmFyIGxpbmUgPSBzdHJpbmcuc2xpY2UocG9zLCBzdHJpbmcuY2hhckF0KG5sIC0gMSkgPT0gXCJcXHJcIiA/IG5sIC0gMSA6IG5sKTtcbiAgICAgIHZhciBydCA9IGxpbmUuaW5kZXhPZihcIlxcclwiKTtcbiAgICAgIGlmIChydCAhPSAtMSkge1xuICAgICAgICByZXN1bHQucHVzaChsaW5lLnNsaWNlKDAsIHJ0KSk7XG4gICAgICAgIHBvcyArPSBydCArIDE7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQucHVzaChsaW5lKTtcbiAgICAgICAgcG9zID0gbmwgKyAxO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9IDogZnVuY3Rpb24oc3RyaW5nKXtyZXR1cm4gc3RyaW5nLnNwbGl0KC9cXHJcXG4/fFxcbi8pO307XG5cbiAgdmFyIGhhc1NlbGVjdGlvbiA9IHdpbmRvdy5nZXRTZWxlY3Rpb24gPyBmdW5jdGlvbih0ZSkge1xuICAgIHRyeSB7IHJldHVybiB0ZS5zZWxlY3Rpb25TdGFydCAhPSB0ZS5zZWxlY3Rpb25FbmQ7IH1cbiAgICBjYXRjaChlKSB7IHJldHVybiBmYWxzZTsgfVxuICB9IDogZnVuY3Rpb24odGUpIHtcbiAgICB0cnkge3ZhciByYW5nZSA9IHRlLm93bmVyRG9jdW1lbnQuc2VsZWN0aW9uLmNyZWF0ZVJhbmdlKCk7fVxuICAgIGNhdGNoKGUpIHt9XG4gICAgaWYgKCFyYW5nZSB8fCByYW5nZS5wYXJlbnRFbGVtZW50KCkgIT0gdGUpIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gcmFuZ2UuY29tcGFyZUVuZFBvaW50cyhcIlN0YXJ0VG9FbmRcIiwgcmFuZ2UpICE9IDA7XG4gIH07XG5cbiAgdmFyIGhhc0NvcHlFdmVudCA9IChmdW5jdGlvbigpIHtcbiAgICB2YXIgZSA9IGVsdChcImRpdlwiKTtcbiAgICBpZiAoXCJvbmNvcHlcIiBpbiBlKSByZXR1cm4gdHJ1ZTtcbiAgICBlLnNldEF0dHJpYnV0ZShcIm9uY29weVwiLCBcInJldHVybjtcIik7XG4gICAgcmV0dXJuIHR5cGVvZiBlLm9uY29weSA9PSBcImZ1bmN0aW9uXCI7XG4gIH0pKCk7XG5cbiAgdmFyIGJhZFpvb21lZFJlY3RzID0gbnVsbDtcbiAgZnVuY3Rpb24gaGFzQmFkWm9vbWVkUmVjdHMobWVhc3VyZSkge1xuICAgIGlmIChiYWRab29tZWRSZWN0cyAhPSBudWxsKSByZXR1cm4gYmFkWm9vbWVkUmVjdHM7XG4gICAgdmFyIG5vZGUgPSByZW1vdmVDaGlsZHJlbkFuZEFkZChtZWFzdXJlLCBlbHQoXCJzcGFuXCIsIFwieFwiKSk7XG4gICAgdmFyIG5vcm1hbCA9IG5vZGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgdmFyIGZyb21SYW5nZSA9IHJhbmdlKG5vZGUsIDAsIDEpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIHJldHVybiBiYWRab29tZWRSZWN0cyA9IE1hdGguYWJzKG5vcm1hbC5sZWZ0IC0gZnJvbVJhbmdlLmxlZnQpID4gMTtcbiAgfVxuXG4gIC8vIEtFWSBOQU1FU1xuXG4gIHZhciBrZXlOYW1lcyA9IENvZGVNaXJyb3Iua2V5TmFtZXMgPSB7XG4gICAgMzogXCJFbnRlclwiLCA4OiBcIkJhY2tzcGFjZVwiLCA5OiBcIlRhYlwiLCAxMzogXCJFbnRlclwiLCAxNjogXCJTaGlmdFwiLCAxNzogXCJDdHJsXCIsIDE4OiBcIkFsdFwiLFxuICAgIDE5OiBcIlBhdXNlXCIsIDIwOiBcIkNhcHNMb2NrXCIsIDI3OiBcIkVzY1wiLCAzMjogXCJTcGFjZVwiLCAzMzogXCJQYWdlVXBcIiwgMzQ6IFwiUGFnZURvd25cIiwgMzU6IFwiRW5kXCIsXG4gICAgMzY6IFwiSG9tZVwiLCAzNzogXCJMZWZ0XCIsIDM4OiBcIlVwXCIsIDM5OiBcIlJpZ2h0XCIsIDQwOiBcIkRvd25cIiwgNDQ6IFwiUHJpbnRTY3JuXCIsIDQ1OiBcIkluc2VydFwiLFxuICAgIDQ2OiBcIkRlbGV0ZVwiLCA1OTogXCI7XCIsIDYxOiBcIj1cIiwgOTE6IFwiTW9kXCIsIDkyOiBcIk1vZFwiLCA5MzogXCJNb2RcIixcbiAgICAxMDY6IFwiKlwiLCAxMDc6IFwiPVwiLCAxMDk6IFwiLVwiLCAxMTA6IFwiLlwiLCAxMTE6IFwiL1wiLCAxMjc6IFwiRGVsZXRlXCIsXG4gICAgMTczOiBcIi1cIiwgMTg2OiBcIjtcIiwgMTg3OiBcIj1cIiwgMTg4OiBcIixcIiwgMTg5OiBcIi1cIiwgMTkwOiBcIi5cIiwgMTkxOiBcIi9cIiwgMTkyOiBcImBcIiwgMjE5OiBcIltcIiwgMjIwOiBcIlxcXFxcIixcbiAgICAyMjE6IFwiXVwiLCAyMjI6IFwiJ1wiLCA2MzIzMjogXCJVcFwiLCA2MzIzMzogXCJEb3duXCIsIDYzMjM0OiBcIkxlZnRcIiwgNjMyMzU6IFwiUmlnaHRcIiwgNjMyNzI6IFwiRGVsZXRlXCIsXG4gICAgNjMyNzM6IFwiSG9tZVwiLCA2MzI3NTogXCJFbmRcIiwgNjMyNzY6IFwiUGFnZVVwXCIsIDYzMjc3OiBcIlBhZ2VEb3duXCIsIDYzMzAyOiBcIkluc2VydFwiXG4gIH07XG4gIChmdW5jdGlvbigpIHtcbiAgICAvLyBOdW1iZXIga2V5c1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMTA7IGkrKykga2V5TmFtZXNbaSArIDQ4XSA9IGtleU5hbWVzW2kgKyA5Nl0gPSBTdHJpbmcoaSk7XG4gICAgLy8gQWxwaGFiZXRpYyBrZXlzXG4gICAgZm9yICh2YXIgaSA9IDY1OyBpIDw9IDkwOyBpKyspIGtleU5hbWVzW2ldID0gU3RyaW5nLmZyb21DaGFyQ29kZShpKTtcbiAgICAvLyBGdW5jdGlvbiBrZXlzXG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPD0gMTI7IGkrKykga2V5TmFtZXNbaSArIDExMV0gPSBrZXlOYW1lc1tpICsgNjMyMzVdID0gXCJGXCIgKyBpO1xuICB9KSgpO1xuXG4gIC8vIEJJREkgSEVMUEVSU1xuXG4gIGZ1bmN0aW9uIGl0ZXJhdGVCaWRpU2VjdGlvbnMob3JkZXIsIGZyb20sIHRvLCBmKSB7XG4gICAgaWYgKCFvcmRlcikgcmV0dXJuIGYoZnJvbSwgdG8sIFwibHRyXCIpO1xuICAgIHZhciBmb3VuZCA9IGZhbHNlO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3JkZXIubGVuZ3RoOyArK2kpIHtcbiAgICAgIHZhciBwYXJ0ID0gb3JkZXJbaV07XG4gICAgICBpZiAocGFydC5mcm9tIDwgdG8gJiYgcGFydC50byA+IGZyb20gfHwgZnJvbSA9PSB0byAmJiBwYXJ0LnRvID09IGZyb20pIHtcbiAgICAgICAgZihNYXRoLm1heChwYXJ0LmZyb20sIGZyb20pLCBNYXRoLm1pbihwYXJ0LnRvLCB0byksIHBhcnQubGV2ZWwgPT0gMSA/IFwicnRsXCIgOiBcImx0clwiKTtcbiAgICAgICAgZm91bmQgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoIWZvdW5kKSBmKGZyb20sIHRvLCBcImx0clwiKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGJpZGlMZWZ0KHBhcnQpIHsgcmV0dXJuIHBhcnQubGV2ZWwgJSAyID8gcGFydC50byA6IHBhcnQuZnJvbTsgfVxuICBmdW5jdGlvbiBiaWRpUmlnaHQocGFydCkgeyByZXR1cm4gcGFydC5sZXZlbCAlIDIgPyBwYXJ0LmZyb20gOiBwYXJ0LnRvOyB9XG5cbiAgZnVuY3Rpb24gbGluZUxlZnQobGluZSkgeyB2YXIgb3JkZXIgPSBnZXRPcmRlcihsaW5lKTsgcmV0dXJuIG9yZGVyID8gYmlkaUxlZnQob3JkZXJbMF0pIDogMDsgfVxuICBmdW5jdGlvbiBsaW5lUmlnaHQobGluZSkge1xuICAgIHZhciBvcmRlciA9IGdldE9yZGVyKGxpbmUpO1xuICAgIGlmICghb3JkZXIpIHJldHVybiBsaW5lLnRleHQubGVuZ3RoO1xuICAgIHJldHVybiBiaWRpUmlnaHQobHN0KG9yZGVyKSk7XG4gIH1cblxuICBmdW5jdGlvbiBsaW5lU3RhcnQoY20sIGxpbmVOKSB7XG4gICAgdmFyIGxpbmUgPSBnZXRMaW5lKGNtLmRvYywgbGluZU4pO1xuICAgIHZhciB2aXN1YWwgPSB2aXN1YWxMaW5lKGxpbmUpO1xuICAgIGlmICh2aXN1YWwgIT0gbGluZSkgbGluZU4gPSBsaW5lTm8odmlzdWFsKTtcbiAgICB2YXIgb3JkZXIgPSBnZXRPcmRlcih2aXN1YWwpO1xuICAgIHZhciBjaCA9ICFvcmRlciA/IDAgOiBvcmRlclswXS5sZXZlbCAlIDIgPyBsaW5lUmlnaHQodmlzdWFsKSA6IGxpbmVMZWZ0KHZpc3VhbCk7XG4gICAgcmV0dXJuIFBvcyhsaW5lTiwgY2gpO1xuICB9XG4gIGZ1bmN0aW9uIGxpbmVFbmQoY20sIGxpbmVOKSB7XG4gICAgdmFyIG1lcmdlZCwgbGluZSA9IGdldExpbmUoY20uZG9jLCBsaW5lTik7XG4gICAgd2hpbGUgKG1lcmdlZCA9IGNvbGxhcHNlZFNwYW5BdEVuZChsaW5lKSkge1xuICAgICAgbGluZSA9IG1lcmdlZC5maW5kKDEsIHRydWUpLmxpbmU7XG4gICAgICBsaW5lTiA9IG51bGw7XG4gICAgfVxuICAgIHZhciBvcmRlciA9IGdldE9yZGVyKGxpbmUpO1xuICAgIHZhciBjaCA9ICFvcmRlciA/IGxpbmUudGV4dC5sZW5ndGggOiBvcmRlclswXS5sZXZlbCAlIDIgPyBsaW5lTGVmdChsaW5lKSA6IGxpbmVSaWdodChsaW5lKTtcbiAgICByZXR1cm4gUG9zKGxpbmVOID09IG51bGwgPyBsaW5lTm8obGluZSkgOiBsaW5lTiwgY2gpO1xuICB9XG4gIGZ1bmN0aW9uIGxpbmVTdGFydFNtYXJ0KGNtLCBwb3MpIHtcbiAgICB2YXIgc3RhcnQgPSBsaW5lU3RhcnQoY20sIHBvcy5saW5lKTtcbiAgICB2YXIgbGluZSA9IGdldExpbmUoY20uZG9jLCBzdGFydC5saW5lKTtcbiAgICB2YXIgb3JkZXIgPSBnZXRPcmRlcihsaW5lKTtcbiAgICBpZiAoIW9yZGVyIHx8IG9yZGVyWzBdLmxldmVsID09IDApIHtcbiAgICAgIHZhciBmaXJzdE5vbldTID0gTWF0aC5tYXgoMCwgbGluZS50ZXh0LnNlYXJjaCgvXFxTLykpO1xuICAgICAgdmFyIGluV1MgPSBwb3MubGluZSA9PSBzdGFydC5saW5lICYmIHBvcy5jaCA8PSBmaXJzdE5vbldTICYmIHBvcy5jaDtcbiAgICAgIHJldHVybiBQb3Moc3RhcnQubGluZSwgaW5XUyA/IDAgOiBmaXJzdE5vbldTKTtcbiAgICB9XG4gICAgcmV0dXJuIHN0YXJ0O1xuICB9XG5cbiAgZnVuY3Rpb24gY29tcGFyZUJpZGlMZXZlbChvcmRlciwgYSwgYikge1xuICAgIHZhciBsaW5lZGlyID0gb3JkZXJbMF0ubGV2ZWw7XG4gICAgaWYgKGEgPT0gbGluZWRpcikgcmV0dXJuIHRydWU7XG4gICAgaWYgKGIgPT0gbGluZWRpcikgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiBhIDwgYjtcbiAgfVxuICB2YXIgYmlkaU90aGVyO1xuICBmdW5jdGlvbiBnZXRCaWRpUGFydEF0KG9yZGVyLCBwb3MpIHtcbiAgICBiaWRpT3RoZXIgPSBudWxsO1xuICAgIGZvciAodmFyIGkgPSAwLCBmb3VuZDsgaSA8IG9yZGVyLmxlbmd0aDsgKytpKSB7XG4gICAgICB2YXIgY3VyID0gb3JkZXJbaV07XG4gICAgICBpZiAoY3VyLmZyb20gPCBwb3MgJiYgY3VyLnRvID4gcG9zKSByZXR1cm4gaTtcbiAgICAgIGlmICgoY3VyLmZyb20gPT0gcG9zIHx8IGN1ci50byA9PSBwb3MpKSB7XG4gICAgICAgIGlmIChmb3VuZCA9PSBudWxsKSB7XG4gICAgICAgICAgZm91bmQgPSBpO1xuICAgICAgICB9IGVsc2UgaWYgKGNvbXBhcmVCaWRpTGV2ZWwob3JkZXIsIGN1ci5sZXZlbCwgb3JkZXJbZm91bmRdLmxldmVsKSkge1xuICAgICAgICAgIGlmIChjdXIuZnJvbSAhPSBjdXIudG8pIGJpZGlPdGhlciA9IGZvdW5kO1xuICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChjdXIuZnJvbSAhPSBjdXIudG8pIGJpZGlPdGhlciA9IGk7XG4gICAgICAgICAgcmV0dXJuIGZvdW5kO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmb3VuZDtcbiAgfVxuXG4gIGZ1bmN0aW9uIG1vdmVJbkxpbmUobGluZSwgcG9zLCBkaXIsIGJ5VW5pdCkge1xuICAgIGlmICghYnlVbml0KSByZXR1cm4gcG9zICsgZGlyO1xuICAgIGRvIHBvcyArPSBkaXI7XG4gICAgd2hpbGUgKHBvcyA+IDAgJiYgaXNFeHRlbmRpbmdDaGFyKGxpbmUudGV4dC5jaGFyQXQocG9zKSkpO1xuICAgIHJldHVybiBwb3M7XG4gIH1cblxuICAvLyBUaGlzIGlzIG5lZWRlZCBpbiBvcmRlciB0byBtb3ZlICd2aXN1YWxseScgdGhyb3VnaCBiaS1kaXJlY3Rpb25hbFxuICAvLyB0ZXh0IC0tIGkuZS4sIHByZXNzaW5nIGxlZnQgc2hvdWxkIG1ha2UgdGhlIGN1cnNvciBnbyBsZWZ0LCBldmVuXG4gIC8vIHdoZW4gaW4gUlRMIHRleHQuIFRoZSB0cmlja3kgcGFydCBpcyB0aGUgJ2p1bXBzJywgd2hlcmUgUlRMIGFuZFxuICAvLyBMVFIgdGV4dCB0b3VjaCBlYWNoIG90aGVyLiBUaGlzIG9mdGVuIHJlcXVpcmVzIHRoZSBjdXJzb3Igb2Zmc2V0XG4gIC8vIHRvIG1vdmUgbW9yZSB0aGFuIG9uZSB1bml0LCBpbiBvcmRlciB0byB2aXN1YWxseSBtb3ZlIG9uZSB1bml0LlxuICBmdW5jdGlvbiBtb3ZlVmlzdWFsbHkobGluZSwgc3RhcnQsIGRpciwgYnlVbml0KSB7XG4gICAgdmFyIGJpZGkgPSBnZXRPcmRlcihsaW5lKTtcbiAgICBpZiAoIWJpZGkpIHJldHVybiBtb3ZlTG9naWNhbGx5KGxpbmUsIHN0YXJ0LCBkaXIsIGJ5VW5pdCk7XG4gICAgdmFyIHBvcyA9IGdldEJpZGlQYXJ0QXQoYmlkaSwgc3RhcnQpLCBwYXJ0ID0gYmlkaVtwb3NdO1xuICAgIHZhciB0YXJnZXQgPSBtb3ZlSW5MaW5lKGxpbmUsIHN0YXJ0LCBwYXJ0LmxldmVsICUgMiA/IC1kaXIgOiBkaXIsIGJ5VW5pdCk7XG5cbiAgICBmb3IgKDs7KSB7XG4gICAgICBpZiAodGFyZ2V0ID4gcGFydC5mcm9tICYmIHRhcmdldCA8IHBhcnQudG8pIHJldHVybiB0YXJnZXQ7XG4gICAgICBpZiAodGFyZ2V0ID09IHBhcnQuZnJvbSB8fCB0YXJnZXQgPT0gcGFydC50bykge1xuICAgICAgICBpZiAoZ2V0QmlkaVBhcnRBdChiaWRpLCB0YXJnZXQpID09IHBvcykgcmV0dXJuIHRhcmdldDtcbiAgICAgICAgcGFydCA9IGJpZGlbcG9zICs9IGRpcl07XG4gICAgICAgIHJldHVybiAoZGlyID4gMCkgPT0gcGFydC5sZXZlbCAlIDIgPyBwYXJ0LnRvIDogcGFydC5mcm9tO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGFydCA9IGJpZGlbcG9zICs9IGRpcl07XG4gICAgICAgIGlmICghcGFydCkgcmV0dXJuIG51bGw7XG4gICAgICAgIGlmICgoZGlyID4gMCkgPT0gcGFydC5sZXZlbCAlIDIpXG4gICAgICAgICAgdGFyZ2V0ID0gbW92ZUluTGluZShsaW5lLCBwYXJ0LnRvLCAtMSwgYnlVbml0KTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgIHRhcmdldCA9IG1vdmVJbkxpbmUobGluZSwgcGFydC5mcm9tLCAxLCBieVVuaXQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG1vdmVMb2dpY2FsbHkobGluZSwgc3RhcnQsIGRpciwgYnlVbml0KSB7XG4gICAgdmFyIHRhcmdldCA9IHN0YXJ0ICsgZGlyO1xuICAgIGlmIChieVVuaXQpIHdoaWxlICh0YXJnZXQgPiAwICYmIGlzRXh0ZW5kaW5nQ2hhcihsaW5lLnRleHQuY2hhckF0KHRhcmdldCkpKSB0YXJnZXQgKz0gZGlyO1xuICAgIHJldHVybiB0YXJnZXQgPCAwIHx8IHRhcmdldCA+IGxpbmUudGV4dC5sZW5ndGggPyBudWxsIDogdGFyZ2V0O1xuICB9XG5cbiAgLy8gQmlkaXJlY3Rpb25hbCBvcmRlcmluZyBhbGdvcml0aG1cbiAgLy8gU2VlIGh0dHA6Ly91bmljb2RlLm9yZy9yZXBvcnRzL3RyOS90cjktMTMuaHRtbCBmb3IgdGhlIGFsZ29yaXRobVxuICAvLyB0aGF0IHRoaXMgKHBhcnRpYWxseSkgaW1wbGVtZW50cy5cblxuICAvLyBPbmUtY2hhciBjb2RlcyB1c2VkIGZvciBjaGFyYWN0ZXIgdHlwZXM6XG4gIC8vIEwgKEwpOiAgIExlZnQtdG8tUmlnaHRcbiAgLy8gUiAoUik6ICAgUmlnaHQtdG8tTGVmdFxuICAvLyByIChBTCk6ICBSaWdodC10by1MZWZ0IEFyYWJpY1xuICAvLyAxIChFTik6ICBFdXJvcGVhbiBOdW1iZXJcbiAgLy8gKyAoRVMpOiAgRXVyb3BlYW4gTnVtYmVyIFNlcGFyYXRvclxuICAvLyAlIChFVCk6ICBFdXJvcGVhbiBOdW1iZXIgVGVybWluYXRvclxuICAvLyBuIChBTik6ICBBcmFiaWMgTnVtYmVyXG4gIC8vICwgKENTKTogIENvbW1vbiBOdW1iZXIgU2VwYXJhdG9yXG4gIC8vIG0gKE5TTSk6IE5vbi1TcGFjaW5nIE1hcmtcbiAgLy8gYiAoQk4pOiAgQm91bmRhcnkgTmV1dHJhbFxuICAvLyBzIChCKTogICBQYXJhZ3JhcGggU2VwYXJhdG9yXG4gIC8vIHQgKFMpOiAgIFNlZ21lbnQgU2VwYXJhdG9yXG4gIC8vIHcgKFdTKTogIFdoaXRlc3BhY2VcbiAgLy8gTiAoT04pOiAgT3RoZXIgTmV1dHJhbHNcblxuICAvLyBSZXR1cm5zIG51bGwgaWYgY2hhcmFjdGVycyBhcmUgb3JkZXJlZCBhcyB0aGV5IGFwcGVhclxuICAvLyAobGVmdC10by1yaWdodCksIG9yIGFuIGFycmF5IG9mIHNlY3Rpb25zICh7ZnJvbSwgdG8sIGxldmVsfVxuICAvLyBvYmplY3RzKSBpbiB0aGUgb3JkZXIgaW4gd2hpY2ggdGhleSBvY2N1ciB2aXN1YWxseS5cbiAgdmFyIGJpZGlPcmRlcmluZyA9IChmdW5jdGlvbigpIHtcbiAgICAvLyBDaGFyYWN0ZXIgdHlwZXMgZm9yIGNvZGVwb2ludHMgMCB0byAweGZmXG4gICAgdmFyIGxvd1R5cGVzID0gXCJiYmJiYmJiYmJ0c3R3c2JiYmJiYmJiYmJiYmJic3NzdHdOTiUlJU5OTk5OTixOLE4xMTExMTExMTExTk5OTk5OTkxMTExMTExMTExMTExMTExMTExMTExMTExMTk5OTk5OTExMTExMTExMTExMTExMTExMTExMTExMTExOTk5OYmJiYmJic2JiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiLE4lJSUlTk5OTkxOTk5OTiUlMTFOTE5OTjFMTk5OTk5MTExMTExMTExMTExMTExMTExMTExMTE5MTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTlwiO1xuICAgIC8vIENoYXJhY3RlciB0eXBlcyBmb3IgY29kZXBvaW50cyAweDYwMCB0byAweDZmZlxuICAgIHZhciBhcmFiaWNUeXBlcyA9IFwicnJycnJycnJycnJyLHJOTm1tbW1tbXJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJybW1tbW1tbW1tbW1tbW1ycnJycnJybm5ubm5ubm5ubiVubnJycm1ycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycm1tbW1tbW1tbW1tbW1tbW1tbW1ObW1tbVwiO1xuICAgIGZ1bmN0aW9uIGNoYXJUeXBlKGNvZGUpIHtcbiAgICAgIGlmIChjb2RlIDw9IDB4ZjcpIHJldHVybiBsb3dUeXBlcy5jaGFyQXQoY29kZSk7XG4gICAgICBlbHNlIGlmICgweDU5MCA8PSBjb2RlICYmIGNvZGUgPD0gMHg1ZjQpIHJldHVybiBcIlJcIjtcbiAgICAgIGVsc2UgaWYgKDB4NjAwIDw9IGNvZGUgJiYgY29kZSA8PSAweDZlZCkgcmV0dXJuIGFyYWJpY1R5cGVzLmNoYXJBdChjb2RlIC0gMHg2MDApO1xuICAgICAgZWxzZSBpZiAoMHg2ZWUgPD0gY29kZSAmJiBjb2RlIDw9IDB4OGFjKSByZXR1cm4gXCJyXCI7XG4gICAgICBlbHNlIGlmICgweDIwMDAgPD0gY29kZSAmJiBjb2RlIDw9IDB4MjAwYikgcmV0dXJuIFwid1wiO1xuICAgICAgZWxzZSBpZiAoY29kZSA9PSAweDIwMGMpIHJldHVybiBcImJcIjtcbiAgICAgIGVsc2UgcmV0dXJuIFwiTFwiO1xuICAgIH1cblxuICAgIHZhciBiaWRpUkUgPSAvW1xcdTA1OTAtXFx1MDVmNFxcdTA2MDAtXFx1MDZmZlxcdTA3MDAtXFx1MDhhY10vO1xuICAgIHZhciBpc05ldXRyYWwgPSAvW3N0d05dLywgaXNTdHJvbmcgPSAvW0xScl0vLCBjb3VudHNBc0xlZnQgPSAvW0xiMW5dLywgY291bnRzQXNOdW0gPSAvWzFuXS87XG4gICAgLy8gQnJvd3NlcnMgc2VlbSB0byBhbHdheXMgdHJlYXQgdGhlIGJvdW5kYXJpZXMgb2YgYmxvY2sgZWxlbWVudHMgYXMgYmVpbmcgTC5cbiAgICB2YXIgb3V0ZXJUeXBlID0gXCJMXCI7XG5cbiAgICBmdW5jdGlvbiBCaWRpU3BhbihsZXZlbCwgZnJvbSwgdG8pIHtcbiAgICAgIHRoaXMubGV2ZWwgPSBsZXZlbDtcbiAgICAgIHRoaXMuZnJvbSA9IGZyb207IHRoaXMudG8gPSB0bztcbiAgICB9XG5cbiAgICByZXR1cm4gZnVuY3Rpb24oc3RyKSB7XG4gICAgICBpZiAoIWJpZGlSRS50ZXN0KHN0cikpIHJldHVybiBmYWxzZTtcbiAgICAgIHZhciBsZW4gPSBzdHIubGVuZ3RoLCB0eXBlcyA9IFtdO1xuICAgICAgZm9yICh2YXIgaSA9IDAsIHR5cGU7IGkgPCBsZW47ICsraSlcbiAgICAgICAgdHlwZXMucHVzaCh0eXBlID0gY2hhclR5cGUoc3RyLmNoYXJDb2RlQXQoaSkpKTtcblxuICAgICAgLy8gVzEuIEV4YW1pbmUgZWFjaCBub24tc3BhY2luZyBtYXJrIChOU00pIGluIHRoZSBsZXZlbCBydW4sIGFuZFxuICAgICAgLy8gY2hhbmdlIHRoZSB0eXBlIG9mIHRoZSBOU00gdG8gdGhlIHR5cGUgb2YgdGhlIHByZXZpb3VzXG4gICAgICAvLyBjaGFyYWN0ZXIuIElmIHRoZSBOU00gaXMgYXQgdGhlIHN0YXJ0IG9mIHRoZSBsZXZlbCBydW4sIGl0IHdpbGxcbiAgICAgIC8vIGdldCB0aGUgdHlwZSBvZiBzb3IuXG4gICAgICBmb3IgKHZhciBpID0gMCwgcHJldiA9IG91dGVyVHlwZTsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgIHZhciB0eXBlID0gdHlwZXNbaV07XG4gICAgICAgIGlmICh0eXBlID09IFwibVwiKSB0eXBlc1tpXSA9IHByZXY7XG4gICAgICAgIGVsc2UgcHJldiA9IHR5cGU7XG4gICAgICB9XG5cbiAgICAgIC8vIFcyLiBTZWFyY2ggYmFja3dhcmRzIGZyb20gZWFjaCBpbnN0YW5jZSBvZiBhIEV1cm9wZWFuIG51bWJlclxuICAgICAgLy8gdW50aWwgdGhlIGZpcnN0IHN0cm9uZyB0eXBlIChSLCBMLCBBTCwgb3Igc29yKSBpcyBmb3VuZC4gSWYgYW5cbiAgICAgIC8vIEFMIGlzIGZvdW5kLCBjaGFuZ2UgdGhlIHR5cGUgb2YgdGhlIEV1cm9wZWFuIG51bWJlciB0byBBcmFiaWNcbiAgICAgIC8vIG51bWJlci5cbiAgICAgIC8vIFczLiBDaGFuZ2UgYWxsIEFMcyB0byBSLlxuICAgICAgZm9yICh2YXIgaSA9IDAsIGN1ciA9IG91dGVyVHlwZTsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgIHZhciB0eXBlID0gdHlwZXNbaV07XG4gICAgICAgIGlmICh0eXBlID09IFwiMVwiICYmIGN1ciA9PSBcInJcIikgdHlwZXNbaV0gPSBcIm5cIjtcbiAgICAgICAgZWxzZSBpZiAoaXNTdHJvbmcudGVzdCh0eXBlKSkgeyBjdXIgPSB0eXBlOyBpZiAodHlwZSA9PSBcInJcIikgdHlwZXNbaV0gPSBcIlJcIjsgfVxuICAgICAgfVxuXG4gICAgICAvLyBXNC4gQSBzaW5nbGUgRXVyb3BlYW4gc2VwYXJhdG9yIGJldHdlZW4gdHdvIEV1cm9wZWFuIG51bWJlcnNcbiAgICAgIC8vIGNoYW5nZXMgdG8gYSBFdXJvcGVhbiBudW1iZXIuIEEgc2luZ2xlIGNvbW1vbiBzZXBhcmF0b3IgYmV0d2VlblxuICAgICAgLy8gdHdvIG51bWJlcnMgb2YgdGhlIHNhbWUgdHlwZSBjaGFuZ2VzIHRvIHRoYXQgdHlwZS5cbiAgICAgIGZvciAodmFyIGkgPSAxLCBwcmV2ID0gdHlwZXNbMF07IGkgPCBsZW4gLSAxOyArK2kpIHtcbiAgICAgICAgdmFyIHR5cGUgPSB0eXBlc1tpXTtcbiAgICAgICAgaWYgKHR5cGUgPT0gXCIrXCIgJiYgcHJldiA9PSBcIjFcIiAmJiB0eXBlc1tpKzFdID09IFwiMVwiKSB0eXBlc1tpXSA9IFwiMVwiO1xuICAgICAgICBlbHNlIGlmICh0eXBlID09IFwiLFwiICYmIHByZXYgPT0gdHlwZXNbaSsxXSAmJlxuICAgICAgICAgICAgICAgICAocHJldiA9PSBcIjFcIiB8fCBwcmV2ID09IFwiblwiKSkgdHlwZXNbaV0gPSBwcmV2O1xuICAgICAgICBwcmV2ID0gdHlwZTtcbiAgICAgIH1cblxuICAgICAgLy8gVzUuIEEgc2VxdWVuY2Ugb2YgRXVyb3BlYW4gdGVybWluYXRvcnMgYWRqYWNlbnQgdG8gRXVyb3BlYW5cbiAgICAgIC8vIG51bWJlcnMgY2hhbmdlcyB0byBhbGwgRXVyb3BlYW4gbnVtYmVycy5cbiAgICAgIC8vIFc2LiBPdGhlcndpc2UsIHNlcGFyYXRvcnMgYW5kIHRlcm1pbmF0b3JzIGNoYW5nZSB0byBPdGhlclxuICAgICAgLy8gTmV1dHJhbC5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgICAgdmFyIHR5cGUgPSB0eXBlc1tpXTtcbiAgICAgICAgaWYgKHR5cGUgPT0gXCIsXCIpIHR5cGVzW2ldID0gXCJOXCI7XG4gICAgICAgIGVsc2UgaWYgKHR5cGUgPT0gXCIlXCIpIHtcbiAgICAgICAgICBmb3IgKHZhciBlbmQgPSBpICsgMTsgZW5kIDwgbGVuICYmIHR5cGVzW2VuZF0gPT0gXCIlXCI7ICsrZW5kKSB7fVxuICAgICAgICAgIHZhciByZXBsYWNlID0gKGkgJiYgdHlwZXNbaS0xXSA9PSBcIiFcIikgfHwgKGVuZCA8IGxlbiAmJiB0eXBlc1tlbmRdID09IFwiMVwiKSA/IFwiMVwiIDogXCJOXCI7XG4gICAgICAgICAgZm9yICh2YXIgaiA9IGk7IGogPCBlbmQ7ICsraikgdHlwZXNbal0gPSByZXBsYWNlO1xuICAgICAgICAgIGkgPSBlbmQgLSAxO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFc3LiBTZWFyY2ggYmFja3dhcmRzIGZyb20gZWFjaCBpbnN0YW5jZSBvZiBhIEV1cm9wZWFuIG51bWJlclxuICAgICAgLy8gdW50aWwgdGhlIGZpcnN0IHN0cm9uZyB0eXBlIChSLCBMLCBvciBzb3IpIGlzIGZvdW5kLiBJZiBhbiBMIGlzXG4gICAgICAvLyBmb3VuZCwgdGhlbiBjaGFuZ2UgdGhlIHR5cGUgb2YgdGhlIEV1cm9wZWFuIG51bWJlciB0byBMLlxuICAgICAgZm9yICh2YXIgaSA9IDAsIGN1ciA9IG91dGVyVHlwZTsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgIHZhciB0eXBlID0gdHlwZXNbaV07XG4gICAgICAgIGlmIChjdXIgPT0gXCJMXCIgJiYgdHlwZSA9PSBcIjFcIikgdHlwZXNbaV0gPSBcIkxcIjtcbiAgICAgICAgZWxzZSBpZiAoaXNTdHJvbmcudGVzdCh0eXBlKSkgY3VyID0gdHlwZTtcbiAgICAgIH1cblxuICAgICAgLy8gTjEuIEEgc2VxdWVuY2Ugb2YgbmV1dHJhbHMgdGFrZXMgdGhlIGRpcmVjdGlvbiBvZiB0aGVcbiAgICAgIC8vIHN1cnJvdW5kaW5nIHN0cm9uZyB0ZXh0IGlmIHRoZSB0ZXh0IG9uIGJvdGggc2lkZXMgaGFzIHRoZSBzYW1lXG4gICAgICAvLyBkaXJlY3Rpb24uIEV1cm9wZWFuIGFuZCBBcmFiaWMgbnVtYmVycyBhY3QgYXMgaWYgdGhleSB3ZXJlIFIgaW5cbiAgICAgIC8vIHRlcm1zIG9mIHRoZWlyIGluZmx1ZW5jZSBvbiBuZXV0cmFscy4gU3RhcnQtb2YtbGV2ZWwtcnVuIChzb3IpXG4gICAgICAvLyBhbmQgZW5kLW9mLWxldmVsLXJ1biAoZW9yKSBhcmUgdXNlZCBhdCBsZXZlbCBydW4gYm91bmRhcmllcy5cbiAgICAgIC8vIE4yLiBBbnkgcmVtYWluaW5nIG5ldXRyYWxzIHRha2UgdGhlIGVtYmVkZGluZyBkaXJlY3Rpb24uXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgIGlmIChpc05ldXRyYWwudGVzdCh0eXBlc1tpXSkpIHtcbiAgICAgICAgICBmb3IgKHZhciBlbmQgPSBpICsgMTsgZW5kIDwgbGVuICYmIGlzTmV1dHJhbC50ZXN0KHR5cGVzW2VuZF0pOyArK2VuZCkge31cbiAgICAgICAgICB2YXIgYmVmb3JlID0gKGkgPyB0eXBlc1tpLTFdIDogb3V0ZXJUeXBlKSA9PSBcIkxcIjtcbiAgICAgICAgICB2YXIgYWZ0ZXIgPSAoZW5kIDwgbGVuID8gdHlwZXNbZW5kXSA6IG91dGVyVHlwZSkgPT0gXCJMXCI7XG4gICAgICAgICAgdmFyIHJlcGxhY2UgPSBiZWZvcmUgfHwgYWZ0ZXIgPyBcIkxcIiA6IFwiUlwiO1xuICAgICAgICAgIGZvciAodmFyIGogPSBpOyBqIDwgZW5kOyArK2opIHR5cGVzW2pdID0gcmVwbGFjZTtcbiAgICAgICAgICBpID0gZW5kIC0gMTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBIZXJlIHdlIGRlcGFydCBmcm9tIHRoZSBkb2N1bWVudGVkIGFsZ29yaXRobSwgaW4gb3JkZXIgdG8gYXZvaWRcbiAgICAgIC8vIGJ1aWxkaW5nIHVwIGFuIGFjdHVhbCBsZXZlbHMgYXJyYXkuIFNpbmNlIHRoZXJlIGFyZSBvbmx5IHRocmVlXG4gICAgICAvLyBsZXZlbHMgKDAsIDEsIDIpIGluIGFuIGltcGxlbWVudGF0aW9uIHRoYXQgZG9lc24ndCB0YWtlXG4gICAgICAvLyBleHBsaWNpdCBlbWJlZGRpbmcgaW50byBhY2NvdW50LCB3ZSBjYW4gYnVpbGQgdXAgdGhlIG9yZGVyIG9uXG4gICAgICAvLyB0aGUgZmx5LCB3aXRob3V0IGZvbGxvd2luZyB0aGUgbGV2ZWwtYmFzZWQgYWxnb3JpdGhtLlxuICAgICAgdmFyIG9yZGVyID0gW10sIG07XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjspIHtcbiAgICAgICAgaWYgKGNvdW50c0FzTGVmdC50ZXN0KHR5cGVzW2ldKSkge1xuICAgICAgICAgIHZhciBzdGFydCA9IGk7XG4gICAgICAgICAgZm9yICgrK2k7IGkgPCBsZW4gJiYgY291bnRzQXNMZWZ0LnRlc3QodHlwZXNbaV0pOyArK2kpIHt9XG4gICAgICAgICAgb3JkZXIucHVzaChuZXcgQmlkaVNwYW4oMCwgc3RhcnQsIGkpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgcG9zID0gaSwgYXQgPSBvcmRlci5sZW5ndGg7XG4gICAgICAgICAgZm9yICgrK2k7IGkgPCBsZW4gJiYgdHlwZXNbaV0gIT0gXCJMXCI7ICsraSkge31cbiAgICAgICAgICBmb3IgKHZhciBqID0gcG9zOyBqIDwgaTspIHtcbiAgICAgICAgICAgIGlmIChjb3VudHNBc051bS50ZXN0KHR5cGVzW2pdKSkge1xuICAgICAgICAgICAgICBpZiAocG9zIDwgaikgb3JkZXIuc3BsaWNlKGF0LCAwLCBuZXcgQmlkaVNwYW4oMSwgcG9zLCBqKSk7XG4gICAgICAgICAgICAgIHZhciBuc3RhcnQgPSBqO1xuICAgICAgICAgICAgICBmb3IgKCsrajsgaiA8IGkgJiYgY291bnRzQXNOdW0udGVzdCh0eXBlc1tqXSk7ICsraikge31cbiAgICAgICAgICAgICAgb3JkZXIuc3BsaWNlKGF0LCAwLCBuZXcgQmlkaVNwYW4oMiwgbnN0YXJ0LCBqKSk7XG4gICAgICAgICAgICAgIHBvcyA9IGo7XG4gICAgICAgICAgICB9IGVsc2UgKytqO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAocG9zIDwgaSkgb3JkZXIuc3BsaWNlKGF0LCAwLCBuZXcgQmlkaVNwYW4oMSwgcG9zLCBpKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChvcmRlclswXS5sZXZlbCA9PSAxICYmIChtID0gc3RyLm1hdGNoKC9eXFxzKy8pKSkge1xuICAgICAgICBvcmRlclswXS5mcm9tID0gbVswXS5sZW5ndGg7XG4gICAgICAgIG9yZGVyLnVuc2hpZnQobmV3IEJpZGlTcGFuKDAsIDAsIG1bMF0ubGVuZ3RoKSk7XG4gICAgICB9XG4gICAgICBpZiAobHN0KG9yZGVyKS5sZXZlbCA9PSAxICYmIChtID0gc3RyLm1hdGNoKC9cXHMrJC8pKSkge1xuICAgICAgICBsc3Qob3JkZXIpLnRvIC09IG1bMF0ubGVuZ3RoO1xuICAgICAgICBvcmRlci5wdXNoKG5ldyBCaWRpU3BhbigwLCBsZW4gLSBtWzBdLmxlbmd0aCwgbGVuKSk7XG4gICAgICB9XG4gICAgICBpZiAob3JkZXJbMF0ubGV2ZWwgPT0gMilcbiAgICAgICAgb3JkZXIudW5zaGlmdChuZXcgQmlkaVNwYW4oMSwgb3JkZXJbMF0udG8sIG9yZGVyWzBdLnRvKSk7XG4gICAgICBpZiAob3JkZXJbMF0ubGV2ZWwgIT0gbHN0KG9yZGVyKS5sZXZlbClcbiAgICAgICAgb3JkZXIucHVzaChuZXcgQmlkaVNwYW4ob3JkZXJbMF0ubGV2ZWwsIGxlbiwgbGVuKSk7XG5cbiAgICAgIHJldHVybiBvcmRlcjtcbiAgICB9O1xuICB9KSgpO1xuXG4gIC8vIFRIRSBFTkRcblxuICBDb2RlTWlycm9yLnZlcnNpb24gPSBcIjUuMTQuMlwiO1xuXG4gIHJldHVybiBDb2RlTWlycm9yO1xufSk7XG4iLCIvLyB1bml2ZXJzYWwgbW9kdWxlIGRlZmluaXRpb246IGh0dHBzOi8vZ2l0aHViLmNvbS91bWRqcy91bWQvYmxvYi9tYXN0ZXIvcmV0dXJuRXhwb3J0cy5qcyNMNDFcbihmdW5jdGlvbiAocm9vdCwgZmFjdG9yeSkge1xuICAgIGlmICh0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgLy8gTm9kZS4gRG9lcyBub3Qgd29yayB3aXRoIHN0cmljdCBDb21tb25KUywgYnV0XG4gICAgICAgIC8vIG9ubHkgQ29tbW9uSlMtbGlrZSBlbnZpcm9tZW50cyB0aGF0IHN1cHBvcnQgbW9kdWxlLmV4cG9ydHMsXG4gICAgICAgIC8vIGxpa2UgTm9kZS5cbiAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICAgICAgLy8gQU1ELiBSZWdpc3RlciBhcyBhbiBhbm9ueW1vdXMgbW9kdWxlLlxuICAgICAgICBkZWZpbmUoZmFjdG9yeSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gQnJvd3NlciBnbG9iYWxzIChyb290IGlzIHdpbmRvdylcbiAgICAgICAgcm9vdC5lbW9qaSA9IGZhY3RvcnkoKTtcbiAgfVxufSh0aGlzLCBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGVtb2ppcyA9IFtcIjpibHVzaDpcIixcIjpzY3JlYW06XCIsXCI6c21pcms6XCIsXCI6c21pbGV5OlwiLFwiOnN0dWNrX291dF90b25ndWVfY2xvc2VkX2V5ZXM6XCIsXCI6c3R1Y2tfb3V0X3Rvbmd1ZV93aW5raW5nX2V5ZTpcIixcIjpyYWdlOlwiLFwiOmRpc2FwcG9pbnRlZDpcIixcIjpzb2I6XCIsXCI6a2lzc2luZ19oZWFydDpcIixcIjp3aW5rOlwiLFwiOnBlbnNpdmU6XCIsXCI6Y29uZm91bmRlZDpcIixcIjpmbHVzaGVkOlwiLFwiOnJlbGF4ZWQ6XCIsXCI6bWFzazpcIixcIjpoZWFydDpcIixcIjpicm9rZW5faGVhcnQ6XCIsXCI6c3Vubnk6XCIsXCI6dW1icmVsbGE6XCIsXCI6Y2xvdWQ6XCIsXCI6c25vd2ZsYWtlOlwiLFwiOnNub3dtYW46XCIsXCI6emFwOlwiLFwiOmN5Y2xvbmU6XCIsXCI6Zm9nZ3k6XCIsXCI6b2NlYW46XCIsXCI6Y2F0OlwiLFwiOmRvZzpcIixcIjptb3VzZTpcIixcIjpoYW1zdGVyOlwiLFwiOnJhYmJpdDpcIixcIjp3b2xmOlwiLFwiOmZyb2c6XCIsXCI6dGlnZXI6XCIsXCI6a29hbGE6XCIsXCI6YmVhcjpcIixcIjpwaWc6XCIsXCI6cGlnX25vc2U6XCIsXCI6Y293OlwiLFwiOmJvYXI6XCIsXCI6bW9ua2V5X2ZhY2U6XCIsXCI6bW9ua2V5OlwiLFwiOmhvcnNlOlwiLFwiOnJhY2Vob3JzZTpcIixcIjpjYW1lbDpcIixcIjpzaGVlcDpcIixcIjplbGVwaGFudDpcIixcIjpwYW5kYV9mYWNlOlwiLFwiOnNuYWtlOlwiLFwiOmJpcmQ6XCIsXCI6YmFieV9jaGljazpcIixcIjpoYXRjaGVkX2NoaWNrOlwiLFwiOmhhdGNoaW5nX2NoaWNrOlwiLFwiOmNoaWNrZW46XCIsXCI6cGVuZ3VpbjpcIixcIjp0dXJ0bGU6XCIsXCI6YnVnOlwiLFwiOmhvbmV5YmVlOlwiLFwiOmFudDpcIixcIjpiZWV0bGU6XCIsXCI6c25haWw6XCIsXCI6b2N0b3B1czpcIixcIjp0cm9waWNhbF9maXNoOlwiLFwiOmZpc2g6XCIsXCI6d2hhbGU6XCIsXCI6d2hhbGUyOlwiLFwiOmRvbHBoaW46XCIsXCI6Y293MjpcIixcIjpyYW06XCIsXCI6cmF0OlwiLFwiOndhdGVyX2J1ZmZhbG86XCIsXCI6dGlnZXIyOlwiLFwiOnJhYmJpdDI6XCIsXCI6ZHJhZ29uOlwiLFwiOmdvYXQ6XCIsXCI6cm9vc3RlcjpcIixcIjpkb2cyOlwiLFwiOnBpZzI6XCIsXCI6bW91c2UyOlwiLFwiOm94OlwiLFwiOmRyYWdvbl9mYWNlOlwiLFwiOmJsb3dmaXNoOlwiLFwiOmNyb2NvZGlsZTpcIixcIjpkcm9tZWRhcnlfY2FtZWw6XCIsXCI6bGVvcGFyZDpcIixcIjpjYXQyOlwiLFwiOnBvb2RsZTpcIixcIjpwYXdfcHJpbnRzOlwiLFwiOmJvdXF1ZXQ6XCIsXCI6Y2hlcnJ5X2Jsb3Nzb206XCIsXCI6dHVsaXA6XCIsXCI6Zm91cl9sZWFmX2Nsb3ZlcjpcIixcIjpyb3NlOlwiLFwiOnN1bmZsb3dlcjpcIixcIjpoaWJpc2N1czpcIixcIjptYXBsZV9sZWFmOlwiLFwiOmxlYXZlczpcIixcIjpmYWxsZW5fbGVhZjpcIixcIjpoZXJiOlwiLFwiOm11c2hyb29tOlwiLFwiOmNhY3R1czpcIixcIjpwYWxtX3RyZWU6XCIsXCI6ZXZlcmdyZWVuX3RyZWU6XCIsXCI6ZGVjaWR1b3VzX3RyZWU6XCIsXCI6Y2hlc3RudXQ6XCIsXCI6c2VlZGxpbmc6XCIsXCI6Ymxvc3NvbTpcIixcIjplYXJfb2ZfcmljZTpcIixcIjpzaGVsbDpcIixcIjpnbG9iZV93aXRoX21lcmlkaWFuczpcIixcIjpzdW5fd2l0aF9mYWNlOlwiLFwiOmZ1bGxfbW9vbl93aXRoX2ZhY2U6XCIsXCI6bmV3X21vb25fd2l0aF9mYWNlOlwiLFwiOm5ld19tb29uOlwiLFwiOndheGluZ19jcmVzY2VudF9tb29uOlwiLFwiOmZpcnN0X3F1YXJ0ZXJfbW9vbjpcIixcIjp3YXhpbmdfZ2liYm91c19tb29uOlwiLFwiOmZ1bGxfbW9vbjpcIixcIjp3YW5pbmdfZ2liYm91c19tb29uOlwiLFwiOmxhc3RfcXVhcnRlcl9tb29uOlwiLFwiOndhbmluZ19jcmVzY2VudF9tb29uOlwiLFwiOmxhc3RfcXVhcnRlcl9tb29uX3dpdGhfZmFjZTpcIixcIjpmaXJzdF9xdWFydGVyX21vb25fd2l0aF9mYWNlOlwiLFwiOm1vb246XCIsXCI6ZWFydGhfYWZyaWNhOlwiLFwiOmVhcnRoX2FtZXJpY2FzOlwiLFwiOmVhcnRoX2FzaWE6XCIsXCI6dm9sY2FubzpcIixcIjptaWxreV93YXk6XCIsXCI6cGFydGx5X3N1bm55OlwiLFwiOm9jdG9jYXQ6XCIsXCI6c3F1aXJyZWw6XCIsXCI6YmFtYm9vOlwiLFwiOmdpZnRfaGVhcnQ6XCIsXCI6ZG9sbHM6XCIsXCI6c2Nob29sX3NhdGNoZWw6XCIsXCI6bW9ydGFyX2JvYXJkOlwiLFwiOmZsYWdzOlwiLFwiOmZpcmV3b3JrczpcIixcIjpzcGFya2xlcjpcIixcIjp3aW5kX2NoaW1lOlwiLFwiOnJpY2Vfc2NlbmU6XCIsXCI6amFja19vX2xhbnRlcm46XCIsXCI6Z2hvc3Q6XCIsXCI6c2FudGE6XCIsXCI6Y2hyaXN0bWFzX3RyZWU6XCIsXCI6Z2lmdDpcIixcIjpiZWxsOlwiLFwiOm5vX2JlbGw6XCIsXCI6dGFuYWJhdGFfdHJlZTpcIixcIjp0YWRhOlwiLFwiOmNvbmZldHRpX2JhbGw6XCIsXCI6YmFsbG9vbjpcIixcIjpjcnlzdGFsX2JhbGw6XCIsXCI6Y2Q6XCIsXCI6ZHZkOlwiLFwiOmZsb3BweV9kaXNrOlwiLFwiOmNhbWVyYTpcIixcIjp2aWRlb19jYW1lcmE6XCIsXCI6bW92aWVfY2FtZXJhOlwiLFwiOmNvbXB1dGVyOlwiLFwiOnR2OlwiLFwiOmlwaG9uZTpcIixcIjpwaG9uZTpcIixcIjp0ZWxlcGhvbmU6XCIsXCI6dGVsZXBob25lX3JlY2VpdmVyOlwiLFwiOnBhZ2VyOlwiLFwiOmZheDpcIixcIjptaW5pZGlzYzpcIixcIjp2aHM6XCIsXCI6c291bmQ6XCIsXCI6c3BlYWtlcjpcIixcIjptdXRlOlwiLFwiOmxvdWRzcGVha2VyOlwiLFwiOm1lZ2E6XCIsXCI6aG91cmdsYXNzOlwiLFwiOmhvdXJnbGFzc19mbG93aW5nX3NhbmQ6XCIsXCI6YWxhcm1fY2xvY2s6XCIsXCI6d2F0Y2g6XCIsXCI6cmFkaW86XCIsXCI6c2F0ZWxsaXRlOlwiLFwiOmxvb3A6XCIsXCI6bWFnOlwiLFwiOm1hZ19yaWdodDpcIixcIjp1bmxvY2s6XCIsXCI6bG9jazpcIixcIjpsb2NrX3dpdGhfaW5rX3BlbjpcIixcIjpjbG9zZWRfbG9ja193aXRoX2tleTpcIixcIjprZXk6XCIsXCI6YnVsYjpcIixcIjpmbGFzaGxpZ2h0OlwiLFwiOmhpZ2hfYnJpZ2h0bmVzczpcIixcIjpsb3dfYnJpZ2h0bmVzczpcIixcIjplbGVjdHJpY19wbHVnOlwiLFwiOmJhdHRlcnk6XCIsXCI6Y2FsbGluZzpcIixcIjplbWFpbDpcIixcIjptYWlsYm94OlwiLFwiOnBvc3Rib3g6XCIsXCI6YmF0aDpcIixcIjpiYXRodHViOlwiLFwiOnNob3dlcjpcIixcIjp0b2lsZXQ6XCIsXCI6d3JlbmNoOlwiLFwiOm51dF9hbmRfYm9sdDpcIixcIjpoYW1tZXI6XCIsXCI6c2VhdDpcIixcIjptb25leWJhZzpcIixcIjp5ZW46XCIsXCI6ZG9sbGFyOlwiLFwiOnBvdW5kOlwiLFwiOmV1cm86XCIsXCI6Y3JlZGl0X2NhcmQ6XCIsXCI6bW9uZXlfd2l0aF93aW5nczpcIixcIjplLW1haWw6XCIsXCI6aW5ib3hfdHJheTpcIixcIjpvdXRib3hfdHJheTpcIixcIjplbnZlbG9wZTpcIixcIjppbmNvbWluZ19lbnZlbG9wZTpcIixcIjpwb3N0YWxfaG9ybjpcIixcIjptYWlsYm94X2Nsb3NlZDpcIixcIjptYWlsYm94X3dpdGhfbWFpbDpcIixcIjptYWlsYm94X3dpdGhfbm9fbWFpbDpcIixcIjpkb29yOlwiLFwiOnNtb2tpbmc6XCIsXCI6Ym9tYjpcIixcIjpndW46XCIsXCI6aG9jaG86XCIsXCI6cGlsbDpcIixcIjpzeXJpbmdlOlwiLFwiOnBhZ2VfZmFjaW5nX3VwOlwiLFwiOnBhZ2Vfd2l0aF9jdXJsOlwiLFwiOmJvb2ttYXJrX3RhYnM6XCIsXCI6YmFyX2NoYXJ0OlwiLFwiOmNoYXJ0X3dpdGhfdXB3YXJkc190cmVuZDpcIixcIjpjaGFydF93aXRoX2Rvd253YXJkc190cmVuZDpcIixcIjpzY3JvbGw6XCIsXCI6Y2xpcGJvYXJkOlwiLFwiOmNhbGVuZGFyOlwiLFwiOmRhdGU6XCIsXCI6Y2FyZF9pbmRleDpcIixcIjpmaWxlX2ZvbGRlcjpcIixcIjpvcGVuX2ZpbGVfZm9sZGVyOlwiLFwiOnNjaXNzb3JzOlwiLFwiOnB1c2hwaW46XCIsXCI6cGFwZXJjbGlwOlwiLFwiOmJsYWNrX25pYjpcIixcIjpwZW5jaWwyOlwiLFwiOnN0cmFpZ2h0X3J1bGVyOlwiLFwiOnRyaWFuZ3VsYXJfcnVsZXI6XCIsXCI6Y2xvc2VkX2Jvb2s6XCIsXCI6Z3JlZW5fYm9vazpcIixcIjpibHVlX2Jvb2s6XCIsXCI6b3JhbmdlX2Jvb2s6XCIsXCI6bm90ZWJvb2s6XCIsXCI6bm90ZWJvb2tfd2l0aF9kZWNvcmF0aXZlX2NvdmVyOlwiLFwiOmxlZGdlcjpcIixcIjpib29rczpcIixcIjpib29rbWFyazpcIixcIjpuYW1lX2JhZGdlOlwiLFwiOm1pY3Jvc2NvcGU6XCIsXCI6dGVsZXNjb3BlOlwiLFwiOm5ld3NwYXBlcjpcIixcIjpmb290YmFsbDpcIixcIjpiYXNrZXRiYWxsOlwiLFwiOnNvY2NlcjpcIixcIjpiYXNlYmFsbDpcIixcIjp0ZW5uaXM6XCIsXCI6OGJhbGw6XCIsXCI6cnVnYnlfZm9vdGJhbGw6XCIsXCI6Ym93bGluZzpcIixcIjpnb2xmOlwiLFwiOm1vdW50YWluX2JpY3ljbGlzdDpcIixcIjpiaWN5Y2xpc3Q6XCIsXCI6aG9yc2VfcmFjaW5nOlwiLFwiOnNub3dib2FyZGVyOlwiLFwiOnN3aW1tZXI6XCIsXCI6c3VyZmVyOlwiLFwiOnNraTpcIixcIjpzcGFkZXM6XCIsXCI6aGVhcnRzOlwiLFwiOmNsdWJzOlwiLFwiOmRpYW1vbmRzOlwiLFwiOmdlbTpcIixcIjpyaW5nOlwiLFwiOnRyb3BoeTpcIixcIjptdXNpY2FsX3Njb3JlOlwiLFwiOm11c2ljYWxfa2V5Ym9hcmQ6XCIsXCI6dmlvbGluOlwiLFwiOnNwYWNlX2ludmFkZXI6XCIsXCI6dmlkZW9fZ2FtZTpcIixcIjpibGFja19qb2tlcjpcIixcIjpmbG93ZXJfcGxheWluZ19jYXJkczpcIixcIjpnYW1lX2RpZTpcIixcIjpkYXJ0OlwiLFwiOm1haGpvbmc6XCIsXCI6Y2xhcHBlcjpcIixcIjptZW1vOlwiLFwiOnBlbmNpbDpcIixcIjpib29rOlwiLFwiOmFydDpcIixcIjptaWNyb3Bob25lOlwiLFwiOmhlYWRwaG9uZXM6XCIsXCI6dHJ1bXBldDpcIixcIjpzYXhvcGhvbmU6XCIsXCI6Z3VpdGFyOlwiLFwiOnNob2U6XCIsXCI6c2FuZGFsOlwiLFwiOmhpZ2hfaGVlbDpcIixcIjpsaXBzdGljazpcIixcIjpib290OlwiLFwiOnNoaXJ0OlwiLFwiOnRzaGlydDpcIixcIjpuZWNrdGllOlwiLFwiOndvbWFuc19jbG90aGVzOlwiLFwiOmRyZXNzOlwiLFwiOnJ1bm5pbmdfc2hpcnRfd2l0aF9zYXNoOlwiLFwiOmplYW5zOlwiLFwiOmtpbW9ubzpcIixcIjpiaWtpbmk6XCIsXCI6cmliYm9uOlwiLFwiOnRvcGhhdDpcIixcIjpjcm93bjpcIixcIjp3b21hbnNfaGF0OlwiLFwiOm1hbnNfc2hvZTpcIixcIjpjbG9zZWRfdW1icmVsbGE6XCIsXCI6YnJpZWZjYXNlOlwiLFwiOmhhbmRiYWc6XCIsXCI6cG91Y2g6XCIsXCI6cHVyc2U6XCIsXCI6ZXllZ2xhc3NlczpcIixcIjpmaXNoaW5nX3BvbGVfYW5kX2Zpc2g6XCIsXCI6Y29mZmVlOlwiLFwiOnRlYTpcIixcIjpzYWtlOlwiLFwiOmJhYnlfYm90dGxlOlwiLFwiOmJlZXI6XCIsXCI6YmVlcnM6XCIsXCI6Y29ja3RhaWw6XCIsXCI6dHJvcGljYWxfZHJpbms6XCIsXCI6d2luZV9nbGFzczpcIixcIjpmb3JrX2FuZF9rbmlmZTpcIixcIjpwaXp6YTpcIixcIjpoYW1idXJnZXI6XCIsXCI6ZnJpZXM6XCIsXCI6cG91bHRyeV9sZWc6XCIsXCI6bWVhdF9vbl9ib25lOlwiLFwiOnNwYWdoZXR0aTpcIixcIjpjdXJyeTpcIixcIjpmcmllZF9zaHJpbXA6XCIsXCI6YmVudG86XCIsXCI6c3VzaGk6XCIsXCI6ZmlzaF9jYWtlOlwiLFwiOnJpY2VfYmFsbDpcIixcIjpyaWNlX2NyYWNrZXI6XCIsXCI6cmljZTpcIixcIjpyYW1lbjpcIixcIjpzdGV3OlwiLFwiOm9kZW46XCIsXCI6ZGFuZ286XCIsXCI6ZWdnOlwiLFwiOmJyZWFkOlwiLFwiOmRvdWdobnV0OlwiLFwiOmN1c3RhcmQ6XCIsXCI6aWNlY3JlYW06XCIsXCI6aWNlX2NyZWFtOlwiLFwiOnNoYXZlZF9pY2U6XCIsXCI6YmlydGhkYXk6XCIsXCI6Y2FrZTpcIixcIjpjb29raWU6XCIsXCI6Y2hvY29sYXRlX2JhcjpcIixcIjpjYW5keTpcIixcIjpsb2xsaXBvcDpcIixcIjpob25leV9wb3Q6XCIsXCI6YXBwbGU6XCIsXCI6Z3JlZW5fYXBwbGU6XCIsXCI6dGFuZ2VyaW5lOlwiLFwiOmxlbW9uOlwiLFwiOmNoZXJyaWVzOlwiLFwiOmdyYXBlczpcIixcIjp3YXRlcm1lbG9uOlwiLFwiOnN0cmF3YmVycnk6XCIsXCI6cGVhY2g6XCIsXCI6bWVsb246XCIsXCI6YmFuYW5hOlwiLFwiOnBlYXI6XCIsXCI6cGluZWFwcGxlOlwiLFwiOnN3ZWV0X3BvdGF0bzpcIixcIjplZ2dwbGFudDpcIixcIjp0b21hdG86XCIsXCI6Y29ybjpcIixcIjphbGllbjpcIixcIjphbmdlbDpcIixcIjphbmdlcjpcIixcIjphbmdyeTpcIixcIjphbmd1aXNoZWQ6XCIsXCI6YXN0b25pc2hlZDpcIixcIjpiYWJ5OlwiLFwiOmJsdWVfaGVhcnQ6XCIsXCI6Ymx1c2g6XCIsXCI6Ym9vbTpcIixcIjpib3c6XCIsXCI6Ym93dGllOlwiLFwiOmJveTpcIixcIjpicmlkZV93aXRoX3ZlaWw6XCIsXCI6YnJva2VuX2hlYXJ0OlwiLFwiOmJ1c3RfaW5fc2lsaG91ZXR0ZTpcIixcIjpidXN0c19pbl9zaWxob3VldHRlOlwiLFwiOmNsYXA6XCIsXCI6Y29sZF9zd2VhdDpcIixcIjpjb2xsaXNpb246XCIsXCI6Y29uZm91bmRlZDpcIixcIjpjb25mdXNlZDpcIixcIjpjb25zdHJ1Y3Rpb25fd29ya2VyOlwiLFwiOmNvcDpcIixcIjpjb3VwbGVfd2l0aF9oZWFydDpcIixcIjpjb3VwbGU6XCIsXCI6Y291cGxla2lzczpcIixcIjpjcnk6XCIsXCI6Y3J5aW5nX2NhdF9mYWNlOlwiLFwiOmN1cGlkOlwiLFwiOmRhbmNlcjpcIixcIjpkYW5jZXJzOlwiLFwiOmRhc2g6XCIsXCI6ZGlzYXBwb2ludGVkOlwiLFwiOmRpenp5X2ZhY2U6XCIsXCI6ZGl6enk6XCIsXCI6ZHJvcGxldDpcIixcIjplYXI6XCIsXCI6ZXhjbGFtYXRpb246XCIsXCI6ZXhwcmVzc2lvbmxlc3M6XCIsXCI6ZXllczpcIixcIjpmYWNlcHVuY2g6XCIsXCI6ZmFtaWx5OlwiLFwiOmZlYXJmdWw6XCIsXCI6ZmVlbHNnb29kOlwiLFwiOmZlZXQ6XCIsXCI6ZmlubmFkaWU6XCIsXCI6ZmlyZTpcIixcIjpmaXN0OlwiLFwiOmZsdXNoZWQ6XCIsXCI6ZnJvd25pbmc6XCIsXCI6Z2lybDpcIixcIjpnb2JlcnNlcms6XCIsXCI6Z29kbW9kZTpcIixcIjpncmVlbl9oZWFydDpcIixcIjpncmV5X2V4Y2xhbWF0aW9uOlwiLFwiOmdyZXlfcXVlc3Rpb246XCIsXCI6Z3JpbWFjaW5nOlwiLFwiOmdyaW46XCIsXCI6Z3Jpbm5pbmc6XCIsXCI6Z3VhcmRzbWFuOlwiLFwiOmhhaXJjdXQ6XCIsXCI6aGFuZDpcIixcIjpoYW5rZXk6XCIsXCI6aGVhcl9ub19ldmlsOlwiLFwiOmhlYXJ0X2V5ZXNfY2F0OlwiLFwiOmhlYXJ0X2V5ZXM6XCIsXCI6aGVhcnQ6XCIsXCI6aGVhcnRiZWF0OlwiLFwiOmhlYXJ0cHVsc2U6XCIsXCI6aHVydHJlYWxiYWQ6XCIsXCI6aHVzaGVkOlwiLFwiOmltcDpcIixcIjppbmZvcm1hdGlvbl9kZXNrX3BlcnNvbjpcIixcIjppbm5vY2VudDpcIixcIjpqYXBhbmVzZV9nb2JsaW46XCIsXCI6amFwYW5lc2Vfb2dyZTpcIixcIjpqb3lfY2F0OlwiLFwiOmpveTpcIixcIjpraXNzOlwiLFwiOmtpc3NpbmdfY2F0OlwiLFwiOmtpc3NpbmdfY2xvc2VkX2V5ZXM6XCIsXCI6a2lzc2luZ19oZWFydDpcIixcIjpraXNzaW5nX3NtaWxpbmdfZXllczpcIixcIjpraXNzaW5nOlwiLFwiOmxhdWdoaW5nOlwiLFwiOmxpcHM6XCIsXCI6bG92ZV9sZXR0ZXI6XCIsXCI6bWFuX3dpdGhfZ3VhX3BpX21hbzpcIixcIjptYW5fd2l0aF90dXJiYW46XCIsXCI6bWFuOlwiLFwiOm1hc2s6XCIsXCI6bWFzc2FnZTpcIixcIjptZXRhbDpcIixcIjptdXNjbGU6XCIsXCI6bXVzaWNhbF9ub3RlOlwiLFwiOm5haWxfY2FyZTpcIixcIjpuZWNrYmVhcmQ6XCIsXCI6bmV1dHJhbF9mYWNlOlwiLFwiOm5vX2dvb2Q6XCIsXCI6bm9fbW91dGg6XCIsXCI6bm9zZTpcIixcIjpub3RlczpcIixcIjpva19oYW5kOlwiLFwiOm9rX3dvbWFuOlwiLFwiOm9sZGVyX21hbjpcIixcIjpvbGRlcl93b21hbjpcIixcIjpvcGVuX2hhbmRzOlwiLFwiOm9wZW5fbW91dGg6XCIsXCI6cGVuc2l2ZTpcIixcIjpwZXJzZXZlcmU6XCIsXCI6cGVyc29uX2Zyb3duaW5nOlwiLFwiOnBlcnNvbl93aXRoX2Jsb25kX2hhaXI6XCIsXCI6cGVyc29uX3dpdGhfcG91dGluZ19mYWNlOlwiLFwiOnBvaW50X2Rvd246XCIsXCI6cG9pbnRfbGVmdDpcIixcIjpwb2ludF9yaWdodDpcIixcIjpwb2ludF91cF8yOlwiLFwiOnBvaW50X3VwOlwiLFwiOnBvb3A6XCIsXCI6cG91dGluZ19jYXQ6XCIsXCI6cHJheTpcIixcIjpwcmluY2VzczpcIixcIjpwdW5jaDpcIixcIjpwdXJwbGVfaGVhcnQ6XCIsXCI6cXVlc3Rpb246XCIsXCI6cmFnZTpcIixcIjpyYWdlMTpcIixcIjpyYWdlMjpcIixcIjpyYWdlMzpcIixcIjpyYWdlNDpcIixcIjpyYWlzZWRfaGFuZDpcIixcIjpyYWlzZWRfaGFuZHM6XCIsXCI6cmVsYXhlZDpcIixcIjpyZWxpZXZlZDpcIixcIjpyZXZvbHZpbmdfaGVhcnRzOlwiLFwiOnJ1bm5lcjpcIixcIjpydW5uaW5nOlwiLFwiOnNhdGlzZmllZDpcIixcIjpzY3JlYW1fY2F0OlwiLFwiOnNjcmVhbTpcIixcIjpzZWVfbm9fZXZpbDpcIixcIjpzaGl0OlwiLFwiOnNrdWxsOlwiLFwiOnNsZWVwaW5nOlwiLFwiOnNsZWVweTpcIixcIjpzbWlsZV9jYXQ6XCIsXCI6c21pbGU6XCIsXCI6c21pbGV5X2NhdDpcIixcIjpzbWlsZXk6XCIsXCI6c21pbGluZ19pbXA6XCIsXCI6c21pcmtfY2F0OlwiLFwiOnNtaXJrOlwiLFwiOnNvYjpcIixcIjpzcGFya2xpbmdfaGVhcnQ6XCIsXCI6c3BhcmtsZXM6XCIsXCI6c3BlYWtfbm9fZXZpbDpcIixcIjpzcGVlY2hfYmFsbG9vbjpcIixcIjpzdGFyOlwiLFwiOnN0YXIyOlwiLFwiOnN0dWNrX291dF90b25ndWVfY2xvc2VkX2V5ZXM6XCIsXCI6c3R1Y2tfb3V0X3Rvbmd1ZV93aW5raW5nX2V5ZTpcIixcIjpzdHVja19vdXRfdG9uZ3VlOlwiLFwiOnN1bmdsYXNzZXM6XCIsXCI6c3VzcGVjdDpcIixcIjpzd2VhdF9kcm9wczpcIixcIjpzd2VhdF9zbWlsZTpcIixcIjpzd2VhdDpcIixcIjp0aG91Z2h0X2JhbGxvb246XCIsXCI6LTE6XCIsXCI6dGh1bWJzZG93bjpcIixcIjp0aHVtYnN1cDpcIixcIjorMTpcIixcIjp0aXJlZF9mYWNlOlwiLFwiOnRvbmd1ZTpcIixcIjp0cml1bXBoOlwiLFwiOnRyb2xsZmFjZTpcIixcIjp0d29faGVhcnRzOlwiLFwiOnR3b19tZW5faG9sZGluZ19oYW5kczpcIixcIjp0d29fd29tZW5faG9sZGluZ19oYW5kczpcIixcIjp1bmFtdXNlZDpcIixcIjp2OlwiLFwiOndhbGtpbmc6XCIsXCI6d2F2ZTpcIixcIjp3ZWFyeTpcIixcIjp3aW5rMjpcIixcIjp3aW5rOlwiLFwiOndvbWFuOlwiLFwiOndvcnJpZWQ6XCIsXCI6eWVsbG93X2hlYXJ0OlwiLFwiOnl1bTpcIixcIjp6eno6XCIsXCI6MTA5OlwiLFwiOmhvdXNlOlwiLFwiOmhvdXNlX3dpdGhfZ2FyZGVuOlwiLFwiOnNjaG9vbDpcIixcIjpvZmZpY2U6XCIsXCI6cG9zdF9vZmZpY2U6XCIsXCI6aG9zcGl0YWw6XCIsXCI6YmFuazpcIixcIjpjb252ZW5pZW5jZV9zdG9yZTpcIixcIjpsb3ZlX2hvdGVsOlwiLFwiOmhvdGVsOlwiLFwiOndlZGRpbmc6XCIsXCI6Y2h1cmNoOlwiLFwiOmRlcGFydG1lbnRfc3RvcmU6XCIsXCI6ZXVyb3BlYW5fcG9zdF9vZmZpY2U6XCIsXCI6Y2l0eV9zdW5yaXNlOlwiLFwiOmNpdHlfc3Vuc2V0OlwiLFwiOmphcGFuZXNlX2Nhc3RsZTpcIixcIjpldXJvcGVhbl9jYXN0bGU6XCIsXCI6dGVudDpcIixcIjpmYWN0b3J5OlwiLFwiOnRva3lvX3Rvd2VyOlwiLFwiOmphcGFuOlwiLFwiOm1vdW50X2Z1amk6XCIsXCI6c3VucmlzZV9vdmVyX21vdW50YWluczpcIixcIjpzdW5yaXNlOlwiLFwiOnN0YXJzOlwiLFwiOnN0YXR1ZV9vZl9saWJlcnR5OlwiLFwiOmJyaWRnZV9hdF9uaWdodDpcIixcIjpjYXJvdXNlbF9ob3JzZTpcIixcIjpyYWluYm93OlwiLFwiOmZlcnJpc193aGVlbDpcIixcIjpmb3VudGFpbjpcIixcIjpyb2xsZXJfY29hc3RlcjpcIixcIjpzaGlwOlwiLFwiOnNwZWVkYm9hdDpcIixcIjpib2F0OlwiLFwiOnNhaWxib2F0OlwiLFwiOnJvd2JvYXQ6XCIsXCI6YW5jaG9yOlwiLFwiOnJvY2tldDpcIixcIjphaXJwbGFuZTpcIixcIjpoZWxpY29wdGVyOlwiLFwiOnN0ZWFtX2xvY29tb3RpdmU6XCIsXCI6dHJhbTpcIixcIjptb3VudGFpbl9yYWlsd2F5OlwiLFwiOmJpa2U6XCIsXCI6YWVyaWFsX3RyYW13YXk6XCIsXCI6c3VzcGVuc2lvbl9yYWlsd2F5OlwiLFwiOm1vdW50YWluX2NhYmxld2F5OlwiLFwiOnRyYWN0b3I6XCIsXCI6Ymx1ZV9jYXI6XCIsXCI6b25jb21pbmdfYXV0b21vYmlsZTpcIixcIjpjYXI6XCIsXCI6cmVkX2NhcjpcIixcIjp0YXhpOlwiLFwiOm9uY29taW5nX3RheGk6XCIsXCI6YXJ0aWN1bGF0ZWRfbG9ycnk6XCIsXCI6YnVzOlwiLFwiOm9uY29taW5nX2J1czpcIixcIjpyb3RhdGluZ19saWdodDpcIixcIjpwb2xpY2VfY2FyOlwiLFwiOm9uY29taW5nX3BvbGljZV9jYXI6XCIsXCI6ZmlyZV9lbmdpbmU6XCIsXCI6YW1idWxhbmNlOlwiLFwiOm1pbmlidXM6XCIsXCI6dHJ1Y2s6XCIsXCI6dHJhaW46XCIsXCI6c3RhdGlvbjpcIixcIjp0cmFpbjI6XCIsXCI6YnVsbGV0dHJhaW5fZnJvbnQ6XCIsXCI6YnVsbGV0dHJhaW5fc2lkZTpcIixcIjpsaWdodF9yYWlsOlwiLFwiOm1vbm9yYWlsOlwiLFwiOnJhaWx3YXlfY2FyOlwiLFwiOnRyb2xsZXlidXM6XCIsXCI6dGlja2V0OlwiLFwiOmZ1ZWxwdW1wOlwiLFwiOnZlcnRpY2FsX3RyYWZmaWNfbGlnaHQ6XCIsXCI6dHJhZmZpY19saWdodDpcIixcIjp3YXJuaW5nOlwiLFwiOmNvbnN0cnVjdGlvbjpcIixcIjpiZWdpbm5lcjpcIixcIjphdG06XCIsXCI6c2xvdF9tYWNoaW5lOlwiLFwiOmJ1c3N0b3A6XCIsXCI6YmFyYmVyOlwiLFwiOmhvdHNwcmluZ3M6XCIsXCI6Y2hlY2tlcmVkX2ZsYWc6XCIsXCI6Y3Jvc3NlZF9mbGFnczpcIixcIjppemFrYXlhX2xhbnRlcm46XCIsXCI6bW95YWk6XCIsXCI6Y2lyY3VzX3RlbnQ6XCIsXCI6cGVyZm9ybWluZ19hcnRzOlwiLFwiOnJvdW5kX3B1c2hwaW46XCIsXCI6dHJpYW5ndWxhcl9mbGFnX29uX3Bvc3Q6XCIsXCI6anA6XCIsXCI6a3I6XCIsXCI6Y246XCIsXCI6dXM6XCIsXCI6ZnI6XCIsXCI6ZXM6XCIsXCI6aXQ6XCIsXCI6cnU6XCIsXCI6Z2I6XCIsXCI6dWs6XCIsXCI6ZGU6XCIsXCI6MTAwOlwiLFwiOjEyMzQ6XCIsXCI6b25lOlwiLFwiOnR3bzpcIixcIjp0aHJlZTpcIixcIjpmb3VyOlwiLFwiOmZpdmU6XCIsXCI6c2l4OlwiLFwiOnNldmVuOlwiLFwiOmVpZ2h0OlwiLFwiOm5pbmU6XCIsXCI6a2V5Y2FwX3RlbjpcIixcIjp6ZXJvOlwiLFwiOmhhc2g6XCIsXCI6c3ltYm9sczpcIixcIjphcnJvd19iYWNrd2FyZDpcIixcIjphcnJvd19kb3duOlwiLFwiOmFycm93X2ZvcndhcmQ6XCIsXCI6YXJyb3dfbGVmdDpcIixcIjpjYXBpdGFsX2FiY2Q6XCIsXCI6YWJjZDpcIixcIjphYmM6XCIsXCI6YXJyb3dfbG93ZXJfbGVmdDpcIixcIjphcnJvd19sb3dlcl9yaWdodDpcIixcIjphcnJvd19yaWdodDpcIixcIjphcnJvd191cDpcIixcIjphcnJvd191cHBlcl9sZWZ0OlwiLFwiOmFycm93X3VwcGVyX3JpZ2h0OlwiLFwiOmFycm93X2RvdWJsZV9kb3duOlwiLFwiOmFycm93X2RvdWJsZV91cDpcIixcIjphcnJvd19kb3duX3NtYWxsOlwiLFwiOmFycm93X2hlYWRpbmdfZG93bjpcIixcIjphcnJvd19oZWFkaW5nX3VwOlwiLFwiOmxlZnR3YXJkc19hcnJvd193aXRoX2hvb2s6XCIsXCI6YXJyb3dfcmlnaHRfaG9vazpcIixcIjpsZWZ0X3JpZ2h0X2Fycm93OlwiLFwiOmFycm93X3VwX2Rvd246XCIsXCI6YXJyb3dfdXBfc21hbGw6XCIsXCI6YXJyb3dzX2Nsb2Nrd2lzZTpcIixcIjphcnJvd3NfY291bnRlcmNsb2Nrd2lzZTpcIixcIjpyZXdpbmQ6XCIsXCI6ZmFzdF9mb3J3YXJkOlwiLFwiOmluZm9ybWF0aW9uX3NvdXJjZTpcIixcIjpvazpcIixcIjp0d2lzdGVkX3JpZ2h0d2FyZHNfYXJyb3dzOlwiLFwiOnJlcGVhdDpcIixcIjpyZXBlYXRfb25lOlwiLFwiOm5ldzpcIixcIjp0b3A6XCIsXCI6dXA6XCIsXCI6Y29vbDpcIixcIjpmcmVlOlwiLFwiOm5nOlwiLFwiOmNpbmVtYTpcIixcIjprb2tvOlwiLFwiOnNpZ25hbF9zdHJlbmd0aDpcIixcIjp1NTI3MjpcIixcIjp1NTQwODpcIixcIjp1NTViNjpcIixcIjp1NjMwNzpcIixcIjp1NjcwODpcIixcIjp1NjcwOTpcIixcIjp1NmU4MDpcIixcIjp1NzEyMTpcIixcIjp1NzUzMzpcIixcIjp1N2E3YTpcIixcIjp1Nzk4MTpcIixcIjpzYTpcIixcIjpyZXN0cm9vbTpcIixcIjptZW5zOlwiLFwiOndvbWVuczpcIixcIjpiYWJ5X3N5bWJvbDpcIixcIjpub19zbW9raW5nOlwiLFwiOnBhcmtpbmc6XCIsXCI6d2hlZWxjaGFpcjpcIixcIjptZXRybzpcIixcIjpiYWdnYWdlX2NsYWltOlwiLFwiOmFjY2VwdDpcIixcIjp3YzpcIixcIjpwb3RhYmxlX3dhdGVyOlwiLFwiOnB1dF9saXR0ZXJfaW5faXRzX3BsYWNlOlwiLFwiOnNlY3JldDpcIixcIjpjb25ncmF0dWxhdGlvbnM6XCIsXCI6bTpcIixcIjpwYXNzcG9ydF9jb250cm9sOlwiLFwiOmxlZnRfbHVnZ2FnZTpcIixcIjpjdXN0b21zOlwiLFwiOmlkZW9ncmFwaF9hZHZhbnRhZ2U6XCIsXCI6Y2w6XCIsXCI6c29zOlwiLFwiOmlkOlwiLFwiOm5vX2VudHJ5X3NpZ246XCIsXCI6dW5kZXJhZ2U6XCIsXCI6bm9fbW9iaWxlX3Bob25lczpcIixcIjpkb19ub3RfbGl0dGVyOlwiLFwiOm5vbi1wb3RhYmxlX3dhdGVyOlwiLFwiOm5vX2JpY3ljbGVzOlwiLFwiOm5vX3BlZGVzdHJpYW5zOlwiLFwiOmNoaWxkcmVuX2Nyb3NzaW5nOlwiLFwiOm5vX2VudHJ5OlwiLFwiOmVpZ2h0X3Nwb2tlZF9hc3RlcmlzazpcIixcIjplaWdodF9wb2ludGVkX2JsYWNrX3N0YXI6XCIsXCI6aGVhcnRfZGVjb3JhdGlvbjpcIixcIjp2czpcIixcIjp2aWJyYXRpb25fbW9kZTpcIixcIjptb2JpbGVfcGhvbmVfb2ZmOlwiLFwiOmNoYXJ0OlwiLFwiOmN1cnJlbmN5X2V4Y2hhbmdlOlwiLFwiOmFyaWVzOlwiLFwiOnRhdXJ1czpcIixcIjpnZW1pbmk6XCIsXCI6Y2FuY2VyOlwiLFwiOmxlbzpcIixcIjp2aXJnbzpcIixcIjpsaWJyYTpcIixcIjpzY29ycGl1czpcIixcIjpzYWdpdHRhcml1czpcIixcIjpjYXByaWNvcm46XCIsXCI6YXF1YXJpdXM6XCIsXCI6cGlzY2VzOlwiLFwiOm9waGl1Y2h1czpcIixcIjpzaXhfcG9pbnRlZF9zdGFyOlwiLFwiOm5lZ2F0aXZlX3NxdWFyZWRfY3Jvc3NfbWFyazpcIixcIjphOlwiLFwiOmI6XCIsXCI6YWI6XCIsXCI6bzI6XCIsXCI6ZGlhbW9uZF9zaGFwZV93aXRoX2FfZG90X2luc2lkZTpcIixcIjpyZWN5Y2xlOlwiLFwiOmVuZDpcIixcIjpvbjpcIixcIjpzb29uOlwiLFwiOmNsb2NrMTpcIixcIjpjbG9jazEzMDpcIixcIjpjbG9jazEwOlwiLFwiOmNsb2NrMTAzMDpcIixcIjpjbG9jazExOlwiLFwiOmNsb2NrMTEzMDpcIixcIjpjbG9jazEyOlwiLFwiOmNsb2NrMTIzMDpcIixcIjpjbG9jazI6XCIsXCI6Y2xvY2syMzA6XCIsXCI6Y2xvY2szOlwiLFwiOmNsb2NrMzMwOlwiLFwiOmNsb2NrNDpcIixcIjpjbG9jazQzMDpcIixcIjpjbG9jazU6XCIsXCI6Y2xvY2s1MzA6XCIsXCI6Y2xvY2s2OlwiLFwiOmNsb2NrNjMwOlwiLFwiOmNsb2NrNzpcIixcIjpjbG9jazczMDpcIixcIjpjbG9jazg6XCIsXCI6Y2xvY2s4MzA6XCIsXCI6Y2xvY2s5OlwiLFwiOmNsb2NrOTMwOlwiLFwiOmhlYXZ5X2RvbGxhcl9zaWduOlwiLFwiOmNvcHlyaWdodDpcIixcIjpyZWdpc3RlcmVkOlwiLFwiOnRtOlwiLFwiOng6XCIsXCI6aGVhdnlfZXhjbGFtYXRpb25fbWFyazpcIixcIjpiYW5nYmFuZzpcIixcIjppbnRlcnJvYmFuZzpcIixcIjpvOlwiLFwiOmhlYXZ5X211bHRpcGxpY2F0aW9uX3g6XCIsXCI6aGVhdnlfcGx1c19zaWduOlwiLFwiOmhlYXZ5X21pbnVzX3NpZ246XCIsXCI6aGVhdnlfZGl2aXNpb25fc2lnbjpcIixcIjp3aGl0ZV9mbG93ZXI6XCIsXCI6aGVhdnlfY2hlY2tfbWFyazpcIixcIjpiYWxsb3RfYm94X3dpdGhfY2hlY2s6XCIsXCI6cmFkaW9fYnV0dG9uOlwiLFwiOmxpbms6XCIsXCI6Y3VybHlfbG9vcDpcIixcIjp3YXZ5X2Rhc2g6XCIsXCI6cGFydF9hbHRlcm5hdGlvbl9tYXJrOlwiLFwiOnRyaWRlbnQ6XCIsXCI6YmxhY2tfc3F1YXJlOlwiLFwiOndoaXRlX3NxdWFyZTpcIixcIjp3aGl0ZV9jaGVja19tYXJrOlwiLFwiOmJsYWNrX3NxdWFyZV9idXR0b246XCIsXCI6d2hpdGVfc3F1YXJlX2J1dHRvbjpcIixcIjpibGFja19jaXJjbGU6XCIsXCI6d2hpdGVfY2lyY2xlOlwiLFwiOnJlZF9jaXJjbGU6XCIsXCI6bGFyZ2VfYmx1ZV9jaXJjbGU6XCIsXCI6bGFyZ2VfYmx1ZV9kaWFtb25kOlwiLFwiOmxhcmdlX29yYW5nZV9kaWFtb25kOlwiLFwiOnNtYWxsX2JsdWVfZGlhbW9uZDpcIixcIjpzbWFsbF9vcmFuZ2VfZGlhbW9uZDpcIixcIjpzbWFsbF9yZWRfdHJpYW5nbGU6XCIsXCI6c21hbGxfcmVkX3RyaWFuZ2xlX2Rvd246XCIsXCI6c2hpcGl0OlwiXSxcbiAgICAgICAgdGVzdCA9IC9cXDpbYS16MC05X1xcLVxcK10rXFw6L2c7XG5cbiAgICBmdW5jdGlvbiBlbW9qaShzb21lU3RyaW5nLCB1cmwsIHNpemUpIHtcbiAgICAgICAgcmV0dXJuIHNvbWVTdHJpbmcucmVwbGFjZSh0ZXN0LCBmdW5jdGlvbiAobWF0Y2gpIHtcbiAgICAgICAgICAgIGlmIChlbW9qaXMuaW5kZXhPZihtYXRjaCkgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgdmFyIG5hbWUgPSBTdHJpbmcobWF0Y2gpLnNsaWNlKDEsIC0xKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gJzxpbWcgY2xhc3M9XCJlbW9qaVwiIHRpdGxlPVwiOicgKyBuYW1lICsgJzpcIiBhbHQ9XCInICsgbmFtZSArICdcIiBzcmM9XCInICsgdXJsICsgJy8nICsgZW5jb2RlVVJJQ29tcG9uZW50KG5hbWUpICsgJy5wbmdcIicgKyAoc2l6ZSA/ICgnIGhlaWdodD1cIicgKyBzaXplICsgJ1wiJykgOiAnJykgKyAnIC8+JztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1hdGNoO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgZW1vamkubGlzdCA9IGVtb2ppcztcblxuICAgIHJldHVybiBlbW9qaTtcbn0pKTtcbiIsIi8vIENvcHlyaWdodCAyMDA5LTIwMTIgYnkgY29udHJpYnV0b3JzLCBNSVQgTGljZW5zZVxuLy8gdmltOiB0cz00IHN0cz00IHN3PTQgZXhwYW5kdGFiXG5cbi8vQWRkIHNlbWljb2xvbiB0byBwcmV2ZW50IElJRkUgZnJvbSBiZWluZyBwYXNzZWQgYXMgYXJndW1lbnQgdG8gY29uY2F0ZWQgY29kZS5cbjtcbi8vIE1vZHVsZSBzeXN0ZW1zIG1hZ2ljIGRhbmNlXG4oZnVuY3Rpb24gKGRlZmluaXRpb24pIHtcbiAgICAvLyBSZXF1aXJlSlNcbiAgICBpZiAodHlwZW9mIGRlZmluZSA9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgZGVmaW5lKGRlZmluaXRpb24pO1xuICAgIC8vIFlVSTNcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBZVUkgPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIFlVSS5hZGQoXCJlczVcIiwgZGVmaW5pdGlvbik7XG4gICAgLy8gQ29tbW9uSlMgYW5kIDxzY3JpcHQ+XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZGVmaW5pdGlvbigpO1xuICAgIH1cbn0pKGZ1bmN0aW9uICgpIHtcblxuLyoqXG4gKiBCcmluZ3MgYW4gZW52aXJvbm1lbnQgYXMgY2xvc2UgdG8gRUNNQVNjcmlwdCA1IGNvbXBsaWFuY2VcbiAqIGFzIGlzIHBvc3NpYmxlIHdpdGggdGhlIGZhY2lsaXRpZXMgb2YgZXJzdHdoaWxlIGVuZ2luZXMuXG4gKlxuICogQW5ub3RhdGVkIEVTNTogaHR0cDovL2VzNS5naXRodWIuY29tLyAoc3BlY2lmaWMgbGlua3MgYmVsb3cpXG4gKiBFUzUgU3BlYzogaHR0cDovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL3B1YmxpY2F0aW9ucy9maWxlcy9FQ01BLVNUL0VjbWEtMjYyLnBkZlxuICogUmVxdWlyZWQgcmVhZGluZzogaHR0cDovL2phdmFzY3JpcHR3ZWJsb2cud29yZHByZXNzLmNvbS8yMDExLzEyLzA1L2V4dGVuZGluZy1qYXZhc2NyaXB0LW5hdGl2ZXMvXG4gKi9cblxuLy8gRVMtNSAxNS4xLjIuMlxuaWYgKHBhcnNlSW50KCcwOCcpICE9PSA4KSB7XG4gICAgcGFyc2VJbnQgPSAoZnVuY3Rpb24gKG9yaWdQYXJzZUludCkge1xuICAgICAgICB2YXIgaGV4UmVnZXggPSAvXjBbeFhdLztcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIHBhcnNlSW50RVM1KHN0ciwgcmFkaXgpIHtcbiAgICAgICAgICAgIHN0ciA9IFN0cmluZyhzdHIpLnRyaW0oKTtcbiAgICAgICAgICAgIGlmICghK3JhZGl4KSB7XG4gICAgICAgICAgICAgICAgcmFkaXggPSBoZXhSZWdleC50ZXN0KHN0cikgPyAxNiA6IDEwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG9yaWdQYXJzZUludChzdHIsIHJhZGl4KTtcbiAgICAgICAgfTtcbiAgICB9KHBhcnNlSW50KSk7XG59XG5cbi8vXG4vLyBGdW5jdGlvblxuLy8gPT09PT09PT1cbi8vXG5cbi8vIEVTLTUgMTUuMy40LjVcbi8vIGh0dHA6Ly9lczUuZ2l0aHViLmNvbS8jeDE1LjMuNC41XG5cbmZ1bmN0aW9uIEVtcHR5KCkge31cblxuaWYgKCFGdW5jdGlvbi5wcm90b3R5cGUuYmluZCkge1xuICAgIEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kID0gZnVuY3Rpb24gYmluZCh0aGF0KSB7IC8vIC5sZW5ndGggaXMgMVxuICAgICAgICAvLyAxLiBMZXQgVGFyZ2V0IGJlIHRoZSB0aGlzIHZhbHVlLlxuICAgICAgICB2YXIgdGFyZ2V0ID0gdGhpcztcbiAgICAgICAgLy8gMi4gSWYgSXNDYWxsYWJsZShUYXJnZXQpIGlzIGZhbHNlLCB0aHJvdyBhIFR5cGVFcnJvciBleGNlcHRpb24uXG4gICAgICAgIGlmICh0eXBlb2YgdGFyZ2V0ICE9IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kIGNhbGxlZCBvbiBpbmNvbXBhdGlibGUgXCIgKyB0YXJnZXQpO1xuICAgICAgICB9XG4gICAgICAgIC8vIDMuIExldCBBIGJlIGEgbmV3IChwb3NzaWJseSBlbXB0eSkgaW50ZXJuYWwgbGlzdCBvZiBhbGwgb2YgdGhlXG4gICAgICAgIC8vICAgYXJndW1lbnQgdmFsdWVzIHByb3ZpZGVkIGFmdGVyIHRoaXNBcmcgKGFyZzEsIGFyZzIgZXRjKSwgaW4gb3JkZXIuXG4gICAgICAgIC8vIFhYWCBzbGljZWRBcmdzIHdpbGwgc3RhbmQgaW4gZm9yIFwiQVwiIGlmIHVzZWRcbiAgICAgICAgdmFyIGFyZ3MgPSBfQXJyYXlfc2xpY2VfLmNhbGwoYXJndW1lbnRzLCAxKTsgLy8gZm9yIG5vcm1hbCBjYWxsXG4gICAgICAgIC8vIDQuIExldCBGIGJlIGEgbmV3IG5hdGl2ZSBFQ01BU2NyaXB0IG9iamVjdC5cbiAgICAgICAgLy8gMTEuIFNldCB0aGUgW1tQcm90b3R5cGVdXSBpbnRlcm5hbCBwcm9wZXJ0eSBvZiBGIHRvIHRoZSBzdGFuZGFyZFxuICAgICAgICAvLyAgIGJ1aWx0LWluIEZ1bmN0aW9uIHByb3RvdHlwZSBvYmplY3QgYXMgc3BlY2lmaWVkIGluIDE1LjMuMy4xLlxuICAgICAgICAvLyAxMi4gU2V0IHRoZSBbW0NhbGxdXSBpbnRlcm5hbCBwcm9wZXJ0eSBvZiBGIGFzIGRlc2NyaWJlZCBpblxuICAgICAgICAvLyAgIDE1LjMuNC41LjEuXG4gICAgICAgIC8vIDEzLiBTZXQgdGhlIFtbQ29uc3RydWN0XV0gaW50ZXJuYWwgcHJvcGVydHkgb2YgRiBhcyBkZXNjcmliZWQgaW5cbiAgICAgICAgLy8gICAxNS4zLjQuNS4yLlxuICAgICAgICAvLyAxNC4gU2V0IHRoZSBbW0hhc0luc3RhbmNlXV0gaW50ZXJuYWwgcHJvcGVydHkgb2YgRiBhcyBkZXNjcmliZWQgaW5cbiAgICAgICAgLy8gICAxNS4zLjQuNS4zLlxuICAgICAgICB2YXIgYmluZGVyID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICBpZiAodGhpcyBpbnN0YW5jZW9mIGJvdW5kKSB7XG4gICAgICAgICAgICAgICAgLy8gMTUuMy40LjUuMiBbW0NvbnN0cnVjdF1dXG4gICAgICAgICAgICAgICAgLy8gV2hlbiB0aGUgW1tDb25zdHJ1Y3RdXSBpbnRlcm5hbCBtZXRob2Qgb2YgYSBmdW5jdGlvbiBvYmplY3QsXG4gICAgICAgICAgICAgICAgLy8gRiB0aGF0IHdhcyBjcmVhdGVkIHVzaW5nIHRoZSBiaW5kIGZ1bmN0aW9uIGlzIGNhbGxlZCB3aXRoIGFcbiAgICAgICAgICAgICAgICAvLyBsaXN0IG9mIGFyZ3VtZW50cyBFeHRyYUFyZ3MsIHRoZSBmb2xsb3dpbmcgc3RlcHMgYXJlIHRha2VuOlxuICAgICAgICAgICAgICAgIC8vIDEuIExldCB0YXJnZXQgYmUgdGhlIHZhbHVlIG9mIEYncyBbW1RhcmdldEZ1bmN0aW9uXV1cbiAgICAgICAgICAgICAgICAvLyAgIGludGVybmFsIHByb3BlcnR5LlxuICAgICAgICAgICAgICAgIC8vIDIuIElmIHRhcmdldCBoYXMgbm8gW1tDb25zdHJ1Y3RdXSBpbnRlcm5hbCBtZXRob2QsIGFcbiAgICAgICAgICAgICAgICAvLyAgIFR5cGVFcnJvciBleGNlcHRpb24gaXMgdGhyb3duLlxuICAgICAgICAgICAgICAgIC8vIDMuIExldCBib3VuZEFyZ3MgYmUgdGhlIHZhbHVlIG9mIEYncyBbW0JvdW5kQXJnc11dIGludGVybmFsXG4gICAgICAgICAgICAgICAgLy8gICBwcm9wZXJ0eS5cbiAgICAgICAgICAgICAgICAvLyA0LiBMZXQgYXJncyBiZSBhIG5ldyBsaXN0IGNvbnRhaW5pbmcgdGhlIHNhbWUgdmFsdWVzIGFzIHRoZVxuICAgICAgICAgICAgICAgIC8vICAgbGlzdCBib3VuZEFyZ3MgaW4gdGhlIHNhbWUgb3JkZXIgZm9sbG93ZWQgYnkgdGhlIHNhbWVcbiAgICAgICAgICAgICAgICAvLyAgIHZhbHVlcyBhcyB0aGUgbGlzdCBFeHRyYUFyZ3MgaW4gdGhlIHNhbWUgb3JkZXIuXG4gICAgICAgICAgICAgICAgLy8gNS4gUmV0dXJuIHRoZSByZXN1bHQgb2YgY2FsbGluZyB0aGUgW1tDb25zdHJ1Y3RdXSBpbnRlcm5hbFxuICAgICAgICAgICAgICAgIC8vICAgbWV0aG9kIG9mIHRhcmdldCBwcm92aWRpbmcgYXJncyBhcyB0aGUgYXJndW1lbnRzLlxuXG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHRhcmdldC5hcHBseShcbiAgICAgICAgICAgICAgICAgICAgdGhpcyxcbiAgICAgICAgICAgICAgICAgICAgYXJncy5jb25jYXQoX0FycmF5X3NsaWNlXy5jYWxsKGFyZ3VtZW50cykpXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBpZiAoT2JqZWN0KHJlc3VsdCkgPT09IHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcblxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyAxNS4zLjQuNS4xIFtbQ2FsbF1dXG4gICAgICAgICAgICAgICAgLy8gV2hlbiB0aGUgW1tDYWxsXV0gaW50ZXJuYWwgbWV0aG9kIG9mIGEgZnVuY3Rpb24gb2JqZWN0LCBGLFxuICAgICAgICAgICAgICAgIC8vIHdoaWNoIHdhcyBjcmVhdGVkIHVzaW5nIHRoZSBiaW5kIGZ1bmN0aW9uIGlzIGNhbGxlZCB3aXRoIGFcbiAgICAgICAgICAgICAgICAvLyB0aGlzIHZhbHVlIGFuZCBhIGxpc3Qgb2YgYXJndW1lbnRzIEV4dHJhQXJncywgdGhlIGZvbGxvd2luZ1xuICAgICAgICAgICAgICAgIC8vIHN0ZXBzIGFyZSB0YWtlbjpcbiAgICAgICAgICAgICAgICAvLyAxLiBMZXQgYm91bmRBcmdzIGJlIHRoZSB2YWx1ZSBvZiBGJ3MgW1tCb3VuZEFyZ3NdXSBpbnRlcm5hbFxuICAgICAgICAgICAgICAgIC8vICAgcHJvcGVydHkuXG4gICAgICAgICAgICAgICAgLy8gMi4gTGV0IGJvdW5kVGhpcyBiZSB0aGUgdmFsdWUgb2YgRidzIFtbQm91bmRUaGlzXV0gaW50ZXJuYWxcbiAgICAgICAgICAgICAgICAvLyAgIHByb3BlcnR5LlxuICAgICAgICAgICAgICAgIC8vIDMuIExldCB0YXJnZXQgYmUgdGhlIHZhbHVlIG9mIEYncyBbW1RhcmdldEZ1bmN0aW9uXV0gaW50ZXJuYWxcbiAgICAgICAgICAgICAgICAvLyAgIHByb3BlcnR5LlxuICAgICAgICAgICAgICAgIC8vIDQuIExldCBhcmdzIGJlIGEgbmV3IGxpc3QgY29udGFpbmluZyB0aGUgc2FtZSB2YWx1ZXMgYXMgdGhlXG4gICAgICAgICAgICAgICAgLy8gICBsaXN0IGJvdW5kQXJncyBpbiB0aGUgc2FtZSBvcmRlciBmb2xsb3dlZCBieSB0aGUgc2FtZVxuICAgICAgICAgICAgICAgIC8vICAgdmFsdWVzIGFzIHRoZSBsaXN0IEV4dHJhQXJncyBpbiB0aGUgc2FtZSBvcmRlci5cbiAgICAgICAgICAgICAgICAvLyA1LiBSZXR1cm4gdGhlIHJlc3VsdCBvZiBjYWxsaW5nIHRoZSBbW0NhbGxdXSBpbnRlcm5hbCBtZXRob2RcbiAgICAgICAgICAgICAgICAvLyAgIG9mIHRhcmdldCBwcm92aWRpbmcgYm91bmRUaGlzIGFzIHRoZSB0aGlzIHZhbHVlIGFuZFxuICAgICAgICAgICAgICAgIC8vICAgcHJvdmlkaW5nIGFyZ3MgYXMgdGhlIGFyZ3VtZW50cy5cblxuICAgICAgICAgICAgICAgIC8vIGVxdWl2OiB0YXJnZXQuY2FsbCh0aGlzLCAuLi5ib3VuZEFyZ3MsIC4uLmFyZ3MpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldC5hcHBseShcbiAgICAgICAgICAgICAgICAgICAgdGhhdCxcbiAgICAgICAgICAgICAgICAgICAgYXJncy5jb25jYXQoX0FycmF5X3NsaWNlXy5jYWxsKGFyZ3VtZW50cykpXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgfVxuXG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gMTUuIElmIHRoZSBbW0NsYXNzXV0gaW50ZXJuYWwgcHJvcGVydHkgb2YgVGFyZ2V0IGlzIFwiRnVuY3Rpb25cIiwgdGhlblxuICAgICAgICAvLyAgICAgYS4gTGV0IEwgYmUgdGhlIGxlbmd0aCBwcm9wZXJ0eSBvZiBUYXJnZXQgbWludXMgdGhlIGxlbmd0aCBvZiBBLlxuICAgICAgICAvLyAgICAgYi4gU2V0IHRoZSBsZW5ndGggb3duIHByb3BlcnR5IG9mIEYgdG8gZWl0aGVyIDAgb3IgTCwgd2hpY2hldmVyIGlzXG4gICAgICAgIC8vICAgICAgIGxhcmdlci5cbiAgICAgICAgLy8gMTYuIEVsc2Ugc2V0IHRoZSBsZW5ndGggb3duIHByb3BlcnR5IG9mIEYgdG8gMC5cblxuICAgICAgICB2YXIgYm91bmRMZW5ndGggPSBNYXRoLm1heCgwLCB0YXJnZXQubGVuZ3RoIC0gYXJncy5sZW5ndGgpO1xuXG4gICAgICAgIC8vIDE3LiBTZXQgdGhlIGF0dHJpYnV0ZXMgb2YgdGhlIGxlbmd0aCBvd24gcHJvcGVydHkgb2YgRiB0byB0aGUgdmFsdWVzXG4gICAgICAgIC8vICAgc3BlY2lmaWVkIGluIDE1LjMuNS4xLlxuICAgICAgICB2YXIgYm91bmRBcmdzID0gW107XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYm91bmRMZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYm91bmRBcmdzLnB1c2goXCIkXCIgKyBpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFhYWCBCdWlsZCBhIGR5bmFtaWMgZnVuY3Rpb24gd2l0aCBkZXNpcmVkIGFtb3VudCBvZiBhcmd1bWVudHMgaXMgdGhlIG9ubHkgXG4gICAgICAgIC8vIHdheSB0byBzZXQgdGhlIGxlbmd0aCBwcm9wZXJ0eSBvZiBhIGZ1bmN0aW9uLiBcbiAgICAgICAgLy8gSW4gZW52aXJvbm1lbnRzIHdoZXJlIENvbnRlbnQgU2VjdXJpdHkgUG9saWNpZXMgZW5hYmxlZCAoQ2hyb21lIGV4dGVuc2lvbnMsIFxuICAgICAgICAvLyBmb3IgZXguKSBhbGwgdXNlIG9mIGV2YWwgb3IgRnVuY3Rpb24gY29zdHJ1Y3RvciB0aHJvd3MgYW4gZXhjZXB0aW9uLiBcbiAgICAgICAgLy8gSG93ZXZlciBpbiBhbGwgb2YgdGhlc2UgZW52aXJvbm1lbnRzIEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kIGV4aXN0cyBcbiAgICAgICAgLy8gYW5kIHNvIHRoaXMgY29kZSB3aWxsIG5ldmVyIGJlIGV4ZWN1dGVkLlxuICAgICAgICB2YXIgYm91bmQgPSBGdW5jdGlvbihcImJpbmRlclwiLCBcInJldHVybiBmdW5jdGlvbihcIiArIGJvdW5kQXJncy5qb2luKFwiLFwiKSArIFwiKXtyZXR1cm4gYmluZGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1cIikoYmluZGVyKTtcblxuICAgICAgICBpZiAodGFyZ2V0LnByb3RvdHlwZSkge1xuICAgICAgICAgICAgRW1wdHkucHJvdG90eXBlID0gdGFyZ2V0LnByb3RvdHlwZTtcbiAgICAgICAgICAgIGJvdW5kLnByb3RvdHlwZSA9IG5ldyBFbXB0eSgpO1xuICAgICAgICAgICAgLy8gQ2xlYW4gdXAgZGFuZ2xpbmcgcmVmZXJlbmNlcy5cbiAgICAgICAgICAgIEVtcHR5LnByb3RvdHlwZSA9IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBUT0RPXG4gICAgICAgIC8vIDE4LiBTZXQgdGhlIFtbRXh0ZW5zaWJsZV1dIGludGVybmFsIHByb3BlcnR5IG9mIEYgdG8gdHJ1ZS5cblxuICAgICAgICAvLyBUT0RPXG4gICAgICAgIC8vIDE5LiBMZXQgdGhyb3dlciBiZSB0aGUgW1tUaHJvd1R5cGVFcnJvcl1dIGZ1bmN0aW9uIE9iamVjdCAoMTMuMi4zKS5cbiAgICAgICAgLy8gMjAuIENhbGwgdGhlIFtbRGVmaW5lT3duUHJvcGVydHldXSBpbnRlcm5hbCBtZXRob2Qgb2YgRiB3aXRoXG4gICAgICAgIC8vICAgYXJndW1lbnRzIFwiY2FsbGVyXCIsIFByb3BlcnR5RGVzY3JpcHRvciB7W1tHZXRdXTogdGhyb3dlciwgW1tTZXRdXTpcbiAgICAgICAgLy8gICB0aHJvd2VyLCBbW0VudW1lcmFibGVdXTogZmFsc2UsIFtbQ29uZmlndXJhYmxlXV06IGZhbHNlfSwgYW5kXG4gICAgICAgIC8vICAgZmFsc2UuXG4gICAgICAgIC8vIDIxLiBDYWxsIHRoZSBbW0RlZmluZU93blByb3BlcnR5XV0gaW50ZXJuYWwgbWV0aG9kIG9mIEYgd2l0aFxuICAgICAgICAvLyAgIGFyZ3VtZW50cyBcImFyZ3VtZW50c1wiLCBQcm9wZXJ0eURlc2NyaXB0b3Ige1tbR2V0XV06IHRocm93ZXIsXG4gICAgICAgIC8vICAgW1tTZXRdXTogdGhyb3dlciwgW1tFbnVtZXJhYmxlXV06IGZhbHNlLCBbW0NvbmZpZ3VyYWJsZV1dOiBmYWxzZX0sXG4gICAgICAgIC8vICAgYW5kIGZhbHNlLlxuXG4gICAgICAgIC8vIFRPRE9cbiAgICAgICAgLy8gTk9URSBGdW5jdGlvbiBvYmplY3RzIGNyZWF0ZWQgdXNpbmcgRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQgZG8gbm90XG4gICAgICAgIC8vIGhhdmUgYSBwcm90b3R5cGUgcHJvcGVydHkgb3IgdGhlIFtbQ29kZV1dLCBbW0Zvcm1hbFBhcmFtZXRlcnNdXSwgYW5kXG4gICAgICAgIC8vIFtbU2NvcGVdXSBpbnRlcm5hbCBwcm9wZXJ0aWVzLlxuICAgICAgICAvLyBYWFggY2FuJ3QgZGVsZXRlIHByb3RvdHlwZSBpbiBwdXJlLWpzLlxuXG4gICAgICAgIC8vIDIyLiBSZXR1cm4gRi5cbiAgICAgICAgcmV0dXJuIGJvdW5kO1xuICAgIH07XG59XG5cbi8vIFNob3J0Y3V0IHRvIGFuIG9mdGVuIGFjY2Vzc2VkIHByb3BlcnRpZXMsIGluIG9yZGVyIHRvIGF2b2lkIG11bHRpcGxlXG4vLyBkZXJlZmVyZW5jZSB0aGF0IGNvc3RzIHVuaXZlcnNhbGx5LlxuLy8gX1BsZWFzZSBub3RlOiBTaG9ydGN1dHMgYXJlIGRlZmluZWQgYWZ0ZXIgYEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kYCBhcyB3ZVxuLy8gdXMgaXQgaW4gZGVmaW5pbmcgc2hvcnRjdXRzLlxudmFyIGNhbGwgPSBGdW5jdGlvbi5wcm90b3R5cGUuY2FsbDtcbnZhciBwcm90b3R5cGVPZkFycmF5ID0gQXJyYXkucHJvdG90eXBlO1xudmFyIHByb3RvdHlwZU9mT2JqZWN0ID0gT2JqZWN0LnByb3RvdHlwZTtcbnZhciBfQXJyYXlfc2xpY2VfID0gcHJvdG90eXBlT2ZBcnJheS5zbGljZTtcbi8vIEhhdmluZyBhIHRvU3RyaW5nIGxvY2FsIHZhcmlhYmxlIG5hbWUgYnJlYWtzIGluIE9wZXJhIHNvIHVzZSBfdG9TdHJpbmcuXG52YXIgX3RvU3RyaW5nID0gY2FsbC5iaW5kKHByb3RvdHlwZU9mT2JqZWN0LnRvU3RyaW5nKTtcbnZhciBvd25zID0gY2FsbC5iaW5kKHByb3RvdHlwZU9mT2JqZWN0Lmhhc093blByb3BlcnR5KTtcblxuLy8gSWYgSlMgZW5naW5lIHN1cHBvcnRzIGFjY2Vzc29ycyBjcmVhdGluZyBzaG9ydGN1dHMuXG52YXIgZGVmaW5lR2V0dGVyO1xudmFyIGRlZmluZVNldHRlcjtcbnZhciBsb29rdXBHZXR0ZXI7XG52YXIgbG9va3VwU2V0dGVyO1xudmFyIHN1cHBvcnRzQWNjZXNzb3JzO1xuaWYgKChzdXBwb3J0c0FjY2Vzc29ycyA9IG93bnMocHJvdG90eXBlT2ZPYmplY3QsIFwiX19kZWZpbmVHZXR0ZXJfX1wiKSkpIHtcbiAgICBkZWZpbmVHZXR0ZXIgPSBjYWxsLmJpbmQocHJvdG90eXBlT2ZPYmplY3QuX19kZWZpbmVHZXR0ZXJfXyk7XG4gICAgZGVmaW5lU2V0dGVyID0gY2FsbC5iaW5kKHByb3RvdHlwZU9mT2JqZWN0Ll9fZGVmaW5lU2V0dGVyX18pO1xuICAgIGxvb2t1cEdldHRlciA9IGNhbGwuYmluZChwcm90b3R5cGVPZk9iamVjdC5fX2xvb2t1cEdldHRlcl9fKTtcbiAgICBsb29rdXBTZXR0ZXIgPSBjYWxsLmJpbmQocHJvdG90eXBlT2ZPYmplY3QuX19sb29rdXBTZXR0ZXJfXyk7XG59XG5cbi8vXG4vLyBBcnJheVxuLy8gPT09PT1cbi8vXG5cbi8vIEVTNSAxNS40LjQuMTJcbi8vIGh0dHA6Ly9lczUuZ2l0aHViLmNvbS8jeDE1LjQuNC4xMlxuLy8gRGVmYXVsdCB2YWx1ZSBmb3Igc2Vjb25kIHBhcmFtXG4vLyBbYnVnZml4LCBpZWx0OSwgb2xkIGJyb3dzZXJzXVxuLy8gSUUgPCA5IGJ1ZzogWzEsMl0uc3BsaWNlKDApLmpvaW4oXCJcIikgPT0gXCJcIiBidXQgc2hvdWxkIGJlIFwiMTJcIlxuaWYgKFsxLDJdLnNwbGljZSgwKS5sZW5ndGggIT0gMikge1xuICAgIHZhciBhcnJheV9zcGxpY2UgPSBBcnJheS5wcm90b3R5cGUuc3BsaWNlO1xuICAgIHZhciBhcnJheV9wdXNoID0gQXJyYXkucHJvdG90eXBlLnB1c2g7XG4gICAgdmFyIGFycmF5X3Vuc2hpZnQgPSBBcnJheS5wcm90b3R5cGUudW5zaGlmdDtcblxuICAgIGlmIChmdW5jdGlvbigpIHsgLy8gdGVzdCBJRSA8IDkgdG8gc3BsaWNlIGJ1ZyAtIHNlZSBpc3N1ZSAjMTM4XG4gICAgICAgIGZ1bmN0aW9uIG1ha2VBcnJheShsKSB7XG4gICAgICAgICAgICB2YXIgYSA9IFtdO1xuICAgICAgICAgICAgd2hpbGUgKGwtLSkge1xuICAgICAgICAgICAgICAgIGEudW5zaGlmdChsKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGFcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBhcnJheSA9IFtdXG4gICAgICAgICAgICAsIGxlbmd0aEJlZm9yZVxuICAgICAgICA7XG5cbiAgICAgICAgYXJyYXkuc3BsaWNlLmJpbmQoYXJyYXksIDAsIDApLmFwcGx5KG51bGwsIG1ha2VBcnJheSgyMCkpO1xuICAgICAgICBhcnJheS5zcGxpY2UuYmluZChhcnJheSwgMCwgMCkuYXBwbHkobnVsbCwgbWFrZUFycmF5KDI2KSk7XG5cbiAgICAgICAgbGVuZ3RoQmVmb3JlID0gYXJyYXkubGVuZ3RoOyAvLzIwXG4gICAgICAgIGFycmF5LnNwbGljZSg1LCAwLCBcIlhYWFwiKTsgLy8gYWRkIG9uZSBlbGVtZW50XG5cbiAgICAgICAgaWYgKGxlbmd0aEJlZm9yZSArIDEgPT0gYXJyYXkubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTsvLyBoYXMgcmlnaHQgc3BsaWNlIGltcGxlbWVudGF0aW9uIHdpdGhvdXQgYnVnc1xuICAgICAgICB9XG4gICAgICAgIC8vIGVsc2Uge1xuICAgICAgICAvLyAgICBJRTggYnVnXG4gICAgICAgIC8vIH1cbiAgICB9KCkpIHsvL0lFIDYvN1xuICAgICAgICBBcnJheS5wcm90b3R5cGUuc3BsaWNlID0gZnVuY3Rpb24oc3RhcnQsIGRlbGV0ZUNvdW50KSB7XG4gICAgICAgICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBhcnJheV9zcGxpY2UuYXBwbHkodGhpcywgW1xuICAgICAgICAgICAgICAgICAgICBzdGFydCA9PT0gdm9pZCAwID8gMCA6IHN0YXJ0LFxuICAgICAgICAgICAgICAgICAgICBkZWxldGVDb3VudCA9PT0gdm9pZCAwID8gKHRoaXMubGVuZ3RoIC0gc3RhcnQpIDogZGVsZXRlQ291bnRcbiAgICAgICAgICAgICAgICBdLmNvbmNhdChfQXJyYXlfc2xpY2VfLmNhbGwoYXJndW1lbnRzLCAyKSkpXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIGVsc2Ugey8vSUU4XG4gICAgICAgIEFycmF5LnByb3RvdHlwZS5zcGxpY2UgPSBmdW5jdGlvbihzdGFydCwgZGVsZXRlQ291bnQpIHtcbiAgICAgICAgICAgIHZhciByZXN1bHRcbiAgICAgICAgICAgICAgICAsIGFyZ3MgPSBfQXJyYXlfc2xpY2VfLmNhbGwoYXJndW1lbnRzLCAyKVxuICAgICAgICAgICAgICAgICwgYWRkRWxlbWVudHNDb3VudCA9IGFyZ3MubGVuZ3RoXG4gICAgICAgICAgICA7XG5cbiAgICAgICAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHN0YXJ0ID09PSB2b2lkIDApIHsgLy8gZGVmYXVsdFxuICAgICAgICAgICAgICAgIHN0YXJ0ID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkZWxldGVDb3VudCA9PT0gdm9pZCAwKSB7IC8vIGRlZmF1bHRcbiAgICAgICAgICAgICAgICBkZWxldGVDb3VudCA9IHRoaXMubGVuZ3RoIC0gc3RhcnQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChhZGRFbGVtZW50c0NvdW50ID4gMCkge1xuICAgICAgICAgICAgICAgIGlmIChkZWxldGVDb3VudCA8PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGFydCA9PSB0aGlzLmxlbmd0aCkgeyAvLyB0aW55IG9wdGltaXNhdGlvbiAjMVxuICAgICAgICAgICAgICAgICAgICAgICAgYXJyYXlfcHVzaC5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGFydCA9PSAwKSB7IC8vIHRpbnkgb3B0aW1pc2F0aW9uICMyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcnJheV91bnNoaWZ0LmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gQXJyYXkucHJvdG90eXBlLnNwbGljZSBpbXBsZW1lbnRhdGlvblxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IF9BcnJheV9zbGljZV8uY2FsbCh0aGlzLCBzdGFydCwgc3RhcnQgKyBkZWxldGVDb3VudCk7Ly8gZGVsZXRlIHBhcnRcbiAgICAgICAgICAgICAgICBhcmdzLnB1c2guYXBwbHkoYXJncywgX0FycmF5X3NsaWNlXy5jYWxsKHRoaXMsIHN0YXJ0ICsgZGVsZXRlQ291bnQsIHRoaXMubGVuZ3RoKSk7Ly8gcmlnaHQgcGFydFxuICAgICAgICAgICAgICAgIGFyZ3MudW5zaGlmdC5hcHBseShhcmdzLCBfQXJyYXlfc2xpY2VfLmNhbGwodGhpcywgMCwgc3RhcnQpKTsvLyBsZWZ0IHBhcnRcblxuICAgICAgICAgICAgICAgIC8vIGRlbGV0ZSBhbGwgaXRlbXMgZnJvbSB0aGlzIGFycmF5IGFuZCByZXBsYWNlIGl0IHRvICdsZWZ0IHBhcnQnICsgX0FycmF5X3NsaWNlXy5jYWxsKGFyZ3VtZW50cywgMikgKyAncmlnaHQgcGFydCdcbiAgICAgICAgICAgICAgICBhcmdzLnVuc2hpZnQoMCwgdGhpcy5sZW5ndGgpO1xuXG4gICAgICAgICAgICAgICAgYXJyYXlfc3BsaWNlLmFwcGx5KHRoaXMsIGFyZ3MpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGFycmF5X3NwbGljZS5jYWxsKHRoaXMsIHN0YXJ0LCBkZWxldGVDb3VudCk7XG4gICAgICAgIH1cblxuICAgIH1cbn1cblxuLy8gRVM1IDE1LjQuNC4xMlxuLy8gaHR0cDovL2VzNS5naXRodWIuY29tLyN4MTUuNC40LjEzXG4vLyBSZXR1cm4gbGVuK2FyZ0NvdW50LlxuLy8gW2J1Z2ZpeCwgaWVsdDhdXG4vLyBJRSA8IDggYnVnOiBbXS51bnNoaWZ0KDApID09IHVuZGVmaW5lZCBidXQgc2hvdWxkIGJlIFwiMVwiXG5pZiAoW10udW5zaGlmdCgwKSAhPSAxKSB7XG4gICAgdmFyIGFycmF5X3Vuc2hpZnQgPSBBcnJheS5wcm90b3R5cGUudW5zaGlmdDtcbiAgICBBcnJheS5wcm90b3R5cGUudW5zaGlmdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBhcnJheV91bnNoaWZ0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIHJldHVybiB0aGlzLmxlbmd0aDtcbiAgICB9O1xufVxuXG4vLyBFUzUgMTUuNC4zLjJcbi8vIGh0dHA6Ly9lczUuZ2l0aHViLmNvbS8jeDE1LjQuMy4yXG4vLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9BcnJheS9pc0FycmF5XG5pZiAoIUFycmF5LmlzQXJyYXkpIHtcbiAgICBBcnJheS5pc0FycmF5ID0gZnVuY3Rpb24gaXNBcnJheShvYmopIHtcbiAgICAgICAgcmV0dXJuIF90b1N0cmluZyhvYmopID09IFwiW29iamVjdCBBcnJheV1cIjtcbiAgICB9O1xufVxuXG4vLyBUaGUgSXNDYWxsYWJsZSgpIGNoZWNrIGluIHRoZSBBcnJheSBmdW5jdGlvbnNcbi8vIGhhcyBiZWVuIHJlcGxhY2VkIHdpdGggYSBzdHJpY3QgY2hlY2sgb24gdGhlXG4vLyBpbnRlcm5hbCBjbGFzcyBvZiB0aGUgb2JqZWN0IHRvIHRyYXAgY2FzZXMgd2hlcmVcbi8vIHRoZSBwcm92aWRlZCBmdW5jdGlvbiB3YXMgYWN0dWFsbHkgYSByZWd1bGFyXG4vLyBleHByZXNzaW9uIGxpdGVyYWwsIHdoaWNoIGluIFY4IGFuZFxuLy8gSmF2YVNjcmlwdENvcmUgaXMgYSB0eXBlb2YgXCJmdW5jdGlvblwiLiAgT25seSBpblxuLy8gVjggYXJlIHJlZ3VsYXIgZXhwcmVzc2lvbiBsaXRlcmFscyBwZXJtaXR0ZWQgYXNcbi8vIHJlZHVjZSBwYXJhbWV0ZXJzLCBzbyBpdCBpcyBkZXNpcmFibGUgaW4gdGhlXG4vLyBnZW5lcmFsIGNhc2UgZm9yIHRoZSBzaGltIHRvIG1hdGNoIHRoZSBtb3JlXG4vLyBzdHJpY3QgYW5kIGNvbW1vbiBiZWhhdmlvciBvZiByZWplY3RpbmcgcmVndWxhclxuLy8gZXhwcmVzc2lvbnMuXG5cbi8vIEVTNSAxNS40LjQuMThcbi8vIGh0dHA6Ly9lczUuZ2l0aHViLmNvbS8jeDE1LjQuNC4xOFxuLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvYXJyYXkvZm9yRWFjaFxuXG4vLyBDaGVjayBmYWlsdXJlIG9mIGJ5LWluZGV4IGFjY2VzcyBvZiBzdHJpbmcgY2hhcmFjdGVycyAoSUUgPCA5KVxuLy8gYW5kIGZhaWx1cmUgb2YgYDAgaW4gYm94ZWRTdHJpbmdgIChSaGlubylcbnZhciBib3hlZFN0cmluZyA9IE9iamVjdChcImFcIiksXG4gICAgc3BsaXRTdHJpbmcgPSBib3hlZFN0cmluZ1swXSAhPSBcImFcIiB8fCAhKDAgaW4gYm94ZWRTdHJpbmcpO1xuLy8gQ2hlY2sgbm9kZSAwLjYuMjEgYnVnIHdoZXJlIHRoaXJkIHBhcmFtZXRlciBpcyBub3QgYm94ZWRcbnZhciBib3hlZEZvckVhY2ggPSB0cnVlO1xuaWYgKEFycmF5LnByb3RvdHlwZS5mb3JFYWNoKSB7XG4gICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChcImZvb1wiLCBmdW5jdGlvbihpdGVtLCBpLCBvYmopIHtcbiAgICAgICAgaWYgKHR5cGVvZiBvYmogIT09ICdvYmplY3QnKSBib3hlZEZvckVhY2ggPSBmYWxzZTtcbiAgICB9KTtcbn1cblxuaWYgKCFBcnJheS5wcm90b3R5cGUuZm9yRWFjaCB8fCAhYm94ZWRGb3JFYWNoKSB7XG4gICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2ggPSBmdW5jdGlvbiBmb3JFYWNoKGZ1biAvKiwgdGhpc3AqLykge1xuICAgICAgICB2YXIgb2JqZWN0ID0gdG9PYmplY3QodGhpcyksXG4gICAgICAgICAgICBzZWxmID0gc3BsaXRTdHJpbmcgJiYgX3RvU3RyaW5nKHRoaXMpID09IFwiW29iamVjdCBTdHJpbmddXCIgP1xuICAgICAgICAgICAgICAgIHRoaXMuc3BsaXQoXCJcIikgOlxuICAgICAgICAgICAgICAgIG9iamVjdCxcbiAgICAgICAgICAgIHRoaXNwID0gYXJndW1lbnRzWzFdLFxuICAgICAgICAgICAgaSA9IC0xLFxuICAgICAgICAgICAgbGVuZ3RoID0gc2VsZi5sZW5ndGggPj4+IDA7XG5cbiAgICAgICAgLy8gSWYgbm8gY2FsbGJhY2sgZnVuY3Rpb24gb3IgaWYgY2FsbGJhY2sgaXMgbm90IGEgY2FsbGFibGUgZnVuY3Rpb25cbiAgICAgICAgaWYgKF90b1N0cmluZyhmdW4pICE9IFwiW29iamVjdCBGdW5jdGlvbl1cIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigpOyAvLyBUT0RPIG1lc3NhZ2VcbiAgICAgICAgfVxuXG4gICAgICAgIHdoaWxlICgrK2kgPCBsZW5ndGgpIHtcbiAgICAgICAgICAgIGlmIChpIGluIHNlbGYpIHtcbiAgICAgICAgICAgICAgICAvLyBJbnZva2UgdGhlIGNhbGxiYWNrIGZ1bmN0aW9uIHdpdGggY2FsbCwgcGFzc2luZyBhcmd1bWVudHM6XG4gICAgICAgICAgICAgICAgLy8gY29udGV4dCwgcHJvcGVydHkgdmFsdWUsIHByb3BlcnR5IGtleSwgdGhpc0FyZyBvYmplY3RcbiAgICAgICAgICAgICAgICAvLyBjb250ZXh0XG4gICAgICAgICAgICAgICAgZnVuLmNhbGwodGhpc3AsIHNlbGZbaV0sIGksIG9iamVjdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xufVxuXG4vLyBFUzUgMTUuNC40LjE5XG4vLyBodHRwOi8vZXM1LmdpdGh1Yi5jb20vI3gxNS40LjQuMTlcbi8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuL0NvcmVfSmF2YVNjcmlwdF8xLjVfUmVmZXJlbmNlL09iamVjdHMvQXJyYXkvbWFwXG5pZiAoIUFycmF5LnByb3RvdHlwZS5tYXApIHtcbiAgICBBcnJheS5wcm90b3R5cGUubWFwID0gZnVuY3Rpb24gbWFwKGZ1biAvKiwgdGhpc3AqLykge1xuICAgICAgICB2YXIgb2JqZWN0ID0gdG9PYmplY3QodGhpcyksXG4gICAgICAgICAgICBzZWxmID0gc3BsaXRTdHJpbmcgJiYgX3RvU3RyaW5nKHRoaXMpID09IFwiW29iamVjdCBTdHJpbmddXCIgP1xuICAgICAgICAgICAgICAgIHRoaXMuc3BsaXQoXCJcIikgOlxuICAgICAgICAgICAgICAgIG9iamVjdCxcbiAgICAgICAgICAgIGxlbmd0aCA9IHNlbGYubGVuZ3RoID4+PiAwLFxuICAgICAgICAgICAgcmVzdWx0ID0gQXJyYXkobGVuZ3RoKSxcbiAgICAgICAgICAgIHRoaXNwID0gYXJndW1lbnRzWzFdO1xuXG4gICAgICAgIC8vIElmIG5vIGNhbGxiYWNrIGZ1bmN0aW9uIG9yIGlmIGNhbGxiYWNrIGlzIG5vdCBhIGNhbGxhYmxlIGZ1bmN0aW9uXG4gICAgICAgIGlmIChfdG9TdHJpbmcoZnVuKSAhPSBcIltvYmplY3QgRnVuY3Rpb25dXCIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoZnVuICsgXCIgaXMgbm90IGEgZnVuY3Rpb25cIik7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoaSBpbiBzZWxmKVxuICAgICAgICAgICAgICAgIHJlc3VsdFtpXSA9IGZ1bi5jYWxsKHRoaXNwLCBzZWxmW2ldLCBpLCBvYmplY3QpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbn1cblxuLy8gRVM1IDE1LjQuNC4yMFxuLy8gaHR0cDovL2VzNS5naXRodWIuY29tLyN4MTUuNC40LjIwXG4vLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi9Db3JlX0phdmFTY3JpcHRfMS41X1JlZmVyZW5jZS9PYmplY3RzL0FycmF5L2ZpbHRlclxuaWYgKCFBcnJheS5wcm90b3R5cGUuZmlsdGVyKSB7XG4gICAgQXJyYXkucHJvdG90eXBlLmZpbHRlciA9IGZ1bmN0aW9uIGZpbHRlcihmdW4gLyosIHRoaXNwICovKSB7XG4gICAgICAgIHZhciBvYmplY3QgPSB0b09iamVjdCh0aGlzKSxcbiAgICAgICAgICAgIHNlbGYgPSBzcGxpdFN0cmluZyAmJiBfdG9TdHJpbmcodGhpcykgPT0gXCJbb2JqZWN0IFN0cmluZ11cIiA/XG4gICAgICAgICAgICAgICAgdGhpcy5zcGxpdChcIlwiKSA6XG4gICAgICAgICAgICAgICAgICAgIG9iamVjdCxcbiAgICAgICAgICAgIGxlbmd0aCA9IHNlbGYubGVuZ3RoID4+PiAwLFxuICAgICAgICAgICAgcmVzdWx0ID0gW10sXG4gICAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICAgIHRoaXNwID0gYXJndW1lbnRzWzFdO1xuXG4gICAgICAgIC8vIElmIG5vIGNhbGxiYWNrIGZ1bmN0aW9uIG9yIGlmIGNhbGxiYWNrIGlzIG5vdCBhIGNhbGxhYmxlIGZ1bmN0aW9uXG4gICAgICAgIGlmIChfdG9TdHJpbmcoZnVuKSAhPSBcIltvYmplY3QgRnVuY3Rpb25dXCIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoZnVuICsgXCIgaXMgbm90IGEgZnVuY3Rpb25cIik7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoaSBpbiBzZWxmKSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSBzZWxmW2ldO1xuICAgICAgICAgICAgICAgIGlmIChmdW4uY2FsbCh0aGlzcCwgdmFsdWUsIGksIG9iamVjdCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2godmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG59XG5cbi8vIEVTNSAxNS40LjQuMTZcbi8vIGh0dHA6Ly9lczUuZ2l0aHViLmNvbS8jeDE1LjQuNC4xNlxuLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvQXJyYXkvZXZlcnlcbmlmICghQXJyYXkucHJvdG90eXBlLmV2ZXJ5KSB7XG4gICAgQXJyYXkucHJvdG90eXBlLmV2ZXJ5ID0gZnVuY3Rpb24gZXZlcnkoZnVuIC8qLCB0aGlzcCAqLykge1xuICAgICAgICB2YXIgb2JqZWN0ID0gdG9PYmplY3QodGhpcyksXG4gICAgICAgICAgICBzZWxmID0gc3BsaXRTdHJpbmcgJiYgX3RvU3RyaW5nKHRoaXMpID09IFwiW29iamVjdCBTdHJpbmddXCIgP1xuICAgICAgICAgICAgICAgIHRoaXMuc3BsaXQoXCJcIikgOlxuICAgICAgICAgICAgICAgIG9iamVjdCxcbiAgICAgICAgICAgIGxlbmd0aCA9IHNlbGYubGVuZ3RoID4+PiAwLFxuICAgICAgICAgICAgdGhpc3AgPSBhcmd1bWVudHNbMV07XG5cbiAgICAgICAgLy8gSWYgbm8gY2FsbGJhY2sgZnVuY3Rpb24gb3IgaWYgY2FsbGJhY2sgaXMgbm90IGEgY2FsbGFibGUgZnVuY3Rpb25cbiAgICAgICAgaWYgKF90b1N0cmluZyhmdW4pICE9IFwiW29iamVjdCBGdW5jdGlvbl1cIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihmdW4gKyBcIiBpcyBub3QgYSBmdW5jdGlvblwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChpIGluIHNlbGYgJiYgIWZ1bi5jYWxsKHRoaXNwLCBzZWxmW2ldLCBpLCBvYmplY3QpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG59XG5cbi8vIEVTNSAxNS40LjQuMTdcbi8vIGh0dHA6Ly9lczUuZ2l0aHViLmNvbS8jeDE1LjQuNC4xN1xuLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvQXJyYXkvc29tZVxuaWYgKCFBcnJheS5wcm90b3R5cGUuc29tZSkge1xuICAgIEFycmF5LnByb3RvdHlwZS5zb21lID0gZnVuY3Rpb24gc29tZShmdW4gLyosIHRoaXNwICovKSB7XG4gICAgICAgIHZhciBvYmplY3QgPSB0b09iamVjdCh0aGlzKSxcbiAgICAgICAgICAgIHNlbGYgPSBzcGxpdFN0cmluZyAmJiBfdG9TdHJpbmcodGhpcykgPT0gXCJbb2JqZWN0IFN0cmluZ11cIiA/XG4gICAgICAgICAgICAgICAgdGhpcy5zcGxpdChcIlwiKSA6XG4gICAgICAgICAgICAgICAgb2JqZWN0LFxuICAgICAgICAgICAgbGVuZ3RoID0gc2VsZi5sZW5ndGggPj4+IDAsXG4gICAgICAgICAgICB0aGlzcCA9IGFyZ3VtZW50c1sxXTtcblxuICAgICAgICAvLyBJZiBubyBjYWxsYmFjayBmdW5jdGlvbiBvciBpZiBjYWxsYmFjayBpcyBub3QgYSBjYWxsYWJsZSBmdW5jdGlvblxuICAgICAgICBpZiAoX3RvU3RyaW5nKGZ1bikgIT0gXCJbb2JqZWN0IEZ1bmN0aW9uXVwiKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGZ1biArIFwiIGlzIG5vdCBhIGZ1bmN0aW9uXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKGkgaW4gc2VsZiAmJiBmdW4uY2FsbCh0aGlzcCwgc2VsZltpXSwgaSwgb2JqZWN0KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xufVxuXG4vLyBFUzUgMTUuNC40LjIxXG4vLyBodHRwOi8vZXM1LmdpdGh1Yi5jb20vI3gxNS40LjQuMjFcbi8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuL0NvcmVfSmF2YVNjcmlwdF8xLjVfUmVmZXJlbmNlL09iamVjdHMvQXJyYXkvcmVkdWNlXG5pZiAoIUFycmF5LnByb3RvdHlwZS5yZWR1Y2UpIHtcbiAgICBBcnJheS5wcm90b3R5cGUucmVkdWNlID0gZnVuY3Rpb24gcmVkdWNlKGZ1biAvKiwgaW5pdGlhbCovKSB7XG4gICAgICAgIHZhciBvYmplY3QgPSB0b09iamVjdCh0aGlzKSxcbiAgICAgICAgICAgIHNlbGYgPSBzcGxpdFN0cmluZyAmJiBfdG9TdHJpbmcodGhpcykgPT0gXCJbb2JqZWN0IFN0cmluZ11cIiA/XG4gICAgICAgICAgICAgICAgdGhpcy5zcGxpdChcIlwiKSA6XG4gICAgICAgICAgICAgICAgb2JqZWN0LFxuICAgICAgICAgICAgbGVuZ3RoID0gc2VsZi5sZW5ndGggPj4+IDA7XG5cbiAgICAgICAgLy8gSWYgbm8gY2FsbGJhY2sgZnVuY3Rpb24gb3IgaWYgY2FsbGJhY2sgaXMgbm90IGEgY2FsbGFibGUgZnVuY3Rpb25cbiAgICAgICAgaWYgKF90b1N0cmluZyhmdW4pICE9IFwiW29iamVjdCBGdW5jdGlvbl1cIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihmdW4gKyBcIiBpcyBub3QgYSBmdW5jdGlvblwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIG5vIHZhbHVlIHRvIHJldHVybiBpZiBubyBpbml0aWFsIHZhbHVlIGFuZCBhbiBlbXB0eSBhcnJheVxuICAgICAgICBpZiAoIWxlbmd0aCAmJiBhcmd1bWVudHMubGVuZ3RoID09IDEpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJyZWR1Y2Ugb2YgZW1wdHkgYXJyYXkgd2l0aCBubyBpbml0aWFsIHZhbHVlXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICB2YXIgcmVzdWx0O1xuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+PSAyKSB7XG4gICAgICAgICAgICByZXN1bHQgPSBhcmd1bWVudHNbMV07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgICAgaWYgKGkgaW4gc2VsZikge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBzZWxmW2krK107XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIGlmIGFycmF5IGNvbnRhaW5zIG5vIHZhbHVlcywgbm8gaW5pdGlhbCB2YWx1ZSB0byByZXR1cm5cbiAgICAgICAgICAgICAgICBpZiAoKytpID49IGxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwicmVkdWNlIG9mIGVtcHR5IGFycmF5IHdpdGggbm8gaW5pdGlhbCB2YWx1ZVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IHdoaWxlICh0cnVlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChpIGluIHNlbGYpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBmdW4uY2FsbCh2b2lkIDAsIHJlc3VsdCwgc2VsZltpXSwgaSwgb2JqZWN0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbn1cblxuLy8gRVM1IDE1LjQuNC4yMlxuLy8gaHR0cDovL2VzNS5naXRodWIuY29tLyN4MTUuNC40LjIyXG4vLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi9Db3JlX0phdmFTY3JpcHRfMS41X1JlZmVyZW5jZS9PYmplY3RzL0FycmF5L3JlZHVjZVJpZ2h0XG5pZiAoIUFycmF5LnByb3RvdHlwZS5yZWR1Y2VSaWdodCkge1xuICAgIEFycmF5LnByb3RvdHlwZS5yZWR1Y2VSaWdodCA9IGZ1bmN0aW9uIHJlZHVjZVJpZ2h0KGZ1biAvKiwgaW5pdGlhbCovKSB7XG4gICAgICAgIHZhciBvYmplY3QgPSB0b09iamVjdCh0aGlzKSxcbiAgICAgICAgICAgIHNlbGYgPSBzcGxpdFN0cmluZyAmJiBfdG9TdHJpbmcodGhpcykgPT0gXCJbb2JqZWN0IFN0cmluZ11cIiA/XG4gICAgICAgICAgICAgICAgdGhpcy5zcGxpdChcIlwiKSA6XG4gICAgICAgICAgICAgICAgb2JqZWN0LFxuICAgICAgICAgICAgbGVuZ3RoID0gc2VsZi5sZW5ndGggPj4+IDA7XG5cbiAgICAgICAgLy8gSWYgbm8gY2FsbGJhY2sgZnVuY3Rpb24gb3IgaWYgY2FsbGJhY2sgaXMgbm90IGEgY2FsbGFibGUgZnVuY3Rpb25cbiAgICAgICAgaWYgKF90b1N0cmluZyhmdW4pICE9IFwiW29iamVjdCBGdW5jdGlvbl1cIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihmdW4gKyBcIiBpcyBub3QgYSBmdW5jdGlvblwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIG5vIHZhbHVlIHRvIHJldHVybiBpZiBubyBpbml0aWFsIHZhbHVlLCBlbXB0eSBhcnJheVxuICAgICAgICBpZiAoIWxlbmd0aCAmJiBhcmd1bWVudHMubGVuZ3RoID09IDEpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJyZWR1Y2VSaWdodCBvZiBlbXB0eSBhcnJheSB3aXRoIG5vIGluaXRpYWwgdmFsdWVcIik7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgcmVzdWx0LCBpID0gbGVuZ3RoIC0gMTtcbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPj0gMikge1xuICAgICAgICAgICAgcmVzdWx0ID0gYXJndW1lbnRzWzFdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICAgIGlmIChpIGluIHNlbGYpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gc2VsZltpLS1dO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBpZiBhcnJheSBjb250YWlucyBubyB2YWx1ZXMsIG5vIGluaXRpYWwgdmFsdWUgdG8gcmV0dXJuXG4gICAgICAgICAgICAgICAgaWYgKC0taSA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcInJlZHVjZVJpZ2h0IG9mIGVtcHR5IGFycmF5IHdpdGggbm8gaW5pdGlhbCB2YWx1ZVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IHdoaWxlICh0cnVlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpIDwgMCkge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuXG4gICAgICAgIGRvIHtcbiAgICAgICAgICAgIGlmIChpIGluIHRoaXMpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBmdW4uY2FsbCh2b2lkIDAsIHJlc3VsdCwgc2VsZltpXSwgaSwgb2JqZWN0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSB3aGlsZSAoaS0tKTtcblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG59XG5cbi8vIEVTNSAxNS40LjQuMTRcbi8vIGh0dHA6Ly9lczUuZ2l0aHViLmNvbS8jeDE1LjQuNC4xNFxuLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvQXJyYXkvaW5kZXhPZlxuaWYgKCFBcnJheS5wcm90b3R5cGUuaW5kZXhPZiB8fCAoWzAsIDFdLmluZGV4T2YoMSwgMikgIT0gLTEpKSB7XG4gICAgQXJyYXkucHJvdG90eXBlLmluZGV4T2YgPSBmdW5jdGlvbiBpbmRleE9mKHNvdWdodCAvKiwgZnJvbUluZGV4ICovICkge1xuICAgICAgICB2YXIgc2VsZiA9IHNwbGl0U3RyaW5nICYmIF90b1N0cmluZyh0aGlzKSA9PSBcIltvYmplY3QgU3RyaW5nXVwiID9cbiAgICAgICAgICAgICAgICB0aGlzLnNwbGl0KFwiXCIpIDpcbiAgICAgICAgICAgICAgICB0b09iamVjdCh0aGlzKSxcbiAgICAgICAgICAgIGxlbmd0aCA9IHNlbGYubGVuZ3RoID4+PiAwO1xuXG4gICAgICAgIGlmICghbGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgaSA9IHRvSW50ZWdlcihhcmd1bWVudHNbMV0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gaGFuZGxlIG5lZ2F0aXZlIGluZGljZXNcbiAgICAgICAgaSA9IGkgPj0gMCA/IGkgOiBNYXRoLm1heCgwLCBsZW5ndGggKyBpKTtcbiAgICAgICAgZm9yICg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKGkgaW4gc2VsZiAmJiBzZWxmW2ldID09PSBzb3VnaHQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gLTE7XG4gICAgfTtcbn1cblxuLy8gRVM1IDE1LjQuNC4xNVxuLy8gaHR0cDovL2VzNS5naXRodWIuY29tLyN4MTUuNC40LjE1XG4vLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9BcnJheS9sYXN0SW5kZXhPZlxuaWYgKCFBcnJheS5wcm90b3R5cGUubGFzdEluZGV4T2YgfHwgKFswLCAxXS5sYXN0SW5kZXhPZigwLCAtMykgIT0gLTEpKSB7XG4gICAgQXJyYXkucHJvdG90eXBlLmxhc3RJbmRleE9mID0gZnVuY3Rpb24gbGFzdEluZGV4T2Yoc291Z2h0IC8qLCBmcm9tSW5kZXggKi8pIHtcbiAgICAgICAgdmFyIHNlbGYgPSBzcGxpdFN0cmluZyAmJiBfdG9TdHJpbmcodGhpcykgPT0gXCJbb2JqZWN0IFN0cmluZ11cIiA/XG4gICAgICAgICAgICAgICAgdGhpcy5zcGxpdChcIlwiKSA6XG4gICAgICAgICAgICAgICAgdG9PYmplY3QodGhpcyksXG4gICAgICAgICAgICBsZW5ndGggPSBzZWxmLmxlbmd0aCA+Pj4gMDtcblxuICAgICAgICBpZiAoIWxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICB9XG4gICAgICAgIHZhciBpID0gbGVuZ3RoIC0gMTtcbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICBpID0gTWF0aC5taW4oaSwgdG9JbnRlZ2VyKGFyZ3VtZW50c1sxXSkpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGhhbmRsZSBuZWdhdGl2ZSBpbmRpY2VzXG4gICAgICAgIGkgPSBpID49IDAgPyBpIDogbGVuZ3RoIC0gTWF0aC5hYnMoaSk7XG4gICAgICAgIGZvciAoOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgaWYgKGkgaW4gc2VsZiAmJiBzb3VnaHQgPT09IHNlbGZbaV0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gLTE7XG4gICAgfTtcbn1cblxuLy9cbi8vIE9iamVjdFxuLy8gPT09PT09XG4vL1xuXG4vLyBFUzUgMTUuMi4zLjE0XG4vLyBodHRwOi8vZXM1LmdpdGh1Yi5jb20vI3gxNS4yLjMuMTRcbmlmICghT2JqZWN0LmtleXMpIHtcbiAgICAvLyBodHRwOi8vd2hhdHRoZWhlYWRzYWlkLmNvbS8yMDEwLzEwL2Etc2FmZXItb2JqZWN0LWtleXMtY29tcGF0aWJpbGl0eS1pbXBsZW1lbnRhdGlvblxuICAgIHZhciBoYXNEb250RW51bUJ1ZyA9IHRydWUsXG4gICAgICAgIGRvbnRFbnVtcyA9IFtcbiAgICAgICAgICAgIFwidG9TdHJpbmdcIixcbiAgICAgICAgICAgIFwidG9Mb2NhbGVTdHJpbmdcIixcbiAgICAgICAgICAgIFwidmFsdWVPZlwiLFxuICAgICAgICAgICAgXCJoYXNPd25Qcm9wZXJ0eVwiLFxuICAgICAgICAgICAgXCJpc1Byb3RvdHlwZU9mXCIsXG4gICAgICAgICAgICBcInByb3BlcnR5SXNFbnVtZXJhYmxlXCIsXG4gICAgICAgICAgICBcImNvbnN0cnVjdG9yXCJcbiAgICAgICAgXSxcbiAgICAgICAgZG9udEVudW1zTGVuZ3RoID0gZG9udEVudW1zLmxlbmd0aDtcblxuICAgIGZvciAodmFyIGtleSBpbiB7XCJ0b1N0cmluZ1wiOiBudWxsfSkge1xuICAgICAgICBoYXNEb250RW51bUJ1ZyA9IGZhbHNlO1xuICAgIH1cblxuICAgIE9iamVjdC5rZXlzID0gZnVuY3Rpb24ga2V5cyhvYmplY3QpIHtcblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICAodHlwZW9mIG9iamVjdCAhPSBcIm9iamVjdFwiICYmIHR5cGVvZiBvYmplY3QgIT0gXCJmdW5jdGlvblwiKSB8fFxuICAgICAgICAgICAgb2JqZWN0ID09PSBudWxsXG4gICAgICAgICkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIk9iamVjdC5rZXlzIGNhbGxlZCBvbiBhIG5vbi1vYmplY3RcIik7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIga2V5cyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBuYW1lIGluIG9iamVjdCkge1xuICAgICAgICAgICAgaWYgKG93bnMob2JqZWN0LCBuYW1lKSkge1xuICAgICAgICAgICAgICAgIGtleXMucHVzaChuYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChoYXNEb250RW51bUJ1Zykge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZG9udEVudW1zTGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBkb250RW51bSA9IGRvbnRFbnVtc1tpXTtcbiAgICAgICAgICAgICAgICBpZiAob3ducyhvYmplY3QsIGRvbnRFbnVtKSkge1xuICAgICAgICAgICAgICAgICAgICBrZXlzLnB1c2goZG9udEVudW0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ga2V5cztcbiAgICB9O1xuXG59XG5cbi8vXG4vLyBEYXRlXG4vLyA9PT09XG4vL1xuXG4vLyBFUzUgMTUuOS41LjQzXG4vLyBodHRwOi8vZXM1LmdpdGh1Yi5jb20vI3gxNS45LjUuNDNcbi8vIFRoaXMgZnVuY3Rpb24gcmV0dXJucyBhIFN0cmluZyB2YWx1ZSByZXByZXNlbnQgdGhlIGluc3RhbmNlIGluIHRpbWVcbi8vIHJlcHJlc2VudGVkIGJ5IHRoaXMgRGF0ZSBvYmplY3QuIFRoZSBmb3JtYXQgb2YgdGhlIFN0cmluZyBpcyB0aGUgRGF0ZSBUaW1lXG4vLyBzdHJpbmcgZm9ybWF0IGRlZmluZWQgaW4gMTUuOS4xLjE1LiBBbGwgZmllbGRzIGFyZSBwcmVzZW50IGluIHRoZSBTdHJpbmcuXG4vLyBUaGUgdGltZSB6b25lIGlzIGFsd2F5cyBVVEMsIGRlbm90ZWQgYnkgdGhlIHN1ZmZpeCBaLiBJZiB0aGUgdGltZSB2YWx1ZSBvZlxuLy8gdGhpcyBvYmplY3QgaXMgbm90IGEgZmluaXRlIE51bWJlciBhIFJhbmdlRXJyb3IgZXhjZXB0aW9uIGlzIHRocm93bi5cbnZhciBuZWdhdGl2ZURhdGUgPSAtNjIxOTg3NTUyMDAwMDAsXG4gICAgbmVnYXRpdmVZZWFyU3RyaW5nID0gXCItMDAwMDAxXCI7XG5pZiAoXG4gICAgIURhdGUucHJvdG90eXBlLnRvSVNPU3RyaW5nIHx8XG4gICAgKG5ldyBEYXRlKG5lZ2F0aXZlRGF0ZSkudG9JU09TdHJpbmcoKS5pbmRleE9mKG5lZ2F0aXZlWWVhclN0cmluZykgPT09IC0xKVxuKSB7XG4gICAgRGF0ZS5wcm90b3R5cGUudG9JU09TdHJpbmcgPSBmdW5jdGlvbiB0b0lTT1N0cmluZygpIHtcbiAgICAgICAgdmFyIHJlc3VsdCwgbGVuZ3RoLCB2YWx1ZSwgeWVhciwgbW9udGg7XG4gICAgICAgIGlmICghaXNGaW5pdGUodGhpcykpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiRGF0ZS5wcm90b3R5cGUudG9JU09TdHJpbmcgY2FsbGVkIG9uIG5vbi1maW5pdGUgdmFsdWUuXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgeWVhciA9IHRoaXMuZ2V0VVRDRnVsbFllYXIoKTtcblxuICAgICAgICBtb250aCA9IHRoaXMuZ2V0VVRDTW9udGgoKTtcbiAgICAgICAgLy8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9lcy1zaGltcy9lczUtc2hpbS9pc3N1ZXMvMTExXG4gICAgICAgIHllYXIgKz0gTWF0aC5mbG9vcihtb250aCAvIDEyKTtcbiAgICAgICAgbW9udGggPSAobW9udGggJSAxMiArIDEyKSAlIDEyO1xuXG4gICAgICAgIC8vIHRoZSBkYXRlIHRpbWUgc3RyaW5nIGZvcm1hdCBpcyBzcGVjaWZpZWQgaW4gMTUuOS4xLjE1LlxuICAgICAgICByZXN1bHQgPSBbbW9udGggKyAxLCB0aGlzLmdldFVUQ0RhdGUoKSxcbiAgICAgICAgICAgIHRoaXMuZ2V0VVRDSG91cnMoKSwgdGhpcy5nZXRVVENNaW51dGVzKCksIHRoaXMuZ2V0VVRDU2Vjb25kcygpXTtcbiAgICAgICAgeWVhciA9IChcbiAgICAgICAgICAgICh5ZWFyIDwgMCA/IFwiLVwiIDogKHllYXIgPiA5OTk5ID8gXCIrXCIgOiBcIlwiKSkgK1xuICAgICAgICAgICAgKFwiMDAwMDBcIiArIE1hdGguYWJzKHllYXIpKVxuICAgICAgICAgICAgLnNsaWNlKDAgPD0geWVhciAmJiB5ZWFyIDw9IDk5OTkgPyAtNCA6IC02KVxuICAgICAgICApO1xuXG4gICAgICAgIGxlbmd0aCA9IHJlc3VsdC5sZW5ndGg7XG4gICAgICAgIHdoaWxlIChsZW5ndGgtLSkge1xuICAgICAgICAgICAgdmFsdWUgPSByZXN1bHRbbGVuZ3RoXTtcbiAgICAgICAgICAgIC8vIHBhZCBtb250aHMsIGRheXMsIGhvdXJzLCBtaW51dGVzLCBhbmQgc2Vjb25kcyB0byBoYXZlIHR3b1xuICAgICAgICAgICAgLy8gZGlnaXRzLlxuICAgICAgICAgICAgaWYgKHZhbHVlIDwgMTApIHtcbiAgICAgICAgICAgICAgICByZXN1bHRbbGVuZ3RoXSA9IFwiMFwiICsgdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gcGFkIG1pbGxpc2Vjb25kcyB0byBoYXZlIHRocmVlIGRpZ2l0cy5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIHllYXIgKyBcIi1cIiArIHJlc3VsdC5zbGljZSgwLCAyKS5qb2luKFwiLVwiKSArXG4gICAgICAgICAgICBcIlRcIiArIHJlc3VsdC5zbGljZSgyKS5qb2luKFwiOlwiKSArIFwiLlwiICtcbiAgICAgICAgICAgIChcIjAwMFwiICsgdGhpcy5nZXRVVENNaWxsaXNlY29uZHMoKSkuc2xpY2UoLTMpICsgXCJaXCJcbiAgICAgICAgKTtcbiAgICB9O1xufVxuXG5cbi8vIEVTNSAxNS45LjUuNDRcbi8vIGh0dHA6Ly9lczUuZ2l0aHViLmNvbS8jeDE1LjkuNS40NFxuLy8gVGhpcyBmdW5jdGlvbiBwcm92aWRlcyBhIFN0cmluZyByZXByZXNlbnRhdGlvbiBvZiBhIERhdGUgb2JqZWN0IGZvciB1c2UgYnlcbi8vIEpTT04uc3RyaW5naWZ5ICgxNS4xMi4zKS5cbnZhciBkYXRlVG9KU09OSXNTdXBwb3J0ZWQgPSBmYWxzZTtcbnRyeSB7XG4gICAgZGF0ZVRvSlNPTklzU3VwcG9ydGVkID0gKFxuICAgICAgICBEYXRlLnByb3RvdHlwZS50b0pTT04gJiZcbiAgICAgICAgbmV3IERhdGUoTmFOKS50b0pTT04oKSA9PT0gbnVsbCAmJlxuICAgICAgICBuZXcgRGF0ZShuZWdhdGl2ZURhdGUpLnRvSlNPTigpLmluZGV4T2YobmVnYXRpdmVZZWFyU3RyaW5nKSAhPT0gLTEgJiZcbiAgICAgICAgRGF0ZS5wcm90b3R5cGUudG9KU09OLmNhbGwoeyAvLyBnZW5lcmljXG4gICAgICAgICAgICB0b0lTT1N0cmluZzogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICk7XG59IGNhdGNoIChlKSB7XG59XG5pZiAoIWRhdGVUb0pTT05Jc1N1cHBvcnRlZCkge1xuICAgIERhdGUucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTihrZXkpIHtcbiAgICAgICAgLy8gV2hlbiB0aGUgdG9KU09OIG1ldGhvZCBpcyBjYWxsZWQgd2l0aCBhcmd1bWVudCBrZXksIHRoZSBmb2xsb3dpbmdcbiAgICAgICAgLy8gc3RlcHMgYXJlIHRha2VuOlxuXG4gICAgICAgIC8vIDEuICBMZXQgTyBiZSB0aGUgcmVzdWx0IG9mIGNhbGxpbmcgVG9PYmplY3QsIGdpdmluZyBpdCB0aGUgdGhpc1xuICAgICAgICAvLyB2YWx1ZSBhcyBpdHMgYXJndW1lbnQuXG4gICAgICAgIC8vIDIuIExldCB0diBiZSB0b1ByaW1pdGl2ZShPLCBoaW50IE51bWJlcikuXG4gICAgICAgIHZhciBvID0gT2JqZWN0KHRoaXMpLFxuICAgICAgICAgICAgdHYgPSB0b1ByaW1pdGl2ZShvKSxcbiAgICAgICAgICAgIHRvSVNPO1xuICAgICAgICAvLyAzLiBJZiB0diBpcyBhIE51bWJlciBhbmQgaXMgbm90IGZpbml0ZSwgcmV0dXJuIG51bGwuXG4gICAgICAgIGlmICh0eXBlb2YgdHYgPT09IFwibnVtYmVyXCIgJiYgIWlzRmluaXRlKHR2KSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgLy8gNC4gTGV0IHRvSVNPIGJlIHRoZSByZXN1bHQgb2YgY2FsbGluZyB0aGUgW1tHZXRdXSBpbnRlcm5hbCBtZXRob2Qgb2ZcbiAgICAgICAgLy8gTyB3aXRoIGFyZ3VtZW50IFwidG9JU09TdHJpbmdcIi5cbiAgICAgICAgdG9JU08gPSBvLnRvSVNPU3RyaW5nO1xuICAgICAgICAvLyA1LiBJZiBJc0NhbGxhYmxlKHRvSVNPKSBpcyBmYWxzZSwgdGhyb3cgYSBUeXBlRXJyb3IgZXhjZXB0aW9uLlxuICAgICAgICBpZiAodHlwZW9mIHRvSVNPICE9IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcInRvSVNPU3RyaW5nIHByb3BlcnR5IGlzIG5vdCBjYWxsYWJsZVwiKTtcbiAgICAgICAgfVxuICAgICAgICAvLyA2LiBSZXR1cm4gdGhlIHJlc3VsdCBvZiBjYWxsaW5nIHRoZSBbW0NhbGxdXSBpbnRlcm5hbCBtZXRob2Qgb2ZcbiAgICAgICAgLy8gIHRvSVNPIHdpdGggTyBhcyB0aGUgdGhpcyB2YWx1ZSBhbmQgYW4gZW1wdHkgYXJndW1lbnQgbGlzdC5cbiAgICAgICAgcmV0dXJuIHRvSVNPLmNhbGwobyk7XG5cbiAgICAgICAgLy8gTk9URSAxIFRoZSBhcmd1bWVudCBpcyBpZ25vcmVkLlxuXG4gICAgICAgIC8vIE5PVEUgMiBUaGUgdG9KU09OIGZ1bmN0aW9uIGlzIGludGVudGlvbmFsbHkgZ2VuZXJpYzsgaXQgZG9lcyBub3RcbiAgICAgICAgLy8gcmVxdWlyZSB0aGF0IGl0cyB0aGlzIHZhbHVlIGJlIGEgRGF0ZSBvYmplY3QuIFRoZXJlZm9yZSwgaXQgY2FuIGJlXG4gICAgICAgIC8vIHRyYW5zZmVycmVkIHRvIG90aGVyIGtpbmRzIG9mIG9iamVjdHMgZm9yIHVzZSBhcyBhIG1ldGhvZC4gSG93ZXZlcixcbiAgICAgICAgLy8gaXQgZG9lcyByZXF1aXJlIHRoYXQgYW55IHN1Y2ggb2JqZWN0IGhhdmUgYSB0b0lTT1N0cmluZyBtZXRob2QuIEFuXG4gICAgICAgIC8vIG9iamVjdCBpcyBmcmVlIHRvIHVzZSB0aGUgYXJndW1lbnQga2V5IHRvIGZpbHRlciBpdHNcbiAgICAgICAgLy8gc3RyaW5naWZpY2F0aW9uLlxuICAgIH07XG59XG5cbi8vIEVTNSAxNS45LjQuMlxuLy8gaHR0cDovL2VzNS5naXRodWIuY29tLyN4MTUuOS40LjJcbi8vIGJhc2VkIG9uIHdvcmsgc2hhcmVkIGJ5IERhbmllbCBGcmllc2VuIChkYW50bWFuKVxuLy8gaHR0cDovL2dpc3QuZ2l0aHViLmNvbS8zMDMyNDlcbmlmICghRGF0ZS5wYXJzZSB8fCBcIkRhdGUucGFyc2UgaXMgYnVnZ3lcIikge1xuICAgIC8vIFhYWCBnbG9iYWwgYXNzaWdubWVudCB3b24ndCB3b3JrIGluIGVtYmVkZGluZ3MgdGhhdCB1c2VcbiAgICAvLyBhbiBhbHRlcm5hdGUgb2JqZWN0IGZvciB0aGUgY29udGV4dC5cbiAgICBEYXRlID0gKGZ1bmN0aW9uKE5hdGl2ZURhdGUpIHtcblxuICAgICAgICAvLyBEYXRlLmxlbmd0aCA9PT0gN1xuICAgICAgICBmdW5jdGlvbiBEYXRlKFksIE0sIEQsIGgsIG0sIHMsIG1zKSB7XG4gICAgICAgICAgICB2YXIgbGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICAgICAgICAgIGlmICh0aGlzIGluc3RhbmNlb2YgTmF0aXZlRGF0ZSkge1xuICAgICAgICAgICAgICAgIHZhciBkYXRlID0gbGVuZ3RoID09IDEgJiYgU3RyaW5nKFkpID09PSBZID8gLy8gaXNTdHJpbmcoWSlcbiAgICAgICAgICAgICAgICAgICAgLy8gV2UgZXhwbGljaXRseSBwYXNzIGl0IHRocm91Z2ggcGFyc2U6XG4gICAgICAgICAgICAgICAgICAgIG5ldyBOYXRpdmVEYXRlKERhdGUucGFyc2UoWSkpIDpcbiAgICAgICAgICAgICAgICAgICAgLy8gV2UgaGF2ZSB0byBtYW51YWxseSBtYWtlIGNhbGxzIGRlcGVuZGluZyBvbiBhcmd1bWVudFxuICAgICAgICAgICAgICAgICAgICAvLyBsZW5ndGggaGVyZVxuICAgICAgICAgICAgICAgICAgICBsZW5ndGggPj0gNyA/IG5ldyBOYXRpdmVEYXRlKFksIE0sIEQsIGgsIG0sIHMsIG1zKSA6XG4gICAgICAgICAgICAgICAgICAgIGxlbmd0aCA+PSA2ID8gbmV3IE5hdGl2ZURhdGUoWSwgTSwgRCwgaCwgbSwgcykgOlxuICAgICAgICAgICAgICAgICAgICBsZW5ndGggPj0gNSA/IG5ldyBOYXRpdmVEYXRlKFksIE0sIEQsIGgsIG0pIDpcbiAgICAgICAgICAgICAgICAgICAgbGVuZ3RoID49IDQgPyBuZXcgTmF0aXZlRGF0ZShZLCBNLCBELCBoKSA6XG4gICAgICAgICAgICAgICAgICAgIGxlbmd0aCA+PSAzID8gbmV3IE5hdGl2ZURhdGUoWSwgTSwgRCkgOlxuICAgICAgICAgICAgICAgICAgICBsZW5ndGggPj0gMiA/IG5ldyBOYXRpdmVEYXRlKFksIE0pIDpcbiAgICAgICAgICAgICAgICAgICAgbGVuZ3RoID49IDEgPyBuZXcgTmF0aXZlRGF0ZShZKSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5hdGl2ZURhdGUoKTtcbiAgICAgICAgICAgICAgICAvLyBQcmV2ZW50IG1peHVwcyB3aXRoIHVuZml4ZWQgRGF0ZSBvYmplY3RcbiAgICAgICAgICAgICAgICBkYXRlLmNvbnN0cnVjdG9yID0gRGF0ZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBOYXRpdmVEYXRlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gMTUuOS4xLjE1IERhdGUgVGltZSBTdHJpbmcgRm9ybWF0LlxuICAgICAgICB2YXIgaXNvRGF0ZUV4cHJlc3Npb24gPSBuZXcgUmVnRXhwKFwiXlwiICtcbiAgICAgICAgICAgIFwiKFxcXFxkezR9fFtcXCtcXC1dXFxcXGR7Nn0pXCIgKyAvLyBmb3VyLWRpZ2l0IHllYXIgY2FwdHVyZSBvciBzaWduICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gNi1kaWdpdCBleHRlbmRlZCB5ZWFyXG4gICAgICAgICAgICBcIig/Oi0oXFxcXGR7Mn0pXCIgKyAvLyBvcHRpb25hbCBtb250aCBjYXB0dXJlXG4gICAgICAgICAgICBcIig/Oi0oXFxcXGR7Mn0pXCIgKyAvLyBvcHRpb25hbCBkYXkgY2FwdHVyZVxuICAgICAgICAgICAgXCIoPzpcIiArIC8vIGNhcHR1cmUgaG91cnM6bWludXRlczpzZWNvbmRzLm1pbGxpc2Vjb25kc1xuICAgICAgICAgICAgICAgIFwiVChcXFxcZHsyfSlcIiArIC8vIGhvdXJzIGNhcHR1cmVcbiAgICAgICAgICAgICAgICBcIjooXFxcXGR7Mn0pXCIgKyAvLyBtaW51dGVzIGNhcHR1cmVcbiAgICAgICAgICAgICAgICBcIig/OlwiICsgLy8gb3B0aW9uYWwgOnNlY29uZHMubWlsbGlzZWNvbmRzXG4gICAgICAgICAgICAgICAgICAgIFwiOihcXFxcZHsyfSlcIiArIC8vIHNlY29uZHMgY2FwdHVyZVxuICAgICAgICAgICAgICAgICAgICBcIig/OihcXFxcLlxcXFxkezEsfSkpP1wiICsgLy8gbWlsbGlzZWNvbmRzIGNhcHR1cmVcbiAgICAgICAgICAgICAgICBcIik/XCIgK1xuICAgICAgICAgICAgXCIoXCIgKyAvLyBjYXB0dXJlIFVUQyBvZmZzZXQgY29tcG9uZW50XG4gICAgICAgICAgICAgICAgXCJafFwiICsgLy8gVVRDIGNhcHR1cmVcbiAgICAgICAgICAgICAgICBcIig/OlwiICsgLy8gb2Zmc2V0IHNwZWNpZmllciArLy1ob3VyczptaW51dGVzXG4gICAgICAgICAgICAgICAgICAgIFwiKFstK10pXCIgKyAvLyBzaWduIGNhcHR1cmVcbiAgICAgICAgICAgICAgICAgICAgXCIoXFxcXGR7Mn0pXCIgKyAvLyBob3VycyBvZmZzZXQgY2FwdHVyZVxuICAgICAgICAgICAgICAgICAgICBcIjooXFxcXGR7Mn0pXCIgKyAvLyBtaW51dGVzIG9mZnNldCBjYXB0dXJlXG4gICAgICAgICAgICAgICAgXCIpXCIgK1xuICAgICAgICAgICAgXCIpPyk/KT8pP1wiICtcbiAgICAgICAgXCIkXCIpO1xuXG4gICAgICAgIHZhciBtb250aHMgPSBbXG4gICAgICAgICAgICAwLCAzMSwgNTksIDkwLCAxMjAsIDE1MSwgMTgxLCAyMTIsIDI0MywgMjczLCAzMDQsIDMzNCwgMzY1XG4gICAgICAgIF07XG5cbiAgICAgICAgZnVuY3Rpb24gZGF5RnJvbU1vbnRoKHllYXIsIG1vbnRoKSB7XG4gICAgICAgICAgICB2YXIgdCA9IG1vbnRoID4gMSA/IDEgOiAwO1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICBtb250aHNbbW9udGhdICtcbiAgICAgICAgICAgICAgICBNYXRoLmZsb29yKCh5ZWFyIC0gMTk2OSArIHQpIC8gNCkgLVxuICAgICAgICAgICAgICAgIE1hdGguZmxvb3IoKHllYXIgLSAxOTAxICsgdCkgLyAxMDApICtcbiAgICAgICAgICAgICAgICBNYXRoLmZsb29yKCh5ZWFyIC0gMTYwMSArIHQpIC8gNDAwKSArXG4gICAgICAgICAgICAgICAgMzY1ICogKHllYXIgLSAxOTcwKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHRvVVRDKHQpIHtcbiAgICAgICAgICAgIHJldHVybiBOdW1iZXIobmV3IE5hdGl2ZURhdGUoMTk3MCwgMCwgMSwgMCwgMCwgMCwgdCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ29weSBhbnkgY3VzdG9tIG1ldGhvZHMgYSAzcmQgcGFydHkgbGlicmFyeSBtYXkgaGF2ZSBhZGRlZFxuICAgICAgICBmb3IgKHZhciBrZXkgaW4gTmF0aXZlRGF0ZSkge1xuICAgICAgICAgICAgRGF0ZVtrZXldID0gTmF0aXZlRGF0ZVtrZXldO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ29weSBcIm5hdGl2ZVwiIG1ldGhvZHMgZXhwbGljaXRseTsgdGhleSBtYXkgYmUgbm9uLWVudW1lcmFibGVcbiAgICAgICAgRGF0ZS5ub3cgPSBOYXRpdmVEYXRlLm5vdztcbiAgICAgICAgRGF0ZS5VVEMgPSBOYXRpdmVEYXRlLlVUQztcbiAgICAgICAgRGF0ZS5wcm90b3R5cGUgPSBOYXRpdmVEYXRlLnByb3RvdHlwZTtcbiAgICAgICAgRGF0ZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBEYXRlO1xuXG4gICAgICAgIC8vIFVwZ3JhZGUgRGF0ZS5wYXJzZSB0byBoYW5kbGUgc2ltcGxpZmllZCBJU08gODYwMSBzdHJpbmdzXG4gICAgICAgIERhdGUucGFyc2UgPSBmdW5jdGlvbiBwYXJzZShzdHJpbmcpIHtcbiAgICAgICAgICAgIHZhciBtYXRjaCA9IGlzb0RhdGVFeHByZXNzaW9uLmV4ZWMoc3RyaW5nKTtcbiAgICAgICAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICAgICAgICAgIC8vIHBhcnNlIG1vbnRocywgZGF5cywgaG91cnMsIG1pbnV0ZXMsIHNlY29uZHMsIGFuZCBtaWxsaXNlY29uZHNcbiAgICAgICAgICAgICAgICAvLyBwcm92aWRlIGRlZmF1bHQgdmFsdWVzIGlmIG5lY2Vzc2FyeVxuICAgICAgICAgICAgICAgIC8vIHBhcnNlIHRoZSBVVEMgb2Zmc2V0IGNvbXBvbmVudFxuICAgICAgICAgICAgICAgIHZhciB5ZWFyID0gTnVtYmVyKG1hdGNoWzFdKSxcbiAgICAgICAgICAgICAgICAgICAgbW9udGggPSBOdW1iZXIobWF0Y2hbMl0gfHwgMSkgLSAxLFxuICAgICAgICAgICAgICAgICAgICBkYXkgPSBOdW1iZXIobWF0Y2hbM10gfHwgMSkgLSAxLFxuICAgICAgICAgICAgICAgICAgICBob3VyID0gTnVtYmVyKG1hdGNoWzRdIHx8IDApLFxuICAgICAgICAgICAgICAgICAgICBtaW51dGUgPSBOdW1iZXIobWF0Y2hbNV0gfHwgMCksXG4gICAgICAgICAgICAgICAgICAgIHNlY29uZCA9IE51bWJlcihtYXRjaFs2XSB8fCAwKSxcbiAgICAgICAgICAgICAgICAgICAgbWlsbGlzZWNvbmQgPSBNYXRoLmZsb29yKE51bWJlcihtYXRjaFs3XSB8fCAwKSAqIDEwMDApLFxuICAgICAgICAgICAgICAgICAgICAvLyBXaGVuIHRpbWUgem9uZSBpcyBtaXNzZWQsIGxvY2FsIG9mZnNldCBzaG91bGQgYmUgdXNlZFxuICAgICAgICAgICAgICAgICAgICAvLyAoRVMgNS4xIGJ1ZylcbiAgICAgICAgICAgICAgICAgICAgLy8gc2VlIGh0dHBzOi8vYnVncy5lY21hc2NyaXB0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTEyXG4gICAgICAgICAgICAgICAgICAgIGlzTG9jYWxUaW1lID0gQm9vbGVhbihtYXRjaFs0XSAmJiAhbWF0Y2hbOF0pLFxuICAgICAgICAgICAgICAgICAgICBzaWduT2Zmc2V0ID0gbWF0Y2hbOV0gPT09IFwiLVwiID8gMSA6IC0xLFxuICAgICAgICAgICAgICAgICAgICBob3VyT2Zmc2V0ID0gTnVtYmVyKG1hdGNoWzEwXSB8fCAwKSxcbiAgICAgICAgICAgICAgICAgICAgbWludXRlT2Zmc2V0ID0gTnVtYmVyKG1hdGNoWzExXSB8fCAwKSxcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0O1xuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgaG91ciA8IChcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbnV0ZSA+IDAgfHwgc2Vjb25kID4gMCB8fCBtaWxsaXNlY29uZCA+IDAgP1xuICAgICAgICAgICAgICAgICAgICAgICAgMjQgOiAyNVxuICAgICAgICAgICAgICAgICAgICApICYmXG4gICAgICAgICAgICAgICAgICAgIG1pbnV0ZSA8IDYwICYmIHNlY29uZCA8IDYwICYmIG1pbGxpc2Vjb25kIDwgMTAwMCAmJlxuICAgICAgICAgICAgICAgICAgICBtb250aCA+IC0xICYmIG1vbnRoIDwgMTIgJiYgaG91ck9mZnNldCA8IDI0ICYmXG4gICAgICAgICAgICAgICAgICAgIG1pbnV0ZU9mZnNldCA8IDYwICYmIC8vIGRldGVjdCBpbnZhbGlkIG9mZnNldHNcbiAgICAgICAgICAgICAgICAgICAgZGF5ID4gLTEgJiZcbiAgICAgICAgICAgICAgICAgICAgZGF5IDwgKFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF5RnJvbU1vbnRoKHllYXIsIG1vbnRoICsgMSkgLVxuICAgICAgICAgICAgICAgICAgICAgICAgZGF5RnJvbU1vbnRoKHllYXIsIG1vbnRoKVxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IChcbiAgICAgICAgICAgICAgICAgICAgICAgIChkYXlGcm9tTW9udGgoeWVhciwgbW9udGgpICsgZGF5KSAqIDI0ICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhvdXIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgaG91ck9mZnNldCAqIHNpZ25PZmZzZXRcbiAgICAgICAgICAgICAgICAgICAgKSAqIDYwO1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSAoXG4gICAgICAgICAgICAgICAgICAgICAgICAocmVzdWx0ICsgbWludXRlICsgbWludXRlT2Zmc2V0ICogc2lnbk9mZnNldCkgKiA2MCArXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWNvbmRcbiAgICAgICAgICAgICAgICAgICAgKSAqIDEwMDAgKyBtaWxsaXNlY29uZDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzTG9jYWxUaW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSB0b1VUQyhyZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICgtOC42NGUxNSA8PSByZXN1bHQgJiYgcmVzdWx0IDw9IDguNjRlMTUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIE5hTjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBOYXRpdmVEYXRlLnBhcnNlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIERhdGU7XG4gICAgfSkoRGF0ZSk7XG59XG5cbi8vIEVTNSAxNS45LjQuNFxuLy8gaHR0cDovL2VzNS5naXRodWIuY29tLyN4MTUuOS40LjRcbmlmICghRGF0ZS5ub3cpIHtcbiAgICBEYXRlLm5vdyA9IGZ1bmN0aW9uIG5vdygpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgIH07XG59XG5cblxuLy9cbi8vIE51bWJlclxuLy8gPT09PT09XG4vL1xuXG4vLyBFUzUuMSAxNS43LjQuNVxuLy8gaHR0cDovL2VzNS5naXRodWIuY29tLyN4MTUuNy40LjVcbmlmICghTnVtYmVyLnByb3RvdHlwZS50b0ZpeGVkIHx8ICgwLjAwMDA4KS50b0ZpeGVkKDMpICE9PSAnMC4wMDAnIHx8ICgwLjkpLnRvRml4ZWQoMCkgPT09ICcwJyB8fCAoMS4yNTUpLnRvRml4ZWQoMikgIT09ICcxLjI1JyB8fCAoMTAwMDAwMDAwMDAwMDAwMDEyOCkudG9GaXhlZCgwKSAhPT0gXCIxMDAwMDAwMDAwMDAwMDAwMTI4XCIpIHtcbiAgICAvLyBIaWRlIHRoZXNlIHZhcmlhYmxlcyBhbmQgZnVuY3Rpb25zXG4gICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGJhc2UsIHNpemUsIGRhdGEsIGk7XG5cbiAgICAgICAgYmFzZSA9IDFlNztcbiAgICAgICAgc2l6ZSA9IDY7XG4gICAgICAgIGRhdGEgPSBbMCwgMCwgMCwgMCwgMCwgMF07XG5cbiAgICAgICAgZnVuY3Rpb24gbXVsdGlwbHkobiwgYykge1xuICAgICAgICAgICAgdmFyIGkgPSAtMTtcbiAgICAgICAgICAgIHdoaWxlICgrK2kgPCBzaXplKSB7XG4gICAgICAgICAgICAgICAgYyArPSBuICogZGF0YVtpXTtcbiAgICAgICAgICAgICAgICBkYXRhW2ldID0gYyAlIGJhc2U7XG4gICAgICAgICAgICAgICAgYyA9IE1hdGguZmxvb3IoYyAvIGJhc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZGl2aWRlKG4pIHtcbiAgICAgICAgICAgIHZhciBpID0gc2l6ZSwgYyA9IDA7XG4gICAgICAgICAgICB3aGlsZSAoLS1pID49IDApIHtcbiAgICAgICAgICAgICAgICBjICs9IGRhdGFbaV07XG4gICAgICAgICAgICAgICAgZGF0YVtpXSA9IE1hdGguZmxvb3IoYyAvIG4pO1xuICAgICAgICAgICAgICAgIGMgPSAoYyAlIG4pICogYmFzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xuICAgICAgICAgICAgdmFyIGkgPSBzaXplO1xuICAgICAgICAgICAgdmFyIHMgPSAnJztcbiAgICAgICAgICAgIHdoaWxlICgtLWkgPj0gMCkge1xuICAgICAgICAgICAgICAgIGlmIChzICE9PSAnJyB8fCBpID09PSAwIHx8IGRhdGFbaV0gIT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBTdHJpbmcoZGF0YVtpXSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzID09PSAnJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcyA9IHQ7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzICs9ICcwMDAwMDAwJy5zbGljZSgwLCA3IC0gdC5sZW5ndGgpICsgdDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gcG93KHgsIG4sIGFjYykge1xuICAgICAgICAgICAgcmV0dXJuIChuID09PSAwID8gYWNjIDogKG4gJSAyID09PSAxID8gcG93KHgsIG4gLSAxLCBhY2MgKiB4KSA6IHBvdyh4ICogeCwgbiAvIDIsIGFjYykpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGxvZyh4KSB7XG4gICAgICAgICAgICB2YXIgbiA9IDA7XG4gICAgICAgICAgICB3aGlsZSAoeCA+PSA0MDk2KSB7XG4gICAgICAgICAgICAgICAgbiArPSAxMjtcbiAgICAgICAgICAgICAgICB4IC89IDQwOTY7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB3aGlsZSAoeCA+PSAyKSB7XG4gICAgICAgICAgICAgICAgbiArPSAxO1xuICAgICAgICAgICAgICAgIHggLz0gMjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuO1xuICAgICAgICB9XG5cbiAgICAgICAgTnVtYmVyLnByb3RvdHlwZS50b0ZpeGVkID0gZnVuY3Rpb24gKGZyYWN0aW9uRGlnaXRzKSB7XG4gICAgICAgICAgICB2YXIgZiwgeCwgcywgbSwgZSwgeiwgaiwgaztcblxuICAgICAgICAgICAgLy8gVGVzdCBmb3IgTmFOIGFuZCByb3VuZCBmcmFjdGlvbkRpZ2l0cyBkb3duXG4gICAgICAgICAgICBmID0gTnVtYmVyKGZyYWN0aW9uRGlnaXRzKTtcbiAgICAgICAgICAgIGYgPSBmICE9PSBmID8gMCA6IE1hdGguZmxvb3IoZik7XG5cbiAgICAgICAgICAgIGlmIChmIDwgMCB8fCBmID4gMjApIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIk51bWJlci50b0ZpeGVkIGNhbGxlZCB3aXRoIGludmFsaWQgbnVtYmVyIG9mIGRlY2ltYWxzXCIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB4ID0gTnVtYmVyKHRoaXMpO1xuXG4gICAgICAgICAgICAvLyBUZXN0IGZvciBOYU5cbiAgICAgICAgICAgIGlmICh4ICE9PSB4KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiTmFOXCI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIElmIGl0IGlzIHRvbyBiaWcgb3Igc21hbGwsIHJldHVybiB0aGUgc3RyaW5nIHZhbHVlIG9mIHRoZSBudW1iZXJcbiAgICAgICAgICAgIGlmICh4IDw9IC0xZTIxIHx8IHggPj0gMWUyMSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBTdHJpbmcoeCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHMgPSBcIlwiO1xuXG4gICAgICAgICAgICBpZiAoeCA8IDApIHtcbiAgICAgICAgICAgICAgICBzID0gXCItXCI7XG4gICAgICAgICAgICAgICAgeCA9IC14O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBtID0gXCIwXCI7XG5cbiAgICAgICAgICAgIGlmICh4ID4gMWUtMjEpIHtcbiAgICAgICAgICAgICAgICAvLyAxZS0yMSA8IHggPCAxZTIxXG4gICAgICAgICAgICAgICAgLy8gLTcwIDwgbG9nMih4KSA8IDcwXG4gICAgICAgICAgICAgICAgZSA9IGxvZyh4ICogcG93KDIsIDY5LCAxKSkgLSA2OTtcbiAgICAgICAgICAgICAgICB6ID0gKGUgPCAwID8geCAqIHBvdygyLCAtZSwgMSkgOiB4IC8gcG93KDIsIGUsIDEpKTtcbiAgICAgICAgICAgICAgICB6ICo9IDB4MTAwMDAwMDAwMDAwMDA7IC8vIE1hdGgucG93KDIsIDUyKTtcbiAgICAgICAgICAgICAgICBlID0gNTIgLSBlO1xuXG4gICAgICAgICAgICAgICAgLy8gLTE4IDwgZSA8IDEyMlxuICAgICAgICAgICAgICAgIC8vIHggPSB6IC8gMiBeIGVcbiAgICAgICAgICAgICAgICBpZiAoZSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgbXVsdGlwbHkoMCwgeik7XG4gICAgICAgICAgICAgICAgICAgIGogPSBmO1xuXG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChqID49IDcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG11bHRpcGx5KDFlNywgMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBqIC09IDc7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBtdWx0aXBseShwb3coMTAsIGosIDEpLCAwKTtcbiAgICAgICAgICAgICAgICAgICAgaiA9IGUgLSAxO1xuXG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChqID49IDIzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkaXZpZGUoMSA8PCAyMyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBqIC09IDIzO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgZGl2aWRlKDEgPDwgaik7XG4gICAgICAgICAgICAgICAgICAgIG11bHRpcGx5KDEsIDEpO1xuICAgICAgICAgICAgICAgICAgICBkaXZpZGUoMik7XG4gICAgICAgICAgICAgICAgICAgIG0gPSB0b1N0cmluZygpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG11bHRpcGx5KDAsIHopO1xuICAgICAgICAgICAgICAgICAgICBtdWx0aXBseSgxIDw8ICgtZSksIDApO1xuICAgICAgICAgICAgICAgICAgICBtID0gdG9TdHJpbmcoKSArICcwLjAwMDAwMDAwMDAwMDAwMDAwMDAwJy5zbGljZSgyLCAyICsgZik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZiA+IDApIHtcbiAgICAgICAgICAgICAgICBrID0gbS5sZW5ndGg7XG5cbiAgICAgICAgICAgICAgICBpZiAoayA8PSBmKSB7XG4gICAgICAgICAgICAgICAgICAgIG0gPSBzICsgJzAuMDAwMDAwMDAwMDAwMDAwMDAwMCcuc2xpY2UoMCwgZiAtIGsgKyAyKSArIG07XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbSA9IHMgKyBtLnNsaWNlKDAsIGsgLSBmKSArICcuJyArIG0uc2xpY2UoayAtIGYpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbSA9IHMgKyBtO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gbTtcbiAgICAgICAgfVxuICAgIH0oKSk7XG59XG5cblxuLy9cbi8vIFN0cmluZ1xuLy8gPT09PT09XG4vL1xuXG5cbi8vIEVTNSAxNS41LjQuMTRcbi8vIGh0dHA6Ly9lczUuZ2l0aHViLmNvbS8jeDE1LjUuNC4xNFxuXG4vLyBbYnVnZml4LCBJRSBsdCA5LCBmaXJlZm94IDQsIEtvbnF1ZXJvciwgT3BlcmEsIG9ic2N1cmUgYnJvd3NlcnNdXG4vLyBNYW55IGJyb3dzZXJzIGRvIG5vdCBzcGxpdCBwcm9wZXJseSB3aXRoIHJlZ3VsYXIgZXhwcmVzc2lvbnMgb3IgdGhleVxuLy8gZG8gbm90IHBlcmZvcm0gdGhlIHNwbGl0IGNvcnJlY3RseSB1bmRlciBvYnNjdXJlIGNvbmRpdGlvbnMuXG4vLyBTZWUgaHR0cDovL2Jsb2cuc3RldmVubGV2aXRoYW4uY29tL2FyY2hpdmVzL2Nyb3NzLWJyb3dzZXItc3BsaXRcbi8vIEkndmUgdGVzdGVkIGluIG1hbnkgYnJvd3NlcnMgYW5kIHRoaXMgc2VlbXMgdG8gY292ZXIgdGhlIGRldmlhbnQgb25lczpcbi8vICAgICdhYicuc3BsaXQoLyg/OmFiKSovKSBzaG91bGQgYmUgW1wiXCIsIFwiXCJdLCBub3QgW1wiXCJdXG4vLyAgICAnLicuc3BsaXQoLyguPykoLj8pLykgc2hvdWxkIGJlIFtcIlwiLCBcIi5cIiwgXCJcIiwgXCJcIl0sIG5vdCBbXCJcIiwgXCJcIl1cbi8vICAgICd0ZXNzdCcuc3BsaXQoLyhzKSovKSBzaG91bGQgYmUgW1widFwiLCB1bmRlZmluZWQsIFwiZVwiLCBcInNcIiwgXCJ0XCJdLCBub3Rcbi8vICAgICAgIFt1bmRlZmluZWQsIFwidFwiLCB1bmRlZmluZWQsIFwiZVwiLCAuLi5dXG4vLyAgICAnJy5zcGxpdCgvLj8vKSBzaG91bGQgYmUgW10sIG5vdCBbXCJcIl1cbi8vICAgICcuJy5zcGxpdCgvKCkoKS8pIHNob3VsZCBiZSBbXCIuXCJdLCBub3QgW1wiXCIsIFwiXCIsIFwiLlwiXVxuXG52YXIgc3RyaW5nX3NwbGl0ID0gU3RyaW5nLnByb3RvdHlwZS5zcGxpdDtcbmlmIChcbiAgICAnYWInLnNwbGl0KC8oPzphYikqLykubGVuZ3RoICE9PSAyIHx8XG4gICAgJy4nLnNwbGl0KC8oLj8pKC4/KS8pLmxlbmd0aCAhPT0gNCB8fFxuICAgICd0ZXNzdCcuc3BsaXQoLyhzKSovKVsxXSA9PT0gXCJ0XCIgfHxcbiAgICAnJy5zcGxpdCgvLj8vKS5sZW5ndGggfHxcbiAgICAnLicuc3BsaXQoLygpKCkvKS5sZW5ndGggPiAxXG4pIHtcbiAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY29tcGxpYW50RXhlY05wY2cgPSAvKCk/Py8uZXhlYyhcIlwiKVsxXSA9PT0gdm9pZCAwOyAvLyBOUENHOiBub25wYXJ0aWNpcGF0aW5nIGNhcHR1cmluZyBncm91cFxuXG4gICAgICAgIFN0cmluZy5wcm90b3R5cGUuc3BsaXQgPSBmdW5jdGlvbiAoc2VwYXJhdG9yLCBsaW1pdCkge1xuICAgICAgICAgICAgdmFyIHN0cmluZyA9IHRoaXM7XG4gICAgICAgICAgICBpZiAoc2VwYXJhdG9yID09PSB2b2lkIDAgJiYgbGltaXQgPT09IDApXG4gICAgICAgICAgICAgICAgcmV0dXJuIFtdO1xuXG4gICAgICAgICAgICAvLyBJZiBgc2VwYXJhdG9yYCBpcyBub3QgYSByZWdleCwgdXNlIG5hdGl2ZSBzcGxpdFxuICAgICAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChzZXBhcmF0b3IpICE9PSBcIltvYmplY3QgUmVnRXhwXVwiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0cmluZ19zcGxpdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgb3V0cHV0ID0gW10sXG4gICAgICAgICAgICAgICAgZmxhZ3MgPSAoc2VwYXJhdG9yLmlnbm9yZUNhc2UgPyBcImlcIiA6IFwiXCIpICtcbiAgICAgICAgICAgICAgICAgICAgICAgIChzZXBhcmF0b3IubXVsdGlsaW5lICA/IFwibVwiIDogXCJcIikgK1xuICAgICAgICAgICAgICAgICAgICAgICAgKHNlcGFyYXRvci5leHRlbmRlZCAgID8gXCJ4XCIgOiBcIlwiKSArIC8vIFByb3Bvc2VkIGZvciBFUzZcbiAgICAgICAgICAgICAgICAgICAgICAgIChzZXBhcmF0b3Iuc3RpY2t5ICAgICA/IFwieVwiIDogXCJcIiksIC8vIEZpcmVmb3ggMytcbiAgICAgICAgICAgICAgICBsYXN0TGFzdEluZGV4ID0gMCxcbiAgICAgICAgICAgICAgICAvLyBNYWtlIGBnbG9iYWxgIGFuZCBhdm9pZCBgbGFzdEluZGV4YCBpc3N1ZXMgYnkgd29ya2luZyB3aXRoIGEgY29weVxuICAgICAgICAgICAgICAgIHNlcGFyYXRvciA9IG5ldyBSZWdFeHAoc2VwYXJhdG9yLnNvdXJjZSwgZmxhZ3MgKyBcImdcIiksXG4gICAgICAgICAgICAgICAgc2VwYXJhdG9yMiwgbWF0Y2gsIGxhc3RJbmRleCwgbGFzdExlbmd0aDtcbiAgICAgICAgICAgIHN0cmluZyArPSBcIlwiOyAvLyBUeXBlLWNvbnZlcnRcbiAgICAgICAgICAgIGlmICghY29tcGxpYW50RXhlY05wY2cpIHtcbiAgICAgICAgICAgICAgICAvLyBEb2Vzbid0IG5lZWQgZmxhZ3MgZ3ksIGJ1dCB0aGV5IGRvbid0IGh1cnRcbiAgICAgICAgICAgICAgICBzZXBhcmF0b3IyID0gbmV3IFJlZ0V4cChcIl5cIiArIHNlcGFyYXRvci5zb3VyY2UgKyBcIiQoPyFcXFxccylcIiwgZmxhZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyogVmFsdWVzIGZvciBgbGltaXRgLCBwZXIgdGhlIHNwZWM6XG4gICAgICAgICAgICAgKiBJZiB1bmRlZmluZWQ6IDQyOTQ5NjcyOTUgLy8gTWF0aC5wb3coMiwgMzIpIC0gMVxuICAgICAgICAgICAgICogSWYgMCwgSW5maW5pdHksIG9yIE5hTjogMFxuICAgICAgICAgICAgICogSWYgcG9zaXRpdmUgbnVtYmVyOiBsaW1pdCA9IE1hdGguZmxvb3IobGltaXQpOyBpZiAobGltaXQgPiA0Mjk0OTY3Mjk1KSBsaW1pdCAtPSA0Mjk0OTY3Mjk2O1xuICAgICAgICAgICAgICogSWYgbmVnYXRpdmUgbnVtYmVyOiA0Mjk0OTY3Mjk2IC0gTWF0aC5mbG9vcihNYXRoLmFicyhsaW1pdCkpXG4gICAgICAgICAgICAgKiBJZiBvdGhlcjogVHlwZS1jb252ZXJ0LCB0aGVuIHVzZSB0aGUgYWJvdmUgcnVsZXNcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgbGltaXQgPSBsaW1pdCA9PT0gdm9pZCAwID9cbiAgICAgICAgICAgICAgICAtMSA+Pj4gMCA6IC8vIE1hdGgucG93KDIsIDMyKSAtIDFcbiAgICAgICAgICAgICAgICBsaW1pdCA+Pj4gMDsgLy8gVG9VaW50MzIobGltaXQpXG4gICAgICAgICAgICB3aGlsZSAobWF0Y2ggPSBzZXBhcmF0b3IuZXhlYyhzdHJpbmcpKSB7XG4gICAgICAgICAgICAgICAgLy8gYHNlcGFyYXRvci5sYXN0SW5kZXhgIGlzIG5vdCByZWxpYWJsZSBjcm9zcy1icm93c2VyXG4gICAgICAgICAgICAgICAgbGFzdEluZGV4ID0gbWF0Y2guaW5kZXggKyBtYXRjaFswXS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgaWYgKGxhc3RJbmRleCA+IGxhc3RMYXN0SW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0LnB1c2goc3RyaW5nLnNsaWNlKGxhc3RMYXN0SW5kZXgsIG1hdGNoLmluZGV4KSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIEZpeCBicm93c2VycyB3aG9zZSBgZXhlY2AgbWV0aG9kcyBkb24ndCBjb25zaXN0ZW50bHkgcmV0dXJuIGB1bmRlZmluZWRgIGZvclxuICAgICAgICAgICAgICAgICAgICAvLyBub25wYXJ0aWNpcGF0aW5nIGNhcHR1cmluZyBncm91cHNcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjb21wbGlhbnRFeGVjTnBjZyAmJiBtYXRjaC5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRjaFswXS5yZXBsYWNlKHNlcGFyYXRvcjIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGggLSAyOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFyZ3VtZW50c1tpXSA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaFtpXSA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaC5sZW5ndGggPiAxICYmIG1hdGNoLmluZGV4IDwgc3RyaW5nLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkob3V0cHV0LCBtYXRjaC5zbGljZSgxKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbGFzdExlbmd0aCA9IG1hdGNoWzBdLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgbGFzdExhc3RJbmRleCA9IGxhc3RJbmRleDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG91dHB1dC5sZW5ndGggPj0gbGltaXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzZXBhcmF0b3IubGFzdEluZGV4ID09PSBtYXRjaC5pbmRleCkge1xuICAgICAgICAgICAgICAgICAgICBzZXBhcmF0b3IubGFzdEluZGV4Kys7IC8vIEF2b2lkIGFuIGluZmluaXRlIGxvb3BcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobGFzdExhc3RJbmRleCA9PT0gc3RyaW5nLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGlmIChsYXN0TGVuZ3RoIHx8ICFzZXBhcmF0b3IudGVzdChcIlwiKSkge1xuICAgICAgICAgICAgICAgICAgICBvdXRwdXQucHVzaChcIlwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG91dHB1dC5wdXNoKHN0cmluZy5zbGljZShsYXN0TGFzdEluZGV4KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gb3V0cHV0Lmxlbmd0aCA+IGxpbWl0ID8gb3V0cHV0LnNsaWNlKDAsIGxpbWl0KSA6IG91dHB1dDtcbiAgICAgICAgfTtcbiAgICB9KCkpO1xuXG4vLyBbYnVnZml4LCBjaHJvbWVdXG4vLyBJZiBzZXBhcmF0b3IgaXMgdW5kZWZpbmVkLCB0aGVuIHRoZSByZXN1bHQgYXJyYXkgY29udGFpbnMganVzdCBvbmUgU3RyaW5nLFxuLy8gd2hpY2ggaXMgdGhlIHRoaXMgdmFsdWUgKGNvbnZlcnRlZCB0byBhIFN0cmluZykuIElmIGxpbWl0IGlzIG5vdCB1bmRlZmluZWQsXG4vLyB0aGVuIHRoZSBvdXRwdXQgYXJyYXkgaXMgdHJ1bmNhdGVkIHNvIHRoYXQgaXQgY29udGFpbnMgbm8gbW9yZSB0aGFuIGxpbWl0XG4vLyBlbGVtZW50cy5cbi8vIFwiMFwiLnNwbGl0KHVuZGVmaW5lZCwgMCkgLT4gW11cbn0gZWxzZSBpZiAoXCIwXCIuc3BsaXQodm9pZCAwLCAwKS5sZW5ndGgpIHtcbiAgICBTdHJpbmcucHJvdG90eXBlLnNwbGl0ID0gZnVuY3Rpb24oc2VwYXJhdG9yLCBsaW1pdCkge1xuICAgICAgICBpZiAoc2VwYXJhdG9yID09PSB2b2lkIDAgJiYgbGltaXQgPT09IDApIHJldHVybiBbXTtcbiAgICAgICAgcmV0dXJuIHN0cmluZ19zcGxpdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbn1cblxuXG4vLyBFQ01BLTI2MiwgM3JkIEIuMi4zXG4vLyBOb3RlIGFuIEVDTUFTY3JpcHQgc3RhbmRhcnQsIGFsdGhvdWdoIEVDTUFTY3JpcHQgM3JkIEVkaXRpb24gaGFzIGFcbi8vIG5vbi1ub3JtYXRpdmUgc2VjdGlvbiBzdWdnZXN0aW5nIHVuaWZvcm0gc2VtYW50aWNzIGFuZCBpdCBzaG91bGQgYmVcbi8vIG5vcm1hbGl6ZWQgYWNyb3NzIGFsbCBicm93c2Vyc1xuLy8gW2J1Z2ZpeCwgSUUgbHQgOV0gSUUgPCA5IHN1YnN0cigpIHdpdGggbmVnYXRpdmUgdmFsdWUgbm90IHdvcmtpbmcgaW4gSUVcbmlmIChcIlwiLnN1YnN0ciAmJiBcIjBiXCIuc3Vic3RyKC0xKSAhPT0gXCJiXCIpIHtcbiAgICB2YXIgc3RyaW5nX3N1YnN0ciA9IFN0cmluZy5wcm90b3R5cGUuc3Vic3RyO1xuICAgIC8qKlxuICAgICAqICBHZXQgdGhlIHN1YnN0cmluZyBvZiBhIHN0cmluZ1xuICAgICAqICBAcGFyYW0gIHtpbnRlZ2VyfSAgc3RhcnQgICB3aGVyZSB0byBzdGFydCB0aGUgc3Vic3RyaW5nXG4gICAgICogIEBwYXJhbSAge2ludGVnZXJ9ICBsZW5ndGggIGhvdyBtYW55IGNoYXJhY3RlcnMgdG8gcmV0dXJuXG4gICAgICogIEByZXR1cm4ge3N0cmluZ31cbiAgICAgKi9cbiAgICBTdHJpbmcucHJvdG90eXBlLnN1YnN0ciA9IGZ1bmN0aW9uKHN0YXJ0LCBsZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIHN0cmluZ19zdWJzdHIuY2FsbChcbiAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICBzdGFydCA8IDAgPyAoKHN0YXJ0ID0gdGhpcy5sZW5ndGggKyBzdGFydCkgPCAwID8gMCA6IHN0YXJ0KSA6IHN0YXJ0LFxuICAgICAgICAgICAgbGVuZ3RoXG4gICAgICAgICk7XG4gICAgfVxufVxuXG4vLyBFUzUgMTUuNS40LjIwXG4vLyBodHRwOi8vZXM1LmdpdGh1Yi5jb20vI3gxNS41LjQuMjBcbnZhciB3cyA9IFwiXFx4MDlcXHgwQVxceDBCXFx4MENcXHgwRFxceDIwXFx4QTBcXHUxNjgwXFx1MTgwRVxcdTIwMDBcXHUyMDAxXFx1MjAwMlxcdTIwMDNcIiArXG4gICAgXCJcXHUyMDA0XFx1MjAwNVxcdTIwMDZcXHUyMDA3XFx1MjAwOFxcdTIwMDlcXHUyMDBBXFx1MjAyRlxcdTIwNUZcXHUzMDAwXFx1MjAyOFwiICtcbiAgICBcIlxcdTIwMjlcXHVGRUZGXCI7XG5pZiAoIVN0cmluZy5wcm90b3R5cGUudHJpbSB8fCB3cy50cmltKCkpIHtcbiAgICAvLyBodHRwOi8vYmxvZy5zdGV2ZW5sZXZpdGhhbi5jb20vYXJjaGl2ZXMvZmFzdGVyLXRyaW0tamF2YXNjcmlwdFxuICAgIC8vIGh0dHA6Ly9wZXJmZWN0aW9ua2lsbHMuY29tL3doaXRlc3BhY2UtZGV2aWF0aW9ucy9cbiAgICB3cyA9IFwiW1wiICsgd3MgKyBcIl1cIjtcbiAgICB2YXIgdHJpbUJlZ2luUmVnZXhwID0gbmV3IFJlZ0V4cChcIl5cIiArIHdzICsgd3MgKyBcIipcIiksXG4gICAgICAgIHRyaW1FbmRSZWdleHAgPSBuZXcgUmVnRXhwKHdzICsgd3MgKyBcIiokXCIpO1xuICAgIFN0cmluZy5wcm90b3R5cGUudHJpbSA9IGZ1bmN0aW9uIHRyaW0oKSB7XG4gICAgICAgIGlmICh0aGlzID09PSB2b2lkIDAgfHwgdGhpcyA9PT0gbnVsbCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcImNhbid0IGNvbnZlcnQgXCIrdGhpcytcIiB0byBvYmplY3RcIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFN0cmluZyh0aGlzKVxuICAgICAgICAgICAgLnJlcGxhY2UodHJpbUJlZ2luUmVnZXhwLCBcIlwiKVxuICAgICAgICAgICAgLnJlcGxhY2UodHJpbUVuZFJlZ2V4cCwgXCJcIik7XG4gICAgfTtcbn1cblxuLy9cbi8vIFV0aWxcbi8vID09PT09PVxuLy9cblxuLy8gRVM1IDkuNFxuLy8gaHR0cDovL2VzNS5naXRodWIuY29tLyN4OS40XG4vLyBodHRwOi8vanNwZXJmLmNvbS90by1pbnRlZ2VyXG5cbmZ1bmN0aW9uIHRvSW50ZWdlcihuKSB7XG4gICAgbiA9ICtuO1xuICAgIGlmIChuICE9PSBuKSB7IC8vIGlzTmFOXG4gICAgICAgIG4gPSAwO1xuICAgIH0gZWxzZSBpZiAobiAhPT0gMCAmJiBuICE9PSAoMS8wKSAmJiBuICE9PSAtKDEvMCkpIHtcbiAgICAgICAgbiA9IChuID4gMCB8fCAtMSkgKiBNYXRoLmZsb29yKE1hdGguYWJzKG4pKTtcbiAgICB9XG4gICAgcmV0dXJuIG47XG59XG5cbmZ1bmN0aW9uIGlzUHJpbWl0aXZlKGlucHV0KSB7XG4gICAgdmFyIHR5cGUgPSB0eXBlb2YgaW5wdXQ7XG4gICAgcmV0dXJuIChcbiAgICAgICAgaW5wdXQgPT09IG51bGwgfHxcbiAgICAgICAgdHlwZSA9PT0gXCJ1bmRlZmluZWRcIiB8fFxuICAgICAgICB0eXBlID09PSBcImJvb2xlYW5cIiB8fFxuICAgICAgICB0eXBlID09PSBcIm51bWJlclwiIHx8XG4gICAgICAgIHR5cGUgPT09IFwic3RyaW5nXCJcbiAgICApO1xufVxuXG5mdW5jdGlvbiB0b1ByaW1pdGl2ZShpbnB1dCkge1xuICAgIHZhciB2YWwsIHZhbHVlT2YsIHRvU3RyaW5nO1xuICAgIGlmIChpc1ByaW1pdGl2ZShpbnB1dCkpIHtcbiAgICAgICAgcmV0dXJuIGlucHV0O1xuICAgIH1cbiAgICB2YWx1ZU9mID0gaW5wdXQudmFsdWVPZjtcbiAgICBpZiAodHlwZW9mIHZhbHVlT2YgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICB2YWwgPSB2YWx1ZU9mLmNhbGwoaW5wdXQpO1xuICAgICAgICBpZiAoaXNQcmltaXRpdmUodmFsKSkge1xuICAgICAgICAgICAgcmV0dXJuIHZhbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0b1N0cmluZyA9IGlucHV0LnRvU3RyaW5nO1xuICAgIGlmICh0eXBlb2YgdG9TdHJpbmcgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICB2YWwgPSB0b1N0cmluZy5jYWxsKGlucHV0KTtcbiAgICAgICAgaWYgKGlzUHJpbWl0aXZlKHZhbCkpIHtcbiAgICAgICAgICAgIHJldHVybiB2YWw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcigpO1xufVxuXG4vLyBFUzUgOS45XG4vLyBodHRwOi8vZXM1LmdpdGh1Yi5jb20vI3g5LjlcbnZhciB0b09iamVjdCA9IGZ1bmN0aW9uIChvKSB7XG4gICAgaWYgKG8gPT0gbnVsbCkgeyAvLyB0aGlzIG1hdGNoZXMgYm90aCBudWxsIGFuZCB1bmRlZmluZWRcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcImNhbid0IGNvbnZlcnQgXCIrbytcIiB0byBvYmplY3RcIik7XG4gICAgfVxuICAgIHJldHVybiBPYmplY3Qobyk7XG59O1xuXG59KTtcblxuIiwiLy8gR2VuZXJhdGVkIGJ5IEljZWRDb2ZmZWVTY3JpcHQgMTA4LjAuMTFcbihmdW5jdGlvbigpIHtcbiAgdmFyIExleGVyLCBTb3VyY2VNYXAsIGNvbXBpbGUsIGV4dCwgZm9ybWF0U291cmNlUG9zaXRpb24sIGZzLCBnZXRTb3VyY2VNYXAsIGhlbHBlcnMsIGljZWRfcnVudGltZSwgaWNlZF90cmFuc2Zvcm0sIGxleGVyLCBwYXJzZXIsIHBhdGgsIHNvdXJjZU1hcHMsIHZtLCB3aXRoUHJldHR5RXJyb3JzLCBfYmFzZSwgX2ksIF9sZW4sIF9yZWYsXG4gICAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksXG4gICAgX19pbmRleE9mID0gW10uaW5kZXhPZiB8fCBmdW5jdGlvbihpdGVtKSB7IGZvciAodmFyIGkgPSAwLCBsID0gdGhpcy5sZW5ndGg7IGkgPCBsOyBpKyspIHsgaWYgKGkgaW4gdGhpcyAmJiB0aGlzW2ldID09PSBpdGVtKSByZXR1cm4gaTsgfSByZXR1cm4gLTE7IH07XG5cbiAgZnMgPSByZXF1aXJlKCdmcycpO1xuXG4gIHZtID0gcmVxdWlyZSgndm0nKTtcblxuICBwYXRoID0gcmVxdWlyZSgncGF0aCcpO1xuXG4gIExleGVyID0gcmVxdWlyZSgnLi9sZXhlcicpLkxleGVyO1xuXG4gIHBhcnNlciA9IHJlcXVpcmUoJy4vcGFyc2VyJykucGFyc2VyO1xuXG4gIGhlbHBlcnMgPSByZXF1aXJlKCcuL2hlbHBlcnMnKTtcblxuICBTb3VyY2VNYXAgPSByZXF1aXJlKCcuL3NvdXJjZW1hcCcpLlNvdXJjZU1hcDtcblxuICBpY2VkX3RyYW5zZm9ybSA9IHJlcXVpcmUoJy4vaWNlZCcpLnRyYW5zZm9ybTtcblxuICBpY2VkX3J1bnRpbWUgPSByZXF1aXJlKCdpY2VkLXJ1bnRpbWUnKTtcblxuICBleHBvcnRzLlZFUlNJT04gPSAnMTA4LjAuMTEnO1xuXG4gIGV4cG9ydHMuRklMRV9FWFRFTlNJT05TID0gWycuY29mZmVlJywgJy5saXRjb2ZmZWUnLCAnLmNvZmZlZS5tZCcsICcuaWNlZCcsICcubGl0aWNlZCcsICcuaWNlZC5tZCddO1xuXG4gIGV4cG9ydHMuaGVscGVycyA9IGhlbHBlcnM7XG5cbiAgd2l0aFByZXR0eUVycm9ycyA9IGZ1bmN0aW9uKGZuKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGNvZGUsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBlcnI7XG4gICAgICBpZiAob3B0aW9ucyA9PSBudWxsKSB7XG4gICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgIH1cbiAgICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBmbi5jYWxsKHRoaXMsIGNvZGUsIG9wdGlvbnMpO1xuICAgICAgfSBjYXRjaCAoX2Vycm9yKSB7XG4gICAgICAgIGVyciA9IF9lcnJvcjtcbiAgICAgICAgdGhyb3cgaGVscGVycy51cGRhdGVTeW50YXhFcnJvcihlcnIsIGNvZGUsIG9wdGlvbnMuZmlsZW5hbWUpO1xuICAgICAgfVxuICAgIH07XG4gIH07XG5cbiAgZXhwb3J0cy5jb21waWxlID0gY29tcGlsZSA9IHdpdGhQcmV0dHlFcnJvcnMoZnVuY3Rpb24oY29kZSwgb3B0aW9ucykge1xuICAgIHZhciBhbnN3ZXIsIGN1cnJlbnRDb2x1bW4sIGN1cnJlbnRMaW5lLCBleHRlbmQsIGZyYWdtZW50LCBmcmFnbWVudHMsIGhlYWRlciwganMsIG1hcCwgbWVyZ2UsIG5ld0xpbmVzLCBfaSwgX2xlbjtcbiAgICBtZXJnZSA9IGhlbHBlcnMubWVyZ2UsIGV4dGVuZCA9IGhlbHBlcnMuZXh0ZW5kO1xuICAgIG9wdGlvbnMgPSBleHRlbmQoe30sIG9wdGlvbnMpO1xuICAgIGlmIChvcHRpb25zLnNvdXJjZU1hcCkge1xuICAgICAgbWFwID0gbmV3IFNvdXJjZU1hcDtcbiAgICB9XG4gICAgZnJhZ21lbnRzID0gKGljZWRfdHJhbnNmb3JtKHBhcnNlci5wYXJzZShsZXhlci50b2tlbml6ZShjb2RlLCBvcHRpb25zKSksIG9wdGlvbnMpKS5jb21waWxlVG9GcmFnbWVudHMob3B0aW9ucyk7XG4gICAgY3VycmVudExpbmUgPSAwO1xuICAgIGlmIChvcHRpb25zLmhlYWRlcikge1xuICAgICAgY3VycmVudExpbmUgKz0gMTtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMuc2hpZnRMaW5lKSB7XG4gICAgICBjdXJyZW50TGluZSArPSAxO1xuICAgIH1cbiAgICBjdXJyZW50Q29sdW1uID0gMDtcbiAgICBqcyA9IFwiXCI7XG4gICAgZm9yIChfaSA9IDAsIF9sZW4gPSBmcmFnbWVudHMubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgIGZyYWdtZW50ID0gZnJhZ21lbnRzW19pXTtcbiAgICAgIGlmIChvcHRpb25zLnNvdXJjZU1hcCkge1xuICAgICAgICBpZiAoZnJhZ21lbnQubG9jYXRpb25EYXRhKSB7XG4gICAgICAgICAgbWFwLmFkZChbZnJhZ21lbnQubG9jYXRpb25EYXRhLmZpcnN0X2xpbmUsIGZyYWdtZW50LmxvY2F0aW9uRGF0YS5maXJzdF9jb2x1bW5dLCBbY3VycmVudExpbmUsIGN1cnJlbnRDb2x1bW5dLCB7XG4gICAgICAgICAgICBub1JlcGxhY2U6IHRydWVcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBuZXdMaW5lcyA9IGhlbHBlcnMuY291bnQoZnJhZ21lbnQuY29kZSwgXCJcXG5cIik7XG4gICAgICAgIGN1cnJlbnRMaW5lICs9IG5ld0xpbmVzO1xuICAgICAgICBpZiAobmV3TGluZXMpIHtcbiAgICAgICAgICBjdXJyZW50Q29sdW1uID0gZnJhZ21lbnQuY29kZS5sZW5ndGggLSAoZnJhZ21lbnQuY29kZS5sYXN0SW5kZXhPZihcIlxcblwiKSArIDEpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGN1cnJlbnRDb2x1bW4gKz0gZnJhZ21lbnQuY29kZS5sZW5ndGg7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGpzICs9IGZyYWdtZW50LmNvZGU7XG4gICAgfVxuICAgIGlmIChvcHRpb25zLmhlYWRlcikge1xuICAgICAgaGVhZGVyID0gXCJHZW5lcmF0ZWQgYnkgSWNlZENvZmZlZVNjcmlwdCBcIiArIHRoaXMuVkVSU0lPTjtcbiAgICAgIGpzID0gXCIvLyBcIiArIGhlYWRlciArIFwiXFxuXCIgKyBqcztcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMuc291cmNlTWFwKSB7XG4gICAgICBhbnN3ZXIgPSB7XG4gICAgICAgIGpzOiBqc1xuICAgICAgfTtcbiAgICAgIGFuc3dlci5zb3VyY2VNYXAgPSBtYXA7XG4gICAgICBhbnN3ZXIudjNTb3VyY2VNYXAgPSBtYXAuZ2VuZXJhdGUob3B0aW9ucywgY29kZSk7XG4gICAgICByZXR1cm4gYW5zd2VyO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4ganM7XG4gICAgfVxuICB9KTtcblxuICBleHBvcnRzLnRva2VucyA9IHdpdGhQcmV0dHlFcnJvcnMoZnVuY3Rpb24oY29kZSwgb3B0aW9ucykge1xuICAgIHJldHVybiBsZXhlci50b2tlbml6ZShjb2RlLCBvcHRpb25zKTtcbiAgfSk7XG5cbiAgZXhwb3J0cy5ub2RlcyA9IHdpdGhQcmV0dHlFcnJvcnMoZnVuY3Rpb24oc291cmNlLCBvcHRpb25zKSB7XG4gICAgdmFyIGFzdDtcbiAgICBpZiAodHlwZW9mIHNvdXJjZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGFzdCA9IHBhcnNlci5wYXJzZShsZXhlci50b2tlbml6ZShzb3VyY2UsIG9wdGlvbnMpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYXN0ID0gcGFyc2VyLnBhcnNlKHNvdXJjZSk7XG4gICAgfVxuICAgIGlmICghb3B0aW9ucy5ub0ljZWRUcmFuc2Zvcm0pIHtcbiAgICAgIGFzdCA9IGljZWRfdHJhbnNmb3JtKGFzdCwgb3B0aW9ucyk7XG4gICAgfVxuICAgIHJldHVybiBhc3Q7XG4gIH0pO1xuXG4gIGV4cG9ydHMucnVuID0gZnVuY3Rpb24oY29kZSwgb3B0aW9ucykge1xuICAgIHZhciBhbnN3ZXIsIGRpciwgbWFpbk1vZHVsZSwgX3JlZjtcbiAgICBpZiAob3B0aW9ucyA9PSBudWxsKSB7XG4gICAgICBvcHRpb25zID0ge307XG4gICAgfVxuICAgIG1haW5Nb2R1bGUgPSByZXF1aXJlLm1haW47XG4gICAgbWFpbk1vZHVsZS5maWxlbmFtZSA9IHByb2Nlc3MuYXJndlsxXSA9IG9wdGlvbnMuZmlsZW5hbWUgPyBmcy5yZWFscGF0aFN5bmMob3B0aW9ucy5maWxlbmFtZSkgOiAnLic7XG4gICAgbWFpbk1vZHVsZS5tb2R1bGVDYWNoZSAmJiAobWFpbk1vZHVsZS5tb2R1bGVDYWNoZSA9IHt9KTtcbiAgICBkaXIgPSBvcHRpb25zLmZpbGVuYW1lID8gcGF0aC5kaXJuYW1lKGZzLnJlYWxwYXRoU3luYyhvcHRpb25zLmZpbGVuYW1lKSkgOiBmcy5yZWFscGF0aFN5bmMoJy4nKTtcbiAgICBtYWluTW9kdWxlLnBhdGhzID0gcmVxdWlyZSgnbW9kdWxlJykuX25vZGVNb2R1bGVQYXRocyhkaXIpO1xuICAgIGlmICghaGVscGVycy5pc0NvZmZlZShtYWluTW9kdWxlLmZpbGVuYW1lKSB8fCByZXF1aXJlLmV4dGVuc2lvbnMpIHtcbiAgICAgIG9wdGlvbnMucnVudGltZSA9IFwiaW50ZXJwXCI7XG4gICAgICBhbnN3ZXIgPSBjb21waWxlKGNvZGUsIG9wdGlvbnMpO1xuICAgICAgY29kZSA9IChfcmVmID0gYW5zd2VyLmpzKSAhPSBudWxsID8gX3JlZiA6IGFuc3dlcjtcbiAgICB9XG4gICAgcmV0dXJuIG1haW5Nb2R1bGUuX2NvbXBpbGUoY29kZSwgbWFpbk1vZHVsZS5maWxlbmFtZSk7XG4gIH07XG5cbiAgZXhwb3J0c1tcImV2YWxcIl0gPSBmdW5jdGlvbihjb2RlLCBvcHRpb25zKSB7XG4gICAgdmFyIE1vZHVsZSwgU2NyaXB0LCBqcywgaywgbywgciwgc2FuZGJveCwgdiwgX2ksIF9sZW4sIF9tb2R1bGUsIF9yZWYsIF9yZWYxLCBfcmVxdWlyZTtcbiAgICBpZiAob3B0aW9ucyA9PSBudWxsKSB7XG4gICAgICBvcHRpb25zID0ge307XG4gICAgfVxuICAgIGlmICghKGNvZGUgPSBjb2RlLnRyaW0oKSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgU2NyaXB0ID0gdm0uU2NyaXB0O1xuICAgIGlmIChTY3JpcHQpIHtcbiAgICAgIGlmIChvcHRpb25zLnNhbmRib3ggIT0gbnVsbCkge1xuICAgICAgICBpZiAob3B0aW9ucy5zYW5kYm94IGluc3RhbmNlb2YgU2NyaXB0LmNyZWF0ZUNvbnRleHQoKS5jb25zdHJ1Y3Rvcikge1xuICAgICAgICAgIHNhbmRib3ggPSBvcHRpb25zLnNhbmRib3g7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2FuZGJveCA9IFNjcmlwdC5jcmVhdGVDb250ZXh0KCk7XG4gICAgICAgICAgX3JlZiA9IG9wdGlvbnMuc2FuZGJveDtcbiAgICAgICAgICBmb3IgKGsgaW4gX3JlZikge1xuICAgICAgICAgICAgaWYgKCFfX2hhc1Byb3AuY2FsbChfcmVmLCBrKSkgY29udGludWU7XG4gICAgICAgICAgICB2ID0gX3JlZltrXTtcbiAgICAgICAgICAgIHNhbmRib3hba10gPSB2O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzYW5kYm94Lmdsb2JhbCA9IHNhbmRib3gucm9vdCA9IHNhbmRib3guR0xPQkFMID0gc2FuZGJveDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNhbmRib3ggPSBnbG9iYWw7XG4gICAgICB9XG4gICAgICBzYW5kYm94Ll9fZmlsZW5hbWUgPSBvcHRpb25zLmZpbGVuYW1lIHx8ICdldmFsJztcbiAgICAgIHNhbmRib3guX19kaXJuYW1lID0gcGF0aC5kaXJuYW1lKHNhbmRib3guX19maWxlbmFtZSk7XG4gICAgICBpZiAoIShzYW5kYm94ICE9PSBnbG9iYWwgfHwgc2FuZGJveC5tb2R1bGUgfHwgc2FuZGJveC5yZXF1aXJlKSkge1xuICAgICAgICBNb2R1bGUgPSByZXF1aXJlKCdtb2R1bGUnKTtcbiAgICAgICAgc2FuZGJveC5tb2R1bGUgPSBfbW9kdWxlID0gbmV3IE1vZHVsZShvcHRpb25zLm1vZHVsZW5hbWUgfHwgJ2V2YWwnKTtcbiAgICAgICAgc2FuZGJveC5yZXF1aXJlID0gX3JlcXVpcmUgPSBmdW5jdGlvbihwYXRoKSB7XG4gICAgICAgICAgcmV0dXJuIE1vZHVsZS5fbG9hZChwYXRoLCBfbW9kdWxlLCB0cnVlKTtcbiAgICAgICAgfTtcbiAgICAgICAgX21vZHVsZS5maWxlbmFtZSA9IHNhbmRib3guX19maWxlbmFtZTtcbiAgICAgICAgX3JlZjEgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhyZXF1aXJlKTtcbiAgICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmMS5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICAgIHIgPSBfcmVmMVtfaV07XG4gICAgICAgICAgaWYgKHIgIT09ICdwYXRocycpIHtcbiAgICAgICAgICAgIF9yZXF1aXJlW3JdID0gcmVxdWlyZVtyXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgX3JlcXVpcmUucGF0aHMgPSBfbW9kdWxlLnBhdGhzID0gTW9kdWxlLl9ub2RlTW9kdWxlUGF0aHMocHJvY2Vzcy5jd2QoKSk7XG4gICAgICAgIF9yZXF1aXJlLnJlc29sdmUgPSBmdW5jdGlvbihyZXF1ZXN0KSB7XG4gICAgICAgICAgcmV0dXJuIE1vZHVsZS5fcmVzb2x2ZUZpbGVuYW1lKHJlcXVlc3QsIF9tb2R1bGUpO1xuICAgICAgICB9O1xuICAgICAgfVxuICAgIH1cbiAgICBvID0ge307XG4gICAgZm9yIChrIGluIG9wdGlvbnMpIHtcbiAgICAgIGlmICghX19oYXNQcm9wLmNhbGwob3B0aW9ucywgaykpIGNvbnRpbnVlO1xuICAgICAgdiA9IG9wdGlvbnNba107XG4gICAgICBvW2tdID0gdjtcbiAgICB9XG4gICAgby5iYXJlID0gdHJ1ZTtcbiAgICBqcyA9IGNvbXBpbGUoY29kZSwgbyk7XG4gICAgaWYgKHNhbmRib3ggPT09IGdsb2JhbCkge1xuICAgICAgcmV0dXJuIHZtLnJ1bkluVGhpc0NvbnRleHQoanMpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdm0ucnVuSW5Db250ZXh0KGpzLCBzYW5kYm94KTtcbiAgICB9XG4gIH07XG5cbiAgZXhwb3J0cy5yZWdpc3RlciA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiByZXF1aXJlKCcuL3JlZ2lzdGVyJyk7XG4gIH07XG5cbiAgaWYgKHJlcXVpcmUuZXh0ZW5zaW9ucykge1xuICAgIF9yZWYgPSB0aGlzLkZJTEVfRVhURU5TSU9OUztcbiAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgIGV4dCA9IF9yZWZbX2ldO1xuICAgICAgaWYgKChfYmFzZSA9IHJlcXVpcmUuZXh0ZW5zaW9ucylbZXh0XSA9PSBudWxsKSB7XG4gICAgICAgIF9iYXNlW2V4dF0gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVc2UgQ29mZmVlU2NyaXB0LnJlZ2lzdGVyKCkgb3IgcmVxdWlyZSB0aGUgY29mZmVlLXNjcmlwdC9yZWdpc3RlciBtb2R1bGUgdG8gcmVxdWlyZSBcIiArIGV4dCArIFwiIGZpbGVzLlwiKTtcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBleHBvcnRzLl9jb21waWxlRmlsZSA9IGZ1bmN0aW9uKGZpbGVuYW1lLCBzb3VyY2VNYXAsIG9wdHNfcGFzc2VkKSB7XG4gICAgdmFyIGFuc3dlciwgZXJyLCBrLCBvcHRzLCByYXcsIHN0cmlwcGVkLCB2O1xuICAgIGlmIChzb3VyY2VNYXAgPT0gbnVsbCkge1xuICAgICAgc291cmNlTWFwID0gZmFsc2U7XG4gICAgfVxuICAgIGlmIChvcHRzX3Bhc3NlZCA9PSBudWxsKSB7XG4gICAgICBvcHRzX3Bhc3NlZCA9IHt9O1xuICAgIH1cbiAgICByYXcgPSBmcy5yZWFkRmlsZVN5bmMoZmlsZW5hbWUsICd1dGY4Jyk7XG4gICAgc3RyaXBwZWQgPSByYXcuY2hhckNvZGVBdCgwKSA9PT0gMHhGRUZGID8gcmF3LnN1YnN0cmluZygxKSA6IHJhdztcbiAgICBvcHRzID0ge1xuICAgICAgZmlsZW5hbWU6IGZpbGVuYW1lLFxuICAgICAgc291cmNlTWFwOiBzb3VyY2VNYXAsXG4gICAgICBsaXRlcmF0ZTogaGVscGVycy5pc0xpdGVyYXRlKGZpbGVuYW1lKVxuICAgIH07XG4gICAgZm9yIChrIGluIG9wdHNfcGFzc2VkKSB7XG4gICAgICB2ID0gb3B0c19wYXNzZWRba107XG4gICAgICBvcHRzW2tdID0gdjtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgIGFuc3dlciA9IGNvbXBpbGUoc3RyaXBwZWQsIG9wdHMpO1xuICAgIH0gY2F0Y2ggKF9lcnJvcikge1xuICAgICAgZXJyID0gX2Vycm9yO1xuICAgICAgdGhyb3cgaGVscGVycy51cGRhdGVTeW50YXhFcnJvcihlcnIsIHN0cmlwcGVkLCBmaWxlbmFtZSk7XG4gICAgfVxuICAgIHJldHVybiBhbnN3ZXI7XG4gIH07XG5cbiAgbGV4ZXIgPSBuZXcgTGV4ZXI7XG5cbiAgcGFyc2VyLmxleGVyID0ge1xuICAgIGxleDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgdGFnLCB0b2tlbjtcbiAgICAgIHRva2VuID0gdGhpcy50b2tlbnNbdGhpcy5wb3MrK107XG4gICAgICBpZiAodG9rZW4pIHtcbiAgICAgICAgdGFnID0gdG9rZW5bMF0sIHRoaXMueXl0ZXh0ID0gdG9rZW5bMV0sIHRoaXMueXlsbG9jID0gdG9rZW5bMl07XG4gICAgICAgIHRoaXMuZXJyb3JUb2tlbiA9IHRva2VuLm9yaWdpbiB8fCB0b2tlbjtcbiAgICAgICAgdGhpcy55eWxpbmVubyA9IHRoaXMueXlsbG9jLmZpcnN0X2xpbmU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0YWcgPSAnJztcbiAgICAgIH1cbiAgICAgIHJldHVybiB0YWc7XG4gICAgfSxcbiAgICBzZXRJbnB1dDogZnVuY3Rpb24odG9rZW5zKSB7XG4gICAgICB0aGlzLnRva2VucyA9IHRva2VucztcbiAgICAgIHJldHVybiB0aGlzLnBvcyA9IDA7XG4gICAgfSxcbiAgICB1cGNvbWluZ0lucHV0OiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBcIlwiO1xuICAgIH1cbiAgfTtcblxuICBwYXJzZXIueXkgPSByZXF1aXJlKCcuL25vZGVzJyk7XG5cbiAgZXhwb3J0cy5pY2VkID0gaWNlZF9ydW50aW1lO1xuXG4gIHBhcnNlci55eS5wYXJzZUVycm9yID0gZnVuY3Rpb24obWVzc2FnZSwgX2FyZykge1xuICAgIHZhciBlcnJvckxvYywgZXJyb3JUYWcsIGVycm9yVGV4dCwgZXJyb3JUb2tlbiwgdG9rZW4sIHRva2VucywgX3JlZjE7XG4gICAgdG9rZW4gPSBfYXJnLnRva2VuO1xuICAgIF9yZWYxID0gcGFyc2VyLmxleGVyLCBlcnJvclRva2VuID0gX3JlZjEuZXJyb3JUb2tlbiwgdG9rZW5zID0gX3JlZjEudG9rZW5zO1xuICAgIGVycm9yVGFnID0gZXJyb3JUb2tlblswXSwgZXJyb3JUZXh0ID0gZXJyb3JUb2tlblsxXSwgZXJyb3JMb2MgPSBlcnJvclRva2VuWzJdO1xuICAgIGVycm9yVGV4dCA9IGVycm9yVG9rZW4gPT09IHRva2Vuc1t0b2tlbnMubGVuZ3RoIC0gMV0gPyAnZW5kIG9mIGlucHV0JyA6IGVycm9yVGFnID09PSAnSU5ERU5UJyB8fCBlcnJvclRhZyA9PT0gJ09VVERFTlQnID8gJ2luZGVudGF0aW9uJyA6IGhlbHBlcnMubmFtZVdoaXRlc3BhY2VDaGFyYWN0ZXIoZXJyb3JUZXh0KTtcbiAgICByZXR1cm4gaGVscGVycy50aHJvd1N5bnRheEVycm9yKFwidW5leHBlY3RlZCBcIiArIGVycm9yVGV4dCwgZXJyb3JMb2MpO1xuICB9O1xuXG4gIGZvcm1hdFNvdXJjZVBvc2l0aW9uID0gZnVuY3Rpb24oZnJhbWUsIGdldFNvdXJjZU1hcHBpbmcpIHtcbiAgICB2YXIgYXMsIGNvbHVtbiwgZmlsZUxvY2F0aW9uLCBmaWxlTmFtZSwgZnVuY3Rpb25OYW1lLCBpc0NvbnN0cnVjdG9yLCBpc01ldGhvZENhbGwsIGxpbmUsIG1ldGhvZE5hbWUsIHNvdXJjZSwgdHAsIHR5cGVOYW1lO1xuICAgIGZpbGVOYW1lID0gdm9pZCAwO1xuICAgIGZpbGVMb2NhdGlvbiA9ICcnO1xuICAgIGlmIChmcmFtZS5pc05hdGl2ZSgpKSB7XG4gICAgICBmaWxlTG9jYXRpb24gPSBcIm5hdGl2ZVwiO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoZnJhbWUuaXNFdmFsKCkpIHtcbiAgICAgICAgZmlsZU5hbWUgPSBmcmFtZS5nZXRTY3JpcHROYW1lT3JTb3VyY2VVUkwoKTtcbiAgICAgICAgaWYgKCFmaWxlTmFtZSkge1xuICAgICAgICAgIGZpbGVMb2NhdGlvbiA9IFwiXCIgKyAoZnJhbWUuZ2V0RXZhbE9yaWdpbigpKSArIFwiLCBcIjtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZmlsZU5hbWUgPSBmcmFtZS5nZXRGaWxlTmFtZSgpO1xuICAgICAgfVxuICAgICAgZmlsZU5hbWUgfHwgKGZpbGVOYW1lID0gXCI8YW5vbnltb3VzPlwiKTtcbiAgICAgIGxpbmUgPSBmcmFtZS5nZXRMaW5lTnVtYmVyKCk7XG4gICAgICBjb2x1bW4gPSBmcmFtZS5nZXRDb2x1bW5OdW1iZXIoKTtcbiAgICAgIHNvdXJjZSA9IGdldFNvdXJjZU1hcHBpbmcoZmlsZU5hbWUsIGxpbmUsIGNvbHVtbik7XG4gICAgICBmaWxlTG9jYXRpb24gPSBzb3VyY2UgPyBcIlwiICsgZmlsZU5hbWUgKyBcIjpcIiArIHNvdXJjZVswXSArIFwiOlwiICsgc291cmNlWzFdIDogXCJcIiArIGZpbGVOYW1lICsgXCI6XCIgKyBsaW5lICsgXCI6XCIgKyBjb2x1bW47XG4gICAgfVxuICAgIGZ1bmN0aW9uTmFtZSA9IGZyYW1lLmdldEZ1bmN0aW9uTmFtZSgpO1xuICAgIGlzQ29uc3RydWN0b3IgPSBmcmFtZS5pc0NvbnN0cnVjdG9yKCk7XG4gICAgaXNNZXRob2RDYWxsID0gIShmcmFtZS5pc1RvcGxldmVsKCkgfHwgaXNDb25zdHJ1Y3Rvcik7XG4gICAgaWYgKGlzTWV0aG9kQ2FsbCkge1xuICAgICAgbWV0aG9kTmFtZSA9IGZyYW1lLmdldE1ldGhvZE5hbWUoKTtcbiAgICAgIHR5cGVOYW1lID0gZnJhbWUuZ2V0VHlwZU5hbWUoKTtcbiAgICAgIGlmIChmdW5jdGlvbk5hbWUpIHtcbiAgICAgICAgdHAgPSBhcyA9ICcnO1xuICAgICAgICBpZiAodHlwZU5hbWUgJiYgZnVuY3Rpb25OYW1lLmluZGV4T2YodHlwZU5hbWUpKSB7XG4gICAgICAgICAgdHAgPSBcIlwiICsgdHlwZU5hbWUgKyBcIi5cIjtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWV0aG9kTmFtZSAmJiBmdW5jdGlvbk5hbWUuaW5kZXhPZihcIi5cIiArIG1ldGhvZE5hbWUpICE9PSBmdW5jdGlvbk5hbWUubGVuZ3RoIC0gbWV0aG9kTmFtZS5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgYXMgPSBcIiBbYXMgXCIgKyBtZXRob2ROYW1lICsgXCJdXCI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFwiXCIgKyB0cCArIGZ1bmN0aW9uTmFtZSArIGFzICsgXCIgKFwiICsgZmlsZUxvY2F0aW9uICsgXCIpXCI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gXCJcIiArIHR5cGVOYW1lICsgXCIuXCIgKyAobWV0aG9kTmFtZSB8fCAnPGFub255bW91cz4nKSArIFwiIChcIiArIGZpbGVMb2NhdGlvbiArIFwiKVwiO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoaXNDb25zdHJ1Y3Rvcikge1xuICAgICAgcmV0dXJuIFwibmV3IFwiICsgKGZ1bmN0aW9uTmFtZSB8fCAnPGFub255bW91cz4nKSArIFwiIChcIiArIGZpbGVMb2NhdGlvbiArIFwiKVwiO1xuICAgIH0gZWxzZSBpZiAoZnVuY3Rpb25OYW1lKSB7XG4gICAgICByZXR1cm4gXCJcIiArIGZ1bmN0aW9uTmFtZSArIFwiIChcIiArIGZpbGVMb2NhdGlvbiArIFwiKVwiO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmlsZUxvY2F0aW9uO1xuICAgIH1cbiAgfTtcblxuICBzb3VyY2VNYXBzID0ge307XG5cbiAgZ2V0U291cmNlTWFwID0gZnVuY3Rpb24oZmlsZW5hbWUpIHtcbiAgICB2YXIgYW5zd2VyLCBfcmVmMTtcbiAgICBpZiAoc291cmNlTWFwc1tmaWxlbmFtZV0pIHtcbiAgICAgIHJldHVybiBzb3VyY2VNYXBzW2ZpbGVuYW1lXTtcbiAgICB9XG4gICAgaWYgKF9yZWYxID0gcGF0aCAhPSBudWxsID8gcGF0aC5leHRuYW1lKGZpbGVuYW1lKSA6IHZvaWQgMCwgX19pbmRleE9mLmNhbGwoZXhwb3J0cy5GSUxFX0VYVEVOU0lPTlMsIF9yZWYxKSA8IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgYW5zd2VyID0gZXhwb3J0cy5fY29tcGlsZUZpbGUoZmlsZW5hbWUsIHRydWUpO1xuICAgIHJldHVybiBzb3VyY2VNYXBzW2ZpbGVuYW1lXSA9IGFuc3dlci5zb3VyY2VNYXA7XG4gIH07XG5cbiAgRXJyb3IucHJlcGFyZVN0YWNrVHJhY2UgPSBmdW5jdGlvbihlcnIsIHN0YWNrKSB7XG4gICAgdmFyIGZyYW1lLCBmcmFtZXMsIGdldFNvdXJjZU1hcHBpbmc7XG4gICAgZ2V0U291cmNlTWFwcGluZyA9IGZ1bmN0aW9uKGZpbGVuYW1lLCBsaW5lLCBjb2x1bW4pIHtcbiAgICAgIHZhciBhbnN3ZXIsIHNvdXJjZU1hcDtcbiAgICAgIHNvdXJjZU1hcCA9IGdldFNvdXJjZU1hcChmaWxlbmFtZSk7XG4gICAgICBpZiAoc291cmNlTWFwKSB7XG4gICAgICAgIGFuc3dlciA9IHNvdXJjZU1hcC5zb3VyY2VMb2NhdGlvbihbbGluZSAtIDEsIGNvbHVtbiAtIDFdKTtcbiAgICAgIH1cbiAgICAgIGlmIChhbnN3ZXIpIHtcbiAgICAgICAgcmV0dXJuIFthbnN3ZXJbMF0gKyAxLCBhbnN3ZXJbMV0gKyAxXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgIH07XG4gICAgZnJhbWVzID0gKGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIF9qLCBfbGVuMSwgX3Jlc3VsdHM7XG4gICAgICBfcmVzdWx0cyA9IFtdO1xuICAgICAgZm9yIChfaiA9IDAsIF9sZW4xID0gc3RhY2subGVuZ3RoOyBfaiA8IF9sZW4xOyBfaisrKSB7XG4gICAgICAgIGZyYW1lID0gc3RhY2tbX2pdO1xuICAgICAgICBpZiAoZnJhbWUuZ2V0RnVuY3Rpb24oKSA9PT0gZXhwb3J0cy5ydW4pIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBfcmVzdWx0cy5wdXNoKFwiICBhdCBcIiArIChmb3JtYXRTb3VyY2VQb3NpdGlvbihmcmFtZSwgZ2V0U291cmNlTWFwcGluZykpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBfcmVzdWx0cztcbiAgICB9KSgpO1xuICAgIHJldHVybiBcIlwiICsgKGVyci50b1N0cmluZygpKSArIFwiXFxuXCIgKyAoZnJhbWVzLmpvaW4oJ1xcbicpKSArIFwiXFxuXCI7XG4gIH07XG5cbn0pLmNhbGwodGhpcyk7XG4iLCIvLyBHZW5lcmF0ZWQgYnkgSWNlZENvZmZlZVNjcmlwdCAxMDguMC4xMVxuKGZ1bmN0aW9uKCkge1xuICB2YXIgYnVpbGRMb2NhdGlvbkRhdGEsIGV4dGVuZCwgZmxhdHRlbiwgbGFzdCwgcmVwZWF0LCBzeW50YXhFcnJvclRvU3RyaW5nLCBfcmVmO1xuXG4gIGV4cG9ydHMuc3RhcnRzID0gZnVuY3Rpb24oc3RyaW5nLCBsaXRlcmFsLCBzdGFydCkge1xuICAgIHJldHVybiBsaXRlcmFsID09PSBzdHJpbmcuc3Vic3RyKHN0YXJ0LCBsaXRlcmFsLmxlbmd0aCk7XG4gIH07XG5cbiAgZXhwb3J0cy5lbmRzID0gZnVuY3Rpb24oc3RyaW5nLCBsaXRlcmFsLCBiYWNrKSB7XG4gICAgdmFyIGxlbjtcbiAgICBsZW4gPSBsaXRlcmFsLmxlbmd0aDtcbiAgICByZXR1cm4gbGl0ZXJhbCA9PT0gc3RyaW5nLnN1YnN0cihzdHJpbmcubGVuZ3RoIC0gbGVuIC0gKGJhY2sgfHwgMCksIGxlbik7XG4gIH07XG5cbiAgZXhwb3J0cy5yZXBlYXQgPSByZXBlYXQgPSBmdW5jdGlvbihzdHIsIG4pIHtcbiAgICB2YXIgcmVzO1xuICAgIHJlcyA9ICcnO1xuICAgIHdoaWxlIChuID4gMCkge1xuICAgICAgaWYgKG4gJiAxKSB7XG4gICAgICAgIHJlcyArPSBzdHI7XG4gICAgICB9XG4gICAgICBuID4+Pj0gMTtcbiAgICAgIHN0ciArPSBzdHI7XG4gICAgfVxuICAgIHJldHVybiByZXM7XG4gIH07XG5cbiAgZXhwb3J0cy5jb21wYWN0ID0gZnVuY3Rpb24oYXJyYXkpIHtcbiAgICB2YXIgaXRlbSwgX2ksIF9sZW4sIF9yZXN1bHRzO1xuICAgIF9yZXN1bHRzID0gW107XG4gICAgZm9yIChfaSA9IDAsIF9sZW4gPSBhcnJheS5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgaXRlbSA9IGFycmF5W19pXTtcbiAgICAgIGlmIChpdGVtKSB7XG4gICAgICAgIF9yZXN1bHRzLnB1c2goaXRlbSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBfcmVzdWx0cztcbiAgfTtcblxuICBleHBvcnRzLmNvdW50ID0gZnVuY3Rpb24oc3RyaW5nLCBzdWJzdHIpIHtcbiAgICB2YXIgbnVtLCBwb3M7XG4gICAgbnVtID0gcG9zID0gMDtcbiAgICBpZiAoIXN1YnN0ci5sZW5ndGgpIHtcbiAgICAgIHJldHVybiAxIC8gMDtcbiAgICB9XG4gICAgd2hpbGUgKHBvcyA9IDEgKyBzdHJpbmcuaW5kZXhPZihzdWJzdHIsIHBvcykpIHtcbiAgICAgIG51bSsrO1xuICAgIH1cbiAgICByZXR1cm4gbnVtO1xuICB9O1xuXG4gIGV4cG9ydHMubWVyZ2UgPSBmdW5jdGlvbihvcHRpb25zLCBvdmVycmlkZXMpIHtcbiAgICByZXR1cm4gZXh0ZW5kKGV4dGVuZCh7fSwgb3B0aW9ucyksIG92ZXJyaWRlcyk7XG4gIH07XG5cbiAgZXh0ZW5kID0gZXhwb3J0cy5leHRlbmQgPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnRpZXMpIHtcbiAgICB2YXIga2V5LCB2YWw7XG4gICAgZm9yIChrZXkgaW4gcHJvcGVydGllcykge1xuICAgICAgdmFsID0gcHJvcGVydGllc1trZXldO1xuICAgICAgb2JqZWN0W2tleV0gPSB2YWw7XG4gICAgfVxuICAgIHJldHVybiBvYmplY3Q7XG4gIH07XG5cbiAgZXhwb3J0cy5mbGF0dGVuID0gZmxhdHRlbiA9IGZ1bmN0aW9uKGFycmF5KSB7XG4gICAgdmFyIGVsZW1lbnQsIGZsYXR0ZW5lZCwgX2ksIF9sZW47XG4gICAgZmxhdHRlbmVkID0gW107XG4gICAgZm9yIChfaSA9IDAsIF9sZW4gPSBhcnJheS5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgZWxlbWVudCA9IGFycmF5W19pXTtcbiAgICAgIGlmIChlbGVtZW50IGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgZmxhdHRlbmVkID0gZmxhdHRlbmVkLmNvbmNhdChmbGF0dGVuKGVsZW1lbnQpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZsYXR0ZW5lZC5wdXNoKGVsZW1lbnQpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmxhdHRlbmVkO1xuICB9O1xuXG4gIGV4cG9ydHMuZGVsID0gZnVuY3Rpb24ob2JqLCBrZXkpIHtcbiAgICB2YXIgdmFsO1xuICAgIHZhbCA9IG9ialtrZXldO1xuICAgIGRlbGV0ZSBvYmpba2V5XTtcbiAgICByZXR1cm4gdmFsO1xuICB9O1xuXG4gIGV4cG9ydHMubGFzdCA9IGxhc3QgPSBmdW5jdGlvbihhcnJheSwgYmFjaykge1xuICAgIHJldHVybiBhcnJheVthcnJheS5sZW5ndGggLSAoYmFjayB8fCAwKSAtIDFdO1xuICB9O1xuXG4gIGV4cG9ydHMuc29tZSA9IChfcmVmID0gQXJyYXkucHJvdG90eXBlLnNvbWUpICE9IG51bGwgPyBfcmVmIDogZnVuY3Rpb24oZm4pIHtcbiAgICB2YXIgZSwgX2ksIF9sZW47XG4gICAgZm9yIChfaSA9IDAsIF9sZW4gPSB0aGlzLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICBlID0gdGhpc1tfaV07XG4gICAgICBpZiAoZm4oZSkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICBleHBvcnRzLmludmVydExpdGVyYXRlID0gZnVuY3Rpb24oY29kZSkge1xuICAgIHZhciBsaW5lLCBsaW5lcywgbWF5YmVfY29kZTtcbiAgICBtYXliZV9jb2RlID0gdHJ1ZTtcbiAgICBsaW5lcyA9IChmdW5jdGlvbigpIHtcbiAgICAgIHZhciBfaSwgX2xlbiwgX3JlZjEsIF9yZXN1bHRzO1xuICAgICAgX3JlZjEgPSBjb2RlLnNwbGl0KCdcXG4nKTtcbiAgICAgIF9yZXN1bHRzID0gW107XG4gICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYxLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICAgIGxpbmUgPSBfcmVmMVtfaV07XG4gICAgICAgIGlmIChtYXliZV9jb2RlICYmIC9eKFsgXXs0fXxbIF17MCwzfVxcdCkvLnRlc3QobGluZSkpIHtcbiAgICAgICAgICBfcmVzdWx0cy5wdXNoKGxpbmUpO1xuICAgICAgICB9IGVsc2UgaWYgKG1heWJlX2NvZGUgPSAvXlxccyokLy50ZXN0KGxpbmUpKSB7XG4gICAgICAgICAgX3Jlc3VsdHMucHVzaChsaW5lKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBfcmVzdWx0cy5wdXNoKCcjICcgKyBsaW5lKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIF9yZXN1bHRzO1xuICAgIH0pKCk7XG4gICAgcmV0dXJuIGxpbmVzLmpvaW4oJ1xcbicpO1xuICB9O1xuXG4gIGJ1aWxkTG9jYXRpb25EYXRhID0gZnVuY3Rpb24oZmlyc3QsIGxhc3QpIHtcbiAgICBpZiAoIWxhc3QpIHtcbiAgICAgIHJldHVybiBmaXJzdDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZmlyc3RfbGluZTogZmlyc3QuZmlyc3RfbGluZSxcbiAgICAgICAgZmlyc3RfY29sdW1uOiBmaXJzdC5maXJzdF9jb2x1bW4sXG4gICAgICAgIGxhc3RfbGluZTogbGFzdC5sYXN0X2xpbmUsXG4gICAgICAgIGxhc3RfY29sdW1uOiBsYXN0Lmxhc3RfY29sdW1uXG4gICAgICB9O1xuICAgIH1cbiAgfTtcblxuICBleHBvcnRzLmFkZExvY2F0aW9uRGF0YUZuID0gZnVuY3Rpb24oZmlyc3QsIGxhc3QpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24ob2JqKSB7XG4gICAgICBpZiAoKCh0eXBlb2Ygb2JqKSA9PT0gJ29iamVjdCcpICYmICghIW9ialsndXBkYXRlTG9jYXRpb25EYXRhSWZNaXNzaW5nJ10pKSB7XG4gICAgICAgIG9iai51cGRhdGVMb2NhdGlvbkRhdGFJZk1pc3NpbmcoYnVpbGRMb2NhdGlvbkRhdGEoZmlyc3QsIGxhc3QpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBvYmo7XG4gICAgfTtcbiAgfTtcblxuICBleHBvcnRzLmxvY2F0aW9uRGF0YVRvU3RyaW5nID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgdmFyIGxvY2F0aW9uRGF0YTtcbiAgICBpZiAoKFwiMlwiIGluIG9iaikgJiYgKFwiZmlyc3RfbGluZVwiIGluIG9ialsyXSkpIHtcbiAgICAgIGxvY2F0aW9uRGF0YSA9IG9ialsyXTtcbiAgICB9IGVsc2UgaWYgKFwiZmlyc3RfbGluZVwiIGluIG9iaikge1xuICAgICAgbG9jYXRpb25EYXRhID0gb2JqO1xuICAgIH1cbiAgICBpZiAobG9jYXRpb25EYXRhKSB7XG4gICAgICByZXR1cm4gKFwiXCIgKyAobG9jYXRpb25EYXRhLmZpcnN0X2xpbmUgKyAxKSArIFwiOlwiICsgKGxvY2F0aW9uRGF0YS5maXJzdF9jb2x1bW4gKyAxKSArIFwiLVwiKSArIChcIlwiICsgKGxvY2F0aW9uRGF0YS5sYXN0X2xpbmUgKyAxKSArIFwiOlwiICsgKGxvY2F0aW9uRGF0YS5sYXN0X2NvbHVtbiArIDEpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIFwiTm8gbG9jYXRpb24gZGF0YVwiO1xuICAgIH1cbiAgfTtcblxuICBleHBvcnRzLmJhc2VGaWxlTmFtZSA9IGZ1bmN0aW9uKGZpbGUsIHN0cmlwRXh0LCB1c2VXaW5QYXRoU2VwKSB7XG4gICAgdmFyIHBhcnRzLCBwYXRoU2VwO1xuICAgIGlmIChzdHJpcEV4dCA9PSBudWxsKSB7XG4gICAgICBzdHJpcEV4dCA9IGZhbHNlO1xuICAgIH1cbiAgICBpZiAodXNlV2luUGF0aFNlcCA9PSBudWxsKSB7XG4gICAgICB1c2VXaW5QYXRoU2VwID0gZmFsc2U7XG4gICAgfVxuICAgIHBhdGhTZXAgPSB1c2VXaW5QYXRoU2VwID8gL1xcXFx8XFwvLyA6IC9cXC8vO1xuICAgIHBhcnRzID0gZmlsZS5zcGxpdChwYXRoU2VwKTtcbiAgICBmaWxlID0gcGFydHNbcGFydHMubGVuZ3RoIC0gMV07XG4gICAgaWYgKCEoc3RyaXBFeHQgJiYgZmlsZS5pbmRleE9mKCcuJykgPj0gMCkpIHtcbiAgICAgIHJldHVybiBmaWxlO1xuICAgIH1cbiAgICBwYXJ0cyA9IGZpbGUuc3BsaXQoJy4nKTtcbiAgICBwYXJ0cy5wb3AoKTtcbiAgICBpZiAocGFydHNbcGFydHMubGVuZ3RoIC0gMV0gPT09ICdjb2ZmZWUnICYmIHBhcnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgIHBhcnRzLnBvcCgpO1xuICAgIH1cbiAgICByZXR1cm4gcGFydHMuam9pbignLicpO1xuICB9O1xuXG4gIGV4cG9ydHMuaXNDb2ZmZWUgPSBmdW5jdGlvbihmaWxlKSB7XG4gICAgcmV0dXJuIC9cXC4oKGxpdCk/Y29mZmVlfGNvZmZlZVxcLm1kfGljZWR8bGl0aWNlZHxpY2VkXFwubWQpJC8udGVzdChmaWxlKTtcbiAgfTtcblxuICBleHBvcnRzLmlzTGl0ZXJhdGUgPSBmdW5jdGlvbihmaWxlKSB7XG4gICAgcmV0dXJuIC9cXC4obGl0Y29mZmVlfGNvZmZlZVxcLm1kfGxpdGljZWR8aWNlZFxcLm1kKSQvLnRlc3QoZmlsZSk7XG4gIH07XG5cbiAgZXhwb3J0cy50aHJvd1N5bnRheEVycm9yID0gZnVuY3Rpb24obWVzc2FnZSwgbG9jYXRpb24pIHtcbiAgICB2YXIgZXJyb3I7XG4gICAgZXJyb3IgPSBuZXcgU3ludGF4RXJyb3IobWVzc2FnZSk7XG4gICAgZXJyb3IubG9jYXRpb24gPSBsb2NhdGlvbjtcbiAgICBlcnJvci50b1N0cmluZyA9IHN5bnRheEVycm9yVG9TdHJpbmc7XG4gICAgZXJyb3Iuc3RhY2sgPSBlcnJvci50b1N0cmluZygpO1xuICAgIHRocm93IGVycm9yO1xuICB9O1xuXG4gIGV4cG9ydHMudXBkYXRlU3ludGF4RXJyb3IgPSBmdW5jdGlvbihlcnJvciwgY29kZSwgZmlsZW5hbWUpIHtcbiAgICBpZiAoZXJyb3IudG9TdHJpbmcgPT09IHN5bnRheEVycm9yVG9TdHJpbmcpIHtcbiAgICAgIGVycm9yLmNvZGUgfHwgKGVycm9yLmNvZGUgPSBjb2RlKTtcbiAgICAgIGVycm9yLmZpbGVuYW1lIHx8IChlcnJvci5maWxlbmFtZSA9IGZpbGVuYW1lKTtcbiAgICAgIGVycm9yLnN0YWNrID0gZXJyb3IudG9TdHJpbmcoKTtcbiAgICB9XG4gICAgcmV0dXJuIGVycm9yO1xuICB9O1xuXG4gIHN5bnRheEVycm9yVG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgY29kZUxpbmUsIGNvbG9yaXplLCBjb2xvcnNFbmFibGVkLCBlbmQsIGZpbGVuYW1lLCBmaXJzdF9jb2x1bW4sIGZpcnN0X2xpbmUsIGxhc3RfY29sdW1uLCBsYXN0X2xpbmUsIG1hcmtlciwgc3RhcnQsIF9yZWYxLCBfcmVmMjtcbiAgICBpZiAoISh0aGlzLmNvZGUgJiYgdGhpcy5sb2NhdGlvbikpIHtcbiAgICAgIHJldHVybiBFcnJvci5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0aGlzKTtcbiAgICB9XG4gICAgX3JlZjEgPSB0aGlzLmxvY2F0aW9uLCBmaXJzdF9saW5lID0gX3JlZjEuZmlyc3RfbGluZSwgZmlyc3RfY29sdW1uID0gX3JlZjEuZmlyc3RfY29sdW1uLCBsYXN0X2xpbmUgPSBfcmVmMS5sYXN0X2xpbmUsIGxhc3RfY29sdW1uID0gX3JlZjEubGFzdF9jb2x1bW47XG4gICAgaWYgKGxhc3RfbGluZSA9PSBudWxsKSB7XG4gICAgICBsYXN0X2xpbmUgPSBmaXJzdF9saW5lO1xuICAgIH1cbiAgICBpZiAobGFzdF9jb2x1bW4gPT0gbnVsbCkge1xuICAgICAgbGFzdF9jb2x1bW4gPSBmaXJzdF9jb2x1bW47XG4gICAgfVxuICAgIGZpbGVuYW1lID0gdGhpcy5maWxlbmFtZSB8fCAnW3N0ZGluXSc7XG4gICAgY29kZUxpbmUgPSB0aGlzLmNvZGUuc3BsaXQoJ1xcbicpW2ZpcnN0X2xpbmVdO1xuICAgIHN0YXJ0ID0gZmlyc3RfY29sdW1uO1xuICAgIGVuZCA9IGZpcnN0X2xpbmUgPT09IGxhc3RfbGluZSA/IGxhc3RfY29sdW1uICsgMSA6IGNvZGVMaW5lLmxlbmd0aDtcbiAgICBtYXJrZXIgPSBjb2RlTGluZS5zbGljZSgwLCBzdGFydCkucmVwbGFjZSgvW15cXHNdL2csICcgJykgKyByZXBlYXQoJ14nLCBlbmQgLSBzdGFydCk7XG4gICAgaWYgKCh0eXBlb2YgcHJvY2VzcyAhPT0gXCJ1bmRlZmluZWRcIiAmJiBwcm9jZXNzICE9PSBudWxsID8gcHJvY2Vzcy5zdGRvdXQgOiB2b2lkIDApICE9IG51bGwpIHtcbiAgICAgIGNvbG9yc0VuYWJsZWQgPSBwcm9jZXNzLnN0ZG91dC5pc1RUWSAmJiAhcHJvY2Vzcy5lbnYuTk9ERV9ESVNBQkxFX0NPTE9SUztcbiAgICB9XG4gICAgaWYgKChfcmVmMiA9IHRoaXMuY29sb3JmdWwpICE9IG51bGwgPyBfcmVmMiA6IGNvbG9yc0VuYWJsZWQpIHtcbiAgICAgIGNvbG9yaXplID0gZnVuY3Rpb24oc3RyKSB7XG4gICAgICAgIHJldHVybiBcIlxceDFCWzE7MzFtXCIgKyBzdHIgKyBcIlxceDFCWzBtXCI7XG4gICAgICB9O1xuICAgICAgY29kZUxpbmUgPSBjb2RlTGluZS5zbGljZSgwLCBzdGFydCkgKyBjb2xvcml6ZShjb2RlTGluZS5zbGljZShzdGFydCwgZW5kKSkgKyBjb2RlTGluZS5zbGljZShlbmQpO1xuICAgICAgbWFya2VyID0gY29sb3JpemUobWFya2VyKTtcbiAgICB9XG4gICAgcmV0dXJuIFwiXCIgKyBmaWxlbmFtZSArIFwiOlwiICsgKGZpcnN0X2xpbmUgKyAxKSArIFwiOlwiICsgKGZpcnN0X2NvbHVtbiArIDEpICsgXCI6IGVycm9yOiBcIiArIHRoaXMubWVzc2FnZSArIFwiXFxuXCIgKyBjb2RlTGluZSArIFwiXFxuXCIgKyBtYXJrZXI7XG4gIH07XG5cbiAgZXhwb3J0cy5uYW1lV2hpdGVzcGFjZUNoYXJhY3RlciA9IGZ1bmN0aW9uKHN0cmluZykge1xuICAgIHN3aXRjaCAoc3RyaW5nKSB7XG4gICAgICBjYXNlICcgJzpcbiAgICAgICAgcmV0dXJuICdzcGFjZSc7XG4gICAgICBjYXNlICdcXG4nOlxuICAgICAgICByZXR1cm4gJ25ld2xpbmUnO1xuICAgICAgY2FzZSAnXFxyJzpcbiAgICAgICAgcmV0dXJuICdjYXJyaWFnZSByZXR1cm4nO1xuICAgICAgY2FzZSAnXFx0JzpcbiAgICAgICAgcmV0dXJuICd0YWInO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIHN0cmluZztcbiAgICB9XG4gIH07XG5cbn0pLmNhbGwodGhpcyk7XG4iLCIvLyBHZW5lcmF0ZWQgYnkgSWNlZENvZmZlZVNjcmlwdCAxMDguMC4xMVxuKGZ1bmN0aW9uKCkge1xuICBleHBvcnRzLnRyYW5zZm9ybSA9IGZ1bmN0aW9uKHgsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4geC5pY2VkVHJhbnNmb3JtKG9wdGlvbnMpO1xuICB9O1xuXG4gIGV4cG9ydHMucnVudGltZSA9IHJlcXVpcmUoJ2ljZWQtcnVudGltZScpO1xuXG59KS5jYWxsKHRoaXMpO1xuIiwiLy8gR2VuZXJhdGVkIGJ5IEljZWRDb2ZmZWVTY3JpcHQgMTA4LjAuMTFcbihmdW5jdGlvbigpIHtcbiAgdmFyIEJPTSwgQk9PTCwgQ0FMTEFCTEUsIENPREUsIENPRkZFRV9BTElBU0VTLCBDT0ZGRUVfQUxJQVNfTUFQLCBDT0ZGRUVfS0VZV09SRFMsIENPTU1FTlQsIENPTVBBUkUsIENPTVBPVU5EX0FTU0lHTiwgSEVSRURPQywgSEVSRURPQ19JTExFR0FMLCBIRVJFRE9DX0lOREVOVCwgSEVSRUdFWCwgSEVSRUdFWF9PTUlULCBJREVOVElGSUVSLCBJTkRFTlRBQkxFX0NMT1NFUlMsIElOREVYQUJMRSwgSU5WRVJTRVMsIEpTVE9LRU4sIEpTX0ZPUkJJRERFTiwgSlNfS0VZV09SRFMsIExJTkVfQlJFQUssIExJTkVfQ09OVElOVUVSLCBMT0dJQywgTGV4ZXIsIE1BVEgsIE1VTFRJTElORVIsIE1VTFRJX0RFTlQsIE5PVF9SRUdFWCwgTk9UX1NQQUNFRF9SRUdFWCwgTlVNQkVSLCBPUEVSQVRPUiwgUkVHRVgsIFJFTEFUSU9OLCBSRVNFUlZFRCwgUmV3cml0ZXIsIFNISUZULCBTSU1QTEVTVFIsIFNUUklDVF9QUk9TQ1JJQkVELCBUUkFJTElOR19TUEFDRVMsIFVOQVJZLCBVTkFSWV9NQVRILCBXSElURVNQQUNFLCBjb21wYWN0LCBjb3VudCwgaW52ZXJ0TGl0ZXJhdGUsIGtleSwgbGFzdCwgbG9jYXRpb25EYXRhVG9TdHJpbmcsIHJlcGVhdCwgc3RhcnRzLCB0aHJvd1N5bnRheEVycm9yLCBfcmVmLCBfcmVmMSxcbiAgICBfX2luZGV4T2YgPSBbXS5pbmRleE9mIHx8IGZ1bmN0aW9uKGl0ZW0pIHsgZm9yICh2YXIgaSA9IDAsIGwgPSB0aGlzLmxlbmd0aDsgaSA8IGw7IGkrKykgeyBpZiAoaSBpbiB0aGlzICYmIHRoaXNbaV0gPT09IGl0ZW0pIHJldHVybiBpOyB9IHJldHVybiAtMTsgfTtcblxuICBfcmVmID0gcmVxdWlyZSgnLi9yZXdyaXRlcicpLCBSZXdyaXRlciA9IF9yZWYuUmV3cml0ZXIsIElOVkVSU0VTID0gX3JlZi5JTlZFUlNFUztcblxuICBfcmVmMSA9IHJlcXVpcmUoJy4vaGVscGVycycpLCBjb3VudCA9IF9yZWYxLmNvdW50LCBzdGFydHMgPSBfcmVmMS5zdGFydHMsIGNvbXBhY3QgPSBfcmVmMS5jb21wYWN0LCBsYXN0ID0gX3JlZjEubGFzdCwgcmVwZWF0ID0gX3JlZjEucmVwZWF0LCBpbnZlcnRMaXRlcmF0ZSA9IF9yZWYxLmludmVydExpdGVyYXRlLCBsb2NhdGlvbkRhdGFUb1N0cmluZyA9IF9yZWYxLmxvY2F0aW9uRGF0YVRvU3RyaW5nLCB0aHJvd1N5bnRheEVycm9yID0gX3JlZjEudGhyb3dTeW50YXhFcnJvcjtcblxuICBleHBvcnRzLkxleGVyID0gTGV4ZXIgPSAoZnVuY3Rpb24oKSB7XG4gICAgZnVuY3Rpb24gTGV4ZXIoKSB7fVxuXG4gICAgTGV4ZXIucHJvdG90eXBlLnRva2VuaXplID0gZnVuY3Rpb24oY29kZSwgb3B0cykge1xuICAgICAgdmFyIGNvbnN1bWVkLCBpLCB0YWcsIF9yZWYyO1xuICAgICAgaWYgKG9wdHMgPT0gbnVsbCkge1xuICAgICAgICBvcHRzID0ge307XG4gICAgICB9XG4gICAgICB0aGlzLmxpdGVyYXRlID0gb3B0cy5saXRlcmF0ZTtcbiAgICAgIHRoaXMuaW5kZW50ID0gMDtcbiAgICAgIHRoaXMuYmFzZUluZGVudCA9IDA7XG4gICAgICB0aGlzLmluZGVidCA9IDA7XG4gICAgICB0aGlzLm91dGRlYnQgPSAwO1xuICAgICAgdGhpcy5pbmRlbnRzID0gW107XG4gICAgICB0aGlzLmVuZHMgPSBbXTtcbiAgICAgIHRoaXMudG9rZW5zID0gW107XG4gICAgICB0aGlzLmNodW5rTGluZSA9IG9wdHMubGluZSB8fCAwO1xuICAgICAgdGhpcy5jaHVua0NvbHVtbiA9IG9wdHMuY29sdW1uIHx8IDA7XG4gICAgICBjb2RlID0gdGhpcy5jbGVhbihjb2RlKTtcbiAgICAgIGkgPSAwO1xuICAgICAgd2hpbGUgKHRoaXMuY2h1bmsgPSBjb2RlLnNsaWNlKGkpKSB7XG4gICAgICAgIGNvbnN1bWVkID0gdGhpcy5pZGVudGlmaWVyVG9rZW4oKSB8fCB0aGlzLmNvbW1lbnRUb2tlbigpIHx8IHRoaXMud2hpdGVzcGFjZVRva2VuKCkgfHwgdGhpcy5saW5lVG9rZW4oKSB8fCB0aGlzLmhlcmVkb2NUb2tlbigpIHx8IHRoaXMuc3RyaW5nVG9rZW4oKSB8fCB0aGlzLm51bWJlclRva2VuKCkgfHwgdGhpcy5yZWdleFRva2VuKCkgfHwgdGhpcy5qc1Rva2VuKCkgfHwgdGhpcy5saXRlcmFsVG9rZW4oKTtcbiAgICAgICAgX3JlZjIgPSB0aGlzLmdldExpbmVBbmRDb2x1bW5Gcm9tQ2h1bmsoY29uc3VtZWQpLCB0aGlzLmNodW5rTGluZSA9IF9yZWYyWzBdLCB0aGlzLmNodW5rQ29sdW1uID0gX3JlZjJbMV07XG4gICAgICAgIGkgKz0gY29uc3VtZWQ7XG4gICAgICB9XG4gICAgICB0aGlzLmNsb3NlSW5kZW50YXRpb24oKTtcbiAgICAgIGlmICh0YWcgPSB0aGlzLmVuZHMucG9wKCkpIHtcbiAgICAgICAgdGhpcy5lcnJvcihcIm1pc3NpbmcgXCIgKyB0YWcpO1xuICAgICAgfVxuICAgICAgaWYgKG9wdHMucmV3cml0ZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudG9rZW5zO1xuICAgICAgfVxuICAgICAgcmV0dXJuIChuZXcgUmV3cml0ZXIpLnJld3JpdGUodGhpcy50b2tlbnMpO1xuICAgIH07XG5cbiAgICBMZXhlci5wcm90b3R5cGUuY2xlYW4gPSBmdW5jdGlvbihjb2RlKSB7XG4gICAgICBpZiAoY29kZS5jaGFyQ29kZUF0KDApID09PSBCT00pIHtcbiAgICAgICAgY29kZSA9IGNvZGUuc2xpY2UoMSk7XG4gICAgICB9XG4gICAgICBjb2RlID0gY29kZS5yZXBsYWNlKC9cXHIvZywgJycpLnJlcGxhY2UoVFJBSUxJTkdfU1BBQ0VTLCAnJyk7XG4gICAgICBpZiAoV0hJVEVTUEFDRS50ZXN0KGNvZGUpKSB7XG4gICAgICAgIGNvZGUgPSBcIlxcblwiICsgY29kZTtcbiAgICAgICAgdGhpcy5jaHVua0xpbmUtLTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmxpdGVyYXRlKSB7XG4gICAgICAgIGNvZGUgPSBpbnZlcnRMaXRlcmF0ZShjb2RlKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjb2RlO1xuICAgIH07XG5cbiAgICBMZXhlci5wcm90b3R5cGUuaWRlbnRpZmllclRva2VuID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgY29sb24sIGNvbG9uT2Zmc2V0LCBmb3JjZWRJZGVudGlmaWVyLCBpZCwgaWRMZW5ndGgsIGlucHV0LCBtYXRjaCwgcG9wcGVkVG9rZW4sIHByZXYsIHRhZywgdGFnVG9rZW4sIF9yZWYyLCBfcmVmMywgX3JlZjQ7XG4gICAgICBpZiAoIShtYXRjaCA9IElERU5USUZJRVIuZXhlYyh0aGlzLmNodW5rKSkpIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgICB9XG4gICAgICBpbnB1dCA9IG1hdGNoWzBdLCBpZCA9IG1hdGNoWzFdLCBjb2xvbiA9IG1hdGNoWzJdO1xuICAgICAgaWRMZW5ndGggPSBpZC5sZW5ndGg7XG4gICAgICBwb3BwZWRUb2tlbiA9IHZvaWQgMDtcbiAgICAgIGlmIChpZCA9PT0gJ293bicgJiYgdGhpcy50YWcoKSA9PT0gJ0ZPUicpIHtcbiAgICAgICAgdGhpcy50b2tlbignT1dOJywgaWQpO1xuICAgICAgICByZXR1cm4gaWQubGVuZ3RoO1xuICAgICAgfVxuICAgICAgaWYgKGlkID09PSAnZnJvbScgJiYgdGhpcy50YWcoKSA9PT0gJ1lJRUxEJykge1xuICAgICAgICB0aGlzLnRva2VuKCdGUk9NJywgaWQpO1xuICAgICAgICByZXR1cm4gaWQubGVuZ3RoO1xuICAgICAgfVxuICAgICAgZm9yY2VkSWRlbnRpZmllciA9IGNvbG9uIHx8IChwcmV2ID0gbGFzdCh0aGlzLnRva2VucykpICYmICgoKF9yZWYyID0gcHJldlswXSkgPT09ICcuJyB8fCBfcmVmMiA9PT0gJz8uJyB8fCBfcmVmMiA9PT0gJzo6JyB8fCBfcmVmMiA9PT0gJz86OicpIHx8ICFwcmV2LnNwYWNlZCAmJiBwcmV2WzBdID09PSAnQCcpICYmIGlkICE9PSAnZGVmZXInO1xuICAgICAgdGFnID0gJ0lERU5USUZJRVInO1xuICAgICAgaWYgKCFmb3JjZWRJZGVudGlmaWVyICYmIChfX2luZGV4T2YuY2FsbChKU19LRVlXT1JEUywgaWQpID49IDAgfHwgX19pbmRleE9mLmNhbGwoQ09GRkVFX0tFWVdPUkRTLCBpZCkgPj0gMCkpIHtcbiAgICAgICAgdGFnID0gaWQudG9VcHBlckNhc2UoKTtcbiAgICAgICAgaWYgKHRhZyA9PT0gJ1dIRU4nICYmIChfcmVmMyA9IHRoaXMudGFnKCksIF9faW5kZXhPZi5jYWxsKExJTkVfQlJFQUssIF9yZWYzKSA+PSAwKSkge1xuICAgICAgICAgIHRhZyA9ICdMRUFESU5HX1dIRU4nO1xuICAgICAgICB9IGVsc2UgaWYgKHRhZyA9PT0gJ0ZPUicpIHtcbiAgICAgICAgICB0aGlzLnNlZW5Gb3IgPSB0cnVlO1xuICAgICAgICB9IGVsc2UgaWYgKHRhZyA9PT0gJ1VOTEVTUycpIHtcbiAgICAgICAgICB0YWcgPSAnSUYnO1xuICAgICAgICB9IGVsc2UgaWYgKF9faW5kZXhPZi5jYWxsKFVOQVJZLCB0YWcpID49IDApIHtcbiAgICAgICAgICB0YWcgPSAnVU5BUlknO1xuICAgICAgICB9IGVsc2UgaWYgKF9faW5kZXhPZi5jYWxsKFJFTEFUSU9OLCB0YWcpID49IDApIHtcbiAgICAgICAgICBpZiAodGFnICE9PSAnSU5TVEFOQ0VPRicgJiYgdGhpcy5zZWVuRm9yKSB7XG4gICAgICAgICAgICB0YWcgPSAnRk9SJyArIHRhZztcbiAgICAgICAgICAgIHRoaXMuc2VlbkZvciA9IGZhbHNlO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0YWcgPSAnUkVMQVRJT04nO1xuICAgICAgICAgICAgaWYgKHRoaXMudmFsdWUoKSA9PT0gJyEnKSB7XG4gICAgICAgICAgICAgIHBvcHBlZFRva2VuID0gdGhpcy50b2tlbnMucG9wKCk7XG4gICAgICAgICAgICAgIGlkID0gJyEnICsgaWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoX19pbmRleE9mLmNhbGwoSlNfRk9SQklEREVOLCBpZCkgPj0gMCkge1xuICAgICAgICBpZiAoZm9yY2VkSWRlbnRpZmllcikge1xuICAgICAgICAgIHRhZyA9ICdJREVOVElGSUVSJztcbiAgICAgICAgICBpZCA9IG5ldyBTdHJpbmcoaWQpO1xuICAgICAgICAgIGlkLnJlc2VydmVkID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIGlmIChfX2luZGV4T2YuY2FsbChSRVNFUlZFRCwgaWQpID49IDApIHtcbiAgICAgICAgICB0aGlzLmVycm9yKFwicmVzZXJ2ZWQgd29yZCBcXFwiXCIgKyBpZCArIFwiXFxcIlwiKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKCFmb3JjZWRJZGVudGlmaWVyKSB7XG4gICAgICAgIGlmIChfX2luZGV4T2YuY2FsbChDT0ZGRUVfQUxJQVNFUywgaWQpID49IDApIHtcbiAgICAgICAgICBpZCA9IENPRkZFRV9BTElBU19NQVBbaWRdO1xuICAgICAgICB9XG4gICAgICAgIHRhZyA9IChmdW5jdGlvbigpIHtcbiAgICAgICAgICBzd2l0Y2ggKGlkKSB7XG4gICAgICAgICAgICBjYXNlICchJzpcbiAgICAgICAgICAgICAgcmV0dXJuICdVTkFSWSc7XG4gICAgICAgICAgICBjYXNlICc9PSc6XG4gICAgICAgICAgICBjYXNlICchPSc6XG4gICAgICAgICAgICAgIHJldHVybiAnQ09NUEFSRSc7XG4gICAgICAgICAgICBjYXNlICcmJic6XG4gICAgICAgICAgICBjYXNlICd8fCc6XG4gICAgICAgICAgICAgIHJldHVybiAnTE9HSUMnO1xuICAgICAgICAgICAgY2FzZSAndHJ1ZSc6XG4gICAgICAgICAgICBjYXNlICdmYWxzZSc6XG4gICAgICAgICAgICAgIHJldHVybiAnQk9PTCc7XG4gICAgICAgICAgICBjYXNlICdicmVhayc6XG4gICAgICAgICAgICBjYXNlICdjb250aW51ZSc6XG4gICAgICAgICAgICAgIHJldHVybiAnU1RBVEVNRU5UJztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgIHJldHVybiB0YWc7XG4gICAgICAgICAgfVxuICAgICAgICB9KSgpO1xuICAgICAgfVxuICAgICAgdGFnVG9rZW4gPSB0aGlzLnRva2VuKHRhZywgaWQsIDAsIGlkTGVuZ3RoKTtcbiAgICAgIGlmIChwb3BwZWRUb2tlbikge1xuICAgICAgICBfcmVmNCA9IFtwb3BwZWRUb2tlblsyXS5maXJzdF9saW5lLCBwb3BwZWRUb2tlblsyXS5maXJzdF9jb2x1bW5dLCB0YWdUb2tlblsyXS5maXJzdF9saW5lID0gX3JlZjRbMF0sIHRhZ1Rva2VuWzJdLmZpcnN0X2NvbHVtbiA9IF9yZWY0WzFdO1xuICAgICAgfVxuICAgICAgaWYgKGNvbG9uKSB7XG4gICAgICAgIGNvbG9uT2Zmc2V0ID0gaW5wdXQubGFzdEluZGV4T2YoJzonKTtcbiAgICAgICAgdGhpcy50b2tlbignOicsICc6JywgY29sb25PZmZzZXQsIGNvbG9uLmxlbmd0aCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gaW5wdXQubGVuZ3RoO1xuICAgIH07XG5cbiAgICBMZXhlci5wcm90b3R5cGUubnVtYmVyVG9rZW4gPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBiaW5hcnlMaXRlcmFsLCBsZXhlZExlbmd0aCwgbWF0Y2gsIG51bWJlciwgb2N0YWxMaXRlcmFsO1xuICAgICAgaWYgKCEobWF0Y2ggPSBOVU1CRVIuZXhlYyh0aGlzLmNodW5rKSkpIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgICB9XG4gICAgICBudW1iZXIgPSBtYXRjaFswXTtcbiAgICAgIGlmICgvXjBbQk9YXS8udGVzdChudW1iZXIpKSB7XG4gICAgICAgIHRoaXMuZXJyb3IoXCJyYWRpeCBwcmVmaXggJ1wiICsgbnVtYmVyICsgXCInIG11c3QgYmUgbG93ZXJjYXNlXCIpO1xuICAgICAgfSBlbHNlIGlmICgvRS8udGVzdChudW1iZXIpICYmICEvXjB4Ly50ZXN0KG51bWJlcikpIHtcbiAgICAgICAgdGhpcy5lcnJvcihcImV4cG9uZW50aWFsIG5vdGF0aW9uICdcIiArIG51bWJlciArIFwiJyBtdXN0IGJlIGluZGljYXRlZCB3aXRoIGEgbG93ZXJjYXNlICdlJ1wiKTtcbiAgICAgIH0gZWxzZSBpZiAoL14wXFxkKls4OV0vLnRlc3QobnVtYmVyKSkge1xuICAgICAgICB0aGlzLmVycm9yKFwiZGVjaW1hbCBsaXRlcmFsICdcIiArIG51bWJlciArIFwiJyBtdXN0IG5vdCBiZSBwcmVmaXhlZCB3aXRoICcwJ1wiKTtcbiAgICAgIH0gZWxzZSBpZiAoL14wXFxkKy8udGVzdChudW1iZXIpKSB7XG4gICAgICAgIHRoaXMuZXJyb3IoXCJvY3RhbCBsaXRlcmFsICdcIiArIG51bWJlciArIFwiJyBtdXN0IGJlIHByZWZpeGVkIHdpdGggJzBvJ1wiKTtcbiAgICAgIH1cbiAgICAgIGxleGVkTGVuZ3RoID0gbnVtYmVyLmxlbmd0aDtcbiAgICAgIGlmIChvY3RhbExpdGVyYWwgPSAvXjBvKFswLTddKykvLmV4ZWMobnVtYmVyKSkge1xuICAgICAgICBudW1iZXIgPSAnMHgnICsgcGFyc2VJbnQob2N0YWxMaXRlcmFsWzFdLCA4KS50b1N0cmluZygxNik7XG4gICAgICB9XG4gICAgICBpZiAoYmluYXJ5TGl0ZXJhbCA9IC9eMGIoWzAxXSspLy5leGVjKG51bWJlcikpIHtcbiAgICAgICAgbnVtYmVyID0gJzB4JyArIHBhcnNlSW50KGJpbmFyeUxpdGVyYWxbMV0sIDIpLnRvU3RyaW5nKDE2KTtcbiAgICAgIH1cbiAgICAgIHRoaXMudG9rZW4oJ05VTUJFUicsIG51bWJlciwgMCwgbGV4ZWRMZW5ndGgpO1xuICAgICAgcmV0dXJuIGxleGVkTGVuZ3RoO1xuICAgIH07XG5cbiAgICBMZXhlci5wcm90b3R5cGUuc3RyaW5nVG9rZW4gPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBpbm5lciwgaW5uZXJMZW4sIG51bUJyZWFrLCBvY3RhbEVzYywgcG9zLCBxdW90ZSwgc3RyaW5nLCB0cmltbWVkO1xuICAgICAgc3dpdGNoIChxdW90ZSA9IHRoaXMuY2h1bmsuY2hhckF0KDApKSB7XG4gICAgICAgIGNhc2UgXCInXCI6XG4gICAgICAgICAgc3RyaW5nID0gKFNJTVBMRVNUUi5leGVjKHRoaXMuY2h1bmspIHx8IFtdKVswXTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnXCInOlxuICAgICAgICAgIHN0cmluZyA9IHRoaXMuYmFsYW5jZWRTdHJpbmcodGhpcy5jaHVuaywgJ1wiJyk7XG4gICAgICB9XG4gICAgICBpZiAoIXN0cmluZykge1xuICAgICAgICByZXR1cm4gMDtcbiAgICAgIH1cbiAgICAgIGlubmVyID0gc3RyaW5nLnNsaWNlKDEsIC0xKTtcbiAgICAgIHRyaW1tZWQgPSB0aGlzLnJlbW92ZU5ld2xpbmVzKGlubmVyKTtcbiAgICAgIGlmIChxdW90ZSA9PT0gJ1wiJyAmJiAwIDwgc3RyaW5nLmluZGV4T2YoJyN7JywgMSkpIHtcbiAgICAgICAgbnVtQnJlYWsgPSBwb3MgPSAwO1xuICAgICAgICBpbm5lckxlbiA9IGlubmVyLmxlbmd0aDtcbiAgICAgICAgd2hpbGUgKGlubmVyLmNoYXJBdChwb3MrKykgPT09ICdcXG4nICYmIHBvcyA8IGlubmVyTGVuKSB7XG4gICAgICAgICAgbnVtQnJlYWsrKztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmludGVycG9sYXRlU3RyaW5nKHRyaW1tZWQsIHtcbiAgICAgICAgICBzdHJPZmZzZXQ6IDEgKyBudW1CcmVhayxcbiAgICAgICAgICBsZXhlZExlbmd0aDogc3RyaW5nLmxlbmd0aFxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMudG9rZW4oJ1NUUklORycsIHF1b3RlICsgdGhpcy5lc2NhcGVMaW5lcyh0cmltbWVkKSArIHF1b3RlLCAwLCBzdHJpbmcubGVuZ3RoKTtcbiAgICAgIH1cbiAgICAgIGlmIChvY3RhbEVzYyA9IC9eKD86XFxcXC58W15cXFxcXSkqXFxcXCg/OjBbMC03XXxbMS03XSkvLnRlc3Qoc3RyaW5nKSkge1xuICAgICAgICB0aGlzLmVycm9yKFwib2N0YWwgZXNjYXBlIHNlcXVlbmNlcyBcIiArIHN0cmluZyArIFwiIGFyZSBub3QgYWxsb3dlZFwiKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBzdHJpbmcubGVuZ3RoO1xuICAgIH07XG5cbiAgICBMZXhlci5wcm90b3R5cGUuaGVyZWRvY1Rva2VuID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgZG9jLCBoZXJlZG9jLCBtYXRjaCwgcXVvdGUsIHN0ck9mZnNldDtcbiAgICAgIGlmICghKG1hdGNoID0gSEVSRURPQy5leGVjKHRoaXMuY2h1bmspKSkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICAgIH1cbiAgICAgIGhlcmVkb2MgPSBtYXRjaFswXTtcbiAgICAgIHF1b3RlID0gaGVyZWRvYy5jaGFyQXQoMCk7XG4gICAgICBkb2MgPSB0aGlzLnNhbml0aXplSGVyZWRvYyhtYXRjaFsyXSwge1xuICAgICAgICBxdW90ZTogcXVvdGUsXG4gICAgICAgIGluZGVudDogbnVsbFxuICAgICAgfSk7XG4gICAgICBpZiAocXVvdGUgPT09ICdcIicgJiYgMCA8PSBkb2MuaW5kZXhPZignI3snKSkge1xuICAgICAgICBzdHJPZmZzZXQgPSBtYXRjaFsyXS5jaGFyQXQoMCkgPT09ICdcXG4nID8gNCA6IDM7XG4gICAgICAgIHRoaXMuaW50ZXJwb2xhdGVTdHJpbmcoZG9jLCB7XG4gICAgICAgICAgaGVyZWRvYzogdHJ1ZSxcbiAgICAgICAgICBzdHJPZmZzZXQ6IHN0ck9mZnNldCxcbiAgICAgICAgICBsZXhlZExlbmd0aDogaGVyZWRvYy5sZW5ndGhcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnRva2VuKCdTVFJJTkcnLCB0aGlzLm1ha2VTdHJpbmcoZG9jLCBxdW90ZSwgdHJ1ZSksIDAsIGhlcmVkb2MubGVuZ3RoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBoZXJlZG9jLmxlbmd0aDtcbiAgICB9O1xuXG4gICAgTGV4ZXIucHJvdG90eXBlLmNvbW1lbnRUb2tlbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGNvbW1lbnQsIGhlcmUsIG1hdGNoO1xuICAgICAgaWYgKCEobWF0Y2ggPSB0aGlzLmNodW5rLm1hdGNoKENPTU1FTlQpKSkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICAgIH1cbiAgICAgIGNvbW1lbnQgPSBtYXRjaFswXSwgaGVyZSA9IG1hdGNoWzFdO1xuICAgICAgaWYgKGhlcmUpIHtcbiAgICAgICAgdGhpcy50b2tlbignSEVSRUNPTU1FTlQnLCB0aGlzLnNhbml0aXplSGVyZWRvYyhoZXJlLCB7XG4gICAgICAgICAgaGVyZWNvbW1lbnQ6IHRydWUsXG4gICAgICAgICAgaW5kZW50OiByZXBlYXQoJyAnLCB0aGlzLmluZGVudClcbiAgICAgICAgfSksIDAsIGNvbW1lbnQubGVuZ3RoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjb21tZW50Lmxlbmd0aDtcbiAgICB9O1xuXG4gICAgTGV4ZXIucHJvdG90eXBlLmpzVG9rZW4gPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBtYXRjaCwgc2NyaXB0O1xuICAgICAgaWYgKCEodGhpcy5jaHVuay5jaGFyQXQoMCkgPT09ICdgJyAmJiAobWF0Y2ggPSBKU1RPS0VOLmV4ZWModGhpcy5jaHVuaykpKSkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICAgIH1cbiAgICAgIHRoaXMudG9rZW4oJ0pTJywgKHNjcmlwdCA9IG1hdGNoWzBdKS5zbGljZSgxLCAtMSksIDAsIHNjcmlwdC5sZW5ndGgpO1xuICAgICAgcmV0dXJuIHNjcmlwdC5sZW5ndGg7XG4gICAgfTtcblxuICAgIExleGVyLnByb3RvdHlwZS5yZWdleFRva2VuID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgZmxhZ3MsIGxlbmd0aCwgbWF0Y2gsIHByZXYsIHJlZ2V4LCBfcmVmMiwgX3JlZjM7XG4gICAgICBpZiAodGhpcy5jaHVuay5jaGFyQXQoMCkgIT09ICcvJykge1xuICAgICAgICByZXR1cm4gMDtcbiAgICAgIH1cbiAgICAgIGlmIChsZW5ndGggPSB0aGlzLmhlcmVnZXhUb2tlbigpKSB7XG4gICAgICAgIHJldHVybiBsZW5ndGg7XG4gICAgICB9XG4gICAgICBwcmV2ID0gbGFzdCh0aGlzLnRva2Vucyk7XG4gICAgICBpZiAocHJldiAmJiAoX3JlZjIgPSBwcmV2WzBdLCBfX2luZGV4T2YuY2FsbCgocHJldi5zcGFjZWQgPyBOT1RfUkVHRVggOiBOT1RfU1BBQ0VEX1JFR0VYKSwgX3JlZjIpID49IDApKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgICAgfVxuICAgICAgaWYgKCEobWF0Y2ggPSBSRUdFWC5leGVjKHRoaXMuY2h1bmspKSkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICAgIH1cbiAgICAgIF9yZWYzID0gbWF0Y2gsIG1hdGNoID0gX3JlZjNbMF0sIHJlZ2V4ID0gX3JlZjNbMV0sIGZsYWdzID0gX3JlZjNbMl07XG4gICAgICBpZiAocmVnZXggPT09ICcvLycpIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgICB9XG4gICAgICBpZiAocmVnZXguc2xpY2UoMCwgMikgPT09ICcvKicpIHtcbiAgICAgICAgdGhpcy5lcnJvcigncmVndWxhciBleHByZXNzaW9ucyBjYW5ub3QgYmVnaW4gd2l0aCBgKmAnKTtcbiAgICAgIH1cbiAgICAgIHRoaXMudG9rZW4oJ1JFR0VYJywgXCJcIiArIHJlZ2V4ICsgZmxhZ3MsIDAsIG1hdGNoLmxlbmd0aCk7XG4gICAgICByZXR1cm4gbWF0Y2gubGVuZ3RoO1xuICAgIH07XG5cbiAgICBMZXhlci5wcm90b3R5cGUuaGVyZWdleFRva2VuID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgYm9keSwgZmxhZ3MsIGZsYWdzT2Zmc2V0LCBoZXJlZ2V4LCBtYXRjaCwgcGx1c1Rva2VuLCBwcmV2LCByZSwgdGFnLCB0b2tlbiwgdG9rZW5zLCB2YWx1ZSwgX2ksIF9sZW4sIF9yZWYyLCBfcmVmMywgX3JlZjQ7XG4gICAgICBpZiAoIShtYXRjaCA9IEhFUkVHRVguZXhlYyh0aGlzLmNodW5rKSkpIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgICB9XG4gICAgICBoZXJlZ2V4ID0gbWF0Y2hbMF0sIGJvZHkgPSBtYXRjaFsxXSwgZmxhZ3MgPSBtYXRjaFsyXTtcbiAgICAgIGlmICgwID4gYm9keS5pbmRleE9mKCcjeycpKSB7XG4gICAgICAgIHJlID0gdGhpcy5lc2NhcGVMaW5lcyhib2R5LnJlcGxhY2UoSEVSRUdFWF9PTUlULCAnJDEkMicpLnJlcGxhY2UoL1xcLy9nLCAnXFxcXC8nKSwgdHJ1ZSk7XG4gICAgICAgIGlmIChyZS5tYXRjaCgvXlxcKi8pKSB7XG4gICAgICAgICAgdGhpcy5lcnJvcigncmVndWxhciBleHByZXNzaW9ucyBjYW5ub3QgYmVnaW4gd2l0aCBgKmAnKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRva2VuKCdSRUdFWCcsIFwiL1wiICsgKHJlIHx8ICcoPzopJykgKyBcIi9cIiArIGZsYWdzLCAwLCBoZXJlZ2V4Lmxlbmd0aCk7XG4gICAgICAgIHJldHVybiBoZXJlZ2V4Lmxlbmd0aDtcbiAgICAgIH1cbiAgICAgIHRoaXMudG9rZW4oJ0lERU5USUZJRVInLCAnUmVnRXhwJywgMCwgMCk7XG4gICAgICB0aGlzLnRva2VuKCdDQUxMX1NUQVJUJywgJygnLCAwLCAwKTtcbiAgICAgIHRva2VucyA9IFtdO1xuICAgICAgX3JlZjIgPSB0aGlzLmludGVycG9sYXRlU3RyaW5nKGJvZHksIHtcbiAgICAgICAgcmVnZXg6IHRydWUsXG4gICAgICAgIHN0ck9mZnNldDogM1xuICAgICAgfSk7XG4gICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYyLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICAgIHRva2VuID0gX3JlZjJbX2ldO1xuICAgICAgICB0YWcgPSB0b2tlblswXSwgdmFsdWUgPSB0b2tlblsxXTtcbiAgICAgICAgaWYgKHRhZyA9PT0gJ1RPS0VOUycpIHtcbiAgICAgICAgICB0b2tlbnMucHVzaC5hcHBseSh0b2tlbnMsIHZhbHVlKTtcbiAgICAgICAgfSBlbHNlIGlmICh0YWcgPT09ICdORU9TVFJJTkcnKSB7XG4gICAgICAgICAgaWYgKCEodmFsdWUgPSB2YWx1ZS5yZXBsYWNlKEhFUkVHRVhfT01JVCwgJyQxJDInKSkpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UoL1xcXFwvZywgJ1xcXFxcXFxcJyk7XG4gICAgICAgICAgdG9rZW5bMF0gPSAnU1RSSU5HJztcbiAgICAgICAgICB0b2tlblsxXSA9IHRoaXMubWFrZVN0cmluZyh2YWx1ZSwgJ1wiJywgdHJ1ZSk7XG4gICAgICAgICAgdG9rZW5zLnB1c2godG9rZW4pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuZXJyb3IoXCJVbmV4cGVjdGVkIFwiICsgdGFnKTtcbiAgICAgICAgfVxuICAgICAgICBwcmV2ID0gbGFzdCh0aGlzLnRva2Vucyk7XG4gICAgICAgIHBsdXNUb2tlbiA9IFsnKycsICcrJ107XG4gICAgICAgIHBsdXNUb2tlblsyXSA9IHByZXZbMl07XG4gICAgICAgIHRva2Vucy5wdXNoKHBsdXNUb2tlbik7XG4gICAgICB9XG4gICAgICB0b2tlbnMucG9wKCk7XG4gICAgICBpZiAoKChfcmVmMyA9IHRva2Vuc1swXSkgIT0gbnVsbCA/IF9yZWYzWzBdIDogdm9pZCAwKSAhPT0gJ1NUUklORycpIHtcbiAgICAgICAgdGhpcy50b2tlbignU1RSSU5HJywgJ1wiXCInLCAwLCAwKTtcbiAgICAgICAgdGhpcy50b2tlbignKycsICcrJywgMCwgMCk7XG4gICAgICB9XG4gICAgICAoX3JlZjQgPSB0aGlzLnRva2VucykucHVzaC5hcHBseShfcmVmNCwgdG9rZW5zKTtcbiAgICAgIGlmIChmbGFncykge1xuICAgICAgICBmbGFnc09mZnNldCA9IGhlcmVnZXgubGFzdEluZGV4T2YoZmxhZ3MpO1xuICAgICAgICB0aGlzLnRva2VuKCcsJywgJywnLCBmbGFnc09mZnNldCwgMCk7XG4gICAgICAgIHRoaXMudG9rZW4oJ1NUUklORycsICdcIicgKyBmbGFncyArICdcIicsIGZsYWdzT2Zmc2V0LCBmbGFncy5sZW5ndGgpO1xuICAgICAgfVxuICAgICAgdGhpcy50b2tlbignKScsICcpJywgaGVyZWdleC5sZW5ndGggLSAxLCAwKTtcbiAgICAgIHJldHVybiBoZXJlZ2V4Lmxlbmd0aDtcbiAgICB9O1xuXG4gICAgTGV4ZXIucHJvdG90eXBlLmxpbmVUb2tlbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGRpZmYsIGluZGVudCwgbWF0Y2gsIG5vTmV3bGluZXMsIHNpemU7XG4gICAgICBpZiAoIShtYXRjaCA9IE1VTFRJX0RFTlQuZXhlYyh0aGlzLmNodW5rKSkpIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgICB9XG4gICAgICBpbmRlbnQgPSBtYXRjaFswXTtcbiAgICAgIHRoaXMuc2VlbkZvciA9IGZhbHNlO1xuICAgICAgc2l6ZSA9IGluZGVudC5sZW5ndGggLSAxIC0gaW5kZW50Lmxhc3RJbmRleE9mKCdcXG4nKTtcbiAgICAgIG5vTmV3bGluZXMgPSB0aGlzLnVuZmluaXNoZWQoKTtcbiAgICAgIGlmIChzaXplIC0gdGhpcy5pbmRlYnQgPT09IHRoaXMuaW5kZW50KSB7XG4gICAgICAgIGlmIChub05ld2xpbmVzKSB7XG4gICAgICAgICAgdGhpcy5zdXBwcmVzc05ld2xpbmVzKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5uZXdsaW5lVG9rZW4oMCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGluZGVudC5sZW5ndGg7XG4gICAgICB9XG4gICAgICBpZiAoc2l6ZSA+IHRoaXMuaW5kZW50KSB7XG4gICAgICAgIGlmIChub05ld2xpbmVzKSB7XG4gICAgICAgICAgdGhpcy5pbmRlYnQgPSBzaXplIC0gdGhpcy5pbmRlbnQ7XG4gICAgICAgICAgdGhpcy5zdXBwcmVzc05ld2xpbmVzKCk7XG4gICAgICAgICAgcmV0dXJuIGluZGVudC5sZW5ndGg7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLnRva2Vucy5sZW5ndGgpIHtcbiAgICAgICAgICB0aGlzLmJhc2VJbmRlbnQgPSB0aGlzLmluZGVudCA9IHNpemU7XG4gICAgICAgICAgcmV0dXJuIGluZGVudC5sZW5ndGg7XG4gICAgICAgIH1cbiAgICAgICAgZGlmZiA9IHNpemUgLSB0aGlzLmluZGVudCArIHRoaXMub3V0ZGVidDtcbiAgICAgICAgdGhpcy50b2tlbignSU5ERU5UJywgZGlmZiwgaW5kZW50Lmxlbmd0aCAtIHNpemUsIHNpemUpO1xuICAgICAgICB0aGlzLmluZGVudHMucHVzaChkaWZmKTtcbiAgICAgICAgdGhpcy5lbmRzLnB1c2goJ09VVERFTlQnKTtcbiAgICAgICAgdGhpcy5vdXRkZWJ0ID0gdGhpcy5pbmRlYnQgPSAwO1xuICAgICAgICB0aGlzLmluZGVudCA9IHNpemU7XG4gICAgICB9IGVsc2UgaWYgKHNpemUgPCB0aGlzLmJhc2VJbmRlbnQpIHtcbiAgICAgICAgdGhpcy5lcnJvcignbWlzc2luZyBpbmRlbnRhdGlvbicsIGluZGVudC5sZW5ndGgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5pbmRlYnQgPSAwO1xuICAgICAgICB0aGlzLm91dGRlbnRUb2tlbih0aGlzLmluZGVudCAtIHNpemUsIG5vTmV3bGluZXMsIGluZGVudC5sZW5ndGgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGluZGVudC5sZW5ndGg7XG4gICAgfTtcblxuICAgIExleGVyLnByb3RvdHlwZS5vdXRkZW50VG9rZW4gPSBmdW5jdGlvbihtb3ZlT3V0LCBub05ld2xpbmVzLCBvdXRkZW50TGVuZ3RoKSB7XG4gICAgICB2YXIgZGVjcmVhc2VkSW5kZW50LCBkZW50LCBsYXN0SW5kZW50LCBfcmVmMjtcbiAgICAgIGRlY3JlYXNlZEluZGVudCA9IHRoaXMuaW5kZW50IC0gbW92ZU91dDtcbiAgICAgIHdoaWxlIChtb3ZlT3V0ID4gMCkge1xuICAgICAgICBsYXN0SW5kZW50ID0gdGhpcy5pbmRlbnRzW3RoaXMuaW5kZW50cy5sZW5ndGggLSAxXTtcbiAgICAgICAgaWYgKCFsYXN0SW5kZW50KSB7XG4gICAgICAgICAgbW92ZU91dCA9IDA7XG4gICAgICAgIH0gZWxzZSBpZiAobGFzdEluZGVudCA9PT0gdGhpcy5vdXRkZWJ0KSB7XG4gICAgICAgICAgbW92ZU91dCAtPSB0aGlzLm91dGRlYnQ7XG4gICAgICAgICAgdGhpcy5vdXRkZWJ0ID0gMDtcbiAgICAgICAgfSBlbHNlIGlmIChsYXN0SW5kZW50IDwgdGhpcy5vdXRkZWJ0KSB7XG4gICAgICAgICAgdGhpcy5vdXRkZWJ0IC09IGxhc3RJbmRlbnQ7XG4gICAgICAgICAgbW92ZU91dCAtPSBsYXN0SW5kZW50O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRlbnQgPSB0aGlzLmluZGVudHMucG9wKCkgKyB0aGlzLm91dGRlYnQ7XG4gICAgICAgICAgaWYgKG91dGRlbnRMZW5ndGggJiYgKF9yZWYyID0gdGhpcy5jaHVua1tvdXRkZW50TGVuZ3RoXSwgX19pbmRleE9mLmNhbGwoSU5ERU5UQUJMRV9DTE9TRVJTLCBfcmVmMikgPj0gMCkpIHtcbiAgICAgICAgICAgIGRlY3JlYXNlZEluZGVudCAtPSBkZW50IC0gbW92ZU91dDtcbiAgICAgICAgICAgIG1vdmVPdXQgPSBkZW50O1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLm91dGRlYnQgPSAwO1xuICAgICAgICAgIHRoaXMucGFpcignT1VUREVOVCcpO1xuICAgICAgICAgIHRoaXMudG9rZW4oJ09VVERFTlQnLCBtb3ZlT3V0LCAwLCBvdXRkZW50TGVuZ3RoKTtcbiAgICAgICAgICBtb3ZlT3V0IC09IGRlbnQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChkZW50KSB7XG4gICAgICAgIHRoaXMub3V0ZGVidCAtPSBtb3ZlT3V0O1xuICAgICAgfVxuICAgICAgd2hpbGUgKHRoaXMudmFsdWUoKSA9PT0gJzsnKSB7XG4gICAgICAgIHRoaXMudG9rZW5zLnBvcCgpO1xuICAgICAgfVxuICAgICAgaWYgKCEodGhpcy50YWcoKSA9PT0gJ1RFUk1JTkFUT1InIHx8IG5vTmV3bGluZXMpKSB7XG4gICAgICAgIHRoaXMudG9rZW4oJ1RFUk1JTkFUT1InLCAnXFxuJywgb3V0ZGVudExlbmd0aCwgMCk7XG4gICAgICB9XG4gICAgICB0aGlzLmluZGVudCA9IGRlY3JlYXNlZEluZGVudDtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBMZXhlci5wcm90b3R5cGUud2hpdGVzcGFjZVRva2VuID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgbWF0Y2gsIG5saW5lLCBwcmV2O1xuICAgICAgaWYgKCEoKG1hdGNoID0gV0hJVEVTUEFDRS5leGVjKHRoaXMuY2h1bmspKSB8fCAobmxpbmUgPSB0aGlzLmNodW5rLmNoYXJBdCgwKSA9PT0gJ1xcbicpKSkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICAgIH1cbiAgICAgIHByZXYgPSBsYXN0KHRoaXMudG9rZW5zKTtcbiAgICAgIGlmIChwcmV2KSB7XG4gICAgICAgIHByZXZbbWF0Y2ggPyAnc3BhY2VkJyA6ICduZXdMaW5lJ10gPSB0cnVlO1xuICAgICAgfVxuICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgIHJldHVybiBtYXRjaFswXS5sZW5ndGg7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gMDtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgTGV4ZXIucHJvdG90eXBlLm5ld2xpbmVUb2tlbiA9IGZ1bmN0aW9uKG9mZnNldCkge1xuICAgICAgd2hpbGUgKHRoaXMudmFsdWUoKSA9PT0gJzsnKSB7XG4gICAgICAgIHRoaXMudG9rZW5zLnBvcCgpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMudGFnKCkgIT09ICdURVJNSU5BVE9SJykge1xuICAgICAgICB0aGlzLnRva2VuKCdURVJNSU5BVE9SJywgJ1xcbicsIG9mZnNldCwgMCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgTGV4ZXIucHJvdG90eXBlLnN1cHByZXNzTmV3bGluZXMgPSBmdW5jdGlvbigpIHtcbiAgICAgIGlmICh0aGlzLnZhbHVlKCkgPT09ICdcXFxcJykge1xuICAgICAgICB0aGlzLnRva2Vucy5wb3AoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBMZXhlci5wcm90b3R5cGUubGl0ZXJhbFRva2VuID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgbWF0Y2gsIHByZXYsIHRhZywgdmFsdWUsIF9yZWYyLCBfcmVmMywgX3JlZjQsIF9yZWY1O1xuICAgICAgaWYgKG1hdGNoID0gT1BFUkFUT1IuZXhlYyh0aGlzLmNodW5rKSkge1xuICAgICAgICB2YWx1ZSA9IG1hdGNoWzBdO1xuICAgICAgICBpZiAoQ09ERS50ZXN0KHZhbHVlKSkge1xuICAgICAgICAgIHRoaXMudGFnUGFyYW1ldGVycygpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YWx1ZSA9IHRoaXMuY2h1bmsuY2hhckF0KDApO1xuICAgICAgfVxuICAgICAgdGFnID0gdmFsdWU7XG4gICAgICBwcmV2ID0gbGFzdCh0aGlzLnRva2Vucyk7XG4gICAgICBpZiAodmFsdWUgPT09ICc9JyAmJiBwcmV2KSB7XG4gICAgICAgIGlmICghcHJldlsxXS5yZXNlcnZlZCAmJiAoX3JlZjIgPSBwcmV2WzFdLCBfX2luZGV4T2YuY2FsbChKU19GT1JCSURERU4sIF9yZWYyKSA+PSAwKSkge1xuICAgICAgICAgIHRoaXMuZXJyb3IoXCJyZXNlcnZlZCB3b3JkIFxcXCJcIiArICh0aGlzLnZhbHVlKCkpICsgXCJcXFwiIGNhbid0IGJlIGFzc2lnbmVkXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICgoX3JlZjMgPSBwcmV2WzFdKSA9PT0gJ3x8JyB8fCBfcmVmMyA9PT0gJyYmJykge1xuICAgICAgICAgIHByZXZbMF0gPSAnQ09NUE9VTkRfQVNTSUdOJztcbiAgICAgICAgICBwcmV2WzFdICs9ICc9JztcbiAgICAgICAgICByZXR1cm4gdmFsdWUubGVuZ3RoO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAodmFsdWUgPT09ICc7Jykge1xuICAgICAgICB0aGlzLnNlZW5Gb3IgPSBmYWxzZTtcbiAgICAgICAgdGFnID0gJ1RFUk1JTkFUT1InO1xuICAgICAgfSBlbHNlIGlmIChfX2luZGV4T2YuY2FsbChNQVRILCB2YWx1ZSkgPj0gMCkge1xuICAgICAgICB0YWcgPSAnTUFUSCc7XG4gICAgICB9IGVsc2UgaWYgKF9faW5kZXhPZi5jYWxsKENPTVBBUkUsIHZhbHVlKSA+PSAwKSB7XG4gICAgICAgIHRhZyA9ICdDT01QQVJFJztcbiAgICAgIH0gZWxzZSBpZiAoX19pbmRleE9mLmNhbGwoQ09NUE9VTkRfQVNTSUdOLCB2YWx1ZSkgPj0gMCkge1xuICAgICAgICB0YWcgPSAnQ09NUE9VTkRfQVNTSUdOJztcbiAgICAgIH0gZWxzZSBpZiAoX19pbmRleE9mLmNhbGwoVU5BUlksIHZhbHVlKSA+PSAwKSB7XG4gICAgICAgIHRhZyA9ICdVTkFSWSc7XG4gICAgICB9IGVsc2UgaWYgKF9faW5kZXhPZi5jYWxsKFVOQVJZX01BVEgsIHZhbHVlKSA+PSAwKSB7XG4gICAgICAgIHRhZyA9ICdVTkFSWV9NQVRIJztcbiAgICAgIH0gZWxzZSBpZiAoX19pbmRleE9mLmNhbGwoU0hJRlQsIHZhbHVlKSA+PSAwKSB7XG4gICAgICAgIHRhZyA9ICdTSElGVCc7XG4gICAgICB9IGVsc2UgaWYgKF9faW5kZXhPZi5jYWxsKExPR0lDLCB2YWx1ZSkgPj0gMCB8fCB2YWx1ZSA9PT0gJz8nICYmIChwcmV2ICE9IG51bGwgPyBwcmV2LnNwYWNlZCA6IHZvaWQgMCkpIHtcbiAgICAgICAgdGFnID0gJ0xPR0lDJztcbiAgICAgIH0gZWxzZSBpZiAocHJldiAmJiAhcHJldi5zcGFjZWQpIHtcbiAgICAgICAgaWYgKHZhbHVlID09PSAnKCcgJiYgKF9yZWY0ID0gcHJldlswXSwgX19pbmRleE9mLmNhbGwoQ0FMTEFCTEUsIF9yZWY0KSA+PSAwKSkge1xuICAgICAgICAgIGlmIChwcmV2WzBdID09PSAnPycpIHtcbiAgICAgICAgICAgIHByZXZbMF0gPSAnRlVOQ19FWElTVCc7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRhZyA9ICdDQUxMX1NUQVJUJztcbiAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSA9PT0gJ1snICYmIChfcmVmNSA9IHByZXZbMF0sIF9faW5kZXhPZi5jYWxsKElOREVYQUJMRSwgX3JlZjUpID49IDApKSB7XG4gICAgICAgICAgdGFnID0gJ0lOREVYX1NUQVJUJztcbiAgICAgICAgICBzd2l0Y2ggKHByZXZbMF0pIHtcbiAgICAgICAgICAgIGNhc2UgJz8nOlxuICAgICAgICAgICAgICBwcmV2WzBdID0gJ0lOREVYX1NPQUsnO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgc3dpdGNoICh2YWx1ZSkge1xuICAgICAgICBjYXNlICcoJzpcbiAgICAgICAgY2FzZSAneyc6XG4gICAgICAgIGNhc2UgJ1snOlxuICAgICAgICAgIHRoaXMuZW5kcy5wdXNoKElOVkVSU0VTW3ZhbHVlXSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJyknOlxuICAgICAgICBjYXNlICd9JzpcbiAgICAgICAgY2FzZSAnXSc6XG4gICAgICAgICAgdGhpcy5wYWlyKHZhbHVlKTtcbiAgICAgIH1cbiAgICAgIHRoaXMudG9rZW4odGFnLCB2YWx1ZSk7XG4gICAgICByZXR1cm4gdmFsdWUubGVuZ3RoO1xuICAgIH07XG5cbiAgICBMZXhlci5wcm90b3R5cGUuc2FuaXRpemVIZXJlZG9jID0gZnVuY3Rpb24oZG9jLCBvcHRpb25zKSB7XG4gICAgICB2YXIgYXR0ZW1wdCwgaGVyZWNvbW1lbnQsIGluZGVudCwgbWF0Y2gsIF9yZWYyO1xuICAgICAgaW5kZW50ID0gb3B0aW9ucy5pbmRlbnQsIGhlcmVjb21tZW50ID0gb3B0aW9ucy5oZXJlY29tbWVudDtcbiAgICAgIGlmIChoZXJlY29tbWVudCkge1xuICAgICAgICBpZiAoSEVSRURPQ19JTExFR0FMLnRlc3QoZG9jKSkge1xuICAgICAgICAgIHRoaXMuZXJyb3IoXCJibG9jayBjb21tZW50IGNhbm5vdCBjb250YWluIFxcXCIqL1xcXCIsIHN0YXJ0aW5nXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkb2MuaW5kZXhPZignXFxuJykgPCAwKSB7XG4gICAgICAgICAgcmV0dXJuIGRvYztcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgd2hpbGUgKG1hdGNoID0gSEVSRURPQ19JTkRFTlQuZXhlYyhkb2MpKSB7XG4gICAgICAgICAgYXR0ZW1wdCA9IG1hdGNoWzFdO1xuICAgICAgICAgIGlmIChpbmRlbnQgPT09IG51bGwgfHwgKDAgPCAoX3JlZjIgPSBhdHRlbXB0Lmxlbmd0aCkgJiYgX3JlZjIgPCBpbmRlbnQubGVuZ3RoKSkge1xuICAgICAgICAgICAgaW5kZW50ID0gYXR0ZW1wdDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChpbmRlbnQpIHtcbiAgICAgICAgZG9jID0gZG9jLnJlcGxhY2UoUmVnRXhwKFwiXFxcXG5cIiArIGluZGVudCwgXCJnXCIpLCAnXFxuJyk7XG4gICAgICB9XG4gICAgICBpZiAoIWhlcmVjb21tZW50KSB7XG4gICAgICAgIGRvYyA9IGRvYy5yZXBsYWNlKC9eXFxuLywgJycpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGRvYztcbiAgICB9O1xuXG4gICAgTGV4ZXIucHJvdG90eXBlLnRhZ1BhcmFtZXRlcnMgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBpLCBzdGFjaywgdG9rLCB0b2tlbnM7XG4gICAgICBpZiAodGhpcy50YWcoKSAhPT0gJyknKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuICAgICAgc3RhY2sgPSBbXTtcbiAgICAgIHRva2VucyA9IHRoaXMudG9rZW5zO1xuICAgICAgaSA9IHRva2Vucy5sZW5ndGg7XG4gICAgICB0b2tlbnNbLS1pXVswXSA9ICdQQVJBTV9FTkQnO1xuICAgICAgd2hpbGUgKHRvayA9IHRva2Vuc1stLWldKSB7XG4gICAgICAgIHN3aXRjaCAodG9rWzBdKSB7XG4gICAgICAgICAgY2FzZSAnKSc6XG4gICAgICAgICAgICBzdGFjay5wdXNoKHRvayk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICcoJzpcbiAgICAgICAgICBjYXNlICdDQUxMX1NUQVJUJzpcbiAgICAgICAgICAgIGlmIChzdGFjay5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgc3RhY2sucG9wKCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRva1swXSA9PT0gJygnKSB7XG4gICAgICAgICAgICAgIHRva1swXSA9ICdQQVJBTV9TVEFSVCc7XG4gICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBMZXhlci5wcm90b3R5cGUuY2xvc2VJbmRlbnRhdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMub3V0ZGVudFRva2VuKHRoaXMuaW5kZW50KTtcbiAgICB9O1xuXG4gICAgTGV4ZXIucHJvdG90eXBlLmJhbGFuY2VkU3RyaW5nID0gZnVuY3Rpb24oc3RyLCBlbmQpIHtcbiAgICAgIHZhciBjb250aW51ZUNvdW50LCBpLCBsZXR0ZXIsIG1hdGNoLCBwcmV2LCBzdGFjaywgX2ksIF9yZWYyO1xuICAgICAgY29udGludWVDb3VudCA9IDA7XG4gICAgICBzdGFjayA9IFtlbmRdO1xuICAgICAgZm9yIChpID0gX2kgPSAxLCBfcmVmMiA9IHN0ci5sZW5ndGg7IDEgPD0gX3JlZjIgPyBfaSA8IF9yZWYyIDogX2kgPiBfcmVmMjsgaSA9IDEgPD0gX3JlZjIgPyArK19pIDogLS1faSkge1xuICAgICAgICBpZiAoY29udGludWVDb3VudCkge1xuICAgICAgICAgIC0tY29udGludWVDb3VudDtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBzd2l0Y2ggKGxldHRlciA9IHN0ci5jaGFyQXQoaSkpIHtcbiAgICAgICAgICBjYXNlICdcXFxcJzpcbiAgICAgICAgICAgICsrY29udGludWVDb3VudDtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIGNhc2UgZW5kOlxuICAgICAgICAgICAgc3RhY2sucG9wKCk7XG4gICAgICAgICAgICBpZiAoIXN0YWNrLmxlbmd0aCkge1xuICAgICAgICAgICAgICByZXR1cm4gc3RyLnNsaWNlKDAsICtpICsgMSB8fCA5ZTkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZW5kID0gc3RhY2tbc3RhY2subGVuZ3RoIC0gMV07XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZW5kID09PSAnfScgJiYgKGxldHRlciA9PT0gJ1wiJyB8fCBsZXR0ZXIgPT09IFwiJ1wiKSkge1xuICAgICAgICAgIHN0YWNrLnB1c2goZW5kID0gbGV0dGVyKTtcbiAgICAgICAgfSBlbHNlIGlmIChlbmQgPT09ICd9JyAmJiBsZXR0ZXIgPT09ICcvJyAmJiAobWF0Y2ggPSBIRVJFR0VYLmV4ZWMoc3RyLnNsaWNlKGkpKSB8fCBSRUdFWC5leGVjKHN0ci5zbGljZShpKSkpKSB7XG4gICAgICAgICAgY29udGludWVDb3VudCArPSBtYXRjaFswXS5sZW5ndGggLSAxO1xuICAgICAgICB9IGVsc2UgaWYgKGVuZCA9PT0gJ30nICYmIGxldHRlciA9PT0gJ3snKSB7XG4gICAgICAgICAgc3RhY2sucHVzaChlbmQgPSAnfScpO1xuICAgICAgICB9IGVsc2UgaWYgKGVuZCA9PT0gJ1wiJyAmJiBwcmV2ID09PSAnIycgJiYgbGV0dGVyID09PSAneycpIHtcbiAgICAgICAgICBzdGFjay5wdXNoKGVuZCA9ICd9Jyk7XG4gICAgICAgIH1cbiAgICAgICAgcHJldiA9IGxldHRlcjtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLmVycm9yKFwibWlzc2luZyBcIiArIChzdGFjay5wb3AoKSkgKyBcIiwgc3RhcnRpbmdcIik7XG4gICAgfTtcblxuICAgIExleGVyLnByb3RvdHlwZS5pbnRlcnBvbGF0ZVN0cmluZyA9IGZ1bmN0aW9uKHN0ciwgb3B0aW9ucykge1xuICAgICAgdmFyIGNvbHVtbiwgZXJyb3JUb2tlbiwgZXhwciwgaGVyZWRvYywgaSwgaW5uZXIsIGludGVycG9sYXRlZCwgbGVuLCBsZXR0ZXIsIGxleGVkTGVuZ3RoLCBsaW5lLCBsb2NhdGlvblRva2VuLCBuZXN0ZWQsIG9mZnNldEluQ2h1bmssIHBpLCBwbHVzVG9rZW4sIHBvcHBlZCwgcmVnZXgsIHJwYXJlbiwgc3RyT2Zmc2V0LCB0YWcsIHRva2VuLCB0b2tlbnMsIHZhbHVlLCBfaSwgX2xlbiwgX3JlZjIsIF9yZWYzLCBfcmVmNDtcbiAgICAgIGlmIChvcHRpb25zID09IG51bGwpIHtcbiAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgfVxuICAgICAgaGVyZWRvYyA9IG9wdGlvbnMuaGVyZWRvYywgcmVnZXggPSBvcHRpb25zLnJlZ2V4LCBvZmZzZXRJbkNodW5rID0gb3B0aW9ucy5vZmZzZXRJbkNodW5rLCBzdHJPZmZzZXQgPSBvcHRpb25zLnN0ck9mZnNldCwgbGV4ZWRMZW5ndGggPSBvcHRpb25zLmxleGVkTGVuZ3RoO1xuICAgICAgb2Zmc2V0SW5DaHVuayB8fCAob2Zmc2V0SW5DaHVuayA9IDApO1xuICAgICAgc3RyT2Zmc2V0IHx8IChzdHJPZmZzZXQgPSAwKTtcbiAgICAgIGxleGVkTGVuZ3RoIHx8IChsZXhlZExlbmd0aCA9IHN0ci5sZW5ndGgpO1xuICAgICAgdG9rZW5zID0gW107XG4gICAgICBwaSA9IDA7XG4gICAgICBpID0gLTE7XG4gICAgICB3aGlsZSAobGV0dGVyID0gc3RyLmNoYXJBdChpICs9IDEpKSB7XG4gICAgICAgIGlmIChsZXR0ZXIgPT09ICdcXFxcJykge1xuICAgICAgICAgIGkgKz0gMTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIShsZXR0ZXIgPT09ICcjJyAmJiBzdHIuY2hhckF0KGkgKyAxKSA9PT0gJ3snICYmIChleHByID0gdGhpcy5iYWxhbmNlZFN0cmluZyhzdHIuc2xpY2UoaSArIDEpLCAnfScpKSkpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGkgPCBpKSB7XG4gICAgICAgICAgdG9rZW5zLnB1c2godGhpcy5tYWtlVG9rZW4oJ05FT1NUUklORycsIHN0ci5zbGljZShwaSwgaSksIHN0ck9mZnNldCArIHBpKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFlcnJvclRva2VuKSB7XG4gICAgICAgICAgZXJyb3JUb2tlbiA9IHRoaXMubWFrZVRva2VuKCcnLCAnc3RyaW5nIGludGVycG9sYXRpb24nLCBvZmZzZXRJbkNodW5rICsgaSArIDEsIDIpO1xuICAgICAgICB9XG4gICAgICAgIGlubmVyID0gZXhwci5zbGljZSgxLCAtMSk7XG4gICAgICAgIGlmIChpbm5lci5sZW5ndGgpIHtcbiAgICAgICAgICBfcmVmMiA9IHRoaXMuZ2V0TGluZUFuZENvbHVtbkZyb21DaHVuayhzdHJPZmZzZXQgKyBpICsgMiksIGxpbmUgPSBfcmVmMlswXSwgY29sdW1uID0gX3JlZjJbMV07XG4gICAgICAgICAgbmVzdGVkID0gbmV3IExleGVyKCkudG9rZW5pemUoaW5uZXIsIHtcbiAgICAgICAgICAgIGxpbmU6IGxpbmUsXG4gICAgICAgICAgICBjb2x1bW46IGNvbHVtbixcbiAgICAgICAgICAgIHJld3JpdGU6IGZhbHNlXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcG9wcGVkID0gbmVzdGVkLnBvcCgpO1xuICAgICAgICAgIGlmICgoKF9yZWYzID0gbmVzdGVkWzBdKSAhPSBudWxsID8gX3JlZjNbMF0gOiB2b2lkIDApID09PSAnVEVSTUlOQVRPUicpIHtcbiAgICAgICAgICAgIHBvcHBlZCA9IG5lc3RlZC5zaGlmdCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAobGVuID0gbmVzdGVkLmxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKGxlbiA+IDEpIHtcbiAgICAgICAgICAgICAgbmVzdGVkLnVuc2hpZnQodGhpcy5tYWtlVG9rZW4oJygnLCAnKCcsIHN0ck9mZnNldCArIGkgKyAxLCAwKSk7XG4gICAgICAgICAgICAgIG5lc3RlZC5wdXNoKHRoaXMubWFrZVRva2VuKCcpJywgJyknLCBzdHJPZmZzZXQgKyBpICsgMSArIGlubmVyLmxlbmd0aCwgMCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdG9rZW5zLnB1c2goWydUT0tFTlMnLCBuZXN0ZWRdKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaSArPSBleHByLmxlbmd0aDtcbiAgICAgICAgcGkgPSBpICsgMTtcbiAgICAgIH1cbiAgICAgIGlmICgoaSA+IHBpICYmIHBpIDwgc3RyLmxlbmd0aCkpIHtcbiAgICAgICAgdG9rZW5zLnB1c2godGhpcy5tYWtlVG9rZW4oJ05FT1NUUklORycsIHN0ci5zbGljZShwaSksIHN0ck9mZnNldCArIHBpKSk7XG4gICAgICB9XG4gICAgICBpZiAocmVnZXgpIHtcbiAgICAgICAgcmV0dXJuIHRva2VucztcbiAgICAgIH1cbiAgICAgIGlmICghdG9rZW5zLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gdGhpcy50b2tlbignU1RSSU5HJywgJ1wiXCInLCBvZmZzZXRJbkNodW5rLCBsZXhlZExlbmd0aCk7XG4gICAgICB9XG4gICAgICBpZiAodG9rZW5zWzBdWzBdICE9PSAnTkVPU1RSSU5HJykge1xuICAgICAgICB0b2tlbnMudW5zaGlmdCh0aGlzLm1ha2VUb2tlbignTkVPU1RSSU5HJywgJycsIG9mZnNldEluQ2h1bmspKTtcbiAgICAgIH1cbiAgICAgIGlmIChpbnRlcnBvbGF0ZWQgPSB0b2tlbnMubGVuZ3RoID4gMSkge1xuICAgICAgICB0aGlzLnRva2VuKCcoJywgJygnLCBvZmZzZXRJbkNodW5rLCAwLCBlcnJvclRva2VuKTtcbiAgICAgIH1cbiAgICAgIGZvciAoaSA9IF9pID0gMCwgX2xlbiA9IHRva2Vucy5sZW5ndGg7IF9pIDwgX2xlbjsgaSA9ICsrX2kpIHtcbiAgICAgICAgdG9rZW4gPSB0b2tlbnNbaV07XG4gICAgICAgIHRhZyA9IHRva2VuWzBdLCB2YWx1ZSA9IHRva2VuWzFdO1xuICAgICAgICBpZiAoaSkge1xuICAgICAgICAgIGlmIChpKSB7XG4gICAgICAgICAgICBwbHVzVG9rZW4gPSB0aGlzLnRva2VuKCcrJywgJysnKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgbG9jYXRpb25Ub2tlbiA9IHRhZyA9PT0gJ1RPS0VOUycgPyB2YWx1ZVswXSA6IHRva2VuO1xuICAgICAgICAgIHBsdXNUb2tlblsyXSA9IHtcbiAgICAgICAgICAgIGZpcnN0X2xpbmU6IGxvY2F0aW9uVG9rZW5bMl0uZmlyc3RfbGluZSxcbiAgICAgICAgICAgIGZpcnN0X2NvbHVtbjogbG9jYXRpb25Ub2tlblsyXS5maXJzdF9jb2x1bW4sXG4gICAgICAgICAgICBsYXN0X2xpbmU6IGxvY2F0aW9uVG9rZW5bMl0uZmlyc3RfbGluZSxcbiAgICAgICAgICAgIGxhc3RfY29sdW1uOiBsb2NhdGlvblRva2VuWzJdLmZpcnN0X2NvbHVtblxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRhZyA9PT0gJ1RPS0VOUycpIHtcbiAgICAgICAgICAoX3JlZjQgPSB0aGlzLnRva2VucykucHVzaC5hcHBseShfcmVmNCwgdmFsdWUpO1xuICAgICAgICB9IGVsc2UgaWYgKHRhZyA9PT0gJ05FT1NUUklORycpIHtcbiAgICAgICAgICB0b2tlblswXSA9ICdTVFJJTkcnO1xuICAgICAgICAgIHRva2VuWzFdID0gdGhpcy5tYWtlU3RyaW5nKHZhbHVlLCAnXCInLCBoZXJlZG9jKTtcbiAgICAgICAgICB0aGlzLnRva2Vucy5wdXNoKHRva2VuKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmVycm9yKFwiVW5leHBlY3RlZCBcIiArIHRhZyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChpbnRlcnBvbGF0ZWQpIHtcbiAgICAgICAgcnBhcmVuID0gdGhpcy5tYWtlVG9rZW4oJyknLCAnKScsIG9mZnNldEluQ2h1bmsgKyBsZXhlZExlbmd0aCwgMCk7XG4gICAgICAgIHJwYXJlbi5zdHJpbmdFbmQgPSB0cnVlO1xuICAgICAgICB0aGlzLnRva2Vucy5wdXNoKHJwYXJlbik7XG4gICAgICB9XG4gICAgICByZXR1cm4gdG9rZW5zO1xuICAgIH07XG5cbiAgICBMZXhlci5wcm90b3R5cGUucGFpciA9IGZ1bmN0aW9uKHRhZykge1xuICAgICAgdmFyIHdhbnRlZDtcbiAgICAgIGlmICh0YWcgIT09ICh3YW50ZWQgPSBsYXN0KHRoaXMuZW5kcykpKSB7XG4gICAgICAgIGlmICgnT1VUREVOVCcgIT09IHdhbnRlZCkge1xuICAgICAgICAgIHRoaXMuZXJyb3IoXCJ1bm1hdGNoZWQgXCIgKyB0YWcpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub3V0ZGVudFRva2VuKGxhc3QodGhpcy5pbmRlbnRzKSwgdHJ1ZSk7XG4gICAgICAgIHJldHVybiB0aGlzLnBhaXIodGFnKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLmVuZHMucG9wKCk7XG4gICAgfTtcblxuICAgIExleGVyLnByb3RvdHlwZS5nZXRMaW5lQW5kQ29sdW1uRnJvbUNodW5rID0gZnVuY3Rpb24ob2Zmc2V0KSB7XG4gICAgICB2YXIgY29sdW1uLCBsaW5lQ291bnQsIGxpbmVzLCBzdHJpbmc7XG4gICAgICBpZiAob2Zmc2V0ID09PSAwKSB7XG4gICAgICAgIHJldHVybiBbdGhpcy5jaHVua0xpbmUsIHRoaXMuY2h1bmtDb2x1bW5dO1xuICAgICAgfVxuICAgICAgaWYgKG9mZnNldCA+PSB0aGlzLmNodW5rLmxlbmd0aCkge1xuICAgICAgICBzdHJpbmcgPSB0aGlzLmNodW5rO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RyaW5nID0gdGhpcy5jaHVuay5zbGljZSgwLCArKG9mZnNldCAtIDEpICsgMSB8fCA5ZTkpO1xuICAgICAgfVxuICAgICAgbGluZUNvdW50ID0gY291bnQoc3RyaW5nLCAnXFxuJyk7XG4gICAgICBjb2x1bW4gPSB0aGlzLmNodW5rQ29sdW1uO1xuICAgICAgaWYgKGxpbmVDb3VudCA+IDApIHtcbiAgICAgICAgbGluZXMgPSBzdHJpbmcuc3BsaXQoJ1xcbicpO1xuICAgICAgICBjb2x1bW4gPSBsYXN0KGxpbmVzKS5sZW5ndGg7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb2x1bW4gKz0gc3RyaW5nLmxlbmd0aDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBbdGhpcy5jaHVua0xpbmUgKyBsaW5lQ291bnQsIGNvbHVtbl07XG4gICAgfTtcblxuICAgIExleGVyLnByb3RvdHlwZS5tYWtlVG9rZW4gPSBmdW5jdGlvbih0YWcsIHZhbHVlLCBvZmZzZXRJbkNodW5rLCBsZW5ndGgpIHtcbiAgICAgIHZhciBsYXN0Q2hhcmFjdGVyLCBsb2NhdGlvbkRhdGEsIHRva2VuLCBfcmVmMiwgX3JlZjM7XG4gICAgICBpZiAob2Zmc2V0SW5DaHVuayA9PSBudWxsKSB7XG4gICAgICAgIG9mZnNldEluQ2h1bmsgPSAwO1xuICAgICAgfVxuICAgICAgaWYgKGxlbmd0aCA9PSBudWxsKSB7XG4gICAgICAgIGxlbmd0aCA9IHZhbHVlLmxlbmd0aDtcbiAgICAgIH1cbiAgICAgIGxvY2F0aW9uRGF0YSA9IHt9O1xuICAgICAgX3JlZjIgPSB0aGlzLmdldExpbmVBbmRDb2x1bW5Gcm9tQ2h1bmsob2Zmc2V0SW5DaHVuayksIGxvY2F0aW9uRGF0YS5maXJzdF9saW5lID0gX3JlZjJbMF0sIGxvY2F0aW9uRGF0YS5maXJzdF9jb2x1bW4gPSBfcmVmMlsxXTtcbiAgICAgIGxhc3RDaGFyYWN0ZXIgPSBNYXRoLm1heCgwLCBsZW5ndGggLSAxKTtcbiAgICAgIF9yZWYzID0gdGhpcy5nZXRMaW5lQW5kQ29sdW1uRnJvbUNodW5rKG9mZnNldEluQ2h1bmsgKyBsYXN0Q2hhcmFjdGVyKSwgbG9jYXRpb25EYXRhLmxhc3RfbGluZSA9IF9yZWYzWzBdLCBsb2NhdGlvbkRhdGEubGFzdF9jb2x1bW4gPSBfcmVmM1sxXTtcbiAgICAgIHRva2VuID0gW3RhZywgdmFsdWUsIGxvY2F0aW9uRGF0YV07XG4gICAgICByZXR1cm4gdG9rZW47XG4gICAgfTtcblxuICAgIExleGVyLnByb3RvdHlwZS50b2tlbiA9IGZ1bmN0aW9uKHRhZywgdmFsdWUsIG9mZnNldEluQ2h1bmssIGxlbmd0aCwgb3JpZ2luKSB7XG4gICAgICB2YXIgdG9rZW47XG4gICAgICB0b2tlbiA9IHRoaXMubWFrZVRva2VuKHRhZywgdmFsdWUsIG9mZnNldEluQ2h1bmssIGxlbmd0aCk7XG4gICAgICBpZiAob3JpZ2luKSB7XG4gICAgICAgIHRva2VuLm9yaWdpbiA9IG9yaWdpbjtcbiAgICAgIH1cbiAgICAgIHRoaXMudG9rZW5zLnB1c2godG9rZW4pO1xuICAgICAgcmV0dXJuIHRva2VuO1xuICAgIH07XG5cbiAgICBMZXhlci5wcm90b3R5cGUudGFnID0gZnVuY3Rpb24oaW5kZXgsIHRhZykge1xuICAgICAgdmFyIHRvaztcbiAgICAgIHJldHVybiAodG9rID0gbGFzdCh0aGlzLnRva2VucywgaW5kZXgpKSAmJiAodGFnID8gdG9rWzBdID0gdGFnIDogdG9rWzBdKTtcbiAgICB9O1xuXG4gICAgTGV4ZXIucHJvdG90eXBlLnZhbHVlID0gZnVuY3Rpb24oaW5kZXgsIHZhbCkge1xuICAgICAgdmFyIHRvaztcbiAgICAgIHJldHVybiAodG9rID0gbGFzdCh0aGlzLnRva2VucywgaW5kZXgpKSAmJiAodmFsID8gdG9rWzFdID0gdmFsIDogdG9rWzFdKTtcbiAgICB9O1xuXG4gICAgTGV4ZXIucHJvdG90eXBlLnVuZmluaXNoZWQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBfcmVmMjtcbiAgICAgIHJldHVybiBMSU5FX0NPTlRJTlVFUi50ZXN0KHRoaXMuY2h1bmspIHx8ICgoX3JlZjIgPSB0aGlzLnRhZygpKSA9PT0gJ1xcXFwnIHx8IF9yZWYyID09PSAnLicgfHwgX3JlZjIgPT09ICc/LicgfHwgX3JlZjIgPT09ICc/OjonIHx8IF9yZWYyID09PSAnVU5BUlknIHx8IF9yZWYyID09PSAnTUFUSCcgfHwgX3JlZjIgPT09ICdVTkFSWV9NQVRIJyB8fCBfcmVmMiA9PT0gJysnIHx8IF9yZWYyID09PSAnLScgfHwgX3JlZjIgPT09ICdZSUVMRCcgfHwgX3JlZjIgPT09ICcqKicgfHwgX3JlZjIgPT09ICdTSElGVCcgfHwgX3JlZjIgPT09ICdSRUxBVElPTicgfHwgX3JlZjIgPT09ICdDT01QQVJFJyB8fCBfcmVmMiA9PT0gJ0xPR0lDJyB8fCBfcmVmMiA9PT0gJ1RIUk9XJyB8fCBfcmVmMiA9PT0gJ0VYVEVORFMnKTtcbiAgICB9O1xuXG4gICAgTGV4ZXIucHJvdG90eXBlLnJlbW92ZU5ld2xpbmVzID0gZnVuY3Rpb24oc3RyKSB7XG4gICAgICByZXR1cm4gc3RyLnJlcGxhY2UoL15cXHMqXFxuXFxzKi8sICcnKS5yZXBsYWNlKC8oW15cXFxcXXxcXFxcXFxcXClcXHMqXFxuXFxzKiQvLCAnJDEnKTtcbiAgICB9O1xuXG4gICAgTGV4ZXIucHJvdG90eXBlLmVzY2FwZUxpbmVzID0gZnVuY3Rpb24oc3RyLCBoZXJlZG9jKSB7XG4gICAgICBzdHIgPSBzdHIucmVwbGFjZSgvXFxcXFteXFxTXFxuXSooXFxufFxcXFwpXFxzKi9nLCBmdW5jdGlvbihlc2NhcGVkLCBjaGFyYWN0ZXIpIHtcbiAgICAgICAgaWYgKGNoYXJhY3RlciA9PT0gJ1xcbicpIHtcbiAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIGVzY2FwZWQ7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgaWYgKGhlcmVkb2MpIHtcbiAgICAgICAgcmV0dXJuIHN0ci5yZXBsYWNlKE1VTFRJTElORVIsICdcXFxcbicpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHN0ci5yZXBsYWNlKC9cXHMqXFxuXFxzKi9nLCAnICcpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBMZXhlci5wcm90b3R5cGUubWFrZVN0cmluZyA9IGZ1bmN0aW9uKGJvZHksIHF1b3RlLCBoZXJlZG9jKSB7XG4gICAgICBpZiAoIWJvZHkpIHtcbiAgICAgICAgcmV0dXJuIHF1b3RlICsgcXVvdGU7XG4gICAgICB9XG4gICAgICBib2R5ID0gYm9keS5yZXBsYWNlKFJlZ0V4cChcIlxcXFxcXFxcKFwiICsgcXVvdGUgKyBcInxcXFxcXFxcXClcIiwgXCJnXCIpLCBmdW5jdGlvbihtYXRjaCwgY29udGVudHMpIHtcbiAgICAgICAgaWYgKGNvbnRlbnRzID09PSBxdW90ZSkge1xuICAgICAgICAgIHJldHVybiBjb250ZW50cztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gbWF0Y2g7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgYm9keSA9IGJvZHkucmVwbGFjZShSZWdFeHAoXCJcIiArIHF1b3RlLCBcImdcIiksICdcXFxcJCYnKTtcbiAgICAgIHJldHVybiBxdW90ZSArIHRoaXMuZXNjYXBlTGluZXMoYm9keSwgaGVyZWRvYykgKyBxdW90ZTtcbiAgICB9O1xuXG4gICAgTGV4ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24obWVzc2FnZSwgb2Zmc2V0KSB7XG4gICAgICB2YXIgZmlyc3RfY29sdW1uLCBmaXJzdF9saW5lLCBfcmVmMjtcbiAgICAgIGlmIChvZmZzZXQgPT0gbnVsbCkge1xuICAgICAgICBvZmZzZXQgPSAwO1xuICAgICAgfVxuICAgICAgX3JlZjIgPSB0aGlzLmdldExpbmVBbmRDb2x1bW5Gcm9tQ2h1bmsob2Zmc2V0KSwgZmlyc3RfbGluZSA9IF9yZWYyWzBdLCBmaXJzdF9jb2x1bW4gPSBfcmVmMlsxXTtcbiAgICAgIHJldHVybiB0aHJvd1N5bnRheEVycm9yKG1lc3NhZ2UsIHtcbiAgICAgICAgZmlyc3RfbGluZTogZmlyc3RfbGluZSxcbiAgICAgICAgZmlyc3RfY29sdW1uOiBmaXJzdF9jb2x1bW5cbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICByZXR1cm4gTGV4ZXI7XG5cbiAgfSkoKTtcblxuICBKU19LRVlXT1JEUyA9IFsndHJ1ZScsICdmYWxzZScsICdudWxsJywgJ3RoaXMnLCAnbmV3JywgJ2RlbGV0ZScsICd0eXBlb2YnLCAnaW4nLCAnaW5zdGFuY2VvZicsICdyZXR1cm4nLCAndGhyb3cnLCAnYnJlYWsnLCAnY29udGludWUnLCAnZGVidWdnZXInLCAneWllbGQnLCAnaWYnLCAnZWxzZScsICdzd2l0Y2gnLCAnZm9yJywgJ3doaWxlJywgJ2RvJywgJ3RyeScsICdjYXRjaCcsICdmaW5hbGx5JywgJ2NsYXNzJywgJ2V4dGVuZHMnLCAnc3VwZXInXTtcblxuICBDT0ZGRUVfS0VZV09SRFMgPSBbJ3VuZGVmaW5lZCcsICd0aGVuJywgJ3VubGVzcycsICd1bnRpbCcsICdsb29wJywgJ29mJywgJ2J5JywgJ3doZW4nXTtcblxuICBDT0ZGRUVfS0VZV09SRFMgPSBDT0ZGRUVfS0VZV09SRFMuY29uY2F0KFsnYXdhaXQnLCAnZGVmZXInXSk7XG5cbiAgQ09GRkVFX0FMSUFTX01BUCA9IHtcbiAgICBhbmQ6ICcmJicsXG4gICAgb3I6ICd8fCcsXG4gICAgaXM6ICc9PScsXG4gICAgaXNudDogJyE9JyxcbiAgICBub3Q6ICchJyxcbiAgICB5ZXM6ICd0cnVlJyxcbiAgICBubzogJ2ZhbHNlJyxcbiAgICBvbjogJ3RydWUnLFxuICAgIG9mZjogJ2ZhbHNlJ1xuICB9O1xuXG4gIENPRkZFRV9BTElBU0VTID0gKGZ1bmN0aW9uKCkge1xuICAgIHZhciBfcmVzdWx0cztcbiAgICBfcmVzdWx0cyA9IFtdO1xuICAgIGZvciAoa2V5IGluIENPRkZFRV9BTElBU19NQVApIHtcbiAgICAgIF9yZXN1bHRzLnB1c2goa2V5KTtcbiAgICB9XG4gICAgcmV0dXJuIF9yZXN1bHRzO1xuICB9KSgpO1xuXG4gIENPRkZFRV9LRVlXT1JEUyA9IENPRkZFRV9LRVlXT1JEUy5jb25jYXQoQ09GRkVFX0FMSUFTRVMpO1xuXG4gIFJFU0VSVkVEID0gWydjYXNlJywgJ2RlZmF1bHQnLCAnZnVuY3Rpb24nLCAndmFyJywgJ3ZvaWQnLCAnd2l0aCcsICdjb25zdCcsICdsZXQnLCAnZW51bScsICdleHBvcnQnLCAnaW1wb3J0JywgJ25hdGl2ZScsICdfX2hhc1Byb3AnLCAnX19leHRlbmRzJywgJ19fc2xpY2UnLCAnX19iaW5kJywgJ19faW5kZXhPZicsICdpbXBsZW1lbnRzJywgJ2ludGVyZmFjZScsICdwYWNrYWdlJywgJ3ByaXZhdGUnLCAncHJvdGVjdGVkJywgJ3B1YmxpYycsICdzdGF0aWMnXTtcblxuICBTVFJJQ1RfUFJPU0NSSUJFRCA9IFsnYXJndW1lbnRzJywgJ2V2YWwnLCAneWllbGQqJ107XG5cbiAgSlNfRk9SQklEREVOID0gSlNfS0VZV09SRFMuY29uY2F0KFJFU0VSVkVEKS5jb25jYXQoU1RSSUNUX1BST1NDUklCRUQpO1xuXG4gIGV4cG9ydHMuUkVTRVJWRUQgPSBSRVNFUlZFRC5jb25jYXQoSlNfS0VZV09SRFMpLmNvbmNhdChDT0ZGRUVfS0VZV09SRFMpLmNvbmNhdChTVFJJQ1RfUFJPU0NSSUJFRCk7XG5cbiAgZXhwb3J0cy5TVFJJQ1RfUFJPU0NSSUJFRCA9IFNUUklDVF9QUk9TQ1JJQkVEO1xuXG4gIEJPTSA9IDY1Mjc5O1xuXG4gIElERU5USUZJRVIgPSAvXihbJEEtWmEtel9cXHg3Zi1cXHVmZmZmXVskXFx3XFx4N2YtXFx1ZmZmZl0qKShbXlxcblxcU10qOig/ITopKT8vO1xuXG4gIE5VTUJFUiA9IC9eMGJbMDFdK3xeMG9bMC03XSt8XjB4W1xcZGEtZl0rfF5cXGQqXFwuP1xcZCsoPzplWystXT9cXGQrKT8vaTtcblxuICBIRVJFRE9DID0gL14oXCJcIlwifCcnJykoKD86XFxcXFtcXHNcXFNdfFteXFxcXF0pKj8pKD86XFxuW15cXG5cXFNdKik/XFwxLztcblxuICBPUEVSQVRPUiA9IC9eKD86Wy09XT58Wy0rKlxcLyU8PiZ8XiE/PV09fD4+Pj0/fChbLSs6XSlcXDF8KFsmfDw+KlxcLyVdKVxcMj0/fFxcPyhcXC58OjopfFxcLnsyLDN9KS87XG5cbiAgV0hJVEVTUEFDRSA9IC9eW15cXG5cXFNdKy87XG5cbiAgQ09NTUVOVCA9IC9eIyMjKFteI11bXFxzXFxTXSo/KSg/OiMjI1teXFxuXFxTXSp8IyMjJCl8Xig/OlxccyojKD8hIyNbXiNdKS4qKSsvO1xuXG4gIENPREUgPSAvXlstPV0+LztcblxuICBNVUxUSV9ERU5UID0gL14oPzpcXG5bXlxcblxcU10qKSsvO1xuXG4gIFNJTVBMRVNUUiA9IC9eJ1teXFxcXCddKig/OlxcXFxbXFxzXFxTXVteXFxcXCddKikqJy87XG5cbiAgSlNUT0tFTiA9IC9eYFteXFxcXGBdKig/OlxcXFwuW15cXFxcYF0qKSpgLztcblxuICBSRUdFWCA9IC9eKFxcLyg/IVtcXHM9XSlbXltcXC9cXG5cXFxcXSooPzooPzpcXFxcW1xcc1xcU118XFxbW15cXF1cXG5cXFxcXSooPzpcXFxcW1xcc1xcU11bXlxcXVxcblxcXFxdKikqXSlbXltcXC9cXG5cXFxcXSopKlxcLykoW2ltZ3ldezAsNH0pKD8hXFx3KS87XG5cbiAgSEVSRUdFWCA9IC9eXFwvezN9KCg/OlxcXFw/W1xcc1xcU10pKz8pXFwvezN9KFtpbWd5XXswLDR9KSg/IVxcdykvO1xuXG4gIEhFUkVHRVhfT01JVCA9IC8oKD86XFxcXFxcXFwpKyl8XFxcXChcXHN8XFwvKXxcXHMrKD86Iy4qKT8vZztcblxuICBNVUxUSUxJTkVSID0gL1xcbi9nO1xuXG4gIEhFUkVET0NfSU5ERU5UID0gL1xcbisoW15cXG5cXFNdKikvZztcblxuICBIRVJFRE9DX0lMTEVHQUwgPSAvXFwqXFwvLztcblxuICBMSU5FX0NPTlRJTlVFUiA9IC9eXFxzKig/Oix8XFw/P1xcLig/IVsuXFxkXSl8OjopLztcblxuICBUUkFJTElOR19TUEFDRVMgPSAvXFxzKyQvO1xuXG4gIENPTVBPVU5EX0FTU0lHTiA9IFsnLT0nLCAnKz0nLCAnLz0nLCAnKj0nLCAnJT0nLCAnfHw9JywgJyYmPScsICc/PScsICc8PD0nLCAnPj49JywgJz4+Pj0nLCAnJj0nLCAnXj0nLCAnfD0nLCAnKio9JywgJy8vPScsICclJT0nXTtcblxuICBVTkFSWSA9IFsnTkVXJywgJ1RZUEVPRicsICdERUxFVEUnLCAnRE8nXTtcblxuICBVTkFSWV9NQVRIID0gWychJywgJ34nXTtcblxuICBMT0dJQyA9IFsnJiYnLCAnfHwnLCAnJicsICd8JywgJ14nXTtcblxuICBTSElGVCA9IFsnPDwnLCAnPj4nLCAnPj4+J107XG5cbiAgQ09NUEFSRSA9IFsnPT0nLCAnIT0nLCAnPCcsICc+JywgJzw9JywgJz49J107XG5cbiAgTUFUSCA9IFsnKicsICcvJywgJyUnLCAnLy8nLCAnJSUnXTtcblxuICBSRUxBVElPTiA9IFsnSU4nLCAnT0YnLCAnSU5TVEFOQ0VPRiddO1xuXG4gIEJPT0wgPSBbJ1RSVUUnLCAnRkFMU0UnXTtcblxuICBOT1RfUkVHRVggPSBbJ05VTUJFUicsICdSRUdFWCcsICdCT09MJywgJ05VTEwnLCAnVU5ERUZJTkVEJywgJysrJywgJy0tJ107XG5cbiAgTk9UX1NQQUNFRF9SRUdFWCA9IE5PVF9SRUdFWC5jb25jYXQoJyknLCAnfScsICdUSElTJywgJ0lERU5USUZJRVInLCAnU1RSSU5HJywgJ10nKTtcblxuICBDQUxMQUJMRSA9IFsnSURFTlRJRklFUicsICdTVFJJTkcnLCAnUkVHRVgnLCAnKScsICddJywgJ30nLCAnPycsICc6OicsICdAJywgJ1RISVMnLCAnU1VQRVInXTtcblxuICBJTkRFWEFCTEUgPSBDQUxMQUJMRS5jb25jYXQoJ05VTUJFUicsICdCT09MJywgJ05VTEwnLCAnVU5ERUZJTkVEJyk7XG5cbiAgTElORV9CUkVBSyA9IFsnSU5ERU5UJywgJ09VVERFTlQnLCAnVEVSTUlOQVRPUiddO1xuXG4gIElOREVOVEFCTEVfQ0xPU0VSUyA9IFsnKScsICd9JywgJ10nXTtcblxuICBDQUxMQUJMRS5wdXNoKCdERUZFUicpO1xuXG59KS5jYWxsKHRoaXMpO1xuIiwiLy8gR2VuZXJhdGVkIGJ5IEljZWRDb2ZmZWVTY3JpcHQgMTA4LjAuMTFcbihmdW5jdGlvbigpIHtcbiAgdmFyIEFjY2VzcywgQXJyLCBBc3NpZ24sIEF3YWl0LCBCYXNlLCBCbG9jaywgQ2FsbCwgQ2xhc3MsIENsb3N1cmUsIENvZGUsIENvZGVGcmFnbWVudCwgQ29tbWVudCwgQ3BzQ2FzY2FkZSwgRGVmZXIsIEV4aXN0ZW5jZSwgRXhwYW5zaW9uLCBFeHRlbmRzLCBGb3IsIEhFWE5VTSwgSURFTlRJRklFUiwgSURFTlRJRklFUl9TVFIsIElTX1JFR0VYLCBJU19TVFJJTkcsIEljZWRSZXR1cm5WYWx1ZSwgSWNlZFJ1bnRpbWUsIEljZWRUYWlsQ2FsbCwgSWYsIEluLCBJbmRleCwgSW5saW5lUnVudGltZSwgTEVWRUxfQUNDRVNTLCBMRVZFTF9DT05ELCBMRVZFTF9MSVNULCBMRVZFTF9PUCwgTEVWRUxfUEFSRU4sIExFVkVMX1RPUCwgTGl0ZXJhbCwgTUVUSE9EX0RFRiwgTkVHQVRFLCBOTywgTlVMTCwgTlVNQkVSLCBPYmosIE9wLCBQYXJhbSwgUGFyZW5zLCBSRVNFUlZFRCwgUmFuZ2UsIFJldHVybiwgU0lNUExFTlVNLCBTVFJJQ1RfUFJPU0NSSUJFRCwgU2NvcGUsIFNsaWNlLCBTbG90LCBTcGxhdCwgU3dpdGNoLCBUQUIsIFRISVMsIFRocm93LCBUcnksIFVUSUxJVElFUywgVmFsdWUsIFdoaWxlLCBZRVMsIGFkZExvY2F0aW9uRGF0YUZuLCBjb21wYWN0LCBkZWwsIGVuZHMsIGV4dGVuZCwgZmxhdHRlbiwgZnJhZ21lbnRzVG9UZXh0LCBpY2VkLCBpc0xpdGVyYWxBcmd1bWVudHMsIGlzTGl0ZXJhbFRoaXMsIGxhc3QsIGxvY2F0aW9uRGF0YVRvU3RyaW5nLCBtZXJnZSwgbXVsdGlkZW50LCBwYXJzZU51bSwgcGF0aG1vZCwgcXVvdGVfZnVuY25hbWVfZm9yX2RlYnVnLCBxdW90ZV9wYXRoX2Zvcl9lbWlzc2lvbiwgcmVxdWlyZV90b3BfZGlyLCBzb21lLCBzdGFydHMsIHRocm93U3ludGF4RXJyb3IsIHVuZm9sZFNvYWssIHV0aWxpdHksIF9yZWYsIF9yZWYxLFxuICAgIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LFxuICAgIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9LFxuICAgIF9faW5kZXhPZiA9IFtdLmluZGV4T2YgfHwgZnVuY3Rpb24oaXRlbSkgeyBmb3IgKHZhciBpID0gMCwgbCA9IHRoaXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7IGlmIChpIGluIHRoaXMgJiYgdGhpc1tpXSA9PT0gaXRlbSkgcmV0dXJuIGk7IH0gcmV0dXJuIC0xOyB9LFxuICAgIF9fc2xpY2UgPSBbXS5zbGljZTtcblxuICBFcnJvci5zdGFja1RyYWNlTGltaXQgPSBJbmZpbml0eTtcblxuICBTY29wZSA9IHJlcXVpcmUoJy4vc2NvcGUnKS5TY29wZTtcblxuICBfcmVmID0gcmVxdWlyZSgnLi9sZXhlcicpLCBSRVNFUlZFRCA9IF9yZWYuUkVTRVJWRUQsIFNUUklDVF9QUk9TQ1JJQkVEID0gX3JlZi5TVFJJQ1RfUFJPU0NSSUJFRDtcblxuICBpY2VkID0gcmVxdWlyZSgnaWNlZC1ydW50aW1lJyk7XG5cbiAgcGF0aG1vZCA9IHJlcXVpcmUoJ3BhdGgnKTtcblxuICBfcmVmMSA9IHJlcXVpcmUoJy4vaGVscGVycycpLCBjb21wYWN0ID0gX3JlZjEuY29tcGFjdCwgZmxhdHRlbiA9IF9yZWYxLmZsYXR0ZW4sIGV4dGVuZCA9IF9yZWYxLmV4dGVuZCwgbWVyZ2UgPSBfcmVmMS5tZXJnZSwgZGVsID0gX3JlZjEuZGVsLCBzdGFydHMgPSBfcmVmMS5zdGFydHMsIGVuZHMgPSBfcmVmMS5lbmRzLCBsYXN0ID0gX3JlZjEubGFzdCwgc29tZSA9IF9yZWYxLnNvbWUsIGFkZExvY2F0aW9uRGF0YUZuID0gX3JlZjEuYWRkTG9jYXRpb25EYXRhRm4sIGxvY2F0aW9uRGF0YVRvU3RyaW5nID0gX3JlZjEubG9jYXRpb25EYXRhVG9TdHJpbmcsIHRocm93U3ludGF4RXJyb3IgPSBfcmVmMS50aHJvd1N5bnRheEVycm9yO1xuXG4gIGV4cG9ydHMuZXh0ZW5kID0gZXh0ZW5kO1xuXG4gIGV4cG9ydHMuYWRkTG9jYXRpb25EYXRhRm4gPSBhZGRMb2NhdGlvbkRhdGFGbjtcblxuICBZRVMgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfTtcblxuICBOTyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICBUSElTID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgTkVHQVRFID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5uZWdhdGVkID0gIXRoaXMubmVnYXRlZDtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBOVUxMID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG5ldyBWYWx1ZShuZXcgTGl0ZXJhbCgnbnVsbCcpKTtcbiAgfTtcblxuICBleHBvcnRzLkNvZGVGcmFnbWVudCA9IENvZGVGcmFnbWVudCA9IChmdW5jdGlvbigpIHtcbiAgICBmdW5jdGlvbiBDb2RlRnJhZ21lbnQocGFyZW50LCBjb2RlKSB7XG4gICAgICB2YXIgX3JlZjI7XG4gICAgICB0aGlzLmNvZGUgPSBcIlwiICsgY29kZTtcbiAgICAgIHRoaXMubG9jYXRpb25EYXRhID0gcGFyZW50ICE9IG51bGwgPyBwYXJlbnQubG9jYXRpb25EYXRhIDogdm9pZCAwO1xuICAgICAgdGhpcy50eXBlID0gKHBhcmVudCAhPSBudWxsID8gKF9yZWYyID0gcGFyZW50LmNvbnN0cnVjdG9yKSAhPSBudWxsID8gX3JlZjIubmFtZSA6IHZvaWQgMCA6IHZvaWQgMCkgfHwgJ3Vua25vd24nO1xuICAgIH1cblxuICAgIENvZGVGcmFnbWVudC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBcIlwiICsgdGhpcy5jb2RlICsgKHRoaXMubG9jYXRpb25EYXRhID8gXCI6IFwiICsgbG9jYXRpb25EYXRhVG9TdHJpbmcodGhpcy5sb2NhdGlvbkRhdGEpIDogJycpO1xuICAgIH07XG5cbiAgICByZXR1cm4gQ29kZUZyYWdtZW50O1xuXG4gIH0pKCk7XG5cbiAgZnJhZ21lbnRzVG9UZXh0ID0gZnVuY3Rpb24oZnJhZ21lbnRzKSB7XG4gICAgdmFyIGZyYWdtZW50O1xuICAgIHJldHVybiAoKGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIF9pLCBfbGVuLCBfcmVzdWx0cztcbiAgICAgIF9yZXN1bHRzID0gW107XG4gICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IGZyYWdtZW50cy5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICBmcmFnbWVudCA9IGZyYWdtZW50c1tfaV07XG4gICAgICAgIF9yZXN1bHRzLnB1c2goZnJhZ21lbnQuY29kZSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gX3Jlc3VsdHM7XG4gICAgfSkoKSkuam9pbignJyk7XG4gIH07XG5cbiAgZXhwb3J0cy5CYXNlID0gQmFzZSA9IChmdW5jdGlvbigpIHtcbiAgICBmdW5jdGlvbiBCYXNlKCkge1xuICAgICAgdGhpcy5pY2VkQ29udGludWF0aW9uQmxvY2sgPSBudWxsO1xuICAgICAgdGhpcy5pY2VkTG9vcEZsYWcgPSBmYWxzZTtcbiAgICAgIHRoaXMuaWNlZE5vZGVGbGFnID0gZmFsc2U7XG4gICAgICB0aGlzLmljZWRHb3RDcHNTcGxpdEZsYWcgPSBmYWxzZTtcbiAgICAgIHRoaXMuaWNlZENwc1Bpdm90RmxhZyA9IGZhbHNlO1xuICAgICAgdGhpcy5pY2VkSGFzQXV0b2NiRmxhZyA9IGZhbHNlO1xuICAgICAgdGhpcy5pY2VkRm91bmRBcmd1bWVudHMgPSBmYWxzZTtcbiAgICAgIHRoaXMuaWNlZFBhcmVudEF3YWl0ID0gbnVsbDtcbiAgICAgIHRoaXMuaWNlZENhbGxDb250aW51YXRpb25GbGFnID0gZmFsc2U7XG4gICAgfVxuXG4gICAgQmFzZS5wcm90b3R5cGUuY29tcGlsZSA9IGZ1bmN0aW9uKG8sIGx2bCkge1xuICAgICAgcmV0dXJuIGZyYWdtZW50c1RvVGV4dCh0aGlzLmNvbXBpbGVUb0ZyYWdtZW50cyhvLCBsdmwpKTtcbiAgICB9O1xuXG4gICAgQmFzZS5wcm90b3R5cGUuY29tcGlsZVRvRnJhZ21lbnRzID0gZnVuY3Rpb24obywgbHZsKSB7XG4gICAgICB2YXIgbm9kZTtcbiAgICAgIG8gPSBleHRlbmQoe30sIG8pO1xuICAgICAgaWYgKGx2bCkge1xuICAgICAgICBvLmxldmVsID0gbHZsO1xuICAgICAgfVxuICAgICAgbm9kZSA9IHRoaXMudW5mb2xkU29hayhvKSB8fCB0aGlzO1xuICAgICAgbm9kZS50YWIgPSBvLmluZGVudDtcbiAgICAgIGlmIChub2RlLmljZWRIYXNDb250aW51YXRpb24oKSAmJiAhbm9kZS5pY2VkR290Q3BzU3BsaXRGbGFnKSB7XG4gICAgICAgIHJldHVybiBub2RlLmljZWRDb21waWxlQ3BzKG8pO1xuICAgICAgfSBlbHNlIGlmIChvLmxldmVsID09PSBMRVZFTF9UT1AgfHwgIW5vZGUuaXNTdGF0ZW1lbnQobykpIHtcbiAgICAgICAgcmV0dXJuIG5vZGUuY29tcGlsZU5vZGUobyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gbm9kZS5jb21waWxlQ2xvc3VyZShvKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgQmFzZS5wcm90b3R5cGUuY29tcGlsZUNsb3N1cmUgPSBmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgYXJncywgYXJndW1lbnRzTm9kZSwgZnVuYywganVtcE5vZGUsIG1ldGg7XG4gICAgICBpZiAoanVtcE5vZGUgPSB0aGlzLmp1bXBzKCkpIHtcbiAgICAgICAganVtcE5vZGUuZXJyb3IoJ2Nhbm5vdCB1c2UgYSBwdXJlIHN0YXRlbWVudCBpbiBhbiBleHByZXNzaW9uJyk7XG4gICAgICB9XG4gICAgICBvLnNoYXJlZFNjb3BlID0gdHJ1ZTtcbiAgICAgIHRoaXMuaWNlZENsZWFyQXV0b2NiRmxhZ3MoKTtcbiAgICAgIGZ1bmMgPSBuZXcgQ29kZShbXSwgQmxvY2sud3JhcChbdGhpc10pKTtcbiAgICAgIGFyZ3MgPSBbXTtcbiAgICAgIGlmICgoYXJndW1lbnRzTm9kZSA9IHRoaXMuY29udGFpbnMoaXNMaXRlcmFsQXJndW1lbnRzKSkgfHwgdGhpcy5jb250YWlucyhpc0xpdGVyYWxUaGlzKSkge1xuICAgICAgICBhcmdzID0gW25ldyBMaXRlcmFsKCd0aGlzJyldO1xuICAgICAgICBpZiAoYXJndW1lbnRzTm9kZSkge1xuICAgICAgICAgIG1ldGggPSAnYXBwbHknO1xuICAgICAgICAgIGFyZ3MucHVzaChuZXcgTGl0ZXJhbCgnYXJndW1lbnRzJykpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG1ldGggPSAnY2FsbCc7XG4gICAgICAgIH1cbiAgICAgICAgZnVuYyA9IG5ldyBWYWx1ZShmdW5jLCBbbmV3IEFjY2VzcyhuZXcgTGl0ZXJhbChtZXRoKSldKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiAobmV3IENhbGwoZnVuYywgYXJncykpLmNvbXBpbGVOb2RlKG8pO1xuICAgIH07XG5cbiAgICBCYXNlLnByb3RvdHlwZS5jYWNoZSA9IGZ1bmN0aW9uKG8sIGxldmVsLCByZXVzZWQpIHtcbiAgICAgIHZhciByZWYsIHN1YjtcbiAgICAgIGlmICghdGhpcy5pc0NvbXBsZXgoKSkge1xuICAgICAgICByZWYgPSBsZXZlbCA/IHRoaXMuY29tcGlsZVRvRnJhZ21lbnRzKG8sIGxldmVsKSA6IHRoaXM7XG4gICAgICAgIHJldHVybiBbcmVmLCByZWZdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVmID0gbmV3IExpdGVyYWwocmV1c2VkIHx8IG8uc2NvcGUuZnJlZVZhcmlhYmxlKCdyZWYnKSk7XG4gICAgICAgIHN1YiA9IG5ldyBBc3NpZ24ocmVmLCB0aGlzKTtcbiAgICAgICAgaWYgKGxldmVsKSB7XG4gICAgICAgICAgcmV0dXJuIFtzdWIuY29tcGlsZVRvRnJhZ21lbnRzKG8sIGxldmVsKSwgW3RoaXMubWFrZUNvZGUocmVmLnZhbHVlKV1dO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBbc3ViLCByZWZdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIEJhc2UucHJvdG90eXBlLmNhY2hlVG9Db2RlRnJhZ21lbnRzID0gZnVuY3Rpb24oY2FjaGVWYWx1ZXMpIHtcbiAgICAgIHJldHVybiBbZnJhZ21lbnRzVG9UZXh0KGNhY2hlVmFsdWVzWzBdKSwgZnJhZ21lbnRzVG9UZXh0KGNhY2hlVmFsdWVzWzFdKV07XG4gICAgfTtcblxuICAgIEJhc2UucHJvdG90eXBlLm1ha2VSZXR1cm4gPSBmdW5jdGlvbihyZXMpIHtcbiAgICAgIHZhciBtZTtcbiAgICAgIG1lID0gdGhpcy51bndyYXBBbGwoKTtcbiAgICAgIGlmIChyZXMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDYWxsKG5ldyBMaXRlcmFsKFwiXCIgKyByZXMgKyBcIi5wdXNoXCIpLCBbbWVdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBuZXcgUmV0dXJuKG1lLCB0aGlzLmljZWRIYXNBdXRvY2JGbGFnKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgQmFzZS5wcm90b3R5cGUuY29udGFpbnMgPSBmdW5jdGlvbihwcmVkKSB7XG4gICAgICB2YXIgbm9kZTtcbiAgICAgIG5vZGUgPSB2b2lkIDA7XG4gICAgICB0aGlzLnRyYXZlcnNlQ2hpbGRyZW4oZmFsc2UsIGZ1bmN0aW9uKG4pIHtcbiAgICAgICAgaWYgKHByZWQobikpIHtcbiAgICAgICAgICBub2RlID0gbjtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIG5vZGU7XG4gICAgfTtcblxuICAgIEJhc2UucHJvdG90eXBlLmxhc3ROb25Db21tZW50ID0gZnVuY3Rpb24obGlzdCkge1xuICAgICAgdmFyIGk7XG4gICAgICBpID0gbGlzdC5sZW5ndGg7XG4gICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgIGlmICghKGxpc3RbaV0gaW5zdGFuY2VvZiBDb21tZW50KSkge1xuICAgICAgICAgIHJldHVybiBsaXN0W2ldO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xuXG4gICAgQmFzZS5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbihpZHQsIG5hbWUpIHtcbiAgICAgIHZhciBleHRyYXMsIHRyZWU7XG4gICAgICBpZiAoaWR0ID09IG51bGwpIHtcbiAgICAgICAgaWR0ID0gJyc7XG4gICAgICB9XG4gICAgICBpZiAobmFtZSA9PSBudWxsKSB7XG4gICAgICAgIG5hbWUgPSB0aGlzLmNvbnN0cnVjdG9yLm5hbWU7XG4gICAgICB9XG4gICAgICBleHRyYXMgPSBbXTtcbiAgICAgIGlmICh0aGlzLmljZWROb2RlRmxhZykge1xuICAgICAgICBleHRyYXMucHVzaChcIkFcIik7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5pY2VkTG9vcEZsYWcpIHtcbiAgICAgICAgZXh0cmFzLnB1c2goXCJMXCIpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuaWNlZENwc1Bpdm90RmxhZykge1xuICAgICAgICBleHRyYXMucHVzaChcIlBcIik7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5pY2VkSXNBdXRvY2JDb2RlKSB7XG4gICAgICAgIGV4dHJhcy5wdXNoKFwiQlwiKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmljZWRIYXNBdXRvY2JGbGFnKSB7XG4gICAgICAgIGV4dHJhcy5wdXNoKFwiQ1wiKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmljZWRQYXJlbnRBd2FpdCkge1xuICAgICAgICBleHRyYXMucHVzaChcIkRcIik7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5pY2VkRm91bmRBcmd1bWVudHMpIHtcbiAgICAgICAgZXh0cmFzLnB1c2goXCJHXCIpO1xuICAgICAgfVxuICAgICAgaWYgKGV4dHJhcy5sZW5ndGgpIHtcbiAgICAgICAgZXh0cmFzID0gXCIgKFwiICsgZXh0cmFzLmpvaW4oJycpICsgXCIpXCI7XG4gICAgICB9XG4gICAgICB0cmVlID0gJ1xcbicgKyBpZHQgKyBuYW1lO1xuICAgICAgdHJlZSA9ICdcXG4nICsgaWR0ICsgbmFtZTtcbiAgICAgIGlmICh0aGlzLnNvYWspIHtcbiAgICAgICAgdHJlZSArPSAnPyc7XG4gICAgICB9XG4gICAgICB0cmVlICs9IGV4dHJhcztcbiAgICAgIHRoaXMuZWFjaENoaWxkKGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgICAgcmV0dXJuIHRyZWUgKz0gbm9kZS50b1N0cmluZyhpZHQgKyBUQUIpO1xuICAgICAgfSk7XG4gICAgICBpZiAodGhpcy5pY2VkQ29udGludWF0aW9uQmxvY2spIHtcbiAgICAgICAgaWR0ICs9IFRBQjtcbiAgICAgICAgdHJlZSArPSAnXFxuJyArIGlkdCArIFwiQ29udGludWF0aW9uXCI7XG4gICAgICAgIHRyZWUgKz0gdGhpcy5pY2VkQ29udGludWF0aW9uQmxvY2sudG9TdHJpbmcoaWR0ICsgVEFCKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0cmVlO1xuICAgIH07XG5cbiAgICBCYXNlLnByb3RvdHlwZS5lYWNoQ2hpbGQgPSBmdW5jdGlvbihmdW5jKSB7XG4gICAgICB2YXIgYXR0ciwgY2hpbGQsIF9pLCBfaiwgX2xlbiwgX2xlbjEsIF9yZWYyLCBfcmVmMztcbiAgICAgIGlmICghdGhpcy5jaGlsZHJlbikge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cbiAgICAgIF9yZWYyID0gdGhpcy5jaGlsZHJlbjtcbiAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZjIubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgYXR0ciA9IF9yZWYyW19pXTtcbiAgICAgICAgaWYgKHRoaXNbYXR0cl0pIHtcbiAgICAgICAgICBfcmVmMyA9IGZsYXR0ZW4oW3RoaXNbYXR0cl1dKTtcbiAgICAgICAgICBmb3IgKF9qID0gMCwgX2xlbjEgPSBfcmVmMy5sZW5ndGg7IF9qIDwgX2xlbjE7IF9qKyspIHtcbiAgICAgICAgICAgIGNoaWxkID0gX3JlZjNbX2pdO1xuICAgICAgICAgICAgaWYgKGZ1bmMoY2hpbGQpID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBCYXNlLnByb3RvdHlwZS50cmF2ZXJzZUNoaWxkcmVuID0gZnVuY3Rpb24oY3Jvc3NTY29wZSwgZnVuYykge1xuICAgICAgcmV0dXJuIHRoaXMuZWFjaENoaWxkKGZ1bmN0aW9uKGNoaWxkKSB7XG4gICAgICAgIHZhciByZWN1cjtcbiAgICAgICAgcmVjdXIgPSBmdW5jKGNoaWxkKTtcbiAgICAgICAgaWYgKHJlY3VyICE9PSBmYWxzZSkge1xuICAgICAgICAgIHJldHVybiBjaGlsZC50cmF2ZXJzZUNoaWxkcmVuKGNyb3NzU2NvcGUsIGZ1bmMpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgQmFzZS5wcm90b3R5cGUuaW52ZXJ0ID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gbmV3IE9wKCchJywgdGhpcyk7XG4gICAgfTtcblxuICAgIEJhc2UucHJvdG90eXBlLnVud3JhcEFsbCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIG5vZGU7XG4gICAgICBub2RlID0gdGhpcztcbiAgICAgIHdoaWxlIChub2RlICE9PSAobm9kZSA9IG5vZGUudW53cmFwKCkpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG5vZGU7XG4gICAgfTtcblxuICAgIEJhc2UucHJvdG90eXBlLmZsYXR0ZW5DaGlsZHJlbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGF0dHIsIGNoaWxkLCBvdXQsIF9pLCBfaiwgX2xlbiwgX2xlbjEsIF9yZWYyLCBfcmVmMztcbiAgICAgIG91dCA9IFtdO1xuICAgICAgX3JlZjIgPSB0aGlzLmNoaWxkcmVuO1xuICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmMi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICBhdHRyID0gX3JlZjJbX2ldO1xuICAgICAgICBpZiAodGhpc1thdHRyXSkge1xuICAgICAgICAgIF9yZWYzID0gZmxhdHRlbihbdGhpc1thdHRyXV0pO1xuICAgICAgICAgIGZvciAoX2ogPSAwLCBfbGVuMSA9IF9yZWYzLmxlbmd0aDsgX2ogPCBfbGVuMTsgX2orKykge1xuICAgICAgICAgICAgY2hpbGQgPSBfcmVmM1tfal07XG4gICAgICAgICAgICBvdXQucHVzaChjaGlsZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gb3V0O1xuICAgIH07XG5cbiAgICBCYXNlLnByb3RvdHlwZS5pY2VkQ29tcGlsZUNwcyA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBjb2RlO1xuICAgICAgdGhpcy5pY2VkR290Q3BzU3BsaXRGbGFnID0gdHJ1ZTtcbiAgICAgIGNvZGUgPSBDcHNDYXNjYWRlLndyYXAodGhpcywgdGhpcy5pY2VkQ29udGludWF0aW9uQmxvY2ssIG51bGwsIG8pO1xuICAgICAgby5zaGFyZWRTY29wZSA9IHRydWU7XG4gICAgICByZXR1cm4gY29kZS5jb21waWxlTm9kZShvKTtcbiAgICB9O1xuXG4gICAgQmFzZS5wcm90b3R5cGUuaWNlZFdhbGtBc3QgPSBmdW5jdGlvbihwLCBvKSB7XG4gICAgICB2YXIgY2hpbGQsIF9pLCBfbGVuLCBfcmVmMjtcbiAgICAgIHRoaXMuaWNlZFBhcmVudEF3YWl0ID0gcDtcbiAgICAgIHRoaXMuaWNlZEhhc0F1dG9jYkZsYWcgPSBvLmZvdW5kQXV0b2NiO1xuICAgICAgX3JlZjIgPSB0aGlzLmZsYXR0ZW5DaGlsZHJlbigpO1xuICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmMi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICBjaGlsZCA9IF9yZWYyW19pXTtcbiAgICAgICAgaWYgKGNoaWxkLmljZWRXYWxrQXN0KHAsIG8pKSB7XG4gICAgICAgICAgdGhpcy5pY2VkTm9kZUZsYWcgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5pY2VkTm9kZUZsYWc7XG4gICAgfTtcblxuICAgIEJhc2UucHJvdG90eXBlLmljZWRXYWxrQXN0TG9vcHMgPSBmdW5jdGlvbihmbG9vZCkge1xuICAgICAgdmFyIGNoaWxkLCBfaSwgX2xlbiwgX3JlZjI7XG4gICAgICBpZiAodGhpcy5pc0xvb3AoKSAmJiB0aGlzLmljZWROb2RlRmxhZykge1xuICAgICAgICBmbG9vZCA9IHRydWU7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5pc0xvb3AoKSAmJiAhdGhpcy5pY2VkTm9kZUZsYWcpIHtcbiAgICAgICAgZmxvb2QgPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHRoaXMuaWNlZExvb3BGbGFnID0gZmxvb2Q7XG4gICAgICBfcmVmMiA9IHRoaXMuZmxhdHRlbkNoaWxkcmVuKCk7XG4gICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYyLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICAgIGNoaWxkID0gX3JlZjJbX2ldO1xuICAgICAgICBpZiAoY2hpbGQuaWNlZFdhbGtBc3RMb29wcyhmbG9vZCkpIHtcbiAgICAgICAgICB0aGlzLmljZWRMb29wRmxhZyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLmljZWRMb29wRmxhZztcbiAgICB9O1xuXG4gICAgQmFzZS5wcm90b3R5cGUuaWNlZFdhbGtDcHNQaXZvdHMgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBjaGlsZCwgX2ksIF9sZW4sIF9yZWYyO1xuICAgICAgaWYgKHRoaXMuaWNlZE5vZGVGbGFnIHx8ICh0aGlzLmljZWRMb29wRmxhZyAmJiB0aGlzLmljZWRJc0p1bXAoKSkpIHtcbiAgICAgICAgdGhpcy5pY2VkQ3BzUGl2b3RGbGFnID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIF9yZWYyID0gdGhpcy5mbGF0dGVuQ2hpbGRyZW4oKTtcbiAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZjIubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgY2hpbGQgPSBfcmVmMltfaV07XG4gICAgICAgIGlmIChjaGlsZC5pY2VkV2Fsa0Nwc1Bpdm90cygpKSB7XG4gICAgICAgICAgdGhpcy5pY2VkQ3BzUGl2b3RGbGFnID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuaWNlZENwc1Bpdm90RmxhZztcbiAgICB9O1xuXG4gICAgQmFzZS5wcm90b3R5cGUuaWNlZENsZWFyQXV0b2NiRmxhZ3MgPSBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMuaWNlZEhhc0F1dG9jYkZsYWcgPSBmYWxzZTtcbiAgICAgIHJldHVybiB0aGlzLnRyYXZlcnNlQ2hpbGRyZW4oZmFsc2UsIGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgICAgbm9kZS5pY2VkSGFzQXV0b2NiRmxhZyA9IGZhbHNlO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBCYXNlLnByb3RvdHlwZS5pY2VkQ3BzUm90YXRlID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgY2hpbGQsIF9pLCBfbGVuLCBfcmVmMjtcbiAgICAgIF9yZWYyID0gdGhpcy5mbGF0dGVuQ2hpbGRyZW4oKTtcbiAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZjIubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgY2hpbGQgPSBfcmVmMltfaV07XG4gICAgICAgIGNoaWxkLmljZWRDcHNSb3RhdGUoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBCYXNlLnByb3RvdHlwZS5pY2VkSXNDcHNQaXZvdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMuaWNlZENwc1Bpdm90RmxhZztcbiAgICB9O1xuXG4gICAgQmFzZS5wcm90b3R5cGUuaWNlZE5lc3RDb250aW51YXRpb25CbG9jayA9IGZ1bmN0aW9uKGIpIHtcbiAgICAgIHJldHVybiB0aGlzLmljZWRDb250aW51YXRpb25CbG9jayA9IGI7XG4gICAgfTtcblxuICAgIEJhc2UucHJvdG90eXBlLmljZWRIYXNDb250aW51YXRpb24gPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiAhIXRoaXMuaWNlZENvbnRpbnVhdGlvbkJsb2NrO1xuICAgIH07XG5cbiAgICBCYXNlLnByb3RvdHlwZS5pY2VkQ2FsbENvbnRpbnVhdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMuaWNlZENhbGxDb250aW51YXRpb25GbGFnID0gdHJ1ZTtcbiAgICB9O1xuXG4gICAgQmFzZS5wcm90b3R5cGUuaWNlZFdyYXBDb250aW51YXRpb24gPSBOTztcblxuICAgIEJhc2UucHJvdG90eXBlLmljZWRJc0p1bXAgPSBOTztcblxuICAgIEJhc2UucHJvdG90eXBlLmljZWRVbndyYXAgPSBmdW5jdGlvbihlKSB7XG4gICAgICBpZiAoZS5pY2VkSGFzQ29udGludWF0aW9uKCkgJiYgdGhpcy5pY2VkSGFzQ29udGludWF0aW9uKCkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAodGhpcy5pY2VkSGFzQ29udGludWF0aW9uKCkpIHtcbiAgICAgICAgICBlLmljZWRDb250aW51YXRpb25CbG9jayA9IHRoaXMuaWNlZENvbnRpbnVhdGlvbkJsb2NrO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBCYXNlLnByb3RvdHlwZS5pY2VkU3RhdGVtZW50QXNzZXJ0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAodGhpcy5pY2VkSXNDcHNQaXZvdCgpKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVycm9yKFwiYXdhaXQnZWQgc3RhdGVtZW50cyBjYW4ndCBhY3QgYXMgZXhwcmVzc2lvbnNcIik7XG4gICAgICB9XG4gICAgfTtcblxuICAgIEJhc2UucHJvdG90eXBlLmNoaWxkcmVuID0gW107XG5cbiAgICBCYXNlLnByb3RvdHlwZS5pc1N0YXRlbWVudCA9IE5PO1xuXG4gICAgQmFzZS5wcm90b3R5cGUuanVtcHMgPSBOTztcblxuICAgIEJhc2UucHJvdG90eXBlLmlzQ29tcGxleCA9IFlFUztcblxuICAgIEJhc2UucHJvdG90eXBlLmlzQ2hhaW5hYmxlID0gTk87XG5cbiAgICBCYXNlLnByb3RvdHlwZS5pc0Fzc2lnbmFibGUgPSBOTztcblxuICAgIEJhc2UucHJvdG90eXBlLmlzTG9vcCA9IE5PO1xuXG4gICAgQmFzZS5wcm90b3R5cGUudW53cmFwID0gVEhJUztcblxuICAgIEJhc2UucHJvdG90eXBlLnVuZm9sZFNvYWsgPSBOTztcblxuICAgIEJhc2UucHJvdG90eXBlLmFzc2lnbnMgPSBOTztcblxuICAgIEJhc2UucHJvdG90eXBlLnVwZGF0ZUxvY2F0aW9uRGF0YUlmTWlzc2luZyA9IGZ1bmN0aW9uKGxvY2F0aW9uRGF0YSkge1xuICAgICAgaWYgKHRoaXMubG9jYXRpb25EYXRhKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuICAgICAgdGhpcy5sb2NhdGlvbkRhdGEgPSBsb2NhdGlvbkRhdGE7XG4gICAgICByZXR1cm4gdGhpcy5lYWNoQ2hpbGQoZnVuY3Rpb24oY2hpbGQpIHtcbiAgICAgICAgcmV0dXJuIGNoaWxkLnVwZGF0ZUxvY2F0aW9uRGF0YUlmTWlzc2luZyhsb2NhdGlvbkRhdGEpO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIEJhc2UucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24obWVzc2FnZSkge1xuICAgICAgcmV0dXJuIHRocm93U3ludGF4RXJyb3IobWVzc2FnZSwgdGhpcy5sb2NhdGlvbkRhdGEpO1xuICAgIH07XG5cbiAgICBCYXNlLnByb3RvdHlwZS5tYWtlQ29kZSA9IGZ1bmN0aW9uKGNvZGUpIHtcbiAgICAgIHJldHVybiBuZXcgQ29kZUZyYWdtZW50KHRoaXMsIGNvZGUpO1xuICAgIH07XG5cbiAgICBCYXNlLnByb3RvdHlwZS53cmFwSW5CcmFjZXMgPSBmdW5jdGlvbihmcmFnbWVudHMpIHtcbiAgICAgIHJldHVybiBbXS5jb25jYXQodGhpcy5tYWtlQ29kZSgnKCcpLCBmcmFnbWVudHMsIHRoaXMubWFrZUNvZGUoJyknKSk7XG4gICAgfTtcblxuICAgIEJhc2UucHJvdG90eXBlLmpvaW5GcmFnbWVudEFycmF5cyA9IGZ1bmN0aW9uKGZyYWdtZW50c0xpc3QsIGpvaW5TdHIpIHtcbiAgICAgIHZhciBhbnN3ZXIsIGZyYWdtZW50cywgaSwgX2ksIF9sZW47XG4gICAgICBhbnN3ZXIgPSBbXTtcbiAgICAgIGZvciAoaSA9IF9pID0gMCwgX2xlbiA9IGZyYWdtZW50c0xpc3QubGVuZ3RoOyBfaSA8IF9sZW47IGkgPSArK19pKSB7XG4gICAgICAgIGZyYWdtZW50cyA9IGZyYWdtZW50c0xpc3RbaV07XG4gICAgICAgIGlmIChpKSB7XG4gICAgICAgICAgYW5zd2VyLnB1c2godGhpcy5tYWtlQ29kZShqb2luU3RyKSk7XG4gICAgICAgIH1cbiAgICAgICAgYW5zd2VyID0gYW5zd2VyLmNvbmNhdChmcmFnbWVudHMpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGFuc3dlcjtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEJhc2U7XG5cbiAgfSkoKTtcblxuICBleHBvcnRzLkJsb2NrID0gQmxvY2sgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEJsb2NrLCBfc3VwZXIpO1xuXG4gICAgZnVuY3Rpb24gQmxvY2sobm9kZXMpIHtcbiAgICAgIEJsb2NrLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO1xuICAgICAgdGhpcy5leHByZXNzaW9ucyA9IGNvbXBhY3QoZmxhdHRlbihub2RlcyB8fCBbXSkpO1xuICAgIH1cblxuICAgIEJsb2NrLnByb3RvdHlwZS5jaGlsZHJlbiA9IFsnZXhwcmVzc2lvbnMnXTtcblxuICAgIEJsb2NrLnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24obm9kZSkge1xuICAgICAgdGhpcy5leHByZXNzaW9ucy5wdXNoKG5vZGUpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIEJsb2NrLnByb3RvdHlwZS5wb3AgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLmV4cHJlc3Npb25zLnBvcCgpO1xuICAgIH07XG5cbiAgICBCbG9jay5wcm90b3R5cGUudW5zaGlmdCA9IGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgIHRoaXMuZXhwcmVzc2lvbnMudW5zaGlmdChub2RlKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBCbG9jay5wcm90b3R5cGUudW53cmFwID0gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAodGhpcy5leHByZXNzaW9ucy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaWNlZFVud3JhcCh0aGlzLmV4cHJlc3Npb25zWzBdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBCbG9jay5wcm90b3R5cGUuaXNFbXB0eSA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuICF0aGlzLmV4cHJlc3Npb25zLmxlbmd0aDtcbiAgICB9O1xuXG4gICAgQmxvY2sucHJvdG90eXBlLmlzU3RhdGVtZW50ID0gZnVuY3Rpb24obykge1xuICAgICAgdmFyIGV4cCwgX2ksIF9sZW4sIF9yZWYyO1xuICAgICAgX3JlZjIgPSB0aGlzLmV4cHJlc3Npb25zO1xuICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmMi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICBleHAgPSBfcmVmMltfaV07XG4gICAgICAgIGlmIChleHAuaXNTdGF0ZW1lbnQobykpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG5cbiAgICBCbG9jay5wcm90b3R5cGUuanVtcHMgPSBmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgZXhwLCBqdW1wTm9kZSwgX2ksIF9sZW4sIF9yZWYyO1xuICAgICAgX3JlZjIgPSB0aGlzLmV4cHJlc3Npb25zO1xuICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmMi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICBleHAgPSBfcmVmMltfaV07XG4gICAgICAgIGlmIChqdW1wTm9kZSA9IGV4cC5qdW1wcyhvKSkge1xuICAgICAgICAgIHJldHVybiBqdW1wTm9kZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICBCbG9jay5wcm90b3R5cGUubWFrZVJldHVybiA9IGZ1bmN0aW9uKHJlcykge1xuICAgICAgdmFyIGV4cHIsIGZvdW5kUmV0dXJuLCBsZW47XG4gICAgICBsZW4gPSB0aGlzLmV4cHJlc3Npb25zLmxlbmd0aDtcbiAgICAgIGZvdW5kUmV0dXJuID0gZmFsc2U7XG4gICAgICB3aGlsZSAobGVuLS0pIHtcbiAgICAgICAgZXhwciA9IHRoaXMuZXhwcmVzc2lvbnNbbGVuXTtcbiAgICAgICAgaWYgKCEoZXhwciBpbnN0YW5jZW9mIENvbW1lbnQpKSB7XG4gICAgICAgICAgdGhpcy5leHByZXNzaW9uc1tsZW5dID0gZXhwci5tYWtlUmV0dXJuKHJlcyk7XG4gICAgICAgICAgaWYgKGV4cHIgaW5zdGFuY2VvZiBSZXR1cm4gJiYgIWV4cHIuZXhwcmVzc2lvbiAmJiAhZXhwci5pY2VkSGFzQXV0b2NiRmxhZykge1xuICAgICAgICAgICAgdGhpcy5leHByZXNzaW9ucy5zcGxpY2UobGVuLCAxKTtcbiAgICAgICAgICAgIGZvdW5kUmV0dXJuID0gdHJ1ZTtcbiAgICAgICAgICB9IGVsc2UgaWYgKCEoZXhwciBpbnN0YW5jZW9mIElmKSB8fCBleHByLmVsc2VCb2R5KSB7XG4gICAgICAgICAgICBmb3VuZFJldHVybiA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5pY2VkSGFzQXV0b2NiRmxhZyAmJiAhdGhpcy5pY2VkTm9kZUZsYWcgJiYgIWZvdW5kUmV0dXJuKSB7XG4gICAgICAgIHRoaXMuZXhwcmVzc2lvbnMucHVzaChuZXcgUmV0dXJuKG51bGwsIHRydWUpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBCbG9jay5wcm90b3R5cGUuY29tcGlsZVRvRnJhZ21lbnRzID0gZnVuY3Rpb24obywgbGV2ZWwpIHtcbiAgICAgIGlmIChvID09IG51bGwpIHtcbiAgICAgICAgbyA9IHt9O1xuICAgICAgfVxuICAgICAgaWYgKG8uc2NvcGUpIHtcbiAgICAgICAgcmV0dXJuIEJsb2NrLl9fc3VwZXJfXy5jb21waWxlVG9GcmFnbWVudHMuY2FsbCh0aGlzLCBvLCBsZXZlbCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdGhpcy5jb21waWxlUm9vdChvKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgQmxvY2sucHJvdG90eXBlLmNvbXBpbGVOb2RlID0gZnVuY3Rpb24obykge1xuICAgICAgdmFyIGFuc3dlciwgY29tcGlsZWROb2RlcywgZnJhZ21lbnRzLCBpbmRleCwgbm9kZSwgdG9wLCBfaSwgX2xlbiwgX3JlZjI7XG4gICAgICB0aGlzLnRhYiA9IG8uaW5kZW50O1xuICAgICAgdG9wID0gby5sZXZlbCA9PT0gTEVWRUxfVE9QO1xuICAgICAgY29tcGlsZWROb2RlcyA9IFtdO1xuICAgICAgX3JlZjIgPSB0aGlzLmV4cHJlc3Npb25zO1xuICAgICAgZm9yIChpbmRleCA9IF9pID0gMCwgX2xlbiA9IF9yZWYyLmxlbmd0aDsgX2kgPCBfbGVuOyBpbmRleCA9ICsrX2kpIHtcbiAgICAgICAgbm9kZSA9IF9yZWYyW2luZGV4XTtcbiAgICAgICAgbm9kZSA9IG5vZGUudW53cmFwQWxsKCk7XG4gICAgICAgIG5vZGUgPSBub2RlLnVuZm9sZFNvYWsobykgfHwgbm9kZTtcbiAgICAgICAgaWYgKG5vZGUgaW5zdGFuY2VvZiBCbG9jaykge1xuICAgICAgICAgIGNvbXBpbGVkTm9kZXMucHVzaChub2RlLmNvbXBpbGVOb2RlKG8pKTtcbiAgICAgICAgfSBlbHNlIGlmICh0b3ApIHtcbiAgICAgICAgICBub2RlLmZyb250ID0gdHJ1ZTtcbiAgICAgICAgICBmcmFnbWVudHMgPSBub2RlLmNvbXBpbGVUb0ZyYWdtZW50cyhvKTtcbiAgICAgICAgICBpZiAoIW5vZGUuaXNTdGF0ZW1lbnQobykpIHtcbiAgICAgICAgICAgIGZyYWdtZW50cy51bnNoaWZ0KHRoaXMubWFrZUNvZGUoXCJcIiArIHRoaXMudGFiKSk7XG4gICAgICAgICAgICBmcmFnbWVudHMucHVzaCh0aGlzLm1ha2VDb2RlKFwiO1wiKSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbXBpbGVkTm9kZXMucHVzaChmcmFnbWVudHMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbXBpbGVkTm9kZXMucHVzaChub2RlLmNvbXBpbGVUb0ZyYWdtZW50cyhvLCBMRVZFTF9MSVNUKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICh0b3ApIHtcbiAgICAgICAgaWYgKHRoaXMuc3BhY2VkKSB7XG4gICAgICAgICAgcmV0dXJuIFtdLmNvbmNhdCh0aGlzLmpvaW5GcmFnbWVudEFycmF5cyhjb21waWxlZE5vZGVzLCAnXFxuXFxuJyksIHRoaXMubWFrZUNvZGUoXCJcXG5cIikpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiB0aGlzLmpvaW5GcmFnbWVudEFycmF5cyhjb21waWxlZE5vZGVzLCAnXFxuJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChjb21waWxlZE5vZGVzLmxlbmd0aCkge1xuICAgICAgICBhbnN3ZXIgPSB0aGlzLmpvaW5GcmFnbWVudEFycmF5cyhjb21waWxlZE5vZGVzLCAnLCAnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFuc3dlciA9IFt0aGlzLm1ha2VDb2RlKFwidm9pZCAwXCIpXTtcbiAgICAgIH1cbiAgICAgIGlmIChjb21waWxlZE5vZGVzLmxlbmd0aCA+IDEgJiYgby5sZXZlbCA+PSBMRVZFTF9MSVNUKSB7XG4gICAgICAgIHJldHVybiB0aGlzLndyYXBJbkJyYWNlcyhhbnN3ZXIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGFuc3dlcjtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgQmxvY2sucHJvdG90eXBlLmNvbXBpbGVSb290ID0gZnVuY3Rpb24obykge1xuICAgICAgdmFyIGV4cCwgZnJhZ21lbnRzLCBpLCBuYW1lLCBwcmVsdWRlLCBwcmVsdWRlRXhwcywgcmVzdCwgX2ksIF9sZW4sIF9yZWYyO1xuICAgICAgby5pbmRlbnQgPSBvLmJhcmUgPyAnJyA6IFRBQjtcbiAgICAgIG8ubGV2ZWwgPSBMRVZFTF9UT1A7XG4gICAgICB0aGlzLnNwYWNlZCA9IHRydWU7XG4gICAgICBvLnNjb3BlID0gbmV3IFNjb3BlKG51bGwsIHRoaXMsIG51bGwpO1xuICAgICAgX3JlZjIgPSBvLmxvY2FscyB8fCBbXTtcbiAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZjIubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgbmFtZSA9IF9yZWYyW19pXTtcbiAgICAgICAgby5zY29wZS5wYXJhbWV0ZXIobmFtZSk7XG4gICAgICB9XG4gICAgICBwcmVsdWRlID0gW107XG4gICAgICBpZiAoIW8uYmFyZSkge1xuICAgICAgICBwcmVsdWRlRXhwcyA9IChmdW5jdGlvbigpIHtcbiAgICAgICAgICB2YXIgX2osIF9sZW4xLCBfcmVmMywgX3Jlc3VsdHM7XG4gICAgICAgICAgX3JlZjMgPSB0aGlzLmV4cHJlc3Npb25zO1xuICAgICAgICAgIF9yZXN1bHRzID0gW107XG4gICAgICAgICAgZm9yIChpID0gX2ogPSAwLCBfbGVuMSA9IF9yZWYzLmxlbmd0aDsgX2ogPCBfbGVuMTsgaSA9ICsrX2opIHtcbiAgICAgICAgICAgIGV4cCA9IF9yZWYzW2ldO1xuICAgICAgICAgICAgaWYgKCEoZXhwLnVud3JhcCgpIGluc3RhbmNlb2YgQ29tbWVudCkpIHtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBfcmVzdWx0cy5wdXNoKGV4cCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBfcmVzdWx0cztcbiAgICAgICAgfSkuY2FsbCh0aGlzKTtcbiAgICAgICAgcmVzdCA9IHRoaXMuZXhwcmVzc2lvbnMuc2xpY2UocHJlbHVkZUV4cHMubGVuZ3RoKTtcbiAgICAgICAgdGhpcy5leHByZXNzaW9ucyA9IHByZWx1ZGVFeHBzO1xuICAgICAgICBpZiAocHJlbHVkZUV4cHMubGVuZ3RoKSB7XG4gICAgICAgICAgcHJlbHVkZSA9IHRoaXMuY29tcGlsZU5vZGUobWVyZ2Uobywge1xuICAgICAgICAgICAgaW5kZW50OiAnJ1xuICAgICAgICAgIH0pKTtcbiAgICAgICAgICBwcmVsdWRlLnB1c2godGhpcy5tYWtlQ29kZShcIlxcblwiKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5leHByZXNzaW9ucyA9IHJlc3Q7XG4gICAgICB9XG4gICAgICBmcmFnbWVudHMgPSB0aGlzLmNvbXBpbGVXaXRoRGVjbGFyYXRpb25zKG8pO1xuICAgICAgaWYgKG8uYmFyZSkge1xuICAgICAgICByZXR1cm4gZnJhZ21lbnRzO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFtdLmNvbmNhdChwcmVsdWRlLCB0aGlzLm1ha2VDb2RlKFwiKGZ1bmN0aW9uKCkge1xcblwiKSwgZnJhZ21lbnRzLCB0aGlzLm1ha2VDb2RlKFwiXFxufSkuY2FsbCh0aGlzKTtcXG5cIikpO1xuICAgIH07XG5cbiAgICBCbG9jay5wcm90b3R5cGUuY29tcGlsZVdpdGhEZWNsYXJhdGlvbnMgPSBmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgYXNzaWducywgZGVjbGFycywgZXhwLCBmcmFnbWVudHMsIGksIHBvc3QsIHJlc3QsIHNjb3BlLCBzcGFjZWQsIF9pLCBfbGVuLCBfcmVmMiwgX3JlZjMsIF9yZWY0O1xuICAgICAgZnJhZ21lbnRzID0gW107XG4gICAgICBwb3N0ID0gW107XG4gICAgICBfcmVmMiA9IHRoaXMuZXhwcmVzc2lvbnM7XG4gICAgICBmb3IgKGkgPSBfaSA9IDAsIF9sZW4gPSBfcmVmMi5sZW5ndGg7IF9pIDwgX2xlbjsgaSA9ICsrX2kpIHtcbiAgICAgICAgZXhwID0gX3JlZjJbaV07XG4gICAgICAgIGV4cCA9IGV4cC51bndyYXAoKTtcbiAgICAgICAgaWYgKCEoZXhwIGluc3RhbmNlb2YgQ29tbWVudCB8fCBleHAgaW5zdGFuY2VvZiBMaXRlcmFsKSkge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBvID0gbWVyZ2Uobywge1xuICAgICAgICBsZXZlbDogTEVWRUxfVE9QXG4gICAgICB9KTtcbiAgICAgIGlmIChpKSB7XG4gICAgICAgIHJlc3QgPSB0aGlzLmV4cHJlc3Npb25zLnNwbGljZShpLCA5ZTkpO1xuICAgICAgICBfcmVmMyA9IFt0aGlzLnNwYWNlZCwgZmFsc2VdLCBzcGFjZWQgPSBfcmVmM1swXSwgdGhpcy5zcGFjZWQgPSBfcmVmM1sxXTtcbiAgICAgICAgX3JlZjQgPSBbdGhpcy5jb21waWxlTm9kZShvKSwgc3BhY2VkXSwgZnJhZ21lbnRzID0gX3JlZjRbMF0sIHRoaXMuc3BhY2VkID0gX3JlZjRbMV07XG4gICAgICAgIHRoaXMuZXhwcmVzc2lvbnMgPSByZXN0O1xuICAgICAgfVxuICAgICAgcG9zdCA9IHRoaXMuY29tcGlsZU5vZGUobyk7XG4gICAgICBzY29wZSA9IG8uc2NvcGU7XG4gICAgICBpZiAoc2NvcGUuZXhwcmVzc2lvbnMgPT09IHRoaXMpIHtcbiAgICAgICAgZGVjbGFycyA9IG8uc2NvcGUuaGFzRGVjbGFyYXRpb25zKCk7XG4gICAgICAgIGFzc2lnbnMgPSBzY29wZS5oYXNBc3NpZ25tZW50cztcbiAgICAgICAgaWYgKGRlY2xhcnMgfHwgYXNzaWducykge1xuICAgICAgICAgIGlmIChpKSB7XG4gICAgICAgICAgICBmcmFnbWVudHMucHVzaCh0aGlzLm1ha2VDb2RlKCdcXG4nKSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGZyYWdtZW50cy5wdXNoKHRoaXMubWFrZUNvZGUoXCJcIiArIHRoaXMudGFiICsgXCJ2YXIgXCIpKTtcbiAgICAgICAgICBpZiAoZGVjbGFycykge1xuICAgICAgICAgICAgZnJhZ21lbnRzLnB1c2godGhpcy5tYWtlQ29kZShzY29wZS5kZWNsYXJlZFZhcmlhYmxlcygpLmpvaW4oJywgJykpKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGFzc2lnbnMpIHtcbiAgICAgICAgICAgIGlmIChkZWNsYXJzKSB7XG4gICAgICAgICAgICAgIGZyYWdtZW50cy5wdXNoKHRoaXMubWFrZUNvZGUoXCIsXFxuXCIgKyAodGhpcy50YWIgKyBUQUIpKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmcmFnbWVudHMucHVzaCh0aGlzLm1ha2VDb2RlKHNjb3BlLmFzc2lnbmVkVmFyaWFibGVzKCkuam9pbihcIixcXG5cIiArICh0aGlzLnRhYiArIFRBQikpKSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGZyYWdtZW50cy5wdXNoKHRoaXMubWFrZUNvZGUoXCI7XFxuXCIgKyAodGhpcy5zcGFjZWQgPyAnXFxuJyA6ICcnKSkpO1xuICAgICAgICB9IGVsc2UgaWYgKGZyYWdtZW50cy5sZW5ndGggJiYgcG9zdC5sZW5ndGgpIHtcbiAgICAgICAgICBmcmFnbWVudHMucHVzaCh0aGlzLm1ha2VDb2RlKFwiXFxuXCIpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGZyYWdtZW50cy5jb25jYXQocG9zdCk7XG4gICAgfTtcblxuICAgIEJsb2NrLndyYXAgPSBmdW5jdGlvbihub2Rlcykge1xuICAgICAgaWYgKG5vZGVzLmxlbmd0aCA9PT0gMSAmJiBub2Rlc1swXSBpbnN0YW5jZW9mIEJsb2NrKSB7XG4gICAgICAgIHJldHVybiBub2Rlc1swXTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBuZXcgQmxvY2sobm9kZXMpO1xuICAgIH07XG5cbiAgICBCbG9jay5wcm90b3R5cGUuaWNlZFRocmVhZFJldHVybiA9IGZ1bmN0aW9uKGNhbGwpIHtcbiAgICAgIHZhciBleHByLCBsZW47XG4gICAgICBjYWxsID0gY2FsbCB8fCBuZXcgSWNlZFRhaWxDYWxsO1xuICAgICAgbGVuID0gdGhpcy5leHByZXNzaW9ucy5sZW5ndGg7XG4gICAgICB3aGlsZSAobGVuLS0pIHtcbiAgICAgICAgZXhwciA9IHRoaXMuZXhwcmVzc2lvbnNbbGVuXTtcbiAgICAgICAgaWYgKGV4cHIuaXNTdGF0ZW1lbnQoKSkge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGlmICghKGV4cHIgaW5zdGFuY2VvZiBDb21tZW50KSAmJiAhKGV4cHIgaW5zdGFuY2VvZiBSZXR1cm4pKSB7XG4gICAgICAgICAgY2FsbC5hc3NpZ25WYWx1ZShleHByKTtcbiAgICAgICAgICB0aGlzLmV4cHJlc3Npb25zW2xlbl0gPSBjYWxsO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuZXhwcmVzc2lvbnMucHVzaChjYWxsKTtcbiAgICB9O1xuXG4gICAgQmxvY2sucHJvdG90eXBlLmljZWRDb21waWxlQ3BzID0gZnVuY3Rpb24obykge1xuICAgICAgdGhpcy5pY2VkR290Q3BzU3BsaXRGbGFnID0gdHJ1ZTtcbiAgICAgIGlmICh0aGlzLmV4cHJlc3Npb25zLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgcmV0dXJuIEJsb2NrLl9fc3VwZXJfXy5pY2VkQ29tcGlsZUNwcy5jYWxsKHRoaXMsIG8pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcGlsZU5vZGUobyk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIEJsb2NrLnByb3RvdHlwZS5pY2VkQ3BzUm90YXRlID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgY2hpbGQsIGUsIGksIHBpdm90LCByZXN0LCBfaSwgX2osIF9sZW4sIF9sZW4xLCBfcmVmMjtcbiAgICAgIHBpdm90ID0gbnVsbDtcbiAgICAgIF9yZWYyID0gdGhpcy5leHByZXNzaW9ucztcbiAgICAgIGZvciAoaSA9IF9pID0gMCwgX2xlbiA9IF9yZWYyLmxlbmd0aDsgX2kgPCBfbGVuOyBpID0gKytfaSkge1xuICAgICAgICBlID0gX3JlZjJbaV07XG4gICAgICAgIGlmIChlLmljZWRJc0Nwc1Bpdm90KCkpIHtcbiAgICAgICAgICBwaXZvdCA9IGU7XG4gICAgICAgICAgcGl2b3QuaWNlZENhbGxDb250aW51YXRpb24oKTtcbiAgICAgICAgfVxuICAgICAgICBlLmljZWRDcHNSb3RhdGUoKTtcbiAgICAgICAgaWYgKHBpdm90KSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICghcGl2b3QpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG4gICAgICBpZiAocGl2b3QuaWNlZENvbnRpbnVhdGlvbkJsb2NrKSB7XG4gICAgICAgIHRocm93IFN5bnRheEVycm9yKFwidW5leHBlY3RlZCBjb250aW51YXRpb24gYmxvY2sgaW4gbm9kZVwiKTtcbiAgICAgIH1cbiAgICAgIHJlc3QgPSB0aGlzLmV4cHJlc3Npb25zLnNsaWNlKGkgKyAxKTtcbiAgICAgIHRoaXMuZXhwcmVzc2lvbnMgPSB0aGlzLmV4cHJlc3Npb25zLnNsaWNlKDAsIGkgKyAxKTtcbiAgICAgIGlmIChyZXN0Lmxlbmd0aCkge1xuICAgICAgICBjaGlsZCA9IG5ldyBCbG9jayhyZXN0KTtcbiAgICAgICAgcGl2b3QuaWNlZE5lc3RDb250aW51YXRpb25CbG9jayhjaGlsZCk7XG4gICAgICAgIGZvciAoX2ogPSAwLCBfbGVuMSA9IHJlc3QubGVuZ3RoOyBfaiA8IF9sZW4xOyBfaisrKSB7XG4gICAgICAgICAgZSA9IHJlc3RbX2pdO1xuICAgICAgICAgIGlmIChlLmljZWROb2RlRmxhZykge1xuICAgICAgICAgICAgY2hpbGQuaWNlZE5vZGVGbGFnID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGUuaWNlZExvb3BGbGFnKSB7XG4gICAgICAgICAgICBjaGlsZC5pY2VkTG9vcEZsYWcgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoZS5pY2VkQ3BzUGl2b3RGbGFnKSB7XG4gICAgICAgICAgICBjaGlsZC5pY2VkQ3BzUGl2b3RGbGFnID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGUuaWNlZEhhc0F1dG9jYkZsYWcpIHtcbiAgICAgICAgICAgIGNoaWxkLmljZWRIYXNBdXRvY2JGbGFnID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2hpbGQuaWNlZENwc1JvdGF0ZSgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIEJsb2NrLnByb3RvdHlwZS5pY2VkQWRkUnVudGltZSA9IGZ1bmN0aW9uKGZvdW5kRGVmZXIsIGZvdW5kQXdhaXQpIHtcbiAgICAgIHZhciBpbmRleCwgbm9kZTtcbiAgICAgIGluZGV4ID0gMDtcbiAgICAgIHdoaWxlICgobm9kZSA9IHRoaXMuZXhwcmVzc2lvbnNbaW5kZXhdKSAmJiBub2RlIGluc3RhbmNlb2YgQ29tbWVudCB8fCBub2RlIGluc3RhbmNlb2YgVmFsdWUgJiYgbm9kZS5pc1N0cmluZygpKSB7XG4gICAgICAgIGluZGV4Kys7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5leHByZXNzaW9ucy5zcGxpY2UoaW5kZXgsIDAsIG5ldyBJY2VkUnVudGltZShmb3VuZERlZmVyLCBmb3VuZEF3YWl0KSk7XG4gICAgfTtcblxuICAgIEJsb2NrLnByb3RvdHlwZS5pY2VkVHJhbnNmb3JtID0gZnVuY3Rpb24ob3B0cykge1xuICAgICAgdmFyIG9iajtcbiAgICAgIG9iaiA9IHt9O1xuICAgICAgdGhpcy5pY2VkV2Fsa0FzdChudWxsLCBvYmopO1xuICAgICAgaWYgKCEob3B0cyAhPSBudWxsID8gb3B0cy5yZXBsIDogdm9pZCAwKSAmJiAob2JqLmZvdW5kRGVmZXIgfHwgb2JqLmZvdW5kQXdhaXQgfHwgb3B0cy5ydW5mb3JjZSkpIHtcbiAgICAgICAgdGhpcy5pY2VkQWRkUnVudGltZShvYmouZm91bmREZWZlciwgb2JqLmZvdW5kQXdhaXQpO1xuICAgICAgfVxuICAgICAgaWYgKG9iai5mb3VuZEF3YWl0KSB7XG4gICAgICAgIHRoaXMuaWNlZFdhbGtBc3RMb29wcyhmYWxzZSk7XG4gICAgICAgIHRoaXMuaWNlZFdhbGtDcHNQaXZvdHMoKTtcbiAgICAgICAgdGhpcy5pY2VkQ3BzUm90YXRlKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgQmxvY2sucHJvdG90eXBlLmljZWRHZXRTaW5nbGUgPSBmdW5jdGlvbigpIHtcbiAgICAgIGlmICh0aGlzLmV4cHJlc3Npb25zLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICByZXR1cm4gdGhpcy5leHByZXNzaW9uc1swXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gQmxvY2s7XG5cbiAgfSkoQmFzZSk7XG5cbiAgZXhwb3J0cy5MaXRlcmFsID0gTGl0ZXJhbCA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTGl0ZXJhbCwgX3N1cGVyKTtcblxuICAgIGZ1bmN0aW9uIExpdGVyYWwodmFsdWUpIHtcbiAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICAgIGlmICh0aGlzLnZhbHVlID09IG51bGwpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwid2hvb3BzIVwiKTtcbiAgICAgIH1cbiAgICAgIExpdGVyYWwuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgTGl0ZXJhbC5wcm90b3R5cGUubWFrZVJldHVybiA9IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKHRoaXMuaXNTdGF0ZW1lbnQoKSkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBMaXRlcmFsLl9fc3VwZXJfXy5tYWtlUmV0dXJuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIExpdGVyYWwucHJvdG90eXBlLmlzQXNzaWduYWJsZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIElERU5USUZJRVIudGVzdCh0aGlzLnZhbHVlKTtcbiAgICB9O1xuXG4gICAgTGl0ZXJhbC5wcm90b3R5cGUuaXNTdGF0ZW1lbnQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBfcmVmMjtcbiAgICAgIHJldHVybiAoX3JlZjIgPSB0aGlzLnZhbHVlKSA9PT0gJ2JyZWFrJyB8fCBfcmVmMiA9PT0gJ2NvbnRpbnVlJyB8fCBfcmVmMiA9PT0gJ2RlYnVnZ2VyJztcbiAgICB9O1xuXG4gICAgTGl0ZXJhbC5wcm90b3R5cGUuaXNDb21wbGV4ID0gTk87XG5cbiAgICBMaXRlcmFsLnByb3RvdHlwZS5hc3NpZ25zID0gZnVuY3Rpb24obmFtZSkge1xuICAgICAgcmV0dXJuIG5hbWUgPT09IHRoaXMudmFsdWU7XG4gICAgfTtcblxuICAgIExpdGVyYWwucHJvdG90eXBlLmp1bXBzID0gZnVuY3Rpb24obykge1xuICAgICAgaWYgKHRoaXMudmFsdWUgPT09ICdicmVhaycgJiYgISgobyAhPSBudWxsID8gby5sb29wIDogdm9pZCAwKSB8fCAobyAhPSBudWxsID8gby5ibG9jayA6IHZvaWQgMCkpKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMudmFsdWUgPT09ICdjb250aW51ZScgJiYgIShvICE9IG51bGwgPyBvLmxvb3AgOiB2b2lkIDApKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBMaXRlcmFsLnByb3RvdHlwZS5jb21waWxlTm9kZSA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBhbnN3ZXIsIGNvZGUsIF9yZWYyO1xuICAgICAgaWYgKHRoaXMuaWNlZExvb3BGbGFnICYmIHRoaXMuaWNlZElzSnVtcCgpKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmljZWRDb21waWxlSWNlZChvKTtcbiAgICAgIH1cbiAgICAgIGNvZGUgPSB0aGlzLnZhbHVlID09PSAndGhpcycgPyAoKF9yZWYyID0gby5zY29wZS5tZXRob2QpICE9IG51bGwgPyBfcmVmMi5ib3VuZCA6IHZvaWQgMCkgPyBvLnNjb3BlLm1ldGhvZC5jb250ZXh0IDogdGhpcy52YWx1ZSA6IHRoaXMudmFsdWUucmVzZXJ2ZWQgPyBcIlxcXCJcIiArIHRoaXMudmFsdWUgKyBcIlxcXCJcIiA6IHRoaXMudmFsdWU7XG4gICAgICBhbnN3ZXIgPSB0aGlzLmlzU3RhdGVtZW50KCkgPyBcIlwiICsgdGhpcy50YWIgKyBjb2RlICsgXCI7XCIgOiBjb2RlO1xuICAgICAgcmV0dXJuIFt0aGlzLm1ha2VDb2RlKGFuc3dlcildO1xuICAgIH07XG5cbiAgICBMaXRlcmFsLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuICcgXCInICsgdGhpcy52YWx1ZSArICdcIic7XG4gICAgfTtcblxuICAgIExpdGVyYWwucHJvdG90eXBlLmljZWRXYWxrQXN0ID0gZnVuY3Rpb24ocGFyZW50LCBvKSB7XG4gICAgICBpZiAodGhpcy52YWx1ZSA9PT0gJ2FyZ3VtZW50cycgJiYgby5mb3VuZEF3YWl0RnVuYykge1xuICAgICAgICBvLmZvdW5kQXJndW1lbnRzID0gdHJ1ZTtcbiAgICAgICAgdGhpcy52YWx1ZSA9IFwiX2FyZ3VtZW50c1wiO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG5cbiAgICBMaXRlcmFsLnByb3RvdHlwZS5pY2VkSXNKdW1wID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgX3JlZjI7XG4gICAgICByZXR1cm4gKF9yZWYyID0gdGhpcy52YWx1ZSkgPT09ICdicmVhaycgfHwgX3JlZjIgPT09ICdjb250aW51ZSc7XG4gICAgfTtcblxuICAgIExpdGVyYWwucHJvdG90eXBlLmljZWRDb21waWxlSWNlZCA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBjYWxsLCBkLCBmdW5jLCBsO1xuICAgICAgZCA9IHtcbiAgICAgICAgJ2NvbnRpbnVlJzogaWNlZFtcImNvbnN0XCJdLmNfd2hpbGUsXG4gICAgICAgICdicmVhayc6IGljZWRbXCJjb25zdFwiXS5iX3doaWxlXG4gICAgICB9O1xuICAgICAgbCA9IGRbdGhpcy52YWx1ZV07XG4gICAgICBmdW5jID0gbmV3IFZhbHVlKG5ldyBMaXRlcmFsKGwpKTtcbiAgICAgIGNhbGwgPSBuZXcgQ2FsbChmdW5jLCBbXSk7XG4gICAgICByZXR1cm4gY2FsbC5jb21waWxlTm9kZShvKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIExpdGVyYWw7XG5cbiAgfSkoQmFzZSk7XG5cbiAgZXhwb3J0cy5VbmRlZmluZWQgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFVuZGVmaW5lZCwgX3N1cGVyKTtcblxuICAgIGZ1bmN0aW9uIFVuZGVmaW5lZCgpIHtcbiAgICAgIHJldHVybiBVbmRlZmluZWQuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuXG4gICAgVW5kZWZpbmVkLnByb3RvdHlwZS5pc0Fzc2lnbmFibGUgPSBOTztcblxuICAgIFVuZGVmaW5lZC5wcm90b3R5cGUuaXNDb21wbGV4ID0gTk87XG5cbiAgICBVbmRlZmluZWQucHJvdG90eXBlLmNvbXBpbGVOb2RlID0gZnVuY3Rpb24obykge1xuICAgICAgcmV0dXJuIFt0aGlzLm1ha2VDb2RlKG8ubGV2ZWwgPj0gTEVWRUxfQUNDRVNTID8gJyh2b2lkIDApJyA6ICd2b2lkIDAnKV07XG4gICAgfTtcblxuICAgIHJldHVybiBVbmRlZmluZWQ7XG5cbiAgfSkoQmFzZSk7XG5cbiAgZXhwb3J0cy5OdWxsID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhOdWxsLCBfc3VwZXIpO1xuXG4gICAgZnVuY3Rpb24gTnVsbCgpIHtcbiAgICAgIHJldHVybiBOdWxsLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cblxuICAgIE51bGwucHJvdG90eXBlLmlzQXNzaWduYWJsZSA9IE5PO1xuXG4gICAgTnVsbC5wcm90b3R5cGUuaXNDb21wbGV4ID0gTk87XG5cbiAgICBOdWxsLnByb3RvdHlwZS5jb21waWxlTm9kZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIFt0aGlzLm1ha2VDb2RlKFwibnVsbFwiKV07XG4gICAgfTtcblxuICAgIHJldHVybiBOdWxsO1xuXG4gIH0pKEJhc2UpO1xuXG4gIGV4cG9ydHMuQm9vbCA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQm9vbCwgX3N1cGVyKTtcblxuICAgIEJvb2wucHJvdG90eXBlLmlzQXNzaWduYWJsZSA9IE5PO1xuXG4gICAgQm9vbC5wcm90b3R5cGUuaXNDb21wbGV4ID0gTk87XG5cbiAgICBCb29sLnByb3RvdHlwZS5jb21waWxlTm9kZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIFt0aGlzLm1ha2VDb2RlKHRoaXMudmFsKV07XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIEJvb2wodmFsKSB7XG4gICAgICB0aGlzLnZhbCA9IHZhbDtcbiAgICB9XG5cbiAgICByZXR1cm4gQm9vbDtcblxuICB9KShCYXNlKTtcblxuICBleHBvcnRzLlJldHVybiA9IFJldHVybiA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoUmV0dXJuLCBfc3VwZXIpO1xuXG4gICAgZnVuY3Rpb24gUmV0dXJuKGV4cHJlc3Npb24sIGF1dG8pIHtcbiAgICAgIHRoaXMuZXhwcmVzc2lvbiA9IGV4cHJlc3Npb247XG4gICAgICBSZXR1cm4uX19zdXBlcl9fLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7XG4gICAgICB0aGlzLmljZWRIYXNBdXRvY2JGbGFnID0gYXV0bztcbiAgICB9XG5cbiAgICBSZXR1cm4ucHJvdG90eXBlLmNoaWxkcmVuID0gWydleHByZXNzaW9uJ107XG5cbiAgICBSZXR1cm4ucHJvdG90eXBlLmlzU3RhdGVtZW50ID0gWUVTO1xuXG4gICAgUmV0dXJuLnByb3RvdHlwZS5tYWtlUmV0dXJuID0gVEhJUztcblxuICAgIFJldHVybi5wcm90b3R5cGUuanVtcHMgPSBUSElTO1xuXG4gICAgUmV0dXJuLnByb3RvdHlwZS5jb21waWxlVG9GcmFnbWVudHMgPSBmdW5jdGlvbihvLCBsZXZlbCkge1xuICAgICAgdmFyIGV4cHIsIF9yZWYyO1xuICAgICAgZXhwciA9IChfcmVmMiA9IHRoaXMuZXhwcmVzc2lvbikgIT0gbnVsbCA/IF9yZWYyLm1ha2VSZXR1cm4oKSA6IHZvaWQgMDtcbiAgICAgIGlmIChleHByICYmICEoZXhwciBpbnN0YW5jZW9mIFJldHVybikpIHtcbiAgICAgICAgcmV0dXJuIGV4cHIuY29tcGlsZVRvRnJhZ21lbnRzKG8sIGxldmVsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBSZXR1cm4uX19zdXBlcl9fLmNvbXBpbGVUb0ZyYWdtZW50cy5jYWxsKHRoaXMsIG8sIGxldmVsKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgUmV0dXJuLnByb3RvdHlwZS5jb21waWxlTm9kZSA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBhbnN3ZXI7XG4gICAgICBpZiAodGhpcy5pY2VkSGFzQXV0b2NiRmxhZykge1xuICAgICAgICByZXR1cm4gdGhpcy5pY2VkQ29tcGlsZUljZWQobyk7XG4gICAgICB9XG4gICAgICBhbnN3ZXIgPSBbXTtcbiAgICAgIGFuc3dlci5wdXNoKHRoaXMubWFrZUNvZGUodGhpcy50YWIgKyAoXCJyZXR1cm5cIiArICh0aGlzLmV4cHJlc3Npb24gPyBcIiBcIiA6IFwiXCIpKSkpO1xuICAgICAgaWYgKHRoaXMuZXhwcmVzc2lvbikge1xuICAgICAgICBhbnN3ZXIgPSBhbnN3ZXIuY29uY2F0KHRoaXMuZXhwcmVzc2lvbi5jb21waWxlVG9GcmFnbWVudHMobywgTEVWRUxfUEFSRU4pKTtcbiAgICAgIH1cbiAgICAgIGFuc3dlci5wdXNoKHRoaXMubWFrZUNvZGUoXCI7XCIpKTtcbiAgICAgIHJldHVybiBhbnN3ZXI7XG4gICAgfTtcblxuICAgIFJldHVybi5wcm90b3R5cGUuaWNlZENvbXBpbGVJY2VkID0gZnVuY3Rpb24obykge1xuICAgICAgdmFyIGFyZ3MsIGJsb2NrLCBjYWxsLCBjYiwgcmV0O1xuICAgICAgY2IgPSBuZXcgVmFsdWUobmV3IExpdGVyYWwoaWNlZFtcImNvbnN0XCJdLmF1dG9jYikpO1xuICAgICAgYXJncyA9IHRoaXMuZXhwcmVzc2lvbiA/IFt0aGlzLmV4cHJlc3Npb25dIDogW107XG4gICAgICBjYWxsID0gbmV3IENhbGwoY2IsIGFyZ3MpO1xuICAgICAgcmV0ID0gbmV3IExpdGVyYWwoXCJyZXR1cm5cIik7XG4gICAgICBibG9jayA9IG5ldyBCbG9jayhbY2FsbCwgcmV0XSk7XG4gICAgICByZXR1cm4gYmxvY2suY29tcGlsZU5vZGUobyk7XG4gICAgfTtcblxuICAgIHJldHVybiBSZXR1cm47XG5cbiAgfSkoQmFzZSk7XG5cbiAgZXhwb3J0cy5WYWx1ZSA9IFZhbHVlID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhWYWx1ZSwgX3N1cGVyKTtcblxuICAgIGZ1bmN0aW9uIFZhbHVlKGJhc2UsIHByb3BzLCB0YWcpIHtcbiAgICAgIFZhbHVlLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO1xuICAgICAgaWYgKCFwcm9wcyAmJiBiYXNlIGluc3RhbmNlb2YgVmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIGJhc2U7XG4gICAgICB9XG4gICAgICB0aGlzLmJhc2UgPSBiYXNlO1xuICAgICAgdGhpcy5wcm9wZXJ0aWVzID0gcHJvcHMgfHwgW107XG4gICAgICBpZiAodGFnKSB7XG4gICAgICAgIHRoaXNbdGFnXSA9IHRydWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBWYWx1ZS5wcm90b3R5cGUuY2hpbGRyZW4gPSBbJ2Jhc2UnLCAncHJvcGVydGllcyddO1xuXG4gICAgVmFsdWUucHJvdG90eXBlLmNvcHkgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBuZXcgVmFsdWUodGhpcy5iYXNlLCB0aGlzLnByb3BlcnRpZXMpO1xuICAgIH07XG5cbiAgICBWYWx1ZS5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24ocHJvcHMpIHtcbiAgICAgIHRoaXMucHJvcGVydGllcyA9IHRoaXMucHJvcGVydGllcy5jb25jYXQocHJvcHMpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIFZhbHVlLnByb3RvdHlwZS5oYXNQcm9wZXJ0aWVzID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gISF0aGlzLnByb3BlcnRpZXMubGVuZ3RoO1xuICAgIH07XG5cbiAgICBWYWx1ZS5wcm90b3R5cGUuYmFyZUxpdGVyYWwgPSBmdW5jdGlvbih0eXBlKSB7XG4gICAgICByZXR1cm4gIXRoaXMucHJvcGVydGllcy5sZW5ndGggJiYgdGhpcy5iYXNlIGluc3RhbmNlb2YgdHlwZTtcbiAgICB9O1xuXG4gICAgVmFsdWUucHJvdG90eXBlLmlzQXJyYXkgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLmJhcmVMaXRlcmFsKEFycik7XG4gICAgfTtcblxuICAgIFZhbHVlLnByb3RvdHlwZS5pc1JhbmdlID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5iYXJlTGl0ZXJhbChSYW5nZSk7XG4gICAgfTtcblxuICAgIFZhbHVlLnByb3RvdHlwZS5pc0NvbXBsZXggPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLmhhc1Byb3BlcnRpZXMoKSB8fCB0aGlzLmJhc2UuaXNDb21wbGV4KCk7XG4gICAgfTtcblxuICAgIFZhbHVlLnByb3RvdHlwZS5pc0Fzc2lnbmFibGUgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLmhhc1Byb3BlcnRpZXMoKSB8fCB0aGlzLmJhc2UuaXNBc3NpZ25hYmxlKCk7XG4gICAgfTtcblxuICAgIFZhbHVlLnByb3RvdHlwZS5pc1NpbXBsZU51bWJlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMuYmFyZUxpdGVyYWwoTGl0ZXJhbCkgJiYgU0lNUExFTlVNLnRlc3QodGhpcy5iYXNlLnZhbHVlKTtcbiAgICB9O1xuXG4gICAgVmFsdWUucHJvdG90eXBlLmlzU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5iYXJlTGl0ZXJhbChMaXRlcmFsKSAmJiBJU19TVFJJTkcudGVzdCh0aGlzLmJhc2UudmFsdWUpO1xuICAgIH07XG5cbiAgICBWYWx1ZS5wcm90b3R5cGUuaXNSZWdleCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMuYmFyZUxpdGVyYWwoTGl0ZXJhbCkgJiYgSVNfUkVHRVgudGVzdCh0aGlzLmJhc2UudmFsdWUpO1xuICAgIH07XG5cbiAgICBWYWx1ZS5wcm90b3R5cGUuaXNBdG9taWMgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBub2RlLCBfaSwgX2xlbiwgX3JlZjI7XG4gICAgICBfcmVmMiA9IHRoaXMucHJvcGVydGllcy5jb25jYXQodGhpcy5iYXNlKTtcbiAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZjIubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgbm9kZSA9IF9yZWYyW19pXTtcbiAgICAgICAgaWYgKG5vZGUuc29hayB8fCBub2RlIGluc3RhbmNlb2YgQ2FsbCkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcblxuICAgIFZhbHVlLnByb3RvdHlwZS5pc05vdENhbGxhYmxlID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5pc1NpbXBsZU51bWJlcigpIHx8IHRoaXMuaXNTdHJpbmcoKSB8fCB0aGlzLmlzUmVnZXgoKSB8fCB0aGlzLmlzQXJyYXkoKSB8fCB0aGlzLmlzUmFuZ2UoKSB8fCB0aGlzLmlzU3BsaWNlKCkgfHwgdGhpcy5pc09iamVjdCgpO1xuICAgIH07XG5cbiAgICBWYWx1ZS5wcm90b3R5cGUuaXNTdGF0ZW1lbnQgPSBmdW5jdGlvbihvKSB7XG4gICAgICByZXR1cm4gIXRoaXMucHJvcGVydGllcy5sZW5ndGggJiYgdGhpcy5iYXNlLmlzU3RhdGVtZW50KG8pO1xuICAgIH07XG5cbiAgICBWYWx1ZS5wcm90b3R5cGUuYXNzaWducyA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgIHJldHVybiAhdGhpcy5wcm9wZXJ0aWVzLmxlbmd0aCAmJiB0aGlzLmJhc2UuYXNzaWducyhuYW1lKTtcbiAgICB9O1xuXG4gICAgVmFsdWUucHJvdG90eXBlLmp1bXBzID0gZnVuY3Rpb24obykge1xuICAgICAgcmV0dXJuICF0aGlzLnByb3BlcnRpZXMubGVuZ3RoICYmIHRoaXMuYmFzZS5qdW1wcyhvKTtcbiAgICB9O1xuXG4gICAgVmFsdWUucHJvdG90eXBlLmlzT2JqZWN0ID0gZnVuY3Rpb24ob25seUdlbmVyYXRlZCkge1xuICAgICAgaWYgKHRoaXMucHJvcGVydGllcy5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgcmV0dXJuICh0aGlzLmJhc2UgaW5zdGFuY2VvZiBPYmopICYmICghb25seUdlbmVyYXRlZCB8fCB0aGlzLmJhc2UuZ2VuZXJhdGVkKTtcbiAgICB9O1xuXG4gICAgVmFsdWUucHJvdG90eXBlLmlzU3BsaWNlID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gbGFzdCh0aGlzLnByb3BlcnRpZXMpIGluc3RhbmNlb2YgU2xpY2U7XG4gICAgfTtcblxuICAgIFZhbHVlLnByb3RvdHlwZS5sb29rc1N0YXRpYyA9IGZ1bmN0aW9uKGNsYXNzTmFtZSkge1xuICAgICAgdmFyIF9yZWYyO1xuICAgICAgcmV0dXJuIHRoaXMuYmFzZS52YWx1ZSA9PT0gY2xhc3NOYW1lICYmIHRoaXMucHJvcGVydGllcy5sZW5ndGggJiYgKChfcmVmMiA9IHRoaXMucHJvcGVydGllc1swXS5uYW1lKSAhPSBudWxsID8gX3JlZjIudmFsdWUgOiB2b2lkIDApICE9PSAncHJvdG90eXBlJztcbiAgICB9O1xuXG4gICAgVmFsdWUucHJvdG90eXBlLnVud3JhcCA9IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKHRoaXMucHJvcGVydGllcy5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdGhpcy5iYXNlO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBWYWx1ZS5wcm90b3R5cGUuY2FjaGVSZWZlcmVuY2UgPSBmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgYmFzZSwgYnJlZiwgbmFtZSwgbnJlZjtcbiAgICAgIG5hbWUgPSBsYXN0KHRoaXMucHJvcGVydGllcyk7XG4gICAgICBpZiAodGhpcy5wcm9wZXJ0aWVzLmxlbmd0aCA8IDIgJiYgIXRoaXMuYmFzZS5pc0NvbXBsZXgoKSAmJiAhKG5hbWUgIT0gbnVsbCA/IG5hbWUuaXNDb21wbGV4KCkgOiB2b2lkIDApKSB7XG4gICAgICAgIHJldHVybiBbdGhpcywgdGhpc107XG4gICAgICB9XG4gICAgICBiYXNlID0gbmV3IFZhbHVlKHRoaXMuYmFzZSwgdGhpcy5wcm9wZXJ0aWVzLnNsaWNlKDAsIC0xKSk7XG4gICAgICBpZiAoYmFzZS5pc0NvbXBsZXgoKSkge1xuICAgICAgICBicmVmID0gbmV3IExpdGVyYWwoby5zY29wZS5mcmVlVmFyaWFibGUoJ2Jhc2UnKSk7XG4gICAgICAgIGJhc2UgPSBuZXcgVmFsdWUobmV3IFBhcmVucyhuZXcgQXNzaWduKGJyZWYsIGJhc2UpKSk7XG4gICAgICB9XG4gICAgICBpZiAoIW5hbWUpIHtcbiAgICAgICAgcmV0dXJuIFtiYXNlLCBicmVmXTtcbiAgICAgIH1cbiAgICAgIGlmIChuYW1lLmlzQ29tcGxleCgpKSB7XG4gICAgICAgIG5yZWYgPSBuZXcgTGl0ZXJhbChvLnNjb3BlLmZyZWVWYXJpYWJsZSgnbmFtZScpKTtcbiAgICAgICAgbmFtZSA9IG5ldyBJbmRleChuZXcgQXNzaWduKG5yZWYsIG5hbWUuaW5kZXgpKTtcbiAgICAgICAgbnJlZiA9IG5ldyBJbmRleChucmVmKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBbYmFzZS5hZGQobmFtZSksIG5ldyBWYWx1ZShicmVmIHx8IGJhc2UuYmFzZSwgW25yZWYgfHwgbmFtZV0pXTtcbiAgICB9O1xuXG4gICAgVmFsdWUucHJvdG90eXBlLmNvbXBpbGVOb2RlID0gZnVuY3Rpb24obykge1xuICAgICAgdmFyIGZyYWdtZW50cywgcHJvcCwgcHJvcHMsIF9pLCBfbGVuO1xuICAgICAgdGhpcy5iYXNlLmZyb250ID0gdGhpcy5mcm9udDtcbiAgICAgIHByb3BzID0gdGhpcy5wcm9wZXJ0aWVzO1xuICAgICAgZnJhZ21lbnRzID0gdGhpcy5iYXNlLmNvbXBpbGVUb0ZyYWdtZW50cyhvLCAocHJvcHMubGVuZ3RoID8gTEVWRUxfQUNDRVNTIDogbnVsbCkpO1xuICAgICAgaWYgKCh0aGlzLmJhc2UgaW5zdGFuY2VvZiBQYXJlbnMgfHwgcHJvcHMubGVuZ3RoKSAmJiBTSU1QTEVOVU0udGVzdChmcmFnbWVudHNUb1RleHQoZnJhZ21lbnRzKSkpIHtcbiAgICAgICAgZnJhZ21lbnRzLnB1c2godGhpcy5tYWtlQ29kZSgnLicpKTtcbiAgICAgIH1cbiAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gcHJvcHMubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgcHJvcCA9IHByb3BzW19pXTtcbiAgICAgICAgZnJhZ21lbnRzLnB1c2guYXBwbHkoZnJhZ21lbnRzLCBwcm9wLmNvbXBpbGVUb0ZyYWdtZW50cyhvKSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZnJhZ21lbnRzO1xuICAgIH07XG5cbiAgICBWYWx1ZS5wcm90b3R5cGUudW5mb2xkU29hayA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHJldHVybiB0aGlzLnVuZm9sZGVkU29hayAhPSBudWxsID8gdGhpcy51bmZvbGRlZFNvYWsgOiB0aGlzLnVuZm9sZGVkU29hayA9IChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIGZzdCwgaSwgaWZuLCBwcm9wLCByZWYsIHNuZCwgX2ksIF9sZW4sIF9yZWYyLCBfcmVmMztcbiAgICAgICAgICBpZiAoaWZuID0gX3RoaXMuYmFzZS51bmZvbGRTb2FrKG8pKSB7XG4gICAgICAgICAgICAoX3JlZjIgPSBpZm4uYm9keS5wcm9wZXJ0aWVzKS5wdXNoLmFwcGx5KF9yZWYyLCBfdGhpcy5wcm9wZXJ0aWVzKTtcbiAgICAgICAgICAgIHJldHVybiBpZm47XG4gICAgICAgICAgfVxuICAgICAgICAgIF9yZWYzID0gX3RoaXMucHJvcGVydGllcztcbiAgICAgICAgICBmb3IgKGkgPSBfaSA9IDAsIF9sZW4gPSBfcmVmMy5sZW5ndGg7IF9pIDwgX2xlbjsgaSA9ICsrX2kpIHtcbiAgICAgICAgICAgIHByb3AgPSBfcmVmM1tpXTtcbiAgICAgICAgICAgIGlmICghcHJvcC5zb2FrKSB7XG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcHJvcC5zb2FrID0gZmFsc2U7XG4gICAgICAgICAgICBmc3QgPSBuZXcgVmFsdWUoX3RoaXMuYmFzZSwgX3RoaXMucHJvcGVydGllcy5zbGljZSgwLCBpKSk7XG4gICAgICAgICAgICBzbmQgPSBuZXcgVmFsdWUoX3RoaXMuYmFzZSwgX3RoaXMucHJvcGVydGllcy5zbGljZShpKSk7XG4gICAgICAgICAgICBpZiAoZnN0LmlzQ29tcGxleCgpKSB7XG4gICAgICAgICAgICAgIHJlZiA9IG5ldyBMaXRlcmFsKG8uc2NvcGUuZnJlZVZhcmlhYmxlKCdyZWYnKSk7XG4gICAgICAgICAgICAgIGZzdCA9IG5ldyBQYXJlbnMobmV3IEFzc2lnbihyZWYsIGZzdCkpO1xuICAgICAgICAgICAgICBzbmQuYmFzZSA9IHJlZjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXcgSWYobmV3IEV4aXN0ZW5jZShmc3QpLCBzbmQsIHtcbiAgICAgICAgICAgICAgc29hazogdHJ1ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgIH0pKHRoaXMpKCk7XG4gICAgfTtcblxuICAgIFZhbHVlLnByb3RvdHlwZS5pY2VkVG9TbG90ID0gZnVuY3Rpb24oaSkge1xuICAgICAgdmFyIHN1ZmZmaXgsIHN1ZmZpeDtcbiAgICAgIGlmICh0aGlzLmJhc2UgaW5zdGFuY2VvZiBPYmopIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFzZS5pY2VkVG9TbG90KGkpO1xuICAgICAgfVxuICAgICAgc3VmZmZpeCA9IG51bGw7XG4gICAgICBpZiAodGhpcy5wcm9wZXJ0aWVzICYmIHRoaXMucHJvcGVydGllcy5sZW5ndGgpIHtcbiAgICAgICAgc3VmZml4ID0gdGhpcy5wcm9wZXJ0aWVzLnBvcCgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG5ldyBTbG90KGksIHRoaXMsIHN1ZmZpeCk7XG4gICAgfTtcblxuICAgIFZhbHVlLnByb3RvdHlwZS5pY2VkVG9TbG90QWNjZXNzID0gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAodGhpc1tcInRoaXNcIl0pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvcGVydGllc1swXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBuZXcgQWNjZXNzKHRoaXMpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gVmFsdWU7XG5cbiAgfSkoQmFzZSk7XG5cbiAgZXhwb3J0cy5Db21tZW50ID0gQ29tbWVudCA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQ29tbWVudCwgX3N1cGVyKTtcblxuICAgIGZ1bmN0aW9uIENvbW1lbnQoY29tbWVudCkge1xuICAgICAgdGhpcy5jb21tZW50ID0gY29tbWVudDtcbiAgICAgIENvbW1lbnQuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgQ29tbWVudC5wcm90b3R5cGUuaXNTdGF0ZW1lbnQgPSBZRVM7XG5cbiAgICBDb21tZW50LnByb3RvdHlwZS5tYWtlUmV0dXJuID0gVEhJUztcblxuICAgIENvbW1lbnQucHJvdG90eXBlLmNvbXBpbGVOb2RlID0gZnVuY3Rpb24obywgbGV2ZWwpIHtcbiAgICAgIHZhciBjb2RlLCBjb21tZW50O1xuICAgICAgY29tbWVudCA9IHRoaXMuY29tbWVudC5yZXBsYWNlKC9eKFxccyopIyAvZ20sIFwiJDEgKiBcIik7XG4gICAgICBjb2RlID0gXCIvKlwiICsgKG11bHRpZGVudChjb21tZW50LCB0aGlzLnRhYikpICsgKF9faW5kZXhPZi5jYWxsKGNvbW1lbnQsICdcXG4nKSA+PSAwID8gXCJcXG5cIiArIHRoaXMudGFiIDogJycpICsgXCIgKi9cIjtcbiAgICAgIGlmICgobGV2ZWwgfHwgby5sZXZlbCkgPT09IExFVkVMX1RPUCkge1xuICAgICAgICBjb2RlID0gby5pbmRlbnQgKyBjb2RlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFt0aGlzLm1ha2VDb2RlKFwiXFxuXCIpLCB0aGlzLm1ha2VDb2RlKGNvZGUpXTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIENvbW1lbnQ7XG5cbiAgfSkoQmFzZSk7XG5cbiAgZXhwb3J0cy5DYWxsID0gQ2FsbCA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQ2FsbCwgX3N1cGVyKTtcblxuICAgIGZ1bmN0aW9uIENhbGwodmFyaWFibGUsIGFyZ3MsIHNvYWspIHtcbiAgICAgIHRoaXMuYXJncyA9IGFyZ3MgIT0gbnVsbCA/IGFyZ3MgOiBbXTtcbiAgICAgIHRoaXMuc29hayA9IHNvYWs7XG4gICAgICBDYWxsLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO1xuICAgICAgdGhpcy5pc05ldyA9IGZhbHNlO1xuICAgICAgdGhpcy5pc1N1cGVyID0gdmFyaWFibGUgPT09ICdzdXBlcic7XG4gICAgICB0aGlzLnZhcmlhYmxlID0gdGhpcy5pc1N1cGVyID8gbnVsbCA6IHZhcmlhYmxlO1xuICAgICAgaWYgKHZhcmlhYmxlIGluc3RhbmNlb2YgVmFsdWUgJiYgdmFyaWFibGUuaXNOb3RDYWxsYWJsZSgpKSB7XG4gICAgICAgIHZhcmlhYmxlLmVycm9yKFwibGl0ZXJhbCBpcyBub3QgYSBmdW5jdGlvblwiKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBDYWxsLnByb3RvdHlwZS5jaGlsZHJlbiA9IFsndmFyaWFibGUnLCAnYXJncyddO1xuXG4gICAgQ2FsbC5wcm90b3R5cGUubmV3SW5zdGFuY2UgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBiYXNlLCBfcmVmMjtcbiAgICAgIGJhc2UgPSAoKF9yZWYyID0gdGhpcy52YXJpYWJsZSkgIT0gbnVsbCA/IF9yZWYyLmJhc2UgOiB2b2lkIDApIHx8IHRoaXMudmFyaWFibGU7XG4gICAgICBpZiAoYmFzZSBpbnN0YW5jZW9mIENhbGwgJiYgIWJhc2UuaXNOZXcpIHtcbiAgICAgICAgYmFzZS5uZXdJbnN0YW5jZSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5pc05ldyA9IHRydWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgQ2FsbC5wcm90b3R5cGUuc3VwZXJSZWZlcmVuY2UgPSBmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgYWNjZXNzZXMsIG1ldGhvZDtcbiAgICAgIG1ldGhvZCA9IG8uc2NvcGUubmFtZWRNZXRob2QoKTtcbiAgICAgIGlmIChtZXRob2QgIT0gbnVsbCA/IG1ldGhvZC5rbGFzcyA6IHZvaWQgMCkge1xuICAgICAgICBhY2Nlc3NlcyA9IFtuZXcgQWNjZXNzKG5ldyBMaXRlcmFsKCdfX3N1cGVyX18nKSldO1xuICAgICAgICBpZiAobWV0aG9kW1wic3RhdGljXCJdKSB7XG4gICAgICAgICAgYWNjZXNzZXMucHVzaChuZXcgQWNjZXNzKG5ldyBMaXRlcmFsKCdjb25zdHJ1Y3RvcicpKSk7XG4gICAgICAgIH1cbiAgICAgICAgYWNjZXNzZXMucHVzaChuZXcgQWNjZXNzKG5ldyBMaXRlcmFsKG1ldGhvZC5uYW1lKSkpO1xuICAgICAgICByZXR1cm4gKG5ldyBWYWx1ZShuZXcgTGl0ZXJhbChtZXRob2Qua2xhc3MpLCBhY2Nlc3NlcykpLmNvbXBpbGUobyk7XG4gICAgICB9IGVsc2UgaWYgKG1ldGhvZCAhPSBudWxsID8gbWV0aG9kLmN0b3IgOiB2b2lkIDApIHtcbiAgICAgICAgcmV0dXJuIFwiXCIgKyBtZXRob2QubmFtZSArIFwiLl9fc3VwZXJfXy5jb25zdHJ1Y3RvclwiO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXJyb3IoJ2Nhbm5vdCBjYWxsIHN1cGVyIG91dHNpZGUgb2YgYW4gaW5zdGFuY2UgbWV0aG9kLicpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBDYWxsLnByb3RvdHlwZS5zdXBlclRoaXMgPSBmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgbWV0aG9kO1xuICAgICAgaWYgKG8uc2NvcGUuaWNlZGdlbikge1xuICAgICAgICByZXR1cm4gXCJfdGhpc1wiO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbWV0aG9kID0gby5zY29wZS5tZXRob2Q7XG4gICAgICAgIHJldHVybiAobWV0aG9kICYmICFtZXRob2Qua2xhc3MgJiYgbWV0aG9kLmNvbnRleHQpIHx8IFwidGhpc1wiO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBDYWxsLnByb3RvdHlwZS51bmZvbGRTb2FrID0gZnVuY3Rpb24obykge1xuICAgICAgdmFyIGNhbGwsIGlmbiwgbGVmdCwgbGlzdCwgcml0ZSwgX2ksIF9sZW4sIF9yZWYyLCBfcmVmMztcbiAgICAgIGlmICh0aGlzLnNvYWspIHtcbiAgICAgICAgaWYgKHRoaXMudmFyaWFibGUpIHtcbiAgICAgICAgICBpZiAoaWZuID0gdW5mb2xkU29hayhvLCB0aGlzLCAndmFyaWFibGUnKSkge1xuICAgICAgICAgICAgcmV0dXJuIGlmbjtcbiAgICAgICAgICB9XG4gICAgICAgICAgX3JlZjIgPSBuZXcgVmFsdWUodGhpcy52YXJpYWJsZSkuY2FjaGVSZWZlcmVuY2UobyksIGxlZnQgPSBfcmVmMlswXSwgcml0ZSA9IF9yZWYyWzFdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxlZnQgPSBuZXcgTGl0ZXJhbCh0aGlzLnN1cGVyUmVmZXJlbmNlKG8pKTtcbiAgICAgICAgICByaXRlID0gbmV3IFZhbHVlKGxlZnQpO1xuICAgICAgICB9XG4gICAgICAgIHJpdGUgPSBuZXcgQ2FsbChyaXRlLCB0aGlzLmFyZ3MpO1xuICAgICAgICByaXRlLmlzTmV3ID0gdGhpcy5pc05ldztcbiAgICAgICAgbGVmdCA9IG5ldyBMaXRlcmFsKFwidHlwZW9mIFwiICsgKGxlZnQuY29tcGlsZShvKSkgKyBcIiA9PT0gXFxcImZ1bmN0aW9uXFxcIlwiKTtcbiAgICAgICAgcmV0dXJuIG5ldyBJZihsZWZ0LCBuZXcgVmFsdWUocml0ZSksIHtcbiAgICAgICAgICBzb2FrOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY2FsbCA9IHRoaXM7XG4gICAgICBsaXN0ID0gW107XG4gICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICBpZiAoY2FsbC52YXJpYWJsZSBpbnN0YW5jZW9mIENhbGwpIHtcbiAgICAgICAgICBsaXN0LnB1c2goY2FsbCk7XG4gICAgICAgICAgY2FsbCA9IGNhbGwudmFyaWFibGU7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEoY2FsbC52YXJpYWJsZSBpbnN0YW5jZW9mIFZhbHVlKSkge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGxpc3QucHVzaChjYWxsKTtcbiAgICAgICAgaWYgKCEoKGNhbGwgPSBjYWxsLnZhcmlhYmxlLmJhc2UpIGluc3RhbmNlb2YgQ2FsbCkpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgX3JlZjMgPSBsaXN0LnJldmVyc2UoKTtcbiAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZjMubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgY2FsbCA9IF9yZWYzW19pXTtcbiAgICAgICAgaWYgKGlmbikge1xuICAgICAgICAgIGlmIChjYWxsLnZhcmlhYmxlIGluc3RhbmNlb2YgQ2FsbCkge1xuICAgICAgICAgICAgY2FsbC52YXJpYWJsZSA9IGlmbjtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FsbC52YXJpYWJsZS5iYXNlID0gaWZuO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZm4gPSB1bmZvbGRTb2FrKG8sIGNhbGwsICd2YXJpYWJsZScpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGlmbjtcbiAgICB9O1xuXG4gICAgQ2FsbC5wcm90b3R5cGUuY29tcGlsZU5vZGUgPSBmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgYXJnLCBhcmdJbmRleCwgY29tcGlsZWRBcmdzLCBjb21waWxlZEFycmF5LCBmcmFnbWVudHMsIHByZWZhY2UsIF9pLCBfbGVuLCBfcmVmMiwgX3JlZjM7XG4gICAgICBpZiAoKF9yZWYyID0gdGhpcy52YXJpYWJsZSkgIT0gbnVsbCkge1xuICAgICAgICBfcmVmMi5mcm9udCA9IHRoaXMuZnJvbnQ7XG4gICAgICB9XG4gICAgICBjb21waWxlZEFycmF5ID0gU3BsYXQuY29tcGlsZVNwbGF0dGVkQXJyYXkobywgdGhpcy5hcmdzLCB0cnVlKTtcbiAgICAgIGlmIChjb21waWxlZEFycmF5Lmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb21waWxlU3BsYXQobywgY29tcGlsZWRBcnJheSk7XG4gICAgICB9XG4gICAgICBjb21waWxlZEFyZ3MgPSBbXTtcbiAgICAgIF9yZWYzID0gdGhpcy5hcmdzO1xuICAgICAgZm9yIChhcmdJbmRleCA9IF9pID0gMCwgX2xlbiA9IF9yZWYzLmxlbmd0aDsgX2kgPCBfbGVuOyBhcmdJbmRleCA9ICsrX2kpIHtcbiAgICAgICAgYXJnID0gX3JlZjNbYXJnSW5kZXhdO1xuICAgICAgICBhcmcuaWNlZFN0YXRlbWVudEFzc2VydGlvbigpO1xuICAgICAgICBpZiAoYXJnSW5kZXgpIHtcbiAgICAgICAgICBjb21waWxlZEFyZ3MucHVzaCh0aGlzLm1ha2VDb2RlKFwiLCBcIikpO1xuICAgICAgICB9XG4gICAgICAgIGNvbXBpbGVkQXJncy5wdXNoLmFwcGx5KGNvbXBpbGVkQXJncywgYXJnLmNvbXBpbGVUb0ZyYWdtZW50cyhvLCBMRVZFTF9MSVNUKSk7XG4gICAgICB9XG4gICAgICBmcmFnbWVudHMgPSBbXTtcbiAgICAgIGlmICh0aGlzLmlzU3VwZXIpIHtcbiAgICAgICAgcHJlZmFjZSA9IHRoaXMuc3VwZXJSZWZlcmVuY2UobykgKyAoXCIuY2FsbChcIiArICh0aGlzLnN1cGVyVGhpcyhvKSkpO1xuICAgICAgICBpZiAoY29tcGlsZWRBcmdzLmxlbmd0aCkge1xuICAgICAgICAgIHByZWZhY2UgKz0gXCIsIFwiO1xuICAgICAgICB9XG4gICAgICAgIGZyYWdtZW50cy5wdXNoKHRoaXMubWFrZUNvZGUocHJlZmFjZSkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHRoaXMuaXNOZXcpIHtcbiAgICAgICAgICBmcmFnbWVudHMucHVzaCh0aGlzLm1ha2VDb2RlKCduZXcgJykpO1xuICAgICAgICB9XG4gICAgICAgIGZyYWdtZW50cy5wdXNoLmFwcGx5KGZyYWdtZW50cywgdGhpcy52YXJpYWJsZS5jb21waWxlVG9GcmFnbWVudHMobywgTEVWRUxfQUNDRVNTKSk7XG4gICAgICAgIGZyYWdtZW50cy5wdXNoKHRoaXMubWFrZUNvZGUoXCIoXCIpKTtcbiAgICAgIH1cbiAgICAgIGZyYWdtZW50cy5wdXNoLmFwcGx5KGZyYWdtZW50cywgY29tcGlsZWRBcmdzKTtcbiAgICAgIGZyYWdtZW50cy5wdXNoKHRoaXMubWFrZUNvZGUoXCIpXCIpKTtcbiAgICAgIHJldHVybiBmcmFnbWVudHM7XG4gICAgfTtcblxuICAgIENhbGwucHJvdG90eXBlLmNvbXBpbGVTcGxhdCA9IGZ1bmN0aW9uKG8sIHNwbGF0QXJncykge1xuICAgICAgdmFyIGFuc3dlciwgYmFzZSwgZnVuLCBpZHQsIG5hbWUsIHJlZjtcbiAgICAgIGlmICh0aGlzLmlzU3VwZXIpIHtcbiAgICAgICAgcmV0dXJuIFtdLmNvbmNhdCh0aGlzLm1ha2VDb2RlKFwiXCIgKyAodGhpcy5zdXBlclJlZmVyZW5jZShvKSkgKyBcIi5hcHBseShcIiArICh0aGlzLnN1cGVyVGhpcyhvKSkgKyBcIiwgXCIpLCBzcGxhdEFyZ3MsIHRoaXMubWFrZUNvZGUoXCIpXCIpKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmlzTmV3KSB7XG4gICAgICAgIGlkdCA9IHRoaXMudGFiICsgVEFCO1xuICAgICAgICByZXR1cm4gW10uY29uY2F0KHRoaXMubWFrZUNvZGUoXCIoZnVuY3Rpb24oZnVuYywgYXJncywgY3Rvcikge1xcblwiICsgaWR0ICsgXCJjdG9yLnByb3RvdHlwZSA9IGZ1bmMucHJvdG90eXBlO1xcblwiICsgaWR0ICsgXCJ2YXIgY2hpbGQgPSBuZXcgY3RvciwgcmVzdWx0ID0gZnVuYy5hcHBseShjaGlsZCwgYXJncyk7XFxuXCIgKyBpZHQgKyBcInJldHVybiBPYmplY3QocmVzdWx0KSA9PT0gcmVzdWx0ID8gcmVzdWx0IDogY2hpbGQ7XFxuXCIgKyB0aGlzLnRhYiArIFwifSkoXCIpLCB0aGlzLnZhcmlhYmxlLmNvbXBpbGVUb0ZyYWdtZW50cyhvLCBMRVZFTF9MSVNUKSwgdGhpcy5tYWtlQ29kZShcIiwgXCIpLCBzcGxhdEFyZ3MsIHRoaXMubWFrZUNvZGUoXCIsIGZ1bmN0aW9uKCl7fSlcIikpO1xuICAgICAgfVxuICAgICAgYW5zd2VyID0gW107XG4gICAgICBiYXNlID0gbmV3IFZhbHVlKHRoaXMudmFyaWFibGUpO1xuICAgICAgaWYgKChuYW1lID0gYmFzZS5wcm9wZXJ0aWVzLnBvcCgpKSAmJiBiYXNlLmlzQ29tcGxleCgpKSB7XG4gICAgICAgIHJlZiA9IG8uc2NvcGUuZnJlZVZhcmlhYmxlKCdyZWYnKTtcbiAgICAgICAgYW5zd2VyID0gYW5zd2VyLmNvbmNhdCh0aGlzLm1ha2VDb2RlKFwiKFwiICsgcmVmICsgXCIgPSBcIiksIGJhc2UuY29tcGlsZVRvRnJhZ21lbnRzKG8sIExFVkVMX0xJU1QpLCB0aGlzLm1ha2VDb2RlKFwiKVwiKSwgbmFtZS5jb21waWxlVG9GcmFnbWVudHMobykpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZnVuID0gYmFzZS5jb21waWxlVG9GcmFnbWVudHMobywgTEVWRUxfQUNDRVNTKTtcbiAgICAgICAgaWYgKFNJTVBMRU5VTS50ZXN0KGZyYWdtZW50c1RvVGV4dChmdW4pKSkge1xuICAgICAgICAgIGZ1biA9IHRoaXMud3JhcEluQnJhY2VzKGZ1bik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5hbWUpIHtcbiAgICAgICAgICByZWYgPSBmcmFnbWVudHNUb1RleHQoZnVuKTtcbiAgICAgICAgICBmdW4ucHVzaC5hcHBseShmdW4sIG5hbWUuY29tcGlsZVRvRnJhZ21lbnRzKG8pKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZWYgPSAnbnVsbCc7XG4gICAgICAgIH1cbiAgICAgICAgYW5zd2VyID0gYW5zd2VyLmNvbmNhdChmdW4pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGFuc3dlciA9IGFuc3dlci5jb25jYXQodGhpcy5tYWtlQ29kZShcIi5hcHBseShcIiArIHJlZiArIFwiLCBcIiksIHNwbGF0QXJncywgdGhpcy5tYWtlQ29kZShcIilcIikpO1xuICAgIH07XG5cbiAgICByZXR1cm4gQ2FsbDtcblxuICB9KShCYXNlKTtcblxuICBleHBvcnRzLkV4dGVuZHMgPSBFeHRlbmRzID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhFeHRlbmRzLCBfc3VwZXIpO1xuXG4gICAgZnVuY3Rpb24gRXh0ZW5kcyhjaGlsZCwgcGFyZW50KSB7XG4gICAgICB0aGlzLmNoaWxkID0gY2hpbGQ7XG4gICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgIEV4dGVuZHMuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgRXh0ZW5kcy5wcm90b3R5cGUuY2hpbGRyZW4gPSBbJ2NoaWxkJywgJ3BhcmVudCddO1xuXG4gICAgRXh0ZW5kcy5wcm90b3R5cGUuY29tcGlsZVRvRnJhZ21lbnRzID0gZnVuY3Rpb24obykge1xuICAgICAgcmV0dXJuIG5ldyBDYWxsKG5ldyBWYWx1ZShuZXcgTGl0ZXJhbCh1dGlsaXR5KCdleHRlbmRzJykpKSwgW3RoaXMuY2hpbGQsIHRoaXMucGFyZW50XSkuY29tcGlsZVRvRnJhZ21lbnRzKG8pO1xuICAgIH07XG5cbiAgICByZXR1cm4gRXh0ZW5kcztcblxuICB9KShCYXNlKTtcblxuICBleHBvcnRzLkFjY2VzcyA9IEFjY2VzcyA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQWNjZXNzLCBfc3VwZXIpO1xuXG4gICAgZnVuY3Rpb24gQWNjZXNzKG5hbWUsIHRhZykge1xuICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgIEFjY2Vzcy5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzKTtcbiAgICAgIHRoaXMubmFtZS5hc0tleSA9IHRydWU7XG4gICAgICB0aGlzLnNvYWsgPSB0YWcgPT09ICdzb2FrJztcbiAgICB9XG5cbiAgICBBY2Nlc3MucHJvdG90eXBlLmNoaWxkcmVuID0gWyduYW1lJ107XG5cbiAgICBBY2Nlc3MucHJvdG90eXBlLmNvbXBpbGVUb0ZyYWdtZW50cyA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBuYW1lO1xuICAgICAgbmFtZSA9IHRoaXMubmFtZS5jb21waWxlVG9GcmFnbWVudHMobyk7XG4gICAgICBpZiAoKElERU5USUZJRVIudGVzdChmcmFnbWVudHNUb1RleHQobmFtZSkpKSB8fCB0aGlzLm5hbWUgaW5zdGFuY2VvZiBEZWZlcikge1xuICAgICAgICBuYW1lLnVuc2hpZnQodGhpcy5tYWtlQ29kZShcIi5cIikpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmFtZS51bnNoaWZ0KHRoaXMubWFrZUNvZGUoXCJbXCIpKTtcbiAgICAgICAgbmFtZS5wdXNoKHRoaXMubWFrZUNvZGUoXCJdXCIpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBuYW1lO1xuICAgIH07XG5cbiAgICBBY2Nlc3MucHJvdG90eXBlLmlzQ29tcGxleCA9IE5PO1xuXG4gICAgcmV0dXJuIEFjY2VzcztcblxuICB9KShCYXNlKTtcblxuICBleHBvcnRzLkluZGV4ID0gSW5kZXggPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEluZGV4LCBfc3VwZXIpO1xuXG4gICAgZnVuY3Rpb24gSW5kZXgoaW5kZXgpIHtcbiAgICAgIHRoaXMuaW5kZXggPSBpbmRleDtcbiAgICAgIEluZGV4Ll9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIEluZGV4LnByb3RvdHlwZS5jaGlsZHJlbiA9IFsnaW5kZXgnXTtcblxuICAgIEluZGV4LnByb3RvdHlwZS5jb21waWxlVG9GcmFnbWVudHMgPSBmdW5jdGlvbihvKSB7XG4gICAgICByZXR1cm4gW10uY29uY2F0KHRoaXMubWFrZUNvZGUoXCJbXCIpLCB0aGlzLmluZGV4LmNvbXBpbGVUb0ZyYWdtZW50cyhvLCBMRVZFTF9QQVJFTiksIHRoaXMubWFrZUNvZGUoXCJdXCIpKTtcbiAgICB9O1xuXG4gICAgSW5kZXgucHJvdG90eXBlLmlzQ29tcGxleCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMuaW5kZXguaXNDb21wbGV4KCk7XG4gICAgfTtcblxuICAgIHJldHVybiBJbmRleDtcblxuICB9KShCYXNlKTtcblxuICBleHBvcnRzLlJhbmdlID0gUmFuZ2UgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFJhbmdlLCBfc3VwZXIpO1xuXG4gICAgUmFuZ2UucHJvdG90eXBlLmNoaWxkcmVuID0gWydmcm9tJywgJ3RvJ107XG5cbiAgICBmdW5jdGlvbiBSYW5nZShmcm9tLCB0bywgdGFnKSB7XG4gICAgICB0aGlzLmZyb20gPSBmcm9tO1xuICAgICAgdGhpcy50byA9IHRvO1xuICAgICAgUmFuZ2UuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7XG4gICAgICB0aGlzLmV4Y2x1c2l2ZSA9IHRhZyA9PT0gJ2V4Y2x1c2l2ZSc7XG4gICAgICB0aGlzLmVxdWFscyA9IHRoaXMuZXhjbHVzaXZlID8gJycgOiAnPSc7XG4gICAgfVxuXG4gICAgUmFuZ2UucHJvdG90eXBlLmNvbXBpbGVWYXJpYWJsZXMgPSBmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgc3RlcCwgX3JlZjIsIF9yZWYzLCBfcmVmNCwgX3JlZjU7XG4gICAgICBvID0gbWVyZ2Uobywge1xuICAgICAgICB0b3A6IHRydWVcbiAgICAgIH0pO1xuICAgICAgX3JlZjIgPSB0aGlzLmNhY2hlVG9Db2RlRnJhZ21lbnRzKHRoaXMuZnJvbS5jYWNoZShvLCBMRVZFTF9MSVNUKSksIHRoaXMuZnJvbUMgPSBfcmVmMlswXSwgdGhpcy5mcm9tVmFyID0gX3JlZjJbMV07XG4gICAgICBfcmVmMyA9IHRoaXMuY2FjaGVUb0NvZGVGcmFnbWVudHModGhpcy50by5jYWNoZShvLCBMRVZFTF9MSVNUKSksIHRoaXMudG9DID0gX3JlZjNbMF0sIHRoaXMudG9WYXIgPSBfcmVmM1sxXTtcbiAgICAgIGlmIChzdGVwID0gZGVsKG8sICdzdGVwJykpIHtcbiAgICAgICAgX3JlZjQgPSB0aGlzLmNhY2hlVG9Db2RlRnJhZ21lbnRzKHN0ZXAuY2FjaGUobywgTEVWRUxfTElTVCkpLCB0aGlzLnN0ZXAgPSBfcmVmNFswXSwgdGhpcy5zdGVwVmFyID0gX3JlZjRbMV07XG4gICAgICB9XG4gICAgICBfcmVmNSA9IFt0aGlzLmZyb21WYXIubWF0Y2goTlVNQkVSKSwgdGhpcy50b1Zhci5tYXRjaChOVU1CRVIpXSwgdGhpcy5mcm9tTnVtID0gX3JlZjVbMF0sIHRoaXMudG9OdW0gPSBfcmVmNVsxXTtcbiAgICAgIGlmICh0aGlzLnN0ZXBWYXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RlcE51bSA9IHRoaXMuc3RlcFZhci5tYXRjaChOVU1CRVIpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBSYW5nZS5wcm90b3R5cGUuY29tcGlsZU5vZGUgPSBmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgY29uZCwgY29uZFBhcnQsIGZyb20sIGd0LCBpZHgsIGlkeE5hbWUsIGtub3duLCBsdCwgbmFtZWRJbmRleCwgc3RlcFBhcnQsIHRvLCB2YXJQYXJ0LCBfcmVmMiwgX3JlZjM7XG4gICAgICBpZiAoIXRoaXMuZnJvbVZhcikge1xuICAgICAgICB0aGlzLmNvbXBpbGVWYXJpYWJsZXMobyk7XG4gICAgICB9XG4gICAgICBpZiAoIW8uaW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcGlsZUFycmF5KG8pO1xuICAgICAgfVxuICAgICAga25vd24gPSB0aGlzLmZyb21OdW0gJiYgdGhpcy50b051bTtcbiAgICAgIGlkeCA9IGRlbChvLCAnaW5kZXgnKTtcbiAgICAgIGlkeE5hbWUgPSBkZWwobywgJ25hbWUnKTtcbiAgICAgIG5hbWVkSW5kZXggPSBpZHhOYW1lICYmIGlkeE5hbWUgIT09IGlkeDtcbiAgICAgIHZhclBhcnQgPSBcIlwiICsgaWR4ICsgXCIgPSBcIiArIHRoaXMuZnJvbUM7XG4gICAgICBpZiAodGhpcy50b0MgIT09IHRoaXMudG9WYXIpIHtcbiAgICAgICAgdmFyUGFydCArPSBcIiwgXCIgKyB0aGlzLnRvQztcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLnN0ZXAgIT09IHRoaXMuc3RlcFZhcikge1xuICAgICAgICB2YXJQYXJ0ICs9IFwiLCBcIiArIHRoaXMuc3RlcDtcbiAgICAgIH1cbiAgICAgIF9yZWYyID0gW1wiXCIgKyBpZHggKyBcIiA8XCIgKyB0aGlzLmVxdWFscywgXCJcIiArIGlkeCArIFwiID5cIiArIHRoaXMuZXF1YWxzXSwgbHQgPSBfcmVmMlswXSwgZ3QgPSBfcmVmMlsxXTtcbiAgICAgIGNvbmRQYXJ0ID0gdGhpcy5zdGVwTnVtID8gcGFyc2VOdW0odGhpcy5zdGVwTnVtWzBdKSA+IDAgPyBcIlwiICsgbHQgKyBcIiBcIiArIHRoaXMudG9WYXIgOiBcIlwiICsgZ3QgKyBcIiBcIiArIHRoaXMudG9WYXIgOiBrbm93biA/ICgoX3JlZjMgPSBbcGFyc2VOdW0odGhpcy5mcm9tTnVtWzBdKSwgcGFyc2VOdW0odGhpcy50b051bVswXSldLCBmcm9tID0gX3JlZjNbMF0sIHRvID0gX3JlZjNbMV0sIF9yZWYzKSwgZnJvbSA8PSB0byA/IFwiXCIgKyBsdCArIFwiIFwiICsgdG8gOiBcIlwiICsgZ3QgKyBcIiBcIiArIHRvKSA6IChjb25kID0gdGhpcy5zdGVwVmFyID8gXCJcIiArIHRoaXMuc3RlcFZhciArIFwiID4gMFwiIDogXCJcIiArIHRoaXMuZnJvbVZhciArIFwiIDw9IFwiICsgdGhpcy50b1ZhciwgXCJcIiArIGNvbmQgKyBcIiA/IFwiICsgbHQgKyBcIiBcIiArIHRoaXMudG9WYXIgKyBcIiA6IFwiICsgZ3QgKyBcIiBcIiArIHRoaXMudG9WYXIpO1xuICAgICAgc3RlcFBhcnQgPSB0aGlzLnN0ZXBWYXIgPyBcIlwiICsgaWR4ICsgXCIgKz0gXCIgKyB0aGlzLnN0ZXBWYXIgOiBrbm93biA/IG5hbWVkSW5kZXggPyBmcm9tIDw9IHRvID8gXCIrK1wiICsgaWR4IDogXCItLVwiICsgaWR4IDogZnJvbSA8PSB0byA/IFwiXCIgKyBpZHggKyBcIisrXCIgOiBcIlwiICsgaWR4ICsgXCItLVwiIDogbmFtZWRJbmRleCA/IFwiXCIgKyBjb25kICsgXCIgPyArK1wiICsgaWR4ICsgXCIgOiAtLVwiICsgaWR4IDogXCJcIiArIGNvbmQgKyBcIiA/IFwiICsgaWR4ICsgXCIrKyA6IFwiICsgaWR4ICsgXCItLVwiO1xuICAgICAgaWYgKG5hbWVkSW5kZXgpIHtcbiAgICAgICAgdmFyUGFydCA9IFwiXCIgKyBpZHhOYW1lICsgXCIgPSBcIiArIHZhclBhcnQ7XG4gICAgICB9XG4gICAgICBpZiAobmFtZWRJbmRleCkge1xuICAgICAgICBzdGVwUGFydCA9IFwiXCIgKyBpZHhOYW1lICsgXCIgPSBcIiArIHN0ZXBQYXJ0O1xuICAgICAgfVxuICAgICAgcmV0dXJuIFt0aGlzLm1ha2VDb2RlKFwiXCIgKyB2YXJQYXJ0ICsgXCI7IFwiICsgY29uZFBhcnQgKyBcIjsgXCIgKyBzdGVwUGFydCldO1xuICAgIH07XG5cbiAgICBSYW5nZS5wcm90b3R5cGUuY29tcGlsZUFycmF5ID0gZnVuY3Rpb24obykge1xuICAgICAgdmFyIGFyZ3MsIGJvZHksIGNvbmQsIGhhc0FyZ3MsIGksIGlkdCwgcG9zdCwgcHJlLCByYW5nZSwgcmVzdWx0LCB2YXJzLCBfaSwgX3JlZjIsIF9yZWYzLCBfcmVzdWx0cztcbiAgICAgIGlmICh0aGlzLmZyb21OdW0gJiYgdGhpcy50b051bSAmJiBNYXRoLmFicyh0aGlzLmZyb21OdW0gLSB0aGlzLnRvTnVtKSA8PSAyMCkge1xuICAgICAgICByYW5nZSA9IChmdW5jdGlvbigpIHtcbiAgICAgICAgICBfcmVzdWx0cyA9IFtdO1xuICAgICAgICAgIGZvciAodmFyIF9pID0gX3JlZjIgPSArdGhpcy5mcm9tTnVtLCBfcmVmMyA9ICt0aGlzLnRvTnVtOyBfcmVmMiA8PSBfcmVmMyA/IF9pIDw9IF9yZWYzIDogX2kgPj0gX3JlZjM7IF9yZWYyIDw9IF9yZWYzID8gX2krKyA6IF9pLS0peyBfcmVzdWx0cy5wdXNoKF9pKTsgfVxuICAgICAgICAgIHJldHVybiBfcmVzdWx0cztcbiAgICAgICAgfSkuYXBwbHkodGhpcyk7XG4gICAgICAgIGlmICh0aGlzLmV4Y2x1c2l2ZSkge1xuICAgICAgICAgIHJhbmdlLnBvcCgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbdGhpcy5tYWtlQ29kZShcIltcIiArIChyYW5nZS5qb2luKCcsICcpKSArIFwiXVwiKV07XG4gICAgICB9XG4gICAgICBpZHQgPSB0aGlzLnRhYiArIFRBQjtcbiAgICAgIGkgPSBvLnNjb3BlLmZyZWVWYXJpYWJsZSgnaScpO1xuICAgICAgcmVzdWx0ID0gby5zY29wZS5mcmVlVmFyaWFibGUoJ3Jlc3VsdHMnKTtcbiAgICAgIHByZSA9IFwiXFxuXCIgKyBpZHQgKyByZXN1bHQgKyBcIiA9IFtdO1wiO1xuICAgICAgaWYgKHRoaXMuZnJvbU51bSAmJiB0aGlzLnRvTnVtKSB7XG4gICAgICAgIG8uaW5kZXggPSBpO1xuICAgICAgICBib2R5ID0gZnJhZ21lbnRzVG9UZXh0KHRoaXMuY29tcGlsZU5vZGUobykpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFycyA9IChcIlwiICsgaSArIFwiID0gXCIgKyB0aGlzLmZyb21DKSArICh0aGlzLnRvQyAhPT0gdGhpcy50b1ZhciA/IFwiLCBcIiArIHRoaXMudG9DIDogJycpO1xuICAgICAgICBjb25kID0gXCJcIiArIHRoaXMuZnJvbVZhciArIFwiIDw9IFwiICsgdGhpcy50b1ZhcjtcbiAgICAgICAgYm9keSA9IFwidmFyIFwiICsgdmFycyArIFwiOyBcIiArIGNvbmQgKyBcIiA/IFwiICsgaSArIFwiIDxcIiArIHRoaXMuZXF1YWxzICsgXCIgXCIgKyB0aGlzLnRvVmFyICsgXCIgOiBcIiArIGkgKyBcIiA+XCIgKyB0aGlzLmVxdWFscyArIFwiIFwiICsgdGhpcy50b1ZhciArIFwiOyBcIiArIGNvbmQgKyBcIiA/IFwiICsgaSArIFwiKysgOiBcIiArIGkgKyBcIi0tXCI7XG4gICAgICB9XG4gICAgICBwb3N0ID0gXCJ7IFwiICsgcmVzdWx0ICsgXCIucHVzaChcIiArIGkgKyBcIik7IH1cXG5cIiArIGlkdCArIFwicmV0dXJuIFwiICsgcmVzdWx0ICsgXCI7XFxuXCIgKyBvLmluZGVudDtcbiAgICAgIGhhc0FyZ3MgPSBmdW5jdGlvbihub2RlKSB7XG4gICAgICAgIHJldHVybiBub2RlICE9IG51bGwgPyBub2RlLmNvbnRhaW5zKGlzTGl0ZXJhbEFyZ3VtZW50cykgOiB2b2lkIDA7XG4gICAgICB9O1xuICAgICAgaWYgKGhhc0FyZ3ModGhpcy5mcm9tKSB8fCBoYXNBcmdzKHRoaXMudG8pKSB7XG4gICAgICAgIGFyZ3MgPSAnLCBhcmd1bWVudHMnO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFt0aGlzLm1ha2VDb2RlKFwiKGZ1bmN0aW9uKCkge1wiICsgcHJlICsgXCJcXG5cIiArIGlkdCArIFwiZm9yIChcIiArIGJvZHkgKyBcIilcIiArIHBvc3QgKyBcIn0pLmFwcGx5KHRoaXNcIiArIChhcmdzICE9IG51bGwgPyBhcmdzIDogJycpICsgXCIpXCIpXTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFJhbmdlO1xuXG4gIH0pKEJhc2UpO1xuXG4gIGV4cG9ydHMuU2xpY2UgPSBTbGljZSA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoU2xpY2UsIF9zdXBlcik7XG5cbiAgICBTbGljZS5wcm90b3R5cGUuY2hpbGRyZW4gPSBbJ3JhbmdlJ107XG5cbiAgICBmdW5jdGlvbiBTbGljZShyYW5nZSkge1xuICAgICAgdGhpcy5yYW5nZSA9IHJhbmdlO1xuICAgICAgU2xpY2UuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgU2xpY2UucHJvdG90eXBlLmNvbXBpbGVOb2RlID0gZnVuY3Rpb24obykge1xuICAgICAgdmFyIGNvbXBpbGVkLCBjb21waWxlZFRleHQsIGZyb20sIGZyb21Db21waWxlZCwgdG8sIHRvU3RyLCBfcmVmMjtcbiAgICAgIF9yZWYyID0gdGhpcy5yYW5nZSwgdG8gPSBfcmVmMi50bywgZnJvbSA9IF9yZWYyLmZyb207XG4gICAgICBmcm9tQ29tcGlsZWQgPSBmcm9tICYmIGZyb20uY29tcGlsZVRvRnJhZ21lbnRzKG8sIExFVkVMX1BBUkVOKSB8fCBbdGhpcy5tYWtlQ29kZSgnMCcpXTtcbiAgICAgIGlmICh0bykge1xuICAgICAgICBjb21waWxlZCA9IHRvLmNvbXBpbGVUb0ZyYWdtZW50cyhvLCBMRVZFTF9QQVJFTik7XG4gICAgICAgIGNvbXBpbGVkVGV4dCA9IGZyYWdtZW50c1RvVGV4dChjb21waWxlZCk7XG4gICAgICAgIGlmICghKCF0aGlzLnJhbmdlLmV4Y2x1c2l2ZSAmJiArY29tcGlsZWRUZXh0ID09PSAtMSkpIHtcbiAgICAgICAgICB0b1N0ciA9ICcsICcgKyAodGhpcy5yYW5nZS5leGNsdXNpdmUgPyBjb21waWxlZFRleHQgOiBTSU1QTEVOVU0udGVzdChjb21waWxlZFRleHQpID8gXCJcIiArICgrY29tcGlsZWRUZXh0ICsgMSkgOiAoY29tcGlsZWQgPSB0by5jb21waWxlVG9GcmFnbWVudHMobywgTEVWRUxfQUNDRVNTKSwgXCIrXCIgKyAoZnJhZ21lbnRzVG9UZXh0KGNvbXBpbGVkKSkgKyBcIiArIDEgfHwgOWU5XCIpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIFt0aGlzLm1ha2VDb2RlKFwiLnNsaWNlKFwiICsgKGZyYWdtZW50c1RvVGV4dChmcm9tQ29tcGlsZWQpKSArICh0b1N0ciB8fCAnJykgKyBcIilcIildO1xuICAgIH07XG5cbiAgICByZXR1cm4gU2xpY2U7XG5cbiAgfSkoQmFzZSk7XG5cbiAgZXhwb3J0cy5PYmogPSBPYmogPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKE9iaiwgX3N1cGVyKTtcblxuICAgIGZ1bmN0aW9uIE9iaihwcm9wcywgZ2VuZXJhdGVkKSB7XG4gICAgICB0aGlzLmdlbmVyYXRlZCA9IGdlbmVyYXRlZCAhPSBudWxsID8gZ2VuZXJhdGVkIDogZmFsc2U7XG4gICAgICB0aGlzLm9iamVjdHMgPSB0aGlzLnByb3BlcnRpZXMgPSBwcm9wcyB8fCBbXTtcbiAgICAgIE9iai5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBPYmoucHJvdG90eXBlLmNoaWxkcmVuID0gWydwcm9wZXJ0aWVzJ107XG5cbiAgICBPYmoucHJvdG90eXBlLmNvbXBpbGVOb2RlID0gZnVuY3Rpb24obykge1xuICAgICAgdmFyIGFuc3dlciwgaSwgaWR0LCBpbmRlbnQsIGpvaW4sIGxhc3ROb25jb20sIG5vZGUsIHByb3AsIHByb3BzLCBfaSwgX2osIF9sZW4sIF9sZW4xO1xuICAgICAgcHJvcHMgPSB0aGlzLnByb3BlcnRpZXM7XG4gICAgICBpZiAoIXByb3BzLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gW3RoaXMubWFrZUNvZGUodGhpcy5mcm9udCA/ICcoe30pJyA6ICd7fScpXTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmdlbmVyYXRlZCkge1xuICAgICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IHByb3BzLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICAgICAgbm9kZSA9IHByb3BzW19pXTtcbiAgICAgICAgICBpZiAobm9kZSBpbnN0YW5jZW9mIFZhbHVlKSB7XG4gICAgICAgICAgICBub2RlLmVycm9yKCdjYW5ub3QgaGF2ZSBhbiBpbXBsaWNpdCB2YWx1ZSBpbiBhbiBpbXBsaWNpdCBvYmplY3QnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlkdCA9IG8uaW5kZW50ICs9IFRBQjtcbiAgICAgIGxhc3ROb25jb20gPSB0aGlzLmxhc3ROb25Db21tZW50KHRoaXMucHJvcGVydGllcyk7XG4gICAgICBhbnN3ZXIgPSBbXTtcbiAgICAgIGZvciAoaSA9IF9qID0gMCwgX2xlbjEgPSBwcm9wcy5sZW5ndGg7IF9qIDwgX2xlbjE7IGkgPSArK19qKSB7XG4gICAgICAgIHByb3AgPSBwcm9wc1tpXTtcbiAgICAgICAgam9pbiA9IGkgPT09IHByb3BzLmxlbmd0aCAtIDEgPyAnJyA6IHByb3AgPT09IGxhc3ROb25jb20gfHwgcHJvcCBpbnN0YW5jZW9mIENvbW1lbnQgPyAnXFxuJyA6ICcsXFxuJztcbiAgICAgICAgaW5kZW50ID0gcHJvcCBpbnN0YW5jZW9mIENvbW1lbnQgPyAnJyA6IGlkdDtcbiAgICAgICAgaWYgKHByb3AgaW5zdGFuY2VvZiBBc3NpZ24gJiYgcHJvcC52YXJpYWJsZSBpbnN0YW5jZW9mIFZhbHVlICYmIHByb3AudmFyaWFibGUuaGFzUHJvcGVydGllcygpKSB7XG4gICAgICAgICAgcHJvcC52YXJpYWJsZS5lcnJvcignSW52YWxpZCBvYmplY3Qga2V5Jyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb3AgaW5zdGFuY2VvZiBWYWx1ZSAmJiBwcm9wW1widGhpc1wiXSkge1xuICAgICAgICAgIHByb3AgPSBuZXcgQXNzaWduKHByb3AucHJvcGVydGllc1swXS5uYW1lLCBwcm9wLCAnb2JqZWN0Jyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEocHJvcCBpbnN0YW5jZW9mIENvbW1lbnQpKSB7XG4gICAgICAgICAgaWYgKCEocHJvcCBpbnN0YW5jZW9mIEFzc2lnbikpIHtcbiAgICAgICAgICAgIHByb3AgPSBuZXcgQXNzaWduKHByb3AsIHByb3AsICdvYmplY3QnKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgKHByb3AudmFyaWFibGUuYmFzZSB8fCBwcm9wLnZhcmlhYmxlKS5hc0tleSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluZGVudCkge1xuICAgICAgICAgIGFuc3dlci5wdXNoKHRoaXMubWFrZUNvZGUoaW5kZW50KSk7XG4gICAgICAgIH1cbiAgICAgICAgYW5zd2VyLnB1c2guYXBwbHkoYW5zd2VyLCBwcm9wLmNvbXBpbGVUb0ZyYWdtZW50cyhvLCBMRVZFTF9UT1ApKTtcbiAgICAgICAgaWYgKGpvaW4pIHtcbiAgICAgICAgICBhbnN3ZXIucHVzaCh0aGlzLm1ha2VDb2RlKGpvaW4pKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgYW5zd2VyLnVuc2hpZnQodGhpcy5tYWtlQ29kZShcIntcIiArIChwcm9wcy5sZW5ndGggJiYgJ1xcbicpKSk7XG4gICAgICBhbnN3ZXIucHVzaCh0aGlzLm1ha2VDb2RlKFwiXCIgKyAocHJvcHMubGVuZ3RoICYmICdcXG4nICsgdGhpcy50YWIpICsgXCJ9XCIpKTtcbiAgICAgIGlmICh0aGlzLmZyb250KSB7XG4gICAgICAgIHJldHVybiB0aGlzLndyYXBJbkJyYWNlcyhhbnN3ZXIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGFuc3dlcjtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgT2JqLnByb3RvdHlwZS5hc3NpZ25zID0gZnVuY3Rpb24obmFtZSkge1xuICAgICAgdmFyIHByb3AsIF9pLCBfbGVuLCBfcmVmMjtcbiAgICAgIF9yZWYyID0gdGhpcy5wcm9wZXJ0aWVzO1xuICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmMi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICBwcm9wID0gX3JlZjJbX2ldO1xuICAgICAgICBpZiAocHJvcC5hc3NpZ25zKG5hbWUpKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuXG4gICAgT2JqLnByb3RvdHlwZS5pY2VkVG9TbG90ID0gZnVuY3Rpb24oaSkge1xuICAgICAgdmFyIGFjY2VzcywgcHJvcCwgX2ksIF9sZW4sIF9yZWYyLCBfcmVzdWx0cztcbiAgICAgIF9yZWYyID0gdGhpcy5wcm9wZXJ0aWVzO1xuICAgICAgX3Jlc3VsdHMgPSBbXTtcbiAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZjIubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgcHJvcCA9IF9yZWYyW19pXTtcbiAgICAgICAgaWYgKHByb3AgaW5zdGFuY2VvZiBBc3NpZ24pIHtcbiAgICAgICAgICBfcmVzdWx0cy5wdXNoKChwcm9wLnZhbHVlLmljZWRUb1Nsb3QoaSkpLmFkZEFjY2Vzcyhwcm9wLnZhcmlhYmxlLmljZWRUb1Nsb3RBY2Nlc3MoKSkpO1xuICAgICAgICB9IGVsc2UgaWYgKHByb3AgaW5zdGFuY2VvZiBWYWx1ZSkge1xuICAgICAgICAgIGFjY2VzcyA9IHByb3AuaWNlZFRvU2xvdEFjY2VzcygpO1xuICAgICAgICAgIF9yZXN1bHRzLnB1c2goKHByb3AuaWNlZFRvU2xvdChpKSkuYWRkQWNjZXNzKGFjY2VzcykpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIF9yZXN1bHRzLnB1c2godm9pZCAwKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIF9yZXN1bHRzO1xuICAgIH07XG5cbiAgICByZXR1cm4gT2JqO1xuXG4gIH0pKEJhc2UpO1xuXG4gIGV4cG9ydHMuQXJyID0gQXJyID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhBcnIsIF9zdXBlcik7XG5cbiAgICBmdW5jdGlvbiBBcnIob2Jqcykge1xuICAgICAgdGhpcy5vYmplY3RzID0gb2JqcyB8fCBbXTtcbiAgICAgIEFyci5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBBcnIucHJvdG90eXBlLmNoaWxkcmVuID0gWydvYmplY3RzJ107XG5cbiAgICBBcnIucHJvdG90eXBlLmNvbXBpbGVOb2RlID0gZnVuY3Rpb24obykge1xuICAgICAgdmFyIGFuc3dlciwgY29tcGlsZWRPYmpzLCBmcmFnbWVudHMsIGluZGV4LCBvYmosIF9pLCBfbGVuO1xuICAgICAgaWYgKCF0aGlzLm9iamVjdHMubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBbdGhpcy5tYWtlQ29kZSgnW10nKV07XG4gICAgICB9XG4gICAgICBvLmluZGVudCArPSBUQUI7XG4gICAgICBhbnN3ZXIgPSBTcGxhdC5jb21waWxlU3BsYXR0ZWRBcnJheShvLCB0aGlzLm9iamVjdHMpO1xuICAgICAgaWYgKGFuc3dlci5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIGFuc3dlcjtcbiAgICAgIH1cbiAgICAgIGFuc3dlciA9IFtdO1xuICAgICAgY29tcGlsZWRPYmpzID0gKGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgX2ksIF9sZW4sIF9yZWYyLCBfcmVzdWx0cztcbiAgICAgICAgX3JlZjIgPSB0aGlzLm9iamVjdHM7XG4gICAgICAgIF9yZXN1bHRzID0gW107XG4gICAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZjIubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgICBvYmogPSBfcmVmMltfaV07XG4gICAgICAgICAgX3Jlc3VsdHMucHVzaChvYmouY29tcGlsZVRvRnJhZ21lbnRzKG8sIExFVkVMX0xJU1QpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX3Jlc3VsdHM7XG4gICAgICB9KS5jYWxsKHRoaXMpO1xuICAgICAgZm9yIChpbmRleCA9IF9pID0gMCwgX2xlbiA9IGNvbXBpbGVkT2Jqcy5sZW5ndGg7IF9pIDwgX2xlbjsgaW5kZXggPSArK19pKSB7XG4gICAgICAgIGZyYWdtZW50cyA9IGNvbXBpbGVkT2Jqc1tpbmRleF07XG4gICAgICAgIGlmIChpbmRleCkge1xuICAgICAgICAgIGFuc3dlci5wdXNoKHRoaXMubWFrZUNvZGUoXCIsIFwiKSk7XG4gICAgICAgIH1cbiAgICAgICAgYW5zd2VyLnB1c2guYXBwbHkoYW5zd2VyLCBmcmFnbWVudHMpO1xuICAgICAgfVxuICAgICAgaWYgKGZyYWdtZW50c1RvVGV4dChhbnN3ZXIpLmluZGV4T2YoJ1xcbicpID49IDApIHtcbiAgICAgICAgYW5zd2VyLnVuc2hpZnQodGhpcy5tYWtlQ29kZShcIltcXG5cIiArIG8uaW5kZW50KSk7XG4gICAgICAgIGFuc3dlci5wdXNoKHRoaXMubWFrZUNvZGUoXCJcXG5cIiArIHRoaXMudGFiICsgXCJdXCIpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFuc3dlci51bnNoaWZ0KHRoaXMubWFrZUNvZGUoXCJbXCIpKTtcbiAgICAgICAgYW5zd2VyLnB1c2godGhpcy5tYWtlQ29kZShcIl1cIikpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGFuc3dlcjtcbiAgICB9O1xuXG4gICAgQXJyLnByb3RvdHlwZS5hc3NpZ25zID0gZnVuY3Rpb24obmFtZSkge1xuICAgICAgdmFyIG9iaiwgX2ksIF9sZW4sIF9yZWYyO1xuICAgICAgX3JlZjIgPSB0aGlzLm9iamVjdHM7XG4gICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYyLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICAgIG9iaiA9IF9yZWYyW19pXTtcbiAgICAgICAgaWYgKG9iai5hc3NpZ25zKG5hbWUpKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEFycjtcblxuICB9KShCYXNlKTtcblxuICBleHBvcnRzLkNsYXNzID0gQ2xhc3MgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKENsYXNzLCBfc3VwZXIpO1xuXG4gICAgZnVuY3Rpb24gQ2xhc3ModmFyaWFibGUsIHBhcmVudCwgYm9keSkge1xuICAgICAgdGhpcy52YXJpYWJsZSA9IHZhcmlhYmxlO1xuICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICB0aGlzLmJvZHkgPSBib2R5ICE9IG51bGwgPyBib2R5IDogbmV3IEJsb2NrO1xuICAgICAgQ2xhc3MuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7XG4gICAgICB0aGlzLmJvdW5kRnVuY3MgPSBbXTtcbiAgICAgIHRoaXMuYm9keS5jbGFzc0JvZHkgPSB0cnVlO1xuICAgIH1cblxuICAgIENsYXNzLnByb3RvdHlwZS5jaGlsZHJlbiA9IFsndmFyaWFibGUnLCAncGFyZW50JywgJ2JvZHknXTtcblxuICAgIENsYXNzLnByb3RvdHlwZS5kZXRlcm1pbmVOYW1lID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgZGVjbCwgdGFpbDtcbiAgICAgIGlmICghdGhpcy52YXJpYWJsZSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIGRlY2wgPSAodGFpbCA9IGxhc3QodGhpcy52YXJpYWJsZS5wcm9wZXJ0aWVzKSkgPyB0YWlsIGluc3RhbmNlb2YgQWNjZXNzICYmIHRhaWwubmFtZS52YWx1ZSA6IHRoaXMudmFyaWFibGUuYmFzZS52YWx1ZTtcbiAgICAgIGlmIChfX2luZGV4T2YuY2FsbChTVFJJQ1RfUFJPU0NSSUJFRCwgZGVjbCkgPj0gMCkge1xuICAgICAgICB0aGlzLnZhcmlhYmxlLmVycm9yKFwiY2xhc3MgdmFyaWFibGUgbmFtZSBtYXkgbm90IGJlIFwiICsgZGVjbCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZGVjbCAmJiAoZGVjbCA9IElERU5USUZJRVIudGVzdChkZWNsKSAmJiBkZWNsKTtcbiAgICB9O1xuXG4gICAgQ2xhc3MucHJvdG90eXBlLnNldENvbnRleHQgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgICByZXR1cm4gdGhpcy5ib2R5LnRyYXZlcnNlQ2hpbGRyZW4oZmFsc2UsIGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgICAgaWYgKG5vZGUuY2xhc3NCb2R5KSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChub2RlIGluc3RhbmNlb2YgTGl0ZXJhbCAmJiBub2RlLnZhbHVlID09PSAndGhpcycpIHtcbiAgICAgICAgICByZXR1cm4gbm9kZS52YWx1ZSA9IG5hbWU7XG4gICAgICAgIH0gZWxzZSBpZiAobm9kZSBpbnN0YW5jZW9mIENvZGUpIHtcbiAgICAgICAgICBub2RlLmtsYXNzID0gbmFtZTtcbiAgICAgICAgICBpZiAobm9kZS5ib3VuZCkge1xuICAgICAgICAgICAgcmV0dXJuIG5vZGUuY29udGV4dCA9IG5hbWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgQ2xhc3MucHJvdG90eXBlLmFkZEJvdW5kRnVuY3Rpb25zID0gZnVuY3Rpb24obykge1xuICAgICAgdmFyIGJ2YXIsIGxocywgX2ksIF9sZW4sIF9yZWYyO1xuICAgICAgX3JlZjIgPSB0aGlzLmJvdW5kRnVuY3M7XG4gICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYyLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICAgIGJ2YXIgPSBfcmVmMltfaV07XG4gICAgICAgIGxocyA9IChuZXcgVmFsdWUobmV3IExpdGVyYWwoXCJ0aGlzXCIpLCBbbmV3IEFjY2VzcyhidmFyKV0pKS5jb21waWxlKG8pO1xuICAgICAgICB0aGlzLmN0b3IuYm9keS51bnNoaWZ0KG5ldyBMaXRlcmFsKFwiXCIgKyBsaHMgKyBcIiA9IFwiICsgKHV0aWxpdHkoJ2JpbmQnKSkgKyBcIihcIiArIGxocyArIFwiLCB0aGlzKVwiKSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIENsYXNzLnByb3RvdHlwZS5hZGRQcm9wZXJ0aWVzID0gZnVuY3Rpb24obm9kZSwgbmFtZSwgbykge1xuICAgICAgdmFyIGFzc2lnbiwgYmFzZSwgZXhwcnMsIGZ1bmMsIHByb3BzO1xuICAgICAgcHJvcHMgPSBub2RlLmJhc2UucHJvcGVydGllcy5zbGljZSgwKTtcbiAgICAgIGV4cHJzID0gKGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgX3Jlc3VsdHM7XG4gICAgICAgIF9yZXN1bHRzID0gW107XG4gICAgICAgIHdoaWxlIChhc3NpZ24gPSBwcm9wcy5zaGlmdCgpKSB7XG4gICAgICAgICAgaWYgKGFzc2lnbiBpbnN0YW5jZW9mIEFzc2lnbikge1xuICAgICAgICAgICAgYmFzZSA9IGFzc2lnbi52YXJpYWJsZS5iYXNlO1xuICAgICAgICAgICAgZGVsZXRlIGFzc2lnbi5jb250ZXh0O1xuICAgICAgICAgICAgZnVuYyA9IGFzc2lnbi52YWx1ZTtcbiAgICAgICAgICAgIGlmIChiYXNlLnZhbHVlID09PSAnY29uc3RydWN0b3InKSB7XG4gICAgICAgICAgICAgIGlmICh0aGlzLmN0b3IpIHtcbiAgICAgICAgICAgICAgICBhc3NpZ24uZXJyb3IoJ2Nhbm5vdCBkZWZpbmUgbW9yZSB0aGFuIG9uZSBjb25zdHJ1Y3RvciBpbiBhIGNsYXNzJyk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKGZ1bmMuYm91bmQpIHtcbiAgICAgICAgICAgICAgICBhc3NpZ24uZXJyb3IoJ2Nhbm5vdCBkZWZpbmUgYSBjb25zdHJ1Y3RvciBhcyBhIGJvdW5kIGZ1bmN0aW9uJyk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKGZ1bmMgaW5zdGFuY2VvZiBDb2RlKSB7XG4gICAgICAgICAgICAgICAgYXNzaWduID0gdGhpcy5jdG9yID0gZnVuYztcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmV4dGVybmFsQ3RvciA9IG8uY2xhc3NTY29wZS5mcmVlVmFyaWFibGUoJ2NsYXNzJyk7XG4gICAgICAgICAgICAgICAgYXNzaWduID0gbmV3IEFzc2lnbihuZXcgTGl0ZXJhbCh0aGlzLmV4dGVybmFsQ3RvciksIGZ1bmMpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBpZiAoYXNzaWduLnZhcmlhYmxlW1widGhpc1wiXSkge1xuICAgICAgICAgICAgICAgIGZ1bmNbXCJzdGF0aWNcIl0gPSB0cnVlO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGFzc2lnbi52YXJpYWJsZSA9IG5ldyBWYWx1ZShuZXcgTGl0ZXJhbChuYW1lKSwgW25ldyBBY2Nlc3MobmV3IExpdGVyYWwoJ3Byb3RvdHlwZScpKSwgbmV3IEFjY2VzcyhiYXNlKV0pO1xuICAgICAgICAgICAgICAgIGlmIChmdW5jIGluc3RhbmNlb2YgQ29kZSAmJiBmdW5jLmJvdW5kKSB7XG4gICAgICAgICAgICAgICAgICB0aGlzLmJvdW5kRnVuY3MucHVzaChiYXNlKTtcbiAgICAgICAgICAgICAgICAgIGZ1bmMuYm91bmQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgX3Jlc3VsdHMucHVzaChhc3NpZ24pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfcmVzdWx0cztcbiAgICAgIH0pLmNhbGwodGhpcyk7XG4gICAgICByZXR1cm4gY29tcGFjdChleHBycyk7XG4gICAgfTtcblxuICAgIENsYXNzLnByb3RvdHlwZS53YWxrQm9keSA9IGZ1bmN0aW9uKG5hbWUsIG8pIHtcbiAgICAgIHJldHVybiB0aGlzLnRyYXZlcnNlQ2hpbGRyZW4oZmFsc2UsIChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oY2hpbGQpIHtcbiAgICAgICAgICB2YXIgY29udCwgZXhwcywgaSwgbm9kZSwgX2ksIF9sZW4sIF9yZWYyO1xuICAgICAgICAgIGNvbnQgPSB0cnVlO1xuICAgICAgICAgIGlmIChjaGlsZCBpbnN0YW5jZW9mIENsYXNzKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChjaGlsZCBpbnN0YW5jZW9mIEJsb2NrKSB7XG4gICAgICAgICAgICBfcmVmMiA9IGV4cHMgPSBjaGlsZC5leHByZXNzaW9ucztcbiAgICAgICAgICAgIGZvciAoaSA9IF9pID0gMCwgX2xlbiA9IF9yZWYyLmxlbmd0aDsgX2kgPCBfbGVuOyBpID0gKytfaSkge1xuICAgICAgICAgICAgICBub2RlID0gX3JlZjJbaV07XG4gICAgICAgICAgICAgIGlmIChub2RlIGluc3RhbmNlb2YgQXNzaWduICYmIG5vZGUudmFyaWFibGUubG9va3NTdGF0aWMobmFtZSkpIHtcbiAgICAgICAgICAgICAgICBub2RlLnZhbHVlW1wic3RhdGljXCJdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChub2RlIGluc3RhbmNlb2YgVmFsdWUgJiYgbm9kZS5pc09iamVjdCh0cnVlKSkge1xuICAgICAgICAgICAgICAgIGNvbnQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBleHBzW2ldID0gX3RoaXMuYWRkUHJvcGVydGllcyhub2RlLCBuYW1lLCBvKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2hpbGQuZXhwcmVzc2lvbnMgPSBleHBzID0gZmxhdHRlbihleHBzKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGNvbnQgJiYgIShjaGlsZCBpbnN0YW5jZW9mIENsYXNzKTtcbiAgICAgICAgfTtcbiAgICAgIH0pKHRoaXMpKTtcbiAgICB9O1xuXG4gICAgQ2xhc3MucHJvdG90eXBlLmhvaXN0RGlyZWN0aXZlUHJvbG9ndWUgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBleHByZXNzaW9ucywgaW5kZXgsIG5vZGU7XG4gICAgICBpbmRleCA9IDA7XG4gICAgICBleHByZXNzaW9ucyA9IHRoaXMuYm9keS5leHByZXNzaW9ucztcbiAgICAgIHdoaWxlICgobm9kZSA9IGV4cHJlc3Npb25zW2luZGV4XSkgJiYgbm9kZSBpbnN0YW5jZW9mIENvbW1lbnQgfHwgbm9kZSBpbnN0YW5jZW9mIFZhbHVlICYmIG5vZGUuaXNTdHJpbmcoKSkge1xuICAgICAgICArK2luZGV4O1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuZGlyZWN0aXZlcyA9IGV4cHJlc3Npb25zLnNwbGljZSgwLCBpbmRleCk7XG4gICAgfTtcblxuICAgIENsYXNzLnByb3RvdHlwZS5lbnN1cmVDb25zdHJ1Y3RvciA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgIGlmICghdGhpcy5jdG9yKSB7XG4gICAgICAgIHRoaXMuY3RvciA9IG5ldyBDb2RlO1xuICAgICAgICBpZiAodGhpcy5leHRlcm5hbEN0b3IpIHtcbiAgICAgICAgICB0aGlzLmN0b3IuYm9keS5wdXNoKG5ldyBMaXRlcmFsKFwiXCIgKyB0aGlzLmV4dGVybmFsQ3RvciArIFwiLmFwcGx5KHRoaXMsIGFyZ3VtZW50cylcIikpO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMucGFyZW50KSB7XG4gICAgICAgICAgdGhpcy5jdG9yLmJvZHkucHVzaChuZXcgTGl0ZXJhbChcIlwiICsgbmFtZSArIFwiLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpXCIpKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmN0b3IuYm9keS5tYWtlUmV0dXJuKCk7XG4gICAgICAgIHRoaXMuYm9keS5leHByZXNzaW9ucy51bnNoaWZ0KHRoaXMuY3Rvcik7XG4gICAgICB9XG4gICAgICB0aGlzLmN0b3IuY3RvciA9IHRoaXMuY3Rvci5uYW1lID0gbmFtZTtcbiAgICAgIHRoaXMuY3Rvci5rbGFzcyA9IG51bGw7XG4gICAgICByZXR1cm4gdGhpcy5jdG9yLm5vUmV0dXJuID0gdHJ1ZTtcbiAgICB9O1xuXG4gICAgQ2xhc3MucHJvdG90eXBlLmNvbXBpbGVOb2RlID0gZnVuY3Rpb24obykge1xuICAgICAgdmFyIGFyZ3MsIGFyZ3VtZW50c05vZGUsIGZ1bmMsIGp1bXBOb2RlLCBrbGFzcywgbG5hbWUsIG5hbWUsIHN1cGVyQ2xhc3MsIF9yZWYyO1xuICAgICAgaWYgKGp1bXBOb2RlID0gdGhpcy5ib2R5Lmp1bXBzKCkpIHtcbiAgICAgICAganVtcE5vZGUuZXJyb3IoJ0NsYXNzIGJvZGllcyBjYW5ub3QgY29udGFpbiBwdXJlIHN0YXRlbWVudHMnKTtcbiAgICAgIH1cbiAgICAgIGlmIChhcmd1bWVudHNOb2RlID0gdGhpcy5ib2R5LmNvbnRhaW5zKGlzTGl0ZXJhbEFyZ3VtZW50cykpIHtcbiAgICAgICAgYXJndW1lbnRzTm9kZS5lcnJvcihcIkNsYXNzIGJvZGllcyBzaG91bGRuJ3QgcmVmZXJlbmNlIGFyZ3VtZW50c1wiKTtcbiAgICAgIH1cbiAgICAgIG5hbWUgPSB0aGlzLmRldGVybWluZU5hbWUoKSB8fCAnX0NsYXNzJztcbiAgICAgIGlmIChuYW1lLnJlc2VydmVkKSB7XG4gICAgICAgIG5hbWUgPSBcIl9cIiArIG5hbWU7XG4gICAgICB9XG4gICAgICBsbmFtZSA9IG5ldyBMaXRlcmFsKG5hbWUpO1xuICAgICAgZnVuYyA9IG5ldyBDb2RlKFtdLCBCbG9jay53cmFwKFt0aGlzLmJvZHldKSk7XG4gICAgICBhcmdzID0gW107XG4gICAgICBvLmNsYXNzU2NvcGUgPSBmdW5jLm1ha2VTY29wZShvLnNjb3BlKTtcbiAgICAgIHRoaXMuaG9pc3REaXJlY3RpdmVQcm9sb2d1ZSgpO1xuICAgICAgdGhpcy5zZXRDb250ZXh0KG5hbWUpO1xuICAgICAgdGhpcy53YWxrQm9keShuYW1lLCBvKTtcbiAgICAgIHRoaXMuZW5zdXJlQ29uc3RydWN0b3IobmFtZSk7XG4gICAgICB0aGlzLmFkZEJvdW5kRnVuY3Rpb25zKG8pO1xuICAgICAgdGhpcy5ib2R5LnNwYWNlZCA9IHRydWU7XG4gICAgICB0aGlzLmJvZHkuZXhwcmVzc2lvbnMucHVzaChsbmFtZSk7XG4gICAgICBpZiAodGhpcy5wYXJlbnQpIHtcbiAgICAgICAgc3VwZXJDbGFzcyA9IG5ldyBMaXRlcmFsKG8uY2xhc3NTY29wZS5mcmVlVmFyaWFibGUoJ3N1cGVyJywgZmFsc2UpKTtcbiAgICAgICAgdGhpcy5ib2R5LmV4cHJlc3Npb25zLnVuc2hpZnQobmV3IEV4dGVuZHMobG5hbWUsIHN1cGVyQ2xhc3MpKTtcbiAgICAgICAgZnVuYy5wYXJhbXMucHVzaChuZXcgUGFyYW0oc3VwZXJDbGFzcykpO1xuICAgICAgICBhcmdzLnB1c2godGhpcy5wYXJlbnQpO1xuICAgICAgfVxuICAgICAgKF9yZWYyID0gdGhpcy5ib2R5LmV4cHJlc3Npb25zKS51bnNoaWZ0LmFwcGx5KF9yZWYyLCB0aGlzLmRpcmVjdGl2ZXMpO1xuICAgICAga2xhc3MgPSBuZXcgUGFyZW5zKG5ldyBDYWxsKGZ1bmMsIGFyZ3MpKTtcbiAgICAgIGlmICh0aGlzLnZhcmlhYmxlKSB7XG4gICAgICAgIGtsYXNzID0gbmV3IEFzc2lnbih0aGlzLnZhcmlhYmxlLCBrbGFzcyk7XG4gICAgICB9XG4gICAgICByZXR1cm4ga2xhc3MuY29tcGlsZVRvRnJhZ21lbnRzKG8pO1xuICAgIH07XG5cbiAgICByZXR1cm4gQ2xhc3M7XG5cbiAgfSkoQmFzZSk7XG5cbiAgZXhwb3J0cy5Bc3NpZ24gPSBBc3NpZ24gPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEFzc2lnbiwgX3N1cGVyKTtcblxuICAgIGZ1bmN0aW9uIEFzc2lnbih2YXJpYWJsZSwgdmFsdWUsIGNvbnRleHQsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBmb3JiaWRkZW4sIG5hbWUsIF9yZWYyO1xuICAgICAgdGhpcy52YXJpYWJsZSA9IHZhcmlhYmxlO1xuICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgICAgIEFzc2lnbi5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzKTtcbiAgICAgIHRoaXMucGFyYW0gPSBvcHRpb25zICYmIG9wdGlvbnMucGFyYW07XG4gICAgICB0aGlzLnN1YnBhdHRlcm4gPSBvcHRpb25zICYmIG9wdGlvbnMuc3VicGF0dGVybjtcbiAgICAgIGZvcmJpZGRlbiA9IChfcmVmMiA9IChuYW1lID0gdGhpcy52YXJpYWJsZS51bndyYXBBbGwoKS52YWx1ZSksIF9faW5kZXhPZi5jYWxsKFNUUklDVF9QUk9TQ1JJQkVELCBfcmVmMikgPj0gMCk7XG4gICAgICBpZiAoZm9yYmlkZGVuICYmIHRoaXMuY29udGV4dCAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgdGhpcy52YXJpYWJsZS5lcnJvcihcInZhcmlhYmxlIG5hbWUgbWF5IG5vdCBiZSBcXFwiXCIgKyBuYW1lICsgXCJcXFwiXCIpO1xuICAgICAgfVxuICAgICAgdGhpcy5pY2VkbG9jYWwgPSBvcHRpb25zICYmIG9wdGlvbnMuaWNlZGxvY2FsO1xuICAgIH1cblxuICAgIEFzc2lnbi5wcm90b3R5cGUuY2hpbGRyZW4gPSBbJ3ZhcmlhYmxlJywgJ3ZhbHVlJ107XG5cbiAgICBBc3NpZ24ucHJvdG90eXBlLmlzU3RhdGVtZW50ID0gZnVuY3Rpb24obykge1xuICAgICAgcmV0dXJuIChvICE9IG51bGwgPyBvLmxldmVsIDogdm9pZCAwKSA9PT0gTEVWRUxfVE9QICYmICh0aGlzLmNvbnRleHQgIT0gbnVsbCkgJiYgX19pbmRleE9mLmNhbGwodGhpcy5jb250ZXh0LCBcIj9cIikgPj0gMDtcbiAgICB9O1xuXG4gICAgQXNzaWduLnByb3RvdHlwZS5hc3NpZ25zID0gZnVuY3Rpb24obmFtZSkge1xuICAgICAgcmV0dXJuIHRoaXNbdGhpcy5jb250ZXh0ID09PSAnb2JqZWN0JyA/ICd2YWx1ZScgOiAndmFyaWFibGUnXS5hc3NpZ25zKG5hbWUpO1xuICAgIH07XG5cbiAgICBBc3NpZ24ucHJvdG90eXBlLnVuZm9sZFNvYWsgPSBmdW5jdGlvbihvKSB7XG4gICAgICByZXR1cm4gdW5mb2xkU29hayhvLCB0aGlzLCAndmFyaWFibGUnKTtcbiAgICB9O1xuXG4gICAgQXNzaWduLnByb3RvdHlwZS5jb21waWxlTm9kZSA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBhbnN3ZXIsIGNvbXBpbGVkTmFtZSwgaXNWYWx1ZSwgbWF0Y2gsIG5hbWUsIHZhbCwgdmFyQmFzZSwgX3JlZjIsIF9yZWYzLCBfcmVmNCwgX3JlZjU7XG4gICAgICB0aGlzLnZhbHVlLmljZWRTdGF0ZW1lbnRBc3NlcnRpb24oKTtcbiAgICAgIGlmIChpc1ZhbHVlID0gdGhpcy52YXJpYWJsZSBpbnN0YW5jZW9mIFZhbHVlKSB7XG4gICAgICAgIGlmICh0aGlzLnZhcmlhYmxlLmlzQXJyYXkoKSB8fCB0aGlzLnZhcmlhYmxlLmlzT2JqZWN0KCkpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5jb21waWxlUGF0dGVybk1hdGNoKG8pO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnZhcmlhYmxlLmlzU3BsaWNlKCkpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5jb21waWxlU3BsaWNlKG8pO1xuICAgICAgICB9XG4gICAgICAgIGlmICgoX3JlZjIgPSB0aGlzLmNvbnRleHQpID09PSAnfHw9JyB8fCBfcmVmMiA9PT0gJyYmPScgfHwgX3JlZjIgPT09ICc/PScpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5jb21waWxlQ29uZGl0aW9uYWwobyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKChfcmVmMyA9IHRoaXMuY29udGV4dCkgPT09ICcqKj0nIHx8IF9yZWYzID09PSAnLy89JyB8fCBfcmVmMyA9PT0gJyUlPScpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5jb21waWxlU3BlY2lhbE1hdGgobyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbXBpbGVkTmFtZSA9IHRoaXMudmFyaWFibGUuY29tcGlsZVRvRnJhZ21lbnRzKG8sIExFVkVMX0xJU1QpO1xuICAgICAgbmFtZSA9IGZyYWdtZW50c1RvVGV4dChjb21waWxlZE5hbWUpO1xuICAgICAgaWYgKCF0aGlzLmNvbnRleHQpIHtcbiAgICAgICAgdmFyQmFzZSA9IHRoaXMudmFyaWFibGUudW53cmFwQWxsKCk7XG4gICAgICAgIGlmICghdmFyQmFzZS5pc0Fzc2lnbmFibGUoKSkge1xuICAgICAgICAgIHRoaXMudmFyaWFibGUuZXJyb3IoXCJcXFwiXCIgKyAodGhpcy52YXJpYWJsZS5jb21waWxlKG8pKSArIFwiXFxcIiBjYW5ub3QgYmUgYXNzaWduZWRcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEodHlwZW9mIHZhckJhc2UuaGFzUHJvcGVydGllcyA9PT0gXCJmdW5jdGlvblwiID8gdmFyQmFzZS5oYXNQcm9wZXJ0aWVzKCkgOiB2b2lkIDApKSB7XG4gICAgICAgICAgaWYgKHRoaXMucGFyYW0gfHwgdGhpcy5pY2VkbG9jYWwpIHtcbiAgICAgICAgICAgIG8uc2NvcGUuYWRkKG5hbWUsICd2YXInLCB0aGlzLmljZWRsb2NhbCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG8uc2NvcGUuZmluZChuYW1lKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLnZhbHVlIGluc3RhbmNlb2YgQ29kZSAmJiAobWF0Y2ggPSBNRVRIT0RfREVGLmV4ZWMobmFtZSkpKSB7XG4gICAgICAgIGlmIChtYXRjaFsyXSkge1xuICAgICAgICAgIHRoaXMudmFsdWUua2xhc3MgPSBtYXRjaFsxXTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnZhbHVlLm5hbWUgPSAoX3JlZjQgPSAoX3JlZjUgPSBtYXRjaFszXSkgIT0gbnVsbCA/IF9yZWY1IDogbWF0Y2hbNF0pICE9IG51bGwgPyBfcmVmNCA6IG1hdGNoWzVdO1xuICAgICAgfVxuICAgICAgdmFsID0gdGhpcy52YWx1ZS5jb21waWxlVG9GcmFnbWVudHMobywgTEVWRUxfTElTVCk7XG4gICAgICBpZiAodGhpcy5jb250ZXh0ID09PSAnb2JqZWN0Jykge1xuICAgICAgICByZXR1cm4gY29tcGlsZWROYW1lLmNvbmNhdCh0aGlzLm1ha2VDb2RlKFwiOiBcIiksIHZhbCk7XG4gICAgICB9XG4gICAgICBhbnN3ZXIgPSBjb21waWxlZE5hbWUuY29uY2F0KHRoaXMubWFrZUNvZGUoXCIgXCIgKyAodGhpcy5jb250ZXh0IHx8ICc9JykgKyBcIiBcIiksIHZhbCk7XG4gICAgICBpZiAoby5sZXZlbCA8PSBMRVZFTF9MSVNUKSB7XG4gICAgICAgIHJldHVybiBhbnN3ZXI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdGhpcy53cmFwSW5CcmFjZXMoYW5zd2VyKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgQXNzaWduLnByb3RvdHlwZS5jb21waWxlUGF0dGVybk1hdGNoID0gZnVuY3Rpb24obykge1xuICAgICAgdmFyIGFjYywgYXNzaWducywgY29kZSwgZXhwYW5kZWRJZHgsIGZyYWdtZW50cywgaSwgaWR4LCBpc09iamVjdCwgaXZhciwgbmFtZSwgb2JqLCBvYmplY3RzLCBvbGVuLCByZWYsIHJlc3QsIHRvcCwgdmFsLCB2YWx1ZSwgdnZhciwgdnZhclRleHQsIF9pLCBfbGVuLCBfcmVmMiwgX3JlZjMsIF9yZWY0LCBfcmVmNSwgX3JlZjYsIF9yZWY3O1xuICAgICAgdG9wID0gby5sZXZlbCA9PT0gTEVWRUxfVE9QO1xuICAgICAgdmFsdWUgPSB0aGlzLnZhbHVlO1xuICAgICAgb2JqZWN0cyA9IHRoaXMudmFyaWFibGUuYmFzZS5vYmplY3RzO1xuICAgICAgaWYgKCEob2xlbiA9IG9iamVjdHMubGVuZ3RoKSkge1xuICAgICAgICBjb2RlID0gdmFsdWUuY29tcGlsZVRvRnJhZ21lbnRzKG8pO1xuICAgICAgICBpZiAoby5sZXZlbCA+PSBMRVZFTF9PUCkge1xuICAgICAgICAgIHJldHVybiB0aGlzLndyYXBJbkJyYWNlcyhjb2RlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gY29kZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaXNPYmplY3QgPSB0aGlzLnZhcmlhYmxlLmlzT2JqZWN0KCk7XG4gICAgICBpZiAodG9wICYmIG9sZW4gPT09IDEgJiYgISgob2JqID0gb2JqZWN0c1swXSkgaW5zdGFuY2VvZiBTcGxhdCkpIHtcbiAgICAgICAgaWYgKG9iaiBpbnN0YW5jZW9mIEFzc2lnbikge1xuICAgICAgICAgIF9yZWYyID0gb2JqLCAoX3JlZjMgPSBfcmVmMi52YXJpYWJsZSwgaWR4ID0gX3JlZjMuYmFzZSksIG9iaiA9IF9yZWYyLnZhbHVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlkeCA9IGlzT2JqZWN0ID8gb2JqW1widGhpc1wiXSA/IG9iai5wcm9wZXJ0aWVzWzBdLm5hbWUgOiBvYmogOiBuZXcgTGl0ZXJhbCgwKTtcbiAgICAgICAgfVxuICAgICAgICBhY2MgPSBJREVOVElGSUVSLnRlc3QoaWR4LnVud3JhcCgpLnZhbHVlIHx8IDApO1xuICAgICAgICB2YWx1ZSA9IG5ldyBWYWx1ZSh2YWx1ZSk7XG4gICAgICAgIHZhbHVlLnByb3BlcnRpZXMucHVzaChuZXcgKGFjYyA/IEFjY2VzcyA6IEluZGV4KShpZHgpKTtcbiAgICAgICAgaWYgKF9yZWY0ID0gb2JqLnVud3JhcCgpLnZhbHVlLCBfX2luZGV4T2YuY2FsbChSRVNFUlZFRCwgX3JlZjQpID49IDApIHtcbiAgICAgICAgICBvYmouZXJyb3IoXCJhc3NpZ25tZW50IHRvIGEgcmVzZXJ2ZWQgd29yZDogXCIgKyAob2JqLmNvbXBpbGUobykpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IEFzc2lnbihvYmosIHZhbHVlLCBudWxsLCB7XG4gICAgICAgICAgcGFyYW06IHRoaXMucGFyYW1cbiAgICAgICAgfSkuY29tcGlsZVRvRnJhZ21lbnRzKG8sIExFVkVMX1RPUCk7XG4gICAgICB9XG4gICAgICB2dmFyID0gdmFsdWUuY29tcGlsZVRvRnJhZ21lbnRzKG8sIExFVkVMX0xJU1QpO1xuICAgICAgdnZhclRleHQgPSBmcmFnbWVudHNUb1RleHQodnZhcik7XG4gICAgICBhc3NpZ25zID0gW107XG4gICAgICBleHBhbmRlZElkeCA9IGZhbHNlO1xuICAgICAgaWYgKCFJREVOVElGSUVSLnRlc3QodnZhclRleHQpIHx8IHRoaXMudmFyaWFibGUuYXNzaWducyh2dmFyVGV4dCkpIHtcbiAgICAgICAgYXNzaWducy5wdXNoKFt0aGlzLm1ha2VDb2RlKFwiXCIgKyAocmVmID0gby5zY29wZS5mcmVlVmFyaWFibGUoJ3JlZicpKSArIFwiID0gXCIpXS5jb25jYXQoX19zbGljZS5jYWxsKHZ2YXIpKSk7XG4gICAgICAgIHZ2YXIgPSBbdGhpcy5tYWtlQ29kZShyZWYpXTtcbiAgICAgICAgdnZhclRleHQgPSByZWY7XG4gICAgICB9XG4gICAgICBmb3IgKGkgPSBfaSA9IDAsIF9sZW4gPSBvYmplY3RzLmxlbmd0aDsgX2kgPCBfbGVuOyBpID0gKytfaSkge1xuICAgICAgICBvYmogPSBvYmplY3RzW2ldO1xuICAgICAgICBpZHggPSBpO1xuICAgICAgICBpZiAoaXNPYmplY3QpIHtcbiAgICAgICAgICBpZiAob2JqIGluc3RhbmNlb2YgQXNzaWduKSB7XG4gICAgICAgICAgICBfcmVmNSA9IG9iaiwgKF9yZWY2ID0gX3JlZjUudmFyaWFibGUsIGlkeCA9IF9yZWY2LmJhc2UpLCBvYmogPSBfcmVmNS52YWx1ZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKG9iai5iYXNlIGluc3RhbmNlb2YgUGFyZW5zKSB7XG4gICAgICAgICAgICAgIF9yZWY3ID0gbmV3IFZhbHVlKG9iai51bndyYXBBbGwoKSkuY2FjaGVSZWZlcmVuY2UobyksIG9iaiA9IF9yZWY3WzBdLCBpZHggPSBfcmVmN1sxXTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGlkeCA9IG9ialtcInRoaXNcIl0gPyBvYmoucHJvcGVydGllc1swXS5uYW1lIDogb2JqO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIWV4cGFuZGVkSWR4ICYmIG9iaiBpbnN0YW5jZW9mIFNwbGF0KSB7XG4gICAgICAgICAgbmFtZSA9IG9iai5uYW1lLnVud3JhcCgpLnZhbHVlO1xuICAgICAgICAgIG9iaiA9IG9iai51bndyYXAoKTtcbiAgICAgICAgICB2YWwgPSBcIlwiICsgb2xlbiArIFwiIDw9IFwiICsgdnZhclRleHQgKyBcIi5sZW5ndGggPyBcIiArICh1dGlsaXR5KCdzbGljZScpKSArIFwiLmNhbGwoXCIgKyB2dmFyVGV4dCArIFwiLCBcIiArIGk7XG4gICAgICAgICAgaWYgKHJlc3QgPSBvbGVuIC0gaSAtIDEpIHtcbiAgICAgICAgICAgIGl2YXIgPSBvLnNjb3BlLmZyZWVWYXJpYWJsZSgnaScpO1xuICAgICAgICAgICAgdmFsICs9IFwiLCBcIiArIGl2YXIgKyBcIiA9IFwiICsgdnZhclRleHQgKyBcIi5sZW5ndGggLSBcIiArIHJlc3QgKyBcIikgOiAoXCIgKyBpdmFyICsgXCIgPSBcIiArIGkgKyBcIiwgW10pXCI7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhbCArPSBcIikgOiBbXVwiO1xuICAgICAgICAgIH1cbiAgICAgICAgICB2YWwgPSBuZXcgTGl0ZXJhbCh2YWwpO1xuICAgICAgICAgIGV4cGFuZGVkSWR4ID0gXCJcIiArIGl2YXIgKyBcIisrXCI7XG4gICAgICAgIH0gZWxzZSBpZiAoIWV4cGFuZGVkSWR4ICYmIG9iaiBpbnN0YW5jZW9mIEV4cGFuc2lvbikge1xuICAgICAgICAgIGlmIChyZXN0ID0gb2xlbiAtIGkgLSAxKSB7XG4gICAgICAgICAgICBpZiAocmVzdCA9PT0gMSkge1xuICAgICAgICAgICAgICBleHBhbmRlZElkeCA9IFwiXCIgKyB2dmFyVGV4dCArIFwiLmxlbmd0aCAtIDFcIjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGl2YXIgPSBvLnNjb3BlLmZyZWVWYXJpYWJsZSgnaScpO1xuICAgICAgICAgICAgICB2YWwgPSBuZXcgTGl0ZXJhbChcIlwiICsgaXZhciArIFwiID0gXCIgKyB2dmFyVGV4dCArIFwiLmxlbmd0aCAtIFwiICsgcmVzdCk7XG4gICAgICAgICAgICAgIGV4cGFuZGVkSWR4ID0gXCJcIiArIGl2YXIgKyBcIisrXCI7XG4gICAgICAgICAgICAgIGFzc2lnbnMucHVzaCh2YWwuY29tcGlsZVRvRnJhZ21lbnRzKG8sIExFVkVMX0xJU1QpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmFtZSA9IG9iai51bndyYXAoKS52YWx1ZTtcbiAgICAgICAgICBpZiAob2JqIGluc3RhbmNlb2YgU3BsYXQgfHwgb2JqIGluc3RhbmNlb2YgRXhwYW5zaW9uKSB7XG4gICAgICAgICAgICBvYmouZXJyb3IoXCJtdWx0aXBsZSBzcGxhdHMvZXhwYW5zaW9ucyBhcmUgZGlzYWxsb3dlZCBpbiBhbiBhc3NpZ25tZW50XCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAodHlwZW9mIGlkeCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIGlkeCA9IG5ldyBMaXRlcmFsKGV4cGFuZGVkSWR4IHx8IGlkeCk7XG4gICAgICAgICAgICBhY2MgPSBmYWxzZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYWNjID0gaXNPYmplY3QgJiYgSURFTlRJRklFUi50ZXN0KGlkeC51bndyYXAoKS52YWx1ZSB8fCAwKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdmFsID0gbmV3IFZhbHVlKG5ldyBMaXRlcmFsKHZ2YXJUZXh0KSwgW25ldyAoYWNjID8gQWNjZXNzIDogSW5kZXgpKGlkeCldKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoKG5hbWUgIT0gbnVsbCkgJiYgX19pbmRleE9mLmNhbGwoUkVTRVJWRUQsIG5hbWUpID49IDApIHtcbiAgICAgICAgICBvYmouZXJyb3IoXCJhc3NpZ25tZW50IHRvIGEgcmVzZXJ2ZWQgd29yZDogXCIgKyAob2JqLmNvbXBpbGUobykpKTtcbiAgICAgICAgfVxuICAgICAgICBhc3NpZ25zLnB1c2gobmV3IEFzc2lnbihvYmosIHZhbCwgbnVsbCwge1xuICAgICAgICAgIHBhcmFtOiB0aGlzLnBhcmFtLFxuICAgICAgICAgIHN1YnBhdHRlcm46IHRydWVcbiAgICAgICAgfSkuY29tcGlsZVRvRnJhZ21lbnRzKG8sIExFVkVMX0xJU1QpKTtcbiAgICAgIH1cbiAgICAgIGlmICghKHRvcCB8fCB0aGlzLnN1YnBhdHRlcm4pKSB7XG4gICAgICAgIGFzc2lnbnMucHVzaCh2dmFyKTtcbiAgICAgIH1cbiAgICAgIGZyYWdtZW50cyA9IHRoaXMuam9pbkZyYWdtZW50QXJyYXlzKGFzc2lnbnMsICcsICcpO1xuICAgICAgaWYgKG8ubGV2ZWwgPCBMRVZFTF9MSVNUKSB7XG4gICAgICAgIHJldHVybiBmcmFnbWVudHM7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdGhpcy53cmFwSW5CcmFjZXMoZnJhZ21lbnRzKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgQXNzaWduLnByb3RvdHlwZS5jb21waWxlQ29uZGl0aW9uYWwgPSBmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgZnJhZ21lbnRzLCBsZWZ0LCByaWdodCwgX3JlZjI7XG4gICAgICBfcmVmMiA9IHRoaXMudmFyaWFibGUuY2FjaGVSZWZlcmVuY2UobyksIGxlZnQgPSBfcmVmMlswXSwgcmlnaHQgPSBfcmVmMlsxXTtcbiAgICAgIGlmICghbGVmdC5wcm9wZXJ0aWVzLmxlbmd0aCAmJiBsZWZ0LmJhc2UgaW5zdGFuY2VvZiBMaXRlcmFsICYmIGxlZnQuYmFzZS52YWx1ZSAhPT0gXCJ0aGlzXCIgJiYgIW8uc2NvcGUuY2hlY2sobGVmdC5iYXNlLnZhbHVlKSkge1xuICAgICAgICB0aGlzLnZhcmlhYmxlLmVycm9yKFwidGhlIHZhcmlhYmxlIFxcXCJcIiArIGxlZnQuYmFzZS52YWx1ZSArIFwiXFxcIiBjYW4ndCBiZSBhc3NpZ25lZCB3aXRoIFwiICsgdGhpcy5jb250ZXh0ICsgXCIgYmVjYXVzZSBpdCBoYXMgbm90IGJlZW4gZGVjbGFyZWQgYmVmb3JlXCIpO1xuICAgICAgfVxuICAgICAgaWYgKF9faW5kZXhPZi5jYWxsKHRoaXMuY29udGV4dCwgXCI/XCIpID49IDApIHtcbiAgICAgICAgby5pc0V4aXN0ZW50aWFsRXF1YWxzID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIG5ldyBJZihuZXcgRXhpc3RlbmNlKGxlZnQpLCByaWdodCwge1xuICAgICAgICAgIHR5cGU6ICdpZidcbiAgICAgICAgfSkuYWRkRWxzZShuZXcgQXNzaWduKHJpZ2h0LCB0aGlzLnZhbHVlLCAnPScpKS5jb21waWxlVG9GcmFnbWVudHMobyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmcmFnbWVudHMgPSBuZXcgT3AodGhpcy5jb250ZXh0LnNsaWNlKDAsIC0xKSwgbGVmdCwgbmV3IEFzc2lnbihyaWdodCwgdGhpcy52YWx1ZSwgJz0nKSkuY29tcGlsZVRvRnJhZ21lbnRzKG8pO1xuICAgICAgICBpZiAoby5sZXZlbCA8PSBMRVZFTF9MSVNUKSB7XG4gICAgICAgICAgcmV0dXJuIGZyYWdtZW50cztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy53cmFwSW5CcmFjZXMoZnJhZ21lbnRzKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICBBc3NpZ24ucHJvdG90eXBlLmNvbXBpbGVTcGVjaWFsTWF0aCA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBsZWZ0LCByaWdodCwgX3JlZjI7XG4gICAgICBfcmVmMiA9IHRoaXMudmFyaWFibGUuY2FjaGVSZWZlcmVuY2UobyksIGxlZnQgPSBfcmVmMlswXSwgcmlnaHQgPSBfcmVmMlsxXTtcbiAgICAgIHJldHVybiBuZXcgQXNzaWduKGxlZnQsIG5ldyBPcCh0aGlzLmNvbnRleHQuc2xpY2UoMCwgLTEpLCByaWdodCwgdGhpcy52YWx1ZSkpLmNvbXBpbGVUb0ZyYWdtZW50cyhvKTtcbiAgICB9O1xuXG4gICAgQXNzaWduLnByb3RvdHlwZS5jb21waWxlU3BsaWNlID0gZnVuY3Rpb24obykge1xuICAgICAgdmFyIGFuc3dlciwgZXhjbHVzaXZlLCBmcm9tLCBmcm9tRGVjbCwgZnJvbVJlZiwgbmFtZSwgdG8sIHZhbERlZiwgdmFsUmVmLCBfcmVmMiwgX3JlZjMsIF9yZWY0O1xuICAgICAgX3JlZjIgPSB0aGlzLnZhcmlhYmxlLnByb3BlcnRpZXMucG9wKCkucmFuZ2UsIGZyb20gPSBfcmVmMi5mcm9tLCB0byA9IF9yZWYyLnRvLCBleGNsdXNpdmUgPSBfcmVmMi5leGNsdXNpdmU7XG4gICAgICBuYW1lID0gdGhpcy52YXJpYWJsZS5jb21waWxlKG8pO1xuICAgICAgaWYgKGZyb20pIHtcbiAgICAgICAgX3JlZjMgPSB0aGlzLmNhY2hlVG9Db2RlRnJhZ21lbnRzKGZyb20uY2FjaGUobywgTEVWRUxfT1ApKSwgZnJvbURlY2wgPSBfcmVmM1swXSwgZnJvbVJlZiA9IF9yZWYzWzFdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZnJvbURlY2wgPSBmcm9tUmVmID0gJzAnO1xuICAgICAgfVxuICAgICAgaWYgKHRvKSB7XG4gICAgICAgIGlmIChmcm9tIGluc3RhbmNlb2YgVmFsdWUgJiYgZnJvbS5pc1NpbXBsZU51bWJlcigpICYmIHRvIGluc3RhbmNlb2YgVmFsdWUgJiYgdG8uaXNTaW1wbGVOdW1iZXIoKSkge1xuICAgICAgICAgIHRvID0gdG8uY29tcGlsZShvKSAtIGZyb21SZWY7XG4gICAgICAgICAgaWYgKCFleGNsdXNpdmUpIHtcbiAgICAgICAgICAgIHRvICs9IDE7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRvID0gdG8uY29tcGlsZShvLCBMRVZFTF9BQ0NFU1MpICsgJyAtICcgKyBmcm9tUmVmO1xuICAgICAgICAgIGlmICghZXhjbHVzaXZlKSB7XG4gICAgICAgICAgICB0byArPSAnICsgMSc7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0byA9IFwiOWU5XCI7XG4gICAgICB9XG4gICAgICBfcmVmNCA9IHRoaXMudmFsdWUuY2FjaGUobywgTEVWRUxfTElTVCksIHZhbERlZiA9IF9yZWY0WzBdLCB2YWxSZWYgPSBfcmVmNFsxXTtcbiAgICAgIGFuc3dlciA9IFtdLmNvbmNhdCh0aGlzLm1ha2VDb2RlKFwiW10uc3BsaWNlLmFwcGx5KFwiICsgbmFtZSArIFwiLCBbXCIgKyBmcm9tRGVjbCArIFwiLCBcIiArIHRvICsgXCJdLmNvbmNhdChcIiksIHZhbERlZiwgdGhpcy5tYWtlQ29kZShcIikpLCBcIiksIHZhbFJlZik7XG4gICAgICBpZiAoby5sZXZlbCA+IExFVkVMX1RPUCkge1xuICAgICAgICByZXR1cm4gdGhpcy53cmFwSW5CcmFjZXMoYW5zd2VyKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBhbnN3ZXI7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBBc3NpZ247XG5cbiAgfSkoQmFzZSk7XG5cbiAgZXhwb3J0cy5Db2RlID0gQ29kZSA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQ29kZSwgX3N1cGVyKTtcblxuICAgIGZ1bmN0aW9uIENvZGUocGFyYW1zLCBib2R5LCB0YWcpIHtcbiAgICAgIENvZGUuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7XG4gICAgICB0aGlzLnBhcmFtcyA9IHBhcmFtcyB8fCBbXTtcbiAgICAgIHRoaXMuYm9keSA9IGJvZHkgfHwgbmV3IEJsb2NrO1xuICAgICAgdGhpcy5pY2VkZ2VuID0gdGFnID09PSAnaWNlZGdlbic7XG4gICAgICB0aGlzLmljZWRQYXNzZWREZWZlcnJhbCA9IG51bGw7XG4gICAgICB0aGlzLmJvdW5kID0gdGFnID09PSAnYm91bmRmdW5jJyB8fCB0aGlzLmljZWRnZW47XG4gICAgICB0aGlzLmlzR2VuZXJhdG9yID0gdGhpcy5ib2R5LmNvbnRhaW5zKGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgICAgdmFyIF9yZWYyO1xuICAgICAgICByZXR1cm4gbm9kZSBpbnN0YW5jZW9mIE9wICYmICgoX3JlZjIgPSBub2RlLm9wZXJhdG9yKSA9PT0gJ3lpZWxkJyB8fCBfcmVmMiA9PT0gJ3lpZWxkKicpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgQ29kZS5wcm90b3R5cGUuY2hpbGRyZW4gPSBbJ3BhcmFtcycsICdib2R5J107XG5cbiAgICBDb2RlLnByb3RvdHlwZS5pc1N0YXRlbWVudCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuICEhdGhpcy5jdG9yO1xuICAgIH07XG5cbiAgICBDb2RlLnByb3RvdHlwZS5qdW1wcyA9IE5PO1xuXG4gICAgQ29kZS5wcm90b3R5cGUubWFrZVNjb3BlID0gZnVuY3Rpb24ocGFyZW50U2NvcGUpIHtcbiAgICAgIHJldHVybiBuZXcgU2NvcGUocGFyZW50U2NvcGUsIHRoaXMuYm9keSwgdGhpcyk7XG4gICAgfTtcblxuICAgIENvZGUucHJvdG90eXBlLmNvbXBpbGVOb2RlID0gZnVuY3Rpb24obykge1xuICAgICAgdmFyIGFuc3dlciwgYm91bmRmdW5jLCBjb2RlLCBleHBycywgaSwgbGl0LCBwLCBwYXJhbSwgcGFyYW1zLCByZWYsIHNwbGF0cywgdW5pcXMsIHZhbCwgd2FzRW1wdHksIHdyYXBwZXIsIF9pLCBfaiwgX2ssIF9sLCBfbGVuLCBfbGVuMSwgX2xlbjIsIF9sZW4zLCBfbGVuNCwgX2xlbjUsIF9tLCBfbiwgX3JlZjIsIF9yZWYzLCBfcmVmNCwgX3JlZjUsIF9yZWY2LCBfcmVmNztcbiAgICAgIGlmICh0aGlzLmJvdW5kICYmICgoX3JlZjIgPSBvLnNjb3BlLm1ldGhvZCkgIT0gbnVsbCA/IF9yZWYyLmJvdW5kIDogdm9pZCAwKSkge1xuICAgICAgICB0aGlzLmNvbnRleHQgPSBvLnNjb3BlLm1ldGhvZC5jb250ZXh0O1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuYm91bmQgJiYgIXRoaXMuY29udGV4dCkge1xuICAgICAgICB0aGlzLmNvbnRleHQgPSAnX3RoaXMnO1xuICAgICAgICB3cmFwcGVyID0gbmV3IENvZGUoW25ldyBQYXJhbShuZXcgTGl0ZXJhbCh0aGlzLmNvbnRleHQpKV0sIG5ldyBCbG9jayhbdGhpc10pKTtcbiAgICAgICAgYm91bmRmdW5jID0gbmV3IENhbGwod3JhcHBlciwgW25ldyBMaXRlcmFsKCd0aGlzJyldKTtcbiAgICAgICAgYm91bmRmdW5jLnVwZGF0ZUxvY2F0aW9uRGF0YUlmTWlzc2luZyh0aGlzLmxvY2F0aW9uRGF0YSk7XG4gICAgICAgIHJldHVybiBib3VuZGZ1bmMuY29tcGlsZU5vZGUobyk7XG4gICAgICB9XG4gICAgICBvLnNjb3BlID0gZGVsKG8sICdjbGFzc1Njb3BlJykgfHwgdGhpcy5tYWtlU2NvcGUoby5zY29wZSk7XG4gICAgICBvLnNjb3BlLnNoYXJlZCA9IGRlbChvLCAnc2hhcmVkU2NvcGUnKSB8fCB0aGlzLmljZWRnZW47XG4gICAgICBvLnNjb3BlLmljZWRnZW4gPSB0aGlzLmljZWRnZW47XG4gICAgICBvLmluZGVudCArPSBUQUI7XG4gICAgICBkZWxldGUgby5iYXJlO1xuICAgICAgZGVsZXRlIG8uaXNFeGlzdGVudGlhbEVxdWFscztcbiAgICAgIHBhcmFtcyA9IFtdO1xuICAgICAgZXhwcnMgPSBbXTtcbiAgICAgIF9yZWYzID0gdGhpcy5wYXJhbXM7XG4gICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYzLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICAgIHBhcmFtID0gX3JlZjNbX2ldO1xuICAgICAgICBpZiAoIShwYXJhbSBpbnN0YW5jZW9mIEV4cGFuc2lvbikpIHtcbiAgICAgICAgICBvLnNjb3BlLnBhcmFtZXRlcihwYXJhbS5hc1JlZmVyZW5jZShvKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIF9yZWY0ID0gdGhpcy5wYXJhbXM7XG4gICAgICBmb3IgKF9qID0gMCwgX2xlbjEgPSBfcmVmNC5sZW5ndGg7IF9qIDwgX2xlbjE7IF9qKyspIHtcbiAgICAgICAgcGFyYW0gPSBfcmVmNFtfal07XG4gICAgICAgIGlmICghKHBhcmFtLnNwbGF0IHx8IHBhcmFtIGluc3RhbmNlb2YgRXhwYW5zaW9uKSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIF9yZWY1ID0gdGhpcy5wYXJhbXM7XG4gICAgICAgIGZvciAoX2sgPSAwLCBfbGVuMiA9IF9yZWY1Lmxlbmd0aDsgX2sgPCBfbGVuMjsgX2srKykge1xuICAgICAgICAgIHAgPSBfcmVmNVtfa10ubmFtZTtcbiAgICAgICAgICBpZiAoISghKHBhcmFtIGluc3RhbmNlb2YgRXhwYW5zaW9uKSkpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAocFtcInRoaXNcIl0pIHtcbiAgICAgICAgICAgIHAgPSBwLnByb3BlcnRpZXNbMF0ubmFtZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHAudmFsdWUpIHtcbiAgICAgICAgICAgIG8uc2NvcGUuYWRkKHAudmFsdWUsICd2YXInLCB0cnVlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc3BsYXRzID0gbmV3IEFzc2lnbihuZXcgVmFsdWUobmV3IEFycigoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIF9sLCBfbGVuMywgX3JlZjYsIF9yZXN1bHRzO1xuICAgICAgICAgIF9yZWY2ID0gdGhpcy5wYXJhbXM7XG4gICAgICAgICAgX3Jlc3VsdHMgPSBbXTtcbiAgICAgICAgICBmb3IgKF9sID0gMCwgX2xlbjMgPSBfcmVmNi5sZW5ndGg7IF9sIDwgX2xlbjM7IF9sKyspIHtcbiAgICAgICAgICAgIHAgPSBfcmVmNltfbF07XG4gICAgICAgICAgICBfcmVzdWx0cy5wdXNoKHAuYXNSZWZlcmVuY2UobykpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gX3Jlc3VsdHM7XG4gICAgICAgIH0pLmNhbGwodGhpcykpKSwgbmV3IFZhbHVlKG5ldyBMaXRlcmFsKCdhcmd1bWVudHMnKSkpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIF9yZWY2ID0gdGhpcy5wYXJhbXM7XG4gICAgICBmb3IgKF9sID0gMCwgX2xlbjMgPSBfcmVmNi5sZW5ndGg7IF9sIDwgX2xlbjM7IF9sKyspIHtcbiAgICAgICAgcGFyYW0gPSBfcmVmNltfbF07XG4gICAgICAgIGlmIChwYXJhbS5pc0NvbXBsZXgoKSkge1xuICAgICAgICAgIHZhbCA9IHJlZiA9IHBhcmFtLmFzUmVmZXJlbmNlKG8pO1xuICAgICAgICAgIGlmIChwYXJhbS52YWx1ZSkge1xuICAgICAgICAgICAgdmFsID0gbmV3IE9wKCc/JywgcmVmLCBwYXJhbS52YWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGV4cHJzLnB1c2gobmV3IEFzc2lnbihuZXcgVmFsdWUocGFyYW0ubmFtZSksIHZhbCwgJz0nLCB7XG4gICAgICAgICAgICBwYXJhbTogdHJ1ZVxuICAgICAgICAgIH0pKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZWYgPSBwYXJhbTtcbiAgICAgICAgICBpZiAocGFyYW0udmFsdWUpIHtcbiAgICAgICAgICAgIGxpdCA9IG5ldyBMaXRlcmFsKHJlZi5uYW1lLnZhbHVlICsgJyA9PSBudWxsJyk7XG4gICAgICAgICAgICB2YWwgPSBuZXcgQXNzaWduKG5ldyBWYWx1ZShwYXJhbS5uYW1lKSwgcGFyYW0udmFsdWUsICc9Jyk7XG4gICAgICAgICAgICBleHBycy5wdXNoKG5ldyBJZihsaXQsIHZhbCkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIXNwbGF0cykge1xuICAgICAgICAgIHBhcmFtcy5wdXNoKHJlZik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHdhc0VtcHR5ID0gdGhpcy5ib2R5LmlzRW1wdHkoKTtcbiAgICAgIGlmIChzcGxhdHMpIHtcbiAgICAgICAgZXhwcnMudW5zaGlmdChzcGxhdHMpO1xuICAgICAgfVxuICAgICAgaWYgKGV4cHJzLmxlbmd0aCkge1xuICAgICAgICAoX3JlZjcgPSB0aGlzLmJvZHkuZXhwcmVzc2lvbnMpLnVuc2hpZnQuYXBwbHkoX3JlZjcsIGV4cHJzKTtcbiAgICAgIH1cbiAgICAgIGZvciAoaSA9IF9tID0gMCwgX2xlbjQgPSBwYXJhbXMubGVuZ3RoOyBfbSA8IF9sZW40OyBpID0gKytfbSkge1xuICAgICAgICBwID0gcGFyYW1zW2ldO1xuICAgICAgICBwYXJhbXNbaV0gPSBwLmNvbXBpbGVUb0ZyYWdtZW50cyhvKTtcbiAgICAgICAgby5zY29wZS5wYXJhbWV0ZXIoZnJhZ21lbnRzVG9UZXh0KHBhcmFtc1tpXSkpO1xuICAgICAgfVxuICAgICAgdW5pcXMgPSBbXTtcbiAgICAgIHRoaXMuZWFjaFBhcmFtTmFtZShmdW5jdGlvbihuYW1lLCBub2RlKSB7XG4gICAgICAgIGlmIChfX2luZGV4T2YuY2FsbCh1bmlxcywgbmFtZSkgPj0gMCkge1xuICAgICAgICAgIG5vZGUuZXJyb3IoXCJtdWx0aXBsZSBwYXJhbWV0ZXJzIG5hbWVkICdcIiArIG5hbWUgKyBcIidcIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVuaXFzLnB1c2gobmFtZSk7XG4gICAgICB9KTtcbiAgICAgIGlmICh0aGlzLmljZWRJc0F1dG9jYkNvZGUpIHtcbiAgICAgICAgd2FzRW1wdHkgPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGlmICghKHdhc0VtcHR5IHx8IHRoaXMubm9SZXR1cm4pKSB7XG4gICAgICAgIHRoaXMuYm9keS5tYWtlUmV0dXJuKCk7XG4gICAgICB9XG4gICAgICBjb2RlID0gJ2Z1bmN0aW9uJztcbiAgICAgIGlmICh0aGlzLmlzR2VuZXJhdG9yKSB7XG4gICAgICAgIGNvZGUgKz0gJyonO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuY3Rvcikge1xuICAgICAgICBjb2RlICs9ICcgJyArIHRoaXMubmFtZTtcbiAgICAgIH1cbiAgICAgIGNvZGUgKz0gJygnO1xuICAgICAgYW5zd2VyID0gW3RoaXMubWFrZUNvZGUoY29kZSldO1xuICAgICAgZm9yIChpID0gX24gPSAwLCBfbGVuNSA9IHBhcmFtcy5sZW5ndGg7IF9uIDwgX2xlbjU7IGkgPSArK19uKSB7XG4gICAgICAgIHAgPSBwYXJhbXNbaV07XG4gICAgICAgIGlmIChpKSB7XG4gICAgICAgICAgYW5zd2VyLnB1c2godGhpcy5tYWtlQ29kZShcIiwgXCIpKTtcbiAgICAgICAgfVxuICAgICAgICBhbnN3ZXIucHVzaC5hcHBseShhbnN3ZXIsIHApO1xuICAgICAgfVxuICAgICAgYW5zd2VyLnB1c2godGhpcy5tYWtlQ29kZSgnKSB7JykpO1xuICAgICAgdGhpcy5pY2VkUGF0Y2hCb2R5KG8pO1xuICAgICAgaWYgKCF0aGlzLmJvZHkuaXNFbXB0eSgpKSB7XG4gICAgICAgIGFuc3dlciA9IGFuc3dlci5jb25jYXQodGhpcy5tYWtlQ29kZShcIlxcblwiKSwgdGhpcy5ib2R5LmNvbXBpbGVXaXRoRGVjbGFyYXRpb25zKG8pLCB0aGlzLm1ha2VDb2RlKFwiXFxuXCIgKyB0aGlzLnRhYikpO1xuICAgICAgfVxuICAgICAgYW5zd2VyLnB1c2godGhpcy5tYWtlQ29kZSgnfScpKTtcbiAgICAgIGlmICh0aGlzLmN0b3IpIHtcbiAgICAgICAgcmV0dXJuIFt0aGlzLm1ha2VDb2RlKHRoaXMudGFiKV0uY29uY2F0KF9fc2xpY2UuY2FsbChhbnN3ZXIpKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmZyb250IHx8IChvLmxldmVsID49IExFVkVMX0FDQ0VTUykpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud3JhcEluQnJhY2VzKGFuc3dlcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gYW5zd2VyO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBDb2RlLnByb3RvdHlwZS5lYWNoUGFyYW1OYW1lID0gZnVuY3Rpb24oaXRlcmF0b3IpIHtcbiAgICAgIHZhciBwYXJhbSwgX2ksIF9sZW4sIF9yZWYyLCBfcmVzdWx0cztcbiAgICAgIF9yZWYyID0gdGhpcy5wYXJhbXM7XG4gICAgICBfcmVzdWx0cyA9IFtdO1xuICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmMi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICBwYXJhbSA9IF9yZWYyW19pXTtcbiAgICAgICAgX3Jlc3VsdHMucHVzaChwYXJhbS5lYWNoTmFtZShpdGVyYXRvcikpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIF9yZXN1bHRzO1xuICAgIH07XG5cbiAgICBDb2RlLnByb3RvdHlwZS50cmF2ZXJzZUNoaWxkcmVuID0gZnVuY3Rpb24oY3Jvc3NTY29wZSwgZnVuYykge1xuICAgICAgaWYgKGNyb3NzU2NvcGUpIHtcbiAgICAgICAgcmV0dXJuIENvZGUuX19zdXBlcl9fLnRyYXZlcnNlQ2hpbGRyZW4uY2FsbCh0aGlzLCBjcm9zc1Njb3BlLCBmdW5jKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgQ29kZS5wcm90b3R5cGUuaWNlZFBhdGNoQm9keSA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBmLCBsaHMsIHIsIHJocztcbiAgICAgIGlmICh0aGlzLmljZWRGb3VuZEFyZ3VtZW50cyAmJiB0aGlzLmljZWROb2RlRmxhZykge1xuICAgICAgICBvLnNjb3BlLmFzc2lnbignX2FyZ3VtZW50cycsICdhcmd1bWVudHMnKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmljZWROb2RlRmxhZyAmJiAhdGhpcy5pY2VkZ2VuKSB7XG4gICAgICAgIHRoaXMuaWNlZFBhc3NlZERlZmVycmFsID0gby5zY29wZS5mcmVlVmFyaWFibGUoaWNlZFtcImNvbnN0XCJdLnBhc3NlZF9kZWZlcnJhbCk7XG4gICAgICAgIGxocyA9IG5ldyBWYWx1ZShuZXcgTGl0ZXJhbCh0aGlzLmljZWRQYXNzZWREZWZlcnJhbCkpO1xuICAgICAgICBmID0gbmV3IFZhbHVlKG5ldyBMaXRlcmFsKGljZWRbXCJjb25zdFwiXS5ucykpO1xuICAgICAgICBmLmFkZChuZXcgQWNjZXNzKG5ldyBWYWx1ZShuZXcgTGl0ZXJhbChpY2VkW1wiY29uc3RcIl0uZmluZERlZmVycmFsKSkpKTtcbiAgICAgICAgcmhzID0gbmV3IENhbGwoZiwgW25ldyBWYWx1ZShuZXcgTGl0ZXJhbCgnYXJndW1lbnRzJykpXSk7XG4gICAgICAgIHRoaXMuYm9keS51bnNoaWZ0KG5ldyBBc3NpZ24obGhzLCByaHMpKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmljZWROb2RlRmxhZyAmJiAhdGhpcy5pY2VkZ2VuKSB7XG4gICAgICAgIHIgPSB0aGlzLmljZWRJc0F1dG9jYkNvZGUgPyBpY2VkW1wiY29uc3RcIl0uYXV0b2NiIDogaWNlZFtcImNvbnN0XCJdLmtfbm9vcDtcbiAgICAgICAgcmhzID0gbmV3IFZhbHVlKG5ldyBMaXRlcmFsKHIpKTtcbiAgICAgICAgbGhzID0gbmV3IFZhbHVlKG5ldyBMaXRlcmFsKGljZWRbXCJjb25zdFwiXS5rKSk7XG4gICAgICAgIHJldHVybiB0aGlzLmJvZHkudW5zaGlmdChuZXcgQXNzaWduKGxocywgcmhzLCBudWxsLCB7XG4gICAgICAgICAgaWNlZGxvY2FsOiB0cnVlXG4gICAgICAgIH0pKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgQ29kZS5wcm90b3R5cGUuaWNlZFdhbGtBc3QgPSBmdW5jdGlvbihwYXJlbnQsIG8pIHtcbiAgICAgIHZhciBjZl9wcmV2LCBmYV9wcmV2LCBmYWZfcHJldiwgZmdfcHJldiwgcGFyYW0sIF9pLCBfbGVuLCBfcmVmMjtcbiAgICAgIHRoaXMuaWNlZFBhcmVudEF3YWl0ID0gcGFyZW50O1xuICAgICAgZmFfcHJldiA9IG8uZm91bmRBdXRvY2I7XG4gICAgICBjZl9wcmV2ID0gby5jdXJyRnVuYztcbiAgICAgIGZnX3ByZXYgPSBvLmZvdW5kQXJndW1lbnRzO1xuICAgICAgZmFmX3ByZXYgPSBvLmZvdW5kQXdhaXRGdW5jO1xuICAgICAgby5mb3VuZEF1dG9jYiA9IGZhbHNlO1xuICAgICAgby5mb3VuZEFyZ3VtZW50cyA9IGZhbHNlO1xuICAgICAgby5mb3VuZEF3YWl0RnVuYyA9IGZhbHNlO1xuICAgICAgby5jdXJyRnVuYyA9IHRoaXM7XG4gICAgICBfcmVmMiA9IHRoaXMucGFyYW1zO1xuICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmMi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICBwYXJhbSA9IF9yZWYyW19pXTtcbiAgICAgICAgaWYgKHBhcmFtLm5hbWUgaW5zdGFuY2VvZiBMaXRlcmFsICYmIHBhcmFtLm5hbWUudmFsdWUgPT09IGljZWRbXCJjb25zdFwiXS5hdXRvY2IpIHtcbiAgICAgICAgICBvLmZvdW5kQXV0b2NiID0gdHJ1ZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgQ29kZS5fX3N1cGVyX18uaWNlZFdhbGtBc3QuY2FsbCh0aGlzLCBwYXJlbnQsIG8pO1xuICAgICAgdGhpcy5pY2VkSGFzQXV0b2NiRmxhZyA9IGZhX3ByZXY7XG4gICAgICB0aGlzLmljZWRJc0F1dG9jYkNvZGUgPSBvLmZvdW5kQXV0b2NiO1xuICAgICAgdGhpcy5pY2VkRm91bmRBcmd1bWVudHMgPSBvLmZvdW5kQXJndW1lbnRzO1xuICAgICAgby5mb3VuZEF3YWl0RnVuYyA9IGZhZl9wcmV2O1xuICAgICAgby5mb3VuZEFyZ3VtZW50cyA9IGZnX3ByZXY7XG4gICAgICBvLmZvdW5kQXV0b2NiID0gZmFfcHJldjtcbiAgICAgIG8uY3VyckZ1bmMgPSBjZl9wcmV2O1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG5cbiAgICBDb2RlLnByb3RvdHlwZS5pY2VkV2Fsa0FzdExvb3BzID0gZnVuY3Rpb24oZmxvb2QpIHtcbiAgICAgIGlmIChDb2RlLl9fc3VwZXJfXy5pY2VkV2Fsa0FzdExvb3BzLmNhbGwodGhpcywgZmFsc2UpKSB7XG4gICAgICAgIHRoaXMuaWNlZExvb3BGbGFnID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuXG4gICAgQ29kZS5wcm90b3R5cGUuaWNlZFdhbGtDcHNQaXZvdHMgPSBmdW5jdGlvbigpIHtcbiAgICAgIENvZGUuX19zdXBlcl9fLmljZWRXYWxrQ3BzUGl2b3RzLmNhbGwodGhpcyk7XG4gICAgICByZXR1cm4gdGhpcy5pY2VkQ3BzUGl2b3RGbGFnID0gZmFsc2U7XG4gICAgfTtcblxuICAgIENvZGUucHJvdG90eXBlLmljZWRUcmFjZU5hbWUgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBwYXJ0cztcbiAgICAgIHBhcnRzID0gW107XG4gICAgICBpZiAodGhpcy5rbGFzcykge1xuICAgICAgICBwYXJ0cy5wdXNoKHRoaXMua2xhc3MpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMubmFtZSkge1xuICAgICAgICBwYXJ0cy5wdXNoKHRoaXMubmFtZSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcGFydHMuam9pbignLicpO1xuICAgIH07XG5cbiAgICByZXR1cm4gQ29kZTtcblxuICB9KShCYXNlKTtcblxuICBleHBvcnRzLlBhcmFtID0gUGFyYW0gPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFBhcmFtLCBfc3VwZXIpO1xuXG4gICAgZnVuY3Rpb24gUGFyYW0obmFtZSwgdmFsdWUsIHNwbGF0KSB7XG4gICAgICB2YXIgX3JlZjI7XG4gICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgICAgdGhpcy5zcGxhdCA9IHNwbGF0O1xuICAgICAgUGFyYW0uX19zdXBlcl9fLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7XG4gICAgICBpZiAoX3JlZjIgPSAobmFtZSA9IHRoaXMubmFtZS51bndyYXBBbGwoKS52YWx1ZSksIF9faW5kZXhPZi5jYWxsKFNUUklDVF9QUk9TQ1JJQkVELCBfcmVmMikgPj0gMCkge1xuICAgICAgICB0aGlzLm5hbWUuZXJyb3IoXCJwYXJhbWV0ZXIgbmFtZSBcXFwiXCIgKyBuYW1lICsgXCJcXFwiIGlzIG5vdCBhbGxvd2VkXCIpO1xuICAgICAgfVxuICAgIH1cblxuICAgIFBhcmFtLnByb3RvdHlwZS5jaGlsZHJlbiA9IFsnbmFtZScsICd2YWx1ZSddO1xuXG4gICAgUGFyYW0ucHJvdG90eXBlLmNvbXBpbGVUb0ZyYWdtZW50cyA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHJldHVybiB0aGlzLm5hbWUuY29tcGlsZVRvRnJhZ21lbnRzKG8sIExFVkVMX0xJU1QpO1xuICAgIH07XG5cbiAgICBQYXJhbS5wcm90b3R5cGUuYXNSZWZlcmVuY2UgPSBmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgbm9kZTtcbiAgICAgIGlmICh0aGlzLnJlZmVyZW5jZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZWZlcmVuY2U7XG4gICAgICB9XG4gICAgICBub2RlID0gdGhpcy5uYW1lO1xuICAgICAgaWYgKG5vZGVbXCJ0aGlzXCJdKSB7XG4gICAgICAgIG5vZGUgPSBub2RlLnByb3BlcnRpZXNbMF0ubmFtZTtcbiAgICAgICAgaWYgKG5vZGUudmFsdWUucmVzZXJ2ZWQpIHtcbiAgICAgICAgICBub2RlID0gbmV3IExpdGVyYWwoby5zY29wZS5mcmVlVmFyaWFibGUobm9kZS52YWx1ZSkpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKG5vZGUuaXNDb21wbGV4KCkpIHtcbiAgICAgICAgbm9kZSA9IG5ldyBMaXRlcmFsKG8uc2NvcGUuZnJlZVZhcmlhYmxlKCdhcmcnKSk7XG4gICAgICB9XG4gICAgICBub2RlID0gbmV3IFZhbHVlKG5vZGUpO1xuICAgICAgaWYgKHRoaXMuc3BsYXQpIHtcbiAgICAgICAgbm9kZSA9IG5ldyBTcGxhdChub2RlKTtcbiAgICAgIH1cbiAgICAgIG5vZGUudXBkYXRlTG9jYXRpb25EYXRhSWZNaXNzaW5nKHRoaXMubG9jYXRpb25EYXRhKTtcbiAgICAgIHJldHVybiB0aGlzLnJlZmVyZW5jZSA9IG5vZGU7XG4gICAgfTtcblxuICAgIFBhcmFtLnByb3RvdHlwZS5pc0NvbXBsZXggPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLm5hbWUuaXNDb21wbGV4KCk7XG4gICAgfTtcblxuICAgIFBhcmFtLnByb3RvdHlwZS5lYWNoTmFtZSA9IGZ1bmN0aW9uKGl0ZXJhdG9yLCBuYW1lKSB7XG4gICAgICB2YXIgYXRQYXJhbSwgbm9kZSwgb2JqLCBfaSwgX2xlbiwgX3JlZjI7XG4gICAgICBpZiAobmFtZSA9PSBudWxsKSB7XG4gICAgICAgIG5hbWUgPSB0aGlzLm5hbWU7XG4gICAgICB9XG4gICAgICBhdFBhcmFtID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgICAgIHZhciBub2RlO1xuICAgICAgICBub2RlID0gb2JqLnByb3BlcnRpZXNbMF0ubmFtZTtcbiAgICAgICAgaWYgKCFub2RlLnZhbHVlLnJlc2VydmVkKSB7XG4gICAgICAgICAgcmV0dXJuIGl0ZXJhdG9yKG5vZGUudmFsdWUsIG5vZGUpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgaWYgKG5hbWUgaW5zdGFuY2VvZiBMaXRlcmFsKSB7XG4gICAgICAgIHJldHVybiBpdGVyYXRvcihuYW1lLnZhbHVlLCBuYW1lKTtcbiAgICAgIH1cbiAgICAgIGlmIChuYW1lIGluc3RhbmNlb2YgVmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIGF0UGFyYW0obmFtZSk7XG4gICAgICB9XG4gICAgICBfcmVmMiA9IG5hbWUub2JqZWN0cztcbiAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZjIubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgb2JqID0gX3JlZjJbX2ldO1xuICAgICAgICBpZiAob2JqIGluc3RhbmNlb2YgQXNzaWduKSB7XG4gICAgICAgICAgdGhpcy5lYWNoTmFtZShpdGVyYXRvciwgb2JqLnZhbHVlLnVud3JhcCgpKTtcbiAgICAgICAgfSBlbHNlIGlmIChvYmogaW5zdGFuY2VvZiBTcGxhdCkge1xuICAgICAgICAgIG5vZGUgPSBvYmoubmFtZS51bndyYXAoKTtcbiAgICAgICAgICBpdGVyYXRvcihub2RlLnZhbHVlLCBub2RlKTtcbiAgICAgICAgfSBlbHNlIGlmIChvYmogaW5zdGFuY2VvZiBWYWx1ZSkge1xuICAgICAgICAgIGlmIChvYmouaXNBcnJheSgpIHx8IG9iai5pc09iamVjdCgpKSB7XG4gICAgICAgICAgICB0aGlzLmVhY2hOYW1lKGl0ZXJhdG9yLCBvYmouYmFzZSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChvYmpbXCJ0aGlzXCJdKSB7XG4gICAgICAgICAgICBhdFBhcmFtKG9iaik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGl0ZXJhdG9yKG9iai5iYXNlLnZhbHVlLCBvYmouYmFzZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKCEob2JqIGluc3RhbmNlb2YgRXhwYW5zaW9uKSkge1xuICAgICAgICAgIG9iai5lcnJvcihcImlsbGVnYWwgcGFyYW1ldGVyIFwiICsgKG9iai5jb21waWxlKCkpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gUGFyYW07XG5cbiAgfSkoQmFzZSk7XG5cbiAgZXhwb3J0cy5TcGxhdCA9IFNwbGF0ID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTcGxhdCwgX3N1cGVyKTtcblxuICAgIFNwbGF0LnByb3RvdHlwZS5jaGlsZHJlbiA9IFsnbmFtZSddO1xuXG4gICAgU3BsYXQucHJvdG90eXBlLmlzQXNzaWduYWJsZSA9IFlFUztcblxuICAgIGZ1bmN0aW9uIFNwbGF0KG5hbWUpIHtcbiAgICAgIFNwbGF0Ll9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO1xuICAgICAgdGhpcy5uYW1lID0gbmFtZS5jb21waWxlID8gbmFtZSA6IG5ldyBMaXRlcmFsKG5hbWUpO1xuICAgIH1cblxuICAgIFNwbGF0LnByb3RvdHlwZS5hc3NpZ25zID0gZnVuY3Rpb24obmFtZSkge1xuICAgICAgcmV0dXJuIHRoaXMubmFtZS5hc3NpZ25zKG5hbWUpO1xuICAgIH07XG5cbiAgICBTcGxhdC5wcm90b3R5cGUuY29tcGlsZVRvRnJhZ21lbnRzID0gZnVuY3Rpb24obykge1xuICAgICAgcmV0dXJuIHRoaXMubmFtZS5jb21waWxlVG9GcmFnbWVudHMobyk7XG4gICAgfTtcblxuICAgIFNwbGF0LnByb3RvdHlwZS51bndyYXAgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLm5hbWU7XG4gICAgfTtcblxuICAgIFNwbGF0LmNvbXBpbGVTcGxhdHRlZEFycmF5ID0gZnVuY3Rpb24obywgbGlzdCwgYXBwbHkpIHtcbiAgICAgIHZhciBhcmdzLCBiYXNlLCBjb21waWxlZE5vZGUsIGNvbmNhdFBhcnQsIGZyYWdtZW50cywgaSwgaW5kZXgsIG5vZGUsIF9pLCBfbGVuO1xuICAgICAgaW5kZXggPSAtMTtcbiAgICAgIHdoaWxlICgobm9kZSA9IGxpc3RbKytpbmRleF0pICYmICEobm9kZSBpbnN0YW5jZW9mIFNwbGF0KSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGlmIChpbmRleCA+PSBsaXN0Lmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgICB9XG4gICAgICBpZiAobGlzdC5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgbm9kZSA9IGxpc3RbMF07XG4gICAgICAgIGZyYWdtZW50cyA9IG5vZGUuY29tcGlsZVRvRnJhZ21lbnRzKG8sIExFVkVMX0xJU1QpO1xuICAgICAgICBpZiAoYXBwbHkpIHtcbiAgICAgICAgICByZXR1cm4gZnJhZ21lbnRzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbXS5jb25jYXQobm9kZS5tYWtlQ29kZShcIlwiICsgKHV0aWxpdHkoJ3NsaWNlJykpICsgXCIuY2FsbChcIiksIGZyYWdtZW50cywgbm9kZS5tYWtlQ29kZShcIilcIikpO1xuICAgICAgfVxuICAgICAgYXJncyA9IGxpc3Quc2xpY2UoaW5kZXgpO1xuICAgICAgZm9yIChpID0gX2kgPSAwLCBfbGVuID0gYXJncy5sZW5ndGg7IF9pIDwgX2xlbjsgaSA9ICsrX2kpIHtcbiAgICAgICAgbm9kZSA9IGFyZ3NbaV07XG4gICAgICAgIGNvbXBpbGVkTm9kZSA9IG5vZGUuY29tcGlsZVRvRnJhZ21lbnRzKG8sIExFVkVMX0xJU1QpO1xuICAgICAgICBhcmdzW2ldID0gbm9kZSBpbnN0YW5jZW9mIFNwbGF0ID8gW10uY29uY2F0KG5vZGUubWFrZUNvZGUoXCJcIiArICh1dGlsaXR5KCdzbGljZScpKSArIFwiLmNhbGwoXCIpLCBjb21waWxlZE5vZGUsIG5vZGUubWFrZUNvZGUoXCIpXCIpKSA6IFtdLmNvbmNhdChub2RlLm1ha2VDb2RlKFwiW1wiKSwgY29tcGlsZWROb2RlLCBub2RlLm1ha2VDb2RlKFwiXVwiKSk7XG4gICAgICB9XG4gICAgICBpZiAoaW5kZXggPT09IDApIHtcbiAgICAgICAgbm9kZSA9IGxpc3RbMF07XG4gICAgICAgIGNvbmNhdFBhcnQgPSBub2RlLmpvaW5GcmFnbWVudEFycmF5cyhhcmdzLnNsaWNlKDEpLCAnLCAnKTtcbiAgICAgICAgcmV0dXJuIGFyZ3NbMF0uY29uY2F0KG5vZGUubWFrZUNvZGUoXCIuY29uY2F0KFwiKSwgY29uY2F0UGFydCwgbm9kZS5tYWtlQ29kZShcIilcIikpO1xuICAgICAgfVxuICAgICAgYmFzZSA9IChmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIF9qLCBfbGVuMSwgX3JlZjIsIF9yZXN1bHRzO1xuICAgICAgICBfcmVmMiA9IGxpc3Quc2xpY2UoMCwgaW5kZXgpO1xuICAgICAgICBfcmVzdWx0cyA9IFtdO1xuICAgICAgICBmb3IgKF9qID0gMCwgX2xlbjEgPSBfcmVmMi5sZW5ndGg7IF9qIDwgX2xlbjE7IF9qKyspIHtcbiAgICAgICAgICBub2RlID0gX3JlZjJbX2pdO1xuICAgICAgICAgIF9yZXN1bHRzLnB1c2gobm9kZS5jb21waWxlVG9GcmFnbWVudHMobywgTEVWRUxfTElTVCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfcmVzdWx0cztcbiAgICAgIH0pKCk7XG4gICAgICBiYXNlID0gbGlzdFswXS5qb2luRnJhZ21lbnRBcnJheXMoYmFzZSwgJywgJyk7XG4gICAgICBjb25jYXRQYXJ0ID0gbGlzdFtpbmRleF0uam9pbkZyYWdtZW50QXJyYXlzKGFyZ3MsICcsICcpO1xuICAgICAgcmV0dXJuIFtdLmNvbmNhdChsaXN0WzBdLm1ha2VDb2RlKFwiW1wiKSwgYmFzZSwgbGlzdFtpbmRleF0ubWFrZUNvZGUoXCJdLmNvbmNhdChcIiksIGNvbmNhdFBhcnQsIChsYXN0KGxpc3QpKS5tYWtlQ29kZShcIilcIikpO1xuICAgIH07XG5cbiAgICBTcGxhdC5wcm90b3R5cGUuaWNlZFRvU2xvdCA9IGZ1bmN0aW9uKGkpIHtcbiAgICAgIHJldHVybiBuZXcgU2xvdChpLCBuZXcgVmFsdWUodGhpcy5uYW1lKSwgbnVsbCwgdHJ1ZSk7XG4gICAgfTtcblxuICAgIHJldHVybiBTcGxhdDtcblxuICB9KShCYXNlKTtcblxuICBleHBvcnRzLkV4cGFuc2lvbiA9IEV4cGFuc2lvbiA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoRXhwYW5zaW9uLCBfc3VwZXIpO1xuXG4gICAgZnVuY3Rpb24gRXhwYW5zaW9uKCkge1xuICAgICAgcmV0dXJuIEV4cGFuc2lvbi5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG5cbiAgICBFeHBhbnNpb24ucHJvdG90eXBlLmlzQ29tcGxleCA9IE5PO1xuXG4gICAgRXhwYW5zaW9uLnByb3RvdHlwZS5jb21waWxlTm9kZSA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHJldHVybiB0aGlzLmVycm9yKCdFeHBhbnNpb24gbXVzdCBiZSB1c2VkIGluc2lkZSBhIGRlc3RydWN0dXJpbmcgYXNzaWdubWVudCBvciBwYXJhbWV0ZXIgbGlzdCcpO1xuICAgIH07XG5cbiAgICBFeHBhbnNpb24ucHJvdG90eXBlLmFzUmVmZXJlbmNlID0gZnVuY3Rpb24obykge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIEV4cGFuc2lvbi5wcm90b3R5cGUuZWFjaE5hbWUgPSBmdW5jdGlvbihpdGVyYXRvcikge307XG5cbiAgICByZXR1cm4gRXhwYW5zaW9uO1xuXG4gIH0pKEJhc2UpO1xuXG4gIGV4cG9ydHMuV2hpbGUgPSBXaGlsZSA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoV2hpbGUsIF9zdXBlcik7XG5cbiAgICBmdW5jdGlvbiBXaGlsZShjb25kaXRpb24sIG9wdGlvbnMpIHtcbiAgICAgIHRoaXMuY29uZGl0aW9uID0gKG9wdGlvbnMgIT0gbnVsbCA/IG9wdGlvbnMuaW52ZXJ0IDogdm9pZCAwKSA/IGNvbmRpdGlvbi5pbnZlcnQoKSA6IGNvbmRpdGlvbjtcbiAgICAgIHRoaXMuZ3VhcmQgPSBvcHRpb25zICE9IG51bGwgPyBvcHRpb25zLmd1YXJkIDogdm9pZCAwO1xuICAgIH1cblxuICAgIFdoaWxlLnByb3RvdHlwZS5jaGlsZHJlbiA9IFsnY29uZGl0aW9uJywgJ2d1YXJkJywgJ2JvZHknXTtcblxuICAgIFdoaWxlLnByb3RvdHlwZS5pc1N0YXRlbWVudCA9IFlFUztcblxuICAgIFdoaWxlLnByb3RvdHlwZS5pc0xvb3AgPSBZRVM7XG5cbiAgICBXaGlsZS5wcm90b3R5cGUubWFrZVJldHVybiA9IGZ1bmN0aW9uKHJlcykge1xuICAgICAgaWYgKHJlcykge1xuICAgICAgICByZXR1cm4gV2hpbGUuX19zdXBlcl9fLm1ha2VSZXR1cm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucmV0dXJucyA9ICF0aGlzLmp1bXBzKHtcbiAgICAgICAgICBsb29wOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgV2hpbGUucHJvdG90eXBlLmFkZEJvZHkgPSBmdW5jdGlvbihib2R5KSB7XG4gICAgICB0aGlzLmJvZHkgPSBib2R5O1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIFdoaWxlLnByb3RvdHlwZS5qdW1wcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGV4cHJlc3Npb25zLCBqdW1wTm9kZSwgbm9kZSwgX2ksIF9sZW47XG4gICAgICBleHByZXNzaW9ucyA9IHRoaXMuYm9keS5leHByZXNzaW9ucztcbiAgICAgIGlmICghZXhwcmVzc2lvbnMubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gZXhwcmVzc2lvbnMubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgbm9kZSA9IGV4cHJlc3Npb25zW19pXTtcbiAgICAgICAgaWYgKGp1bXBOb2RlID0gbm9kZS5qdW1wcyh7XG4gICAgICAgICAgbG9vcDogdHJ1ZVxuICAgICAgICB9KSkge1xuICAgICAgICAgIHJldHVybiBqdW1wTm9kZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG5cbiAgICBXaGlsZS5wcm90b3R5cGUuY29tcGlsZU5vZGUgPSBmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgYW5zd2VyLCBib2R5LCBydmFyLCBzZXQ7XG4gICAgICB0aGlzLmNvbmRpdGlvbi5pY2VkU3RhdGVtZW50QXNzZXJ0aW9uKCk7XG4gICAgICBpZiAodGhpcy5pY2VkTm9kZUZsYWcpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaWNlZENvbXBpbGVJY2VkKG8pO1xuICAgICAgfVxuICAgICAgby5pbmRlbnQgKz0gVEFCO1xuICAgICAgc2V0ID0gJyc7XG4gICAgICBib2R5ID0gdGhpcy5ib2R5O1xuICAgICAgaWYgKGJvZHkuaXNFbXB0eSgpKSB7XG4gICAgICAgIGJvZHkgPSB0aGlzLm1ha2VDb2RlKCcnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICh0aGlzLnJldHVybnMpIHtcbiAgICAgICAgICBib2R5Lm1ha2VSZXR1cm4ocnZhciA9IG8uc2NvcGUuZnJlZVZhcmlhYmxlKCdyZXN1bHRzJykpO1xuICAgICAgICAgIHNldCA9IFwiXCIgKyB0aGlzLnRhYiArIHJ2YXIgKyBcIiA9IFtdO1xcblwiO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmd1YXJkKSB7XG4gICAgICAgICAgaWYgKGJvZHkuZXhwcmVzc2lvbnMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgYm9keS5leHByZXNzaW9ucy51bnNoaWZ0KG5ldyBJZigobmV3IFBhcmVucyh0aGlzLmd1YXJkKSkuaW52ZXJ0KCksIG5ldyBMaXRlcmFsKFwiY29udGludWVcIikpKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKHRoaXMuZ3VhcmQpIHtcbiAgICAgICAgICAgICAgYm9keSA9IEJsb2NrLndyYXAoW25ldyBJZih0aGlzLmd1YXJkLCBib2R5KV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBib2R5ID0gW10uY29uY2F0KHRoaXMubWFrZUNvZGUoXCJcXG5cIiksIGJvZHkuY29tcGlsZVRvRnJhZ21lbnRzKG8sIExFVkVMX1RPUCksIHRoaXMubWFrZUNvZGUoXCJcXG5cIiArIHRoaXMudGFiKSk7XG4gICAgICB9XG4gICAgICBhbnN3ZXIgPSBbXS5jb25jYXQodGhpcy5tYWtlQ29kZShzZXQgKyB0aGlzLnRhYiArIFwid2hpbGUgKFwiKSwgdGhpcy5jb25kaXRpb24uY29tcGlsZVRvRnJhZ21lbnRzKG8sIExFVkVMX1BBUkVOKSwgdGhpcy5tYWtlQ29kZShcIikge1wiKSwgYm9keSwgdGhpcy5tYWtlQ29kZShcIn1cIikpO1xuICAgICAgaWYgKHRoaXMucmV0dXJucykge1xuICAgICAgICBpZiAodGhpcy5pY2VkSGFzQXV0b2NiRmxhZykge1xuICAgICAgICAgIGFuc3dlci5wdXNoKHRoaXMubWFrZUNvZGUoXCJcXG5cIiArIHRoaXMudGFiICsgaWNlZFtcImNvbnN0XCJdLmF1dG9jYiArIFwiKFwiICsgcnZhciArIFwiKTtcIikpO1xuICAgICAgICAgIGFuc3dlci5wdXNoKHRoaXMubWFrZUNvZGUoXCJcXG5cIiArIHRoaXMudGFiICsgXCJyZXR1cm47XCIpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhbnN3ZXIucHVzaCh0aGlzLm1ha2VDb2RlKFwiXFxuXCIgKyB0aGlzLnRhYiArIFwicmV0dXJuIFwiICsgcnZhciArIFwiO1wiKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBhbnN3ZXI7XG4gICAgfTtcblxuICAgIFdoaWxlLnByb3RvdHlwZS5pY2VkV3JhcCA9IGZ1bmN0aW9uKGQpIHtcbiAgICAgIHZhciBib2R5LCBicmVha19hc3NpZ24sIGJyZWFrX2lkLCBjb25kLCBjb25kaXRpb24sIGNvbnRpbnVlX2Fzc2lnbiwgY29udGludWVfYmxvY2ssIGNvbnRpbnVlX2Jsb2NrX2lubmVyLCBjb250aW51ZV9ib2R5LCBjb250aW51ZV9mbiwgY29udGludWVfaWQsIGd1YXJkX2lmLCBrX2lkLCBrX3BhcmFtLCBuZXh0X2Fzc2lnbiwgbmV4dF9pZCwgb3V0U3RhdGVtZW50cywgdG9wX2Fzc2lnbiwgdG9wX2Jsb2NrLCB0b3BfYm9keSwgdG9wX2NhbGwsIHRvcF9mdW5jLCB0b3BfaWQsIHRvcF9zdGF0ZW1lbnRzLCB0cmFtcDtcbiAgICAgIGNvbmRpdGlvbiA9IGQuY29uZGl0aW9uO1xuICAgICAgYm9keSA9IGQuYm9keTtcbiAgICAgIG91dFN0YXRlbWVudHMgPSBbXTtcbiAgICAgIHRvcF9pZCA9IG5ldyBWYWx1ZShuZXcgTGl0ZXJhbChpY2VkW1wiY29uc3RcIl0udF93aGlsZSkpO1xuICAgICAga19pZCA9IG5ldyBWYWx1ZShuZXcgTGl0ZXJhbChpY2VkW1wiY29uc3RcIl0uaykpO1xuICAgICAga19wYXJhbSA9IG5ldyBQYXJhbShuZXcgTGl0ZXJhbChpY2VkW1wiY29uc3RcIl0uaykpO1xuICAgICAgYnJlYWtfaWQgPSBuZXcgVmFsdWUobmV3IExpdGVyYWwoaWNlZFtcImNvbnN0XCJdLmJfd2hpbGUpKTtcbiAgICAgIGJyZWFrX2Fzc2lnbiA9IG5ldyBBc3NpZ24oYnJlYWtfaWQsIGtfaWQsIG51bGwsIHtcbiAgICAgICAgaWNlZGxvY2FsOiB0cnVlXG4gICAgICB9KTtcbiAgICAgIGNvbnRpbnVlX2lkID0gbmV3IFZhbHVlKG5ldyBMaXRlcmFsKGljZWRbXCJjb25zdFwiXS5jX3doaWxlKSk7XG4gICAgICBjb250aW51ZV9ibG9ja19pbm5lciA9IG5ldyBCbG9jayhbbmV3IENhbGwodG9wX2lkLCBba19pZF0pXSk7XG4gICAgICBpZiAoZC5zdGVwKSB7XG4gICAgICAgIGNvbnRpbnVlX2Jsb2NrX2lubmVyLnVuc2hpZnQoZC5zdGVwKTtcbiAgICAgIH1cbiAgICAgIGNvbnRpbnVlX2ZuID0gbmV3IENvZGUoW10sIGNvbnRpbnVlX2Jsb2NrX2lubmVyKTtcbiAgICAgIHRyYW1wID0gbmV3IFZhbHVlKG5ldyBMaXRlcmFsKGljZWRbXCJjb25zdFwiXS5ucykpO1xuICAgICAgdHJhbXAuYWRkKG5ldyBBY2Nlc3MobmV3IFZhbHVlKG5ldyBMaXRlcmFsKGljZWRbXCJjb25zdFwiXS50cmFtcG9saW5lKSkpKTtcbiAgICAgIGNvbnRpbnVlX2Jsb2NrID0gbmV3IEJsb2NrKFtuZXcgQ2FsbCh0cmFtcCwgW2NvbnRpbnVlX2ZuXSldKTtcbiAgICAgIGNvbnRpbnVlX2JvZHkgPSBuZXcgQ29kZShbXSwgY29udGludWVfYmxvY2ssICdpY2VkZ2VuJyk7XG4gICAgICBjb250aW51ZV9hc3NpZ24gPSBuZXcgQXNzaWduKGNvbnRpbnVlX2lkLCBjb250aW51ZV9ib2R5LCBudWxsLCB7XG4gICAgICAgIGljZWRsb2NhbDogdHJ1ZVxuICAgICAgfSk7XG4gICAgICBuZXh0X2lkID0gbmV3IFZhbHVlKG5ldyBMaXRlcmFsKGljZWRbXCJjb25zdFwiXS5uX3doaWxlKSk7XG4gICAgICBuZXh0X2Fzc2lnbiA9IG5ldyBBc3NpZ24obmV4dF9pZCwgY29udGludWVfaWQsIG51bGwsIHtcbiAgICAgICAgaWNlZGxvY2FsOiB0cnVlXG4gICAgICB9KTtcbiAgICAgIGNvbmQgPSBuZXcgSWYoY29uZGl0aW9uLmludmVydCgpLCBuZXcgQmxvY2soW25ldyBDYWxsKGJyZWFrX2lkLCBbXSldKSk7XG4gICAgICBpZiAoZC5ndWFyZCkge1xuICAgICAgICBjb250aW51ZV9ibG9jayA9IG5ldyBCbG9jayhbbmV3IENhbGwoY29udGludWVfaWQsIFtdKV0pO1xuICAgICAgICBndWFyZF9pZiA9IG5ldyBJZihkLmd1YXJkLCBib2R5KTtcbiAgICAgICAgZ3VhcmRfaWYuYWRkRWxzZShjb250aW51ZV9ibG9jayk7XG4gICAgICAgIGNvbmQuYWRkRWxzZShuZXcgQmxvY2soW2QucHJlX2JvZHksIGd1YXJkX2lmXSkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uZC5hZGRFbHNlKG5ldyBCbG9jayhbZC5wcmVfYm9keSwgYm9keV0pKTtcbiAgICAgIH1cbiAgICAgIHRvcF9ib2R5ID0gbmV3IEJsb2NrKFticmVha19hc3NpZ24sIGNvbnRpbnVlX2Fzc2lnbiwgbmV4dF9hc3NpZ24sIGNvbmRdKTtcbiAgICAgIHRvcF9mdW5jID0gbmV3IENvZGUoW2tfcGFyYW1dLCB0b3BfYm9keSwgJ2ljZWRnZW4nKTtcbiAgICAgIHRvcF9hc3NpZ24gPSBuZXcgQXNzaWduKHRvcF9pZCwgdG9wX2Z1bmMsIG51bGwsIHtcbiAgICAgICAgaWNlZGxvY2FsOiB0cnVlXG4gICAgICB9KTtcbiAgICAgIHRvcF9jYWxsID0gbmV3IENhbGwodG9wX2lkLCBba19pZF0pO1xuICAgICAgdG9wX3N0YXRlbWVudHMgPSBbXTtcbiAgICAgIGlmIChkLmluaXQpIHtcbiAgICAgICAgdG9wX3N0YXRlbWVudHMgPSB0b3Bfc3RhdGVtZW50cy5jb25jYXQoZC5pbml0KTtcbiAgICAgIH1cbiAgICAgIHRvcF9zdGF0ZW1lbnRzID0gdG9wX3N0YXRlbWVudHMuY29uY2F0KFt0b3BfYXNzaWduLCB0b3BfY2FsbF0pO1xuICAgICAgcmV0dXJuIHRvcF9ibG9jayA9IG5ldyBCbG9jayh0b3Bfc3RhdGVtZW50cyk7XG4gICAgfTtcblxuICAgIFdoaWxlLnByb3RvdHlwZS5pY2VkQ2FsbENvbnRpbnVhdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMuYm9keS5pY2VkVGhyZWFkUmV0dXJuKG5ldyBJY2VkVGFpbENhbGwoaWNlZFtcImNvbnN0XCJdLm5fd2hpbGUpKTtcbiAgICB9O1xuXG4gICAgV2hpbGUucHJvdG90eXBlLmljZWRDb21waWxlSWNlZCA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBiLCBvcHRzO1xuICAgICAgb3B0cyA9IHtcbiAgICAgICAgY29uZGl0aW9uOiB0aGlzLmNvbmRpdGlvbixcbiAgICAgICAgYm9keTogdGhpcy5ib2R5LFxuICAgICAgICBndWFyZDogdGhpcy5ndWFyZFxuICAgICAgfTtcbiAgICAgIGIgPSB0aGlzLmljZWRXcmFwKG9wdHMpO1xuICAgICAgcmV0dXJuIGIuY29tcGlsZU5vZGUobyk7XG4gICAgfTtcblxuICAgIHJldHVybiBXaGlsZTtcblxuICB9KShCYXNlKTtcblxuICBleHBvcnRzLk9wID0gT3AgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gICAgdmFyIENPTlZFUlNJT05TLCBJTlZFUlNJT05TO1xuXG4gICAgX19leHRlbmRzKE9wLCBfc3VwZXIpO1xuXG4gICAgZnVuY3Rpb24gT3Aob3AsIGZpcnN0LCBzZWNvbmQsIGZsaXApIHtcbiAgICAgIE9wLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO1xuICAgICAgaWYgKG9wID09PSAnaW4nKSB7XG4gICAgICAgIHJldHVybiBuZXcgSW4oZmlyc3QsIHNlY29uZCk7XG4gICAgICB9XG4gICAgICBpZiAob3AgPT09ICdkbycpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2VuZXJhdGVEbyhmaXJzdCk7XG4gICAgICB9XG4gICAgICBpZiAob3AgPT09ICduZXcnKSB7XG4gICAgICAgIGlmIChmaXJzdCBpbnN0YW5jZW9mIENhbGwgJiYgIWZpcnN0W1wiZG9cIl0gJiYgIWZpcnN0LmlzTmV3KSB7XG4gICAgICAgICAgcmV0dXJuIGZpcnN0Lm5ld0luc3RhbmNlKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZpcnN0IGluc3RhbmNlb2YgQ29kZSAmJiBmaXJzdC5ib3VuZCB8fCBmaXJzdFtcImRvXCJdKSB7XG4gICAgICAgICAgZmlyc3QgPSBuZXcgUGFyZW5zKGZpcnN0KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5vcGVyYXRvciA9IENPTlZFUlNJT05TW29wXSB8fCBvcDtcbiAgICAgIHRoaXMuZmlyc3QgPSBmaXJzdDtcbiAgICAgIHRoaXMuc2Vjb25kID0gc2Vjb25kO1xuICAgICAgdGhpcy5mbGlwID0gISFmbGlwO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgQ09OVkVSU0lPTlMgPSB7XG4gICAgICAnPT0nOiAnPT09JyxcbiAgICAgICchPSc6ICchPT0nLFxuICAgICAgJ29mJzogJ2luJyxcbiAgICAgICd5aWVsZGZyb20nOiAneWllbGQqJ1xuICAgIH07XG5cbiAgICBJTlZFUlNJT05TID0ge1xuICAgICAgJyE9PSc6ICc9PT0nLFxuICAgICAgJz09PSc6ICchPT0nXG4gICAgfTtcblxuICAgIE9wLnByb3RvdHlwZS5jaGlsZHJlbiA9IFsnZmlyc3QnLCAnc2Vjb25kJ107XG5cbiAgICBPcC5wcm90b3R5cGUuaXNTaW1wbGVOdW1iZXIgPSBOTztcblxuICAgIE9wLnByb3RvdHlwZS5pc1lpZWxkID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgX3JlZjI7XG4gICAgICByZXR1cm4gKF9yZWYyID0gdGhpcy5vcGVyYXRvcikgPT09ICd5aWVsZCcgfHwgX3JlZjIgPT09ICd5aWVsZConO1xuICAgIH07XG5cbiAgICBPcC5wcm90b3R5cGUuaXNVbmFyeSA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuICF0aGlzLnNlY29uZDtcbiAgICB9O1xuXG4gICAgT3AucHJvdG90eXBlLmlzQ29tcGxleCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIF9yZWYyO1xuICAgICAgcmV0dXJuICEodGhpcy5pc1VuYXJ5KCkgJiYgKChfcmVmMiA9IHRoaXMub3BlcmF0b3IpID09PSAnKycgfHwgX3JlZjIgPT09ICctJykpIHx8IHRoaXMuZmlyc3QuaXNDb21wbGV4KCk7XG4gICAgfTtcblxuICAgIE9wLnByb3RvdHlwZS5pc0NoYWluYWJsZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIF9yZWYyO1xuICAgICAgcmV0dXJuIChfcmVmMiA9IHRoaXMub3BlcmF0b3IpID09PSAnPCcgfHwgX3JlZjIgPT09ICc+JyB8fCBfcmVmMiA9PT0gJz49JyB8fCBfcmVmMiA9PT0gJzw9JyB8fCBfcmVmMiA9PT0gJz09PScgfHwgX3JlZjIgPT09ICchPT0nO1xuICAgIH07XG5cbiAgICBPcC5wcm90b3R5cGUuaW52ZXJ0ID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgYWxsSW52ZXJ0YWJsZSwgY3VyciwgZnN0LCBvcCwgX3JlZjI7XG4gICAgICBpZiAodGhpcy5pc0NoYWluYWJsZSgpICYmIHRoaXMuZmlyc3QuaXNDaGFpbmFibGUoKSkge1xuICAgICAgICBhbGxJbnZlcnRhYmxlID0gdHJ1ZTtcbiAgICAgICAgY3VyciA9IHRoaXM7XG4gICAgICAgIHdoaWxlIChjdXJyICYmIGN1cnIub3BlcmF0b3IpIHtcbiAgICAgICAgICBhbGxJbnZlcnRhYmxlICYmIChhbGxJbnZlcnRhYmxlID0gY3Vyci5vcGVyYXRvciBpbiBJTlZFUlNJT05TKTtcbiAgICAgICAgICBjdXJyID0gY3Vyci5maXJzdDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWFsbEludmVydGFibGUpIHtcbiAgICAgICAgICByZXR1cm4gbmV3IFBhcmVucyh0aGlzKS5pbnZlcnQoKTtcbiAgICAgICAgfVxuICAgICAgICBjdXJyID0gdGhpcztcbiAgICAgICAgd2hpbGUgKGN1cnIgJiYgY3Vyci5vcGVyYXRvcikge1xuICAgICAgICAgIGN1cnIuaW52ZXJ0ID0gIWN1cnIuaW52ZXJ0O1xuICAgICAgICAgIGN1cnIub3BlcmF0b3IgPSBJTlZFUlNJT05TW2N1cnIub3BlcmF0b3JdO1xuICAgICAgICAgIGN1cnIgPSBjdXJyLmZpcnN0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfSBlbHNlIGlmIChvcCA9IElOVkVSU0lPTlNbdGhpcy5vcGVyYXRvcl0pIHtcbiAgICAgICAgdGhpcy5vcGVyYXRvciA9IG9wO1xuICAgICAgICBpZiAodGhpcy5maXJzdC51bndyYXAoKSBpbnN0YW5jZW9mIE9wKSB7XG4gICAgICAgICAgdGhpcy5maXJzdC5pbnZlcnQoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5zZWNvbmQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQYXJlbnModGhpcykuaW52ZXJ0KCk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMub3BlcmF0b3IgPT09ICchJyAmJiAoZnN0ID0gdGhpcy5maXJzdC51bndyYXAoKSkgaW5zdGFuY2VvZiBPcCAmJiAoKF9yZWYyID0gZnN0Lm9wZXJhdG9yKSA9PT0gJyEnIHx8IF9yZWYyID09PSAnaW4nIHx8IF9yZWYyID09PSAnaW5zdGFuY2VvZicpKSB7XG4gICAgICAgIHJldHVybiBmc3Q7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gbmV3IE9wKCchJywgdGhpcyk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIE9wLnByb3RvdHlwZS51bmZvbGRTb2FrID0gZnVuY3Rpb24obykge1xuICAgICAgdmFyIF9yZWYyO1xuICAgICAgcmV0dXJuICgoX3JlZjIgPSB0aGlzLm9wZXJhdG9yKSA9PT0gJysrJyB8fCBfcmVmMiA9PT0gJy0tJyB8fCBfcmVmMiA9PT0gJ2RlbGV0ZScpICYmIHVuZm9sZFNvYWsobywgdGhpcywgJ2ZpcnN0Jyk7XG4gICAgfTtcblxuICAgIE9wLnByb3RvdHlwZS5nZW5lcmF0ZURvID0gZnVuY3Rpb24oZXhwKSB7XG4gICAgICB2YXIgY2FsbCwgZnVuYywgcGFyYW0sIHBhc3NlZFBhcmFtcywgcmVmLCBfaSwgX2xlbiwgX3JlZjI7XG4gICAgICBwYXNzZWRQYXJhbXMgPSBbXTtcbiAgICAgIGZ1bmMgPSBleHAgaW5zdGFuY2VvZiBBc3NpZ24gJiYgKHJlZiA9IGV4cC52YWx1ZS51bndyYXAoKSkgaW5zdGFuY2VvZiBDb2RlID8gcmVmIDogZXhwO1xuICAgICAgX3JlZjIgPSBmdW5jLnBhcmFtcyB8fCBbXTtcbiAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZjIubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgcGFyYW0gPSBfcmVmMltfaV07XG4gICAgICAgIGlmIChwYXJhbS52YWx1ZSkge1xuICAgICAgICAgIHBhc3NlZFBhcmFtcy5wdXNoKHBhcmFtLnZhbHVlKTtcbiAgICAgICAgICBkZWxldGUgcGFyYW0udmFsdWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcGFzc2VkUGFyYW1zLnB1c2gocGFyYW0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjYWxsID0gbmV3IENhbGwoZXhwLCBwYXNzZWRQYXJhbXMpO1xuICAgICAgY2FsbFtcImRvXCJdID0gdHJ1ZTtcbiAgICAgIHJldHVybiBjYWxsO1xuICAgIH07XG5cbiAgICBPcC5wcm90b3R5cGUuY29tcGlsZU5vZGUgPSBmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgYW5zd2VyLCBpc0NoYWluLCBsaHMsIHJocywgX3JlZjIsIF9yZWYzO1xuICAgICAgaXNDaGFpbiA9IHRoaXMuaXNDaGFpbmFibGUoKSAmJiB0aGlzLmZpcnN0LmlzQ2hhaW5hYmxlKCk7XG4gICAgICBpZiAoIWlzQ2hhaW4pIHtcbiAgICAgICAgdGhpcy5maXJzdC5mcm9udCA9IHRoaXMuZnJvbnQ7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5vcGVyYXRvciA9PT0gJ2RlbGV0ZScgJiYgby5zY29wZS5jaGVjayh0aGlzLmZpcnN0LnVud3JhcEFsbCgpLnZhbHVlKSkge1xuICAgICAgICB0aGlzLmVycm9yKCdkZWxldGUgb3BlcmFuZCBtYXkgbm90IGJlIGFyZ3VtZW50IG9yIHZhcicpO1xuICAgICAgfVxuICAgICAgaWYgKCgoX3JlZjIgPSB0aGlzLm9wZXJhdG9yKSA9PT0gJy0tJyB8fCBfcmVmMiA9PT0gJysrJykgJiYgKF9yZWYzID0gdGhpcy5maXJzdC51bndyYXBBbGwoKS52YWx1ZSwgX19pbmRleE9mLmNhbGwoU1RSSUNUX1BST1NDUklCRUQsIF9yZWYzKSA+PSAwKSkge1xuICAgICAgICB0aGlzLmVycm9yKFwiY2Fubm90IGluY3JlbWVudC9kZWNyZW1lbnQgXFxcIlwiICsgKHRoaXMuZmlyc3QudW53cmFwQWxsKCkudmFsdWUpICsgXCJcXFwiXCIpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuaXNZaWVsZCgpKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbXBpbGVZaWVsZChvKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmlzVW5hcnkoKSkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb21waWxlVW5hcnkobyk7XG4gICAgICB9XG4gICAgICBpZiAoaXNDaGFpbikge1xuICAgICAgICByZXR1cm4gdGhpcy5jb21waWxlQ2hhaW4obyk7XG4gICAgICB9XG4gICAgICBzd2l0Y2ggKHRoaXMub3BlcmF0b3IpIHtcbiAgICAgICAgY2FzZSAnPyc6XG4gICAgICAgICAgcmV0dXJuIHRoaXMuY29tcGlsZUV4aXN0ZW5jZShvKTtcbiAgICAgICAgY2FzZSAnKionOlxuICAgICAgICAgIHJldHVybiB0aGlzLmNvbXBpbGVQb3dlcihvKTtcbiAgICAgICAgY2FzZSAnLy8nOlxuICAgICAgICAgIHJldHVybiB0aGlzLmNvbXBpbGVGbG9vckRpdmlzaW9uKG8pO1xuICAgICAgICBjYXNlICclJSc6XG4gICAgICAgICAgcmV0dXJuIHRoaXMuY29tcGlsZU1vZHVsbyhvKTtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBsaHMgPSB0aGlzLmZpcnN0LmNvbXBpbGVUb0ZyYWdtZW50cyhvLCBMRVZFTF9PUCk7XG4gICAgICAgICAgcmhzID0gdGhpcy5zZWNvbmQuY29tcGlsZVRvRnJhZ21lbnRzKG8sIExFVkVMX09QKTtcbiAgICAgICAgICBhbnN3ZXIgPSBbXS5jb25jYXQobGhzLCB0aGlzLm1ha2VDb2RlKFwiIFwiICsgdGhpcy5vcGVyYXRvciArIFwiIFwiKSwgcmhzKTtcbiAgICAgICAgICBpZiAoby5sZXZlbCA8PSBMRVZFTF9PUCkge1xuICAgICAgICAgICAgcmV0dXJuIGFuc3dlcjtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMud3JhcEluQnJhY2VzKGFuc3dlcik7XG4gICAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICBPcC5wcm90b3R5cGUuY29tcGlsZUNoYWluID0gZnVuY3Rpb24obykge1xuICAgICAgdmFyIGZyYWdtZW50cywgZnN0LCBzaGFyZWQsIF9yZWYyO1xuICAgICAgX3JlZjIgPSB0aGlzLmZpcnN0LnNlY29uZC5jYWNoZShvKSwgdGhpcy5maXJzdC5zZWNvbmQgPSBfcmVmMlswXSwgc2hhcmVkID0gX3JlZjJbMV07XG4gICAgICBmc3QgPSB0aGlzLmZpcnN0LmNvbXBpbGVUb0ZyYWdtZW50cyhvLCBMRVZFTF9PUCk7XG4gICAgICBmcmFnbWVudHMgPSBmc3QuY29uY2F0KHRoaXMubWFrZUNvZGUoXCIgXCIgKyAodGhpcy5pbnZlcnQgPyAnJiYnIDogJ3x8JykgKyBcIiBcIiksIHNoYXJlZC5jb21waWxlVG9GcmFnbWVudHMobyksIHRoaXMubWFrZUNvZGUoXCIgXCIgKyB0aGlzLm9wZXJhdG9yICsgXCIgXCIpLCB0aGlzLnNlY29uZC5jb21waWxlVG9GcmFnbWVudHMobywgTEVWRUxfT1ApKTtcbiAgICAgIHJldHVybiB0aGlzLndyYXBJbkJyYWNlcyhmcmFnbWVudHMpO1xuICAgIH07XG5cbiAgICBPcC5wcm90b3R5cGUuY29tcGlsZUV4aXN0ZW5jZSA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBmc3QsIHJlZjtcbiAgICAgIGlmICh0aGlzLmZpcnN0LmlzQ29tcGxleCgpKSB7XG4gICAgICAgIHJlZiA9IG5ldyBMaXRlcmFsKG8uc2NvcGUuZnJlZVZhcmlhYmxlKCdyZWYnKSk7XG4gICAgICAgIGZzdCA9IG5ldyBQYXJlbnMobmV3IEFzc2lnbihyZWYsIHRoaXMuZmlyc3QpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZzdCA9IHRoaXMuZmlyc3Q7XG4gICAgICAgIHJlZiA9IGZzdDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBuZXcgSWYobmV3IEV4aXN0ZW5jZShmc3QpLCByZWYsIHtcbiAgICAgICAgdHlwZTogJ2lmJ1xuICAgICAgfSkuYWRkRWxzZSh0aGlzLnNlY29uZCkuY29tcGlsZVRvRnJhZ21lbnRzKG8pO1xuICAgIH07XG5cbiAgICBPcC5wcm90b3R5cGUuY29tcGlsZVVuYXJ5ID0gZnVuY3Rpb24obykge1xuICAgICAgdmFyIG9wLCBwYXJ0cywgcGx1c01pbnVzO1xuICAgICAgcGFydHMgPSBbXTtcbiAgICAgIG9wID0gdGhpcy5vcGVyYXRvcjtcbiAgICAgIHBhcnRzLnB1c2goW3RoaXMubWFrZUNvZGUob3ApXSk7XG4gICAgICBpZiAob3AgPT09ICchJyAmJiB0aGlzLmZpcnN0IGluc3RhbmNlb2YgRXhpc3RlbmNlKSB7XG4gICAgICAgIHRoaXMuZmlyc3QubmVnYXRlZCA9ICF0aGlzLmZpcnN0Lm5lZ2F0ZWQ7XG4gICAgICAgIHJldHVybiB0aGlzLmZpcnN0LmNvbXBpbGVUb0ZyYWdtZW50cyhvKTtcbiAgICAgIH1cbiAgICAgIGlmIChvLmxldmVsID49IExFVkVMX0FDQ0VTUykge1xuICAgICAgICByZXR1cm4gKG5ldyBQYXJlbnModGhpcykpLmNvbXBpbGVUb0ZyYWdtZW50cyhvKTtcbiAgICAgIH1cbiAgICAgIHBsdXNNaW51cyA9IG9wID09PSAnKycgfHwgb3AgPT09ICctJztcbiAgICAgIGlmICgob3AgPT09ICduZXcnIHx8IG9wID09PSAndHlwZW9mJyB8fCBvcCA9PT0gJ2RlbGV0ZScpIHx8IHBsdXNNaW51cyAmJiB0aGlzLmZpcnN0IGluc3RhbmNlb2YgT3AgJiYgdGhpcy5maXJzdC5vcGVyYXRvciA9PT0gb3ApIHtcbiAgICAgICAgcGFydHMucHVzaChbdGhpcy5tYWtlQ29kZSgnICcpXSk7XG4gICAgICB9XG4gICAgICBpZiAoKHBsdXNNaW51cyAmJiB0aGlzLmZpcnN0IGluc3RhbmNlb2YgT3ApIHx8IChvcCA9PT0gJ25ldycgJiYgdGhpcy5maXJzdC5pc1N0YXRlbWVudChvKSkpIHtcbiAgICAgICAgdGhpcy5maXJzdCA9IG5ldyBQYXJlbnModGhpcy5maXJzdCk7XG4gICAgICB9XG4gICAgICBwYXJ0cy5wdXNoKHRoaXMuZmlyc3QuY29tcGlsZVRvRnJhZ21lbnRzKG8sIExFVkVMX09QKSk7XG4gICAgICBpZiAodGhpcy5mbGlwKSB7XG4gICAgICAgIHBhcnRzLnJldmVyc2UoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLmpvaW5GcmFnbWVudEFycmF5cyhwYXJ0cywgJycpO1xuICAgIH07XG5cbiAgICBPcC5wcm90b3R5cGUuY29tcGlsZVlpZWxkID0gZnVuY3Rpb24obykge1xuICAgICAgdmFyIG9wLCBwYXJ0cztcbiAgICAgIHBhcnRzID0gW107XG4gICAgICBvcCA9IHRoaXMub3BlcmF0b3I7XG4gICAgICBpZiAoby5zY29wZS5wYXJlbnQgPT0gbnVsbCkge1xuICAgICAgICB0aGlzLmVycm9yKCd5aWVsZCBzdGF0ZW1lbnRzIG11c3Qgb2NjdXIgd2l0aGluIGEgZnVuY3Rpb24gZ2VuZXJhdG9yLicpO1xuICAgICAgfVxuICAgICAgaWYgKF9faW5kZXhPZi5jYWxsKE9iamVjdC5rZXlzKHRoaXMuZmlyc3QpLCAnZXhwcmVzc2lvbicpID49IDApIHtcbiAgICAgICAgaWYgKHRoaXMuZmlyc3QuZXhwcmVzc2lvbiAhPSBudWxsKSB7XG4gICAgICAgICAgcGFydHMucHVzaCh0aGlzLmZpcnN0LmV4cHJlc3Npb24uY29tcGlsZVRvRnJhZ21lbnRzKG8sIExFVkVMX09QKSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBhcnRzLnB1c2goW3RoaXMubWFrZUNvZGUoXCIoXCIgKyBvcCArIFwiIFwiKV0pO1xuICAgICAgICBwYXJ0cy5wdXNoKHRoaXMuZmlyc3QuY29tcGlsZVRvRnJhZ21lbnRzKG8sIExFVkVMX09QKSk7XG4gICAgICAgIHBhcnRzLnB1c2goW3RoaXMubWFrZUNvZGUoXCIpXCIpXSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5qb2luRnJhZ21lbnRBcnJheXMocGFydHMsICcnKTtcbiAgICB9O1xuXG4gICAgT3AucHJvdG90eXBlLmNvbXBpbGVQb3dlciA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBwb3c7XG4gICAgICBwb3cgPSBuZXcgVmFsdWUobmV3IExpdGVyYWwoJ01hdGgnKSwgW25ldyBBY2Nlc3MobmV3IExpdGVyYWwoJ3BvdycpKV0pO1xuICAgICAgcmV0dXJuIG5ldyBDYWxsKHBvdywgW3RoaXMuZmlyc3QsIHRoaXMuc2Vjb25kXSkuY29tcGlsZVRvRnJhZ21lbnRzKG8pO1xuICAgIH07XG5cbiAgICBPcC5wcm90b3R5cGUuY29tcGlsZUZsb29yRGl2aXNpb24gPSBmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgZGl2LCBmbG9vcjtcbiAgICAgIGZsb29yID0gbmV3IFZhbHVlKG5ldyBMaXRlcmFsKCdNYXRoJyksIFtuZXcgQWNjZXNzKG5ldyBMaXRlcmFsKCdmbG9vcicpKV0pO1xuICAgICAgZGl2ID0gbmV3IE9wKCcvJywgdGhpcy5maXJzdCwgdGhpcy5zZWNvbmQpO1xuICAgICAgcmV0dXJuIG5ldyBDYWxsKGZsb29yLCBbZGl2XSkuY29tcGlsZVRvRnJhZ21lbnRzKG8pO1xuICAgIH07XG5cbiAgICBPcC5wcm90b3R5cGUuY29tcGlsZU1vZHVsbyA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBtb2Q7XG4gICAgICBtb2QgPSBuZXcgVmFsdWUobmV3IExpdGVyYWwodXRpbGl0eSgnbW9kdWxvJykpKTtcbiAgICAgIHJldHVybiBuZXcgQ2FsbChtb2QsIFt0aGlzLmZpcnN0LCB0aGlzLnNlY29uZF0pLmNvbXBpbGVUb0ZyYWdtZW50cyhvKTtcbiAgICB9O1xuXG4gICAgT3AucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oaWR0KSB7XG4gICAgICByZXR1cm4gT3AuX19zdXBlcl9fLnRvU3RyaW5nLmNhbGwodGhpcywgaWR0LCB0aGlzLmNvbnN0cnVjdG9yLm5hbWUgKyAnICcgKyB0aGlzLm9wZXJhdG9yKTtcbiAgICB9O1xuXG4gICAgT3AucHJvdG90eXBlLmljZWRXcmFwQ29udGludWF0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5pY2VkQ2FsbENvbnRpbnVhdGlvbkZsYWc7XG4gICAgfTtcblxuICAgIHJldHVybiBPcDtcblxuICB9KShCYXNlKTtcblxuICBleHBvcnRzLkluID0gSW4gPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEluLCBfc3VwZXIpO1xuXG4gICAgZnVuY3Rpb24gSW4ob2JqZWN0LCBhcnJheSkge1xuICAgICAgdGhpcy5vYmplY3QgPSBvYmplY3Q7XG4gICAgICB0aGlzLmFycmF5ID0gYXJyYXk7XG4gICAgICBJbi5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBJbi5wcm90b3R5cGUuY2hpbGRyZW4gPSBbJ29iamVjdCcsICdhcnJheSddO1xuXG4gICAgSW4ucHJvdG90eXBlLmludmVydCA9IE5FR0FURTtcblxuICAgIEluLnByb3RvdHlwZS5jb21waWxlTm9kZSA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBoYXNTcGxhdCwgb2JqLCBfaSwgX2xlbiwgX3JlZjI7XG4gICAgICBpZiAodGhpcy5hcnJheSBpbnN0YW5jZW9mIFZhbHVlICYmIHRoaXMuYXJyYXkuaXNBcnJheSgpICYmIHRoaXMuYXJyYXkuYmFzZS5vYmplY3RzLmxlbmd0aCkge1xuICAgICAgICBfcmVmMiA9IHRoaXMuYXJyYXkuYmFzZS5vYmplY3RzO1xuICAgICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYyLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICAgICAgb2JqID0gX3JlZjJbX2ldO1xuICAgICAgICAgIGlmICghKG9iaiBpbnN0YW5jZW9mIFNwbGF0KSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGhhc1NwbGF0ID0gdHJ1ZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWhhc1NwbGF0KSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuY29tcGlsZU9yVGVzdChvKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuY29tcGlsZUxvb3BUZXN0KG8pO1xuICAgIH07XG5cbiAgICBJbi5wcm90b3R5cGUuY29tcGlsZU9yVGVzdCA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBjbXAsIGNuaiwgaSwgaXRlbSwgcmVmLCBzdWIsIHRlc3RzLCBfaSwgX2xlbiwgX3JlZjIsIF9yZWYzLCBfcmVmNDtcbiAgICAgIF9yZWYyID0gdGhpcy5vYmplY3QuY2FjaGUobywgTEVWRUxfT1ApLCBzdWIgPSBfcmVmMlswXSwgcmVmID0gX3JlZjJbMV07XG4gICAgICBfcmVmMyA9IHRoaXMubmVnYXRlZCA/IFsnICE9PSAnLCAnICYmICddIDogWycgPT09ICcsICcgfHwgJ10sIGNtcCA9IF9yZWYzWzBdLCBjbmogPSBfcmVmM1sxXTtcbiAgICAgIHRlc3RzID0gW107XG4gICAgICBfcmVmNCA9IHRoaXMuYXJyYXkuYmFzZS5vYmplY3RzO1xuICAgICAgZm9yIChpID0gX2kgPSAwLCBfbGVuID0gX3JlZjQubGVuZ3RoOyBfaSA8IF9sZW47IGkgPSArK19pKSB7XG4gICAgICAgIGl0ZW0gPSBfcmVmNFtpXTtcbiAgICAgICAgaWYgKGkpIHtcbiAgICAgICAgICB0ZXN0cy5wdXNoKHRoaXMubWFrZUNvZGUoY25qKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGVzdHMgPSB0ZXN0cy5jb25jYXQoKGkgPyByZWYgOiBzdWIpLCB0aGlzLm1ha2VDb2RlKGNtcCksIGl0ZW0uY29tcGlsZVRvRnJhZ21lbnRzKG8sIExFVkVMX0FDQ0VTUykpO1xuICAgICAgfVxuICAgICAgaWYgKG8ubGV2ZWwgPCBMRVZFTF9PUCkge1xuICAgICAgICByZXR1cm4gdGVzdHM7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdGhpcy53cmFwSW5CcmFjZXModGVzdHMpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBJbi5wcm90b3R5cGUuY29tcGlsZUxvb3BUZXN0ID0gZnVuY3Rpb24obykge1xuICAgICAgdmFyIGZyYWdtZW50cywgcmVmLCBzdWIsIF9yZWYyO1xuICAgICAgX3JlZjIgPSB0aGlzLm9iamVjdC5jYWNoZShvLCBMRVZFTF9MSVNUKSwgc3ViID0gX3JlZjJbMF0sIHJlZiA9IF9yZWYyWzFdO1xuICAgICAgZnJhZ21lbnRzID0gW10uY29uY2F0KHRoaXMubWFrZUNvZGUodXRpbGl0eSgnaW5kZXhPZicpICsgXCIuY2FsbChcIiksIHRoaXMuYXJyYXkuY29tcGlsZVRvRnJhZ21lbnRzKG8sIExFVkVMX0xJU1QpLCB0aGlzLm1ha2VDb2RlKFwiLCBcIiksIHJlZiwgdGhpcy5tYWtlQ29kZShcIikgXCIgKyAodGhpcy5uZWdhdGVkID8gJzwgMCcgOiAnPj0gMCcpKSk7XG4gICAgICBpZiAoZnJhZ21lbnRzVG9UZXh0KHN1YikgPT09IGZyYWdtZW50c1RvVGV4dChyZWYpKSB7XG4gICAgICAgIHJldHVybiBmcmFnbWVudHM7XG4gICAgICB9XG4gICAgICBmcmFnbWVudHMgPSBzdWIuY29uY2F0KHRoaXMubWFrZUNvZGUoJywgJyksIGZyYWdtZW50cyk7XG4gICAgICBpZiAoby5sZXZlbCA8IExFVkVMX0xJU1QpIHtcbiAgICAgICAgcmV0dXJuIGZyYWdtZW50cztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0aGlzLndyYXBJbkJyYWNlcyhmcmFnbWVudHMpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBJbi5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbihpZHQpIHtcbiAgICAgIHJldHVybiBJbi5fX3N1cGVyX18udG9TdHJpbmcuY2FsbCh0aGlzLCBpZHQsIHRoaXMuY29uc3RydWN0b3IubmFtZSArICh0aGlzLm5lZ2F0ZWQgPyAnIScgOiAnJykpO1xuICAgIH07XG5cbiAgICByZXR1cm4gSW47XG5cbiAgfSkoQmFzZSk7XG5cbiAgZXhwb3J0cy5TbG90ID0gU2xvdCA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoU2xvdCwgX3N1cGVyKTtcblxuICAgIGZ1bmN0aW9uIFNsb3QoaW5kZXgsIHZhbHVlLCBzdWZmaXgsIHNwbGF0KSB7XG4gICAgICBTbG90Ll9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO1xuICAgICAgdGhpcy5pbmRleCA9IGluZGV4O1xuICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgICAgdGhpcy5zdWZmaXggPSBzdWZmaXg7XG4gICAgICB0aGlzLnNwbGF0ID0gc3BsYXQ7XG4gICAgICB0aGlzLmFjY2VzcyA9IG51bGw7XG4gICAgfVxuXG4gICAgU2xvdC5wcm90b3R5cGUuYWRkQWNjZXNzID0gZnVuY3Rpb24oYSkge1xuICAgICAgdGhpcy5hY2Nlc3MgPSBhO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIFNsb3QucHJvdG90eXBlLmNoaWxkcmVuID0gWyd2YWx1ZScsICdzdWZmaXgnXTtcblxuICAgIHJldHVybiBTbG90O1xuXG4gIH0pKEJhc2UpO1xuXG4gIGV4cG9ydHMuRGVmZXIgPSBEZWZlciA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoRGVmZXIsIF9zdXBlcik7XG5cbiAgICBmdW5jdGlvbiBEZWZlcihhcmdzLCBsaW5lbm8pIHtcbiAgICAgIHZhciBhLCBpO1xuICAgICAgdGhpcy5saW5lbm8gPSBsaW5lbm87XG4gICAgICBEZWZlci5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzKTtcbiAgICAgIHRoaXMuc2xvdHMgPSBmbGF0dGVuKChmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIF9pLCBfbGVuLCBfcmVzdWx0cztcbiAgICAgICAgX3Jlc3VsdHMgPSBbXTtcbiAgICAgICAgZm9yIChpID0gX2kgPSAwLCBfbGVuID0gYXJncy5sZW5ndGg7IF9pIDwgX2xlbjsgaSA9ICsrX2kpIHtcbiAgICAgICAgICBhID0gYXJnc1tpXTtcbiAgICAgICAgICBfcmVzdWx0cy5wdXNoKGEuaWNlZFRvU2xvdChpKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF9yZXN1bHRzO1xuICAgICAgfSkoKSk7XG4gICAgICB0aGlzLnBhcmFtcyA9IFtdO1xuICAgICAgdGhpcy52YXJzID0gW107XG4gICAgICB0aGlzLmN1c3RvbSA9IGZhbHNlO1xuICAgIH1cblxuICAgIERlZmVyLnByb3RvdHlwZS5jaGlsZHJlbiA9IFsnc2xvdHMnXTtcblxuICAgIERlZmVyLnByb3RvdHlwZS5zZXRDdXN0b20gPSBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMuY3VzdG9tID0gdHJ1ZTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBEZWZlci5wcm90b3R5cGUubmV3UGFyYW0gPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBsO1xuICAgICAgbCA9IFwiXCIgKyBpY2VkW1wiY29uc3RcIl0uc2xvdCArIFwiX1wiICsgKHRoaXMucGFyYW1zLmxlbmd0aCArIDEpO1xuICAgICAgdGhpcy5wYXJhbXMucHVzaChuZXcgUGFyYW0obmV3IExpdGVyYWwobCkpKTtcbiAgICAgIHJldHVybiBuZXcgVmFsdWUobmV3IExpdGVyYWwobCkpO1xuICAgIH07XG5cbiAgICBEZWZlci5wcm90b3R5cGUubWFrZUFzc2lnbkZuID0gZnVuY3Rpb24obykge1xuICAgICAgdmFyIGEsIGFyZ3MsIGFzc2lnbiwgYXNzaWdubWVudHMsIGJsb2NrLCBjYWxsLCBmdW5jLCBpLCBpX2xpdCwgaW5uZXJfZm4sIGxpdCwgb3V0ZXJfYmxvY2ssIG91dGVyX2ZuLCBwcm9wLCBzLCBzbG90LCBfaSwgX2xlbiwgX3JlZjI7XG4gICAgICBpZiAodGhpcy5zbG90cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICBhc3NpZ25tZW50cyA9IFtdO1xuICAgICAgYXJncyA9IFtdO1xuICAgICAgaSA9IDA7XG4gICAgICBfcmVmMiA9IHRoaXMuc2xvdHM7XG4gICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYyLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICAgIHMgPSBfcmVmMltfaV07XG4gICAgICAgIGkgPSBzLmluZGV4O1xuICAgICAgICBhID0gbmV3IFZhbHVlKG5ldyBMaXRlcmFsKFwiYXJndW1lbnRzXCIpKTtcbiAgICAgICAgaV9saXQgPSBuZXcgVmFsdWUobmV3IExpdGVyYWwoaSkpO1xuICAgICAgICBpZiAocy5zcGxhdCkge1xuICAgICAgICAgIGZ1bmMgPSBuZXcgVmFsdWUobmV3IExpdGVyYWwodXRpbGl0eSgnc2xpY2UnKSkpO1xuICAgICAgICAgIGZ1bmMuYWRkKG5ldyBBY2Nlc3MobmV3IFZhbHVlKG5ldyBMaXRlcmFsKCdjYWxsJykpKSk7XG4gICAgICAgICAgY2FsbCA9IG5ldyBDYWxsKGZ1bmMsIFthLCBpX2xpdF0pO1xuICAgICAgICAgIHNsb3QgPSBzLnZhbHVlO1xuICAgICAgICAgIHRoaXMudmFycy5wdXNoKHNsb3QpO1xuICAgICAgICAgIGFzc2lnbiA9IG5ldyBBc3NpZ24oc2xvdCwgY2FsbCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYS5hZGQobmV3IEluZGV4KGlfbGl0KSk7XG4gICAgICAgICAgaWYgKHMuYWNjZXNzKSB7XG4gICAgICAgICAgICBhLmFkZChzLmFjY2Vzcyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICghcy5zdWZmaXgpIHtcbiAgICAgICAgICAgIGxpdCA9IHMudmFsdWUuY29tcGlsZShvLCBMRVZFTF9UT1ApO1xuICAgICAgICAgICAgaWYgKGxpdCA9PT0gXCJfXCIpIHtcbiAgICAgICAgICAgICAgc2xvdCA9IG5ldyBWYWx1ZShuZXcgTGl0ZXJhbChpY2VkW1wiY29uc3RcIl0uZGVmZXJyYWxzKSk7XG4gICAgICAgICAgICAgIHNsb3QuYWRkKG5ldyBBY2Nlc3MobmV3IFZhbHVlKG5ldyBMaXRlcmFsKGljZWRbXCJjb25zdFwiXS5yZXRzbG90KSkpKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHNsb3QgPSBzLnZhbHVlO1xuICAgICAgICAgICAgICB0aGlzLnZhcnMucHVzaChzbG90KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXJncy5wdXNoKHMudmFsdWUpO1xuICAgICAgICAgICAgc2xvdCA9IHRoaXMubmV3UGFyYW0oKTtcbiAgICAgICAgICAgIGlmIChzLnN1ZmZpeCBpbnN0YW5jZW9mIEluZGV4KSB7XG4gICAgICAgICAgICAgIHByb3AgPSBuZXcgSW5kZXgodGhpcy5uZXdQYXJhbSgpKTtcbiAgICAgICAgICAgICAgYXJncy5wdXNoKHMuc3VmZml4LmluZGV4KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHByb3AgPSBzLnN1ZmZpeDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNsb3QuYWRkKHByb3ApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBhc3NpZ24gPSBuZXcgQXNzaWduKHNsb3QsIGEpO1xuICAgICAgICB9XG4gICAgICAgIGFzc2lnbm1lbnRzLnB1c2goYXNzaWduKTtcbiAgICAgIH1cbiAgICAgIGJsb2NrID0gbmV3IEJsb2NrKGFzc2lnbm1lbnRzKTtcbiAgICAgIGlubmVyX2ZuID0gbmV3IENvZGUoW10sIGJsb2NrLCAnaWNlZGdlbicpO1xuICAgICAgb3V0ZXJfYmxvY2sgPSBuZXcgQmxvY2soW25ldyBSZXR1cm4oaW5uZXJfZm4pXSk7XG4gICAgICBvdXRlcl9mbiA9IG5ldyBDb2RlKHRoaXMucGFyYW1zLCBvdXRlcl9ibG9jaywgJ2ljZWRnZW4nKTtcbiAgICAgIHJldHVybiBjYWxsID0gbmV3IENhbGwob3V0ZXJfZm4sIGFyZ3MpO1xuICAgIH07XG5cbiAgICBEZWZlci5wcm90b3R5cGUudHJhbnNmb3JtID0gZnVuY3Rpb24obykge1xuICAgICAgdmFyIGFzc2lnbl9mbiwgYXNzaWdubWVudHMsIGNvbnRleHRfYXNzaWduLCBjb250ZXh0X2xocywgY29udGV4dF9yaHMsIGZuLCBsbl9hc3NpZ24sIGxuX2xocywgbG5fcmhzLCBtZXRoO1xuICAgICAgbWV0aCA9IG5ldyBWYWx1ZShuZXcgTGl0ZXJhbChpY2VkW1wiY29uc3RcIl0uZGVmZXJfbWV0aG9kKSk7XG4gICAgICBpZiAodGhpcy5jdXN0b20pIHtcbiAgICAgICAgZm4gPSBtZXRoO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZm4gPSBuZXcgVmFsdWUobmV3IExpdGVyYWwoaWNlZFtcImNvbnN0XCJdLmRlZmVycmFscykpO1xuICAgICAgICBmbi5hZGQobmV3IEFjY2VzcyhtZXRoKSk7XG4gICAgICB9XG4gICAgICBhc3NpZ25tZW50cyA9IFtdO1xuICAgICAgaWYgKChhc3NpZ25fZm4gPSB0aGlzLm1ha2VBc3NpZ25GbihvKSkpIHtcbiAgICAgICAgYXNzaWdubWVudHMucHVzaChuZXcgQXNzaWduKG5ldyBWYWx1ZShuZXcgTGl0ZXJhbChpY2VkW1wiY29uc3RcIl0uYXNzaWduX2ZuKSksIGFzc2lnbl9mbiwgXCJvYmplY3RcIikpO1xuICAgICAgfVxuICAgICAgbG5fbGhzID0gbmV3IFZhbHVlKG5ldyBMaXRlcmFsKGljZWRbXCJjb25zdFwiXS5saW5lbm8pKTtcbiAgICAgIGxuX3JocyA9IG5ldyBWYWx1ZShuZXcgTGl0ZXJhbCh0aGlzLmxpbmVubykpO1xuICAgICAgbG5fYXNzaWduID0gbmV3IEFzc2lnbihsbl9saHMsIGxuX3JocywgXCJvYmplY3RcIik7XG4gICAgICBhc3NpZ25tZW50cy5wdXNoKGxuX2Fzc2lnbik7XG4gICAgICBpZiAodGhpcy5jdXN0b20pIHtcbiAgICAgICAgY29udGV4dF9saHMgPSBuZXcgVmFsdWUobmV3IExpdGVyYWwoaWNlZFtcImNvbnN0XCJdLmNvbnRleHQpKTtcbiAgICAgICAgY29udGV4dF9yaHMgPSBuZXcgVmFsdWUobmV3IExpdGVyYWwoaWNlZFtcImNvbnN0XCJdLmRlZmVycmFscykpO1xuICAgICAgICBjb250ZXh0X2Fzc2lnbiA9IG5ldyBBc3NpZ24oY29udGV4dF9saHMsIGNvbnRleHRfcmhzLCBcIm9iamVjdFwiKTtcbiAgICAgICAgYXNzaWdubWVudHMucHVzaChjb250ZXh0X2Fzc2lnbik7XG4gICAgICB9XG4gICAgICBvID0gbmV3IE9iaihhc3NpZ25tZW50cyk7XG4gICAgICByZXR1cm4gbmV3IENhbGwoZm4sIFtuZXcgVmFsdWUobyldKTtcbiAgICB9O1xuXG4gICAgRGVmZXIucHJvdG90eXBlLmNvbXBpbGVOb2RlID0gZnVuY3Rpb24obykge1xuICAgICAgdmFyIGNhbGwsIG5hbWUsIHNjb3BlLCB2LCBfaSwgX2xlbiwgX3JlZjI7XG4gICAgICBjYWxsID0gdGhpcy50cmFuc2Zvcm0obyk7XG4gICAgICBfcmVmMiA9IHRoaXMudmFycztcbiAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZjIubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgdiA9IF9yZWYyW19pXTtcbiAgICAgICAgbmFtZSA9IHYuY29tcGlsZShvLCBMRVZFTF9MSVNUKTtcbiAgICAgICAgc2NvcGUgPSBvLnNjb3BlO1xuICAgICAgICBzY29wZS5maW5kKG5hbWUsICd2YXInKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjYWxsLmNvbXBpbGVOb2RlKG8pO1xuICAgIH07XG5cbiAgICBEZWZlci5wcm90b3R5cGUuaWNlZFdhbGtBc3QgPSBmdW5jdGlvbihwLCBvKSB7XG4gICAgICB0aGlzLmljZWRIYXNBdXRvY2JGbGFnID0gby5mb3VuZEF1dG9jYjtcbiAgICAgIG8uZm91bmREZWZlciA9IHRydWU7XG4gICAgICB0aGlzLnBhcmVudEZ1bmMgPSBvLmN1cnJGdW5jO1xuICAgICAgcmV0dXJuIERlZmVyLl9fc3VwZXJfXy5pY2VkV2Fsa0FzdC5jYWxsKHRoaXMsIHAsIG8pO1xuICAgIH07XG5cbiAgICByZXR1cm4gRGVmZXI7XG5cbiAgfSkoQmFzZSk7XG5cbiAgcXVvdGVfcGF0aF9mb3JfZW1pc3Npb24gPSBmdW5jdGlvbihuKSB7XG4gICAgcmV0dXJuICdcIicgKyBuLnJlcGxhY2UoL1xcXFwvZywgJ1xcXFxcXFxcJykgKyAnXCInO1xuICB9O1xuXG4gIHF1b3RlX2Z1bmNuYW1lX2Zvcl9kZWJ1ZyA9IGZ1bmN0aW9uKG4pIHtcbiAgICByZXR1cm4gJ1wiJyArIG4ucmVwbGFjZSgvW1wiJ10vZywgJycpICsgJ1wiJztcbiAgfTtcblxuICByZXF1aXJlX3RvcF9kaXIgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gcXVvdGVfcGF0aF9mb3JfZW1pc3Npb24ocGF0aG1vZC5qb2luKF9fZGlybmFtZSwgXCIuLlwiLCBcIi4uXCIpKTtcbiAgfTtcblxuICBleHBvcnRzLkF3YWl0ID0gQXdhaXQgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEF3YWl0LCBfc3VwZXIpO1xuXG4gICAgZnVuY3Rpb24gQXdhaXQoYm9keSkge1xuICAgICAgdGhpcy5ib2R5ID0gYm9keTtcbiAgICAgIEF3YWl0Ll9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIEF3YWl0LnByb3RvdHlwZS50cmFuc2Zvcm0gPSBmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgYXNzaWduLCBhc3NpZ25tZW50cywgYm9keSwgY2FsbCwgY2JfYXNzaWdubWVudCwgY2JfbGhzLCBjYl9yaHMsIGNscywgZm5fYXNzaWdubWVudCwgZm5fbGhzLCBmbl9yaHMsIGZ1bmNfYXNzaWdubWVudCwgZnVuY19saHMsIGZ1bmNfcmhzLCBsaHMsIG1ldGgsIG4sIG5hbWUsIHJocywgdHJhY2UsIF9yZWYyLCBfcmVmMztcbiAgICAgIGJvZHkgPSB0aGlzLmJvZHk7XG4gICAgICBuYW1lID0gaWNlZFtcImNvbnN0XCJdLmRlZmVycmFscztcbiAgICAgIG8uc2NvcGUuYWRkKG5hbWUsICd2YXInKTtcbiAgICAgIGxocyA9IG5ldyBWYWx1ZShuZXcgTGl0ZXJhbChuYW1lKSk7XG4gICAgICBjbHMgPSBuZXcgVmFsdWUobmV3IExpdGVyYWwoaWNlZFtcImNvbnN0XCJdLm5zKSk7XG4gICAgICBjbHMuYWRkKG5ldyBBY2Nlc3MobmV3IFZhbHVlKG5ldyBMaXRlcmFsKGljZWRbXCJjb25zdFwiXS5EZWZlcnJhbHMpKSkpO1xuICAgICAgYXNzaWdubWVudHMgPSBbXTtcbiAgICAgIGlmIChuID0gKF9yZWYyID0gdGhpcy5wYXJlbnRGdW5jKSAhPSBudWxsID8gX3JlZjIuaWNlZFBhc3NlZERlZmVycmFsIDogdm9pZCAwKSB7XG4gICAgICAgIGNiX2xocyA9IG5ldyBWYWx1ZShuZXcgTGl0ZXJhbChpY2VkW1wiY29uc3RcIl0ucGFyZW50KSk7XG4gICAgICAgIGNiX3JocyA9IG5ldyBWYWx1ZShuZXcgTGl0ZXJhbChuKSk7XG4gICAgICAgIGNiX2Fzc2lnbm1lbnQgPSBuZXcgQXNzaWduKGNiX2xocywgY2JfcmhzLCBcIm9iamVjdFwiKTtcbiAgICAgICAgYXNzaWdubWVudHMucHVzaChjYl9hc3NpZ25tZW50KTtcbiAgICAgIH1cbiAgICAgIGlmIChvLmZpbGVuYW1lICE9IG51bGwpIHtcbiAgICAgICAgZm5fbGhzID0gbmV3IFZhbHVlKG5ldyBMaXRlcmFsKGljZWRbXCJjb25zdFwiXS5maWxlbmFtZSkpO1xuICAgICAgICBmbl9yaHMgPSBuZXcgVmFsdWUobmV3IExpdGVyYWwocXVvdGVfcGF0aF9mb3JfZW1pc3Npb24oby5maWxlbmFtZSkpKTtcbiAgICAgICAgZm5fYXNzaWdubWVudCA9IG5ldyBBc3NpZ24oZm5fbGhzLCBmbl9yaHMsIFwib2JqZWN0XCIpO1xuICAgICAgICBhc3NpZ25tZW50cy5wdXNoKGZuX2Fzc2lnbm1lbnQpO1xuICAgICAgfVxuICAgICAgaWYgKG4gPSAoX3JlZjMgPSB0aGlzLnBhcmVudEZ1bmMpICE9IG51bGwgPyBfcmVmMy5pY2VkVHJhY2VOYW1lKCkgOiB2b2lkIDApIHtcbiAgICAgICAgZnVuY19saHMgPSBuZXcgVmFsdWUobmV3IExpdGVyYWwoaWNlZFtcImNvbnN0XCJdLmZ1bmNuYW1lKSk7XG4gICAgICAgIGZ1bmNfcmhzID0gbmV3IFZhbHVlKG5ldyBMaXRlcmFsKHF1b3RlX2Z1bmNuYW1lX2Zvcl9kZWJ1ZyhuKSkpO1xuICAgICAgICBmdW5jX2Fzc2lnbm1lbnQgPSBuZXcgQXNzaWduKGZ1bmNfbGhzLCBmdW5jX3JocywgXCJvYmplY3RcIik7XG4gICAgICAgIGFzc2lnbm1lbnRzLnB1c2goZnVuY19hc3NpZ25tZW50KTtcbiAgICAgIH1cbiAgICAgIHRyYWNlID0gbmV3IE9iaihhc3NpZ25tZW50cywgdHJ1ZSk7XG4gICAgICBjYWxsID0gbmV3IENhbGwoY2xzLCBbbmV3IFZhbHVlKG5ldyBMaXRlcmFsKGljZWRbXCJjb25zdFwiXS5rKSksIHRyYWNlXSk7XG4gICAgICByaHMgPSBuZXcgT3AoXCJuZXdcIiwgY2FsbCk7XG4gICAgICBhc3NpZ24gPSBuZXcgQXNzaWduKGxocywgcmhzKTtcbiAgICAgIGJvZHkudW5zaGlmdChhc3NpZ24pO1xuICAgICAgbWV0aCA9IGxocy5jb3B5KCkuYWRkKG5ldyBBY2Nlc3MobmV3IFZhbHVlKG5ldyBMaXRlcmFsKGljZWRbXCJjb25zdFwiXS5mdWxmaWxsKSkpKTtcbiAgICAgIGNhbGwgPSBuZXcgQ2FsbChtZXRoLCBbXSk7XG4gICAgICBib2R5LnB1c2goY2FsbCk7XG4gICAgICByZXR1cm4gdGhpcy5ib2R5ID0gYm9keTtcbiAgICB9O1xuXG4gICAgQXdhaXQucHJvdG90eXBlLmNoaWxkcmVuID0gWydib2R5J107XG5cbiAgICBBd2FpdC5wcm90b3R5cGUuaXNTdGF0ZW1lbnQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBZRVM7XG4gICAgfTtcblxuICAgIEF3YWl0LnByb3RvdHlwZS5tYWtlUmV0dXJuID0gVEhJUztcblxuICAgIEF3YWl0LnByb3RvdHlwZS5jb21waWxlTm9kZSA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHRoaXMudHJhbnNmb3JtKG8pO1xuICAgICAgcmV0dXJuIHRoaXMuYm9keS5jb21waWxlTm9kZShvKTtcbiAgICB9O1xuXG4gICAgQXdhaXQucHJvdG90eXBlLmljZWRXYWxrQXN0ID0gZnVuY3Rpb24ocCwgbykge1xuICAgICAgdGhpcy5pY2VkSGFzQXV0b2NiRmxhZyA9IG8uZm91bmRBdXRvY2I7XG4gICAgICB0aGlzLnBhcmVudEZ1bmMgPSBvLmN1cnJGdW5jO1xuICAgICAgcCA9IHAgfHwgdGhpcztcbiAgICAgIHRoaXMuaWNlZFBhcmVudEF3YWl0ID0gcDtcbiAgICAgIEF3YWl0Ll9fc3VwZXJfXy5pY2VkV2Fsa0FzdC5jYWxsKHRoaXMsIHAsIG8pO1xuICAgICAgcmV0dXJuIHRoaXMuaWNlZE5vZGVGbGFnID0gby5mb3VuZEF3YWl0RnVuYyA9IG8uZm91bmRBd2FpdCA9IHRydWU7XG4gICAgfTtcblxuICAgIHJldHVybiBBd2FpdDtcblxuICB9KShCYXNlKTtcblxuICBJY2VkUnVudGltZSA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoSWNlZFJ1bnRpbWUsIF9zdXBlcik7XG5cbiAgICBmdW5jdGlvbiBJY2VkUnVudGltZShmb3VuZERlZmVyLCBmb3VuZEF3YWl0KSB7XG4gICAgICB0aGlzLmZvdW5kRGVmZXIgPSBmb3VuZERlZmVyO1xuICAgICAgdGhpcy5mb3VuZEF3YWl0ID0gZm91bmRBd2FpdDtcbiAgICAgIEljZWRSdW50aW1lLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIEljZWRSdW50aW1lLnByb3RvdHlwZS5jb21waWxlTm9kZSA9IGZ1bmN0aW9uKG8sIGxldmVsKSB7XG4gICAgICB2YXIgYWNjZXNzLCBhY2Nlc3NuYW1lLCBhc3NpZ24sIGNhbGwsIGNhbGx2LCBmaWxlLCBpbmMsIGludGVycCwgaywga2xhc3MsIGxoc192ZWMsIG5zLCBxbW9kbmFtZSwgcmVxLCByaHMsIHYsIHZhbCwgd2luZG93X21vZGUsIHdpbmRvd192YWwsIF9pLCBfaiwgX2xlbiwgX2xlbjEsIF9yZWYyO1xuICAgICAgdGhpcy5leHByZXNzaW9ucyA9IFtdO1xuICAgICAgdiA9IG8ucnVudGltZSA/IG8ucnVudGltZSA6IG8uYmFyZSA/IFwibm9uZVwiIDogdGhpcy5mb3VuZERlZmVyID8gXCJub2RlXCIgOiBcIm5vbmVcIjtcbiAgICAgIGlmIChvLnJ1bnRpbWUgJiYgIXRoaXMuZm91bmREZWZlciAmJiAhby5ydW5mb3JjZSkge1xuICAgICAgICB2ID0gXCJub25lXCI7XG4gICAgICB9XG4gICAgICB3aW5kb3dfbW9kZSA9IGZhbHNlO1xuICAgICAgd2luZG93X3ZhbCA9IG51bGw7XG4gICAgICBpbmMgPSBudWxsO1xuICAgICAgaW5jID0gKGZ1bmN0aW9uKCkge1xuICAgICAgICBzd2l0Y2ggKHYpIHtcbiAgICAgICAgICBjYXNlIFwiaW5saW5lXCI6XG4gICAgICAgICAgY2FzZSBcIndpbmRvd1wiOlxuICAgICAgICAgICAgaWYgKHYgPT09IFwid2luZG93XCIpIHtcbiAgICAgICAgICAgICAgd2luZG93X21vZGUgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHdpbmRvd19tb2RlKSB7XG4gICAgICAgICAgICAgIHdpbmRvd192YWwgPSBuZXcgVmFsdWUobmV3IExpdGVyYWwodikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIElubGluZVJ1bnRpbWUuZ2VuZXJhdGUod2luZG93X3ZhbCA/IHdpbmRvd192YWwuY29weSgpIDogbnVsbCk7XG4gICAgICAgICAgY2FzZSBcIm5vZGVcIjpcbiAgICAgICAgICBjYXNlIFwiYnJvd3NlcmlmeVwiOlxuICAgICAgICAgIGNhc2UgXCJpbnRlcnBcIjpcbiAgICAgICAgICAgIGludGVycCA9IHYgPT09IFwiaW50ZXJwXCI7XG4gICAgICAgICAgICBxbW9kbmFtZSA9IGludGVycCA/IHJlcXVpcmVfdG9wX2RpcigpIDogXCInaWNlZC1ydW50aW1lJ1wiO1xuICAgICAgICAgICAgYWNjZXNzbmFtZSA9IGljZWRbXCJjb25zdFwiXS5ucztcbiAgICAgICAgICAgIGZpbGUgPSBuZXcgTGl0ZXJhbChxbW9kbmFtZSk7XG4gICAgICAgICAgICBhY2Nlc3MgPSBuZXcgQWNjZXNzKG5ldyBMaXRlcmFsKGFjY2Vzc25hbWUpKTtcbiAgICAgICAgICAgIHJlcSA9IG5ldyBWYWx1ZShuZXcgTGl0ZXJhbChcInJlcXVpcmVcIikpO1xuICAgICAgICAgICAgY2FsbCA9IG5ldyBDYWxsKHJlcSwgW2ZpbGVdKTtcbiAgICAgICAgICAgIGNhbGx2ID0gbmV3IFZhbHVlKGNhbGwpO1xuICAgICAgICAgICAgaWYgKGludGVycCkge1xuICAgICAgICAgICAgICBjYWxsdi5hZGQoYWNjZXNzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5zID0gbmV3IFZhbHVlKG5ldyBMaXRlcmFsKGljZWRbXCJjb25zdFwiXS5ucykpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBBc3NpZ24obnMsIGNhbGx2KTtcbiAgICAgICAgICBjYXNlIFwibm9uZVwiOlxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHRocm93IFN5bnRheEVycm9yKFwidW5leHBlY3RlZCBmbGFnIEljZWRSdW50aW1lIFwiICsgdik7XG4gICAgICAgIH1cbiAgICAgIH0pKCk7XG4gICAgICBpZiAoaW5jKSB7XG4gICAgICAgIHRoaXMucHVzaChpbmMpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuZm91bmRBd2FpdCkge1xuICAgICAgICByaHMgPSBuZXcgQ29kZShbXSwgbmV3IEJsb2NrKFtdKSk7XG4gICAgICAgIGxoc192ZWMgPSBbXTtcbiAgICAgICAgX3JlZjIgPSBbaWNlZFtcImNvbnN0XCJdLmtfbm9vcCwgaWNlZFtcImNvbnN0XCJdLmtdO1xuICAgICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYyLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICAgICAgayA9IF9yZWYyW19pXTtcbiAgICAgICAgICB2YWwgPSBuZXcgVmFsdWUobmV3IExpdGVyYWwoaykpO1xuICAgICAgICAgIGlmICh3aW5kb3dfdmFsKSB7XG4gICAgICAgICAgICBrbGFzcyA9IHdpbmRvd192YWwuY29weSgpO1xuICAgICAgICAgICAga2xhc3MuYWRkKG5ldyBBY2Nlc3ModmFsKSk7XG4gICAgICAgICAgICB2YWwgPSBrbGFzcztcbiAgICAgICAgICB9XG4gICAgICAgICAgbGhzX3ZlYy5wdXNoKHZhbCk7XG4gICAgICAgIH1cbiAgICAgICAgYXNzaWduID0gcmhzO1xuICAgICAgICBmb3IgKF9qID0gMCwgX2xlbjEgPSBsaHNfdmVjLmxlbmd0aDsgX2ogPCBfbGVuMTsgX2orKykge1xuICAgICAgICAgIHYgPSBsaHNfdmVjW19qXTtcbiAgICAgICAgICBhc3NpZ24gPSBuZXcgQXNzaWduKHYsIGFzc2lnbik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wdXNoKGFzc2lnbik7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5pc0VtcHR5KCkpIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIEljZWRSdW50aW1lLl9fc3VwZXJfXy5jb21waWxlTm9kZS5jYWxsKHRoaXMsIG8pO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBJY2VkUnVudGltZS5wcm90b3R5cGUuaWNlZFdhbGtBc3QgPSBmdW5jdGlvbihwLCBvKSB7XG4gICAgICB0aGlzLmljZWRIYXNBdXRvY2JGbGFnID0gby5mb3VuZEF1dG9jYjtcbiAgICAgIHJldHVybiBJY2VkUnVudGltZS5fX3N1cGVyX18uaWNlZFdhbGtBc3QuY2FsbCh0aGlzLCBwLCBvKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEljZWRSdW50aW1lO1xuXG4gIH0pKEJsb2NrKTtcblxuICBleHBvcnRzLlRyeSA9IFRyeSA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoVHJ5LCBfc3VwZXIpO1xuXG4gICAgZnVuY3Rpb24gVHJ5KGF0dGVtcHQsIGVycm9yVmFyaWFibGUsIHJlY292ZXJ5LCBlbnN1cmUpIHtcbiAgICAgIHRoaXMuYXR0ZW1wdCA9IGF0dGVtcHQ7XG4gICAgICB0aGlzLmVycm9yVmFyaWFibGUgPSBlcnJvclZhcmlhYmxlO1xuICAgICAgdGhpcy5yZWNvdmVyeSA9IHJlY292ZXJ5O1xuICAgICAgdGhpcy5lbnN1cmUgPSBlbnN1cmU7XG4gICAgfVxuXG4gICAgVHJ5LnByb3RvdHlwZS5jaGlsZHJlbiA9IFsnYXR0ZW1wdCcsICdyZWNvdmVyeScsICdlbnN1cmUnXTtcblxuICAgIFRyeS5wcm90b3R5cGUuaXNTdGF0ZW1lbnQgPSBZRVM7XG5cbiAgICBUcnkucHJvdG90eXBlLmp1bXBzID0gZnVuY3Rpb24obykge1xuICAgICAgdmFyIF9yZWYyO1xuICAgICAgcmV0dXJuIHRoaXMuYXR0ZW1wdC5qdW1wcyhvKSB8fCAoKF9yZWYyID0gdGhpcy5yZWNvdmVyeSkgIT0gbnVsbCA/IF9yZWYyLmp1bXBzKG8pIDogdm9pZCAwKTtcbiAgICB9O1xuXG4gICAgVHJ5LnByb3RvdHlwZS5tYWtlUmV0dXJuID0gZnVuY3Rpb24ocmVzKSB7XG4gICAgICBpZiAodGhpcy5hdHRlbXB0KSB7XG4gICAgICAgIHRoaXMuYXR0ZW1wdCA9IHRoaXMuYXR0ZW1wdC5tYWtlUmV0dXJuKHJlcyk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5yZWNvdmVyeSkge1xuICAgICAgICB0aGlzLnJlY292ZXJ5ID0gdGhpcy5yZWNvdmVyeS5tYWtlUmV0dXJuKHJlcyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgVHJ5LnByb3RvdHlwZS5jb21waWxlTm9kZSA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBjYXRjaFBhcnQsIGVuc3VyZVBhcnQsIHBsYWNlaG9sZGVyLCB0cnlQYXJ0O1xuICAgICAgby5pbmRlbnQgKz0gVEFCO1xuICAgICAgdHJ5UGFydCA9IHRoaXMuYXR0ZW1wdC5jb21waWxlVG9GcmFnbWVudHMobywgTEVWRUxfVE9QKTtcbiAgICAgIGNhdGNoUGFydCA9IHRoaXMucmVjb3ZlcnkgPyAocGxhY2Vob2xkZXIgPSBuZXcgTGl0ZXJhbCgnX2Vycm9yJyksIHRoaXMuZXJyb3JWYXJpYWJsZSA/IHRoaXMucmVjb3ZlcnkudW5zaGlmdChuZXcgQXNzaWduKHRoaXMuZXJyb3JWYXJpYWJsZSwgcGxhY2Vob2xkZXIpKSA6IHZvaWQgMCwgW10uY29uY2F0KHRoaXMubWFrZUNvZGUoXCIgY2F0Y2ggKFwiKSwgcGxhY2Vob2xkZXIuY29tcGlsZVRvRnJhZ21lbnRzKG8pLCB0aGlzLm1ha2VDb2RlKFwiKSB7XFxuXCIpLCB0aGlzLnJlY292ZXJ5LmNvbXBpbGVUb0ZyYWdtZW50cyhvLCBMRVZFTF9UT1ApLCB0aGlzLm1ha2VDb2RlKFwiXFxuXCIgKyB0aGlzLnRhYiArIFwifVwiKSkpIDogISh0aGlzLmVuc3VyZSB8fCB0aGlzLnJlY292ZXJ5KSA/IFt0aGlzLm1ha2VDb2RlKCcgY2F0Y2ggKF9lcnJvcikge30nKV0gOiBbXTtcbiAgICAgIGVuc3VyZVBhcnQgPSB0aGlzLmVuc3VyZSA/IFtdLmNvbmNhdCh0aGlzLm1ha2VDb2RlKFwiIGZpbmFsbHkge1xcblwiKSwgdGhpcy5lbnN1cmUuY29tcGlsZVRvRnJhZ21lbnRzKG8sIExFVkVMX1RPUCksIHRoaXMubWFrZUNvZGUoXCJcXG5cIiArIHRoaXMudGFiICsgXCJ9XCIpKSA6IFtdO1xuICAgICAgcmV0dXJuIFtdLmNvbmNhdCh0aGlzLm1ha2VDb2RlKFwiXCIgKyB0aGlzLnRhYiArIFwidHJ5IHtcXG5cIiksIHRyeVBhcnQsIHRoaXMubWFrZUNvZGUoXCJcXG5cIiArIHRoaXMudGFiICsgXCJ9XCIpLCBjYXRjaFBhcnQsIGVuc3VyZVBhcnQpO1xuICAgIH07XG5cbiAgICByZXR1cm4gVHJ5O1xuXG4gIH0pKEJhc2UpO1xuXG4gIGV4cG9ydHMuVGhyb3cgPSBUaHJvdyA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoVGhyb3csIF9zdXBlcik7XG5cbiAgICBmdW5jdGlvbiBUaHJvdyhleHByZXNzaW9uKSB7XG4gICAgICB0aGlzLmV4cHJlc3Npb24gPSBleHByZXNzaW9uO1xuICAgICAgVGhyb3cuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgVGhyb3cucHJvdG90eXBlLmNoaWxkcmVuID0gWydleHByZXNzaW9uJ107XG5cbiAgICBUaHJvdy5wcm90b3R5cGUuaXNTdGF0ZW1lbnQgPSBZRVM7XG5cbiAgICBUaHJvdy5wcm90b3R5cGUuanVtcHMgPSBOTztcblxuICAgIFRocm93LnByb3RvdHlwZS5tYWtlUmV0dXJuID0gVEhJUztcblxuICAgIFRocm93LnByb3RvdHlwZS5jb21waWxlTm9kZSA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHJldHVybiBbXS5jb25jYXQodGhpcy5tYWtlQ29kZSh0aGlzLnRhYiArIFwidGhyb3cgXCIpLCB0aGlzLmV4cHJlc3Npb24uY29tcGlsZVRvRnJhZ21lbnRzKG8pLCB0aGlzLm1ha2VDb2RlKFwiO1wiKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBUaHJvdztcblxuICB9KShCYXNlKTtcblxuICBleHBvcnRzLkV4aXN0ZW5jZSA9IEV4aXN0ZW5jZSA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoRXhpc3RlbmNlLCBfc3VwZXIpO1xuXG4gICAgZnVuY3Rpb24gRXhpc3RlbmNlKGV4cHJlc3Npb24pIHtcbiAgICAgIHRoaXMuZXhwcmVzc2lvbiA9IGV4cHJlc3Npb247XG4gICAgICBFeGlzdGVuY2UuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgRXhpc3RlbmNlLnByb3RvdHlwZS5jaGlsZHJlbiA9IFsnZXhwcmVzc2lvbiddO1xuXG4gICAgRXhpc3RlbmNlLnByb3RvdHlwZS5pbnZlcnQgPSBORUdBVEU7XG5cbiAgICBFeGlzdGVuY2UucHJvdG90eXBlLmNvbXBpbGVOb2RlID0gZnVuY3Rpb24obykge1xuICAgICAgdmFyIGNtcCwgY25qLCBjb2RlLCBfcmVmMjtcbiAgICAgIHRoaXMuZXhwcmVzc2lvbi5mcm9udCA9IHRoaXMuZnJvbnQ7XG4gICAgICBjb2RlID0gdGhpcy5leHByZXNzaW9uLmNvbXBpbGUobywgTEVWRUxfT1ApO1xuICAgICAgaWYgKElERU5USUZJRVIudGVzdChjb2RlKSAmJiAhby5zY29wZS5jaGVjayhjb2RlKSkge1xuICAgICAgICBfcmVmMiA9IHRoaXMubmVnYXRlZCA/IFsnPT09JywgJ3x8J10gOiBbJyE9PScsICcmJiddLCBjbXAgPSBfcmVmMlswXSwgY25qID0gX3JlZjJbMV07XG4gICAgICAgIGNvZGUgPSBcInR5cGVvZiBcIiArIGNvZGUgKyBcIiBcIiArIGNtcCArIFwiIFxcXCJ1bmRlZmluZWRcXFwiIFwiICsgY25qICsgXCIgXCIgKyBjb2RlICsgXCIgXCIgKyBjbXAgKyBcIiBudWxsXCI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb2RlID0gXCJcIiArIGNvZGUgKyBcIiBcIiArICh0aGlzLm5lZ2F0ZWQgPyAnPT0nIDogJyE9JykgKyBcIiBudWxsXCI7XG4gICAgICB9XG4gICAgICByZXR1cm4gW3RoaXMubWFrZUNvZGUoby5sZXZlbCA8PSBMRVZFTF9DT05EID8gY29kZSA6IFwiKFwiICsgY29kZSArIFwiKVwiKV07XG4gICAgfTtcblxuICAgIHJldHVybiBFeGlzdGVuY2U7XG5cbiAgfSkoQmFzZSk7XG5cbiAgZXhwb3J0cy5QYXJlbnMgPSBQYXJlbnMgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFBhcmVucywgX3N1cGVyKTtcblxuICAgIGZ1bmN0aW9uIFBhcmVucyhib2R5KSB7XG4gICAgICB0aGlzLmJvZHkgPSBib2R5O1xuICAgICAgUGFyZW5zLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFBhcmVucy5wcm90b3R5cGUuY2hpbGRyZW4gPSBbJ2JvZHknXTtcblxuICAgIFBhcmVucy5wcm90b3R5cGUudW53cmFwID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5ib2R5O1xuICAgIH07XG5cbiAgICBQYXJlbnMucHJvdG90eXBlLmlzQ29tcGxleCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMuYm9keS5pc0NvbXBsZXgoKTtcbiAgICB9O1xuXG4gICAgUGFyZW5zLnByb3RvdHlwZS5jb21waWxlTm9kZSA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBiYXJlLCBleHByLCBmcmFnbWVudHM7XG4gICAgICBleHByID0gdGhpcy5ib2R5LnVud3JhcCgpO1xuICAgICAgaWYgKGV4cHIgaW5zdGFuY2VvZiBWYWx1ZSAmJiBleHByLmlzQXRvbWljKCkpIHtcbiAgICAgICAgZXhwci5mcm9udCA9IHRoaXMuZnJvbnQ7XG4gICAgICAgIHJldHVybiBleHByLmNvbXBpbGVUb0ZyYWdtZW50cyhvKTtcbiAgICAgIH1cbiAgICAgIGZyYWdtZW50cyA9IGV4cHIuY29tcGlsZVRvRnJhZ21lbnRzKG8sIExFVkVMX1BBUkVOKTtcbiAgICAgIGJhcmUgPSBvLmxldmVsIDwgTEVWRUxfT1AgJiYgKGV4cHIgaW5zdGFuY2VvZiBPcCB8fCBleHByIGluc3RhbmNlb2YgQ2FsbCB8fCAoZXhwciBpbnN0YW5jZW9mIEZvciAmJiBleHByLnJldHVybnMpKTtcbiAgICAgIGlmIChiYXJlKSB7XG4gICAgICAgIHJldHVybiBmcmFnbWVudHM7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdGhpcy53cmFwSW5CcmFjZXMoZnJhZ21lbnRzKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIFBhcmVucztcblxuICB9KShCYXNlKTtcblxuICBleHBvcnRzLkZvciA9IEZvciA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoRm9yLCBfc3VwZXIpO1xuXG4gICAgZnVuY3Rpb24gRm9yKGJvZHksIHNvdXJjZSkge1xuICAgICAgdmFyIF9yZWYyO1xuICAgICAgRm9yLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2Uuc291cmNlLCB0aGlzLmd1YXJkID0gc291cmNlLmd1YXJkLCB0aGlzLnN0ZXAgPSBzb3VyY2Uuc3RlcCwgdGhpcy5uYW1lID0gc291cmNlLm5hbWUsIHRoaXMuaW5kZXggPSBzb3VyY2UuaW5kZXg7XG4gICAgICB0aGlzLmJvZHkgPSBCbG9jay53cmFwKFtib2R5XSk7XG4gICAgICB0aGlzLm93biA9ICEhc291cmNlLm93bjtcbiAgICAgIHRoaXMub2JqZWN0ID0gISFzb3VyY2Uub2JqZWN0O1xuICAgICAgaWYgKHRoaXMub2JqZWN0KSB7XG4gICAgICAgIF9yZWYyID0gW3RoaXMuaW5kZXgsIHRoaXMubmFtZV0sIHRoaXMubmFtZSA9IF9yZWYyWzBdLCB0aGlzLmluZGV4ID0gX3JlZjJbMV07XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5pbmRleCBpbnN0YW5jZW9mIFZhbHVlKSB7XG4gICAgICAgIHRoaXMuaW5kZXguZXJyb3IoJ2luZGV4IGNhbm5vdCBiZSBhIHBhdHRlcm4gbWF0Y2hpbmcgZXhwcmVzc2lvbicpO1xuICAgICAgfVxuICAgICAgdGhpcy5yYW5nZSA9IHRoaXMuc291cmNlIGluc3RhbmNlb2YgVmFsdWUgJiYgdGhpcy5zb3VyY2UuYmFzZSBpbnN0YW5jZW9mIFJhbmdlICYmICF0aGlzLnNvdXJjZS5wcm9wZXJ0aWVzLmxlbmd0aDtcbiAgICAgIHRoaXMucGF0dGVybiA9IHRoaXMubmFtZSBpbnN0YW5jZW9mIFZhbHVlO1xuICAgICAgaWYgKHRoaXMucmFuZ2UgJiYgdGhpcy5pbmRleCkge1xuICAgICAgICB0aGlzLmluZGV4LmVycm9yKCdpbmRleGVzIGRvIG5vdCBhcHBseSB0byByYW5nZSBsb29wcycpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMucmFuZ2UgJiYgdGhpcy5wYXR0ZXJuKSB7XG4gICAgICAgIHRoaXMubmFtZS5lcnJvcignY2Fubm90IHBhdHRlcm4gbWF0Y2ggb3ZlciByYW5nZSBsb29wcycpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMub3duICYmICF0aGlzLm9iamVjdCkge1xuICAgICAgICB0aGlzLm5hbWUuZXJyb3IoJ2Nhbm5vdCB1c2Ugb3duIHdpdGggZm9yLWluJyk7XG4gICAgICB9XG4gICAgICB0aGlzLnJldHVybnMgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBGb3IucHJvdG90eXBlLmNoaWxkcmVuID0gWydib2R5JywgJ3NvdXJjZScsICdndWFyZCcsICdzdGVwJ107XG5cbiAgICBGb3IucHJvdG90eXBlLmNvbXBpbGVOb2RlID0gZnVuY3Rpb24obykge1xuICAgICAgdmFyIGJvZHksIGJvZHlGcmFnbWVudHMsIGNvbXBhcmUsIGNvbXBhcmVEb3duLCBkZWNsYXJlLCBkZWNsYXJlRG93biwgZGVmUGFydCwgZGVmUGFydEZyYWdtZW50cywgZG93biwgZm9yUGFydEZyYWdtZW50cywgZ3VhcmRQYXJ0LCBpZHQxLCBpbmNyZW1lbnQsIGluZGV4LCBpdmFyLCBrdmFyLCBrdmFyQXNzaWduLCBsYXN0SnVtcHMsIGx2YXIsIG5hbWUsIG5hbWVQYXJ0LCByZWYsIHJlc3VsdFBhcnQsIHJldHVyblJlc3VsdCwgcnZhciwgc2NvcGUsIHNvdXJjZSwgc3RlcCwgc3RlcE51bSwgc3RlcFZhciwgc3ZhciwgdmFyUGFydCwgX3JlZjIsIF9yZWYzO1xuICAgICAgYm9keSA9IEJsb2NrLndyYXAoW3RoaXMuYm9keV0pO1xuICAgICAgbGFzdEp1bXBzID0gKF9yZWYyID0gbGFzdChib2R5LmV4cHJlc3Npb25zKSkgIT0gbnVsbCA/IF9yZWYyLmp1bXBzKCkgOiB2b2lkIDA7XG4gICAgICBpZiAobGFzdEp1bXBzICYmIGxhc3RKdW1wcyBpbnN0YW5jZW9mIFJldHVybikge1xuICAgICAgICB0aGlzLnJldHVybnMgPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHNvdXJjZSA9IHRoaXMucmFuZ2UgPyB0aGlzLnNvdXJjZS5iYXNlIDogdGhpcy5zb3VyY2U7XG4gICAgICBzY29wZSA9IG8uc2NvcGU7XG4gICAgICBpZiAoIXRoaXMucGF0dGVybikge1xuICAgICAgICBuYW1lID0gdGhpcy5uYW1lICYmICh0aGlzLm5hbWUuY29tcGlsZShvLCBMRVZFTF9MSVNUKSk7XG4gICAgICB9XG4gICAgICBpbmRleCA9IHRoaXMuaW5kZXggJiYgKHRoaXMuaW5kZXguY29tcGlsZShvLCBMRVZFTF9MSVNUKSk7XG4gICAgICBpZiAobmFtZSAmJiAhdGhpcy5wYXR0ZXJuKSB7XG4gICAgICAgIHNjb3BlLmZpbmQobmFtZSk7XG4gICAgICB9XG4gICAgICBpZiAoaW5kZXgpIHtcbiAgICAgICAgc2NvcGUuZmluZChpbmRleCk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5yZXR1cm5zKSB7XG4gICAgICAgIHJ2YXIgPSBzY29wZS5mcmVlVmFyaWFibGUoJ3Jlc3VsdHMnKTtcbiAgICAgIH1cbiAgICAgIGl2YXIgPSAodGhpcy5vYmplY3QgJiYgaW5kZXgpIHx8IHNjb3BlLmZyZWVWYXJpYWJsZSgnaScpO1xuICAgICAga3ZhciA9ICh0aGlzLnJhbmdlICYmIG5hbWUpIHx8IGluZGV4IHx8IGl2YXI7XG4gICAgICBrdmFyQXNzaWduID0ga3ZhciAhPT0gaXZhciA/IFwiXCIgKyBrdmFyICsgXCIgPSBcIiA6IFwiXCI7XG4gICAgICBpZiAodGhpcy5zdGVwICYmICF0aGlzLnJhbmdlKSB7XG4gICAgICAgIF9yZWYzID0gdGhpcy5jYWNoZVRvQ29kZUZyYWdtZW50cyh0aGlzLnN0ZXAuY2FjaGUobywgTEVWRUxfTElTVCkpLCBzdGVwID0gX3JlZjNbMF0sIHN0ZXBWYXIgPSBfcmVmM1sxXTtcbiAgICAgICAgc3RlcE51bSA9IHN0ZXBWYXIubWF0Y2goTlVNQkVSKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLnBhdHRlcm4pIHtcbiAgICAgICAgbmFtZSA9IGl2YXI7XG4gICAgICB9XG4gICAgICB2YXJQYXJ0ID0gJyc7XG4gICAgICBndWFyZFBhcnQgPSAnJztcbiAgICAgIGRlZlBhcnQgPSAnJztcbiAgICAgIGlkdDEgPSB0aGlzLnRhYiArIFRBQjtcbiAgICAgIHNvdXJjZS5pY2VkU3RhdGVtZW50QXNzZXJ0aW9uKCk7XG4gICAgICBpZiAodGhpcy5pY2VkTm9kZUZsYWcpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaWNlZENvbXBpbGVJY2VkKG8sIHtcbiAgICAgICAgICBzdGVwVmFyOiBzdGVwVmFyLFxuICAgICAgICAgIGJvZHk6IGJvZHksXG4gICAgICAgICAga3Zhcjoga3ZhcixcbiAgICAgICAgICBndWFyZDogdGhpcy5ndWFyZFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLnJhbmdlKSB7XG4gICAgICAgIGZvclBhcnRGcmFnbWVudHMgPSBzb3VyY2UuY29tcGlsZVRvRnJhZ21lbnRzKG1lcmdlKG8sIHtcbiAgICAgICAgICBpbmRleDogaXZhcixcbiAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgIHN0ZXA6IHRoaXMuc3RlcFxuICAgICAgICB9KSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdmFyID0gdGhpcy5zb3VyY2UuY29tcGlsZShvLCBMRVZFTF9MSVNUKTtcbiAgICAgICAgaWYgKChuYW1lIHx8IHRoaXMub3duKSAmJiAhSURFTlRJRklFUi50ZXN0KHN2YXIpKSB7XG4gICAgICAgICAgZGVmUGFydCArPSBcIlwiICsgdGhpcy50YWIgKyAocmVmID0gc2NvcGUuZnJlZVZhcmlhYmxlKCdyZWYnKSkgKyBcIiA9IFwiICsgc3ZhciArIFwiO1xcblwiO1xuICAgICAgICAgIHN2YXIgPSByZWY7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5hbWUgJiYgIXRoaXMucGF0dGVybikge1xuICAgICAgICAgIG5hbWVQYXJ0ID0gXCJcIiArIG5hbWUgKyBcIiA9IFwiICsgc3ZhciArIFwiW1wiICsga3ZhciArIFwiXVwiO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5vYmplY3QpIHtcbiAgICAgICAgICBpZiAoc3RlcCAhPT0gc3RlcFZhcikge1xuICAgICAgICAgICAgZGVmUGFydCArPSBcIlwiICsgdGhpcy50YWIgKyBzdGVwICsgXCI7XFxuXCI7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICghKHRoaXMuc3RlcCAmJiBzdGVwTnVtICYmIChkb3duID0gcGFyc2VOdW0oc3RlcE51bVswXSkgPCAwKSkpIHtcbiAgICAgICAgICAgIGx2YXIgPSBzY29wZS5mcmVlVmFyaWFibGUoJ2xlbicpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBkZWNsYXJlID0gXCJcIiArIGt2YXJBc3NpZ24gKyBpdmFyICsgXCIgPSAwLCBcIiArIGx2YXIgKyBcIiA9IFwiICsgc3ZhciArIFwiLmxlbmd0aFwiO1xuICAgICAgICAgIGRlY2xhcmVEb3duID0gXCJcIiArIGt2YXJBc3NpZ24gKyBpdmFyICsgXCIgPSBcIiArIHN2YXIgKyBcIi5sZW5ndGggLSAxXCI7XG4gICAgICAgICAgY29tcGFyZSA9IFwiXCIgKyBpdmFyICsgXCIgPCBcIiArIGx2YXI7XG4gICAgICAgICAgY29tcGFyZURvd24gPSBcIlwiICsgaXZhciArIFwiID49IDBcIjtcbiAgICAgICAgICBpZiAodGhpcy5zdGVwKSB7XG4gICAgICAgICAgICBpZiAoc3RlcE51bSkge1xuICAgICAgICAgICAgICBpZiAoZG93bikge1xuICAgICAgICAgICAgICAgIGNvbXBhcmUgPSBjb21wYXJlRG93bjtcbiAgICAgICAgICAgICAgICBkZWNsYXJlID0gZGVjbGFyZURvd247XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGNvbXBhcmUgPSBcIlwiICsgc3RlcFZhciArIFwiID4gMCA/IFwiICsgY29tcGFyZSArIFwiIDogXCIgKyBjb21wYXJlRG93bjtcbiAgICAgICAgICAgICAgZGVjbGFyZSA9IFwiKFwiICsgc3RlcFZhciArIFwiID4gMCA/IChcIiArIGRlY2xhcmUgKyBcIikgOiBcIiArIGRlY2xhcmVEb3duICsgXCIpXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpbmNyZW1lbnQgPSBcIlwiICsgaXZhciArIFwiICs9IFwiICsgc3RlcFZhcjtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaW5jcmVtZW50ID0gXCJcIiArIChrdmFyICE9PSBpdmFyID8gXCIrK1wiICsgaXZhciA6IFwiXCIgKyBpdmFyICsgXCIrK1wiKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZm9yUGFydEZyYWdtZW50cyA9IFt0aGlzLm1ha2VDb2RlKFwiXCIgKyBkZWNsYXJlICsgXCI7IFwiICsgY29tcGFyZSArIFwiOyBcIiArIGt2YXJBc3NpZ24gKyBpbmNyZW1lbnQpXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMucmV0dXJucykge1xuICAgICAgICByZXN1bHRQYXJ0ID0gXCJcIiArIHRoaXMudGFiICsgcnZhciArIFwiID0gW107XFxuXCI7XG4gICAgICAgIHJldHVyblJlc3VsdCA9IHRoaXMuaWNlZEhhc0F1dG9jYkZsYWcgPyBcIlxcblwiICsgdGhpcy50YWIgKyBpY2VkW1wiY29uc3RcIl0uYXV0b2NiICsgXCIoXCIgKyBydmFyICsgXCIpOyByZXR1cm47XCIgOiBcIlxcblwiICsgdGhpcy50YWIgKyBcInJldHVybiBcIiArIHJ2YXIgKyBcIjtcIjtcbiAgICAgICAgYm9keS5tYWtlUmV0dXJuKHJ2YXIpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuZ3VhcmQpIHtcbiAgICAgICAgaWYgKGJvZHkuZXhwcmVzc2lvbnMubGVuZ3RoID4gMSkge1xuICAgICAgICAgIGJvZHkuZXhwcmVzc2lvbnMudW5zaGlmdChuZXcgSWYoKG5ldyBQYXJlbnModGhpcy5ndWFyZCkpLmludmVydCgpLCBuZXcgTGl0ZXJhbChcImNvbnRpbnVlXCIpKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKHRoaXMuZ3VhcmQpIHtcbiAgICAgICAgICAgIGJvZHkgPSBCbG9jay53cmFwKFtuZXcgSWYodGhpcy5ndWFyZCwgYm9keSldKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLnBhdHRlcm4pIHtcbiAgICAgICAgYm9keS5leHByZXNzaW9ucy51bnNoaWZ0KG5ldyBBc3NpZ24odGhpcy5uYW1lLCBuZXcgTGl0ZXJhbChcIlwiICsgc3ZhciArIFwiW1wiICsga3ZhciArIFwiXVwiKSkpO1xuICAgICAgfVxuICAgICAgZGVmUGFydEZyYWdtZW50cyA9IFtdLmNvbmNhdCh0aGlzLm1ha2VDb2RlKGRlZlBhcnQpLCB0aGlzLnBsdWNrRGlyZWN0Q2FsbChvLCBib2R5KSk7XG4gICAgICBpZiAobmFtZVBhcnQpIHtcbiAgICAgICAgdmFyUGFydCA9IFwiXFxuXCIgKyBpZHQxICsgbmFtZVBhcnQgKyBcIjtcIjtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLm9iamVjdCkge1xuICAgICAgICBmb3JQYXJ0RnJhZ21lbnRzID0gW3RoaXMubWFrZUNvZGUoXCJcIiArIGt2YXIgKyBcIiBpbiBcIiArIHN2YXIpXTtcbiAgICAgICAgaWYgKHRoaXMub3duKSB7XG4gICAgICAgICAgZ3VhcmRQYXJ0ID0gXCJcXG5cIiArIGlkdDEgKyBcImlmICghXCIgKyAodXRpbGl0eSgnaGFzUHJvcCcpKSArIFwiLmNhbGwoXCIgKyBzdmFyICsgXCIsIFwiICsga3ZhciArIFwiKSkgY29udGludWU7XCI7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGJvZHlGcmFnbWVudHMgPSBib2R5LmNvbXBpbGVUb0ZyYWdtZW50cyhtZXJnZShvLCB7XG4gICAgICAgIGluZGVudDogaWR0MVxuICAgICAgfSksIExFVkVMX1RPUCk7XG4gICAgICBpZiAoYm9keUZyYWdtZW50cyAmJiAoYm9keUZyYWdtZW50cy5sZW5ndGggPiAwKSkge1xuICAgICAgICBib2R5RnJhZ21lbnRzID0gW10uY29uY2F0KHRoaXMubWFrZUNvZGUoXCJcXG5cIiksIGJvZHlGcmFnbWVudHMsIHRoaXMubWFrZUNvZGUoXCJcXG5cIikpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFtdLmNvbmNhdChkZWZQYXJ0RnJhZ21lbnRzLCB0aGlzLm1ha2VDb2RlKFwiXCIgKyAocmVzdWx0UGFydCB8fCAnJykgKyB0aGlzLnRhYiArIFwiZm9yIChcIiksIGZvclBhcnRGcmFnbWVudHMsIHRoaXMubWFrZUNvZGUoXCIpIHtcIiArIGd1YXJkUGFydCArIHZhclBhcnQpLCBib2R5RnJhZ21lbnRzLCB0aGlzLm1ha2VDb2RlKFwiXCIgKyB0aGlzLnRhYiArIFwifVwiICsgKHJldHVyblJlc3VsdCB8fCAnJykpKTtcbiAgICB9O1xuXG4gICAgRm9yLnByb3RvdHlwZS5wbHVja0RpcmVjdENhbGwgPSBmdW5jdGlvbihvLCBib2R5KSB7XG4gICAgICB2YXIgYmFzZSwgZGVmcywgZXhwciwgZm4sIGlkeCwgcmVmLCB2YWwsIF9pLCBfbGVuLCBfcmVmMiwgX3JlZjMsIF9yZWY0LCBfcmVmNSwgX3JlZjYsIF9yZWY3LCBfcmVmODtcbiAgICAgIGRlZnMgPSBbXTtcbiAgICAgIF9yZWYyID0gYm9keS5leHByZXNzaW9ucztcbiAgICAgIGZvciAoaWR4ID0gX2kgPSAwLCBfbGVuID0gX3JlZjIubGVuZ3RoOyBfaSA8IF9sZW47IGlkeCA9ICsrX2kpIHtcbiAgICAgICAgZXhwciA9IF9yZWYyW2lkeF07XG4gICAgICAgIGV4cHIgPSBleHByLnVud3JhcEFsbCgpO1xuICAgICAgICBpZiAoIShleHByIGluc3RhbmNlb2YgQ2FsbCkpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICB2YWwgPSAoX3JlZjMgPSBleHByLnZhcmlhYmxlKSAhPSBudWxsID8gX3JlZjMudW53cmFwQWxsKCkgOiB2b2lkIDA7XG4gICAgICAgIGlmICghKCh2YWwgaW5zdGFuY2VvZiBDb2RlKSB8fCAodmFsIGluc3RhbmNlb2YgVmFsdWUgJiYgKChfcmVmNCA9IHZhbC5iYXNlKSAhPSBudWxsID8gX3JlZjQudW53cmFwQWxsKCkgOiB2b2lkIDApIGluc3RhbmNlb2YgQ29kZSAmJiB2YWwucHJvcGVydGllcy5sZW5ndGggPT09IDEgJiYgKChfcmVmNSA9IChfcmVmNiA9IHZhbC5wcm9wZXJ0aWVzWzBdLm5hbWUpICE9IG51bGwgPyBfcmVmNi52YWx1ZSA6IHZvaWQgMCkgPT09ICdjYWxsJyB8fCBfcmVmNSA9PT0gJ2FwcGx5JykpKSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGZuID0gKChfcmVmNyA9IHZhbC5iYXNlKSAhPSBudWxsID8gX3JlZjcudW53cmFwQWxsKCkgOiB2b2lkIDApIHx8IHZhbDtcbiAgICAgICAgcmVmID0gbmV3IExpdGVyYWwoby5zY29wZS5mcmVlVmFyaWFibGUoJ2ZuJykpO1xuICAgICAgICBiYXNlID0gbmV3IFZhbHVlKHJlZik7XG4gICAgICAgIGlmICh2YWwuYmFzZSkge1xuICAgICAgICAgIF9yZWY4ID0gW2Jhc2UsIHZhbF0sIHZhbC5iYXNlID0gX3JlZjhbMF0sIGJhc2UgPSBfcmVmOFsxXTtcbiAgICAgICAgfVxuICAgICAgICBib2R5LmV4cHJlc3Npb25zW2lkeF0gPSBuZXcgQ2FsbChiYXNlLCBleHByLmFyZ3MpO1xuICAgICAgICBkZWZzID0gZGVmcy5jb25jYXQodGhpcy5tYWtlQ29kZSh0aGlzLnRhYiksIG5ldyBBc3NpZ24ocmVmLCBmbikuY29tcGlsZVRvRnJhZ21lbnRzKG8sIExFVkVMX1RPUCksIHRoaXMubWFrZUNvZGUoJztcXG4nKSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZGVmcztcbiAgICB9O1xuXG4gICAgRm9yLnByb3RvdHlwZS5pY2VkQ29tcGlsZUljZWQgPSBmdW5jdGlvbihvLCBkKSB7XG4gICAgICB2YXIgYTEsIGEyLCBhMywgYTQsIGE1LCBhX3Bvc2l0aXZlLCBhX3N0ZXBWYWwsIGIsIGJlZ2luLCBib2R5LCBjb25kaXRpb24sIGRvd24sIGVtcHR5X2FyciwgZW5kLCBleGNsLCBndWFyZCwgaW5hbWUsIGluaXQsIGluaXRfc3RlcCwgaXNfcG9zaXRpdmUsIGlzX3N0ZXBfcG9zaXRpdmUsIGl2YWwsIGtleSwga2V5X2xpdCwga2V5X3ZhbCwga2V5cywga2V5c19hY2Nlc3MsIGtleXNfbGVuLCBrZXlzX3ZhbCwga3ZhbCwgbGVuLCBsZW5fcmhzLCBsZW5fdmFsLCBsb29wX2JvZHksIGxvb3Bfa2V5cywgbG9vcF9zb3VyY2UsIG5lZywgcG9zLCBwb3NpdGl2ZSwgcHJlX2JvZHksIHJlZiwgcmVmX3ZhbCwgcmVmX3ZhbF9jb3B5LCBzY29wZSwgc291cmNlX2FjY2Vzcywgc3RhcnRfcmhzLCBzdGVwLCBzdGVwTnVtLCBzdGVwVmFsLCBzdGVwVmFyLCBzdGVwX3Zhciwgc3RlcF92YXJfdmFsLCBfLCBfcmVmMjtcbiAgICAgIGJvZHkgPSBkLmJvZHk7XG4gICAgICBjb25kaXRpb24gPSBudWxsO1xuICAgICAgaW5pdCA9IFtdO1xuICAgICAgc3RlcCA9IG51bGw7XG4gICAgICBzY29wZSA9IG8uc2NvcGU7XG4gICAgICBwcmVfYm9keSA9IG5ldyBCbG9jayhbXSk7XG4gICAgICBpZiAodGhpcy5vYmplY3QpIHtcbiAgICAgICAgcmVmID0gc2NvcGUuZnJlZVZhcmlhYmxlKCdyZWYnKTtcbiAgICAgICAgcmVmX3ZhbCA9IG5ldyBWYWx1ZShuZXcgTGl0ZXJhbChyZWYpKTtcbiAgICAgICAgYTEgPSBuZXcgQXNzaWduKHJlZl92YWwsIHRoaXMuc291cmNlKTtcbiAgICAgICAga2V5cyA9IHNjb3BlLmZyZWVWYXJpYWJsZSgna2V5cycpO1xuICAgICAgICBrZXlzX3ZhbCA9IG5ldyBWYWx1ZShuZXcgTGl0ZXJhbChrZXlzKSk7XG4gICAgICAgIGtleSA9IHNjb3BlLmZyZWVWYXJpYWJsZSgnaycpO1xuICAgICAgICBrZXlfbGl0ID0gbmV3IExpdGVyYWwoa2V5KTtcbiAgICAgICAga2V5X3ZhbCA9IG5ldyBWYWx1ZShrZXlfbGl0KTtcbiAgICAgICAgZW1wdHlfYXJyID0gbmV3IFZhbHVlKG5ldyBBcnIpO1xuICAgICAgICBsb29wX2JvZHkgPSBuZXcgQmxvY2soW2tleV92YWxdKTtcbiAgICAgICAgbG9vcF9zb3VyY2UgPSB7XG4gICAgICAgICAgb2JqZWN0OiB0cnVlLFxuICAgICAgICAgIG5hbWU6IGtleV9saXQsXG4gICAgICAgICAgc291cmNlOiByZWZfdmFsXG4gICAgICAgIH07XG4gICAgICAgIGxvb3Bfa2V5cyA9IG5ldyBGb3IobG9vcF9ib2R5LCBsb29wX3NvdXJjZSk7XG4gICAgICAgIGEyID0gbmV3IEFzc2lnbihrZXlzX3ZhbCwgbG9vcF9rZXlzKTtcbiAgICAgICAgaW5hbWUgPSBzY29wZS5mcmVlVmFyaWFibGUoJ2knKTtcbiAgICAgICAgaXZhbCA9IG5ldyBWYWx1ZShuZXcgTGl0ZXJhbChpbmFtZSkpO1xuICAgICAgICBhMyA9IG5ldyBBc3NpZ24oaXZhbCwgbmV3IFZhbHVlKG5ldyBMaXRlcmFsKDApKSk7XG4gICAgICAgIGluaXQgPSBbYTEsIGEyLCBhM107XG4gICAgICAgIGtleXNfbGVuID0ga2V5c192YWwuY29weSgpO1xuICAgICAgICBrZXlzX2xlbi5hZGQobmV3IEFjY2VzcyhuZXcgVmFsdWUobmV3IExpdGVyYWwoXCJsZW5ndGhcIikpKSk7XG4gICAgICAgIGNvbmRpdGlvbiA9IG5ldyBPcCgnPCcsIGl2YWwsIGtleXNfbGVuKTtcbiAgICAgICAgc3RlcCA9IG5ldyBPcCgnKysnLCBpdmFsKTtcbiAgICAgICAgaWYgKHRoaXMubmFtZSkge1xuICAgICAgICAgIHNvdXJjZV9hY2Nlc3MgPSByZWZfdmFsLmNvcHkoKTtcbiAgICAgICAgICBzb3VyY2VfYWNjZXNzLmFkZChuZXcgSW5kZXgodGhpcy5pbmRleCkpO1xuICAgICAgICAgIGE1ID0gbmV3IEFzc2lnbih0aGlzLm5hbWUsIHNvdXJjZV9hY2Nlc3MpO1xuICAgICAgICAgIHByZV9ib2R5LnVuc2hpZnQoYTUpO1xuICAgICAgICB9XG4gICAgICAgIGtleXNfYWNjZXNzID0ga2V5c192YWwuY29weSgpO1xuICAgICAgICBrZXlzX2FjY2Vzcy5hZGQobmV3IEluZGV4KGl2YWwpKTtcbiAgICAgICAgYTQgPSBuZXcgQXNzaWduKHRoaXMuaW5kZXgsIGtleXNfYWNjZXNzKTtcbiAgICAgICAgcHJlX2JvZHkudW5zaGlmdChhNCk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMucmFuZ2UpIHtcbiAgICAgICAgaWYgKCF0aGlzLm5hbWUpIHtcbiAgICAgICAgICB0aGlzLm5hbWUgPSBuZXcgTGl0ZXJhbChkLmt2YXIpO1xuICAgICAgICB9XG4gICAgICAgIGJlZ2luID0gbmV3IFZhbHVlKG5ldyBMaXRlcmFsKG8uc2NvcGUuZnJlZVZhcmlhYmxlKFwiYmVnaW5cIikpKTtcbiAgICAgICAgZW5kID0gbmV3IFZhbHVlKG5ldyBMaXRlcmFsKG8uc2NvcGUuZnJlZVZhcmlhYmxlKFwiZW5kXCIpKSk7XG4gICAgICAgIHBvc2l0aXZlID0gbmV3IFZhbHVlKG5ldyBMaXRlcmFsKG8uc2NvcGUuZnJlZVZhcmlhYmxlKFwicG9zaXRpdmVcIikpKTtcbiAgICAgICAgc3RlcFZhbCA9IG5ldyBWYWx1ZShuZXcgTGl0ZXJhbChvLnNjb3BlLmZyZWVWYXJpYWJsZShcInN0ZXBcIikpKTtcbiAgICAgICAgaWYgKHRoaXMuc3RlcCkge1xuICAgICAgICAgIGFfc3RlcFZhbCA9IG5ldyBBc3NpZ24oc3RlcFZhbCwgdGhpcy5zdGVwKTtcbiAgICAgICAgICBhX3Bvc2l0aXZlID0gbmV3IEFzc2lnbihwb3NpdGl2ZSwgbmV3IE9wKFwiPlwiLCBzdGVwVmFsLCBuZXcgTGl0ZXJhbCgwKSksIG51bGwsIHtcbiAgICAgICAgICAgIGljZWRsb2NhbDogdHJ1ZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlzX3Bvc2l0aXZlID0gbmV3IE9wKFwiPlwiLCBlbmQsIGJlZ2luKTtcbiAgICAgICAgICBhX3N0ZXBWYWwgPSBuZXcgSWYoaXNfcG9zaXRpdmUsIG5ldyBBc3NpZ24oc3RlcFZhbCwgbmV3IExpdGVyYWwoMSkpKTtcbiAgICAgICAgICBhX3N0ZXBWYWwuYWRkRWxzZShuZXcgQXNzaWduKHN0ZXBWYWwsIG5ldyBMaXRlcmFsKC0xKSkpO1xuICAgICAgICAgIGFfcG9zaXRpdmUgPSBuZXcgQXNzaWduKHBvc2l0aXZlLCBpc19wb3NpdGl2ZSwgbnVsbCwge1xuICAgICAgICAgICAgaWNlZGxvY2FsOiB0cnVlXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgc3RlcCA9IG5ldyBPcCgnKz0nLCB0aGlzLm5hbWUsIHN0ZXBWYWwpO1xuICAgICAgICBleGNsID0gdGhpcy5zb3VyY2UuYmFzZS5leGNsdXNpdmUgPyBcIj1cIiA6ICcnO1xuICAgICAgICBwb3MgPSBuZXcgT3AoXCImJlwiLCBuZXcgT3AoXCI9PT1cIiwgcG9zaXRpdmUsIG5ldyBMaXRlcmFsKHRydWUpKSwgbmV3IE9wKFwiPlwiICsgZXhjbCwgdGhpcy5uYW1lLCB0aGlzLnNvdXJjZS5iYXNlLnRvKSk7XG4gICAgICAgIG5lZyA9IG5ldyBPcChcIiYmXCIsIG5ldyBPcChcIj09PVwiLCBwb3NpdGl2ZSwgbmV3IExpdGVyYWwoZmFsc2UpKSwgbmV3IE9wKFwiPFwiICsgZXhjbCwgdGhpcy5uYW1lLCB0aGlzLnNvdXJjZS5iYXNlLnRvKSk7XG4gICAgICAgIGNvbmRpdGlvbiA9IG5ldyBPcChcInx8XCIsIG5ldyBQYXJlbnMocG9zKSwgbmV3IFBhcmVucyhuZWcpKTtcbiAgICAgICAgY29uZGl0aW9uID0gY29uZGl0aW9uLmludmVydCgpO1xuICAgICAgICBpbml0ID0gW1xuICAgICAgICAgIG5ldyBBc3NpZ24odGhpcy5uYW1lLCB0aGlzLnNvdXJjZS5iYXNlLmZyb20pLCBuZXcgQXNzaWduKGJlZ2luLCB0aGlzLnNvdXJjZS5iYXNlLmZyb20sIG51bGwsIHtcbiAgICAgICAgICAgIGljZWRsb2NhbDogdHJ1ZVxuICAgICAgICAgIH0pLCBuZXcgQXNzaWduKGVuZCwgdGhpcy5zb3VyY2UuYmFzZS50bywgbnVsbCwge1xuICAgICAgICAgICAgaWNlZGxvY2FsOiB0cnVlXG4gICAgICAgICAgfSksIGFfc3RlcFZhbCwgYV9wb3NpdGl2ZVxuICAgICAgICBdO1xuICAgICAgfSBlbHNlIGlmICghdGhpcy5yYW5nZSAmJiB0aGlzLm5hbWUpIHtcbiAgICAgICAga3ZhbCA9IG5ldyBWYWx1ZShuZXcgTGl0ZXJhbChkLmt2YXIpKTtcbiAgICAgICAgbGVuID0gc2NvcGUuZnJlZVZhcmlhYmxlKCdsZW4nKTtcbiAgICAgICAgcmVmID0gc2NvcGUuZnJlZVZhcmlhYmxlKCdyZWYnKTtcbiAgICAgICAgcmVmX3ZhbCA9IG5ldyBWYWx1ZShuZXcgTGl0ZXJhbChyZWYpKTtcbiAgICAgICAgbGVuX3ZhbCA9IG5ldyBWYWx1ZShuZXcgTGl0ZXJhbChsZW4pKTtcbiAgICAgICAgYTEgPSBuZXcgQXNzaWduKHJlZl92YWwsIHRoaXMuc291cmNlKTtcbiAgICAgICAgbGVuX3JocyA9IHJlZl92YWwuY29weSgpLmFkZChuZXcgQWNjZXNzKG5ldyBWYWx1ZShuZXcgTGl0ZXJhbChcImxlbmd0aFwiKSkpKTtcbiAgICAgICAgYTIgPSBuZXcgQXNzaWduKGxlbl92YWwsIGxlbl9yaHMpO1xuICAgICAgICBpbml0ID0gW2ExLCBhMl07XG4gICAgICAgIGlmICghdGhpcy5zdGVwKSB7XG4gICAgICAgICAgYTMgPSBuZXcgQXNzaWduKGt2YWwsIG5ldyBMaXRlcmFsKDApKTtcbiAgICAgICAgICBzdGVwID0gbmV3IE9wKCcrKycsIGt2YWwpO1xuICAgICAgICAgIGNvbmRpdGlvbiA9IG5ldyBPcCgnPCcsIGt2YWwsIGxlbl92YWwpO1xuICAgICAgICAgIGluaXQucHVzaChhMyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgX3JlZjIgPSB0aGlzLmNhY2hlVG9Db2RlRnJhZ21lbnRzKHRoaXMuc3RlcC5jYWNoZShvLCBMRVZFTF9MSVNUKSksIF8gPSBfcmVmMlswXSwgc3RlcFZhciA9IF9yZWYyWzFdO1xuICAgICAgICAgIHN0ZXBOdW0gPSBzdGVwVmFyLm1hdGNoKE5VTUJFUik7XG4gICAgICAgICAgaWYgKHN0ZXBOdW0pIHtcbiAgICAgICAgICAgIHN0ZXAgPSBuZXcgQXNzaWduKGt2YWwsIG5ldyBPcCgnKycsIGt2YWwsIHRoaXMuc3RlcCkpO1xuICAgICAgICAgICAgZG93biA9IHBhcnNlTnVtKHN0ZXBOdW1bMF0pIDwgMDtcbiAgICAgICAgICAgIGlmIChkb3duKSB7XG4gICAgICAgICAgICAgIGEzID0gbmV3IEFzc2lnbihrdmFsLCBuZXcgT3AoJy0nLCBsZW5fdmFsLCBuZXcgTGl0ZXJhbCgxKSkpO1xuICAgICAgICAgICAgICBjb25kaXRpb24gPSBuZXcgT3AoJz49Jywga3ZhbCwgbmV3IExpdGVyYWwoMCkpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgYTMgPSBuZXcgQXNzaWduKGt2YWwsIG5ldyBMaXRlcmFsKDApKTtcbiAgICAgICAgICAgICAgY29uZGl0aW9uID0gbmV3IE9wKCc8Jywga3ZhbCwgbGVuX3ZhbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpbml0LnB1c2goYTMpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzdGVwX3ZhciA9IHNjb3BlLmZyZWVWYXJpYWJsZSgnc3RlcCcpO1xuICAgICAgICAgICAgc3RlcF92YXJfdmFsID0gbmV3IFZhbHVlKG5ldyBMaXRlcmFsKHN0ZXBfdmFyKSk7XG4gICAgICAgICAgICBpbml0X3N0ZXAgPSBuZXcgQXNzaWduKHN0ZXBfdmFyX3ZhbCwgbmV3IFZhbHVlKHRoaXMuc3RlcCkpO1xuICAgICAgICAgICAgaXNfc3RlcF9wb3NpdGl2ZSA9IG5ldyBPcCgnPicsIHN0ZXBfdmFyX3ZhbCwgbmV3IExpdGVyYWwoMCkpO1xuICAgICAgICAgICAgc3RhcnRfcmhzID0gbmV3IElmKGlzX3N0ZXBfcG9zaXRpdmUsIG5ldyBWYWx1ZShuZXcgTGl0ZXJhbCgwKSkpO1xuICAgICAgICAgICAgc3RhcnRfcmhzLmFkZEVsc2UobmV3IE9wKCctJywgbGVuX3ZhbCwgbmV3IExpdGVyYWwoMSkpKTtcbiAgICAgICAgICAgIHN0ZXAgPSBuZXcgQXNzaWduKGt2YWwsIG5ldyBPcCgnKycsIGt2YWwsIHN0ZXBfdmFyX3ZhbCkpO1xuICAgICAgICAgICAgYTMgPSBuZXcgQXNzaWduKGt2YWwsIHN0YXJ0X3Jocyk7XG4gICAgICAgICAgICBjb25kaXRpb24gPSBuZXcgT3AoJyYmJywgbmV3IE9wKCc+PScsIGt2YWwsIG5ldyBMaXRlcmFsKDApKSwgbmV3IE9wKCc8Jywga3ZhbCwgbGVuX3ZhbCkpO1xuICAgICAgICAgICAgaW5pdC5wdXNoKGluaXRfc3RlcCwgYTMpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZWZfdmFsX2NvcHkgPSByZWZfdmFsLmNvcHkoKTtcbiAgICAgICAgcmVmX3ZhbF9jb3B5LmFkZChuZXcgSW5kZXgoa3ZhbCkpO1xuICAgICAgICBhNCA9IG5ldyBBc3NpZ24odGhpcy5uYW1lLCByZWZfdmFsX2NvcHkpO1xuICAgICAgICBwcmVfYm9keS51bnNoaWZ0KGE0KTtcbiAgICAgIH1cbiAgICAgIGd1YXJkID0gZC5ndWFyZDtcbiAgICAgIGIgPSB0aGlzLmljZWRXcmFwKHtcbiAgICAgICAgY29uZGl0aW9uOiBjb25kaXRpb24sXG4gICAgICAgIGJvZHk6IGJvZHksXG4gICAgICAgIGluaXQ6IGluaXQsXG4gICAgICAgIHN0ZXA6IHN0ZXAsXG4gICAgICAgIGd1YXJkOiBndWFyZCxcbiAgICAgICAgcHJlX2JvZHk6IHByZV9ib2R5XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBiLmNvbXBpbGVOb2RlKG8pO1xuICAgIH07XG5cbiAgICByZXR1cm4gRm9yO1xuXG4gIH0pKFdoaWxlKTtcblxuICBleHBvcnRzLlN3aXRjaCA9IFN3aXRjaCA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoU3dpdGNoLCBfc3VwZXIpO1xuXG4gICAgZnVuY3Rpb24gU3dpdGNoKHN1YmplY3QsIGNhc2VzLCBvdGhlcndpc2UpIHtcbiAgICAgIHRoaXMuc3ViamVjdCA9IHN1YmplY3Q7XG4gICAgICB0aGlzLmNhc2VzID0gY2FzZXM7XG4gICAgICB0aGlzLm90aGVyd2lzZSA9IG90aGVyd2lzZTtcbiAgICAgIFN3aXRjaC5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBTd2l0Y2gucHJvdG90eXBlLmNoaWxkcmVuID0gWydzdWJqZWN0JywgJ2Nhc2VzJywgJ290aGVyd2lzZSddO1xuXG4gICAgU3dpdGNoLnByb3RvdHlwZS5pc1N0YXRlbWVudCA9IFlFUztcblxuICAgIFN3aXRjaC5wcm90b3R5cGUuanVtcHMgPSBmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgYmxvY2ssIGNvbmRzLCBqdW1wTm9kZSwgX2ksIF9sZW4sIF9yZWYyLCBfcmVmMywgX3JlZjQ7XG4gICAgICBpZiAobyA9PSBudWxsKSB7XG4gICAgICAgIG8gPSB7XG4gICAgICAgICAgYmxvY2s6IHRydWVcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIF9yZWYyID0gdGhpcy5jYXNlcztcbiAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZjIubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgX3JlZjMgPSBfcmVmMltfaV0sIGNvbmRzID0gX3JlZjNbMF0sIGJsb2NrID0gX3JlZjNbMV07XG4gICAgICAgIGlmIChqdW1wTm9kZSA9IGJsb2NrLmp1bXBzKG8pKSB7XG4gICAgICAgICAgcmV0dXJuIGp1bXBOb2RlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gKF9yZWY0ID0gdGhpcy5vdGhlcndpc2UpICE9IG51bGwgPyBfcmVmNC5qdW1wcyhvKSA6IHZvaWQgMDtcbiAgICB9O1xuXG4gICAgU3dpdGNoLnByb3RvdHlwZS5tYWtlUmV0dXJuID0gZnVuY3Rpb24ocmVzKSB7XG4gICAgICB2YXIgcGFpciwgX2ksIF9sZW4sIF9yZWYyLCBfcmVmMztcbiAgICAgIF9yZWYyID0gdGhpcy5jYXNlcztcbiAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZjIubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgcGFpciA9IF9yZWYyW19pXTtcbiAgICAgICAgcGFpclsxXS5tYWtlUmV0dXJuKHJlcyk7XG4gICAgICB9XG4gICAgICBpZiAocmVzKSB7XG4gICAgICAgIHRoaXMub3RoZXJ3aXNlIHx8ICh0aGlzLm90aGVyd2lzZSA9IG5ldyBCbG9jayhbbmV3IExpdGVyYWwoJ3ZvaWQgMCcpXSkpO1xuICAgICAgfVxuICAgICAgaWYgKChfcmVmMyA9IHRoaXMub3RoZXJ3aXNlKSAhPSBudWxsKSB7XG4gICAgICAgIF9yZWYzLm1ha2VSZXR1cm4ocmVzKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBTd2l0Y2gucHJvdG90eXBlLmNvbXBpbGVOb2RlID0gZnVuY3Rpb24obykge1xuICAgICAgdmFyIGJsb2NrLCBib2R5LCBjb25kLCBjb25kaXRpb25zLCBleHByLCBmcmFnbWVudHMsIGksIGlkdDEsIGlkdDIsIF9pLCBfaiwgX2xlbiwgX2xlbjEsIF9yZWYyLCBfcmVmMywgX3JlZjQ7XG4gICAgICBpZiAodGhpcy5zdWJqZWN0KSB7XG4gICAgICAgIHRoaXMuc3ViamVjdC5pY2VkU3RhdGVtZW50QXNzZXJ0aW9uKCk7XG4gICAgICB9XG4gICAgICBpZHQxID0gby5pbmRlbnQgKyBUQUI7XG4gICAgICBpZHQyID0gby5pbmRlbnQgPSBpZHQxICsgVEFCO1xuICAgICAgZnJhZ21lbnRzID0gW10uY29uY2F0KHRoaXMubWFrZUNvZGUodGhpcy50YWIgKyBcInN3aXRjaCAoXCIpLCAodGhpcy5zdWJqZWN0ID8gdGhpcy5zdWJqZWN0LmNvbXBpbGVUb0ZyYWdtZW50cyhvLCBMRVZFTF9QQVJFTikgOiB0aGlzLm1ha2VDb2RlKFwiZmFsc2VcIikpLCB0aGlzLm1ha2VDb2RlKFwiKSB7XFxuXCIpKTtcbiAgICAgIF9yZWYyID0gdGhpcy5jYXNlcztcbiAgICAgIGZvciAoaSA9IF9pID0gMCwgX2xlbiA9IF9yZWYyLmxlbmd0aDsgX2kgPCBfbGVuOyBpID0gKytfaSkge1xuICAgICAgICBfcmVmMyA9IF9yZWYyW2ldLCBjb25kaXRpb25zID0gX3JlZjNbMF0sIGJsb2NrID0gX3JlZjNbMV07XG4gICAgICAgIF9yZWY0ID0gZmxhdHRlbihbY29uZGl0aW9uc10pO1xuICAgICAgICBmb3IgKF9qID0gMCwgX2xlbjEgPSBfcmVmNC5sZW5ndGg7IF9qIDwgX2xlbjE7IF9qKyspIHtcbiAgICAgICAgICBjb25kID0gX3JlZjRbX2pdO1xuICAgICAgICAgIGlmICghdGhpcy5zdWJqZWN0KSB7XG4gICAgICAgICAgICBjb25kID0gY29uZC5pbnZlcnQoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZnJhZ21lbnRzID0gZnJhZ21lbnRzLmNvbmNhdCh0aGlzLm1ha2VDb2RlKGlkdDEgKyBcImNhc2UgXCIpLCBjb25kLmNvbXBpbGVUb0ZyYWdtZW50cyhvLCBMRVZFTF9QQVJFTiksIHRoaXMubWFrZUNvZGUoXCI6XFxuXCIpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoKGJvZHkgPSBibG9jay5jb21waWxlVG9GcmFnbWVudHMobywgTEVWRUxfVE9QKSkubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGZyYWdtZW50cyA9IGZyYWdtZW50cy5jb25jYXQoYm9keSwgdGhpcy5tYWtlQ29kZSgnXFxuJykpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpID09PSB0aGlzLmNhc2VzLmxlbmd0aCAtIDEgJiYgIXRoaXMub3RoZXJ3aXNlKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgZXhwciA9IHRoaXMubGFzdE5vbkNvbW1lbnQoYmxvY2suZXhwcmVzc2lvbnMpO1xuICAgICAgICBpZiAoZXhwciBpbnN0YW5jZW9mIFJldHVybiB8fCAoZXhwciBpbnN0YW5jZW9mIExpdGVyYWwgJiYgZXhwci5qdW1wcygpICYmIGV4cHIudmFsdWUgIT09ICdkZWJ1Z2dlcicpKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgZnJhZ21lbnRzLnB1c2goY29uZC5tYWtlQ29kZShpZHQyICsgJ2JyZWFrO1xcbicpKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLm90aGVyd2lzZSAmJiB0aGlzLm90aGVyd2lzZS5leHByZXNzaW9ucy5sZW5ndGgpIHtcbiAgICAgICAgZnJhZ21lbnRzLnB1c2guYXBwbHkoZnJhZ21lbnRzLCBbdGhpcy5tYWtlQ29kZShpZHQxICsgXCJkZWZhdWx0OlxcblwiKV0uY29uY2F0KF9fc2xpY2UuY2FsbCh0aGlzLm90aGVyd2lzZS5jb21waWxlVG9GcmFnbWVudHMobywgTEVWRUxfVE9QKSksIFt0aGlzLm1ha2VDb2RlKFwiXFxuXCIpXSkpO1xuICAgICAgfVxuICAgICAgZnJhZ21lbnRzLnB1c2godGhpcy5tYWtlQ29kZSh0aGlzLnRhYiArICd9JykpO1xuICAgICAgcmV0dXJuIGZyYWdtZW50cztcbiAgICB9O1xuXG4gICAgU3dpdGNoLnByb3RvdHlwZS5pY2VkQ2FsbENvbnRpbnVhdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGJsb2NrLCBjb25kaXRpb24sIF9pLCBfbGVuLCBfcmVmMiwgX3JlZjM7XG4gICAgICBfcmVmMiA9IHRoaXMuY2FzZXM7XG4gICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYyLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICAgIF9yZWYzID0gX3JlZjJbX2ldLCBjb25kaXRpb24gPSBfcmVmM1swXSwgYmxvY2sgPSBfcmVmM1sxXTtcbiAgICAgICAgYmxvY2suaWNlZFRocmVhZFJldHVybigpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMub3RoZXJ3aXNlICE9IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3RoZXJ3aXNlLmljZWRUaHJlYWRSZXR1cm4oKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0aGlzLm90aGVyd2lzZSA9IG5ldyBCbG9jayhbbmV3IEljZWRUYWlsQ2FsbF0pO1xuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gU3dpdGNoO1xuXG4gIH0pKEJhc2UpO1xuXG4gIGV4cG9ydHMuSWYgPSBJZiA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoSWYsIF9zdXBlcik7XG5cbiAgICBmdW5jdGlvbiBJZihjb25kaXRpb24sIGJvZHksIG9wdGlvbnMpIHtcbiAgICAgIHRoaXMuYm9keSA9IGJvZHk7XG4gICAgICBpZiAob3B0aW9ucyA9PSBudWxsKSB7XG4gICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgIH1cbiAgICAgIElmLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO1xuICAgICAgdGhpcy5jb25kaXRpb24gPSBvcHRpb25zLnR5cGUgPT09ICd1bmxlc3MnID8gY29uZGl0aW9uLmludmVydCgpIDogY29uZGl0aW9uO1xuICAgICAgdGhpcy5lbHNlQm9keSA9IG51bGw7XG4gICAgICB0aGlzLmlzQ2hhaW4gPSBmYWxzZTtcbiAgICAgIHRoaXMuc29hayA9IG9wdGlvbnMuc29haztcbiAgICB9XG5cbiAgICBJZi5wcm90b3R5cGUuY2hpbGRyZW4gPSBbJ2NvbmRpdGlvbicsICdib2R5JywgJ2Vsc2VCb2R5J107XG5cbiAgICBJZi5wcm90b3R5cGUuYm9keU5vZGUgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBfcmVmMjtcbiAgICAgIHJldHVybiAoX3JlZjIgPSB0aGlzLmJvZHkpICE9IG51bGwgPyBfcmVmMi51bndyYXAoKSA6IHZvaWQgMDtcbiAgICB9O1xuXG4gICAgSWYucHJvdG90eXBlLmVsc2VCb2R5Tm9kZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIF9yZWYyO1xuICAgICAgcmV0dXJuIChfcmVmMiA9IHRoaXMuZWxzZUJvZHkpICE9IG51bGwgPyBfcmVmMi51bndyYXAoKSA6IHZvaWQgMDtcbiAgICB9O1xuXG4gICAgSWYucHJvdG90eXBlLmFkZEVsc2UgPSBmdW5jdGlvbihlbHNlQm9keSkge1xuICAgICAgaWYgKHRoaXMuaXNDaGFpbikge1xuICAgICAgICB0aGlzLmVsc2VCb2R5Tm9kZSgpLmFkZEVsc2UoZWxzZUJvZHkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5pc0NoYWluID0gZWxzZUJvZHkgaW5zdGFuY2VvZiBJZjtcbiAgICAgICAgdGhpcy5lbHNlQm9keSA9IHRoaXMuZW5zdXJlQmxvY2soZWxzZUJvZHkpO1xuICAgICAgICB0aGlzLmVsc2VCb2R5LnVwZGF0ZUxvY2F0aW9uRGF0YUlmTWlzc2luZyhlbHNlQm9keS5sb2NhdGlvbkRhdGEpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIElmLnByb3RvdHlwZS5pc1N0YXRlbWVudCA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBfcmVmMjtcbiAgICAgIHJldHVybiAobyAhPSBudWxsID8gby5sZXZlbCA6IHZvaWQgMCkgPT09IExFVkVMX1RPUCB8fCB0aGlzLmJvZHlOb2RlKCkuaXNTdGF0ZW1lbnQobykgfHwgKChfcmVmMiA9IHRoaXMuZWxzZUJvZHlOb2RlKCkpICE9IG51bGwgPyBfcmVmMi5pc1N0YXRlbWVudChvKSA6IHZvaWQgMCk7XG4gICAgfTtcblxuICAgIElmLnByb3RvdHlwZS5qdW1wcyA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBfcmVmMjtcbiAgICAgIHJldHVybiB0aGlzLmJvZHkuanVtcHMobykgfHwgKChfcmVmMiA9IHRoaXMuZWxzZUJvZHkpICE9IG51bGwgPyBfcmVmMi5qdW1wcyhvKSA6IHZvaWQgMCk7XG4gICAgfTtcblxuICAgIElmLnByb3RvdHlwZS5jb21waWxlTm9kZSA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHRoaXMuY29uZGl0aW9uLmljZWRTdGF0ZW1lbnRBc3NlcnRpb24oKTtcbiAgICAgIGlmICh0aGlzLmlzU3RhdGVtZW50KG8gfHwgdGhpcy5pY2VkSXNDcHNQaXZvdCgpKSkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb21waWxlU3RhdGVtZW50KG8pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcGlsZUV4cHJlc3Npb24obyk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIElmLnByb3RvdHlwZS5tYWtlUmV0dXJuID0gZnVuY3Rpb24ocmVzKSB7XG4gICAgICBpZiAocmVzKSB7XG4gICAgICAgIHRoaXMuZWxzZUJvZHkgfHwgKHRoaXMuZWxzZUJvZHkgPSBuZXcgQmxvY2soW25ldyBMaXRlcmFsKCd2b2lkIDAnKV0pKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuYm9keSAmJiAodGhpcy5ib2R5ID0gbmV3IEJsb2NrKFt0aGlzLmJvZHkubWFrZVJldHVybihyZXMpXSkpO1xuICAgICAgdGhpcy5lbHNlQm9keSAmJiAodGhpcy5lbHNlQm9keSA9IG5ldyBCbG9jayhbdGhpcy5lbHNlQm9keS5tYWtlUmV0dXJuKHJlcyldKSk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgSWYucHJvdG90eXBlLmVuc3VyZUJsb2NrID0gZnVuY3Rpb24obm9kZSkge1xuICAgICAgaWYgKG5vZGUgaW5zdGFuY2VvZiBCbG9jaykge1xuICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBuZXcgQmxvY2soW25vZGVdKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgSWYucHJvdG90eXBlLmNvbXBpbGVTdGF0ZW1lbnQgPSBmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgYW5zd2VyLCBib2R5LCBjaGlsZCwgY29uZCwgZXhlcSwgaWZQYXJ0LCBpbmRlbnQ7XG4gICAgICBjaGlsZCA9IGRlbChvLCAnY2hhaW5DaGlsZCcpO1xuICAgICAgZXhlcSA9IGRlbChvLCAnaXNFeGlzdGVudGlhbEVxdWFscycpO1xuICAgICAgaWYgKGV4ZXEpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBJZih0aGlzLmNvbmRpdGlvbi5pbnZlcnQoKSwgdGhpcy5lbHNlQm9keU5vZGUoKSwge1xuICAgICAgICAgIHR5cGU6ICdpZidcbiAgICAgICAgfSkuY29tcGlsZVRvRnJhZ21lbnRzKG8pO1xuICAgICAgfVxuICAgICAgaW5kZW50ID0gby5pbmRlbnQgKyBUQUI7XG4gICAgICBjb25kID0gdGhpcy5jb25kaXRpb24uY29tcGlsZVRvRnJhZ21lbnRzKG8sIExFVkVMX1BBUkVOKTtcbiAgICAgIGJvZHkgPSB0aGlzLmVuc3VyZUJsb2NrKHRoaXMuYm9keSkuY29tcGlsZVRvRnJhZ21lbnRzKG1lcmdlKG8sIHtcbiAgICAgICAgaW5kZW50OiBpbmRlbnRcbiAgICAgIH0pKTtcbiAgICAgIGlmUGFydCA9IFtdLmNvbmNhdCh0aGlzLm1ha2VDb2RlKFwiaWYgKFwiKSwgY29uZCwgdGhpcy5tYWtlQ29kZShcIikge1xcblwiKSwgYm9keSwgdGhpcy5tYWtlQ29kZShcIlxcblwiICsgdGhpcy50YWIgKyBcIn1cIikpO1xuICAgICAgaWYgKCFjaGlsZCkge1xuICAgICAgICBpZlBhcnQudW5zaGlmdCh0aGlzLm1ha2VDb2RlKHRoaXMudGFiKSk7XG4gICAgICB9XG4gICAgICBpZiAoIXRoaXMuZWxzZUJvZHkpIHtcbiAgICAgICAgcmV0dXJuIGlmUGFydDtcbiAgICAgIH1cbiAgICAgIGFuc3dlciA9IGlmUGFydC5jb25jYXQodGhpcy5tYWtlQ29kZSgnIGVsc2UgJykpO1xuICAgICAgaWYgKHRoaXMuaXNDaGFpbikge1xuICAgICAgICBvLmNoYWluQ2hpbGQgPSB0cnVlO1xuICAgICAgICBhbnN3ZXIgPSBhbnN3ZXIuY29uY2F0KHRoaXMuZWxzZUJvZHkudW53cmFwKCkuY29tcGlsZVRvRnJhZ21lbnRzKG8sIExFVkVMX1RPUCkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYW5zd2VyID0gYW5zd2VyLmNvbmNhdCh0aGlzLm1ha2VDb2RlKFwie1xcblwiKSwgdGhpcy5lbHNlQm9keS5jb21waWxlVG9GcmFnbWVudHMobWVyZ2Uobywge1xuICAgICAgICAgIGluZGVudDogaW5kZW50XG4gICAgICAgIH0pLCBMRVZFTF9UT1ApLCB0aGlzLm1ha2VDb2RlKFwiXFxuXCIgKyB0aGlzLnRhYiArIFwifVwiKSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gYW5zd2VyO1xuICAgIH07XG5cbiAgICBJZi5wcm90b3R5cGUuY29tcGlsZUV4cHJlc3Npb24gPSBmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgYWx0LCBib2R5LCBjb25kLCBmcmFnbWVudHM7XG4gICAgICBjb25kID0gdGhpcy5jb25kaXRpb24uY29tcGlsZVRvRnJhZ21lbnRzKG8sIExFVkVMX0NPTkQpO1xuICAgICAgYm9keSA9IHRoaXMuYm9keU5vZGUoKS5jb21waWxlVG9GcmFnbWVudHMobywgTEVWRUxfTElTVCk7XG4gICAgICBhbHQgPSB0aGlzLmVsc2VCb2R5Tm9kZSgpID8gdGhpcy5lbHNlQm9keU5vZGUoKS5jb21waWxlVG9GcmFnbWVudHMobywgTEVWRUxfTElTVCkgOiBbdGhpcy5tYWtlQ29kZSgndm9pZCAwJyldO1xuICAgICAgZnJhZ21lbnRzID0gY29uZC5jb25jYXQodGhpcy5tYWtlQ29kZShcIiA/IFwiKSwgYm9keSwgdGhpcy5tYWtlQ29kZShcIiA6IFwiKSwgYWx0KTtcbiAgICAgIGlmIChvLmxldmVsID49IExFVkVMX0NPTkQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud3JhcEluQnJhY2VzKGZyYWdtZW50cyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZnJhZ21lbnRzO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBJZi5wcm90b3R5cGUudW5mb2xkU29hayA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMuc29hayAmJiB0aGlzO1xuICAgIH07XG5cbiAgICBJZi5wcm90b3R5cGUuaWNlZENhbGxDb250aW51YXRpb24gPSBmdW5jdGlvbigpIHtcbiAgICAgIGlmICh0aGlzLmVsc2VCb2R5KSB7XG4gICAgICAgIHRoaXMuZWxzZUJvZHkuaWNlZFRocmVhZFJldHVybigpO1xuICAgICAgICB0aGlzLmlzQ2hhaW4gPSBmYWxzZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuYWRkRWxzZShuZXcgSWNlZFRhaWxDYWxsKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLmJvZHkuaWNlZFRocmVhZFJldHVybigpO1xuICAgIH07XG5cbiAgICByZXR1cm4gSWY7XG5cbiAgfSkoQmFzZSk7XG5cbiAgQ2xvc3VyZSA9IHtcbiAgICB3cmFwOiBmdW5jdGlvbihleHByZXNzaW9ucywgc3RhdGVtZW50LCBub1JldHVybikge1xuICAgICAgdmFyIGFyZ3MsIGFyZ3VtZW50c05vZGUsIGNhbGwsIGZ1bmMsIG1ldGg7XG4gICAgICBpZiAoZXhwcmVzc2lvbnMuanVtcHMoKSkge1xuICAgICAgICByZXR1cm4gZXhwcmVzc2lvbnM7XG4gICAgICB9XG4gICAgICBmdW5jID0gbmV3IENvZGUoW10sIEJsb2NrLndyYXAoW2V4cHJlc3Npb25zXSkpO1xuICAgICAgYXJncyA9IFtdO1xuICAgICAgYXJndW1lbnRzTm9kZSA9IGV4cHJlc3Npb25zLmNvbnRhaW5zKHRoaXMuaXNMaXRlcmFsQXJndW1lbnRzKTtcbiAgICAgIGlmIChhcmd1bWVudHNOb2RlICYmIGV4cHJlc3Npb25zLmNsYXNzQm9keSkge1xuICAgICAgICBhcmd1bWVudHNOb2RlLmVycm9yKFwiQ2xhc3MgYm9kaWVzIHNob3VsZG4ndCByZWZlcmVuY2UgYXJndW1lbnRzXCIpO1xuICAgICAgfVxuICAgICAgaWYgKGFyZ3VtZW50c05vZGUgfHwgZXhwcmVzc2lvbnMuY29udGFpbnModGhpcy5pc0xpdGVyYWxUaGlzKSkge1xuICAgICAgICBtZXRoID0gbmV3IExpdGVyYWwoYXJndW1lbnRzTm9kZSA/ICdhcHBseScgOiAnY2FsbCcpO1xuICAgICAgICBhcmdzID0gW25ldyBMaXRlcmFsKCd0aGlzJyldO1xuICAgICAgICBpZiAoYXJndW1lbnRzTm9kZSkge1xuICAgICAgICAgIGFyZ3MucHVzaChuZXcgTGl0ZXJhbCgnYXJndW1lbnRzJykpO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmMgPSBuZXcgVmFsdWUoZnVuYywgW25ldyBBY2Nlc3MobWV0aCldKTtcbiAgICAgIH1cbiAgICAgIGZ1bmMubm9SZXR1cm4gPSBub1JldHVybjtcbiAgICAgIGNhbGwgPSBuZXcgQ2FsbChmdW5jLCBhcmdzKTtcbiAgICAgIGlmIChzdGF0ZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIEJsb2NrLndyYXAoW2NhbGxdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBjYWxsO1xuICAgICAgfVxuICAgIH0sXG4gICAgaXNMaXRlcmFsQXJndW1lbnRzOiBmdW5jdGlvbihub2RlKSB7XG4gICAgICByZXR1cm4gbm9kZSBpbnN0YW5jZW9mIExpdGVyYWwgJiYgbm9kZS52YWx1ZSA9PT0gJ2FyZ3VtZW50cycgJiYgIW5vZGUuYXNLZXk7XG4gICAgfSxcbiAgICBpc0xpdGVyYWxUaGlzOiBmdW5jdGlvbihub2RlKSB7XG4gICAgICByZXR1cm4gKG5vZGUgaW5zdGFuY2VvZiBMaXRlcmFsICYmIG5vZGUudmFsdWUgPT09ICd0aGlzJyAmJiAhbm9kZS5hc0tleSkgfHwgKG5vZGUgaW5zdGFuY2VvZiBDb2RlICYmIG5vZGUuYm91bmQpIHx8IChub2RlIGluc3RhbmNlb2YgQ2FsbCAmJiBub2RlLmlzU3VwZXIpO1xuICAgIH1cbiAgfTtcblxuICB1bmZvbGRTb2FrID0gZnVuY3Rpb24obywgcGFyZW50LCBuYW1lKSB7XG4gICAgdmFyIGlmbjtcbiAgICBpZiAoIShpZm4gPSBwYXJlbnRbbmFtZV0udW5mb2xkU29hayhvKSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgcGFyZW50W25hbWVdID0gaWZuLmJvZHk7XG4gICAgaWZuLmJvZHkgPSBuZXcgVmFsdWUocGFyZW50KTtcbiAgICByZXR1cm4gaWZuO1xuICB9O1xuXG4gIENwc0Nhc2NhZGUgPSB7XG4gICAgd3JhcDogZnVuY3Rpb24oc3RhdGVtZW50LCByZXN0LCByZXR1cm5WYWx1ZSwgbykge1xuICAgICAgdmFyIGFyZ3MsIGJsb2NrLCBjYWxsLCBjb250LCBlLCBmdW5jO1xuICAgICAgZnVuYyA9IG5ldyBDb2RlKFtuZXcgUGFyYW0obmV3IExpdGVyYWwoaWNlZFtcImNvbnN0XCJdLmspKV0sIEJsb2NrLndyYXAoW3N0YXRlbWVudF0pLCAnaWNlZGdlbicpO1xuICAgICAgYXJncyA9IFtdO1xuICAgICAgaWYgKHJldHVyblZhbHVlKSB7XG4gICAgICAgIHJldHVyblZhbHVlLmJpbmROYW1lKG8pO1xuICAgICAgICBhcmdzLnB1c2gocmV0dXJuVmFsdWUpO1xuICAgICAgfVxuICAgICAgYmxvY2sgPSBCbG9jay53cmFwKFtyZXN0XSk7XG4gICAgICBpZiAoKGUgPSBibG9jay5pY2VkR2V0U2luZ2xlKCkpICYmIGUgaW5zdGFuY2VvZiBJY2VkVGFpbENhbGwgJiYgZS5jYW5JbmxpbmUoKSkge1xuICAgICAgICBjb250ID0gZS5leHRyYWN0RnVuYygpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29udCA9IG5ldyBDb2RlKGFyZ3MsIGJsb2NrLCAnaWNlZGdlbicpO1xuICAgICAgfVxuICAgICAgY2FsbCA9IG5ldyBDYWxsKGZ1bmMsIFtjb250XSk7XG4gICAgICByZXR1cm4gbmV3IEJsb2NrKFtjYWxsXSk7XG4gICAgfVxuICB9O1xuXG4gIEljZWRUYWlsQ2FsbCA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoSWNlZFRhaWxDYWxsLCBfc3VwZXIpO1xuXG4gICAgZnVuY3Rpb24gSWNlZFRhaWxDYWxsKGZ1bmMsIHZhbCkge1xuICAgICAgdGhpcy5mdW5jID0gZnVuYztcbiAgICAgIGlmICh2YWwgPT0gbnVsbCkge1xuICAgICAgICB2YWwgPSBudWxsO1xuICAgICAgfVxuICAgICAgSWNlZFRhaWxDYWxsLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO1xuICAgICAgaWYgKCF0aGlzLmZ1bmMpIHtcbiAgICAgICAgdGhpcy5mdW5jID0gaWNlZFtcImNvbnN0XCJdLms7XG4gICAgICB9XG4gICAgICB0aGlzLnZhbHVlID0gdmFsO1xuICAgIH1cblxuICAgIEljZWRUYWlsQ2FsbC5wcm90b3R5cGUuY2hpbGRyZW4gPSBbJ3ZhbHVlJ107XG5cbiAgICBJY2VkVGFpbENhbGwucHJvdG90eXBlLmFzc2lnblZhbHVlID0gZnVuY3Rpb24odikge1xuICAgICAgcmV0dXJuIHRoaXMudmFsdWUgPSB2O1xuICAgIH07XG5cbiAgICBJY2VkVGFpbENhbGwucHJvdG90eXBlLmNhbklubGluZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuICF0aGlzLnZhbHVlIHx8IHRoaXMudmFsdWUgaW5zdGFuY2VvZiBJY2VkUmV0dXJuVmFsdWU7XG4gICAgfTtcblxuICAgIEljZWRUYWlsQ2FsbC5wcm90b3R5cGUubGl0ZXJhbEZ1bmMgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBuZXcgTGl0ZXJhbCh0aGlzLmZ1bmMpO1xuICAgIH07XG5cbiAgICBJY2VkVGFpbENhbGwucHJvdG90eXBlLmV4dHJhY3RGdW5jID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gbmV3IFZhbHVlKHRoaXMubGl0ZXJhbEZ1bmMoKSk7XG4gICAgfTtcblxuICAgIEljZWRUYWlsQ2FsbC5wcm90b3R5cGUuY29tcGlsZU5vZGUgPSBmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgYXJncywgZiwgb3V0O1xuICAgICAgZiA9IHRoaXMubGl0ZXJhbEZ1bmMoKTtcbiAgICAgIG91dCA9IG8ubGV2ZWwgPT09IExFVkVMX1RPUCA/IHRoaXMudmFsdWUgPyBuZXcgQmxvY2soW3RoaXMudmFsdWUsIG5ldyBDYWxsKGYpXSkgOiBuZXcgQ2FsbChmKSA6IChhcmdzID0gdGhpcy52YWx1ZSA/IFt0aGlzLnZhbHVlXSA6IFtdLCBuZXcgQ2FsbChmLCBhcmdzKSk7XG4gICAgICByZXR1cm4gb3V0LmNvbXBpbGVOb2RlKG8pO1xuICAgIH07XG5cbiAgICByZXR1cm4gSWNlZFRhaWxDYWxsO1xuXG4gIH0pKEJhc2UpO1xuXG4gIEljZWRSZXR1cm5WYWx1ZSA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoSWNlZFJldHVyblZhbHVlLCBfc3VwZXIpO1xuXG4gICAgSWNlZFJldHVyblZhbHVlLmNvdW50ZXIgPSAwO1xuXG4gICAgZnVuY3Rpb24gSWNlZFJldHVyblZhbHVlKCkge1xuICAgICAgSWNlZFJldHVyblZhbHVlLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsIG51bGwsIG51bGwsIGZhbHNlKTtcbiAgICB9XG5cbiAgICBJY2VkUmV0dXJuVmFsdWUucHJvdG90eXBlLmJpbmROYW1lID0gZnVuY3Rpb24obykge1xuICAgICAgdmFyIGw7XG4gICAgICBsID0gXCJcIiArIChvLnNjb3BlLmZyZWVWYXJpYWJsZShpY2VkW1wiY29uc3RcIl0ucGFyYW0sIGZhbHNlKSkgKyBcIl9cIiArIChJY2VkUmV0dXJuVmFsdWUuY291bnRlcisrKTtcbiAgICAgIHJldHVybiB0aGlzLm5hbWUgPSBuZXcgTGl0ZXJhbChsKTtcbiAgICB9O1xuXG4gICAgSWNlZFJldHVyblZhbHVlLnByb3RvdHlwZS5jb21waWxlID0gZnVuY3Rpb24obykge1xuICAgICAgaWYgKCF0aGlzLm5hbWUpIHtcbiAgICAgICAgdGhpcy5iaW5kTmFtZShvKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBJY2VkUmV0dXJuVmFsdWUuX19zdXBlcl9fLmNvbXBpbGUuY2FsbCh0aGlzLCBvKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEljZWRSZXR1cm5WYWx1ZTtcblxuICB9KShQYXJhbSk7XG5cbiAgSW5saW5lUnVudGltZSA9IHtcbiAgICBnZW5lcmF0ZTogZnVuY3Rpb24obnNfd2luZG93KSB7XG4gICAgICB2YXIgYTEsIGEyLCBhZiwgYXBwbHlfY2FsbCwgYXNzaWdubWVudHMsIGJvZHksIGNhbGxfbWV0aCwgY24sIGNudCwgY250X21lbWJlciwgY29uc3RydWN0b3JfYXNzaWduLCBjb25zdHJ1Y3Rvcl9ib2R5LCBjb25zdHJ1Y3Rvcl9jb2RlLCBjb25zdHJ1Y3Rvcl9uYW1lLCBjb25zdHJ1Y3Rvcl9wYXJhbXMsIGRlY3IsIGRlZmVyX2Fzc2lnbiwgZGVmZXJfYm9keSwgZGVmZXJfY29kZSwgZGVmZXJfbmFtZSwgZGVmZXJfcGFyYW1zLCBkcCwgZHBfdmFsdWUsIGZuLCBmbl9hc3NpZ24sIGZuX2NvZGUsIGZuX25hbWUsIGlmX2JvZHksIGlmX2NvbmQsIGlmX2V4cHIsIGluYywgaW5uZXJfYm9keSwgaW5uZXJfY29kZSwgaW5uZXJfcGFyYW1zLCBpcCwgaywga19tZW1iZXIsIGtsYXNzLCBrbGFzc19hc3NpZ24sIG15X2FwcGx5LCBteV9pZiwgbXlfbnVsbCwgbnMsIG5zX29iaiwgbnNfdmFsLCBvYmosIG91dGVyX2Jsb2NrLCBwMSwgcmV0X21lbWJlciwgdHJfYXNzaWduLCB0cl9ibG9jaywgdHJfY29kZSwgdHJfbmFtZSwgdHJfcGFyYW1zLCBfZnVsZmlsbF9hc3NpZ24sIF9mdWxmaWxsX2JvZHksIF9mdWxmaWxsX2NhbGwsIF9mdWxmaWxsX2NvZGUsIF9mdWxmaWxsX21ldGhvZCwgX2Z1bGZpbGxfbmFtZTtcbiAgICAgIGsgPSBuZXcgTGl0ZXJhbChcImNvbnRpbnVhdGlvblwiKTtcbiAgICAgIGNudCA9IG5ldyBMaXRlcmFsKFwiY291bnRcIik7XG4gICAgICBjbiA9IG5ldyBWYWx1ZShuZXcgTGl0ZXJhbChpY2VkW1wiY29uc3RcIl0uRGVmZXJyYWxzKSk7XG4gICAgICBucyA9IG5ldyBWYWx1ZShuZXcgTGl0ZXJhbChpY2VkW1wiY29uc3RcIl0ubnMpKTtcbiAgICAgIGlmIChuc193aW5kb3cpIHtcbiAgICAgICAgbnNfd2luZG93LmFkZChuZXcgQWNjZXNzKG5zKSk7XG4gICAgICAgIG5zID0gbnNfd2luZG93O1xuICAgICAgfVxuICAgICAga19tZW1iZXIgPSBuZXcgVmFsdWUobmV3IExpdGVyYWwoXCJ0aGlzXCIpKTtcbiAgICAgIGtfbWVtYmVyLmFkZChuZXcgQWNjZXNzKGspKTtcbiAgICAgIHAxID0gbmV3IFBhcmFtKGtfbWVtYmVyKTtcbiAgICAgIGNudF9tZW1iZXIgPSBuZXcgVmFsdWUobmV3IExpdGVyYWwoXCJ0aGlzXCIpKTtcbiAgICAgIGNudF9tZW1iZXIuYWRkKG5ldyBBY2Nlc3MoY250KSk7XG4gICAgICByZXRfbWVtYmVyID0gbmV3IFZhbHVlKG5ldyBMaXRlcmFsKFwidGhpc1wiKSk7XG4gICAgICByZXRfbWVtYmVyLmFkZChuZXcgQWNjZXNzKG5ldyBWYWx1ZShuZXcgTGl0ZXJhbChpY2VkW1wiY29uc3RcIl0ucmV0c2xvdCkpKSk7XG4gICAgICBhMSA9IG5ldyBBc3NpZ24oY250X21lbWJlciwgbmV3IFZhbHVlKG5ldyBMaXRlcmFsKDEpKSk7XG4gICAgICBhMiA9IG5ldyBBc3NpZ24ocmV0X21lbWJlciwgTlVMTCgpKTtcbiAgICAgIGNvbnN0cnVjdG9yX3BhcmFtcyA9IFtwMV07XG4gICAgICBjb25zdHJ1Y3Rvcl9ib2R5ID0gbmV3IEJsb2NrKFthMSwgYTJdKTtcbiAgICAgIGNvbnN0cnVjdG9yX2NvZGUgPSBuZXcgQ29kZShjb25zdHJ1Y3Rvcl9wYXJhbXMsIGNvbnN0cnVjdG9yX2JvZHkpO1xuICAgICAgY29uc3RydWN0b3JfbmFtZSA9IG5ldyBWYWx1ZShuZXcgTGl0ZXJhbChcImNvbnN0cnVjdG9yXCIpKTtcbiAgICAgIGNvbnN0cnVjdG9yX2Fzc2lnbiA9IG5ldyBBc3NpZ24oY29uc3RydWN0b3JfbmFtZSwgY29uc3RydWN0b3JfY29kZSk7XG4gICAgICBpZl9leHByID0gbmV3IENhbGwoa19tZW1iZXIsIFtyZXRfbWVtYmVyXSk7XG4gICAgICBpZl9ib2R5ID0gbmV3IEJsb2NrKFtpZl9leHByXSk7XG4gICAgICBkZWNyID0gbmV3IE9wKCctLScsIGNudF9tZW1iZXIpO1xuICAgICAgaWZfY29uZCA9IG5ldyBPcCgnIScsIGRlY3IpO1xuICAgICAgbXlfaWYgPSBuZXcgSWYoaWZfY29uZCwgaWZfYm9keSk7XG4gICAgICBfZnVsZmlsbF9ib2R5ID0gbmV3IEJsb2NrKFtteV9pZl0pO1xuICAgICAgX2Z1bGZpbGxfY29kZSA9IG5ldyBDb2RlKFtdLCBfZnVsZmlsbF9ib2R5KTtcbiAgICAgIF9mdWxmaWxsX25hbWUgPSBuZXcgVmFsdWUobmV3IExpdGVyYWwoaWNlZFtcImNvbnN0XCJdLmZ1bGZpbGwpKTtcbiAgICAgIF9mdWxmaWxsX2Fzc2lnbiA9IG5ldyBBc3NpZ24oX2Z1bGZpbGxfbmFtZSwgX2Z1bGZpbGxfY29kZSk7XG4gICAgICBpbmMgPSBuZXcgT3AoXCIrK1wiLCBjbnRfbWVtYmVyKTtcbiAgICAgIGlwID0gbmV3IExpdGVyYWwoXCJpbm5lcl9wYXJhbXNcIik7XG4gICAgICBkcCA9IG5ldyBMaXRlcmFsKFwiZGVmZXJfcGFyYW1zXCIpO1xuICAgICAgZHBfdmFsdWUgPSBuZXcgVmFsdWUoZHApO1xuICAgICAgY2FsbF9tZXRoID0gbmV3IFZhbHVlKGRwKTtcbiAgICAgIGFmID0gbmV3IExpdGVyYWwoaWNlZFtcImNvbnN0XCJdLmFzc2lnbl9mbik7XG4gICAgICBjYWxsX21ldGguYWRkKG5ldyBBY2Nlc3MoYWYsIFwic29ha1wiKSk7XG4gICAgICBteV9hcHBseSA9IG5ldyBMaXRlcmFsKFwiYXBwbHlcIik7XG4gICAgICBjYWxsX21ldGguYWRkKG5ldyBBY2Nlc3MobXlfYXBwbHksIFwic29ha1wiKSk7XG4gICAgICBteV9udWxsID0gTlVMTCgpO1xuICAgICAgYXBwbHlfY2FsbCA9IG5ldyBDYWxsKGNhbGxfbWV0aCwgW215X251bGwsIG5ldyBWYWx1ZShpcCldKTtcbiAgICAgIF9mdWxmaWxsX21ldGhvZCA9IG5ldyBWYWx1ZShuZXcgTGl0ZXJhbChcInRoaXNcIikpO1xuICAgICAgX2Z1bGZpbGxfbWV0aG9kLmFkZChuZXcgQWNjZXNzKG5ldyBMaXRlcmFsKGljZWRbXCJjb25zdFwiXS5mdWxmaWxsKSkpO1xuICAgICAgX2Z1bGZpbGxfY2FsbCA9IG5ldyBDYWxsKF9mdWxmaWxsX21ldGhvZCwgW10pO1xuICAgICAgaW5uZXJfYm9keSA9IG5ldyBCbG9jayhbYXBwbHlfY2FsbCwgX2Z1bGZpbGxfY2FsbF0pO1xuICAgICAgaW5uZXJfcGFyYW1zID0gW25ldyBQYXJhbShpcCwgbnVsbCwgdHJ1ZSldO1xuICAgICAgaW5uZXJfY29kZSA9IG5ldyBDb2RlKGlubmVyX3BhcmFtcywgaW5uZXJfYm9keSwgXCJib3VuZGZ1bmNcIik7XG4gICAgICBkZWZlcl9ib2R5ID0gbmV3IEJsb2NrKFtpbmMsIGlubmVyX2NvZGVdKTtcbiAgICAgIGRlZmVyX3BhcmFtcyA9IFtuZXcgUGFyYW0oZHApXTtcbiAgICAgIGRlZmVyX2NvZGUgPSBuZXcgQ29kZShkZWZlcl9wYXJhbXMsIGRlZmVyX2JvZHkpO1xuICAgICAgZGVmZXJfbmFtZSA9IG5ldyBWYWx1ZShuZXcgTGl0ZXJhbChpY2VkW1wiY29uc3RcIl0uZGVmZXJfbWV0aG9kKSk7XG4gICAgICBkZWZlcl9hc3NpZ24gPSBuZXcgQXNzaWduKGRlZmVyX25hbWUsIGRlZmVyX2NvZGUpO1xuICAgICAgYXNzaWdubWVudHMgPSBbY29uc3RydWN0b3JfYXNzaWduLCBfZnVsZmlsbF9hc3NpZ24sIGRlZmVyX2Fzc2lnbl07XG4gICAgICBvYmogPSBuZXcgT2JqKGFzc2lnbm1lbnRzLCB0cnVlKTtcbiAgICAgIGJvZHkgPSBuZXcgQmxvY2soW25ldyBWYWx1ZShvYmopXSk7XG4gICAgICBrbGFzcyA9IG5ldyBDbGFzcyhudWxsLCBudWxsLCBib2R5KTtcbiAgICAgIGtsYXNzX2Fzc2lnbiA9IG5ldyBBc3NpZ24oY24sIGtsYXNzLCBcIm9iamVjdFwiKTtcbiAgICAgIG91dGVyX2Jsb2NrID0gbmV3IEJsb2NrKFtOVUxMKCldKTtcbiAgICAgIGZuX2NvZGUgPSBuZXcgQ29kZShbXSwgb3V0ZXJfYmxvY2spO1xuICAgICAgZm5fbmFtZSA9IG5ldyBWYWx1ZShuZXcgTGl0ZXJhbChpY2VkW1wiY29uc3RcIl0uZmluZERlZmVycmFsKSk7XG4gICAgICBmbl9hc3NpZ24gPSBuZXcgQXNzaWduKGZuX25hbWUsIGZuX2NvZGUsIFwib2JqZWN0XCIpO1xuICAgICAgZm4gPSBuZXcgTGl0ZXJhbChcIl9mblwiKTtcbiAgICAgIHRyX2Jsb2NrID0gbmV3IEJsb2NrKFtuZXcgQ2FsbChuZXcgVmFsdWUoZm4pLCBbXSldKTtcbiAgICAgIHRyX3BhcmFtcyA9IFtuZXcgUGFyYW0oZm4pXTtcbiAgICAgIHRyX2NvZGUgPSBuZXcgQ29kZSh0cl9wYXJhbXMsIHRyX2Jsb2NrKTtcbiAgICAgIHRyX25hbWUgPSBuZXcgVmFsdWUobmV3IExpdGVyYWwoaWNlZFtcImNvbnN0XCJdLnRyYW1wb2xpbmUpKTtcbiAgICAgIHRyX2Fzc2lnbiA9IG5ldyBBc3NpZ24odHJfbmFtZSwgdHJfY29kZSwgXCJvYmplY3RcIik7XG4gICAgICBuc19vYmogPSBuZXcgT2JqKFtrbGFzc19hc3NpZ24sIGZuX2Fzc2lnbiwgdHJfYXNzaWduXSwgdHJ1ZSk7XG4gICAgICBuc192YWwgPSBuZXcgVmFsdWUobnNfb2JqKTtcbiAgICAgIHJldHVybiBuZXcgQXNzaWduKG5zLCBuc192YWwpO1xuICAgIH1cbiAgfTtcblxuICBVVElMSVRJRVMgPSB7XG4gICAgXCJleHRlbmRzXCI6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIFwiZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChcIiArICh1dGlsaXR5KCdoYXNQcm9wJykpICsgXCIuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH1cIjtcbiAgICB9LFxuICAgIGJpbmQ6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuICdmdW5jdGlvbihmbiwgbWUpeyByZXR1cm4gZnVuY3Rpb24oKXsgcmV0dXJuIGZuLmFwcGx5KG1lLCBhcmd1bWVudHMpOyB9OyB9JztcbiAgICB9LFxuICAgIGluZGV4T2Y6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIFwiW10uaW5kZXhPZiB8fCBmdW5jdGlvbihpdGVtKSB7IGZvciAodmFyIGkgPSAwLCBsID0gdGhpcy5sZW5ndGg7IGkgPCBsOyBpKyspIHsgaWYgKGkgaW4gdGhpcyAmJiB0aGlzW2ldID09PSBpdGVtKSByZXR1cm4gaTsgfSByZXR1cm4gLTE7IH1cIjtcbiAgICB9LFxuICAgIG1vZHVsbzogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gXCJmdW5jdGlvbihhLCBiKSB7IHJldHVybiAoK2EgJSAoYiA9ICtiKSArIGIpICUgYjsgfVwiO1xuICAgIH0sXG4gICAgaGFzUHJvcDogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gJ3t9Lmhhc093blByb3BlcnR5JztcbiAgICB9LFxuICAgIHNsaWNlOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiAnW10uc2xpY2UnO1xuICAgIH1cbiAgfTtcblxuICBMRVZFTF9UT1AgPSAxO1xuXG4gIExFVkVMX1BBUkVOID0gMjtcblxuICBMRVZFTF9MSVNUID0gMztcblxuICBMRVZFTF9DT05EID0gNDtcblxuICBMRVZFTF9PUCA9IDU7XG5cbiAgTEVWRUxfQUNDRVNTID0gNjtcblxuICBUQUIgPSAnICAnO1xuXG4gIElERU5USUZJRVJfU1RSID0gXCJbJEEtWmEtel9cXFxceDdmLVxcXFx1ZmZmZl1bJFxcXFx3XFxcXHg3Zi1cXFxcdWZmZmZdKlwiO1xuXG4gIElERU5USUZJRVIgPSBSZWdFeHAoXCJeXCIgKyBJREVOVElGSUVSX1NUUiArIFwiJFwiKTtcblxuICBTSU1QTEVOVU0gPSAvXlsrLV0/XFxkKyQvO1xuXG4gIEhFWE5VTSA9IC9eWystXT8weFtcXGRhLWZdKy9pO1xuXG4gIE5VTUJFUiA9IC9eWystXT8oPzoweFtcXGRhLWZdK3xcXGQqXFwuP1xcZCsoPzplWystXT9cXGQrKT8pJC9pO1xuXG4gIE1FVEhPRF9ERUYgPSBSZWdFeHAoXCJeKFwiICsgSURFTlRJRklFUl9TVFIgKyBcIikoXFxcXC5wcm90b3R5cGUpPyg/OlxcXFwuKFwiICsgSURFTlRJRklFUl9TVFIgKyBcIil8XFxcXFsoXFxcIig/OlteXFxcXFxcXFxcXFwiXFxcXHJcXFxcbl18XFxcXFxcXFwuKSpcXFwifCcoPzpbXlxcXFxcXFxcJ1xcXFxyXFxcXG5dfFxcXFxcXFxcLikqJylcXFxcXXxcXFxcWygweFtcXFxcZGEtZkEtRl0rfFxcXFxkKlxcXFwuP1xcXFxkKyg/OltlRV1bKy1dP1xcXFxkKyk/KVxcXFxdKSRcIik7XG5cbiAgSVNfU1RSSU5HID0gL15bJ1wiXS87XG5cbiAgSVNfUkVHRVggPSAvXlxcLy87XG5cbiAgdXRpbGl0eSA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICB2YXIgcmVmO1xuICAgIHJlZiA9IFwiX19cIiArIG5hbWU7XG4gICAgU2NvcGUucm9vdC5hc3NpZ24ocmVmLCBVVElMSVRJRVNbbmFtZV0oKSk7XG4gICAgcmV0dXJuIHJlZjtcbiAgfTtcblxuICBtdWx0aWRlbnQgPSBmdW5jdGlvbihjb2RlLCB0YWIpIHtcbiAgICBjb2RlID0gY29kZS5yZXBsYWNlKC9cXG4vZywgJyQmJyArIHRhYik7XG4gICAgcmV0dXJuIGNvZGUucmVwbGFjZSgvXFxzKyQvLCAnJyk7XG4gIH07XG5cbiAgcGFyc2VOdW0gPSBmdW5jdGlvbih4KSB7XG4gICAgaWYgKHggPT0gbnVsbCkge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfSBlbHNlIGlmICh4Lm1hdGNoKEhFWE5VTSkpIHtcbiAgICAgIHJldHVybiBwYXJzZUludCh4LCAxNik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBwYXJzZUZsb2F0KHgpO1xuICAgIH1cbiAgfTtcblxuICBpc0xpdGVyYWxBcmd1bWVudHMgPSBmdW5jdGlvbihub2RlKSB7XG4gICAgcmV0dXJuIG5vZGUgaW5zdGFuY2VvZiBMaXRlcmFsICYmIG5vZGUudmFsdWUgPT09ICdhcmd1bWVudHMnICYmICFub2RlLmFzS2V5O1xuICB9O1xuXG4gIGlzTGl0ZXJhbFRoaXMgPSBmdW5jdGlvbihub2RlKSB7XG4gICAgcmV0dXJuIChub2RlIGluc3RhbmNlb2YgTGl0ZXJhbCAmJiBub2RlLnZhbHVlID09PSAndGhpcycgJiYgIW5vZGUuYXNLZXkpIHx8IChub2RlIGluc3RhbmNlb2YgQ29kZSAmJiBub2RlLmJvdW5kKSB8fCAobm9kZSBpbnN0YW5jZW9mIENhbGwgJiYgbm9kZS5pc1N1cGVyKTtcbiAgfTtcblxuICB1bmZvbGRTb2FrID0gZnVuY3Rpb24obywgcGFyZW50LCBuYW1lKSB7XG4gICAgdmFyIGlmbjtcbiAgICBpZiAoIShpZm4gPSBwYXJlbnRbbmFtZV0udW5mb2xkU29hayhvKSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgcGFyZW50W25hbWVdID0gaWZuLmJvZHk7XG4gICAgaWZuLmJvZHkgPSBuZXcgVmFsdWUocGFyZW50KTtcbiAgICByZXR1cm4gaWZuO1xuICB9O1xuXG59KS5jYWxsKHRoaXMpO1xuIiwiLyogcGFyc2VyIGdlbmVyYXRlZCBieSBqaXNvbiAwLjQuMTMgKi9cbi8qXG4gIFJldHVybnMgYSBQYXJzZXIgb2JqZWN0IG9mIHRoZSBmb2xsb3dpbmcgc3RydWN0dXJlOlxuXG4gIFBhcnNlcjoge1xuICAgIHl5OiB7fVxuICB9XG5cbiAgUGFyc2VyLnByb3RvdHlwZToge1xuICAgIHl5OiB7fSxcbiAgICB0cmFjZTogZnVuY3Rpb24oKSxcbiAgICBzeW1ib2xzXzoge2Fzc29jaWF0aXZlIGxpc3Q6IG5hbWUgPT0+IG51bWJlcn0sXG4gICAgdGVybWluYWxzXzoge2Fzc29jaWF0aXZlIGxpc3Q6IG51bWJlciA9PT4gbmFtZX0sXG4gICAgcHJvZHVjdGlvbnNfOiBbLi4uXSxcbiAgICBwZXJmb3JtQWN0aW9uOiBmdW5jdGlvbiBhbm9ueW1vdXMoeXl0ZXh0LCB5eWxlbmcsIHl5bGluZW5vLCB5eSwgeXlzdGF0ZSwgJCQsIF8kKSxcbiAgICB0YWJsZTogWy4uLl0sXG4gICAgZGVmYXVsdEFjdGlvbnM6IHsuLi59LFxuICAgIHBhcnNlRXJyb3I6IGZ1bmN0aW9uKHN0ciwgaGFzaCksXG4gICAgcGFyc2U6IGZ1bmN0aW9uKGlucHV0KSxcblxuICAgIGxleGVyOiB7XG4gICAgICAgIEVPRjogMSxcbiAgICAgICAgcGFyc2VFcnJvcjogZnVuY3Rpb24oc3RyLCBoYXNoKSxcbiAgICAgICAgc2V0SW5wdXQ6IGZ1bmN0aW9uKGlucHV0KSxcbiAgICAgICAgaW5wdXQ6IGZ1bmN0aW9uKCksXG4gICAgICAgIHVucHV0OiBmdW5jdGlvbihzdHIpLFxuICAgICAgICBtb3JlOiBmdW5jdGlvbigpLFxuICAgICAgICBsZXNzOiBmdW5jdGlvbihuKSxcbiAgICAgICAgcGFzdElucHV0OiBmdW5jdGlvbigpLFxuICAgICAgICB1cGNvbWluZ0lucHV0OiBmdW5jdGlvbigpLFxuICAgICAgICBzaG93UG9zaXRpb246IGZ1bmN0aW9uKCksXG4gICAgICAgIHRlc3RfbWF0Y2g6IGZ1bmN0aW9uKHJlZ2V4X21hdGNoX2FycmF5LCBydWxlX2luZGV4KSxcbiAgICAgICAgbmV4dDogZnVuY3Rpb24oKSxcbiAgICAgICAgbGV4OiBmdW5jdGlvbigpLFxuICAgICAgICBiZWdpbjogZnVuY3Rpb24oY29uZGl0aW9uKSxcbiAgICAgICAgcG9wU3RhdGU6IGZ1bmN0aW9uKCksXG4gICAgICAgIF9jdXJyZW50UnVsZXM6IGZ1bmN0aW9uKCksXG4gICAgICAgIHRvcFN0YXRlOiBmdW5jdGlvbigpLFxuICAgICAgICBwdXNoU3RhdGU6IGZ1bmN0aW9uKGNvbmRpdGlvbiksXG5cbiAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgICAgcmFuZ2VzOiBib29sZWFuICAgICAgICAgICAob3B0aW9uYWw6IHRydWUgPT0+IHRva2VuIGxvY2F0aW9uIGluZm8gd2lsbCBpbmNsdWRlIGEgLnJhbmdlW10gbWVtYmVyKVxuICAgICAgICAgICAgZmxleDogYm9vbGVhbiAgICAgICAgICAgICAob3B0aW9uYWw6IHRydWUgPT0+IGZsZXgtbGlrZSBsZXhpbmcgYmVoYXZpb3VyIHdoZXJlIHRoZSBydWxlcyBhcmUgdGVzdGVkIGV4aGF1c3RpdmVseSB0byBmaW5kIHRoZSBsb25nZXN0IG1hdGNoKVxuICAgICAgICAgICAgYmFja3RyYWNrX2xleGVyOiBib29sZWFuICAob3B0aW9uYWw6IHRydWUgPT0+IGxleGVyIHJlZ2V4ZXMgYXJlIHRlc3RlZCBpbiBvcmRlciBhbmQgZm9yIGVhY2ggbWF0Y2hpbmcgcmVnZXggdGhlIGFjdGlvbiBjb2RlIGlzIGludm9rZWQ7IHRoZSBsZXhlciB0ZXJtaW5hdGVzIHRoZSBzY2FuIHdoZW4gYSB0b2tlbiBpcyByZXR1cm5lZCBieSB0aGUgYWN0aW9uIGNvZGUpXG4gICAgICAgIH0sXG5cbiAgICAgICAgcGVyZm9ybUFjdGlvbjogZnVuY3Rpb24oeXksIHl5XywgJGF2b2lkaW5nX25hbWVfY29sbGlzaW9ucywgWVlfU1RBUlQpLFxuICAgICAgICBydWxlczogWy4uLl0sXG4gICAgICAgIGNvbmRpdGlvbnM6IHthc3NvY2lhdGl2ZSBsaXN0OiBuYW1lID09PiBzZXR9LFxuICAgIH1cbiAgfVxuXG5cbiAgdG9rZW4gbG9jYXRpb24gaW5mbyAoQCQsIF8kLCBldGMuKToge1xuICAgIGZpcnN0X2xpbmU6IG4sXG4gICAgbGFzdF9saW5lOiBuLFxuICAgIGZpcnN0X2NvbHVtbjogbixcbiAgICBsYXN0X2NvbHVtbjogbixcbiAgICByYW5nZTogW3N0YXJ0X251bWJlciwgZW5kX251bWJlcl0gICAgICAgKHdoZXJlIHRoZSBudW1iZXJzIGFyZSBpbmRleGVzIGludG8gdGhlIGlucHV0IHN0cmluZywgcmVndWxhciB6ZXJvLWJhc2VkKVxuICB9XG5cblxuICB0aGUgcGFyc2VFcnJvciBmdW5jdGlvbiByZWNlaXZlcyBhICdoYXNoJyBvYmplY3Qgd2l0aCB0aGVzZSBtZW1iZXJzIGZvciBsZXhlciBhbmQgcGFyc2VyIGVycm9yczoge1xuICAgIHRleHQ6ICAgICAgICAobWF0Y2hlZCB0ZXh0KVxuICAgIHRva2VuOiAgICAgICAodGhlIHByb2R1Y2VkIHRlcm1pbmFsIHRva2VuLCBpZiBhbnkpXG4gICAgbGluZTogICAgICAgICh5eWxpbmVubylcbiAgfVxuICB3aGlsZSBwYXJzZXIgKGdyYW1tYXIpIGVycm9ycyB3aWxsIGFsc28gcHJvdmlkZSB0aGVzZSBtZW1iZXJzLCBpLmUuIHBhcnNlciBlcnJvcnMgZGVsaXZlciBhIHN1cGVyc2V0IG9mIGF0dHJpYnV0ZXM6IHtcbiAgICBsb2M6ICAgICAgICAgKHl5bGxvYylcbiAgICBleHBlY3RlZDogICAgKHN0cmluZyBkZXNjcmliaW5nIHRoZSBzZXQgb2YgZXhwZWN0ZWQgdG9rZW5zKVxuICAgIHJlY292ZXJhYmxlOiAoYm9vbGVhbjogVFJVRSB3aGVuIHRoZSBwYXJzZXIgaGFzIGEgZXJyb3IgcmVjb3ZlcnkgcnVsZSBhdmFpbGFibGUgZm9yIHRoaXMgcGFydGljdWxhciBlcnJvcilcbiAgfVxuKi9cbnZhciBwYXJzZXIgPSAoZnVuY3Rpb24oKXtcbnZhciBwYXJzZXIgPSB7dHJhY2U6IGZ1bmN0aW9uIHRyYWNlKCkgeyB9LFxueXk6IHt9LFxuc3ltYm9sc186IHtcImVycm9yXCI6MixcIlJvb3RcIjozLFwiQm9keVwiOjQsXCJMaW5lXCI6NSxcIlRFUk1JTkFUT1JcIjo2LFwiRXhwcmVzc2lvblwiOjcsXCJTdGF0ZW1lbnRcIjo4LFwiUmV0dXJuXCI6OSxcIkNvbW1lbnRcIjoxMCxcIlNUQVRFTUVOVFwiOjExLFwiQXdhaXRcIjoxMixcIkFXQUlUXCI6MTMsXCJCbG9ja1wiOjE0LFwiVmFsdWVcIjoxNSxcIkludm9jYXRpb25cIjoxNixcIkNvZGVcIjoxNyxcIk9wZXJhdGlvblwiOjE4LFwiQXNzaWduXCI6MTksXCJJZlwiOjIwLFwiVHJ5XCI6MjEsXCJXaGlsZVwiOjIyLFwiRm9yXCI6MjMsXCJTd2l0Y2hcIjoyNCxcIkNsYXNzXCI6MjUsXCJUaHJvd1wiOjI2LFwiRGVmZXJcIjoyNyxcIklOREVOVFwiOjI4LFwiT1VUREVOVFwiOjI5LFwiSWRlbnRpZmllclwiOjMwLFwiSURFTlRJRklFUlwiOjMxLFwiQWxwaGFOdW1lcmljXCI6MzIsXCJOVU1CRVJcIjozMyxcIlNUUklOR1wiOjM0LFwiTGl0ZXJhbFwiOjM1LFwiSlNcIjozNixcIlJFR0VYXCI6MzcsXCJERUJVR0dFUlwiOjM4LFwiVU5ERUZJTkVEXCI6MzksXCJOVUxMXCI6NDAsXCJCT09MXCI6NDEsXCJBc3NpZ25hYmxlXCI6NDIsXCI9XCI6NDMsXCJBc3NpZ25PYmpcIjo0NCxcIk9iakFzc2lnbmFibGVcIjo0NSxcIjpcIjo0NixcIlRoaXNQcm9wZXJ0eVwiOjQ3LFwiUkVUVVJOXCI6NDgsXCJIRVJFQ09NTUVOVFwiOjQ5LFwiUEFSQU1fU1RBUlRcIjo1MCxcIlBhcmFtTGlzdFwiOjUxLFwiUEFSQU1fRU5EXCI6NTIsXCJGdW5jR2x5cGhcIjo1MyxcIi0+XCI6NTQsXCI9PlwiOjU1LFwiT3B0Q29tbWFcIjo1NixcIixcIjo1NyxcIlBhcmFtXCI6NTgsXCJQYXJhbVZhclwiOjU5LFwiLi4uXCI6NjAsXCJBcnJheVwiOjYxLFwiT2JqZWN0XCI6NjIsXCJTcGxhdFwiOjYzLFwiU2ltcGxlQXNzaWduYWJsZVwiOjY0LFwiQWNjZXNzb3JcIjo2NSxcIlBhcmVudGhldGljYWxcIjo2NixcIlJhbmdlXCI6NjcsXCJUaGlzXCI6NjgsXCIuXCI6NjksXCI/LlwiOjcwLFwiOjpcIjo3MSxcIj86OlwiOjcyLFwiSW5kZXhcIjo3MyxcIklOREVYX1NUQVJUXCI6NzQsXCJJbmRleFZhbHVlXCI6NzUsXCJJTkRFWF9FTkRcIjo3NixcIklOREVYX1NPQUtcIjo3NyxcIlNsaWNlXCI6NzgsXCJ7XCI6NzksXCJBc3NpZ25MaXN0XCI6ODAsXCJ9XCI6ODEsXCJDTEFTU1wiOjgyLFwiRVhURU5EU1wiOjgzLFwiT3B0RnVuY0V4aXN0XCI6ODQsXCJBcmd1bWVudHNcIjo4NSxcIlNVUEVSXCI6ODYsXCJERUZFUlwiOjg3LFwiRlVOQ19FWElTVFwiOjg4LFwiQ0FMTF9TVEFSVFwiOjg5LFwiQ0FMTF9FTkRcIjo5MCxcIkFyZ0xpc3RcIjo5MSxcIlRISVNcIjo5MixcIkBcIjo5MyxcIltcIjo5NCxcIl1cIjo5NSxcIlJhbmdlRG90c1wiOjk2LFwiLi5cIjo5NyxcIkFyZ1wiOjk4LFwiU2ltcGxlQXJnc1wiOjk5LFwiVFJZXCI6MTAwLFwiQ2F0Y2hcIjoxMDEsXCJGSU5BTExZXCI6MTAyLFwiQ0FUQ0hcIjoxMDMsXCJUSFJPV1wiOjEwNCxcIihcIjoxMDUsXCIpXCI6MTA2LFwiV2hpbGVTb3VyY2VcIjoxMDcsXCJXSElMRVwiOjEwOCxcIldIRU5cIjoxMDksXCJVTlRJTFwiOjExMCxcIkxvb3BcIjoxMTEsXCJMT09QXCI6MTEyLFwiRm9yQm9keVwiOjExMyxcIkZPUlwiOjExNCxcIkZvclN0YXJ0XCI6MTE1LFwiRm9yU291cmNlXCI6MTE2LFwiRm9yVmFyaWFibGVzXCI6MTE3LFwiT1dOXCI6MTE4LFwiRm9yVmFsdWVcIjoxMTksXCJGT1JJTlwiOjEyMCxcIkZPUk9GXCI6MTIxLFwiQllcIjoxMjIsXCJTV0lUQ0hcIjoxMjMsXCJXaGVuc1wiOjEyNCxcIkVMU0VcIjoxMjUsXCJXaGVuXCI6MTI2LFwiTEVBRElOR19XSEVOXCI6MTI3LFwiSWZCbG9ja1wiOjEyOCxcIklGXCI6MTI5LFwiUE9TVF9JRlwiOjEzMCxcIlVOQVJZXCI6MTMxLFwiVU5BUllfTUFUSFwiOjEzMixcIi1cIjoxMzMsXCIrXCI6MTM0LFwiWUlFTERcIjoxMzUsXCJGUk9NXCI6MTM2LFwiLS1cIjoxMzcsXCIrK1wiOjEzOCxcIj9cIjoxMzksXCJNQVRIXCI6MTQwLFwiKipcIjoxNDEsXCJTSElGVFwiOjE0MixcIkNPTVBBUkVcIjoxNDMsXCJMT0dJQ1wiOjE0NCxcIlJFTEFUSU9OXCI6MTQ1LFwiQ09NUE9VTkRfQVNTSUdOXCI6MTQ2LFwiJGFjY2VwdFwiOjAsXCIkZW5kXCI6MX0sXG50ZXJtaW5hbHNfOiB7MjpcImVycm9yXCIsNjpcIlRFUk1JTkFUT1JcIiwxMTpcIlNUQVRFTUVOVFwiLDEzOlwiQVdBSVRcIiwyODpcIklOREVOVFwiLDI5OlwiT1VUREVOVFwiLDMxOlwiSURFTlRJRklFUlwiLDMzOlwiTlVNQkVSXCIsMzQ6XCJTVFJJTkdcIiwzNjpcIkpTXCIsMzc6XCJSRUdFWFwiLDM4OlwiREVCVUdHRVJcIiwzOTpcIlVOREVGSU5FRFwiLDQwOlwiTlVMTFwiLDQxOlwiQk9PTFwiLDQzOlwiPVwiLDQ2OlwiOlwiLDQ4OlwiUkVUVVJOXCIsNDk6XCJIRVJFQ09NTUVOVFwiLDUwOlwiUEFSQU1fU1RBUlRcIiw1MjpcIlBBUkFNX0VORFwiLDU0OlwiLT5cIiw1NTpcIj0+XCIsNTc6XCIsXCIsNjA6XCIuLi5cIiw2OTpcIi5cIiw3MDpcIj8uXCIsNzE6XCI6OlwiLDcyOlwiPzo6XCIsNzQ6XCJJTkRFWF9TVEFSVFwiLDc2OlwiSU5ERVhfRU5EXCIsNzc6XCJJTkRFWF9TT0FLXCIsNzk6XCJ7XCIsODE6XCJ9XCIsODI6XCJDTEFTU1wiLDgzOlwiRVhURU5EU1wiLDg2OlwiU1VQRVJcIiw4NzpcIkRFRkVSXCIsODg6XCJGVU5DX0VYSVNUXCIsODk6XCJDQUxMX1NUQVJUXCIsOTA6XCJDQUxMX0VORFwiLDkyOlwiVEhJU1wiLDkzOlwiQFwiLDk0OlwiW1wiLDk1OlwiXVwiLDk3OlwiLi5cIiwxMDA6XCJUUllcIiwxMDI6XCJGSU5BTExZXCIsMTAzOlwiQ0FUQ0hcIiwxMDQ6XCJUSFJPV1wiLDEwNTpcIihcIiwxMDY6XCIpXCIsMTA4OlwiV0hJTEVcIiwxMDk6XCJXSEVOXCIsMTEwOlwiVU5USUxcIiwxMTI6XCJMT09QXCIsMTE0OlwiRk9SXCIsMTE4OlwiT1dOXCIsMTIwOlwiRk9SSU5cIiwxMjE6XCJGT1JPRlwiLDEyMjpcIkJZXCIsMTIzOlwiU1dJVENIXCIsMTI1OlwiRUxTRVwiLDEyNzpcIkxFQURJTkdfV0hFTlwiLDEyOTpcIklGXCIsMTMwOlwiUE9TVF9JRlwiLDEzMTpcIlVOQVJZXCIsMTMyOlwiVU5BUllfTUFUSFwiLDEzMzpcIi1cIiwxMzQ6XCIrXCIsMTM1OlwiWUlFTERcIiwxMzY6XCJGUk9NXCIsMTM3OlwiLS1cIiwxMzg6XCIrK1wiLDEzOTpcIj9cIiwxNDA6XCJNQVRIXCIsMTQxOlwiKipcIiwxNDI6XCJTSElGVFwiLDE0MzpcIkNPTVBBUkVcIiwxNDQ6XCJMT0dJQ1wiLDE0NTpcIlJFTEFUSU9OXCIsMTQ2OlwiQ09NUE9VTkRfQVNTSUdOXCJ9LFxucHJvZHVjdGlvbnNfOiBbMCxbMywwXSxbMywxXSxbNCwxXSxbNCwzXSxbNCwyXSxbNSwxXSxbNSwxXSxbOCwxXSxbOCwxXSxbOCwxXSxbOCwxXSxbMTIsMl0sWzEyLDJdLFs3LDFdLFs3LDFdLFs3LDFdLFs3LDFdLFs3LDFdLFs3LDFdLFs3LDFdLFs3LDFdLFs3LDFdLFs3LDFdLFs3LDFdLFs3LDFdLFs3LDFdLFsxNCwyXSxbMTQsM10sWzMwLDFdLFszMiwxXSxbMzIsMV0sWzM1LDFdLFszNSwxXSxbMzUsMV0sWzM1LDFdLFszNSwxXSxbMzUsMV0sWzM1LDFdLFsxOSwzXSxbMTksNF0sWzE5LDVdLFs0NCwxXSxbNDQsM10sWzQ0LDVdLFs0NCwxXSxbNDUsMV0sWzQ1LDFdLFs0NSwxXSxbOSwyXSxbOSwxXSxbMTAsMV0sWzE3LDVdLFsxNywyXSxbNTMsMV0sWzUzLDFdLFs1NiwwXSxbNTYsMV0sWzUxLDBdLFs1MSwxXSxbNTEsM10sWzUxLDRdLFs1MSw2XSxbNTgsMV0sWzU4LDJdLFs1OCwzXSxbNTgsMV0sWzU5LDFdLFs1OSwxXSxbNTksMV0sWzU5LDFdLFs2MywyXSxbNjQsMV0sWzY0LDJdLFs2NCwyXSxbNjQsMV0sWzQyLDFdLFs0MiwxXSxbNDIsMV0sWzE1LDFdLFsxNSwxXSxbMTUsMV0sWzE1LDFdLFsxNSwxXSxbNjUsMl0sWzY1LDJdLFs2NSwyXSxbNjUsMl0sWzY1LDJdLFs2NSwxXSxbNjUsMV0sWzczLDNdLFs3MywyXSxbNzUsMV0sWzc1LDFdLFs2Miw0XSxbODAsMF0sWzgwLDFdLFs4MCwzXSxbODAsNF0sWzgwLDZdLFsyNSwxXSxbMjUsMl0sWzI1LDNdLFsyNSw0XSxbMjUsMl0sWzI1LDNdLFsyNSw0XSxbMjUsNV0sWzE2LDNdLFsxNiwzXSxbMTYsMV0sWzE2LDJdLFsyNywyXSxbODQsMF0sWzg0LDFdLFs4NSwyXSxbODUsNF0sWzY4LDFdLFs2OCwxXSxbNDcsMl0sWzYxLDJdLFs2MSw0XSxbOTYsMV0sWzk2LDFdLFs2Nyw1XSxbNzgsM10sWzc4LDJdLFs3OCwyXSxbNzgsMV0sWzkxLDFdLFs5MSwzXSxbOTEsNF0sWzkxLDRdLFs5MSw2XSxbOTgsMV0sWzk4LDFdLFs5OCwxXSxbOTksMV0sWzk5LDNdLFsyMSwyXSxbMjEsM10sWzIxLDRdLFsyMSw1XSxbMTAxLDNdLFsxMDEsM10sWzEwMSwyXSxbMjYsMl0sWzY2LDNdLFs2Niw1XSxbMTA3LDJdLFsxMDcsNF0sWzEwNywyXSxbMTA3LDRdLFsyMiwyXSxbMjIsMl0sWzIyLDJdLFsyMiwxXSxbMTExLDJdLFsxMTEsMl0sWzIzLDJdLFsyMywyXSxbMjMsMl0sWzExMywyXSxbMTEzLDJdLFsxMTUsMl0sWzExNSwzXSxbMTE5LDFdLFsxMTksMV0sWzExOSwxXSxbMTE5LDFdLFsxMTcsMV0sWzExNywzXSxbMTE2LDJdLFsxMTYsMl0sWzExNiw0XSxbMTE2LDRdLFsxMTYsNF0sWzExNiw2XSxbMTE2LDZdLFsyNCw1XSxbMjQsN10sWzI0LDRdLFsyNCw2XSxbMTI0LDFdLFsxMjQsMl0sWzEyNiwzXSxbMTI2LDRdLFsxMjgsM10sWzEyOCw1XSxbMjAsMV0sWzIwLDNdLFsyMCwzXSxbMjAsM10sWzE4LDJdLFsxOCwyXSxbMTgsMl0sWzE4LDJdLFsxOCwyXSxbMTgsMl0sWzE4LDNdLFsxOCwyXSxbMTgsMl0sWzE4LDJdLFsxOCwyXSxbMTgsMl0sWzE4LDNdLFsxOCwzXSxbMTgsM10sWzE4LDNdLFsxOCwzXSxbMTgsM10sWzE4LDNdLFsxOCwzXSxbMTgsM10sWzE4LDVdLFsxOCw0XSxbMTgsM11dLFxucGVyZm9ybUFjdGlvbjogZnVuY3Rpb24gYW5vbnltb3VzKHl5dGV4dCwgeXlsZW5nLCB5eWxpbmVubywgeXksIHl5c3RhdGUgLyogYWN0aW9uWzFdICovLCAkJCAvKiB2c3RhY2sgKi8sIF8kIC8qIGxzdGFjayAqL1xuLyoqLykge1xuLyogdGhpcyA9PSB5eXZhbCAqL1xuXG52YXIgJDAgPSAkJC5sZW5ndGggLSAxO1xuc3dpdGNoICh5eXN0YXRlKSB7XG5jYXNlIDE6cmV0dXJuIHRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwXSwgXyRbJDBdKShuZXcgeXkuQmxvY2spO1xuYnJlYWs7XG5jYXNlIDI6cmV0dXJuIHRoaXMuJCA9ICQkWyQwXTtcbmJyZWFrO1xuY2FzZSAzOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwXSwgXyRbJDBdKSh5eS5CbG9jay53cmFwKFskJFskMF1dKSk7XG5icmVhaztcbmNhc2UgNDp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0yXSwgXyRbJDBdKSgkJFskMC0yXS5wdXNoKCQkWyQwXSkpO1xuYnJlYWs7XG5jYXNlIDU6dGhpcy4kID0gJCRbJDAtMV07XG5icmVhaztcbmNhc2UgNjp0aGlzLiQgPSAkJFskMF07XG5icmVhaztcbmNhc2UgNzp0aGlzLiQgPSAkJFskMF07XG5icmVhaztcbmNhc2UgODp0aGlzLiQgPSAkJFskMF07XG5icmVhaztcbmNhc2UgOTp0aGlzLiQgPSAkJFskMF07XG5icmVhaztcbmNhc2UgMTA6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDBdLCBfJFskMF0pKG5ldyB5eS5MaXRlcmFsKCQkWyQwXSkpO1xuYnJlYWs7XG5jYXNlIDExOnRoaXMuJCA9ICQkWyQwXTtcbmJyZWFrO1xuY2FzZSAxMjp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0xXSwgXyRbJDBdKShuZXcgeXkuQXdhaXQoJCRbJDBdKSk7XG5icmVhaztcbmNhc2UgMTM6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMV0sIF8kWyQwXSkobmV3IHl5LkF3YWl0KHl5LkJsb2NrLndyYXAoWyQkWyQwXV0pKSk7XG5icmVhaztcbmNhc2UgMTQ6dGhpcy4kID0gJCRbJDBdO1xuYnJlYWs7XG5jYXNlIDE1OnRoaXMuJCA9ICQkWyQwXTtcbmJyZWFrO1xuY2FzZSAxNjp0aGlzLiQgPSAkJFskMF07XG5icmVhaztcbmNhc2UgMTc6dGhpcy4kID0gJCRbJDBdO1xuYnJlYWs7XG5jYXNlIDE4OnRoaXMuJCA9ICQkWyQwXTtcbmJyZWFrO1xuY2FzZSAxOTp0aGlzLiQgPSAkJFskMF07XG5icmVhaztcbmNhc2UgMjA6dGhpcy4kID0gJCRbJDBdO1xuYnJlYWs7XG5jYXNlIDIxOnRoaXMuJCA9ICQkWyQwXTtcbmJyZWFrO1xuY2FzZSAyMjp0aGlzLiQgPSAkJFskMF07XG5icmVhaztcbmNhc2UgMjM6dGhpcy4kID0gJCRbJDBdO1xuYnJlYWs7XG5jYXNlIDI0OnRoaXMuJCA9ICQkWyQwXTtcbmJyZWFrO1xuY2FzZSAyNTp0aGlzLiQgPSAkJFskMF07XG5icmVhaztcbmNhc2UgMjY6dGhpcy4kID0gJCRbJDBdO1xuYnJlYWs7XG5jYXNlIDI3OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTFdLCBfJFskMF0pKG5ldyB5eS5CbG9jayk7XG5icmVhaztcbmNhc2UgMjg6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMl0sIF8kWyQwXSkoJCRbJDAtMV0pO1xuYnJlYWs7XG5jYXNlIDI5OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwXSwgXyRbJDBdKShuZXcgeXkuTGl0ZXJhbCgkJFskMF0pKTtcbmJyZWFrO1xuY2FzZSAzMDp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMF0sIF8kWyQwXSkobmV3IHl5LkxpdGVyYWwoJCRbJDBdKSk7XG5icmVhaztcbmNhc2UgMzE6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDBdLCBfJFskMF0pKG5ldyB5eS5MaXRlcmFsKCQkWyQwXSkpO1xuYnJlYWs7XG5jYXNlIDMyOnRoaXMuJCA9ICQkWyQwXTtcbmJyZWFrO1xuY2FzZSAzMzp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMF0sIF8kWyQwXSkobmV3IHl5LkxpdGVyYWwoJCRbJDBdKSk7XG5icmVhaztcbmNhc2UgMzQ6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDBdLCBfJFskMF0pKG5ldyB5eS5MaXRlcmFsKCQkWyQwXSkpO1xuYnJlYWs7XG5jYXNlIDM1OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwXSwgXyRbJDBdKShuZXcgeXkuTGl0ZXJhbCgkJFskMF0pKTtcbmJyZWFrO1xuY2FzZSAzNjp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMF0sIF8kWyQwXSkobmV3IHl5LlVuZGVmaW5lZCk7XG5icmVhaztcbmNhc2UgMzc6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDBdLCBfJFskMF0pKG5ldyB5eS5OdWxsKTtcbmJyZWFrO1xuY2FzZSAzODp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMF0sIF8kWyQwXSkobmV3IHl5LkJvb2woJCRbJDBdKSk7XG5icmVhaztcbmNhc2UgMzk6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMl0sIF8kWyQwXSkobmV3IHl5LkFzc2lnbigkJFskMC0yXSwgJCRbJDBdKSk7XG5icmVhaztcbmNhc2UgNDA6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtM10sIF8kWyQwXSkobmV3IHl5LkFzc2lnbigkJFskMC0zXSwgJCRbJDBdKSk7XG5icmVhaztcbmNhc2UgNDE6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtNF0sIF8kWyQwXSkobmV3IHl5LkFzc2lnbigkJFskMC00XSwgJCRbJDAtMV0pKTtcbmJyZWFrO1xuY2FzZSA0Mjp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMF0sIF8kWyQwXSkobmV3IHl5LlZhbHVlKCQkWyQwXSkpO1xuYnJlYWs7XG5jYXNlIDQzOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTJdLCBfJFskMF0pKG5ldyB5eS5Bc3NpZ24oeXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMl0pKG5ldyB5eS5WYWx1ZSgkJFskMC0yXSkpLCAkJFskMF0sICdvYmplY3QnKSk7XG5icmVhaztcbmNhc2UgNDQ6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtNF0sIF8kWyQwXSkobmV3IHl5LkFzc2lnbih5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC00XSkobmV3IHl5LlZhbHVlKCQkWyQwLTRdKSksICQkWyQwLTFdLCAnb2JqZWN0JykpO1xuYnJlYWs7XG5jYXNlIDQ1OnRoaXMuJCA9ICQkWyQwXTtcbmJyZWFrO1xuY2FzZSA0Njp0aGlzLiQgPSAkJFskMF07XG5icmVhaztcbmNhc2UgNDc6dGhpcy4kID0gJCRbJDBdO1xuYnJlYWs7XG5jYXNlIDQ4OnRoaXMuJCA9ICQkWyQwXTtcbmJyZWFrO1xuY2FzZSA0OTp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0xXSwgXyRbJDBdKShuZXcgeXkuUmV0dXJuKCQkWyQwXSkpO1xuYnJlYWs7XG5jYXNlIDUwOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwXSwgXyRbJDBdKShuZXcgeXkuUmV0dXJuKTtcbmJyZWFrO1xuY2FzZSA1MTp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMF0sIF8kWyQwXSkobmV3IHl5LkNvbW1lbnQoJCRbJDBdKSk7XG5icmVhaztcbmNhc2UgNTI6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtNF0sIF8kWyQwXSkobmV3IHl5LkNvZGUoJCRbJDAtM10sICQkWyQwXSwgJCRbJDAtMV0pKTtcbmJyZWFrO1xuY2FzZSA1Mzp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0xXSwgXyRbJDBdKShuZXcgeXkuQ29kZShbXSwgJCRbJDBdLCAkJFskMC0xXSkpO1xuYnJlYWs7XG5jYXNlIDU0OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwXSwgXyRbJDBdKSgnZnVuYycpO1xuYnJlYWs7XG5jYXNlIDU1OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwXSwgXyRbJDBdKSgnYm91bmRmdW5jJyk7XG5icmVhaztcbmNhc2UgNTY6dGhpcy4kID0gJCRbJDBdO1xuYnJlYWs7XG5jYXNlIDU3OnRoaXMuJCA9ICQkWyQwXTtcbmJyZWFrO1xuY2FzZSA1ODp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMF0sIF8kWyQwXSkoW10pO1xuYnJlYWs7XG5jYXNlIDU5OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwXSwgXyRbJDBdKShbJCRbJDBdXSk7XG5icmVhaztcbmNhc2UgNjA6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMl0sIF8kWyQwXSkoJCRbJDAtMl0uY29uY2F0KCQkWyQwXSkpO1xuYnJlYWs7XG5jYXNlIDYxOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTNdLCBfJFskMF0pKCQkWyQwLTNdLmNvbmNhdCgkJFskMF0pKTtcbmJyZWFrO1xuY2FzZSA2Mjp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC01XSwgXyRbJDBdKSgkJFskMC01XS5jb25jYXQoJCRbJDAtMl0pKTtcbmJyZWFrO1xuY2FzZSA2Mzp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMF0sIF8kWyQwXSkobmV3IHl5LlBhcmFtKCQkWyQwXSkpO1xuYnJlYWs7XG5jYXNlIDY0OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTFdLCBfJFskMF0pKG5ldyB5eS5QYXJhbSgkJFskMC0xXSwgbnVsbCwgdHJ1ZSkpO1xuYnJlYWs7XG5jYXNlIDY1OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTJdLCBfJFskMF0pKG5ldyB5eS5QYXJhbSgkJFskMC0yXSwgJCRbJDBdKSk7XG5icmVhaztcbmNhc2UgNjY6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDBdLCBfJFskMF0pKG5ldyB5eS5FeHBhbnNpb24pO1xuYnJlYWs7XG5jYXNlIDY3OnRoaXMuJCA9ICQkWyQwXTtcbmJyZWFrO1xuY2FzZSA2ODp0aGlzLiQgPSAkJFskMF07XG5icmVhaztcbmNhc2UgNjk6dGhpcy4kID0gJCRbJDBdO1xuYnJlYWs7XG5jYXNlIDcwOnRoaXMuJCA9ICQkWyQwXTtcbmJyZWFrO1xuY2FzZSA3MTp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0xXSwgXyRbJDBdKShuZXcgeXkuU3BsYXQoJCRbJDAtMV0pKTtcbmJyZWFrO1xuY2FzZSA3Mjp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMF0sIF8kWyQwXSkobmV3IHl5LlZhbHVlKCQkWyQwXSkpO1xuYnJlYWs7XG5jYXNlIDczOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTFdLCBfJFskMF0pKCQkWyQwLTFdLmFkZCgkJFskMF0pKTtcbmJyZWFrO1xuY2FzZSA3NDp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0xXSwgXyRbJDBdKShuZXcgeXkuVmFsdWUoJCRbJDAtMV0sIFtdLmNvbmNhdCgkJFskMF0pKSk7XG5icmVhaztcbmNhc2UgNzU6dGhpcy4kID0gJCRbJDBdO1xuYnJlYWs7XG5jYXNlIDc2OnRoaXMuJCA9ICQkWyQwXTtcbmJyZWFrO1xuY2FzZSA3Nzp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMF0sIF8kWyQwXSkobmV3IHl5LlZhbHVlKCQkWyQwXSkpO1xuYnJlYWs7XG5jYXNlIDc4OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwXSwgXyRbJDBdKShuZXcgeXkuVmFsdWUoJCRbJDBdKSk7XG5icmVhaztcbmNhc2UgNzk6dGhpcy4kID0gJCRbJDBdO1xuYnJlYWs7XG5jYXNlIDgwOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwXSwgXyRbJDBdKShuZXcgeXkuVmFsdWUoJCRbJDBdKSk7XG5icmVhaztcbmNhc2UgODE6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDBdLCBfJFskMF0pKG5ldyB5eS5WYWx1ZSgkJFskMF0pKTtcbmJyZWFrO1xuY2FzZSA4Mjp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMF0sIF8kWyQwXSkobmV3IHl5LlZhbHVlKCQkWyQwXSkpO1xuYnJlYWs7XG5jYXNlIDgzOnRoaXMuJCA9ICQkWyQwXTtcbmJyZWFrO1xuY2FzZSA4NDp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0xXSwgXyRbJDBdKShuZXcgeXkuQWNjZXNzKCQkWyQwXSkpO1xuYnJlYWs7XG5jYXNlIDg1OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTFdLCBfJFskMF0pKG5ldyB5eS5BY2Nlc3MoJCRbJDBdLnNldEN1c3RvbSgpKSk7XG5icmVhaztcbmNhc2UgODY6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMV0sIF8kWyQwXSkobmV3IHl5LkFjY2VzcygkJFskMF0sICdzb2FrJykpO1xuYnJlYWs7XG5jYXNlIDg3OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTFdLCBfJFskMF0pKFt5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0xXSkobmV3IHl5LkFjY2VzcyhuZXcgeXkuTGl0ZXJhbCgncHJvdG90eXBlJykpKSwgeXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDBdKShuZXcgeXkuQWNjZXNzKCQkWyQwXSkpXSk7XG5icmVhaztcbmNhc2UgODg6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMV0sIF8kWyQwXSkoW3l5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTFdKShuZXcgeXkuQWNjZXNzKG5ldyB5eS5MaXRlcmFsKCdwcm90b3R5cGUnKSwgJ3NvYWsnKSksIHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwXSkobmV3IHl5LkFjY2VzcygkJFskMF0pKV0pO1xuYnJlYWs7XG5jYXNlIDg5OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwXSwgXyRbJDBdKShuZXcgeXkuQWNjZXNzKG5ldyB5eS5MaXRlcmFsKCdwcm90b3R5cGUnKSkpO1xuYnJlYWs7XG5jYXNlIDkwOnRoaXMuJCA9ICQkWyQwXTtcbmJyZWFrO1xuY2FzZSA5MTp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0yXSwgXyRbJDBdKSgkJFskMC0xXSk7XG5icmVhaztcbmNhc2UgOTI6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMV0sIF8kWyQwXSkoeXkuZXh0ZW5kKCQkWyQwXSwge1xuICAgICAgICAgIHNvYWs6IHRydWVcbiAgICAgICAgfSkpO1xuYnJlYWs7XG5jYXNlIDkzOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwXSwgXyRbJDBdKShuZXcgeXkuSW5kZXgoJCRbJDBdKSk7XG5icmVhaztcbmNhc2UgOTQ6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDBdLCBfJFskMF0pKG5ldyB5eS5TbGljZSgkJFskMF0pKTtcbmJyZWFrO1xuY2FzZSA5NTp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0zXSwgXyRbJDBdKShuZXcgeXkuT2JqKCQkWyQwLTJdLCAkJFskMC0zXS5nZW5lcmF0ZWQpKTtcbmJyZWFrO1xuY2FzZSA5Njp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMF0sIF8kWyQwXSkoW10pO1xuYnJlYWs7XG5jYXNlIDk3OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwXSwgXyRbJDBdKShbJCRbJDBdXSk7XG5icmVhaztcbmNhc2UgOTg6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMl0sIF8kWyQwXSkoJCRbJDAtMl0uY29uY2F0KCQkWyQwXSkpO1xuYnJlYWs7XG5jYXNlIDk5OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTNdLCBfJFskMF0pKCQkWyQwLTNdLmNvbmNhdCgkJFskMF0pKTtcbmJyZWFrO1xuY2FzZSAxMDA6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtNV0sIF8kWyQwXSkoJCRbJDAtNV0uY29uY2F0KCQkWyQwLTJdKSk7XG5icmVhaztcbmNhc2UgMTAxOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwXSwgXyRbJDBdKShuZXcgeXkuQ2xhc3MpO1xuYnJlYWs7XG5jYXNlIDEwMjp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0xXSwgXyRbJDBdKShuZXcgeXkuQ2xhc3MobnVsbCwgbnVsbCwgJCRbJDBdKSk7XG5icmVhaztcbmNhc2UgMTAzOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTJdLCBfJFskMF0pKG5ldyB5eS5DbGFzcyhudWxsLCAkJFskMF0pKTtcbmJyZWFrO1xuY2FzZSAxMDQ6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtM10sIF8kWyQwXSkobmV3IHl5LkNsYXNzKG51bGwsICQkWyQwLTFdLCAkJFskMF0pKTtcbmJyZWFrO1xuY2FzZSAxMDU6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMV0sIF8kWyQwXSkobmV3IHl5LkNsYXNzKCQkWyQwXSkpO1xuYnJlYWs7XG5jYXNlIDEwNjp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0yXSwgXyRbJDBdKShuZXcgeXkuQ2xhc3MoJCRbJDAtMV0sIG51bGwsICQkWyQwXSkpO1xuYnJlYWs7XG5jYXNlIDEwNzp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0zXSwgXyRbJDBdKShuZXcgeXkuQ2xhc3MoJCRbJDAtMl0sICQkWyQwXSkpO1xuYnJlYWs7XG5jYXNlIDEwODp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC00XSwgXyRbJDBdKShuZXcgeXkuQ2xhc3MoJCRbJDAtM10sICQkWyQwLTFdLCAkJFskMF0pKTtcbmJyZWFrO1xuY2FzZSAxMDk6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMl0sIF8kWyQwXSkobmV3IHl5LkNhbGwoJCRbJDAtMl0sICQkWyQwXSwgJCRbJDAtMV0pKTtcbmJyZWFrO1xuY2FzZSAxMTA6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMl0sIF8kWyQwXSkobmV3IHl5LkNhbGwoJCRbJDAtMl0sICQkWyQwXSwgJCRbJDAtMV0pKTtcbmJyZWFrO1xuY2FzZSAxMTE6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDBdLCBfJFskMF0pKG5ldyB5eS5DYWxsKCdzdXBlcicsIFtuZXcgeXkuU3BsYXQobmV3IHl5LkxpdGVyYWwoJ2FyZ3VtZW50cycpKV0pKTtcbmJyZWFrO1xuY2FzZSAxMTI6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMV0sIF8kWyQwXSkobmV3IHl5LkNhbGwoJ3N1cGVyJywgJCRbJDBdKSk7XG5icmVhaztcbmNhc2UgMTEzOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTFdLCBfJFskMF0pKG5ldyB5eS5EZWZlcigkJFskMF0sIHl5bGluZW5vKSk7XG5icmVhaztcbmNhc2UgMTE0OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwXSwgXyRbJDBdKShmYWxzZSk7XG5icmVhaztcbmNhc2UgMTE1OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwXSwgXyRbJDBdKSh0cnVlKTtcbmJyZWFrO1xuY2FzZSAxMTY6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMV0sIF8kWyQwXSkoW10pO1xuYnJlYWs7XG5jYXNlIDExNzp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0zXSwgXyRbJDBdKSgkJFskMC0yXSk7XG5icmVhaztcbmNhc2UgMTE4OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwXSwgXyRbJDBdKShuZXcgeXkuVmFsdWUobmV3IHl5LkxpdGVyYWwoJ3RoaXMnKSkpO1xuYnJlYWs7XG5jYXNlIDExOTp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMF0sIF8kWyQwXSkobmV3IHl5LlZhbHVlKG5ldyB5eS5MaXRlcmFsKCd0aGlzJykpKTtcbmJyZWFrO1xuY2FzZSAxMjA6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMV0sIF8kWyQwXSkobmV3IHl5LlZhbHVlKHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTFdKShuZXcgeXkuTGl0ZXJhbCgndGhpcycpKSwgW3l5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwXSkobmV3IHl5LkFjY2VzcygkJFskMF0pKV0sICd0aGlzJykpO1xuYnJlYWs7XG5jYXNlIDEyMTp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0xXSwgXyRbJDBdKShuZXcgeXkuQXJyKFtdKSk7XG5icmVhaztcbmNhc2UgMTIyOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTNdLCBfJFskMF0pKG5ldyB5eS5BcnIoJCRbJDAtMl0pKTtcbmJyZWFrO1xuY2FzZSAxMjM6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDBdLCBfJFskMF0pKCdpbmNsdXNpdmUnKTtcbmJyZWFrO1xuY2FzZSAxMjQ6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDBdLCBfJFskMF0pKCdleGNsdXNpdmUnKTtcbmJyZWFrO1xuY2FzZSAxMjU6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtNF0sIF8kWyQwXSkobmV3IHl5LlJhbmdlKCQkWyQwLTNdLCAkJFskMC0xXSwgJCRbJDAtMl0pKTtcbmJyZWFrO1xuY2FzZSAxMjY6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMl0sIF8kWyQwXSkobmV3IHl5LlJhbmdlKCQkWyQwLTJdLCAkJFskMF0sICQkWyQwLTFdKSk7XG5icmVhaztcbmNhc2UgMTI3OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTFdLCBfJFskMF0pKG5ldyB5eS5SYW5nZSgkJFskMC0xXSwgbnVsbCwgJCRbJDBdKSk7XG5icmVhaztcbmNhc2UgMTI4OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTFdLCBfJFskMF0pKG5ldyB5eS5SYW5nZShudWxsLCAkJFskMF0sICQkWyQwLTFdKSk7XG5icmVhaztcbmNhc2UgMTI5OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwXSwgXyRbJDBdKShuZXcgeXkuUmFuZ2UobnVsbCwgbnVsbCwgJCRbJDBdKSk7XG5icmVhaztcbmNhc2UgMTMwOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwXSwgXyRbJDBdKShbJCRbJDBdXSk7XG5icmVhaztcbmNhc2UgMTMxOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTJdLCBfJFskMF0pKCQkWyQwLTJdLmNvbmNhdCgkJFskMF0pKTtcbmJyZWFrO1xuY2FzZSAxMzI6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtM10sIF8kWyQwXSkoJCRbJDAtM10uY29uY2F0KCQkWyQwXSkpO1xuYnJlYWs7XG5jYXNlIDEzMzp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0zXSwgXyRbJDBdKSgkJFskMC0yXSk7XG5icmVhaztcbmNhc2UgMTM0OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTVdLCBfJFskMF0pKCQkWyQwLTVdLmNvbmNhdCgkJFskMC0yXSkpO1xuYnJlYWs7XG5jYXNlIDEzNTp0aGlzLiQgPSAkJFskMF07XG5icmVhaztcbmNhc2UgMTM2OnRoaXMuJCA9ICQkWyQwXTtcbmJyZWFrO1xuY2FzZSAxMzc6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDBdLCBfJFskMF0pKG5ldyB5eS5FeHBhbnNpb24pO1xuYnJlYWs7XG5jYXNlIDEzODp0aGlzLiQgPSAkJFskMF07XG5icmVhaztcbmNhc2UgMTM5OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTJdLCBfJFskMF0pKFtdLmNvbmNhdCgkJFskMC0yXSwgJCRbJDBdKSk7XG5icmVhaztcbmNhc2UgMTQwOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTFdLCBfJFskMF0pKG5ldyB5eS5UcnkoJCRbJDBdKSk7XG5icmVhaztcbmNhc2UgMTQxOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTJdLCBfJFskMF0pKG5ldyB5eS5UcnkoJCRbJDAtMV0sICQkWyQwXVswXSwgJCRbJDBdWzFdKSk7XG5icmVhaztcbmNhc2UgMTQyOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTNdLCBfJFskMF0pKG5ldyB5eS5UcnkoJCRbJDAtMl0sIG51bGwsIG51bGwsICQkWyQwXSkpO1xuYnJlYWs7XG5jYXNlIDE0Mzp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC00XSwgXyRbJDBdKShuZXcgeXkuVHJ5KCQkWyQwLTNdLCAkJFskMC0yXVswXSwgJCRbJDAtMl1bMV0sICQkWyQwXSkpO1xuYnJlYWs7XG5jYXNlIDE0NDp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0yXSwgXyRbJDBdKShbJCRbJDAtMV0sICQkWyQwXV0pO1xuYnJlYWs7XG5jYXNlIDE0NTp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0yXSwgXyRbJDBdKShbeXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMV0pKG5ldyB5eS5WYWx1ZSgkJFskMC0xXSkpLCAkJFskMF1dKTtcbmJyZWFrO1xuY2FzZSAxNDY6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMV0sIF8kWyQwXSkoW251bGwsICQkWyQwXV0pO1xuYnJlYWs7XG5jYXNlIDE0Nzp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0xXSwgXyRbJDBdKShuZXcgeXkuVGhyb3coJCRbJDBdKSk7XG5icmVhaztcbmNhc2UgMTQ4OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTJdLCBfJFskMF0pKG5ldyB5eS5QYXJlbnMoJCRbJDAtMV0pKTtcbmJyZWFrO1xuY2FzZSAxNDk6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtNF0sIF8kWyQwXSkobmV3IHl5LlBhcmVucygkJFskMC0yXSkpO1xuYnJlYWs7XG5jYXNlIDE1MDp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0xXSwgXyRbJDBdKShuZXcgeXkuV2hpbGUoJCRbJDBdKSk7XG5icmVhaztcbmNhc2UgMTUxOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTNdLCBfJFskMF0pKG5ldyB5eS5XaGlsZSgkJFskMC0yXSwge1xuICAgICAgICAgIGd1YXJkOiAkJFskMF1cbiAgICAgICAgfSkpO1xuYnJlYWs7XG5jYXNlIDE1Mjp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0xXSwgXyRbJDBdKShuZXcgeXkuV2hpbGUoJCRbJDBdLCB7XG4gICAgICAgICAgaW52ZXJ0OiB0cnVlXG4gICAgICAgIH0pKTtcbmJyZWFrO1xuY2FzZSAxNTM6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtM10sIF8kWyQwXSkobmV3IHl5LldoaWxlKCQkWyQwLTJdLCB7XG4gICAgICAgICAgaW52ZXJ0OiB0cnVlLFxuICAgICAgICAgIGd1YXJkOiAkJFskMF1cbiAgICAgICAgfSkpO1xuYnJlYWs7XG5jYXNlIDE1NDp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0xXSwgXyRbJDBdKSgkJFskMC0xXS5hZGRCb2R5KCQkWyQwXSkpO1xuYnJlYWs7XG5jYXNlIDE1NTp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0xXSwgXyRbJDBdKSgkJFskMF0uYWRkQm9keSh5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0xXSkoeXkuQmxvY2sud3JhcChbJCRbJDAtMV1dKSkpKTtcbmJyZWFrO1xuY2FzZSAxNTY6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMV0sIF8kWyQwXSkoJCRbJDBdLmFkZEJvZHkoeXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMV0pKHl5LkJsb2NrLndyYXAoWyQkWyQwLTFdXSkpKSk7XG5icmVhaztcbmNhc2UgMTU3OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwXSwgXyRbJDBdKSgkJFskMF0pO1xuYnJlYWs7XG5jYXNlIDE1ODp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0xXSwgXyRbJDBdKShuZXcgeXkuV2hpbGUoeXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMV0pKG5ldyB5eS5MaXRlcmFsKCd0cnVlJykpKS5hZGRCb2R5KCQkWyQwXSkpO1xuYnJlYWs7XG5jYXNlIDE1OTp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0xXSwgXyRbJDBdKShuZXcgeXkuV2hpbGUoeXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMV0pKG5ldyB5eS5MaXRlcmFsKCd0cnVlJykpKS5hZGRCb2R5KHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwXSkoeXkuQmxvY2sud3JhcChbJCRbJDBdXSkpKSk7XG5icmVhaztcbmNhc2UgMTYwOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTFdLCBfJFskMF0pKG5ldyB5eS5Gb3IoJCRbJDAtMV0sICQkWyQwXSkpO1xuYnJlYWs7XG5jYXNlIDE2MTp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0xXSwgXyRbJDBdKShuZXcgeXkuRm9yKCQkWyQwLTFdLCAkJFskMF0pKTtcbmJyZWFrO1xuY2FzZSAxNjI6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMV0sIF8kWyQwXSkobmV3IHl5LkZvcigkJFskMF0sICQkWyQwLTFdKSk7XG5icmVhaztcbmNhc2UgMTYzOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTFdLCBfJFskMF0pKHtcbiAgICAgICAgICBzb3VyY2U6IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwXSkobmV3IHl5LlZhbHVlKCQkWyQwXSkpXG4gICAgICAgIH0pO1xuYnJlYWs7XG5jYXNlIDE2NDp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0xXSwgXyRbJDBdKSgoZnVuY3Rpb24gKCkge1xuICAgICAgICAkJFskMF0ub3duID0gJCRbJDAtMV0ub3duO1xuICAgICAgICAkJFskMF0ubmFtZSA9ICQkWyQwLTFdWzBdO1xuICAgICAgICAkJFskMF0uaW5kZXggPSAkJFskMC0xXVsxXTtcbiAgICAgICAgcmV0dXJuICQkWyQwXTtcbiAgICAgIH0oKSkpO1xuYnJlYWs7XG5jYXNlIDE2NTp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0xXSwgXyRbJDBdKSgkJFskMF0pO1xuYnJlYWs7XG5jYXNlIDE2Njp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0yXSwgXyRbJDBdKSgoZnVuY3Rpb24gKCkge1xuICAgICAgICAkJFskMF0ub3duID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuICQkWyQwXTtcbiAgICAgIH0oKSkpO1xuYnJlYWs7XG5jYXNlIDE2Nzp0aGlzLiQgPSAkJFskMF07XG5icmVhaztcbmNhc2UgMTY4OnRoaXMuJCA9ICQkWyQwXTtcbmJyZWFrO1xuY2FzZSAxNjk6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDBdLCBfJFskMF0pKG5ldyB5eS5WYWx1ZSgkJFskMF0pKTtcbmJyZWFrO1xuY2FzZSAxNzA6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDBdLCBfJFskMF0pKG5ldyB5eS5WYWx1ZSgkJFskMF0pKTtcbmJyZWFrO1xuY2FzZSAxNzE6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDBdLCBfJFskMF0pKFskJFskMF1dKTtcbmJyZWFrO1xuY2FzZSAxNzI6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMl0sIF8kWyQwXSkoWyQkWyQwLTJdLCAkJFskMF1dKTtcbmJyZWFrO1xuY2FzZSAxNzM6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMV0sIF8kWyQwXSkoe1xuICAgICAgICAgIHNvdXJjZTogJCRbJDBdXG4gICAgICAgIH0pO1xuYnJlYWs7XG5jYXNlIDE3NDp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0xXSwgXyRbJDBdKSh7XG4gICAgICAgICAgc291cmNlOiAkJFskMF0sXG4gICAgICAgICAgb2JqZWN0OiB0cnVlXG4gICAgICAgIH0pO1xuYnJlYWs7XG5jYXNlIDE3NTp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0zXSwgXyRbJDBdKSh7XG4gICAgICAgICAgc291cmNlOiAkJFskMC0yXSxcbiAgICAgICAgICBndWFyZDogJCRbJDBdXG4gICAgICAgIH0pO1xuYnJlYWs7XG5jYXNlIDE3Njp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0zXSwgXyRbJDBdKSh7XG4gICAgICAgICAgc291cmNlOiAkJFskMC0yXSxcbiAgICAgICAgICBndWFyZDogJCRbJDBdLFxuICAgICAgICAgIG9iamVjdDogdHJ1ZVxuICAgICAgICB9KTtcbmJyZWFrO1xuY2FzZSAxNzc6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtM10sIF8kWyQwXSkoe1xuICAgICAgICAgIHNvdXJjZTogJCRbJDAtMl0sXG4gICAgICAgICAgc3RlcDogJCRbJDBdXG4gICAgICAgIH0pO1xuYnJlYWs7XG5jYXNlIDE3ODp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC01XSwgXyRbJDBdKSh7XG4gICAgICAgICAgc291cmNlOiAkJFskMC00XSxcbiAgICAgICAgICBndWFyZDogJCRbJDAtMl0sXG4gICAgICAgICAgc3RlcDogJCRbJDBdXG4gICAgICAgIH0pO1xuYnJlYWs7XG5jYXNlIDE3OTp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC01XSwgXyRbJDBdKSh7XG4gICAgICAgICAgc291cmNlOiAkJFskMC00XSxcbiAgICAgICAgICBzdGVwOiAkJFskMC0yXSxcbiAgICAgICAgICBndWFyZDogJCRbJDBdXG4gICAgICAgIH0pO1xuYnJlYWs7XG5jYXNlIDE4MDp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC00XSwgXyRbJDBdKShuZXcgeXkuU3dpdGNoKCQkWyQwLTNdLCAkJFskMC0xXSkpO1xuYnJlYWs7XG5jYXNlIDE4MTp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC02XSwgXyRbJDBdKShuZXcgeXkuU3dpdGNoKCQkWyQwLTVdLCAkJFskMC0zXSwgJCRbJDAtMV0pKTtcbmJyZWFrO1xuY2FzZSAxODI6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtM10sIF8kWyQwXSkobmV3IHl5LlN3aXRjaChudWxsLCAkJFskMC0xXSkpO1xuYnJlYWs7XG5jYXNlIDE4Mzp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC01XSwgXyRbJDBdKShuZXcgeXkuU3dpdGNoKG51bGwsICQkWyQwLTNdLCAkJFskMC0xXSkpO1xuYnJlYWs7XG5jYXNlIDE4NDp0aGlzLiQgPSAkJFskMF07XG5icmVhaztcbmNhc2UgMTg1OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTFdLCBfJFskMF0pKCQkWyQwLTFdLmNvbmNhdCgkJFskMF0pKTtcbmJyZWFrO1xuY2FzZSAxODY6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMl0sIF8kWyQwXSkoW1skJFskMC0xXSwgJCRbJDBdXV0pO1xuYnJlYWs7XG5jYXNlIDE4Nzp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0zXSwgXyRbJDBdKShbWyQkWyQwLTJdLCAkJFskMC0xXV1dKTtcbmJyZWFrO1xuY2FzZSAxODg6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMl0sIF8kWyQwXSkobmV3IHl5LklmKCQkWyQwLTFdLCAkJFskMF0sIHtcbiAgICAgICAgICB0eXBlOiAkJFskMC0yXVxuICAgICAgICB9KSk7XG5icmVhaztcbmNhc2UgMTg5OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTRdLCBfJFskMF0pKCQkWyQwLTRdLmFkZEVsc2UoeXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMl0sIF8kWyQwXSkobmV3IHl5LklmKCQkWyQwLTFdLCAkJFskMF0sIHtcbiAgICAgICAgICB0eXBlOiAkJFskMC0yXVxuICAgICAgICB9KSkpKTtcbmJyZWFrO1xuY2FzZSAxOTA6dGhpcy4kID0gJCRbJDBdO1xuYnJlYWs7XG5jYXNlIDE5MTp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0yXSwgXyRbJDBdKSgkJFskMC0yXS5hZGRFbHNlKCQkWyQwXSkpO1xuYnJlYWs7XG5jYXNlIDE5Mjp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0yXSwgXyRbJDBdKShuZXcgeXkuSWYoJCRbJDBdLCB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0yXSkoeXkuQmxvY2sud3JhcChbJCRbJDAtMl1dKSksIHtcbiAgICAgICAgICB0eXBlOiAkJFskMC0xXSxcbiAgICAgICAgICBzdGF0ZW1lbnQ6IHRydWVcbiAgICAgICAgfSkpO1xuYnJlYWs7XG5jYXNlIDE5Mzp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0yXSwgXyRbJDBdKShuZXcgeXkuSWYoJCRbJDBdLCB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0yXSkoeXkuQmxvY2sud3JhcChbJCRbJDAtMl1dKSksIHtcbiAgICAgICAgICB0eXBlOiAkJFskMC0xXSxcbiAgICAgICAgICBzdGF0ZW1lbnQ6IHRydWVcbiAgICAgICAgfSkpO1xuYnJlYWs7XG5jYXNlIDE5NDp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0xXSwgXyRbJDBdKShuZXcgeXkuT3AoJCRbJDAtMV0sICQkWyQwXSkpO1xuYnJlYWs7XG5jYXNlIDE5NTp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0xXSwgXyRbJDBdKShuZXcgeXkuT3AoJCRbJDAtMV0sICQkWyQwXSkpO1xuYnJlYWs7XG5jYXNlIDE5Njp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0xXSwgXyRbJDBdKShuZXcgeXkuT3AoJy0nLCAkJFskMF0pKTtcbmJyZWFrO1xuY2FzZSAxOTc6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMV0sIF8kWyQwXSkobmV3IHl5Lk9wKCcrJywgJCRbJDBdKSk7XG5icmVhaztcbmNhc2UgMTk4OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTFdLCBfJFskMF0pKG5ldyB5eS5PcCgkJFskMC0xXSwgJCRbJDBdKSk7XG5icmVhaztcbmNhc2UgMTk5OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTFdLCBfJFskMF0pKG5ldyB5eS5PcCgkJFskMC0xXSwgJCRbJDBdKSk7XG5icmVhaztcbmNhc2UgMjAwOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTJdLCBfJFskMF0pKG5ldyB5eS5PcCgkJFskMC0yXS5jb25jYXQoJCRbJDAtMV0pLCAkJFskMF0pKTtcbmJyZWFrO1xuY2FzZSAyMDE6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMV0sIF8kWyQwXSkobmV3IHl5Lk9wKCctLScsICQkWyQwXSkpO1xuYnJlYWs7XG5jYXNlIDIwMjp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0xXSwgXyRbJDBdKShuZXcgeXkuT3AoJysrJywgJCRbJDBdKSk7XG5icmVhaztcbmNhc2UgMjAzOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTFdLCBfJFskMF0pKG5ldyB5eS5PcCgnLS0nLCAkJFskMC0xXSwgbnVsbCwgdHJ1ZSkpO1xuYnJlYWs7XG5jYXNlIDIwNDp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0xXSwgXyRbJDBdKShuZXcgeXkuT3AoJysrJywgJCRbJDAtMV0sIG51bGwsIHRydWUpKTtcbmJyZWFrO1xuY2FzZSAyMDU6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMV0sIF8kWyQwXSkobmV3IHl5LkV4aXN0ZW5jZSgkJFskMC0xXSkpO1xuYnJlYWs7XG5jYXNlIDIwNjp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0yXSwgXyRbJDBdKShuZXcgeXkuT3AoJysnLCAkJFskMC0yXSwgJCRbJDBdKSk7XG5icmVhaztcbmNhc2UgMjA3OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTJdLCBfJFskMF0pKG5ldyB5eS5PcCgnLScsICQkWyQwLTJdLCAkJFskMF0pKTtcbmJyZWFrO1xuY2FzZSAyMDg6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMl0sIF8kWyQwXSkobmV3IHl5Lk9wKCQkWyQwLTFdLCAkJFskMC0yXSwgJCRbJDBdKSk7XG5icmVhaztcbmNhc2UgMjA5OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTJdLCBfJFskMF0pKG5ldyB5eS5PcCgkJFskMC0xXSwgJCRbJDAtMl0sICQkWyQwXSkpO1xuYnJlYWs7XG5jYXNlIDIxMDp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0yXSwgXyRbJDBdKShuZXcgeXkuT3AoJCRbJDAtMV0sICQkWyQwLTJdLCAkJFskMF0pKTtcbmJyZWFrO1xuY2FzZSAyMTE6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMl0sIF8kWyQwXSkobmV3IHl5Lk9wKCQkWyQwLTFdLCAkJFskMC0yXSwgJCRbJDBdKSk7XG5icmVhaztcbmNhc2UgMjEyOnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTJdLCBfJFskMF0pKG5ldyB5eS5PcCgkJFskMC0xXSwgJCRbJDAtMl0sICQkWyQwXSkpO1xuYnJlYWs7XG5jYXNlIDIxMzp0aGlzLiQgPSB5eS5hZGRMb2NhdGlvbkRhdGFGbihfJFskMC0yXSwgXyRbJDBdKSgoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoJCRbJDAtMV0uY2hhckF0KDApID09PSAnIScpIHtcbiAgICAgICAgICByZXR1cm4gbmV3IHl5Lk9wKCQkWyQwLTFdLnNsaWNlKDEpLCAkJFskMC0yXSwgJCRbJDBdKS5pbnZlcnQoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gbmV3IHl5Lk9wKCQkWyQwLTFdLCAkJFskMC0yXSwgJCRbJDBdKTtcbiAgICAgICAgfVxuICAgICAgfSgpKSk7XG5icmVhaztcbmNhc2UgMjE0OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTJdLCBfJFskMF0pKG5ldyB5eS5Bc3NpZ24oJCRbJDAtMl0sICQkWyQwXSwgJCRbJDAtMV0pKTtcbmJyZWFrO1xuY2FzZSAyMTU6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtNF0sIF8kWyQwXSkobmV3IHl5LkFzc2lnbigkJFskMC00XSwgJCRbJDAtMV0sICQkWyQwLTNdKSk7XG5icmVhaztcbmNhc2UgMjE2OnRoaXMuJCA9IHl5LmFkZExvY2F0aW9uRGF0YUZuKF8kWyQwLTNdLCBfJFskMF0pKG5ldyB5eS5Bc3NpZ24oJCRbJDAtM10sICQkWyQwXSwgJCRbJDAtMl0pKTtcbmJyZWFrO1xuY2FzZSAyMTc6dGhpcy4kID0geXkuYWRkTG9jYXRpb25EYXRhRm4oXyRbJDAtMl0sIF8kWyQwXSkobmV3IHl5LkV4dGVuZHMoJCRbJDAtMl0sICQkWyQwXSkpO1xuYnJlYWs7XG59XG59LFxudGFibGU6IFt7MTpbMiwxXSwzOjEsNDoyLDU6Myw3OjQsODo1LDk6MTksMTA6MjAsMTE6WzEsMjFdLDEyOjIyLDEzOlsxLDUwXSwxNTo2LDE2OjcsMTc6OCwxODo5LDE5OjEwLDIwOjExLDIxOjEyLDIyOjEzLDIzOjE0LDI0OjE1LDI1OjE2LDI2OjE3LDI3OjE4LDMwOjY2LDMxOlsxLDc3XSwzMjo1MywzMzpbMSw3NV0sMzQ6WzEsNzZdLDM1OjI0LDM2OlsxLDU0XSwzNzpbMSw1NV0sMzg6WzEsNTZdLDM5OlsxLDU3XSw0MDpbMSw1OF0sNDE6WzEsNTldLDQyOjIzLDQ3OjY3LDQ4OlsxLDQ4XSw0OTpbMSw0OV0sNTA6WzEsMjldLDUzOjMwLDU0OlsxLDY0XSw1NTpbMSw2NV0sNjE6NTEsNjI6NTIsNjQ6MzgsNjY6MjUsNjc6MjYsNjg6MjcsNzk6WzEsNzRdLDgyOlsxLDQ1XSw4NjpbMSwyOF0sODc6WzEsNDddLDkyOlsxLDYyXSw5MzpbMSw2M10sOTQ6WzEsNjFdLDEwMDpbMSw0MF0sMTA0OlsxLDQ2XSwxMDU6WzEsNjBdLDEwNzo0MSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTExOjQyLDExMjpbMSw3MV0sMTEzOjQzLDExNDpbMSw3Ml0sMTE1OjczLDEyMzpbMSw0NF0sMTI4OjM5LDEyOTpbMSw2OF0sMTMxOlsxLDMxXSwxMzI6WzEsMzJdLDEzMzpbMSwzM10sMTM0OlsxLDM0XSwxMzU6WzEsMzVdLDEzNzpbMSwzNl0sMTM4OlsxLDM3XX0sezE6WzNdfSx7MTpbMiwyXSw2OlsxLDc4XX0sezE6WzIsM10sNjpbMiwzXSwyOTpbMiwzXSwxMDY6WzIsM119LHsxOlsyLDZdLDY6WzIsNl0sMjk6WzIsNl0sMTA2OlsyLDZdLDEwNzo4OSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTEzOjkwLDExNDpbMSw3Ml0sMTE1OjczLDEzMDpbMSw4OF0sMTMzOlsxLDgxXSwxMzQ6WzEsODBdLDEzOTpbMSw3OV0sMTQwOlsxLDgyXSwxNDE6WzEsODNdLDE0MjpbMSw4NF0sMTQzOlsxLDg1XSwxNDQ6WzEsODZdLDE0NTpbMSw4N119LHsxOlsyLDddLDY6WzIsN10sMjk6WzIsN10sMTA2OlsyLDddLDEwNzo5MiwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTEzOjkzLDExNDpbMSw3Ml0sMTE1OjczLDEzMDpbMSw5MV19LHsxOlsyLDE0XSw2OlsyLDE0XSwyODpbMiwxNF0sMjk6WzIsMTRdLDUyOlsyLDE0XSw1NzpbMiwxNF0sNjA6WzIsMTRdLDY1Ojk1LDY5OlsxLDk3XSw3MDpbMSw5OF0sNzE6WzEsOTldLDcyOlsxLDEwMF0sNzM6MTAxLDc0OlsxLDEwMl0sNzY6WzIsMTRdLDc3OlsxLDEwM10sODE6WzIsMTRdLDg0Ojk0LDg4OlsxLDk2XSw4OTpbMiwxMTRdLDkwOlsyLDE0XSw5NTpbMiwxNF0sOTc6WzIsMTRdLDEwNjpbMiwxNF0sMTA4OlsyLDE0XSwxMDk6WzIsMTRdLDExMDpbMiwxNF0sMTE0OlsyLDE0XSwxMjI6WzIsMTRdLDEzMDpbMiwxNF0sMTMzOlsyLDE0XSwxMzQ6WzIsMTRdLDEzOTpbMiwxNF0sMTQwOlsyLDE0XSwxNDE6WzIsMTRdLDE0MjpbMiwxNF0sMTQzOlsyLDE0XSwxNDQ6WzIsMTRdLDE0NTpbMiwxNF19LHsxOlsyLDE1XSw2OlsyLDE1XSwyODpbMiwxNV0sMjk6WzIsMTVdLDUyOlsyLDE1XSw1NzpbMiwxNV0sNjA6WzIsMTVdLDY1OjEwNSw2OTpbMSw5N10sNzA6WzEsOThdLDcxOlsxLDk5XSw3MjpbMSwxMDBdLDczOjEwMSw3NDpbMSwxMDJdLDc2OlsyLDE1XSw3NzpbMSwxMDNdLDgxOlsyLDE1XSw4NDoxMDQsODg6WzEsOTZdLDg5OlsyLDExNF0sOTA6WzIsMTVdLDk1OlsyLDE1XSw5NzpbMiwxNV0sMTA2OlsyLDE1XSwxMDg6WzIsMTVdLDEwOTpbMiwxNV0sMTEwOlsyLDE1XSwxMTQ6WzIsMTVdLDEyMjpbMiwxNV0sMTMwOlsyLDE1XSwxMzM6WzIsMTVdLDEzNDpbMiwxNV0sMTM5OlsyLDE1XSwxNDA6WzIsMTVdLDE0MTpbMiwxNV0sMTQyOlsyLDE1XSwxNDM6WzIsMTVdLDE0NDpbMiwxNV0sMTQ1OlsyLDE1XX0sezE6WzIsMTZdLDY6WzIsMTZdLDI4OlsyLDE2XSwyOTpbMiwxNl0sNTI6WzIsMTZdLDU3OlsyLDE2XSw2MDpbMiwxNl0sNzY6WzIsMTZdLDgxOlsyLDE2XSw5MDpbMiwxNl0sOTU6WzIsMTZdLDk3OlsyLDE2XSwxMDY6WzIsMTZdLDEwODpbMiwxNl0sMTA5OlsyLDE2XSwxMTA6WzIsMTZdLDExNDpbMiwxNl0sMTIyOlsyLDE2XSwxMzA6WzIsMTZdLDEzMzpbMiwxNl0sMTM0OlsyLDE2XSwxMzk6WzIsMTZdLDE0MDpbMiwxNl0sMTQxOlsyLDE2XSwxNDI6WzIsMTZdLDE0MzpbMiwxNl0sMTQ0OlsyLDE2XSwxNDU6WzIsMTZdfSx7MTpbMiwxN10sNjpbMiwxN10sMjg6WzIsMTddLDI5OlsyLDE3XSw1MjpbMiwxN10sNTc6WzIsMTddLDYwOlsyLDE3XSw3NjpbMiwxN10sODE6WzIsMTddLDkwOlsyLDE3XSw5NTpbMiwxN10sOTc6WzIsMTddLDEwNjpbMiwxN10sMTA4OlsyLDE3XSwxMDk6WzIsMTddLDExMDpbMiwxN10sMTE0OlsyLDE3XSwxMjI6WzIsMTddLDEzMDpbMiwxN10sMTMzOlsyLDE3XSwxMzQ6WzIsMTddLDEzOTpbMiwxN10sMTQwOlsyLDE3XSwxNDE6WzIsMTddLDE0MjpbMiwxN10sMTQzOlsyLDE3XSwxNDQ6WzIsMTddLDE0NTpbMiwxN119LHsxOlsyLDE4XSw2OlsyLDE4XSwyODpbMiwxOF0sMjk6WzIsMThdLDUyOlsyLDE4XSw1NzpbMiwxOF0sNjA6WzIsMThdLDc2OlsyLDE4XSw4MTpbMiwxOF0sOTA6WzIsMThdLDk1OlsyLDE4XSw5NzpbMiwxOF0sMTA2OlsyLDE4XSwxMDg6WzIsMThdLDEwOTpbMiwxOF0sMTEwOlsyLDE4XSwxMTQ6WzIsMThdLDEyMjpbMiwxOF0sMTMwOlsyLDE4XSwxMzM6WzIsMThdLDEzNDpbMiwxOF0sMTM5OlsyLDE4XSwxNDA6WzIsMThdLDE0MTpbMiwxOF0sMTQyOlsyLDE4XSwxNDM6WzIsMThdLDE0NDpbMiwxOF0sMTQ1OlsyLDE4XX0sezE6WzIsMTldLDY6WzIsMTldLDI4OlsyLDE5XSwyOTpbMiwxOV0sNTI6WzIsMTldLDU3OlsyLDE5XSw2MDpbMiwxOV0sNzY6WzIsMTldLDgxOlsyLDE5XSw5MDpbMiwxOV0sOTU6WzIsMTldLDk3OlsyLDE5XSwxMDY6WzIsMTldLDEwODpbMiwxOV0sMTA5OlsyLDE5XSwxMTA6WzIsMTldLDExNDpbMiwxOV0sMTIyOlsyLDE5XSwxMzA6WzIsMTldLDEzMzpbMiwxOV0sMTM0OlsyLDE5XSwxMzk6WzIsMTldLDE0MDpbMiwxOV0sMTQxOlsyLDE5XSwxNDI6WzIsMTldLDE0MzpbMiwxOV0sMTQ0OlsyLDE5XSwxNDU6WzIsMTldfSx7MTpbMiwyMF0sNjpbMiwyMF0sMjg6WzIsMjBdLDI5OlsyLDIwXSw1MjpbMiwyMF0sNTc6WzIsMjBdLDYwOlsyLDIwXSw3NjpbMiwyMF0sODE6WzIsMjBdLDkwOlsyLDIwXSw5NTpbMiwyMF0sOTc6WzIsMjBdLDEwNjpbMiwyMF0sMTA4OlsyLDIwXSwxMDk6WzIsMjBdLDExMDpbMiwyMF0sMTE0OlsyLDIwXSwxMjI6WzIsMjBdLDEzMDpbMiwyMF0sMTMzOlsyLDIwXSwxMzQ6WzIsMjBdLDEzOTpbMiwyMF0sMTQwOlsyLDIwXSwxNDE6WzIsMjBdLDE0MjpbMiwyMF0sMTQzOlsyLDIwXSwxNDQ6WzIsMjBdLDE0NTpbMiwyMF19LHsxOlsyLDIxXSw2OlsyLDIxXSwyODpbMiwyMV0sMjk6WzIsMjFdLDUyOlsyLDIxXSw1NzpbMiwyMV0sNjA6WzIsMjFdLDc2OlsyLDIxXSw4MTpbMiwyMV0sOTA6WzIsMjFdLDk1OlsyLDIxXSw5NzpbMiwyMV0sMTA2OlsyLDIxXSwxMDg6WzIsMjFdLDEwOTpbMiwyMV0sMTEwOlsyLDIxXSwxMTQ6WzIsMjFdLDEyMjpbMiwyMV0sMTMwOlsyLDIxXSwxMzM6WzIsMjFdLDEzNDpbMiwyMV0sMTM5OlsyLDIxXSwxNDA6WzIsMjFdLDE0MTpbMiwyMV0sMTQyOlsyLDIxXSwxNDM6WzIsMjFdLDE0NDpbMiwyMV0sMTQ1OlsyLDIxXX0sezE6WzIsMjJdLDY6WzIsMjJdLDI4OlsyLDIyXSwyOTpbMiwyMl0sNTI6WzIsMjJdLDU3OlsyLDIyXSw2MDpbMiwyMl0sNzY6WzIsMjJdLDgxOlsyLDIyXSw5MDpbMiwyMl0sOTU6WzIsMjJdLDk3OlsyLDIyXSwxMDY6WzIsMjJdLDEwODpbMiwyMl0sMTA5OlsyLDIyXSwxMTA6WzIsMjJdLDExNDpbMiwyMl0sMTIyOlsyLDIyXSwxMzA6WzIsMjJdLDEzMzpbMiwyMl0sMTM0OlsyLDIyXSwxMzk6WzIsMjJdLDE0MDpbMiwyMl0sMTQxOlsyLDIyXSwxNDI6WzIsMjJdLDE0MzpbMiwyMl0sMTQ0OlsyLDIyXSwxNDU6WzIsMjJdfSx7MTpbMiwyM10sNjpbMiwyM10sMjg6WzIsMjNdLDI5OlsyLDIzXSw1MjpbMiwyM10sNTc6WzIsMjNdLDYwOlsyLDIzXSw3NjpbMiwyM10sODE6WzIsMjNdLDkwOlsyLDIzXSw5NTpbMiwyM10sOTc6WzIsMjNdLDEwNjpbMiwyM10sMTA4OlsyLDIzXSwxMDk6WzIsMjNdLDExMDpbMiwyM10sMTE0OlsyLDIzXSwxMjI6WzIsMjNdLDEzMDpbMiwyM10sMTMzOlsyLDIzXSwxMzQ6WzIsMjNdLDEzOTpbMiwyM10sMTQwOlsyLDIzXSwxNDE6WzIsMjNdLDE0MjpbMiwyM10sMTQzOlsyLDIzXSwxNDQ6WzIsMjNdLDE0NTpbMiwyM119LHsxOlsyLDI0XSw2OlsyLDI0XSwyODpbMiwyNF0sMjk6WzIsMjRdLDUyOlsyLDI0XSw1NzpbMiwyNF0sNjA6WzIsMjRdLDc2OlsyLDI0XSw4MTpbMiwyNF0sOTA6WzIsMjRdLDk1OlsyLDI0XSw5NzpbMiwyNF0sMTA2OlsyLDI0XSwxMDg6WzIsMjRdLDEwOTpbMiwyNF0sMTEwOlsyLDI0XSwxMTQ6WzIsMjRdLDEyMjpbMiwyNF0sMTMwOlsyLDI0XSwxMzM6WzIsMjRdLDEzNDpbMiwyNF0sMTM5OlsyLDI0XSwxNDA6WzIsMjRdLDE0MTpbMiwyNF0sMTQyOlsyLDI0XSwxNDM6WzIsMjRdLDE0NDpbMiwyNF0sMTQ1OlsyLDI0XX0sezE6WzIsMjVdLDY6WzIsMjVdLDI4OlsyLDI1XSwyOTpbMiwyNV0sNTI6WzIsMjVdLDU3OlsyLDI1XSw2MDpbMiwyNV0sNzY6WzIsMjVdLDgxOlsyLDI1XSw5MDpbMiwyNV0sOTU6WzIsMjVdLDk3OlsyLDI1XSwxMDY6WzIsMjVdLDEwODpbMiwyNV0sMTA5OlsyLDI1XSwxMTA6WzIsMjVdLDExNDpbMiwyNV0sMTIyOlsyLDI1XSwxMzA6WzIsMjVdLDEzMzpbMiwyNV0sMTM0OlsyLDI1XSwxMzk6WzIsMjVdLDE0MDpbMiwyNV0sMTQxOlsyLDI1XSwxNDI6WzIsMjVdLDE0MzpbMiwyNV0sMTQ0OlsyLDI1XSwxNDU6WzIsMjVdfSx7MTpbMiwyNl0sNjpbMiwyNl0sMjg6WzIsMjZdLDI5OlsyLDI2XSw1MjpbMiwyNl0sNTc6WzIsMjZdLDYwOlsyLDI2XSw3NjpbMiwyNl0sODE6WzIsMjZdLDkwOlsyLDI2XSw5NTpbMiwyNl0sOTc6WzIsMjZdLDEwNjpbMiwyNl0sMTA4OlsyLDI2XSwxMDk6WzIsMjZdLDExMDpbMiwyNl0sMTE0OlsyLDI2XSwxMjI6WzIsMjZdLDEzMDpbMiwyNl0sMTMzOlsyLDI2XSwxMzQ6WzIsMjZdLDEzOTpbMiwyNl0sMTQwOlsyLDI2XSwxNDE6WzIsMjZdLDE0MjpbMiwyNl0sMTQzOlsyLDI2XSwxNDQ6WzIsMjZdLDE0NTpbMiwyNl19LHsxOlsyLDhdLDY6WzIsOF0sMjg6WzIsOF0sMjk6WzIsOF0sNTI6WzIsOF0sNTc6WzIsOF0sNjA6WzIsOF0sNzY6WzIsOF0sODE6WzIsOF0sOTA6WzIsOF0sOTU6WzIsOF0sOTc6WzIsOF0sMTA2OlsyLDhdLDEwODpbMiw4XSwxMDk6WzIsOF0sMTEwOlsyLDhdLDExNDpbMiw4XSwxMjI6WzIsOF0sMTMwOlsyLDhdLDEzMzpbMiw4XSwxMzQ6WzIsOF0sMTM5OlsyLDhdLDE0MDpbMiw4XSwxNDE6WzIsOF0sMTQyOlsyLDhdLDE0MzpbMiw4XSwxNDQ6WzIsOF0sMTQ1OlsyLDhdfSx7MTpbMiw5XSw2OlsyLDldLDI4OlsyLDldLDI5OlsyLDldLDUyOlsyLDldLDU3OlsyLDldLDYwOlsyLDldLDc2OlsyLDldLDgxOlsyLDldLDkwOlsyLDldLDk1OlsyLDldLDk3OlsyLDldLDEwNjpbMiw5XSwxMDg6WzIsOV0sMTA5OlsyLDldLDExMDpbMiw5XSwxMTQ6WzIsOV0sMTIyOlsyLDldLDEzMDpbMiw5XSwxMzM6WzIsOV0sMTM0OlsyLDldLDEzOTpbMiw5XSwxNDA6WzIsOV0sMTQxOlsyLDldLDE0MjpbMiw5XSwxNDM6WzIsOV0sMTQ0OlsyLDldLDE0NTpbMiw5XX0sezE6WzIsMTBdLDY6WzIsMTBdLDI4OlsyLDEwXSwyOTpbMiwxMF0sNTI6WzIsMTBdLDU3OlsyLDEwXSw2MDpbMiwxMF0sNzY6WzIsMTBdLDgxOlsyLDEwXSw5MDpbMiwxMF0sOTU6WzIsMTBdLDk3OlsyLDEwXSwxMDY6WzIsMTBdLDEwODpbMiwxMF0sMTA5OlsyLDEwXSwxMTA6WzIsMTBdLDExNDpbMiwxMF0sMTIyOlsyLDEwXSwxMzA6WzIsMTBdLDEzMzpbMiwxMF0sMTM0OlsyLDEwXSwxMzk6WzIsMTBdLDE0MDpbMiwxMF0sMTQxOlsyLDEwXSwxNDI6WzIsMTBdLDE0MzpbMiwxMF0sMTQ0OlsyLDEwXSwxNDU6WzIsMTBdfSx7MTpbMiwxMV0sNjpbMiwxMV0sMjg6WzIsMTFdLDI5OlsyLDExXSw1MjpbMiwxMV0sNTc6WzIsMTFdLDYwOlsyLDExXSw3NjpbMiwxMV0sODE6WzIsMTFdLDkwOlsyLDExXSw5NTpbMiwxMV0sOTc6WzIsMTFdLDEwNjpbMiwxMV0sMTA4OlsyLDExXSwxMDk6WzIsMTFdLDExMDpbMiwxMV0sMTE0OlsyLDExXSwxMjI6WzIsMTFdLDEzMDpbMiwxMV0sMTMzOlsyLDExXSwxMzQ6WzIsMTFdLDEzOTpbMiwxMV0sMTQwOlsyLDExXSwxNDE6WzIsMTFdLDE0MjpbMiwxMV0sMTQzOlsyLDExXSwxNDQ6WzIsMTFdLDE0NTpbMiwxMV19LHsxOlsyLDc5XSw2OlsyLDc5XSwyODpbMiw3OV0sMjk6WzIsNzldLDQzOlsxLDEwNl0sNTI6WzIsNzldLDU3OlsyLDc5XSw2MDpbMiw3OV0sNjk6WzIsNzldLDcwOlsyLDc5XSw3MTpbMiw3OV0sNzI6WzIsNzldLDc0OlsyLDc5XSw3NjpbMiw3OV0sNzc6WzIsNzldLDgxOlsyLDc5XSw4ODpbMiw3OV0sODk6WzIsNzldLDkwOlsyLDc5XSw5NTpbMiw3OV0sOTc6WzIsNzldLDEwNjpbMiw3OV0sMTA4OlsyLDc5XSwxMDk6WzIsNzldLDExMDpbMiw3OV0sMTE0OlsyLDc5XSwxMjI6WzIsNzldLDEzMDpbMiw3OV0sMTMzOlsyLDc5XSwxMzQ6WzIsNzldLDEzOTpbMiw3OV0sMTQwOlsyLDc5XSwxNDE6WzIsNzldLDE0MjpbMiw3OV0sMTQzOlsyLDc5XSwxNDQ6WzIsNzldLDE0NTpbMiw3OV19LHsxOlsyLDgwXSw2OlsyLDgwXSwyODpbMiw4MF0sMjk6WzIsODBdLDUyOlsyLDgwXSw1NzpbMiw4MF0sNjA6WzIsODBdLDY5OlsyLDgwXSw3MDpbMiw4MF0sNzE6WzIsODBdLDcyOlsyLDgwXSw3NDpbMiw4MF0sNzY6WzIsODBdLDc3OlsyLDgwXSw4MTpbMiw4MF0sODg6WzIsODBdLDg5OlsyLDgwXSw5MDpbMiw4MF0sOTU6WzIsODBdLDk3OlsyLDgwXSwxMDY6WzIsODBdLDEwODpbMiw4MF0sMTA5OlsyLDgwXSwxMTA6WzIsODBdLDExNDpbMiw4MF0sMTIyOlsyLDgwXSwxMzA6WzIsODBdLDEzMzpbMiw4MF0sMTM0OlsyLDgwXSwxMzk6WzIsODBdLDE0MDpbMiw4MF0sMTQxOlsyLDgwXSwxNDI6WzIsODBdLDE0MzpbMiw4MF0sMTQ0OlsyLDgwXSwxNDU6WzIsODBdfSx7MTpbMiw4MV0sNjpbMiw4MV0sMjg6WzIsODFdLDI5OlsyLDgxXSw1MjpbMiw4MV0sNTc6WzIsODFdLDYwOlsyLDgxXSw2OTpbMiw4MV0sNzA6WzIsODFdLDcxOlsyLDgxXSw3MjpbMiw4MV0sNzQ6WzIsODFdLDc2OlsyLDgxXSw3NzpbMiw4MV0sODE6WzIsODFdLDg4OlsyLDgxXSw4OTpbMiw4MV0sOTA6WzIsODFdLDk1OlsyLDgxXSw5NzpbMiw4MV0sMTA2OlsyLDgxXSwxMDg6WzIsODFdLDEwOTpbMiw4MV0sMTEwOlsyLDgxXSwxMTQ6WzIsODFdLDEyMjpbMiw4MV0sMTMwOlsyLDgxXSwxMzM6WzIsODFdLDEzNDpbMiw4MV0sMTM5OlsyLDgxXSwxNDA6WzIsODFdLDE0MTpbMiw4MV0sMTQyOlsyLDgxXSwxNDM6WzIsODFdLDE0NDpbMiw4MV0sMTQ1OlsyLDgxXX0sezE6WzIsODJdLDY6WzIsODJdLDI4OlsyLDgyXSwyOTpbMiw4Ml0sNTI6WzIsODJdLDU3OlsyLDgyXSw2MDpbMiw4Ml0sNjk6WzIsODJdLDcwOlsyLDgyXSw3MTpbMiw4Ml0sNzI6WzIsODJdLDc0OlsyLDgyXSw3NjpbMiw4Ml0sNzc6WzIsODJdLDgxOlsyLDgyXSw4ODpbMiw4Ml0sODk6WzIsODJdLDkwOlsyLDgyXSw5NTpbMiw4Ml0sOTc6WzIsODJdLDEwNjpbMiw4Ml0sMTA4OlsyLDgyXSwxMDk6WzIsODJdLDExMDpbMiw4Ml0sMTE0OlsyLDgyXSwxMjI6WzIsODJdLDEzMDpbMiw4Ml0sMTMzOlsyLDgyXSwxMzQ6WzIsODJdLDEzOTpbMiw4Ml0sMTQwOlsyLDgyXSwxNDE6WzIsODJdLDE0MjpbMiw4Ml0sMTQzOlsyLDgyXSwxNDQ6WzIsODJdLDE0NTpbMiw4Ml19LHsxOlsyLDgzXSw2OlsyLDgzXSwyODpbMiw4M10sMjk6WzIsODNdLDUyOlsyLDgzXSw1NzpbMiw4M10sNjA6WzIsODNdLDY5OlsyLDgzXSw3MDpbMiw4M10sNzE6WzIsODNdLDcyOlsyLDgzXSw3NDpbMiw4M10sNzY6WzIsODNdLDc3OlsyLDgzXSw4MTpbMiw4M10sODg6WzIsODNdLDg5OlsyLDgzXSw5MDpbMiw4M10sOTU6WzIsODNdLDk3OlsyLDgzXSwxMDY6WzIsODNdLDEwODpbMiw4M10sMTA5OlsyLDgzXSwxMTA6WzIsODNdLDExNDpbMiw4M10sMTIyOlsyLDgzXSwxMzA6WzIsODNdLDEzMzpbMiw4M10sMTM0OlsyLDgzXSwxMzk6WzIsODNdLDE0MDpbMiw4M10sMTQxOlsyLDgzXSwxNDI6WzIsODNdLDE0MzpbMiw4M10sMTQ0OlsyLDgzXSwxNDU6WzIsODNdfSx7MTpbMiwxMTFdLDY6WzIsMTExXSwyODpbMiwxMTFdLDI5OlsyLDExMV0sNTI6WzIsMTExXSw1NzpbMiwxMTFdLDYwOlsyLDExMV0sNjk6WzIsMTExXSw3MDpbMiwxMTFdLDcxOlsyLDExMV0sNzI6WzIsMTExXSw3NDpbMiwxMTFdLDc2OlsyLDExMV0sNzc6WzIsMTExXSw4MTpbMiwxMTFdLDg1OjEwNyw4ODpbMiwxMTFdLDg5OlsxLDEwOF0sOTA6WzIsMTExXSw5NTpbMiwxMTFdLDk3OlsyLDExMV0sMTA2OlsyLDExMV0sMTA4OlsyLDExMV0sMTA5OlsyLDExMV0sMTEwOlsyLDExMV0sMTE0OlsyLDExMV0sMTIyOlsyLDExMV0sMTMwOlsyLDExMV0sMTMzOlsyLDExMV0sMTM0OlsyLDExMV0sMTM5OlsyLDExMV0sMTQwOlsyLDExMV0sMTQxOlsyLDExMV0sMTQyOlsyLDExMV0sMTQzOlsyLDExMV0sMTQ0OlsyLDExMV0sMTQ1OlsyLDExMV19LHs2OlsyLDU4XSwyODpbMiw1OF0sMzA6MTEzLDMxOlsxLDc3XSw0NzoxMTQsNTE6MTA5LDUyOlsyLDU4XSw1NzpbMiw1OF0sNTg6MTEwLDU5OjExMSw2MDpbMSwxMTJdLDYxOjExNSw2MjoxMTYsNzk6WzEsNzRdLDkzOlsxLDExN10sOTQ6WzEsMTE4XX0sezE0OjExOSwyODpbMSwxMjBdfSx7NzoxMjEsODoxMjIsOToxOSwxMDoyMCwxMTpbMSwyMV0sMTI6MjIsMTM6WzEsNTBdLDE1OjYsMTY6NywxNzo4LDE4OjksMTk6MTAsMjA6MTEsMjE6MTIsMjI6MTMsMjM6MTQsMjQ6MTUsMjU6MTYsMjY6MTcsMjc6MTgsMzA6NjYsMzE6WzEsNzddLDMyOjUzLDMzOlsxLDc1XSwzNDpbMSw3Nl0sMzU6MjQsMzY6WzEsNTRdLDM3OlsxLDU1XSwzODpbMSw1Nl0sMzk6WzEsNTddLDQwOlsxLDU4XSw0MTpbMSw1OV0sNDI6MjMsNDc6NjcsNDg6WzEsNDhdLDQ5OlsxLDQ5XSw1MDpbMSwyOV0sNTM6MzAsNTQ6WzEsNjRdLDU1OlsxLDY1XSw2MTo1MSw2Mjo1Miw2NDozOCw2NjoyNSw2NzoyNiw2ODoyNyw3OTpbMSw3NF0sODI6WzEsNDVdLDg2OlsxLDI4XSw4NzpbMSw0N10sOTI6WzEsNjJdLDkzOlsxLDYzXSw5NDpbMSw2MV0sMTAwOlsxLDQwXSwxMDQ6WzEsNDZdLDEwNTpbMSw2MF0sMTA3OjQxLDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTE6NDIsMTEyOlsxLDcxXSwxMTM6NDMsMTE0OlsxLDcyXSwxMTU6NzMsMTIzOlsxLDQ0XSwxMjg6MzksMTI5OlsxLDY4XSwxMzE6WzEsMzFdLDEzMjpbMSwzMl0sMTMzOlsxLDMzXSwxMzQ6WzEsMzRdLDEzNTpbMSwzNV0sMTM3OlsxLDM2XSwxMzg6WzEsMzddfSx7NzoxMjMsODoxMjIsOToxOSwxMDoyMCwxMTpbMSwyMV0sMTI6MjIsMTM6WzEsNTBdLDE1OjYsMTY6NywxNzo4LDE4OjksMTk6MTAsMjA6MTEsMjE6MTIsMjI6MTMsMjM6MTQsMjQ6MTUsMjU6MTYsMjY6MTcsMjc6MTgsMzA6NjYsMzE6WzEsNzddLDMyOjUzLDMzOlsxLDc1XSwzNDpbMSw3Nl0sMzU6MjQsMzY6WzEsNTRdLDM3OlsxLDU1XSwzODpbMSw1Nl0sMzk6WzEsNTddLDQwOlsxLDU4XSw0MTpbMSw1OV0sNDI6MjMsNDc6NjcsNDg6WzEsNDhdLDQ5OlsxLDQ5XSw1MDpbMSwyOV0sNTM6MzAsNTQ6WzEsNjRdLDU1OlsxLDY1XSw2MTo1MSw2Mjo1Miw2NDozOCw2NjoyNSw2NzoyNiw2ODoyNyw3OTpbMSw3NF0sODI6WzEsNDVdLDg2OlsxLDI4XSw4NzpbMSw0N10sOTI6WzEsNjJdLDkzOlsxLDYzXSw5NDpbMSw2MV0sMTAwOlsxLDQwXSwxMDQ6WzEsNDZdLDEwNTpbMSw2MF0sMTA3OjQxLDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTE6NDIsMTEyOlsxLDcxXSwxMTM6NDMsMTE0OlsxLDcyXSwxMTU6NzMsMTIzOlsxLDQ0XSwxMjg6MzksMTI5OlsxLDY4XSwxMzE6WzEsMzFdLDEzMjpbMSwzMl0sMTMzOlsxLDMzXSwxMzQ6WzEsMzRdLDEzNTpbMSwzNV0sMTM3OlsxLDM2XSwxMzg6WzEsMzddfSx7NzoxMjQsODoxMjIsOToxOSwxMDoyMCwxMTpbMSwyMV0sMTI6MjIsMTM6WzEsNTBdLDE1OjYsMTY6NywxNzo4LDE4OjksMTk6MTAsMjA6MTEsMjE6MTIsMjI6MTMsMjM6MTQsMjQ6MTUsMjU6MTYsMjY6MTcsMjc6MTgsMzA6NjYsMzE6WzEsNzddLDMyOjUzLDMzOlsxLDc1XSwzNDpbMSw3Nl0sMzU6MjQsMzY6WzEsNTRdLDM3OlsxLDU1XSwzODpbMSw1Nl0sMzk6WzEsNTddLDQwOlsxLDU4XSw0MTpbMSw1OV0sNDI6MjMsNDc6NjcsNDg6WzEsNDhdLDQ5OlsxLDQ5XSw1MDpbMSwyOV0sNTM6MzAsNTQ6WzEsNjRdLDU1OlsxLDY1XSw2MTo1MSw2Mjo1Miw2NDozOCw2NjoyNSw2NzoyNiw2ODoyNyw3OTpbMSw3NF0sODI6WzEsNDVdLDg2OlsxLDI4XSw4NzpbMSw0N10sOTI6WzEsNjJdLDkzOlsxLDYzXSw5NDpbMSw2MV0sMTAwOlsxLDQwXSwxMDQ6WzEsNDZdLDEwNTpbMSw2MF0sMTA3OjQxLDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTE6NDIsMTEyOlsxLDcxXSwxMTM6NDMsMTE0OlsxLDcyXSwxMTU6NzMsMTIzOlsxLDQ0XSwxMjg6MzksMTI5OlsxLDY4XSwxMzE6WzEsMzFdLDEzMjpbMSwzMl0sMTMzOlsxLDMzXSwxMzQ6WzEsMzRdLDEzNTpbMSwzNV0sMTM3OlsxLDM2XSwxMzg6WzEsMzddfSx7NzoxMjUsODoxMjIsOToxOSwxMDoyMCwxMTpbMSwyMV0sMTI6MjIsMTM6WzEsNTBdLDE1OjYsMTY6NywxNzo4LDE4OjksMTk6MTAsMjA6MTEsMjE6MTIsMjI6MTMsMjM6MTQsMjQ6MTUsMjU6MTYsMjY6MTcsMjc6MTgsMzA6NjYsMzE6WzEsNzddLDMyOjUzLDMzOlsxLDc1XSwzNDpbMSw3Nl0sMzU6MjQsMzY6WzEsNTRdLDM3OlsxLDU1XSwzODpbMSw1Nl0sMzk6WzEsNTddLDQwOlsxLDU4XSw0MTpbMSw1OV0sNDI6MjMsNDc6NjcsNDg6WzEsNDhdLDQ5OlsxLDQ5XSw1MDpbMSwyOV0sNTM6MzAsNTQ6WzEsNjRdLDU1OlsxLDY1XSw2MTo1MSw2Mjo1Miw2NDozOCw2NjoyNSw2NzoyNiw2ODoyNyw3OTpbMSw3NF0sODI6WzEsNDVdLDg2OlsxLDI4XSw4NzpbMSw0N10sOTI6WzEsNjJdLDkzOlsxLDYzXSw5NDpbMSw2MV0sMTAwOlsxLDQwXSwxMDQ6WzEsNDZdLDEwNTpbMSw2MF0sMTA3OjQxLDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTE6NDIsMTEyOlsxLDcxXSwxMTM6NDMsMTE0OlsxLDcyXSwxMTU6NzMsMTIzOlsxLDQ0XSwxMjg6MzksMTI5OlsxLDY4XSwxMzE6WzEsMzFdLDEzMjpbMSwzMl0sMTMzOlsxLDMzXSwxMzQ6WzEsMzRdLDEzNTpbMSwzNV0sMTM3OlsxLDM2XSwxMzg6WzEsMzddfSx7NzoxMjcsODoxMjYsOToxOSwxMDoyMCwxMTpbMSwyMV0sMTI6MjIsMTM6WzEsNTBdLDE1OjYsMTY6NywxNzo4LDE4OjksMTk6MTAsMjA6MTEsMjE6MTIsMjI6MTMsMjM6MTQsMjQ6MTUsMjU6MTYsMjY6MTcsMjc6MTgsMzA6NjYsMzE6WzEsNzddLDMyOjUzLDMzOlsxLDc1XSwzNDpbMSw3Nl0sMzU6MjQsMzY6WzEsNTRdLDM3OlsxLDU1XSwzODpbMSw1Nl0sMzk6WzEsNTddLDQwOlsxLDU4XSw0MTpbMSw1OV0sNDI6MjMsNDc6NjcsNDg6WzEsNDhdLDQ5OlsxLDQ5XSw1MDpbMSwyOV0sNTM6MzAsNTQ6WzEsNjRdLDU1OlsxLDY1XSw2MTo1MSw2Mjo1Miw2NDozOCw2NjoyNSw2NzoyNiw2ODoyNyw3OTpbMSw3NF0sODI6WzEsNDVdLDg2OlsxLDI4XSw4NzpbMSw0N10sOTI6WzEsNjJdLDkzOlsxLDYzXSw5NDpbMSw2MV0sMTAwOlsxLDQwXSwxMDQ6WzEsNDZdLDEwNTpbMSw2MF0sMTA3OjQxLDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTE6NDIsMTEyOlsxLDcxXSwxMTM6NDMsMTE0OlsxLDcyXSwxMTU6NzMsMTIzOlsxLDQ0XSwxMjg6MzksMTI5OlsxLDY4XSwxMzE6WzEsMzFdLDEzMjpbMSwzMl0sMTMzOlsxLDMzXSwxMzQ6WzEsMzRdLDEzNTpbMSwzNV0sMTM2OlsxLDEyOF0sMTM3OlsxLDM2XSwxMzg6WzEsMzddfSx7MTU6MTMwLDE2OjEzMSwzMDo2NiwzMTpbMSw3N10sMzI6NTMsMzM6WzEsNzVdLDM0OlsxLDc2XSwzNToyNCwzNjpbMSw1NF0sMzc6WzEsNTVdLDM4OlsxLDU2XSwzOTpbMSw1N10sNDA6WzEsNThdLDQxOlsxLDU5XSw0MjoxMzIsNDc6NjcsNjE6NTEsNjI6NTIsNjQ6MTI5LDY2OjI1LDY3OjI2LDY4OjI3LDc5OlsxLDc0XSw4NjpbMSwyOF0sOTI6WzEsNjJdLDkzOlsxLDYzXSw5NDpbMSw2MV0sMTA1OlsxLDYwXX0sezE1OjEzMCwxNjoxMzEsMzA6NjYsMzE6WzEsNzddLDMyOjUzLDMzOlsxLDc1XSwzNDpbMSw3Nl0sMzU6MjQsMzY6WzEsNTRdLDM3OlsxLDU1XSwzODpbMSw1Nl0sMzk6WzEsNTddLDQwOlsxLDU4XSw0MTpbMSw1OV0sNDI6MTMyLDQ3OjY3LDYxOjUxLDYyOjUyLDY0OjEzMyw2NjoyNSw2NzoyNiw2ODoyNyw3OTpbMSw3NF0sODY6WzEsMjhdLDkyOlsxLDYyXSw5MzpbMSw2M10sOTQ6WzEsNjFdLDEwNTpbMSw2MF19LHsxOlsyLDc2XSw2OlsyLDc2XSwyODpbMiw3Nl0sMjk6WzIsNzZdLDQzOlsyLDc2XSw1MjpbMiw3Nl0sNTc6WzIsNzZdLDYwOlsyLDc2XSw2OTpbMiw3Nl0sNzA6WzIsNzZdLDcxOlsyLDc2XSw3MjpbMiw3Nl0sNzQ6WzIsNzZdLDc2OlsyLDc2XSw3NzpbMiw3Nl0sODE6WzIsNzZdLDgzOlsxLDEzN10sODg6WzIsNzZdLDg5OlsyLDc2XSw5MDpbMiw3Nl0sOTU6WzIsNzZdLDk3OlsyLDc2XSwxMDY6WzIsNzZdLDEwODpbMiw3Nl0sMTA5OlsyLDc2XSwxMTA6WzIsNzZdLDExNDpbMiw3Nl0sMTIyOlsyLDc2XSwxMzA6WzIsNzZdLDEzMzpbMiw3Nl0sMTM0OlsyLDc2XSwxMzc6WzEsMTM0XSwxMzg6WzEsMTM1XSwxMzk6WzIsNzZdLDE0MDpbMiw3Nl0sMTQxOlsyLDc2XSwxNDI6WzIsNzZdLDE0MzpbMiw3Nl0sMTQ0OlsyLDc2XSwxNDU6WzIsNzZdLDE0NjpbMSwxMzZdfSx7MTpbMiwxOTBdLDY6WzIsMTkwXSwyODpbMiwxOTBdLDI5OlsyLDE5MF0sNTI6WzIsMTkwXSw1NzpbMiwxOTBdLDYwOlsyLDE5MF0sNzY6WzIsMTkwXSw4MTpbMiwxOTBdLDkwOlsyLDE5MF0sOTU6WzIsMTkwXSw5NzpbMiwxOTBdLDEwNjpbMiwxOTBdLDEwODpbMiwxOTBdLDEwOTpbMiwxOTBdLDExMDpbMiwxOTBdLDExNDpbMiwxOTBdLDEyMjpbMiwxOTBdLDEyNTpbMSwxMzhdLDEzMDpbMiwxOTBdLDEzMzpbMiwxOTBdLDEzNDpbMiwxOTBdLDEzOTpbMiwxOTBdLDE0MDpbMiwxOTBdLDE0MTpbMiwxOTBdLDE0MjpbMiwxOTBdLDE0MzpbMiwxOTBdLDE0NDpbMiwxOTBdLDE0NTpbMiwxOTBdfSx7MTQ6MTM5LDI4OlsxLDEyMF19LHsxNDoxNDAsMjg6WzEsMTIwXX0sezE6WzIsMTU3XSw2OlsyLDE1N10sMjg6WzIsMTU3XSwyOTpbMiwxNTddLDUyOlsyLDE1N10sNTc6WzIsMTU3XSw2MDpbMiwxNTddLDc2OlsyLDE1N10sODE6WzIsMTU3XSw5MDpbMiwxNTddLDk1OlsyLDE1N10sOTc6WzIsMTU3XSwxMDY6WzIsMTU3XSwxMDg6WzIsMTU3XSwxMDk6WzIsMTU3XSwxMTA6WzIsMTU3XSwxMTQ6WzIsMTU3XSwxMjI6WzIsMTU3XSwxMzA6WzIsMTU3XSwxMzM6WzIsMTU3XSwxMzQ6WzIsMTU3XSwxMzk6WzIsMTU3XSwxNDA6WzIsMTU3XSwxNDE6WzIsMTU3XSwxNDI6WzIsMTU3XSwxNDM6WzIsMTU3XSwxNDQ6WzIsMTU3XSwxNDU6WzIsMTU3XX0sezE0OjE0MSwyODpbMSwxMjBdfSx7NzoxNDIsODoxMjIsOToxOSwxMDoyMCwxMTpbMSwyMV0sMTI6MjIsMTM6WzEsNTBdLDE1OjYsMTY6NywxNzo4LDE4OjksMTk6MTAsMjA6MTEsMjE6MTIsMjI6MTMsMjM6MTQsMjQ6MTUsMjU6MTYsMjY6MTcsMjc6MTgsMjg6WzEsMTQzXSwzMDo2NiwzMTpbMSw3N10sMzI6NTMsMzM6WzEsNzVdLDM0OlsxLDc2XSwzNToyNCwzNjpbMSw1NF0sMzc6WzEsNTVdLDM4OlsxLDU2XSwzOTpbMSw1N10sNDA6WzEsNThdLDQxOlsxLDU5XSw0MjoyMyw0Nzo2Nyw0ODpbMSw0OF0sNDk6WzEsNDldLDUwOlsxLDI5XSw1MzozMCw1NDpbMSw2NF0sNTU6WzEsNjVdLDYxOjUxLDYyOjUyLDY0OjM4LDY2OjI1LDY3OjI2LDY4OjI3LDc5OlsxLDc0XSw4MjpbMSw0NV0sODY6WzEsMjhdLDg3OlsxLDQ3XSw5MjpbMSw2Ml0sOTM6WzEsNjNdLDk0OlsxLDYxXSwxMDA6WzEsNDBdLDEwNDpbMSw0Nl0sMTA1OlsxLDYwXSwxMDc6NDEsMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMTo0MiwxMTI6WzEsNzFdLDExMzo0MywxMTQ6WzEsNzJdLDExNTo3MywxMjM6WzEsNDRdLDEyODozOSwxMjk6WzEsNjhdLDEzMTpbMSwzMV0sMTMyOlsxLDMyXSwxMzM6WzEsMzNdLDEzNDpbMSwzNF0sMTM1OlsxLDM1XSwxMzc6WzEsMzZdLDEzODpbMSwzN119LHsxOlsyLDEwMV0sNjpbMiwxMDFdLDE0OjE0NCwxNToxMzAsMTY6MTMxLDI4OlsxLDEyMF0sMjk6WzIsMTAxXSwzMDo2NiwzMTpbMSw3N10sMzI6NTMsMzM6WzEsNzVdLDM0OlsxLDc2XSwzNToyNCwzNjpbMSw1NF0sMzc6WzEsNTVdLDM4OlsxLDU2XSwzOTpbMSw1N10sNDA6WzEsNThdLDQxOlsxLDU5XSw0MjoxMzIsNDc6NjcsNTI6WzIsMTAxXSw1NzpbMiwxMDFdLDYwOlsyLDEwMV0sNjE6NTEsNjI6NTIsNjQ6MTQ2LDY2OjI1LDY3OjI2LDY4OjI3LDc2OlsyLDEwMV0sNzk6WzEsNzRdLDgxOlsyLDEwMV0sODM6WzEsMTQ1XSw4NjpbMSwyOF0sOTA6WzIsMTAxXSw5MjpbMSw2Ml0sOTM6WzEsNjNdLDk0OlsxLDYxXSw5NTpbMiwxMDFdLDk3OlsyLDEwMV0sMTA1OlsxLDYwXSwxMDY6WzIsMTAxXSwxMDg6WzIsMTAxXSwxMDk6WzIsMTAxXSwxMTA6WzIsMTAxXSwxMTQ6WzIsMTAxXSwxMjI6WzIsMTAxXSwxMzA6WzIsMTAxXSwxMzM6WzIsMTAxXSwxMzQ6WzIsMTAxXSwxMzk6WzIsMTAxXSwxNDA6WzIsMTAxXSwxNDE6WzIsMTAxXSwxNDI6WzIsMTAxXSwxNDM6WzIsMTAxXSwxNDQ6WzIsMTAxXSwxNDU6WzIsMTAxXX0sezc6MTQ3LDg6MTIyLDk6MTksMTA6MjAsMTE6WzEsMjFdLDEyOjIyLDEzOlsxLDUwXSwxNTo2LDE2OjcsMTc6OCwxODo5LDE5OjEwLDIwOjExLDIxOjEyLDIyOjEzLDIzOjE0LDI0OjE1LDI1OjE2LDI2OjE3LDI3OjE4LDMwOjY2LDMxOlsxLDc3XSwzMjo1MywzMzpbMSw3NV0sMzQ6WzEsNzZdLDM1OjI0LDM2OlsxLDU0XSwzNzpbMSw1NV0sMzg6WzEsNTZdLDM5OlsxLDU3XSw0MDpbMSw1OF0sNDE6WzEsNTldLDQyOjIzLDQ3OjY3LDQ4OlsxLDQ4XSw0OTpbMSw0OV0sNTA6WzEsMjldLDUzOjMwLDU0OlsxLDY0XSw1NTpbMSw2NV0sNjE6NTEsNjI6NTIsNjQ6MzgsNjY6MjUsNjc6MjYsNjg6MjcsNzk6WzEsNzRdLDgyOlsxLDQ1XSw4NjpbMSwyOF0sODc6WzEsNDddLDkyOlsxLDYyXSw5MzpbMSw2M10sOTQ6WzEsNjFdLDEwMDpbMSw0MF0sMTA0OlsxLDQ2XSwxMDU6WzEsNjBdLDEwNzo0MSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTExOjQyLDExMjpbMSw3MV0sMTEzOjQzLDExNDpbMSw3Ml0sMTE1OjczLDEyMzpbMSw0NF0sMTI4OjM5LDEyOTpbMSw2OF0sMTMxOlsxLDMxXSwxMzI6WzEsMzJdLDEzMzpbMSwzM10sMTM0OlsxLDM0XSwxMzU6WzEsMzVdLDEzNzpbMSwzNl0sMTM4OlsxLDM3XX0sezg1OjE0OCw4OTpbMSwxMDhdfSx7MTpbMiw1MF0sNjpbMiw1MF0sNzoxNDksODoxMjIsOToxOSwxMDoyMCwxMTpbMSwyMV0sMTI6MjIsMTM6WzEsNTBdLDE1OjYsMTY6NywxNzo4LDE4OjksMTk6MTAsMjA6MTEsMjE6MTIsMjI6MTMsMjM6MTQsMjQ6MTUsMjU6MTYsMjY6MTcsMjc6MTgsMjg6WzIsNTBdLDI5OlsyLDUwXSwzMDo2NiwzMTpbMSw3N10sMzI6NTMsMzM6WzEsNzVdLDM0OlsxLDc2XSwzNToyNCwzNjpbMSw1NF0sMzc6WzEsNTVdLDM4OlsxLDU2XSwzOTpbMSw1N10sNDA6WzEsNThdLDQxOlsxLDU5XSw0MjoyMyw0Nzo2Nyw0ODpbMSw0OF0sNDk6WzEsNDldLDUwOlsxLDI5XSw1MjpbMiw1MF0sNTM6MzAsNTQ6WzEsNjRdLDU1OlsxLDY1XSw1NzpbMiw1MF0sNjA6WzIsNTBdLDYxOjUxLDYyOjUyLDY0OjM4LDY2OjI1LDY3OjI2LDY4OjI3LDc2OlsyLDUwXSw3OTpbMSw3NF0sODE6WzIsNTBdLDgyOlsxLDQ1XSw4NjpbMSwyOF0sODc6WzEsNDddLDkwOlsyLDUwXSw5MjpbMSw2Ml0sOTM6WzEsNjNdLDk0OlsxLDYxXSw5NTpbMiw1MF0sOTc6WzIsNTBdLDEwMDpbMSw0MF0sMTA0OlsxLDQ2XSwxMDU6WzEsNjBdLDEwNjpbMiw1MF0sMTA3OjQxLDEwODpbMiw1MF0sMTA5OlsyLDUwXSwxMTA6WzIsNTBdLDExMTo0MiwxMTI6WzEsNzFdLDExMzo0MywxMTQ6WzIsNTBdLDExNTo3MywxMjI6WzIsNTBdLDEyMzpbMSw0NF0sMTI4OjM5LDEyOTpbMSw2OF0sMTMwOlsyLDUwXSwxMzE6WzEsMzFdLDEzMjpbMSwzMl0sMTMzOlsxLDMzXSwxMzQ6WzEsMzRdLDEzNTpbMSwzNV0sMTM3OlsxLDM2XSwxMzg6WzEsMzddLDEzOTpbMiw1MF0sMTQwOlsyLDUwXSwxNDE6WzIsNTBdLDE0MjpbMiw1MF0sMTQzOlsyLDUwXSwxNDQ6WzIsNTBdLDE0NTpbMiw1MF19LHsxOlsyLDUxXSw2OlsyLDUxXSwyODpbMiw1MV0sMjk6WzIsNTFdLDUyOlsyLDUxXSw1NzpbMiw1MV0sNjA6WzIsNTFdLDc2OlsyLDUxXSw4MTpbMiw1MV0sOTA6WzIsNTFdLDk1OlsyLDUxXSw5NzpbMiw1MV0sMTA2OlsyLDUxXSwxMDg6WzIsNTFdLDEwOTpbMiw1MV0sMTEwOlsyLDUxXSwxMTQ6WzIsNTFdLDEyMjpbMiw1MV0sMTMwOlsyLDUxXSwxMzM6WzIsNTFdLDEzNDpbMiw1MV0sMTM5OlsyLDUxXSwxNDA6WzIsNTFdLDE0MTpbMiw1MV0sMTQyOlsyLDUxXSwxNDM6WzIsNTFdLDE0NDpbMiw1MV0sMTQ1OlsyLDUxXX0sezc6MTUxLDg6MTIyLDk6MTksMTA6MjAsMTE6WzEsMjFdLDEyOjIyLDEzOlsxLDUwXSwxNDoxNTAsMTU6NiwxNjo3LDE3OjgsMTg6OSwxOToxMCwyMDoxMSwyMToxMiwyMjoxMywyMzoxNCwyNDoxNSwyNToxNiwyNjoxNywyNzoxOCwyODpbMSwxMjBdLDMwOjY2LDMxOlsxLDc3XSwzMjo1MywzMzpbMSw3NV0sMzQ6WzEsNzZdLDM1OjI0LDM2OlsxLDU0XSwzNzpbMSw1NV0sMzg6WzEsNTZdLDM5OlsxLDU3XSw0MDpbMSw1OF0sNDE6WzEsNTldLDQyOjIzLDQ3OjY3LDQ4OlsxLDQ4XSw0OTpbMSw0OV0sNTA6WzEsMjldLDUzOjMwLDU0OlsxLDY0XSw1NTpbMSw2NV0sNjE6NTEsNjI6NTIsNjQ6MzgsNjY6MjUsNjc6MjYsNjg6MjcsNzk6WzEsNzRdLDgyOlsxLDQ1XSw4NjpbMSwyOF0sODc6WzEsNDddLDkyOlsxLDYyXSw5MzpbMSw2M10sOTQ6WzEsNjFdLDEwMDpbMSw0MF0sMTA0OlsxLDQ2XSwxMDU6WzEsNjBdLDEwNzo0MSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTExOjQyLDExMjpbMSw3MV0sMTEzOjQzLDExNDpbMSw3Ml0sMTE1OjczLDEyMzpbMSw0NF0sMTI4OjM5LDEyOTpbMSw2OF0sMTMxOlsxLDMxXSwxMzI6WzEsMzJdLDEzMzpbMSwzM10sMTM0OlsxLDM0XSwxMzU6WzEsMzVdLDEzNzpbMSwzNl0sMTM4OlsxLDM3XX0sezE6WzIsNzddLDY6WzIsNzddLDI4OlsyLDc3XSwyOTpbMiw3N10sNDM6WzIsNzddLDUyOlsyLDc3XSw1NzpbMiw3N10sNjA6WzIsNzddLDY5OlsyLDc3XSw3MDpbMiw3N10sNzE6WzIsNzddLDcyOlsyLDc3XSw3NDpbMiw3N10sNzY6WzIsNzddLDc3OlsyLDc3XSw4MTpbMiw3N10sODg6WzIsNzddLDg5OlsyLDc3XSw5MDpbMiw3N10sOTU6WzIsNzddLDk3OlsyLDc3XSwxMDY6WzIsNzddLDEwODpbMiw3N10sMTA5OlsyLDc3XSwxMTA6WzIsNzddLDExNDpbMiw3N10sMTIyOlsyLDc3XSwxMzA6WzIsNzddLDEzMzpbMiw3N10sMTM0OlsyLDc3XSwxMzk6WzIsNzddLDE0MDpbMiw3N10sMTQxOlsyLDc3XSwxNDI6WzIsNzddLDE0MzpbMiw3N10sMTQ0OlsyLDc3XSwxNDU6WzIsNzddfSx7MTpbMiw3OF0sNjpbMiw3OF0sMjg6WzIsNzhdLDI5OlsyLDc4XSw0MzpbMiw3OF0sNTI6WzIsNzhdLDU3OlsyLDc4XSw2MDpbMiw3OF0sNjk6WzIsNzhdLDcwOlsyLDc4XSw3MTpbMiw3OF0sNzI6WzIsNzhdLDc0OlsyLDc4XSw3NjpbMiw3OF0sNzc6WzIsNzhdLDgxOlsyLDc4XSw4ODpbMiw3OF0sODk6WzIsNzhdLDkwOlsyLDc4XSw5NTpbMiw3OF0sOTc6WzIsNzhdLDEwNjpbMiw3OF0sMTA4OlsyLDc4XSwxMDk6WzIsNzhdLDExMDpbMiw3OF0sMTE0OlsyLDc4XSwxMjI6WzIsNzhdLDEzMDpbMiw3OF0sMTMzOlsyLDc4XSwxMzQ6WzIsNzhdLDEzOTpbMiw3OF0sMTQwOlsyLDc4XSwxNDE6WzIsNzhdLDE0MjpbMiw3OF0sMTQzOlsyLDc4XSwxNDQ6WzIsNzhdLDE0NTpbMiw3OF19LHsxOlsyLDMyXSw2OlsyLDMyXSwyODpbMiwzMl0sMjk6WzIsMzJdLDUyOlsyLDMyXSw1NzpbMiwzMl0sNjA6WzIsMzJdLDY5OlsyLDMyXSw3MDpbMiwzMl0sNzE6WzIsMzJdLDcyOlsyLDMyXSw3NDpbMiwzMl0sNzY6WzIsMzJdLDc3OlsyLDMyXSw4MTpbMiwzMl0sODg6WzIsMzJdLDg5OlsyLDMyXSw5MDpbMiwzMl0sOTU6WzIsMzJdLDk3OlsyLDMyXSwxMDY6WzIsMzJdLDEwODpbMiwzMl0sMTA5OlsyLDMyXSwxMTA6WzIsMzJdLDExNDpbMiwzMl0sMTIyOlsyLDMyXSwxMzA6WzIsMzJdLDEzMzpbMiwzMl0sMTM0OlsyLDMyXSwxMzk6WzIsMzJdLDE0MDpbMiwzMl0sMTQxOlsyLDMyXSwxNDI6WzIsMzJdLDE0MzpbMiwzMl0sMTQ0OlsyLDMyXSwxNDU6WzIsMzJdfSx7MTpbMiwzM10sNjpbMiwzM10sMjg6WzIsMzNdLDI5OlsyLDMzXSw1MjpbMiwzM10sNTc6WzIsMzNdLDYwOlsyLDMzXSw2OTpbMiwzM10sNzA6WzIsMzNdLDcxOlsyLDMzXSw3MjpbMiwzM10sNzQ6WzIsMzNdLDc2OlsyLDMzXSw3NzpbMiwzM10sODE6WzIsMzNdLDg4OlsyLDMzXSw4OTpbMiwzM10sOTA6WzIsMzNdLDk1OlsyLDMzXSw5NzpbMiwzM10sMTA2OlsyLDMzXSwxMDg6WzIsMzNdLDEwOTpbMiwzM10sMTEwOlsyLDMzXSwxMTQ6WzIsMzNdLDEyMjpbMiwzM10sMTMwOlsyLDMzXSwxMzM6WzIsMzNdLDEzNDpbMiwzM10sMTM5OlsyLDMzXSwxNDA6WzIsMzNdLDE0MTpbMiwzM10sMTQyOlsyLDMzXSwxNDM6WzIsMzNdLDE0NDpbMiwzM10sMTQ1OlsyLDMzXX0sezE6WzIsMzRdLDY6WzIsMzRdLDI4OlsyLDM0XSwyOTpbMiwzNF0sNTI6WzIsMzRdLDU3OlsyLDM0XSw2MDpbMiwzNF0sNjk6WzIsMzRdLDcwOlsyLDM0XSw3MTpbMiwzNF0sNzI6WzIsMzRdLDc0OlsyLDM0XSw3NjpbMiwzNF0sNzc6WzIsMzRdLDgxOlsyLDM0XSw4ODpbMiwzNF0sODk6WzIsMzRdLDkwOlsyLDM0XSw5NTpbMiwzNF0sOTc6WzIsMzRdLDEwNjpbMiwzNF0sMTA4OlsyLDM0XSwxMDk6WzIsMzRdLDExMDpbMiwzNF0sMTE0OlsyLDM0XSwxMjI6WzIsMzRdLDEzMDpbMiwzNF0sMTMzOlsyLDM0XSwxMzQ6WzIsMzRdLDEzOTpbMiwzNF0sMTQwOlsyLDM0XSwxNDE6WzIsMzRdLDE0MjpbMiwzNF0sMTQzOlsyLDM0XSwxNDQ6WzIsMzRdLDE0NTpbMiwzNF19LHsxOlsyLDM1XSw2OlsyLDM1XSwyODpbMiwzNV0sMjk6WzIsMzVdLDUyOlsyLDM1XSw1NzpbMiwzNV0sNjA6WzIsMzVdLDY5OlsyLDM1XSw3MDpbMiwzNV0sNzE6WzIsMzVdLDcyOlsyLDM1XSw3NDpbMiwzNV0sNzY6WzIsMzVdLDc3OlsyLDM1XSw4MTpbMiwzNV0sODg6WzIsMzVdLDg5OlsyLDM1XSw5MDpbMiwzNV0sOTU6WzIsMzVdLDk3OlsyLDM1XSwxMDY6WzIsMzVdLDEwODpbMiwzNV0sMTA5OlsyLDM1XSwxMTA6WzIsMzVdLDExNDpbMiwzNV0sMTIyOlsyLDM1XSwxMzA6WzIsMzVdLDEzMzpbMiwzNV0sMTM0OlsyLDM1XSwxMzk6WzIsMzVdLDE0MDpbMiwzNV0sMTQxOlsyLDM1XSwxNDI6WzIsMzVdLDE0MzpbMiwzNV0sMTQ0OlsyLDM1XSwxNDU6WzIsMzVdfSx7MTpbMiwzNl0sNjpbMiwzNl0sMjg6WzIsMzZdLDI5OlsyLDM2XSw1MjpbMiwzNl0sNTc6WzIsMzZdLDYwOlsyLDM2XSw2OTpbMiwzNl0sNzA6WzIsMzZdLDcxOlsyLDM2XSw3MjpbMiwzNl0sNzQ6WzIsMzZdLDc2OlsyLDM2XSw3NzpbMiwzNl0sODE6WzIsMzZdLDg4OlsyLDM2XSw4OTpbMiwzNl0sOTA6WzIsMzZdLDk1OlsyLDM2XSw5NzpbMiwzNl0sMTA2OlsyLDM2XSwxMDg6WzIsMzZdLDEwOTpbMiwzNl0sMTEwOlsyLDM2XSwxMTQ6WzIsMzZdLDEyMjpbMiwzNl0sMTMwOlsyLDM2XSwxMzM6WzIsMzZdLDEzNDpbMiwzNl0sMTM5OlsyLDM2XSwxNDA6WzIsMzZdLDE0MTpbMiwzNl0sMTQyOlsyLDM2XSwxNDM6WzIsMzZdLDE0NDpbMiwzNl0sMTQ1OlsyLDM2XX0sezE6WzIsMzddLDY6WzIsMzddLDI4OlsyLDM3XSwyOTpbMiwzN10sNTI6WzIsMzddLDU3OlsyLDM3XSw2MDpbMiwzN10sNjk6WzIsMzddLDcwOlsyLDM3XSw3MTpbMiwzN10sNzI6WzIsMzddLDc0OlsyLDM3XSw3NjpbMiwzN10sNzc6WzIsMzddLDgxOlsyLDM3XSw4ODpbMiwzN10sODk6WzIsMzddLDkwOlsyLDM3XSw5NTpbMiwzN10sOTc6WzIsMzddLDEwNjpbMiwzN10sMTA4OlsyLDM3XSwxMDk6WzIsMzddLDExMDpbMiwzN10sMTE0OlsyLDM3XSwxMjI6WzIsMzddLDEzMDpbMiwzN10sMTMzOlsyLDM3XSwxMzQ6WzIsMzddLDEzOTpbMiwzN10sMTQwOlsyLDM3XSwxNDE6WzIsMzddLDE0MjpbMiwzN10sMTQzOlsyLDM3XSwxNDQ6WzIsMzddLDE0NTpbMiwzN119LHsxOlsyLDM4XSw2OlsyLDM4XSwyODpbMiwzOF0sMjk6WzIsMzhdLDUyOlsyLDM4XSw1NzpbMiwzOF0sNjA6WzIsMzhdLDY5OlsyLDM4XSw3MDpbMiwzOF0sNzE6WzIsMzhdLDcyOlsyLDM4XSw3NDpbMiwzOF0sNzY6WzIsMzhdLDc3OlsyLDM4XSw4MTpbMiwzOF0sODg6WzIsMzhdLDg5OlsyLDM4XSw5MDpbMiwzOF0sOTU6WzIsMzhdLDk3OlsyLDM4XSwxMDY6WzIsMzhdLDEwODpbMiwzOF0sMTA5OlsyLDM4XSwxMTA6WzIsMzhdLDExNDpbMiwzOF0sMTIyOlsyLDM4XSwxMzA6WzIsMzhdLDEzMzpbMiwzOF0sMTM0OlsyLDM4XSwxMzk6WzIsMzhdLDE0MDpbMiwzOF0sMTQxOlsyLDM4XSwxNDI6WzIsMzhdLDE0MzpbMiwzOF0sMTQ0OlsyLDM4XSwxNDU6WzIsMzhdfSx7NDoxNTIsNTozLDc6NCw4OjUsOToxOSwxMDoyMCwxMTpbMSwyMV0sMTI6MjIsMTM6WzEsNTBdLDE1OjYsMTY6NywxNzo4LDE4OjksMTk6MTAsMjA6MTEsMjE6MTIsMjI6MTMsMjM6MTQsMjQ6MTUsMjU6MTYsMjY6MTcsMjc6MTgsMjg6WzEsMTUzXSwzMDo2NiwzMTpbMSw3N10sMzI6NTMsMzM6WzEsNzVdLDM0OlsxLDc2XSwzNToyNCwzNjpbMSw1NF0sMzc6WzEsNTVdLDM4OlsxLDU2XSwzOTpbMSw1N10sNDA6WzEsNThdLDQxOlsxLDU5XSw0MjoyMyw0Nzo2Nyw0ODpbMSw0OF0sNDk6WzEsNDldLDUwOlsxLDI5XSw1MzozMCw1NDpbMSw2NF0sNTU6WzEsNjVdLDYxOjUxLDYyOjUyLDY0OjM4LDY2OjI1LDY3OjI2LDY4OjI3LDc5OlsxLDc0XSw4MjpbMSw0NV0sODY6WzEsMjhdLDg3OlsxLDQ3XSw5MjpbMSw2Ml0sOTM6WzEsNjNdLDk0OlsxLDYxXSwxMDA6WzEsNDBdLDEwNDpbMSw0Nl0sMTA1OlsxLDYwXSwxMDc6NDEsMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMTo0MiwxMTI6WzEsNzFdLDExMzo0MywxMTQ6WzEsNzJdLDExNTo3MywxMjM6WzEsNDRdLDEyODozOSwxMjk6WzEsNjhdLDEzMTpbMSwzMV0sMTMyOlsxLDMyXSwxMzM6WzEsMzNdLDEzNDpbMSwzNF0sMTM1OlsxLDM1XSwxMzc6WzEsMzZdLDEzODpbMSwzN119LHs3OjE1NCw4OjEyMiw5OjE5LDEwOjIwLDExOlsxLDIxXSwxMjoyMiwxMzpbMSw1MF0sMTU6NiwxNjo3LDE3OjgsMTg6OSwxOToxMCwyMDoxMSwyMToxMiwyMjoxMywyMzoxNCwyNDoxNSwyNToxNiwyNjoxNywyNzoxOCwyODpbMSwxNThdLDMwOjY2LDMxOlsxLDc3XSwzMjo1MywzMzpbMSw3NV0sMzQ6WzEsNzZdLDM1OjI0LDM2OlsxLDU0XSwzNzpbMSw1NV0sMzg6WzEsNTZdLDM5OlsxLDU3XSw0MDpbMSw1OF0sNDE6WzEsNTldLDQyOjIzLDQ3OjY3LDQ4OlsxLDQ4XSw0OTpbMSw0OV0sNTA6WzEsMjldLDUzOjMwLDU0OlsxLDY0XSw1NTpbMSw2NV0sNjA6WzEsMTYwXSw2MTo1MSw2Mjo1Miw2MzoxNTksNjQ6MzgsNjY6MjUsNjc6MjYsNjg6MjcsNzk6WzEsNzRdLDgyOlsxLDQ1XSw4NjpbMSwyOF0sODc6WzEsNDddLDkxOjE1Niw5MjpbMSw2Ml0sOTM6WzEsNjNdLDk0OlsxLDYxXSw5NTpbMSwxNTVdLDk4OjE1NywxMDA6WzEsNDBdLDEwNDpbMSw0Nl0sMTA1OlsxLDYwXSwxMDc6NDEsMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMTo0MiwxMTI6WzEsNzFdLDExMzo0MywxMTQ6WzEsNzJdLDExNTo3MywxMjM6WzEsNDRdLDEyODozOSwxMjk6WzEsNjhdLDEzMTpbMSwzMV0sMTMyOlsxLDMyXSwxMzM6WzEsMzNdLDEzNDpbMSwzNF0sMTM1OlsxLDM1XSwxMzc6WzEsMzZdLDEzODpbMSwzN119LHsxOlsyLDExOF0sNjpbMiwxMThdLDI4OlsyLDExOF0sMjk6WzIsMTE4XSw1MjpbMiwxMThdLDU3OlsyLDExOF0sNjA6WzIsMTE4XSw2OTpbMiwxMThdLDcwOlsyLDExOF0sNzE6WzIsMTE4XSw3MjpbMiwxMThdLDc0OlsyLDExOF0sNzY6WzIsMTE4XSw3NzpbMiwxMThdLDgxOlsyLDExOF0sODg6WzIsMTE4XSw4OTpbMiwxMThdLDkwOlsyLDExOF0sOTU6WzIsMTE4XSw5NzpbMiwxMThdLDEwNjpbMiwxMThdLDEwODpbMiwxMThdLDEwOTpbMiwxMThdLDExMDpbMiwxMThdLDExNDpbMiwxMThdLDEyMjpbMiwxMThdLDEzMDpbMiwxMThdLDEzMzpbMiwxMThdLDEzNDpbMiwxMThdLDEzOTpbMiwxMThdLDE0MDpbMiwxMThdLDE0MTpbMiwxMThdLDE0MjpbMiwxMThdLDE0MzpbMiwxMThdLDE0NDpbMiwxMThdLDE0NTpbMiwxMThdfSx7MTpbMiwxMTldLDY6WzIsMTE5XSwyODpbMiwxMTldLDI5OlsyLDExOV0sMzA6MTYxLDMxOlsxLDc3XSw1MjpbMiwxMTldLDU3OlsyLDExOV0sNjA6WzIsMTE5XSw2OTpbMiwxMTldLDcwOlsyLDExOV0sNzE6WzIsMTE5XSw3MjpbMiwxMTldLDc0OlsyLDExOV0sNzY6WzIsMTE5XSw3NzpbMiwxMTldLDgxOlsyLDExOV0sODg6WzIsMTE5XSw4OTpbMiwxMTldLDkwOlsyLDExOV0sOTU6WzIsMTE5XSw5NzpbMiwxMTldLDEwNjpbMiwxMTldLDEwODpbMiwxMTldLDEwOTpbMiwxMTldLDExMDpbMiwxMTldLDExNDpbMiwxMTldLDEyMjpbMiwxMTldLDEzMDpbMiwxMTldLDEzMzpbMiwxMTldLDEzNDpbMiwxMTldLDEzOTpbMiwxMTldLDE0MDpbMiwxMTldLDE0MTpbMiwxMTldLDE0MjpbMiwxMTldLDE0MzpbMiwxMTldLDE0NDpbMiwxMTldLDE0NTpbMiwxMTldfSx7Mjg6WzIsNTRdfSx7Mjg6WzIsNTVdfSx7MTpbMiw3Ml0sNjpbMiw3Ml0sMjg6WzIsNzJdLDI5OlsyLDcyXSw0MzpbMiw3Ml0sNTI6WzIsNzJdLDU3OlsyLDcyXSw2MDpbMiw3Ml0sNjk6WzIsNzJdLDcwOlsyLDcyXSw3MTpbMiw3Ml0sNzI6WzIsNzJdLDc0OlsyLDcyXSw3NjpbMiw3Ml0sNzc6WzIsNzJdLDgxOlsyLDcyXSw4MzpbMiw3Ml0sODg6WzIsNzJdLDg5OlsyLDcyXSw5MDpbMiw3Ml0sOTU6WzIsNzJdLDk3OlsyLDcyXSwxMDY6WzIsNzJdLDEwODpbMiw3Ml0sMTA5OlsyLDcyXSwxMTA6WzIsNzJdLDExNDpbMiw3Ml0sMTIyOlsyLDcyXSwxMzA6WzIsNzJdLDEzMzpbMiw3Ml0sMTM0OlsyLDcyXSwxMzc6WzIsNzJdLDEzODpbMiw3Ml0sMTM5OlsyLDcyXSwxNDA6WzIsNzJdLDE0MTpbMiw3Ml0sMTQyOlsyLDcyXSwxNDM6WzIsNzJdLDE0NDpbMiw3Ml0sMTQ1OlsyLDcyXSwxNDY6WzIsNzJdfSx7MTpbMiw3NV0sNjpbMiw3NV0sMjg6WzIsNzVdLDI5OlsyLDc1XSw0MzpbMiw3NV0sNTI6WzIsNzVdLDU3OlsyLDc1XSw2MDpbMiw3NV0sNjk6WzIsNzVdLDcwOlsyLDc1XSw3MTpbMiw3NV0sNzI6WzIsNzVdLDc0OlsyLDc1XSw3NjpbMiw3NV0sNzc6WzIsNzVdLDgxOlsyLDc1XSw4MzpbMiw3NV0sODg6WzIsNzVdLDg5OlsyLDc1XSw5MDpbMiw3NV0sOTU6WzIsNzVdLDk3OlsyLDc1XSwxMDY6WzIsNzVdLDEwODpbMiw3NV0sMTA5OlsyLDc1XSwxMTA6WzIsNzVdLDExNDpbMiw3NV0sMTIyOlsyLDc1XSwxMzA6WzIsNzVdLDEzMzpbMiw3NV0sMTM0OlsyLDc1XSwxMzc6WzIsNzVdLDEzODpbMiw3NV0sMTM5OlsyLDc1XSwxNDA6WzIsNzVdLDE0MTpbMiw3NV0sMTQyOlsyLDc1XSwxNDM6WzIsNzVdLDE0NDpbMiw3NV0sMTQ1OlsyLDc1XSwxNDY6WzIsNzVdfSx7NzoxNjIsODoxMjIsOToxOSwxMDoyMCwxMTpbMSwyMV0sMTI6MjIsMTM6WzEsNTBdLDE1OjYsMTY6NywxNzo4LDE4OjksMTk6MTAsMjA6MTEsMjE6MTIsMjI6MTMsMjM6MTQsMjQ6MTUsMjU6MTYsMjY6MTcsMjc6MTgsMzA6NjYsMzE6WzEsNzddLDMyOjUzLDMzOlsxLDc1XSwzNDpbMSw3Nl0sMzU6MjQsMzY6WzEsNTRdLDM3OlsxLDU1XSwzODpbMSw1Nl0sMzk6WzEsNTddLDQwOlsxLDU4XSw0MTpbMSw1OV0sNDI6MjMsNDc6NjcsNDg6WzEsNDhdLDQ5OlsxLDQ5XSw1MDpbMSwyOV0sNTM6MzAsNTQ6WzEsNjRdLDU1OlsxLDY1XSw2MTo1MSw2Mjo1Miw2NDozOCw2NjoyNSw2NzoyNiw2ODoyNyw3OTpbMSw3NF0sODI6WzEsNDVdLDg2OlsxLDI4XSw4NzpbMSw0N10sOTI6WzEsNjJdLDkzOlsxLDYzXSw5NDpbMSw2MV0sMTAwOlsxLDQwXSwxMDQ6WzEsNDZdLDEwNTpbMSw2MF0sMTA3OjQxLDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTE6NDIsMTEyOlsxLDcxXSwxMTM6NDMsMTE0OlsxLDcyXSwxMTU6NzMsMTIzOlsxLDQ0XSwxMjg6MzksMTI5OlsxLDY4XSwxMzE6WzEsMzFdLDEzMjpbMSwzMl0sMTMzOlsxLDMzXSwxMzQ6WzEsMzRdLDEzNTpbMSwzNV0sMTM3OlsxLDM2XSwxMzg6WzEsMzddfSx7NzoxNjMsODoxMjIsOToxOSwxMDoyMCwxMTpbMSwyMV0sMTI6MjIsMTM6WzEsNTBdLDE1OjYsMTY6NywxNzo4LDE4OjksMTk6MTAsMjA6MTEsMjE6MTIsMjI6MTMsMjM6MTQsMjQ6MTUsMjU6MTYsMjY6MTcsMjc6MTgsMzA6NjYsMzE6WzEsNzddLDMyOjUzLDMzOlsxLDc1XSwzNDpbMSw3Nl0sMzU6MjQsMzY6WzEsNTRdLDM3OlsxLDU1XSwzODpbMSw1Nl0sMzk6WzEsNTddLDQwOlsxLDU4XSw0MTpbMSw1OV0sNDI6MjMsNDc6NjcsNDg6WzEsNDhdLDQ5OlsxLDQ5XSw1MDpbMSwyOV0sNTM6MzAsNTQ6WzEsNjRdLDU1OlsxLDY1XSw2MTo1MSw2Mjo1Miw2NDozOCw2NjoyNSw2NzoyNiw2ODoyNyw3OTpbMSw3NF0sODI6WzEsNDVdLDg2OlsxLDI4XSw4NzpbMSw0N10sOTI6WzEsNjJdLDkzOlsxLDYzXSw5NDpbMSw2MV0sMTAwOlsxLDQwXSwxMDQ6WzEsNDZdLDEwNTpbMSw2MF0sMTA3OjQxLDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTE6NDIsMTEyOlsxLDcxXSwxMTM6NDMsMTE0OlsxLDcyXSwxMTU6NzMsMTIzOlsxLDQ0XSwxMjg6MzksMTI5OlsxLDY4XSwxMzE6WzEsMzFdLDEzMjpbMSwzMl0sMTMzOlsxLDMzXSwxMzQ6WzEsMzRdLDEzNTpbMSwzNV0sMTM3OlsxLDM2XSwxMzg6WzEsMzddfSx7NzoxNjQsODoxMjIsOToxOSwxMDoyMCwxMTpbMSwyMV0sMTI6MjIsMTM6WzEsNTBdLDE1OjYsMTY6NywxNzo4LDE4OjksMTk6MTAsMjA6MTEsMjE6MTIsMjI6MTMsMjM6MTQsMjQ6MTUsMjU6MTYsMjY6MTcsMjc6MTgsMzA6NjYsMzE6WzEsNzddLDMyOjUzLDMzOlsxLDc1XSwzNDpbMSw3Nl0sMzU6MjQsMzY6WzEsNTRdLDM3OlsxLDU1XSwzODpbMSw1Nl0sMzk6WzEsNTddLDQwOlsxLDU4XSw0MTpbMSw1OV0sNDI6MjMsNDc6NjcsNDg6WzEsNDhdLDQ5OlsxLDQ5XSw1MDpbMSwyOV0sNTM6MzAsNTQ6WzEsNjRdLDU1OlsxLDY1XSw2MTo1MSw2Mjo1Miw2NDozOCw2NjoyNSw2NzoyNiw2ODoyNyw3OTpbMSw3NF0sODI6WzEsNDVdLDg2OlsxLDI4XSw4NzpbMSw0N10sOTI6WzEsNjJdLDkzOlsxLDYzXSw5NDpbMSw2MV0sMTAwOlsxLDQwXSwxMDQ6WzEsNDZdLDEwNTpbMSw2MF0sMTA3OjQxLDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTE6NDIsMTEyOlsxLDcxXSwxMTM6NDMsMTE0OlsxLDcyXSwxMTU6NzMsMTIzOlsxLDQ0XSwxMjg6MzksMTI5OlsxLDY4XSwxMzE6WzEsMzFdLDEzMjpbMSwzMl0sMTMzOlsxLDMzXSwxMzQ6WzEsMzRdLDEzNTpbMSwzNV0sMTM3OlsxLDM2XSwxMzg6WzEsMzddfSx7NzoxNjYsODoxMjIsOToxOSwxMDoyMCwxMTpbMSwyMV0sMTI6MjIsMTM6WzEsNTBdLDE0OjE2NSwxNTo2LDE2OjcsMTc6OCwxODo5LDE5OjEwLDIwOjExLDIxOjEyLDIyOjEzLDIzOjE0LDI0OjE1LDI1OjE2LDI2OjE3LDI3OjE4LDI4OlsxLDEyMF0sMzA6NjYsMzE6WzEsNzddLDMyOjUzLDMzOlsxLDc1XSwzNDpbMSw3Nl0sMzU6MjQsMzY6WzEsNTRdLDM3OlsxLDU1XSwzODpbMSw1Nl0sMzk6WzEsNTddLDQwOlsxLDU4XSw0MTpbMSw1OV0sNDI6MjMsNDc6NjcsNDg6WzEsNDhdLDQ5OlsxLDQ5XSw1MDpbMSwyOV0sNTM6MzAsNTQ6WzEsNjRdLDU1OlsxLDY1XSw2MTo1MSw2Mjo1Miw2NDozOCw2NjoyNSw2NzoyNiw2ODoyNyw3OTpbMSw3NF0sODI6WzEsNDVdLDg2OlsxLDI4XSw4NzpbMSw0N10sOTI6WzEsNjJdLDkzOlsxLDYzXSw5NDpbMSw2MV0sMTAwOlsxLDQwXSwxMDQ6WzEsNDZdLDEwNTpbMSw2MF0sMTA3OjQxLDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTE6NDIsMTEyOlsxLDcxXSwxMTM6NDMsMTE0OlsxLDcyXSwxMTU6NzMsMTIzOlsxLDQ0XSwxMjg6MzksMTI5OlsxLDY4XSwxMzE6WzEsMzFdLDEzMjpbMSwzMl0sMTMzOlsxLDMzXSwxMzQ6WzEsMzRdLDEzNTpbMSwzNV0sMTM3OlsxLDM2XSwxMzg6WzEsMzddfSx7MzA6MTcxLDMxOlsxLDc3XSw0NzoxNzIsNjE6MTczLDYyOjE3NCw2NzoxNjcsNzk6WzEsNzRdLDkzOlsxLDExN10sOTQ6WzEsNjFdLDExNzoxNjgsMTE4OlsxLDE2OV0sMTE5OjE3MH0sezExNjoxNzUsMTIwOlsxLDE3Nl0sMTIxOlsxLDE3N119LHs2OlsyLDk2XSwxMDoxODEsMjg6WzIsOTZdLDMwOjE4MiwzMTpbMSw3N10sMzI6MTgzLDMzOlsxLDc1XSwzNDpbMSw3Nl0sNDQ6MTc5LDQ1OjE4MCw0NzoxODQsNDk6WzEsNDldLDU3OlsyLDk2XSw4MDoxNzgsODE6WzIsOTZdLDkzOlsxLDExN119LHsxOlsyLDMwXSw2OlsyLDMwXSwyODpbMiwzMF0sMjk6WzIsMzBdLDQ2OlsyLDMwXSw1MjpbMiwzMF0sNTc6WzIsMzBdLDYwOlsyLDMwXSw2OTpbMiwzMF0sNzA6WzIsMzBdLDcxOlsyLDMwXSw3MjpbMiwzMF0sNzQ6WzIsMzBdLDc2OlsyLDMwXSw3NzpbMiwzMF0sODE6WzIsMzBdLDg4OlsyLDMwXSw4OTpbMiwzMF0sOTA6WzIsMzBdLDk1OlsyLDMwXSw5NzpbMiwzMF0sMTA2OlsyLDMwXSwxMDg6WzIsMzBdLDEwOTpbMiwzMF0sMTEwOlsyLDMwXSwxMTQ6WzIsMzBdLDEyMjpbMiwzMF0sMTMwOlsyLDMwXSwxMzM6WzIsMzBdLDEzNDpbMiwzMF0sMTM5OlsyLDMwXSwxNDA6WzIsMzBdLDE0MTpbMiwzMF0sMTQyOlsyLDMwXSwxNDM6WzIsMzBdLDE0NDpbMiwzMF0sMTQ1OlsyLDMwXX0sezE6WzIsMzFdLDY6WzIsMzFdLDI4OlsyLDMxXSwyOTpbMiwzMV0sNDY6WzIsMzFdLDUyOlsyLDMxXSw1NzpbMiwzMV0sNjA6WzIsMzFdLDY5OlsyLDMxXSw3MDpbMiwzMV0sNzE6WzIsMzFdLDcyOlsyLDMxXSw3NDpbMiwzMV0sNzY6WzIsMzFdLDc3OlsyLDMxXSw4MTpbMiwzMV0sODg6WzIsMzFdLDg5OlsyLDMxXSw5MDpbMiwzMV0sOTU6WzIsMzFdLDk3OlsyLDMxXSwxMDY6WzIsMzFdLDEwODpbMiwzMV0sMTA5OlsyLDMxXSwxMTA6WzIsMzFdLDExNDpbMiwzMV0sMTIyOlsyLDMxXSwxMzA6WzIsMzFdLDEzMzpbMiwzMV0sMTM0OlsyLDMxXSwxMzk6WzIsMzFdLDE0MDpbMiwzMV0sMTQxOlsyLDMxXSwxNDI6WzIsMzFdLDE0MzpbMiwzMV0sMTQ0OlsyLDMxXSwxNDU6WzIsMzFdfSx7MTpbMiwyOV0sNjpbMiwyOV0sMjg6WzIsMjldLDI5OlsyLDI5XSw0MzpbMiwyOV0sNDY6WzIsMjldLDUyOlsyLDI5XSw1NzpbMiwyOV0sNjA6WzIsMjldLDY5OlsyLDI5XSw3MDpbMiwyOV0sNzE6WzIsMjldLDcyOlsyLDI5XSw3NDpbMiwyOV0sNzY6WzIsMjldLDc3OlsyLDI5XSw4MTpbMiwyOV0sODM6WzIsMjldLDg4OlsyLDI5XSw4OTpbMiwyOV0sOTA6WzIsMjldLDk1OlsyLDI5XSw5NzpbMiwyOV0sMTA2OlsyLDI5XSwxMDg6WzIsMjldLDEwOTpbMiwyOV0sMTEwOlsyLDI5XSwxMTQ6WzIsMjldLDEyMDpbMiwyOV0sMTIxOlsyLDI5XSwxMjI6WzIsMjldLDEzMDpbMiwyOV0sMTMzOlsyLDI5XSwxMzQ6WzIsMjldLDEzNzpbMiwyOV0sMTM4OlsyLDI5XSwxMzk6WzIsMjldLDE0MDpbMiwyOV0sMTQxOlsyLDI5XSwxNDI6WzIsMjldLDE0MzpbMiwyOV0sMTQ0OlsyLDI5XSwxNDU6WzIsMjldLDE0NjpbMiwyOV19LHsxOlsyLDVdLDU6MTg1LDY6WzIsNV0sNzo0LDg6NSw5OjE5LDEwOjIwLDExOlsxLDIxXSwxMjoyMiwxMzpbMSw1MF0sMTU6NiwxNjo3LDE3OjgsMTg6OSwxOToxMCwyMDoxMSwyMToxMiwyMjoxMywyMzoxNCwyNDoxNSwyNToxNiwyNjoxNywyNzoxOCwyOTpbMiw1XSwzMDo2NiwzMTpbMSw3N10sMzI6NTMsMzM6WzEsNzVdLDM0OlsxLDc2XSwzNToyNCwzNjpbMSw1NF0sMzc6WzEsNTVdLDM4OlsxLDU2XSwzOTpbMSw1N10sNDA6WzEsNThdLDQxOlsxLDU5XSw0MjoyMyw0Nzo2Nyw0ODpbMSw0OF0sNDk6WzEsNDldLDUwOlsxLDI5XSw1MzozMCw1NDpbMSw2NF0sNTU6WzEsNjVdLDYxOjUxLDYyOjUyLDY0OjM4LDY2OjI1LDY3OjI2LDY4OjI3LDc5OlsxLDc0XSw4MjpbMSw0NV0sODY6WzEsMjhdLDg3OlsxLDQ3XSw5MjpbMSw2Ml0sOTM6WzEsNjNdLDk0OlsxLDYxXSwxMDA6WzEsNDBdLDEwNDpbMSw0Nl0sMTA1OlsxLDYwXSwxMDY6WzIsNV0sMTA3OjQxLDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTE6NDIsMTEyOlsxLDcxXSwxMTM6NDMsMTE0OlsxLDcyXSwxMTU6NzMsMTIzOlsxLDQ0XSwxMjg6MzksMTI5OlsxLDY4XSwxMzE6WzEsMzFdLDEzMjpbMSwzMl0sMTMzOlsxLDMzXSwxMzQ6WzEsMzRdLDEzNTpbMSwzNV0sMTM3OlsxLDM2XSwxMzg6WzEsMzddfSx7MTpbMiwyMDVdLDY6WzIsMjA1XSwyODpbMiwyMDVdLDI5OlsyLDIwNV0sNTI6WzIsMjA1XSw1NzpbMiwyMDVdLDYwOlsyLDIwNV0sNzY6WzIsMjA1XSw4MTpbMiwyMDVdLDkwOlsyLDIwNV0sOTU6WzIsMjA1XSw5NzpbMiwyMDVdLDEwNjpbMiwyMDVdLDEwODpbMiwyMDVdLDEwOTpbMiwyMDVdLDExMDpbMiwyMDVdLDExNDpbMiwyMDVdLDEyMjpbMiwyMDVdLDEzMDpbMiwyMDVdLDEzMzpbMiwyMDVdLDEzNDpbMiwyMDVdLDEzOTpbMiwyMDVdLDE0MDpbMiwyMDVdLDE0MTpbMiwyMDVdLDE0MjpbMiwyMDVdLDE0MzpbMiwyMDVdLDE0NDpbMiwyMDVdLDE0NTpbMiwyMDVdfSx7NzoxODYsODoxMjIsOToxOSwxMDoyMCwxMTpbMSwyMV0sMTI6MjIsMTM6WzEsNTBdLDE1OjYsMTY6NywxNzo4LDE4OjksMTk6MTAsMjA6MTEsMjE6MTIsMjI6MTMsMjM6MTQsMjQ6MTUsMjU6MTYsMjY6MTcsMjc6MTgsMzA6NjYsMzE6WzEsNzddLDMyOjUzLDMzOlsxLDc1XSwzNDpbMSw3Nl0sMzU6MjQsMzY6WzEsNTRdLDM3OlsxLDU1XSwzODpbMSw1Nl0sMzk6WzEsNTddLDQwOlsxLDU4XSw0MTpbMSw1OV0sNDI6MjMsNDc6NjcsNDg6WzEsNDhdLDQ5OlsxLDQ5XSw1MDpbMSwyOV0sNTM6MzAsNTQ6WzEsNjRdLDU1OlsxLDY1XSw2MTo1MSw2Mjo1Miw2NDozOCw2NjoyNSw2NzoyNiw2ODoyNyw3OTpbMSw3NF0sODI6WzEsNDVdLDg2OlsxLDI4XSw4NzpbMSw0N10sOTI6WzEsNjJdLDkzOlsxLDYzXSw5NDpbMSw2MV0sMTAwOlsxLDQwXSwxMDQ6WzEsNDZdLDEwNTpbMSw2MF0sMTA3OjQxLDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTE6NDIsMTEyOlsxLDcxXSwxMTM6NDMsMTE0OlsxLDcyXSwxMTU6NzMsMTIzOlsxLDQ0XSwxMjg6MzksMTI5OlsxLDY4XSwxMzE6WzEsMzFdLDEzMjpbMSwzMl0sMTMzOlsxLDMzXSwxMzQ6WzEsMzRdLDEzNTpbMSwzNV0sMTM3OlsxLDM2XSwxMzg6WzEsMzddfSx7NzoxODcsODoxMjIsOToxOSwxMDoyMCwxMTpbMSwyMV0sMTI6MjIsMTM6WzEsNTBdLDE1OjYsMTY6NywxNzo4LDE4OjksMTk6MTAsMjA6MTEsMjE6MTIsMjI6MTMsMjM6MTQsMjQ6MTUsMjU6MTYsMjY6MTcsMjc6MTgsMzA6NjYsMzE6WzEsNzddLDMyOjUzLDMzOlsxLDc1XSwzNDpbMSw3Nl0sMzU6MjQsMzY6WzEsNTRdLDM3OlsxLDU1XSwzODpbMSw1Nl0sMzk6WzEsNTddLDQwOlsxLDU4XSw0MTpbMSw1OV0sNDI6MjMsNDc6NjcsNDg6WzEsNDhdLDQ5OlsxLDQ5XSw1MDpbMSwyOV0sNTM6MzAsNTQ6WzEsNjRdLDU1OlsxLDY1XSw2MTo1MSw2Mjo1Miw2NDozOCw2NjoyNSw2NzoyNiw2ODoyNyw3OTpbMSw3NF0sODI6WzEsNDVdLDg2OlsxLDI4XSw4NzpbMSw0N10sOTI6WzEsNjJdLDkzOlsxLDYzXSw5NDpbMSw2MV0sMTAwOlsxLDQwXSwxMDQ6WzEsNDZdLDEwNTpbMSw2MF0sMTA3OjQxLDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTE6NDIsMTEyOlsxLDcxXSwxMTM6NDMsMTE0OlsxLDcyXSwxMTU6NzMsMTIzOlsxLDQ0XSwxMjg6MzksMTI5OlsxLDY4XSwxMzE6WzEsMzFdLDEzMjpbMSwzMl0sMTMzOlsxLDMzXSwxMzQ6WzEsMzRdLDEzNTpbMSwzNV0sMTM3OlsxLDM2XSwxMzg6WzEsMzddfSx7NzoxODgsODoxMjIsOToxOSwxMDoyMCwxMTpbMSwyMV0sMTI6MjIsMTM6WzEsNTBdLDE1OjYsMTY6NywxNzo4LDE4OjksMTk6MTAsMjA6MTEsMjE6MTIsMjI6MTMsMjM6MTQsMjQ6MTUsMjU6MTYsMjY6MTcsMjc6MTgsMzA6NjYsMzE6WzEsNzddLDMyOjUzLDMzOlsxLDc1XSwzNDpbMSw3Nl0sMzU6MjQsMzY6WzEsNTRdLDM3OlsxLDU1XSwzODpbMSw1Nl0sMzk6WzEsNTddLDQwOlsxLDU4XSw0MTpbMSw1OV0sNDI6MjMsNDc6NjcsNDg6WzEsNDhdLDQ5OlsxLDQ5XSw1MDpbMSwyOV0sNTM6MzAsNTQ6WzEsNjRdLDU1OlsxLDY1XSw2MTo1MSw2Mjo1Miw2NDozOCw2NjoyNSw2NzoyNiw2ODoyNyw3OTpbMSw3NF0sODI6WzEsNDVdLDg2OlsxLDI4XSw4NzpbMSw0N10sOTI6WzEsNjJdLDkzOlsxLDYzXSw5NDpbMSw2MV0sMTAwOlsxLDQwXSwxMDQ6WzEsNDZdLDEwNTpbMSw2MF0sMTA3OjQxLDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTE6NDIsMTEyOlsxLDcxXSwxMTM6NDMsMTE0OlsxLDcyXSwxMTU6NzMsMTIzOlsxLDQ0XSwxMjg6MzksMTI5OlsxLDY4XSwxMzE6WzEsMzFdLDEzMjpbMSwzMl0sMTMzOlsxLDMzXSwxMzQ6WzEsMzRdLDEzNTpbMSwzNV0sMTM3OlsxLDM2XSwxMzg6WzEsMzddfSx7NzoxODksODoxMjIsOToxOSwxMDoyMCwxMTpbMSwyMV0sMTI6MjIsMTM6WzEsNTBdLDE1OjYsMTY6NywxNzo4LDE4OjksMTk6MTAsMjA6MTEsMjE6MTIsMjI6MTMsMjM6MTQsMjQ6MTUsMjU6MTYsMjY6MTcsMjc6MTgsMzA6NjYsMzE6WzEsNzddLDMyOjUzLDMzOlsxLDc1XSwzNDpbMSw3Nl0sMzU6MjQsMzY6WzEsNTRdLDM3OlsxLDU1XSwzODpbMSw1Nl0sMzk6WzEsNTddLDQwOlsxLDU4XSw0MTpbMSw1OV0sNDI6MjMsNDc6NjcsNDg6WzEsNDhdLDQ5OlsxLDQ5XSw1MDpbMSwyOV0sNTM6MzAsNTQ6WzEsNjRdLDU1OlsxLDY1XSw2MTo1MSw2Mjo1Miw2NDozOCw2NjoyNSw2NzoyNiw2ODoyNyw3OTpbMSw3NF0sODI6WzEsNDVdLDg2OlsxLDI4XSw4NzpbMSw0N10sOTI6WzEsNjJdLDkzOlsxLDYzXSw5NDpbMSw2MV0sMTAwOlsxLDQwXSwxMDQ6WzEsNDZdLDEwNTpbMSw2MF0sMTA3OjQxLDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTE6NDIsMTEyOlsxLDcxXSwxMTM6NDMsMTE0OlsxLDcyXSwxMTU6NzMsMTIzOlsxLDQ0XSwxMjg6MzksMTI5OlsxLDY4XSwxMzE6WzEsMzFdLDEzMjpbMSwzMl0sMTMzOlsxLDMzXSwxMzQ6WzEsMzRdLDEzNTpbMSwzNV0sMTM3OlsxLDM2XSwxMzg6WzEsMzddfSx7NzoxOTAsODoxMjIsOToxOSwxMDoyMCwxMTpbMSwyMV0sMTI6MjIsMTM6WzEsNTBdLDE1OjYsMTY6NywxNzo4LDE4OjksMTk6MTAsMjA6MTEsMjE6MTIsMjI6MTMsMjM6MTQsMjQ6MTUsMjU6MTYsMjY6MTcsMjc6MTgsMzA6NjYsMzE6WzEsNzddLDMyOjUzLDMzOlsxLDc1XSwzNDpbMSw3Nl0sMzU6MjQsMzY6WzEsNTRdLDM3OlsxLDU1XSwzODpbMSw1Nl0sMzk6WzEsNTddLDQwOlsxLDU4XSw0MTpbMSw1OV0sNDI6MjMsNDc6NjcsNDg6WzEsNDhdLDQ5OlsxLDQ5XSw1MDpbMSwyOV0sNTM6MzAsNTQ6WzEsNjRdLDU1OlsxLDY1XSw2MTo1MSw2Mjo1Miw2NDozOCw2NjoyNSw2NzoyNiw2ODoyNyw3OTpbMSw3NF0sODI6WzEsNDVdLDg2OlsxLDI4XSw4NzpbMSw0N10sOTI6WzEsNjJdLDkzOlsxLDYzXSw5NDpbMSw2MV0sMTAwOlsxLDQwXSwxMDQ6WzEsNDZdLDEwNTpbMSw2MF0sMTA3OjQxLDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTE6NDIsMTEyOlsxLDcxXSwxMTM6NDMsMTE0OlsxLDcyXSwxMTU6NzMsMTIzOlsxLDQ0XSwxMjg6MzksMTI5OlsxLDY4XSwxMzE6WzEsMzFdLDEzMjpbMSwzMl0sMTMzOlsxLDMzXSwxMzQ6WzEsMzRdLDEzNTpbMSwzNV0sMTM3OlsxLDM2XSwxMzg6WzEsMzddfSx7NzoxOTEsODoxMjIsOToxOSwxMDoyMCwxMTpbMSwyMV0sMTI6MjIsMTM6WzEsNTBdLDE1OjYsMTY6NywxNzo4LDE4OjksMTk6MTAsMjA6MTEsMjE6MTIsMjI6MTMsMjM6MTQsMjQ6MTUsMjU6MTYsMjY6MTcsMjc6MTgsMzA6NjYsMzE6WzEsNzddLDMyOjUzLDMzOlsxLDc1XSwzNDpbMSw3Nl0sMzU6MjQsMzY6WzEsNTRdLDM3OlsxLDU1XSwzODpbMSw1Nl0sMzk6WzEsNTddLDQwOlsxLDU4XSw0MTpbMSw1OV0sNDI6MjMsNDc6NjcsNDg6WzEsNDhdLDQ5OlsxLDQ5XSw1MDpbMSwyOV0sNTM6MzAsNTQ6WzEsNjRdLDU1OlsxLDY1XSw2MTo1MSw2Mjo1Miw2NDozOCw2NjoyNSw2NzoyNiw2ODoyNyw3OTpbMSw3NF0sODI6WzEsNDVdLDg2OlsxLDI4XSw4NzpbMSw0N10sOTI6WzEsNjJdLDkzOlsxLDYzXSw5NDpbMSw2MV0sMTAwOlsxLDQwXSwxMDQ6WzEsNDZdLDEwNTpbMSw2MF0sMTA3OjQxLDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTE6NDIsMTEyOlsxLDcxXSwxMTM6NDMsMTE0OlsxLDcyXSwxMTU6NzMsMTIzOlsxLDQ0XSwxMjg6MzksMTI5OlsxLDY4XSwxMzE6WzEsMzFdLDEzMjpbMSwzMl0sMTMzOlsxLDMzXSwxMzQ6WzEsMzRdLDEzNTpbMSwzNV0sMTM3OlsxLDM2XSwxMzg6WzEsMzddfSx7NzoxOTIsODoxMjIsOToxOSwxMDoyMCwxMTpbMSwyMV0sMTI6MjIsMTM6WzEsNTBdLDE1OjYsMTY6NywxNzo4LDE4OjksMTk6MTAsMjA6MTEsMjE6MTIsMjI6MTMsMjM6MTQsMjQ6MTUsMjU6MTYsMjY6MTcsMjc6MTgsMzA6NjYsMzE6WzEsNzddLDMyOjUzLDMzOlsxLDc1XSwzNDpbMSw3Nl0sMzU6MjQsMzY6WzEsNTRdLDM3OlsxLDU1XSwzODpbMSw1Nl0sMzk6WzEsNTddLDQwOlsxLDU4XSw0MTpbMSw1OV0sNDI6MjMsNDc6NjcsNDg6WzEsNDhdLDQ5OlsxLDQ5XSw1MDpbMSwyOV0sNTM6MzAsNTQ6WzEsNjRdLDU1OlsxLDY1XSw2MTo1MSw2Mjo1Miw2NDozOCw2NjoyNSw2NzoyNiw2ODoyNyw3OTpbMSw3NF0sODI6WzEsNDVdLDg2OlsxLDI4XSw4NzpbMSw0N10sOTI6WzEsNjJdLDkzOlsxLDYzXSw5NDpbMSw2MV0sMTAwOlsxLDQwXSwxMDQ6WzEsNDZdLDEwNTpbMSw2MF0sMTA3OjQxLDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTE6NDIsMTEyOlsxLDcxXSwxMTM6NDMsMTE0OlsxLDcyXSwxMTU6NzMsMTIzOlsxLDQ0XSwxMjg6MzksMTI5OlsxLDY4XSwxMzE6WzEsMzFdLDEzMjpbMSwzMl0sMTMzOlsxLDMzXSwxMzQ6WzEsMzRdLDEzNTpbMSwzNV0sMTM3OlsxLDM2XSwxMzg6WzEsMzddfSx7NzoxOTMsODoxMjIsOToxOSwxMDoyMCwxMTpbMSwyMV0sMTI6MjIsMTM6WzEsNTBdLDE1OjYsMTY6NywxNzo4LDE4OjksMTk6MTAsMjA6MTEsMjE6MTIsMjI6MTMsMjM6MTQsMjQ6MTUsMjU6MTYsMjY6MTcsMjc6MTgsMzA6NjYsMzE6WzEsNzddLDMyOjUzLDMzOlsxLDc1XSwzNDpbMSw3Nl0sMzU6MjQsMzY6WzEsNTRdLDM3OlsxLDU1XSwzODpbMSw1Nl0sMzk6WzEsNTddLDQwOlsxLDU4XSw0MTpbMSw1OV0sNDI6MjMsNDc6NjcsNDg6WzEsNDhdLDQ5OlsxLDQ5XSw1MDpbMSwyOV0sNTM6MzAsNTQ6WzEsNjRdLDU1OlsxLDY1XSw2MTo1MSw2Mjo1Miw2NDozOCw2NjoyNSw2NzoyNiw2ODoyNyw3OTpbMSw3NF0sODI6WzEsNDVdLDg2OlsxLDI4XSw4NzpbMSw0N10sOTI6WzEsNjJdLDkzOlsxLDYzXSw5NDpbMSw2MV0sMTAwOlsxLDQwXSwxMDQ6WzEsNDZdLDEwNTpbMSw2MF0sMTA3OjQxLDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTE6NDIsMTEyOlsxLDcxXSwxMTM6NDMsMTE0OlsxLDcyXSwxMTU6NzMsMTIzOlsxLDQ0XSwxMjg6MzksMTI5OlsxLDY4XSwxMzE6WzEsMzFdLDEzMjpbMSwzMl0sMTMzOlsxLDMzXSwxMzQ6WzEsMzRdLDEzNTpbMSwzNV0sMTM3OlsxLDM2XSwxMzg6WzEsMzddfSx7NzoxOTQsODoxMjIsOToxOSwxMDoyMCwxMTpbMSwyMV0sMTI6MjIsMTM6WzEsNTBdLDE1OjYsMTY6NywxNzo4LDE4OjksMTk6MTAsMjA6MTEsMjE6MTIsMjI6MTMsMjM6MTQsMjQ6MTUsMjU6MTYsMjY6MTcsMjc6MTgsMzA6NjYsMzE6WzEsNzddLDMyOjUzLDMzOlsxLDc1XSwzNDpbMSw3Nl0sMzU6MjQsMzY6WzEsNTRdLDM3OlsxLDU1XSwzODpbMSw1Nl0sMzk6WzEsNTddLDQwOlsxLDU4XSw0MTpbMSw1OV0sNDI6MjMsNDc6NjcsNDg6WzEsNDhdLDQ5OlsxLDQ5XSw1MDpbMSwyOV0sNTM6MzAsNTQ6WzEsNjRdLDU1OlsxLDY1XSw2MTo1MSw2Mjo1Miw2NDozOCw2NjoyNSw2NzoyNiw2ODoyNyw3OTpbMSw3NF0sODI6WzEsNDVdLDg2OlsxLDI4XSw4NzpbMSw0N10sOTI6WzEsNjJdLDkzOlsxLDYzXSw5NDpbMSw2MV0sMTAwOlsxLDQwXSwxMDQ6WzEsNDZdLDEwNTpbMSw2MF0sMTA3OjQxLDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTE6NDIsMTEyOlsxLDcxXSwxMTM6NDMsMTE0OlsxLDcyXSwxMTU6NzMsMTIzOlsxLDQ0XSwxMjg6MzksMTI5OlsxLDY4XSwxMzE6WzEsMzFdLDEzMjpbMSwzMl0sMTMzOlsxLDMzXSwxMzQ6WzEsMzRdLDEzNTpbMSwzNV0sMTM3OlsxLDM2XSwxMzg6WzEsMzddfSx7MTpbMiwxNTZdLDY6WzIsMTU2XSwyODpbMiwxNTZdLDI5OlsyLDE1Nl0sNTI6WzIsMTU2XSw1NzpbMiwxNTZdLDYwOlsyLDE1Nl0sNzY6WzIsMTU2XSw4MTpbMiwxNTZdLDkwOlsyLDE1Nl0sOTU6WzIsMTU2XSw5NzpbMiwxNTZdLDEwNjpbMiwxNTZdLDEwODpbMiwxNTZdLDEwOTpbMiwxNTZdLDExMDpbMiwxNTZdLDExNDpbMiwxNTZdLDEyMjpbMiwxNTZdLDEzMDpbMiwxNTZdLDEzMzpbMiwxNTZdLDEzNDpbMiwxNTZdLDEzOTpbMiwxNTZdLDE0MDpbMiwxNTZdLDE0MTpbMiwxNTZdLDE0MjpbMiwxNTZdLDE0MzpbMiwxNTZdLDE0NDpbMiwxNTZdLDE0NTpbMiwxNTZdfSx7MTpbMiwxNjFdLDY6WzIsMTYxXSwyODpbMiwxNjFdLDI5OlsyLDE2MV0sNTI6WzIsMTYxXSw1NzpbMiwxNjFdLDYwOlsyLDE2MV0sNzY6WzIsMTYxXSw4MTpbMiwxNjFdLDkwOlsyLDE2MV0sOTU6WzIsMTYxXSw5NzpbMiwxNjFdLDEwNjpbMiwxNjFdLDEwODpbMiwxNjFdLDEwOTpbMiwxNjFdLDExMDpbMiwxNjFdLDExNDpbMiwxNjFdLDEyMjpbMiwxNjFdLDEzMDpbMiwxNjFdLDEzMzpbMiwxNjFdLDEzNDpbMiwxNjFdLDEzOTpbMiwxNjFdLDE0MDpbMiwxNjFdLDE0MTpbMiwxNjFdLDE0MjpbMiwxNjFdLDE0MzpbMiwxNjFdLDE0NDpbMiwxNjFdLDE0NTpbMiwxNjFdfSx7NzoxOTUsODoxMjIsOToxOSwxMDoyMCwxMTpbMSwyMV0sMTI6MjIsMTM6WzEsNTBdLDE1OjYsMTY6NywxNzo4LDE4OjksMTk6MTAsMjA6MTEsMjE6MTIsMjI6MTMsMjM6MTQsMjQ6MTUsMjU6MTYsMjY6MTcsMjc6MTgsMzA6NjYsMzE6WzEsNzddLDMyOjUzLDMzOlsxLDc1XSwzNDpbMSw3Nl0sMzU6MjQsMzY6WzEsNTRdLDM3OlsxLDU1XSwzODpbMSw1Nl0sMzk6WzEsNTddLDQwOlsxLDU4XSw0MTpbMSw1OV0sNDI6MjMsNDc6NjcsNDg6WzEsNDhdLDQ5OlsxLDQ5XSw1MDpbMSwyOV0sNTM6MzAsNTQ6WzEsNjRdLDU1OlsxLDY1XSw2MTo1MSw2Mjo1Miw2NDozOCw2NjoyNSw2NzoyNiw2ODoyNyw3OTpbMSw3NF0sODI6WzEsNDVdLDg2OlsxLDI4XSw4NzpbMSw0N10sOTI6WzEsNjJdLDkzOlsxLDYzXSw5NDpbMSw2MV0sMTAwOlsxLDQwXSwxMDQ6WzEsNDZdLDEwNTpbMSw2MF0sMTA3OjQxLDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTE6NDIsMTEyOlsxLDcxXSwxMTM6NDMsMTE0OlsxLDcyXSwxMTU6NzMsMTIzOlsxLDQ0XSwxMjg6MzksMTI5OlsxLDY4XSwxMzE6WzEsMzFdLDEzMjpbMSwzMl0sMTMzOlsxLDMzXSwxMzQ6WzEsMzRdLDEzNTpbMSwzNV0sMTM3OlsxLDM2XSwxMzg6WzEsMzddfSx7MTpbMiwxNTVdLDY6WzIsMTU1XSwyODpbMiwxNTVdLDI5OlsyLDE1NV0sNTI6WzIsMTU1XSw1NzpbMiwxNTVdLDYwOlsyLDE1NV0sNzY6WzIsMTU1XSw4MTpbMiwxNTVdLDkwOlsyLDE1NV0sOTU6WzIsMTU1XSw5NzpbMiwxNTVdLDEwNjpbMiwxNTVdLDEwODpbMiwxNTVdLDEwOTpbMiwxNTVdLDExMDpbMiwxNTVdLDExNDpbMiwxNTVdLDEyMjpbMiwxNTVdLDEzMDpbMiwxNTVdLDEzMzpbMiwxNTVdLDEzNDpbMiwxNTVdLDEzOTpbMiwxNTVdLDE0MDpbMiwxNTVdLDE0MTpbMiwxNTVdLDE0MjpbMiwxNTVdLDE0MzpbMiwxNTVdLDE0NDpbMiwxNTVdLDE0NTpbMiwxNTVdfSx7MTpbMiwxNjBdLDY6WzIsMTYwXSwyODpbMiwxNjBdLDI5OlsyLDE2MF0sNTI6WzIsMTYwXSw1NzpbMiwxNjBdLDYwOlsyLDE2MF0sNzY6WzIsMTYwXSw4MTpbMiwxNjBdLDkwOlsyLDE2MF0sOTU6WzIsMTYwXSw5NzpbMiwxNjBdLDEwNjpbMiwxNjBdLDEwODpbMiwxNjBdLDEwOTpbMiwxNjBdLDExMDpbMiwxNjBdLDExNDpbMiwxNjBdLDEyMjpbMiwxNjBdLDEzMDpbMiwxNjBdLDEzMzpbMiwxNjBdLDEzNDpbMiwxNjBdLDEzOTpbMiwxNjBdLDE0MDpbMiwxNjBdLDE0MTpbMiwxNjBdLDE0MjpbMiwxNjBdLDE0MzpbMiwxNjBdLDE0NDpbMiwxNjBdLDE0NTpbMiwxNjBdfSx7ODU6MTk2LDg5OlsxLDEwOF19LHsxOlsyLDczXSw2OlsyLDczXSwyODpbMiw3M10sMjk6WzIsNzNdLDQzOlsyLDczXSw1MjpbMiw3M10sNTc6WzIsNzNdLDYwOlsyLDczXSw2OTpbMiw3M10sNzA6WzIsNzNdLDcxOlsyLDczXSw3MjpbMiw3M10sNzQ6WzIsNzNdLDc2OlsyLDczXSw3NzpbMiw3M10sODE6WzIsNzNdLDgzOlsyLDczXSw4ODpbMiw3M10sODk6WzIsNzNdLDkwOlsyLDczXSw5NTpbMiw3M10sOTc6WzIsNzNdLDEwNjpbMiw3M10sMTA4OlsyLDczXSwxMDk6WzIsNzNdLDExMDpbMiw3M10sMTE0OlsyLDczXSwxMjI6WzIsNzNdLDEzMDpbMiw3M10sMTMzOlsyLDczXSwxMzQ6WzIsNzNdLDEzNzpbMiw3M10sMTM4OlsyLDczXSwxMzk6WzIsNzNdLDE0MDpbMiw3M10sMTQxOlsyLDczXSwxNDI6WzIsNzNdLDE0MzpbMiw3M10sMTQ0OlsyLDczXSwxNDU6WzIsNzNdLDE0NjpbMiw3M119LHs4OTpbMiwxMTVdfSx7Mjc6MTk4LDMwOjE5NywzMTpbMSw3N10sODc6WzEsNDddfSx7MzA6MTk5LDMxOlsxLDc3XX0sezE6WzIsODldLDY6WzIsODldLDI4OlsyLDg5XSwyOTpbMiw4OV0sMzA6MjAwLDMxOlsxLDc3XSw0MzpbMiw4OV0sNTI6WzIsODldLDU3OlsyLDg5XSw2MDpbMiw4OV0sNjk6WzIsODldLDcwOlsyLDg5XSw3MTpbMiw4OV0sNzI6WzIsODldLDc0OlsyLDg5XSw3NjpbMiw4OV0sNzc6WzIsODldLDgxOlsyLDg5XSw4MzpbMiw4OV0sODg6WzIsODldLDg5OlsyLDg5XSw5MDpbMiw4OV0sOTU6WzIsODldLDk3OlsyLDg5XSwxMDY6WzIsODldLDEwODpbMiw4OV0sMTA5OlsyLDg5XSwxMTA6WzIsODldLDExNDpbMiw4OV0sMTIyOlsyLDg5XSwxMzA6WzIsODldLDEzMzpbMiw4OV0sMTM0OlsyLDg5XSwxMzc6WzIsODldLDEzODpbMiw4OV0sMTM5OlsyLDg5XSwxNDA6WzIsODldLDE0MTpbMiw4OV0sMTQyOlsyLDg5XSwxNDM6WzIsODldLDE0NDpbMiw4OV0sMTQ1OlsyLDg5XSwxNDY6WzIsODldfSx7MzA6MjAxLDMxOlsxLDc3XX0sezE6WzIsOTBdLDY6WzIsOTBdLDI4OlsyLDkwXSwyOTpbMiw5MF0sNDM6WzIsOTBdLDUyOlsyLDkwXSw1NzpbMiw5MF0sNjA6WzIsOTBdLDY5OlsyLDkwXSw3MDpbMiw5MF0sNzE6WzIsOTBdLDcyOlsyLDkwXSw3NDpbMiw5MF0sNzY6WzIsOTBdLDc3OlsyLDkwXSw4MTpbMiw5MF0sODM6WzIsOTBdLDg4OlsyLDkwXSw4OTpbMiw5MF0sOTA6WzIsOTBdLDk1OlsyLDkwXSw5NzpbMiw5MF0sMTA2OlsyLDkwXSwxMDg6WzIsOTBdLDEwOTpbMiw5MF0sMTEwOlsyLDkwXSwxMTQ6WzIsOTBdLDEyMjpbMiw5MF0sMTMwOlsyLDkwXSwxMzM6WzIsOTBdLDEzNDpbMiw5MF0sMTM3OlsyLDkwXSwxMzg6WzIsOTBdLDEzOTpbMiw5MF0sMTQwOlsyLDkwXSwxNDE6WzIsOTBdLDE0MjpbMiw5MF0sMTQzOlsyLDkwXSwxNDQ6WzIsOTBdLDE0NTpbMiw5MF0sMTQ2OlsyLDkwXX0sezc6MjAzLDg6MTIyLDk6MTksMTA6MjAsMTE6WzEsMjFdLDEyOjIyLDEzOlsxLDUwXSwxNTo2LDE2OjcsMTc6OCwxODo5LDE5OjEwLDIwOjExLDIxOjEyLDIyOjEzLDIzOjE0LDI0OjE1LDI1OjE2LDI2OjE3LDI3OjE4LDMwOjY2LDMxOlsxLDc3XSwzMjo1MywzMzpbMSw3NV0sMzQ6WzEsNzZdLDM1OjI0LDM2OlsxLDU0XSwzNzpbMSw1NV0sMzg6WzEsNTZdLDM5OlsxLDU3XSw0MDpbMSw1OF0sNDE6WzEsNTldLDQyOjIzLDQ3OjY3LDQ4OlsxLDQ4XSw0OTpbMSw0OV0sNTA6WzEsMjldLDUzOjMwLDU0OlsxLDY0XSw1NTpbMSw2NV0sNjA6WzEsMjA3XSw2MTo1MSw2Mjo1Miw2NDozOCw2NjoyNSw2NzoyNiw2ODoyNyw3NToyMDIsNzg6MjA0LDc5OlsxLDc0XSw4MjpbMSw0NV0sODY6WzEsMjhdLDg3OlsxLDQ3XSw5MjpbMSw2Ml0sOTM6WzEsNjNdLDk0OlsxLDYxXSw5NjoyMDUsOTc6WzEsMjA2XSwxMDA6WzEsNDBdLDEwNDpbMSw0Nl0sMTA1OlsxLDYwXSwxMDc6NDEsMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMTo0MiwxMTI6WzEsNzFdLDExMzo0MywxMTQ6WzEsNzJdLDExNTo3MywxMjM6WzEsNDRdLDEyODozOSwxMjk6WzEsNjhdLDEzMTpbMSwzMV0sMTMyOlsxLDMyXSwxMzM6WzEsMzNdLDEzNDpbMSwzNF0sMTM1OlsxLDM1XSwxMzc6WzEsMzZdLDEzODpbMSwzN119LHs3MzoyMDgsNzQ6WzEsMTAyXSw3NzpbMSwxMDNdfSx7ODU6MjA5LDg5OlsxLDEwOF19LHsxOlsyLDc0XSw2OlsyLDc0XSwyODpbMiw3NF0sMjk6WzIsNzRdLDQzOlsyLDc0XSw1MjpbMiw3NF0sNTc6WzIsNzRdLDYwOlsyLDc0XSw2OTpbMiw3NF0sNzA6WzIsNzRdLDcxOlsyLDc0XSw3MjpbMiw3NF0sNzQ6WzIsNzRdLDc2OlsyLDc0XSw3NzpbMiw3NF0sODE6WzIsNzRdLDgzOlsyLDc0XSw4ODpbMiw3NF0sODk6WzIsNzRdLDkwOlsyLDc0XSw5NTpbMiw3NF0sOTc6WzIsNzRdLDEwNjpbMiw3NF0sMTA4OlsyLDc0XSwxMDk6WzIsNzRdLDExMDpbMiw3NF0sMTE0OlsyLDc0XSwxMjI6WzIsNzRdLDEzMDpbMiw3NF0sMTMzOlsyLDc0XSwxMzQ6WzIsNzRdLDEzNzpbMiw3NF0sMTM4OlsyLDc0XSwxMzk6WzIsNzRdLDE0MDpbMiw3NF0sMTQxOlsyLDc0XSwxNDI6WzIsNzRdLDE0MzpbMiw3NF0sMTQ0OlsyLDc0XSwxNDU6WzIsNzRdLDE0NjpbMiw3NF19LHs2OlsxLDIxMV0sNzoyMTAsODoxMjIsOToxOSwxMDoyMCwxMTpbMSwyMV0sMTI6MjIsMTM6WzEsNTBdLDE1OjYsMTY6NywxNzo4LDE4OjksMTk6MTAsMjA6MTEsMjE6MTIsMjI6MTMsMjM6MTQsMjQ6MTUsMjU6MTYsMjY6MTcsMjc6MTgsMjg6WzEsMjEyXSwzMDo2NiwzMTpbMSw3N10sMzI6NTMsMzM6WzEsNzVdLDM0OlsxLDc2XSwzNToyNCwzNjpbMSw1NF0sMzc6WzEsNTVdLDM4OlsxLDU2XSwzOTpbMSw1N10sNDA6WzEsNThdLDQxOlsxLDU5XSw0MjoyMyw0Nzo2Nyw0ODpbMSw0OF0sNDk6WzEsNDldLDUwOlsxLDI5XSw1MzozMCw1NDpbMSw2NF0sNTU6WzEsNjVdLDYxOjUxLDYyOjUyLDY0OjM4LDY2OjI1LDY3OjI2LDY4OjI3LDc5OlsxLDc0XSw4MjpbMSw0NV0sODY6WzEsMjhdLDg3OlsxLDQ3XSw5MjpbMSw2Ml0sOTM6WzEsNjNdLDk0OlsxLDYxXSwxMDA6WzEsNDBdLDEwNDpbMSw0Nl0sMTA1OlsxLDYwXSwxMDc6NDEsMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMTo0MiwxMTI6WzEsNzFdLDExMzo0MywxMTQ6WzEsNzJdLDExNTo3MywxMjM6WzEsNDRdLDEyODozOSwxMjk6WzEsNjhdLDEzMTpbMSwzMV0sMTMyOlsxLDMyXSwxMzM6WzEsMzNdLDEzNDpbMSwzNF0sMTM1OlsxLDM1XSwxMzc6WzEsMzZdLDEzODpbMSwzN119LHsxOlsyLDExMl0sNjpbMiwxMTJdLDI4OlsyLDExMl0sMjk6WzIsMTEyXSw1MjpbMiwxMTJdLDU3OlsyLDExMl0sNjA6WzIsMTEyXSw2OTpbMiwxMTJdLDcwOlsyLDExMl0sNzE6WzIsMTEyXSw3MjpbMiwxMTJdLDc0OlsyLDExMl0sNzY6WzIsMTEyXSw3NzpbMiwxMTJdLDgxOlsyLDExMl0sODg6WzIsMTEyXSw4OTpbMiwxMTJdLDkwOlsyLDExMl0sOTU6WzIsMTEyXSw5NzpbMiwxMTJdLDEwNjpbMiwxMTJdLDEwODpbMiwxMTJdLDEwOTpbMiwxMTJdLDExMDpbMiwxMTJdLDExNDpbMiwxMTJdLDEyMjpbMiwxMTJdLDEzMDpbMiwxMTJdLDEzMzpbMiwxMTJdLDEzNDpbMiwxMTJdLDEzOTpbMiwxMTJdLDE0MDpbMiwxMTJdLDE0MTpbMiwxMTJdLDE0MjpbMiwxMTJdLDE0MzpbMiwxMTJdLDE0NDpbMiwxMTJdLDE0NTpbMiwxMTJdfSx7NzoyMTUsODoxMjIsOToxOSwxMDoyMCwxMTpbMSwyMV0sMTI6MjIsMTM6WzEsNTBdLDE1OjYsMTY6NywxNzo4LDE4OjksMTk6MTAsMjA6MTEsMjE6MTIsMjI6MTMsMjM6MTQsMjQ6MTUsMjU6MTYsMjY6MTcsMjc6MTgsMjg6WzEsMTU4XSwzMDo2NiwzMTpbMSw3N10sMzI6NTMsMzM6WzEsNzVdLDM0OlsxLDc2XSwzNToyNCwzNjpbMSw1NF0sMzc6WzEsNTVdLDM4OlsxLDU2XSwzOTpbMSw1N10sNDA6WzEsNThdLDQxOlsxLDU5XSw0MjoyMyw0Nzo2Nyw0ODpbMSw0OF0sNDk6WzEsNDldLDUwOlsxLDI5XSw1MzozMCw1NDpbMSw2NF0sNTU6WzEsNjVdLDYwOlsxLDE2MF0sNjE6NTEsNjI6NTIsNjM6MTU5LDY0OjM4LDY2OjI1LDY3OjI2LDY4OjI3LDc5OlsxLDc0XSw4MjpbMSw0NV0sODY6WzEsMjhdLDg3OlsxLDQ3XSw5MDpbMSwyMTNdLDkxOjIxNCw5MjpbMSw2Ml0sOTM6WzEsNjNdLDk0OlsxLDYxXSw5ODoxNTcsMTAwOlsxLDQwXSwxMDQ6WzEsNDZdLDEwNTpbMSw2MF0sMTA3OjQxLDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTE6NDIsMTEyOlsxLDcxXSwxMTM6NDMsMTE0OlsxLDcyXSwxMTU6NzMsMTIzOlsxLDQ0XSwxMjg6MzksMTI5OlsxLDY4XSwxMzE6WzEsMzFdLDEzMjpbMSwzMl0sMTMzOlsxLDMzXSwxMzQ6WzEsMzRdLDEzNTpbMSwzNV0sMTM3OlsxLDM2XSwxMzg6WzEsMzddfSx7NjpbMiw1Nl0sMjg6WzIsNTZdLDUyOlsxLDIxNl0sNTY6MjE4LDU3OlsxLDIxN119LHs2OlsyLDU5XSwyODpbMiw1OV0sMjk6WzIsNTldLDUyOlsyLDU5XSw1NzpbMiw1OV19LHs2OlsyLDYzXSwyODpbMiw2M10sMjk6WzIsNjNdLDQzOlsxLDIyMF0sNTI6WzIsNjNdLDU3OlsyLDYzXSw2MDpbMSwyMTldfSx7NjpbMiw2Nl0sMjg6WzIsNjZdLDI5OlsyLDY2XSw1MjpbMiw2Nl0sNTc6WzIsNjZdfSx7NjpbMiw2N10sMjg6WzIsNjddLDI5OlsyLDY3XSw0MzpbMiw2N10sNTI6WzIsNjddLDU3OlsyLDY3XSw2MDpbMiw2N119LHs2OlsyLDY4XSwyODpbMiw2OF0sMjk6WzIsNjhdLDQzOlsyLDY4XSw1MjpbMiw2OF0sNTc6WzIsNjhdLDYwOlsyLDY4XX0sezY6WzIsNjldLDI4OlsyLDY5XSwyOTpbMiw2OV0sNDM6WzIsNjldLDUyOlsyLDY5XSw1NzpbMiw2OV0sNjA6WzIsNjldfSx7NjpbMiw3MF0sMjg6WzIsNzBdLDI5OlsyLDcwXSw0MzpbMiw3MF0sNTI6WzIsNzBdLDU3OlsyLDcwXSw2MDpbMiw3MF19LHszMDoxNjEsMzE6WzEsNzddfSx7NzoyMTUsODoxMjIsOToxOSwxMDoyMCwxMTpbMSwyMV0sMTI6MjIsMTM6WzEsNTBdLDE1OjYsMTY6NywxNzo4LDE4OjksMTk6MTAsMjA6MTEsMjE6MTIsMjI6MTMsMjM6MTQsMjQ6MTUsMjU6MTYsMjY6MTcsMjc6MTgsMjg6WzEsMTU4XSwzMDo2NiwzMTpbMSw3N10sMzI6NTMsMzM6WzEsNzVdLDM0OlsxLDc2XSwzNToyNCwzNjpbMSw1NF0sMzc6WzEsNTVdLDM4OlsxLDU2XSwzOTpbMSw1N10sNDA6WzEsNThdLDQxOlsxLDU5XSw0MjoyMyw0Nzo2Nyw0ODpbMSw0OF0sNDk6WzEsNDldLDUwOlsxLDI5XSw1MzozMCw1NDpbMSw2NF0sNTU6WzEsNjVdLDYwOlsxLDE2MF0sNjE6NTEsNjI6NTIsNjM6MTU5LDY0OjM4LDY2OjI1LDY3OjI2LDY4OjI3LDc5OlsxLDc0XSw4MjpbMSw0NV0sODY6WzEsMjhdLDg3OlsxLDQ3XSw5MToxNTYsOTI6WzEsNjJdLDkzOlsxLDYzXSw5NDpbMSw2MV0sOTU6WzEsMTU1XSw5ODoxNTcsMTAwOlsxLDQwXSwxMDQ6WzEsNDZdLDEwNTpbMSw2MF0sMTA3OjQxLDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTE6NDIsMTEyOlsxLDcxXSwxMTM6NDMsMTE0OlsxLDcyXSwxMTU6NzMsMTIzOlsxLDQ0XSwxMjg6MzksMTI5OlsxLDY4XSwxMzE6WzEsMzFdLDEzMjpbMSwzMl0sMTMzOlsxLDMzXSwxMzQ6WzEsMzRdLDEzNTpbMSwzNV0sMTM3OlsxLDM2XSwxMzg6WzEsMzddfSx7MTpbMiw1M10sNjpbMiw1M10sMjg6WzIsNTNdLDI5OlsyLDUzXSw1MjpbMiw1M10sNTc6WzIsNTNdLDYwOlsyLDUzXSw3NjpbMiw1M10sODE6WzIsNTNdLDkwOlsyLDUzXSw5NTpbMiw1M10sOTc6WzIsNTNdLDEwNjpbMiw1M10sMTA4OlsyLDUzXSwxMDk6WzIsNTNdLDExMDpbMiw1M10sMTE0OlsyLDUzXSwxMjI6WzIsNTNdLDEzMDpbMiw1M10sMTMzOlsyLDUzXSwxMzQ6WzIsNTNdLDEzOTpbMiw1M10sMTQwOlsyLDUzXSwxNDE6WzIsNTNdLDE0MjpbMiw1M10sMTQzOlsyLDUzXSwxNDQ6WzIsNTNdLDE0NTpbMiw1M119LHs0OjIyMiw1OjMsNzo0LDg6NSw5OjE5LDEwOjIwLDExOlsxLDIxXSwxMjoyMiwxMzpbMSw1MF0sMTU6NiwxNjo3LDE3OjgsMTg6OSwxOToxMCwyMDoxMSwyMToxMiwyMjoxMywyMzoxNCwyNDoxNSwyNToxNiwyNjoxNywyNzoxOCwyOTpbMSwyMjFdLDMwOjY2LDMxOlsxLDc3XSwzMjo1MywzMzpbMSw3NV0sMzQ6WzEsNzZdLDM1OjI0LDM2OlsxLDU0XSwzNzpbMSw1NV0sMzg6WzEsNTZdLDM5OlsxLDU3XSw0MDpbMSw1OF0sNDE6WzEsNTldLDQyOjIzLDQ3OjY3LDQ4OlsxLDQ4XSw0OTpbMSw0OV0sNTA6WzEsMjldLDUzOjMwLDU0OlsxLDY0XSw1NTpbMSw2NV0sNjE6NTEsNjI6NTIsNjQ6MzgsNjY6MjUsNjc6MjYsNjg6MjcsNzk6WzEsNzRdLDgyOlsxLDQ1XSw4NjpbMSwyOF0sODc6WzEsNDddLDkyOlsxLDYyXSw5MzpbMSw2M10sOTQ6WzEsNjFdLDEwMDpbMSw0MF0sMTA0OlsxLDQ2XSwxMDU6WzEsNjBdLDEwNzo0MSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTExOjQyLDExMjpbMSw3MV0sMTEzOjQzLDExNDpbMSw3Ml0sMTE1OjczLDEyMzpbMSw0NF0sMTI4OjM5LDEyOTpbMSw2OF0sMTMxOlsxLDMxXSwxMzI6WzEsMzJdLDEzMzpbMSwzM10sMTM0OlsxLDM0XSwxMzU6WzEsMzVdLDEzNzpbMSwzNl0sMTM4OlsxLDM3XX0sezE6WzIsMTk0XSw2OlsyLDE5NF0sMjg6WzIsMTk0XSwyOTpbMiwxOTRdLDUyOlsyLDE5NF0sNTc6WzIsMTk0XSw2MDpbMiwxOTRdLDc2OlsyLDE5NF0sODE6WzIsMTk0XSw5MDpbMiwxOTRdLDk1OlsyLDE5NF0sOTc6WzIsMTk0XSwxMDY6WzIsMTk0XSwxMDc6ODksMTA4OlsyLDE5NF0sMTA5OlsyLDE5NF0sMTEwOlsyLDE5NF0sMTEzOjkwLDExNDpbMiwxOTRdLDExNTo3MywxMjI6WzIsMTk0XSwxMzA6WzIsMTk0XSwxMzM6WzIsMTk0XSwxMzQ6WzIsMTk0XSwxMzk6WzEsNzldLDE0MDpbMiwxOTRdLDE0MTpbMiwxOTRdLDE0MjpbMiwxOTRdLDE0MzpbMiwxOTRdLDE0NDpbMiwxOTRdLDE0NTpbMiwxOTRdfSx7MTA3OjkyLDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTM6OTMsMTE0OlsxLDcyXSwxMTU6NzMsMTMwOlsxLDkxXX0sezE6WzIsMTk1XSw2OlsyLDE5NV0sMjg6WzIsMTk1XSwyOTpbMiwxOTVdLDUyOlsyLDE5NV0sNTc6WzIsMTk1XSw2MDpbMiwxOTVdLDc2OlsyLDE5NV0sODE6WzIsMTk1XSw5MDpbMiwxOTVdLDk1OlsyLDE5NV0sOTc6WzIsMTk1XSwxMDY6WzIsMTk1XSwxMDc6ODksMTA4OlsyLDE5NV0sMTA5OlsyLDE5NV0sMTEwOlsyLDE5NV0sMTEzOjkwLDExNDpbMiwxOTVdLDExNTo3MywxMjI6WzIsMTk1XSwxMzA6WzIsMTk1XSwxMzM6WzIsMTk1XSwxMzQ6WzIsMTk1XSwxMzk6WzEsNzldLDE0MDpbMiwxOTVdLDE0MTpbMSw4M10sMTQyOlsyLDE5NV0sMTQzOlsyLDE5NV0sMTQ0OlsyLDE5NV0sMTQ1OlsyLDE5NV19LHsxOlsyLDE5Nl0sNjpbMiwxOTZdLDI4OlsyLDE5Nl0sMjk6WzIsMTk2XSw1MjpbMiwxOTZdLDU3OlsyLDE5Nl0sNjA6WzIsMTk2XSw3NjpbMiwxOTZdLDgxOlsyLDE5Nl0sOTA6WzIsMTk2XSw5NTpbMiwxOTZdLDk3OlsyLDE5Nl0sMTA2OlsyLDE5Nl0sMTA3Ojg5LDEwODpbMiwxOTZdLDEwOTpbMiwxOTZdLDExMDpbMiwxOTZdLDExMzo5MCwxMTQ6WzIsMTk2XSwxMTU6NzMsMTIyOlsyLDE5Nl0sMTMwOlsyLDE5Nl0sMTMzOlsyLDE5Nl0sMTM0OlsyLDE5Nl0sMTM5OlsxLDc5XSwxNDA6WzIsMTk2XSwxNDE6WzEsODNdLDE0MjpbMiwxOTZdLDE0MzpbMiwxOTZdLDE0NDpbMiwxOTZdLDE0NTpbMiwxOTZdfSx7MTpbMiwxOTddLDY6WzIsMTk3XSwyODpbMiwxOTddLDI5OlsyLDE5N10sNTI6WzIsMTk3XSw1NzpbMiwxOTddLDYwOlsyLDE5N10sNzY6WzIsMTk3XSw4MTpbMiwxOTddLDkwOlsyLDE5N10sOTU6WzIsMTk3XSw5NzpbMiwxOTddLDEwNjpbMiwxOTddLDEwNzo4OSwxMDg6WzIsMTk3XSwxMDk6WzIsMTk3XSwxMTA6WzIsMTk3XSwxMTM6OTAsMTE0OlsyLDE5N10sMTE1OjczLDEyMjpbMiwxOTddLDEzMDpbMiwxOTddLDEzMzpbMiwxOTddLDEzNDpbMiwxOTddLDEzOTpbMSw3OV0sMTQwOlsyLDE5N10sMTQxOlsxLDgzXSwxNDI6WzIsMTk3XSwxNDM6WzIsMTk3XSwxNDQ6WzIsMTk3XSwxNDU6WzIsMTk3XX0sezE6WzIsMTk4XSw2OlsyLDE5OF0sMjg6WzIsMTk4XSwyOTpbMiwxOThdLDUyOlsyLDE5OF0sNTc6WzIsMTk4XSw2MDpbMiwxOThdLDc2OlsyLDE5OF0sODE6WzIsMTk4XSw5MDpbMiwxOThdLDk1OlsyLDE5OF0sOTc6WzIsMTk4XSwxMDY6WzIsMTk4XSwxMDc6OTIsMTA4OlsyLDE5OF0sMTA5OlsyLDE5OF0sMTEwOlsyLDE5OF0sMTEzOjkzLDExNDpbMiwxOThdLDExNTo3MywxMjI6WzIsMTk4XSwxMzA6WzIsMTk4XSwxMzM6WzIsMTk4XSwxMzQ6WzIsMTk4XSwxMzk6WzIsMTk4XSwxNDA6WzIsMTk4XSwxNDE6WzIsMTk4XSwxNDI6WzIsMTk4XSwxNDM6WzIsMTk4XSwxNDQ6WzIsMTk4XSwxNDU6WzIsMTk4XX0sezE6WzIsMTk5XSw2OlsyLDE5OV0sMjg6WzIsMTk5XSwyOTpbMiwxOTldLDUyOlsyLDE5OV0sNTc6WzIsMTk5XSw2MDpbMiwxOTldLDc2OlsyLDE5OV0sODE6WzIsMTk5XSw5MDpbMiwxOTldLDk1OlsyLDE5OV0sOTc6WzIsMTk5XSwxMDY6WzIsMTk5XSwxMDc6ODksMTA4OlsyLDE5OV0sMTA5OlsyLDE5OV0sMTEwOlsyLDE5OV0sMTEzOjkwLDExNDpbMiwxOTldLDExNTo3MywxMjI6WzIsMTk5XSwxMzA6WzIsMTk5XSwxMzM6WzIsMTk5XSwxMzQ6WzIsMTk5XSwxMzk6WzEsNzldLDE0MDpbMiwxOTldLDE0MTpbMiwxOTldLDE0MjpbMiwxOTldLDE0MzpbMiwxOTldLDE0NDpbMiwxOTldLDE0NTpbMiwxOTldfSx7NzoyMjMsODoxMjIsOToxOSwxMDoyMCwxMTpbMSwyMV0sMTI6MjIsMTM6WzEsNTBdLDE1OjYsMTY6NywxNzo4LDE4OjksMTk6MTAsMjA6MTEsMjE6MTIsMjI6MTMsMjM6MTQsMjQ6MTUsMjU6MTYsMjY6MTcsMjc6MTgsMzA6NjYsMzE6WzEsNzddLDMyOjUzLDMzOlsxLDc1XSwzNDpbMSw3Nl0sMzU6MjQsMzY6WzEsNTRdLDM3OlsxLDU1XSwzODpbMSw1Nl0sMzk6WzEsNTddLDQwOlsxLDU4XSw0MTpbMSw1OV0sNDI6MjMsNDc6NjcsNDg6WzEsNDhdLDQ5OlsxLDQ5XSw1MDpbMSwyOV0sNTM6MzAsNTQ6WzEsNjRdLDU1OlsxLDY1XSw2MTo1MSw2Mjo1Miw2NDozOCw2NjoyNSw2NzoyNiw2ODoyNyw3OTpbMSw3NF0sODI6WzEsNDVdLDg2OlsxLDI4XSw4NzpbMSw0N10sOTI6WzEsNjJdLDkzOlsxLDYzXSw5NDpbMSw2MV0sMTAwOlsxLDQwXSwxMDQ6WzEsNDZdLDEwNTpbMSw2MF0sMTA3OjQxLDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTE6NDIsMTEyOlsxLDcxXSwxMTM6NDMsMTE0OlsxLDcyXSwxMTU6NzMsMTIzOlsxLDQ0XSwxMjg6MzksMTI5OlsxLDY4XSwxMzE6WzEsMzFdLDEzMjpbMSwzMl0sMTMzOlsxLDMzXSwxMzQ6WzEsMzRdLDEzNTpbMSwzNV0sMTM3OlsxLDM2XSwxMzg6WzEsMzddfSx7MTpbMiwyMDFdLDY6WzIsMjAxXSwyODpbMiwyMDFdLDI5OlsyLDIwMV0sNTI6WzIsMjAxXSw1NzpbMiwyMDFdLDYwOlsyLDIwMV0sNjk6WzIsNzZdLDcwOlsyLDc2XSw3MTpbMiw3Nl0sNzI6WzIsNzZdLDc0OlsyLDc2XSw3NjpbMiwyMDFdLDc3OlsyLDc2XSw4MTpbMiwyMDFdLDg4OlsyLDc2XSw4OTpbMiw3Nl0sOTA6WzIsMjAxXSw5NTpbMiwyMDFdLDk3OlsyLDIwMV0sMTA2OlsyLDIwMV0sMTA4OlsyLDIwMV0sMTA5OlsyLDIwMV0sMTEwOlsyLDIwMV0sMTE0OlsyLDIwMV0sMTIyOlsyLDIwMV0sMTMwOlsyLDIwMV0sMTMzOlsyLDIwMV0sMTM0OlsyLDIwMV0sMTM5OlsyLDIwMV0sMTQwOlsyLDIwMV0sMTQxOlsyLDIwMV0sMTQyOlsyLDIwMV0sMTQzOlsyLDIwMV0sMTQ0OlsyLDIwMV0sMTQ1OlsyLDIwMV19LHs2NTo5NSw2OTpbMSw5N10sNzA6WzEsOThdLDcxOlsxLDk5XSw3MjpbMSwxMDBdLDczOjEwMSw3NDpbMSwxMDJdLDc3OlsxLDEwM10sODQ6OTQsODg6WzEsOTZdLDg5OlsyLDExNF19LHs2NToxMDUsNjk6WzEsOTddLDcwOlsxLDk4XSw3MTpbMSw5OV0sNzI6WzEsMTAwXSw3MzoxMDEsNzQ6WzEsMTAyXSw3NzpbMSwxMDNdLDg0OjEwNCw4ODpbMSw5Nl0sODk6WzIsMTE0XX0sezY5OlsyLDc5XSw3MDpbMiw3OV0sNzE6WzIsNzldLDcyOlsyLDc5XSw3NDpbMiw3OV0sNzc6WzIsNzldLDg4OlsyLDc5XSw4OTpbMiw3OV19LHsxOlsyLDIwMl0sNjpbMiwyMDJdLDI4OlsyLDIwMl0sMjk6WzIsMjAyXSw1MjpbMiwyMDJdLDU3OlsyLDIwMl0sNjA6WzIsMjAyXSw2OTpbMiw3Nl0sNzA6WzIsNzZdLDcxOlsyLDc2XSw3MjpbMiw3Nl0sNzQ6WzIsNzZdLDc2OlsyLDIwMl0sNzc6WzIsNzZdLDgxOlsyLDIwMl0sODg6WzIsNzZdLDg5OlsyLDc2XSw5MDpbMiwyMDJdLDk1OlsyLDIwMl0sOTc6WzIsMjAyXSwxMDY6WzIsMjAyXSwxMDg6WzIsMjAyXSwxMDk6WzIsMjAyXSwxMTA6WzIsMjAyXSwxMTQ6WzIsMjAyXSwxMjI6WzIsMjAyXSwxMzA6WzIsMjAyXSwxMzM6WzIsMjAyXSwxMzQ6WzIsMjAyXSwxMzk6WzIsMjAyXSwxNDA6WzIsMjAyXSwxNDE6WzIsMjAyXSwxNDI6WzIsMjAyXSwxNDM6WzIsMjAyXSwxNDQ6WzIsMjAyXSwxNDU6WzIsMjAyXX0sezE6WzIsMjAzXSw2OlsyLDIwM10sMjg6WzIsMjAzXSwyOTpbMiwyMDNdLDUyOlsyLDIwM10sNTc6WzIsMjAzXSw2MDpbMiwyMDNdLDc2OlsyLDIwM10sODE6WzIsMjAzXSw5MDpbMiwyMDNdLDk1OlsyLDIwM10sOTc6WzIsMjAzXSwxMDY6WzIsMjAzXSwxMDg6WzIsMjAzXSwxMDk6WzIsMjAzXSwxMTA6WzIsMjAzXSwxMTQ6WzIsMjAzXSwxMjI6WzIsMjAzXSwxMzA6WzIsMjAzXSwxMzM6WzIsMjAzXSwxMzQ6WzIsMjAzXSwxMzk6WzIsMjAzXSwxNDA6WzIsMjAzXSwxNDE6WzIsMjAzXSwxNDI6WzIsMjAzXSwxNDM6WzIsMjAzXSwxNDQ6WzIsMjAzXSwxNDU6WzIsMjAzXX0sezE6WzIsMjA0XSw2OlsyLDIwNF0sMjg6WzIsMjA0XSwyOTpbMiwyMDRdLDUyOlsyLDIwNF0sNTc6WzIsMjA0XSw2MDpbMiwyMDRdLDc2OlsyLDIwNF0sODE6WzIsMjA0XSw5MDpbMiwyMDRdLDk1OlsyLDIwNF0sOTc6WzIsMjA0XSwxMDY6WzIsMjA0XSwxMDg6WzIsMjA0XSwxMDk6WzIsMjA0XSwxMTA6WzIsMjA0XSwxMTQ6WzIsMjA0XSwxMjI6WzIsMjA0XSwxMzA6WzIsMjA0XSwxMzM6WzIsMjA0XSwxMzQ6WzIsMjA0XSwxMzk6WzIsMjA0XSwxNDA6WzIsMjA0XSwxNDE6WzIsMjA0XSwxNDI6WzIsMjA0XSwxNDM6WzIsMjA0XSwxNDQ6WzIsMjA0XSwxNDU6WzIsMjA0XX0sezY6WzEsMjI2XSw3OjIyNCw4OjEyMiw5OjE5LDEwOjIwLDExOlsxLDIxXSwxMjoyMiwxMzpbMSw1MF0sMTU6NiwxNjo3LDE3OjgsMTg6OSwxOToxMCwyMDoxMSwyMToxMiwyMjoxMywyMzoxNCwyNDoxNSwyNToxNiwyNjoxNywyNzoxOCwyODpbMSwyMjVdLDMwOjY2LDMxOlsxLDc3XSwzMjo1MywzMzpbMSw3NV0sMzQ6WzEsNzZdLDM1OjI0LDM2OlsxLDU0XSwzNzpbMSw1NV0sMzg6WzEsNTZdLDM5OlsxLDU3XSw0MDpbMSw1OF0sNDE6WzEsNTldLDQyOjIzLDQ3OjY3LDQ4OlsxLDQ4XSw0OTpbMSw0OV0sNTA6WzEsMjldLDUzOjMwLDU0OlsxLDY0XSw1NTpbMSw2NV0sNjE6NTEsNjI6NTIsNjQ6MzgsNjY6MjUsNjc6MjYsNjg6MjcsNzk6WzEsNzRdLDgyOlsxLDQ1XSw4NjpbMSwyOF0sODc6WzEsNDddLDkyOlsxLDYyXSw5MzpbMSw2M10sOTQ6WzEsNjFdLDEwMDpbMSw0MF0sMTA0OlsxLDQ2XSwxMDU6WzEsNjBdLDEwNzo0MSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTExOjQyLDExMjpbMSw3MV0sMTEzOjQzLDExNDpbMSw3Ml0sMTE1OjczLDEyMzpbMSw0NF0sMTI4OjM5LDEyOTpbMSw2OF0sMTMxOlsxLDMxXSwxMzI6WzEsMzJdLDEzMzpbMSwzM10sMTM0OlsxLDM0XSwxMzU6WzEsMzVdLDEzNzpbMSwzNl0sMTM4OlsxLDM3XX0sezc6MjI3LDg6MTIyLDk6MTksMTA6MjAsMTE6WzEsMjFdLDEyOjIyLDEzOlsxLDUwXSwxNTo2LDE2OjcsMTc6OCwxODo5LDE5OjEwLDIwOjExLDIxOjEyLDIyOjEzLDIzOjE0LDI0OjE1LDI1OjE2LDI2OjE3LDI3OjE4LDMwOjY2LDMxOlsxLDc3XSwzMjo1MywzMzpbMSw3NV0sMzQ6WzEsNzZdLDM1OjI0LDM2OlsxLDU0XSwzNzpbMSw1NV0sMzg6WzEsNTZdLDM5OlsxLDU3XSw0MDpbMSw1OF0sNDE6WzEsNTldLDQyOjIzLDQ3OjY3LDQ4OlsxLDQ4XSw0OTpbMSw0OV0sNTA6WzEsMjldLDUzOjMwLDU0OlsxLDY0XSw1NTpbMSw2NV0sNjE6NTEsNjI6NTIsNjQ6MzgsNjY6MjUsNjc6MjYsNjg6MjcsNzk6WzEsNzRdLDgyOlsxLDQ1XSw4NjpbMSwyOF0sODc6WzEsNDddLDkyOlsxLDYyXSw5MzpbMSw2M10sOTQ6WzEsNjFdLDEwMDpbMSw0MF0sMTA0OlsxLDQ2XSwxMDU6WzEsNjBdLDEwNzo0MSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTExOjQyLDExMjpbMSw3MV0sMTEzOjQzLDExNDpbMSw3Ml0sMTE1OjczLDEyMzpbMSw0NF0sMTI4OjM5LDEyOTpbMSw2OF0sMTMxOlsxLDMxXSwxMzI6WzEsMzJdLDEzMzpbMSwzM10sMTM0OlsxLDM0XSwxMzU6WzEsMzVdLDEzNzpbMSwzNl0sMTM4OlsxLDM3XX0sezE0OjIyOCwyODpbMSwxMjBdLDEyOTpbMSwyMjldfSx7MTpbMiwxNDBdLDY6WzIsMTQwXSwyODpbMiwxNDBdLDI5OlsyLDE0MF0sNTI6WzIsMTQwXSw1NzpbMiwxNDBdLDYwOlsyLDE0MF0sNzY6WzIsMTQwXSw4MTpbMiwxNDBdLDkwOlsyLDE0MF0sOTU6WzIsMTQwXSw5NzpbMiwxNDBdLDEwMToyMzAsMTAyOlsxLDIzMV0sMTAzOlsxLDIzMl0sMTA2OlsyLDE0MF0sMTA4OlsyLDE0MF0sMTA5OlsyLDE0MF0sMTEwOlsyLDE0MF0sMTE0OlsyLDE0MF0sMTIyOlsyLDE0MF0sMTMwOlsyLDE0MF0sMTMzOlsyLDE0MF0sMTM0OlsyLDE0MF0sMTM5OlsyLDE0MF0sMTQwOlsyLDE0MF0sMTQxOlsyLDE0MF0sMTQyOlsyLDE0MF0sMTQzOlsyLDE0MF0sMTQ0OlsyLDE0MF0sMTQ1OlsyLDE0MF19LHsxOlsyLDE1NF0sNjpbMiwxNTRdLDI4OlsyLDE1NF0sMjk6WzIsMTU0XSw1MjpbMiwxNTRdLDU3OlsyLDE1NF0sNjA6WzIsMTU0XSw3NjpbMiwxNTRdLDgxOlsyLDE1NF0sOTA6WzIsMTU0XSw5NTpbMiwxNTRdLDk3OlsyLDE1NF0sMTA2OlsyLDE1NF0sMTA4OlsyLDE1NF0sMTA5OlsyLDE1NF0sMTEwOlsyLDE1NF0sMTE0OlsyLDE1NF0sMTIyOlsyLDE1NF0sMTMwOlsyLDE1NF0sMTMzOlsyLDE1NF0sMTM0OlsyLDE1NF0sMTM5OlsyLDE1NF0sMTQwOlsyLDE1NF0sMTQxOlsyLDE1NF0sMTQyOlsyLDE1NF0sMTQzOlsyLDE1NF0sMTQ0OlsyLDE1NF0sMTQ1OlsyLDE1NF19LHsxOlsyLDE2Ml0sNjpbMiwxNjJdLDI4OlsyLDE2Ml0sMjk6WzIsMTYyXSw1MjpbMiwxNjJdLDU3OlsyLDE2Ml0sNjA6WzIsMTYyXSw3NjpbMiwxNjJdLDgxOlsyLDE2Ml0sOTA6WzIsMTYyXSw5NTpbMiwxNjJdLDk3OlsyLDE2Ml0sMTA2OlsyLDE2Ml0sMTA4OlsyLDE2Ml0sMTA5OlsyLDE2Ml0sMTEwOlsyLDE2Ml0sMTE0OlsyLDE2Ml0sMTIyOlsyLDE2Ml0sMTMwOlsyLDE2Ml0sMTMzOlsyLDE2Ml0sMTM0OlsyLDE2Ml0sMTM5OlsyLDE2Ml0sMTQwOlsyLDE2Ml0sMTQxOlsyLDE2Ml0sMTQyOlsyLDE2Ml0sMTQzOlsyLDE2Ml0sMTQ0OlsyLDE2Ml0sMTQ1OlsyLDE2Ml19LHsyODpbMSwyMzNdLDEwNzo4OSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTEzOjkwLDExNDpbMSw3Ml0sMTE1OjczLDEzMDpbMSw4OF0sMTMzOlsxLDgxXSwxMzQ6WzEsODBdLDEzOTpbMSw3OV0sMTQwOlsxLDgyXSwxNDE6WzEsODNdLDE0MjpbMSw4NF0sMTQzOlsxLDg1XSwxNDQ6WzEsODZdLDE0NTpbMSw4N119LHsxMjQ6MjM0LDEyNjoyMzUsMTI3OlsxLDIzNl19LHsxOlsyLDEwMl0sNjpbMiwxMDJdLDI4OlsyLDEwMl0sMjk6WzIsMTAyXSw1MjpbMiwxMDJdLDU3OlsyLDEwMl0sNjA6WzIsMTAyXSw3NjpbMiwxMDJdLDgxOlsyLDEwMl0sOTA6WzIsMTAyXSw5NTpbMiwxMDJdLDk3OlsyLDEwMl0sMTA2OlsyLDEwMl0sMTA4OlsyLDEwMl0sMTA5OlsyLDEwMl0sMTEwOlsyLDEwMl0sMTE0OlsyLDEwMl0sMTIyOlsyLDEwMl0sMTMwOlsyLDEwMl0sMTMzOlsyLDEwMl0sMTM0OlsyLDEwMl0sMTM5OlsyLDEwMl0sMTQwOlsyLDEwMl0sMTQxOlsyLDEwMl0sMTQyOlsyLDEwMl0sMTQzOlsyLDEwMl0sMTQ0OlsyLDEwMl0sMTQ1OlsyLDEwMl19LHs3OjIzNyw4OjEyMiw5OjE5LDEwOjIwLDExOlsxLDIxXSwxMjoyMiwxMzpbMSw1MF0sMTU6NiwxNjo3LDE3OjgsMTg6OSwxOToxMCwyMDoxMSwyMToxMiwyMjoxMywyMzoxNCwyNDoxNSwyNToxNiwyNjoxNywyNzoxOCwzMDo2NiwzMTpbMSw3N10sMzI6NTMsMzM6WzEsNzVdLDM0OlsxLDc2XSwzNToyNCwzNjpbMSw1NF0sMzc6WzEsNTVdLDM4OlsxLDU2XSwzOTpbMSw1N10sNDA6WzEsNThdLDQxOlsxLDU5XSw0MjoyMyw0Nzo2Nyw0ODpbMSw0OF0sNDk6WzEsNDldLDUwOlsxLDI5XSw1MzozMCw1NDpbMSw2NF0sNTU6WzEsNjVdLDYxOjUxLDYyOjUyLDY0OjM4LDY2OjI1LDY3OjI2LDY4OjI3LDc5OlsxLDc0XSw4MjpbMSw0NV0sODY6WzEsMjhdLDg3OlsxLDQ3XSw5MjpbMSw2Ml0sOTM6WzEsNjNdLDk0OlsxLDYxXSwxMDA6WzEsNDBdLDEwNDpbMSw0Nl0sMTA1OlsxLDYwXSwxMDc6NDEsMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMTo0MiwxMTI6WzEsNzFdLDExMzo0MywxMTQ6WzEsNzJdLDExNTo3MywxMjM6WzEsNDRdLDEyODozOSwxMjk6WzEsNjhdLDEzMTpbMSwzMV0sMTMyOlsxLDMyXSwxMzM6WzEsMzNdLDEzNDpbMSwzNF0sMTM1OlsxLDM1XSwxMzc6WzEsMzZdLDEzODpbMSwzN119LHsxOlsyLDEwNV0sNjpbMiwxMDVdLDE0OjIzOCwyODpbMSwxMjBdLDI5OlsyLDEwNV0sNTI6WzIsMTA1XSw1NzpbMiwxMDVdLDYwOlsyLDEwNV0sNjk6WzIsNzZdLDcwOlsyLDc2XSw3MTpbMiw3Nl0sNzI6WzIsNzZdLDc0OlsyLDc2XSw3NjpbMiwxMDVdLDc3OlsyLDc2XSw4MTpbMiwxMDVdLDgzOlsxLDIzOV0sODg6WzIsNzZdLDg5OlsyLDc2XSw5MDpbMiwxMDVdLDk1OlsyLDEwNV0sOTc6WzIsMTA1XSwxMDY6WzIsMTA1XSwxMDg6WzIsMTA1XSwxMDk6WzIsMTA1XSwxMTA6WzIsMTA1XSwxMTQ6WzIsMTA1XSwxMjI6WzIsMTA1XSwxMzA6WzIsMTA1XSwxMzM6WzIsMTA1XSwxMzQ6WzIsMTA1XSwxMzk6WzIsMTA1XSwxNDA6WzIsMTA1XSwxNDE6WzIsMTA1XSwxNDI6WzIsMTA1XSwxNDM6WzIsMTA1XSwxNDQ6WzIsMTA1XSwxNDU6WzIsMTA1XX0sezE6WzIsMTQ3XSw2OlsyLDE0N10sMjg6WzIsMTQ3XSwyOTpbMiwxNDddLDUyOlsyLDE0N10sNTc6WzIsMTQ3XSw2MDpbMiwxNDddLDc2OlsyLDE0N10sODE6WzIsMTQ3XSw5MDpbMiwxNDddLDk1OlsyLDE0N10sOTc6WzIsMTQ3XSwxMDY6WzIsMTQ3XSwxMDc6ODksMTA4OlsyLDE0N10sMTA5OlsyLDE0N10sMTEwOlsyLDE0N10sMTEzOjkwLDExNDpbMiwxNDddLDExNTo3MywxMjI6WzIsMTQ3XSwxMzA6WzIsMTQ3XSwxMzM6WzEsODFdLDEzNDpbMSw4MF0sMTM5OlsxLDc5XSwxNDA6WzEsODJdLDE0MTpbMSw4M10sMTQyOlsxLDg0XSwxNDM6WzEsODVdLDE0NDpbMSw4Nl0sMTQ1OlsxLDg3XX0sezE6WzIsMTEzXSw2OlsyLDExM10sMjg6WzIsMTEzXSwyOTpbMiwxMTNdLDQzOlsyLDExM10sNTI6WzIsMTEzXSw1NzpbMiwxMTNdLDYwOlsyLDExM10sNjk6WzIsMTEzXSw3MDpbMiwxMTNdLDcxOlsyLDExM10sNzI6WzIsMTEzXSw3NDpbMiwxMTNdLDc2OlsyLDExM10sNzc6WzIsMTEzXSw4MTpbMiwxMTNdLDgzOlsyLDExM10sODg6WzIsMTEzXSw4OTpbMiwxMTNdLDkwOlsyLDExM10sOTU6WzIsMTEzXSw5NzpbMiwxMTNdLDEwNjpbMiwxMTNdLDEwODpbMiwxMTNdLDEwOTpbMiwxMTNdLDExMDpbMiwxMTNdLDExNDpbMiwxMTNdLDEyMjpbMiwxMTNdLDEzMDpbMiwxMTNdLDEzMzpbMiwxMTNdLDEzNDpbMiwxMTNdLDEzNzpbMiwxMTNdLDEzODpbMiwxMTNdLDEzOTpbMiwxMTNdLDE0MDpbMiwxMTNdLDE0MTpbMiwxMTNdLDE0MjpbMiwxMTNdLDE0MzpbMiwxMTNdLDE0NDpbMiwxMTNdLDE0NTpbMiwxMTNdLDE0NjpbMiwxMTNdfSx7MTpbMiw0OV0sNjpbMiw0OV0sMjg6WzIsNDldLDI5OlsyLDQ5XSw1MjpbMiw0OV0sNTc6WzIsNDldLDYwOlsyLDQ5XSw3NjpbMiw0OV0sODE6WzIsNDldLDkwOlsyLDQ5XSw5NTpbMiw0OV0sOTc6WzIsNDldLDEwNjpbMiw0OV0sMTA3Ojg5LDEwODpbMiw0OV0sMTA5OlsyLDQ5XSwxMTA6WzIsNDldLDExMzo5MCwxMTQ6WzIsNDldLDExNTo3MywxMjI6WzIsNDldLDEzMDpbMiw0OV0sMTMzOlsxLDgxXSwxMzQ6WzEsODBdLDEzOTpbMSw3OV0sMTQwOlsxLDgyXSwxNDE6WzEsODNdLDE0MjpbMSw4NF0sMTQzOlsxLDg1XSwxNDQ6WzEsODZdLDE0NTpbMSw4N119LHsxOlsyLDEyXSw2OlsyLDEyXSwyODpbMiwxMl0sMjk6WzIsMTJdLDUyOlsyLDEyXSw1NzpbMiwxMl0sNjA6WzIsMTJdLDc2OlsyLDEyXSw4MTpbMiwxMl0sOTA6WzIsMTJdLDk1OlsyLDEyXSw5NzpbMiwxMl0sMTA2OlsyLDEyXSwxMDg6WzIsMTJdLDEwOTpbMiwxMl0sMTEwOlsyLDEyXSwxMTQ6WzIsMTJdLDEyMjpbMiwxMl0sMTMwOlsyLDEyXSwxMzM6WzIsMTJdLDEzNDpbMiwxMl0sMTM5OlsyLDEyXSwxNDA6WzIsMTJdLDE0MTpbMiwxMl0sMTQyOlsyLDEyXSwxNDM6WzIsMTJdLDE0NDpbMiwxMl0sMTQ1OlsyLDEyXX0sezE6WzIsMTNdLDY6WzIsMTNdLDI4OlsyLDEzXSwyOTpbMiwxM10sNTI6WzIsMTNdLDU3OlsyLDEzXSw2MDpbMiwxM10sNzY6WzIsMTNdLDgxOlsyLDEzXSw5MDpbMiwxM10sOTU6WzIsMTNdLDk3OlsyLDEzXSwxMDY6WzIsMTNdLDEwNzo4OSwxMDg6WzEsNjldLDEwOTpbMiwxM10sMTEwOlsxLDcwXSwxMTM6OTAsMTE0OlsxLDcyXSwxMTU6NzMsMTIyOlsyLDEzXSwxMzA6WzIsMTNdLDEzMzpbMSw4MV0sMTM0OlsxLDgwXSwxMzk6WzEsNzldLDE0MDpbMSw4Ml0sMTQxOlsxLDgzXSwxNDI6WzEsODRdLDE0MzpbMSw4NV0sMTQ0OlsxLDg2XSwxNDU6WzEsODddfSx7NjpbMSw3OF0sMTA2OlsxLDI0MF19LHs0OjI0MSw1OjMsNzo0LDg6NSw5OjE5LDEwOjIwLDExOlsxLDIxXSwxMjoyMiwxMzpbMSw1MF0sMTU6NiwxNjo3LDE3OjgsMTg6OSwxOToxMCwyMDoxMSwyMToxMiwyMjoxMywyMzoxNCwyNDoxNSwyNToxNiwyNjoxNywyNzoxOCwzMDo2NiwzMTpbMSw3N10sMzI6NTMsMzM6WzEsNzVdLDM0OlsxLDc2XSwzNToyNCwzNjpbMSw1NF0sMzc6WzEsNTVdLDM4OlsxLDU2XSwzOTpbMSw1N10sNDA6WzEsNThdLDQxOlsxLDU5XSw0MjoyMyw0Nzo2Nyw0ODpbMSw0OF0sNDk6WzEsNDldLDUwOlsxLDI5XSw1MzozMCw1NDpbMSw2NF0sNTU6WzEsNjVdLDYxOjUxLDYyOjUyLDY0OjM4LDY2OjI1LDY3OjI2LDY4OjI3LDc5OlsxLDc0XSw4MjpbMSw0NV0sODY6WzEsMjhdLDg3OlsxLDQ3XSw5MjpbMSw2Ml0sOTM6WzEsNjNdLDk0OlsxLDYxXSwxMDA6WzEsNDBdLDEwNDpbMSw0Nl0sMTA1OlsxLDYwXSwxMDc6NDEsMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMTo0MiwxMTI6WzEsNzFdLDExMzo0MywxMTQ6WzEsNzJdLDExNTo3MywxMjM6WzEsNDRdLDEyODozOSwxMjk6WzEsNjhdLDEzMTpbMSwzMV0sMTMyOlsxLDMyXSwxMzM6WzEsMzNdLDEzNDpbMSwzNF0sMTM1OlsxLDM1XSwxMzc6WzEsMzZdLDEzODpbMSwzN119LHs2OlsyLDEzNV0sMjg6WzIsMTM1XSw1NzpbMiwxMzVdLDYwOlsxLDI0M10sOTU6WzIsMTM1XSw5NjoyNDIsOTc6WzEsMjA2XSwxMDc6ODksMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMzo5MCwxMTQ6WzEsNzJdLDExNTo3MywxMzA6WzEsODhdLDEzMzpbMSw4MV0sMTM0OlsxLDgwXSwxMzk6WzEsNzldLDE0MDpbMSw4Ml0sMTQxOlsxLDgzXSwxNDI6WzEsODRdLDE0MzpbMSw4NV0sMTQ0OlsxLDg2XSwxNDU6WzEsODddfSx7MTpbMiwxMjFdLDY6WzIsMTIxXSwyODpbMiwxMjFdLDI5OlsyLDEyMV0sNDM6WzIsMTIxXSw1MjpbMiwxMjFdLDU3OlsyLDEyMV0sNjA6WzIsMTIxXSw2OTpbMiwxMjFdLDcwOlsyLDEyMV0sNzE6WzIsMTIxXSw3MjpbMiwxMjFdLDc0OlsyLDEyMV0sNzY6WzIsMTIxXSw3NzpbMiwxMjFdLDgxOlsyLDEyMV0sODg6WzIsMTIxXSw4OTpbMiwxMjFdLDkwOlsyLDEyMV0sOTU6WzIsMTIxXSw5NzpbMiwxMjFdLDEwNjpbMiwxMjFdLDEwODpbMiwxMjFdLDEwOTpbMiwxMjFdLDExMDpbMiwxMjFdLDExNDpbMiwxMjFdLDEyMDpbMiwxMjFdLDEyMTpbMiwxMjFdLDEyMjpbMiwxMjFdLDEzMDpbMiwxMjFdLDEzMzpbMiwxMjFdLDEzNDpbMiwxMjFdLDEzOTpbMiwxMjFdLDE0MDpbMiwxMjFdLDE0MTpbMiwxMjFdLDE0MjpbMiwxMjFdLDE0MzpbMiwxMjFdLDE0NDpbMiwxMjFdLDE0NTpbMiwxMjFdfSx7NjpbMiw1Nl0sMjg6WzIsNTZdLDU2OjI0NCw1NzpbMSwyNDVdLDk1OlsyLDU2XX0sezY6WzIsMTMwXSwyODpbMiwxMzBdLDI5OlsyLDEzMF0sNTc6WzIsMTMwXSw5MDpbMiwxMzBdLDk1OlsyLDEzMF19LHs3OjIxNSw4OjEyMiw5OjE5LDEwOjIwLDExOlsxLDIxXSwxMjoyMiwxMzpbMSw1MF0sMTU6NiwxNjo3LDE3OjgsMTg6OSwxOToxMCwyMDoxMSwyMToxMiwyMjoxMywyMzoxNCwyNDoxNSwyNToxNiwyNjoxNywyNzoxOCwyODpbMSwxNThdLDMwOjY2LDMxOlsxLDc3XSwzMjo1MywzMzpbMSw3NV0sMzQ6WzEsNzZdLDM1OjI0LDM2OlsxLDU0XSwzNzpbMSw1NV0sMzg6WzEsNTZdLDM5OlsxLDU3XSw0MDpbMSw1OF0sNDE6WzEsNTldLDQyOjIzLDQ3OjY3LDQ4OlsxLDQ4XSw0OTpbMSw0OV0sNTA6WzEsMjldLDUzOjMwLDU0OlsxLDY0XSw1NTpbMSw2NV0sNjA6WzEsMTYwXSw2MTo1MSw2Mjo1Miw2MzoxNTksNjQ6MzgsNjY6MjUsNjc6MjYsNjg6MjcsNzk6WzEsNzRdLDgyOlsxLDQ1XSw4NjpbMSwyOF0sODc6WzEsNDddLDkxOjI0Niw5MjpbMSw2Ml0sOTM6WzEsNjNdLDk0OlsxLDYxXSw5ODoxNTcsMTAwOlsxLDQwXSwxMDQ6WzEsNDZdLDEwNTpbMSw2MF0sMTA3OjQxLDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTE6NDIsMTEyOlsxLDcxXSwxMTM6NDMsMTE0OlsxLDcyXSwxMTU6NzMsMTIzOlsxLDQ0XSwxMjg6MzksMTI5OlsxLDY4XSwxMzE6WzEsMzFdLDEzMjpbMSwzMl0sMTMzOlsxLDMzXSwxMzQ6WzEsMzRdLDEzNTpbMSwzNV0sMTM3OlsxLDM2XSwxMzg6WzEsMzddfSx7NjpbMiwxMzZdLDI4OlsyLDEzNl0sMjk6WzIsMTM2XSw1NzpbMiwxMzZdLDkwOlsyLDEzNl0sOTU6WzIsMTM2XX0sezY6WzIsMTM3XSwyODpbMiwxMzddLDI5OlsyLDEzN10sNTc6WzIsMTM3XSw5MDpbMiwxMzddLDk1OlsyLDEzN119LHsxOlsyLDEyMF0sNjpbMiwxMjBdLDI4OlsyLDEyMF0sMjk6WzIsMTIwXSw0MzpbMiwxMjBdLDQ2OlsyLDEyMF0sNTI6WzIsMTIwXSw1NzpbMiwxMjBdLDYwOlsyLDEyMF0sNjk6WzIsMTIwXSw3MDpbMiwxMjBdLDcxOlsyLDEyMF0sNzI6WzIsMTIwXSw3NDpbMiwxMjBdLDc2OlsyLDEyMF0sNzc6WzIsMTIwXSw4MTpbMiwxMjBdLDgzOlsyLDEyMF0sODg6WzIsMTIwXSw4OTpbMiwxMjBdLDkwOlsyLDEyMF0sOTU6WzIsMTIwXSw5NzpbMiwxMjBdLDEwNjpbMiwxMjBdLDEwODpbMiwxMjBdLDEwOTpbMiwxMjBdLDExMDpbMiwxMjBdLDExNDpbMiwxMjBdLDEyMDpbMiwxMjBdLDEyMTpbMiwxMjBdLDEyMjpbMiwxMjBdLDEzMDpbMiwxMjBdLDEzMzpbMiwxMjBdLDEzNDpbMiwxMjBdLDEzNzpbMiwxMjBdLDEzODpbMiwxMjBdLDEzOTpbMiwxMjBdLDE0MDpbMiwxMjBdLDE0MTpbMiwxMjBdLDE0MjpbMiwxMjBdLDE0MzpbMiwxMjBdLDE0NDpbMiwxMjBdLDE0NTpbMiwxMjBdLDE0NjpbMiwxMjBdfSx7MTQ6MjQ3LDI4OlsxLDEyMF0sMTA3Ojg5LDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTM6OTAsMTE0OlsxLDcyXSwxMTU6NzMsMTMwOlsxLDg4XSwxMzM6WzEsODFdLDEzNDpbMSw4MF0sMTM5OlsxLDc5XSwxNDA6WzEsODJdLDE0MTpbMSw4M10sMTQyOlsxLDg0XSwxNDM6WzEsODVdLDE0NDpbMSw4Nl0sMTQ1OlsxLDg3XX0sezE6WzIsMTUwXSw2OlsyLDE1MF0sMjg6WzIsMTUwXSwyOTpbMiwxNTBdLDUyOlsyLDE1MF0sNTc6WzIsMTUwXSw2MDpbMiwxNTBdLDc2OlsyLDE1MF0sODE6WzIsMTUwXSw5MDpbMiwxNTBdLDk1OlsyLDE1MF0sOTc6WzIsMTUwXSwxMDY6WzIsMTUwXSwxMDc6ODksMTA4OlsxLDY5XSwxMDk6WzEsMjQ4XSwxMTA6WzEsNzBdLDExMzo5MCwxMTQ6WzEsNzJdLDExNTo3MywxMjI6WzIsMTUwXSwxMzA6WzIsMTUwXSwxMzM6WzEsODFdLDEzNDpbMSw4MF0sMTM5OlsxLDc5XSwxNDA6WzEsODJdLDE0MTpbMSw4M10sMTQyOlsxLDg0XSwxNDM6WzEsODVdLDE0NDpbMSw4Nl0sMTQ1OlsxLDg3XX0sezE6WzIsMTUyXSw2OlsyLDE1Ml0sMjg6WzIsMTUyXSwyOTpbMiwxNTJdLDUyOlsyLDE1Ml0sNTc6WzIsMTUyXSw2MDpbMiwxNTJdLDc2OlsyLDE1Ml0sODE6WzIsMTUyXSw5MDpbMiwxNTJdLDk1OlsyLDE1Ml0sOTc6WzIsMTUyXSwxMDY6WzIsMTUyXSwxMDc6ODksMTA4OlsxLDY5XSwxMDk6WzEsMjQ5XSwxMTA6WzEsNzBdLDExMzo5MCwxMTQ6WzEsNzJdLDExNTo3MywxMjI6WzIsMTUyXSwxMzA6WzIsMTUyXSwxMzM6WzEsODFdLDEzNDpbMSw4MF0sMTM5OlsxLDc5XSwxNDA6WzEsODJdLDE0MTpbMSw4M10sMTQyOlsxLDg0XSwxNDM6WzEsODVdLDE0NDpbMSw4Nl0sMTQ1OlsxLDg3XX0sezE6WzIsMTU4XSw2OlsyLDE1OF0sMjg6WzIsMTU4XSwyOTpbMiwxNThdLDUyOlsyLDE1OF0sNTc6WzIsMTU4XSw2MDpbMiwxNThdLDc2OlsyLDE1OF0sODE6WzIsMTU4XSw5MDpbMiwxNThdLDk1OlsyLDE1OF0sOTc6WzIsMTU4XSwxMDY6WzIsMTU4XSwxMDg6WzIsMTU4XSwxMDk6WzIsMTU4XSwxMTA6WzIsMTU4XSwxMTQ6WzIsMTU4XSwxMjI6WzIsMTU4XSwxMzA6WzIsMTU4XSwxMzM6WzIsMTU4XSwxMzQ6WzIsMTU4XSwxMzk6WzIsMTU4XSwxNDA6WzIsMTU4XSwxNDE6WzIsMTU4XSwxNDI6WzIsMTU4XSwxNDM6WzIsMTU4XSwxNDQ6WzIsMTU4XSwxNDU6WzIsMTU4XX0sezE6WzIsMTU5XSw2OlsyLDE1OV0sMjg6WzIsMTU5XSwyOTpbMiwxNTldLDUyOlsyLDE1OV0sNTc6WzIsMTU5XSw2MDpbMiwxNTldLDc2OlsyLDE1OV0sODE6WzIsMTU5XSw5MDpbMiwxNTldLDk1OlsyLDE1OV0sOTc6WzIsMTU5XSwxMDY6WzIsMTU5XSwxMDc6ODksMTA4OlsxLDY5XSwxMDk6WzIsMTU5XSwxMTA6WzEsNzBdLDExMzo5MCwxMTQ6WzEsNzJdLDExNTo3MywxMjI6WzIsMTU5XSwxMzA6WzIsMTU5XSwxMzM6WzEsODFdLDEzNDpbMSw4MF0sMTM5OlsxLDc5XSwxNDA6WzEsODJdLDE0MTpbMSw4M10sMTQyOlsxLDg0XSwxNDM6WzEsODVdLDE0NDpbMSw4Nl0sMTQ1OlsxLDg3XX0sezE6WzIsMTYzXSw2OlsyLDE2M10sMjg6WzIsMTYzXSwyOTpbMiwxNjNdLDUyOlsyLDE2M10sNTc6WzIsMTYzXSw2MDpbMiwxNjNdLDc2OlsyLDE2M10sODE6WzIsMTYzXSw5MDpbMiwxNjNdLDk1OlsyLDE2M10sOTc6WzIsMTYzXSwxMDY6WzIsMTYzXSwxMDg6WzIsMTYzXSwxMDk6WzIsMTYzXSwxMTA6WzIsMTYzXSwxMTQ6WzIsMTYzXSwxMjI6WzIsMTYzXSwxMzA6WzIsMTYzXSwxMzM6WzIsMTYzXSwxMzQ6WzIsMTYzXSwxMzk6WzIsMTYzXSwxNDA6WzIsMTYzXSwxNDE6WzIsMTYzXSwxNDI6WzIsMTYzXSwxNDM6WzIsMTYzXSwxNDQ6WzIsMTYzXSwxNDU6WzIsMTYzXX0sezEyMDpbMiwxNjVdLDEyMTpbMiwxNjVdfSx7MzA6MTcxLDMxOlsxLDc3XSw0NzoxNzIsNjE6MTczLDYyOjE3NCw3OTpbMSw3NF0sOTM6WzEsMTE3XSw5NDpbMSwxMThdLDExNzoyNTAsMTE5OjE3MH0sezU3OlsxLDI1MV0sMTIwOlsyLDE3MV0sMTIxOlsyLDE3MV19LHs1NzpbMiwxNjddLDEyMDpbMiwxNjddLDEyMTpbMiwxNjddfSx7NTc6WzIsMTY4XSwxMjA6WzIsMTY4XSwxMjE6WzIsMTY4XX0sezU3OlsyLDE2OV0sMTIwOlsyLDE2OV0sMTIxOlsyLDE2OV19LHs1NzpbMiwxNzBdLDEyMDpbMiwxNzBdLDEyMTpbMiwxNzBdfSx7MTpbMiwxNjRdLDY6WzIsMTY0XSwyODpbMiwxNjRdLDI5OlsyLDE2NF0sNTI6WzIsMTY0XSw1NzpbMiwxNjRdLDYwOlsyLDE2NF0sNzY6WzIsMTY0XSw4MTpbMiwxNjRdLDkwOlsyLDE2NF0sOTU6WzIsMTY0XSw5NzpbMiwxNjRdLDEwNjpbMiwxNjRdLDEwODpbMiwxNjRdLDEwOTpbMiwxNjRdLDExMDpbMiwxNjRdLDExNDpbMiwxNjRdLDEyMjpbMiwxNjRdLDEzMDpbMiwxNjRdLDEzMzpbMiwxNjRdLDEzNDpbMiwxNjRdLDEzOTpbMiwxNjRdLDE0MDpbMiwxNjRdLDE0MTpbMiwxNjRdLDE0MjpbMiwxNjRdLDE0MzpbMiwxNjRdLDE0NDpbMiwxNjRdLDE0NTpbMiwxNjRdfSx7NzoyNTIsODoxMjIsOToxOSwxMDoyMCwxMTpbMSwyMV0sMTI6MjIsMTM6WzEsNTBdLDE1OjYsMTY6NywxNzo4LDE4OjksMTk6MTAsMjA6MTEsMjE6MTIsMjI6MTMsMjM6MTQsMjQ6MTUsMjU6MTYsMjY6MTcsMjc6MTgsMzA6NjYsMzE6WzEsNzddLDMyOjUzLDMzOlsxLDc1XSwzNDpbMSw3Nl0sMzU6MjQsMzY6WzEsNTRdLDM3OlsxLDU1XSwzODpbMSw1Nl0sMzk6WzEsNTddLDQwOlsxLDU4XSw0MTpbMSw1OV0sNDI6MjMsNDc6NjcsNDg6WzEsNDhdLDQ5OlsxLDQ5XSw1MDpbMSwyOV0sNTM6MzAsNTQ6WzEsNjRdLDU1OlsxLDY1XSw2MTo1MSw2Mjo1Miw2NDozOCw2NjoyNSw2NzoyNiw2ODoyNyw3OTpbMSw3NF0sODI6WzEsNDVdLDg2OlsxLDI4XSw4NzpbMSw0N10sOTI6WzEsNjJdLDkzOlsxLDYzXSw5NDpbMSw2MV0sMTAwOlsxLDQwXSwxMDQ6WzEsNDZdLDEwNTpbMSw2MF0sMTA3OjQxLDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTE6NDIsMTEyOlsxLDcxXSwxMTM6NDMsMTE0OlsxLDcyXSwxMTU6NzMsMTIzOlsxLDQ0XSwxMjg6MzksMTI5OlsxLDY4XSwxMzE6WzEsMzFdLDEzMjpbMSwzMl0sMTMzOlsxLDMzXSwxMzQ6WzEsMzRdLDEzNTpbMSwzNV0sMTM3OlsxLDM2XSwxMzg6WzEsMzddfSx7NzoyNTMsODoxMjIsOToxOSwxMDoyMCwxMTpbMSwyMV0sMTI6MjIsMTM6WzEsNTBdLDE1OjYsMTY6NywxNzo4LDE4OjksMTk6MTAsMjA6MTEsMjE6MTIsMjI6MTMsMjM6MTQsMjQ6MTUsMjU6MTYsMjY6MTcsMjc6MTgsMzA6NjYsMzE6WzEsNzddLDMyOjUzLDMzOlsxLDc1XSwzNDpbMSw3Nl0sMzU6MjQsMzY6WzEsNTRdLDM3OlsxLDU1XSwzODpbMSw1Nl0sMzk6WzEsNTddLDQwOlsxLDU4XSw0MTpbMSw1OV0sNDI6MjMsNDc6NjcsNDg6WzEsNDhdLDQ5OlsxLDQ5XSw1MDpbMSwyOV0sNTM6MzAsNTQ6WzEsNjRdLDU1OlsxLDY1XSw2MTo1MSw2Mjo1Miw2NDozOCw2NjoyNSw2NzoyNiw2ODoyNyw3OTpbMSw3NF0sODI6WzEsNDVdLDg2OlsxLDI4XSw4NzpbMSw0N10sOTI6WzEsNjJdLDkzOlsxLDYzXSw5NDpbMSw2MV0sMTAwOlsxLDQwXSwxMDQ6WzEsNDZdLDEwNTpbMSw2MF0sMTA3OjQxLDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTE6NDIsMTEyOlsxLDcxXSwxMTM6NDMsMTE0OlsxLDcyXSwxMTU6NzMsMTIzOlsxLDQ0XSwxMjg6MzksMTI5OlsxLDY4XSwxMzE6WzEsMzFdLDEzMjpbMSwzMl0sMTMzOlsxLDMzXSwxMzQ6WzEsMzRdLDEzNTpbMSwzNV0sMTM3OlsxLDM2XSwxMzg6WzEsMzddfSx7NjpbMiw1Nl0sMjg6WzIsNTZdLDU2OjI1NCw1NzpbMSwyNTVdLDgxOlsyLDU2XX0sezY6WzIsOTddLDI4OlsyLDk3XSwyOTpbMiw5N10sNTc6WzIsOTddLDgxOlsyLDk3XX0sezY6WzIsNDJdLDI4OlsyLDQyXSwyOTpbMiw0Ml0sNDY6WzEsMjU2XSw1NzpbMiw0Ml0sODE6WzIsNDJdfSx7NjpbMiw0NV0sMjg6WzIsNDVdLDI5OlsyLDQ1XSw1NzpbMiw0NV0sODE6WzIsNDVdfSx7NjpbMiw0Nl0sMjg6WzIsNDZdLDI5OlsyLDQ2XSw0NjpbMiw0Nl0sNTc6WzIsNDZdLDgxOlsyLDQ2XX0sezY6WzIsNDddLDI4OlsyLDQ3XSwyOTpbMiw0N10sNDY6WzIsNDddLDU3OlsyLDQ3XSw4MTpbMiw0N119LHs2OlsyLDQ4XSwyODpbMiw0OF0sMjk6WzIsNDhdLDQ2OlsyLDQ4XSw1NzpbMiw0OF0sODE6WzIsNDhdfSx7MTpbMiw0XSw2OlsyLDRdLDI5OlsyLDRdLDEwNjpbMiw0XX0sezE6WzIsMjA2XSw2OlsyLDIwNl0sMjg6WzIsMjA2XSwyOTpbMiwyMDZdLDUyOlsyLDIwNl0sNTc6WzIsMjA2XSw2MDpbMiwyMDZdLDc2OlsyLDIwNl0sODE6WzIsMjA2XSw5MDpbMiwyMDZdLDk1OlsyLDIwNl0sOTc6WzIsMjA2XSwxMDY6WzIsMjA2XSwxMDc6ODksMTA4OlsyLDIwNl0sMTA5OlsyLDIwNl0sMTEwOlsyLDIwNl0sMTEzOjkwLDExNDpbMiwyMDZdLDExNTo3MywxMjI6WzIsMjA2XSwxMzA6WzIsMjA2XSwxMzM6WzIsMjA2XSwxMzQ6WzIsMjA2XSwxMzk6WzEsNzldLDE0MDpbMSw4Ml0sMTQxOlsxLDgzXSwxNDI6WzIsMjA2XSwxNDM6WzIsMjA2XSwxNDQ6WzIsMjA2XSwxNDU6WzIsMjA2XX0sezE6WzIsMjA3XSw2OlsyLDIwN10sMjg6WzIsMjA3XSwyOTpbMiwyMDddLDUyOlsyLDIwN10sNTc6WzIsMjA3XSw2MDpbMiwyMDddLDc2OlsyLDIwN10sODE6WzIsMjA3XSw5MDpbMiwyMDddLDk1OlsyLDIwN10sOTc6WzIsMjA3XSwxMDY6WzIsMjA3XSwxMDc6ODksMTA4OlsyLDIwN10sMTA5OlsyLDIwN10sMTEwOlsyLDIwN10sMTEzOjkwLDExNDpbMiwyMDddLDExNTo3MywxMjI6WzIsMjA3XSwxMzA6WzIsMjA3XSwxMzM6WzIsMjA3XSwxMzQ6WzIsMjA3XSwxMzk6WzEsNzldLDE0MDpbMSw4Ml0sMTQxOlsxLDgzXSwxNDI6WzIsMjA3XSwxNDM6WzIsMjA3XSwxNDQ6WzIsMjA3XSwxNDU6WzIsMjA3XX0sezE6WzIsMjA4XSw2OlsyLDIwOF0sMjg6WzIsMjA4XSwyOTpbMiwyMDhdLDUyOlsyLDIwOF0sNTc6WzIsMjA4XSw2MDpbMiwyMDhdLDc2OlsyLDIwOF0sODE6WzIsMjA4XSw5MDpbMiwyMDhdLDk1OlsyLDIwOF0sOTc6WzIsMjA4XSwxMDY6WzIsMjA4XSwxMDc6ODksMTA4OlsyLDIwOF0sMTA5OlsyLDIwOF0sMTEwOlsyLDIwOF0sMTEzOjkwLDExNDpbMiwyMDhdLDExNTo3MywxMjI6WzIsMjA4XSwxMzA6WzIsMjA4XSwxMzM6WzIsMjA4XSwxMzQ6WzIsMjA4XSwxMzk6WzEsNzldLDE0MDpbMiwyMDhdLDE0MTpbMSw4M10sMTQyOlsyLDIwOF0sMTQzOlsyLDIwOF0sMTQ0OlsyLDIwOF0sMTQ1OlsyLDIwOF19LHsxOlsyLDIwOV0sNjpbMiwyMDldLDI4OlsyLDIwOV0sMjk6WzIsMjA5XSw1MjpbMiwyMDldLDU3OlsyLDIwOV0sNjA6WzIsMjA5XSw3NjpbMiwyMDldLDgxOlsyLDIwOV0sOTA6WzIsMjA5XSw5NTpbMiwyMDldLDk3OlsyLDIwOV0sMTA2OlsyLDIwOV0sMTA3Ojg5LDEwODpbMiwyMDldLDEwOTpbMiwyMDldLDExMDpbMiwyMDldLDExMzo5MCwxMTQ6WzIsMjA5XSwxMTU6NzMsMTIyOlsyLDIwOV0sMTMwOlsyLDIwOV0sMTMzOlsyLDIwOV0sMTM0OlsyLDIwOV0sMTM5OlsxLDc5XSwxNDA6WzIsMjA5XSwxNDE6WzEsODNdLDE0MjpbMiwyMDldLDE0MzpbMiwyMDldLDE0NDpbMiwyMDldLDE0NTpbMiwyMDldfSx7MTpbMiwyMTBdLDY6WzIsMjEwXSwyODpbMiwyMTBdLDI5OlsyLDIxMF0sNTI6WzIsMjEwXSw1NzpbMiwyMTBdLDYwOlsyLDIxMF0sNzY6WzIsMjEwXSw4MTpbMiwyMTBdLDkwOlsyLDIxMF0sOTU6WzIsMjEwXSw5NzpbMiwyMTBdLDEwNjpbMiwyMTBdLDEwNzo4OSwxMDg6WzIsMjEwXSwxMDk6WzIsMjEwXSwxMTA6WzIsMjEwXSwxMTM6OTAsMTE0OlsyLDIxMF0sMTE1OjczLDEyMjpbMiwyMTBdLDEzMDpbMiwyMTBdLDEzMzpbMSw4MV0sMTM0OlsxLDgwXSwxMzk6WzEsNzldLDE0MDpbMSw4Ml0sMTQxOlsxLDgzXSwxNDI6WzIsMjEwXSwxNDM6WzIsMjEwXSwxNDQ6WzIsMjEwXSwxNDU6WzIsMjEwXX0sezE6WzIsMjExXSw2OlsyLDIxMV0sMjg6WzIsMjExXSwyOTpbMiwyMTFdLDUyOlsyLDIxMV0sNTc6WzIsMjExXSw2MDpbMiwyMTFdLDc2OlsyLDIxMV0sODE6WzIsMjExXSw5MDpbMiwyMTFdLDk1OlsyLDIxMV0sOTc6WzIsMjExXSwxMDY6WzIsMjExXSwxMDc6ODksMTA4OlsyLDIxMV0sMTA5OlsyLDIxMV0sMTEwOlsyLDIxMV0sMTEzOjkwLDExNDpbMiwyMTFdLDExNTo3MywxMjI6WzIsMjExXSwxMzA6WzIsMjExXSwxMzM6WzEsODFdLDEzNDpbMSw4MF0sMTM5OlsxLDc5XSwxNDA6WzEsODJdLDE0MTpbMSw4M10sMTQyOlsxLDg0XSwxNDM6WzIsMjExXSwxNDQ6WzIsMjExXSwxNDU6WzEsODddfSx7MTpbMiwyMTJdLDY6WzIsMjEyXSwyODpbMiwyMTJdLDI5OlsyLDIxMl0sNTI6WzIsMjEyXSw1NzpbMiwyMTJdLDYwOlsyLDIxMl0sNzY6WzIsMjEyXSw4MTpbMiwyMTJdLDkwOlsyLDIxMl0sOTU6WzIsMjEyXSw5NzpbMiwyMTJdLDEwNjpbMiwyMTJdLDEwNzo4OSwxMDg6WzIsMjEyXSwxMDk6WzIsMjEyXSwxMTA6WzIsMjEyXSwxMTM6OTAsMTE0OlsyLDIxMl0sMTE1OjczLDEyMjpbMiwyMTJdLDEzMDpbMiwyMTJdLDEzMzpbMSw4MV0sMTM0OlsxLDgwXSwxMzk6WzEsNzldLDE0MDpbMSw4Ml0sMTQxOlsxLDgzXSwxNDI6WzEsODRdLDE0MzpbMSw4NV0sMTQ0OlsyLDIxMl0sMTQ1OlsxLDg3XX0sezE6WzIsMjEzXSw2OlsyLDIxM10sMjg6WzIsMjEzXSwyOTpbMiwyMTNdLDUyOlsyLDIxM10sNTc6WzIsMjEzXSw2MDpbMiwyMTNdLDc2OlsyLDIxM10sODE6WzIsMjEzXSw5MDpbMiwyMTNdLDk1OlsyLDIxM10sOTc6WzIsMjEzXSwxMDY6WzIsMjEzXSwxMDc6ODksMTA4OlsyLDIxM10sMTA5OlsyLDIxM10sMTEwOlsyLDIxM10sMTEzOjkwLDExNDpbMiwyMTNdLDExNTo3MywxMjI6WzIsMjEzXSwxMzA6WzIsMjEzXSwxMzM6WzEsODFdLDEzNDpbMSw4MF0sMTM5OlsxLDc5XSwxNDA6WzEsODJdLDE0MTpbMSw4M10sMTQyOlsxLDg0XSwxNDM6WzIsMjEzXSwxNDQ6WzIsMjEzXSwxNDU6WzIsMjEzXX0sezE6WzIsMTkzXSw2OlsyLDE5M10sMjg6WzIsMTkzXSwyOTpbMiwxOTNdLDUyOlsyLDE5M10sNTc6WzIsMTkzXSw2MDpbMiwxOTNdLDc2OlsyLDE5M10sODE6WzIsMTkzXSw5MDpbMiwxOTNdLDk1OlsyLDE5M10sOTc6WzIsMTkzXSwxMDY6WzIsMTkzXSwxMDc6ODksMTA4OlsxLDY5XSwxMDk6WzIsMTkzXSwxMTA6WzEsNzBdLDExMzo5MCwxMTQ6WzEsNzJdLDExNTo3MywxMjI6WzIsMTkzXSwxMzA6WzIsMTkzXSwxMzM6WzEsODFdLDEzNDpbMSw4MF0sMTM5OlsxLDc5XSwxNDA6WzEsODJdLDE0MTpbMSw4M10sMTQyOlsxLDg0XSwxNDM6WzEsODVdLDE0NDpbMSw4Nl0sMTQ1OlsxLDg3XX0sezE6WzIsMTkyXSw2OlsyLDE5Ml0sMjg6WzIsMTkyXSwyOTpbMiwxOTJdLDUyOlsyLDE5Ml0sNTc6WzIsMTkyXSw2MDpbMiwxOTJdLDc2OlsyLDE5Ml0sODE6WzIsMTkyXSw5MDpbMiwxOTJdLDk1OlsyLDE5Ml0sOTc6WzIsMTkyXSwxMDY6WzIsMTkyXSwxMDc6ODksMTA4OlsxLDY5XSwxMDk6WzIsMTkyXSwxMTA6WzEsNzBdLDExMzo5MCwxMTQ6WzEsNzJdLDExNTo3MywxMjI6WzIsMTkyXSwxMzA6WzIsMTkyXSwxMzM6WzEsODFdLDEzNDpbMSw4MF0sMTM5OlsxLDc5XSwxNDA6WzEsODJdLDE0MTpbMSw4M10sMTQyOlsxLDg0XSwxNDM6WzEsODVdLDE0NDpbMSw4Nl0sMTQ1OlsxLDg3XX0sezE6WzIsMTA5XSw2OlsyLDEwOV0sMjg6WzIsMTA5XSwyOTpbMiwxMDldLDUyOlsyLDEwOV0sNTc6WzIsMTA5XSw2MDpbMiwxMDldLDY5OlsyLDEwOV0sNzA6WzIsMTA5XSw3MTpbMiwxMDldLDcyOlsyLDEwOV0sNzQ6WzIsMTA5XSw3NjpbMiwxMDldLDc3OlsyLDEwOV0sODE6WzIsMTA5XSw4ODpbMiwxMDldLDg5OlsyLDEwOV0sOTA6WzIsMTA5XSw5NTpbMiwxMDldLDk3OlsyLDEwOV0sMTA2OlsyLDEwOV0sMTA4OlsyLDEwOV0sMTA5OlsyLDEwOV0sMTEwOlsyLDEwOV0sMTE0OlsyLDEwOV0sMTIyOlsyLDEwOV0sMTMwOlsyLDEwOV0sMTMzOlsyLDEwOV0sMTM0OlsyLDEwOV0sMTM5OlsyLDEwOV0sMTQwOlsyLDEwOV0sMTQxOlsyLDEwOV0sMTQyOlsyLDEwOV0sMTQzOlsyLDEwOV0sMTQ0OlsyLDEwOV0sMTQ1OlsyLDEwOV19LHsxOlsyLDg0XSw2OlsyLDg0XSwyODpbMiw4NF0sMjk6WzIsODRdLDQzOlsyLDg0XSw1MjpbMiw4NF0sNTc6WzIsODRdLDYwOlsyLDg0XSw2OTpbMiw4NF0sNzA6WzIsODRdLDcxOlsyLDg0XSw3MjpbMiw4NF0sNzQ6WzIsODRdLDc2OlsyLDg0XSw3NzpbMiw4NF0sODE6WzIsODRdLDgzOlsyLDg0XSw4ODpbMiw4NF0sODk6WzIsODRdLDkwOlsyLDg0XSw5NTpbMiw4NF0sOTc6WzIsODRdLDEwNjpbMiw4NF0sMTA4OlsyLDg0XSwxMDk6WzIsODRdLDExMDpbMiw4NF0sMTE0OlsyLDg0XSwxMjI6WzIsODRdLDEzMDpbMiw4NF0sMTMzOlsyLDg0XSwxMzQ6WzIsODRdLDEzNzpbMiw4NF0sMTM4OlsyLDg0XSwxMzk6WzIsODRdLDE0MDpbMiw4NF0sMTQxOlsyLDg0XSwxNDI6WzIsODRdLDE0MzpbMiw4NF0sMTQ0OlsyLDg0XSwxNDU6WzIsODRdLDE0NjpbMiw4NF19LHsxOlsyLDg1XSw2OlsyLDg1XSwyODpbMiw4NV0sMjk6WzIsODVdLDQzOlsyLDg1XSw1MjpbMiw4NV0sNTc6WzIsODVdLDYwOlsyLDg1XSw2OTpbMiw4NV0sNzA6WzIsODVdLDcxOlsyLDg1XSw3MjpbMiw4NV0sNzQ6WzIsODVdLDc2OlsyLDg1XSw3NzpbMiw4NV0sODE6WzIsODVdLDgzOlsyLDg1XSw4ODpbMiw4NV0sODk6WzIsODVdLDkwOlsyLDg1XSw5NTpbMiw4NV0sOTc6WzIsODVdLDEwNjpbMiw4NV0sMTA4OlsyLDg1XSwxMDk6WzIsODVdLDExMDpbMiw4NV0sMTE0OlsyLDg1XSwxMjI6WzIsODVdLDEzMDpbMiw4NV0sMTMzOlsyLDg1XSwxMzQ6WzIsODVdLDEzNzpbMiw4NV0sMTM4OlsyLDg1XSwxMzk6WzIsODVdLDE0MDpbMiw4NV0sMTQxOlsyLDg1XSwxNDI6WzIsODVdLDE0MzpbMiw4NV0sMTQ0OlsyLDg1XSwxNDU6WzIsODVdLDE0NjpbMiw4NV19LHsxOlsyLDg2XSw2OlsyLDg2XSwyODpbMiw4Nl0sMjk6WzIsODZdLDQzOlsyLDg2XSw1MjpbMiw4Nl0sNTc6WzIsODZdLDYwOlsyLDg2XSw2OTpbMiw4Nl0sNzA6WzIsODZdLDcxOlsyLDg2XSw3MjpbMiw4Nl0sNzQ6WzIsODZdLDc2OlsyLDg2XSw3NzpbMiw4Nl0sODE6WzIsODZdLDgzOlsyLDg2XSw4ODpbMiw4Nl0sODk6WzIsODZdLDkwOlsyLDg2XSw5NTpbMiw4Nl0sOTc6WzIsODZdLDEwNjpbMiw4Nl0sMTA4OlsyLDg2XSwxMDk6WzIsODZdLDExMDpbMiw4Nl0sMTE0OlsyLDg2XSwxMjI6WzIsODZdLDEzMDpbMiw4Nl0sMTMzOlsyLDg2XSwxMzQ6WzIsODZdLDEzNzpbMiw4Nl0sMTM4OlsyLDg2XSwxMzk6WzIsODZdLDE0MDpbMiw4Nl0sMTQxOlsyLDg2XSwxNDI6WzIsODZdLDE0MzpbMiw4Nl0sMTQ0OlsyLDg2XSwxNDU6WzIsODZdLDE0NjpbMiw4Nl19LHsxOlsyLDg3XSw2OlsyLDg3XSwyODpbMiw4N10sMjk6WzIsODddLDQzOlsyLDg3XSw1MjpbMiw4N10sNTc6WzIsODddLDYwOlsyLDg3XSw2OTpbMiw4N10sNzA6WzIsODddLDcxOlsyLDg3XSw3MjpbMiw4N10sNzQ6WzIsODddLDc2OlsyLDg3XSw3NzpbMiw4N10sODE6WzIsODddLDgzOlsyLDg3XSw4ODpbMiw4N10sODk6WzIsODddLDkwOlsyLDg3XSw5NTpbMiw4N10sOTc6WzIsODddLDEwNjpbMiw4N10sMTA4OlsyLDg3XSwxMDk6WzIsODddLDExMDpbMiw4N10sMTE0OlsyLDg3XSwxMjI6WzIsODddLDEzMDpbMiw4N10sMTMzOlsyLDg3XSwxMzQ6WzIsODddLDEzNzpbMiw4N10sMTM4OlsyLDg3XSwxMzk6WzIsODddLDE0MDpbMiw4N10sMTQxOlsyLDg3XSwxNDI6WzIsODddLDE0MzpbMiw4N10sMTQ0OlsyLDg3XSwxNDU6WzIsODddLDE0NjpbMiw4N119LHsxOlsyLDg4XSw2OlsyLDg4XSwyODpbMiw4OF0sMjk6WzIsODhdLDQzOlsyLDg4XSw1MjpbMiw4OF0sNTc6WzIsODhdLDYwOlsyLDg4XSw2OTpbMiw4OF0sNzA6WzIsODhdLDcxOlsyLDg4XSw3MjpbMiw4OF0sNzQ6WzIsODhdLDc2OlsyLDg4XSw3NzpbMiw4OF0sODE6WzIsODhdLDgzOlsyLDg4XSw4ODpbMiw4OF0sODk6WzIsODhdLDkwOlsyLDg4XSw5NTpbMiw4OF0sOTc6WzIsODhdLDEwNjpbMiw4OF0sMTA4OlsyLDg4XSwxMDk6WzIsODhdLDExMDpbMiw4OF0sMTE0OlsyLDg4XSwxMjI6WzIsODhdLDEzMDpbMiw4OF0sMTMzOlsyLDg4XSwxMzQ6WzIsODhdLDEzNzpbMiw4OF0sMTM4OlsyLDg4XSwxMzk6WzIsODhdLDE0MDpbMiw4OF0sMTQxOlsyLDg4XSwxNDI6WzIsODhdLDE0MzpbMiw4OF0sMTQ0OlsyLDg4XSwxNDU6WzIsODhdLDE0NjpbMiw4OF19LHs3NjpbMSwyNTddfSx7NjA6WzEsMjA3XSw3NjpbMiw5M10sOTY6MjU4LDk3OlsxLDIwNl0sMTA3Ojg5LDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTM6OTAsMTE0OlsxLDcyXSwxMTU6NzMsMTMwOlsxLDg4XSwxMzM6WzEsODFdLDEzNDpbMSw4MF0sMTM5OlsxLDc5XSwxNDA6WzEsODJdLDE0MTpbMSw4M10sMTQyOlsxLDg0XSwxNDM6WzEsODVdLDE0NDpbMSw4Nl0sMTQ1OlsxLDg3XX0sezc2OlsyLDk0XX0sezc6MjU5LDg6MTIyLDk6MTksMTA6MjAsMTE6WzEsMjFdLDEyOjIyLDEzOlsxLDUwXSwxNTo2LDE2OjcsMTc6OCwxODo5LDE5OjEwLDIwOjExLDIxOjEyLDIyOjEzLDIzOjE0LDI0OjE1LDI1OjE2LDI2OjE3LDI3OjE4LDMwOjY2LDMxOlsxLDc3XSwzMjo1MywzMzpbMSw3NV0sMzQ6WzEsNzZdLDM1OjI0LDM2OlsxLDU0XSwzNzpbMSw1NV0sMzg6WzEsNTZdLDM5OlsxLDU3XSw0MDpbMSw1OF0sNDE6WzEsNTldLDQyOjIzLDQ3OjY3LDQ4OlsxLDQ4XSw0OTpbMSw0OV0sNTA6WzEsMjldLDUzOjMwLDU0OlsxLDY0XSw1NTpbMSw2NV0sNjE6NTEsNjI6NTIsNjQ6MzgsNjY6MjUsNjc6MjYsNjg6MjcsNzY6WzIsMTI5XSw3OTpbMSw3NF0sODI6WzEsNDVdLDg2OlsxLDI4XSw4NzpbMSw0N10sOTI6WzEsNjJdLDkzOlsxLDYzXSw5NDpbMSw2MV0sMTAwOlsxLDQwXSwxMDQ6WzEsNDZdLDEwNTpbMSw2MF0sMTA3OjQxLDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTE6NDIsMTEyOlsxLDcxXSwxMTM6NDMsMTE0OlsxLDcyXSwxMTU6NzMsMTIzOlsxLDQ0XSwxMjg6MzksMTI5OlsxLDY4XSwxMzE6WzEsMzFdLDEzMjpbMSwzMl0sMTMzOlsxLDMzXSwxMzQ6WzEsMzRdLDEzNTpbMSwzNV0sMTM3OlsxLDM2XSwxMzg6WzEsMzddfSx7MTE6WzIsMTIzXSwxMzpbMiwxMjNdLDMxOlsyLDEyM10sMzM6WzIsMTIzXSwzNDpbMiwxMjNdLDM2OlsyLDEyM10sMzc6WzIsMTIzXSwzODpbMiwxMjNdLDM5OlsyLDEyM10sNDA6WzIsMTIzXSw0MTpbMiwxMjNdLDQ4OlsyLDEyM10sNDk6WzIsMTIzXSw1MDpbMiwxMjNdLDU0OlsyLDEyM10sNTU6WzIsMTIzXSw3NjpbMiwxMjNdLDc5OlsyLDEyM10sODI6WzIsMTIzXSw4NjpbMiwxMjNdLDg3OlsyLDEyM10sOTI6WzIsMTIzXSw5MzpbMiwxMjNdLDk0OlsyLDEyM10sMTAwOlsyLDEyM10sMTA0OlsyLDEyM10sMTA1OlsyLDEyM10sMTA4OlsyLDEyM10sMTEwOlsyLDEyM10sMTEyOlsyLDEyM10sMTE0OlsyLDEyM10sMTIzOlsyLDEyM10sMTI5OlsyLDEyM10sMTMxOlsyLDEyM10sMTMyOlsyLDEyM10sMTMzOlsyLDEyM10sMTM0OlsyLDEyM10sMTM1OlsyLDEyM10sMTM3OlsyLDEyM10sMTM4OlsyLDEyM119LHsxMTpbMiwxMjRdLDEzOlsyLDEyNF0sMzE6WzIsMTI0XSwzMzpbMiwxMjRdLDM0OlsyLDEyNF0sMzY6WzIsMTI0XSwzNzpbMiwxMjRdLDM4OlsyLDEyNF0sMzk6WzIsMTI0XSw0MDpbMiwxMjRdLDQxOlsyLDEyNF0sNDg6WzIsMTI0XSw0OTpbMiwxMjRdLDUwOlsyLDEyNF0sNTQ6WzIsMTI0XSw1NTpbMiwxMjRdLDc2OlsyLDEyNF0sNzk6WzIsMTI0XSw4MjpbMiwxMjRdLDg2OlsyLDEyNF0sODc6WzIsMTI0XSw5MjpbMiwxMjRdLDkzOlsyLDEyNF0sOTQ6WzIsMTI0XSwxMDA6WzIsMTI0XSwxMDQ6WzIsMTI0XSwxMDU6WzIsMTI0XSwxMDg6WzIsMTI0XSwxMTA6WzIsMTI0XSwxMTI6WzIsMTI0XSwxMTQ6WzIsMTI0XSwxMjM6WzIsMTI0XSwxMjk6WzIsMTI0XSwxMzE6WzIsMTI0XSwxMzI6WzIsMTI0XSwxMzM6WzIsMTI0XSwxMzQ6WzIsMTI0XSwxMzU6WzIsMTI0XSwxMzc6WzIsMTI0XSwxMzg6WzIsMTI0XX0sezE6WzIsOTJdLDY6WzIsOTJdLDI4OlsyLDkyXSwyOTpbMiw5Ml0sNDM6WzIsOTJdLDUyOlsyLDkyXSw1NzpbMiw5Ml0sNjA6WzIsOTJdLDY5OlsyLDkyXSw3MDpbMiw5Ml0sNzE6WzIsOTJdLDcyOlsyLDkyXSw3NDpbMiw5Ml0sNzY6WzIsOTJdLDc3OlsyLDkyXSw4MTpbMiw5Ml0sODM6WzIsOTJdLDg4OlsyLDkyXSw4OTpbMiw5Ml0sOTA6WzIsOTJdLDk1OlsyLDkyXSw5NzpbMiw5Ml0sMTA2OlsyLDkyXSwxMDg6WzIsOTJdLDEwOTpbMiw5Ml0sMTEwOlsyLDkyXSwxMTQ6WzIsOTJdLDEyMjpbMiw5Ml0sMTMwOlsyLDkyXSwxMzM6WzIsOTJdLDEzNDpbMiw5Ml0sMTM3OlsyLDkyXSwxMzg6WzIsOTJdLDEzOTpbMiw5Ml0sMTQwOlsyLDkyXSwxNDE6WzIsOTJdLDE0MjpbMiw5Ml0sMTQzOlsyLDkyXSwxNDQ6WzIsOTJdLDE0NTpbMiw5Ml0sMTQ2OlsyLDkyXX0sezE6WzIsMTEwXSw2OlsyLDExMF0sMjg6WzIsMTEwXSwyOTpbMiwxMTBdLDUyOlsyLDExMF0sNTc6WzIsMTEwXSw2MDpbMiwxMTBdLDY5OlsyLDExMF0sNzA6WzIsMTEwXSw3MTpbMiwxMTBdLDcyOlsyLDExMF0sNzQ6WzIsMTEwXSw3NjpbMiwxMTBdLDc3OlsyLDExMF0sODE6WzIsMTEwXSw4ODpbMiwxMTBdLDg5OlsyLDExMF0sOTA6WzIsMTEwXSw5NTpbMiwxMTBdLDk3OlsyLDExMF0sMTA2OlsyLDExMF0sMTA4OlsyLDExMF0sMTA5OlsyLDExMF0sMTEwOlsyLDExMF0sMTE0OlsyLDExMF0sMTIyOlsyLDExMF0sMTMwOlsyLDExMF0sMTMzOlsyLDExMF0sMTM0OlsyLDExMF0sMTM5OlsyLDExMF0sMTQwOlsyLDExMF0sMTQxOlsyLDExMF0sMTQyOlsyLDExMF0sMTQzOlsyLDExMF0sMTQ0OlsyLDExMF0sMTQ1OlsyLDExMF19LHsxOlsyLDM5XSw2OlsyLDM5XSwyODpbMiwzOV0sMjk6WzIsMzldLDUyOlsyLDM5XSw1NzpbMiwzOV0sNjA6WzIsMzldLDc2OlsyLDM5XSw4MTpbMiwzOV0sOTA6WzIsMzldLDk1OlsyLDM5XSw5NzpbMiwzOV0sMTA2OlsyLDM5XSwxMDc6ODksMTA4OlsyLDM5XSwxMDk6WzIsMzldLDExMDpbMiwzOV0sMTEzOjkwLDExNDpbMiwzOV0sMTE1OjczLDEyMjpbMiwzOV0sMTMwOlsyLDM5XSwxMzM6WzEsODFdLDEzNDpbMSw4MF0sMTM5OlsxLDc5XSwxNDA6WzEsODJdLDE0MTpbMSw4M10sMTQyOlsxLDg0XSwxNDM6WzEsODVdLDE0NDpbMSw4Nl0sMTQ1OlsxLDg3XX0sezc6MjYwLDg6MTIyLDk6MTksMTA6MjAsMTE6WzEsMjFdLDEyOjIyLDEzOlsxLDUwXSwxNTo2LDE2OjcsMTc6OCwxODo5LDE5OjEwLDIwOjExLDIxOjEyLDIyOjEzLDIzOjE0LDI0OjE1LDI1OjE2LDI2OjE3LDI3OjE4LDMwOjY2LDMxOlsxLDc3XSwzMjo1MywzMzpbMSw3NV0sMzQ6WzEsNzZdLDM1OjI0LDM2OlsxLDU0XSwzNzpbMSw1NV0sMzg6WzEsNTZdLDM5OlsxLDU3XSw0MDpbMSw1OF0sNDE6WzEsNTldLDQyOjIzLDQ3OjY3LDQ4OlsxLDQ4XSw0OTpbMSw0OV0sNTA6WzEsMjldLDUzOjMwLDU0OlsxLDY0XSw1NTpbMSw2NV0sNjE6NTEsNjI6NTIsNjQ6MzgsNjY6MjUsNjc6MjYsNjg6MjcsNzk6WzEsNzRdLDgyOlsxLDQ1XSw4NjpbMSwyOF0sODc6WzEsNDddLDkyOlsxLDYyXSw5MzpbMSw2M10sOTQ6WzEsNjFdLDEwMDpbMSw0MF0sMTA0OlsxLDQ2XSwxMDU6WzEsNjBdLDEwNzo0MSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTExOjQyLDExMjpbMSw3MV0sMTEzOjQzLDExNDpbMSw3Ml0sMTE1OjczLDEyMzpbMSw0NF0sMTI4OjM5LDEyOTpbMSw2OF0sMTMxOlsxLDMxXSwxMzI6WzEsMzJdLDEzMzpbMSwzM10sMTM0OlsxLDM0XSwxMzU6WzEsMzVdLDEzNzpbMSwzNl0sMTM4OlsxLDM3XX0sezc6MjYxLDg6MTIyLDk6MTksMTA6MjAsMTE6WzEsMjFdLDEyOjIyLDEzOlsxLDUwXSwxNTo2LDE2OjcsMTc6OCwxODo5LDE5OjEwLDIwOjExLDIxOjEyLDIyOjEzLDIzOjE0LDI0OjE1LDI1OjE2LDI2OjE3LDI3OjE4LDMwOjY2LDMxOlsxLDc3XSwzMjo1MywzMzpbMSw3NV0sMzQ6WzEsNzZdLDM1OjI0LDM2OlsxLDU0XSwzNzpbMSw1NV0sMzg6WzEsNTZdLDM5OlsxLDU3XSw0MDpbMSw1OF0sNDE6WzEsNTldLDQyOjIzLDQ3OjY3LDQ4OlsxLDQ4XSw0OTpbMSw0OV0sNTA6WzEsMjldLDUzOjMwLDU0OlsxLDY0XSw1NTpbMSw2NV0sNjE6NTEsNjI6NTIsNjQ6MzgsNjY6MjUsNjc6MjYsNjg6MjcsNzk6WzEsNzRdLDgyOlsxLDQ1XSw4NjpbMSwyOF0sODc6WzEsNDddLDkyOlsxLDYyXSw5MzpbMSw2M10sOTQ6WzEsNjFdLDEwMDpbMSw0MF0sMTA0OlsxLDQ2XSwxMDU6WzEsNjBdLDEwNzo0MSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTExOjQyLDExMjpbMSw3MV0sMTEzOjQzLDExNDpbMSw3Ml0sMTE1OjczLDEyMzpbMSw0NF0sMTI4OjM5LDEyOTpbMSw2OF0sMTMxOlsxLDMxXSwxMzI6WzEsMzJdLDEzMzpbMSwzM10sMTM0OlsxLDM0XSwxMzU6WzEsMzVdLDEzNzpbMSwzNl0sMTM4OlsxLDM3XX0sezE6WzIsMTE2XSw2OlsyLDExNl0sMjg6WzIsMTE2XSwyOTpbMiwxMTZdLDQzOlsyLDExNl0sNTI6WzIsMTE2XSw1NzpbMiwxMTZdLDYwOlsyLDExNl0sNjk6WzIsMTE2XSw3MDpbMiwxMTZdLDcxOlsyLDExNl0sNzI6WzIsMTE2XSw3NDpbMiwxMTZdLDc2OlsyLDExNl0sNzc6WzIsMTE2XSw4MTpbMiwxMTZdLDgzOlsyLDExNl0sODg6WzIsMTE2XSw4OTpbMiwxMTZdLDkwOlsyLDExNl0sOTU6WzIsMTE2XSw5NzpbMiwxMTZdLDEwNjpbMiwxMTZdLDEwODpbMiwxMTZdLDEwOTpbMiwxMTZdLDExMDpbMiwxMTZdLDExNDpbMiwxMTZdLDEyMjpbMiwxMTZdLDEzMDpbMiwxMTZdLDEzMzpbMiwxMTZdLDEzNDpbMiwxMTZdLDEzNzpbMiwxMTZdLDEzODpbMiwxMTZdLDEzOTpbMiwxMTZdLDE0MDpbMiwxMTZdLDE0MTpbMiwxMTZdLDE0MjpbMiwxMTZdLDE0MzpbMiwxMTZdLDE0NDpbMiwxMTZdLDE0NTpbMiwxMTZdLDE0NjpbMiwxMTZdfSx7NjpbMiw1Nl0sMjg6WzIsNTZdLDU2OjI2Miw1NzpbMSwyNDVdLDkwOlsyLDU2XX0sezY6WzIsMTM1XSwyODpbMiwxMzVdLDI5OlsyLDEzNV0sNTc6WzIsMTM1XSw2MDpbMSwyNjNdLDkwOlsyLDEzNV0sOTU6WzIsMTM1XSwxMDc6ODksMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMzo5MCwxMTQ6WzEsNzJdLDExNTo3MywxMzA6WzEsODhdLDEzMzpbMSw4MV0sMTM0OlsxLDgwXSwxMzk6WzEsNzldLDE0MDpbMSw4Ml0sMTQxOlsxLDgzXSwxNDI6WzEsODRdLDE0MzpbMSw4NV0sMTQ0OlsxLDg2XSwxNDU6WzEsODddfSx7NTM6MjY0LDU0OlsxLDY0XSw1NTpbMSw2NV19LHs2OlsyLDU3XSwyODpbMiw1N10sMjk6WzIsNTddLDMwOjExMywzMTpbMSw3N10sNDc6MTE0LDU4OjI2NSw1OToxMTEsNjA6WzEsMTEyXSw2MToxMTUsNjI6MTE2LDc5OlsxLDc0XSw5MzpbMSwxMTddLDk0OlsxLDExOF19LHs2OlsxLDI2Nl0sMjg6WzEsMjY3XX0sezY6WzIsNjRdLDI4OlsyLDY0XSwyOTpbMiw2NF0sNTI6WzIsNjRdLDU3OlsyLDY0XX0sezc6MjY4LDg6MTIyLDk6MTksMTA6MjAsMTE6WzEsMjFdLDEyOjIyLDEzOlsxLDUwXSwxNTo2LDE2OjcsMTc6OCwxODo5LDE5OjEwLDIwOjExLDIxOjEyLDIyOjEzLDIzOjE0LDI0OjE1LDI1OjE2LDI2OjE3LDI3OjE4LDMwOjY2LDMxOlsxLDc3XSwzMjo1MywzMzpbMSw3NV0sMzQ6WzEsNzZdLDM1OjI0LDM2OlsxLDU0XSwzNzpbMSw1NV0sMzg6WzEsNTZdLDM5OlsxLDU3XSw0MDpbMSw1OF0sNDE6WzEsNTldLDQyOjIzLDQ3OjY3LDQ4OlsxLDQ4XSw0OTpbMSw0OV0sNTA6WzEsMjldLDUzOjMwLDU0OlsxLDY0XSw1NTpbMSw2NV0sNjE6NTEsNjI6NTIsNjQ6MzgsNjY6MjUsNjc6MjYsNjg6MjcsNzk6WzEsNzRdLDgyOlsxLDQ1XSw4NjpbMSwyOF0sODc6WzEsNDddLDkyOlsxLDYyXSw5MzpbMSw2M10sOTQ6WzEsNjFdLDEwMDpbMSw0MF0sMTA0OlsxLDQ2XSwxMDU6WzEsNjBdLDEwNzo0MSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTExOjQyLDExMjpbMSw3MV0sMTEzOjQzLDExNDpbMSw3Ml0sMTE1OjczLDEyMzpbMSw0NF0sMTI4OjM5LDEyOTpbMSw2OF0sMTMxOlsxLDMxXSwxMzI6WzEsMzJdLDEzMzpbMSwzM10sMTM0OlsxLDM0XSwxMzU6WzEsMzVdLDEzNzpbMSwzNl0sMTM4OlsxLDM3XX0sezE6WzIsMjddLDY6WzIsMjddLDI4OlsyLDI3XSwyOTpbMiwyN10sNTI6WzIsMjddLDU3OlsyLDI3XSw2MDpbMiwyN10sNzY6WzIsMjddLDgxOlsyLDI3XSw5MDpbMiwyN10sOTU6WzIsMjddLDk3OlsyLDI3XSwxMDI6WzIsMjddLDEwMzpbMiwyN10sMTA2OlsyLDI3XSwxMDg6WzIsMjddLDEwOTpbMiwyN10sMTEwOlsyLDI3XSwxMTQ6WzIsMjddLDEyMjpbMiwyN10sMTI1OlsyLDI3XSwxMjc6WzIsMjddLDEzMDpbMiwyN10sMTMzOlsyLDI3XSwxMzQ6WzIsMjddLDEzOTpbMiwyN10sMTQwOlsyLDI3XSwxNDE6WzIsMjddLDE0MjpbMiwyN10sMTQzOlsyLDI3XSwxNDQ6WzIsMjddLDE0NTpbMiwyN119LHs2OlsxLDc4XSwyOTpbMSwyNjldfSx7MTpbMiwyMDBdLDY6WzIsMjAwXSwyODpbMiwyMDBdLDI5OlsyLDIwMF0sNTI6WzIsMjAwXSw1NzpbMiwyMDBdLDYwOlsyLDIwMF0sNzY6WzIsMjAwXSw4MTpbMiwyMDBdLDkwOlsyLDIwMF0sOTU6WzIsMjAwXSw5NzpbMiwyMDBdLDEwNjpbMiwyMDBdLDEwNzo4OSwxMDg6WzIsMjAwXSwxMDk6WzIsMjAwXSwxMTA6WzIsMjAwXSwxMTM6OTAsMTE0OlsyLDIwMF0sMTE1OjczLDEyMjpbMiwyMDBdLDEzMDpbMiwyMDBdLDEzMzpbMiwyMDBdLDEzNDpbMiwyMDBdLDEzOTpbMSw3OV0sMTQwOlsyLDIwMF0sMTQxOlsyLDIwMF0sMTQyOlsyLDIwMF0sMTQzOlsyLDIwMF0sMTQ0OlsyLDIwMF0sMTQ1OlsyLDIwMF19LHsxOlsyLDIxNF0sNjpbMiwyMTRdLDI4OlsyLDIxNF0sMjk6WzIsMjE0XSw1MjpbMiwyMTRdLDU3OlsyLDIxNF0sNjA6WzIsMjE0XSw3NjpbMiwyMTRdLDgxOlsyLDIxNF0sOTA6WzIsMjE0XSw5NTpbMiwyMTRdLDk3OlsyLDIxNF0sMTA2OlsyLDIxNF0sMTA3Ojg5LDEwODpbMiwyMTRdLDEwOTpbMiwyMTRdLDExMDpbMiwyMTRdLDExMzo5MCwxMTQ6WzIsMjE0XSwxMTU6NzMsMTIyOlsyLDIxNF0sMTMwOlsyLDIxNF0sMTMzOlsxLDgxXSwxMzQ6WzEsODBdLDEzOTpbMSw3OV0sMTQwOlsxLDgyXSwxNDE6WzEsODNdLDE0MjpbMSw4NF0sMTQzOlsxLDg1XSwxNDQ6WzEsODZdLDE0NTpbMSw4N119LHs3OjI3MCw4OjEyMiw5OjE5LDEwOjIwLDExOlsxLDIxXSwxMjoyMiwxMzpbMSw1MF0sMTU6NiwxNjo3LDE3OjgsMTg6OSwxOToxMCwyMDoxMSwyMToxMiwyMjoxMywyMzoxNCwyNDoxNSwyNToxNiwyNjoxNywyNzoxOCwzMDo2NiwzMTpbMSw3N10sMzI6NTMsMzM6WzEsNzVdLDM0OlsxLDc2XSwzNToyNCwzNjpbMSw1NF0sMzc6WzEsNTVdLDM4OlsxLDU2XSwzOTpbMSw1N10sNDA6WzEsNThdLDQxOlsxLDU5XSw0MjoyMyw0Nzo2Nyw0ODpbMSw0OF0sNDk6WzEsNDldLDUwOlsxLDI5XSw1MzozMCw1NDpbMSw2NF0sNTU6WzEsNjVdLDYxOjUxLDYyOjUyLDY0OjM4LDY2OjI1LDY3OjI2LDY4OjI3LDc5OlsxLDc0XSw4MjpbMSw0NV0sODY6WzEsMjhdLDg3OlsxLDQ3XSw5MjpbMSw2Ml0sOTM6WzEsNjNdLDk0OlsxLDYxXSwxMDA6WzEsNDBdLDEwNDpbMSw0Nl0sMTA1OlsxLDYwXSwxMDc6NDEsMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMTo0MiwxMTI6WzEsNzFdLDExMzo0MywxMTQ6WzEsNzJdLDExNTo3MywxMjM6WzEsNDRdLDEyODozOSwxMjk6WzEsNjhdLDEzMTpbMSwzMV0sMTMyOlsxLDMyXSwxMzM6WzEsMzNdLDEzNDpbMSwzNF0sMTM1OlsxLDM1XSwxMzc6WzEsMzZdLDEzODpbMSwzN119LHs3OjI3MSw4OjEyMiw5OjE5LDEwOjIwLDExOlsxLDIxXSwxMjoyMiwxMzpbMSw1MF0sMTU6NiwxNjo3LDE3OjgsMTg6OSwxOToxMCwyMDoxMSwyMToxMiwyMjoxMywyMzoxNCwyNDoxNSwyNToxNiwyNjoxNywyNzoxOCwzMDo2NiwzMTpbMSw3N10sMzI6NTMsMzM6WzEsNzVdLDM0OlsxLDc2XSwzNToyNCwzNjpbMSw1NF0sMzc6WzEsNTVdLDM4OlsxLDU2XSwzOTpbMSw1N10sNDA6WzEsNThdLDQxOlsxLDU5XSw0MjoyMyw0Nzo2Nyw0ODpbMSw0OF0sNDk6WzEsNDldLDUwOlsxLDI5XSw1MzozMCw1NDpbMSw2NF0sNTU6WzEsNjVdLDYxOjUxLDYyOjUyLDY0OjM4LDY2OjI1LDY3OjI2LDY4OjI3LDc5OlsxLDc0XSw4MjpbMSw0NV0sODY6WzEsMjhdLDg3OlsxLDQ3XSw5MjpbMSw2Ml0sOTM6WzEsNjNdLDk0OlsxLDYxXSwxMDA6WzEsNDBdLDEwNDpbMSw0Nl0sMTA1OlsxLDYwXSwxMDc6NDEsMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMTo0MiwxMTI6WzEsNzFdLDExMzo0MywxMTQ6WzEsNzJdLDExNTo3MywxMjM6WzEsNDRdLDEyODozOSwxMjk6WzEsNjhdLDEzMTpbMSwzMV0sMTMyOlsxLDMyXSwxMzM6WzEsMzNdLDEzNDpbMSwzNF0sMTM1OlsxLDM1XSwxMzc6WzEsMzZdLDEzODpbMSwzN119LHsxOlsyLDIxN10sNjpbMiwyMTddLDI4OlsyLDIxN10sMjk6WzIsMjE3XSw1MjpbMiwyMTddLDU3OlsyLDIxN10sNjA6WzIsMjE3XSw3NjpbMiwyMTddLDgxOlsyLDIxN10sOTA6WzIsMjE3XSw5NTpbMiwyMTddLDk3OlsyLDIxN10sMTA2OlsyLDIxN10sMTA3Ojg5LDEwODpbMiwyMTddLDEwOTpbMiwyMTddLDExMDpbMiwyMTddLDExMzo5MCwxMTQ6WzIsMjE3XSwxMTU6NzMsMTIyOlsyLDIxN10sMTMwOlsyLDIxN10sMTMzOlsxLDgxXSwxMzQ6WzEsODBdLDEzOTpbMSw3OV0sMTQwOlsxLDgyXSwxNDE6WzEsODNdLDE0MjpbMSw4NF0sMTQzOlsxLDg1XSwxNDQ6WzEsODZdLDE0NTpbMSw4N119LHsxOlsyLDE5MV0sNjpbMiwxOTFdLDI4OlsyLDE5MV0sMjk6WzIsMTkxXSw1MjpbMiwxOTFdLDU3OlsyLDE5MV0sNjA6WzIsMTkxXSw3NjpbMiwxOTFdLDgxOlsyLDE5MV0sOTA6WzIsMTkxXSw5NTpbMiwxOTFdLDk3OlsyLDE5MV0sMTA2OlsyLDE5MV0sMTA4OlsyLDE5MV0sMTA5OlsyLDE5MV0sMTEwOlsyLDE5MV0sMTE0OlsyLDE5MV0sMTIyOlsyLDE5MV0sMTMwOlsyLDE5MV0sMTMzOlsyLDE5MV0sMTM0OlsyLDE5MV0sMTM5OlsyLDE5MV0sMTQwOlsyLDE5MV0sMTQxOlsyLDE5MV0sMTQyOlsyLDE5MV0sMTQzOlsyLDE5MV0sMTQ0OlsyLDE5MV0sMTQ1OlsyLDE5MV19LHs3OjI3Miw4OjEyMiw5OjE5LDEwOjIwLDExOlsxLDIxXSwxMjoyMiwxMzpbMSw1MF0sMTU6NiwxNjo3LDE3OjgsMTg6OSwxOToxMCwyMDoxMSwyMToxMiwyMjoxMywyMzoxNCwyNDoxNSwyNToxNiwyNjoxNywyNzoxOCwzMDo2NiwzMTpbMSw3N10sMzI6NTMsMzM6WzEsNzVdLDM0OlsxLDc2XSwzNToyNCwzNjpbMSw1NF0sMzc6WzEsNTVdLDM4OlsxLDU2XSwzOTpbMSw1N10sNDA6WzEsNThdLDQxOlsxLDU5XSw0MjoyMyw0Nzo2Nyw0ODpbMSw0OF0sNDk6WzEsNDldLDUwOlsxLDI5XSw1MzozMCw1NDpbMSw2NF0sNTU6WzEsNjVdLDYxOjUxLDYyOjUyLDY0OjM4LDY2OjI1LDY3OjI2LDY4OjI3LDc5OlsxLDc0XSw4MjpbMSw0NV0sODY6WzEsMjhdLDg3OlsxLDQ3XSw5MjpbMSw2Ml0sOTM6WzEsNjNdLDk0OlsxLDYxXSwxMDA6WzEsNDBdLDEwNDpbMSw0Nl0sMTA1OlsxLDYwXSwxMDc6NDEsMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMTo0MiwxMTI6WzEsNzFdLDExMzo0MywxMTQ6WzEsNzJdLDExNTo3MywxMjM6WzEsNDRdLDEyODozOSwxMjk6WzEsNjhdLDEzMTpbMSwzMV0sMTMyOlsxLDMyXSwxMzM6WzEsMzNdLDEzNDpbMSwzNF0sMTM1OlsxLDM1XSwxMzc6WzEsMzZdLDEzODpbMSwzN119LHsxOlsyLDE0MV0sNjpbMiwxNDFdLDI4OlsyLDE0MV0sMjk6WzIsMTQxXSw1MjpbMiwxNDFdLDU3OlsyLDE0MV0sNjA6WzIsMTQxXSw3NjpbMiwxNDFdLDgxOlsyLDE0MV0sOTA6WzIsMTQxXSw5NTpbMiwxNDFdLDk3OlsyLDE0MV0sMTAyOlsxLDI3M10sMTA2OlsyLDE0MV0sMTA4OlsyLDE0MV0sMTA5OlsyLDE0MV0sMTEwOlsyLDE0MV0sMTE0OlsyLDE0MV0sMTIyOlsyLDE0MV0sMTMwOlsyLDE0MV0sMTMzOlsyLDE0MV0sMTM0OlsyLDE0MV0sMTM5OlsyLDE0MV0sMTQwOlsyLDE0MV0sMTQxOlsyLDE0MV0sMTQyOlsyLDE0MV0sMTQzOlsyLDE0MV0sMTQ0OlsyLDE0MV0sMTQ1OlsyLDE0MV19LHsxNDoyNzQsMjg6WzEsMTIwXX0sezE0OjI3NywyODpbMSwxMjBdLDMwOjI3NSwzMTpbMSw3N10sNjI6Mjc2LDc5OlsxLDc0XX0sezEyNDoyNzgsMTI2OjIzNSwxMjc6WzEsMjM2XX0sezI5OlsxLDI3OV0sMTI1OlsxLDI4MF0sMTI2OjI4MSwxMjc6WzEsMjM2XX0sezI5OlsyLDE4NF0sMTI1OlsyLDE4NF0sMTI3OlsyLDE4NF19LHs3OjI4Myw4OjEyMiw5OjE5LDEwOjIwLDExOlsxLDIxXSwxMjoyMiwxMzpbMSw1MF0sMTU6NiwxNjo3LDE3OjgsMTg6OSwxOToxMCwyMDoxMSwyMToxMiwyMjoxMywyMzoxNCwyNDoxNSwyNToxNiwyNjoxNywyNzoxOCwzMDo2NiwzMTpbMSw3N10sMzI6NTMsMzM6WzEsNzVdLDM0OlsxLDc2XSwzNToyNCwzNjpbMSw1NF0sMzc6WzEsNTVdLDM4OlsxLDU2XSwzOTpbMSw1N10sNDA6WzEsNThdLDQxOlsxLDU5XSw0MjoyMyw0Nzo2Nyw0ODpbMSw0OF0sNDk6WzEsNDldLDUwOlsxLDI5XSw1MzozMCw1NDpbMSw2NF0sNTU6WzEsNjVdLDYxOjUxLDYyOjUyLDY0OjM4LDY2OjI1LDY3OjI2LDY4OjI3LDc5OlsxLDc0XSw4MjpbMSw0NV0sODY6WzEsMjhdLDg3OlsxLDQ3XSw5MjpbMSw2Ml0sOTM6WzEsNjNdLDk0OlsxLDYxXSw5OToyODIsMTAwOlsxLDQwXSwxMDQ6WzEsNDZdLDEwNTpbMSw2MF0sMTA3OjQxLDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTE6NDIsMTEyOlsxLDcxXSwxMTM6NDMsMTE0OlsxLDcyXSwxMTU6NzMsMTIzOlsxLDQ0XSwxMjg6MzksMTI5OlsxLDY4XSwxMzE6WzEsMzFdLDEzMjpbMSwzMl0sMTMzOlsxLDMzXSwxMzQ6WzEsMzRdLDEzNTpbMSwzNV0sMTM3OlsxLDM2XSwxMzg6WzEsMzddfSx7MTpbMiwxMDNdLDY6WzIsMTAzXSwxNDoyODQsMjg6WzEsMTIwXSwyOTpbMiwxMDNdLDUyOlsyLDEwM10sNTc6WzIsMTAzXSw2MDpbMiwxMDNdLDc2OlsyLDEwM10sODE6WzIsMTAzXSw5MDpbMiwxMDNdLDk1OlsyLDEwM10sOTc6WzIsMTAzXSwxMDY6WzIsMTAzXSwxMDc6ODksMTA4OlsxLDY5XSwxMDk6WzIsMTAzXSwxMTA6WzEsNzBdLDExMzo5MCwxMTQ6WzEsNzJdLDExNTo3MywxMjI6WzIsMTAzXSwxMzA6WzIsMTAzXSwxMzM6WzEsODFdLDEzNDpbMSw4MF0sMTM5OlsxLDc5XSwxNDA6WzEsODJdLDE0MTpbMSw4M10sMTQyOlsxLDg0XSwxNDM6WzEsODVdLDE0NDpbMSw4Nl0sMTQ1OlsxLDg3XX0sezE6WzIsMTA2XSw2OlsyLDEwNl0sMjg6WzIsMTA2XSwyOTpbMiwxMDZdLDUyOlsyLDEwNl0sNTc6WzIsMTA2XSw2MDpbMiwxMDZdLDc2OlsyLDEwNl0sODE6WzIsMTA2XSw5MDpbMiwxMDZdLDk1OlsyLDEwNl0sOTc6WzIsMTA2XSwxMDY6WzIsMTA2XSwxMDg6WzIsMTA2XSwxMDk6WzIsMTA2XSwxMTA6WzIsMTA2XSwxMTQ6WzIsMTA2XSwxMjI6WzIsMTA2XSwxMzA6WzIsMTA2XSwxMzM6WzIsMTA2XSwxMzQ6WzIsMTA2XSwxMzk6WzIsMTA2XSwxNDA6WzIsMTA2XSwxNDE6WzIsMTA2XSwxNDI6WzIsMTA2XSwxNDM6WzIsMTA2XSwxNDQ6WzIsMTA2XSwxNDU6WzIsMTA2XX0sezc6Mjg1LDg6MTIyLDk6MTksMTA6MjAsMTE6WzEsMjFdLDEyOjIyLDEzOlsxLDUwXSwxNTo2LDE2OjcsMTc6OCwxODo5LDE5OjEwLDIwOjExLDIxOjEyLDIyOjEzLDIzOjE0LDI0OjE1LDI1OjE2LDI2OjE3LDI3OjE4LDMwOjY2LDMxOlsxLDc3XSwzMjo1MywzMzpbMSw3NV0sMzQ6WzEsNzZdLDM1OjI0LDM2OlsxLDU0XSwzNzpbMSw1NV0sMzg6WzEsNTZdLDM5OlsxLDU3XSw0MDpbMSw1OF0sNDE6WzEsNTldLDQyOjIzLDQ3OjY3LDQ4OlsxLDQ4XSw0OTpbMSw0OV0sNTA6WzEsMjldLDUzOjMwLDU0OlsxLDY0XSw1NTpbMSw2NV0sNjE6NTEsNjI6NTIsNjQ6MzgsNjY6MjUsNjc6MjYsNjg6MjcsNzk6WzEsNzRdLDgyOlsxLDQ1XSw4NjpbMSwyOF0sODc6WzEsNDddLDkyOlsxLDYyXSw5MzpbMSw2M10sOTQ6WzEsNjFdLDEwMDpbMSw0MF0sMTA0OlsxLDQ2XSwxMDU6WzEsNjBdLDEwNzo0MSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTExOjQyLDExMjpbMSw3MV0sMTEzOjQzLDExNDpbMSw3Ml0sMTE1OjczLDEyMzpbMSw0NF0sMTI4OjM5LDEyOTpbMSw2OF0sMTMxOlsxLDMxXSwxMzI6WzEsMzJdLDEzMzpbMSwzM10sMTM0OlsxLDM0XSwxMzU6WzEsMzVdLDEzNzpbMSwzNl0sMTM4OlsxLDM3XX0sezE6WzIsMTQ4XSw2OlsyLDE0OF0sMjg6WzIsMTQ4XSwyOTpbMiwxNDhdLDUyOlsyLDE0OF0sNTc6WzIsMTQ4XSw2MDpbMiwxNDhdLDY5OlsyLDE0OF0sNzA6WzIsMTQ4XSw3MTpbMiwxNDhdLDcyOlsyLDE0OF0sNzQ6WzIsMTQ4XSw3NjpbMiwxNDhdLDc3OlsyLDE0OF0sODE6WzIsMTQ4XSw4ODpbMiwxNDhdLDg5OlsyLDE0OF0sOTA6WzIsMTQ4XSw5NTpbMiwxNDhdLDk3OlsyLDE0OF0sMTA2OlsyLDE0OF0sMTA4OlsyLDE0OF0sMTA5OlsyLDE0OF0sMTEwOlsyLDE0OF0sMTE0OlsyLDE0OF0sMTIyOlsyLDE0OF0sMTMwOlsyLDE0OF0sMTMzOlsyLDE0OF0sMTM0OlsyLDE0OF0sMTM5OlsyLDE0OF0sMTQwOlsyLDE0OF0sMTQxOlsyLDE0OF0sMTQyOlsyLDE0OF0sMTQzOlsyLDE0OF0sMTQ0OlsyLDE0OF0sMTQ1OlsyLDE0OF19LHs2OlsxLDc4XSwyOTpbMSwyODZdfSx7NzoyODcsODoxMjIsOToxOSwxMDoyMCwxMTpbMSwyMV0sMTI6MjIsMTM6WzEsNTBdLDE1OjYsMTY6NywxNzo4LDE4OjksMTk6MTAsMjA6MTEsMjE6MTIsMjI6MTMsMjM6MTQsMjQ6MTUsMjU6MTYsMjY6MTcsMjc6MTgsMzA6NjYsMzE6WzEsNzddLDMyOjUzLDMzOlsxLDc1XSwzNDpbMSw3Nl0sMzU6MjQsMzY6WzEsNTRdLDM3OlsxLDU1XSwzODpbMSw1Nl0sMzk6WzEsNTddLDQwOlsxLDU4XSw0MTpbMSw1OV0sNDI6MjMsNDc6NjcsNDg6WzEsNDhdLDQ5OlsxLDQ5XSw1MDpbMSwyOV0sNTM6MzAsNTQ6WzEsNjRdLDU1OlsxLDY1XSw2MTo1MSw2Mjo1Miw2NDozOCw2NjoyNSw2NzoyNiw2ODoyNyw3OTpbMSw3NF0sODI6WzEsNDVdLDg2OlsxLDI4XSw4NzpbMSw0N10sOTI6WzEsNjJdLDkzOlsxLDYzXSw5NDpbMSw2MV0sMTAwOlsxLDQwXSwxMDQ6WzEsNDZdLDEwNTpbMSw2MF0sMTA3OjQxLDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTE6NDIsMTEyOlsxLDcxXSwxMTM6NDMsMTE0OlsxLDcyXSwxMTU6NzMsMTIzOlsxLDQ0XSwxMjg6MzksMTI5OlsxLDY4XSwxMzE6WzEsMzFdLDEzMjpbMSwzMl0sMTMzOlsxLDMzXSwxMzQ6WzEsMzRdLDEzNTpbMSwzNV0sMTM3OlsxLDM2XSwxMzg6WzEsMzddfSx7NjpbMiw3MV0sMTE6WzIsMTI0XSwxMzpbMiwxMjRdLDI4OlsyLDcxXSwzMTpbMiwxMjRdLDMzOlsyLDEyNF0sMzQ6WzIsMTI0XSwzNjpbMiwxMjRdLDM3OlsyLDEyNF0sMzg6WzIsMTI0XSwzOTpbMiwxMjRdLDQwOlsyLDEyNF0sNDE6WzIsMTI0XSw0ODpbMiwxMjRdLDQ5OlsyLDEyNF0sNTA6WzIsMTI0XSw1NDpbMiwxMjRdLDU1OlsyLDEyNF0sNTc6WzIsNzFdLDc5OlsyLDEyNF0sODI6WzIsMTI0XSw4NjpbMiwxMjRdLDg3OlsyLDEyNF0sOTI6WzIsMTI0XSw5MzpbMiwxMjRdLDk0OlsyLDEyNF0sOTU6WzIsNzFdLDEwMDpbMiwxMjRdLDEwNDpbMiwxMjRdLDEwNTpbMiwxMjRdLDEwODpbMiwxMjRdLDExMDpbMiwxMjRdLDExMjpbMiwxMjRdLDExNDpbMiwxMjRdLDEyMzpbMiwxMjRdLDEyOTpbMiwxMjRdLDEzMTpbMiwxMjRdLDEzMjpbMiwxMjRdLDEzMzpbMiwxMjRdLDEzNDpbMiwxMjRdLDEzNTpbMiwxMjRdLDEzNzpbMiwxMjRdLDEzODpbMiwxMjRdfSx7NjpbMSwyODldLDI4OlsxLDI5MF0sOTU6WzEsMjg4XX0sezY6WzIsNTddLDc6MjE1LDg6MTIyLDk6MTksMTA6MjAsMTE6WzEsMjFdLDEyOjIyLDEzOlsxLDUwXSwxNTo2LDE2OjcsMTc6OCwxODo5LDE5OjEwLDIwOjExLDIxOjEyLDIyOjEzLDIzOjE0LDI0OjE1LDI1OjE2LDI2OjE3LDI3OjE4LDI4OlsyLDU3XSwyOTpbMiw1N10sMzA6NjYsMzE6WzEsNzddLDMyOjUzLDMzOlsxLDc1XSwzNDpbMSw3Nl0sMzU6MjQsMzY6WzEsNTRdLDM3OlsxLDU1XSwzODpbMSw1Nl0sMzk6WzEsNTddLDQwOlsxLDU4XSw0MTpbMSw1OV0sNDI6MjMsNDc6NjcsNDg6WzEsNDhdLDQ5OlsxLDQ5XSw1MDpbMSwyOV0sNTM6MzAsNTQ6WzEsNjRdLDU1OlsxLDY1XSw2MDpbMSwxNjBdLDYxOjUxLDYyOjUyLDYzOjE1OSw2NDozOCw2NjoyNSw2NzoyNiw2ODoyNyw3OTpbMSw3NF0sODI6WzEsNDVdLDg2OlsxLDI4XSw4NzpbMSw0N10sOTA6WzIsNTddLDkyOlsxLDYyXSw5MzpbMSw2M10sOTQ6WzEsNjFdLDk1OlsyLDU3XSw5ODoyOTEsMTAwOlsxLDQwXSwxMDQ6WzEsNDZdLDEwNTpbMSw2MF0sMTA3OjQxLDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTE6NDIsMTEyOlsxLDcxXSwxMTM6NDMsMTE0OlsxLDcyXSwxMTU6NzMsMTIzOlsxLDQ0XSwxMjg6MzksMTI5OlsxLDY4XSwxMzE6WzEsMzFdLDEzMjpbMSwzMl0sMTMzOlsxLDMzXSwxMzQ6WzEsMzRdLDEzNTpbMSwzNV0sMTM3OlsxLDM2XSwxMzg6WzEsMzddfSx7NjpbMiw1Nl0sMjg6WzIsNTZdLDI5OlsyLDU2XSw1NjoyOTIsNTc6WzEsMjQ1XX0sezE6WzIsMTg4XSw2OlsyLDE4OF0sMjg6WzIsMTg4XSwyOTpbMiwxODhdLDUyOlsyLDE4OF0sNTc6WzIsMTg4XSw2MDpbMiwxODhdLDc2OlsyLDE4OF0sODE6WzIsMTg4XSw5MDpbMiwxODhdLDk1OlsyLDE4OF0sOTc6WzIsMTg4XSwxMDY6WzIsMTg4XSwxMDg6WzIsMTg4XSwxMDk6WzIsMTg4XSwxMTA6WzIsMTg4XSwxMTQ6WzIsMTg4XSwxMjI6WzIsMTg4XSwxMjU6WzIsMTg4XSwxMzA6WzIsMTg4XSwxMzM6WzIsMTg4XSwxMzQ6WzIsMTg4XSwxMzk6WzIsMTg4XSwxNDA6WzIsMTg4XSwxNDE6WzIsMTg4XSwxNDI6WzIsMTg4XSwxNDM6WzIsMTg4XSwxNDQ6WzIsMTg4XSwxNDU6WzIsMTg4XX0sezc6MjkzLDg6MTIyLDk6MTksMTA6MjAsMTE6WzEsMjFdLDEyOjIyLDEzOlsxLDUwXSwxNTo2LDE2OjcsMTc6OCwxODo5LDE5OjEwLDIwOjExLDIxOjEyLDIyOjEzLDIzOjE0LDI0OjE1LDI1OjE2LDI2OjE3LDI3OjE4LDMwOjY2LDMxOlsxLDc3XSwzMjo1MywzMzpbMSw3NV0sMzQ6WzEsNzZdLDM1OjI0LDM2OlsxLDU0XSwzNzpbMSw1NV0sMzg6WzEsNTZdLDM5OlsxLDU3XSw0MDpbMSw1OF0sNDE6WzEsNTldLDQyOjIzLDQ3OjY3LDQ4OlsxLDQ4XSw0OTpbMSw0OV0sNTA6WzEsMjldLDUzOjMwLDU0OlsxLDY0XSw1NTpbMSw2NV0sNjE6NTEsNjI6NTIsNjQ6MzgsNjY6MjUsNjc6MjYsNjg6MjcsNzk6WzEsNzRdLDgyOlsxLDQ1XSw4NjpbMSwyOF0sODc6WzEsNDddLDkyOlsxLDYyXSw5MzpbMSw2M10sOTQ6WzEsNjFdLDEwMDpbMSw0MF0sMTA0OlsxLDQ2XSwxMDU6WzEsNjBdLDEwNzo0MSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTExOjQyLDExMjpbMSw3MV0sMTEzOjQzLDExNDpbMSw3Ml0sMTE1OjczLDEyMzpbMSw0NF0sMTI4OjM5LDEyOTpbMSw2OF0sMTMxOlsxLDMxXSwxMzI6WzEsMzJdLDEzMzpbMSwzM10sMTM0OlsxLDM0XSwxMzU6WzEsMzVdLDEzNzpbMSwzNl0sMTM4OlsxLDM3XX0sezc6Mjk0LDg6MTIyLDk6MTksMTA6MjAsMTE6WzEsMjFdLDEyOjIyLDEzOlsxLDUwXSwxNTo2LDE2OjcsMTc6OCwxODo5LDE5OjEwLDIwOjExLDIxOjEyLDIyOjEzLDIzOjE0LDI0OjE1LDI1OjE2LDI2OjE3LDI3OjE4LDMwOjY2LDMxOlsxLDc3XSwzMjo1MywzMzpbMSw3NV0sMzQ6WzEsNzZdLDM1OjI0LDM2OlsxLDU0XSwzNzpbMSw1NV0sMzg6WzEsNTZdLDM5OlsxLDU3XSw0MDpbMSw1OF0sNDE6WzEsNTldLDQyOjIzLDQ3OjY3LDQ4OlsxLDQ4XSw0OTpbMSw0OV0sNTA6WzEsMjldLDUzOjMwLDU0OlsxLDY0XSw1NTpbMSw2NV0sNjE6NTEsNjI6NTIsNjQ6MzgsNjY6MjUsNjc6MjYsNjg6MjcsNzk6WzEsNzRdLDgyOlsxLDQ1XSw4NjpbMSwyOF0sODc6WzEsNDddLDkyOlsxLDYyXSw5MzpbMSw2M10sOTQ6WzEsNjFdLDEwMDpbMSw0MF0sMTA0OlsxLDQ2XSwxMDU6WzEsNjBdLDEwNzo0MSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTExOjQyLDExMjpbMSw3MV0sMTEzOjQzLDExNDpbMSw3Ml0sMTE1OjczLDEyMzpbMSw0NF0sMTI4OjM5LDEyOTpbMSw2OF0sMTMxOlsxLDMxXSwxMzI6WzEsMzJdLDEzMzpbMSwzM10sMTM0OlsxLDM0XSwxMzU6WzEsMzVdLDEzNzpbMSwzNl0sMTM4OlsxLDM3XX0sezEyMDpbMiwxNjZdLDEyMTpbMiwxNjZdfSx7MzA6MTcxLDMxOlsxLDc3XSw0NzoxNzIsNjE6MTczLDYyOjE3NCw3OTpbMSw3NF0sOTM6WzEsMTE3XSw5NDpbMSwxMThdLDExOToyOTV9LHsxOlsyLDE3M10sNjpbMiwxNzNdLDI4OlsyLDE3M10sMjk6WzIsMTczXSw1MjpbMiwxNzNdLDU3OlsyLDE3M10sNjA6WzIsMTczXSw3NjpbMiwxNzNdLDgxOlsyLDE3M10sOTA6WzIsMTczXSw5NTpbMiwxNzNdLDk3OlsyLDE3M10sMTA2OlsyLDE3M10sMTA3Ojg5LDEwODpbMiwxNzNdLDEwOTpbMSwyOTZdLDExMDpbMiwxNzNdLDExMzo5MCwxMTQ6WzIsMTczXSwxMTU6NzMsMTIyOlsxLDI5N10sMTMwOlsyLDE3M10sMTMzOlsxLDgxXSwxMzQ6WzEsODBdLDEzOTpbMSw3OV0sMTQwOlsxLDgyXSwxNDE6WzEsODNdLDE0MjpbMSw4NF0sMTQzOlsxLDg1XSwxNDQ6WzEsODZdLDE0NTpbMSw4N119LHsxOlsyLDE3NF0sNjpbMiwxNzRdLDI4OlsyLDE3NF0sMjk6WzIsMTc0XSw1MjpbMiwxNzRdLDU3OlsyLDE3NF0sNjA6WzIsMTc0XSw3NjpbMiwxNzRdLDgxOlsyLDE3NF0sOTA6WzIsMTc0XSw5NTpbMiwxNzRdLDk3OlsyLDE3NF0sMTA2OlsyLDE3NF0sMTA3Ojg5LDEwODpbMiwxNzRdLDEwOTpbMSwyOThdLDExMDpbMiwxNzRdLDExMzo5MCwxMTQ6WzIsMTc0XSwxMTU6NzMsMTIyOlsyLDE3NF0sMTMwOlsyLDE3NF0sMTMzOlsxLDgxXSwxMzQ6WzEsODBdLDEzOTpbMSw3OV0sMTQwOlsxLDgyXSwxNDE6WzEsODNdLDE0MjpbMSw4NF0sMTQzOlsxLDg1XSwxNDQ6WzEsODZdLDE0NTpbMSw4N119LHs2OlsxLDMwMF0sMjg6WzEsMzAxXSw4MTpbMSwyOTldfSx7NjpbMiw1N10sMTA6MTgxLDI4OlsyLDU3XSwyOTpbMiw1N10sMzA6MTgyLDMxOlsxLDc3XSwzMjoxODMsMzM6WzEsNzVdLDM0OlsxLDc2XSw0NDozMDIsNDU6MTgwLDQ3OjE4NCw0OTpbMSw0OV0sODE6WzIsNTddLDkzOlsxLDExN119LHs3OjMwMyw4OjEyMiw5OjE5LDEwOjIwLDExOlsxLDIxXSwxMjoyMiwxMzpbMSw1MF0sMTU6NiwxNjo3LDE3OjgsMTg6OSwxOToxMCwyMDoxMSwyMToxMiwyMjoxMywyMzoxNCwyNDoxNSwyNToxNiwyNjoxNywyNzoxOCwyODpbMSwzMDRdLDMwOjY2LDMxOlsxLDc3XSwzMjo1MywzMzpbMSw3NV0sMzQ6WzEsNzZdLDM1OjI0LDM2OlsxLDU0XSwzNzpbMSw1NV0sMzg6WzEsNTZdLDM5OlsxLDU3XSw0MDpbMSw1OF0sNDE6WzEsNTldLDQyOjIzLDQ3OjY3LDQ4OlsxLDQ4XSw0OTpbMSw0OV0sNTA6WzEsMjldLDUzOjMwLDU0OlsxLDY0XSw1NTpbMSw2NV0sNjE6NTEsNjI6NTIsNjQ6MzgsNjY6MjUsNjc6MjYsNjg6MjcsNzk6WzEsNzRdLDgyOlsxLDQ1XSw4NjpbMSwyOF0sODc6WzEsNDddLDkyOlsxLDYyXSw5MzpbMSw2M10sOTQ6WzEsNjFdLDEwMDpbMSw0MF0sMTA0OlsxLDQ2XSwxMDU6WzEsNjBdLDEwNzo0MSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTExOjQyLDExMjpbMSw3MV0sMTEzOjQzLDExNDpbMSw3Ml0sMTE1OjczLDEyMzpbMSw0NF0sMTI4OjM5LDEyOTpbMSw2OF0sMTMxOlsxLDMxXSwxMzI6WzEsMzJdLDEzMzpbMSwzM10sMTM0OlsxLDM0XSwxMzU6WzEsMzVdLDEzNzpbMSwzNl0sMTM4OlsxLDM3XX0sezE6WzIsOTFdLDY6WzIsOTFdLDI4OlsyLDkxXSwyOTpbMiw5MV0sNDM6WzIsOTFdLDUyOlsyLDkxXSw1NzpbMiw5MV0sNjA6WzIsOTFdLDY5OlsyLDkxXSw3MDpbMiw5MV0sNzE6WzIsOTFdLDcyOlsyLDkxXSw3NDpbMiw5MV0sNzY6WzIsOTFdLDc3OlsyLDkxXSw4MTpbMiw5MV0sODM6WzIsOTFdLDg4OlsyLDkxXSw4OTpbMiw5MV0sOTA6WzIsOTFdLDk1OlsyLDkxXSw5NzpbMiw5MV0sMTA2OlsyLDkxXSwxMDg6WzIsOTFdLDEwOTpbMiw5MV0sMTEwOlsyLDkxXSwxMTQ6WzIsOTFdLDEyMjpbMiw5MV0sMTMwOlsyLDkxXSwxMzM6WzIsOTFdLDEzNDpbMiw5MV0sMTM3OlsyLDkxXSwxMzg6WzIsOTFdLDEzOTpbMiw5MV0sMTQwOlsyLDkxXSwxNDE6WzIsOTFdLDE0MjpbMiw5MV0sMTQzOlsyLDkxXSwxNDQ6WzIsOTFdLDE0NTpbMiw5MV0sMTQ2OlsyLDkxXX0sezc6MzA1LDg6MTIyLDk6MTksMTA6MjAsMTE6WzEsMjFdLDEyOjIyLDEzOlsxLDUwXSwxNTo2LDE2OjcsMTc6OCwxODo5LDE5OjEwLDIwOjExLDIxOjEyLDIyOjEzLDIzOjE0LDI0OjE1LDI1OjE2LDI2OjE3LDI3OjE4LDMwOjY2LDMxOlsxLDc3XSwzMjo1MywzMzpbMSw3NV0sMzQ6WzEsNzZdLDM1OjI0LDM2OlsxLDU0XSwzNzpbMSw1NV0sMzg6WzEsNTZdLDM5OlsxLDU3XSw0MDpbMSw1OF0sNDE6WzEsNTldLDQyOjIzLDQ3OjY3LDQ4OlsxLDQ4XSw0OTpbMSw0OV0sNTA6WzEsMjldLDUzOjMwLDU0OlsxLDY0XSw1NTpbMSw2NV0sNjE6NTEsNjI6NTIsNjQ6MzgsNjY6MjUsNjc6MjYsNjg6MjcsNzY6WzIsMTI3XSw3OTpbMSw3NF0sODI6WzEsNDVdLDg2OlsxLDI4XSw4NzpbMSw0N10sOTI6WzEsNjJdLDkzOlsxLDYzXSw5NDpbMSw2MV0sMTAwOlsxLDQwXSwxMDQ6WzEsNDZdLDEwNTpbMSw2MF0sMTA3OjQxLDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTE6NDIsMTEyOlsxLDcxXSwxMTM6NDMsMTE0OlsxLDcyXSwxMTU6NzMsMTIzOlsxLDQ0XSwxMjg6MzksMTI5OlsxLDY4XSwxMzE6WzEsMzFdLDEzMjpbMSwzMl0sMTMzOlsxLDMzXSwxMzQ6WzEsMzRdLDEzNTpbMSwzNV0sMTM3OlsxLDM2XSwxMzg6WzEsMzddfSx7NzY6WzIsMTI4XSwxMDc6ODksMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMzo5MCwxMTQ6WzEsNzJdLDExNTo3MywxMzA6WzEsODhdLDEzMzpbMSw4MV0sMTM0OlsxLDgwXSwxMzk6WzEsNzldLDE0MDpbMSw4Ml0sMTQxOlsxLDgzXSwxNDI6WzEsODRdLDE0MzpbMSw4NV0sMTQ0OlsxLDg2XSwxNDU6WzEsODddfSx7MTpbMiw0MF0sNjpbMiw0MF0sMjg6WzIsNDBdLDI5OlsyLDQwXSw1MjpbMiw0MF0sNTc6WzIsNDBdLDYwOlsyLDQwXSw3NjpbMiw0MF0sODE6WzIsNDBdLDkwOlsyLDQwXSw5NTpbMiw0MF0sOTc6WzIsNDBdLDEwNjpbMiw0MF0sMTA3Ojg5LDEwODpbMiw0MF0sMTA5OlsyLDQwXSwxMTA6WzIsNDBdLDExMzo5MCwxMTQ6WzIsNDBdLDExNTo3MywxMjI6WzIsNDBdLDEzMDpbMiw0MF0sMTMzOlsxLDgxXSwxMzQ6WzEsODBdLDEzOTpbMSw3OV0sMTQwOlsxLDgyXSwxNDE6WzEsODNdLDE0MjpbMSw4NF0sMTQzOlsxLDg1XSwxNDQ6WzEsODZdLDE0NTpbMSw4N119LHsyOTpbMSwzMDZdLDEwNzo4OSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTEzOjkwLDExNDpbMSw3Ml0sMTE1OjczLDEzMDpbMSw4OF0sMTMzOlsxLDgxXSwxMzQ6WzEsODBdLDEzOTpbMSw3OV0sMTQwOlsxLDgyXSwxNDE6WzEsODNdLDE0MjpbMSw4NF0sMTQzOlsxLDg1XSwxNDQ6WzEsODZdLDE0NTpbMSw4N119LHs2OlsxLDI4OV0sMjg6WzEsMjkwXSw5MDpbMSwzMDddfSx7NjpbMiw3MV0sMjg6WzIsNzFdLDI5OlsyLDcxXSw1NzpbMiw3MV0sOTA6WzIsNzFdLDk1OlsyLDcxXX0sezE0OjMwOCwyODpbMSwxMjBdfSx7NjpbMiw2MF0sMjg6WzIsNjBdLDI5OlsyLDYwXSw1MjpbMiw2MF0sNTc6WzIsNjBdfSx7MzA6MTEzLDMxOlsxLDc3XSw0NzoxMTQsNTg6MzA5LDU5OjExMSw2MDpbMSwxMTJdLDYxOjExNSw2MjoxMTYsNzk6WzEsNzRdLDkzOlsxLDExN10sOTQ6WzEsMTE4XX0sezY6WzIsNThdLDI4OlsyLDU4XSwyOTpbMiw1OF0sMzA6MTEzLDMxOlsxLDc3XSw0NzoxMTQsNTE6MzEwLDU3OlsyLDU4XSw1ODoxMTAsNTk6MTExLDYwOlsxLDExMl0sNjE6MTE1LDYyOjExNiw3OTpbMSw3NF0sOTM6WzEsMTE3XSw5NDpbMSwxMThdfSx7NjpbMiw2NV0sMjg6WzIsNjVdLDI5OlsyLDY1XSw1MjpbMiw2NV0sNTc6WzIsNjVdLDEwNzo4OSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTEzOjkwLDExNDpbMSw3Ml0sMTE1OjczLDEzMDpbMSw4OF0sMTMzOlsxLDgxXSwxMzQ6WzEsODBdLDEzOTpbMSw3OV0sMTQwOlsxLDgyXSwxNDE6WzEsODNdLDE0MjpbMSw4NF0sMTQzOlsxLDg1XSwxNDQ6WzEsODZdLDE0NTpbMSw4N119LHsxOlsyLDI4XSw2OlsyLDI4XSwyODpbMiwyOF0sMjk6WzIsMjhdLDUyOlsyLDI4XSw1NzpbMiwyOF0sNjA6WzIsMjhdLDc2OlsyLDI4XSw4MTpbMiwyOF0sOTA6WzIsMjhdLDk1OlsyLDI4XSw5NzpbMiwyOF0sMTAyOlsyLDI4XSwxMDM6WzIsMjhdLDEwNjpbMiwyOF0sMTA4OlsyLDI4XSwxMDk6WzIsMjhdLDExMDpbMiwyOF0sMTE0OlsyLDI4XSwxMjI6WzIsMjhdLDEyNTpbMiwyOF0sMTI3OlsyLDI4XSwxMzA6WzIsMjhdLDEzMzpbMiwyOF0sMTM0OlsyLDI4XSwxMzk6WzIsMjhdLDE0MDpbMiwyOF0sMTQxOlsyLDI4XSwxNDI6WzIsMjhdLDE0MzpbMiwyOF0sMTQ0OlsyLDI4XSwxNDU6WzIsMjhdfSx7Mjk6WzEsMzExXSwxMDc6ODksMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMzo5MCwxMTQ6WzEsNzJdLDExNTo3MywxMzA6WzEsODhdLDEzMzpbMSw4MV0sMTM0OlsxLDgwXSwxMzk6WzEsNzldLDE0MDpbMSw4Ml0sMTQxOlsxLDgzXSwxNDI6WzEsODRdLDE0MzpbMSw4NV0sMTQ0OlsxLDg2XSwxNDU6WzEsODddfSx7MTpbMiwyMTZdLDY6WzIsMjE2XSwyODpbMiwyMTZdLDI5OlsyLDIxNl0sNTI6WzIsMjE2XSw1NzpbMiwyMTZdLDYwOlsyLDIxNl0sNzY6WzIsMjE2XSw4MTpbMiwyMTZdLDkwOlsyLDIxNl0sOTU6WzIsMjE2XSw5NzpbMiwyMTZdLDEwNjpbMiwyMTZdLDEwNzo4OSwxMDg6WzIsMjE2XSwxMDk6WzIsMjE2XSwxMTA6WzIsMjE2XSwxMTM6OTAsMTE0OlsyLDIxNl0sMTE1OjczLDEyMjpbMiwyMTZdLDEzMDpbMiwyMTZdLDEzMzpbMSw4MV0sMTM0OlsxLDgwXSwxMzk6WzEsNzldLDE0MDpbMSw4Ml0sMTQxOlsxLDgzXSwxNDI6WzEsODRdLDE0MzpbMSw4NV0sMTQ0OlsxLDg2XSwxNDU6WzEsODddfSx7MTQ6MzEyLDI4OlsxLDEyMF0sMTA3Ojg5LDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTM6OTAsMTE0OlsxLDcyXSwxMTU6NzMsMTMwOlsxLDg4XSwxMzM6WzEsODFdLDEzNDpbMSw4MF0sMTM5OlsxLDc5XSwxNDA6WzEsODJdLDE0MTpbMSw4M10sMTQyOlsxLDg0XSwxNDM6WzEsODVdLDE0NDpbMSw4Nl0sMTQ1OlsxLDg3XX0sezE0OjMxMywyODpbMSwxMjBdfSx7MTpbMiwxNDJdLDY6WzIsMTQyXSwyODpbMiwxNDJdLDI5OlsyLDE0Ml0sNTI6WzIsMTQyXSw1NzpbMiwxNDJdLDYwOlsyLDE0Ml0sNzY6WzIsMTQyXSw4MTpbMiwxNDJdLDkwOlsyLDE0Ml0sOTU6WzIsMTQyXSw5NzpbMiwxNDJdLDEwNjpbMiwxNDJdLDEwODpbMiwxNDJdLDEwOTpbMiwxNDJdLDExMDpbMiwxNDJdLDExNDpbMiwxNDJdLDEyMjpbMiwxNDJdLDEzMDpbMiwxNDJdLDEzMzpbMiwxNDJdLDEzNDpbMiwxNDJdLDEzOTpbMiwxNDJdLDE0MDpbMiwxNDJdLDE0MTpbMiwxNDJdLDE0MjpbMiwxNDJdLDE0MzpbMiwxNDJdLDE0NDpbMiwxNDJdLDE0NTpbMiwxNDJdfSx7MTQ6MzE0LDI4OlsxLDEyMF19LHsxNDozMTUsMjg6WzEsMTIwXX0sezE6WzIsMTQ2XSw2OlsyLDE0Nl0sMjg6WzIsMTQ2XSwyOTpbMiwxNDZdLDUyOlsyLDE0Nl0sNTc6WzIsMTQ2XSw2MDpbMiwxNDZdLDc2OlsyLDE0Nl0sODE6WzIsMTQ2XSw5MDpbMiwxNDZdLDk1OlsyLDE0Nl0sOTc6WzIsMTQ2XSwxMDI6WzIsMTQ2XSwxMDY6WzIsMTQ2XSwxMDg6WzIsMTQ2XSwxMDk6WzIsMTQ2XSwxMTA6WzIsMTQ2XSwxMTQ6WzIsMTQ2XSwxMjI6WzIsMTQ2XSwxMzA6WzIsMTQ2XSwxMzM6WzIsMTQ2XSwxMzQ6WzIsMTQ2XSwxMzk6WzIsMTQ2XSwxNDA6WzIsMTQ2XSwxNDE6WzIsMTQ2XSwxNDI6WzIsMTQ2XSwxNDM6WzIsMTQ2XSwxNDQ6WzIsMTQ2XSwxNDU6WzIsMTQ2XX0sezI5OlsxLDMxNl0sMTI1OlsxLDMxN10sMTI2OjI4MSwxMjc6WzEsMjM2XX0sezE6WzIsMTgyXSw2OlsyLDE4Ml0sMjg6WzIsMTgyXSwyOTpbMiwxODJdLDUyOlsyLDE4Ml0sNTc6WzIsMTgyXSw2MDpbMiwxODJdLDc2OlsyLDE4Ml0sODE6WzIsMTgyXSw5MDpbMiwxODJdLDk1OlsyLDE4Ml0sOTc6WzIsMTgyXSwxMDY6WzIsMTgyXSwxMDg6WzIsMTgyXSwxMDk6WzIsMTgyXSwxMTA6WzIsMTgyXSwxMTQ6WzIsMTgyXSwxMjI6WzIsMTgyXSwxMzA6WzIsMTgyXSwxMzM6WzIsMTgyXSwxMzQ6WzIsMTgyXSwxMzk6WzIsMTgyXSwxNDA6WzIsMTgyXSwxNDE6WzIsMTgyXSwxNDI6WzIsMTgyXSwxNDM6WzIsMTgyXSwxNDQ6WzIsMTgyXSwxNDU6WzIsMTgyXX0sezE0OjMxOCwyODpbMSwxMjBdfSx7Mjk6WzIsMTg1XSwxMjU6WzIsMTg1XSwxMjc6WzIsMTg1XX0sezE0OjMxOSwyODpbMSwxMjBdLDU3OlsxLDMyMF19LHsyODpbMiwxMzhdLDU3OlsyLDEzOF0sMTA3Ojg5LDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTM6OTAsMTE0OlsxLDcyXSwxMTU6NzMsMTMwOlsxLDg4XSwxMzM6WzEsODFdLDEzNDpbMSw4MF0sMTM5OlsxLDc5XSwxNDA6WzEsODJdLDE0MTpbMSw4M10sMTQyOlsxLDg0XSwxNDM6WzEsODVdLDE0NDpbMSw4Nl0sMTQ1OlsxLDg3XX0sezE6WzIsMTA0XSw2OlsyLDEwNF0sMjg6WzIsMTA0XSwyOTpbMiwxMDRdLDUyOlsyLDEwNF0sNTc6WzIsMTA0XSw2MDpbMiwxMDRdLDc2OlsyLDEwNF0sODE6WzIsMTA0XSw5MDpbMiwxMDRdLDk1OlsyLDEwNF0sOTc6WzIsMTA0XSwxMDY6WzIsMTA0XSwxMDg6WzIsMTA0XSwxMDk6WzIsMTA0XSwxMTA6WzIsMTA0XSwxMTQ6WzIsMTA0XSwxMjI6WzIsMTA0XSwxMzA6WzIsMTA0XSwxMzM6WzIsMTA0XSwxMzQ6WzIsMTA0XSwxMzk6WzIsMTA0XSwxNDA6WzIsMTA0XSwxNDE6WzIsMTA0XSwxNDI6WzIsMTA0XSwxNDM6WzIsMTA0XSwxNDQ6WzIsMTA0XSwxNDU6WzIsMTA0XX0sezE6WzIsMTA3XSw2OlsyLDEwN10sMTQ6MzIxLDI4OlsxLDEyMF0sMjk6WzIsMTA3XSw1MjpbMiwxMDddLDU3OlsyLDEwN10sNjA6WzIsMTA3XSw3NjpbMiwxMDddLDgxOlsyLDEwN10sOTA6WzIsMTA3XSw5NTpbMiwxMDddLDk3OlsyLDEwN10sMTA2OlsyLDEwN10sMTA3Ojg5LDEwODpbMSw2OV0sMTA5OlsyLDEwN10sMTEwOlsxLDcwXSwxMTM6OTAsMTE0OlsxLDcyXSwxMTU6NzMsMTIyOlsyLDEwN10sMTMwOlsyLDEwN10sMTMzOlsxLDgxXSwxMzQ6WzEsODBdLDEzOTpbMSw3OV0sMTQwOlsxLDgyXSwxNDE6WzEsODNdLDE0MjpbMSw4NF0sMTQzOlsxLDg1XSwxNDQ6WzEsODZdLDE0NTpbMSw4N119LHsxMDY6WzEsMzIyXX0sezk1OlsxLDMyM10sMTA3Ojg5LDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTM6OTAsMTE0OlsxLDcyXSwxMTU6NzMsMTMwOlsxLDg4XSwxMzM6WzEsODFdLDEzNDpbMSw4MF0sMTM5OlsxLDc5XSwxNDA6WzEsODJdLDE0MTpbMSw4M10sMTQyOlsxLDg0XSwxNDM6WzEsODVdLDE0NDpbMSw4Nl0sMTQ1OlsxLDg3XX0sezE6WzIsMTIyXSw2OlsyLDEyMl0sMjg6WzIsMTIyXSwyOTpbMiwxMjJdLDQzOlsyLDEyMl0sNTI6WzIsMTIyXSw1NzpbMiwxMjJdLDYwOlsyLDEyMl0sNjk6WzIsMTIyXSw3MDpbMiwxMjJdLDcxOlsyLDEyMl0sNzI6WzIsMTIyXSw3NDpbMiwxMjJdLDc2OlsyLDEyMl0sNzc6WzIsMTIyXSw4MTpbMiwxMjJdLDg4OlsyLDEyMl0sODk6WzIsMTIyXSw5MDpbMiwxMjJdLDk1OlsyLDEyMl0sOTc6WzIsMTIyXSwxMDY6WzIsMTIyXSwxMDg6WzIsMTIyXSwxMDk6WzIsMTIyXSwxMTA6WzIsMTIyXSwxMTQ6WzIsMTIyXSwxMjA6WzIsMTIyXSwxMjE6WzIsMTIyXSwxMjI6WzIsMTIyXSwxMzA6WzIsMTIyXSwxMzM6WzIsMTIyXSwxMzQ6WzIsMTIyXSwxMzk6WzIsMTIyXSwxNDA6WzIsMTIyXSwxNDE6WzIsMTIyXSwxNDI6WzIsMTIyXSwxNDM6WzIsMTIyXSwxNDQ6WzIsMTIyXSwxNDU6WzIsMTIyXX0sezc6MjE1LDg6MTIyLDk6MTksMTA6MjAsMTE6WzEsMjFdLDEyOjIyLDEzOlsxLDUwXSwxNTo2LDE2OjcsMTc6OCwxODo5LDE5OjEwLDIwOjExLDIxOjEyLDIyOjEzLDIzOjE0LDI0OjE1LDI1OjE2LDI2OjE3LDI3OjE4LDMwOjY2LDMxOlsxLDc3XSwzMjo1MywzMzpbMSw3NV0sMzQ6WzEsNzZdLDM1OjI0LDM2OlsxLDU0XSwzNzpbMSw1NV0sMzg6WzEsNTZdLDM5OlsxLDU3XSw0MDpbMSw1OF0sNDE6WzEsNTldLDQyOjIzLDQ3OjY3LDQ4OlsxLDQ4XSw0OTpbMSw0OV0sNTA6WzEsMjldLDUzOjMwLDU0OlsxLDY0XSw1NTpbMSw2NV0sNjA6WzEsMTYwXSw2MTo1MSw2Mjo1Miw2MzoxNTksNjQ6MzgsNjY6MjUsNjc6MjYsNjg6MjcsNzk6WzEsNzRdLDgyOlsxLDQ1XSw4NjpbMSwyOF0sODc6WzEsNDddLDkyOlsxLDYyXSw5MzpbMSw2M10sOTQ6WzEsNjFdLDk4OjMyNCwxMDA6WzEsNDBdLDEwNDpbMSw0Nl0sMTA1OlsxLDYwXSwxMDc6NDEsMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMTo0MiwxMTI6WzEsNzFdLDExMzo0MywxMTQ6WzEsNzJdLDExNTo3MywxMjM6WzEsNDRdLDEyODozOSwxMjk6WzEsNjhdLDEzMTpbMSwzMV0sMTMyOlsxLDMyXSwxMzM6WzEsMzNdLDEzNDpbMSwzNF0sMTM1OlsxLDM1XSwxMzc6WzEsMzZdLDEzODpbMSwzN119LHs3OjIxNSw4OjEyMiw5OjE5LDEwOjIwLDExOlsxLDIxXSwxMjoyMiwxMzpbMSw1MF0sMTU6NiwxNjo3LDE3OjgsMTg6OSwxOToxMCwyMDoxMSwyMToxMiwyMjoxMywyMzoxNCwyNDoxNSwyNToxNiwyNjoxNywyNzoxOCwyODpbMSwxNThdLDMwOjY2LDMxOlsxLDc3XSwzMjo1MywzMzpbMSw3NV0sMzQ6WzEsNzZdLDM1OjI0LDM2OlsxLDU0XSwzNzpbMSw1NV0sMzg6WzEsNTZdLDM5OlsxLDU3XSw0MDpbMSw1OF0sNDE6WzEsNTldLDQyOjIzLDQ3OjY3LDQ4OlsxLDQ4XSw0OTpbMSw0OV0sNTA6WzEsMjldLDUzOjMwLDU0OlsxLDY0XSw1NTpbMSw2NV0sNjA6WzEsMTYwXSw2MTo1MSw2Mjo1Miw2MzoxNTksNjQ6MzgsNjY6MjUsNjc6MjYsNjg6MjcsNzk6WzEsNzRdLDgyOlsxLDQ1XSw4NjpbMSwyOF0sODc6WzEsNDddLDkxOjMyNSw5MjpbMSw2Ml0sOTM6WzEsNjNdLDk0OlsxLDYxXSw5ODoxNTcsMTAwOlsxLDQwXSwxMDQ6WzEsNDZdLDEwNTpbMSw2MF0sMTA3OjQxLDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTE6NDIsMTEyOlsxLDcxXSwxMTM6NDMsMTE0OlsxLDcyXSwxMTU6NzMsMTIzOlsxLDQ0XSwxMjg6MzksMTI5OlsxLDY4XSwxMzE6WzEsMzFdLDEzMjpbMSwzMl0sMTMzOlsxLDMzXSwxMzQ6WzEsMzRdLDEzNTpbMSwzNV0sMTM3OlsxLDM2XSwxMzg6WzEsMzddfSx7NjpbMiwxMzFdLDI4OlsyLDEzMV0sMjk6WzIsMTMxXSw1NzpbMiwxMzFdLDkwOlsyLDEzMV0sOTU6WzIsMTMxXX0sezY6WzEsMjg5XSwyODpbMSwyOTBdLDI5OlsxLDMyNl19LHsxOlsyLDE1MV0sNjpbMiwxNTFdLDI4OlsyLDE1MV0sMjk6WzIsMTUxXSw1MjpbMiwxNTFdLDU3OlsyLDE1MV0sNjA6WzIsMTUxXSw3NjpbMiwxNTFdLDgxOlsyLDE1MV0sOTA6WzIsMTUxXSw5NTpbMiwxNTFdLDk3OlsyLDE1MV0sMTA2OlsyLDE1MV0sMTA3Ojg5LDEwODpbMSw2OV0sMTA5OlsyLDE1MV0sMTEwOlsxLDcwXSwxMTM6OTAsMTE0OlsxLDcyXSwxMTU6NzMsMTIyOlsyLDE1MV0sMTMwOlsyLDE1MV0sMTMzOlsxLDgxXSwxMzQ6WzEsODBdLDEzOTpbMSw3OV0sMTQwOlsxLDgyXSwxNDE6WzEsODNdLDE0MjpbMSw4NF0sMTQzOlsxLDg1XSwxNDQ6WzEsODZdLDE0NTpbMSw4N119LHsxOlsyLDE1M10sNjpbMiwxNTNdLDI4OlsyLDE1M10sMjk6WzIsMTUzXSw1MjpbMiwxNTNdLDU3OlsyLDE1M10sNjA6WzIsMTUzXSw3NjpbMiwxNTNdLDgxOlsyLDE1M10sOTA6WzIsMTUzXSw5NTpbMiwxNTNdLDk3OlsyLDE1M10sMTA2OlsyLDE1M10sMTA3Ojg5LDEwODpbMSw2OV0sMTA5OlsyLDE1M10sMTEwOlsxLDcwXSwxMTM6OTAsMTE0OlsxLDcyXSwxMTU6NzMsMTIyOlsyLDE1M10sMTMwOlsyLDE1M10sMTMzOlsxLDgxXSwxMzQ6WzEsODBdLDEzOTpbMSw3OV0sMTQwOlsxLDgyXSwxNDE6WzEsODNdLDE0MjpbMSw4NF0sMTQzOlsxLDg1XSwxNDQ6WzEsODZdLDE0NTpbMSw4N119LHsxMjA6WzIsMTcyXSwxMjE6WzIsMTcyXX0sezc6MzI3LDg6MTIyLDk6MTksMTA6MjAsMTE6WzEsMjFdLDEyOjIyLDEzOlsxLDUwXSwxNTo2LDE2OjcsMTc6OCwxODo5LDE5OjEwLDIwOjExLDIxOjEyLDIyOjEzLDIzOjE0LDI0OjE1LDI1OjE2LDI2OjE3LDI3OjE4LDMwOjY2LDMxOlsxLDc3XSwzMjo1MywzMzpbMSw3NV0sMzQ6WzEsNzZdLDM1OjI0LDM2OlsxLDU0XSwzNzpbMSw1NV0sMzg6WzEsNTZdLDM5OlsxLDU3XSw0MDpbMSw1OF0sNDE6WzEsNTldLDQyOjIzLDQ3OjY3LDQ4OlsxLDQ4XSw0OTpbMSw0OV0sNTA6WzEsMjldLDUzOjMwLDU0OlsxLDY0XSw1NTpbMSw2NV0sNjE6NTEsNjI6NTIsNjQ6MzgsNjY6MjUsNjc6MjYsNjg6MjcsNzk6WzEsNzRdLDgyOlsxLDQ1XSw4NjpbMSwyOF0sODc6WzEsNDddLDkyOlsxLDYyXSw5MzpbMSw2M10sOTQ6WzEsNjFdLDEwMDpbMSw0MF0sMTA0OlsxLDQ2XSwxMDU6WzEsNjBdLDEwNzo0MSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTExOjQyLDExMjpbMSw3MV0sMTEzOjQzLDExNDpbMSw3Ml0sMTE1OjczLDEyMzpbMSw0NF0sMTI4OjM5LDEyOTpbMSw2OF0sMTMxOlsxLDMxXSwxMzI6WzEsMzJdLDEzMzpbMSwzM10sMTM0OlsxLDM0XSwxMzU6WzEsMzVdLDEzNzpbMSwzNl0sMTM4OlsxLDM3XX0sezc6MzI4LDg6MTIyLDk6MTksMTA6MjAsMTE6WzEsMjFdLDEyOjIyLDEzOlsxLDUwXSwxNTo2LDE2OjcsMTc6OCwxODo5LDE5OjEwLDIwOjExLDIxOjEyLDIyOjEzLDIzOjE0LDI0OjE1LDI1OjE2LDI2OjE3LDI3OjE4LDMwOjY2LDMxOlsxLDc3XSwzMjo1MywzMzpbMSw3NV0sMzQ6WzEsNzZdLDM1OjI0LDM2OlsxLDU0XSwzNzpbMSw1NV0sMzg6WzEsNTZdLDM5OlsxLDU3XSw0MDpbMSw1OF0sNDE6WzEsNTldLDQyOjIzLDQ3OjY3LDQ4OlsxLDQ4XSw0OTpbMSw0OV0sNTA6WzEsMjldLDUzOjMwLDU0OlsxLDY0XSw1NTpbMSw2NV0sNjE6NTEsNjI6NTIsNjQ6MzgsNjY6MjUsNjc6MjYsNjg6MjcsNzk6WzEsNzRdLDgyOlsxLDQ1XSw4NjpbMSwyOF0sODc6WzEsNDddLDkyOlsxLDYyXSw5MzpbMSw2M10sOTQ6WzEsNjFdLDEwMDpbMSw0MF0sMTA0OlsxLDQ2XSwxMDU6WzEsNjBdLDEwNzo0MSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTExOjQyLDExMjpbMSw3MV0sMTEzOjQzLDExNDpbMSw3Ml0sMTE1OjczLDEyMzpbMSw0NF0sMTI4OjM5LDEyOTpbMSw2OF0sMTMxOlsxLDMxXSwxMzI6WzEsMzJdLDEzMzpbMSwzM10sMTM0OlsxLDM0XSwxMzU6WzEsMzVdLDEzNzpbMSwzNl0sMTM4OlsxLDM3XX0sezc6MzI5LDg6MTIyLDk6MTksMTA6MjAsMTE6WzEsMjFdLDEyOjIyLDEzOlsxLDUwXSwxNTo2LDE2OjcsMTc6OCwxODo5LDE5OjEwLDIwOjExLDIxOjEyLDIyOjEzLDIzOjE0LDI0OjE1LDI1OjE2LDI2OjE3LDI3OjE4LDMwOjY2LDMxOlsxLDc3XSwzMjo1MywzMzpbMSw3NV0sMzQ6WzEsNzZdLDM1OjI0LDM2OlsxLDU0XSwzNzpbMSw1NV0sMzg6WzEsNTZdLDM5OlsxLDU3XSw0MDpbMSw1OF0sNDE6WzEsNTldLDQyOjIzLDQ3OjY3LDQ4OlsxLDQ4XSw0OTpbMSw0OV0sNTA6WzEsMjldLDUzOjMwLDU0OlsxLDY0XSw1NTpbMSw2NV0sNjE6NTEsNjI6NTIsNjQ6MzgsNjY6MjUsNjc6MjYsNjg6MjcsNzk6WzEsNzRdLDgyOlsxLDQ1XSw4NjpbMSwyOF0sODc6WzEsNDddLDkyOlsxLDYyXSw5MzpbMSw2M10sOTQ6WzEsNjFdLDEwMDpbMSw0MF0sMTA0OlsxLDQ2XSwxMDU6WzEsNjBdLDEwNzo0MSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTExOjQyLDExMjpbMSw3MV0sMTEzOjQzLDExNDpbMSw3Ml0sMTE1OjczLDEyMzpbMSw0NF0sMTI4OjM5LDEyOTpbMSw2OF0sMTMxOlsxLDMxXSwxMzI6WzEsMzJdLDEzMzpbMSwzM10sMTM0OlsxLDM0XSwxMzU6WzEsMzVdLDEzNzpbMSwzNl0sMTM4OlsxLDM3XX0sezE6WzIsOTVdLDY6WzIsOTVdLDI4OlsyLDk1XSwyOTpbMiw5NV0sNDM6WzIsOTVdLDUyOlsyLDk1XSw1NzpbMiw5NV0sNjA6WzIsOTVdLDY5OlsyLDk1XSw3MDpbMiw5NV0sNzE6WzIsOTVdLDcyOlsyLDk1XSw3NDpbMiw5NV0sNzY6WzIsOTVdLDc3OlsyLDk1XSw4MTpbMiw5NV0sODg6WzIsOTVdLDg5OlsyLDk1XSw5MDpbMiw5NV0sOTU6WzIsOTVdLDk3OlsyLDk1XSwxMDY6WzIsOTVdLDEwODpbMiw5NV0sMTA5OlsyLDk1XSwxMTA6WzIsOTVdLDExNDpbMiw5NV0sMTIwOlsyLDk1XSwxMjE6WzIsOTVdLDEyMjpbMiw5NV0sMTMwOlsyLDk1XSwxMzM6WzIsOTVdLDEzNDpbMiw5NV0sMTM5OlsyLDk1XSwxNDA6WzIsOTVdLDE0MTpbMiw5NV0sMTQyOlsyLDk1XSwxNDM6WzIsOTVdLDE0NDpbMiw5NV0sMTQ1OlsyLDk1XX0sezEwOjE4MSwzMDoxODIsMzE6WzEsNzddLDMyOjE4MywzMzpbMSw3NV0sMzQ6WzEsNzZdLDQ0OjMzMCw0NToxODAsNDc6MTg0LDQ5OlsxLDQ5XSw5MzpbMSwxMTddfSx7NjpbMiw5Nl0sMTA6MTgxLDI4OlsyLDk2XSwyOTpbMiw5Nl0sMzA6MTgyLDMxOlsxLDc3XSwzMjoxODMsMzM6WzEsNzVdLDM0OlsxLDc2XSw0NDoxNzksNDU6MTgwLDQ3OjE4NCw0OTpbMSw0OV0sNTc6WzIsOTZdLDgwOjMzMSw5MzpbMSwxMTddfSx7NjpbMiw5OF0sMjg6WzIsOThdLDI5OlsyLDk4XSw1NzpbMiw5OF0sODE6WzIsOThdfSx7NjpbMiw0M10sMjg6WzIsNDNdLDI5OlsyLDQzXSw1NzpbMiw0M10sODE6WzIsNDNdLDEwNzo4OSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTEzOjkwLDExNDpbMSw3Ml0sMTE1OjczLDEzMDpbMSw4OF0sMTMzOlsxLDgxXSwxMzQ6WzEsODBdLDEzOTpbMSw3OV0sMTQwOlsxLDgyXSwxNDE6WzEsODNdLDE0MjpbMSw4NF0sMTQzOlsxLDg1XSwxNDQ6WzEsODZdLDE0NTpbMSw4N119LHs3OjMzMiw4OjEyMiw5OjE5LDEwOjIwLDExOlsxLDIxXSwxMjoyMiwxMzpbMSw1MF0sMTU6NiwxNjo3LDE3OjgsMTg6OSwxOToxMCwyMDoxMSwyMToxMiwyMjoxMywyMzoxNCwyNDoxNSwyNToxNiwyNjoxNywyNzoxOCwzMDo2NiwzMTpbMSw3N10sMzI6NTMsMzM6WzEsNzVdLDM0OlsxLDc2XSwzNToyNCwzNjpbMSw1NF0sMzc6WzEsNTVdLDM4OlsxLDU2XSwzOTpbMSw1N10sNDA6WzEsNThdLDQxOlsxLDU5XSw0MjoyMyw0Nzo2Nyw0ODpbMSw0OF0sNDk6WzEsNDldLDUwOlsxLDI5XSw1MzozMCw1NDpbMSw2NF0sNTU6WzEsNjVdLDYxOjUxLDYyOjUyLDY0OjM4LDY2OjI1LDY3OjI2LDY4OjI3LDc5OlsxLDc0XSw4MjpbMSw0NV0sODY6WzEsMjhdLDg3OlsxLDQ3XSw5MjpbMSw2Ml0sOTM6WzEsNjNdLDk0OlsxLDYxXSwxMDA6WzEsNDBdLDEwNDpbMSw0Nl0sMTA1OlsxLDYwXSwxMDc6NDEsMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMTo0MiwxMTI6WzEsNzFdLDExMzo0MywxMTQ6WzEsNzJdLDExNTo3MywxMjM6WzEsNDRdLDEyODozOSwxMjk6WzEsNjhdLDEzMTpbMSwzMV0sMTMyOlsxLDMyXSwxMzM6WzEsMzNdLDEzNDpbMSwzNF0sMTM1OlsxLDM1XSwxMzc6WzEsMzZdLDEzODpbMSwzN119LHs3NjpbMiwxMjZdLDEwNzo4OSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTEzOjkwLDExNDpbMSw3Ml0sMTE1OjczLDEzMDpbMSw4OF0sMTMzOlsxLDgxXSwxMzQ6WzEsODBdLDEzOTpbMSw3OV0sMTQwOlsxLDgyXSwxNDE6WzEsODNdLDE0MjpbMSw4NF0sMTQzOlsxLDg1XSwxNDQ6WzEsODZdLDE0NTpbMSw4N119LHsxOlsyLDQxXSw2OlsyLDQxXSwyODpbMiw0MV0sMjk6WzIsNDFdLDUyOlsyLDQxXSw1NzpbMiw0MV0sNjA6WzIsNDFdLDc2OlsyLDQxXSw4MTpbMiw0MV0sOTA6WzIsNDFdLDk1OlsyLDQxXSw5NzpbMiw0MV0sMTA2OlsyLDQxXSwxMDg6WzIsNDFdLDEwOTpbMiw0MV0sMTEwOlsyLDQxXSwxMTQ6WzIsNDFdLDEyMjpbMiw0MV0sMTMwOlsyLDQxXSwxMzM6WzIsNDFdLDEzNDpbMiw0MV0sMTM5OlsyLDQxXSwxNDA6WzIsNDFdLDE0MTpbMiw0MV0sMTQyOlsyLDQxXSwxNDM6WzIsNDFdLDE0NDpbMiw0MV0sMTQ1OlsyLDQxXX0sezE6WzIsMTE3XSw2OlsyLDExN10sMjg6WzIsMTE3XSwyOTpbMiwxMTddLDQzOlsyLDExN10sNTI6WzIsMTE3XSw1NzpbMiwxMTddLDYwOlsyLDExN10sNjk6WzIsMTE3XSw3MDpbMiwxMTddLDcxOlsyLDExN10sNzI6WzIsMTE3XSw3NDpbMiwxMTddLDc2OlsyLDExN10sNzc6WzIsMTE3XSw4MTpbMiwxMTddLDgzOlsyLDExN10sODg6WzIsMTE3XSw4OTpbMiwxMTddLDkwOlsyLDExN10sOTU6WzIsMTE3XSw5NzpbMiwxMTddLDEwNjpbMiwxMTddLDEwODpbMiwxMTddLDEwOTpbMiwxMTddLDExMDpbMiwxMTddLDExNDpbMiwxMTddLDEyMjpbMiwxMTddLDEzMDpbMiwxMTddLDEzMzpbMiwxMTddLDEzNDpbMiwxMTddLDEzNzpbMiwxMTddLDEzODpbMiwxMTddLDEzOTpbMiwxMTddLDE0MDpbMiwxMTddLDE0MTpbMiwxMTddLDE0MjpbMiwxMTddLDE0MzpbMiwxMTddLDE0NDpbMiwxMTddLDE0NTpbMiwxMTddLDE0NjpbMiwxMTddfSx7MTpbMiw1Ml0sNjpbMiw1Ml0sMjg6WzIsNTJdLDI5OlsyLDUyXSw1MjpbMiw1Ml0sNTc6WzIsNTJdLDYwOlsyLDUyXSw3NjpbMiw1Ml0sODE6WzIsNTJdLDkwOlsyLDUyXSw5NTpbMiw1Ml0sOTc6WzIsNTJdLDEwNjpbMiw1Ml0sMTA4OlsyLDUyXSwxMDk6WzIsNTJdLDExMDpbMiw1Ml0sMTE0OlsyLDUyXSwxMjI6WzIsNTJdLDEzMDpbMiw1Ml0sMTMzOlsyLDUyXSwxMzQ6WzIsNTJdLDEzOTpbMiw1Ml0sMTQwOlsyLDUyXSwxNDE6WzIsNTJdLDE0MjpbMiw1Ml0sMTQzOlsyLDUyXSwxNDQ6WzIsNTJdLDE0NTpbMiw1Ml19LHs2OlsyLDYxXSwyODpbMiw2MV0sMjk6WzIsNjFdLDUyOlsyLDYxXSw1NzpbMiw2MV19LHs2OlsyLDU2XSwyODpbMiw1Nl0sMjk6WzIsNTZdLDU2OjMzMyw1NzpbMSwyMTddfSx7MTpbMiwyMTVdLDY6WzIsMjE1XSwyODpbMiwyMTVdLDI5OlsyLDIxNV0sNTI6WzIsMjE1XSw1NzpbMiwyMTVdLDYwOlsyLDIxNV0sNzY6WzIsMjE1XSw4MTpbMiwyMTVdLDkwOlsyLDIxNV0sOTU6WzIsMjE1XSw5NzpbMiwyMTVdLDEwNjpbMiwyMTVdLDEwODpbMiwyMTVdLDEwOTpbMiwyMTVdLDExMDpbMiwyMTVdLDExNDpbMiwyMTVdLDEyMjpbMiwyMTVdLDEzMDpbMiwyMTVdLDEzMzpbMiwyMTVdLDEzNDpbMiwyMTVdLDEzOTpbMiwyMTVdLDE0MDpbMiwyMTVdLDE0MTpbMiwyMTVdLDE0MjpbMiwyMTVdLDE0MzpbMiwyMTVdLDE0NDpbMiwyMTVdLDE0NTpbMiwyMTVdfSx7MTpbMiwxODldLDY6WzIsMTg5XSwyODpbMiwxODldLDI5OlsyLDE4OV0sNTI6WzIsMTg5XSw1NzpbMiwxODldLDYwOlsyLDE4OV0sNzY6WzIsMTg5XSw4MTpbMiwxODldLDkwOlsyLDE4OV0sOTU6WzIsMTg5XSw5NzpbMiwxODldLDEwNjpbMiwxODldLDEwODpbMiwxODldLDEwOTpbMiwxODldLDExMDpbMiwxODldLDExNDpbMiwxODldLDEyMjpbMiwxODldLDEyNTpbMiwxODldLDEzMDpbMiwxODldLDEzMzpbMiwxODldLDEzNDpbMiwxODldLDEzOTpbMiwxODldLDE0MDpbMiwxODldLDE0MTpbMiwxODldLDE0MjpbMiwxODldLDE0MzpbMiwxODldLDE0NDpbMiwxODldLDE0NTpbMiwxODldfSx7MTpbMiwxNDNdLDY6WzIsMTQzXSwyODpbMiwxNDNdLDI5OlsyLDE0M10sNTI6WzIsMTQzXSw1NzpbMiwxNDNdLDYwOlsyLDE0M10sNzY6WzIsMTQzXSw4MTpbMiwxNDNdLDkwOlsyLDE0M10sOTU6WzIsMTQzXSw5NzpbMiwxNDNdLDEwNjpbMiwxNDNdLDEwODpbMiwxNDNdLDEwOTpbMiwxNDNdLDExMDpbMiwxNDNdLDExNDpbMiwxNDNdLDEyMjpbMiwxNDNdLDEzMDpbMiwxNDNdLDEzMzpbMiwxNDNdLDEzNDpbMiwxNDNdLDEzOTpbMiwxNDNdLDE0MDpbMiwxNDNdLDE0MTpbMiwxNDNdLDE0MjpbMiwxNDNdLDE0MzpbMiwxNDNdLDE0NDpbMiwxNDNdLDE0NTpbMiwxNDNdfSx7MTpbMiwxNDRdLDY6WzIsMTQ0XSwyODpbMiwxNDRdLDI5OlsyLDE0NF0sNTI6WzIsMTQ0XSw1NzpbMiwxNDRdLDYwOlsyLDE0NF0sNzY6WzIsMTQ0XSw4MTpbMiwxNDRdLDkwOlsyLDE0NF0sOTU6WzIsMTQ0XSw5NzpbMiwxNDRdLDEwMjpbMiwxNDRdLDEwNjpbMiwxNDRdLDEwODpbMiwxNDRdLDEwOTpbMiwxNDRdLDExMDpbMiwxNDRdLDExNDpbMiwxNDRdLDEyMjpbMiwxNDRdLDEzMDpbMiwxNDRdLDEzMzpbMiwxNDRdLDEzNDpbMiwxNDRdLDEzOTpbMiwxNDRdLDE0MDpbMiwxNDRdLDE0MTpbMiwxNDRdLDE0MjpbMiwxNDRdLDE0MzpbMiwxNDRdLDE0NDpbMiwxNDRdLDE0NTpbMiwxNDRdfSx7MTpbMiwxNDVdLDY6WzIsMTQ1XSwyODpbMiwxNDVdLDI5OlsyLDE0NV0sNTI6WzIsMTQ1XSw1NzpbMiwxNDVdLDYwOlsyLDE0NV0sNzY6WzIsMTQ1XSw4MTpbMiwxNDVdLDkwOlsyLDE0NV0sOTU6WzIsMTQ1XSw5NzpbMiwxNDVdLDEwMjpbMiwxNDVdLDEwNjpbMiwxNDVdLDEwODpbMiwxNDVdLDEwOTpbMiwxNDVdLDExMDpbMiwxNDVdLDExNDpbMiwxNDVdLDEyMjpbMiwxNDVdLDEzMDpbMiwxNDVdLDEzMzpbMiwxNDVdLDEzNDpbMiwxNDVdLDEzOTpbMiwxNDVdLDE0MDpbMiwxNDVdLDE0MTpbMiwxNDVdLDE0MjpbMiwxNDVdLDE0MzpbMiwxNDVdLDE0NDpbMiwxNDVdLDE0NTpbMiwxNDVdfSx7MTpbMiwxODBdLDY6WzIsMTgwXSwyODpbMiwxODBdLDI5OlsyLDE4MF0sNTI6WzIsMTgwXSw1NzpbMiwxODBdLDYwOlsyLDE4MF0sNzY6WzIsMTgwXSw4MTpbMiwxODBdLDkwOlsyLDE4MF0sOTU6WzIsMTgwXSw5NzpbMiwxODBdLDEwNjpbMiwxODBdLDEwODpbMiwxODBdLDEwOTpbMiwxODBdLDExMDpbMiwxODBdLDExNDpbMiwxODBdLDEyMjpbMiwxODBdLDEzMDpbMiwxODBdLDEzMzpbMiwxODBdLDEzNDpbMiwxODBdLDEzOTpbMiwxODBdLDE0MDpbMiwxODBdLDE0MTpbMiwxODBdLDE0MjpbMiwxODBdLDE0MzpbMiwxODBdLDE0NDpbMiwxODBdLDE0NTpbMiwxODBdfSx7MTQ6MzM0LDI4OlsxLDEyMF19LHsyOTpbMSwzMzVdfSx7NjpbMSwzMzZdLDI5OlsyLDE4Nl0sMTI1OlsyLDE4Nl0sMTI3OlsyLDE4Nl19LHs3OjMzNyw4OjEyMiw5OjE5LDEwOjIwLDExOlsxLDIxXSwxMjoyMiwxMzpbMSw1MF0sMTU6NiwxNjo3LDE3OjgsMTg6OSwxOToxMCwyMDoxMSwyMToxMiwyMjoxMywyMzoxNCwyNDoxNSwyNToxNiwyNjoxNywyNzoxOCwzMDo2NiwzMTpbMSw3N10sMzI6NTMsMzM6WzEsNzVdLDM0OlsxLDc2XSwzNToyNCwzNjpbMSw1NF0sMzc6WzEsNTVdLDM4OlsxLDU2XSwzOTpbMSw1N10sNDA6WzEsNThdLDQxOlsxLDU5XSw0MjoyMyw0Nzo2Nyw0ODpbMSw0OF0sNDk6WzEsNDldLDUwOlsxLDI5XSw1MzozMCw1NDpbMSw2NF0sNTU6WzEsNjVdLDYxOjUxLDYyOjUyLDY0OjM4LDY2OjI1LDY3OjI2LDY4OjI3LDc5OlsxLDc0XSw4MjpbMSw0NV0sODY6WzEsMjhdLDg3OlsxLDQ3XSw5MjpbMSw2Ml0sOTM6WzEsNjNdLDk0OlsxLDYxXSwxMDA6WzEsNDBdLDEwNDpbMSw0Nl0sMTA1OlsxLDYwXSwxMDc6NDEsMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMTo0MiwxMTI6WzEsNzFdLDExMzo0MywxMTQ6WzEsNzJdLDExNTo3MywxMjM6WzEsNDRdLDEyODozOSwxMjk6WzEsNjhdLDEzMTpbMSwzMV0sMTMyOlsxLDMyXSwxMzM6WzEsMzNdLDEzNDpbMSwzNF0sMTM1OlsxLDM1XSwxMzc6WzEsMzZdLDEzODpbMSwzN119LHsxOlsyLDEwOF0sNjpbMiwxMDhdLDI4OlsyLDEwOF0sMjk6WzIsMTA4XSw1MjpbMiwxMDhdLDU3OlsyLDEwOF0sNjA6WzIsMTA4XSw3NjpbMiwxMDhdLDgxOlsyLDEwOF0sOTA6WzIsMTA4XSw5NTpbMiwxMDhdLDk3OlsyLDEwOF0sMTA2OlsyLDEwOF0sMTA4OlsyLDEwOF0sMTA5OlsyLDEwOF0sMTEwOlsyLDEwOF0sMTE0OlsyLDEwOF0sMTIyOlsyLDEwOF0sMTMwOlsyLDEwOF0sMTMzOlsyLDEwOF0sMTM0OlsyLDEwOF0sMTM5OlsyLDEwOF0sMTQwOlsyLDEwOF0sMTQxOlsyLDEwOF0sMTQyOlsyLDEwOF0sMTQzOlsyLDEwOF0sMTQ0OlsyLDEwOF0sMTQ1OlsyLDEwOF19LHsxOlsyLDE0OV0sNjpbMiwxNDldLDI4OlsyLDE0OV0sMjk6WzIsMTQ5XSw1MjpbMiwxNDldLDU3OlsyLDE0OV0sNjA6WzIsMTQ5XSw2OTpbMiwxNDldLDcwOlsyLDE0OV0sNzE6WzIsMTQ5XSw3MjpbMiwxNDldLDc0OlsyLDE0OV0sNzY6WzIsMTQ5XSw3NzpbMiwxNDldLDgxOlsyLDE0OV0sODg6WzIsMTQ5XSw4OTpbMiwxNDldLDkwOlsyLDE0OV0sOTU6WzIsMTQ5XSw5NzpbMiwxNDldLDEwNjpbMiwxNDldLDEwODpbMiwxNDldLDEwOTpbMiwxNDldLDExMDpbMiwxNDldLDExNDpbMiwxNDldLDEyMjpbMiwxNDldLDEzMDpbMiwxNDldLDEzMzpbMiwxNDldLDEzNDpbMiwxNDldLDEzOTpbMiwxNDldLDE0MDpbMiwxNDldLDE0MTpbMiwxNDldLDE0MjpbMiwxNDldLDE0MzpbMiwxNDldLDE0NDpbMiwxNDldLDE0NTpbMiwxNDldfSx7MTpbMiwxMjVdLDY6WzIsMTI1XSwyODpbMiwxMjVdLDI5OlsyLDEyNV0sNTI6WzIsMTI1XSw1NzpbMiwxMjVdLDYwOlsyLDEyNV0sNjk6WzIsMTI1XSw3MDpbMiwxMjVdLDcxOlsyLDEyNV0sNzI6WzIsMTI1XSw3NDpbMiwxMjVdLDc2OlsyLDEyNV0sNzc6WzIsMTI1XSw4MTpbMiwxMjVdLDg4OlsyLDEyNV0sODk6WzIsMTI1XSw5MDpbMiwxMjVdLDk1OlsyLDEyNV0sOTc6WzIsMTI1XSwxMDY6WzIsMTI1XSwxMDg6WzIsMTI1XSwxMDk6WzIsMTI1XSwxMTA6WzIsMTI1XSwxMTQ6WzIsMTI1XSwxMjI6WzIsMTI1XSwxMzA6WzIsMTI1XSwxMzM6WzIsMTI1XSwxMzQ6WzIsMTI1XSwxMzk6WzIsMTI1XSwxNDA6WzIsMTI1XSwxNDE6WzIsMTI1XSwxNDI6WzIsMTI1XSwxNDM6WzIsMTI1XSwxNDQ6WzIsMTI1XSwxNDU6WzIsMTI1XX0sezY6WzIsMTMyXSwyODpbMiwxMzJdLDI5OlsyLDEzMl0sNTc6WzIsMTMyXSw5MDpbMiwxMzJdLDk1OlsyLDEzMl19LHs2OlsyLDU2XSwyODpbMiw1Nl0sMjk6WzIsNTZdLDU2OjMzOCw1NzpbMSwyNDVdfSx7NjpbMiwxMzNdLDI4OlsyLDEzM10sMjk6WzIsMTMzXSw1NzpbMiwxMzNdLDkwOlsyLDEzM10sOTU6WzIsMTMzXX0sezE6WzIsMTc1XSw2OlsyLDE3NV0sMjg6WzIsMTc1XSwyOTpbMiwxNzVdLDUyOlsyLDE3NV0sNTc6WzIsMTc1XSw2MDpbMiwxNzVdLDc2OlsyLDE3NV0sODE6WzIsMTc1XSw5MDpbMiwxNzVdLDk1OlsyLDE3NV0sOTc6WzIsMTc1XSwxMDY6WzIsMTc1XSwxMDc6ODksMTA4OlsyLDE3NV0sMTA5OlsyLDE3NV0sMTEwOlsyLDE3NV0sMTEzOjkwLDExNDpbMiwxNzVdLDExNTo3MywxMjI6WzEsMzM5XSwxMzA6WzIsMTc1XSwxMzM6WzEsODFdLDEzNDpbMSw4MF0sMTM5OlsxLDc5XSwxNDA6WzEsODJdLDE0MTpbMSw4M10sMTQyOlsxLDg0XSwxNDM6WzEsODVdLDE0NDpbMSw4Nl0sMTQ1OlsxLDg3XX0sezE6WzIsMTc3XSw2OlsyLDE3N10sMjg6WzIsMTc3XSwyOTpbMiwxNzddLDUyOlsyLDE3N10sNTc6WzIsMTc3XSw2MDpbMiwxNzddLDc2OlsyLDE3N10sODE6WzIsMTc3XSw5MDpbMiwxNzddLDk1OlsyLDE3N10sOTc6WzIsMTc3XSwxMDY6WzIsMTc3XSwxMDc6ODksMTA4OlsyLDE3N10sMTA5OlsxLDM0MF0sMTEwOlsyLDE3N10sMTEzOjkwLDExNDpbMiwxNzddLDExNTo3MywxMjI6WzIsMTc3XSwxMzA6WzIsMTc3XSwxMzM6WzEsODFdLDEzNDpbMSw4MF0sMTM5OlsxLDc5XSwxNDA6WzEsODJdLDE0MTpbMSw4M10sMTQyOlsxLDg0XSwxNDM6WzEsODVdLDE0NDpbMSw4Nl0sMTQ1OlsxLDg3XX0sezE6WzIsMTc2XSw2OlsyLDE3Nl0sMjg6WzIsMTc2XSwyOTpbMiwxNzZdLDUyOlsyLDE3Nl0sNTc6WzIsMTc2XSw2MDpbMiwxNzZdLDc2OlsyLDE3Nl0sODE6WzIsMTc2XSw5MDpbMiwxNzZdLDk1OlsyLDE3Nl0sOTc6WzIsMTc2XSwxMDY6WzIsMTc2XSwxMDc6ODksMTA4OlsyLDE3Nl0sMTA5OlsyLDE3Nl0sMTEwOlsyLDE3Nl0sMTEzOjkwLDExNDpbMiwxNzZdLDExNTo3MywxMjI6WzIsMTc2XSwxMzA6WzIsMTc2XSwxMzM6WzEsODFdLDEzNDpbMSw4MF0sMTM5OlsxLDc5XSwxNDA6WzEsODJdLDE0MTpbMSw4M10sMTQyOlsxLDg0XSwxNDM6WzEsODVdLDE0NDpbMSw4Nl0sMTQ1OlsxLDg3XX0sezY6WzIsOTldLDI4OlsyLDk5XSwyOTpbMiw5OV0sNTc6WzIsOTldLDgxOlsyLDk5XX0sezY6WzIsNTZdLDI4OlsyLDU2XSwyOTpbMiw1Nl0sNTY6MzQxLDU3OlsxLDI1NV19LHsyOTpbMSwzNDJdLDEwNzo4OSwxMDg6WzEsNjldLDExMDpbMSw3MF0sMTEzOjkwLDExNDpbMSw3Ml0sMTE1OjczLDEzMDpbMSw4OF0sMTMzOlsxLDgxXSwxMzQ6WzEsODBdLDEzOTpbMSw3OV0sMTQwOlsxLDgyXSwxNDE6WzEsODNdLDE0MjpbMSw4NF0sMTQzOlsxLDg1XSwxNDQ6WzEsODZdLDE0NTpbMSw4N119LHs2OlsxLDI2Nl0sMjg6WzEsMjY3XSwyOTpbMSwzNDNdfSx7Mjk6WzEsMzQ0XX0sezE6WzIsMTgzXSw2OlsyLDE4M10sMjg6WzIsMTgzXSwyOTpbMiwxODNdLDUyOlsyLDE4M10sNTc6WzIsMTgzXSw2MDpbMiwxODNdLDc2OlsyLDE4M10sODE6WzIsMTgzXSw5MDpbMiwxODNdLDk1OlsyLDE4M10sOTc6WzIsMTgzXSwxMDY6WzIsMTgzXSwxMDg6WzIsMTgzXSwxMDk6WzIsMTgzXSwxMTA6WzIsMTgzXSwxMTQ6WzIsMTgzXSwxMjI6WzIsMTgzXSwxMzA6WzIsMTgzXSwxMzM6WzIsMTgzXSwxMzQ6WzIsMTgzXSwxMzk6WzIsMTgzXSwxNDA6WzIsMTgzXSwxNDE6WzIsMTgzXSwxNDI6WzIsMTgzXSwxNDM6WzIsMTgzXSwxNDQ6WzIsMTgzXSwxNDU6WzIsMTgzXX0sezI5OlsyLDE4N10sMTI1OlsyLDE4N10sMTI3OlsyLDE4N119LHsyODpbMiwxMzldLDU3OlsyLDEzOV0sMTA3Ojg5LDEwODpbMSw2OV0sMTEwOlsxLDcwXSwxMTM6OTAsMTE0OlsxLDcyXSwxMTU6NzMsMTMwOlsxLDg4XSwxMzM6WzEsODFdLDEzNDpbMSw4MF0sMTM5OlsxLDc5XSwxNDA6WzEsODJdLDE0MTpbMSw4M10sMTQyOlsxLDg0XSwxNDM6WzEsODVdLDE0NDpbMSw4Nl0sMTQ1OlsxLDg3XX0sezY6WzEsMjg5XSwyODpbMSwyOTBdLDI5OlsxLDM0NV19LHs3OjM0Niw4OjEyMiw5OjE5LDEwOjIwLDExOlsxLDIxXSwxMjoyMiwxMzpbMSw1MF0sMTU6NiwxNjo3LDE3OjgsMTg6OSwxOToxMCwyMDoxMSwyMToxMiwyMjoxMywyMzoxNCwyNDoxNSwyNToxNiwyNjoxNywyNzoxOCwzMDo2NiwzMTpbMSw3N10sMzI6NTMsMzM6WzEsNzVdLDM0OlsxLDc2XSwzNToyNCwzNjpbMSw1NF0sMzc6WzEsNTVdLDM4OlsxLDU2XSwzOTpbMSw1N10sNDA6WzEsNThdLDQxOlsxLDU5XSw0MjoyMyw0Nzo2Nyw0ODpbMSw0OF0sNDk6WzEsNDldLDUwOlsxLDI5XSw1MzozMCw1NDpbMSw2NF0sNTU6WzEsNjVdLDYxOjUxLDYyOjUyLDY0OjM4LDY2OjI1LDY3OjI2LDY4OjI3LDc5OlsxLDc0XSw4MjpbMSw0NV0sODY6WzEsMjhdLDg3OlsxLDQ3XSw5MjpbMSw2Ml0sOTM6WzEsNjNdLDk0OlsxLDYxXSwxMDA6WzEsNDBdLDEwNDpbMSw0Nl0sMTA1OlsxLDYwXSwxMDc6NDEsMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMTo0MiwxMTI6WzEsNzFdLDExMzo0MywxMTQ6WzEsNzJdLDExNTo3MywxMjM6WzEsNDRdLDEyODozOSwxMjk6WzEsNjhdLDEzMTpbMSwzMV0sMTMyOlsxLDMyXSwxMzM6WzEsMzNdLDEzNDpbMSwzNF0sMTM1OlsxLDM1XSwxMzc6WzEsMzZdLDEzODpbMSwzN119LHs3OjM0Nyw4OjEyMiw5OjE5LDEwOjIwLDExOlsxLDIxXSwxMjoyMiwxMzpbMSw1MF0sMTU6NiwxNjo3LDE3OjgsMTg6OSwxOToxMCwyMDoxMSwyMToxMiwyMjoxMywyMzoxNCwyNDoxNSwyNToxNiwyNjoxNywyNzoxOCwzMDo2NiwzMTpbMSw3N10sMzI6NTMsMzM6WzEsNzVdLDM0OlsxLDc2XSwzNToyNCwzNjpbMSw1NF0sMzc6WzEsNTVdLDM4OlsxLDU2XSwzOTpbMSw1N10sNDA6WzEsNThdLDQxOlsxLDU5XSw0MjoyMyw0Nzo2Nyw0ODpbMSw0OF0sNDk6WzEsNDldLDUwOlsxLDI5XSw1MzozMCw1NDpbMSw2NF0sNTU6WzEsNjVdLDYxOjUxLDYyOjUyLDY0OjM4LDY2OjI1LDY3OjI2LDY4OjI3LDc5OlsxLDc0XSw4MjpbMSw0NV0sODY6WzEsMjhdLDg3OlsxLDQ3XSw5MjpbMSw2Ml0sOTM6WzEsNjNdLDk0OlsxLDYxXSwxMDA6WzEsNDBdLDEwNDpbMSw0Nl0sMTA1OlsxLDYwXSwxMDc6NDEsMTA4OlsxLDY5XSwxMTA6WzEsNzBdLDExMTo0MiwxMTI6WzEsNzFdLDExMzo0MywxMTQ6WzEsNzJdLDExNTo3MywxMjM6WzEsNDRdLDEyODozOSwxMjk6WzEsNjhdLDEzMTpbMSwzMV0sMTMyOlsxLDMyXSwxMzM6WzEsMzNdLDEzNDpbMSwzNF0sMTM1OlsxLDM1XSwxMzc6WzEsMzZdLDEzODpbMSwzN119LHs2OlsxLDMwMF0sMjg6WzEsMzAxXSwyOTpbMSwzNDhdfSx7NjpbMiw0NF0sMjg6WzIsNDRdLDI5OlsyLDQ0XSw1NzpbMiw0NF0sODE6WzIsNDRdfSx7NjpbMiw2Ml0sMjg6WzIsNjJdLDI5OlsyLDYyXSw1MjpbMiw2Ml0sNTc6WzIsNjJdfSx7MTpbMiwxODFdLDY6WzIsMTgxXSwyODpbMiwxODFdLDI5OlsyLDE4MV0sNTI6WzIsMTgxXSw1NzpbMiwxODFdLDYwOlsyLDE4MV0sNzY6WzIsMTgxXSw4MTpbMiwxODFdLDkwOlsyLDE4MV0sOTU6WzIsMTgxXSw5NzpbMiwxODFdLDEwNjpbMiwxODFdLDEwODpbMiwxODFdLDEwOTpbMiwxODFdLDExMDpbMiwxODFdLDExNDpbMiwxODFdLDEyMjpbMiwxODFdLDEzMDpbMiwxODFdLDEzMzpbMiwxODFdLDEzNDpbMiwxODFdLDEzOTpbMiwxODFdLDE0MDpbMiwxODFdLDE0MTpbMiwxODFdLDE0MjpbMiwxODFdLDE0MzpbMiwxODFdLDE0NDpbMiwxODFdLDE0NTpbMiwxODFdfSx7NjpbMiwxMzRdLDI4OlsyLDEzNF0sMjk6WzIsMTM0XSw1NzpbMiwxMzRdLDkwOlsyLDEzNF0sOTU6WzIsMTM0XX0sezE6WzIsMTc4XSw2OlsyLDE3OF0sMjg6WzIsMTc4XSwyOTpbMiwxNzhdLDUyOlsyLDE3OF0sNTc6WzIsMTc4XSw2MDpbMiwxNzhdLDc2OlsyLDE3OF0sODE6WzIsMTc4XSw5MDpbMiwxNzhdLDk1OlsyLDE3OF0sOTc6WzIsMTc4XSwxMDY6WzIsMTc4XSwxMDc6ODksMTA4OlsyLDE3OF0sMTA5OlsyLDE3OF0sMTEwOlsyLDE3OF0sMTEzOjkwLDExNDpbMiwxNzhdLDExNTo3MywxMjI6WzIsMTc4XSwxMzA6WzIsMTc4XSwxMzM6WzEsODFdLDEzNDpbMSw4MF0sMTM5OlsxLDc5XSwxNDA6WzEsODJdLDE0MTpbMSw4M10sMTQyOlsxLDg0XSwxNDM6WzEsODVdLDE0NDpbMSw4Nl0sMTQ1OlsxLDg3XX0sezE6WzIsMTc5XSw2OlsyLDE3OV0sMjg6WzIsMTc5XSwyOTpbMiwxNzldLDUyOlsyLDE3OV0sNTc6WzIsMTc5XSw2MDpbMiwxNzldLDc2OlsyLDE3OV0sODE6WzIsMTc5XSw5MDpbMiwxNzldLDk1OlsyLDE3OV0sOTc6WzIsMTc5XSwxMDY6WzIsMTc5XSwxMDc6ODksMTA4OlsyLDE3OV0sMTA5OlsyLDE3OV0sMTEwOlsyLDE3OV0sMTEzOjkwLDExNDpbMiwxNzldLDExNTo3MywxMjI6WzIsMTc5XSwxMzA6WzIsMTc5XSwxMzM6WzEsODFdLDEzNDpbMSw4MF0sMTM5OlsxLDc5XSwxNDA6WzEsODJdLDE0MTpbMSw4M10sMTQyOlsxLDg0XSwxNDM6WzEsODVdLDE0NDpbMSw4Nl0sMTQ1OlsxLDg3XX0sezY6WzIsMTAwXSwyODpbMiwxMDBdLDI5OlsyLDEwMF0sNTc6WzIsMTAwXSw4MTpbMiwxMDBdfV0sXG5kZWZhdWx0QWN0aW9uczogezY0OlsyLDU0XSw2NTpbMiw1NV0sOTY6WzIsMTE1XSwyMDQ6WzIsOTRdfSxcbnBhcnNlRXJyb3I6IGZ1bmN0aW9uIHBhcnNlRXJyb3Ioc3RyLCBoYXNoKSB7XG4gICAgaWYgKGhhc2gucmVjb3ZlcmFibGUpIHtcbiAgICAgICAgdGhpcy50cmFjZShzdHIpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihzdHIpO1xuICAgIH1cbn0sXG5wYXJzZTogZnVuY3Rpb24gcGFyc2UoaW5wdXQpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXMsIHN0YWNrID0gWzBdLCB2c3RhY2sgPSBbbnVsbF0sIGxzdGFjayA9IFtdLCB0YWJsZSA9IHRoaXMudGFibGUsIHl5dGV4dCA9ICcnLCB5eWxpbmVubyA9IDAsIHl5bGVuZyA9IDAsIHJlY292ZXJpbmcgPSAwLCBURVJST1IgPSAyLCBFT0YgPSAxO1xuICAgIHZhciBhcmdzID0gbHN0YWNrLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcbiAgICB0aGlzLmxleGVyLnNldElucHV0KGlucHV0KTtcbiAgICB0aGlzLmxleGVyLnl5ID0gdGhpcy55eTtcbiAgICB0aGlzLnl5LmxleGVyID0gdGhpcy5sZXhlcjtcbiAgICB0aGlzLnl5LnBhcnNlciA9IHRoaXM7XG4gICAgaWYgKHR5cGVvZiB0aGlzLmxleGVyLnl5bGxvYyA9PSAndW5kZWZpbmVkJykge1xuICAgICAgICB0aGlzLmxleGVyLnl5bGxvYyA9IHt9O1xuICAgIH1cbiAgICB2YXIgeXlsb2MgPSB0aGlzLmxleGVyLnl5bGxvYztcbiAgICBsc3RhY2sucHVzaCh5eWxvYyk7XG4gICAgdmFyIHJhbmdlcyA9IHRoaXMubGV4ZXIub3B0aW9ucyAmJiB0aGlzLmxleGVyLm9wdGlvbnMucmFuZ2VzO1xuICAgIGlmICh0eXBlb2YgdGhpcy55eS5wYXJzZUVycm9yID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHRoaXMucGFyc2VFcnJvciA9IHRoaXMueXkucGFyc2VFcnJvcjtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnBhcnNlRXJyb3IgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YodGhpcykucGFyc2VFcnJvcjtcbiAgICB9XG4gICAgZnVuY3Rpb24gcG9wU3RhY2sobikge1xuICAgICAgICBzdGFjay5sZW5ndGggPSBzdGFjay5sZW5ndGggLSAyICogbjtcbiAgICAgICAgdnN0YWNrLmxlbmd0aCA9IHZzdGFjay5sZW5ndGggLSBuO1xuICAgICAgICBsc3RhY2subGVuZ3RoID0gbHN0YWNrLmxlbmd0aCAtIG47XG4gICAgfVxuICAgIGZ1bmN0aW9uIGxleCgpIHtcbiAgICAgICAgdmFyIHRva2VuO1xuICAgICAgICB0b2tlbiA9IHNlbGYubGV4ZXIubGV4KCkgfHwgRU9GO1xuICAgICAgICBpZiAodHlwZW9mIHRva2VuICE9PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgdG9rZW4gPSBzZWxmLnN5bWJvbHNfW3Rva2VuXSB8fCB0b2tlbjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdG9rZW47XG4gICAgfVxuICAgIHZhciBzeW1ib2wsIHByZUVycm9yU3ltYm9sLCBzdGF0ZSwgYWN0aW9uLCBhLCByLCB5eXZhbCA9IHt9LCBwLCBsZW4sIG5ld1N0YXRlLCBleHBlY3RlZDtcbiAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICBzdGF0ZSA9IHN0YWNrW3N0YWNrLmxlbmd0aCAtIDFdO1xuICAgICAgICBpZiAodGhpcy5kZWZhdWx0QWN0aW9uc1tzdGF0ZV0pIHtcbiAgICAgICAgICAgIGFjdGlvbiA9IHRoaXMuZGVmYXVsdEFjdGlvbnNbc3RhdGVdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKHN5bWJvbCA9PT0gbnVsbCB8fCB0eXBlb2Ygc3ltYm9sID09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgc3ltYm9sID0gbGV4KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhY3Rpb24gPSB0YWJsZVtzdGF0ZV0gJiYgdGFibGVbc3RhdGVdW3N5bWJvbF07XG4gICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBhY3Rpb24gPT09ICd1bmRlZmluZWQnIHx8ICFhY3Rpb24ubGVuZ3RoIHx8ICFhY3Rpb25bMF0pIHtcbiAgICAgICAgICAgICAgICB2YXIgZXJyU3RyID0gJyc7XG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKHAgaW4gdGFibGVbc3RhdGVdKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnRlcm1pbmFsc19bcF0gJiYgcCA+IFRFUlJPUikge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXhwZWN0ZWQucHVzaCgnXFwnJyArIHRoaXMudGVybWluYWxzX1twXSArICdcXCcnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5sZXhlci5zaG93UG9zaXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgZXJyU3RyID0gJ1BhcnNlIGVycm9yIG9uIGxpbmUgJyArICh5eWxpbmVubyArIDEpICsgJzpcXG4nICsgdGhpcy5sZXhlci5zaG93UG9zaXRpb24oKSArICdcXG5FeHBlY3RpbmcgJyArIGV4cGVjdGVkLmpvaW4oJywgJykgKyAnLCBnb3QgXFwnJyArICh0aGlzLnRlcm1pbmFsc19bc3ltYm9sXSB8fCBzeW1ib2wpICsgJ1xcJyc7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZXJyU3RyID0gJ1BhcnNlIGVycm9yIG9uIGxpbmUgJyArICh5eWxpbmVubyArIDEpICsgJzogVW5leHBlY3RlZCAnICsgKHN5bWJvbCA9PSBFT0YgPyAnZW5kIG9mIGlucHV0JyA6ICdcXCcnICsgKHRoaXMudGVybWluYWxzX1tzeW1ib2xdIHx8IHN5bWJvbCkgKyAnXFwnJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucGFyc2VFcnJvcihlcnJTdHIsIHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogdGhpcy5sZXhlci5tYXRjaCxcbiAgICAgICAgICAgICAgICAgICAgdG9rZW46IHRoaXMudGVybWluYWxzX1tzeW1ib2xdIHx8IHN5bWJvbCxcbiAgICAgICAgICAgICAgICAgICAgbGluZTogdGhpcy5sZXhlci55eWxpbmVubyxcbiAgICAgICAgICAgICAgICAgICAgbG9jOiB5eWxvYyxcbiAgICAgICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IGV4cGVjdGVkXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIGlmIChhY3Rpb25bMF0gaW5zdGFuY2VvZiBBcnJheSAmJiBhY3Rpb24ubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdQYXJzZSBFcnJvcjogbXVsdGlwbGUgYWN0aW9ucyBwb3NzaWJsZSBhdCBzdGF0ZTogJyArIHN0YXRlICsgJywgdG9rZW46ICcgKyBzeW1ib2wpO1xuICAgICAgICB9XG4gICAgICAgIHN3aXRjaCAoYWN0aW9uWzBdKSB7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIHN0YWNrLnB1c2goc3ltYm9sKTtcbiAgICAgICAgICAgIHZzdGFjay5wdXNoKHRoaXMubGV4ZXIueXl0ZXh0KTtcbiAgICAgICAgICAgIGxzdGFjay5wdXNoKHRoaXMubGV4ZXIueXlsbG9jKTtcbiAgICAgICAgICAgIHN0YWNrLnB1c2goYWN0aW9uWzFdKTtcbiAgICAgICAgICAgIHN5bWJvbCA9IG51bGw7XG4gICAgICAgICAgICBpZiAoIXByZUVycm9yU3ltYm9sKSB7XG4gICAgICAgICAgICAgICAgeXlsZW5nID0gdGhpcy5sZXhlci55eWxlbmc7XG4gICAgICAgICAgICAgICAgeXl0ZXh0ID0gdGhpcy5sZXhlci55eXRleHQ7XG4gICAgICAgICAgICAgICAgeXlsaW5lbm8gPSB0aGlzLmxleGVyLnl5bGluZW5vO1xuICAgICAgICAgICAgICAgIHl5bG9jID0gdGhpcy5sZXhlci55eWxsb2M7XG4gICAgICAgICAgICAgICAgaWYgKHJlY292ZXJpbmcgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlY292ZXJpbmctLTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHN5bWJvbCA9IHByZUVycm9yU3ltYm9sO1xuICAgICAgICAgICAgICAgIHByZUVycm9yU3ltYm9sID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICBsZW4gPSB0aGlzLnByb2R1Y3Rpb25zX1thY3Rpb25bMV1dWzFdO1xuICAgICAgICAgICAgeXl2YWwuJCA9IHZzdGFja1t2c3RhY2subGVuZ3RoIC0gbGVuXTtcbiAgICAgICAgICAgIHl5dmFsLl8kID0ge1xuICAgICAgICAgICAgICAgIGZpcnN0X2xpbmU6IGxzdGFja1tsc3RhY2subGVuZ3RoIC0gKGxlbiB8fCAxKV0uZmlyc3RfbGluZSxcbiAgICAgICAgICAgICAgICBsYXN0X2xpbmU6IGxzdGFja1tsc3RhY2subGVuZ3RoIC0gMV0ubGFzdF9saW5lLFxuICAgICAgICAgICAgICAgIGZpcnN0X2NvbHVtbjogbHN0YWNrW2xzdGFjay5sZW5ndGggLSAobGVuIHx8IDEpXS5maXJzdF9jb2x1bW4sXG4gICAgICAgICAgICAgICAgbGFzdF9jb2x1bW46IGxzdGFja1tsc3RhY2subGVuZ3RoIC0gMV0ubGFzdF9jb2x1bW5cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAocmFuZ2VzKSB7XG4gICAgICAgICAgICAgICAgeXl2YWwuXyQucmFuZ2UgPSBbXG4gICAgICAgICAgICAgICAgICAgIGxzdGFja1tsc3RhY2subGVuZ3RoIC0gKGxlbiB8fCAxKV0ucmFuZ2VbMF0sXG4gICAgICAgICAgICAgICAgICAgIGxzdGFja1tsc3RhY2subGVuZ3RoIC0gMV0ucmFuZ2VbMV1cbiAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgciA9IHRoaXMucGVyZm9ybUFjdGlvbi5hcHBseSh5eXZhbCwgW1xuICAgICAgICAgICAgICAgIHl5dGV4dCxcbiAgICAgICAgICAgICAgICB5eWxlbmcsXG4gICAgICAgICAgICAgICAgeXlsaW5lbm8sXG4gICAgICAgICAgICAgICAgdGhpcy55eSxcbiAgICAgICAgICAgICAgICBhY3Rpb25bMV0sXG4gICAgICAgICAgICAgICAgdnN0YWNrLFxuICAgICAgICAgICAgICAgIGxzdGFja1xuICAgICAgICAgICAgXS5jb25jYXQoYXJncykpO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiByICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIHJldHVybiByO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGxlbikge1xuICAgICAgICAgICAgICAgIHN0YWNrID0gc3RhY2suc2xpY2UoMCwgLTEgKiBsZW4gKiAyKTtcbiAgICAgICAgICAgICAgICB2c3RhY2sgPSB2c3RhY2suc2xpY2UoMCwgLTEgKiBsZW4pO1xuICAgICAgICAgICAgICAgIGxzdGFjayA9IGxzdGFjay5zbGljZSgwLCAtMSAqIGxlbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdGFjay5wdXNoKHRoaXMucHJvZHVjdGlvbnNfW2FjdGlvblsxXV1bMF0pO1xuICAgICAgICAgICAgdnN0YWNrLnB1c2goeXl2YWwuJCk7XG4gICAgICAgICAgICBsc3RhY2sucHVzaCh5eXZhbC5fJCk7XG4gICAgICAgICAgICBuZXdTdGF0ZSA9IHRhYmxlW3N0YWNrW3N0YWNrLmxlbmd0aCAtIDJdXVtzdGFja1tzdGFjay5sZW5ndGggLSAxXV07XG4gICAgICAgICAgICBzdGFjay5wdXNoKG5ld1N0YXRlKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn19O1xuXG5mdW5jdGlvbiBQYXJzZXIgKCkge1xuICB0aGlzLnl5ID0ge307XG59XG5QYXJzZXIucHJvdG90eXBlID0gcGFyc2VyO3BhcnNlci5QYXJzZXIgPSBQYXJzZXI7XG5yZXR1cm4gbmV3IFBhcnNlcjtcbn0pKCk7XG5cblxuaWYgKHR5cGVvZiByZXF1aXJlICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgZXhwb3J0cyAhPT0gJ3VuZGVmaW5lZCcpIHtcbmV4cG9ydHMucGFyc2VyID0gcGFyc2VyO1xuZXhwb3J0cy5QYXJzZXIgPSBwYXJzZXIuUGFyc2VyO1xuZXhwb3J0cy5wYXJzZSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHBhcnNlci5wYXJzZS5hcHBseShwYXJzZXIsIGFyZ3VtZW50cyk7IH07XG5leHBvcnRzLm1haW4gPSBmdW5jdGlvbiBjb21tb25qc01haW4oYXJncykge1xuICAgIGlmICghYXJnc1sxXSkge1xuICAgICAgICBjb25zb2xlLmxvZygnVXNhZ2U6ICcrYXJnc1swXSsnIEZJTEUnKTtcbiAgICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgIH1cbiAgICB2YXIgc291cmNlID0gcmVxdWlyZSgnZnMnKS5yZWFkRmlsZVN5bmMocmVxdWlyZSgncGF0aCcpLm5vcm1hbGl6ZShhcmdzWzFdKSwgXCJ1dGY4XCIpO1xuICAgIHJldHVybiBleHBvcnRzLnBhcnNlci5wYXJzZShzb3VyY2UpO1xufTtcbmlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiByZXF1aXJlLm1haW4gPT09IG1vZHVsZSkge1xuICBleHBvcnRzLm1haW4ocHJvY2Vzcy5hcmd2LnNsaWNlKDEpKTtcbn1cbn0iLCIvLyBHZW5lcmF0ZWQgYnkgSWNlZENvZmZlZVNjcmlwdCAxMDguMC4xMVxuKGZ1bmN0aW9uKCkge1xuICB2YXIgQ29mZmVlU2NyaXB0LCBNb2R1bGUsIGJpbmFyeSwgY2hpbGRfcHJvY2VzcywgZXh0LCBmaW5kRXh0ZW5zaW9uLCBmb3JrLCBoZWxwZXJzLCBsb2FkRmlsZSwgcGF0aCwgX2ksIF9sZW4sIF9yZWY7XG5cbiAgQ29mZmVlU2NyaXB0ID0gcmVxdWlyZSgnLi9jb2ZmZWUtc2NyaXB0Jyk7XG5cbiAgY2hpbGRfcHJvY2VzcyA9IHJlcXVpcmUoJ2NoaWxkX3Byb2Nlc3MnKTtcblxuICBoZWxwZXJzID0gcmVxdWlyZSgnLi9oZWxwZXJzJyk7XG5cbiAgcGF0aCA9IHJlcXVpcmUoJ3BhdGgnKTtcblxuICBsb2FkRmlsZSA9IGZ1bmN0aW9uKG1vZHVsZSwgZmlsZW5hbWUpIHtcbiAgICB2YXIgYW5zd2VyO1xuICAgIGFuc3dlciA9IENvZmZlZVNjcmlwdC5fY29tcGlsZUZpbGUoZmlsZW5hbWUsIGZhbHNlLCB7XG4gICAgICBydW50aW1lOiBcImludGVycFwiXG4gICAgfSk7XG4gICAgcmV0dXJuIG1vZHVsZS5fY29tcGlsZShhbnN3ZXIsIGZpbGVuYW1lKTtcbiAgfTtcblxuICBpZiAocmVxdWlyZS5leHRlbnNpb25zKSB7XG4gICAgX3JlZiA9IENvZmZlZVNjcmlwdC5GSUxFX0VYVEVOU0lPTlM7XG4gICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICBleHQgPSBfcmVmW19pXTtcbiAgICAgIHJlcXVpcmUuZXh0ZW5zaW9uc1tleHRdID0gbG9hZEZpbGU7XG4gICAgfVxuICAgIE1vZHVsZSA9IHJlcXVpcmUoJ21vZHVsZScpO1xuICAgIGZpbmRFeHRlbnNpb24gPSBmdW5jdGlvbihmaWxlbmFtZSkge1xuICAgICAgdmFyIGN1ckV4dGVuc2lvbiwgZXh0ZW5zaW9ucztcbiAgICAgIGV4dGVuc2lvbnMgPSBwYXRoLmJhc2VuYW1lKGZpbGVuYW1lKS5zcGxpdCgnLicpO1xuICAgICAgaWYgKGV4dGVuc2lvbnNbMF0gPT09ICcnKSB7XG4gICAgICAgIGV4dGVuc2lvbnMuc2hpZnQoKTtcbiAgICAgIH1cbiAgICAgIHdoaWxlIChleHRlbnNpb25zLnNoaWZ0KCkpIHtcbiAgICAgICAgY3VyRXh0ZW5zaW9uID0gJy4nICsgZXh0ZW5zaW9ucy5qb2luKCcuJyk7XG4gICAgICAgIGlmIChNb2R1bGUuX2V4dGVuc2lvbnNbY3VyRXh0ZW5zaW9uXSkge1xuICAgICAgICAgIHJldHVybiBjdXJFeHRlbnNpb247XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiAnLmpzJztcbiAgICB9O1xuICAgIE1vZHVsZS5wcm90b3R5cGUubG9hZCA9IGZ1bmN0aW9uKGZpbGVuYW1lKSB7XG4gICAgICB2YXIgZXh0ZW5zaW9uO1xuICAgICAgdGhpcy5maWxlbmFtZSA9IGZpbGVuYW1lO1xuICAgICAgdGhpcy5wYXRocyA9IE1vZHVsZS5fbm9kZU1vZHVsZVBhdGhzKHBhdGguZGlybmFtZShmaWxlbmFtZSkpO1xuICAgICAgZXh0ZW5zaW9uID0gZmluZEV4dGVuc2lvbihmaWxlbmFtZSk7XG4gICAgICBNb2R1bGUuX2V4dGVuc2lvbnNbZXh0ZW5zaW9uXSh0aGlzLCBmaWxlbmFtZSk7XG4gICAgICByZXR1cm4gdGhpcy5sb2FkZWQgPSB0cnVlO1xuICAgIH07XG4gIH1cblxuICBpZiAoY2hpbGRfcHJvY2Vzcykge1xuICAgIGZvcmsgPSBjaGlsZF9wcm9jZXNzLmZvcms7XG4gICAgYmluYXJ5ID0gcmVxdWlyZS5yZXNvbHZlKCcuLi8uLi9iaW4vY29mZmVlJyk7XG4gICAgY2hpbGRfcHJvY2Vzcy5mb3JrID0gZnVuY3Rpb24ocGF0aCwgYXJncywgb3B0aW9ucykge1xuICAgICAgaWYgKGhlbHBlcnMuaXNDb2ZmZWUocGF0aCkpIHtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGFyZ3MpKSB7XG4gICAgICAgICAgb3B0aW9ucyA9IGFyZ3MgfHwge307XG4gICAgICAgICAgYXJncyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIGFyZ3MgPSBbcGF0aF0uY29uY2F0KGFyZ3MpO1xuICAgICAgICBwYXRoID0gYmluYXJ5O1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZvcmsocGF0aCwgYXJncywgb3B0aW9ucyk7XG4gICAgfTtcbiAgfVxuXG59KS5jYWxsKHRoaXMpO1xuIiwiLy8gR2VuZXJhdGVkIGJ5IEljZWRDb2ZmZWVTY3JpcHQgMTA4LjAuMTFcbihmdW5jdGlvbigpIHtcbiAgdmFyIEJBTEFOQ0VEX1BBSVJTLCBDQUxMX0NMT1NFUlMsIEVYUFJFU1NJT05fQ0xPU0UsIEVYUFJFU1NJT05fRU5ELCBFWFBSRVNTSU9OX1NUQVJULCBJTVBMSUNJVF9DQUxMLCBJTVBMSUNJVF9FTkQsIElNUExJQ0lUX0ZVTkMsIElNUExJQ0lUX1VOU1BBQ0VEX0NBTEwsIElOVkVSU0VTLCBMSU5FQlJFQUtTLCBTSU5HTEVfQ0xPU0VSUywgU0lOR0xFX0xJTkVSUywgZ2VuZXJhdGUsIGxlZnQsIHJpdGUsIF9pLCBfbGVuLCBfcmVmLFxuICAgIF9faW5kZXhPZiA9IFtdLmluZGV4T2YgfHwgZnVuY3Rpb24oaXRlbSkgeyBmb3IgKHZhciBpID0gMCwgbCA9IHRoaXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7IGlmIChpIGluIHRoaXMgJiYgdGhpc1tpXSA9PT0gaXRlbSkgcmV0dXJuIGk7IH0gcmV0dXJuIC0xOyB9LFxuICAgIF9fc2xpY2UgPSBbXS5zbGljZTtcblxuICBnZW5lcmF0ZSA9IGZ1bmN0aW9uKHRhZywgdmFsdWUsIG9yaWdpbikge1xuICAgIHZhciB0b2s7XG4gICAgdG9rID0gW3RhZywgdmFsdWVdO1xuICAgIHRvay5nZW5lcmF0ZWQgPSB0cnVlO1xuICAgIGlmIChvcmlnaW4pIHtcbiAgICAgIHRvay5vcmlnaW4gPSBvcmlnaW47XG4gICAgfVxuICAgIHJldHVybiB0b2s7XG4gIH07XG5cbiAgZXhwb3J0cy5SZXdyaXRlciA9IChmdW5jdGlvbigpIHtcbiAgICBmdW5jdGlvbiBSZXdyaXRlcigpIHt9XG5cbiAgICBSZXdyaXRlci5wcm90b3R5cGUucmV3cml0ZSA9IGZ1bmN0aW9uKHRva2Vucykge1xuICAgICAgdGhpcy50b2tlbnMgPSB0b2tlbnM7XG4gICAgICB0aGlzLnJlbW92ZUxlYWRpbmdOZXdsaW5lcygpO1xuICAgICAgdGhpcy5jbG9zZU9wZW5DYWxscygpO1xuICAgICAgdGhpcy5jbG9zZU9wZW5JbmRleGVzKCk7XG4gICAgICB0aGlzLm5vcm1hbGl6ZUxpbmVzKCk7XG4gICAgICB0aGlzLnRhZ1Bvc3RmaXhDb25kaXRpb25hbHMoKTtcbiAgICAgIHRoaXMuYWRkSW1wbGljaXRCcmFjZXNBbmRQYXJlbnMoKTtcbiAgICAgIHRoaXMuYWRkTG9jYXRpb25EYXRhVG9HZW5lcmF0ZWRUb2tlbnMoKTtcbiAgICAgIHJldHVybiB0aGlzLnRva2VucztcbiAgICB9O1xuXG4gICAgUmV3cml0ZXIucHJvdG90eXBlLnNjYW5Ub2tlbnMgPSBmdW5jdGlvbihibG9jaykge1xuICAgICAgdmFyIGksIHRva2VuLCB0b2tlbnM7XG4gICAgICB0b2tlbnMgPSB0aGlzLnRva2VucztcbiAgICAgIGkgPSAwO1xuICAgICAgd2hpbGUgKHRva2VuID0gdG9rZW5zW2ldKSB7XG4gICAgICAgIGkgKz0gYmxvY2suY2FsbCh0aGlzLCB0b2tlbiwgaSwgdG9rZW5zKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG5cbiAgICBSZXdyaXRlci5wcm90b3R5cGUuZGV0ZWN0RW5kID0gZnVuY3Rpb24oaSwgY29uZGl0aW9uLCBhY3Rpb24pIHtcbiAgICAgIHZhciBsZXZlbHMsIHRva2VuLCB0b2tlbnMsIF9yZWYsIF9yZWYxO1xuICAgICAgdG9rZW5zID0gdGhpcy50b2tlbnM7XG4gICAgICBsZXZlbHMgPSAwO1xuICAgICAgd2hpbGUgKHRva2VuID0gdG9rZW5zW2ldKSB7XG4gICAgICAgIGlmIChsZXZlbHMgPT09IDAgJiYgY29uZGl0aW9uLmNhbGwodGhpcywgdG9rZW4sIGkpKSB7XG4gICAgICAgICAgcmV0dXJuIGFjdGlvbi5jYWxsKHRoaXMsIHRva2VuLCBpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRva2VuIHx8IGxldmVscyA8IDApIHtcbiAgICAgICAgICByZXR1cm4gYWN0aW9uLmNhbGwodGhpcywgdG9rZW4sIGkgLSAxKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoX3JlZiA9IHRva2VuWzBdLCBfX2luZGV4T2YuY2FsbChFWFBSRVNTSU9OX1NUQVJULCBfcmVmKSA+PSAwKSB7XG4gICAgICAgICAgbGV2ZWxzICs9IDE7XG4gICAgICAgIH0gZWxzZSBpZiAoX3JlZjEgPSB0b2tlblswXSwgX19pbmRleE9mLmNhbGwoRVhQUkVTU0lPTl9FTkQsIF9yZWYxKSA+PSAwKSB7XG4gICAgICAgICAgbGV2ZWxzIC09IDE7XG4gICAgICAgIH1cbiAgICAgICAgaSArPSAxO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGkgLSAxO1xuICAgIH07XG5cbiAgICBSZXdyaXRlci5wcm90b3R5cGUucmVtb3ZlTGVhZGluZ05ld2xpbmVzID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgaSwgdGFnLCBfaSwgX2xlbiwgX3JlZjtcbiAgICAgIF9yZWYgPSB0aGlzLnRva2VucztcbiAgICAgIGZvciAoaSA9IF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IGkgPSArK19pKSB7XG4gICAgICAgIHRhZyA9IF9yZWZbaV1bMF07XG4gICAgICAgIGlmICh0YWcgIT09ICdURVJNSU5BVE9SJykge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoaSkge1xuICAgICAgICByZXR1cm4gdGhpcy50b2tlbnMuc3BsaWNlKDAsIGkpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBSZXdyaXRlci5wcm90b3R5cGUuY2xvc2VPcGVuQ2FsbHMgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBhY3Rpb24sIGNvbmRpdGlvbjtcbiAgICAgIGNvbmRpdGlvbiA9IGZ1bmN0aW9uKHRva2VuLCBpKSB7XG4gICAgICAgIHZhciBfcmVmO1xuICAgICAgICByZXR1cm4gKChfcmVmID0gdG9rZW5bMF0pID09PSAnKScgfHwgX3JlZiA9PT0gJ0NBTExfRU5EJykgfHwgdG9rZW5bMF0gPT09ICdPVVRERU5UJyAmJiB0aGlzLnRhZyhpIC0gMSkgPT09ICcpJztcbiAgICAgIH07XG4gICAgICBhY3Rpb24gPSBmdW5jdGlvbih0b2tlbiwgaSkge1xuICAgICAgICByZXR1cm4gdGhpcy50b2tlbnNbdG9rZW5bMF0gPT09ICdPVVRERU5UJyA/IGkgLSAxIDogaV1bMF0gPSAnQ0FMTF9FTkQnO1xuICAgICAgfTtcbiAgICAgIHJldHVybiB0aGlzLnNjYW5Ub2tlbnMoZnVuY3Rpb24odG9rZW4sIGkpIHtcbiAgICAgICAgaWYgKHRva2VuWzBdID09PSAnQ0FMTF9TVEFSVCcpIHtcbiAgICAgICAgICB0aGlzLmRldGVjdEVuZChpICsgMSwgY29uZGl0aW9uLCBhY3Rpb24pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAxO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIFJld3JpdGVyLnByb3RvdHlwZS5jbG9zZU9wZW5JbmRleGVzID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgYWN0aW9uLCBjb25kaXRpb247XG4gICAgICBjb25kaXRpb24gPSBmdW5jdGlvbih0b2tlbiwgaSkge1xuICAgICAgICB2YXIgX3JlZjtcbiAgICAgICAgcmV0dXJuIChfcmVmID0gdG9rZW5bMF0pID09PSAnXScgfHwgX3JlZiA9PT0gJ0lOREVYX0VORCc7XG4gICAgICB9O1xuICAgICAgYWN0aW9uID0gZnVuY3Rpb24odG9rZW4sIGkpIHtcbiAgICAgICAgcmV0dXJuIHRva2VuWzBdID0gJ0lOREVYX0VORCc7XG4gICAgICB9O1xuICAgICAgcmV0dXJuIHRoaXMuc2NhblRva2VucyhmdW5jdGlvbih0b2tlbiwgaSkge1xuICAgICAgICBpZiAodG9rZW5bMF0gPT09ICdJTkRFWF9TVEFSVCcpIHtcbiAgICAgICAgICB0aGlzLmRldGVjdEVuZChpICsgMSwgY29uZGl0aW9uLCBhY3Rpb24pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAxO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIFJld3JpdGVyLnByb3RvdHlwZS5tYXRjaFRhZ3MgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBmdXp6LCBpLCBqLCBwYXR0ZXJuLCBfaSwgX3JlZiwgX3JlZjE7XG4gICAgICBpID0gYXJndW1lbnRzWzBdLCBwYXR0ZXJuID0gMiA8PSBhcmd1bWVudHMubGVuZ3RoID8gX19zbGljZS5jYWxsKGFyZ3VtZW50cywgMSkgOiBbXTtcbiAgICAgIGZ1enogPSAwO1xuICAgICAgZm9yIChqID0gX2kgPSAwLCBfcmVmID0gcGF0dGVybi5sZW5ndGg7IDAgPD0gX3JlZiA/IF9pIDwgX3JlZiA6IF9pID4gX3JlZjsgaiA9IDAgPD0gX3JlZiA/ICsrX2kgOiAtLV9pKSB7XG4gICAgICAgIHdoaWxlICh0aGlzLnRhZyhpICsgaiArIGZ1enopID09PSAnSEVSRUNPTU1FTlQnKSB7XG4gICAgICAgICAgZnV6eiArPSAyO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXR0ZXJuW2pdID09IG51bGwpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHBhdHRlcm5bal0gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgcGF0dGVybltqXSA9IFtwYXR0ZXJuW2pdXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoX3JlZjEgPSB0aGlzLnRhZyhpICsgaiArIGZ1enopLCBfX2luZGV4T2YuY2FsbChwYXR0ZXJuW2pdLCBfcmVmMSkgPCAwKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuXG4gICAgUmV3cml0ZXIucHJvdG90eXBlLmxvb2tzT2JqZWN0aXNoID0gZnVuY3Rpb24oaikge1xuICAgICAgcmV0dXJuIHRoaXMubWF0Y2hUYWdzKGosICdAJywgbnVsbCwgJzonKSB8fCB0aGlzLm1hdGNoVGFncyhqLCBudWxsLCAnOicpO1xuICAgIH07XG5cbiAgICBSZXdyaXRlci5wcm90b3R5cGUuZmluZFRhZ3NCYWNrd2FyZHMgPSBmdW5jdGlvbihpLCB0YWdzKSB7XG4gICAgICB2YXIgYmFja1N0YWNrLCBfcmVmLCBfcmVmMSwgX3JlZjIsIF9yZWYzLCBfcmVmNCwgX3JlZjU7XG4gICAgICBiYWNrU3RhY2sgPSBbXTtcbiAgICAgIHdoaWxlIChpID49IDAgJiYgKGJhY2tTdGFjay5sZW5ndGggfHwgKF9yZWYyID0gdGhpcy50YWcoaSksIF9faW5kZXhPZi5jYWxsKHRhZ3MsIF9yZWYyKSA8IDApICYmICgoX3JlZjMgPSB0aGlzLnRhZyhpKSwgX19pbmRleE9mLmNhbGwoRVhQUkVTU0lPTl9TVEFSVCwgX3JlZjMpIDwgMCkgfHwgdGhpcy50b2tlbnNbaV0uZ2VuZXJhdGVkKSAmJiAoX3JlZjQgPSB0aGlzLnRhZyhpKSwgX19pbmRleE9mLmNhbGwoTElORUJSRUFLUywgX3JlZjQpIDwgMCkpKSB7XG4gICAgICAgIGlmIChfcmVmID0gdGhpcy50YWcoaSksIF9faW5kZXhPZi5jYWxsKEVYUFJFU1NJT05fRU5ELCBfcmVmKSA+PSAwKSB7XG4gICAgICAgICAgYmFja1N0YWNrLnB1c2godGhpcy50YWcoaSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmICgoX3JlZjEgPSB0aGlzLnRhZyhpKSwgX19pbmRleE9mLmNhbGwoRVhQUkVTU0lPTl9TVEFSVCwgX3JlZjEpID49IDApICYmIGJhY2tTdGFjay5sZW5ndGgpIHtcbiAgICAgICAgICBiYWNrU3RhY2sucG9wKCk7XG4gICAgICAgIH1cbiAgICAgICAgaSAtPSAxO1xuICAgICAgfVxuICAgICAgcmV0dXJuIF9yZWY1ID0gdGhpcy50YWcoaSksIF9faW5kZXhPZi5jYWxsKHRhZ3MsIF9yZWY1KSA+PSAwO1xuICAgIH07XG5cbiAgICBSZXdyaXRlci5wcm90b3R5cGUuYWRkSW1wbGljaXRCcmFjZXNBbmRQYXJlbnMgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzdGFjaztcbiAgICAgIHN0YWNrID0gW107XG4gICAgICByZXR1cm4gdGhpcy5zY2FuVG9rZW5zKGZ1bmN0aW9uKHRva2VuLCBpLCB0b2tlbnMpIHtcbiAgICAgICAgdmFyIGVuZEltcGxpY2l0Q2FsbCwgZW5kSW1wbGljaXRPYmplY3QsIGZvcndhcmQsIGluSW1wbGljaXQsIGluSW1wbGljaXRDYWxsLCBpbkltcGxpY2l0Q29udHJvbCwgaW5JbXBsaWNpdE9iamVjdCwgbmV3TGluZSwgbmV4dFRhZywgb2Zmc2V0LCBwcmV2VGFnLCBwcmV2VG9rZW4sIHJldCwgcywgc2FtZUxpbmUsIHN0YWNrSWR4LCBzdGFja1RhZywgc3RhY2tUb3AsIHN0YXJ0SWR4LCBzdGFydEltcGxpY2l0Q2FsbCwgc3RhcnRJbXBsaWNpdE9iamVjdCwgc3RhcnRzTGluZSwgdGFnLCBfcmVmLCBfcmVmMSwgX3JlZjIsIF9yZWYzLCBfcmVmNCwgX3JlZjU7XG4gICAgICAgIHRhZyA9IHRva2VuWzBdO1xuICAgICAgICBwcmV2VGFnID0gKHByZXZUb2tlbiA9IGkgPiAwID8gdG9rZW5zW2kgLSAxXSA6IFtdKVswXTtcbiAgICAgICAgbmV4dFRhZyA9IChpIDwgdG9rZW5zLmxlbmd0aCAtIDEgPyB0b2tlbnNbaSArIDFdIDogW10pWzBdO1xuICAgICAgICBzdGFja1RvcCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiBzdGFja1tzdGFjay5sZW5ndGggLSAxXTtcbiAgICAgICAgfTtcbiAgICAgICAgc3RhcnRJZHggPSBpO1xuICAgICAgICBmb3J3YXJkID0gZnVuY3Rpb24obikge1xuICAgICAgICAgIHJldHVybiBpIC0gc3RhcnRJZHggKyBuO1xuICAgICAgICB9O1xuICAgICAgICBpbkltcGxpY2l0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIF9yZWYsIF9yZWYxO1xuICAgICAgICAgIHJldHVybiAoX3JlZiA9IHN0YWNrVG9wKCkpICE9IG51bGwgPyAoX3JlZjEgPSBfcmVmWzJdKSAhPSBudWxsID8gX3JlZjEub3VycyA6IHZvaWQgMCA6IHZvaWQgMDtcbiAgICAgICAgfTtcbiAgICAgICAgaW5JbXBsaWNpdENhbGwgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICB2YXIgX3JlZjtcbiAgICAgICAgICByZXR1cm4gaW5JbXBsaWNpdCgpICYmICgoX3JlZiA9IHN0YWNrVG9wKCkpICE9IG51bGwgPyBfcmVmWzBdIDogdm9pZCAwKSA9PT0gJygnO1xuICAgICAgICB9O1xuICAgICAgICBpbkltcGxpY2l0T2JqZWN0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIF9yZWY7XG4gICAgICAgICAgcmV0dXJuIGluSW1wbGljaXQoKSAmJiAoKF9yZWYgPSBzdGFja1RvcCgpKSAhPSBudWxsID8gX3JlZlswXSA6IHZvaWQgMCkgPT09ICd7JztcbiAgICAgICAgfTtcbiAgICAgICAgaW5JbXBsaWNpdENvbnRyb2wgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICB2YXIgX3JlZjtcbiAgICAgICAgICByZXR1cm4gaW5JbXBsaWNpdCAmJiAoKF9yZWYgPSBzdGFja1RvcCgpKSAhPSBudWxsID8gX3JlZlswXSA6IHZvaWQgMCkgPT09ICdDT05UUk9MJztcbiAgICAgICAgfTtcbiAgICAgICAgc3RhcnRJbXBsaWNpdENhbGwgPSBmdW5jdGlvbihqKSB7XG4gICAgICAgICAgdmFyIGlkeDtcbiAgICAgICAgICBpZHggPSBqICE9IG51bGwgPyBqIDogaTtcbiAgICAgICAgICBzdGFjay5wdXNoKFtcbiAgICAgICAgICAgICcoJywgaWR4LCB7XG4gICAgICAgICAgICAgIG91cnM6IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICBdKTtcbiAgICAgICAgICB0b2tlbnMuc3BsaWNlKGlkeCwgMCwgZ2VuZXJhdGUoJ0NBTExfU1RBUlQnLCAnKCcpKTtcbiAgICAgICAgICBpZiAoaiA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gaSArPSAxO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgZW5kSW1wbGljaXRDYWxsID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgc3RhY2sucG9wKCk7XG4gICAgICAgICAgdG9rZW5zLnNwbGljZShpLCAwLCBnZW5lcmF0ZSgnQ0FMTF9FTkQnLCAnKScpKTtcbiAgICAgICAgICByZXR1cm4gaSArPSAxO1xuICAgICAgICB9O1xuICAgICAgICBzdGFydEltcGxpY2l0T2JqZWN0ID0gZnVuY3Rpb24oaiwgc3RhcnRzTGluZSkge1xuICAgICAgICAgIHZhciBpZHg7XG4gICAgICAgICAgaWYgKHN0YXJ0c0xpbmUgPT0gbnVsbCkge1xuICAgICAgICAgICAgc3RhcnRzTGluZSA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlkeCA9IGogIT0gbnVsbCA/IGogOiBpO1xuICAgICAgICAgIHN0YWNrLnB1c2goW1xuICAgICAgICAgICAgJ3snLCBpZHgsIHtcbiAgICAgICAgICAgICAgc2FtZUxpbmU6IHRydWUsXG4gICAgICAgICAgICAgIHN0YXJ0c0xpbmU6IHN0YXJ0c0xpbmUsXG4gICAgICAgICAgICAgIG91cnM6IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICBdKTtcbiAgICAgICAgICB0b2tlbnMuc3BsaWNlKGlkeCwgMCwgZ2VuZXJhdGUoJ3snLCBnZW5lcmF0ZShuZXcgU3RyaW5nKCd7JykpLCB0b2tlbikpO1xuICAgICAgICAgIGlmIChqID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBpICs9IDE7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBlbmRJbXBsaWNpdE9iamVjdCA9IGZ1bmN0aW9uKGopIHtcbiAgICAgICAgICBqID0gaiAhPSBudWxsID8gaiA6IGk7XG4gICAgICAgICAgc3RhY2sucG9wKCk7XG4gICAgICAgICAgdG9rZW5zLnNwbGljZShqLCAwLCBnZW5lcmF0ZSgnfScsICd9JywgdG9rZW4pKTtcbiAgICAgICAgICByZXR1cm4gaSArPSAxO1xuICAgICAgICB9O1xuICAgICAgICBpZiAoaW5JbXBsaWNpdENhbGwoKSAmJiAodGFnID09PSAnSUYnIHx8IHRhZyA9PT0gJ1RSWScgfHwgdGFnID09PSAnRklOQUxMWScgfHwgdGFnID09PSAnQ0FUQ0gnIHx8IHRhZyA9PT0gJ0NMQVNTJyB8fCB0YWcgPT09ICdTV0lUQ0gnKSkge1xuICAgICAgICAgIHN0YWNrLnB1c2goW1xuICAgICAgICAgICAgJ0NPTlRST0wnLCBpLCB7XG4gICAgICAgICAgICAgIG91cnM6IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICBdKTtcbiAgICAgICAgICByZXR1cm4gZm9yd2FyZCgxKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGFnID09PSAnSU5ERU5UJyAmJiBpbkltcGxpY2l0KCkpIHtcbiAgICAgICAgICBpZiAocHJldlRhZyAhPT0gJz0+JyAmJiBwcmV2VGFnICE9PSAnLT4nICYmIHByZXZUYWcgIT09ICdbJyAmJiBwcmV2VGFnICE9PSAnKCcgJiYgcHJldlRhZyAhPT0gJywnICYmIHByZXZUYWcgIT09ICd7JyAmJiBwcmV2VGFnICE9PSAnVFJZJyAmJiBwcmV2VGFnICE9PSAnRUxTRScgJiYgcHJldlRhZyAhPT0gJz0nKSB7XG4gICAgICAgICAgICB3aGlsZSAoaW5JbXBsaWNpdENhbGwoKSkge1xuICAgICAgICAgICAgICBlbmRJbXBsaWNpdENhbGwoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGluSW1wbGljaXRDb250cm9sKCkpIHtcbiAgICAgICAgICAgIHN0YWNrLnBvcCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBzdGFjay5wdXNoKFt0YWcsIGldKTtcbiAgICAgICAgICByZXR1cm4gZm9yd2FyZCgxKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoX19pbmRleE9mLmNhbGwoRVhQUkVTU0lPTl9TVEFSVCwgdGFnKSA+PSAwKSB7XG4gICAgICAgICAgc3RhY2sucHVzaChbdGFnLCBpXSk7XG4gICAgICAgICAgcmV0dXJuIGZvcndhcmQoMSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9faW5kZXhPZi5jYWxsKEVYUFJFU1NJT05fRU5ELCB0YWcpID49IDApIHtcbiAgICAgICAgICB3aGlsZSAoaW5JbXBsaWNpdCgpKSB7XG4gICAgICAgICAgICBpZiAoaW5JbXBsaWNpdENhbGwoKSkge1xuICAgICAgICAgICAgICBlbmRJbXBsaWNpdENhbGwoKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaW5JbXBsaWNpdE9iamVjdCgpKSB7XG4gICAgICAgICAgICAgIGVuZEltcGxpY2l0T2JqZWN0KCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBzdGFjay5wb3AoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgc3RhY2sucG9wKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKChfX2luZGV4T2YuY2FsbChJTVBMSUNJVF9GVU5DLCB0YWcpID49IDAgJiYgdG9rZW4uc3BhY2VkICYmICF0b2tlbi5zdHJpbmdFbmQgfHwgdGFnID09PSAnPycgJiYgaSA+IDAgJiYgIXRva2Vuc1tpIC0gMV0uc3BhY2VkKSAmJiAoX19pbmRleE9mLmNhbGwoSU1QTElDSVRfQ0FMTCwgbmV4dFRhZykgPj0gMCB8fCBfX2luZGV4T2YuY2FsbChJTVBMSUNJVF9VTlNQQUNFRF9DQUxMLCBuZXh0VGFnKSA+PSAwICYmICEoKF9yZWYgPSB0b2tlbnNbaSArIDFdKSAhPSBudWxsID8gX3JlZi5zcGFjZWQgOiB2b2lkIDApICYmICEoKF9yZWYxID0gdG9rZW5zW2kgKyAxXSkgIT0gbnVsbCA/IF9yZWYxLm5ld0xpbmUgOiB2b2lkIDApKSkge1xuICAgICAgICAgIGlmICh0YWcgPT09ICc/Jykge1xuICAgICAgICAgICAgdGFnID0gdG9rZW5bMF0gPSAnRlVOQ19FWElTVCc7XG4gICAgICAgICAgfVxuICAgICAgICAgIHN0YXJ0SW1wbGljaXRDYWxsKGkgKyAxKTtcbiAgICAgICAgICByZXQgPSBmb3J3YXJkKDIpO1xuICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9faW5kZXhPZi5jYWxsKElNUExJQ0lUX0ZVTkMsIHRhZykgPj0gMCAmJiB0aGlzLm1hdGNoVGFncyhpICsgMSwgJ0lOREVOVCcsIG51bGwsICc6JykgJiYgIXRoaXMuZmluZFRhZ3NCYWNrd2FyZHMoaSwgWydDTEFTUycsICdFWFRFTkRTJywgJ0lGJywgJ0NBVENIJywgJ1NXSVRDSCcsICdMRUFESU5HX1dIRU4nLCAnRk9SJywgJ1dISUxFJywgJ1VOVElMJ10pKSB7XG4gICAgICAgICAgc3RhcnRJbXBsaWNpdENhbGwoaSArIDEpO1xuICAgICAgICAgIHN0YWNrLnB1c2goWydJTkRFTlQnLCBpICsgMl0pO1xuICAgICAgICAgIHJldHVybiBmb3J3YXJkKDMpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0YWcgPT09ICc6Jykge1xuICAgICAgICAgIGlmICh0aGlzLnRhZyhpIC0gMikgPT09ICdAJykge1xuICAgICAgICAgICAgcyA9IGkgLSAyO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzID0gaSAtIDE7XG4gICAgICAgICAgfVxuICAgICAgICAgIHdoaWxlICh0aGlzLnRhZyhzIC0gMikgPT09ICdIRVJFQ09NTUVOVCcpIHtcbiAgICAgICAgICAgIHMgLT0gMjtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5pbnNpZGVGb3JEZWNsYXJhdGlvbiA9IG5leHRUYWcgPT09ICdGT1InO1xuICAgICAgICAgIHN0YXJ0c0xpbmUgPSBzID09PSAwIHx8IChfcmVmMiA9IHRoaXMudGFnKHMgLSAxKSwgX19pbmRleE9mLmNhbGwoTElORUJSRUFLUywgX3JlZjIpID49IDApIHx8IHRva2Vuc1tzIC0gMV0ubmV3TGluZTtcbiAgICAgICAgICBpZiAoc3RhY2tUb3AoKSkge1xuICAgICAgICAgICAgX3JlZjMgPSBzdGFja1RvcCgpLCBzdGFja1RhZyA9IF9yZWYzWzBdLCBzdGFja0lkeCA9IF9yZWYzWzFdO1xuICAgICAgICAgICAgaWYgKChzdGFja1RhZyA9PT0gJ3snIHx8IHN0YWNrVGFnID09PSAnSU5ERU5UJyAmJiB0aGlzLnRhZyhzdGFja0lkeCAtIDEpID09PSAneycpICYmIChzdGFydHNMaW5lIHx8IHRoaXMudGFnKHMgLSAxKSA9PT0gJywnIHx8IHRoaXMudGFnKHMgLSAxKSA9PT0gJ3snKSkge1xuICAgICAgICAgICAgICByZXR1cm4gZm9yd2FyZCgxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgc3RhcnRJbXBsaWNpdE9iamVjdChzLCAhIXN0YXJ0c0xpbmUpO1xuICAgICAgICAgIHJldHVybiBmb3J3YXJkKDIpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbkltcGxpY2l0T2JqZWN0KCkgJiYgX19pbmRleE9mLmNhbGwoTElORUJSRUFLUywgdGFnKSA+PSAwKSB7XG4gICAgICAgICAgc3RhY2tUb3AoKVsyXS5zYW1lTGluZSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIG5ld0xpbmUgPSBwcmV2VGFnID09PSAnT1VUREVOVCcgfHwgcHJldlRva2VuLm5ld0xpbmU7XG4gICAgICAgIGlmIChfX2luZGV4T2YuY2FsbChJTVBMSUNJVF9FTkQsIHRhZykgPj0gMCB8fCBfX2luZGV4T2YuY2FsbChDQUxMX0NMT1NFUlMsIHRhZykgPj0gMCAmJiBuZXdMaW5lKSB7XG4gICAgICAgICAgd2hpbGUgKGluSW1wbGljaXQoKSkge1xuICAgICAgICAgICAgX3JlZjQgPSBzdGFja1RvcCgpLCBzdGFja1RhZyA9IF9yZWY0WzBdLCBzdGFja0lkeCA9IF9yZWY0WzFdLCAoX3JlZjUgPSBfcmVmNFsyXSwgc2FtZUxpbmUgPSBfcmVmNS5zYW1lTGluZSwgc3RhcnRzTGluZSA9IF9yZWY1LnN0YXJ0c0xpbmUpO1xuICAgICAgICAgICAgaWYgKGluSW1wbGljaXRDYWxsKCkgJiYgcHJldlRhZyAhPT0gJywnKSB7XG4gICAgICAgICAgICAgIGVuZEltcGxpY2l0Q2FsbCgpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChpbkltcGxpY2l0T2JqZWN0KCkgJiYgIXRoaXMuaW5zaWRlRm9yRGVjbGFyYXRpb24gJiYgc2FtZUxpbmUgJiYgdGFnICE9PSAnVEVSTUlOQVRPUicgJiYgcHJldlRhZyAhPT0gJzonICYmIGVuZEltcGxpY2l0T2JqZWN0KCkpIHtcblxuICAgICAgICAgICAgfSBlbHNlIGlmIChpbkltcGxpY2l0T2JqZWN0KCkgJiYgdGFnID09PSAnVEVSTUlOQVRPUicgJiYgcHJldlRhZyAhPT0gJywnICYmICEoc3RhcnRzTGluZSAmJiB0aGlzLmxvb2tzT2JqZWN0aXNoKGkgKyAxKSkpIHtcbiAgICAgICAgICAgICAgZW5kSW1wbGljaXRPYmplY3QoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodGFnID09PSAnLCcgJiYgIXRoaXMubG9va3NPYmplY3Rpc2goaSArIDEpICYmIGluSW1wbGljaXRPYmplY3QoKSAmJiAhdGhpcy5pbnNpZGVGb3JEZWNsYXJhdGlvbiAmJiAobmV4dFRhZyAhPT0gJ1RFUk1JTkFUT1InIHx8ICF0aGlzLmxvb2tzT2JqZWN0aXNoKGkgKyAyKSkpIHtcbiAgICAgICAgICBvZmZzZXQgPSBuZXh0VGFnID09PSAnT1VUREVOVCcgPyAxIDogMDtcbiAgICAgICAgICB3aGlsZSAoaW5JbXBsaWNpdE9iamVjdCgpKSB7XG4gICAgICAgICAgICBlbmRJbXBsaWNpdE9iamVjdChpICsgb2Zmc2V0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZvcndhcmQoMSk7XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgUmV3cml0ZXIucHJvdG90eXBlLmFkZExvY2F0aW9uRGF0YVRvR2VuZXJhdGVkVG9rZW5zID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5zY2FuVG9rZW5zKGZ1bmN0aW9uKHRva2VuLCBpLCB0b2tlbnMpIHtcbiAgICAgICAgdmFyIGNvbHVtbiwgbGluZSwgbmV4dExvY2F0aW9uLCBwcmV2TG9jYXRpb24sIF9yZWYsIF9yZWYxO1xuICAgICAgICBpZiAodG9rZW5bMl0pIHtcbiAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoISh0b2tlbi5nZW5lcmF0ZWQgfHwgdG9rZW4uZXhwbGljaXQpKSB7XG4gICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRva2VuWzBdID09PSAneycgJiYgKG5leHRMb2NhdGlvbiA9IChfcmVmID0gdG9rZW5zW2kgKyAxXSkgIT0gbnVsbCA/IF9yZWZbMl0gOiB2b2lkIDApKSB7XG4gICAgICAgICAgbGluZSA9IG5leHRMb2NhdGlvbi5maXJzdF9saW5lLCBjb2x1bW4gPSBuZXh0TG9jYXRpb24uZmlyc3RfY29sdW1uO1xuICAgICAgICB9IGVsc2UgaWYgKHByZXZMb2NhdGlvbiA9IChfcmVmMSA9IHRva2Vuc1tpIC0gMV0pICE9IG51bGwgPyBfcmVmMVsyXSA6IHZvaWQgMCkge1xuICAgICAgICAgIGxpbmUgPSBwcmV2TG9jYXRpb24ubGFzdF9saW5lLCBjb2x1bW4gPSBwcmV2TG9jYXRpb24ubGFzdF9jb2x1bW47XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbGluZSA9IGNvbHVtbiA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgdG9rZW5bMl0gPSB7XG4gICAgICAgICAgZmlyc3RfbGluZTogbGluZSxcbiAgICAgICAgICBmaXJzdF9jb2x1bW46IGNvbHVtbixcbiAgICAgICAgICBsYXN0X2xpbmU6IGxpbmUsXG4gICAgICAgICAgbGFzdF9jb2x1bW46IGNvbHVtblxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gMTtcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBSZXdyaXRlci5wcm90b3R5cGUubm9ybWFsaXplTGluZXMgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBhY3Rpb24sIGNvbmRpdGlvbiwgaW5kZW50LCBvdXRkZW50LCBzdGFydGVyO1xuICAgICAgc3RhcnRlciA9IGluZGVudCA9IG91dGRlbnQgPSBudWxsO1xuICAgICAgY29uZGl0aW9uID0gZnVuY3Rpb24odG9rZW4sIGkpIHtcbiAgICAgICAgdmFyIF9yZWYsIF9yZWYxLCBfcmVmMiwgX3JlZjM7XG4gICAgICAgIHJldHVybiB0b2tlblsxXSAhPT0gJzsnICYmIChfcmVmID0gdG9rZW5bMF0sIF9faW5kZXhPZi5jYWxsKFNJTkdMRV9DTE9TRVJTLCBfcmVmKSA+PSAwKSAmJiAhKHRva2VuWzBdID09PSAnVEVSTUlOQVRPUicgJiYgKF9yZWYxID0gdGhpcy50YWcoaSArIDEpLCBfX2luZGV4T2YuY2FsbChFWFBSRVNTSU9OX0NMT1NFLCBfcmVmMSkgPj0gMCkpICYmICEodG9rZW5bMF0gPT09ICdFTFNFJyAmJiBzdGFydGVyICE9PSAnVEhFTicpICYmICEoKChfcmVmMiA9IHRva2VuWzBdKSA9PT0gJ0NBVENIJyB8fCBfcmVmMiA9PT0gJ0ZJTkFMTFknKSAmJiAoc3RhcnRlciA9PT0gJy0+JyB8fCBzdGFydGVyID09PSAnPT4nKSkgfHwgKF9yZWYzID0gdG9rZW5bMF0sIF9faW5kZXhPZi5jYWxsKENBTExfQ0xPU0VSUywgX3JlZjMpID49IDApICYmIHRoaXMudG9rZW5zW2kgLSAxXS5uZXdMaW5lO1xuICAgICAgfTtcbiAgICAgIGFjdGlvbiA9IGZ1bmN0aW9uKHRva2VuLCBpKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRva2Vucy5zcGxpY2UoKHRoaXMudGFnKGkgLSAxKSA9PT0gJywnID8gaSAtIDEgOiBpKSwgMCwgb3V0ZGVudCk7XG4gICAgICB9O1xuICAgICAgcmV0dXJuIHRoaXMuc2NhblRva2VucyhmdW5jdGlvbih0b2tlbiwgaSwgdG9rZW5zKSB7XG4gICAgICAgIHZhciBqLCB0YWcsIF9pLCBfcmVmLCBfcmVmMSwgX3JlZjI7XG4gICAgICAgIHRhZyA9IHRva2VuWzBdO1xuICAgICAgICBpZiAodGFnID09PSAnVEVSTUlOQVRPUicpIHtcbiAgICAgICAgICBpZiAodGhpcy50YWcoaSArIDEpID09PSAnRUxTRScgJiYgdGhpcy50YWcoaSAtIDEpICE9PSAnT1VUREVOVCcpIHtcbiAgICAgICAgICAgIHRva2Vucy5zcGxpY2UuYXBwbHkodG9rZW5zLCBbaSwgMV0uY29uY2F0KF9fc2xpY2UuY2FsbCh0aGlzLmluZGVudGF0aW9uKCkpKSk7XG4gICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKF9yZWYgPSB0aGlzLnRhZyhpICsgMSksIF9faW5kZXhPZi5jYWxsKEVYUFJFU1NJT05fQ0xPU0UsIF9yZWYpID49IDApIHtcbiAgICAgICAgICAgIHRva2Vucy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRhZyA9PT0gJ0NBVENIJykge1xuICAgICAgICAgIGZvciAoaiA9IF9pID0gMTsgX2kgPD0gMjsgaiA9ICsrX2kpIHtcbiAgICAgICAgICAgIGlmICghKChfcmVmMSA9IHRoaXMudGFnKGkgKyBqKSkgPT09ICdPVVRERU5UJyB8fCBfcmVmMSA9PT0gJ1RFUk1JTkFUT1InIHx8IF9yZWYxID09PSAnRklOQUxMWScpKSB7XG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdG9rZW5zLnNwbGljZS5hcHBseSh0b2tlbnMsIFtpICsgaiwgMF0uY29uY2F0KF9fc2xpY2UuY2FsbCh0aGlzLmluZGVudGF0aW9uKCkpKSk7XG4gICAgICAgICAgICByZXR1cm4gMiArIGo7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChfX2luZGV4T2YuY2FsbChTSU5HTEVfTElORVJTLCB0YWcpID49IDAgJiYgdGhpcy50YWcoaSArIDEpICE9PSAnSU5ERU5UJyAmJiAhKHRhZyA9PT0gJ0VMU0UnICYmIHRoaXMudGFnKGkgKyAxKSA9PT0gJ0lGJykpIHtcbiAgICAgICAgICBzdGFydGVyID0gdGFnO1xuICAgICAgICAgIF9yZWYyID0gdGhpcy5pbmRlbnRhdGlvbih0b2tlbnNbaV0pLCBpbmRlbnQgPSBfcmVmMlswXSwgb3V0ZGVudCA9IF9yZWYyWzFdO1xuICAgICAgICAgIGlmIChzdGFydGVyID09PSAnVEhFTicpIHtcbiAgICAgICAgICAgIGluZGVudC5mcm9tVGhlbiA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRva2Vucy5zcGxpY2UoaSArIDEsIDAsIGluZGVudCk7XG4gICAgICAgICAgdGhpcy5kZXRlY3RFbmQoaSArIDIsIGNvbmRpdGlvbiwgYWN0aW9uKTtcbiAgICAgICAgICBpZiAodGFnID09PSAnVEhFTicpIHtcbiAgICAgICAgICAgIHRva2Vucy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAxO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIFJld3JpdGVyLnByb3RvdHlwZS50YWdQb3N0Zml4Q29uZGl0aW9uYWxzID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgYWN0aW9uLCBjb25kaXRpb24sIG9yaWdpbmFsO1xuICAgICAgb3JpZ2luYWwgPSBudWxsO1xuICAgICAgY29uZGl0aW9uID0gZnVuY3Rpb24odG9rZW4sIGkpIHtcbiAgICAgICAgdmFyIHByZXZUYWcsIHRhZztcbiAgICAgICAgdGFnID0gdG9rZW5bMF07XG4gICAgICAgIHByZXZUYWcgPSB0aGlzLnRva2Vuc1tpIC0gMV1bMF07XG4gICAgICAgIHJldHVybiB0YWcgPT09ICdURVJNSU5BVE9SJyB8fCAodGFnID09PSAnSU5ERU5UJyAmJiBfX2luZGV4T2YuY2FsbChTSU5HTEVfTElORVJTLCBwcmV2VGFnKSA8IDApO1xuICAgICAgfTtcbiAgICAgIGFjdGlvbiA9IGZ1bmN0aW9uKHRva2VuLCBpKSB7XG4gICAgICAgIGlmICh0b2tlblswXSAhPT0gJ0lOREVOVCcgfHwgKHRva2VuLmdlbmVyYXRlZCAmJiAhdG9rZW4uZnJvbVRoZW4pKSB7XG4gICAgICAgICAgcmV0dXJuIG9yaWdpbmFsWzBdID0gJ1BPU1RfJyArIG9yaWdpbmFsWzBdO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgcmV0dXJuIHRoaXMuc2NhblRva2VucyhmdW5jdGlvbih0b2tlbiwgaSkge1xuICAgICAgICBpZiAodG9rZW5bMF0gIT09ICdJRicpIHtcbiAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgfVxuICAgICAgICBvcmlnaW5hbCA9IHRva2VuO1xuICAgICAgICB0aGlzLmRldGVjdEVuZChpICsgMSwgY29uZGl0aW9uLCBhY3Rpb24pO1xuICAgICAgICByZXR1cm4gMTtcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBSZXdyaXRlci5wcm90b3R5cGUuaW5kZW50YXRpb24gPSBmdW5jdGlvbihvcmlnaW4pIHtcbiAgICAgIHZhciBpbmRlbnQsIG91dGRlbnQ7XG4gICAgICBpbmRlbnQgPSBbJ0lOREVOVCcsIDJdO1xuICAgICAgb3V0ZGVudCA9IFsnT1VUREVOVCcsIDJdO1xuICAgICAgaWYgKG9yaWdpbikge1xuICAgICAgICBpbmRlbnQuZ2VuZXJhdGVkID0gb3V0ZGVudC5nZW5lcmF0ZWQgPSB0cnVlO1xuICAgICAgICBpbmRlbnQub3JpZ2luID0gb3V0ZGVudC5vcmlnaW4gPSBvcmlnaW47XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpbmRlbnQuZXhwbGljaXQgPSBvdXRkZW50LmV4cGxpY2l0ID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBbaW5kZW50LCBvdXRkZW50XTtcbiAgICB9O1xuXG4gICAgUmV3cml0ZXIucHJvdG90eXBlLmdlbmVyYXRlID0gZ2VuZXJhdGU7XG5cbiAgICBSZXdyaXRlci5wcm90b3R5cGUudGFnID0gZnVuY3Rpb24oaSkge1xuICAgICAgdmFyIF9yZWY7XG4gICAgICByZXR1cm4gKF9yZWYgPSB0aGlzLnRva2Vuc1tpXSkgIT0gbnVsbCA/IF9yZWZbMF0gOiB2b2lkIDA7XG4gICAgfTtcblxuICAgIHJldHVybiBSZXdyaXRlcjtcblxuICB9KSgpO1xuXG4gIEJBTEFOQ0VEX1BBSVJTID0gW1snKCcsICcpJ10sIFsnWycsICddJ10sIFsneycsICd9J10sIFsnSU5ERU5UJywgJ09VVERFTlQnXSwgWydDQUxMX1NUQVJUJywgJ0NBTExfRU5EJ10sIFsnUEFSQU1fU1RBUlQnLCAnUEFSQU1fRU5EJ10sIFsnSU5ERVhfU1RBUlQnLCAnSU5ERVhfRU5EJ11dO1xuXG4gIGV4cG9ydHMuSU5WRVJTRVMgPSBJTlZFUlNFUyA9IHt9O1xuXG4gIEVYUFJFU1NJT05fU1RBUlQgPSBbXTtcblxuICBFWFBSRVNTSU9OX0VORCA9IFtdO1xuXG4gIGZvciAoX2kgPSAwLCBfbGVuID0gQkFMQU5DRURfUEFJUlMubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICBfcmVmID0gQkFMQU5DRURfUEFJUlNbX2ldLCBsZWZ0ID0gX3JlZlswXSwgcml0ZSA9IF9yZWZbMV07XG4gICAgRVhQUkVTU0lPTl9TVEFSVC5wdXNoKElOVkVSU0VTW3JpdGVdID0gbGVmdCk7XG4gICAgRVhQUkVTU0lPTl9FTkQucHVzaChJTlZFUlNFU1tsZWZ0XSA9IHJpdGUpO1xuICB9XG5cbiAgRVhQUkVTU0lPTl9DTE9TRSA9IFsnQ0FUQ0gnLCAnVEhFTicsICdFTFNFJywgJ0ZJTkFMTFknXS5jb25jYXQoRVhQUkVTU0lPTl9FTkQpO1xuXG4gIElNUExJQ0lUX0ZVTkMgPSBbJ0lERU5USUZJRVInLCAnU1VQRVInLCAnKScsICdDQUxMX0VORCcsICddJywgJ0lOREVYX0VORCcsICdAJywgJ1RISVMnXTtcblxuICBJTVBMSUNJVF9DQUxMID0gWydJREVOVElGSUVSJywgJ05VTUJFUicsICdTVFJJTkcnLCAnSlMnLCAnUkVHRVgnLCAnTkVXJywgJ1BBUkFNX1NUQVJUJywgJ0NMQVNTJywgJ0lGJywgJ1RSWScsICdTV0lUQ0gnLCAnVEhJUycsICdCT09MJywgJ05VTEwnLCAnVU5ERUZJTkVEJywgJ1VOQVJZJywgJ1lJRUxEJywgJ1VOQVJZX01BVEgnLCAnU1VQRVInLCAnVEhST1cnLCAnQCcsICctPicsICc9PicsICdbJywgJygnLCAneycsICctLScsICcrKyddO1xuXG4gIElNUExJQ0lUX1VOU1BBQ0VEX0NBTEwgPSBbJysnLCAnLSddO1xuXG4gIElNUExJQ0lUX0VORCA9IFsnUE9TVF9JRicsICdGT1InLCAnV0hJTEUnLCAnVU5USUwnLCAnV0hFTicsICdCWScsICdMT09QJywgJ1RFUk1JTkFUT1InXTtcblxuICBTSU5HTEVfTElORVJTID0gWydFTFNFJywgJy0+JywgJz0+JywgJ1RSWScsICdGSU5BTExZJywgJ1RIRU4nXTtcblxuICBTSU5HTEVfQ0xPU0VSUyA9IFsnVEVSTUlOQVRPUicsICdDQVRDSCcsICdGSU5BTExZJywgJ0VMU0UnLCAnT1VUREVOVCcsICdMRUFESU5HX1dIRU4nXTtcblxuICBMSU5FQlJFQUtTID0gWydURVJNSU5BVE9SJywgJ0lOREVOVCcsICdPVVRERU5UJ107XG5cbiAgQ0FMTF9DTE9TRVJTID0gWycuJywgJz8uJywgJzo6JywgJz86OiddO1xuXG4gIElNUExJQ0lUX0ZVTkMucHVzaCgnREVGRVInKTtcblxuICBJTVBMSUNJVF9DQUxMLnB1c2goJ0RFRkVSJyk7XG5cbiAgSU1QTElDSVRfRU5ELnB1c2goJ0FXQUlUJyk7XG5cbn0pLmNhbGwodGhpcyk7XG4iLCIvLyBHZW5lcmF0ZWQgYnkgSWNlZENvZmZlZVNjcmlwdCAxMDguMC4xMVxuKGZ1bmN0aW9uKCkge1xuICB2YXIgU2NvcGUsIGV4dGVuZCwgaWNlZCwgbGFzdCwgX3JlZjtcblxuICBfcmVmID0gcmVxdWlyZSgnLi9oZWxwZXJzJyksIGV4dGVuZCA9IF9yZWYuZXh0ZW5kLCBsYXN0ID0gX3JlZi5sYXN0O1xuXG4gIGljZWQgPSByZXF1aXJlKCdpY2VkLXJ1bnRpbWUnKTtcblxuICBleHBvcnRzLlNjb3BlID0gU2NvcGUgPSAoZnVuY3Rpb24oKSB7XG4gICAgU2NvcGUucm9vdCA9IG51bGw7XG5cbiAgICBmdW5jdGlvbiBTY29wZShwYXJlbnQsIGV4cHJlc3Npb25zLCBtZXRob2QpIHtcbiAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgdGhpcy5leHByZXNzaW9ucyA9IGV4cHJlc3Npb25zO1xuICAgICAgdGhpcy5tZXRob2QgPSBtZXRob2Q7XG4gICAgICB0aGlzLnZhcmlhYmxlcyA9IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdhcmd1bWVudHMnLFxuICAgICAgICAgIHR5cGU6ICdhcmd1bWVudHMnXG4gICAgICAgIH1cbiAgICAgIF07XG4gICAgICB0aGlzLnBvc2l0aW9ucyA9IHt9O1xuICAgICAgaWYgKCF0aGlzLnBhcmVudCkge1xuICAgICAgICBTY29wZS5yb290ID0gdGhpcztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBTY29wZS5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24obmFtZSwgdHlwZSwgaW1tZWRpYXRlKSB7XG4gICAgICBpZiAodGhpcy5zaGFyZWQgJiYgIWltbWVkaWF0ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQuYWRkKG5hbWUsIHR5cGUsIGltbWVkaWF0ZSk7XG4gICAgICB9XG4gICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHRoaXMucG9zaXRpb25zLCBuYW1lKSkge1xuICAgICAgICByZXR1cm4gdGhpcy52YXJpYWJsZXNbdGhpcy5wb3NpdGlvbnNbbmFtZV1dLnR5cGUgPSB0eXBlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucG9zaXRpb25zW25hbWVdID0gdGhpcy52YXJpYWJsZXMucHVzaCh7XG4gICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICB0eXBlOiB0eXBlXG4gICAgICAgIH0pIC0gMTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgU2NvcGUucHJvdG90eXBlLm5hbWVkTWV0aG9kID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgX3JlZjE7XG4gICAgICBpZiAoKChfcmVmMSA9IHRoaXMubWV0aG9kKSAhPSBudWxsID8gX3JlZjEubmFtZSA6IHZvaWQgMCkgfHwgIXRoaXMucGFyZW50KSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1ldGhvZDtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLnBhcmVudC5uYW1lZE1ldGhvZCgpO1xuICAgIH07XG5cbiAgICBTY29wZS5wcm90b3R5cGUuZmluZCA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgIGlmICh0aGlzLmNoZWNrKG5hbWUpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgdGhpcy5hZGQobmFtZSwgJ3ZhcicpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG5cbiAgICBTY29wZS5wcm90b3R5cGUucGFyYW1ldGVyID0gZnVuY3Rpb24obmFtZSkge1xuICAgICAgaWYgKHRoaXMuc2hhcmVkICYmIHRoaXMucGFyZW50LmNoZWNrKG5hbWUsIHRydWUpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLmFkZChuYW1lLCAncGFyYW0nKTtcbiAgICB9O1xuXG4gICAgU2NvcGUucHJvdG90eXBlLmNoZWNrID0gZnVuY3Rpb24obmFtZSkge1xuICAgICAgdmFyIF9yZWYxO1xuICAgICAgcmV0dXJuICEhKHRoaXMudHlwZShuYW1lKSB8fCAoKF9yZWYxID0gdGhpcy5wYXJlbnQpICE9IG51bGwgPyBfcmVmMS5jaGVjayhuYW1lKSA6IHZvaWQgMCkpO1xuICAgIH07XG5cbiAgICBTY29wZS5wcm90b3R5cGUudGVtcG9yYXJ5ID0gZnVuY3Rpb24obmFtZSwgaW5kZXgpIHtcbiAgICAgIGlmIChuYW1lLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgcmV0dXJuICdfJyArIG5hbWUgKyAoaW5kZXggPiAxID8gaW5kZXggLSAxIDogJycpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuICdfJyArIChpbmRleCArIHBhcnNlSW50KG5hbWUsIDM2KSkudG9TdHJpbmcoMzYpLnJlcGxhY2UoL1xcZC9nLCAnYScpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBTY29wZS5wcm90b3R5cGUudHlwZSA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgIHZhciB2LCBfaSwgX2xlbiwgX3JlZjE7XG4gICAgICBfcmVmMSA9IHRoaXMudmFyaWFibGVzO1xuICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmMS5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICB2ID0gX3JlZjFbX2ldO1xuICAgICAgICBpZiAodi5uYW1lID09PSBuYW1lKSB7XG4gICAgICAgICAgcmV0dXJuIHYudHlwZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcblxuICAgIFNjb3BlLnByb3RvdHlwZS5mcmVlVmFyaWFibGUgPSBmdW5jdGlvbihuYW1lLCByZXNlcnZlKSB7XG4gICAgICB2YXIgaW5kZXgsIHRlbXA7XG4gICAgICBpZiAocmVzZXJ2ZSA9PSBudWxsKSB7XG4gICAgICAgIHJlc2VydmUgPSB0cnVlO1xuICAgICAgfVxuICAgICAgaW5kZXggPSAwO1xuICAgICAgd2hpbGUgKHRoaXMuY2hlY2soKHRlbXAgPSB0aGlzLnRlbXBvcmFyeShuYW1lLCBpbmRleCkpKSkge1xuICAgICAgICBpbmRleCsrO1xuICAgICAgfVxuICAgICAgaWYgKHJlc2VydmUpIHtcbiAgICAgICAgdGhpcy5hZGQodGVtcCwgJ3ZhcicsIHRydWUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRlbXA7XG4gICAgfTtcblxuICAgIFNjb3BlLnByb3RvdHlwZS5hc3NpZ24gPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICAgICAgdGhpcy5hZGQobmFtZSwge1xuICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgIGFzc2lnbmVkOiB0cnVlXG4gICAgICB9LCB0cnVlKTtcbiAgICAgIHJldHVybiB0aGlzLmhhc0Fzc2lnbm1lbnRzID0gdHJ1ZTtcbiAgICB9O1xuXG4gICAgU2NvcGUucHJvdG90eXBlLmhhc0RlY2xhcmF0aW9ucyA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuICEhdGhpcy5kZWNsYXJlZFZhcmlhYmxlcygpLmxlbmd0aDtcbiAgICB9O1xuXG4gICAgU2NvcGUucHJvdG90eXBlLmRlY2xhcmVkVmFyaWFibGVzID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcmVhbFZhcnMsIHRlbXBWYXJzLCB2LCBfaSwgX2xlbiwgX3JlZjE7XG4gICAgICByZWFsVmFycyA9IFtdO1xuICAgICAgdGVtcFZhcnMgPSBbXTtcbiAgICAgIF9yZWYxID0gdGhpcy52YXJpYWJsZXM7XG4gICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYxLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICAgIHYgPSBfcmVmMVtfaV07XG4gICAgICAgIGlmICh2LnR5cGUgPT09ICd2YXInKSB7XG4gICAgICAgICAgKHYubmFtZS5jaGFyQXQoMCkgPT09ICdfJyA/IHRlbXBWYXJzIDogcmVhbFZhcnMpLnB1c2godi5uYW1lKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHJlYWxWYXJzLnNvcnQoKS5jb25jYXQodGVtcFZhcnMuc29ydCgpKTtcbiAgICB9O1xuXG4gICAgU2NvcGUucHJvdG90eXBlLmFzc2lnbmVkVmFyaWFibGVzID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgdiwgX2ksIF9sZW4sIF9yZWYxLCBfcmVzdWx0cztcbiAgICAgIF9yZWYxID0gdGhpcy52YXJpYWJsZXM7XG4gICAgICBfcmVzdWx0cyA9IFtdO1xuICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmMS5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgICAgICB2ID0gX3JlZjFbX2ldO1xuICAgICAgICBpZiAodi50eXBlLmFzc2lnbmVkKSB7XG4gICAgICAgICAgX3Jlc3VsdHMucHVzaChcIlwiICsgdi5uYW1lICsgXCIgPSBcIiArIHYudHlwZS52YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBfcmVzdWx0cztcbiAgICB9O1xuXG4gICAgcmV0dXJuIFNjb3BlO1xuXG4gIH0pKCk7XG5cbn0pLmNhbGwodGhpcyk7XG4iLCIvLyBHZW5lcmF0ZWQgYnkgSWNlZENvZmZlZVNjcmlwdCAxMDguMC4xMVxuKGZ1bmN0aW9uKCkge1xuICB2YXIgTGluZU1hcCwgU291cmNlTWFwO1xuXG4gIExpbmVNYXAgPSAoZnVuY3Rpb24oKSB7XG4gICAgZnVuY3Rpb24gTGluZU1hcChsaW5lKSB7XG4gICAgICB0aGlzLmxpbmUgPSBsaW5lO1xuICAgICAgdGhpcy5jb2x1bW5zID0gW107XG4gICAgfVxuXG4gICAgTGluZU1hcC5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24oY29sdW1uLCBfYXJnLCBvcHRpb25zKSB7XG4gICAgICB2YXIgc291cmNlQ29sdW1uLCBzb3VyY2VMaW5lO1xuICAgICAgc291cmNlTGluZSA9IF9hcmdbMF0sIHNvdXJjZUNvbHVtbiA9IF9hcmdbMV07XG4gICAgICBpZiAob3B0aW9ucyA9PSBudWxsKSB7XG4gICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmNvbHVtbnNbY29sdW1uXSAmJiBvcHRpb25zLm5vUmVwbGFjZSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5jb2x1bW5zW2NvbHVtbl0gPSB7XG4gICAgICAgIGxpbmU6IHRoaXMubGluZSxcbiAgICAgICAgY29sdW1uOiBjb2x1bW4sXG4gICAgICAgIHNvdXJjZUxpbmU6IHNvdXJjZUxpbmUsXG4gICAgICAgIHNvdXJjZUNvbHVtbjogc291cmNlQ29sdW1uXG4gICAgICB9O1xuICAgIH07XG5cbiAgICBMaW5lTWFwLnByb3RvdHlwZS5zb3VyY2VMb2NhdGlvbiA9IGZ1bmN0aW9uKGNvbHVtbikge1xuICAgICAgdmFyIG1hcHBpbmc7XG4gICAgICB3aGlsZSAoISgobWFwcGluZyA9IHRoaXMuY29sdW1uc1tjb2x1bW5dKSB8fCAoY29sdW1uIDw9IDApKSkge1xuICAgICAgICBjb2x1bW4tLTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBtYXBwaW5nICYmIFttYXBwaW5nLnNvdXJjZUxpbmUsIG1hcHBpbmcuc291cmNlQ29sdW1uXTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIExpbmVNYXA7XG5cbiAgfSkoKTtcblxuICBTb3VyY2VNYXAgPSAoZnVuY3Rpb24oKSB7XG4gICAgdmFyIEJBU0U2NF9DSEFSUywgVkxRX0NPTlRJTlVBVElPTl9CSVQsIFZMUV9TSElGVCwgVkxRX1ZBTFVFX01BU0s7XG5cbiAgICBmdW5jdGlvbiBTb3VyY2VNYXAoKSB7XG4gICAgICB0aGlzLmxpbmVzID0gW107XG4gICAgfVxuXG4gICAgU291cmNlTWFwLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbihzb3VyY2VMb2NhdGlvbiwgZ2VuZXJhdGVkTG9jYXRpb24sIG9wdGlvbnMpIHtcbiAgICAgIHZhciBjb2x1bW4sIGxpbmUsIGxpbmVNYXAsIF9iYXNlO1xuICAgICAgaWYgKG9wdGlvbnMgPT0gbnVsbCkge1xuICAgICAgICBvcHRpb25zID0ge307XG4gICAgICB9XG4gICAgICBsaW5lID0gZ2VuZXJhdGVkTG9jYXRpb25bMF0sIGNvbHVtbiA9IGdlbmVyYXRlZExvY2F0aW9uWzFdO1xuICAgICAgbGluZU1hcCA9ICgoX2Jhc2UgPSB0aGlzLmxpbmVzKVtsaW5lXSB8fCAoX2Jhc2VbbGluZV0gPSBuZXcgTGluZU1hcChsaW5lKSkpO1xuICAgICAgcmV0dXJuIGxpbmVNYXAuYWRkKGNvbHVtbiwgc291cmNlTG9jYXRpb24sIG9wdGlvbnMpO1xuICAgIH07XG5cbiAgICBTb3VyY2VNYXAucHJvdG90eXBlLnNvdXJjZUxvY2F0aW9uID0gZnVuY3Rpb24oX2FyZykge1xuICAgICAgdmFyIGNvbHVtbiwgbGluZSwgbGluZU1hcDtcbiAgICAgIGxpbmUgPSBfYXJnWzBdLCBjb2x1bW4gPSBfYXJnWzFdO1xuICAgICAgd2hpbGUgKCEoKGxpbmVNYXAgPSB0aGlzLmxpbmVzW2xpbmVdKSB8fCAobGluZSA8PSAwKSkpIHtcbiAgICAgICAgbGluZS0tO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGxpbmVNYXAgJiYgbGluZU1hcC5zb3VyY2VMb2NhdGlvbihjb2x1bW4pO1xuICAgIH07XG5cbiAgICBTb3VyY2VNYXAucHJvdG90eXBlLmdlbmVyYXRlID0gZnVuY3Rpb24ob3B0aW9ucywgY29kZSkge1xuICAgICAgdmFyIGJ1ZmZlciwgbGFzdENvbHVtbiwgbGFzdFNvdXJjZUNvbHVtbiwgbGFzdFNvdXJjZUxpbmUsIGxpbmVNYXAsIGxpbmVOdW1iZXIsIG1hcHBpbmcsIG5lZWRDb21tYSwgdjMsIHdyaXRpbmdsaW5lLCBfaSwgX2osIF9sZW4sIF9sZW4xLCBfcmVmLCBfcmVmMTtcbiAgICAgIGlmIChvcHRpb25zID09IG51bGwpIHtcbiAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgfVxuICAgICAgaWYgKGNvZGUgPT0gbnVsbCkge1xuICAgICAgICBjb2RlID0gbnVsbDtcbiAgICAgIH1cbiAgICAgIHdyaXRpbmdsaW5lID0gMDtcbiAgICAgIGxhc3RDb2x1bW4gPSAwO1xuICAgICAgbGFzdFNvdXJjZUxpbmUgPSAwO1xuICAgICAgbGFzdFNvdXJjZUNvbHVtbiA9IDA7XG4gICAgICBuZWVkQ29tbWEgPSBmYWxzZTtcbiAgICAgIGJ1ZmZlciA9IFwiXCI7XG4gICAgICBfcmVmID0gdGhpcy5saW5lcztcbiAgICAgIGZvciAobGluZU51bWJlciA9IF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IGxpbmVOdW1iZXIgPSArK19pKSB7XG4gICAgICAgIGxpbmVNYXAgPSBfcmVmW2xpbmVOdW1iZXJdO1xuICAgICAgICBpZiAobGluZU1hcCkge1xuICAgICAgICAgIF9yZWYxID0gbGluZU1hcC5jb2x1bW5zO1xuICAgICAgICAgIGZvciAoX2ogPSAwLCBfbGVuMSA9IF9yZWYxLmxlbmd0aDsgX2ogPCBfbGVuMTsgX2orKykge1xuICAgICAgICAgICAgbWFwcGluZyA9IF9yZWYxW19qXTtcbiAgICAgICAgICAgIGlmICghKG1hcHBpbmcpKSB7XG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgd2hpbGUgKHdyaXRpbmdsaW5lIDwgbWFwcGluZy5saW5lKSB7XG4gICAgICAgICAgICAgIGxhc3RDb2x1bW4gPSAwO1xuICAgICAgICAgICAgICBuZWVkQ29tbWEgPSBmYWxzZTtcbiAgICAgICAgICAgICAgYnVmZmVyICs9IFwiO1wiO1xuICAgICAgICAgICAgICB3cml0aW5nbGluZSsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG5lZWRDb21tYSkge1xuICAgICAgICAgICAgICBidWZmZXIgKz0gXCIsXCI7XG4gICAgICAgICAgICAgIG5lZWRDb21tYSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnVmZmVyICs9IHRoaXMuZW5jb2RlVmxxKG1hcHBpbmcuY29sdW1uIC0gbGFzdENvbHVtbik7XG4gICAgICAgICAgICBsYXN0Q29sdW1uID0gbWFwcGluZy5jb2x1bW47XG4gICAgICAgICAgICBidWZmZXIgKz0gdGhpcy5lbmNvZGVWbHEoMCk7XG4gICAgICAgICAgICBidWZmZXIgKz0gdGhpcy5lbmNvZGVWbHEobWFwcGluZy5zb3VyY2VMaW5lIC0gbGFzdFNvdXJjZUxpbmUpO1xuICAgICAgICAgICAgbGFzdFNvdXJjZUxpbmUgPSBtYXBwaW5nLnNvdXJjZUxpbmU7XG4gICAgICAgICAgICBidWZmZXIgKz0gdGhpcy5lbmNvZGVWbHEobWFwcGluZy5zb3VyY2VDb2x1bW4gLSBsYXN0U291cmNlQ29sdW1uKTtcbiAgICAgICAgICAgIGxhc3RTb3VyY2VDb2x1bW4gPSBtYXBwaW5nLnNvdXJjZUNvbHVtbjtcbiAgICAgICAgICAgIG5lZWRDb21tYSA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICB2MyA9IHtcbiAgICAgICAgdmVyc2lvbjogMyxcbiAgICAgICAgZmlsZTogb3B0aW9ucy5nZW5lcmF0ZWRGaWxlIHx8ICcnLFxuICAgICAgICBzb3VyY2VSb290OiBvcHRpb25zLnNvdXJjZVJvb3QgfHwgJycsXG4gICAgICAgIHNvdXJjZXM6IG9wdGlvbnMuc291cmNlRmlsZXMgfHwgWycnXSxcbiAgICAgICAgbmFtZXM6IFtdLFxuICAgICAgICBtYXBwaW5nczogYnVmZmVyXG4gICAgICB9O1xuICAgICAgaWYgKG9wdGlvbnMuaW5saW5lKSB7XG4gICAgICAgIHYzLnNvdXJjZXNDb250ZW50ID0gW2NvZGVdO1xuICAgICAgfVxuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHYzLCBudWxsLCAyKTtcbiAgICB9O1xuXG4gICAgVkxRX1NISUZUID0gNTtcblxuICAgIFZMUV9DT05USU5VQVRJT05fQklUID0gMSA8PCBWTFFfU0hJRlQ7XG5cbiAgICBWTFFfVkFMVUVfTUFTSyA9IFZMUV9DT05USU5VQVRJT05fQklUIC0gMTtcblxuICAgIFNvdXJjZU1hcC5wcm90b3R5cGUuZW5jb2RlVmxxID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHZhciBhbnN3ZXIsIG5leHRDaHVuaywgc2lnbkJpdCwgdmFsdWVUb0VuY29kZTtcbiAgICAgIGFuc3dlciA9ICcnO1xuICAgICAgc2lnbkJpdCA9IHZhbHVlIDwgMCA/IDEgOiAwO1xuICAgICAgdmFsdWVUb0VuY29kZSA9IChNYXRoLmFicyh2YWx1ZSkgPDwgMSkgKyBzaWduQml0O1xuICAgICAgd2hpbGUgKHZhbHVlVG9FbmNvZGUgfHwgIWFuc3dlcikge1xuICAgICAgICBuZXh0Q2h1bmsgPSB2YWx1ZVRvRW5jb2RlICYgVkxRX1ZBTFVFX01BU0s7XG4gICAgICAgIHZhbHVlVG9FbmNvZGUgPSB2YWx1ZVRvRW5jb2RlID4+IFZMUV9TSElGVDtcbiAgICAgICAgaWYgKHZhbHVlVG9FbmNvZGUpIHtcbiAgICAgICAgICBuZXh0Q2h1bmsgfD0gVkxRX0NPTlRJTlVBVElPTl9CSVQ7XG4gICAgICAgIH1cbiAgICAgICAgYW5zd2VyICs9IHRoaXMuZW5jb2RlQmFzZTY0KG5leHRDaHVuayk7XG4gICAgICB9XG4gICAgICByZXR1cm4gYW5zd2VyO1xuICAgIH07XG5cbiAgICBCQVNFNjRfQ0hBUlMgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyc7XG5cbiAgICBTb3VyY2VNYXAucHJvdG90eXBlLmVuY29kZUJhc2U2NCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICByZXR1cm4gQkFTRTY0X0NIQVJTW3ZhbHVlXSB8fCAoZnVuY3Rpb24oKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCBCYXNlNjQgZW5jb2RlIHZhbHVlOiBcIiArIHZhbHVlKTtcbiAgICAgIH0pKCk7XG4gICAgfTtcblxuICAgIHJldHVybiBTb3VyY2VNYXA7XG5cbiAgfSkoKTtcblxuICBleHBvcnRzLlNvdXJjZU1hcCA9IFNvdXJjZU1hcDtcblxufSkuY2FsbCh0aGlzKTtcbiIsIi8vIEdlbmVyYXRlZCBieSBJY2VkQ29mZmVlU2NyaXB0IDEwOC4wLjhcbihmdW5jdGlvbigpIHtcbiAgbW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgazogXCJfX2ljZWRfa1wiLFxuICAgIGtfbm9vcDogXCJfX2ljZWRfa19ub29wXCIsXG4gICAgcGFyYW06IFwiX19pY2VkX3BfXCIsXG4gICAgbnM6IFwiaWNlZFwiLFxuICAgIHJ1bnRpbWU6IFwicnVudGltZVwiLFxuICAgIERlZmVycmFsczogXCJEZWZlcnJhbHNcIixcbiAgICBkZWZlcnJhbHM6IFwiX19pY2VkX2RlZmVycmFsc1wiLFxuICAgIGZ1bGZpbGw6IFwiX2Z1bGZpbGxcIixcbiAgICBiX3doaWxlOiBcIl9icmVha1wiLFxuICAgIHRfd2hpbGU6IFwiX3doaWxlXCIsXG4gICAgY193aGlsZTogXCJfY29udGludWVcIixcbiAgICBuX3doaWxlOiBcIl9uZXh0XCIsXG4gICAgbl9hcmc6IFwiX19pY2VkX25leHRfYXJnXCIsXG4gICAgZGVmZXJfbWV0aG9kOiBcImRlZmVyXCIsXG4gICAgc2xvdDogXCJfX3Nsb3RcIixcbiAgICBhc3NpZ25fZm46IFwiYXNzaWduX2ZuXCIsXG4gICAgYXV0b2NiOiBcImF1dG9jYlwiLFxuICAgIHJldHNsb3Q6IFwicmV0XCIsXG4gICAgdHJhY2U6IFwiX19pY2VkX3RyYWNlXCIsXG4gICAgcGFzc2VkX2RlZmVycmFsOiBcIl9faWNlZF9wYXNzZWRfZGVmZXJyYWxcIixcbiAgICBmaW5kRGVmZXJyYWw6IFwiZmluZERlZmVycmFsXCIsXG4gICAgbGluZW5vOiBcImxpbmVub1wiLFxuICAgIHBhcmVudDogXCJwYXJlbnRcIixcbiAgICBmaWxlbmFtZTogXCJmaWxlbmFtZVwiLFxuICAgIGZ1bmNuYW1lOiBcImZ1bmNuYW1lXCIsXG4gICAgY2F0Y2hFeGNlcHRpb25zOiAnY2F0Y2hFeGNlcHRpb25zJyxcbiAgICBydW50aW1lX21vZGVzOiBbXCJub2RlXCIsIFwiaW5saW5lXCIsIFwid2luZG93XCIsIFwibm9uZVwiLCBcImJyb3dzZXJpZnlcIiwgXCJpbnRlcnBcIl0sXG4gICAgdHJhbXBvbGluZTogXCJ0cmFtcG9saW5lXCIsXG4gICAgY29udGV4dDogXCJjb250ZXh0XCIsXG4gICAgZGVmZXJfYXJnOiBcIl9faWNlZF9kZWZlcl9cIlxuICB9O1xuXG59KS5jYWxsKHRoaXMpO1xuIiwiLy8gR2VuZXJhdGVkIGJ5IEljZWRDb2ZmZWVTY3JpcHQgMTA4LjAuOFxuKGZ1bmN0aW9uKCkge1xuICB2YXIgQywgUGlwZWxpbmVyLCBpY2VkLCBfX2ljZWRfaywgX19pY2VkX2tfbm9vcCwgX2lhbmQsIF9pb3IsIF90aW1lb3V0LFxuICAgIF9fc2xpY2UgPSBbXS5zbGljZTtcblxuICBfX2ljZWRfayA9IF9faWNlZF9rX25vb3AgPSBmdW5jdGlvbigpIHt9O1xuXG4gIEMgPSByZXF1aXJlKCcuL2NvbnN0Jyk7XG5cbiAgZXhwb3J0cy5pY2VkID0gaWNlZCA9IHJlcXVpcmUoJy4vcnVudGltZScpO1xuXG4gIF90aW1lb3V0ID0gZnVuY3Rpb24oY2IsIHQsIHJlcywgdG1wKSB7XG4gICAgdmFyIGFyciwgcnYsIHdoaWNoLCBfX19pY2VkX3Bhc3NlZF9kZWZlcnJhbCwgX19pY2VkX2RlZmVycmFscywgX19pY2VkX2s7XG4gICAgX19pY2VkX2sgPSBfX2ljZWRfa19ub29wO1xuICAgIF9fX2ljZWRfcGFzc2VkX2RlZmVycmFsID0gaWNlZC5maW5kRGVmZXJyYWwoYXJndW1lbnRzKTtcbiAgICBydiA9IG5ldyBpY2VkLlJlbmRlenZvdXM7XG4gICAgdG1wWzBdID0gcnYuaWQodHJ1ZSkuZGVmZXIoe1xuICAgICAgYXNzaWduX2ZuOiAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBhcnIgPSBfX3NsaWNlLmNhbGwoYXJndW1lbnRzLCAwKTtcbiAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgfSkodGhpcykoKSxcbiAgICAgIGxpbmVubzogMjAsXG4gICAgICBjb250ZXh0OiBfX2ljZWRfZGVmZXJyYWxzXG4gICAgfSk7XG4gICAgc2V0VGltZW91dChydi5pZChmYWxzZSkuZGVmZXIoe1xuICAgICAgbGluZW5vOiAyMSxcbiAgICAgIGNvbnRleHQ6IF9faWNlZF9kZWZlcnJhbHNcbiAgICB9KSwgdCk7XG4gICAgKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICByZXR1cm4gKGZ1bmN0aW9uKF9faWNlZF9rKSB7XG4gICAgICAgIF9faWNlZF9kZWZlcnJhbHMgPSBuZXcgaWNlZC5EZWZlcnJhbHMoX19pY2VkX2ssIHtcbiAgICAgICAgICBwYXJlbnQ6IF9fX2ljZWRfcGFzc2VkX2RlZmVycmFsLFxuICAgICAgICAgIGZpbGVuYW1lOiBcIi9Vc2Vycy9tYXgvc3JjL2ljZWQvaWNlZC1ydW50aW1lL3NyYy9saWJyYXJ5LmljZWRcIlxuICAgICAgICB9KTtcbiAgICAgICAgcnYud2FpdChfX2ljZWRfZGVmZXJyYWxzLmRlZmVyKHtcbiAgICAgICAgICBhc3NpZ25fZm46IChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHdoaWNoID0gYXJndW1lbnRzWzBdO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9KSgpLFxuICAgICAgICAgIGxpbmVubzogMjJcbiAgICAgICAgfSkpO1xuICAgICAgICBfX2ljZWRfZGVmZXJyYWxzLl9mdWxmaWxsKCk7XG4gICAgICB9KTtcbiAgICB9KSh0aGlzKSgoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKHJlcykge1xuICAgICAgICAgIHJlc1swXSA9IHdoaWNoO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjYi5hcHBseShudWxsLCBhcnIpO1xuICAgICAgfTtcbiAgICB9KSh0aGlzKSk7XG4gIH07XG5cbiAgZXhwb3J0cy50aW1lb3V0ID0gZnVuY3Rpb24oY2IsIHQsIHJlcykge1xuICAgIHZhciB0bXA7XG4gICAgdG1wID0gW107XG4gICAgX3RpbWVvdXQoY2IsIHQsIHJlcywgdG1wKTtcbiAgICByZXR1cm4gdG1wWzBdO1xuICB9O1xuXG4gIF9pYW5kID0gZnVuY3Rpb24oY2IsIHJlcywgdG1wKSB7XG4gICAgdmFyIG9rLCBfX19pY2VkX3Bhc3NlZF9kZWZlcnJhbCwgX19pY2VkX2RlZmVycmFscywgX19pY2VkX2s7XG4gICAgX19pY2VkX2sgPSBfX2ljZWRfa19ub29wO1xuICAgIF9fX2ljZWRfcGFzc2VkX2RlZmVycmFsID0gaWNlZC5maW5kRGVmZXJyYWwoYXJndW1lbnRzKTtcbiAgICAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgIHJldHVybiAoZnVuY3Rpb24oX19pY2VkX2spIHtcbiAgICAgICAgX19pY2VkX2RlZmVycmFscyA9IG5ldyBpY2VkLkRlZmVycmFscyhfX2ljZWRfaywge1xuICAgICAgICAgIHBhcmVudDogX19faWNlZF9wYXNzZWRfZGVmZXJyYWwsXG4gICAgICAgICAgZmlsZW5hbWU6IFwiL1VzZXJzL21heC9zcmMvaWNlZC9pY2VkLXJ1bnRpbWUvc3JjL2xpYnJhcnkuaWNlZFwiXG4gICAgICAgIH0pO1xuICAgICAgICB0bXBbMF0gPSBfX2ljZWRfZGVmZXJyYWxzLmRlZmVyKHtcbiAgICAgICAgICBhc3NpZ25fZm46IChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIG9rID0gYXJndW1lbnRzWzBdO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9KSgpLFxuICAgICAgICAgIGxpbmVubzogMzlcbiAgICAgICAgfSk7XG4gICAgICAgIF9faWNlZF9kZWZlcnJhbHMuX2Z1bGZpbGwoKTtcbiAgICAgIH0pO1xuICAgIH0pKHRoaXMpKChmdW5jdGlvbihfdGhpcykge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoIW9rKSB7XG4gICAgICAgICAgcmVzWzBdID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNiKCk7XG4gICAgICB9O1xuICAgIH0pKHRoaXMpKTtcbiAgfTtcblxuICBleHBvcnRzLmlhbmQgPSBmdW5jdGlvbihjYiwgcmVzKSB7XG4gICAgdmFyIHRtcDtcbiAgICB0bXAgPSBbXTtcbiAgICBfaWFuZChjYiwgcmVzLCB0bXApO1xuICAgIHJldHVybiB0bXBbMF07XG4gIH07XG5cbiAgX2lvciA9IGZ1bmN0aW9uKGNiLCByZXMsIHRtcCkge1xuICAgIHZhciBvaywgX19faWNlZF9wYXNzZWRfZGVmZXJyYWwsIF9faWNlZF9kZWZlcnJhbHMsIF9faWNlZF9rO1xuICAgIF9faWNlZF9rID0gX19pY2VkX2tfbm9vcDtcbiAgICBfX19pY2VkX3Bhc3NlZF9kZWZlcnJhbCA9IGljZWQuZmluZERlZmVycmFsKGFyZ3VtZW50cyk7XG4gICAgKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICByZXR1cm4gKGZ1bmN0aW9uKF9faWNlZF9rKSB7XG4gICAgICAgIF9faWNlZF9kZWZlcnJhbHMgPSBuZXcgaWNlZC5EZWZlcnJhbHMoX19pY2VkX2ssIHtcbiAgICAgICAgICBwYXJlbnQ6IF9fX2ljZWRfcGFzc2VkX2RlZmVycmFsLFxuICAgICAgICAgIGZpbGVuYW1lOiBcIi9Vc2Vycy9tYXgvc3JjL2ljZWQvaWNlZC1ydW50aW1lL3NyYy9saWJyYXJ5LmljZWRcIlxuICAgICAgICB9KTtcbiAgICAgICAgdG1wWzBdID0gX19pY2VkX2RlZmVycmFscy5kZWZlcih7XG4gICAgICAgICAgYXNzaWduX2ZuOiAoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHJldHVybiBvayA9IGFyZ3VtZW50c1swXTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSkoKSxcbiAgICAgICAgICBsaW5lbm86IDU4XG4gICAgICAgIH0pO1xuICAgICAgICBfX2ljZWRfZGVmZXJyYWxzLl9mdWxmaWxsKCk7XG4gICAgICB9KTtcbiAgICB9KSh0aGlzKSgoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKG9rKSB7XG4gICAgICAgICAgcmVzWzBdID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2IoKTtcbiAgICAgIH07XG4gICAgfSkodGhpcykpO1xuICB9O1xuXG4gIGV4cG9ydHMuaW9yID0gZnVuY3Rpb24oY2IsIHJlcykge1xuICAgIHZhciB0bXA7XG4gICAgdG1wID0gW107XG4gICAgX2lvcihjYiwgcmVzLCB0bXApO1xuICAgIHJldHVybiB0bXBbMF07XG4gIH07XG5cbiAgZXhwb3J0cy5QaXBlbGluZXIgPSBQaXBlbGluZXIgPSAoZnVuY3Rpb24oKSB7XG4gICAgZnVuY3Rpb24gUGlwZWxpbmVyKHdpbmRvdywgZGVsYXkpIHtcbiAgICAgIHRoaXMud2luZG93ID0gd2luZG93IHx8IDE7XG4gICAgICB0aGlzLmRlbGF5ID0gZGVsYXkgfHwgMDtcbiAgICAgIHRoaXMucXVldWUgPSBbXTtcbiAgICAgIHRoaXMubl9vdXQgPSAwO1xuICAgICAgdGhpcy5jYiA9IG51bGw7XG4gICAgICB0aGlzW0MuZGVmZXJyYWxzXSA9IHRoaXM7XG4gICAgICB0aGlzW1wiZGVmZXJcIl0gPSB0aGlzLl9kZWZlcjtcbiAgICB9XG5cbiAgICBQaXBlbGluZXIucHJvdG90eXBlLndhaXRJblF1ZXVlID0gZnVuY3Rpb24oY2IpIHtcbiAgICAgIHZhciBfX19pY2VkX3Bhc3NlZF9kZWZlcnJhbCwgX19pY2VkX2RlZmVycmFscywgX19pY2VkX2s7XG4gICAgICBfX2ljZWRfayA9IF9faWNlZF9rX25vb3A7XG4gICAgICBfX19pY2VkX3Bhc3NlZF9kZWZlcnJhbCA9IGljZWQuZmluZERlZmVycmFsKGFyZ3VtZW50cyk7XG4gICAgICAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgcmV0dXJuIChmdW5jdGlvbihfX2ljZWRfaykge1xuICAgICAgICAgIHZhciBfd2hpbGU7XG4gICAgICAgICAgX3doaWxlID0gZnVuY3Rpb24oX19pY2VkX2spIHtcbiAgICAgICAgICAgIHZhciBfYnJlYWssIF9jb250aW51ZSwgX25leHQ7XG4gICAgICAgICAgICBfYnJlYWsgPSBfX2ljZWRfaztcbiAgICAgICAgICAgIF9jb250aW51ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICByZXR1cm4gaWNlZC50cmFtcG9saW5lKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBfd2hpbGUoX19pY2VkX2spO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBfbmV4dCA9IF9jb250aW51ZTtcbiAgICAgICAgICAgIGlmICghKF90aGlzLm5fb3V0ID49IF90aGlzLndpbmRvdykpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIF9icmVhaygpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgKGZ1bmN0aW9uKF9faWNlZF9rKSB7XG4gICAgICAgICAgICAgICAgX19pY2VkX2RlZmVycmFscyA9IG5ldyBpY2VkLkRlZmVycmFscyhfX2ljZWRfaywge1xuICAgICAgICAgICAgICAgICAgcGFyZW50OiBfX19pY2VkX3Bhc3NlZF9kZWZlcnJhbCxcbiAgICAgICAgICAgICAgICAgIGZpbGVuYW1lOiBcIi9Vc2Vycy9tYXgvc3JjL2ljZWQvaWNlZC1ydW50aW1lL3NyYy9saWJyYXJ5LmljZWRcIixcbiAgICAgICAgICAgICAgICAgIGZ1bmNuYW1lOiBcIlBpcGVsaW5lci53YWl0SW5RdWV1ZVwiXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgX3RoaXMuY2IgPSBfX2ljZWRfZGVmZXJyYWxzLmRlZmVyKHtcbiAgICAgICAgICAgICAgICAgIGxpbmVubzogMTAwXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgX19pY2VkX2RlZmVycmFscy5fZnVsZmlsbCgpO1xuICAgICAgICAgICAgICB9KShfbmV4dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcbiAgICAgICAgICBfd2hpbGUoX19pY2VkX2spO1xuICAgICAgICB9KTtcbiAgICAgIH0pKHRoaXMpKChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgX3RoaXMubl9vdXQrKztcbiAgICAgICAgICAoZnVuY3Rpb24oX19pY2VkX2spIHtcbiAgICAgICAgICAgIGlmIChfdGhpcy5kZWxheSkge1xuICAgICAgICAgICAgICAoZnVuY3Rpb24oX19pY2VkX2spIHtcbiAgICAgICAgICAgICAgICBfX2ljZWRfZGVmZXJyYWxzID0gbmV3IGljZWQuRGVmZXJyYWxzKF9faWNlZF9rLCB7XG4gICAgICAgICAgICAgICAgICBwYXJlbnQ6IF9fX2ljZWRfcGFzc2VkX2RlZmVycmFsLFxuICAgICAgICAgICAgICAgICAgZmlsZW5hbWU6IFwiL1VzZXJzL21heC9zcmMvaWNlZC9pY2VkLXJ1bnRpbWUvc3JjL2xpYnJhcnkuaWNlZFwiLFxuICAgICAgICAgICAgICAgICAgZnVuY25hbWU6IFwiUGlwZWxpbmVyLndhaXRJblF1ZXVlXCJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KF9faWNlZF9kZWZlcnJhbHMuZGVmZXIoe1xuICAgICAgICAgICAgICAgICAgbGluZW5vOiAxMDhcbiAgICAgICAgICAgICAgICB9KSwgX3RoaXMuZGVsYXkpO1xuICAgICAgICAgICAgICAgIF9faWNlZF9kZWZlcnJhbHMuX2Z1bGZpbGwoKTtcbiAgICAgICAgICAgICAgfSkoX19pY2VkX2spO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcmV0dXJuIF9faWNlZF9rKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gY2IoKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgIH0pKHRoaXMpKTtcbiAgICB9O1xuXG4gICAgUGlwZWxpbmVyLnByb3RvdHlwZS5fX2RlZmVyID0gZnVuY3Rpb24ob3V0LCBkZWZlckFyZ3MpIHtcbiAgICAgIHZhciB0bXAsIHZvaWRDYiwgX19faWNlZF9wYXNzZWRfZGVmZXJyYWwsIF9faWNlZF9kZWZlcnJhbHMsIF9faWNlZF9rO1xuICAgICAgX19pY2VkX2sgPSBfX2ljZWRfa19ub29wO1xuICAgICAgX19faWNlZF9wYXNzZWRfZGVmZXJyYWwgPSBpY2VkLmZpbmREZWZlcnJhbChhcmd1bWVudHMpO1xuICAgICAgKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgIHJldHVybiAoZnVuY3Rpb24oX19pY2VkX2spIHtcbiAgICAgICAgICBfX2ljZWRfZGVmZXJyYWxzID0gbmV3IGljZWQuRGVmZXJyYWxzKF9faWNlZF9rLCB7XG4gICAgICAgICAgICBwYXJlbnQ6IF9fX2ljZWRfcGFzc2VkX2RlZmVycmFsLFxuICAgICAgICAgICAgZmlsZW5hbWU6IFwiL1VzZXJzL21heC9zcmMvaWNlZC9pY2VkLXJ1bnRpbWUvc3JjL2xpYnJhcnkuaWNlZFwiLFxuICAgICAgICAgICAgZnVuY25hbWU6IFwiUGlwZWxpbmVyLl9fZGVmZXJcIlxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHZvaWRDYiA9IF9faWNlZF9kZWZlcnJhbHMuZGVmZXIoe1xuICAgICAgICAgICAgbGluZW5vOiAxMjJcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBvdXRbMF0gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBhcmdzLCBfcmVmO1xuICAgICAgICAgICAgYXJncyA9IDEgPD0gYXJndW1lbnRzLmxlbmd0aCA/IF9fc2xpY2UuY2FsbChhcmd1bWVudHMsIDApIDogW107XG4gICAgICAgICAgICBpZiAoKF9yZWYgPSBkZWZlckFyZ3MuYXNzaWduX2ZuKSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgIF9yZWYuYXBwbHkobnVsbCwgYXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdm9pZENiKCk7XG4gICAgICAgICAgfTtcbiAgICAgICAgICBfX2ljZWRfZGVmZXJyYWxzLl9mdWxmaWxsKCk7XG4gICAgICAgIH0pO1xuICAgICAgfSkodGhpcykoKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICBfdGhpcy5uX291dC0tO1xuICAgICAgICAgIGlmIChfdGhpcy5jYikge1xuICAgICAgICAgICAgdG1wID0gX3RoaXMuY2I7XG4gICAgICAgICAgICBfdGhpcy5jYiA9IG51bGw7XG4gICAgICAgICAgICByZXR1cm4gdG1wKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfSkodGhpcykpO1xuICAgIH07XG5cbiAgICBQaXBlbGluZXIucHJvdG90eXBlLl9kZWZlciA9IGZ1bmN0aW9uKGRlZmVyQXJncykge1xuICAgICAgdmFyIHRtcDtcbiAgICAgIHRtcCA9IFtdO1xuICAgICAgdGhpcy5fX2RlZmVyKHRtcCwgZGVmZXJBcmdzKTtcbiAgICAgIHJldHVybiB0bXBbMF07XG4gICAgfTtcblxuICAgIFBpcGVsaW5lci5wcm90b3R5cGUuZmx1c2ggPSBmdW5jdGlvbihhdXRvY2IpIHtcbiAgICAgIHZhciBfX19pY2VkX3Bhc3NlZF9kZWZlcnJhbCwgX19pY2VkX2ssIF93aGlsZTtcbiAgICAgIF9faWNlZF9rID0gYXV0b2NiO1xuICAgICAgX19faWNlZF9wYXNzZWRfZGVmZXJyYWwgPSBpY2VkLmZpbmREZWZlcnJhbChhcmd1bWVudHMpO1xuICAgICAgX3doaWxlID0gKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgIHZhciBfX2ljZWRfZGVmZXJyYWxzO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oX19pY2VkX2spIHtcbiAgICAgICAgICB2YXIgX2JyZWFrLCBfY29udGludWUsIF9uZXh0O1xuICAgICAgICAgIF9icmVhayA9IF9faWNlZF9rO1xuICAgICAgICAgIF9jb250aW51ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIGljZWQudHJhbXBvbGluZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIF93aGlsZShfX2ljZWRfayk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9O1xuICAgICAgICAgIF9uZXh0ID0gX2NvbnRpbnVlO1xuICAgICAgICAgIGlmICghX3RoaXMubl9vdXQpIHtcbiAgICAgICAgICAgIHJldHVybiBfYnJlYWsoKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgKGZ1bmN0aW9uKF9faWNlZF9rKSB7XG4gICAgICAgICAgICAgIF9faWNlZF9kZWZlcnJhbHMgPSBuZXcgaWNlZC5EZWZlcnJhbHMoX19pY2VkX2ssIHtcbiAgICAgICAgICAgICAgICBwYXJlbnQ6IF9fX2ljZWRfcGFzc2VkX2RlZmVycmFsLFxuICAgICAgICAgICAgICAgIGZpbGVuYW1lOiBcIi9Vc2Vycy9tYXgvc3JjL2ljZWQvaWNlZC1ydW50aW1lL3NyYy9saWJyYXJ5LmljZWRcIixcbiAgICAgICAgICAgICAgICBmdW5jbmFtZTogXCJQaXBlbGluZXIuZmx1c2hcIlxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgX3RoaXMuY2IgPSBfX2ljZWRfZGVmZXJyYWxzLmRlZmVyKHtcbiAgICAgICAgICAgICAgICBsaW5lbm86IDE1MVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgX19pY2VkX2RlZmVycmFscy5fZnVsZmlsbCgpO1xuICAgICAgICAgICAgfSkoX25leHQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH0pKHRoaXMpO1xuICAgICAgX3doaWxlKF9faWNlZF9rKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFBpcGVsaW5lcjtcblxuICB9KSgpO1xuXG59KS5jYWxsKHRoaXMpO1xuIiwiLy8gR2VuZXJhdGVkIGJ5IEljZWRDb2ZmZWVTY3JpcHQgMTA4LjAuOFxuKGZ1bmN0aW9uKCkge1xuICB2YXIgaywgbW9kLCBtb2RzLCB2LCBfaSwgX2xlbjtcblxuICBleHBvcnRzW1wiY29uc3RcIl0gPSByZXF1aXJlKCcuL2NvbnN0Jyk7XG5cbiAgbW9kcyA9IFtyZXF1aXJlKCcuL3J1bnRpbWUnKSwgcmVxdWlyZSgnLi9saWJyYXJ5JyldO1xuXG4gIGZvciAoX2kgPSAwLCBfbGVuID0gbW9kcy5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykge1xuICAgIG1vZCA9IG1vZHNbX2ldO1xuICAgIGZvciAoayBpbiBtb2QpIHtcbiAgICAgIHYgPSBtb2Rba107XG4gICAgICBleHBvcnRzW2tdID0gdjtcbiAgICB9XG4gIH1cblxufSkuY2FsbCh0aGlzKTtcbiIsIi8vIEdlbmVyYXRlZCBieSBJY2VkQ29mZmVlU2NyaXB0IDEwOC4wLjhcbihmdW5jdGlvbigpIHtcbiAgdmFyIEMsIERlZmVycmFscywgUmVuZGV6dm91cywgZXhjZXB0aW9uSGFuZGxlciwgZmluZERlZmVycmFsLCBtYWtlX2RlZmVyX3JldHVybiwgc3RhY2tXYWxrLCB0aWNrX2NvdW50ZXIsIHRyYW1wb2xpbmUsIHdhcm4sIF9fYWN0aXZlX3RyYWNlLCBfX2MsIF90cmFjZV90b19zdHJpbmcsXG4gICAgX19zbGljZSA9IFtdLnNsaWNlO1xuXG4gIEMgPSByZXF1aXJlKCcuL2NvbnN0Jyk7XG5cbiAgbWFrZV9kZWZlcl9yZXR1cm4gPSBmdW5jdGlvbihvYmosIGRlZmVyX2FyZ3MsIGlkLCB0cmFjZV90ZW1wbGF0ZSwgbXVsdGkpIHtcbiAgICB2YXIgaywgcmV0LCB0cmFjZSwgdjtcbiAgICB0cmFjZSA9IHt9O1xuICAgIGZvciAoayBpbiB0cmFjZV90ZW1wbGF0ZSkge1xuICAgICAgdiA9IHRyYWNlX3RlbXBsYXRlW2tdO1xuICAgICAgdHJhY2Vba10gPSB2O1xuICAgIH1cbiAgICB0cmFjZVtDLmxpbmVub10gPSBkZWZlcl9hcmdzICE9IG51bGwgPyBkZWZlcl9hcmdzW0MubGluZW5vXSA6IHZvaWQgMDtcbiAgICByZXQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBpbm5lcl9hcmdzLCBvLCBfcmVmO1xuICAgICAgaW5uZXJfYXJncyA9IDEgPD0gYXJndW1lbnRzLmxlbmd0aCA/IF9fc2xpY2UuY2FsbChhcmd1bWVudHMsIDApIDogW107XG4gICAgICBpZiAoZGVmZXJfYXJncyAhPSBudWxsKSB7XG4gICAgICAgIGlmICgoX3JlZiA9IGRlZmVyX2FyZ3MuYXNzaWduX2ZuKSAhPSBudWxsKSB7XG4gICAgICAgICAgX3JlZi5hcHBseShudWxsLCBpbm5lcl9hcmdzKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKG9iaikge1xuICAgICAgICBvID0gb2JqO1xuICAgICAgICBpZiAoIW11bHRpKSB7XG4gICAgICAgICAgb2JqID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gby5fZnVsZmlsbChpZCwgdHJhY2UpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHdhcm4oXCJvdmVydXNlZCBkZWZlcnJhbCBhdCBcIiArIChfdHJhY2VfdG9fc3RyaW5nKHRyYWNlKSkpO1xuICAgICAgfVxuICAgIH07XG4gICAgcmV0W0MudHJhY2VdID0gdHJhY2U7XG4gICAgcmV0dXJuIHJldDtcbiAgfTtcblxuICBfX2MgPSAwO1xuXG4gIHRpY2tfY291bnRlciA9IGZ1bmN0aW9uKG1vZCkge1xuICAgIF9fYysrO1xuICAgIGlmICgoX19jICUgbW9kKSA9PT0gMCkge1xuICAgICAgX19jID0gMDtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9O1xuXG4gIF9fYWN0aXZlX3RyYWNlID0gbnVsbDtcblxuICBfdHJhY2VfdG9fc3RyaW5nID0gZnVuY3Rpb24odHIpIHtcbiAgICB2YXIgZm47XG4gICAgZm4gPSB0cltDLmZ1bmNuYW1lXSB8fCBcIjxhbm9ueW1vdXM+XCI7XG4gICAgcmV0dXJuIFwiXCIgKyBmbiArIFwiIChcIiArIHRyW0MuZmlsZW5hbWVdICsgXCI6XCIgKyAodHJbQy5saW5lbm9dICsgMSkgKyBcIilcIjtcbiAgfTtcblxuICB3YXJuID0gZnVuY3Rpb24obSkge1xuICAgIHJldHVybiB0eXBlb2YgY29uc29sZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBjb25zb2xlICE9PSBudWxsID8gY29uc29sZS5lcnJvcihcIklDRUQgd2FybmluZzogXCIgKyBtKSA6IHZvaWQgMDtcbiAgfTtcblxuICBleHBvcnRzLnRyYW1wb2xpbmUgPSB0cmFtcG9saW5lID0gZnVuY3Rpb24oZm4pIHtcbiAgICBpZiAoIXRpY2tfY291bnRlcig1MDApKSB7XG4gICAgICByZXR1cm4gZm4oKTtcbiAgICB9IGVsc2UgaWYgKCh0eXBlb2YgcHJvY2VzcyAhPT0gXCJ1bmRlZmluZWRcIiAmJiBwcm9jZXNzICE9PSBudWxsID8gcHJvY2Vzcy5uZXh0VGljayA6IHZvaWQgMCkgIT0gbnVsbCkge1xuICAgICAgcmV0dXJuIHByb2Nlc3MubmV4dFRpY2soZm4pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gc2V0VGltZW91dChmbik7XG4gICAgfVxuICB9O1xuXG4gIGV4cG9ydHMuRGVmZXJyYWxzID0gRGVmZXJyYWxzID0gKGZ1bmN0aW9uKCkge1xuICAgIGZ1bmN0aW9uIERlZmVycmFscyhrLCB0cmFjZSkge1xuICAgICAgdGhpcy50cmFjZSA9IHRyYWNlO1xuICAgICAgdGhpcy5jb250aW51YXRpb24gPSBrO1xuICAgICAgdGhpcy5jb3VudCA9IDE7XG4gICAgICB0aGlzLnJldCA9IG51bGw7XG4gICAgfVxuXG4gICAgRGVmZXJyYWxzLnByb3RvdHlwZS5fY2FsbCA9IGZ1bmN0aW9uKHRyYWNlKSB7XG4gICAgICB2YXIgYztcbiAgICAgIGlmICh0aGlzLmNvbnRpbnVhdGlvbikge1xuICAgICAgICBfX2FjdGl2ZV90cmFjZSA9IHRyYWNlO1xuICAgICAgICBjID0gdGhpcy5jb250aW51YXRpb247XG4gICAgICAgIHRoaXMuY29udGludWF0aW9uID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIGModGhpcy5yZXQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHdhcm4oXCJFbnRlcmVkIGRlYWQgYXdhaXQgYXQgXCIgKyAoX3RyYWNlX3RvX3N0cmluZyh0cmFjZSkpKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgRGVmZXJyYWxzLnByb3RvdHlwZS5fZnVsZmlsbCA9IGZ1bmN0aW9uKGlkLCB0cmFjZSkge1xuICAgICAgaWYgKC0tdGhpcy5jb3VudCA+IDApIHtcblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRyYW1wb2xpbmUoKChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5fY2FsbCh0cmFjZSk7XG4gICAgICAgICAgfTtcbiAgICAgICAgfSkodGhpcykpKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgRGVmZXJyYWxzLnByb3RvdHlwZS5kZWZlciA9IGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICAgIHZhciBzZWxmO1xuICAgICAgdGhpcy5jb3VudCsrO1xuICAgICAgc2VsZiA9IHRoaXM7XG4gICAgICByZXR1cm4gbWFrZV9kZWZlcl9yZXR1cm4oc2VsZiwgYXJncywgbnVsbCwgdGhpcy50cmFjZSk7XG4gICAgfTtcblxuICAgIHJldHVybiBEZWZlcnJhbHM7XG5cbiAgfSkoKTtcblxuICBleHBvcnRzLmZpbmREZWZlcnJhbCA9IGZpbmREZWZlcnJhbCA9IGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICB2YXIgYSwgX2ksIF9sZW47XG4gICAgZm9yIChfaSA9IDAsIF9sZW4gPSBhcmdzLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICBhID0gYXJnc1tfaV07XG4gICAgICBpZiAoYSAhPSBudWxsID8gYVtDLnRyYWNlXSA6IHZvaWQgMCkge1xuICAgICAgICByZXR1cm4gYTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH07XG5cbiAgZXhwb3J0cy5SZW5kZXp2b3VzID0gUmVuZGV6dm91cyA9IChmdW5jdGlvbigpIHtcbiAgICB2YXIgUnZJZDtcblxuICAgIGZ1bmN0aW9uIFJlbmRlenZvdXMoKSB7XG4gICAgICB0aGlzLmNvbXBsZXRlZCA9IFtdO1xuICAgICAgdGhpcy53YWl0ZXJzID0gW107XG4gICAgICB0aGlzLmRlZmVyX2lkID0gMDtcbiAgICB9XG5cbiAgICBSdklkID0gKGZ1bmN0aW9uKCkge1xuICAgICAgZnVuY3Rpb24gUnZJZChydiwgaWQsIG11bHRpKSB7XG4gICAgICAgIHRoaXMucnYgPSBydjtcbiAgICAgICAgdGhpcy5pZCA9IGlkO1xuICAgICAgICB0aGlzLm11bHRpID0gbXVsdGk7XG4gICAgICB9XG5cbiAgICAgIFJ2SWQucHJvdG90eXBlLmRlZmVyID0gZnVuY3Rpb24oZGVmZXJfYXJncykge1xuICAgICAgICByZXR1cm4gdGhpcy5ydi5fZGVmZXJfd2l0aF9pZCh0aGlzLmlkLCBkZWZlcl9hcmdzLCB0aGlzLm11bHRpKTtcbiAgICAgIH07XG5cbiAgICAgIHJldHVybiBSdklkO1xuXG4gICAgfSkoKTtcblxuICAgIFJlbmRlenZvdXMucHJvdG90eXBlLndhaXQgPSBmdW5jdGlvbihjYikge1xuICAgICAgdmFyIHg7XG4gICAgICBpZiAodGhpcy5jb21wbGV0ZWQubGVuZ3RoKSB7XG4gICAgICAgIHggPSB0aGlzLmNvbXBsZXRlZC5zaGlmdCgpO1xuICAgICAgICByZXR1cm4gY2IoeCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdGhpcy53YWl0ZXJzLnB1c2goY2IpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBSZW5kZXp2b3VzLnByb3RvdHlwZS5kZWZlciA9IGZ1bmN0aW9uKGRlZmVyX2FyZ3MpIHtcbiAgICAgIHZhciBpZDtcbiAgICAgIGlkID0gdGhpcy5kZWZlcl9pZCsrO1xuICAgICAgcmV0dXJuIHRoaXMuX2RlZmVyX3dpdGhfaWQoaWQsIGRlZmVyX2FyZ3MpO1xuICAgIH07XG5cbiAgICBSZW5kZXp2b3VzLnByb3RvdHlwZS5pZCA9IGZ1bmN0aW9uKGksIG11bHRpKSB7XG4gICAgICBtdWx0aSA9ICEhbXVsdGk7XG4gICAgICByZXR1cm4gbmV3IFJ2SWQodGhpcywgaSwgbXVsdGkpO1xuICAgIH07XG5cbiAgICBSZW5kZXp2b3VzLnByb3RvdHlwZS5fZnVsZmlsbCA9IGZ1bmN0aW9uKGlkLCB0cmFjZSkge1xuICAgICAgdmFyIGNiO1xuICAgICAgaWYgKHRoaXMud2FpdGVycy5sZW5ndGgpIHtcbiAgICAgICAgY2IgPSB0aGlzLndhaXRlcnMuc2hpZnQoKTtcbiAgICAgICAgcmV0dXJuIGNiKGlkKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbXBsZXRlZC5wdXNoKGlkKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgUmVuZGV6dm91cy5wcm90b3R5cGUuX2RlZmVyX3dpdGhfaWQgPSBmdW5jdGlvbihpZCwgZGVmZXJfYXJncywgbXVsdGkpIHtcbiAgICAgIHRoaXMuY291bnQrKztcbiAgICAgIHJldHVybiBtYWtlX2RlZmVyX3JldHVybih0aGlzLCBkZWZlcl9hcmdzLCBpZCwge30sIG11bHRpKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFJlbmRlenZvdXM7XG5cbiAgfSkoKTtcblxuICBleHBvcnRzLnN0YWNrV2FsayA9IHN0YWNrV2FsayA9IGZ1bmN0aW9uKGNiKSB7XG4gICAgdmFyIGxpbmUsIHJldCwgdHIsIF9yZWY7XG4gICAgcmV0ID0gW107XG4gICAgdHIgPSBjYiA/IGNiW0MudHJhY2VdIDogX19hY3RpdmVfdHJhY2U7XG4gICAgd2hpbGUgKHRyKSB7XG4gICAgICBsaW5lID0gXCIgICBhdCBcIiArIChfdHJhY2VfdG9fc3RyaW5nKHRyKSk7XG4gICAgICByZXQucHVzaChsaW5lKTtcbiAgICAgIHRyID0gdHIgIT0gbnVsbCA/IChfcmVmID0gdHJbQy5wYXJlbnRdKSAhPSBudWxsID8gX3JlZltDLnRyYWNlXSA6IHZvaWQgMCA6IHZvaWQgMDtcbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbiAgfTtcblxuICBleHBvcnRzLmV4Y2VwdGlvbkhhbmRsZXIgPSBleGNlcHRpb25IYW5kbGVyID0gZnVuY3Rpb24oZXJyLCBsb2dnZXIpIHtcbiAgICB2YXIgc3RhY2s7XG4gICAgaWYgKCFsb2dnZXIpIHtcbiAgICAgIGxvZ2dlciA9IGNvbnNvbGUuZXJyb3I7XG4gICAgfVxuICAgIGxvZ2dlcihlcnIuc3RhY2spO1xuICAgIHN0YWNrID0gc3RhY2tXYWxrKCk7XG4gICAgaWYgKHN0YWNrLmxlbmd0aCkge1xuICAgICAgbG9nZ2VyKFwiSWNlZCAnc3RhY2snIHRyYWNlICh3LyByZWFsIGxpbmUgbnVtYmVycyk6XCIpO1xuICAgICAgcmV0dXJuIGxvZ2dlcihzdGFjay5qb2luKFwiXFxuXCIpKTtcbiAgICB9XG4gIH07XG5cbiAgZXhwb3J0cy5jYXRjaEV4Y2VwdGlvbnMgPSBmdW5jdGlvbihsb2dnZXIpIHtcbiAgICByZXR1cm4gdHlwZW9mIHByb2Nlc3MgIT09IFwidW5kZWZpbmVkXCIgJiYgcHJvY2VzcyAhPT0gbnVsbCA/IHByb2Nlc3Mub24oJ3VuY2F1Z2h0RXhjZXB0aW9uJywgZnVuY3Rpb24oZXJyKSB7XG4gICAgICBleGNlcHRpb25IYW5kbGVyKGVyciwgbG9nZ2VyKTtcbiAgICAgIHJldHVybiBwcm9jZXNzLmV4aXQoMSk7XG4gICAgfSkgOiB2b2lkIDA7XG4gIH07XG5cbn0pLmNhbGwodGhpcyk7XG4iLCJcbnZhciBpbmRleE9mID0gW10uaW5kZXhPZjtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihhcnIsIG9iail7XG4gIGlmIChpbmRleE9mKSByZXR1cm4gYXJyLmluZGV4T2Yob2JqKTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyArK2kpIHtcbiAgICBpZiAoYXJyW2ldID09PSBvYmopIHJldHVybiBpO1xuICB9XG4gIHJldHVybiAtMTtcbn07IiwiaWYgKHR5cGVvZiBPYmplY3QuY3JlYXRlID09PSAnZnVuY3Rpb24nKSB7XG4gIC8vIGltcGxlbWVudGF0aW9uIGZyb20gc3RhbmRhcmQgbm9kZS5qcyAndXRpbCcgbW9kdWxlXG4gIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaW5oZXJpdHMoY3Rvciwgc3VwZXJDdG9yKSB7XG4gICAgY3Rvci5zdXBlcl8gPSBzdXBlckN0b3JcbiAgICBjdG9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDdG9yLnByb3RvdHlwZSwge1xuICAgICAgY29uc3RydWN0b3I6IHtcbiAgICAgICAgdmFsdWU6IGN0b3IsXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICB9XG4gICAgfSk7XG4gIH07XG59IGVsc2Uge1xuICAvLyBvbGQgc2Nob29sIHNoaW0gZm9yIG9sZCBicm93c2Vyc1xuICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGluaGVyaXRzKGN0b3IsIHN1cGVyQ3Rvcikge1xuICAgIGN0b3Iuc3VwZXJfID0gc3VwZXJDdG9yXG4gICAgdmFyIFRlbXBDdG9yID0gZnVuY3Rpb24gKCkge31cbiAgICBUZW1wQ3Rvci5wcm90b3R5cGUgPSBzdXBlckN0b3IucHJvdG90eXBlXG4gICAgY3Rvci5wcm90b3R5cGUgPSBuZXcgVGVtcEN0b3IoKVxuICAgIGN0b3IucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gY3RvclxuICB9XG59XG4iLCIhZnVuY3Rpb24oZSl7aWYoXCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHMmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBtb2R1bGUpbW9kdWxlLmV4cG9ydHM9ZSgpO2Vsc2UgaWYoXCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kKWRlZmluZShbXSxlKTtlbHNle3ZhciB0O1widW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/dD13aW5kb3c6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGdsb2JhbD90PWdsb2JhbDpcInVuZGVmaW5lZFwiIT10eXBlb2Ygc2VsZiYmKHQ9c2VsZiksdC5qczJjb2ZmZWU9ZSgpfX0oZnVuY3Rpb24oKXt2YXIgZSx0LHU7cmV0dXJuIGZ1bmN0aW9uIG4oZSx0LHUpe2Z1bmN0aW9uIHIobyxzKXtpZighdFtvXSl7aWYoIWVbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXMmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgbD1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGwuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixsfXZhciBmPXRbb109e2V4cG9ydHM6e319O2Vbb11bMF0uY2FsbChmLmV4cG9ydHMsZnVuY3Rpb24odCl7dmFyIHU9ZVtvXVsxXVt0XTtyZXR1cm4gcih1P3U6dCl9LGYsZi5leHBvcnRzLG4sZSx0LHUpfXJldHVybiB0W29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHUubGVuZ3RoO28rKylyKHVbb10pO3JldHVybiByfSh7MTpbZnVuY3Rpb24oZSx0LHUpe3ZhciBuLHIsaSxvLHM7aT1lKFwiLi9saWIvdHJhbnNmb3Jtcy9iYXNlXCIpO3I9ZShcIi4vbGliL2J1aWxkZXIvYmFzZVwiKTtuPWUoXCIuL2xpYi9idWlsZGVyXCIpO289ZShcIi4vbGliL2hlbHBlcnNcIikuYnVpbGRFcnJvcjt0LmV4cG9ydHM9cz1mdW5jdGlvbihlLHQpe3JldHVybiBzLmJ1aWxkKGUsdCkuY29kZX07cy5idWlsZD1mdW5jdGlvbihlLHQpe3ZhciB1LG4scixpLG8sYTtpZih0PT1udWxsKXt0PXt9fWlmKHQuZmlsZW5hbWU9PW51bGwpe3QuZmlsZW5hbWU9XCJpbnB1dC5qc1wifWlmKHQuaW5kZW50PT1udWxsKXt0LmluZGVudD0yfXQuc291cmNlPWU7dT1zLnBhcnNlSlMoZSx0KTtpPXMudHJhbnNmb3JtKHUsdCksdT1pLmFzdCxhPWkud2FybmluZ3M7bz1zLmdlbmVyYXRlKHUsdCksbj1vLmNvZGUscj1vLm1hcDtyZXR1cm57Y29kZTpuLGFzdDp1LG1hcDpyLHdhcm5pbmdzOmF9fTtzLnBhcnNlSlM9ZnVuY3Rpb24odCx1KXt2YXIgbixyLGk7aWYodT09bnVsbCl7dT17fX10cnl7bj1lKFwiZXNwcmltYVwiKTtyZXR1cm4gbi5wYXJzZSh0LHtsb2M6dHJ1ZSxyYW5nZTp0cnVlLGNvbW1lbnQ6dHJ1ZX0pfWNhdGNoKGkpe3I9aTt0aHJvdyBvKHIsdCx1LmZpbGVuYW1lKX19O3MudHJhbnNmb3JtPWZ1bmN0aW9uKHQsdSl7dmFyIG4scixvO2lmKHU9PW51bGwpe3U9e319cj17fTtvPWZ1bmN0aW9uKGUpe3JldHVybiBpLnJ1bih0LHUsZSxyKX07bj0hKHUuY29tbWVudHM9PT1mYWxzZSk7aWYobil7byhbZShcIi4vbGliL3RyYW5zZm9ybXMvY29tbWVudHNcIildKX1vKFtlKFwiLi9saWIvdHJhbnNmb3Jtcy9mdW5jdGlvbnNcIildKTtvKFtlKFwiLi9saWIvdHJhbnNmb3Jtcy9leHBvbmVudHNcIiksZShcIi4vbGliL3RyYW5zZm9ybXMvaWZzXCIpLGUoXCIuL2xpYi90cmFuc2Zvcm1zL2lpZmVcIiksZShcIi4vbGliL3RyYW5zZm9ybXMvbGl0ZXJhbHNcIiksZShcIi4vbGliL3RyYW5zZm9ybXMvbG9vcHNcIiksZShcIi4vbGliL3RyYW5zZm9ybXMvbWVtYmVyc1wiKSxlKFwiLi9saWIvdHJhbnNmb3Jtcy9vYmplY3RzXCIpLGUoXCIuL2xpYi90cmFuc2Zvcm1zL2JpbmFyeVwiKSxlKFwiLi9saWIvdHJhbnNmb3Jtcy9lbXB0eV9zdGF0ZW1lbnRzXCIpLGUoXCIuL2xpYi90cmFuc2Zvcm1zL290aGVyc1wiKSxlKFwiLi9saWIvdHJhbnNmb3Jtcy9wcmVjZWRlbmNlXCIpLGUoXCIuL2xpYi90cmFuc2Zvcm1zL3JldHVybnNcIiksZShcIi4vbGliL3RyYW5zZm9ybXMvc3dpdGNoZXNcIiksZShcIi4vbGliL3RyYW5zZm9ybXMvdW5zdXBwb3J0ZWRcIildKTtvKFtlKFwiLi9saWIvdHJhbnNmb3Jtcy9ibG9ja3NcIildKTtyZXR1cm57YXN0OnQsd2FybmluZ3M6ci53YXJuaW5nc319O3MuZ2VuZXJhdGU9ZnVuY3Rpb24oZSx0KXtpZih0PT1udWxsKXt0PXt9fXJldHVybiBuZXcgbihlLHQpLmdldCgpfTtzLnZlcnNpb249ZShcIi4vcGFja2FnZS5qc29uXCIpLnZlcnNpb259LHtcIi4vbGliL2J1aWxkZXJcIjozLFwiLi9saWIvYnVpbGRlci9iYXNlXCI6MixcIi4vbGliL2hlbHBlcnNcIjo1LFwiLi9saWIvdHJhbnNmb3Jtcy9iYXNlXCI6NixcIi4vbGliL3RyYW5zZm9ybXMvYmluYXJ5XCI6NyxcIi4vbGliL3RyYW5zZm9ybXMvYmxvY2tzXCI6OCxcIi4vbGliL3RyYW5zZm9ybXMvY29tbWVudHNcIjo5LFwiLi9saWIvdHJhbnNmb3Jtcy9lbXB0eV9zdGF0ZW1lbnRzXCI6MTAsXCIuL2xpYi90cmFuc2Zvcm1zL2V4cG9uZW50c1wiOjExLFwiLi9saWIvdHJhbnNmb3Jtcy9mdW5jdGlvbnNcIjoxMixcIi4vbGliL3RyYW5zZm9ybXMvaWZzXCI6MTMsXCIuL2xpYi90cmFuc2Zvcm1zL2lpZmVcIjoxNCxcIi4vbGliL3RyYW5zZm9ybXMvbGl0ZXJhbHNcIjoxNSxcIi4vbGliL3RyYW5zZm9ybXMvbG9vcHNcIjoxNixcIi4vbGliL3RyYW5zZm9ybXMvbWVtYmVyc1wiOjE3LFwiLi9saWIvdHJhbnNmb3Jtcy9vYmplY3RzXCI6MTgsXCIuL2xpYi90cmFuc2Zvcm1zL290aGVyc1wiOjE5LFwiLi9saWIvdHJhbnNmb3Jtcy9wcmVjZWRlbmNlXCI6MjAsXCIuL2xpYi90cmFuc2Zvcm1zL3JldHVybnNcIjoyMSxcIi4vbGliL3RyYW5zZm9ybXMvc3dpdGNoZXNcIjoyMixcIi4vbGliL3RyYW5zZm9ybXMvdW5zdXBwb3J0ZWRcIjoyMyxcIi4vcGFja2FnZS5qc29uXCI6NjEsZXNwcmltYTo0OH1dLDI6W2Z1bmN0aW9uKGUsdCx1KXt2YXIgbixyLGk9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZS5hcHBseSh0LGFyZ3VtZW50cyl9fTtyPWUoXCIuL3N0cmlwX3NwYWNlc1wiKTtuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlLHQpe3RoaXMucm9vdD1lO3RoaXMub3B0aW9ucz10IT1udWxsP3Q6e307dGhpcy53YWxrPWkodGhpcy53YWxrLHRoaXMpO3RoaXMucGF0aD1bXX10LnByb3RvdHlwZS5ydW49ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy53YWxrKHRoaXMucm9vdCl9O3QucHJvdG90eXBlLndhbGs9ZnVuY3Rpb24oZSx0KXt2YXIgdSxuLHI7bj10aGlzLnBhdGgubGVuZ3RoO3RoaXMucGF0aC5wdXNoKGUpO2lmKHR5cGVvZiB0IT09XCJzdHJpbmdcIil7dD12b2lkIDB9dHx8KHQ9ZS50eXBlKTt0aGlzLmN0eD17cGF0aDp0aGlzLnBhdGgsdHlwZTp0LHBhcmVudDp0aGlzLnBhdGhbdGhpcy5wYXRoLmxlbmd0aC0yXX07dT10aGlzW3RdO2lmKHUpe3I9dS5jYWxsKHRoaXMsZSx0aGlzLmN0eCk7aWYodGhpcy5kZWNvcmF0b3IhPW51bGwpe3I9dGhpcy5kZWNvcmF0b3IoZSxyKX19ZWxzZXtyPXRoaXMub25Vbmtub3duTm9kZShlLHRoaXMuY3R4KX10aGlzLnBhdGguc3BsaWNlKG4pO3JldHVybiByfTt0LnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24oKXt2YXIgZTtlPXRoaXMucnVuKCk7ZT1yKGUpO3JldHVybiBlLnRvU3RyaW5nV2l0aFNvdXJjZU1hcCgpfTt0LnByb3RvdHlwZS5kZWNvcmF0b3I9ZnVuY3Rpb24odCx1KXt2YXIgbixyLGksbyxzO249ZShcInNvdXJjZS1tYXBcIikuU291cmNlTm9kZTtyZXR1cm4gbmV3IG4odCE9bnVsbD8ocj10LmxvYykhPW51bGw/KGk9ci5zdGFydCkhPW51bGw/aS5saW5lOnZvaWQgMDp2b2lkIDA6dm9pZCAwLHQhPW51bGw/KG89dC5sb2MpIT1udWxsPyhzPW8uc3RhcnQpIT1udWxsP3MuY29sdW1uOnZvaWQgMDp2b2lkIDA6dm9pZCAwLHRoaXMub3B0aW9ucy5maWxlbmFtZSx1KX07cmV0dXJuIHR9KCk7dC5leHBvcnRzPW59LHtcIi4vc3RyaXBfc3BhY2VzXCI6NCxcInNvdXJjZS1tYXBcIjo1MH1dLDM6W2Z1bmN0aW9uKGUsdCx1KXt2YXIgbixyLGksbyxzLGEsbCxmLGMscCxELGgsbT1mdW5jdGlvbihlLHQpe2Zvcih2YXIgdSBpbiB0KXtpZihkLmNhbGwodCx1KSllW3VdPXRbdV19ZnVuY3Rpb24gbigpe3RoaXMuY29uc3RydWN0b3I9ZX1uLnByb3RvdHlwZT10LnByb3RvdHlwZTtlLnByb3RvdHlwZT1uZXcgbjtlLl9fc3VwZXJfXz10LnByb3RvdHlwZTtyZXR1cm4gZX0sZD17fS5oYXNPd25Qcm9wZXJ0eTtwPWUoXCIuLi9oZWxwZXJzXCIpLGY9cC5wcmVwZW5kQWxsLGM9cC5xdW90ZSxsPXAubmV3bGluZSxEPXAuc3BhY2Uscz1wLmRlbGltaXQsbz1wLmNvbW1hRGVsaW1pdCxoPXAudG9JbmRlbnQsYT1wLmpvaW5MaW5lcztpPWUoXCIuLi90cmFuc2Zvcm1zL2Jhc2VcIik7cj1lKFwiLi9iYXNlXCIpO3QuZXhwb3J0cz1uPWZ1bmN0aW9uKGUpe20odCxlKTtmdW5jdGlvbiB0KGUsdSl7aWYodT09bnVsbCl7dT17fX10Ll9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5faW5kZW50PTB9dC5wcm90b3R5cGUuUHJvZ3JhbT1mdW5jdGlvbihlKXt0aGlzLmNvbW1lbnRzPWUuY29tbWVudHM7cmV0dXJuIHRoaXMuQmxvY2tTdGF0ZW1lbnQoZSl9O3QucHJvdG90eXBlLkV4cHJlc3Npb25TdGF0ZW1lbnQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGwodGhpcy53YWxrKGUuZXhwcmVzc2lvbikpfTt0LnByb3RvdHlwZS5Bc3NpZ25tZW50RXhwcmVzc2lvbj1mdW5jdGlvbihlKXt2YXIgdDt0PXRoaXMucGFyZW4oRChbdGhpcy53YWxrKGUubGVmdCksZS5vcGVyYXRvcix0aGlzLndhbGsoZS5yaWdodCldKSk7aWYoZS5yaWdodC50eXBlPT09XCJGdW5jdGlvbkV4cHJlc3Npb25cIil7dD1bXCJcXG5cIix0aGlzLmluZGVudCgpLHQsXCJcXG5cIl19cmV0dXJuIHR9O3QucHJvdG90eXBlLklkZW50aWZpZXI9ZnVuY3Rpb24oZSl7cmV0dXJuW2UubmFtZV19O3QucHJvdG90eXBlLlVuYXJ5RXhwcmVzc2lvbj1mdW5jdGlvbihlKXt2YXIgdCx1O3Q9ZnVuY3Rpb24oKXtyZXR1cm4gZS5hcmd1bWVudC50eXBlPT09XCJVbmFyeUV4cHJlc3Npb25cIn07dT1mdW5jdGlvbigpe3JldHVybi9eW2Etel0rJC9pLnRlc3QoZS5vcGVyYXRvcil9O2lmKHQoKXx8dSgpKXtyZXR1cm4gdGhpcy5wYXJlbihbZS5vcGVyYXRvcixcIiBcIix0aGlzLndhbGsoZS5hcmd1bWVudCldKX1lbHNle3JldHVybiB0aGlzLnBhcmVuKFtlLm9wZXJhdG9yLHRoaXMud2FsayhlLmFyZ3VtZW50KV0pfX07dC5wcm90b3R5cGUuQmluYXJ5RXhwcmVzc2lvbj1mdW5jdGlvbihlKXt2YXIgdDt0PWUub3BlcmF0b3I7aWYodD09PVwiaW5cIil7dD1cIm9mXCJ9cmV0dXJuIHRoaXMucGFyZW4oRChbdGhpcy53YWxrKGUubGVmdCksdCx0aGlzLndhbGsoZS5yaWdodCldKSl9O3QucHJvdG90eXBlLkxpdGVyYWw9ZnVuY3Rpb24oZSl7aWYodHlwZW9mIGUudmFsdWU9PT1cInN0cmluZ1wiKXtyZXR1cm5bYyhlLnZhbHVlKV19ZWxzZXtyZXR1cm5bZS5yYXddfX07dC5wcm90b3R5cGUuTWVtYmVyRXhwcmVzc2lvbj1mdW5jdGlvbihlKXt2YXIgdDt0PWUuY29tcHV0ZWQ/W1wiW1wiLHRoaXMud2FsayhlLnByb3BlcnR5KSxcIl1cIl06ZS5fcHJlZml4ZWQ/W3RoaXMud2FsayhlLnByb3BlcnR5KV06W1wiLlwiLHRoaXMud2FsayhlLnByb3BlcnR5KV07cmV0dXJuIHRoaXMucGFyZW4oW3RoaXMud2FsayhlLm9iamVjdCksdF0pfTt0LnByb3RvdHlwZS5Mb2dpY2FsRXhwcmVzc2lvbj1mdW5jdGlvbihlKXt2YXIgdCx1O3U9e1wifHxcIjpcIm9yXCIsXCImJlwiOlwiYW5kXCJ9O3Q9dVtlLm9wZXJhdG9yXTtyZXR1cm4gdGhpcy5wYXJlbihbdGhpcy53YWxrKGUubGVmdCksXCIgXCIsdCxcIiBcIix0aGlzLndhbGsoZS5yaWdodCldKX07dC5wcm90b3R5cGUuVGhpc0V4cHJlc3Npb249ZnVuY3Rpb24oZSl7aWYoZS5fcHJlZml4KXtyZXR1cm5bXCJAXCJdfWVsc2V7cmV0dXJuW1widGhpc1wiXX19O3QucHJvdG90eXBlLkNhbGxFeHByZXNzaW9uPWZ1bmN0aW9uKGUsdCl7dmFyIHUsbixyO3U9dGhpcy53YWxrKGUuY2FsbGVlKTtyPXRoaXMubWFrZVNlcXVlbmNlKGVbXCJhcmd1bWVudHNcIl0pO2UuX2lzU3RhdGVtZW50PXQucGFyZW50LnR5cGU9PT1cIkV4cHJlc3Npb25TdGF0ZW1lbnRcIjtuPXIubGVuZ3RoPjA7aWYoZS5faXNTdGF0ZW1lbnQmJm4pe3JldHVybiBEKFt1LHJdKX1lbHNle3JldHVyblt1LHRoaXMucGFyZW4ocix0cnVlKV19fTt0LnByb3RvdHlwZS5JZlN0YXRlbWVudD1mdW5jdGlvbihlKXt2YXIgdCx1O3Q9ZS5hbHRlcm5hdGU7aWYoKHQhPW51bGw/dC50eXBlOnZvaWQgMCk9PT1cIklmU3RhdGVtZW50XCIpe3U9dGhpcy5pbmRlbnQoW1wiZWxzZSBcIix0aGlzLndhbGsoZS5hbHRlcm5hdGUsXCJJZlN0YXRlbWVudFwiKV0pfWVsc2UgaWYoKHQhPW51bGw/dC50eXBlOnZvaWQgMCk9PT1cIkJsb2NrU3RhdGVtZW50XCIpe3U9dGhpcy5pbmRlbnQoZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKHUpe3JldHVyblt1LFwiZWxzZVwiLFwiXFxuXCIsdC53YWxrKGUuYWx0ZXJuYXRlKV19fSh0aGlzKSl9ZWxzZSBpZih0IT1udWxsKXt1PXRoaXMuaW5kZW50KGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbih1KXtyZXR1cm5bdSxcImVsc2VcIixcIlxcblwiLHQuaW5kZW50KHQud2FsayhlLmFsdGVybmF0ZSkpXX19KHRoaXMpKX1lbHNle3U9W119cmV0dXJuIHRoaXMuaW5kZW50KGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihuKXt2YXIgcixpLG87aT10LndhbGsoZS50ZXN0KTtyPXQud2FsayhlLmNvbnNlcXVlbnQpO2lmKGUuY29uc2VxdWVudC50eXBlIT09XCJCbG9ja1N0YXRlbWVudFwiKXtyPXQuaW5kZW50KHIpfW89ZS5fbmVnYXRpdmU/XCJ1bmxlc3NcIjpcImlmXCI7cmV0dXJuW28sXCIgXCIsaSxcIlxcblwiLHIsdV19fSh0aGlzKSl9O3QucHJvdG90eXBlLkJsb2NrU3RhdGVtZW50PWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLm1ha2VTdGF0ZW1lbnRzKGUsZS5ib2R5KX07dC5wcm90b3R5cGUubWFrZVN0YXRlbWVudHM9ZnVuY3Rpb24oZSx0KXt2YXIgdSxuLHIsaSxvLHM7cz10Lm1hcCh0aGlzLndhbGspO289W107Zm9yKHU9cj0wLGk9cy5sZW5ndGg7cjxpO3U9KytyKXtuPXNbdV07aWYodFt1XS50eXBlIT09XCJCbG9ja1N0YXRlbWVudFwiKXtvLnB1c2godGhpcy5pbmRlbnQoKSl9by5wdXNoKG4pfXJldHVybiBvfTt0LnByb3RvdHlwZS5MaW5lQ29tbWVudD1mdW5jdGlvbihlKXtyZXR1cm5bXCIjXCIsZS52YWx1ZSxcIlxcblwiXX07dC5wcm90b3R5cGUuQmxvY2tDb21tZW50PWZ1bmN0aW9uKGUpe3ZhciB0LHU7dD0oXCIjIyNcIitlLnZhbHVlK1wiIyMjXCIpLnNwbGl0KFwiXFxuXCIpO3U9W3ModCxbXCJcXG5cIix0aGlzLmluZGVudCgpXSksXCJcXG5cIl07cmV0dXJuW1wiXFxuXCIsdGhpcy5pbmRlbnQoKSx1LFwiXFxuXCJdfTt0LnByb3RvdHlwZS5SZXR1cm5TdGF0ZW1lbnQ9ZnVuY3Rpb24oZSl7aWYoZS5hcmd1bWVudCl7cmV0dXJuIEQoW1wicmV0dXJuXCIsW3RoaXMud2FsayhlLmFyZ3VtZW50KSxcIlxcblwiXV0pfWVsc2V7cmV0dXJuW1wicmV0dXJuXCIsXCJcXG5cIl19fTt0LnByb3RvdHlwZS5BcnJheUV4cHJlc3Npb249ZnVuY3Rpb24oZSl7dmFyIHQsdTt1PWUuZWxlbWVudHMubGVuZ3RoO3Q9dT09PTE7aWYodT09PTApe3JldHVybltcIltdXCJdfWVsc2UgaWYodCl7cmV0dXJuIEQoW1wiW1wiLGUuZWxlbWVudHMubWFwKHRoaXMud2FsayksXCJdXCJdKX1lbHNle3JldHVybiB0aGlzLmluZGVudChmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24odSl7dmFyIG4scjtyPWUuZWxlbWVudHMubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBsKHQud2FsayhlKSl9KTtuPWYocix0LmluZGVudCgpKTtyZXR1cm5bXCJbXCIsXCJcXG5cIixuLHUsXCJdXCJdfX0odGhpcykpfX07dC5wcm90b3R5cGUuT2JqZWN0RXhwcmVzc2lvbj1mdW5jdGlvbihlLHQpe3ZhciB1LG47bj1lLnByb3BlcnRpZXMubGVuZ3RoO3U9ZS5fYnJhY2VkO2lmKG49PT0wKXtyZXR1cm5bXCJ7fVwiXX1lbHNlIGlmKG49PT0xKXtuPWUucHJvcGVydGllcy5tYXAodGhpcy53YWxrKTtpZih1KXtyZXR1cm4gdGhpcy5wYXJlbihEKFtcIntcIixuLFwifVwiXSkpfWVsc2V7cmV0dXJuIHRoaXMucGFyZW4oW25dKX19ZWxzZSBpZihlLl9sYXN0KXtuPWUucHJvcGVydGllcy5tYXAodGhpcy53YWxrKTtyZXR1cm4gcyhuLFtcIlxcblwiLHRoaXMuaW5kZW50KCldKX1lbHNle249dGhpcy5pbmRlbnQoZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKCl7bj1lLnByb3BlcnRpZXMubWFwKHQud2Fsayk7cmV0dXJuW1wiXFxuXCIsYShuLHQuaW5kZW50KCkpXX19KHRoaXMpKTtpZih1KXtyZXR1cm4gdGhpcy5wYXJlbihbXCJ7XCIsbixcIlxcblwiLHRoaXMuaW5kZW50KCksXCJ9XCJdKX1lbHNle3JldHVybiB0aGlzLnBhcmVuKFtuXSl9fX07dC5wcm90b3R5cGUuUHJvcGVydHk9ZnVuY3Rpb24oZSl7aWYoZS5raW5kIT09XCJpbml0XCIpe3Rocm93IG5ldyBFcnJvcihcIlByb3BlcnR5OiBub3Qgc3VyZSBhYm91dCBraW5kIFwiK2Uua2luZCl9cmV0dXJuIEQoW1t0aGlzLndhbGsoZS5rZXkpLFwiOlwiXSx0aGlzLndhbGsoZS52YWx1ZSldKX07dC5wcm90b3R5cGUuVmFyaWFibGVEZWNsYXJhdGlvbj1mdW5jdGlvbihlKXt2YXIgdDt0PWUuZGVjbGFyYXRpb25zLm1hcCh0aGlzLndhbGspO3JldHVybiBzKHQsdGhpcy5pbmRlbnQoKSl9O3QucHJvdG90eXBlLlZhcmlhYmxlRGVjbGFyYXRvcj1mdW5jdGlvbihlKXt2YXIgdDt0PVt0aGlzLndhbGsoZS5pZCksXCIgPSBcIixsKHRoaXMud2FsayhlLmluaXQpKV07aWYoZS5pbml0LnR5cGU9PT1cIkZ1bmN0aW9uRXhwcmVzc2lvblwiKXt0PVtcIlxcblwiLHRoaXMuaW5kZW50KCksdCxcIlxcblwiXX1yZXR1cm4gdH07dC5wcm90b3R5cGUuRnVuY3Rpb25FeHByZXNzaW9uPWZ1bmN0aW9uKGUsdCl7dmFyIHUsbjtuPXRoaXMubWFrZVBhcmFtcyhlLnBhcmFtcyxlLmRlZmF1bHRzKTt1PXRoaXMuaW5kZW50KGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbih1KXtyZXR1cm5bbixcIi0+XCIsXCJcXG5cIix0LndhbGsoZS5ib2R5KV19fSh0aGlzKSk7aWYoZS5fcGFyZW50aGVzaXplZCl7cmV0dXJuW1wiKFwiLHUsdGhpcy5pbmRlbnQoKSxcIilcIl19ZWxzZXtyZXR1cm4gdX19O3QucHJvdG90eXBlLkVtcHR5U3RhdGVtZW50PWZ1bmN0aW9uKGUpe3JldHVybltdfTt0LnByb3RvdHlwZS5TZXF1ZW5jZUV4cHJlc3Npb249ZnVuY3Rpb24oZSl7dmFyIHQ7dD1lLmV4cHJlc3Npb25zLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuW2Uud2Fsayh0KSxcIlxcblwiXX19KHRoaXMpKTtyZXR1cm4gcyh0LHRoaXMuaW5kZW50KCkpfTt0LnByb3RvdHlwZS5OZXdFeHByZXNzaW9uPWZ1bmN0aW9uKGUpe3ZhciB0LHUsbixyO3U9KChuPWUuY2FsbGVlKSE9bnVsbD9uLnR5cGU6dm9pZCAwKT09PVwiSWRlbnRpZmllclwiP1t0aGlzLndhbGsoZS5jYWxsZWUpXTpbXCIoXCIsdGhpcy53YWxrKGUuY2FsbGVlKSxcIilcIl07dD0oKHI9ZVtcImFyZ3VtZW50c1wiXSkhPW51bGw/ci5sZW5ndGg6dm9pZCAwKT9bXCIoXCIsdGhpcy5tYWtlU2VxdWVuY2UoZVtcImFyZ3VtZW50c1wiXSksXCIpXCJdOltdO3JldHVybiB0aGlzLnBhcmVuKFtcIm5ldyBcIix1LHRdKX07dC5wcm90b3R5cGUuV2hpbGVTdGF0ZW1lbnQ9ZnVuY3Rpb24oZSl7cmV0dXJuW1wid2hpbGUgXCIsdGhpcy53YWxrKGUudGVzdCksXCJcXG5cIix0aGlzLm1ha2VMb29wQm9keShlLmJvZHkpXX07dC5wcm90b3R5cGUuQ29mZmVlTG9vcFN0YXRlbWVudD1mdW5jdGlvbihlKXtyZXR1cm5bXCJsb29wXCIsXCJcXG5cIix0aGlzLm1ha2VMb29wQm9keShlLmJvZHkpXX07dC5wcm90b3R5cGUuQnJlYWtTdGF0ZW1lbnQ9ZnVuY3Rpb24oZSl7cmV0dXJuW1wiYnJlYWtcIixcIlxcblwiXX07dC5wcm90b3R5cGUuQ29udGludWVTdGF0ZW1lbnQ9ZnVuY3Rpb24oZSl7cmV0dXJuW1wiY29udGludWVcIixcIlxcblwiXX07dC5wcm90b3R5cGUuRGVidWdnZXJTdGF0ZW1lbnQ9ZnVuY3Rpb24oZSl7cmV0dXJuW1wiZGVidWdnZXJcIixcIlxcblwiXX07dC5wcm90b3R5cGUuVHJ5U3RhdGVtZW50PWZ1bmN0aW9uKGUpe3ZhciB0LHUsbjtuPXRoaXMuaW5kZW50KGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbigpe3JldHVybltcInRyeVwiLFwiXFxuXCIsdC53YWxrKGUuYmxvY2spXX19KHRoaXMpKTt0PXRoaXMuaW5kZW50KGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbih1KXtyZXR1cm5bdSx0LndhbGsoZS5oYW5kbGVyKV19fSh0aGlzKSk7dT1lLmZpbmFsaXplciE9bnVsbD90aGlzLmluZGVudChmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24odSl7cmV0dXJuW3UsXCJmaW5hbGx5XCIsXCJcXG5cIix0LndhbGsoZS5maW5hbGl6ZXIpXX19KHRoaXMpKTpbXTtyZXR1cm5bbix0LHVdfTt0LnByb3RvdHlwZS5DYXRjaENsYXVzZT1mdW5jdGlvbihlKXtyZXR1cm5bXCJjYXRjaCBcIix0aGlzLndhbGsoZS5wYXJhbSksXCJcXG5cIix0aGlzLndhbGsoZS5ib2R5KV19O3QucHJvdG90eXBlLlRocm93U3RhdGVtZW50PWZ1bmN0aW9uKGUpe3JldHVybltcInRocm93IFwiLHRoaXMud2FsayhlLmFyZ3VtZW50KSxcIlxcblwiXX07dC5wcm90b3R5cGUuQ29uZGl0aW9uYWxFeHByZXNzaW9uPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnBhcmVuKEQoW1wiaWZcIix0aGlzLndhbGsoZS50ZXN0KSxcInRoZW5cIix0aGlzLndhbGsoZS5jb25zZXF1ZW50KSxcImVsc2VcIix0aGlzLndhbGsoZS5hbHRlcm5hdGUpXSkpfTt0LnByb3RvdHlwZS5VcGRhdGVFeHByZXNzaW9uPWZ1bmN0aW9uKGUpe2lmKGUucHJlZml4KXtyZXR1cm5bZS5vcGVyYXRvcix0aGlzLndhbGsoZS5hcmd1bWVudCldfWVsc2V7cmV0dXJuW3RoaXMud2FsayhlLmFyZ3VtZW50KSxlLm9wZXJhdG9yXX19O3QucHJvdG90eXBlLlN3aXRjaFN0YXRlbWVudD1mdW5jdGlvbihlKXt2YXIgdCx1O3Q9dGhpcy5pbmRlbnQoZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHQubWFrZVN0YXRlbWVudHMoZSxlLmNhc2VzKX19KHRoaXMpKTt1PXRoaXMud2FsayhlLmRpc2NyaW1pbmFudCk7aWYoZS5kaXNjcmltaW5hbnQudHlwZT09PVwiQ29uZGl0aW9uYWxFeHByZXNzaW9uXCIpe3U9W1wiKFwiLHUsXCIpXCJdfXJldHVybltcInN3aXRjaCBcIix1LFwiXFxuXCIsdF19O3QucHJvdG90eXBlLkNvZmZlZUxpc3RFeHByZXNzaW9uPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLm1ha2VTZXF1ZW5jZShlLmV4cHJlc3Npb25zKX07dC5wcm90b3R5cGUuU3dpdGNoQ2FzZT1mdW5jdGlvbihlKXt2YXIgdCx1O3Q9ZS50ZXN0P1tcIndoZW4gXCIsdGhpcy53YWxrKGUudGVzdCldOltcImVsc2VcIl07dT10aGlzLmluZGVudChmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdC5tYWtlU3RhdGVtZW50cyhlLGUuY29uc2VxdWVudCl9fSh0aGlzKSk7cmV0dXJuW3QsXCJcXG5cIix1XX07dC5wcm90b3R5cGUuRm9ySW5TdGF0ZW1lbnQ9ZnVuY3Rpb24oZSl7dmFyIHQsdSxuO2lmKGUubGVmdC50eXBlIT09XCJWYXJpYWJsZURlY2xhcmF0aW9uXCIpe3U9dGhpcy53YWxrKGUubGVmdCk7bj17dHlwZTpcIkV4cHJlc3Npb25TdGF0ZW1lbnRcIixleHByZXNzaW9uOnt0eXBlOlwiQ29mZmVlRXNjYXBlZEV4cHJlc3Npb25cIixyYXc6dStcIiA9IFwiK3V9fTtlLmJvZHkuYm9keT1bbl0uY29uY2F0KGUuYm9keS5ib2R5KX1lbHNle3U9dGhpcy53YWxrKGUubGVmdC5kZWNsYXJhdGlvbnNbMF0uaWQpfXQ9dGhpcy5tYWtlTG9vcEJvZHkoZS5ib2R5KTtyZXR1cm5bXCJmb3IgXCIsdSxcIiBvZiBcIix0aGlzLndhbGsoZS5yaWdodCksXCJcXG5cIix0XX07dC5wcm90b3R5cGUubWFrZUxvb3BCb2R5PWZ1bmN0aW9uKGUpe3ZhciB0O3Q9KGUhPW51bGw/ZS50eXBlOnZvaWQgMCk9PT1cIkJsb2NrU3RhdGVtZW50XCI7aWYoIWV8fHQmJmUuYm9keS5sZW5ndGg9PT0wKXtyZXR1cm4gdGhpcy5pbmRlbnQoZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuW2UuaW5kZW50KCksXCJjb250aW51ZVwiLFwiXFxuXCJdfX0odGhpcykpfWVsc2UgaWYodCl7cmV0dXJuIHRoaXMuaW5kZW50KGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0LndhbGsoZSl9fSh0aGlzKSl9ZWxzZXtyZXR1cm4gdGhpcy5pbmRlbnQoZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuW3QuaW5kZW50KCksdC53YWxrKGUpXX19KHRoaXMpKX19O3QucHJvdG90eXBlLkNvZmZlZUVzY2FwZWRFeHByZXNzaW9uPWZ1bmN0aW9uKGUpe2lmKGUuX3BhcmVudGhlc2l6ZWQpe3JldHVybltcIihgXCIsZS5yYXcsXCJgKVwiXX1lbHNle3JldHVybltcImBcIixlLnJhdyxcImBcIl19fTt0LnByb3RvdHlwZS5Db2ZmZWVQcm90b3R5cGVFeHByZXNzaW9uPWZ1bmN0aW9uKGUpe2lmKGUuY29tcHV0ZWQpe3JldHVyblt0aGlzLndhbGsoZS5vYmplY3QpLFwiOjpbXCIsdGhpcy53YWxrKGUucHJvcGVydHkpLFwiXVwiXX1lbHNle3JldHVyblt0aGlzLndhbGsoZS5vYmplY3QpLFwiOjpcIix0aGlzLndhbGsoZS5wcm9wZXJ0eSldfX07dC5wcm90b3R5cGUuQ29mZmVlRG9FeHByZXNzaW9uPWZ1bmN0aW9uKGUpe3JldHVybiBEKFtcImRvXCIsdGhpcy53YWxrKGVbXCJmdW5jdGlvblwiXSldKX07dC5wcm90b3R5cGUubWFrZVNlcXVlbmNlPWZ1bmN0aW9uKGUpe3ZhciB0LHUsbixyLGk7Zm9yKHU9cj0wLGk9ZS5sZW5ndGg7cjxpO3U9KytyKXt0PWVbdV07bj11PT09ZS5sZW5ndGgtMTtpZighbil7aWYodC50eXBlPT09XCJGdW5jdGlvbkV4cHJlc3Npb25cIil7dC5fcGFyZW50aGVzaXplZD10cnVlfWVsc2UgaWYodC50eXBlPT09XCJPYmplY3RFeHByZXNzaW9uXCIpe3QuX2JyYWNlZD10cnVlfX19cmV0dXJuIG8oZS5tYXAodGhpcy53YWxrKSl9O3QucHJvdG90eXBlLm1ha2VQYXJhbXM9ZnVuY3Rpb24oZSx0KXt2YXIgdSxuLHIsaSxvLGE7bz1bXTtmb3Iobj1yPTAsaT1lLmxlbmd0aDtyPGk7bj0rK3Ipe2E9ZVtuXTtpZih0W25dKXt1PXRoaXMud2Fsayh0W25dKTtvLnB1c2goW3RoaXMud2FsayhhKSxcIiA9IFwiLHVdKX1lbHNle28ucHVzaCh0aGlzLndhbGsoYSkpfX1pZihlLmxlbmd0aCl7cmV0dXJuW1wiKFwiLHMobyxcIiwgXCIpLFwiKSBcIl19ZWxzZXtyZXR1cm5bXX19O3QucHJvdG90eXBlLnBhcmVudGhlc2l6ZUFyZ3VtZW50cz1mdW5jdGlvbihlKXt2YXIgdCx1LG4scixpLG8scztvPWVbXCJhcmd1bWVudHNcIl07cz1bXTtmb3IodT1yPTAsaT1vLmxlbmd0aDtyPGk7dT0rK3Ipe3Q9b1t1XTtuPXU9PT1lW1wiYXJndW1lbnRzXCJdLmxlbmd0aC0xO2lmKHQudHlwZT09PVwiRnVuY3Rpb25FeHByZXNzaW9uXCIpe2lmKCFuKXtzLnB1c2godC5fcGFyZW50aGVzaXplZD10cnVlKX1lbHNle3MucHVzaCh2b2lkIDApfX1lbHNle3MucHVzaCh2b2lkIDApfX1yZXR1cm4gc307dC5wcm90b3R5cGUuaW5kZW50PWZ1bmN0aW9uKGUpe3ZhciB0LHUsbjtpZih0eXBlb2YgZT09PVwiZnVuY3Rpb25cIil7dD10aGlzLmluZGVudCgpO3RoaXMuX2luZGVudCs9MTt1PWUodCk7dGhpcy5faW5kZW50LT0xO3JldHVybiB1fWVsc2UgaWYoZSl7cmV0dXJuW3RoaXMuaW5kZW50KCksZV19ZWxzZXtuPWgodGhpcy5vcHRpb25zLmluZGVudCk7cmV0dXJuIEFycmF5KHRoaXMuX2luZGVudCsxKS5qb2luKG4pfX07dC5wcm90b3R5cGUucGFyZW49ZnVuY3Rpb24oZSx0KXt2YXIgdSxuO2lmKHQ9PW51bGwpe3Q9KG49dGhpcy5wYXRoW3RoaXMucGF0aC5sZW5ndGgtMV0pIT1udWxsP24uX3BhcmVudGhlc2l6ZWQ6dm9pZCAwfXU9ZS50b1N0cmluZygpLm1hdGNoKC9cXG4kLyk7aWYodCl7aWYodSl7cmV0dXJuW1wiKFwiLGUsdGhpcy5pbmRlbnQoKSxcIilcIl19ZWxzZXtyZXR1cm5bXCIoXCIsZSxcIilcIl19fWVsc2V7cmV0dXJuIGV9fTt0LnByb3RvdHlwZS5vblVua25vd25Ob2RlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuc3ludGF4RXJyb3IoZSxlLnR5cGUrXCIgaXMgbm90IHN1cHBvcnRlZFwiKX07dC5wcm90b3R5cGUuc3ludGF4RXJyb3I9aS5wcm90b3R5cGUuc3ludGF4RXJyb3I7cmV0dXJuIHR9KHIpfSx7XCIuLi9oZWxwZXJzXCI6NSxcIi4uL3RyYW5zZm9ybXMvYmFzZVwiOjYsXCIuL2Jhc2VcIjoyfV0sNDpbZnVuY3Rpb24oZSx0LHUpe3ZhciBuLHIsaSxvLHMsYSxsO249L15cXHMqXFxuK1xccyokLztsPWZ1bmN0aW9uKGUpe2U9YShlKTtlPXMoZSk7ZT1vKGUpO2U9aShlKTtyZXR1cm4gZX07aT1mdW5jdGlvbihlKXt2YXIgdCx1O3U9MDt0PW51bGw7cmV0dXJuIHIoZSx7fSxmdW5jdGlvbihlKXtpZih1PT09MHx8dT09PTEmJmUubWF0Y2gobikpe3U9MTtyZXR1cm4gZX1lbHNlIGlmKHU9PT0xJiZlLm1hdGNoKC9eWyBcXHRdKyQvKSl7dD1lO3U9MjtyZXR1cm5cIlwifWVsc2UgaWYodT09PTIpe3U9MTtpZihlLm1hdGNoKG4pKXtyZXR1cm4gZX1lbHNle3JldHVybiB0K2V9fWVsc2V7dT0wO3JldHVybiBlfX0pfTthPWZ1bmN0aW9uKGUpe3JldHVybiByKGUse30sZnVuY3Rpb24oZSl7aWYoZS5tYXRjaChuKSl7cmV0dXJuXCJcIn1lbHNle3RoaXNbXCJicmVha1wiXSgpO3JldHVybiBlfX0pfTtzPWZ1bmN0aW9uKGUpe3JldHVybiByKGUse3JldmVyc2U6dHJ1ZX0sZnVuY3Rpb24oZSl7aWYoZS5tYXRjaChuKSl7cmV0dXJuXCJcIn1lbHNle3RoaXNbXCJicmVha1wiXSgpO3JldHVybiBlK1wiXFxuXCJ9fSl9O289ZnVuY3Rpb24oZSl7dmFyIHQ7dD0wO3JldHVybiByKGUse30sZnVuY3Rpb24oZSl7aWYoZT09PVwiXFxuXCIpe3QrPTF9ZWxzZSBpZihlLm1hdGNoKC9eXFxzKiQvKSl7fWVsc2V7dD0wfWlmKHQ+PTMpe3JldHVyblwiXCJ9ZWxzZXtyZXR1cm4gZX19KX07cj1mdW5jdGlvbihlLHQsdSl7dmFyIG4scixpO2lmKHQ9PW51bGwpe3Q9e319bj1mYWxzZTtyPXtcImJyZWFrXCI6ZnVuY3Rpb24oZSl7cmV0dXJuIG49dHJ1ZX19O2k9ZnVuY3Rpb24oZSx0LHUpe3ZhciBvLHMsYSxsLGYsYyxwLEQsaCxtLGQsQTtpZih0PT1udWxsKXt0PXt9fUQ9dC5yZXZlcnNlP2Z1bmN0aW9uKCl7ZD1bXTtmb3IodmFyIHQ9aD1lLmNoaWxkcmVuLmxlbmd0aC0xO2g8PTA/dDw9MDp0Pj0wO2g8PTA/dCsrOnQtLSl7ZC5wdXNoKHQpfXJldHVybiBkfS5hcHBseSh0aGlzKTpmdW5jdGlvbigpe0E9W107Zm9yKHZhciB0PTAsdT1lLmNoaWxkcmVuLmxlbmd0aDswPD11P3Q8dTp0PnU7MDw9dT90Kys6dC0tKXtBLnB1c2godCl9cmV0dXJuIEF9LmFwcGx5KHRoaXMpO2ZvcihmPTAsYz1ELmxlbmd0aDtmPGM7ZisrKXtzPURbZl07aWYobil7cmV0dXJuIGV9bz1lLmNoaWxkcmVuW3NdO2lmKCFvKXt9ZWxzZSBpZihvLmNoaWxkcmVuKXtpKG8sdCx1KX1lbHNlIGlmKG8hPT1cIlwiKXtwPXUuY2FsbChyLG8pO2UuY2hpbGRyZW5bc109cH19cmV0dXJuIGV9O3JldHVybiBpLmNhbGwocixlLHQsdSl9O3QuZXhwb3J0cz1sfSx7fV0sNTpbZnVuY3Rpb24oZSx0LHUpe3UuZGVsaW1pdD1mdW5jdGlvbihlLHQpe3ZhciB1LG4scixpLG87bz1bXTtmb3IodT1yPTAsaT1lLmxlbmd0aDtyPGk7dT0rK3Ipe249ZVt1XTtpZih1PjApe28ucHVzaCh0KX1vLnB1c2gobil9cmV0dXJuIG99O3UuY29tbWFEZWxpbWl0PWZ1bmN0aW9uKGUpe3ZhciB0LHUsbixyLGk7aT1bXTtmb3IodD1uPTAscj1lLmxlbmd0aDtuPHI7dD0rK24pe3U9ZVt0XTtpZih0PjApe2lmKC9eXFxuLy50ZXN0KHUudG9TdHJpbmcoKSkpe2kucHVzaChcIixcIil9ZWxzZXtpLnB1c2goXCIsIFwiKX19aS5wdXNoKHUpfXJldHVybiBpfTt1LnByZXBlbmRBbGw9ZnVuY3Rpb24oZSx0KXt2YXIgdSxuLHIsaSxvO289W107Zm9yKHU9cj0wLGk9ZS5sZW5ndGg7cjxpO3U9KytyKXtuPWVbdV07by5wdXNoKHQpO28ucHVzaChuKX1yZXR1cm4gb307dS5idWlsZEVycm9yPWZ1bmN0aW9uKGUsdCx1KXt2YXIgbixyLGksbyxzLGEsbCxmLGMscCxELGgsbSxkLEEsQyxFO2lmKHU9PW51bGwpe3U9XCJcIn1pZihlLmpzMmNvZmZlZSl7cmV0dXJuIGV9aT1lLmRlc2NyaXB0aW9uO2w9KG09KGQ9ZS5zdGFydCkhPW51bGw/ZC5saW5lOnZvaWQgMCkhPW51bGw/bTplLmxpbmVOdW1iZXI7cj0oQT0oQz0oRT1lLnN0YXJ0KSE9bnVsbD9FLmNvbHVtbjp2b2lkIDApIT1udWxsP0M6ZS5jb2x1bW4mJmUuY29sdW1uLTEpIT1udWxsP0E6MDtzPXUrXCI6XCIrbCtcIjpcIityK1wiOiBcIitpO2Y9dC5zcGxpdChcIlxcblwiKTtEPU1hdGgubWF4KGwtMywwKTtjPWwtMTtvPWMudG9TdHJpbmcoKS5sZW5ndGg7YT0xO2lmKGUuZW5kKXthPU1hdGgubWF4KGUuZW5kLmNvbHVtbi1lLnN0YXJ0LmNvbHVtbiwxKX1oPWZ1bmN0aW9uKGUpe3JldHVybiBBcnJheSgxK28tZS50b1N0cmluZygpLmxlbmd0aCkuam9pbihcIiBcIikrZX07dD1mLnNsaWNlKEQsK2MrMXx8OWU5KS5tYXAoZnVuY3Rpb24oZSx0KXtyZXR1cm4gaCgxK3QrRCkrXCIgIFwiK2V9KTt0LnB1c2goQXJyYXkobyszKS5qb2luKFwiIFwiKStBcnJheShyKzEpLmpvaW4oXCIgXCIpK0FycmF5KGErMSkuam9pbihcIl5cIikpO3Q9dC5qb2luKFwiXFxuXCIpO3A9cytcIlxcblxcblwiK3Q7bj1lO2U9bmV3IEVycm9yKHApO2UuZmlsZW5hbWU9dTtlLmRlc2NyaXB0aW9uPW4uZGVzY3JpcHRpb247ZS5zdGFydD17bGluZTpsLGNvbHVtbjpyfTtlLmVuZD1uLmVuZDtlLnNvdXJjZVByZXZpZXc9dDtlLmpzMmNvZmZlZT10cnVlO3JldHVybiBlfTt1LnNwYWNlPWZ1bmN0aW9uKGUpe3JldHVybiBlLnJlZHVjZShmdW5jdGlvbihlLHQsdSl7aWYodT09PTApe3JldHVybiBlLmNvbmNhdChbdF0pfWVsc2UgaWYodC50b1N0cmluZygpLnN1YnN0cigwLDEpPT09XCJcXG5cIil7cmV0dXJuIGUuY29uY2F0KFt0XSl9ZWxzZXtyZXR1cm4gZS5jb25jYXQoW1wiIFwiLHRdKX19LFtdKX07dS5uZXdsaW5lPWZ1bmN0aW9uKGUpe2lmKC9cXG4kLy50ZXN0KGUudG9TdHJpbmcoKSkpe3JldHVybiBlfWVsc2V7cmV0dXJuW2UsXCJcXG5cIl19fTt1Lmluc3BlY3Q9ZnVuY3Rpb24odCl7cmV0dXJuXCJ+fn5+XFxuXCIrZShcInV0aWxcIikuaW5zcGVjdCh0LHtkZXB0aDoxZTMsY29sb3JzOnRydWV9KStcIlxcbn5+fn5cIn07dS5yZXBsYWNlPWZ1bmN0aW9uKGUsdCl7dC5yYW5nZT1lLnJhbmdlO3QubG9jPWUubG9jO3JldHVybiB0fTt1LmNsb25lPWZ1bmN0aW9uKGUpe3JldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGUpKX07dS5xdW90ZT1mdW5jdGlvbihlKXt2YXIgdCx1O2lmKHR5cGVvZiBlPT09XCJzdHJpbmdcIil7dD1mdW5jdGlvbihlKXt2YXIgdDt0PWUuY2hhckNvZGVBdCgwKS50b1N0cmluZygxNik7dD1mdW5jdGlvbigpe3ZhciBlLHUsbjtuPVtdO2ZvcihlPTAsdT00LXQubGVuZ3RoOzA8PXU/ZTx1OmU+dTswPD11P2UrKzplLS0pe24ucHVzaChcIjBcIil9cmV0dXJuIG59KCkuam9pbihcIlwiKSt0O3JldHVyblwiXFxcXHVcIit0fTt1PWUucmVwbGFjZSgvXFxcXC9nLFwiXFxcXFxcXFxcIikucmVwbGFjZSgvJy9nLFwiXFxcXCdcIikucmVwbGFjZSgvXFxcXFwiL2csJ1wiJykucmVwbGFjZSgvXFxuL2csXCJcXFxcblwiKS5yZXBsYWNlKC9bXFx1MDAwMC1cXHUwMDE5XFx1MDBhZFxcdTIwMGJcXHUyMDI4XFx1MjAyOVxcdWZlZmZdL2csdCk7cmV0dXJuXCInXCIrdStcIidcIn1lbHNle3JldHVybiBKU09OLnN0cmluZ2lmeShlKX19O3UuZ2V0UHJlY2VkZW5jZT1mdW5jdGlvbihlKXt2YXIgdCx1LG4scjtyPWUudHlwZTt1PWZ1bmN0aW9uKHQpe3JldHVybiB0LmluZGV4T2YoZS5vcGVyYXRvcik+LTF9O3Q9e1wiKipcIjoxNyxcIipcIjoxNCxcIi9cIjoxNCxcIiVcIjoxNCxcIitcIjoxMyxcIi1cIjoxMyxcIjw8XCI6MTIsXCI+PlwiOjEyLFwiPj4+XCI6MTIsXCI8XCI6MTEsXCI+XCI6MTEsXCI8PVwiOjExLFwiPj1cIjoxMSxcImluXCI6MTEsXCJpbnN0YW5jZW9mXCI6MTEsXCI9PVwiOjEwLFwiPT09XCI6MTAsXCIhPVwiOjEwLFwiIT09XCI6MTAsXCImXCI6OSxcIl5cIjo4LFwifFwiOjd9O249e1wiJiZcIjo2LFwifHxcIjo1fTtzd2l0Y2gocil7Y2FzZVwiTGl0ZXJhbFwiOmNhc2VcIklkZW50aWZpZXJcIjpyZXR1cm4gOTk7Y2FzZVwiTWVtYmVyRXhwcmVzc2lvblwiOmNhc2VcIkNhbGxFeHByZXNzaW9uXCI6cmV0dXJuIDE4O2Nhc2VcIk5ld0V4cHJlc3Npb25cIjppZihlW1wiYXJndW1lbnRzXCJdLmxlbmd0aD09PTApe3JldHVybiAxN31lbHNle3JldHVybiAxOH1icmVhaztjYXNlXCJVcGRhdGVFeHByZXNzaW9uXCI6aWYoZS5wcmVmaXgpe3JldHVybiAxNX1lbHNle3JldHVybiAxNn1icmVhaztjYXNlXCJVbmFyeUV4cHJlc3Npb25cIjpyZXR1cm4gMTU7Y2FzZVwiQmluYXJ5RXhwcmVzc2lvblwiOnJldHVybiB0W2Uub3BlcmF0b3JdO2Nhc2VcIkxvZ2ljYWxFeHByZXNzaW9uXCI6cmV0dXJuIG5bZS5vcGVyYXRvcl07Y2FzZVwiQ29uZGl0aW9uYWxFeHByZXNzaW9uXCI6cmV0dXJuIDQ7Y2FzZVwiQXNzaWdubWVudEV4cHJlc3Npb25cIjpyZXR1cm4gMztjYXNlXCJTZXF1ZW5jZUV4cHJlc3Npb25cIjpyZXR1cm4gMDtkZWZhdWx0OnJldHVybi0xfX07dS5sYXN0U3RhdGVtZW50PWZ1bmN0aW9uKGUpe3ZhciB0LG4scixpO2Zvcih0PW49aT1lLmxlbmd0aC0xO2k8PTA/bjw9MDpuPj0wO3Q9aTw9MD8rK246LS1uKXtyPWVbdF07aWYoIXIpe2NvbnRpbnVlfWlmKCF1LmlzQ29tbWVudChyKSl7cmV0dXJuIHJ9fX07dS5nZXRSZXR1cm5TdGF0ZW1lbnRzPWZ1bmN0aW9uKGUpe3ZhciB0LG4scixpLG87cj11LmdldFJldHVyblN0YXRlbWVudHMsaT11Lmxhc3RTdGF0ZW1lbnQ7aWYoIWUpe3JldHVybn1lbHNlIGlmKGUubGVuZ3RoKXtvPWkoZSl9ZWxzZXtvPWV9aWYoIW8pe3JldHVybltdfWVsc2UgaWYoby50eXBlPT09XCJSZXR1cm5TdGF0ZW1lbnRcIil7cmV0dXJuW29dfWVsc2UgaWYoby50eXBlPT09XCJCbG9ja1N0YXRlbWVudFwiKXtyZXR1cm4gcihvLmJvZHkpfWVsc2UgaWYoby50eXBlPT09XCJJZlN0YXRlbWVudFwiJiZvLmNvbnNlcXVlbnQmJm8uYWx0ZXJuYXRlKXtuPXIoby5jb25zZXF1ZW50KTt0PXIoby5hbHRlcm5hdGUpO2lmKG4ubGVuZ3RoPjAmJnQubGVuZ3RoPjApe3JldHVybiBuLmNvbmNhdCh0KX1lbHNle3JldHVybltdfX1lbHNle3JldHVybltdfX07dS5qb2luTGluZXM9ZnVuY3Rpb24oZSx0KXt2YXIgdSxuLHIsaSxvLHM7cz1bXTtmb3IodT1pPTAsbz1lLmxlbmd0aDtpPG87dT0rK2kpe3I9ZVt1XTtzLnB1c2godCk7cy5wdXNoKHIpO249dSE9PWUubGVuZ3RoLTE7aWYoIXIudG9TdHJpbmcoKS5tYXRjaCgvXFxuJC8pJiZuKXtzLnB1c2goXCJcXG5cIil9fXJldHVybiBzfTt1LnJlc2VydmVkPXtrZXl3b3JkczpbXCJ0aGVuXCIsXCJ1bmxlc3NcIixcInVudGlsXCIsXCJsb29wXCIsXCJvZlwiLFwiYnlcIixcIndoZW5cIl0scmVzZXJ2ZWQ6W1wiY2FzZVwiLFwiZGVmYXVsdFwiLFwiZnVuY3Rpb25cIixcInZhclwiLFwidm9pZFwiLFwid2l0aFwiLFwiY29uc3RcIixcImxldFwiLFwiZW51bVwiLFwiZXhwb3J0XCIsXCJpbXBvcnRcIixcIm5hdGl2ZVwiLFwiX19oYXNQcm9wXCIsXCJfX2V4dGVuZHNcIixcIl9fc2xpY2VcIixcIl9fYmluZFwiLFwiX19pbmRleE9mXCIsXCJpbXBsZW1lbnRzXCIsXCJpbnRlcmZhY2VcIixcInBhY2thZ2VcIixcInByaXZhdGVcIixcInByb3RlY3RlZFwiLFwicHVibGljXCIsXCJzdGF0aWNcIixcInlpZWxkXCJdLGFsaWFzZXM6W1wiYW5kXCIsXCJvclwiLFwiaXNcIixcImlzbnRcIixcIm5vdFwiLFwieWVzXCIsXCJub1wiLFwib25cIixcIm9mZlwiXX07dS5yZXNlcnZlZFdvcmRzPXUucmVzZXJ2ZWQua2V5d29yZHMuY29uY2F0KHUucmVzZXJ2ZWQucmVzZXJ2ZWQuY29uY2F0KHUucmVzZXJ2ZWQuYWxpYXNlcykpO3UubmV4dFVudGlsPWZ1bmN0aW9uKGUsdCx1KXt2YXIgbixyLGksbyxzLGE7cj1lLmluZGV4T2YodCk7Zm9yKG49aT1zPXIrMSxhPWUubGVuZ3RoO3M8PWE/aTw9YTppPj1hO249czw9YT8rK2k6LS1pKXtvPWVbbl07aWYoKG8hPW51bGw/by50eXBlOnZvaWQgMCkmJnUobykpe3JldHVybiBvfX19O3UubmV4dE5vbkNvbW1lbnQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdS5uZXh0VW50aWwoZSx0LGZ1bmN0aW9uKGUpe3JldHVybiBlLnR5cGUhPT1cIkJsb2NrQ29tbWVudFwiJiZlLnR5cGUhPT1cIkxpbmVDb21tZW50XCJ9KX07dS5pc0xvb3A9ZnVuY3Rpb24oZSl7cmV0dXJuIGUudGVzdD09bnVsbHx8dS5pc1RydXRoeShlLnRlc3QpfTt1LmlzVHJ1dGh5PWZ1bmN0aW9uKGUpe3JldHVybiBlLnR5cGU9PT1cIkxpdGVyYWxcIiYmZS52YWx1ZX07dS5lc2NhcGVKcz1mdW5jdGlvbih0KXtyZXR1cm4gdS5yZXBsYWNlKHQse3R5cGU6XCJDb2ZmZWVFc2NhcGVkRXhwcmVzc2lvblwiLHJhdzplKFwiZXNjb2RlZ2VuXCIpLmdlbmVyYXRlKHQpfSl9O3Uubm9uQ29tbWVudHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGUuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiF1LmlzQ29tbWVudChlKX0pfTt1LmlzQ29tbWVudD1mdW5jdGlvbihlKXtyZXR1cm4gZS50eXBlPT09XCJMaW5lQ29tbWVudFwifHxlLnR5cGU9PT1cIkJsb2NrQ29tbWVudFwifTt1LnRvSW5kZW50PWZ1bmN0aW9uKGUpe2lmKGU9PT1cInRhYlwifHxlPT09XCJ0XCIpe3JldHVyblwiXHRcIn1lbHNlIGlmKHR5cGVvZiBlPT09XCJzdHJpbmdcIiYmXCJcIisgK2UhPT1lKXtyZXR1cm4gZX1lbHNle3JldHVybiBBcnJheSgrZSsxKS5qb2luKFwiIFwiKX19fSx7ZXNjb2RlZ2VuOjI5LHV0aWw6Mjh9XSw2OltmdW5jdGlvbihlLHQsdSl7dmFyIG4scixpLG8scyxhLGwsZixjPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciB1IGluIHQpe2lmKHAuY2FsbCh0LHUpKWVbdV09dFt1XX1mdW5jdGlvbiBuKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfW4ucHJvdG90eXBlPXQucHJvdG90eXBlO2UucHJvdG90eXBlPW5ldyBuO2UuX19zdXBlcl9fPXQucHJvdG90eXBlO3JldHVybiBlfSxwPXt9Lmhhc093blByb3BlcnR5LEQ9W10uc2xpY2U7cz1lKFwiLi4vaGVscGVyc1wiKSxyPXMuYnVpbGRFcnJvcixvPXMuY2xvbmUsYT1zLnJlcGxhY2UsZj1zLnRvSW5kZW50O3QuZXhwb3J0cz1uPWZ1bmN0aW9uKCl7dC5ydW49ZnVuY3Rpb24oZSx1LG4scil7dmFyIGksbyxzO2k9ZnVuY3Rpb24oZSl7Yyh0LGUpO2Z1bmN0aW9uIHQoKXtyZXR1cm4gdC5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcyxhcmd1bWVudHMpfXJldHVybiB0fSh0KTtsKGksbik7cz1uZXcgaShlLHUpO289cy5ydW4oKTtpZihyLndhcm5pbmdzPT1udWxsKXtyLndhcm5pbmdzPVtdfXIud2FybmluZ3M9ci53YXJuaW5ncy5jb25jYXQocy53YXJuaW5ncyk7cmV0dXJuIG99O2Z1bmN0aW9uIHQoZSx0KXt0aGlzLmFzdD1lO3RoaXMub3B0aW9ucz10O3RoaXMuc2NvcGVzPVtdO3RoaXMuY3R4PXt2YXJzOltdfTt0aGlzLndhcm5pbmdzPVtdfXQucHJvdG90eXBlLnJ1bj1mdW5jdGlvbigpe3JldHVybiB0aGlzLnJlY3Vyc2UodGhpcy5hc3QpfTt0LnByb3RvdHlwZS5yZWN1cnNlPWZ1bmN0aW9uKGUpe3ZhciB0LHU7dT10aGlzO3RoaXMuZGVwdGg9MDt0PWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0LHUsbil7dmFyIHIsaSxvLHM7ZS5ub2RlPXU7ZS5kZXB0aCs9dD09PVwiRW50ZXJcIj8rMTotMTtyPXQ9PT1cIkVudGVyXCI/XCJcIit1LnR5cGU6dS50eXBlK1wiRXhpdFwiO2lmKHR5cGVvZiBlW2k9XCJvbkJlZm9yZVwiK3RdPT09XCJmdW5jdGlvblwiKXtlW2ldKHUsbil9cz10eXBlb2YgZVtyXT09PVwiZnVuY3Rpb25cIj9lW3JdKHUsbik6dm9pZCAwO2lmKHR5cGVvZiBlW289XCJvblwiK3RdPT09XCJmdW5jdGlvblwiKXtlW29dKHUsbil9cmV0dXJuIHN9fSh0aGlzKTt0aGlzLmVzdHJhdmVyc2UoKS5yZXBsYWNlKGUse2VudGVyOmZ1bmN0aW9uKGUsbil7dS5jb250cm9sbGVyPXRoaXM7cmV0dXJuIHQoXCJFbnRlclwiLGUsbil9LGxlYXZlOmZ1bmN0aW9uKGUsdSl7cmV0dXJuIHQoXCJFeGl0XCIsZSx1KX19KTtyZXR1cm4gZX07dC5wcm90b3R5cGUuc2tpcD1mdW5jdGlvbigpe3ZhciBlO3JldHVybihlPXRoaXMuY29udHJvbGxlcikhPW51bGw/ZS5za2lwKCk6dm9pZCAwfTt0LnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24oKXt2YXIgZTtyZXR1cm4oZT10aGlzLmNvbnRyb2xsZXIpIT1udWxsP2UucmVtb3ZlKCk6dm9pZCAwfTt0LnByb3RvdHlwZS5lc3RyYXZlcnNlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2VzdHJhdmVyc2UhPW51bGw/dGhpcy5fZXN0cmF2ZXJzZTp0aGlzLl9lc3RyYXZlcnNlPWZ1bmN0aW9uKCl7dmFyIHQ7dD1lKFwiZXN0cmF2ZXJzZVwiKTt0LlZpc2l0b3JLZXlzLkNvZmZlZUVzY2FwZWRFeHByZXNzaW9uPVtdO3QuVmlzaXRvcktleXMuQ29mZmVlTGlzdEV4cHJlc3Npb249W1widGVzdFwiLFwiYm9keVwiXTt0LlZpc2l0b3JLZXlzLkNvZmZlZVByb3RvdHlwZUV4cHJlc3Npb249W1wib2JqZWN0XCIsXCJwcm9wZXJ0eVwiLFwiY29tcHV0ZWRcIl07dC5WaXNpdG9yS2V5cy5Db2ZmZWVMb29wU3RhdGVtZW50PVtcImJvZHlcIl07dC5WaXNpdG9yS2V5cy5Db2ZmZWVEb0V4cHJlc3Npb249W1wiZnVuY3Rpb25cIl07dC5WaXNpdG9yS2V5cy5CbG9ja0NvbW1lbnQ9W107dC5WaXNpdG9yS2V5cy5MaW5lQ29tbWVudD1bXTtyZXR1cm4gdH0oKX07dC5wcm90b3R5cGUucHVzaFN0YWNrPWZ1bmN0aW9uKGUpe3ZhciB0LHUsbjtuPVt0aGlzLnNjb3BlLHRoaXMuY3R4XSx1PW5bMF0sdD1uWzFdO3RoaXMuc2NvcGVzLnB1c2goW3RoaXMuc2NvcGUsdGhpcy5jdHhdKTt0aGlzLmN0eD1vKHRoaXMuY3R4KTt0aGlzLnNjb3BlPWU7cmV0dXJuIHR5cGVvZiB0aGlzLm9uU2NvcGVFbnRlcj09PVwiZnVuY3Rpb25cIj90aGlzLm9uU2NvcGVFbnRlcih0aGlzLnNjb3BlLHRoaXMuY3R4LHUsdCk6dm9pZCAwfTt0LnByb3RvdHlwZS5wb3BTdGFjaz1mdW5jdGlvbigpe3ZhciBlLHQsdSxuO3U9W3RoaXMuc2NvcGUsdGhpcy5jdHhdLHQ9dVswXSxlPXVbMV07bj10aGlzLnNjb3Blcy5wb3AoKSx0aGlzLnNjb3BlPW5bMF0sdGhpcy5jdHg9blsxXTtyZXR1cm4gdHlwZW9mIHRoaXMub25TY29wZUV4aXQ9PT1cImZ1bmN0aW9uXCI/dGhpcy5vblNjb3BlRXhpdCh0aGlzLnNjb3BlLHRoaXMuY3R4LHQsZSk6dm9pZCAwfTt0LnByb3RvdHlwZS5zeW50YXhFcnJvcj1mdW5jdGlvbihlLHQpe3ZhciB1LG4saTt1PXIoe3N0YXJ0OihuPWUubG9jKSE9bnVsbD9uLnN0YXJ0OnZvaWQgMCxlbmQ6KGk9ZS5sb2MpIT1udWxsP2kuZW5kOnZvaWQgMCxkZXNjcmlwdGlvbjp0fSx0aGlzLm9wdGlvbnMuc291cmNlLHRoaXMub3B0aW9ucy5maWxlbmFtZSk7dGhyb3cgdX07dC5wcm90b3R5cGUud2Fybj1mdW5jdGlvbihlLHQpe3ZhciB1LG47cmV0dXJuIHRoaXMud2FybmluZ3MucHVzaCh7c3RhcnQ6KHU9ZS5sb2MpIT1udWxsP3Uuc3RhcnQ6dm9pZCAwLGVuZDoobj1lLmxvYykhPW51bGw/bi5lbmQ6dm9pZCAwLGZpbGVuYW1lOnRoaXMub3B0aW9ucy5maWxlbmFtZSxkZXNjcmlwdGlvbjp0fSl9O3QucHJvdG90eXBlLlByb2dyYW09ZnVuY3Rpb24oZSl7dGhpcy5wdXNoU3RhY2soZSk7cmV0dXJuIGV9O3QucHJvdG90eXBlLlByb2dyYW1FeGl0PWZ1bmN0aW9uKGUpe3RoaXMucG9wU3RhY2soKTtyZXR1cm4gZX07dC5wcm90b3R5cGUuRnVuY3Rpb25FeHByZXNzaW9uPWZ1bmN0aW9uKGUpe3RoaXMucHVzaFN0YWNrKGUuYm9keSk7cmV0dXJuIGV9O3QucHJvdG90eXBlLkZ1bmN0aW9uRXhwcmVzc2lvbkV4aXQ9ZnVuY3Rpb24oZSl7dGhpcy5wb3BTdGFjaygpO3JldHVybiBlfTt0LnByb3RvdHlwZS5lc2NhcGVKcz1mdW5jdGlvbih0LHUpe2lmKHU9PW51bGwpe3U9e319cmV0dXJuIGEodCx7dHlwZTpcIkNvZmZlZUVzY2FwZWRFeHByZXNzaW9uXCIsX3BhcmVudGhlc2l6ZWQ6dS5wYXJlbnRoZXNpemVkLHJhdzplKFwiZXNjb2RlZ2VuXCIpLmdlbmVyYXRlKHQse2Zvcm1hdDp7aW5kZW50OntzdHlsZTpmKHRoaXMub3B0aW9ucy5pbmRlbnQpfX19KX0pfTtyZXR1cm4gdH0oKTtsPWZ1bmN0aW9uKGUsdCl7dmFyIHU7dT17fTt0LmZvckVhY2goZnVuY3Rpb24odCl7dmFyIG4scixvLHM7bz10LnByb3RvdHlwZTtzPVtdO2ZvcihyIGluIG8pe249b1tyXTtpZih0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eShyKSl7aWYodVtyXSYmciE9PVwiY29uc3RydWN0b3JcIil7ZS5wcm90b3R5cGVbcl09aShlLnByb3RvdHlwZVtyXSxuKX1lbHNle2UucHJvdG90eXBlW3JdPW59cy5wdXNoKHVbcl09dHJ1ZSl9ZWxzZXtzLnB1c2godm9pZCAwKX19cmV0dXJuIHN9KTtyZXR1cm4gZX07aT1mdW5jdGlvbihlLHQpe3JldHVybiBmdW5jdGlvbigpe3ZhciB1LG4scixpO249YXJndW1lbnRzWzBdLHU9Mjw9YXJndW1lbnRzLmxlbmd0aD9ELmNhbGwoYXJndW1lbnRzLDEpOltdO2k9bi50eXBlO3I9ZS5iaW5kKHRoaXMpLmFwcGx5KG51bGwsW25dLmNvbmNhdChELmNhbGwodSkpKTtpZihyLnR5cGU9PT1pKXtyPXQuYmluZCh0aGlzKS5hcHBseShudWxsLFtyXS5jb25jYXQoRC5jYWxsKHUpKSl9cmV0dXJuIHJ9fX0se1wiLi4vaGVscGVyc1wiOjUsZXNjb2RlZ2VuOjI5LGVzdHJhdmVyc2U6NDl9XSw3OltmdW5jdGlvbihlLHQsdSl7dmFyIG4scj1mdW5jdGlvbihlLHQpe2Zvcih2YXIgdSBpbiB0KXtpZihpLmNhbGwodCx1KSllW3VdPXRbdV19ZnVuY3Rpb24gbigpe3RoaXMuY29uc3RydWN0b3I9ZX1uLnByb3RvdHlwZT10LnByb3RvdHlwZTtlLnByb3RvdHlwZT1uZXcgbjtlLl9fc3VwZXJfXz10LnByb3RvdHlwZTtyZXR1cm4gZX0saT17fS5oYXNPd25Qcm9wZXJ0eTtuPWUoXCIuL2Jhc2VcIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3IodCxlKTtmdW5jdGlvbiB0KCl7cmV0dXJuIHQuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsYXJndW1lbnRzKX10LnByb3RvdHlwZS5CaW5hcnlFeHByZXNzaW9uPWZ1bmN0aW9uKGUpe3RoaXMud2FybkFib3V0RXF1YWxzKGUpO3RoaXMudXBkYXRlRXF1YWxzKGUpO3JldHVybiB0aGlzLmVzY2FwZUVxdWFsc0ZvckNvbXBhdGliaWxpdHkoZSl9O3QucHJvdG90eXBlLnVwZGF0ZUVxdWFscz1mdW5jdGlvbihlKXt2YXIgdCx1O3Q9e1wiPT09XCI6XCI9PVwiLFwiIT09XCI6XCIhPVwifTt1PWUub3BlcmF0b3I7aWYodFt1XSl7ZS5vcGVyYXRvcj10W3VdfXJldHVybiBlfTt0LnByb3RvdHlwZS5lc2NhcGVFcXVhbHNGb3JDb21wYXRpYmlsaXR5PWZ1bmN0aW9uKGUpe3ZhciB0O3Q9ZS5vcGVyYXRvcj09PVwiPT1cInx8ZS5vcGVyYXRvcj09PVwiIT1cIjtpZih0aGlzLm9wdGlvbnMuY29tcGF0JiZ0KXtyZXR1cm4gdGhpcy5lc2NhcGVKcyhlKX1lbHNle3JldHVybiBlfX07dC5wcm90b3R5cGUud2FybkFib3V0RXF1YWxzPWZ1bmN0aW9uKGUpe3ZhciB0LHUsbjt0PWUub3BlcmF0b3I7bj17XCI9PVwiOlwiPT09XCIsXCIhPVwiOlwiIT09XCJ9O2lmKHQ9PT1cIj09XCJ8fHQ9PT1cIiE9XCIpe3U9blt0XTt0aGlzLndhcm4oZSxcIk9wZXJhdG9yICdcIit0K1wiJyBpcyBub3Qgc3VwcG9ydGVkIGluIENvZmZlZVNjcmlwdCwgXCIrKFwidXNlICdcIit1K1wiJyBpbnN0ZWFkXCIpKX1yZXR1cm4gZX07cmV0dXJuIHR9KG4pfSx7XCIuL2Jhc2VcIjo2fV0sODpbZnVuY3Rpb24oZSx0LHUpe3ZhciBuLHIsaT1mdW5jdGlvbihlLHQpe2Zvcih2YXIgdSBpbiB0KXtpZihvLmNhbGwodCx1KSllW3VdPXRbdV19ZnVuY3Rpb24gbigpe3RoaXMuY29uc3RydWN0b3I9ZX1uLnByb3RvdHlwZT10LnByb3RvdHlwZTtlLnByb3RvdHlwZT1uZXcgbjtlLl9fc3VwZXJfXz10LnByb3RvdHlwZTtyZXR1cm4gZX0sbz17fS5oYXNPd25Qcm9wZXJ0eSxzPVtdLnNsaWNlO3I9ZShcIi4vYmFzZVwiKTt0LmV4cG9ydHM9bj1mdW5jdGlvbihlKXtpKHQsZSk7ZnVuY3Rpb24gdCgpe3JldHVybiB0Ll9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLGFyZ3VtZW50cyl9dC5wcm90b3R5cGUuQmxvY2tTdGF0ZW1lbnQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5jb25zb2xpZGF0ZUJsb2NrSW50b1BhcmVudChlLHQpfTt0LnByb3RvdHlwZS5jb25zb2xpZGF0ZUJsb2NrSW50b1BhcmVudD1mdW5jdGlvbihlLHQpe3ZhciB1LG47bj1mYWxzZTt1PWZ1bmN0aW9uKHUpe3JldHVybiBmdW5jdGlvbih1LHIpe3ZhciBpLG8sYTtpZih0LnR5cGU9PT11JiYoKG89dFtyXSkhPW51bGw/by5pbmRleE9mOnZvaWQgMCkpe2k9dFtyXS5pbmRleE9mKGUpO2lmKHRbcl0mJn5pKXsoYT10W3JdKS5zcGxpY2UuYXBwbHkoYSxbaSwxXS5jb25jYXQocy5jYWxsKGUuYm9keSkpKTtuPXRydWU7cmV0dXJuIHRydWV9fX19KHRoaXMpO3UoXCJCbG9ja1N0YXRlbWVudFwiLFwiYm9keVwiKXx8dShcIlN3aXRjaENhc2VcIixcImNvbnNlcXVlbnRcIil8fHUoXCJJZlN0YXRlbWVudFwiLFwiY29uc2VxdWVudFwiKXx8dShcIklmU3RhdGVtZW50XCIsXCJhbHRlcm5hdGVcIik7aWYobil7cmV0dXJuIHRoaXMuc2tpcCgpfWVsc2V7cmV0dXJuIGV9fTtyZXR1cm4gdH0ocil9LHtcIi4vYmFzZVwiOjZ9XSw5OltmdW5jdGlvbihlLHQsdSl7dmFyIG4scj1mdW5jdGlvbihlLHQpe2Zvcih2YXIgdSBpbiB0KXtpZihpLmNhbGwodCx1KSllW3VdPXRbdV19ZnVuY3Rpb24gbigpe3RoaXMuY29uc3RydWN0b3I9ZX1uLnByb3RvdHlwZT10LnByb3RvdHlwZTtlLnByb3RvdHlwZT1uZXcgbjtlLl9fc3VwZXJfXz10LnByb3RvdHlwZTtyZXR1cm4gZX0saT17fS5oYXNPd25Qcm9wZXJ0eTtuPWUoXCIuL2Jhc2VcIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3IodCxlKTtmdW5jdGlvbiB0KCl7cmV0dXJuIHQuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsYXJndW1lbnRzKX10LnByb3RvdHlwZS5Qcm9ncmFtRXhpdD1udWxsO3QucHJvdG90eXBlLkZ1bmN0aW9uRXhwcmVzc2lvbj1udWxsO3QucHJvdG90eXBlLkZ1bmN0aW9uRXhwcmVzc2lvbkV4aXQ9bnVsbDt0LnByb3RvdHlwZS5Qcm9ncmFtPWZ1bmN0aW9uKGUpe3RoaXMuY29tbWVudHM9ZS5jb21tZW50czt0aGlzLnVwZGF0ZUNvbW1lbnRUeXBlcygpO2UuYm9keT10aGlzLmFkZENvbW1lbnRzVG9MaXN0KFswLEluZmluaXR5XSxlLmJvZHkpO3JldHVybiBlfTt0LnByb3RvdHlwZS5CbG9ja1N0YXRlbWVudD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5pbmplY3RDb21tZW50cyhlLFwiYm9keVwiKX07dC5wcm90b3R5cGUuU3dpdGNoU3RhdGVtZW50PWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmluamVjdENvbW1lbnRzKGUsXCJjYXNlc1wiKX07dC5wcm90b3R5cGUuU3dpdGNoQ2FzZT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5pbmplY3RDb21tZW50cyhlLFwiY29uc2VxdWVudFwiKX07dC5wcm90b3R5cGUuQmxvY2tDb21tZW50PWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmNvbnZlcnRDb21tZW50UHJlZml4ZXMoZSl9O3QucHJvdG90eXBlLnVwZGF0ZUNvbW1lbnRUeXBlcz1mdW5jdGlvbigpe3ZhciBlLHQsdSxuLHI7bj10aGlzLmNvbW1lbnRzO3I9W107Zm9yKHQ9MCx1PW4ubGVuZ3RoO3Q8dTt0Kyspe2U9blt0XTtzd2l0Y2goZS50eXBlKXtjYXNlXCJCbG9ja1wiOnIucHVzaChlLnR5cGU9XCJCbG9ja0NvbW1lbnRcIik7YnJlYWs7Y2FzZVwiTGluZVwiOnIucHVzaChlLnR5cGU9XCJMaW5lQ29tbWVudFwiKTticmVhaztkZWZhdWx0OnIucHVzaCh2b2lkIDApfX1yZXR1cm4gcn07dC5wcm90b3R5cGUuaW5qZWN0Q29tbWVudHM9ZnVuY3Rpb24oZSx0KXtpZih0PT1udWxsKXt0PVwiYm9keVwifWVbdF09dGhpcy5hZGRDb21tZW50c1RvTGlzdChlLnJhbmdlLGVbdF0pO3JldHVybiBlfTt0LnByb3RvdHlwZS5hZGRDb21tZW50c1RvTGlzdD1mdW5jdGlvbihlLHQpe3ZhciB1LG4scixpLG8scyxhLGwsZjtpZihlPT1udWxsKXtyZXR1cm4gdH1hPVtdO289ZVswXTtmPWVbMV07dT1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCx1KXtyZXR1cm4gZS5jb21tZW50cy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGUucmFuZ2VbMF0+PXQmJmUucmFuZ2VbMV08PXV9KX19KHRoaXMpO2lmKHQubGVuZ3RoPjApe2ZvcihuPWk9MCxzPXQubGVuZ3RoO2k8cztuPSsraSl7cj10W25dO2lmKHIucmFuZ2Upe2w9dShvLHIucmFuZ2VbMF0pO2E9YS5jb25jYXQobCl9YS5wdXNoKHIpO2lmKHIucmFuZ2Upe289ci5yYW5nZVsxXX19fWw9dShvLGYpO2E9YS5jb25jYXQobCk7cmV0dXJuIGF9O3QucHJvdG90eXBlLmNvbnZlcnRDb21tZW50UHJlZml4ZXM9ZnVuY3Rpb24oZSl7dmFyIHQsdTt1PWUudmFsdWUuc3BsaXQoXCJcXG5cIik7dD1lLmxvYy5zdGFydC5jb2x1bW47dT11Lm1hcChmdW5jdGlvbihlLG4pe3ZhciByLGksbztpPW49PT11Lmxlbmd0aC0xJiZlLm1hdGNoKC9eXFxzKiQvKTtyPW49PT0wJiZ1Lmxlbmd0aD09PTE7bz1lLnN1YnN0cigwLHQpO2lmKG8ubWF0Y2goL15cXHMrJC8pKXtlPWUuc3Vic3RyKHQpfWlmKGkpe3JldHVyblwiXCJ9ZWxzZSBpZihyKXtyZXR1cm4gZX1lbHNle2U9ZS5yZXBsYWNlKC9eIFxcKi8sXCIjXCIpO3JldHVybiBlK1wiXFxuXCJ9fSk7ZS52YWx1ZT11LmpvaW4oXCJcIik7cmV0dXJuIGV9O3JldHVybiB0fShuKX0se1wiLi9iYXNlXCI6Nn1dLDEwOltmdW5jdGlvbihlLHQsdSl7dmFyIG4scj1mdW5jdGlvbihlLHQpe2Zvcih2YXIgdSBpbiB0KXtpZihpLmNhbGwodCx1KSllW3VdPXRbdV19ZnVuY3Rpb24gbigpe3RoaXMuY29uc3RydWN0b3I9ZX1uLnByb3RvdHlwZT10LnByb3RvdHlwZTtlLnByb3RvdHlwZT1uZXcgbjtlLl9fc3VwZXJfXz10LnByb3RvdHlwZTtyZXR1cm4gZX0saT17fS5oYXNPd25Qcm9wZXJ0eTtuPWUoXCIuL2Jhc2VcIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3IodCxlKTtmdW5jdGlvbiB0KCl7cmV0dXJuIHQuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsYXJndW1lbnRzKX10LnByb3RvdHlwZS5CbG9ja1N0YXRlbWVudEV4aXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucmVtb3ZlRW1wdHlTdGF0ZW1lbnRzRnJvbUJvZHkoZSl9O3QucHJvdG90eXBlLlN3aXRjaENhc2VFeGl0PWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnJlbW92ZUVtcHR5U3RhdGVtZW50c0Zyb21Cb2R5KGUsXCJjb25zZXF1ZW50XCIpfTt0LnByb3RvdHlwZS5Td2l0Y2hTdGF0ZW1lbnRFeGl0PWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnJlbW92ZUVtcHR5U3RhdGVtZW50c0Zyb21Cb2R5KGUsXCJjYXNlc1wiKX07dC5wcm90b3R5cGUuUHJvZ3JhbUV4aXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucmVtb3ZlRW1wdHlTdGF0ZW1lbnRzRnJvbUJvZHkoZSxcImJvZHlcIil9O3QucHJvdG90eXBlLnJlbW92ZUVtcHR5U3RhdGVtZW50c0Zyb21Cb2R5PWZ1bmN0aW9uKGUsdCl7aWYodD09bnVsbCl7dD1cImJvZHlcIn1lW3RdPWVbdF0uZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBlLnR5cGUhPT1cIkVtcHR5U3RhdGVtZW50XCJ9KTtyZXR1cm4gZX07cmV0dXJuIHR9KG4pfSx7XCIuL2Jhc2VcIjo2fV0sMTE6W2Z1bmN0aW9uKGUsdCx1KXt2YXIgbixyLGk9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHUgaW4gdCl7aWYoby5jYWxsKHQsdSkpZVt1XT10W3VdfWZ1bmN0aW9uIG4oKXt0aGlzLmNvbnN0cnVjdG9yPWV9bi5wcm90b3R5cGU9dC5wcm90b3R5cGU7ZS5wcm90b3R5cGU9bmV3IG47ZS5fX3N1cGVyX189dC5wcm90b3R5cGU7cmV0dXJuIGV9LG89e30uaGFzT3duUHJvcGVydHk7cj1lKFwiLi4vaGVscGVyc1wiKS5yZXBsYWNlO249ZShcIi4vYmFzZVwiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7aSh0LGUpO2Z1bmN0aW9uIHQoKXtyZXR1cm4gdC5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcyxhcmd1bWVudHMpfXQucHJvdG90eXBlLkNhbGxFeHByZXNzaW9uPWZ1bmN0aW9uKGUpe3ZhciB0LHUsbixpLG8scyxhLGwsZixjLHA7dD0oKHU9ZS5jYWxsZWUpIT1udWxsP3UudHlwZTp2b2lkIDApPT09XCJNZW1iZXJFeHByZXNzaW9uXCImJigobj1lLmNhbGxlZSkhPW51bGw/KGk9bi5vYmplY3QpIT1udWxsP2kudHlwZTp2b2lkIDA6dm9pZCAwKT09PVwiSWRlbnRpZmllclwiJiYoKG89ZS5jYWxsZWUpIT1udWxsPyhzPW8ub2JqZWN0KSE9bnVsbD9zLm5hbWU6dm9pZCAwOnZvaWQgMCk9PT1cIk1hdGhcIiYmKChhPWUuY2FsbGVlKSE9bnVsbD8obD1hLnByb3BlcnR5KSE9bnVsbD9sLnR5cGU6dm9pZCAwOnZvaWQgMCk9PT1cIklkZW50aWZpZXJcIiYmKChmPWUuY2FsbGVlKSE9bnVsbD8oYz1mLnByb3BlcnR5KSE9bnVsbD9jLm5hbWU6dm9pZCAwOnZvaWQgMCk9PT1cInBvd1wiJiYoKHA9ZVtcImFyZ3VtZW50c1wiXSkhPW51bGw/cC5sZW5ndGg6dm9pZCAwKT09PTI7aWYoIXQpe3JldHVybiBlfXJldHVybiByKGUse3R5cGU6XCJCaW5hcnlFeHByZXNzaW9uXCIsbGVmdDplW1wiYXJndW1lbnRzXCJdWzBdLG9wZXJhdG9yOlwiKipcIixyaWdodDplW1wiYXJndW1lbnRzXCJdWzFdfSl9O3JldHVybiB0fShuKX0se1wiLi4vaGVscGVyc1wiOjUsXCIuL2Jhc2VcIjo2fV0sMTI6W2Z1bmN0aW9uKGUsdCx1KXt2YXIgbixyLGksbyxzLGEsbD1mdW5jdGlvbihlLHQpe2Zvcih2YXIgdSBpbiB0KXtpZihmLmNhbGwodCx1KSllW3VdPXRbdV19ZnVuY3Rpb24gbigpe3RoaXMuY29uc3RydWN0b3I9ZX1uLnByb3RvdHlwZT10LnByb3RvdHlwZTtlLnByb3RvdHlwZT1uZXcgbjtlLl9fc3VwZXJfXz10LnByb3RvdHlwZTtyZXR1cm4gZX0sZj17fS5oYXNPd25Qcm9wZXJ0eSxjPVtdLnNsaWNlO3M9ZShcIi4uL2hlbHBlcnNcIiksaT1zLmlzQ29tbWVudCxvPXMubmV4dE5vbkNvbW1lbnQsYT1zLnJlcGxhY2U7bj1lKFwiLi9iYXNlXCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtsKHQsZSk7ZnVuY3Rpb24gdCgpe3JldHVybiB0Ll9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLGFyZ3VtZW50cyl9dC5wcm90b3R5cGUub25TY29wZUVudGVyPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQucHJlYm9keT1bXX07dC5wcm90b3R5cGUub25TY29wZUV4aXQ9ZnVuY3Rpb24oZSx0LHUsbil7aWYobi5wcmVib2R5Lmxlbmd0aCl7cmV0dXJuIHRoaXMucHJlcGVuZEludG9Cb2R5KHUuYm9keSxuLnByZWJvZHkpfX07dC5wcm90b3R5cGUucHJlcGVuZEludG9Cb2R5PWZ1bmN0aW9uKGUsdCl7dmFyIHU7dT1yKGUpO3JldHVybiBlLnNwbGljZS5hcHBseShlLFt1LDBdLmNvbmNhdChjLmNhbGwodCkpKX07dC5wcm90b3R5cGUuRnVuY3Rpb25EZWNsYXJhdGlvbj1mdW5jdGlvbihlKXt0aGlzLmN0eC5wcmVib2R5LnB1c2godGhpcy5idWlsZEZ1bmN0aW9uRGVjbGFyYXRpb24oZSkpO3RoaXMucHVzaFN0YWNrKGUuYm9keSl9O3QucHJvdG90eXBlLkZ1bmN0aW9uRGVjbGFyYXRpb25FeGl0PWZ1bmN0aW9uKGUpe3RoaXMucG9wU3RhY2soZSk7cmV0dXJuIHRoaXMucmVtb3ZlKCl9O3QucHJvdG90eXBlLkxpbmVDb21tZW50PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMubW92ZUZ1bmN0aW9uQ29tbWVudHMoZSx0KX07dC5wcm90b3R5cGUuQmxvY2tDb21tZW50PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMubW92ZUZ1bmN0aW9uQ29tbWVudHMoZSx0KX07dC5wcm90b3R5cGUuRnVuY3Rpb25FeHByZXNzaW9uPWZ1bmN0aW9uKGUpe3RoaXMucHVzaFN0YWNrKGUuYm9keSl9O3QucHJvdG90eXBlLkZ1bmN0aW9uRXhwcmVzc2lvbkV4aXQ9ZnVuY3Rpb24oZSl7dGhpcy5wb3BTdGFjaygpO2lmKGUuaWQpe2lmKHRoaXMub3B0aW9ucy5jb21wYXQpe3JldHVybiB0aGlzLmVzY2FwZUpzKGUse3BhcmVudGhlc2l6ZWQ6dHJ1ZX0pfWVsc2V7dGhpcy53YXJuKGUsXCJOYW1lZCBmdW5jdGlvbiBleHByZXNzaW9ucyBhcmUgbm90IHN1cHBvcnRlZCBpbiBDb2ZmZWVTY3JpcHRcIik7cmV0dXJuIGV9fWVsc2V7cmV0dXJuIGV9fTt0LnByb3RvdHlwZS5tb3ZlRnVuY3Rpb25Db21tZW50cz1mdW5jdGlvbihlLHQpe3ZhciB1LG47aWYoIXQuYm9keSl7cmV0dXJufW49byh0LmJvZHksZSk7aWYoIW4pe3JldHVybn11PW4udHlwZT09PVwiRnVuY3Rpb25FeHByZXNzaW9uXCImJm4uaWQ7dXx8KHU9bi50eXBlPT09XCJGdW5jdGlvbkRlY2xhcmF0aW9uXCIpO2lmKHUpe3RoaXMuY3R4LnByZWJvZHkucHVzaChlKTtyZXR1cm4gdGhpcy5yZW1vdmUoKX19O3QucHJvdG90eXBlLmJ1aWxkRnVuY3Rpb25EZWNsYXJhdGlvbj1mdW5jdGlvbihlKXtyZXR1cm4gYShlLHt0eXBlOlwiVmFyaWFibGVEZWNsYXJhdGlvblwiLGRlY2xhcmF0aW9uczpbe3R5cGU6XCJWYXJpYWJsZURlY2xhcmF0b3JcIixpZDplLmlkLGluaXQ6e3R5cGU6XCJGdW5jdGlvbkV4cHJlc3Npb25cIixwYXJhbXM6ZS5wYXJhbXMsZGVmYXVsdHM6ZS5kZWZhdWx0cyxib2R5OmUuYm9keX19XX0pfTtyZXR1cm4gdH0obik7cj1mdW5jdGlvbihlKXt2YXIgdCx1LG4scjt0PTA7Zm9yKHQ9dT0wLG49ZS5sZW5ndGg7dTxuO3Q9Kyt1KXtyPWVbdF07aWYoci50eXBlIT09XCJWYXJpYWJsZURlY2xhcmF0aW9uXCImJiFpKHIpKXtyZXR1cm4gdH19cmV0dXJuIHR9fSx7XCIuLi9oZWxwZXJzXCI6NSxcIi4vYmFzZVwiOjZ9XSwxMzpbZnVuY3Rpb24oZSx0LHUpe3ZhciBuLHIsaSxvLHM9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHUgaW4gdCl7aWYoYS5jYWxsKHQsdSkpZVt1XT10W3VdfWZ1bmN0aW9uIG4oKXt0aGlzLmNvbnN0cnVjdG9yPWV9bi5wcm90b3R5cGU9dC5wcm90b3R5cGU7ZS5wcm90b3R5cGU9bmV3IG47ZS5fX3N1cGVyX189dC5wcm90b3R5cGU7cmV0dXJuIGV9LGE9e30uaGFzT3duUHJvcGVydHk7bz1lKFwiLi4vaGVscGVyc1wiKS5ub25Db21tZW50cztuPWUoXCIuL2Jhc2VcIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3ModCxlKTtmdW5jdGlvbiB0KCl7cmV0dXJuIHQuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsYXJndW1lbnRzKX10LnByb3RvdHlwZS5JZlN0YXRlbWVudD1mdW5jdGlvbihlKXt0aGlzLmhhbmRsZUJsYW5rSWZzKGUpO3RoaXMucGFyZW50aGVzaXplQ29uZGl0aW9uYWxzKGUudGVzdCk7cmV0dXJuIGV9O3QucHJvdG90eXBlLkNvbmRpdGlvbmFsRXhwcmVzc2lvbj1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLnBhcmVudGhlc2l6ZUZ1bmN0aW9ucyhlLHQpfTt0LnByb3RvdHlwZS5wYXJlbnRoZXNpemVGdW5jdGlvbnM9ZnVuY3Rpb24oZSx0KXt0aGlzLmVzdHJhdmVyc2UoKS50cmF2ZXJzZShlLHtcbmVudGVyOmZ1bmN0aW9uKGUsdCl7dmFyIHU7dT1lLnR5cGU9PT1cIkZ1bmN0aW9uRGVjbGFyYXRpb25cInx8ZS50eXBlPT09XCJGdW5jdGlvbkV4cHJlc3Npb25cIjtpZih1KXtyZXR1cm4gZS5fcGFyZW50aGVzaXplZD10cnVlfX19KTtyZXR1cm4gZX07dC5wcm90b3R5cGUucGFyZW50aGVzaXplQ29uZGl0aW9uYWxzPWZ1bmN0aW9uKGUpe3ZhciB0O3Q9W1wiQ29uZGl0aW9uYWxFeHByZXNzaW9uXCIsXCJGdW5jdGlvbkV4cHJlc3Npb25cIl07cmV0dXJuIHRoaXMuZXN0cmF2ZXJzZSgpLnRyYXZlcnNlKGUse2VudGVyOmZ1bmN0aW9uKGUsdSl7aWYofnQuaW5kZXhPZihlLnR5cGUpKXtyZXR1cm4gZS5fcGFyZW50aGVzaXplZD10cnVlfX19KX07dC5wcm90b3R5cGUuaGFuZGxlQmxhbmtJZnM9ZnVuY3Rpb24oZSl7aWYoaShlKXx8cihlKSYmIWUuYWx0ZXJuYXRlKXtlLmFsdGVybmF0ZT17dHlwZTpcIkJsb2NrU3RhdGVtZW50XCIsYm9keTpbXX19cmV0dXJuIGV9O3JldHVybiB0fShuKTtpPWZ1bmN0aW9uKGUpe3JldHVybiFlLmNvbnNlcXVlbnR9O3I9ZnVuY3Rpb24oZSl7dmFyIHQsdTt0PWUuY29uc2VxdWVudDtyZXR1cm4gdT10JiZ0LnR5cGU9PT1cIkJsb2NrU3RhdGVtZW50XCImJm8odC5ib2R5KS5sZW5ndGg9PT0wfX0se1wiLi4vaGVscGVyc1wiOjUsXCIuL2Jhc2VcIjo2fV0sMTQ6W2Z1bmN0aW9uKGUsdCx1KXt2YXIgbixyLGksbyxzLGE9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHUgaW4gdCl7aWYobC5jYWxsKHQsdSkpZVt1XT10W3VdfWZ1bmN0aW9uIG4oKXt0aGlzLmNvbnN0cnVjdG9yPWV9bi5wcm90b3R5cGU9dC5wcm90b3R5cGU7ZS5wcm90b3R5cGU9bmV3IG47ZS5fX3N1cGVyX189dC5wcm90b3R5cGU7cmV0dXJuIGV9LGw9e30uaGFzT3duUHJvcGVydHk7bz1lKFwiLi4vaGVscGVyc1wiKS5yZXBsYWNlO249ZShcIi4vYmFzZVwiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7YSh0LGUpO2Z1bmN0aW9uIHQoKXtyZXR1cm4gdC5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcyxhcmd1bWVudHMpfXQucHJvdG90eXBlLkNhbGxFeHByZXNzaW9uPWZ1bmN0aW9uKGUpe3ZhciB0O3Q9aShlKSYmcihlW1wiYXJndW1lbnRzXCJdKSYmcyhlLmNhbGxlZS5wYXJhbXMsZVtcImFyZ3VtZW50c1wiXSk7aWYoIXQpe3JldHVybiBlfXJldHVybiBvKGUse3R5cGU6XCJDb2ZmZWVEb0V4cHJlc3Npb25cIixcImZ1bmN0aW9uXCI6ZS5jYWxsZWUsYXJndW1lbnRzOmVbXCJhcmd1bWVudHNcIl19KX07cmV0dXJuIHR9KG4pO3I9ZnVuY3Rpb24oZSl7dmFyIHQsdSxuO2Zvcih1PTAsbj1lLmxlbmd0aDt1PG47dSsrKXt0PWVbdV07aWYodC50eXBlIT09XCJJZGVudGlmaWVyXCIpe3JldHVybiBmYWxzZX19cmV0dXJuIHRydWV9O2k9ZnVuY3Rpb24oZSl7dmFyIHQsdTtyZXR1cm4oKHQ9ZS5jYWxsZWUpIT1udWxsP3QudHlwZTp2b2lkIDApPT09XCJGdW5jdGlvbkV4cHJlc3Npb25cIiYmKCh1PWUuY2FsbGVlKSE9bnVsbD91LmlkOnZvaWQgMCk9PT1udWxsfTtzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlLm5hbWV9KS5qb2luKFwiL1wiKT09PXQubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlLm5hbWV9KS5qb2luKFwiL1wiKX19LHtcIi4uL2hlbHBlcnNcIjo1LFwiLi9iYXNlXCI6Nn1dLDE1OltmdW5jdGlvbihlLHQsdSl7dmFyIG4scixpLG8scz1mdW5jdGlvbihlLHQpe2Zvcih2YXIgdSBpbiB0KXtpZihhLmNhbGwodCx1KSllW3VdPXRbdV19ZnVuY3Rpb24gbigpe3RoaXMuY29uc3RydWN0b3I9ZX1uLnByb3RvdHlwZT10LnByb3RvdHlwZTtlLnByb3RvdHlwZT1uZXcgbjtlLl9fc3VwZXJfXz10LnByb3RvdHlwZTtyZXR1cm4gZX0sYT17fS5oYXNPd25Qcm9wZXJ0eTtpPWUoXCIuLi9oZWxwZXJzXCIpLG89aS5yZXBsYWNlLHI9aS5xdW90ZTtuPWUoXCIuL2Jhc2VcIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3ModCxlKTtmdW5jdGlvbiB0KCl7cmV0dXJuIHQuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsYXJndW1lbnRzKX10LnByb3RvdHlwZS5MaXRlcmFsPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnVucGFja1JlZ2V4cElmTmVlZGVkKGUpfTt0LnByb3RvdHlwZS51bnBhY2tSZWdleHBJZk5lZWRlZD1mdW5jdGlvbihlKXt2YXIgdDtpZighKGUudmFsdWUgaW5zdGFuY2VvZiBSZWdFeHApKXtyZXR1cm59dD1lLnZhbHVlLnRvU3RyaW5nKCkubWF0Y2goL15cXC8oW1xcc1xcPV0uKilcXC8oW2Etel0qKSQvKTtpZih0KXtlPW8oZSx7dHlwZTpcIkNhbGxFeHByZXNzaW9uXCIsY2FsbGVlOnt0eXBlOlwiSWRlbnRpZmllclwiLG5hbWU6XCJSZWdFeHBcIn0sYXJndW1lbnRzOlt7dHlwZTpcIkxpdGVyYWxcIix2YWx1ZTp0WzFdLHJhdzpyKHRbMV0pfV19KTtpZih0WzJdKXtlW1wiYXJndW1lbnRzXCJdLnB1c2goe3R5cGU6XCJMaXRlcmFsXCIsdmFsdWU6dFsyXSxyYXc6cih0WzJdKX0pfXJldHVybiBlfX07cmV0dXJuIHR9KG4pfSx7XCIuLi9oZWxwZXJzXCI6NSxcIi4vYmFzZVwiOjZ9XSwxNjpbZnVuY3Rpb24oZSx0LHUpe3ZhciBuLHIsaSxvLHM9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHUgaW4gdCl7aWYoYS5jYWxsKHQsdSkpZVt1XT10W3VdfWZ1bmN0aW9uIG4oKXt0aGlzLmNvbnN0cnVjdG9yPWV9bi5wcm90b3R5cGU9dC5wcm90b3R5cGU7ZS5wcm90b3R5cGU9bmV3IG47ZS5fX3N1cGVyX189dC5wcm90b3R5cGU7cmV0dXJuIGV9LGE9e30uaGFzT3duUHJvcGVydHk7aT1lKFwiLi4vaGVscGVyc1wiKSxvPWkucmVwbGFjZSxyPWkuaXNMb29wO249ZShcIi4vYmFzZVwiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cyh0LGUpO2Z1bmN0aW9uIHQoKXtyZXR1cm4gdC5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcyxhcmd1bWVudHMpfXQucHJvdG90eXBlLkZvclN0YXRlbWVudD1mdW5jdGlvbihlKXtpZih0aGlzLl9mb3I9PW51bGwpe3RoaXMuX2Zvcj1bXX10aGlzLl9mb3IucHVzaChlKTt0aGlzLmluamVjdFVwZGF0ZUludG9Cb2R5KGUpO3JldHVybiB0aGlzLmNvbnZlcnRGb3JUb1doaWxlKGUpfTt0LnByb3RvdHlwZS5Gb3JTdGF0ZW1lbnRFeGl0PWZ1bmN0aW9uKGUpe3ZhciB0O3Q9dGhpcy5fZm9yLnBvcCgpO2RlbGV0ZSB0Ll91cGRhdGU7cmV0dXJuIGV9O3QucHJvdG90eXBlLkZvckluU3RhdGVtZW50PWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLndhcm5JZk5vVmFyKGUpfTt0LnByb3RvdHlwZS5XaGlsZVN0YXRlbWVudD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5jb252ZXJ0V2hpbGVUb0xvb3AoZSl9O3QucHJvdG90eXBlLkRvV2hpbGVTdGF0ZW1lbnQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuY29udmVydERvV2hpbGVUb0xvb3AoZSl9O3QucHJvdG90eXBlLkNvbnRpbnVlU3RhdGVtZW50PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuaW5qZWN0VXBkYXRlSW50b0NvbnRpbnVlKGUsdCl9O3QucHJvdG90eXBlLmluamVjdFVwZGF0ZUludG9Db250aW51ZT1mdW5jdGlvbihlLHQpe3ZhciB1LG47dT0obj10aGlzLl9mb3IpIT1udWxsP25bdGhpcy5fZm9yLmxlbmd0aC0xXTp2b2lkIDA7aWYoISh1IT1udWxsP3UuX3VwZGF0ZTp2b2lkIDApKXtyZXR1cm4gZX10aGlzLnNraXAoKTtyZXR1cm57dHlwZTpcIkJsb2NrU3RhdGVtZW50XCIsYm9keTpbe3R5cGU6XCJFeHByZXNzaW9uU3RhdGVtZW50XCIsZXhwcmVzc2lvbjp1Ll91cGRhdGV9LGVdfX07dC5wcm90b3R5cGUuY29udmVydERvV2hpbGVUb0xvb3A9ZnVuY3Rpb24oZSl7dmFyIHQsdTt0PWUuYm9keTt1PXQuYm9keTt1LnB1c2gobyhlLnRlc3Qse3R5cGU6XCJJZlN0YXRlbWVudFwiLF9uZWdhdGl2ZTp0cnVlLHRlc3Q6ZS50ZXN0LGNvbnNlcXVlbnQ6e3R5cGU6XCJCcmVha1N0YXRlbWVudFwifX0pKTtyZXR1cm4gbyhlLHt0eXBlOlwiQ29mZmVlTG9vcFN0YXRlbWVudFwiLGJvZHk6dH0pfTt0LnByb3RvdHlwZS53YXJuSWZOb1Zhcj1mdW5jdGlvbihlKXtpZihlLmxlZnQudHlwZSE9PVwiVmFyaWFibGVEZWNsYXJhdGlvblwiKXt0aGlzLndhcm4oZSxcIlVzaW5nICdmb3IuLmluJyBsb29wcyB3aXRob3V0IFwiK1wiJ3ZhcicgY2FuIHByb2R1Y2UgdW5leHBlY3RlZCByZXN1bHRzXCIpfXJldHVybiBlfTt0LnByb3RvdHlwZS5jb252ZXJ0Rm9yVG9XaGlsZT1mdW5jdGlvbihlKXt2YXIgdDtlLnR5cGU9cihlKT9cIkNvZmZlZUxvb3BTdGF0ZW1lbnRcIjpcIldoaWxlU3RhdGVtZW50XCI7dD1lLmluaXQ7ZGVsZXRlIGUuaW5pdDtpZih0IT1udWxsKXtyZXR1cm57dHlwZTpcIkJsb2NrU3RhdGVtZW50XCIsYm9keTpbe3R5cGU6XCJFeHByZXNzaW9uU3RhdGVtZW50XCIsZXhwcmVzc2lvbjp0fSxlXX19ZWxzZXtyZXR1cm4gZX19O3QucHJvdG90eXBlLmNvbnZlcnRXaGlsZVRvTG9vcD1mdW5jdGlvbihlKXtpZihyKGUpKXtyZXR1cm4gbyhlLHt0eXBlOlwiQ29mZmVlTG9vcFN0YXRlbWVudFwiLGJvZHk6ZS5ib2R5fSl9ZWxzZXtyZXR1cm4gZX19O3QucHJvdG90eXBlLmluamVjdFVwZGF0ZUludG9Cb2R5PWZ1bmN0aW9uKGUpe3ZhciB0LHU7aWYoZS51cGRhdGUpe3U9e3R5cGU6XCJFeHByZXNzaW9uU3RhdGVtZW50XCIsZXhwcmVzc2lvbjplLnVwZGF0ZX07aWYoZS5ib2R5PT1udWxsKXtpZihlLmJvZHk9PW51bGwpe2UuYm9keT17dHlwZTpcIkJsb2NrU3RhdGVtZW50XCIsYm9keTpbXX19fWVsc2UgaWYoZS5ib2R5LnR5cGUhPT1cIkJsb2NrU3RhdGVtZW50XCIpe3Q9ZS5ib2R5O2UuYm9keT17dHlwZTpcIkJsb2NrU3RhdGVtZW50XCIsYm9keTpbdF19fWUuYm9keS5ib2R5PWUuYm9keS5ib2R5LmNvbmNhdChbdV0pO2UuX3VwZGF0ZT1lLnVwZGF0ZTtkZWxldGUgZS51cGRhdGV9cmV0dXJuIGV9O3JldHVybiB0fShuKX0se1wiLi4vaGVscGVyc1wiOjUsXCIuL2Jhc2VcIjo2fV0sMTc6W2Z1bmN0aW9uKGUsdCx1KXt2YXIgbixyLGk9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHUgaW4gdCl7aWYoby5jYWxsKHQsdSkpZVt1XT10W3VdfWZ1bmN0aW9uIG4oKXt0aGlzLmNvbnN0cnVjdG9yPWV9bi5wcm90b3R5cGU9dC5wcm90b3R5cGU7ZS5wcm90b3R5cGU9bmV3IG47ZS5fX3N1cGVyX189dC5wcm90b3R5cGU7cmV0dXJuIGV9LG89e30uaGFzT3duUHJvcGVydHk7cj1lKFwiLi4vaGVscGVyc1wiKS5yZXBsYWNlO249ZShcIi4vYmFzZVwiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7aSh0LGUpO2Z1bmN0aW9uIHQoKXtyZXR1cm4gdC5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcyxhcmd1bWVudHMpfXQucHJvdG90eXBlLk1lbWJlckV4cHJlc3Npb249ZnVuY3Rpb24oZSl7dGhpcy50cmFuc2Zvcm1UaGlzVG9BdFNpZ24oZSk7dGhpcy5icmFjZU9iamVjdE9uTGVmdChlKTtyZXR1cm4gdGhpcy5yZXBsYWNlV2l0aFByb3RvdHlwZShlKXx8dGhpcy5wYXJlbnRoZXNpemVPYmplY3RJZkZ1bmN0aW9uKGUpfTt0LnByb3RvdHlwZS5Db2ZmZWVQcm90b3R5cGVFeHByZXNzaW9uPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnRyYW5zZm9ybVRoaXNUb0F0U2lnbihlKX07dC5wcm90b3R5cGUudHJhbnNmb3JtVGhpc1RvQXRTaWduPWZ1bmN0aW9uKGUpe2lmKGUub2JqZWN0LnR5cGU9PT1cIlRoaXNFeHByZXNzaW9uXCIpe2UuX3ByZWZpeGVkPXRydWU7ZS5vYmplY3QuX3ByZWZpeD10cnVlfXJldHVybiBlfTt0LnByb3RvdHlwZS5icmFjZU9iamVjdE9uTGVmdD1mdW5jdGlvbihlKXtpZihlLm9iamVjdC50eXBlPT09XCJPYmplY3RFeHByZXNzaW9uXCIpe2Uub2JqZWN0Ll9icmFjZWQ9dHJ1ZX19O3QucHJvdG90eXBlLnJlcGxhY2VXaXRoUHJvdG90eXBlPWZ1bmN0aW9uKGUpe3ZhciB0O3Q9ZS5jb21wdXRlZD09PWZhbHNlJiZlLm9iamVjdC50eXBlPT09XCJNZW1iZXJFeHByZXNzaW9uXCImJmUub2JqZWN0LnByb3BlcnR5LnR5cGU9PT1cIklkZW50aWZpZXJcIiYmZS5vYmplY3QucHJvcGVydHkubmFtZT09PVwicHJvdG90eXBlXCI7aWYodCl7cmV0dXJuIHRoaXMucmVjdXJzZShyKGUse3R5cGU6XCJDb2ZmZWVQcm90b3R5cGVFeHByZXNzaW9uXCIsb2JqZWN0OmUub2JqZWN0Lm9iamVjdCxwcm9wZXJ0eTplLnByb3BlcnR5fSkpfX07dC5wcm90b3R5cGUucGFyZW50aGVzaXplT2JqZWN0SWZGdW5jdGlvbj1mdW5jdGlvbihlKXtpZihlLm9iamVjdC50eXBlPT09XCJGdW5jdGlvbkV4cHJlc3Npb25cIil7ZS5vYmplY3QuX3BhcmVudGhlc2l6ZWQ9dHJ1ZX1yZXR1cm4gZX07cmV0dXJuIHR9KG4pfSx7XCIuLi9oZWxwZXJzXCI6NSxcIi4vYmFzZVwiOjZ9XSwxODpbZnVuY3Rpb24oZSx0LHUpe3ZhciBuLHIsaT1mdW5jdGlvbihlLHQpe2Zvcih2YXIgdSBpbiB0KXtpZihvLmNhbGwodCx1KSllW3VdPXRbdV19ZnVuY3Rpb24gbigpe3RoaXMuY29uc3RydWN0b3I9ZX1uLnByb3RvdHlwZT10LnByb3RvdHlwZTtlLnByb3RvdHlwZT1uZXcgbjtlLl9fc3VwZXJfXz10LnByb3RvdHlwZTtyZXR1cm4gZX0sbz17fS5oYXNPd25Qcm9wZXJ0eTtuPWUoXCIuL2Jhc2VcIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe2kodCxlKTtmdW5jdGlvbiB0KCl7cmV0dXJuIHQuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsYXJndW1lbnRzKX10LnByb3RvdHlwZS5BcnJheUV4cHJlc3Npb249ZnVuY3Rpb24oZSl7dGhpcy5icmFjZU9iamVjdHNJbkVsZW1lbnRzKGUpO3JldHVybiB0aGlzLmNhdGNoRW1wdHlBcnJheVNsb3RzKGUpfTt0LnByb3RvdHlwZS5PYmplY3RFeHByZXNzaW9uPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuYnJhY2VPYmplY3RJbkV4cHJlc3Npb24oZSx0KX07dC5wcm90b3R5cGUuYnJhY2VPYmplY3RJbkV4cHJlc3Npb249ZnVuY3Rpb24oZSx0KXt2YXIgdSxuLHI7aWYodC50eXBlPT09XCJFeHByZXNzaW9uU3RhdGVtZW50XCIpe3U9KChuPXRoaXMuc2NvcGUuYm9keSkhPW51bGw/blsoKHI9dGhpcy5zY29wZS5ib2R5KSE9bnVsbD9yLmxlbmd0aDp2b2lkIDApLTFdOnZvaWQgMCk9PT10O2lmKHUpe2UuX2xhc3Q9dHJ1ZX1lbHNle2UuX2JyYWNlZD10cnVlfX19O3QucHJvdG90eXBlLmJyYWNlT2JqZWN0c0luRWxlbWVudHM9ZnVuY3Rpb24oZSl7dmFyIHQsdSxuLHI7cj1lLmVsZW1lbnRzO2Zvcih0PTAsbj1yLmxlbmd0aDt0PG47dCsrKXt1PXJbdF07aWYoKHUhPW51bGw/dS50eXBlOnZvaWQgMCk9PT1cIk9iamVjdEV4cHJlc3Npb25cIil7dS5fYnJhY2VkPXRydWV9fXJldHVybiBlfTt0LnByb3RvdHlwZS5jYXRjaEVtcHR5QXJyYXlTbG90cz1mdW5jdGlvbihlKXtpZihyKGUuZWxlbWVudHMpKXtpZih0aGlzLm9wdGlvbnMuY29tcGF0KXtyZXR1cm4gdGhpcy5lc2NhcGVKcyhlKX1lbHNle3JldHVybiB0aGlzLnN5bnRheEVycm9yKGUsXCJFbXB0eSBhcnJheSBzbG90cyBhcmUgbm90IHN1cHBvcnRlZCBpbiBDb2ZmZWVTY3JpcHRcIil9fX07cmV0dXJuIHR9KG4pO3I9ZnVuY3Rpb24oZSl7dmFyIHQsdSxuO2Zvcih0PTAsdT1lLmxlbmd0aDt0PHU7dCsrKXtuPWVbdF07aWYobj09PW51bGwpe3JldHVybiB0cnVlfX1yZXR1cm4gZmFsc2V9fSx7XCIuL2Jhc2VcIjo2fV0sMTk6W2Z1bmN0aW9uKGUsdCx1KXt2YXIgbixyLGksbyxzLGE9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHUgaW4gdCl7aWYobC5jYWxsKHQsdSkpZVt1XT10W3VdfWZ1bmN0aW9uIG4oKXt0aGlzLmNvbnN0cnVjdG9yPWV9bi5wcm90b3R5cGU9dC5wcm90b3R5cGU7ZS5wcm90b3R5cGU9bmV3IG47ZS5fX3N1cGVyX189dC5wcm90b3R5cGU7cmV0dXJuIGV9LGw9e30uaGFzT3duUHJvcGVydHksZj1bXS5zbGljZTtpPWUoXCIuLi9oZWxwZXJzXCIpLHM9aS5yZXNlcnZlZFdvcmRzLG89aS5yZXBsYWNlLHI9aS5xdW90ZTtuPWUoXCIuL2Jhc2VcIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe2EodCxlKTtmdW5jdGlvbiB0KCl7cmV0dXJuIHQuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsYXJndW1lbnRzKX10LnByb3RvdHlwZS5GdW5jdGlvbkV4cHJlc3Npb249ZnVuY3Rpb24oZSx1KXt0Ll9fc3VwZXJfXy5GdW5jdGlvbkV4cHJlc3Npb24uY2FsbCh0aGlzLGUpO2UucGFyYW1zLmZvckVhY2goZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe2lmKHQudHlwZT09PVwiSWRlbnRpZmllclwiKXtlLmN0eC52YXJzLnB1c2godC5uYW1lKX1yZXR1cm4gZS5wcmV2ZW50UmVzZXJ2ZWRXb3Jkcyh0KX19KHRoaXMpKTt0aGlzLnByZXZlbnRSZXNlcnZlZFdvcmRzKGUuaWQpO3JldHVybiB0aGlzLnJlbW92ZVVuZGVmaW5lZFBhcmFtZXRlcihlKX07dC5wcm90b3R5cGUuRnVuY3Rpb25FeHByZXNzaW9uRXhpdD1mdW5jdGlvbihlKXt2YXIgdSxuO3QuX19zdXBlcl9fLkZ1bmN0aW9uRXhwcmVzc2lvbkV4aXQuY2FsbCh0aGlzLGUpOyhuPWUuYm9keS5ib2R5KS5zcGxpY2UuYXBwbHkobixbMCwwXS5jb25jYXQoZi5jYWxsKCh1PWUuYm9keS5zaGFkb3dzKSE9bnVsbD91OltdKSkpO3JldHVybiBlfTt0LnByb3RvdHlwZS5DYWxsRXhwcmVzc2lvbj1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5wYXJlbnRoZXNpemVDYWxsZWUoZSl9O3QucHJvdG90eXBlLklkZW50aWZpZXI9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZXNjYXBlVW5kZWZpbmVkKGUpfTt0LnByb3RvdHlwZS5VbmFyeUV4cHJlc3Npb249ZnVuY3Rpb24oZSl7dGhpcy5icmFjZU9iamVjdEJlc2lkZVVuYXJ5KGUpO3JldHVybiB0aGlzLnVwZGF0ZVZvaWRUb1VuZGVmaW5lZChlKX07dC5wcm90b3R5cGUuVmFyaWFibGVEZWNsYXJhdG9yPWZ1bmN0aW9uKGUpe3RoaXMucHJldmVudFJlc2VydmVkV29yZHMoZS5pZCk7dGhpcy5hZGRTaGFkb3dpbmdJZk5lZWRlZChlKTtyZXR1cm4gdGhpcy5hZGRFeHBsaWNpdFVuZGVmaW5lZEluaXRpYWxpemVyKGUpfTt0LnByb3RvdHlwZS5Bc3NpZ25tZW50RXhwcmVzc2lvbj1mdW5jdGlvbihlKXtpZih0aGlzLmlzUmVzZXJ2ZWRJZGVudGlmaWVyKGUubGVmdCkpe2lmKHRoaXMub3B0aW9ucy5jb21wYXQpe3JldHVybiB0aGlzLmVzY2FwZUpzKGUpfWVsc2V7cmV0dXJuIHRoaXMucHJldmVudFJlc2VydmVkV29yZHMoZS5sZWZ0KX19ZWxzZSBpZihlLmxlZnQudHlwZT09PVwiSWRlbnRpZmllclwiJiZ0aGlzLmN0eC52YXJzLmluZGV4T2YoZS5sZWZ0Lm5hbWUpPT09LTEpe2lmKHRoaXMub3B0aW9ucy5jb21wYXQpe3JldHVybiB0aGlzLmVzY2FwZUpzKGUpfWVsc2V7dGhpcy53YXJuKGUsXCJBc3NpZ25tZW50IG9mIGdsb2JhbCB2YXJpYWJsZSAnXCIrZS5sZWZ0Lm5hbWUrXCInXCIpO3JldHVybiBlfX1lbHNle3JldHVybiBlfX07dC5wcm90b3R5cGUuUmV0dXJuU3RhdGVtZW50PWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnBhcmVudGhlc2l6ZU9iamVjdHNJbkFyZ3VtZW50KGUpfTt0LnByb3RvdHlwZS5icmFjZU9iamVjdEJlc2lkZVVuYXJ5PWZ1bmN0aW9uKGUpe2lmKGUuYXJndW1lbnQudHlwZT09PVwiT2JqZWN0RXhwcmVzc2lvblwiKXtlLmFyZ3VtZW50Ll9icmFjZWQ9dHJ1ZX19O3QucHJvdG90eXBlLnByZXZlbnRSZXNlcnZlZFdvcmRzPWZ1bmN0aW9uKGUpe2lmKHRoaXMuaXNSZXNlcnZlZElkZW50aWZpZXIoZSkpe3JldHVybiB0aGlzLnN5bnRheEVycm9yKGUsXCInXCIrZS5uYW1lK1wiJyBpcyBhIHJlc2VydmVkIENvZmZlZVNjcmlwdCBrZXl3b3JkXCIpfX07dC5wcm90b3R5cGUuaXNSZXNlcnZlZElkZW50aWZpZXI9ZnVuY3Rpb24oZSl7dmFyIHQ7dD1lIT1udWxsP2UubmFtZTp2b2lkIDA7cmV0dXJuIHQmJn5zLmluZGV4T2YodCl9O3QucHJvdG90eXBlLnBhcmVudGhlc2l6ZU9iamVjdHNJbkFyZ3VtZW50PWZ1bmN0aW9uKGUpe2lmKGUuYXJndW1lbnQpe2lmKGUuYXJndW1lbnQudHlwZT09PVwiT2JqZWN0RXhwcmVzc2lvblwiKXtlLmFyZ3VtZW50Ll9icmFjZWQ9dHJ1ZX19cmV0dXJuIGV9O3QucHJvdG90eXBlLmFkZFNoYWRvd2luZ0lmTmVlZGVkPWZ1bmN0aW9uKGUpe3ZhciB0LHUsbjt1PWUuaWQubmFtZTtpZih+dGhpcy5jdHgudmFycy5pbmRleE9mKHUpKXt0aGlzLndhcm4oZSxcIlZhcmlhYmxlIHNoYWRvd2luZyAoJ1wiK3UrXCInKSBpcyBub3QgZnVsbHkgc3VwcG9ydGVkIGluIENvZmZlZVNjcmlwdFwiKTtuPW8oZSx7dHlwZTpcIkV4cHJlc3Npb25TdGF0ZW1lbnRcIixleHByZXNzaW9uOnt0eXBlOlwiQ29mZmVlRXNjYXBlZEV4cHJlc3Npb25cIixyYXc6XCJ2YXIgXCIrdX19KTtpZigodD10aGlzLnNjb3BlKS5zaGFkb3dzPT1udWxsKXt0LnNoYWRvd3M9W119cmV0dXJuIHRoaXMuc2NvcGUuc2hhZG93cy5wdXNoKG4pfWVsc2V7cmV0dXJuIHRoaXMuY3R4LnZhcnMucHVzaCh1KX19O3QucHJvdG90eXBlLmFkZEV4cGxpY2l0VW5kZWZpbmVkSW5pdGlhbGl6ZXI9ZnVuY3Rpb24oZSl7aWYoZS5pbml0PT1udWxsKXtlLmluaXQ9e3R5cGU6XCJJZGVudGlmaWVyXCIsbmFtZTpcInVuZGVmaW5lZFwifTt0aGlzLnNraXAoKX1yZXR1cm4gZX07dC5wcm90b3R5cGUudXBkYXRlVm9pZFRvVW5kZWZpbmVkPWZ1bmN0aW9uKGUpe2lmKGUub3BlcmF0b3I9PT1cInZvaWRcIil7cmV0dXJuIG8oZSx7dHlwZTpcIklkZW50aWZpZXJcIixuYW1lOlwidW5kZWZpbmVkXCJ9KX1lbHNle3JldHVybiBlfX07dC5wcm90b3R5cGUuZXNjYXBlVW5kZWZpbmVkPWZ1bmN0aW9uKGUpe2lmKGUubmFtZT09PVwidW5kZWZpbmVkXCImJnRoaXMub3B0aW9ucy5jb21wYXQpe3JldHVybiBvKGUse3R5cGU6XCJDb2ZmZWVFc2NhcGVkRXhwcmVzc2lvblwiLHJhdzpcInVuZGVmaW5lZFwifSl9ZWxzZXtyZXR1cm4gZX19O3QucHJvdG90eXBlLnJlbW92ZVVuZGVmaW5lZFBhcmFtZXRlcj1mdW5jdGlvbihlKXt2YXIgdCx1LG4scixpLG8scztpZihlLnBhcmFtcyl7cz1lLnBhcmFtcztmb3IodD1yPTAsaT1zLmxlbmd0aDtyPGk7dD0rK3Ipe289c1t0XTt1PXQ9PT1lLnBhcmFtcy5sZW5ndGgtMTtuPW8udHlwZT09PVwiSWRlbnRpZmllclwiJiZvLm5hbWU9PT1cInVuZGVmaW5lZFwiO2lmKG4pe2lmKHUpe2UucGFyYW1zLnBvcCgpfWVsc2V7dGhpcy5zeW50YXhFcnJvcihvLFwiJ3VuZGVmaW5lZCcgaXMgbm90IGFsbG93ZWQgaW4gZnVuY3Rpb24gcGFyYW1ldGVyc1wiKX19fX1yZXR1cm4gZX07dC5wcm90b3R5cGUucGFyZW50aGVzaXplQ2FsbGVlPWZ1bmN0aW9uKGUpe2lmKGUuY2FsbGVlLnR5cGU9PT1cIkZ1bmN0aW9uRXhwcmVzc2lvblwiKXtlLmNhbGxlZS5fcGFyZW50aGVzaXplZD10cnVlO3JldHVybiBlfX07cmV0dXJuIHR9KG4pfSx7XCIuLi9oZWxwZXJzXCI6NSxcIi4vYmFzZVwiOjZ9XSwyMDpbZnVuY3Rpb24oZSx0LHUpe3ZhciBuLHIsaSxvLHMsYSxsPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciB1IGluIHQpe2lmKGYuY2FsbCh0LHUpKWVbdV09dFt1XX1mdW5jdGlvbiBuKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfW4ucHJvdG90eXBlPXQucHJvdG90eXBlO2UucHJvdG90eXBlPW5ldyBuO2UuX19zdXBlcl9fPXQucHJvdG90eXBlO3JldHVybiBlfSxmPXt9Lmhhc093blByb3BlcnR5O3I9ZShcIi4uL2hlbHBlcnNcIikuZ2V0UHJlY2VkZW5jZTtuPWUoXCIuL2Jhc2VcIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe2wodCxlKTtmdW5jdGlvbiB0KCl7cmV0dXJuIHQuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsYXJndW1lbnRzKX10LnByb3RvdHlwZS5vbkVudGVyPWZ1bmN0aW9uKGUsdCl7dmFyIHUsbixzO2lmKCF0KXtyZXR1cm59cz10LnR5cGU7aWYocz09PVwiQ2FsbEV4cHJlc3Npb25cIiYmdFtcImFyZ3VtZW50c1wiXS5pbmRleE9mKGUpPi0xKXtyZXR1cm59aWYocz09PVwiTmV3RXhwcmVzc2lvblwiJiZ0W1wiYXJndW1lbnRzXCJdLmluZGV4T2YoZSk+LTEpe3JldHVybn1pZihzPT09XCJNZW1iZXJFeHByZXNzaW9uXCImJnQucHJvcGVydHk9PT1lKXtyZXR1cm59bj1yKGUpO2lmKG49PT0tMSl7cmV0dXJufXU9byh0LGUpfHxpKHQsZSl8fGEodCxlKXx8bjxyKHQpO2lmKHUpe3JldHVybiBlLl9wYXJlbnRoZXNpemVkPXRydWV9fTtyZXR1cm4gdH0obik7bz1mdW5jdGlvbihlLHQpe3JldHVybiBzKGUsXCItXCIpJiZlLnJpZ2h0PT09dH07aT1mdW5jdGlvbihlLHQpe3JldHVybiBzKGUsXCIvXCIpJiYocyh0LFwiL1wiKXx8cyh0LFwiKlwiKSkmJmUucmlnaHQ9PT10fTtzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUudHlwZT09PVwiQmluYXJ5RXhwcmVzc2lvblwiJiZlLm9wZXJhdG9yPT09dH07YT1mdW5jdGlvbihlLHQpe3JldHVybiBlLnR5cGU9PT1cIkNvbmRpdGlvbmFsRXhwcmVzc2lvblwiJiZ0LnR5cGU9PT1cIkNvbmRpdGlvbmFsRXhwcmVzc2lvblwiJiZlLmFsdGVybmF0ZSE9PXR9fSx7XCIuLi9oZWxwZXJzXCI6NSxcIi4vYmFzZVwiOjZ9XSwyMTpbZnVuY3Rpb24oZSx0LHUpe3ZhciBuLHIsaT1mdW5jdGlvbihlLHQpe2Zvcih2YXIgdSBpbiB0KXtpZihvLmNhbGwodCx1KSllW3VdPXRbdV19ZnVuY3Rpb24gbigpe3RoaXMuY29uc3RydWN0b3I9ZX1uLnByb3RvdHlwZT10LnByb3RvdHlwZTtlLnByb3RvdHlwZT1uZXcgbjtlLl9fc3VwZXJfXz10LnByb3RvdHlwZTtyZXR1cm4gZX0sbz17fS5oYXNPd25Qcm9wZXJ0eTtyPWUoXCIuLi9oZWxwZXJzXCIpLmdldFJldHVyblN0YXRlbWVudHM7bj1lKFwiLi9iYXNlXCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtpKHQsZSk7ZnVuY3Rpb24gdCgpe3JldHVybiB0Ll9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLGFyZ3VtZW50cyl9dC5wcm90b3R5cGUub25TY29wZUV4aXQ9ZnVuY3Rpb24oZSx0LHUsbil7cmV0dXJuIHRoaXMudW5yZXR1cm5pZnkodSl9O3QucHJvdG90eXBlLnVucmV0dXJuaWZ5PWZ1bmN0aW9uKGUsdCl7dmFyIHU7aWYodD09bnVsbCl7dD1cImJvZHlcIn1pZihlW3RdLmxlbmd0aD4wKXt1PXIoZVt0XSk7aWYodS5sZW5ndGg9PT0wKXtlW3RdLnB1c2goe3R5cGU6XCJSZXR1cm5TdGF0ZW1lbnRcIn0pfWVsc2V7dS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2lmKGUuYXJndW1lbnQpe2UudHlwZT1cIkV4cHJlc3Npb25TdGF0ZW1lbnRcIjtyZXR1cm4gZS5leHByZXNzaW9uPWUuYXJndW1lbnR9fSl9fX07cmV0dXJuIHR9KG4pfSx7XCIuLi9oZWxwZXJzXCI6NSxcIi4vYmFzZVwiOjZ9XSwyMjpbZnVuY3Rpb24oZSx0LHUpe3ZhciBuLHI9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHUgaW4gdCl7aWYoaS5jYWxsKHQsdSkpZVt1XT10W3VdfWZ1bmN0aW9uIG4oKXt0aGlzLmNvbnN0cnVjdG9yPWV9bi5wcm90b3R5cGU9dC5wcm90b3R5cGU7ZS5wcm90b3R5cGU9bmV3IG47ZS5fX3N1cGVyX189dC5wcm90b3R5cGU7cmV0dXJuIGV9LGk9e30uaGFzT3duUHJvcGVydHk7bj1lKFwiLi9iYXNlLmNvZmZlZVwiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cih0LGUpO2Z1bmN0aW9uIHQoKXtyZXR1cm4gdC5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcyxhcmd1bWVudHMpfXQucHJvdG90eXBlLlN3aXRjaFN0YXRlbWVudD1mdW5jdGlvbihlKXt0aGlzLmNvbnNvbGlkYXRlQ2FzZXMoZSk7cmV0dXJuIHRoaXMuZW5zdXJlTGFzdENhc2VJc0RlZmF1bHQoZSl9O3QucHJvdG90eXBlLlN3aXRjaENhc2U9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucmVtb3ZlQnJlYWtzRnJvbUNvbnNlcXVlbnRzKGUpfTt0LnByb3RvdHlwZS5lbnN1cmVMYXN0Q2FzZUlzRGVmYXVsdD1mdW5jdGlvbihlKXt2YXIgdCx1LG4scixpLG8scyxhO3Q9ZS5jYXNlcy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGUudHlwZT09PVwiU3dpdGNoQ2FzZVwifSk7cz10Lmxlbmd0aDtmb3IodT1pPTAsYT10Lmxlbmd0aDtpPGE7dT0rK2kpe289dFt1XTtyPXU9PT1zLTE7bj1vLnRlc3Q9PW51bGw7aWYobiYmIXIpe3RoaXMuc3ludGF4RXJyb3IobyxcImRlZmF1bHQgY2FzZXMgb25seSBhbGxvd2VkIGF0IHRoZSBlbmRcIil9fXJldHVybiBlfTt0LnByb3RvdHlwZS5jb25zb2xpZGF0ZUNhc2VzPWZ1bmN0aW9uKGUpe3ZhciB0LHUsbixyLGksbyxzO2k9W107cz1bXTtvPWUuY2FzZXM7Zm9yKHQ9dT0wLHI9by5sZW5ndGg7dTxyO3Q9Kyt1KXtuPW9bdF07aWYobi50eXBlPT09XCJTd2l0Y2hDYXNlXCIpe2lmKG4udGVzdCl7cy5wdXNoKG4udGVzdCl9aWYobi5jb25zZXF1ZW50Lmxlbmd0aD4wKXtpZihuLnRlc3Qpe24udGVzdD17dHlwZTpcIkNvZmZlZUxpc3RFeHByZXNzaW9uXCIsZXhwcmVzc2lvbnM6c319cz1bXTtpLnB1c2gobil9fWVsc2V7aS5wdXNoKG4pfX1lLmNhc2VzPWk7cmV0dXJuIGV9O3QucHJvdG90eXBlLnJlbW92ZUJyZWFrc0Zyb21Db25zZXF1ZW50cz1mdW5jdGlvbihlKXt2YXIgdCx1O2lmKGUudGVzdCl7dD1lLmNvbnNlcXVlbnQubGVuZ3RoLTE7dT1lLmNvbnNlcXVlbnRbdF07aWYoKHUhPW51bGw/dS50eXBlOnZvaWQgMCk9PT1cIkJyZWFrU3RhdGVtZW50XCIpe2RlbGV0ZSBlLmNvbnNlcXVlbnRbdF07ZS5jb25zZXF1ZW50Lmxlbmd0aC09MX1lbHNlIGlmKCh1IT1udWxsP3UudHlwZTp2b2lkIDApPT09XCJDb250aW51ZVN0YXRlbWVudFwiKXt9ZWxzZSBpZigodSE9bnVsbD91LnR5cGU6dm9pZCAwKSE9PVwiUmV0dXJuU3RhdGVtZW50XCIpe3RoaXMuc3ludGF4RXJyb3IoZSxcIk5vIGJyZWFrIG9yIHJldHVybiBzdGF0ZW1lbnQgZm91bmQgaW4gYSBjYXNlXCIpfXJldHVybiBlfX07cmV0dXJuIHR9KG4pfSx7XCIuL2Jhc2UuY29mZmVlXCI6Nn1dLDIzOltmdW5jdGlvbihlLHQsdSl7dmFyIG4scj1mdW5jdGlvbihlLHQpe2Zvcih2YXIgdSBpbiB0KXtpZihpLmNhbGwodCx1KSllW3VdPXRbdV19ZnVuY3Rpb24gbigpe3RoaXMuY29uc3RydWN0b3I9ZX1uLnByb3RvdHlwZT10LnByb3RvdHlwZTtlLnByb3RvdHlwZT1uZXcgbjtlLl9fc3VwZXJfXz10LnByb3RvdHlwZTtyZXR1cm4gZX0saT17fS5oYXNPd25Qcm9wZXJ0eTtuPWUoXCIuL2Jhc2VcIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3IodCxlKTtmdW5jdGlvbiB0KCl7cmV0dXJuIHQuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsYXJndW1lbnRzKX10LnByb3RvdHlwZS5MYWJlbGVkU3RhdGVtZW50PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuc3ludGF4RXJyb3IoZSxcIkxhYmVsZWQgc3RhdGVtZW50cyBhcmUgbm90IHN1cHBvcnRlZCBpbiBDb2ZmZWVTY2lycHRcIil9O3QucHJvdG90eXBlLldpdGhTdGF0ZW1lbnQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuc3ludGF4RXJyb3IoZSxcIid3aXRoJyBpcyBub3Qgc3VwcG9ydGVkIGluIENvZmZlZVNjcmlwdFwiKX07cmV0dXJuIHR9KG4pfSx7XCIuL2Jhc2VcIjo2fV0sMjQ6W2Z1bmN0aW9uKGUsdCx1KXtpZih0eXBlb2YgT2JqZWN0LmNyZWF0ZT09PVwiZnVuY3Rpb25cIil7dC5leHBvcnRzPWZ1bmN0aW9uIG4oZSx0KXtlLnN1cGVyXz10O2UucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodC5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTplLGVudW1lcmFibGU6ZmFsc2Usd3JpdGFibGU6dHJ1ZSxjb25maWd1cmFibGU6dHJ1ZX19KX19ZWxzZXt0LmV4cG9ydHM9ZnVuY3Rpb24gcihlLHQpe2Uuc3VwZXJfPXQ7dmFyIHU9ZnVuY3Rpb24oKXt9O3UucHJvdG90eXBlPXQucHJvdG90eXBlO2UucHJvdG90eXBlPW5ldyB1O2UucHJvdG90eXBlLmNvbnN0cnVjdG9yPWV9fX0se31dLDI1OltmdW5jdGlvbihlLHQsdSl7KGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSx0KXt2YXIgdT0wO2Zvcih2YXIgbj1lLmxlbmd0aC0xO24+PTA7bi0tKXt2YXIgcj1lW25dO2lmKHI9PT1cIi5cIil7ZS5zcGxpY2UobiwxKX1lbHNlIGlmKHI9PT1cIi4uXCIpe2Uuc3BsaWNlKG4sMSk7dSsrfWVsc2UgaWYodSl7ZS5zcGxpY2UobiwxKTt1LS19fWlmKHQpe2Zvcig7dS0tO3Upe2UudW5zaGlmdChcIi4uXCIpfX1yZXR1cm4gZX12YXIgbj0vXihcXC8/fCkoW1xcc1xcU10qPykoKD86XFwuezEsMn18W15cXC9dKz98KShcXC5bXi5cXC9dKnwpKSg/OltcXC9dKikkLzt2YXIgcj1mdW5jdGlvbihlKXtyZXR1cm4gbi5leGVjKGUpLnNsaWNlKDEpfTt1LnJlc29sdmU9ZnVuY3Rpb24oKXt2YXIgdT1cIlwiLG49ZmFsc2U7Zm9yKHZhciByPWFyZ3VtZW50cy5sZW5ndGgtMTtyPj0tMSYmIW47ci0tKXt2YXIgbz1yPj0wP2FyZ3VtZW50c1tyXTplLmN3ZCgpO2lmKHR5cGVvZiBvIT09XCJzdHJpbmdcIil7dGhyb3cgbmV3IFR5cGVFcnJvcihcIkFyZ3VtZW50cyB0byBwYXRoLnJlc29sdmUgbXVzdCBiZSBzdHJpbmdzXCIpfWVsc2UgaWYoIW8pe2NvbnRpbnVlfXU9bytcIi9cIit1O249by5jaGFyQXQoMCk9PT1cIi9cIn11PXQoaSh1LnNwbGl0KFwiL1wiKSxmdW5jdGlvbihlKXtyZXR1cm4hIWV9KSwhbikuam9pbihcIi9cIik7cmV0dXJuKG4/XCIvXCI6XCJcIikrdXx8XCIuXCJ9O3Uubm9ybWFsaXplPWZ1bmN0aW9uKGUpe3ZhciBuPXUuaXNBYnNvbHV0ZShlKSxyPW8oZSwtMSk9PT1cIi9cIjtlPXQoaShlLnNwbGl0KFwiL1wiKSxmdW5jdGlvbihlKXtyZXR1cm4hIWV9KSwhbikuam9pbihcIi9cIik7aWYoIWUmJiFuKXtlPVwiLlwifWlmKGUmJnIpe2UrPVwiL1wifXJldHVybihuP1wiL1wiOlwiXCIpK2V9O3UuaXNBYnNvbHV0ZT1mdW5jdGlvbihlKXtyZXR1cm4gZS5jaGFyQXQoMCk9PT1cIi9cIn07dS5qb2luPWZ1bmN0aW9uKCl7dmFyIGU9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDApO3JldHVybiB1Lm5vcm1hbGl6ZShpKGUsZnVuY3Rpb24oZSx0KXtpZih0eXBlb2YgZSE9PVwic3RyaW5nXCIpe3Rocm93IG5ldyBUeXBlRXJyb3IoXCJBcmd1bWVudHMgdG8gcGF0aC5qb2luIG11c3QgYmUgc3RyaW5nc1wiKX1yZXR1cm4gZX0pLmpvaW4oXCIvXCIpKX07dS5yZWxhdGl2ZT1mdW5jdGlvbihlLHQpe2U9dS5yZXNvbHZlKGUpLnN1YnN0cigxKTt0PXUucmVzb2x2ZSh0KS5zdWJzdHIoMSk7ZnVuY3Rpb24gbihlKXt2YXIgdD0wO2Zvcig7dDxlLmxlbmd0aDt0Kyspe2lmKGVbdF0hPT1cIlwiKWJyZWFrfXZhciB1PWUubGVuZ3RoLTE7Zm9yKDt1Pj0wO3UtLSl7aWYoZVt1XSE9PVwiXCIpYnJlYWt9aWYodD51KXJldHVybltdO3JldHVybiBlLnNsaWNlKHQsdS10KzEpfXZhciByPW4oZS5zcGxpdChcIi9cIikpO3ZhciBpPW4odC5zcGxpdChcIi9cIikpO3ZhciBvPU1hdGgubWluKHIubGVuZ3RoLGkubGVuZ3RoKTt2YXIgcz1vO2Zvcih2YXIgYT0wO2E8bzthKyspe2lmKHJbYV0hPT1pW2FdKXtzPWE7YnJlYWt9fXZhciBsPVtdO2Zvcih2YXIgYT1zO2E8ci5sZW5ndGg7YSsrKXtsLnB1c2goXCIuLlwiKX1sPWwuY29uY2F0KGkuc2xpY2UocykpO3JldHVybiBsLmpvaW4oXCIvXCIpfTt1LnNlcD1cIi9cIjt1LmRlbGltaXRlcj1cIjpcIjt1LmRpcm5hbWU9ZnVuY3Rpb24oZSl7dmFyIHQ9cihlKSx1PXRbMF0sbj10WzFdO2lmKCF1JiYhbil7cmV0dXJuXCIuXCJ9aWYobil7bj1uLnN1YnN0cigwLG4ubGVuZ3RoLTEpfXJldHVybiB1K259O3UuYmFzZW5hbWU9ZnVuY3Rpb24oZSx0KXt2YXIgdT1yKGUpWzJdO2lmKHQmJnUuc3Vic3RyKC0xKnQubGVuZ3RoKT09PXQpe3U9dS5zdWJzdHIoMCx1Lmxlbmd0aC10Lmxlbmd0aCl9cmV0dXJuIHV9O3UuZXh0bmFtZT1mdW5jdGlvbihlKXtyZXR1cm4gcihlKVszXX07ZnVuY3Rpb24gaShlLHQpe2lmKGUuZmlsdGVyKXJldHVybiBlLmZpbHRlcih0KTt2YXIgdT1bXTtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7aWYodChlW25dLG4sZSkpdS5wdXNoKGVbbl0pfXJldHVybiB1fXZhciBvPVwiYWJcIi5zdWJzdHIoLTEpPT09XCJiXCI/ZnVuY3Rpb24oZSx0LHUpe3JldHVybiBlLnN1YnN0cih0LHUpfTpmdW5jdGlvbihlLHQsdSl7aWYodDwwKXQ9ZS5sZW5ndGgrdDtyZXR1cm4gZS5zdWJzdHIodCx1KX19KS5jYWxsKHRoaXMsZShcIl9wcm9jZXNzXCIpKX0se19wcm9jZXNzOjI2fV0sMjY6W2Z1bmN0aW9uKGUsdCx1KXt2YXIgbj10LmV4cG9ydHM9e307bi5uZXh0VGljaz1mdW5jdGlvbigpe3ZhciBlPXR5cGVvZiB3aW5kb3chPT1cInVuZGVmaW5lZFwiJiZ3aW5kb3cuc2V0SW1tZWRpYXRlO3ZhciB0PXR5cGVvZiB3aW5kb3chPT1cInVuZGVmaW5lZFwiJiZ3aW5kb3cucG9zdE1lc3NhZ2UmJndpbmRvdy5hZGRFdmVudExpc3RlbmVyO2lmKGUpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gd2luZG93LnNldEltbWVkaWF0ZShlKX19aWYodCl7dmFyIHU9W107d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zb3VyY2U7aWYoKHQ9PT13aW5kb3d8fHQ9PT1udWxsKSYmZS5kYXRhPT09XCJwcm9jZXNzLXRpY2tcIil7ZS5zdG9wUHJvcGFnYXRpb24oKTtpZih1Lmxlbmd0aD4wKXt2YXIgbj11LnNoaWZ0KCk7bigpfX19LHRydWUpO3JldHVybiBmdW5jdGlvbiBuKGUpe3UucHVzaChlKTt3aW5kb3cucG9zdE1lc3NhZ2UoXCJwcm9jZXNzLXRpY2tcIixcIipcIil9fXJldHVybiBmdW5jdGlvbiByKGUpe3NldFRpbWVvdXQoZSwwKX19KCk7bi50aXRsZT1cImJyb3dzZXJcIjtuLmJyb3dzZXI9dHJ1ZTtuLmVudj17fTtuLmFyZ3Y9W107ZnVuY3Rpb24gcigpe31uLm9uPXI7bi5hZGRMaXN0ZW5lcj1yO24ub25jZT1yO24ub2ZmPXI7bi5yZW1vdmVMaXN0ZW5lcj1yO24ucmVtb3ZlQWxsTGlzdGVuZXJzPXI7bi5lbWl0PXI7bi5iaW5kaW5nPWZ1bmN0aW9uKGUpe3Rocm93IG5ldyBFcnJvcihcInByb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkXCIpfTtuLmN3ZD1mdW5jdGlvbigpe3JldHVyblwiL1wifTtuLmNoZGlyPWZ1bmN0aW9uKGUpe3Rocm93IG5ldyBFcnJvcihcInByb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZFwiKX19LHt9XSwyNzpbZnVuY3Rpb24oZSx0LHUpe3QuZXhwb3J0cz1mdW5jdGlvbiBuKGUpe3JldHVybiBlJiZ0eXBlb2YgZT09PVwib2JqZWN0XCImJnR5cGVvZiBlLmNvcHk9PT1cImZ1bmN0aW9uXCImJnR5cGVvZiBlLmZpbGw9PT1cImZ1bmN0aW9uXCImJnR5cGVvZiBlLnJlYWRVSW50OD09PVwiZnVuY3Rpb25cIn19LHt9XSwyODpbZnVuY3Rpb24oZSx0LHUpeyhmdW5jdGlvbih0LG4pe3ZhciByPS8lW3NkaiVdL2c7dS5mb3JtYXQ9ZnVuY3Rpb24oZSl7aWYoIXkoZSkpe3ZhciB0PVtdO2Zvcih2YXIgdT0wO3U8YXJndW1lbnRzLmxlbmd0aDt1Kyspe3QucHVzaChzKGFyZ3VtZW50c1t1XSkpfXJldHVybiB0LmpvaW4oXCIgXCIpfXZhciB1PTE7dmFyIG49YXJndW1lbnRzO3ZhciBpPW4ubGVuZ3RoO3ZhciBvPVN0cmluZyhlKS5yZXBsYWNlKHIsZnVuY3Rpb24oZSl7aWYoZT09PVwiJSVcIilyZXR1cm5cIiVcIjtpZih1Pj1pKXJldHVybiBlO3N3aXRjaChlKXtjYXNlXCIlc1wiOnJldHVybiBTdHJpbmcoblt1KytdKTtjYXNlXCIlZFwiOnJldHVybiBOdW1iZXIoblt1KytdKTtjYXNlXCIlalwiOnRyeXtyZXR1cm4gSlNPTi5zdHJpbmdpZnkoblt1KytdKX1jYXRjaCh0KXtyZXR1cm5cIltDaXJjdWxhcl1cIn1kZWZhdWx0OnJldHVybiBlfX0pO2Zvcih2YXIgYT1uW3VdO3U8aTthPW5bKyt1XSl7aWYoRShhKXx8IVMoYSkpe28rPVwiIFwiK2F9ZWxzZXtvKz1cIiBcIitzKGEpfX1yZXR1cm4gb307dS5kZXByZWNhdGU9ZnVuY3Rpb24oZSxyKXtpZih2KG4ucHJvY2Vzcykpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB1LmRlcHJlY2F0ZShlLHIpLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19aWYodC5ub0RlcHJlY2F0aW9uPT09dHJ1ZSl7cmV0dXJuIGV9dmFyIGk9ZmFsc2U7ZnVuY3Rpb24gbygpe2lmKCFpKXtpZih0LnRocm93RGVwcmVjYXRpb24pe3Rocm93IG5ldyBFcnJvcihyKX1lbHNlIGlmKHQudHJhY2VEZXByZWNhdGlvbil7Y29uc29sZS50cmFjZShyKX1lbHNle2NvbnNvbGUuZXJyb3Iocil9aT10cnVlfXJldHVybiBlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1yZXR1cm4gb307dmFyIGk9e307dmFyIG87dS5kZWJ1Z2xvZz1mdW5jdGlvbihlKXtpZih2KG8pKW89dC5lbnYuTk9ERV9ERUJVR3x8XCJcIjtlPWUudG9VcHBlckNhc2UoKTtpZighaVtlXSl7aWYobmV3IFJlZ0V4cChcIlxcXFxiXCIrZStcIlxcXFxiXCIsXCJpXCIpLnRlc3Qobykpe3ZhciBuPXQucGlkO2lbZV09ZnVuY3Rpb24oKXt2YXIgdD11LmZvcm1hdC5hcHBseSh1LGFyZ3VtZW50cyk7Y29uc29sZS5lcnJvcihcIiVzICVkOiAlc1wiLGUsbix0KX19ZWxzZXtpW2VdPWZ1bmN0aW9uKCl7fX19cmV0dXJuIGlbZV19O2Z1bmN0aW9uIHMoZSx0KXt2YXIgbj17c2VlbjpbXSxzdHlsaXplOmx9O2lmKGFyZ3VtZW50cy5sZW5ndGg+PTMpbi5kZXB0aD1hcmd1bWVudHNbMl07aWYoYXJndW1lbnRzLmxlbmd0aD49NCluLmNvbG9ycz1hcmd1bWVudHNbM107aWYoQyh0KSl7bi5zaG93SGlkZGVuPXR9ZWxzZSBpZih0KXt1Ll9leHRlbmQobix0KX1pZih2KG4uc2hvd0hpZGRlbikpbi5zaG93SGlkZGVuPWZhbHNlO2lmKHYobi5kZXB0aCkpbi5kZXB0aD0yO2lmKHYobi5jb2xvcnMpKW4uY29sb3JzPWZhbHNlO2lmKHYobi5jdXN0b21JbnNwZWN0KSluLmN1c3RvbUluc3BlY3Q9dHJ1ZTtpZihuLmNvbG9ycyluLnN0eWxpemU9YTtyZXR1cm4gYyhuLGUsbi5kZXB0aCl9dS5pbnNwZWN0PXM7cy5jb2xvcnM9e2JvbGQ6WzEsMjJdLGl0YWxpYzpbMywyM10sdW5kZXJsaW5lOls0LDI0XSxpbnZlcnNlOls3LDI3XSx3aGl0ZTpbMzcsMzldLGdyZXk6WzkwLDM5XSxibGFjazpbMzAsMzldLGJsdWU6WzM0LDM5XSxjeWFuOlszNiwzOV0sZ3JlZW46WzMyLDM5XSxtYWdlbnRhOlszNSwzOV0scmVkOlszMSwzOV0seWVsbG93OlszMywzOV19O3Muc3R5bGVzPXtzcGVjaWFsOlwiY3lhblwiLG51bWJlcjpcInllbGxvd1wiLFwiYm9vbGVhblwiOlwieWVsbG93XCIsdW5kZWZpbmVkOlwiZ3JleVwiLFwibnVsbFwiOlwiYm9sZFwiLHN0cmluZzpcImdyZWVuXCIsZGF0ZTpcIm1hZ2VudGFcIixyZWdleHA6XCJyZWRcIn07ZnVuY3Rpb24gYShlLHQpe3ZhciB1PXMuc3R5bGVzW3RdO2lmKHUpe3JldHVyblwiXHUwMDFiW1wiK3MuY29sb3JzW3VdWzBdK1wibVwiK2UrXCJcdTAwMWJbXCIrcy5jb2xvcnNbdV1bMV0rXCJtXCJ9ZWxzZXtyZXR1cm4gZX19ZnVuY3Rpb24gbChlLHQpe3JldHVybiBlfWZ1bmN0aW9uIGYoZSl7dmFyIHQ9e307ZS5mb3JFYWNoKGZ1bmN0aW9uKGUsdSl7dFtlXT10cnVlfSk7cmV0dXJuIHR9ZnVuY3Rpb24gYyhlLHQsbil7aWYoZS5jdXN0b21JbnNwZWN0JiZ0JiZfKHQuaW5zcGVjdCkmJnQuaW5zcGVjdCE9PXUuaW5zcGVjdCYmISh0LmNvbnN0cnVjdG9yJiZ0LmNvbnN0cnVjdG9yLnByb3RvdHlwZT09PXQpKXt2YXIgcj10Lmluc3BlY3QobixlKTtpZigheShyKSl7cj1jKGUscixuKX1yZXR1cm4gcn12YXIgaT1wKGUsdCk7aWYoaSl7cmV0dXJuIGl9dmFyIG89T2JqZWN0LmtleXModCk7dmFyIHM9ZihvKTtpZihlLnNob3dIaWRkZW4pe289T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModCl9aWYodyh0KSYmKG8uaW5kZXhPZihcIm1lc3NhZ2VcIik+PTB8fG8uaW5kZXhPZihcImRlc2NyaXB0aW9uXCIpPj0wKSl7cmV0dXJuIEQodCl9aWYoby5sZW5ndGg9PT0wKXtpZihfKHQpKXt2YXIgYT10Lm5hbWU/XCI6IFwiK3QubmFtZTpcIlwiO3JldHVybiBlLnN0eWxpemUoXCJbRnVuY3Rpb25cIithK1wiXVwiLFwic3BlY2lhbFwiKX1pZihiKHQpKXtyZXR1cm4gZS5zdHlsaXplKFJlZ0V4cC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KSxcInJlZ2V4cFwiKX1pZih4KHQpKXtyZXR1cm4gZS5zdHlsaXplKERhdGUucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodCksXCJkYXRlXCIpfWlmKHcodCkpe3JldHVybiBEKHQpfX12YXIgbD1cIlwiLEM9ZmFsc2UsRT1bXCJ7XCIsXCJ9XCJdO2lmKEEodCkpe0M9dHJ1ZTtFPVtcIltcIixcIl1cIl19aWYoXyh0KSl7dmFyIEY9dC5uYW1lP1wiOiBcIit0Lm5hbWU6XCJcIjtsPVwiIFtGdW5jdGlvblwiK0YrXCJdXCJ9aWYoYih0KSl7bD1cIiBcIitSZWdFeHAucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodCl9aWYoeCh0KSl7bD1cIiBcIitEYXRlLnByb3RvdHlwZS50b1VUQ1N0cmluZy5jYWxsKHQpfWlmKHcodCkpe2w9XCIgXCIrRCh0KX1pZihvLmxlbmd0aD09PTAmJighQ3x8dC5sZW5ndGg9PTApKXtyZXR1cm4gRVswXStsK0VbMV19aWYobjwwKXtpZihiKHQpKXtyZXR1cm4gZS5zdHlsaXplKFJlZ0V4cC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KSxcInJlZ2V4cFwiKX1lbHNle3JldHVybiBlLnN0eWxpemUoXCJbT2JqZWN0XVwiLFwic3BlY2lhbFwiKX19ZS5zZWVuLnB1c2godCk7dmFyIGc7aWYoQyl7Zz1oKGUsdCxuLHMsbyl9ZWxzZXtnPW8ubWFwKGZ1bmN0aW9uKHUpe3JldHVybiBtKGUsdCxuLHMsdSxDKX0pfWUuc2Vlbi5wb3AoKTtyZXR1cm4gZChnLGwsRSl9ZnVuY3Rpb24gcChlLHQpe2lmKHYodCkpcmV0dXJuIGUuc3R5bGl6ZShcInVuZGVmaW5lZFwiLFwidW5kZWZpbmVkXCIpO2lmKHkodCkpe3ZhciB1PVwiJ1wiK0pTT04uc3RyaW5naWZ5KHQpLnJlcGxhY2UoL15cInxcIiQvZyxcIlwiKS5yZXBsYWNlKC8nL2csXCJcXFxcJ1wiKS5yZXBsYWNlKC9cXFxcXCIvZywnXCInKStcIidcIjtyZXR1cm4gZS5zdHlsaXplKHUsXCJzdHJpbmdcIil9aWYoZyh0KSlyZXR1cm4gZS5zdHlsaXplKFwiXCIrdCxcIm51bWJlclwiKTtpZihDKHQpKXJldHVybiBlLnN0eWxpemUoXCJcIit0LFwiYm9vbGVhblwiKTtpZihFKHQpKXJldHVybiBlLnN0eWxpemUoXCJudWxsXCIsXCJudWxsXCIpfWZ1bmN0aW9uIEQoZSl7cmV0dXJuXCJbXCIrRXJyb3IucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSkrXCJdXCJ9ZnVuY3Rpb24gaChlLHQsdSxuLHIpe3ZhciBpPVtdO2Zvcih2YXIgbz0wLHM9dC5sZW5ndGg7bzxzOysrbyl7aWYoaih0LFN0cmluZyhvKSkpe2kucHVzaChtKGUsdCx1LG4sU3RyaW5nKG8pLHRydWUpKX1lbHNle2kucHVzaChcIlwiKX19ci5mb3JFYWNoKGZ1bmN0aW9uKHIpe2lmKCFyLm1hdGNoKC9eXFxkKyQvKSl7aS5wdXNoKG0oZSx0LHUsbixyLHRydWUpKX19KTtyZXR1cm4gaX1mdW5jdGlvbiBtKGUsdCx1LG4scixpKXt2YXIgbyxzLGE7YT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQscil8fHt2YWx1ZTp0W3JdfTtpZihhLmdldCl7aWYoYS5zZXQpe3M9ZS5zdHlsaXplKFwiW0dldHRlci9TZXR0ZXJdXCIsXCJzcGVjaWFsXCIpfWVsc2V7cz1lLnN0eWxpemUoXCJbR2V0dGVyXVwiLFwic3BlY2lhbFwiKX19ZWxzZXtpZihhLnNldCl7cz1lLnN0eWxpemUoXCJbU2V0dGVyXVwiLFwic3BlY2lhbFwiKX19aWYoIWoobixyKSl7bz1cIltcIityK1wiXVwifWlmKCFzKXtpZihlLnNlZW4uaW5kZXhPZihhLnZhbHVlKTwwKXtpZihFKHUpKXtzPWMoZSxhLnZhbHVlLG51bGwpfWVsc2V7cz1jKGUsYS52YWx1ZSx1LTEpfWlmKHMuaW5kZXhPZihcIlxcblwiKT4tMSl7aWYoaSl7cz1zLnNwbGl0KFwiXFxuXCIpLm1hcChmdW5jdGlvbihlKXtyZXR1cm5cIiAgXCIrZX0pLmpvaW4oXCJcXG5cIikuc3Vic3RyKDIpfWVsc2V7cz1cIlxcblwiK3Muc3BsaXQoXCJcXG5cIikubWFwKGZ1bmN0aW9uKGUpe3JldHVyblwiICAgXCIrZX0pLmpvaW4oXCJcXG5cIil9fX1lbHNle3M9ZS5zdHlsaXplKFwiW0NpcmN1bGFyXVwiLFwic3BlY2lhbFwiKX19aWYodihvKSl7aWYoaSYmci5tYXRjaCgvXlxcZCskLykpe3JldHVybiBzfW89SlNPTi5zdHJpbmdpZnkoXCJcIityKTtpZihvLm1hdGNoKC9eXCIoW2EtekEtWl9dW2EtekEtWl8wLTldKilcIiQvKSl7bz1vLnN1YnN0cigxLG8ubGVuZ3RoLTIpO289ZS5zdHlsaXplKG8sXCJuYW1lXCIpfWVsc2V7bz1vLnJlcGxhY2UoLycvZyxcIlxcXFwnXCIpLnJlcGxhY2UoL1xcXFxcIi9nLCdcIicpLnJlcGxhY2UoLyheXCJ8XCIkKS9nLFwiJ1wiKTtvPWUuc3R5bGl6ZShvLFwic3RyaW5nXCIpfX1yZXR1cm4gbytcIjogXCIrc31mdW5jdGlvbiBkKGUsdCx1KXt2YXIgbj0wO3ZhciByPWUucmVkdWNlKGZ1bmN0aW9uKGUsdCl7bisrO2lmKHQuaW5kZXhPZihcIlxcblwiKT49MCluKys7cmV0dXJuIGUrdC5yZXBsYWNlKC9cXHUwMDFiXFxbXFxkXFxkP20vZyxcIlwiKS5sZW5ndGgrMX0sMCk7aWYocj42MCl7cmV0dXJuIHVbMF0rKHQ9PT1cIlwiP1wiXCI6dCtcIlxcbiBcIikrXCIgXCIrZS5qb2luKFwiLFxcbiAgXCIpK1wiIFwiK3VbMV19cmV0dXJuIHVbMF0rdCtcIiBcIitlLmpvaW4oXCIsIFwiKStcIiBcIit1WzFdfWZ1bmN0aW9uIEEoZSl7cmV0dXJuIEFycmF5LmlzQXJyYXkoZSl9dS5pc0FycmF5PUE7ZnVuY3Rpb24gQyhlKXtyZXR1cm4gdHlwZW9mIGU9PT1cImJvb2xlYW5cIn11LmlzQm9vbGVhbj1DO2Z1bmN0aW9uIEUoZSl7cmV0dXJuIGU9PT1udWxsfXUuaXNOdWxsPUU7ZnVuY3Rpb24gRihlKXtyZXR1cm4gZT09bnVsbH11LmlzTnVsbE9yVW5kZWZpbmVkPUY7ZnVuY3Rpb24gZyhlKXtyZXR1cm4gdHlwZW9mIGU9PT1cIm51bWJlclwifXUuaXNOdW1iZXI9ZztmdW5jdGlvbiB5KGUpe3JldHVybiB0eXBlb2YgZT09PVwic3RyaW5nXCJ9dS5pc1N0cmluZz15O2Z1bmN0aW9uIEIoZSl7cmV0dXJuIHR5cGVvZiBlPT09XCJzeW1ib2xcIn11LmlzU3ltYm9sPUI7ZnVuY3Rpb24gdihlKXtyZXR1cm4gZT09PXZvaWQgMH11LmlzVW5kZWZpbmVkPXY7ZnVuY3Rpb24gYihlKXtyZXR1cm4gUyhlKSYmSShlKT09PVwiW29iamVjdCBSZWdFeHBdXCJ9dS5pc1JlZ0V4cD1iO2Z1bmN0aW9uIFMoZSl7cmV0dXJuIHR5cGVvZiBlPT09XCJvYmplY3RcIiYmZSE9PW51bGx9dS5pc09iamVjdD1TO2Z1bmN0aW9uIHgoZSl7cmV0dXJuIFMoZSkmJkkoZSk9PT1cIltvYmplY3QgRGF0ZV1cIn11LmlzRGF0ZT14O2Z1bmN0aW9uIHcoZSl7cmV0dXJuIFMoZSkmJihJKGUpPT09XCJbb2JqZWN0IEVycm9yXVwifHxlIGluc3RhbmNlb2YgRXJyb3IpfXUuaXNFcnJvcj13O2Z1bmN0aW9uIF8oZSl7cmV0dXJuIHR5cGVvZiBlPT09XCJmdW5jdGlvblwifXUuaXNGdW5jdGlvbj1fO2Z1bmN0aW9uIGsoZSl7cmV0dXJuIGU9PT1udWxsfHx0eXBlb2YgZT09PVwiYm9vbGVhblwifHx0eXBlb2YgZT09PVwibnVtYmVyXCJ8fHR5cGVvZiBlPT09XCJzdHJpbmdcInx8dHlwZW9mIGU9PT1cInN5bWJvbFwifHx0eXBlb2YgZT09PVwidW5kZWZpbmVkXCJ9dS5pc1ByaW1pdGl2ZT1rO3UuaXNCdWZmZXI9ZShcIi4vc3VwcG9ydC9pc0J1ZmZlclwiKTtmdW5jdGlvbiBJKGUpe3JldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSl9ZnVuY3Rpb24gUChlKXtyZXR1cm4gZTwxMD9cIjBcIitlLnRvU3RyaW5nKDEwKTplLnRvU3RyaW5nKDEwKX12YXIgTD1bXCJKYW5cIixcIkZlYlwiLFwiTWFyXCIsXCJBcHJcIixcIk1heVwiLFwiSnVuXCIsXCJKdWxcIixcIkF1Z1wiLFwiU2VwXCIsXCJPY3RcIixcIk5vdlwiLFwiRGVjXCJdO2Z1bmN0aW9uIE8oKXt2YXIgZT1uZXcgRGF0ZTt2YXIgdD1bUChlLmdldEhvdXJzKCkpLFAoZS5nZXRNaW51dGVzKCkpLFAoZS5nZXRTZWNvbmRzKCkpXS5qb2luKFwiOlwiKTtyZXR1cm5bZS5nZXREYXRlKCksTFtlLmdldE1vbnRoKCldLHRdLmpvaW4oXCIgXCIpfXUubG9nPWZ1bmN0aW9uKCl7Y29uc29sZS5sb2coXCIlcyAtICVzXCIsTygpLHUuZm9ybWF0LmFwcGx5KHUsYXJndW1lbnRzKSl9O3UuaW5oZXJpdHM9ZShcImluaGVyaXRzXCIpO3UuX2V4dGVuZD1mdW5jdGlvbihlLHQpe2lmKCF0fHwhUyh0KSlyZXR1cm4gZTt2YXIgdT1PYmplY3Qua2V5cyh0KTt2YXIgbj11Lmxlbmd0aDt3aGlsZShuLS0pe2VbdVtuXV09dFt1W25dXX1yZXR1cm4gZX07ZnVuY3Rpb24gaihlLHQpe3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSx0KX19KS5jYWxsKHRoaXMsZShcIl9wcm9jZXNzXCIpLHR5cGVvZiBnbG9iYWwhPT1cInVuZGVmaW5lZFwiP2dsb2JhbDp0eXBlb2Ygc2VsZiE9PVwidW5kZWZpbmVkXCI/c2VsZjp0eXBlb2Ygd2luZG93IT09XCJ1bmRlZmluZWRcIj93aW5kb3c6e30pfSx7XCIuL3N1cHBvcnQvaXNCdWZmZXJcIjoyNyxfcHJvY2VzczoyNixpbmhlcml0czoyNH1dLDI5OltmdW5jdGlvbihlLHQsdSl7KGZ1bmN0aW9uKHQpeyhmdW5jdGlvbigpe1widXNlIHN0cmljdFwiO3ZhciBuLHIsaSxvLHMsYSxsLGYsYyxwLEQsaCxtLGQsQSxDLEUsRixnLHksQix2LGIsUyx4LHcsXztzPWUoXCJlc3RyYXZlcnNlXCIpO2E9ZShcImVzdXRpbHNcIik7bj1zLlN5bnRheDtmdW5jdGlvbiBrKGUpe3JldHVybiB5ZS5FeHByZXNzaW9uLmhhc093blByb3BlcnR5KGUudHlwZSl9ZnVuY3Rpb24gSShlKXtyZXR1cm4geWUuU3RhdGVtZW50Lmhhc093blByb3BlcnR5KGUudHlwZSl9cj17U2VxdWVuY2U6MCxZaWVsZDoxLEF3YWl0OjEsQXNzaWdubWVudDoxLENvbmRpdGlvbmFsOjIsQXJyb3dGdW5jdGlvbjoyLExvZ2ljYWxPUjozLExvZ2ljYWxBTkQ6NCxCaXR3aXNlT1I6NSxCaXR3aXNlWE9SOjYsQml0d2lzZUFORDo3LEVxdWFsaXR5OjgsUmVsYXRpb25hbDo5LEJpdHdpc2VTSElGVDoxMCxBZGRpdGl2ZToxMSxNdWx0aXBsaWNhdGl2ZToxMixVbmFyeToxMyxQb3N0Zml4OjE0LENhbGw6MTUsTmV3OjE2LFRhZ2dlZFRlbXBsYXRlOjE3LE1lbWJlcjoxOCxQcmltYXJ5OjE5fTtpPXtcInx8XCI6ci5Mb2dpY2FsT1IsXCImJlwiOnIuTG9naWNhbEFORCxcInxcIjpyLkJpdHdpc2VPUixcIl5cIjpyLkJpdHdpc2VYT1IsXCImXCI6ci5CaXR3aXNlQU5ELFwiPT1cIjpyLkVxdWFsaXR5LFwiIT1cIjpyLkVxdWFsaXR5LFwiPT09XCI6ci5FcXVhbGl0eSxcIiE9PVwiOnIuRXF1YWxpdHksaXM6ci5FcXVhbGl0eSxpc250OnIuRXF1YWxpdHksXCI8XCI6ci5SZWxhdGlvbmFsLFwiPlwiOnIuUmVsYXRpb25hbCxcIjw9XCI6ci5SZWxhdGlvbmFsLFwiPj1cIjpyLlJlbGF0aW9uYWwsXCJpblwiOnIuUmVsYXRpb25hbCxcImluc3RhbmNlb2ZcIjpyLlJlbGF0aW9uYWwsXCI8PFwiOnIuQml0d2lzZVNISUZULFwiPj5cIjpyLkJpdHdpc2VTSElGVCxcIj4+PlwiOnIuQml0d2lzZVNISUZULFwiK1wiOnIuQWRkaXRpdmUsXCItXCI6ci5BZGRpdGl2ZSxcIipcIjpyLk11bHRpcGxpY2F0aXZlLFwiJVwiOnIuTXVsdGlwbGljYXRpdmUsXCIvXCI6ci5NdWx0aXBsaWNhdGl2ZX07dmFyIFA9MSxMPTE8PDEsTz0xPDwyLGo9MTw8MyxNPTE8PDQsUj0xPDw1O3ZhciBUPUx8TyxOPVB8TCxxPVB8THxPLFU9UCx6PU8sVz1QfE87dmFyIFY9UCxZPVB8UixHPTAsSz1QfE0sJD1QfGo7ZnVuY3Rpb24gSCgpe3JldHVybntpbmRlbnQ6bnVsbCxiYXNlOm51bGwscGFyc2U6bnVsbCxjb21tZW50OmZhbHNlLGZvcm1hdDp7aW5kZW50OntzdHlsZTpcIiAgICBcIixiYXNlOjAsYWRqdXN0TXVsdGlsaW5lQ29tbWVudDpmYWxzZX0sbmV3bGluZTpcIlxcblwiLHNwYWNlOlwiIFwiLGpzb246ZmFsc2UscmVudW1iZXI6ZmFsc2UsaGV4YWRlY2ltYWw6ZmFsc2UscXVvdGVzOlwic2luZ2xlXCIsZXNjYXBlbGVzczpmYWxzZSxjb21wYWN0OmZhbHNlLHBhcmVudGhlc2VzOnRydWUsc2VtaWNvbG9uczp0cnVlLHNhZmVDb25jYXRlbmF0aW9uOmZhbHNlLHByZXNlcnZlQmxhbmtMaW5lczpmYWxzZX0sbW96Ontjb21wcmVoZW5zaW9uRXhwcmVzc2lvblN0YXJ0c1dpdGhBc3NpZ25tZW50OmZhbHNlLHN0YXJsZXNzR2VuZXJhdG9yOmZhbHNlfSxzb3VyY2VNYXA6bnVsbCxzb3VyY2VNYXBSb290Om51bGwsc291cmNlTWFwV2l0aENvZGU6ZmFsc2UsZGlyZWN0aXZlOmZhbHNlLHJhdzp0cnVlLHZlcmJhdGltOm51bGwsc291cmNlQ29kZTpudWxsfX1mdW5jdGlvbiBKKGUsdCl7dmFyIHU9XCJcIjtmb3IodHw9MDt0PjA7dD4+Pj0xLGUrPWUpe2lmKHQmMSl7dSs9ZX19cmV0dXJuIHV9bD1BcnJheS5pc0FycmF5O2lmKCFsKXtsPWZ1bmN0aW9uIF9lKGUpe3JldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSk9PT1cIltvYmplY3QgQXJyYXldXCJ9fWZ1bmN0aW9uIFgoZSl7cmV0dXJuL1tcXHJcXG5dL2cudGVzdChlKX1mdW5jdGlvbiBaKGUpe3ZhciB0PWUubGVuZ3RoO3JldHVybiB0JiZhLmNvZGUuaXNMaW5lVGVybWluYXRvcihlLmNoYXJDb2RlQXQodC0xKSl9ZnVuY3Rpb24gUShlLHQpe3ZhciB1O2Zvcih1IGluIHQpe2lmKHQuaGFzT3duUHJvcGVydHkodSkpe2VbdV09dFt1XX19cmV0dXJuIGV9ZnVuY3Rpb24gZWUoZSx0KXt2YXIgdSxuO2Z1bmN0aW9uIHIoZSl7cmV0dXJuIHR5cGVvZiBlPT09XCJvYmplY3RcIiYmZSBpbnN0YW5jZW9mIE9iamVjdCYmIShlIGluc3RhbmNlb2YgUmVnRXhwKX1mb3IodSBpbiB0KXtpZih0Lmhhc093blByb3BlcnR5KHUpKXtuPXRbdV07aWYocihuKSl7aWYocihlW3VdKSl7ZWUoZVt1XSxuKX1lbHNle2VbdV09ZWUoe30sbil9fWVsc2V7ZVt1XT1ufX19cmV0dXJuIGV9ZnVuY3Rpb24gdGUoZSl7dmFyIHQsdSxuLHIsaTtpZihlIT09ZSl7dGhyb3cgbmV3IEVycm9yKFwiTnVtZXJpYyBsaXRlcmFsIHdob3NlIHZhbHVlIGlzIE5hTlwiKX1pZihlPDB8fGU9PT0wJiYxL2U8MCl7dGhyb3cgbmV3IEVycm9yKFwiTnVtZXJpYyBsaXRlcmFsIHdob3NlIHZhbHVlIGlzIG5lZ2F0aXZlXCIpfWlmKGU9PT0xLzApe3JldHVybiBwP1wibnVsbFwiOkQ/XCIxZTQwMFwiOlwiMWUrNDAwXCJ9dD1cIlwiK2U7aWYoIUR8fHQubGVuZ3RoPDMpe3JldHVybiB0fXU9dC5pbmRleE9mKFwiLlwiKTtpZighcCYmdC5jaGFyQ29kZUF0KDApPT09NDgmJnU9PT0xKXt1PTA7dD10LnNsaWNlKDEpfW49dDt0PXQucmVwbGFjZShcImUrXCIsXCJlXCIpO3I9MDtpZigoaT1uLmluZGV4T2YoXCJlXCIpKT4wKXtyPStuLnNsaWNlKGkrMSk7bj1uLnNsaWNlKDAsaSl9aWYodT49MCl7ci09bi5sZW5ndGgtdS0xO249KyhuLnNsaWNlKDAsdSkrbi5zbGljZSh1KzEpKStcIlwifWk9MDt3aGlsZShuLmNoYXJDb2RlQXQobi5sZW5ndGgraS0xKT09PTQ4KXstLWl9aWYoaSE9PTApe3ItPWk7bj1uLnNsaWNlKDAsaSl9aWYociE9PTApe24rPVwiZVwiK3J9aWYoKG4ubGVuZ3RoPHQubGVuZ3RofHxoJiZlPjFlMTImJk1hdGguZmxvb3IoZSk9PT1lJiYobj1cIjB4XCIrZS50b1N0cmluZygxNikpLmxlbmd0aDx0Lmxlbmd0aCkmJituPT09ZSl7dD1ufXJldHVybiB0fWZ1bmN0aW9uIHVlKGUsdCl7aWYoKGUmfjEpPT09ODIzMil7cmV0dXJuKHQ/XCJ1XCI6XCJcXFxcdVwiKSsoZT09PTgyMzI/XCIyMDI4XCI6XCIyMDI5XCIpfWVsc2UgaWYoZT09PTEwfHxlPT09MTMpe3JldHVybih0P1wiXCI6XCJcXFxcXCIpKyhlPT09MTA/XCJuXCI6XCJyXCIpfXJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKGUpfWZ1bmN0aW9uIG5lKGUpe3ZhciB0LHUsbixyLGksbyxzLGE7dT1lLnRvU3RyaW5nKCk7aWYoZS5zb3VyY2Upe3Q9dS5tYXRjaCgvXFwvKFteXFwvXSopJC8pO2lmKCF0KXtyZXR1cm4gdX1uPXRbMV07dT1cIlwiO3M9ZmFsc2U7YT1mYWxzZTtmb3Iocj0wLGk9ZS5zb3VyY2UubGVuZ3RoO3I8aTsrK3Ipe289ZS5zb3VyY2UuY2hhckNvZGVBdChyKTtpZighYSl7aWYocyl7aWYobz09PTkzKXtzPWZhbHNlfX1lbHNle2lmKG89PT00Nyl7dSs9XCJcXFxcXCJ9ZWxzZSBpZihvPT09OTEpe3M9dHJ1ZX19dSs9dWUobyxhKTthPW89PT05Mn1lbHNle3UrPXVlKG8sYSk7YT1mYWxzZX19cmV0dXJuXCIvXCIrdStcIi9cIitufXJldHVybiB1fWZ1bmN0aW9uIHJlKGUsdCl7dmFyIHU7aWYoZT09PTgpe3JldHVyblwiXFxcXGJcIn1pZihlPT09MTIpe3JldHVyblwiXFxcXGZcIn1pZihlPT09OSl7cmV0dXJuXCJcXFxcdFwifXU9ZS50b1N0cmluZygxNikudG9VcHBlckNhc2UoKTtpZihwfHxlPjI1NSl7cmV0dXJuXCJcXFxcdVwiK1wiMDAwMFwiLnNsaWNlKHUubGVuZ3RoKSt1fWVsc2UgaWYoZT09PTAmJiFhLmNvZGUuaXNEZWNpbWFsRGlnaXQodCkpe3JldHVyblwiXFxcXDBcIn1lbHNlIGlmKGU9PT0xMSl7cmV0dXJuXCJcXFxceDBCXCJ9ZWxzZXtyZXR1cm5cIlxcXFx4XCIrXCIwMFwiLnNsaWNlKHUubGVuZ3RoKSt1fX1mdW5jdGlvbiBpZShlKXtpZihlPT09OTIpe3JldHVyblwiXFxcXFxcXFxcIn1pZihlPT09MTApe3JldHVyblwiXFxcXG5cIn1pZihlPT09MTMpe3JldHVyblwiXFxcXHJcIn1pZihlPT09ODIzMil7cmV0dXJuXCJcXFxcdTIwMjhcIn1pZihlPT09ODIzMyl7cmV0dXJuXCJcXFxcdTIwMjlcIn10aHJvdyBuZXcgRXJyb3IoXCJJbmNvcnJlY3RseSBjbGFzc2lmaWVkIGNoYXJhY3RlclwiKX1mdW5jdGlvbiBvZShlKXt2YXIgdCx1LG4scjtyPW09PT1cImRvdWJsZVwiPydcIic6XCInXCI7Zm9yKHQ9MCx1PWUubGVuZ3RoO3Q8dTsrK3Qpe249ZS5jaGFyQ29kZUF0KHQpO2lmKG49PT0zOSl7cj0nXCInO2JyZWFrfWVsc2UgaWYobj09PTM0KXtyPVwiJ1wiO2JyZWFrfWVsc2UgaWYobj09PTkyKXsrK3R9fXJldHVybiByK2Urcn1mdW5jdGlvbiBzZShlKXt2YXIgdD1cIlwiLHUsbixyLGk9MCxvPTAscyxsO2Zvcih1PTAsbj1lLmxlbmd0aDt1PG47Kyt1KXtyPWUuY2hhckNvZGVBdCh1KTtpZihyPT09MzkpeysraX1lbHNlIGlmKHI9PT0zNCl7KytvfWVsc2UgaWYocj09PTQ3JiZwKXt0Kz1cIlxcXFxcIn1lbHNlIGlmKGEuY29kZS5pc0xpbmVUZXJtaW5hdG9yKHIpfHxyPT09OTIpe3QrPWllKHIpO2NvbnRpbnVlfWVsc2UgaWYoIWEuY29kZS5pc0lkZW50aWZpZXJQYXJ0RVM1KHIpJiYocCYmcjwzMnx8IXAmJiFkJiYocjwzMnx8cj4xMjYpKSl7dCs9cmUocixlLmNoYXJDb2RlQXQodSsxKSk7Y29udGludWV9dCs9U3RyaW5nLmZyb21DaGFyQ29kZShyKX1zPSEobT09PVwiZG91YmxlXCJ8fG09PT1cImF1dG9cIiYmbzxpKTtsPXM/XCInXCI6J1wiJztpZighKHM/aTpvKSl7cmV0dXJuIGwrdCtsfWU9dDt0PWw7Zm9yKHU9MCxuPWUubGVuZ3RoO3U8bjsrK3Upe3I9ZS5jaGFyQ29kZUF0KHUpO2lmKHI9PT0zOSYmc3x8cj09PTM0JiYhcyl7dCs9XCJcXFxcXCJ9dCs9U3RyaW5nLmZyb21DaGFyQ29kZShyKX1yZXR1cm4gdCtsfWZ1bmN0aW9uIGFlKGUpe3ZhciB0LHUsbixyPVwiXCI7Zm9yKHQ9MCx1PWUubGVuZ3RoO3Q8dTsrK3Qpe249ZVt0XTtyKz1sKG4pP2FlKG4pOm59cmV0dXJuIHJ9ZnVuY3Rpb24gbGUoZSx0KXtpZighYil7aWYobChlKSl7cmV0dXJuIGFlKGUpfWVsc2V7cmV0dXJuIGV9fWlmKHQ9PW51bGwpe2lmKGUgaW5zdGFuY2VvZiBvKXtyZXR1cm4gZX1lbHNle3Q9e319fWlmKHQubG9jPT1udWxsKXtyZXR1cm4gbmV3IG8obnVsbCxudWxsLGIsZSx0Lm5hbWV8fG51bGwpfXJldHVybiBuZXcgbyh0LmxvYy5zdGFydC5saW5lLHQubG9jLnN0YXJ0LmNvbHVtbixiPT09dHJ1ZT90LmxvYy5zb3VyY2V8fG51bGw6YixlLHQubmFtZXx8bnVsbCl9ZnVuY3Rpb24gZmUoKXtyZXR1cm4gQz9DOlwiIFwifWZ1bmN0aW9uIGNlKGUsdCl7dmFyIHUsbixyLGk7dT1sZShlKS50b1N0cmluZygpO2lmKHUubGVuZ3RoPT09MCl7cmV0dXJuW3RdfW49bGUodCkudG9TdHJpbmcoKTtpZihuLmxlbmd0aD09PTApe3JldHVybltlXX1yPXUuY2hhckNvZGVBdCh1Lmxlbmd0aC0xKTtpPW4uY2hhckNvZGVBdCgwKTtpZigocj09PTQzfHxyPT09NDUpJiZyPT09aXx8YS5jb2RlLmlzSWRlbnRpZmllclBhcnRFUzUocikmJmEuY29kZS5pc0lkZW50aWZpZXJQYXJ0RVM1KGkpfHxyPT09NDcmJmk9PT0xMDUpe3JldHVybltlLGZlKCksdF19ZWxzZSBpZihhLmNvZGUuaXNXaGl0ZVNwYWNlKHIpfHxhLmNvZGUuaXNMaW5lVGVybWluYXRvcihyKXx8YS5jb2RlLmlzV2hpdGVTcGFjZShpKXx8YS5jb2RlLmlzTGluZVRlcm1pbmF0b3IoaSkpe3JldHVybltlLHRdfXJldHVybltlLEMsdF19ZnVuY3Rpb24gcGUoZSl7cmV0dXJuW2YsZV19ZnVuY3Rpb24gRGUoZSl7dmFyIHQ7dD1mO2YrPWM7ZShmKTtmPXR9ZnVuY3Rpb24gaGUoZSl7dmFyIHQ7Zm9yKHQ9ZS5sZW5ndGgtMTt0Pj0wOy0tdCl7aWYoYS5jb2RlLmlzTGluZVRlcm1pbmF0b3IoZS5jaGFyQ29kZUF0KHQpKSl7YnJlYWt9fXJldHVybiBlLmxlbmd0aC0xLXR9ZnVuY3Rpb24gbWUoZSx0KXt2YXIgdSxuLHIsaSxvLHMsbCxjO3U9ZS5zcGxpdCgvXFxyXFxufFtcXHJcXG5dLyk7cz1OdW1iZXIuTUFYX1ZBTFVFO2ZvcihuPTEscj11Lmxlbmd0aDtuPHI7KytuKXtpPXVbbl07bz0wO3doaWxlKG88aS5sZW5ndGgmJmEuY29kZS5pc1doaXRlU3BhY2UoaS5jaGFyQ29kZUF0KG8pKSl7KytvfWlmKHM+byl7cz1vfX1pZih0eXBlb2YgdCE9PVwidW5kZWZpbmVkXCIpe2w9ZjtpZih1WzFdW3NdPT09XCIqXCIpe3QrPVwiIFwifWY9dH1lbHNle2lmKHMmMSl7LS1zfWw9Zn1mb3Iobj0xLHI9dS5sZW5ndGg7bjxyOysrbil7Yz1sZShwZSh1W25dLnNsaWNlKHMpKSk7dVtuXT1iP2Muam9pbihcIlwiKTpjfWY9bDtyZXR1cm4gdS5qb2luKFwiXFxuXCIpfWZ1bmN0aW9uIGRlKGUsdCl7aWYoZS50eXBlPT09XCJMaW5lXCIpe2lmKFooZS52YWx1ZSkpe3JldHVyblwiLy9cIitlLnZhbHVlfWVsc2V7dmFyIHU9XCIvL1wiK2UudmFsdWU7aWYoIXgpe3UrPVwiXFxuXCJ9cmV0dXJuIHV9fWlmKEIuZm9ybWF0LmluZGVudC5hZGp1c3RNdWx0aWxpbmVDb21tZW50JiYvW1xcblxccl0vLnRlc3QoZS52YWx1ZSkpe3JldHVybiBtZShcIi8qXCIrZS52YWx1ZStcIiovXCIsdCl9cmV0dXJuXCIvKlwiK2UudmFsdWUrXCIqL1wifWZ1bmN0aW9uIEFlKGUsdCl7dmFyIHUscixpLG8scyxhLGwscCxELGgsbSxkLEEsQztpZihlLmxlYWRpbmdDb21tZW50cyYmZS5sZWFkaW5nQ29tbWVudHMubGVuZ3RoPjApe289dDtpZih4KXtpPWUubGVhZGluZ0NvbW1lbnRzWzBdO3Q9W107cD1pLmV4dGVuZGVkUmFuZ2U7RD1pLnJhbmdlO209Uy5zdWJzdHJpbmcocFswXSxEWzBdKTtDPShtLm1hdGNoKC9cXG4vZyl8fFtdKS5sZW5ndGg7aWYoQz4wKXt0LnB1c2goSihcIlxcblwiLEMpKTt0LnB1c2gocGUoZGUoaSkpKX1lbHNle3QucHVzaChtKTt0LnB1c2goZGUoaSkpfWg9RDtmb3IodT0xLHI9ZS5sZWFkaW5nQ29tbWVudHMubGVuZ3RoO3U8cjt1Kyspe2k9ZS5sZWFkaW5nQ29tbWVudHNbdV07RD1pLnJhbmdlO2Q9Uy5zdWJzdHJpbmcoaFsxXSxEWzBdKTtDPShkLm1hdGNoKC9cXG4vZyl8fFtdKS5sZW5ndGg7dC5wdXNoKEooXCJcXG5cIixDKSk7dC5wdXNoKHBlKGRlKGkpKSk7aD1EfUE9Uy5zdWJzdHJpbmcoRFsxXSxwWzFdKTtDPShBLm1hdGNoKC9cXG4vZyl8fFtdKS5sZW5ndGg7dC5wdXNoKEooXCJcXG5cIixDKSl9ZWxzZXtpPWUubGVhZGluZ0NvbW1lbnRzWzBdO3Q9W107aWYoZyYmZS50eXBlPT09bi5Qcm9ncmFtJiZlLmJvZHkubGVuZ3RoPT09MCl7dC5wdXNoKFwiXFxuXCIpfXQucHVzaChkZShpKSk7aWYoIVoobGUodCkudG9TdHJpbmcoKSkpe3QucHVzaChcIlxcblwiKX1mb3IodT0xLHI9ZS5sZWFkaW5nQ29tbWVudHMubGVuZ3RoO3U8cjsrK3Upe2k9ZS5sZWFkaW5nQ29tbWVudHNbdV07bD1bZGUoaSldO1xuaWYoIVoobGUobCkudG9TdHJpbmcoKSkpe2wucHVzaChcIlxcblwiKX10LnB1c2gocGUobCkpfX10LnB1c2gocGUobykpfWlmKGUudHJhaWxpbmdDb21tZW50cyl7aWYoeCl7aT1lLnRyYWlsaW5nQ29tbWVudHNbMF07cD1pLmV4dGVuZGVkUmFuZ2U7RD1pLnJhbmdlO209Uy5zdWJzdHJpbmcocFswXSxEWzBdKTtDPShtLm1hdGNoKC9cXG4vZyl8fFtdKS5sZW5ndGg7aWYoQz4wKXt0LnB1c2goSihcIlxcblwiLEMpKTt0LnB1c2gocGUoZGUoaSkpKX1lbHNle3QucHVzaChtKTt0LnB1c2goZGUoaSkpfX1lbHNle3M9IVoobGUodCkudG9TdHJpbmcoKSk7YT1KKFwiIFwiLGhlKGxlKFtmLHQsY10pLnRvU3RyaW5nKCkpKTtmb3IodT0wLHI9ZS50cmFpbGluZ0NvbW1lbnRzLmxlbmd0aDt1PHI7Kyt1KXtpPWUudHJhaWxpbmdDb21tZW50c1t1XTtpZihzKXtpZih1PT09MCl7dD1bdCxjXX1lbHNle3Q9W3QsYV19dC5wdXNoKGRlKGksYSkpfWVsc2V7dD1bdCxwZShkZShpKSldfWlmKHUhPT1yLTEmJiFaKGxlKHQpLnRvU3RyaW5nKCkpKXt0PVt0LFwiXFxuXCJdfX19fXJldHVybiB0fWZ1bmN0aW9uIENlKGUsdCx1KXt2YXIgbixyPTA7Zm9yKG49ZTtuPHQ7bisrKXtpZihTW25dPT09XCJcXG5cIil7cisrfX1mb3Iobj0xO248cjtuKyspe3UucHVzaChBKX19ZnVuY3Rpb24gRWUoZSx0LHUpe2lmKHQ8dSl7cmV0dXJuW1wiKFwiLGUsXCIpXCJdfXJldHVybiBlfWZ1bmN0aW9uIEZlKGUpe3ZhciB0LHUsbjtuPWUuc3BsaXQoL1xcclxcbnxcXG4vKTtmb3IodD0xLHU9bi5sZW5ndGg7dDx1O3QrKyl7blt0XT1BK2Yrblt0XX1yZXR1cm4gbn1mdW5jdGlvbiBnZShlLHQpe3ZhciB1LG4saTt1PWVbQi52ZXJiYXRpbV07aWYodHlwZW9mIHU9PT1cInN0cmluZ1wiKXtuPUVlKEZlKHUpLHIuU2VxdWVuY2UsdCl9ZWxzZXtuPUZlKHUuY29udGVudCk7aT11LnByZWNlZGVuY2UhPW51bGw/dS5wcmVjZWRlbmNlOnIuU2VxdWVuY2U7bj1FZShuLGksdCl9cmV0dXJuIGxlKG4sZSl9ZnVuY3Rpb24geWUoKXt9eWUucHJvdG90eXBlLm1heWJlQmxvY2s9ZnVuY3Rpb24oZSx0KXt2YXIgdSxyLGk9dGhpcztyPSFCLmNvbW1lbnR8fCFlLmxlYWRpbmdDb21tZW50cztpZihlLnR5cGU9PT1uLkJsb2NrU3RhdGVtZW50JiZyKXtyZXR1cm5bQyx0aGlzLmdlbmVyYXRlU3RhdGVtZW50KGUsdCldfWlmKGUudHlwZT09PW4uRW1wdHlTdGF0ZW1lbnQmJnIpe3JldHVyblwiO1wifURlKGZ1bmN0aW9uKCl7dT1bQSxwZShpLmdlbmVyYXRlU3RhdGVtZW50KGUsdCkpXX0pO3JldHVybiB1fTt5ZS5wcm90b3R5cGUubWF5YmVCbG9ja1N1ZmZpeD1mdW5jdGlvbihlLHQpe3ZhciB1PVoobGUodCkudG9TdHJpbmcoKSk7aWYoZS50eXBlPT09bi5CbG9ja1N0YXRlbWVudCYmKCFCLmNvbW1lbnR8fCFlLmxlYWRpbmdDb21tZW50cykmJiF1KXtyZXR1cm5bdCxDXX1pZih1KXtyZXR1cm5bdCxmXX1yZXR1cm5bdCxBLGZdfTtmdW5jdGlvbiBCZShlKXtyZXR1cm4gbGUoZS5uYW1lLGUpfWZ1bmN0aW9uIHZlKGUsdCl7cmV0dXJuIGUuYXN5bmM/XCJhc3luY1wiKyh0P2ZlKCk6Qyk6XCJcIn1mdW5jdGlvbiBiZShlKXt2YXIgdD1lLmdlbmVyYXRvciYmIUIubW96LnN0YXJsZXNzR2VuZXJhdG9yO3JldHVybiB0P1wiKlwiK0M6XCJcIn1mdW5jdGlvbiBTZShlKXt2YXIgdD1lLnZhbHVlO2lmKHQuYXN5bmMpe3JldHVybiB2ZSh0LCFlLmNvbXB1dGVkKX1lbHNle3JldHVybiBiZSh0KT9cIipcIjpcIlwifX15ZS5wcm90b3R5cGUuZ2VuZXJhdGVQYXR0ZXJuPWZ1bmN0aW9uKGUsdCx1KXtpZihlLnR5cGU9PT1uLklkZW50aWZpZXIpe3JldHVybiBCZShlKX1yZXR1cm4gdGhpcy5nZW5lcmF0ZUV4cHJlc3Npb24oZSx0LHUpfTt5ZS5wcm90b3R5cGUuZ2VuZXJhdGVGdW5jdGlvblBhcmFtcz1mdW5jdGlvbihlKXt2YXIgdCx1LGksbztvPWZhbHNlO2lmKGUudHlwZT09PW4uQXJyb3dGdW5jdGlvbkV4cHJlc3Npb24mJiFlLnJlc3QmJighZS5kZWZhdWx0c3x8ZS5kZWZhdWx0cy5sZW5ndGg9PT0wKSYmZS5wYXJhbXMubGVuZ3RoPT09MSYmZS5wYXJhbXNbMF0udHlwZT09PW4uSWRlbnRpZmllcil7aT1bdmUoZSx0cnVlKSxCZShlLnBhcmFtc1swXSldfWVsc2V7aT1lLnR5cGU9PT1uLkFycm93RnVuY3Rpb25FeHByZXNzaW9uP1t2ZShlLGZhbHNlKV06W107aS5wdXNoKFwiKFwiKTtpZihlLmRlZmF1bHRzKXtvPXRydWV9Zm9yKHQ9MCx1PWUucGFyYW1zLmxlbmd0aDt0PHU7Kyt0KXtpZihvJiZlLmRlZmF1bHRzW3RdKXtpLnB1c2godGhpcy5nZW5lcmF0ZUFzc2lnbm1lbnQoZS5wYXJhbXNbdF0sZS5kZWZhdWx0c1t0XSxcIj1cIixyLkFzc2lnbm1lbnQscSkpfWVsc2V7aS5wdXNoKHRoaXMuZ2VuZXJhdGVQYXR0ZXJuKGUucGFyYW1zW3RdLHIuQXNzaWdubWVudCxxKSl9aWYodCsxPHUpe2kucHVzaChcIixcIitDKX19aWYoZS5yZXN0KXtpZihlLnBhcmFtcy5sZW5ndGgpe2kucHVzaChcIixcIitDKX1pLnB1c2goXCIuLi5cIik7aS5wdXNoKEJlKGUucmVzdCkpfWkucHVzaChcIilcIil9cmV0dXJuIGl9O3llLnByb3RvdHlwZS5nZW5lcmF0ZUZ1bmN0aW9uQm9keT1mdW5jdGlvbihlKXt2YXIgdCx1O3Q9dGhpcy5nZW5lcmF0ZUZ1bmN0aW9uUGFyYW1zKGUpO2lmKGUudHlwZT09PW4uQXJyb3dGdW5jdGlvbkV4cHJlc3Npb24pe3QucHVzaChDKTt0LnB1c2goXCI9PlwiKX1pZihlLmV4cHJlc3Npb24pe3QucHVzaChDKTt1PXRoaXMuZ2VuZXJhdGVFeHByZXNzaW9uKGUuYm9keSxyLkFzc2lnbm1lbnQscSk7aWYodS50b1N0cmluZygpLmNoYXJBdCgwKT09PVwie1wiKXt1PVtcIihcIix1LFwiKVwiXX10LnB1c2godSl9ZWxzZXt0LnB1c2godGhpcy5tYXliZUJsb2NrKGUuYm9keSwkKSl9cmV0dXJuIHR9O3llLnByb3RvdHlwZS5nZW5lcmF0ZUl0ZXJhdGlvbkZvclN0YXRlbWVudD1mdW5jdGlvbihlLHQsdSl7dmFyIGk9W1wiZm9yXCIrQytcIihcIl0sbz10aGlzO0RlKGZ1bmN0aW9uKCl7aWYodC5sZWZ0LnR5cGU9PT1uLlZhcmlhYmxlRGVjbGFyYXRpb24pe0RlKGZ1bmN0aW9uKCl7aS5wdXNoKHQubGVmdC5raW5kK2ZlKCkpO2kucHVzaChvLmdlbmVyYXRlU3RhdGVtZW50KHQubGVmdC5kZWNsYXJhdGlvbnNbMF0sRykpfSl9ZWxzZXtpLnB1c2goby5nZW5lcmF0ZUV4cHJlc3Npb24odC5sZWZ0LHIuQ2FsbCxxKSl9aT1jZShpLGUpO2k9W2NlKGksby5nZW5lcmF0ZUV4cHJlc3Npb24odC5yaWdodCxyLlNlcXVlbmNlLHEpKSxcIilcIl19KTtpLnB1c2godGhpcy5tYXliZUJsb2NrKHQuYm9keSx1KSk7cmV0dXJuIGl9O3llLnByb3RvdHlwZS5nZW5lcmF0ZVByb3BlcnR5S2V5PWZ1bmN0aW9uKGUsdCl7dmFyIHU9W107aWYodCl7dS5wdXNoKFwiW1wiKX11LnB1c2godGhpcy5nZW5lcmF0ZUV4cHJlc3Npb24oZSxyLlNlcXVlbmNlLHEpKTtpZih0KXt1LnB1c2goXCJdXCIpfXJldHVybiB1fTt5ZS5wcm90b3R5cGUuZ2VuZXJhdGVBc3NpZ25tZW50PWZ1bmN0aW9uKGUsdCx1LG4saSl7aWYoci5Bc3NpZ25tZW50PG4pe2l8PVB9cmV0dXJuIEVlKFt0aGlzLmdlbmVyYXRlRXhwcmVzc2lvbihlLHIuQ2FsbCxpKSxDK3UrQyx0aGlzLmdlbmVyYXRlRXhwcmVzc2lvbih0LHIuQXNzaWdubWVudCxpKV0sci5Bc3NpZ25tZW50LG4pfTt5ZS5wcm90b3R5cGUuc2VtaWNvbG9uPWZ1bmN0aW9uKGUpe2lmKCFGJiZlJlIpe3JldHVyblwiXCJ9cmV0dXJuXCI7XCJ9O3llLlN0YXRlbWVudD17QmxvY2tTdGF0ZW1lbnQ6ZnVuY3Rpb24oZSx0KXt2YXIgdSxuLHI9W1wie1wiLEFdLGk9dGhpcztEZShmdW5jdGlvbigpe2lmKGUuYm9keS5sZW5ndGg9PT0wJiZ4KXt1PWUucmFuZ2U7aWYodVsxXS11WzBdPjIpe249Uy5zdWJzdHJpbmcodVswXSsxLHVbMV0tMSk7aWYoblswXT09PVwiXFxuXCIpe3I9W1wie1wiXX1yLnB1c2gobil9fXZhciBvLHMsYSxsO2w9VjtpZih0Jmope2x8PU19Zm9yKG89MCxzPWUuYm9keS5sZW5ndGg7bzxzOysrbyl7aWYoeCl7aWYobz09PTApe2lmKGUuYm9keVswXS5sZWFkaW5nQ29tbWVudHMpe3U9ZS5ib2R5WzBdLmxlYWRpbmdDb21tZW50c1swXS5leHRlbmRlZFJhbmdlO249Uy5zdWJzdHJpbmcodVswXSx1WzFdKTtpZihuWzBdPT09XCJcXG5cIil7cj1bXCJ7XCJdfX1pZighZS5ib2R5WzBdLmxlYWRpbmdDb21tZW50cyl7Q2UoZS5yYW5nZVswXSxlLmJvZHlbMF0ucmFuZ2VbMF0scil9fWlmKG8+MCl7aWYoIWUuYm9keVtvLTFdLnRyYWlsaW5nQ29tbWVudHMmJiFlLmJvZHlbb10ubGVhZGluZ0NvbW1lbnRzKXtDZShlLmJvZHlbby0xXS5yYW5nZVsxXSxlLmJvZHlbb10ucmFuZ2VbMF0scil9fX1pZihvPT09cy0xKXtsfD1SfWlmKGUuYm9keVtvXS5sZWFkaW5nQ29tbWVudHMmJngpe2E9aS5nZW5lcmF0ZVN0YXRlbWVudChlLmJvZHlbb10sbCl9ZWxzZXthPXBlKGkuZ2VuZXJhdGVTdGF0ZW1lbnQoZS5ib2R5W29dLGwpKX1yLnB1c2goYSk7aWYoIVoobGUoYSkudG9TdHJpbmcoKSkpe2lmKHgmJm88cy0xKXtpZighZS5ib2R5W28rMV0ubGVhZGluZ0NvbW1lbnRzKXtyLnB1c2goQSl9fWVsc2V7ci5wdXNoKEEpfX1pZih4KXtpZihvPT09cy0xKXtpZighZS5ib2R5W29dLnRyYWlsaW5nQ29tbWVudHMpe0NlKGUuYm9keVtvXS5yYW5nZVsxXSxlLnJhbmdlWzFdLHIpfX19fX0pO3IucHVzaChwZShcIn1cIikpO3JldHVybiByfSxCcmVha1N0YXRlbWVudDpmdW5jdGlvbihlLHQpe2lmKGUubGFiZWwpe3JldHVyblwiYnJlYWsgXCIrZS5sYWJlbC5uYW1lK3RoaXMuc2VtaWNvbG9uKHQpfXJldHVyblwiYnJlYWtcIit0aGlzLnNlbWljb2xvbih0KX0sQ29udGludWVTdGF0ZW1lbnQ6ZnVuY3Rpb24oZSx0KXtpZihlLmxhYmVsKXtyZXR1cm5cImNvbnRpbnVlIFwiK2UubGFiZWwubmFtZSt0aGlzLnNlbWljb2xvbih0KX1yZXR1cm5cImNvbnRpbnVlXCIrdGhpcy5zZW1pY29sb24odCl9LENsYXNzQm9keTpmdW5jdGlvbihlLHQpe3ZhciB1PVtcIntcIixBXSxuPXRoaXM7RGUoZnVuY3Rpb24odCl7dmFyIGksbztmb3IoaT0wLG89ZS5ib2R5Lmxlbmd0aDtpPG87KytpKXt1LnB1c2godCk7dS5wdXNoKG4uZ2VuZXJhdGVFeHByZXNzaW9uKGUuYm9keVtpXSxyLlNlcXVlbmNlLHEpKTtpZihpKzE8byl7dS5wdXNoKEEpfX19KTtpZighWihsZSh1KS50b1N0cmluZygpKSl7dS5wdXNoKEEpfXUucHVzaChmKTt1LnB1c2goXCJ9XCIpO3JldHVybiB1fSxDbGFzc0RlY2xhcmF0aW9uOmZ1bmN0aW9uKGUsdCl7dmFyIHUsbjt1PVtcImNsYXNzIFwiK2UuaWQubmFtZV07aWYoZS5zdXBlckNsYXNzKXtuPWNlKFwiZXh0ZW5kc1wiLHRoaXMuZ2VuZXJhdGVFeHByZXNzaW9uKGUuc3VwZXJDbGFzcyxyLkFzc2lnbm1lbnQscSkpO3U9Y2UodSxuKX11LnB1c2goQyk7dS5wdXNoKHRoaXMuZ2VuZXJhdGVTdGF0ZW1lbnQoZS5ib2R5LFkpKTtyZXR1cm4gdX0sRGlyZWN0aXZlU3RhdGVtZW50OmZ1bmN0aW9uKGUsdCl7aWYoQi5yYXcmJmUucmF3KXtyZXR1cm4gZS5yYXcrdGhpcy5zZW1pY29sb24odCl9cmV0dXJuIG9lKGUuZGlyZWN0aXZlKSt0aGlzLnNlbWljb2xvbih0KX0sRG9XaGlsZVN0YXRlbWVudDpmdW5jdGlvbihlLHQpe3ZhciB1PWNlKFwiZG9cIix0aGlzLm1heWJlQmxvY2soZS5ib2R5LFYpKTt1PXRoaXMubWF5YmVCbG9ja1N1ZmZpeChlLmJvZHksdSk7cmV0dXJuIGNlKHUsW1wid2hpbGVcIitDK1wiKFwiLHRoaXMuZ2VuZXJhdGVFeHByZXNzaW9uKGUudGVzdCxyLlNlcXVlbmNlLHEpLFwiKVwiK3RoaXMuc2VtaWNvbG9uKHQpXSl9LENhdGNoQ2xhdXNlOmZ1bmN0aW9uKGUsdCl7dmFyIHUsbj10aGlzO0RlKGZ1bmN0aW9uKCl7dmFyIHQ7dT1bXCJjYXRjaFwiK0MrXCIoXCIsbi5nZW5lcmF0ZUV4cHJlc3Npb24oZS5wYXJhbSxyLlNlcXVlbmNlLHEpLFwiKVwiXTtpZihlLmd1YXJkKXt0PW4uZ2VuZXJhdGVFeHByZXNzaW9uKGUuZ3VhcmQsci5TZXF1ZW5jZSxxKTt1LnNwbGljZSgyLDAsXCIgaWYgXCIsdCl9fSk7dS5wdXNoKHRoaXMubWF5YmVCbG9jayhlLmJvZHksVikpO3JldHVybiB1fSxEZWJ1Z2dlclN0YXRlbWVudDpmdW5jdGlvbihlLHQpe3JldHVyblwiZGVidWdnZXJcIit0aGlzLnNlbWljb2xvbih0KX0sRW1wdHlTdGF0ZW1lbnQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm5cIjtcIn0sRXhwb3J0RGVjbGFyYXRpb246ZnVuY3Rpb24oZSx0KXt2YXIgdT1bXCJleHBvcnRcIl0saSxvPXRoaXM7aT10JlI/WTpWO2lmKGVbXCJkZWZhdWx0XCJdKXt1PWNlKHUsXCJkZWZhdWx0XCIpO2lmKEkoZS5kZWNsYXJhdGlvbikpe3U9Y2UodSx0aGlzLmdlbmVyYXRlU3RhdGVtZW50KGUuZGVjbGFyYXRpb24saSkpfWVsc2V7dT1jZSh1LHRoaXMuZ2VuZXJhdGVFeHByZXNzaW9uKGUuZGVjbGFyYXRpb24sci5Bc3NpZ25tZW50LHEpK3RoaXMuc2VtaWNvbG9uKHQpKX1yZXR1cm4gdX1pZihlLmRlY2xhcmF0aW9uKXtyZXR1cm4gY2UodSx0aGlzLmdlbmVyYXRlU3RhdGVtZW50KGUuZGVjbGFyYXRpb24saSkpfWlmKGUuc3BlY2lmaWVycyl7aWYoZS5zcGVjaWZpZXJzLmxlbmd0aD09PTApe3U9Y2UodSxcIntcIitDK1wifVwiKX1lbHNlIGlmKGUuc3BlY2lmaWVyc1swXS50eXBlPT09bi5FeHBvcnRCYXRjaFNwZWNpZmllcil7dT1jZSh1LHRoaXMuZ2VuZXJhdGVFeHByZXNzaW9uKGUuc3BlY2lmaWVyc1swXSxyLlNlcXVlbmNlLHEpKX1lbHNle3U9Y2UodSxcIntcIik7RGUoZnVuY3Rpb24odCl7dmFyIG4saTt1LnB1c2goQSk7Zm9yKG49MCxpPWUuc3BlY2lmaWVycy5sZW5ndGg7bjxpOysrbil7dS5wdXNoKHQpO3UucHVzaChvLmdlbmVyYXRlRXhwcmVzc2lvbihlLnNwZWNpZmllcnNbbl0sci5TZXF1ZW5jZSxxKSk7aWYobisxPGkpe3UucHVzaChcIixcIitBKX19fSk7aWYoIVoobGUodSkudG9TdHJpbmcoKSkpe3UucHVzaChBKX11LnB1c2goZitcIn1cIil9aWYoZS5zb3VyY2Upe3U9Y2UodSxbXCJmcm9tXCIrQyx0aGlzLmdlbmVyYXRlRXhwcmVzc2lvbihlLnNvdXJjZSxyLlNlcXVlbmNlLHEpLHRoaXMuc2VtaWNvbG9uKHQpXSl9ZWxzZXt1LnB1c2godGhpcy5zZW1pY29sb24odCkpfX1yZXR1cm4gdX0sRXhwb3J0RGVmYXVsdERlY2xhcmF0aW9uOmZ1bmN0aW9uKGUsdCl7ZS5kZWZhdWx0PXRydWU7cmV0dXJuIHRoaXMuRXhwb3J0RGVjbGFyYXRpb24oZSx0KX0sRXhwb3J0TmFtZWREZWNsYXJhdGlvbjpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLkV4cG9ydERlY2xhcmF0aW9uKGUsdCl9LEV4cHJlc3Npb25TdGF0ZW1lbnQ6ZnVuY3Rpb24oZSx0KXt2YXIgdSxpO2Z1bmN0aW9uIG8oZSl7dmFyIHQ7aWYoZS5zbGljZSgwLDUpIT09XCJjbGFzc1wiKXtyZXR1cm4gZmFsc2V9dD1lLmNoYXJDb2RlQXQoNSk7cmV0dXJuIHQ9PT0xMjN8fGEuY29kZS5pc1doaXRlU3BhY2UodCl8fGEuY29kZS5pc0xpbmVUZXJtaW5hdG9yKHQpfWZ1bmN0aW9uIHMoZSl7dmFyIHQ7aWYoZS5zbGljZSgwLDgpIT09XCJmdW5jdGlvblwiKXtyZXR1cm4gZmFsc2V9dD1lLmNoYXJDb2RlQXQoOCk7cmV0dXJuIHQ9PT00MHx8YS5jb2RlLmlzV2hpdGVTcGFjZSh0KXx8dD09PTQyfHxhLmNvZGUuaXNMaW5lVGVybWluYXRvcih0KX1mdW5jdGlvbiBsKGUpe3ZhciB0LHUsbjtpZihlLnNsaWNlKDAsNSkhPT1cImFzeW5jXCIpe3JldHVybiBmYWxzZX1pZighYS5jb2RlLmlzV2hpdGVTcGFjZShlLmNoYXJDb2RlQXQoNSkpKXtyZXR1cm4gZmFsc2V9Zm9yKHU9NixuPWUubGVuZ3RoO3U8bjsrK3Upe2lmKCFhLmNvZGUuaXNXaGl0ZVNwYWNlKGUuY2hhckNvZGVBdCh1KSkpe2JyZWFrfX1pZih1PT09bil7cmV0dXJuIGZhbHNlfWlmKGUuc2xpY2UodSx1KzgpIT09XCJmdW5jdGlvblwiKXtyZXR1cm4gZmFsc2V9dD1lLmNoYXJDb2RlQXQodSs4KTtyZXR1cm4gdD09PTQwfHxhLmNvZGUuaXNXaGl0ZVNwYWNlKHQpfHx0PT09NDJ8fGEuY29kZS5pc0xpbmVUZXJtaW5hdG9yKHQpfXU9W3RoaXMuZ2VuZXJhdGVFeHByZXNzaW9uKGUuZXhwcmVzc2lvbixyLlNlcXVlbmNlLHEpXTtpPWxlKHUpLnRvU3RyaW5nKCk7aWYoaS5jaGFyQ29kZUF0KDApPT09MTIzfHxvKGkpfHxzKGkpfHxsKGkpfHx5JiZ0Jk0mJmUuZXhwcmVzc2lvbi50eXBlPT09bi5MaXRlcmFsJiZ0eXBlb2YgZS5leHByZXNzaW9uLnZhbHVlPT09XCJzdHJpbmdcIil7dT1bXCIoXCIsdSxcIilcIit0aGlzLnNlbWljb2xvbih0KV19ZWxzZXt1LnB1c2godGhpcy5zZW1pY29sb24odCkpfXJldHVybiB1fSxJbXBvcnREZWNsYXJhdGlvbjpmdW5jdGlvbihlLHQpe3ZhciB1LGksbz10aGlzO2lmKGUuc3BlY2lmaWVycy5sZW5ndGg9PT0wKXtyZXR1cm5bXCJpbXBvcnRcIixDLHRoaXMuZ2VuZXJhdGVFeHByZXNzaW9uKGUuc291cmNlLHIuU2VxdWVuY2UscSksdGhpcy5zZW1pY29sb24odCldfXU9W1wiaW1wb3J0XCJdO2k9MDtpZihlLnNwZWNpZmllcnNbaV0udHlwZT09PW4uSW1wb3J0RGVmYXVsdFNwZWNpZmllcil7dT1jZSh1LFt0aGlzLmdlbmVyYXRlRXhwcmVzc2lvbihlLnNwZWNpZmllcnNbaV0sci5TZXF1ZW5jZSxxKV0pOysraX1pZihlLnNwZWNpZmllcnNbaV0pe2lmKGkhPT0wKXt1LnB1c2goXCIsXCIpfWlmKGUuc3BlY2lmaWVyc1tpXS50eXBlPT09bi5JbXBvcnROYW1lc3BhY2VTcGVjaWZpZXIpe3U9Y2UodSxbQyx0aGlzLmdlbmVyYXRlRXhwcmVzc2lvbihlLnNwZWNpZmllcnNbaV0sci5TZXF1ZW5jZSxxKV0pfWVsc2V7dS5wdXNoKEMrXCJ7XCIpO2lmKGUuc3BlY2lmaWVycy5sZW5ndGgtaT09PTEpe3UucHVzaChDKTt1LnB1c2godGhpcy5nZW5lcmF0ZUV4cHJlc3Npb24oZS5zcGVjaWZpZXJzW2ldLHIuU2VxdWVuY2UscSkpO3UucHVzaChDK1wifVwiK0MpfWVsc2V7RGUoZnVuY3Rpb24odCl7dmFyIG4sczt1LnB1c2goQSk7Zm9yKG49aSxzPWUuc3BlY2lmaWVycy5sZW5ndGg7bjxzOysrbil7dS5wdXNoKHQpO3UucHVzaChvLmdlbmVyYXRlRXhwcmVzc2lvbihlLnNwZWNpZmllcnNbbl0sci5TZXF1ZW5jZSxxKSk7aWYobisxPHMpe3UucHVzaChcIixcIitBKX19fSk7aWYoIVoobGUodSkudG9TdHJpbmcoKSkpe3UucHVzaChBKX11LnB1c2goZitcIn1cIitDKX19fXU9Y2UodSxbXCJmcm9tXCIrQyx0aGlzLmdlbmVyYXRlRXhwcmVzc2lvbihlLnNvdXJjZSxyLlNlcXVlbmNlLHEpLHRoaXMuc2VtaWNvbG9uKHQpXSk7cmV0dXJuIHV9LFZhcmlhYmxlRGVjbGFyYXRvcjpmdW5jdGlvbihlLHQpe3ZhciB1PXQmUD9xOlQ7aWYoZS5pbml0KXtyZXR1cm5bdGhpcy5nZW5lcmF0ZUV4cHJlc3Npb24oZS5pZCxyLkFzc2lnbm1lbnQsdSksQyxcIj1cIixDLHRoaXMuZ2VuZXJhdGVFeHByZXNzaW9uKGUuaW5pdCxyLkFzc2lnbm1lbnQsdSldfXJldHVybiB0aGlzLmdlbmVyYXRlUGF0dGVybihlLmlkLHIuQXNzaWdubWVudCx1KX0sVmFyaWFibGVEZWNsYXJhdGlvbjpmdW5jdGlvbihlLHQpe3ZhciB1LG4scixpLG8scz10aGlzO3U9W2Uua2luZF07bz10JlA/VjpHO2Z1bmN0aW9uIGEoKXtpPWUuZGVjbGFyYXRpb25zWzBdO2lmKEIuY29tbWVudCYmaS5sZWFkaW5nQ29tbWVudHMpe3UucHVzaChcIlxcblwiKTt1LnB1c2gocGUocy5nZW5lcmF0ZVN0YXRlbWVudChpLG8pKSl9ZWxzZXt1LnB1c2goZmUoKSk7dS5wdXNoKHMuZ2VuZXJhdGVTdGF0ZW1lbnQoaSxvKSl9Zm9yKG49MSxyPWUuZGVjbGFyYXRpb25zLmxlbmd0aDtuPHI7KytuKXtpPWUuZGVjbGFyYXRpb25zW25dO2lmKEIuY29tbWVudCYmaS5sZWFkaW5nQ29tbWVudHMpe3UucHVzaChcIixcIitBKTt1LnB1c2gocGUocy5nZW5lcmF0ZVN0YXRlbWVudChpLG8pKSl9ZWxzZXt1LnB1c2goXCIsXCIrQyk7dS5wdXNoKHMuZ2VuZXJhdGVTdGF0ZW1lbnQoaSxvKSl9fX1pZihlLmRlY2xhcmF0aW9ucy5sZW5ndGg+MSl7RGUoYSl9ZWxzZXthKCl9dS5wdXNoKHRoaXMuc2VtaWNvbG9uKHQpKTtyZXR1cm4gdX0sVGhyb3dTdGF0ZW1lbnQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm5bY2UoXCJ0aHJvd1wiLHRoaXMuZ2VuZXJhdGVFeHByZXNzaW9uKGUuYXJndW1lbnQsci5TZXF1ZW5jZSxxKSksdGhpcy5zZW1pY29sb24odCldfSxUcnlTdGF0ZW1lbnQ6ZnVuY3Rpb24oZSx0KXt2YXIgdSxuLHIsaTt1PVtcInRyeVwiLHRoaXMubWF5YmVCbG9jayhlLmJsb2NrLFYpXTt1PXRoaXMubWF5YmVCbG9ja1N1ZmZpeChlLmJsb2NrLHUpO2lmKGUuaGFuZGxlcnMpe2ZvcihuPTAscj1lLmhhbmRsZXJzLmxlbmd0aDtuPHI7KytuKXt1PWNlKHUsdGhpcy5nZW5lcmF0ZVN0YXRlbWVudChlLmhhbmRsZXJzW25dLFYpKTtpZihlLmZpbmFsaXplcnx8bisxIT09cil7dT10aGlzLm1heWJlQmxvY2tTdWZmaXgoZS5oYW5kbGVyc1tuXS5ib2R5LHUpfX19ZWxzZXtpPWUuZ3VhcmRlZEhhbmRsZXJzfHxbXTtmb3Iobj0wLHI9aS5sZW5ndGg7bjxyOysrbil7dT1jZSh1LHRoaXMuZ2VuZXJhdGVTdGF0ZW1lbnQoaVtuXSxWKSk7aWYoZS5maW5hbGl6ZXJ8fG4rMSE9PXIpe3U9dGhpcy5tYXliZUJsb2NrU3VmZml4KGlbbl0uYm9keSx1KX19aWYoZS5oYW5kbGVyKXtpZihsKGUuaGFuZGxlcikpe2ZvcihuPTAscj1lLmhhbmRsZXIubGVuZ3RoO248cjsrK24pe3U9Y2UodSx0aGlzLmdlbmVyYXRlU3RhdGVtZW50KGUuaGFuZGxlcltuXSxWKSk7aWYoZS5maW5hbGl6ZXJ8fG4rMSE9PXIpe3U9dGhpcy5tYXliZUJsb2NrU3VmZml4KGUuaGFuZGxlcltuXS5ib2R5LHUpfX19ZWxzZXt1PWNlKHUsdGhpcy5nZW5lcmF0ZVN0YXRlbWVudChlLmhhbmRsZXIsVikpO2lmKGUuZmluYWxpemVyKXt1PXRoaXMubWF5YmVCbG9ja1N1ZmZpeChlLmhhbmRsZXIuYm9keSx1KX19fX1pZihlLmZpbmFsaXplcil7dT1jZSh1LFtcImZpbmFsbHlcIix0aGlzLm1heWJlQmxvY2soZS5maW5hbGl6ZXIsVildKX1yZXR1cm4gdX0sU3dpdGNoU3RhdGVtZW50OmZ1bmN0aW9uKGUsdCl7dmFyIHUsbixpLG8scyxhPXRoaXM7RGUoZnVuY3Rpb24oKXt1PVtcInN3aXRjaFwiK0MrXCIoXCIsYS5nZW5lcmF0ZUV4cHJlc3Npb24oZS5kaXNjcmltaW5hbnQsci5TZXF1ZW5jZSxxKSxcIilcIitDK1wie1wiK0FdfSk7aWYoZS5jYXNlcyl7cz1WO2ZvcihpPTAsbz1lLmNhc2VzLmxlbmd0aDtpPG87KytpKXtpZihpPT09by0xKXtzfD1SfW49cGUodGhpcy5nZW5lcmF0ZVN0YXRlbWVudChlLmNhc2VzW2ldLHMpKTt1LnB1c2gobik7aWYoIVoobGUobikudG9TdHJpbmcoKSkpe3UucHVzaChBKX19fXUucHVzaChwZShcIn1cIikpO3JldHVybiB1fSxTd2l0Y2hDYXNlOmZ1bmN0aW9uKGUsdCl7dmFyIHUsaSxvLHMsYSxsPXRoaXM7RGUoZnVuY3Rpb24oKXtpZihlLnRlc3Qpe3U9W2NlKFwiY2FzZVwiLGwuZ2VuZXJhdGVFeHByZXNzaW9uKGUudGVzdCxyLlNlcXVlbmNlLHEpKSxcIjpcIl19ZWxzZXt1PVtcImRlZmF1bHQ6XCJdfW89MDtzPWUuY29uc2VxdWVudC5sZW5ndGg7aWYocyYmZS5jb25zZXF1ZW50WzBdLnR5cGU9PT1uLkJsb2NrU3RhdGVtZW50KXtpPWwubWF5YmVCbG9jayhlLmNvbnNlcXVlbnRbMF0sVik7dS5wdXNoKGkpO289MX1pZihvIT09cyYmIVoobGUodSkudG9TdHJpbmcoKSkpe3UucHVzaChBKX1hPVY7Zm9yKDtvPHM7KytvKXtpZihvPT09cy0xJiZ0JlIpe2F8PVJ9aT1wZShsLmdlbmVyYXRlU3RhdGVtZW50KGUuY29uc2VxdWVudFtvXSxhKSk7dS5wdXNoKGkpO2lmKG8rMSE9PXMmJiFaKGxlKGkpLnRvU3RyaW5nKCkpKXt1LnB1c2goQSl9fX0pO3JldHVybiB1fSxJZlN0YXRlbWVudDpmdW5jdGlvbihlLHQpe3ZhciB1LGksbyxzPXRoaXM7RGUoZnVuY3Rpb24oKXt1PVtcImlmXCIrQytcIihcIixzLmdlbmVyYXRlRXhwcmVzc2lvbihlLnRlc3Qsci5TZXF1ZW5jZSxxKSxcIilcIl19KTtvPXQmUjtpPVY7aWYobyl7aXw9Un1pZihlLmFsdGVybmF0ZSl7dS5wdXNoKHRoaXMubWF5YmVCbG9jayhlLmNvbnNlcXVlbnQsVikpO3U9dGhpcy5tYXliZUJsb2NrU3VmZml4KGUuY29uc2VxdWVudCx1KTtpZihlLmFsdGVybmF0ZS50eXBlPT09bi5JZlN0YXRlbWVudCl7dT1jZSh1LFtcImVsc2UgXCIsdGhpcy5nZW5lcmF0ZVN0YXRlbWVudChlLmFsdGVybmF0ZSxpKV0pfWVsc2V7dT1jZSh1LGNlKFwiZWxzZVwiLHRoaXMubWF5YmVCbG9jayhlLmFsdGVybmF0ZSxpKSkpfX1lbHNle3UucHVzaCh0aGlzLm1heWJlQmxvY2soZS5jb25zZXF1ZW50LGkpKX1yZXR1cm4gdX0sRm9yU3RhdGVtZW50OmZ1bmN0aW9uKGUsdCl7dmFyIHUsaT10aGlzO0RlKGZ1bmN0aW9uKCl7dT1bXCJmb3JcIitDK1wiKFwiXTtpZihlLmluaXQpe2lmKGUuaW5pdC50eXBlPT09bi5WYXJpYWJsZURlY2xhcmF0aW9uKXt1LnB1c2goaS5nZW5lcmF0ZVN0YXRlbWVudChlLmluaXQsRykpfWVsc2V7dS5wdXNoKGkuZ2VuZXJhdGVFeHByZXNzaW9uKGUuaW5pdCxyLlNlcXVlbmNlLFQpKTt1LnB1c2goXCI7XCIpfX1lbHNle3UucHVzaChcIjtcIil9aWYoZS50ZXN0KXt1LnB1c2goQyk7dS5wdXNoKGkuZ2VuZXJhdGVFeHByZXNzaW9uKGUudGVzdCxyLlNlcXVlbmNlLHEpKTt1LnB1c2goXCI7XCIpfWVsc2V7dS5wdXNoKFwiO1wiKX1pZihlLnVwZGF0ZSl7dS5wdXNoKEMpO3UucHVzaChpLmdlbmVyYXRlRXhwcmVzc2lvbihlLnVwZGF0ZSxyLlNlcXVlbmNlLHEpKTt1LnB1c2goXCIpXCIpfWVsc2V7dS5wdXNoKFwiKVwiKX19KTt1LnB1c2godGhpcy5tYXliZUJsb2NrKGUuYm9keSx0JlI/WTpWKSk7cmV0dXJuIHV9LEZvckluU3RhdGVtZW50OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuZ2VuZXJhdGVJdGVyYXRpb25Gb3JTdGF0ZW1lbnQoXCJpblwiLGUsdCZSP1k6Vil9LEZvck9mU3RhdGVtZW50OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuZ2VuZXJhdGVJdGVyYXRpb25Gb3JTdGF0ZW1lbnQoXCJvZlwiLGUsdCZSP1k6Vil9LExhYmVsZWRTdGF0ZW1lbnQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm5bZS5sYWJlbC5uYW1lK1wiOlwiLHRoaXMubWF5YmVCbG9jayhlLmJvZHksdCZSP1k6VildfSxQcm9ncmFtOmZ1bmN0aW9uKGUsdCl7dmFyIHUsbixyLGksbztpPWUuYm9keS5sZW5ndGg7dT1bZyYmaT4wP1wiXFxuXCI6XCJcIl07bz1LO2ZvcihyPTA7cjxpOysrcil7aWYoIWcmJnI9PT1pLTEpe298PVJ9aWYoeCl7aWYocj09PTApe2lmKCFlLmJvZHlbMF0ubGVhZGluZ0NvbW1lbnRzKXtDZShlLnJhbmdlWzBdLGUuYm9keVtyXS5yYW5nZVswXSx1KX19aWYocj4wKXtpZighZS5ib2R5W3ItMV0udHJhaWxpbmdDb21tZW50cyYmIWUuYm9keVtyXS5sZWFkaW5nQ29tbWVudHMpe0NlKGUuYm9keVtyLTFdLnJhbmdlWzFdLGUuYm9keVtyXS5yYW5nZVswXSx1KX19fW49cGUodGhpcy5nZW5lcmF0ZVN0YXRlbWVudChlLmJvZHlbcl0sbykpO3UucHVzaChuKTtpZihyKzE8aSYmIVoobGUobikudG9TdHJpbmcoKSkpe2lmKHgpe2lmKCFlLmJvZHlbcisxXS5sZWFkaW5nQ29tbWVudHMpe3UucHVzaChBKX19ZWxzZXt1LnB1c2goQSl9fWlmKHgpe2lmKHI9PT1pLTEpe2lmKCFlLmJvZHlbcl0udHJhaWxpbmdDb21tZW50cyl7Q2UoZS5ib2R5W3JdLnJhbmdlWzFdLGUucmFuZ2VbMV0sdSl9fX19cmV0dXJuIHV9LEZ1bmN0aW9uRGVjbGFyYXRpb246ZnVuY3Rpb24oZSx0KXtyZXR1cm5bdmUoZSx0cnVlKSxcImZ1bmN0aW9uXCIsYmUoZSl8fGZlKCksQmUoZS5pZCksdGhpcy5nZW5lcmF0ZUZ1bmN0aW9uQm9keShlKV19LFJldHVyblN0YXRlbWVudDpmdW5jdGlvbihlLHQpe2lmKGUuYXJndW1lbnQpe3JldHVybltjZShcInJldHVyblwiLHRoaXMuZ2VuZXJhdGVFeHByZXNzaW9uKGUuYXJndW1lbnQsci5TZXF1ZW5jZSxxKSksdGhpcy5zZW1pY29sb24odCldfXJldHVybltcInJldHVyblwiK3RoaXMuc2VtaWNvbG9uKHQpXX0sV2hpbGVTdGF0ZW1lbnQ6ZnVuY3Rpb24oZSx0KXt2YXIgdSxuPXRoaXM7RGUoZnVuY3Rpb24oKXt1PVtcIndoaWxlXCIrQytcIihcIixuLmdlbmVyYXRlRXhwcmVzc2lvbihlLnRlc3Qsci5TZXF1ZW5jZSxxKSxcIilcIl19KTt1LnB1c2godGhpcy5tYXliZUJsb2NrKGUuYm9keSx0JlI/WTpWKSk7cmV0dXJuIHV9LFdpdGhTdGF0ZW1lbnQ6ZnVuY3Rpb24oZSx0KXt2YXIgdSxuPXRoaXM7RGUoZnVuY3Rpb24oKXt1PVtcIndpdGhcIitDK1wiKFwiLG4uZ2VuZXJhdGVFeHByZXNzaW9uKGUub2JqZWN0LHIuU2VxdWVuY2UscSksXCIpXCJdfSk7dS5wdXNoKHRoaXMubWF5YmVCbG9jayhlLmJvZHksdCZSP1k6VikpO3JldHVybiB1fX07USh5ZS5wcm90b3R5cGUseWUuU3RhdGVtZW50KTt5ZS5FeHByZXNzaW9uPXtTZXF1ZW5jZUV4cHJlc3Npb246ZnVuY3Rpb24oZSx0LHUpe3ZhciBuLGksbztpZihyLlNlcXVlbmNlPHQpe3V8PVB9bj1bXTtmb3IoaT0wLG89ZS5leHByZXNzaW9ucy5sZW5ndGg7aTxvOysraSl7bi5wdXNoKHRoaXMuZ2VuZXJhdGVFeHByZXNzaW9uKGUuZXhwcmVzc2lvbnNbaV0sci5Bc3NpZ25tZW50LHUpKTtpZihpKzE8byl7bi5wdXNoKFwiLFwiK0MpfX1yZXR1cm4gRWUobixyLlNlcXVlbmNlLHQpfSxBc3NpZ25tZW50RXhwcmVzc2lvbjpmdW5jdGlvbihlLHQsdSl7cmV0dXJuIHRoaXMuZ2VuZXJhdGVBc3NpZ25tZW50KGUubGVmdCxlLnJpZ2h0LGUub3BlcmF0b3IsdCx1KX0sQXJyb3dGdW5jdGlvbkV4cHJlc3Npb246ZnVuY3Rpb24oZSx0LHUpe3JldHVybiBFZSh0aGlzLmdlbmVyYXRlRnVuY3Rpb25Cb2R5KGUpLHIuQXJyb3dGdW5jdGlvbix0KX0sQ29uZGl0aW9uYWxFeHByZXNzaW9uOmZ1bmN0aW9uKGUsdCx1KXtpZihyLkNvbmRpdGlvbmFsPHQpe3V8PVB9cmV0dXJuIEVlKFt0aGlzLmdlbmVyYXRlRXhwcmVzc2lvbihlLnRlc3Qsci5Mb2dpY2FsT1IsdSksQytcIj9cIitDLHRoaXMuZ2VuZXJhdGVFeHByZXNzaW9uKGUuY29uc2VxdWVudCxyLkFzc2lnbm1lbnQsdSksQytcIjpcIitDLHRoaXMuZ2VuZXJhdGVFeHByZXNzaW9uKGUuYWx0ZXJuYXRlLHIuQXNzaWdubWVudCx1KV0sci5Db25kaXRpb25hbCx0KX0sTG9naWNhbEV4cHJlc3Npb246ZnVuY3Rpb24oZSx0LHUpe3JldHVybiB0aGlzLkJpbmFyeUV4cHJlc3Npb24oZSx0LHUpfSxCaW5hcnlFeHByZXNzaW9uOmZ1bmN0aW9uKGUsdCx1KXt2YXIgbixyLG8scztyPWlbZS5vcGVyYXRvcl07aWYocjx0KXt1fD1QfW89dGhpcy5nZW5lcmF0ZUV4cHJlc3Npb24oZS5sZWZ0LHIsdSk7cz1vLnRvU3RyaW5nKCk7aWYocy5jaGFyQ29kZUF0KHMubGVuZ3RoLTEpPT09NDcmJmEuY29kZS5pc0lkZW50aWZpZXJQYXJ0RVM1KGUub3BlcmF0b3IuY2hhckNvZGVBdCgwKSkpe249W28sZmUoKSxlLm9wZXJhdG9yXX1lbHNle249Y2UobyxlLm9wZXJhdG9yKX1vPXRoaXMuZ2VuZXJhdGVFeHByZXNzaW9uKGUucmlnaHQscisxLHUpO2lmKGUub3BlcmF0b3I9PT1cIi9cIiYmby50b1N0cmluZygpLmNoYXJBdCgwKT09PVwiL1wifHxlLm9wZXJhdG9yLnNsaWNlKC0xKT09PVwiPFwiJiZvLnRvU3RyaW5nKCkuc2xpY2UoMCwzKT09PVwiIS0tXCIpe24ucHVzaChmZSgpKTtuLnB1c2gobyl9ZWxzZXtuPWNlKG4sbyl9aWYoZS5vcGVyYXRvcj09PVwiaW5cIiYmISh1JlApKXtyZXR1cm5bXCIoXCIsbixcIilcIl19cmV0dXJuIEVlKG4scix0KX0sQ2FsbEV4cHJlc3Npb246ZnVuY3Rpb24oZSx0LHUpe3ZhciBuLGksbztuPVt0aGlzLmdlbmVyYXRlRXhwcmVzc2lvbihlLmNhbGxlZSxyLkNhbGwsTildO24ucHVzaChcIihcIik7Zm9yKGk9MCxvPWVbXCJhcmd1bWVudHNcIl0ubGVuZ3RoO2k8bzsrK2kpe24ucHVzaCh0aGlzLmdlbmVyYXRlRXhwcmVzc2lvbihlW1wiYXJndW1lbnRzXCJdW2ldLHIuQXNzaWdubWVudCxxKSk7aWYoaSsxPG8pe24ucHVzaChcIixcIitDKX19bi5wdXNoKFwiKVwiKTtpZighKHUmTCkpe3JldHVybltcIihcIixuLFwiKVwiXX1yZXR1cm4gRWUobixyLkNhbGwsdCl9LE5ld0V4cHJlc3Npb246ZnVuY3Rpb24oZSx0LHUpe3ZhciBuLGksbyxzLGE7aT1lW1wiYXJndW1lbnRzXCJdLmxlbmd0aDthPXUmTyYmIUUmJmk9PT0wP1c6VTtuPWNlKFwibmV3XCIsdGhpcy5nZW5lcmF0ZUV4cHJlc3Npb24oZS5jYWxsZWUsci5OZXcsYSkpO2lmKCEodSZPKXx8RXx8aT4wKXtuLnB1c2goXCIoXCIpO2ZvcihvPTAscz1pO288czsrK28pe24ucHVzaCh0aGlzLmdlbmVyYXRlRXhwcmVzc2lvbihlW1wiYXJndW1lbnRzXCJdW29dLHIuQXNzaWdubWVudCxxKSk7aWYobysxPHMpe24ucHVzaChcIixcIitDKX19bi5wdXNoKFwiKVwiKX1yZXR1cm4gRWUobixyLk5ldyx0KX0sTWVtYmVyRXhwcmVzc2lvbjpmdW5jdGlvbihlLHQsdSl7dmFyIGksbztpPVt0aGlzLmdlbmVyYXRlRXhwcmVzc2lvbihlLm9iamVjdCxyLkNhbGwsdSZMP046VSldO2lmKGUuY29tcHV0ZWQpe2kucHVzaChcIltcIik7aS5wdXNoKHRoaXMuZ2VuZXJhdGVFeHByZXNzaW9uKGUucHJvcGVydHksci5TZXF1ZW5jZSx1Jkw/cTpXKSk7aS5wdXNoKFwiXVwiKX1lbHNle2lmKGUub2JqZWN0LnR5cGU9PT1uLkxpdGVyYWwmJnR5cGVvZiBlLm9iamVjdC52YWx1ZT09PVwibnVtYmVyXCIpe289bGUoaSkudG9TdHJpbmcoKTtpZihvLmluZGV4T2YoXCIuXCIpPDAmJiEvW2VFeFhdLy50ZXN0KG8pJiZhLmNvZGUuaXNEZWNpbWFsRGlnaXQoby5jaGFyQ29kZUF0KG8ubGVuZ3RoLTEpKSYmIShvLmxlbmd0aD49MiYmby5jaGFyQ29kZUF0KDApPT09NDgpKXtpLnB1c2goXCIuXCIpfX1pLnB1c2goXCIuXCIpO2kucHVzaChCZShlLnByb3BlcnR5KSl9cmV0dXJuIEVlKGksci5NZW1iZXIsdCl9LFVuYXJ5RXhwcmVzc2lvbjpmdW5jdGlvbihlLHQsdSl7dmFyIG4saSxvLHMsbDtpPXRoaXMuZ2VuZXJhdGVFeHByZXNzaW9uKGUuYXJndW1lbnQsci5VbmFyeSxxKTtpZihDPT09XCJcIil7bj1jZShlLm9wZXJhdG9yLGkpfWVsc2V7bj1bZS5vcGVyYXRvcl07aWYoZS5vcGVyYXRvci5sZW5ndGg+Mil7bj1jZShuLGkpfWVsc2V7cz1sZShuKS50b1N0cmluZygpO2w9cy5jaGFyQ29kZUF0KHMubGVuZ3RoLTEpO289aS50b1N0cmluZygpLmNoYXJDb2RlQXQoMCk7aWYoKGw9PT00M3x8bD09PTQ1KSYmbD09PW98fGEuY29kZS5pc0lkZW50aWZpZXJQYXJ0RVM1KGwpJiZhLmNvZGUuaXNJZGVudGlmaWVyUGFydEVTNShvKSl7bi5wdXNoKGZlKCkpO24ucHVzaChpKX1lbHNle24ucHVzaChpKX19fXJldHVybiBFZShuLHIuVW5hcnksdCl9LFlpZWxkRXhwcmVzc2lvbjpmdW5jdGlvbihlLHQsdSl7dmFyIG47aWYoZS5kZWxlZ2F0ZSl7bj1cInlpZWxkKlwifWVsc2V7bj1cInlpZWxkXCJ9aWYoZS5hcmd1bWVudCl7bj1jZShuLHRoaXMuZ2VuZXJhdGVFeHByZXNzaW9uKGUuYXJndW1lbnQsci5ZaWVsZCxxKSl9cmV0dXJuIEVlKG4sci5ZaWVsZCx0KX0sQXdhaXRFeHByZXNzaW9uOmZ1bmN0aW9uKGUsdCx1KXt2YXIgbj1jZShlLmFsbD9cImF3YWl0KlwiOlwiYXdhaXRcIix0aGlzLmdlbmVyYXRlRXhwcmVzc2lvbihlLmFyZ3VtZW50LHIuQXdhaXQscSkpO3JldHVybiBFZShuLHIuQXdhaXQsdCl9LFVwZGF0ZUV4cHJlc3Npb246ZnVuY3Rpb24oZSx0LHUpe2lmKGUucHJlZml4KXtyZXR1cm4gRWUoW2Uub3BlcmF0b3IsdGhpcy5nZW5lcmF0ZUV4cHJlc3Npb24oZS5hcmd1bWVudCxyLlVuYXJ5LHEpXSxyLlVuYXJ5LHQpfXJldHVybiBFZShbdGhpcy5nZW5lcmF0ZUV4cHJlc3Npb24oZS5hcmd1bWVudCxyLlBvc3RmaXgscSksZS5vcGVyYXRvcl0sci5Qb3N0Zml4LHQpfSxGdW5jdGlvbkV4cHJlc3Npb246ZnVuY3Rpb24oZSx0LHUpe3ZhciBuPVt2ZShlLHRydWUpLFwiZnVuY3Rpb25cIl07aWYoZS5pZCl7bi5wdXNoKGJlKGUpfHxmZSgpKTtuLnB1c2goQmUoZS5pZCkpfWVsc2V7bi5wdXNoKGJlKGUpfHxDKX1uLnB1c2godGhpcy5nZW5lcmF0ZUZ1bmN0aW9uQm9keShlKSk7cmV0dXJuIG59LEV4cG9ydEJhdGNoU3BlY2lmaWVyOmZ1bmN0aW9uKGUsdCx1KXtyZXR1cm5cIipcIn0sQXJyYXlQYXR0ZXJuOmZ1bmN0aW9uKGUsdCx1KXtyZXR1cm4gdGhpcy5BcnJheUV4cHJlc3Npb24oZSx0LHUsdHJ1ZSl9LEFycmF5RXhwcmVzc2lvbjpmdW5jdGlvbihlLHQsdSxuKXt2YXIgaSxvLHM9dGhpcztpZighZS5lbGVtZW50cy5sZW5ndGgpe3JldHVyblwiW11cIn1vPW4/ZmFsc2U6ZS5lbGVtZW50cy5sZW5ndGg+MTtpPVtcIltcIixvP0E6XCJcIl07RGUoZnVuY3Rpb24odCl7dmFyIHUsbjtmb3IodT0wLG49ZS5lbGVtZW50cy5sZW5ndGg7dTxuOysrdSl7aWYoIWUuZWxlbWVudHNbdV0pe2lmKG8pe2kucHVzaCh0KX1pZih1KzE9PT1uKXtpLnB1c2goXCIsXCIpfX1lbHNle2kucHVzaChvP3Q6XCJcIik7aS5wdXNoKHMuZ2VuZXJhdGVFeHByZXNzaW9uKGUuZWxlbWVudHNbdV0sci5Bc3NpZ25tZW50LHEpKX1pZih1KzE8bil7aS5wdXNoKFwiLFwiKyhvP0E6QykpfX19KTtpZihvJiYhWihsZShpKS50b1N0cmluZygpKSl7aS5wdXNoKEEpfWkucHVzaChvP2Y6XCJcIik7aS5wdXNoKFwiXVwiKTtyZXR1cm4gaX0sUmVzdEVsZW1lbnQ6ZnVuY3Rpb24oZSx0LHUpe3JldHVyblwiLi4uXCIrdGhpcy5nZW5lcmF0ZVBhdHRlcm4oZS5hcmd1bWVudCl9LENsYXNzRXhwcmVzc2lvbjpmdW5jdGlvbihlLHQsdSl7dmFyIG4saTtuPVtcImNsYXNzXCJdO2lmKGUuaWQpe249Y2Uobix0aGlzLmdlbmVyYXRlRXhwcmVzc2lvbihlLmlkLHIuU2VxdWVuY2UscSkpfWlmKGUuc3VwZXJDbGFzcyl7aT1jZShcImV4dGVuZHNcIix0aGlzLmdlbmVyYXRlRXhwcmVzc2lvbihlLnN1cGVyQ2xhc3Msci5Bc3NpZ25tZW50LHEpKTtuPWNlKG4saSl9bi5wdXNoKEMpO24ucHVzaCh0aGlzLmdlbmVyYXRlU3RhdGVtZW50KGUuYm9keSxZKSk7cmV0dXJuIG59LE1ldGhvZERlZmluaXRpb246ZnVuY3Rpb24oZSx0LHUpe3ZhciBuLHI7aWYoZVtcInN0YXRpY1wiXSl7bj1bXCJzdGF0aWNcIitDXX1lbHNle249W119aWYoZS5raW5kPT09XCJnZXRcInx8ZS5raW5kPT09XCJzZXRcIil7cj1bY2UoZS5raW5kLHRoaXMuZ2VuZXJhdGVQcm9wZXJ0eUtleShlLmtleSxlLmNvbXB1dGVkKSksdGhpcy5nZW5lcmF0ZUZ1bmN0aW9uQm9keShlLnZhbHVlKV19ZWxzZXtyPVtTZShlKSx0aGlzLmdlbmVyYXRlUHJvcGVydHlLZXkoZS5rZXksZS5jb21wdXRlZCksdGhpcy5nZW5lcmF0ZUZ1bmN0aW9uQm9keShlLnZhbHVlKV19cmV0dXJuIGNlKG4scil9LFByb3BlcnR5OmZ1bmN0aW9uKGUsdCx1KXtpZihlLmtpbmQ9PT1cImdldFwifHxlLmtpbmQ9PT1cInNldFwiKXtyZXR1cm5bZS5raW5kLGZlKCksdGhpcy5nZW5lcmF0ZVByb3BlcnR5S2V5KGUua2V5LGUuY29tcHV0ZWQpLHRoaXMuZ2VuZXJhdGVGdW5jdGlvbkJvZHkoZS52YWx1ZSldfWlmKGUuc2hvcnRoYW5kKXtyZXR1cm4gdGhpcy5nZW5lcmF0ZVByb3BlcnR5S2V5KGUua2V5LGUuY29tcHV0ZWQpfWlmKGUubWV0aG9kKXtyZXR1cm5bU2UoZSksdGhpcy5nZW5lcmF0ZVByb3BlcnR5S2V5KGUua2V5LGUuY29tcHV0ZWQpLHRoaXMuZ2VuZXJhdGVGdW5jdGlvbkJvZHkoZS52YWx1ZSldfXJldHVyblt0aGlzLmdlbmVyYXRlUHJvcGVydHlLZXkoZS5rZXksZS5jb21wdXRlZCksXCI6XCIrQyx0aGlzLmdlbmVyYXRlRXhwcmVzc2lvbihlLnZhbHVlLHIuQXNzaWdubWVudCxxKV19LE9iamVjdEV4cHJlc3Npb246ZnVuY3Rpb24oZSx0LHUpe3ZhciBuLGksbyxzPXRoaXM7aWYoIWUucHJvcGVydGllcy5sZW5ndGgpe3JldHVyblwie31cIn1uPWUucHJvcGVydGllcy5sZW5ndGg+MTtEZShmdW5jdGlvbigpe289cy5nZW5lcmF0ZUV4cHJlc3Npb24oZS5wcm9wZXJ0aWVzWzBdLHIuU2VxdWVuY2UscSl9KTtpZighbil7aWYoIVgobGUobykudG9TdHJpbmcoKSkpe3JldHVybltcIntcIixDLG8sQyxcIn1cIl19fURlKGZ1bmN0aW9uKHQpe3ZhciB1LGE7aT1bXCJ7XCIsQSx0LG9dO2lmKG4pe2kucHVzaChcIixcIitBKTtmb3IodT0xLGE9ZS5wcm9wZXJ0aWVzLmxlbmd0aDt1PGE7Kyt1KXtpLnB1c2godCk7aS5wdXNoKHMuZ2VuZXJhdGVFeHByZXNzaW9uKGUucHJvcGVydGllc1t1XSxyLlNlcXVlbmNlLHEpKTtpZih1KzE8YSl7aS5wdXNoKFwiLFwiK0EpfX19fSk7aWYoIVoobGUoaSkudG9TdHJpbmcoKSkpe2kucHVzaChBKX1pLnB1c2goZik7aS5wdXNoKFwifVwiKTtyZXR1cm4gaX0sT2JqZWN0UGF0dGVybjpmdW5jdGlvbihlLHQsdSl7dmFyIGksbyxzLGEsbCxjPXRoaXM7aWYoIWUucHJvcGVydGllcy5sZW5ndGgpe3JldHVyblwie31cIn1hPWZhbHNlO2lmKGUucHJvcGVydGllcy5sZW5ndGg9PT0xKXtsPWUucHJvcGVydGllc1swXTtpZihsLnZhbHVlLnR5cGUhPT1uLklkZW50aWZpZXIpe2E9dHJ1ZX19ZWxzZXtmb3Iobz0wLHM9ZS5wcm9wZXJ0aWVzLmxlbmd0aDtvPHM7KytvKXtsPWUucHJvcGVydGllc1tvXTtpZighbC5zaG9ydGhhbmQpe2E9dHJ1ZTticmVha319fWk9W1wie1wiLGE/QTpcIlwiXTtEZShmdW5jdGlvbih0KXt2YXIgdSxuO2Zvcih1PTAsbj1lLnByb3BlcnRpZXMubGVuZ3RoO3U8bjsrK3Upe2kucHVzaChhP3Q6XCJcIik7aS5wdXNoKGMuZ2VuZXJhdGVFeHByZXNzaW9uKGUucHJvcGVydGllc1t1XSxyLlNlcXVlbmNlLHEpKTtpZih1KzE8bil7aS5wdXNoKFwiLFwiKyhhP0E6QykpfX19KTtpZihhJiYhWihsZShpKS50b1N0cmluZygpKSl7aS5wdXNoKEEpfWkucHVzaChhP2Y6XCJcIik7aS5wdXNoKFwifVwiKTtyZXR1cm4gaX0sVGhpc0V4cHJlc3Npb246ZnVuY3Rpb24oZSx0LHUpe3JldHVyblwidGhpc1wifSxTdXBlcjpmdW5jdGlvbihlLHQsdSl7cmV0dXJuXCJzdXBlclwifSxJZGVudGlmaWVyOmZ1bmN0aW9uKGUsdCx1KXtyZXR1cm4gQmUoZSl9LEltcG9ydERlZmF1bHRTcGVjaWZpZXI6ZnVuY3Rpb24oZSx0LHUpe3JldHVybiBCZShlLmlkfHxlLmxvY2FsKX0sSW1wb3J0TmFtZXNwYWNlU3BlY2lmaWVyOmZ1bmN0aW9uKGUsdCx1KXt2YXIgbj1bXCIqXCJdO3ZhciByPWUuaWR8fGUubG9jYWw7aWYocil7bi5wdXNoKEMrXCJhc1wiK2ZlKCkrQmUocikpfXJldHVybiBufSxJbXBvcnRTcGVjaWZpZXI6ZnVuY3Rpb24oZSx0LHUpe3JldHVybiB0aGlzLkV4cG9ydFNwZWNpZmllcihlLHQsdSl9LEV4cG9ydFNwZWNpZmllcjpmdW5jdGlvbihlLHQsdSl7dmFyIG49WyhlLmlkfHxlLmxvY2FsKS5uYW1lXTtpZihlLm5hbWUpe24ucHVzaChmZSgpK1wiYXNcIitmZSgpK0JlKGUubmFtZSkpfXJldHVybiBufSxMaXRlcmFsOmZ1bmN0aW9uKGUsdCx1KXt2YXIgcjtpZihlLmhhc093blByb3BlcnR5KFwicmF3XCIpJiZ2JiZCLnJhdyl7dHJ5e3I9dihlLnJhdykuYm9keVswXS5leHByZXNzaW9uO2lmKHIudHlwZT09PW4uTGl0ZXJhbCl7aWYoci52YWx1ZT09PWUudmFsdWUpe3JldHVybiBlLnJhd319fWNhdGNoKGkpe319aWYoZS52YWx1ZT09PW51bGwpe3JldHVyblwibnVsbFwifWlmKHR5cGVvZiBlLnZhbHVlPT09XCJzdHJpbmdcIil7cmV0dXJuIHNlKGUudmFsdWUpfWlmKHR5cGVvZiBlLnZhbHVlPT09XCJudW1iZXJcIil7cmV0dXJuIHRlKGUudmFsdWUpfWlmKHR5cGVvZiBlLnZhbHVlPT09XCJib29sZWFuXCIpe3JldHVybiBlLnZhbHVlP1widHJ1ZVwiOlwiZmFsc2VcIn1yZXR1cm4gbmUoZS52YWx1ZSl9LEdlbmVyYXRvckV4cHJlc3Npb246ZnVuY3Rpb24oZSx0LHUpe3JldHVybiB0aGlzLkNvbXByZWhlbnNpb25FeHByZXNzaW9uKGUsdCx1KX0sQ29tcHJlaGVuc2lvbkV4cHJlc3Npb246ZnVuY3Rpb24oZSx0LHUpe3ZhciBpLG8scyxhLGw9dGhpcztpPWUudHlwZT09PW4uR2VuZXJhdG9yRXhwcmVzc2lvbj9bXCIoXCJdOltcIltcIl07aWYoQi5tb3ouY29tcHJlaGVuc2lvbkV4cHJlc3Npb25TdGFydHNXaXRoQXNzaWdubWVudCl7YT10aGlzLmdlbmVyYXRlRXhwcmVzc2lvbihlLmJvZHksci5Bc3NpZ25tZW50LHEpO2kucHVzaChhKX1pZihlLmJsb2Nrcyl7RGUoZnVuY3Rpb24oKXtmb3Iobz0wLHM9ZS5ibG9ja3MubGVuZ3RoO288czsrK28pe2E9bC5nZW5lcmF0ZUV4cHJlc3Npb24oZS5ibG9ja3Nbb10sci5TZXF1ZW5jZSxxKTtpZihvPjB8fEIubW96LmNvbXByZWhlbnNpb25FeHByZXNzaW9uU3RhcnRzV2l0aEFzc2lnbm1lbnQpe2k9Y2UoaSxhKX1lbHNle2kucHVzaChhKX19fSl9aWYoZS5maWx0ZXIpe2k9Y2UoaSxcImlmXCIrQyk7YT10aGlzLmdlbmVyYXRlRXhwcmVzc2lvbihlLmZpbHRlcixyLlNlcXVlbmNlLHEpO2k9Y2UoaSxbXCIoXCIsYSxcIilcIl0pfWlmKCFCLm1vei5jb21wcmVoZW5zaW9uRXhwcmVzc2lvblN0YXJ0c1dpdGhBc3NpZ25tZW50KXthPXRoaXMuZ2VuZXJhdGVFeHByZXNzaW9uKGUuYm9keSxyLkFzc2lnbm1lbnQscSk7aT1jZShpLGEpfWkucHVzaChlLnR5cGU9PT1uLkdlbmVyYXRvckV4cHJlc3Npb24/XCIpXCI6XCJdXCIpO3JldHVybiBpfSxDb21wcmVoZW5zaW9uQmxvY2s6ZnVuY3Rpb24oZSx0LHUpe3ZhciBpO2lmKGUubGVmdC50eXBlPT09bi5WYXJpYWJsZURlY2xhcmF0aW9uKXtpPVtlLmxlZnQua2luZCxmZSgpLHRoaXMuZ2VuZXJhdGVTdGF0ZW1lbnQoZS5sZWZ0LmRlY2xhcmF0aW9uc1swXSxHKV19ZWxzZXtpPXRoaXMuZ2VuZXJhdGVFeHByZXNzaW9uKGUubGVmdCxyLkNhbGwscSl9aT1jZShpLGUub2Y/XCJvZlwiOlwiaW5cIik7aT1jZShpLHRoaXMuZ2VuZXJhdGVFeHByZXNzaW9uKGUucmlnaHQsci5TZXF1ZW5jZSxxKSk7cmV0dXJuW1wiZm9yXCIrQytcIihcIixpLFwiKVwiXX0sU3ByZWFkRWxlbWVudDpmdW5jdGlvbihlLHQsdSl7cmV0dXJuW1wiLi4uXCIsdGhpcy5nZW5lcmF0ZUV4cHJlc3Npb24oZS5hcmd1bWVudCxyLkFzc2lnbm1lbnQscSldfSxUYWdnZWRUZW1wbGF0ZUV4cHJlc3Npb246ZnVuY3Rpb24oZSx0LHUpe3ZhciBuPU47aWYoISh1JkwpKXtuPVV9dmFyIGk9W3RoaXMuZ2VuZXJhdGVFeHByZXNzaW9uKGUudGFnLHIuQ2FsbCxuKSx0aGlzLmdlbmVyYXRlRXhwcmVzc2lvbihlLnF1YXNpLHIuUHJpbWFyeSx6KV07cmV0dXJuIEVlKGksci5UYWdnZWRUZW1wbGF0ZSx0KX0sVGVtcGxhdGVFbGVtZW50OmZ1bmN0aW9uKGUsdCx1KXtyZXR1cm4gZS52YWx1ZS5yYXd9LFRlbXBsYXRlTGl0ZXJhbDpmdW5jdGlvbihlLHQsdSl7dmFyIG4saSxvO249W1wiYFwiXTtmb3IoaT0wLG89ZS5xdWFzaXMubGVuZ3RoO2k8bzsrK2kpe24ucHVzaCh0aGlzLmdlbmVyYXRlRXhwcmVzc2lvbihlLnF1YXNpc1tpXSxyLlByaW1hcnkscSkpO2lmKGkrMTxvKXtuLnB1c2goXCIke1wiK0MpO24ucHVzaCh0aGlzLmdlbmVyYXRlRXhwcmVzc2lvbihlLmV4cHJlc3Npb25zW2ldLHIuU2VxdWVuY2UscSkpO24ucHVzaChDK1wifVwiKX19bi5wdXNoKFwiYFwiKTtyZXR1cm4gbn0sTW9kdWxlU3BlY2lmaWVyOmZ1bmN0aW9uKGUsdCx1KXtyZXR1cm4gdGhpcy5MaXRlcmFsKGUsdCx1KX19O1EoeWUucHJvdG90eXBlLHllLkV4cHJlc3Npb24pO3llLnByb3RvdHlwZS5nZW5lcmF0ZUV4cHJlc3Npb249ZnVuY3Rpb24oZSx0LHUpe3ZhciByLGk7aT1lLnR5cGV8fG4uUHJvcGVydHk7aWYoQi52ZXJiYXRpbSYmZS5oYXNPd25Qcm9wZXJ0eShCLnZlcmJhdGltKSl7cmV0dXJuIGdlKGUsdCl9cj10aGlzW2ldKGUsdCx1KTtpZihCLmNvbW1lbnQpe3I9QWUoZSxyKX1yZXR1cm4gbGUocixlKX07eWUucHJvdG90eXBlLmdlbmVyYXRlU3RhdGVtZW50PWZ1bmN0aW9uKGUsdCl7dmFyIHUscjt1PXRoaXNbZS50eXBlXShlLHQpO2lmKEIuY29tbWVudCl7dT1BZShlLHUpfXI9bGUodSkudG9TdHJpbmcoKTtpZihlLnR5cGU9PT1uLlByb2dyYW0mJiFnJiZBPT09XCJcIiYmci5jaGFyQXQoci5sZW5ndGgtMSk9PT1cIlxcblwiKXt1PWI/bGUodSkucmVwbGFjZVJpZ2h0KC9cXHMrJC8sXCJcIik6ci5yZXBsYWNlKC9cXHMrJC8sXCJcIil9cmV0dXJuIGxlKHUsZSl9O2Z1bmN0aW9uIHhlKGUpe3ZhciB0O3Q9bmV3IHllO2lmKEkoZSkpe3JldHVybiB0LmdlbmVyYXRlU3RhdGVtZW50KGUsVil9aWYoayhlKSl7cmV0dXJuIHQuZ2VuZXJhdGVFeHByZXNzaW9uKGUsci5TZXF1ZW5jZSxxKX10aHJvdyBuZXcgRXJyb3IoXCJVbmtub3duIG5vZGUgdHlwZTogXCIrZS50eXBlKX1mdW5jdGlvbiB3ZShuLHIpe3ZhciBpPUgoKSxzLGE7aWYociE9bnVsbCl7aWYodHlwZW9mIHIuaW5kZW50PT09XCJzdHJpbmdcIil7aS5mb3JtYXQuaW5kZW50LnN0eWxlPXIuaW5kZW50fWlmKHR5cGVvZiByLmJhc2U9PT1cIm51bWJlclwiKXtpLmZvcm1hdC5pbmRlbnQuYmFzZT1yLmJhc2V9cj1lZShpLHIpO2M9ci5mb3JtYXQuaW5kZW50LnN0eWxlO2lmKHR5cGVvZiByLmJhc2U9PT1cInN0cmluZ1wiKXtmPXIuYmFzZX1lbHNle2Y9SihjLHIuZm9ybWF0LmluZGVudC5iYXNlKX19ZWxzZXtyPWk7Yz1yLmZvcm1hdC5pbmRlbnQuc3R5bGU7Zj1KKGMsci5mb3JtYXQuaW5kZW50LmJhc2UpfXA9ci5mb3JtYXQuanNvbjtEPXIuZm9ybWF0LnJlbnVtYmVyO2g9cD9mYWxzZTpyLmZvcm1hdC5oZXhhZGVjaW1hbDttPXA/XCJkb3VibGVcIjpyLmZvcm1hdC5xdW90ZXM7ZD1yLmZvcm1hdC5lc2NhcGVsZXNzO0E9ci5mb3JtYXQubmV3bGluZTtDPXIuZm9ybWF0LnNwYWNlO2lmKHIuZm9ybWF0LmNvbXBhY3Qpe0E9Qz1jPWY9XCJcIn1FPXIuZm9ybWF0LnBhcmVudGhlc2VzO0Y9ci5mb3JtYXQuc2VtaWNvbG9ucztnPXIuZm9ybWF0LnNhZmVDb25jYXRlbmF0aW9uO3k9ci5kaXJlY3RpdmU7dj1wP251bGw6ci5wYXJzZTtiPXIuc291cmNlTWFwO1M9ci5zb3VyY2VDb2RlO3g9ci5mb3JtYXQucHJlc2VydmVCbGFua0xpbmVzJiZTIT09bnVsbDtCPXI7aWYoYil7aWYoIXUuYnJvd3Nlcil7bz1lKFwic291cmNlLW1hcFwiKS5Tb3VyY2VOb2RlfWVsc2V7bz10LnNvdXJjZU1hcC5Tb3VyY2VOb2RlfX1zPXhlKG4pO2lmKCFiKXthPXtjb2RlOnMudG9TdHJpbmcoKSxtYXA6bnVsbH07cmV0dXJuIHIuc291cmNlTWFwV2l0aENvZGU/YTphLmNvZGV9YT1zLnRvU3RyaW5nV2l0aFNvdXJjZU1hcCh7ZmlsZTpyLmZpbGUsc291cmNlUm9vdDpyLnNvdXJjZU1hcFJvb3R9KTtpZihyLnNvdXJjZUNvbnRlbnQpe2EubWFwLnNldFNvdXJjZUNvbnRlbnQoci5zb3VyY2VNYXAsci5zb3VyY2VDb250ZW50KX1pZihyLnNvdXJjZU1hcFdpdGhDb2RlKXtyZXR1cm4gYX1yZXR1cm4gYS5tYXAudG9TdHJpbmcoKX13PXtpbmRlbnQ6e3N0eWxlOlwiXCIsYmFzZTowfSxyZW51bWJlcjp0cnVlLGhleGFkZWNpbWFsOnRydWUscXVvdGVzOlwiYXV0b1wiLGVzY2FwZWxlc3M6dHJ1ZSxjb21wYWN0OnRydWUscGFyZW50aGVzZXM6ZmFsc2Usc2VtaWNvbG9uczpmYWxzZX07Xz1IKCkuZm9ybWF0O3UudmVyc2lvbj1lKFwiLi9wYWNrYWdlLmpzb25cIikudmVyc2lvbjt1LmdlbmVyYXRlPXdlO3UuYXR0YWNoQ29tbWVudHM9cy5hdHRhY2hDb21tZW50czt1LlByZWNlZGVuY2U9ZWUoe30scik7dS5icm93c2VyPWZhbHNlO3UuRk9STUFUX01JTklGWT13O3UuRk9STUFUX0RFRkFVTFRTPV99KSgpfSkuY2FsbCh0aGlzLHR5cGVvZiBnbG9iYWwhPT1cInVuZGVmaW5lZFwiP2dsb2JhbDp0eXBlb2Ygc2VsZiE9PVwidW5kZWZpbmVkXCI/c2VsZjp0eXBlb2Ygd2luZG93IT09XCJ1bmRlZmluZWRcIj93aW5kb3c6e30pfSx7XCIuL3BhY2thZ2UuanNvblwiOjQ3LGVzdHJhdmVyc2U6NDksZXN1dGlsczozMyxcInNvdXJjZS1tYXBcIjozNH1dLDMwOltmdW5jdGlvbihlLHQsdSl7KGZ1bmN0aW9uKCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZShlKXtpZihlPT1udWxsKXtyZXR1cm4gZmFsc2V9c3dpdGNoKGUudHlwZSl7Y2FzZVwiQXJyYXlFeHByZXNzaW9uXCI6Y2FzZVwiQXNzaWdubWVudEV4cHJlc3Npb25cIjpjYXNlXCJCaW5hcnlFeHByZXNzaW9uXCI6Y2FzZVwiQ2FsbEV4cHJlc3Npb25cIjpjYXNlXCJDb25kaXRpb25hbEV4cHJlc3Npb25cIjpjYXNlXCJGdW5jdGlvbkV4cHJlc3Npb25cIjpjYXNlXCJJZGVudGlmaWVyXCI6Y2FzZVwiTGl0ZXJhbFwiOmNhc2VcIkxvZ2ljYWxFeHByZXNzaW9uXCI6Y2FzZVwiTWVtYmVyRXhwcmVzc2lvblwiOmNhc2VcIk5ld0V4cHJlc3Npb25cIjpjYXNlXCJPYmplY3RFeHByZXNzaW9uXCI6Y2FzZVwiU2VxdWVuY2VFeHByZXNzaW9uXCI6Y2FzZVwiVGhpc0V4cHJlc3Npb25cIjpjYXNlXCJVbmFyeUV4cHJlc3Npb25cIjpjYXNlXCJVcGRhdGVFeHByZXNzaW9uXCI6cmV0dXJuIHRydWV9cmV0dXJuIGZhbHNlfWZ1bmN0aW9uIHUoZSl7aWYoZT09bnVsbCl7cmV0dXJuIGZhbHNlfXN3aXRjaChlLnR5cGUpe2Nhc2VcIkRvV2hpbGVTdGF0ZW1lbnRcIjpjYXNlXCJGb3JJblN0YXRlbWVudFwiOmNhc2VcIkZvclN0YXRlbWVudFwiOmNhc2VcIldoaWxlU3RhdGVtZW50XCI6cmV0dXJuIHRydWV9cmV0dXJuIGZhbHNlfWZ1bmN0aW9uIG4oZSl7aWYoZT09bnVsbCl7cmV0dXJuIGZhbHNlfXN3aXRjaChlLnR5cGUpe2Nhc2VcIkJsb2NrU3RhdGVtZW50XCI6Y2FzZVwiQnJlYWtTdGF0ZW1lbnRcIjpjYXNlXCJDb250aW51ZVN0YXRlbWVudFwiOmNhc2VcIkRlYnVnZ2VyU3RhdGVtZW50XCI6Y2FzZVwiRG9XaGlsZVN0YXRlbWVudFwiOmNhc2VcIkVtcHR5U3RhdGVtZW50XCI6Y2FzZVwiRXhwcmVzc2lvblN0YXRlbWVudFwiOmNhc2VcIkZvckluU3RhdGVtZW50XCI6Y2FzZVwiRm9yU3RhdGVtZW50XCI6Y2FzZVwiSWZTdGF0ZW1lbnRcIjpjYXNlXCJMYWJlbGVkU3RhdGVtZW50XCI6Y2FzZVwiUmV0dXJuU3RhdGVtZW50XCI6Y2FzZVwiU3dpdGNoU3RhdGVtZW50XCI6Y2FzZVwiVGhyb3dTdGF0ZW1lbnRcIjpjYXNlXCJUcnlTdGF0ZW1lbnRcIjpjYXNlXCJWYXJpYWJsZURlY2xhcmF0aW9uXCI6Y2FzZVwiV2hpbGVTdGF0ZW1lbnRcIjpjYXNlXCJXaXRoU3RhdGVtZW50XCI6cmV0dXJuIHRydWV9cmV0dXJuIGZhbHNlfWZ1bmN0aW9uIHIoZSl7cmV0dXJuIG4oZSl8fGUhPW51bGwmJmUudHlwZT09PVwiRnVuY3Rpb25EZWNsYXJhdGlvblwifWZ1bmN0aW9uIGkoZSl7c3dpdGNoKGUudHlwZSl7Y2FzZVwiSWZTdGF0ZW1lbnRcIjppZihlLmFsdGVybmF0ZSE9bnVsbCl7cmV0dXJuIGUuYWx0ZXJuYXRlfXJldHVybiBlLmNvbnNlcXVlbnQ7Y2FzZVwiTGFiZWxlZFN0YXRlbWVudFwiOmNhc2VcIkZvclN0YXRlbWVudFwiOmNhc2VcIkZvckluU3RhdGVtZW50XCI6Y2FzZVwiV2hpbGVTdGF0ZW1lbnRcIjpjYXNlXCJXaXRoU3RhdGVtZW50XCI6cmV0dXJuIGUuYm9keX1yZXR1cm4gbnVsbH1mdW5jdGlvbiBvKGUpe3ZhciB0O2lmKGUudHlwZSE9PVwiSWZTdGF0ZW1lbnRcIil7cmV0dXJuIGZhbHNlfWlmKGUuYWx0ZXJuYXRlPT1udWxsKXtyZXR1cm4gZmFsc2V9dD1lLmNvbnNlcXVlbnQ7ZG97aWYodC50eXBlPT09XCJJZlN0YXRlbWVudFwiKXtpZih0LmFsdGVybmF0ZT09bnVsbCl7cmV0dXJuIHRydWV9fXQ9aSh0KX13aGlsZSh0KTtyZXR1cm4gZmFsc2V9dC5leHBvcnRzPXtpc0V4cHJlc3Npb246ZSxpc1N0YXRlbWVudDpuLGlzSXRlcmF0aW9uU3RhdGVtZW50OnUsaXNTb3VyY2VFbGVtZW50OnIsaXNQcm9ibGVtYXRpY0lmU3RhdGVtZW50Om8sdHJhaWxpbmdTdGF0ZW1lbnQ6aX19KSgpfSx7fV0sMzE6W2Z1bmN0aW9uKGUsdCx1KXsoZnVuY3Rpb24oKXtcInVzZSBzdHJpY3RcIjt2YXIgZSx1LG4scixpLG87dT17Tm9uQXNjaWlJZGVudGlmaWVyU3RhcnQ6L1tcXHhBQVxceEI1XFx4QkFcXHhDMC1cXHhENlxceEQ4LVxceEY2XFx4RjgtXFx1MDJDMVxcdTAyQzYtXFx1MDJEMVxcdTAyRTAtXFx1MDJFNFxcdTAyRUNcXHUwMkVFXFx1MDM3MC1cXHUwMzc0XFx1MDM3NlxcdTAzNzdcXHUwMzdBLVxcdTAzN0RcXHUwMzdGXFx1MDM4NlxcdTAzODgtXFx1MDM4QVxcdTAzOENcXHUwMzhFLVxcdTAzQTFcXHUwM0EzLVxcdTAzRjVcXHUwM0Y3LVxcdTA0ODFcXHUwNDhBLVxcdTA1MkZcXHUwNTMxLVxcdTA1NTZcXHUwNTU5XFx1MDU2MS1cXHUwNTg3XFx1MDVEMC1cXHUwNUVBXFx1MDVGMC1cXHUwNUYyXFx1MDYyMC1cXHUwNjRBXFx1MDY2RVxcdTA2NkZcXHUwNjcxLVxcdTA2RDNcXHUwNkQ1XFx1MDZFNVxcdTA2RTZcXHUwNkVFXFx1MDZFRlxcdTA2RkEtXFx1MDZGQ1xcdTA2RkZcXHUwNzEwXFx1MDcxMi1cXHUwNzJGXFx1MDc0RC1cXHUwN0E1XFx1MDdCMVxcdTA3Q0EtXFx1MDdFQVxcdTA3RjRcXHUwN0Y1XFx1MDdGQVxcdTA4MDAtXFx1MDgxNVxcdTA4MUFcXHUwODI0XFx1MDgyOFxcdTA4NDAtXFx1MDg1OFxcdTA4QTAtXFx1MDhCMlxcdTA5MDQtXFx1MDkzOVxcdTA5M0RcXHUwOTUwXFx1MDk1OC1cXHUwOTYxXFx1MDk3MS1cXHUwOTgwXFx1MDk4NS1cXHUwOThDXFx1MDk4RlxcdTA5OTBcXHUwOTkzLVxcdTA5QThcXHUwOUFBLVxcdTA5QjBcXHUwOUIyXFx1MDlCNi1cXHUwOUI5XFx1MDlCRFxcdTA5Q0VcXHUwOURDXFx1MDlERFxcdTA5REYtXFx1MDlFMVxcdTA5RjBcXHUwOUYxXFx1MEEwNS1cXHUwQTBBXFx1MEEwRlxcdTBBMTBcXHUwQTEzLVxcdTBBMjhcXHUwQTJBLVxcdTBBMzBcXHUwQTMyXFx1MEEzM1xcdTBBMzVcXHUwQTM2XFx1MEEzOFxcdTBBMzlcXHUwQTU5LVxcdTBBNUNcXHUwQTVFXFx1MEE3Mi1cXHUwQTc0XFx1MEE4NS1cXHUwQThEXFx1MEE4Ri1cXHUwQTkxXFx1MEE5My1cXHUwQUE4XFx1MEFBQS1cXHUwQUIwXFx1MEFCMlxcdTBBQjNcXHUwQUI1LVxcdTBBQjlcXHUwQUJEXFx1MEFEMFxcdTBBRTBcXHUwQUUxXFx1MEIwNS1cXHUwQjBDXFx1MEIwRlxcdTBCMTBcXHUwQjEzLVxcdTBCMjhcXHUwQjJBLVxcdTBCMzBcXHUwQjMyXFx1MEIzM1xcdTBCMzUtXFx1MEIzOVxcdTBCM0RcXHUwQjVDXFx1MEI1RFxcdTBCNUYtXFx1MEI2MVxcdTBCNzFcXHUwQjgzXFx1MEI4NS1cXHUwQjhBXFx1MEI4RS1cXHUwQjkwXFx1MEI5Mi1cXHUwQjk1XFx1MEI5OVxcdTBCOUFcXHUwQjlDXFx1MEI5RVxcdTBCOUZcXHUwQkEzXFx1MEJBNFxcdTBCQTgtXFx1MEJBQVxcdTBCQUUtXFx1MEJCOVxcdTBCRDBcXHUwQzA1LVxcdTBDMENcXHUwQzBFLVxcdTBDMTBcXHUwQzEyLVxcdTBDMjhcXHUwQzJBLVxcdTBDMzlcXHUwQzNEXFx1MEM1OFxcdTBDNTlcXHUwQzYwXFx1MEM2MVxcdTBDODUtXFx1MEM4Q1xcdTBDOEUtXFx1MEM5MFxcdTBDOTItXFx1MENBOFxcdTBDQUEtXFx1MENCM1xcdTBDQjUtXFx1MENCOVxcdTBDQkRcXHUwQ0RFXFx1MENFMFxcdTBDRTFcXHUwQ0YxXFx1MENGMlxcdTBEMDUtXFx1MEQwQ1xcdTBEMEUtXFx1MEQxMFxcdTBEMTItXFx1MEQzQVxcdTBEM0RcXHUwRDRFXFx1MEQ2MFxcdTBENjFcXHUwRDdBLVxcdTBEN0ZcXHUwRDg1LVxcdTBEOTZcXHUwRDlBLVxcdTBEQjFcXHUwREIzLVxcdTBEQkJcXHUwREJEXFx1MERDMC1cXHUwREM2XFx1MEUwMS1cXHUwRTMwXFx1MEUzMlxcdTBFMzNcXHUwRTQwLVxcdTBFNDZcXHUwRTgxXFx1MEU4MlxcdTBFODRcXHUwRTg3XFx1MEU4OFxcdTBFOEFcXHUwRThEXFx1MEU5NC1cXHUwRTk3XFx1MEU5OS1cXHUwRTlGXFx1MEVBMS1cXHUwRUEzXFx1MEVBNVxcdTBFQTdcXHUwRUFBXFx1MEVBQlxcdTBFQUQtXFx1MEVCMFxcdTBFQjJcXHUwRUIzXFx1MEVCRFxcdTBFQzAtXFx1MEVDNFxcdTBFQzZcXHUwRURDLVxcdTBFREZcXHUwRjAwXFx1MEY0MC1cXHUwRjQ3XFx1MEY0OS1cXHUwRjZDXFx1MEY4OC1cXHUwRjhDXFx1MTAwMC1cXHUxMDJBXFx1MTAzRlxcdTEwNTAtXFx1MTA1NVxcdTEwNUEtXFx1MTA1RFxcdTEwNjFcXHUxMDY1XFx1MTA2NlxcdTEwNkUtXFx1MTA3MFxcdTEwNzUtXFx1MTA4MVxcdTEwOEVcXHUxMEEwLVxcdTEwQzVcXHUxMEM3XFx1MTBDRFxcdTEwRDAtXFx1MTBGQVxcdTEwRkMtXFx1MTI0OFxcdTEyNEEtXFx1MTI0RFxcdTEyNTAtXFx1MTI1NlxcdTEyNThcXHUxMjVBLVxcdTEyNURcXHUxMjYwLVxcdTEyODhcXHUxMjhBLVxcdTEyOERcXHUxMjkwLVxcdTEyQjBcXHUxMkIyLVxcdTEyQjVcXHUxMkI4LVxcdTEyQkVcXHUxMkMwXFx1MTJDMi1cXHUxMkM1XFx1MTJDOC1cXHUxMkQ2XFx1MTJEOC1cXHUxMzEwXFx1MTMxMi1cXHUxMzE1XFx1MTMxOC1cXHUxMzVBXFx1MTM4MC1cXHUxMzhGXFx1MTNBMC1cXHUxM0Y0XFx1MTQwMS1cXHUxNjZDXFx1MTY2Ri1cXHUxNjdGXFx1MTY4MS1cXHUxNjlBXFx1MTZBMC1cXHUxNkVBXFx1MTZFRS1cXHUxNkY4XFx1MTcwMC1cXHUxNzBDXFx1MTcwRS1cXHUxNzExXFx1MTcyMC1cXHUxNzMxXFx1MTc0MC1cXHUxNzUxXFx1MTc2MC1cXHUxNzZDXFx1MTc2RS1cXHUxNzcwXFx1MTc4MC1cXHUxN0IzXFx1MTdEN1xcdTE3RENcXHUxODIwLVxcdTE4NzdcXHUxODgwLVxcdTE4QThcXHUxOEFBXFx1MThCMC1cXHUxOEY1XFx1MTkwMC1cXHUxOTFFXFx1MTk1MC1cXHUxOTZEXFx1MTk3MC1cXHUxOTc0XFx1MTk4MC1cXHUxOUFCXFx1MTlDMS1cXHUxOUM3XFx1MUEwMC1cXHUxQTE2XFx1MUEyMC1cXHUxQTU0XFx1MUFBN1xcdTFCMDUtXFx1MUIzM1xcdTFCNDUtXFx1MUI0QlxcdTFCODMtXFx1MUJBMFxcdTFCQUVcXHUxQkFGXFx1MUJCQS1cXHUxQkU1XFx1MUMwMC1cXHUxQzIzXFx1MUM0RC1cXHUxQzRGXFx1MUM1QS1cXHUxQzdEXFx1MUNFOS1cXHUxQ0VDXFx1MUNFRS1cXHUxQ0YxXFx1MUNGNVxcdTFDRjZcXHUxRDAwLVxcdTFEQkZcXHUxRTAwLVxcdTFGMTVcXHUxRjE4LVxcdTFGMURcXHUxRjIwLVxcdTFGNDVcXHUxRjQ4LVxcdTFGNERcXHUxRjUwLVxcdTFGNTdcXHUxRjU5XFx1MUY1QlxcdTFGNURcXHUxRjVGLVxcdTFGN0RcXHUxRjgwLVxcdTFGQjRcXHUxRkI2LVxcdTFGQkNcXHUxRkJFXFx1MUZDMi1cXHUxRkM0XFx1MUZDNi1cXHUxRkNDXFx1MUZEMC1cXHUxRkQzXFx1MUZENi1cXHUxRkRCXFx1MUZFMC1cXHUxRkVDXFx1MUZGMi1cXHUxRkY0XFx1MUZGNi1cXHUxRkZDXFx1MjA3MVxcdTIwN0ZcXHUyMDkwLVxcdTIwOUNcXHUyMTAyXFx1MjEwN1xcdTIxMEEtXFx1MjExM1xcdTIxMTVcXHUyMTE5LVxcdTIxMURcXHUyMTI0XFx1MjEyNlxcdTIxMjhcXHUyMTJBLVxcdTIxMkRcXHUyMTJGLVxcdTIxMzlcXHUyMTNDLVxcdTIxM0ZcXHUyMTQ1LVxcdTIxNDlcXHUyMTRFXFx1MjE2MC1cXHUyMTg4XFx1MkMwMC1cXHUyQzJFXFx1MkMzMC1cXHUyQzVFXFx1MkM2MC1cXHUyQ0U0XFx1MkNFQi1cXHUyQ0VFXFx1MkNGMlxcdTJDRjNcXHUyRDAwLVxcdTJEMjVcXHUyRDI3XFx1MkQyRFxcdTJEMzAtXFx1MkQ2N1xcdTJENkZcXHUyRDgwLVxcdTJEOTZcXHUyREEwLVxcdTJEQTZcXHUyREE4LVxcdTJEQUVcXHUyREIwLVxcdTJEQjZcXHUyREI4LVxcdTJEQkVcXHUyREMwLVxcdTJEQzZcXHUyREM4LVxcdTJEQ0VcXHUyREQwLVxcdTJERDZcXHUyREQ4LVxcdTJEREVcXHUyRTJGXFx1MzAwNS1cXHUzMDA3XFx1MzAyMS1cXHUzMDI5XFx1MzAzMS1cXHUzMDM1XFx1MzAzOC1cXHUzMDNDXFx1MzA0MS1cXHUzMDk2XFx1MzA5RC1cXHUzMDlGXFx1MzBBMS1cXHUzMEZBXFx1MzBGQy1cXHUzMEZGXFx1MzEwNS1cXHUzMTJEXFx1MzEzMS1cXHUzMThFXFx1MzFBMC1cXHUzMUJBXFx1MzFGMC1cXHUzMUZGXFx1MzQwMC1cXHU0REI1XFx1NEUwMC1cXHU5RkNDXFx1QTAwMC1cXHVBNDhDXFx1QTREMC1cXHVBNEZEXFx1QTUwMC1cXHVBNjBDXFx1QTYxMC1cXHVBNjFGXFx1QTYyQVxcdUE2MkJcXHVBNjQwLVxcdUE2NkVcXHVBNjdGLVxcdUE2OURcXHVBNkEwLVxcdUE2RUZcXHVBNzE3LVxcdUE3MUZcXHVBNzIyLVxcdUE3ODhcXHVBNzhCLVxcdUE3OEVcXHVBNzkwLVxcdUE3QURcXHVBN0IwXFx1QTdCMVxcdUE3RjctXFx1QTgwMVxcdUE4MDMtXFx1QTgwNVxcdUE4MDctXFx1QTgwQVxcdUE4MEMtXFx1QTgyMlxcdUE4NDAtXFx1QTg3M1xcdUE4ODItXFx1QThCM1xcdUE4RjItXFx1QThGN1xcdUE4RkJcXHVBOTBBLVxcdUE5MjVcXHVBOTMwLVxcdUE5NDZcXHVBOTYwLVxcdUE5N0NcXHVBOTg0LVxcdUE5QjJcXHVBOUNGXFx1QTlFMC1cXHVBOUU0XFx1QTlFNi1cXHVBOUVGXFx1QTlGQS1cXHVBOUZFXFx1QUEwMC1cXHVBQTI4XFx1QUE0MC1cXHVBQTQyXFx1QUE0NC1cXHVBQTRCXFx1QUE2MC1cXHVBQTc2XFx1QUE3QVxcdUFBN0UtXFx1QUFBRlxcdUFBQjFcXHVBQUI1XFx1QUFCNlxcdUFBQjktXFx1QUFCRFxcdUFBQzBcXHVBQUMyXFx1QUFEQi1cXHVBQUREXFx1QUFFMC1cXHVBQUVBXFx1QUFGMi1cXHVBQUY0XFx1QUIwMS1cXHVBQjA2XFx1QUIwOS1cXHVBQjBFXFx1QUIxMS1cXHVBQjE2XFx1QUIyMC1cXHVBQjI2XFx1QUIyOC1cXHVBQjJFXFx1QUIzMC1cXHVBQjVBXFx1QUI1Qy1cXHVBQjVGXFx1QUI2NFxcdUFCNjVcXHVBQkMwLVxcdUFCRTJcXHVBQzAwLVxcdUQ3QTNcXHVEN0IwLVxcdUQ3QzZcXHVEN0NCLVxcdUQ3RkJcXHVGOTAwLVxcdUZBNkRcXHVGQTcwLVxcdUZBRDlcXHVGQjAwLVxcdUZCMDZcXHVGQjEzLVxcdUZCMTdcXHVGQjFEXFx1RkIxRi1cXHVGQjI4XFx1RkIyQS1cXHVGQjM2XFx1RkIzOC1cXHVGQjNDXFx1RkIzRVxcdUZCNDBcXHVGQjQxXFx1RkI0M1xcdUZCNDRcXHVGQjQ2LVxcdUZCQjFcXHVGQkQzLVxcdUZEM0RcXHVGRDUwLVxcdUZEOEZcXHVGRDkyLVxcdUZEQzdcXHVGREYwLVxcdUZERkJcXHVGRTcwLVxcdUZFNzRcXHVGRTc2LVxcdUZFRkNcXHVGRjIxLVxcdUZGM0FcXHVGRjQxLVxcdUZGNUFcXHVGRjY2LVxcdUZGQkVcXHVGRkMyLVxcdUZGQzdcXHVGRkNBLVxcdUZGQ0ZcXHVGRkQyLVxcdUZGRDdcXHVGRkRBLVxcdUZGRENdLyxOb25Bc2NpaUlkZW50aWZpZXJQYXJ0Oi9bXFx4QUFcXHhCNVxceEJBXFx4QzAtXFx4RDZcXHhEOC1cXHhGNlxceEY4LVxcdTAyQzFcXHUwMkM2LVxcdTAyRDFcXHUwMkUwLVxcdTAyRTRcXHUwMkVDXFx1MDJFRVxcdTAzMDAtXFx1MDM3NFxcdTAzNzZcXHUwMzc3XFx1MDM3QS1cXHUwMzdEXFx1MDM3RlxcdTAzODZcXHUwMzg4LVxcdTAzOEFcXHUwMzhDXFx1MDM4RS1cXHUwM0ExXFx1MDNBMy1cXHUwM0Y1XFx1MDNGNy1cXHUwNDgxXFx1MDQ4My1cXHUwNDg3XFx1MDQ4QS1cXHUwNTJGXFx1MDUzMS1cXHUwNTU2XFx1MDU1OVxcdTA1NjEtXFx1MDU4N1xcdTA1OTEtXFx1MDVCRFxcdTA1QkZcXHUwNUMxXFx1MDVDMlxcdTA1QzRcXHUwNUM1XFx1MDVDN1xcdTA1RDAtXFx1MDVFQVxcdTA1RjAtXFx1MDVGMlxcdTA2MTAtXFx1MDYxQVxcdTA2MjAtXFx1MDY2OVxcdTA2NkUtXFx1MDZEM1xcdTA2RDUtXFx1MDZEQ1xcdTA2REYtXFx1MDZFOFxcdTA2RUEtXFx1MDZGQ1xcdTA2RkZcXHUwNzEwLVxcdTA3NEFcXHUwNzRELVxcdTA3QjFcXHUwN0MwLVxcdTA3RjVcXHUwN0ZBXFx1MDgwMC1cXHUwODJEXFx1MDg0MC1cXHUwODVCXFx1MDhBMC1cXHUwOEIyXFx1MDhFNC1cXHUwOTYzXFx1MDk2Ni1cXHUwOTZGXFx1MDk3MS1cXHUwOTgzXFx1MDk4NS1cXHUwOThDXFx1MDk4RlxcdTA5OTBcXHUwOTkzLVxcdTA5QThcXHUwOUFBLVxcdTA5QjBcXHUwOUIyXFx1MDlCNi1cXHUwOUI5XFx1MDlCQy1cXHUwOUM0XFx1MDlDN1xcdTA5QzhcXHUwOUNCLVxcdTA5Q0VcXHUwOUQ3XFx1MDlEQ1xcdTA5RERcXHUwOURGLVxcdTA5RTNcXHUwOUU2LVxcdTA5RjFcXHUwQTAxLVxcdTBBMDNcXHUwQTA1LVxcdTBBMEFcXHUwQTBGXFx1MEExMFxcdTBBMTMtXFx1MEEyOFxcdTBBMkEtXFx1MEEzMFxcdTBBMzJcXHUwQTMzXFx1MEEzNVxcdTBBMzZcXHUwQTM4XFx1MEEzOVxcdTBBM0NcXHUwQTNFLVxcdTBBNDJcXHUwQTQ3XFx1MEE0OFxcdTBBNEItXFx1MEE0RFxcdTBBNTFcXHUwQTU5LVxcdTBBNUNcXHUwQTVFXFx1MEE2Ni1cXHUwQTc1XFx1MEE4MS1cXHUwQTgzXFx1MEE4NS1cXHUwQThEXFx1MEE4Ri1cXHUwQTkxXFx1MEE5My1cXHUwQUE4XFx1MEFBQS1cXHUwQUIwXFx1MEFCMlxcdTBBQjNcXHUwQUI1LVxcdTBBQjlcXHUwQUJDLVxcdTBBQzVcXHUwQUM3LVxcdTBBQzlcXHUwQUNCLVxcdTBBQ0RcXHUwQUQwXFx1MEFFMC1cXHUwQUUzXFx1MEFFNi1cXHUwQUVGXFx1MEIwMS1cXHUwQjAzXFx1MEIwNS1cXHUwQjBDXFx1MEIwRlxcdTBCMTBcXHUwQjEzLVxcdTBCMjhcXHUwQjJBLVxcdTBCMzBcXHUwQjMyXFx1MEIzM1xcdTBCMzUtXFx1MEIzOVxcdTBCM0MtXFx1MEI0NFxcdTBCNDdcXHUwQjQ4XFx1MEI0Qi1cXHUwQjREXFx1MEI1NlxcdTBCNTdcXHUwQjVDXFx1MEI1RFxcdTBCNUYtXFx1MEI2M1xcdTBCNjYtXFx1MEI2RlxcdTBCNzFcXHUwQjgyXFx1MEI4M1xcdTBCODUtXFx1MEI4QVxcdTBCOEUtXFx1MEI5MFxcdTBCOTItXFx1MEI5NVxcdTBCOTlcXHUwQjlBXFx1MEI5Q1xcdTBCOUVcXHUwQjlGXFx1MEJBM1xcdTBCQTRcXHUwQkE4LVxcdTBCQUFcXHUwQkFFLVxcdTBCQjlcXHUwQkJFLVxcdTBCQzJcXHUwQkM2LVxcdTBCQzhcXHUwQkNBLVxcdTBCQ0RcXHUwQkQwXFx1MEJEN1xcdTBCRTYtXFx1MEJFRlxcdTBDMDAtXFx1MEMwM1xcdTBDMDUtXFx1MEMwQ1xcdTBDMEUtXFx1MEMxMFxcdTBDMTItXFx1MEMyOFxcdTBDMkEtXFx1MEMzOVxcdTBDM0QtXFx1MEM0NFxcdTBDNDYtXFx1MEM0OFxcdTBDNEEtXFx1MEM0RFxcdTBDNTVcXHUwQzU2XFx1MEM1OFxcdTBDNTlcXHUwQzYwLVxcdTBDNjNcXHUwQzY2LVxcdTBDNkZcXHUwQzgxLVxcdTBDODNcXHUwQzg1LVxcdTBDOENcXHUwQzhFLVxcdTBDOTBcXHUwQzkyLVxcdTBDQThcXHUwQ0FBLVxcdTBDQjNcXHUwQ0I1LVxcdTBDQjlcXHUwQ0JDLVxcdTBDQzRcXHUwQ0M2LVxcdTBDQzhcXHUwQ0NBLVxcdTBDQ0RcXHUwQ0Q1XFx1MENENlxcdTBDREVcXHUwQ0UwLVxcdTBDRTNcXHUwQ0U2LVxcdTBDRUZcXHUwQ0YxXFx1MENGMlxcdTBEMDEtXFx1MEQwM1xcdTBEMDUtXFx1MEQwQ1xcdTBEMEUtXFx1MEQxMFxcdTBEMTItXFx1MEQzQVxcdTBEM0QtXFx1MEQ0NFxcdTBENDYtXFx1MEQ0OFxcdTBENEEtXFx1MEQ0RVxcdTBENTdcXHUwRDYwLVxcdTBENjNcXHUwRDY2LVxcdTBENkZcXHUwRDdBLVxcdTBEN0ZcXHUwRDgyXFx1MEQ4M1xcdTBEODUtXFx1MEQ5NlxcdTBEOUEtXFx1MERCMVxcdTBEQjMtXFx1MERCQlxcdTBEQkRcXHUwREMwLVxcdTBEQzZcXHUwRENBXFx1MERDRi1cXHUwREQ0XFx1MERENlxcdTBERDgtXFx1MERERlxcdTBERTYtXFx1MERFRlxcdTBERjJcXHUwREYzXFx1MEUwMS1cXHUwRTNBXFx1MEU0MC1cXHUwRTRFXFx1MEU1MC1cXHUwRTU5XFx1MEU4MVxcdTBFODJcXHUwRTg0XFx1MEU4N1xcdTBFODhcXHUwRThBXFx1MEU4RFxcdTBFOTQtXFx1MEU5N1xcdTBFOTktXFx1MEU5RlxcdTBFQTEtXFx1MEVBM1xcdTBFQTVcXHUwRUE3XFx1MEVBQVxcdTBFQUJcXHUwRUFELVxcdTBFQjlcXHUwRUJCLVxcdTBFQkRcXHUwRUMwLVxcdTBFQzRcXHUwRUM2XFx1MEVDOC1cXHUwRUNEXFx1MEVEMC1cXHUwRUQ5XFx1MEVEQy1cXHUwRURGXFx1MEYwMFxcdTBGMThcXHUwRjE5XFx1MEYyMC1cXHUwRjI5XFx1MEYzNVxcdTBGMzdcXHUwRjM5XFx1MEYzRS1cXHUwRjQ3XFx1MEY0OS1cXHUwRjZDXFx1MEY3MS1cXHUwRjg0XFx1MEY4Ni1cXHUwRjk3XFx1MEY5OS1cXHUwRkJDXFx1MEZDNlxcdTEwMDAtXFx1MTA0OVxcdTEwNTAtXFx1MTA5RFxcdTEwQTAtXFx1MTBDNVxcdTEwQzdcXHUxMENEXFx1MTBEMC1cXHUxMEZBXFx1MTBGQy1cXHUxMjQ4XFx1MTI0QS1cXHUxMjREXFx1MTI1MC1cXHUxMjU2XFx1MTI1OFxcdTEyNUEtXFx1MTI1RFxcdTEyNjAtXFx1MTI4OFxcdTEyOEEtXFx1MTI4RFxcdTEyOTAtXFx1MTJCMFxcdTEyQjItXFx1MTJCNVxcdTEyQjgtXFx1MTJCRVxcdTEyQzBcXHUxMkMyLVxcdTEyQzVcXHUxMkM4LVxcdTEyRDZcXHUxMkQ4LVxcdTEzMTBcXHUxMzEyLVxcdTEzMTVcXHUxMzE4LVxcdTEzNUFcXHUxMzVELVxcdTEzNUZcXHUxMzgwLVxcdTEzOEZcXHUxM0EwLVxcdTEzRjRcXHUxNDAxLVxcdTE2NkNcXHUxNjZGLVxcdTE2N0ZcXHUxNjgxLVxcdTE2OUFcXHUxNkEwLVxcdTE2RUFcXHUxNkVFLVxcdTE2RjhcXHUxNzAwLVxcdTE3MENcXHUxNzBFLVxcdTE3MTRcXHUxNzIwLVxcdTE3MzRcXHUxNzQwLVxcdTE3NTNcXHUxNzYwLVxcdTE3NkNcXHUxNzZFLVxcdTE3NzBcXHUxNzcyXFx1MTc3M1xcdTE3ODAtXFx1MTdEM1xcdTE3RDdcXHUxN0RDXFx1MTdERFxcdTE3RTAtXFx1MTdFOVxcdTE4MEItXFx1MTgwRFxcdTE4MTAtXFx1MTgxOVxcdTE4MjAtXFx1MTg3N1xcdTE4ODAtXFx1MThBQVxcdTE4QjAtXFx1MThGNVxcdTE5MDAtXFx1MTkxRVxcdTE5MjAtXFx1MTkyQlxcdTE5MzAtXFx1MTkzQlxcdTE5NDYtXFx1MTk2RFxcdTE5NzAtXFx1MTk3NFxcdTE5ODAtXFx1MTlBQlxcdTE5QjAtXFx1MTlDOVxcdTE5RDAtXFx1MTlEOVxcdTFBMDAtXFx1MUExQlxcdTFBMjAtXFx1MUE1RVxcdTFBNjAtXFx1MUE3Q1xcdTFBN0YtXFx1MUE4OVxcdTFBOTAtXFx1MUE5OVxcdTFBQTdcXHUxQUIwLVxcdTFBQkRcXHUxQjAwLVxcdTFCNEJcXHUxQjUwLVxcdTFCNTlcXHUxQjZCLVxcdTFCNzNcXHUxQjgwLVxcdTFCRjNcXHUxQzAwLVxcdTFDMzdcXHUxQzQwLVxcdTFDNDlcXHUxQzRELVxcdTFDN0RcXHUxQ0QwLVxcdTFDRDJcXHUxQ0Q0LVxcdTFDRjZcXHUxQ0Y4XFx1MUNGOVxcdTFEMDAtXFx1MURGNVxcdTFERkMtXFx1MUYxNVxcdTFGMTgtXFx1MUYxRFxcdTFGMjAtXFx1MUY0NVxcdTFGNDgtXFx1MUY0RFxcdTFGNTAtXFx1MUY1N1xcdTFGNTlcXHUxRjVCXFx1MUY1RFxcdTFGNUYtXFx1MUY3RFxcdTFGODAtXFx1MUZCNFxcdTFGQjYtXFx1MUZCQ1xcdTFGQkVcXHUxRkMyLVxcdTFGQzRcXHUxRkM2LVxcdTFGQ0NcXHUxRkQwLVxcdTFGRDNcXHUxRkQ2LVxcdTFGREJcXHUxRkUwLVxcdTFGRUNcXHUxRkYyLVxcdTFGRjRcXHUxRkY2LVxcdTFGRkNcXHUyMDBDXFx1MjAwRFxcdTIwM0ZcXHUyMDQwXFx1MjA1NFxcdTIwNzFcXHUyMDdGXFx1MjA5MC1cXHUyMDlDXFx1MjBEMC1cXHUyMERDXFx1MjBFMVxcdTIwRTUtXFx1MjBGMFxcdTIxMDJcXHUyMTA3XFx1MjEwQS1cXHUyMTEzXFx1MjExNVxcdTIxMTktXFx1MjExRFxcdTIxMjRcXHUyMTI2XFx1MjEyOFxcdTIxMkEtXFx1MjEyRFxcdTIxMkYtXFx1MjEzOVxcdTIxM0MtXFx1MjEzRlxcdTIxNDUtXFx1MjE0OVxcdTIxNEVcXHUyMTYwLVxcdTIxODhcXHUyQzAwLVxcdTJDMkVcXHUyQzMwLVxcdTJDNUVcXHUyQzYwLVxcdTJDRTRcXHUyQ0VCLVxcdTJDRjNcXHUyRDAwLVxcdTJEMjVcXHUyRDI3XFx1MkQyRFxcdTJEMzAtXFx1MkQ2N1xcdTJENkZcXHUyRDdGLVxcdTJEOTZcXHUyREEwLVxcdTJEQTZcXHUyREE4LVxcdTJEQUVcXHUyREIwLVxcdTJEQjZcXHUyREI4LVxcdTJEQkVcXHUyREMwLVxcdTJEQzZcXHUyREM4LVxcdTJEQ0VcXHUyREQwLVxcdTJERDZcXHUyREQ4LVxcdTJEREVcXHUyREUwLVxcdTJERkZcXHUyRTJGXFx1MzAwNS1cXHUzMDA3XFx1MzAyMS1cXHUzMDJGXFx1MzAzMS1cXHUzMDM1XFx1MzAzOC1cXHUzMDNDXFx1MzA0MS1cXHUzMDk2XFx1MzA5OVxcdTMwOUFcXHUzMDlELVxcdTMwOUZcXHUzMEExLVxcdTMwRkFcXHUzMEZDLVxcdTMwRkZcXHUzMTA1LVxcdTMxMkRcXHUzMTMxLVxcdTMxOEVcXHUzMUEwLVxcdTMxQkFcXHUzMUYwLVxcdTMxRkZcXHUzNDAwLVxcdTREQjVcXHU0RTAwLVxcdTlGQ0NcXHVBMDAwLVxcdUE0OENcXHVBNEQwLVxcdUE0RkRcXHVBNTAwLVxcdUE2MENcXHVBNjEwLVxcdUE2MkJcXHVBNjQwLVxcdUE2NkZcXHVBNjc0LVxcdUE2N0RcXHVBNjdGLVxcdUE2OURcXHVBNjlGLVxcdUE2RjFcXHVBNzE3LVxcdUE3MUZcXHVBNzIyLVxcdUE3ODhcXHVBNzhCLVxcdUE3OEVcXHVBNzkwLVxcdUE3QURcXHVBN0IwXFx1QTdCMVxcdUE3RjctXFx1QTgyN1xcdUE4NDAtXFx1QTg3M1xcdUE4ODAtXFx1QThDNFxcdUE4RDAtXFx1QThEOVxcdUE4RTAtXFx1QThGN1xcdUE4RkJcXHVBOTAwLVxcdUE5MkRcXHVBOTMwLVxcdUE5NTNcXHVBOTYwLVxcdUE5N0NcXHVBOTgwLVxcdUE5QzBcXHVBOUNGLVxcdUE5RDlcXHVBOUUwLVxcdUE5RkVcXHVBQTAwLVxcdUFBMzZcXHVBQTQwLVxcdUFBNERcXHVBQTUwLVxcdUFBNTlcXHVBQTYwLVxcdUFBNzZcXHVBQTdBLVxcdUFBQzJcXHVBQURCLVxcdUFBRERcXHVBQUUwLVxcdUFBRUZcXHVBQUYyLVxcdUFBRjZcXHVBQjAxLVxcdUFCMDZcXHVBQjA5LVxcdUFCMEVcXHVBQjExLVxcdUFCMTZcXHVBQjIwLVxcdUFCMjZcXHVBQjI4LVxcdUFCMkVcXHVBQjMwLVxcdUFCNUFcXHVBQjVDLVxcdUFCNUZcXHVBQjY0XFx1QUI2NVxcdUFCQzAtXFx1QUJFQVxcdUFCRUNcXHVBQkVEXFx1QUJGMC1cXHVBQkY5XFx1QUMwMC1cXHVEN0EzXFx1RDdCMC1cXHVEN0M2XFx1RDdDQi1cXHVEN0ZCXFx1RjkwMC1cXHVGQTZEXFx1RkE3MC1cXHVGQUQ5XFx1RkIwMC1cXHVGQjA2XFx1RkIxMy1cXHVGQjE3XFx1RkIxRC1cXHVGQjI4XFx1RkIyQS1cXHVGQjM2XFx1RkIzOC1cXHVGQjNDXFx1RkIzRVxcdUZCNDBcXHVGQjQxXFx1RkI0M1xcdUZCNDRcXHVGQjQ2LVxcdUZCQjFcXHVGQkQzLVxcdUZEM0RcXHVGRDUwLVxcdUZEOEZcXHVGRDkyLVxcdUZEQzdcXHVGREYwLVxcdUZERkJcXHVGRTAwLVxcdUZFMEZcXHVGRTIwLVxcdUZFMkRcXHVGRTMzXFx1RkUzNFxcdUZFNEQtXFx1RkU0RlxcdUZFNzAtXFx1RkU3NFxcdUZFNzYtXFx1RkVGQ1xcdUZGMTAtXFx1RkYxOVxcdUZGMjEtXFx1RkYzQVxcdUZGM0ZcXHVGRjQxLVxcdUZGNUFcXHVGRjY2LVxcdUZGQkVcXHVGRkMyLVxcdUZGQzdcXHVGRkNBLVxcdUZGQ0ZcXHVGRkQyLVxcdUZGRDdcXHVGRkRBLVxcdUZGRENdL1xufTtlPXtOb25Bc2NpaUlkZW50aWZpZXJTdGFydDovW1xceEFBXFx4QjVcXHhCQVxceEMwLVxceEQ2XFx4RDgtXFx4RjZcXHhGOC1cXHUwMkMxXFx1MDJDNi1cXHUwMkQxXFx1MDJFMC1cXHUwMkU0XFx1MDJFQ1xcdTAyRUVcXHUwMzcwLVxcdTAzNzRcXHUwMzc2XFx1MDM3N1xcdTAzN0EtXFx1MDM3RFxcdTAzN0ZcXHUwMzg2XFx1MDM4OC1cXHUwMzhBXFx1MDM4Q1xcdTAzOEUtXFx1MDNBMVxcdTAzQTMtXFx1MDNGNVxcdTAzRjctXFx1MDQ4MVxcdTA0OEEtXFx1MDUyRlxcdTA1MzEtXFx1MDU1NlxcdTA1NTlcXHUwNTYxLVxcdTA1ODdcXHUwNUQwLVxcdTA1RUFcXHUwNUYwLVxcdTA1RjJcXHUwNjIwLVxcdTA2NEFcXHUwNjZFXFx1MDY2RlxcdTA2NzEtXFx1MDZEM1xcdTA2RDVcXHUwNkU1XFx1MDZFNlxcdTA2RUVcXHUwNkVGXFx1MDZGQS1cXHUwNkZDXFx1MDZGRlxcdTA3MTBcXHUwNzEyLVxcdTA3MkZcXHUwNzRELVxcdTA3QTVcXHUwN0IxXFx1MDdDQS1cXHUwN0VBXFx1MDdGNFxcdTA3RjVcXHUwN0ZBXFx1MDgwMC1cXHUwODE1XFx1MDgxQVxcdTA4MjRcXHUwODI4XFx1MDg0MC1cXHUwODU4XFx1MDhBMC1cXHUwOEIyXFx1MDkwNC1cXHUwOTM5XFx1MDkzRFxcdTA5NTBcXHUwOTU4LVxcdTA5NjFcXHUwOTcxLVxcdTA5ODBcXHUwOTg1LVxcdTA5OENcXHUwOThGXFx1MDk5MFxcdTA5OTMtXFx1MDlBOFxcdTA5QUEtXFx1MDlCMFxcdTA5QjJcXHUwOUI2LVxcdTA5QjlcXHUwOUJEXFx1MDlDRVxcdTA5RENcXHUwOUREXFx1MDlERi1cXHUwOUUxXFx1MDlGMFxcdTA5RjFcXHUwQTA1LVxcdTBBMEFcXHUwQTBGXFx1MEExMFxcdTBBMTMtXFx1MEEyOFxcdTBBMkEtXFx1MEEzMFxcdTBBMzJcXHUwQTMzXFx1MEEzNVxcdTBBMzZcXHUwQTM4XFx1MEEzOVxcdTBBNTktXFx1MEE1Q1xcdTBBNUVcXHUwQTcyLVxcdTBBNzRcXHUwQTg1LVxcdTBBOERcXHUwQThGLVxcdTBBOTFcXHUwQTkzLVxcdTBBQThcXHUwQUFBLVxcdTBBQjBcXHUwQUIyXFx1MEFCM1xcdTBBQjUtXFx1MEFCOVxcdTBBQkRcXHUwQUQwXFx1MEFFMFxcdTBBRTFcXHUwQjA1LVxcdTBCMENcXHUwQjBGXFx1MEIxMFxcdTBCMTMtXFx1MEIyOFxcdTBCMkEtXFx1MEIzMFxcdTBCMzJcXHUwQjMzXFx1MEIzNS1cXHUwQjM5XFx1MEIzRFxcdTBCNUNcXHUwQjVEXFx1MEI1Ri1cXHUwQjYxXFx1MEI3MVxcdTBCODNcXHUwQjg1LVxcdTBCOEFcXHUwQjhFLVxcdTBCOTBcXHUwQjkyLVxcdTBCOTVcXHUwQjk5XFx1MEI5QVxcdTBCOUNcXHUwQjlFXFx1MEI5RlxcdTBCQTNcXHUwQkE0XFx1MEJBOC1cXHUwQkFBXFx1MEJBRS1cXHUwQkI5XFx1MEJEMFxcdTBDMDUtXFx1MEMwQ1xcdTBDMEUtXFx1MEMxMFxcdTBDMTItXFx1MEMyOFxcdTBDMkEtXFx1MEMzOVxcdTBDM0RcXHUwQzU4XFx1MEM1OVxcdTBDNjBcXHUwQzYxXFx1MEM4NS1cXHUwQzhDXFx1MEM4RS1cXHUwQzkwXFx1MEM5Mi1cXHUwQ0E4XFx1MENBQS1cXHUwQ0IzXFx1MENCNS1cXHUwQ0I5XFx1MENCRFxcdTBDREVcXHUwQ0UwXFx1MENFMVxcdTBDRjFcXHUwQ0YyXFx1MEQwNS1cXHUwRDBDXFx1MEQwRS1cXHUwRDEwXFx1MEQxMi1cXHUwRDNBXFx1MEQzRFxcdTBENEVcXHUwRDYwXFx1MEQ2MVxcdTBEN0EtXFx1MEQ3RlxcdTBEODUtXFx1MEQ5NlxcdTBEOUEtXFx1MERCMVxcdTBEQjMtXFx1MERCQlxcdTBEQkRcXHUwREMwLVxcdTBEQzZcXHUwRTAxLVxcdTBFMzBcXHUwRTMyXFx1MEUzM1xcdTBFNDAtXFx1MEU0NlxcdTBFODFcXHUwRTgyXFx1MEU4NFxcdTBFODdcXHUwRTg4XFx1MEU4QVxcdTBFOERcXHUwRTk0LVxcdTBFOTdcXHUwRTk5LVxcdTBFOUZcXHUwRUExLVxcdTBFQTNcXHUwRUE1XFx1MEVBN1xcdTBFQUFcXHUwRUFCXFx1MEVBRC1cXHUwRUIwXFx1MEVCMlxcdTBFQjNcXHUwRUJEXFx1MEVDMC1cXHUwRUM0XFx1MEVDNlxcdTBFREMtXFx1MEVERlxcdTBGMDBcXHUwRjQwLVxcdTBGNDdcXHUwRjQ5LVxcdTBGNkNcXHUwRjg4LVxcdTBGOENcXHUxMDAwLVxcdTEwMkFcXHUxMDNGXFx1MTA1MC1cXHUxMDU1XFx1MTA1QS1cXHUxMDVEXFx1MTA2MVxcdTEwNjVcXHUxMDY2XFx1MTA2RS1cXHUxMDcwXFx1MTA3NS1cXHUxMDgxXFx1MTA4RVxcdTEwQTAtXFx1MTBDNVxcdTEwQzdcXHUxMENEXFx1MTBEMC1cXHUxMEZBXFx1MTBGQy1cXHUxMjQ4XFx1MTI0QS1cXHUxMjREXFx1MTI1MC1cXHUxMjU2XFx1MTI1OFxcdTEyNUEtXFx1MTI1RFxcdTEyNjAtXFx1MTI4OFxcdTEyOEEtXFx1MTI4RFxcdTEyOTAtXFx1MTJCMFxcdTEyQjItXFx1MTJCNVxcdTEyQjgtXFx1MTJCRVxcdTEyQzBcXHUxMkMyLVxcdTEyQzVcXHUxMkM4LVxcdTEyRDZcXHUxMkQ4LVxcdTEzMTBcXHUxMzEyLVxcdTEzMTVcXHUxMzE4LVxcdTEzNUFcXHUxMzgwLVxcdTEzOEZcXHUxM0EwLVxcdTEzRjRcXHUxNDAxLVxcdTE2NkNcXHUxNjZGLVxcdTE2N0ZcXHUxNjgxLVxcdTE2OUFcXHUxNkEwLVxcdTE2RUFcXHUxNkVFLVxcdTE2RjhcXHUxNzAwLVxcdTE3MENcXHUxNzBFLVxcdTE3MTFcXHUxNzIwLVxcdTE3MzFcXHUxNzQwLVxcdTE3NTFcXHUxNzYwLVxcdTE3NkNcXHUxNzZFLVxcdTE3NzBcXHUxNzgwLVxcdTE3QjNcXHUxN0Q3XFx1MTdEQ1xcdTE4MjAtXFx1MTg3N1xcdTE4ODAtXFx1MThBOFxcdTE4QUFcXHUxOEIwLVxcdTE4RjVcXHUxOTAwLVxcdTE5MUVcXHUxOTUwLVxcdTE5NkRcXHUxOTcwLVxcdTE5NzRcXHUxOTgwLVxcdTE5QUJcXHUxOUMxLVxcdTE5QzdcXHUxQTAwLVxcdTFBMTZcXHUxQTIwLVxcdTFBNTRcXHUxQUE3XFx1MUIwNS1cXHUxQjMzXFx1MUI0NS1cXHUxQjRCXFx1MUI4My1cXHUxQkEwXFx1MUJBRVxcdTFCQUZcXHUxQkJBLVxcdTFCRTVcXHUxQzAwLVxcdTFDMjNcXHUxQzRELVxcdTFDNEZcXHUxQzVBLVxcdTFDN0RcXHUxQ0U5LVxcdTFDRUNcXHUxQ0VFLVxcdTFDRjFcXHUxQ0Y1XFx1MUNGNlxcdTFEMDAtXFx1MURCRlxcdTFFMDAtXFx1MUYxNVxcdTFGMTgtXFx1MUYxRFxcdTFGMjAtXFx1MUY0NVxcdTFGNDgtXFx1MUY0RFxcdTFGNTAtXFx1MUY1N1xcdTFGNTlcXHUxRjVCXFx1MUY1RFxcdTFGNUYtXFx1MUY3RFxcdTFGODAtXFx1MUZCNFxcdTFGQjYtXFx1MUZCQ1xcdTFGQkVcXHUxRkMyLVxcdTFGQzRcXHUxRkM2LVxcdTFGQ0NcXHUxRkQwLVxcdTFGRDNcXHUxRkQ2LVxcdTFGREJcXHUxRkUwLVxcdTFGRUNcXHUxRkYyLVxcdTFGRjRcXHUxRkY2LVxcdTFGRkNcXHUyMDcxXFx1MjA3RlxcdTIwOTAtXFx1MjA5Q1xcdTIxMDJcXHUyMTA3XFx1MjEwQS1cXHUyMTEzXFx1MjExNVxcdTIxMTgtXFx1MjExRFxcdTIxMjRcXHUyMTI2XFx1MjEyOFxcdTIxMkEtXFx1MjEzOVxcdTIxM0MtXFx1MjEzRlxcdTIxNDUtXFx1MjE0OVxcdTIxNEVcXHUyMTYwLVxcdTIxODhcXHUyQzAwLVxcdTJDMkVcXHUyQzMwLVxcdTJDNUVcXHUyQzYwLVxcdTJDRTRcXHUyQ0VCLVxcdTJDRUVcXHUyQ0YyXFx1MkNGM1xcdTJEMDAtXFx1MkQyNVxcdTJEMjdcXHUyRDJEXFx1MkQzMC1cXHUyRDY3XFx1MkQ2RlxcdTJEODAtXFx1MkQ5NlxcdTJEQTAtXFx1MkRBNlxcdTJEQTgtXFx1MkRBRVxcdTJEQjAtXFx1MkRCNlxcdTJEQjgtXFx1MkRCRVxcdTJEQzAtXFx1MkRDNlxcdTJEQzgtXFx1MkRDRVxcdTJERDAtXFx1MkRENlxcdTJERDgtXFx1MkRERVxcdTMwMDUtXFx1MzAwN1xcdTMwMjEtXFx1MzAyOVxcdTMwMzEtXFx1MzAzNVxcdTMwMzgtXFx1MzAzQ1xcdTMwNDEtXFx1MzA5NlxcdTMwOUItXFx1MzA5RlxcdTMwQTEtXFx1MzBGQVxcdTMwRkMtXFx1MzBGRlxcdTMxMDUtXFx1MzEyRFxcdTMxMzEtXFx1MzE4RVxcdTMxQTAtXFx1MzFCQVxcdTMxRjAtXFx1MzFGRlxcdTM0MDAtXFx1NERCNVxcdTRFMDAtXFx1OUZDQ1xcdUEwMDAtXFx1QTQ4Q1xcdUE0RDAtXFx1QTRGRFxcdUE1MDAtXFx1QTYwQ1xcdUE2MTAtXFx1QTYxRlxcdUE2MkFcXHVBNjJCXFx1QTY0MC1cXHVBNjZFXFx1QTY3Ri1cXHVBNjlEXFx1QTZBMC1cXHVBNkVGXFx1QTcxNy1cXHVBNzFGXFx1QTcyMi1cXHVBNzg4XFx1QTc4Qi1cXHVBNzhFXFx1QTc5MC1cXHVBN0FEXFx1QTdCMFxcdUE3QjFcXHVBN0Y3LVxcdUE4MDFcXHVBODAzLVxcdUE4MDVcXHVBODA3LVxcdUE4MEFcXHVBODBDLVxcdUE4MjJcXHVBODQwLVxcdUE4NzNcXHVBODgyLVxcdUE4QjNcXHVBOEYyLVxcdUE4RjdcXHVBOEZCXFx1QTkwQS1cXHVBOTI1XFx1QTkzMC1cXHVBOTQ2XFx1QTk2MC1cXHVBOTdDXFx1QTk4NC1cXHVBOUIyXFx1QTlDRlxcdUE5RTAtXFx1QTlFNFxcdUE5RTYtXFx1QTlFRlxcdUE5RkEtXFx1QTlGRVxcdUFBMDAtXFx1QUEyOFxcdUFBNDAtXFx1QUE0MlxcdUFBNDQtXFx1QUE0QlxcdUFBNjAtXFx1QUE3NlxcdUFBN0FcXHVBQTdFLVxcdUFBQUZcXHVBQUIxXFx1QUFCNVxcdUFBQjZcXHVBQUI5LVxcdUFBQkRcXHVBQUMwXFx1QUFDMlxcdUFBREItXFx1QUFERFxcdUFBRTAtXFx1QUFFQVxcdUFBRjItXFx1QUFGNFxcdUFCMDEtXFx1QUIwNlxcdUFCMDktXFx1QUIwRVxcdUFCMTEtXFx1QUIxNlxcdUFCMjAtXFx1QUIyNlxcdUFCMjgtXFx1QUIyRVxcdUFCMzAtXFx1QUI1QVxcdUFCNUMtXFx1QUI1RlxcdUFCNjRcXHVBQjY1XFx1QUJDMC1cXHVBQkUyXFx1QUMwMC1cXHVEN0EzXFx1RDdCMC1cXHVEN0M2XFx1RDdDQi1cXHVEN0ZCXFx1RjkwMC1cXHVGQTZEXFx1RkE3MC1cXHVGQUQ5XFx1RkIwMC1cXHVGQjA2XFx1RkIxMy1cXHVGQjE3XFx1RkIxRFxcdUZCMUYtXFx1RkIyOFxcdUZCMkEtXFx1RkIzNlxcdUZCMzgtXFx1RkIzQ1xcdUZCM0VcXHVGQjQwXFx1RkI0MVxcdUZCNDNcXHVGQjQ0XFx1RkI0Ni1cXHVGQkIxXFx1RkJEMy1cXHVGRDNEXFx1RkQ1MC1cXHVGRDhGXFx1RkQ5Mi1cXHVGREM3XFx1RkRGMC1cXHVGREZCXFx1RkU3MC1cXHVGRTc0XFx1RkU3Ni1cXHVGRUZDXFx1RkYyMS1cXHVGRjNBXFx1RkY0MS1cXHVGRjVBXFx1RkY2Ni1cXHVGRkJFXFx1RkZDMi1cXHVGRkM3XFx1RkZDQS1cXHVGRkNGXFx1RkZEMi1cXHVGRkQ3XFx1RkZEQS1cXHVGRkRDXXxcXHVEODAwW1xcdURDMDAtXFx1REMwQlxcdURDMEQtXFx1REMyNlxcdURDMjgtXFx1REMzQVxcdURDM0NcXHVEQzNEXFx1REMzRi1cXHVEQzREXFx1REM1MC1cXHVEQzVEXFx1REM4MC1cXHVEQ0ZBXFx1REQ0MC1cXHVERDc0XFx1REU4MC1cXHVERTlDXFx1REVBMC1cXHVERUQwXFx1REYwMC1cXHVERjFGXFx1REYzMC1cXHVERjRBXFx1REY1MC1cXHVERjc1XFx1REY4MC1cXHVERjlEXFx1REZBMC1cXHVERkMzXFx1REZDOC1cXHVERkNGXFx1REZEMS1cXHVERkQ1XXxcXHVEODAxW1xcdURDMDAtXFx1REM5RFxcdUREMDAtXFx1REQyN1xcdUREMzAtXFx1REQ2M1xcdURFMDAtXFx1REYzNlxcdURGNDAtXFx1REY1NVxcdURGNjAtXFx1REY2N118XFx1RDgwMltcXHVEQzAwLVxcdURDMDVcXHVEQzA4XFx1REMwQS1cXHVEQzM1XFx1REMzN1xcdURDMzhcXHVEQzNDXFx1REMzRi1cXHVEQzU1XFx1REM2MC1cXHVEQzc2XFx1REM4MC1cXHVEQzlFXFx1REQwMC1cXHVERDE1XFx1REQyMC1cXHVERDM5XFx1REQ4MC1cXHVEREI3XFx1RERCRVxcdUREQkZcXHVERTAwXFx1REUxMC1cXHVERTEzXFx1REUxNS1cXHVERTE3XFx1REUxOS1cXHVERTMzXFx1REU2MC1cXHVERTdDXFx1REU4MC1cXHVERTlDXFx1REVDMC1cXHVERUM3XFx1REVDOS1cXHVERUU0XFx1REYwMC1cXHVERjM1XFx1REY0MC1cXHVERjU1XFx1REY2MC1cXHVERjcyXFx1REY4MC1cXHVERjkxXXxcXHVEODAzW1xcdURDMDAtXFx1REM0OF18XFx1RDgwNFtcXHVEQzAzLVxcdURDMzdcXHVEQzgzLVxcdURDQUZcXHVEQ0QwLVxcdURDRThcXHVERDAzLVxcdUREMjZcXHVERDUwLVxcdURENzJcXHVERDc2XFx1REQ4My1cXHVEREIyXFx1RERDMS1cXHVEREM0XFx1REREQVxcdURFMDAtXFx1REUxMVxcdURFMTMtXFx1REUyQlxcdURFQjAtXFx1REVERVxcdURGMDUtXFx1REYwQ1xcdURGMEZcXHVERjEwXFx1REYxMy1cXHVERjI4XFx1REYyQS1cXHVERjMwXFx1REYzMlxcdURGMzNcXHVERjM1LVxcdURGMzlcXHVERjNEXFx1REY1RC1cXHVERjYxXXxcXHVEODA1W1xcdURDODAtXFx1RENBRlxcdURDQzRcXHVEQ0M1XFx1RENDN1xcdUREODAtXFx1RERBRVxcdURFMDAtXFx1REUyRlxcdURFNDRcXHVERTgwLVxcdURFQUFdfFxcdUQ4MDZbXFx1RENBMC1cXHVEQ0RGXFx1RENGRlxcdURFQzAtXFx1REVGOF18XFx1RDgwOFtcXHVEQzAwLVxcdURGOThdfFxcdUQ4MDlbXFx1REMwMC1cXHVEQzZFXXxbXFx1RDgwQ1xcdUQ4NDAtXFx1RDg2OFxcdUQ4NkEtXFx1RDg2Q11bXFx1REMwMC1cXHVERkZGXXxcXHVEODBEW1xcdURDMDAtXFx1REMyRV18XFx1RDgxQVtcXHVEQzAwLVxcdURFMzhcXHVERTQwLVxcdURFNUVcXHVERUQwLVxcdURFRURcXHVERjAwLVxcdURGMkZcXHVERjQwLVxcdURGNDNcXHVERjYzLVxcdURGNzdcXHVERjdELVxcdURGOEZdfFxcdUQ4MUJbXFx1REYwMC1cXHVERjQ0XFx1REY1MFxcdURGOTMtXFx1REY5Rl18XFx1RDgyQ1tcXHVEQzAwXFx1REMwMV18XFx1RDgyRltcXHVEQzAwLVxcdURDNkFcXHVEQzcwLVxcdURDN0NcXHVEQzgwLVxcdURDODhcXHVEQzkwLVxcdURDOTldfFxcdUQ4MzVbXFx1REMwMC1cXHVEQzU0XFx1REM1Ni1cXHVEQzlDXFx1REM5RVxcdURDOUZcXHVEQ0EyXFx1RENBNVxcdURDQTZcXHVEQ0E5LVxcdURDQUNcXHVEQ0FFLVxcdURDQjlcXHVEQ0JCXFx1RENCRC1cXHVEQ0MzXFx1RENDNS1cXHVERDA1XFx1REQwNy1cXHVERDBBXFx1REQwRC1cXHVERDE0XFx1REQxNi1cXHVERDFDXFx1REQxRS1cXHVERDM5XFx1REQzQi1cXHVERDNFXFx1REQ0MC1cXHVERDQ0XFx1REQ0NlxcdURENEEtXFx1REQ1MFxcdURENTItXFx1REVBNVxcdURFQTgtXFx1REVDMFxcdURFQzItXFx1REVEQVxcdURFREMtXFx1REVGQVxcdURFRkMtXFx1REYxNFxcdURGMTYtXFx1REYzNFxcdURGMzYtXFx1REY0RVxcdURGNTAtXFx1REY2RVxcdURGNzAtXFx1REY4OFxcdURGOEEtXFx1REZBOFxcdURGQUEtXFx1REZDMlxcdURGQzQtXFx1REZDQl18XFx1RDgzQVtcXHVEQzAwLVxcdURDQzRdfFxcdUQ4M0JbXFx1REUwMC1cXHVERTAzXFx1REUwNS1cXHVERTFGXFx1REUyMVxcdURFMjJcXHVERTI0XFx1REUyN1xcdURFMjktXFx1REUzMlxcdURFMzQtXFx1REUzN1xcdURFMzlcXHVERTNCXFx1REU0MlxcdURFNDdcXHVERTQ5XFx1REU0QlxcdURFNEQtXFx1REU0RlxcdURFNTFcXHVERTUyXFx1REU1NFxcdURFNTdcXHVERTU5XFx1REU1QlxcdURFNURcXHVERTVGXFx1REU2MVxcdURFNjJcXHVERTY0XFx1REU2Ny1cXHVERTZBXFx1REU2Qy1cXHVERTcyXFx1REU3NC1cXHVERTc3XFx1REU3OS1cXHVERTdDXFx1REU3RVxcdURFODAtXFx1REU4OVxcdURFOEItXFx1REU5QlxcdURFQTEtXFx1REVBM1xcdURFQTUtXFx1REVBOVxcdURFQUItXFx1REVCQl18XFx1RDg2OVtcXHVEQzAwLVxcdURFRDZcXHVERjAwLVxcdURGRkZdfFxcdUQ4NkRbXFx1REMwMC1cXHVERjM0XFx1REY0MC1cXHVERkZGXXxcXHVEODZFW1xcdURDMDAtXFx1REMxRF18XFx1RDg3RVtcXHVEQzAwLVxcdURFMURdLyxOb25Bc2NpaUlkZW50aWZpZXJQYXJ0Oi9bXFx4QUFcXHhCNVxceEI3XFx4QkFcXHhDMC1cXHhENlxceEQ4LVxceEY2XFx4RjgtXFx1MDJDMVxcdTAyQzYtXFx1MDJEMVxcdTAyRTAtXFx1MDJFNFxcdTAyRUNcXHUwMkVFXFx1MDMwMC1cXHUwMzc0XFx1MDM3NlxcdTAzNzdcXHUwMzdBLVxcdTAzN0RcXHUwMzdGXFx1MDM4Ni1cXHUwMzhBXFx1MDM4Q1xcdTAzOEUtXFx1MDNBMVxcdTAzQTMtXFx1MDNGNVxcdTAzRjctXFx1MDQ4MVxcdTA0ODMtXFx1MDQ4N1xcdTA0OEEtXFx1MDUyRlxcdTA1MzEtXFx1MDU1NlxcdTA1NTlcXHUwNTYxLVxcdTA1ODdcXHUwNTkxLVxcdTA1QkRcXHUwNUJGXFx1MDVDMVxcdTA1QzJcXHUwNUM0XFx1MDVDNVxcdTA1QzdcXHUwNUQwLVxcdTA1RUFcXHUwNUYwLVxcdTA1RjJcXHUwNjEwLVxcdTA2MUFcXHUwNjIwLVxcdTA2NjlcXHUwNjZFLVxcdTA2RDNcXHUwNkQ1LVxcdTA2RENcXHUwNkRGLVxcdTA2RThcXHUwNkVBLVxcdTA2RkNcXHUwNkZGXFx1MDcxMC1cXHUwNzRBXFx1MDc0RC1cXHUwN0IxXFx1MDdDMC1cXHUwN0Y1XFx1MDdGQVxcdTA4MDAtXFx1MDgyRFxcdTA4NDAtXFx1MDg1QlxcdTA4QTAtXFx1MDhCMlxcdTA4RTQtXFx1MDk2M1xcdTA5NjYtXFx1MDk2RlxcdTA5NzEtXFx1MDk4M1xcdTA5ODUtXFx1MDk4Q1xcdTA5OEZcXHUwOTkwXFx1MDk5My1cXHUwOUE4XFx1MDlBQS1cXHUwOUIwXFx1MDlCMlxcdTA5QjYtXFx1MDlCOVxcdTA5QkMtXFx1MDlDNFxcdTA5QzdcXHUwOUM4XFx1MDlDQi1cXHUwOUNFXFx1MDlEN1xcdTA5RENcXHUwOUREXFx1MDlERi1cXHUwOUUzXFx1MDlFNi1cXHUwOUYxXFx1MEEwMS1cXHUwQTAzXFx1MEEwNS1cXHUwQTBBXFx1MEEwRlxcdTBBMTBcXHUwQTEzLVxcdTBBMjhcXHUwQTJBLVxcdTBBMzBcXHUwQTMyXFx1MEEzM1xcdTBBMzVcXHUwQTM2XFx1MEEzOFxcdTBBMzlcXHUwQTNDXFx1MEEzRS1cXHUwQTQyXFx1MEE0N1xcdTBBNDhcXHUwQTRCLVxcdTBBNERcXHUwQTUxXFx1MEE1OS1cXHUwQTVDXFx1MEE1RVxcdTBBNjYtXFx1MEE3NVxcdTBBODEtXFx1MEE4M1xcdTBBODUtXFx1MEE4RFxcdTBBOEYtXFx1MEE5MVxcdTBBOTMtXFx1MEFBOFxcdTBBQUEtXFx1MEFCMFxcdTBBQjJcXHUwQUIzXFx1MEFCNS1cXHUwQUI5XFx1MEFCQy1cXHUwQUM1XFx1MEFDNy1cXHUwQUM5XFx1MEFDQi1cXHUwQUNEXFx1MEFEMFxcdTBBRTAtXFx1MEFFM1xcdTBBRTYtXFx1MEFFRlxcdTBCMDEtXFx1MEIwM1xcdTBCMDUtXFx1MEIwQ1xcdTBCMEZcXHUwQjEwXFx1MEIxMy1cXHUwQjI4XFx1MEIyQS1cXHUwQjMwXFx1MEIzMlxcdTBCMzNcXHUwQjM1LVxcdTBCMzlcXHUwQjNDLVxcdTBCNDRcXHUwQjQ3XFx1MEI0OFxcdTBCNEItXFx1MEI0RFxcdTBCNTZcXHUwQjU3XFx1MEI1Q1xcdTBCNURcXHUwQjVGLVxcdTBCNjNcXHUwQjY2LVxcdTBCNkZcXHUwQjcxXFx1MEI4MlxcdTBCODNcXHUwQjg1LVxcdTBCOEFcXHUwQjhFLVxcdTBCOTBcXHUwQjkyLVxcdTBCOTVcXHUwQjk5XFx1MEI5QVxcdTBCOUNcXHUwQjlFXFx1MEI5RlxcdTBCQTNcXHUwQkE0XFx1MEJBOC1cXHUwQkFBXFx1MEJBRS1cXHUwQkI5XFx1MEJCRS1cXHUwQkMyXFx1MEJDNi1cXHUwQkM4XFx1MEJDQS1cXHUwQkNEXFx1MEJEMFxcdTBCRDdcXHUwQkU2LVxcdTBCRUZcXHUwQzAwLVxcdTBDMDNcXHUwQzA1LVxcdTBDMENcXHUwQzBFLVxcdTBDMTBcXHUwQzEyLVxcdTBDMjhcXHUwQzJBLVxcdTBDMzlcXHUwQzNELVxcdTBDNDRcXHUwQzQ2LVxcdTBDNDhcXHUwQzRBLVxcdTBDNERcXHUwQzU1XFx1MEM1NlxcdTBDNThcXHUwQzU5XFx1MEM2MC1cXHUwQzYzXFx1MEM2Ni1cXHUwQzZGXFx1MEM4MS1cXHUwQzgzXFx1MEM4NS1cXHUwQzhDXFx1MEM4RS1cXHUwQzkwXFx1MEM5Mi1cXHUwQ0E4XFx1MENBQS1cXHUwQ0IzXFx1MENCNS1cXHUwQ0I5XFx1MENCQy1cXHUwQ0M0XFx1MENDNi1cXHUwQ0M4XFx1MENDQS1cXHUwQ0NEXFx1MENENVxcdTBDRDZcXHUwQ0RFXFx1MENFMC1cXHUwQ0UzXFx1MENFNi1cXHUwQ0VGXFx1MENGMVxcdTBDRjJcXHUwRDAxLVxcdTBEMDNcXHUwRDA1LVxcdTBEMENcXHUwRDBFLVxcdTBEMTBcXHUwRDEyLVxcdTBEM0FcXHUwRDNELVxcdTBENDRcXHUwRDQ2LVxcdTBENDhcXHUwRDRBLVxcdTBENEVcXHUwRDU3XFx1MEQ2MC1cXHUwRDYzXFx1MEQ2Ni1cXHUwRDZGXFx1MEQ3QS1cXHUwRDdGXFx1MEQ4MlxcdTBEODNcXHUwRDg1LVxcdTBEOTZcXHUwRDlBLVxcdTBEQjFcXHUwREIzLVxcdTBEQkJcXHUwREJEXFx1MERDMC1cXHUwREM2XFx1MERDQVxcdTBEQ0YtXFx1MERENFxcdTBERDZcXHUwREQ4LVxcdTBEREZcXHUwREU2LVxcdTBERUZcXHUwREYyXFx1MERGM1xcdTBFMDEtXFx1MEUzQVxcdTBFNDAtXFx1MEU0RVxcdTBFNTAtXFx1MEU1OVxcdTBFODFcXHUwRTgyXFx1MEU4NFxcdTBFODdcXHUwRTg4XFx1MEU4QVxcdTBFOERcXHUwRTk0LVxcdTBFOTdcXHUwRTk5LVxcdTBFOUZcXHUwRUExLVxcdTBFQTNcXHUwRUE1XFx1MEVBN1xcdTBFQUFcXHUwRUFCXFx1MEVBRC1cXHUwRUI5XFx1MEVCQi1cXHUwRUJEXFx1MEVDMC1cXHUwRUM0XFx1MEVDNlxcdTBFQzgtXFx1MEVDRFxcdTBFRDAtXFx1MEVEOVxcdTBFREMtXFx1MEVERlxcdTBGMDBcXHUwRjE4XFx1MEYxOVxcdTBGMjAtXFx1MEYyOVxcdTBGMzVcXHUwRjM3XFx1MEYzOVxcdTBGM0UtXFx1MEY0N1xcdTBGNDktXFx1MEY2Q1xcdTBGNzEtXFx1MEY4NFxcdTBGODYtXFx1MEY5N1xcdTBGOTktXFx1MEZCQ1xcdTBGQzZcXHUxMDAwLVxcdTEwNDlcXHUxMDUwLVxcdTEwOURcXHUxMEEwLVxcdTEwQzVcXHUxMEM3XFx1MTBDRFxcdTEwRDAtXFx1MTBGQVxcdTEwRkMtXFx1MTI0OFxcdTEyNEEtXFx1MTI0RFxcdTEyNTAtXFx1MTI1NlxcdTEyNThcXHUxMjVBLVxcdTEyNURcXHUxMjYwLVxcdTEyODhcXHUxMjhBLVxcdTEyOERcXHUxMjkwLVxcdTEyQjBcXHUxMkIyLVxcdTEyQjVcXHUxMkI4LVxcdTEyQkVcXHUxMkMwXFx1MTJDMi1cXHUxMkM1XFx1MTJDOC1cXHUxMkQ2XFx1MTJEOC1cXHUxMzEwXFx1MTMxMi1cXHUxMzE1XFx1MTMxOC1cXHUxMzVBXFx1MTM1RC1cXHUxMzVGXFx1MTM2OS1cXHUxMzcxXFx1MTM4MC1cXHUxMzhGXFx1MTNBMC1cXHUxM0Y0XFx1MTQwMS1cXHUxNjZDXFx1MTY2Ri1cXHUxNjdGXFx1MTY4MS1cXHUxNjlBXFx1MTZBMC1cXHUxNkVBXFx1MTZFRS1cXHUxNkY4XFx1MTcwMC1cXHUxNzBDXFx1MTcwRS1cXHUxNzE0XFx1MTcyMC1cXHUxNzM0XFx1MTc0MC1cXHUxNzUzXFx1MTc2MC1cXHUxNzZDXFx1MTc2RS1cXHUxNzcwXFx1MTc3MlxcdTE3NzNcXHUxNzgwLVxcdTE3RDNcXHUxN0Q3XFx1MTdEQ1xcdTE3RERcXHUxN0UwLVxcdTE3RTlcXHUxODBCLVxcdTE4MERcXHUxODEwLVxcdTE4MTlcXHUxODIwLVxcdTE4NzdcXHUxODgwLVxcdTE4QUFcXHUxOEIwLVxcdTE4RjVcXHUxOTAwLVxcdTE5MUVcXHUxOTIwLVxcdTE5MkJcXHUxOTMwLVxcdTE5M0JcXHUxOTQ2LVxcdTE5NkRcXHUxOTcwLVxcdTE5NzRcXHUxOTgwLVxcdTE5QUJcXHUxOUIwLVxcdTE5QzlcXHUxOUQwLVxcdTE5REFcXHUxQTAwLVxcdTFBMUJcXHUxQTIwLVxcdTFBNUVcXHUxQTYwLVxcdTFBN0NcXHUxQTdGLVxcdTFBODlcXHUxQTkwLVxcdTFBOTlcXHUxQUE3XFx1MUFCMC1cXHUxQUJEXFx1MUIwMC1cXHUxQjRCXFx1MUI1MC1cXHUxQjU5XFx1MUI2Qi1cXHUxQjczXFx1MUI4MC1cXHUxQkYzXFx1MUMwMC1cXHUxQzM3XFx1MUM0MC1cXHUxQzQ5XFx1MUM0RC1cXHUxQzdEXFx1MUNEMC1cXHUxQ0QyXFx1MUNENC1cXHUxQ0Y2XFx1MUNGOFxcdTFDRjlcXHUxRDAwLVxcdTFERjVcXHUxREZDLVxcdTFGMTVcXHUxRjE4LVxcdTFGMURcXHUxRjIwLVxcdTFGNDVcXHUxRjQ4LVxcdTFGNERcXHUxRjUwLVxcdTFGNTdcXHUxRjU5XFx1MUY1QlxcdTFGNURcXHUxRjVGLVxcdTFGN0RcXHUxRjgwLVxcdTFGQjRcXHUxRkI2LVxcdTFGQkNcXHUxRkJFXFx1MUZDMi1cXHUxRkM0XFx1MUZDNi1cXHUxRkNDXFx1MUZEMC1cXHUxRkQzXFx1MUZENi1cXHUxRkRCXFx1MUZFMC1cXHUxRkVDXFx1MUZGMi1cXHUxRkY0XFx1MUZGNi1cXHUxRkZDXFx1MjAwQ1xcdTIwMERcXHUyMDNGXFx1MjA0MFxcdTIwNTRcXHUyMDcxXFx1MjA3RlxcdTIwOTAtXFx1MjA5Q1xcdTIwRDAtXFx1MjBEQ1xcdTIwRTFcXHUyMEU1LVxcdTIwRjBcXHUyMTAyXFx1MjEwN1xcdTIxMEEtXFx1MjExM1xcdTIxMTVcXHUyMTE4LVxcdTIxMURcXHUyMTI0XFx1MjEyNlxcdTIxMjhcXHUyMTJBLVxcdTIxMzlcXHUyMTNDLVxcdTIxM0ZcXHUyMTQ1LVxcdTIxNDlcXHUyMTRFXFx1MjE2MC1cXHUyMTg4XFx1MkMwMC1cXHUyQzJFXFx1MkMzMC1cXHUyQzVFXFx1MkM2MC1cXHUyQ0U0XFx1MkNFQi1cXHUyQ0YzXFx1MkQwMC1cXHUyRDI1XFx1MkQyN1xcdTJEMkRcXHUyRDMwLVxcdTJENjdcXHUyRDZGXFx1MkQ3Ri1cXHUyRDk2XFx1MkRBMC1cXHUyREE2XFx1MkRBOC1cXHUyREFFXFx1MkRCMC1cXHUyREI2XFx1MkRCOC1cXHUyREJFXFx1MkRDMC1cXHUyREM2XFx1MkRDOC1cXHUyRENFXFx1MkREMC1cXHUyREQ2XFx1MkREOC1cXHUyRERFXFx1MkRFMC1cXHUyREZGXFx1MzAwNS1cXHUzMDA3XFx1MzAyMS1cXHUzMDJGXFx1MzAzMS1cXHUzMDM1XFx1MzAzOC1cXHUzMDNDXFx1MzA0MS1cXHUzMDk2XFx1MzA5OS1cXHUzMDlGXFx1MzBBMS1cXHUzMEZBXFx1MzBGQy1cXHUzMEZGXFx1MzEwNS1cXHUzMTJEXFx1MzEzMS1cXHUzMThFXFx1MzFBMC1cXHUzMUJBXFx1MzFGMC1cXHUzMUZGXFx1MzQwMC1cXHU0REI1XFx1NEUwMC1cXHU5RkNDXFx1QTAwMC1cXHVBNDhDXFx1QTREMC1cXHVBNEZEXFx1QTUwMC1cXHVBNjBDXFx1QTYxMC1cXHVBNjJCXFx1QTY0MC1cXHVBNjZGXFx1QTY3NC1cXHVBNjdEXFx1QTY3Ri1cXHVBNjlEXFx1QTY5Ri1cXHVBNkYxXFx1QTcxNy1cXHVBNzFGXFx1QTcyMi1cXHVBNzg4XFx1QTc4Qi1cXHVBNzhFXFx1QTc5MC1cXHVBN0FEXFx1QTdCMFxcdUE3QjFcXHVBN0Y3LVxcdUE4MjdcXHVBODQwLVxcdUE4NzNcXHVBODgwLVxcdUE4QzRcXHVBOEQwLVxcdUE4RDlcXHVBOEUwLVxcdUE4RjdcXHVBOEZCXFx1QTkwMC1cXHVBOTJEXFx1QTkzMC1cXHVBOTUzXFx1QTk2MC1cXHVBOTdDXFx1QTk4MC1cXHVBOUMwXFx1QTlDRi1cXHVBOUQ5XFx1QTlFMC1cXHVBOUZFXFx1QUEwMC1cXHVBQTM2XFx1QUE0MC1cXHVBQTREXFx1QUE1MC1cXHVBQTU5XFx1QUE2MC1cXHVBQTc2XFx1QUE3QS1cXHVBQUMyXFx1QUFEQi1cXHVBQUREXFx1QUFFMC1cXHVBQUVGXFx1QUFGMi1cXHVBQUY2XFx1QUIwMS1cXHVBQjA2XFx1QUIwOS1cXHVBQjBFXFx1QUIxMS1cXHVBQjE2XFx1QUIyMC1cXHVBQjI2XFx1QUIyOC1cXHVBQjJFXFx1QUIzMC1cXHVBQjVBXFx1QUI1Qy1cXHVBQjVGXFx1QUI2NFxcdUFCNjVcXHVBQkMwLVxcdUFCRUFcXHVBQkVDXFx1QUJFRFxcdUFCRjAtXFx1QUJGOVxcdUFDMDAtXFx1RDdBM1xcdUQ3QjAtXFx1RDdDNlxcdUQ3Q0ItXFx1RDdGQlxcdUY5MDAtXFx1RkE2RFxcdUZBNzAtXFx1RkFEOVxcdUZCMDAtXFx1RkIwNlxcdUZCMTMtXFx1RkIxN1xcdUZCMUQtXFx1RkIyOFxcdUZCMkEtXFx1RkIzNlxcdUZCMzgtXFx1RkIzQ1xcdUZCM0VcXHVGQjQwXFx1RkI0MVxcdUZCNDNcXHVGQjQ0XFx1RkI0Ni1cXHVGQkIxXFx1RkJEMy1cXHVGRDNEXFx1RkQ1MC1cXHVGRDhGXFx1RkQ5Mi1cXHVGREM3XFx1RkRGMC1cXHVGREZCXFx1RkUwMC1cXHVGRTBGXFx1RkUyMC1cXHVGRTJEXFx1RkUzM1xcdUZFMzRcXHVGRTRELVxcdUZFNEZcXHVGRTcwLVxcdUZFNzRcXHVGRTc2LVxcdUZFRkNcXHVGRjEwLVxcdUZGMTlcXHVGRjIxLVxcdUZGM0FcXHVGRjNGXFx1RkY0MS1cXHVGRjVBXFx1RkY2Ni1cXHVGRkJFXFx1RkZDMi1cXHVGRkM3XFx1RkZDQS1cXHVGRkNGXFx1RkZEMi1cXHVGRkQ3XFx1RkZEQS1cXHVGRkRDXXxcXHVEODAwW1xcdURDMDAtXFx1REMwQlxcdURDMEQtXFx1REMyNlxcdURDMjgtXFx1REMzQVxcdURDM0NcXHVEQzNEXFx1REMzRi1cXHVEQzREXFx1REM1MC1cXHVEQzVEXFx1REM4MC1cXHVEQ0ZBXFx1REQ0MC1cXHVERDc0XFx1RERGRFxcdURFODAtXFx1REU5Q1xcdURFQTAtXFx1REVEMFxcdURFRTBcXHVERjAwLVxcdURGMUZcXHVERjMwLVxcdURGNEFcXHVERjUwLVxcdURGN0FcXHVERjgwLVxcdURGOURcXHVERkEwLVxcdURGQzNcXHVERkM4LVxcdURGQ0ZcXHVERkQxLVxcdURGRDVdfFxcdUQ4MDFbXFx1REMwMC1cXHVEQzlEXFx1RENBMC1cXHVEQ0E5XFx1REQwMC1cXHVERDI3XFx1REQzMC1cXHVERDYzXFx1REUwMC1cXHVERjM2XFx1REY0MC1cXHVERjU1XFx1REY2MC1cXHVERjY3XXxcXHVEODAyW1xcdURDMDAtXFx1REMwNVxcdURDMDhcXHVEQzBBLVxcdURDMzVcXHVEQzM3XFx1REMzOFxcdURDM0NcXHVEQzNGLVxcdURDNTVcXHVEQzYwLVxcdURDNzZcXHVEQzgwLVxcdURDOUVcXHVERDAwLVxcdUREMTVcXHVERDIwLVxcdUREMzlcXHVERDgwLVxcdUREQjdcXHVEREJFXFx1RERCRlxcdURFMDAtXFx1REUwM1xcdURFMDVcXHVERTA2XFx1REUwQy1cXHVERTEzXFx1REUxNS1cXHVERTE3XFx1REUxOS1cXHVERTMzXFx1REUzOC1cXHVERTNBXFx1REUzRlxcdURFNjAtXFx1REU3Q1xcdURFODAtXFx1REU5Q1xcdURFQzAtXFx1REVDN1xcdURFQzktXFx1REVFNlxcdURGMDAtXFx1REYzNVxcdURGNDAtXFx1REY1NVxcdURGNjAtXFx1REY3MlxcdURGODAtXFx1REY5MV18XFx1RDgwM1tcXHVEQzAwLVxcdURDNDhdfFxcdUQ4MDRbXFx1REMwMC1cXHVEQzQ2XFx1REM2Ni1cXHVEQzZGXFx1REM3Ri1cXHVEQ0JBXFx1RENEMC1cXHVEQ0U4XFx1RENGMC1cXHVEQ0Y5XFx1REQwMC1cXHVERDM0XFx1REQzNi1cXHVERDNGXFx1REQ1MC1cXHVERDczXFx1REQ3NlxcdUREODAtXFx1RERDNFxcdURERDAtXFx1REREQVxcdURFMDAtXFx1REUxMVxcdURFMTMtXFx1REUzN1xcdURFQjAtXFx1REVFQVxcdURFRjAtXFx1REVGOVxcdURGMDEtXFx1REYwM1xcdURGMDUtXFx1REYwQ1xcdURGMEZcXHVERjEwXFx1REYxMy1cXHVERjI4XFx1REYyQS1cXHVERjMwXFx1REYzMlxcdURGMzNcXHVERjM1LVxcdURGMzlcXHVERjNDLVxcdURGNDRcXHVERjQ3XFx1REY0OFxcdURGNEItXFx1REY0RFxcdURGNTdcXHVERjVELVxcdURGNjNcXHVERjY2LVxcdURGNkNcXHVERjcwLVxcdURGNzRdfFxcdUQ4MDVbXFx1REM4MC1cXHVEQ0M1XFx1RENDN1xcdURDRDAtXFx1RENEOVxcdUREODAtXFx1RERCNVxcdUREQjgtXFx1RERDMFxcdURFMDAtXFx1REU0MFxcdURFNDRcXHVERTUwLVxcdURFNTlcXHVERTgwLVxcdURFQjdcXHVERUMwLVxcdURFQzldfFxcdUQ4MDZbXFx1RENBMC1cXHVEQ0U5XFx1RENGRlxcdURFQzAtXFx1REVGOF18XFx1RDgwOFtcXHVEQzAwLVxcdURGOThdfFxcdUQ4MDlbXFx1REMwMC1cXHVEQzZFXXxbXFx1RDgwQ1xcdUQ4NDAtXFx1RDg2OFxcdUQ4NkEtXFx1RDg2Q11bXFx1REMwMC1cXHVERkZGXXxcXHVEODBEW1xcdURDMDAtXFx1REMyRV18XFx1RDgxQVtcXHVEQzAwLVxcdURFMzhcXHVERTQwLVxcdURFNUVcXHVERTYwLVxcdURFNjlcXHVERUQwLVxcdURFRURcXHVERUYwLVxcdURFRjRcXHVERjAwLVxcdURGMzZcXHVERjQwLVxcdURGNDNcXHVERjUwLVxcdURGNTlcXHVERjYzLVxcdURGNzdcXHVERjdELVxcdURGOEZdfFxcdUQ4MUJbXFx1REYwMC1cXHVERjQ0XFx1REY1MC1cXHVERjdFXFx1REY4Ri1cXHVERjlGXXxcXHVEODJDW1xcdURDMDBcXHVEQzAxXXxcXHVEODJGW1xcdURDMDAtXFx1REM2QVxcdURDNzAtXFx1REM3Q1xcdURDODAtXFx1REM4OFxcdURDOTAtXFx1REM5OVxcdURDOURcXHVEQzlFXXxcXHVEODM0W1xcdURENjUtXFx1REQ2OVxcdURENkQtXFx1REQ3MlxcdUREN0ItXFx1REQ4MlxcdUREODUtXFx1REQ4QlxcdUREQUEtXFx1RERBRFxcdURFNDItXFx1REU0NF18XFx1RDgzNVtcXHVEQzAwLVxcdURDNTRcXHVEQzU2LVxcdURDOUNcXHVEQzlFXFx1REM5RlxcdURDQTJcXHVEQ0E1XFx1RENBNlxcdURDQTktXFx1RENBQ1xcdURDQUUtXFx1RENCOVxcdURDQkJcXHVEQ0JELVxcdURDQzNcXHVEQ0M1LVxcdUREMDVcXHVERDA3LVxcdUREMEFcXHVERDBELVxcdUREMTRcXHVERDE2LVxcdUREMUNcXHVERDFFLVxcdUREMzlcXHVERDNCLVxcdUREM0VcXHVERDQwLVxcdURENDRcXHVERDQ2XFx1REQ0QS1cXHVERDUwXFx1REQ1Mi1cXHVERUE1XFx1REVBOC1cXHVERUMwXFx1REVDMi1cXHVERURBXFx1REVEQy1cXHVERUZBXFx1REVGQy1cXHVERjE0XFx1REYxNi1cXHVERjM0XFx1REYzNi1cXHVERjRFXFx1REY1MC1cXHVERjZFXFx1REY3MC1cXHVERjg4XFx1REY4QS1cXHVERkE4XFx1REZBQS1cXHVERkMyXFx1REZDNC1cXHVERkNCXFx1REZDRS1cXHVERkZGXXxcXHVEODNBW1xcdURDMDAtXFx1RENDNFxcdURDRDAtXFx1RENENl18XFx1RDgzQltcXHVERTAwLVxcdURFMDNcXHVERTA1LVxcdURFMUZcXHVERTIxXFx1REUyMlxcdURFMjRcXHVERTI3XFx1REUyOS1cXHVERTMyXFx1REUzNC1cXHVERTM3XFx1REUzOVxcdURFM0JcXHVERTQyXFx1REU0N1xcdURFNDlcXHVERTRCXFx1REU0RC1cXHVERTRGXFx1REU1MVxcdURFNTJcXHVERTU0XFx1REU1N1xcdURFNTlcXHVERTVCXFx1REU1RFxcdURFNUZcXHVERTYxXFx1REU2MlxcdURFNjRcXHVERTY3LVxcdURFNkFcXHVERTZDLVxcdURFNzJcXHVERTc0LVxcdURFNzdcXHVERTc5LVxcdURFN0NcXHVERTdFXFx1REU4MC1cXHVERTg5XFx1REU4Qi1cXHVERTlCXFx1REVBMS1cXHVERUEzXFx1REVBNS1cXHVERUE5XFx1REVBQi1cXHVERUJCXXxcXHVEODY5W1xcdURDMDAtXFx1REVENlxcdURGMDAtXFx1REZGRl18XFx1RDg2RFtcXHVEQzAwLVxcdURGMzRcXHVERjQwLVxcdURGRkZdfFxcdUQ4NkVbXFx1REMwMC1cXHVEQzFEXXxcXHVEODdFW1xcdURDMDAtXFx1REUxRF18XFx1REI0MFtcXHVERDAwLVxcdURERUZdL307ZnVuY3Rpb24gcyhlKXtyZXR1cm4gNDg8PWUmJmU8PTU3fWZ1bmN0aW9uIGEoZSl7cmV0dXJuIDQ4PD1lJiZlPD01N3x8OTc8PWUmJmU8PTEwMnx8NjU8PWUmJmU8PTcwfWZ1bmN0aW9uIGwoZSl7cmV0dXJuIGU+PTQ4JiZlPD01NX1uPVs1NzYwLDYxNTgsODE5Miw4MTkzLDgxOTQsODE5NSw4MTk2LDgxOTcsODE5OCw4MTk5LDgyMDAsODIwMSw4MjAyLDgyMzksODI4NywxMjI4OCw2NTI3OV07ZnVuY3Rpb24gZihlKXtyZXR1cm4gZT09PTMyfHxlPT09OXx8ZT09PTExfHxlPT09MTJ8fGU9PT0xNjB8fGU+PTU3NjAmJm4uaW5kZXhPZihlKT49MH1mdW5jdGlvbiBjKGUpe3JldHVybiBlPT09MTB8fGU9PT0xM3x8ZT09PTgyMzJ8fGU9PT04MjMzfWZ1bmN0aW9uIHAoZSl7aWYoZTw9NjU1MzUpe3JldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKGUpfXZhciB0PVN0cmluZy5mcm9tQ2hhckNvZGUoTWF0aC5mbG9vcigoZS02NTUzNikvMTAyNCkrNTUyOTYpO3ZhciB1PVN0cmluZy5mcm9tQ2hhckNvZGUoKGUtNjU1MzYpJTEwMjQrNTYzMjApO3JldHVybiB0K3V9cj1uZXcgQXJyYXkoMTI4KTtmb3Iobz0wO288MTI4Oysrbyl7cltvXT1vPj05NyYmbzw9MTIyfHxvPj02NSYmbzw9OTB8fG89PT0zNnx8bz09PTk1fWk9bmV3IEFycmF5KDEyOCk7Zm9yKG89MDtvPDEyODsrK28pe2lbb109bz49OTcmJm88PTEyMnx8bz49NjUmJm88PTkwfHxvPj00OCYmbzw9NTd8fG89PT0zNnx8bz09PTk1fWZ1bmN0aW9uIEQoZSl7cmV0dXJuIGU8MTI4P3JbZV06dS5Ob25Bc2NpaUlkZW50aWZpZXJTdGFydC50ZXN0KHAoZSkpfWZ1bmN0aW9uIGgoZSl7cmV0dXJuIGU8MTI4P2lbZV06dS5Ob25Bc2NpaUlkZW50aWZpZXJQYXJ0LnRlc3QocChlKSl9ZnVuY3Rpb24gbSh0KXtyZXR1cm4gdDwxMjg/clt0XTplLk5vbkFzY2lpSWRlbnRpZmllclN0YXJ0LnRlc3QocCh0KSl9ZnVuY3Rpb24gZCh0KXtyZXR1cm4gdDwxMjg/aVt0XTplLk5vbkFzY2lpSWRlbnRpZmllclBhcnQudGVzdChwKHQpKX10LmV4cG9ydHM9e2lzRGVjaW1hbERpZ2l0OnMsaXNIZXhEaWdpdDphLGlzT2N0YWxEaWdpdDpsLGlzV2hpdGVTcGFjZTpmLGlzTGluZVRlcm1pbmF0b3I6Yyxpc0lkZW50aWZpZXJTdGFydEVTNTpELGlzSWRlbnRpZmllclBhcnRFUzU6aCxpc0lkZW50aWZpZXJTdGFydEVTNjptLGlzSWRlbnRpZmllclBhcnRFUzY6ZH19KSgpfSx7fV0sMzI6W2Z1bmN0aW9uKGUsdCx1KXsoZnVuY3Rpb24oKXtcInVzZSBzdHJpY3RcIjt2YXIgdT1lKFwiLi9jb2RlXCIpO2Z1bmN0aW9uIG4oZSl7c3dpdGNoKGUpe2Nhc2VcImltcGxlbWVudHNcIjpjYXNlXCJpbnRlcmZhY2VcIjpjYXNlXCJwYWNrYWdlXCI6Y2FzZVwicHJpdmF0ZVwiOmNhc2VcInByb3RlY3RlZFwiOmNhc2VcInB1YmxpY1wiOmNhc2VcInN0YXRpY1wiOmNhc2VcImxldFwiOnJldHVybiB0cnVlO2RlZmF1bHQ6cmV0dXJuIGZhbHNlfX1mdW5jdGlvbiByKGUsdCl7aWYoIXQmJmU9PT1cInlpZWxkXCIpe3JldHVybiBmYWxzZX1yZXR1cm4gaShlLHQpfWZ1bmN0aW9uIGkoZSx0KXtpZih0JiZuKGUpKXtyZXR1cm4gdHJ1ZX1zd2l0Y2goZS5sZW5ndGgpe2Nhc2UgMjpyZXR1cm4gZT09PVwiaWZcInx8ZT09PVwiaW5cInx8ZT09PVwiZG9cIjtjYXNlIDM6cmV0dXJuIGU9PT1cInZhclwifHxlPT09XCJmb3JcInx8ZT09PVwibmV3XCJ8fGU9PT1cInRyeVwiO2Nhc2UgNDpyZXR1cm4gZT09PVwidGhpc1wifHxlPT09XCJlbHNlXCJ8fGU9PT1cImNhc2VcInx8ZT09PVwidm9pZFwifHxlPT09XCJ3aXRoXCJ8fGU9PT1cImVudW1cIjtjYXNlIDU6cmV0dXJuIGU9PT1cIndoaWxlXCJ8fGU9PT1cImJyZWFrXCJ8fGU9PT1cImNhdGNoXCJ8fGU9PT1cInRocm93XCJ8fGU9PT1cImNvbnN0XCJ8fGU9PT1cInlpZWxkXCJ8fGU9PT1cImNsYXNzXCJ8fGU9PT1cInN1cGVyXCI7Y2FzZSA2OnJldHVybiBlPT09XCJyZXR1cm5cInx8ZT09PVwidHlwZW9mXCJ8fGU9PT1cImRlbGV0ZVwifHxlPT09XCJzd2l0Y2hcInx8ZT09PVwiZXhwb3J0XCJ8fGU9PT1cImltcG9ydFwiO2Nhc2UgNzpyZXR1cm4gZT09PVwiZGVmYXVsdFwifHxlPT09XCJmaW5hbGx5XCJ8fGU9PT1cImV4dGVuZHNcIjtjYXNlIDg6cmV0dXJuIGU9PT1cImZ1bmN0aW9uXCJ8fGU9PT1cImNvbnRpbnVlXCJ8fGU9PT1cImRlYnVnZ2VyXCI7Y2FzZSAxMDpyZXR1cm4gZT09PVwiaW5zdGFuY2VvZlwiO2RlZmF1bHQ6cmV0dXJuIGZhbHNlfX1mdW5jdGlvbiBvKGUsdCl7cmV0dXJuIGU9PT1cIm51bGxcInx8ZT09PVwidHJ1ZVwifHxlPT09XCJmYWxzZVwifHxyKGUsdCl9ZnVuY3Rpb24gcyhlLHQpe3JldHVybiBlPT09XCJudWxsXCJ8fGU9PT1cInRydWVcInx8ZT09PVwiZmFsc2VcInx8aShlLHQpfWZ1bmN0aW9uIGEoZSl7cmV0dXJuIGU9PT1cImV2YWxcInx8ZT09PVwiYXJndW1lbnRzXCJ9ZnVuY3Rpb24gbChlKXt2YXIgdCxuLHI7aWYoZS5sZW5ndGg9PT0wKXtyZXR1cm4gZmFsc2V9cj1lLmNoYXJDb2RlQXQoMCk7aWYoIXUuaXNJZGVudGlmaWVyU3RhcnRFUzUocikpe3JldHVybiBmYWxzZX1mb3IodD0xLG49ZS5sZW5ndGg7dDxuOysrdCl7cj1lLmNoYXJDb2RlQXQodCk7aWYoIXUuaXNJZGVudGlmaWVyUGFydEVTNShyKSl7cmV0dXJuIGZhbHNlfX1yZXR1cm4gdHJ1ZX1mdW5jdGlvbiBmKGUsdCl7cmV0dXJuKGUtNTUyOTYpKjEwMjQrKHQtNTYzMjApKzY1NTM2fWZ1bmN0aW9uIGMoZSl7dmFyIHQsbixyLGksbztpZihlLmxlbmd0aD09PTApe3JldHVybiBmYWxzZX1vPXUuaXNJZGVudGlmaWVyU3RhcnRFUzY7Zm9yKHQ9MCxuPWUubGVuZ3RoO3Q8bjsrK3Qpe3I9ZS5jaGFyQ29kZUF0KHQpO2lmKDU1Mjk2PD1yJiZyPD01NjMxOSl7Kyt0O2lmKHQ+PW4pe3JldHVybiBmYWxzZX1pPWUuY2hhckNvZGVBdCh0KTtpZighKDU2MzIwPD1pJiZpPD01NzM0Mykpe3JldHVybiBmYWxzZX1yPWYocixpKX1pZighbyhyKSl7cmV0dXJuIGZhbHNlfW89dS5pc0lkZW50aWZpZXJQYXJ0RVM2fXJldHVybiB0cnVlfWZ1bmN0aW9uIHAoZSx0KXtyZXR1cm4gbChlKSYmIW8oZSx0KX1mdW5jdGlvbiBEKGUsdCl7cmV0dXJuIGMoZSkmJiFzKGUsdCl9dC5leHBvcnRzPXtpc0tleXdvcmRFUzU6cixpc0tleXdvcmRFUzY6aSxpc1Jlc2VydmVkV29yZEVTNTpvLGlzUmVzZXJ2ZWRXb3JkRVM2OnMsaXNSZXN0cmljdGVkV29yZDphLGlzSWRlbnRpZmllck5hbWVFUzU6bCxpc0lkZW50aWZpZXJOYW1lRVM2OmMsaXNJZGVudGlmaWVyRVM1OnAsaXNJZGVudGlmaWVyRVM2OkR9fSkoKX0se1wiLi9jb2RlXCI6MzF9XSwzMzpbZnVuY3Rpb24oZSx0LHUpeyhmdW5jdGlvbigpe1widXNlIHN0cmljdFwiO3UuYXN0PWUoXCIuL2FzdFwiKTt1LmNvZGU9ZShcIi4vY29kZVwiKTt1LmtleXdvcmQ9ZShcIi4va2V5d29yZFwiKX0pKCl9LHtcIi4vYXN0XCI6MzAsXCIuL2NvZGVcIjozMSxcIi4va2V5d29yZFwiOjMyfV0sMzQ6W2Z1bmN0aW9uKGUsdCx1KXt1LlNvdXJjZU1hcEdlbmVyYXRvcj1lKFwiLi9zb3VyY2UtbWFwL3NvdXJjZS1tYXAtZ2VuZXJhdG9yXCIpLlNvdXJjZU1hcEdlbmVyYXRvcjt1LlNvdXJjZU1hcENvbnN1bWVyPWUoXCIuL3NvdXJjZS1tYXAvc291cmNlLW1hcC1jb25zdW1lclwiKS5Tb3VyY2VNYXBDb25zdW1lcjt1LlNvdXJjZU5vZGU9ZShcIi4vc291cmNlLW1hcC9zb3VyY2Utbm9kZVwiKS5Tb3VyY2VOb2RlfSx7XCIuL3NvdXJjZS1tYXAvc291cmNlLW1hcC1jb25zdW1lclwiOjQyLFwiLi9zb3VyY2UtbWFwL3NvdXJjZS1tYXAtZ2VuZXJhdG9yXCI6NDMsXCIuL3NvdXJjZS1tYXAvc291cmNlLW5vZGVcIjo0NH1dLDM1OltmdW5jdGlvbihlLHQsdSl7aWYodHlwZW9mIG4hPT1cImZ1bmN0aW9uXCIpe3ZhciBuPWUoXCJhbWRlZmluZVwiKSh0LGUpfW4oZnVuY3Rpb24oZSx0LHUpe3ZhciBuPWUoXCIuL3V0aWxcIik7ZnVuY3Rpb24gcigpe3RoaXMuX2FycmF5PVtdO3RoaXMuX3NldD17fX1yLmZyb21BcnJheT1mdW5jdGlvbiBpKGUsdCl7dmFyIHU9bmV3IHI7Zm9yKHZhciBuPTAsaT1lLmxlbmd0aDtuPGk7bisrKXt1LmFkZChlW25dLHQpfXJldHVybiB1fTtyLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24gbyhlLHQpe3ZhciB1PXRoaXMuaGFzKGUpO3ZhciByPXRoaXMuX2FycmF5Lmxlbmd0aDtpZighdXx8dCl7dGhpcy5fYXJyYXkucHVzaChlKX1pZighdSl7dGhpcy5fc2V0W24udG9TZXRTdHJpbmcoZSldPXJ9fTtyLnByb3RvdHlwZS5oYXM9ZnVuY3Rpb24gcyhlKXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHRoaXMuX3NldCxuLnRvU2V0U3RyaW5nKGUpKX07ci5wcm90b3R5cGUuaW5kZXhPZj1mdW5jdGlvbiBhKGUpe2lmKHRoaXMuaGFzKGUpKXtyZXR1cm4gdGhpcy5fc2V0W24udG9TZXRTdHJpbmcoZSldfXRocm93IG5ldyBFcnJvcignXCInK2UrJ1wiIGlzIG5vdCBpbiB0aGUgc2V0LicpfTtyLnByb3RvdHlwZS5hdD1mdW5jdGlvbiBsKGUpe2lmKGU+PTAmJmU8dGhpcy5fYXJyYXkubGVuZ3RoKXtyZXR1cm4gdGhpcy5fYXJyYXlbZV19dGhyb3cgbmV3IEVycm9yKFwiTm8gZWxlbWVudCBpbmRleGVkIGJ5IFwiK2UpfTtyLnByb3RvdHlwZS50b0FycmF5PWZ1bmN0aW9uIGYoKXtyZXR1cm4gdGhpcy5fYXJyYXkuc2xpY2UoKX07dC5BcnJheVNldD1yfSl9LHtcIi4vdXRpbFwiOjQ1LGFtZGVmaW5lOjQ2fV0sMzY6W2Z1bmN0aW9uKGUsdCx1KXtpZih0eXBlb2YgbiE9PVwiZnVuY3Rpb25cIil7dmFyIG49ZShcImFtZGVmaW5lXCIpKHQsZSl9bihmdW5jdGlvbihlLHQsdSl7dmFyIG49ZShcIi4vYmFzZTY0XCIpO3ZhciByPTU7dmFyIGk9MTw8cjt2YXIgbz1pLTE7dmFyIHM9aTtmdW5jdGlvbiBhKGUpe3JldHVybiBlPDA/KC1lPDwxKSsxOihlPDwxKSswfWZ1bmN0aW9uIGwoZSl7dmFyIHQ9KGUmMSk9PT0xO3ZhciB1PWU+PjE7cmV0dXJuIHQ/LXU6dX10LmVuY29kZT1mdW5jdGlvbiBmKGUpe3ZhciB0PVwiXCI7dmFyIHU7dmFyIGk9YShlKTtkb3t1PWkmbztpPj4+PXI7aWYoaT4wKXt1fD1zfXQrPW4uZW5jb2RlKHUpfXdoaWxlKGk+MCk7cmV0dXJuIHR9O3QuZGVjb2RlPWZ1bmN0aW9uIGMoZSx0KXt2YXIgdT0wO3ZhciBpPWUubGVuZ3RoO3ZhciBhPTA7dmFyIGY9MDt2YXIgYyxwO2Rve2lmKHU+PWkpe3Rocm93IG5ldyBFcnJvcihcIkV4cGVjdGVkIG1vcmUgZGlnaXRzIGluIGJhc2UgNjQgVkxRIHZhbHVlLlwiKX1wPW4uZGVjb2RlKGUuY2hhckF0KHUrKykpO2M9ISEocCZzKTtwJj1vO2E9YSsocDw8Zik7Zis9cn13aGlsZShjKTt0LnZhbHVlPWwoYSk7dC5yZXN0PWUuc2xpY2UodSl9fSl9LHtcIi4vYmFzZTY0XCI6MzcsYW1kZWZpbmU6NDZ9XSwzNzpbZnVuY3Rpb24oZSx0LHUpe2lmKHR5cGVvZiBuIT09XCJmdW5jdGlvblwiKXt2YXIgbj1lKFwiYW1kZWZpbmVcIikodCxlKX1uKGZ1bmN0aW9uKGUsdCx1KXt2YXIgbj17fTt2YXIgcj17fTtcIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky9cIi5zcGxpdChcIlwiKS5mb3JFYWNoKGZ1bmN0aW9uKGUsdCl7bltlXT10O3JbdF09ZX0pO3QuZW5jb2RlPWZ1bmN0aW9uIGkoZSl7aWYoZSBpbiByKXtyZXR1cm4gcltlXX10aHJvdyBuZXcgVHlwZUVycm9yKFwiTXVzdCBiZSBiZXR3ZWVuIDAgYW5kIDYzOiBcIitlKX07dC5kZWNvZGU9ZnVuY3Rpb24gbyhlKXtpZihlIGluIG4pe3JldHVybiBuW2VdfXRocm93IG5ldyBUeXBlRXJyb3IoXCJOb3QgYSB2YWxpZCBiYXNlIDY0IGRpZ2l0OiBcIitlKX19KX0se2FtZGVmaW5lOjQ2fV0sMzg6W2Z1bmN0aW9uKGUsdCx1KXtpZih0eXBlb2YgbiE9PVwiZnVuY3Rpb25cIil7dmFyIG49ZShcImFtZGVmaW5lXCIpKHQsZSl9bihmdW5jdGlvbihlLHQsdSl7dmFyIG49ZShcIi4vdXRpbFwiKTt2YXIgcj1lKFwiLi9iaW5hcnktc2VhcmNoXCIpO3ZhciBpPWUoXCIuL2FycmF5LXNldFwiKS5BcnJheVNldDt2YXIgbz1lKFwiLi9iYXNlNjQtdmxxXCIpO3ZhciBzPWUoXCIuL3NvdXJjZS1tYXAtY29uc3VtZXJcIikuU291cmNlTWFwQ29uc3VtZXI7ZnVuY3Rpb24gYShlKXt2YXIgdD1lO2lmKHR5cGVvZiBlPT09XCJzdHJpbmdcIil7dD1KU09OLnBhcnNlKGUucmVwbGFjZSgvXlxcKVxcXVxcfScvLFwiXCIpKX12YXIgdT1uLmdldEFyZyh0LFwidmVyc2lvblwiKTt2YXIgcj1uLmdldEFyZyh0LFwic291cmNlc1wiKTt2YXIgbz1uLmdldEFyZyh0LFwibmFtZXNcIixbXSk7dmFyIHM9bi5nZXRBcmcodCxcInNvdXJjZVJvb3RcIixudWxsKTt2YXIgYT1uLmdldEFyZyh0LFwic291cmNlc0NvbnRlbnRcIixudWxsKTt2YXIgbD1uLmdldEFyZyh0LFwibWFwcGluZ3NcIik7dmFyIGY9bi5nZXRBcmcodCxcImZpbGVcIixudWxsKTtpZih1IT10aGlzLl92ZXJzaW9uKXt0aHJvdyBuZXcgRXJyb3IoXCJVbnN1cHBvcnRlZCB2ZXJzaW9uOiBcIit1KX1yPXIubWFwKG4ubm9ybWFsaXplKTt0aGlzLl9uYW1lcz1pLmZyb21BcnJheShvLHRydWUpO3RoaXMuX3NvdXJjZXM9aS5mcm9tQXJyYXkocix0cnVlKTt0aGlzLnNvdXJjZVJvb3Q9czt0aGlzLnNvdXJjZXNDb250ZW50PWE7dGhpcy5fbWFwcGluZ3M9bDt0aGlzLmZpbGU9Zn1hLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHMucHJvdG90eXBlKTthLnByb3RvdHlwZS5jb25zdW1lcj1zO2EuZnJvbVNvdXJjZU1hcD1mdW5jdGlvbiBsKGUpe3ZhciB0PU9iamVjdC5jcmVhdGUoYS5wcm90b3R5cGUpO3QuX25hbWVzPWkuZnJvbUFycmF5KGUuX25hbWVzLnRvQXJyYXkoKSx0cnVlKTt0Ll9zb3VyY2VzPWkuZnJvbUFycmF5KGUuX3NvdXJjZXMudG9BcnJheSgpLHRydWUpO3Quc291cmNlUm9vdD1lLl9zb3VyY2VSb290O3Quc291cmNlc0NvbnRlbnQ9ZS5fZ2VuZXJhdGVTb3VyY2VzQ29udGVudCh0Ll9zb3VyY2VzLnRvQXJyYXkoKSx0LnNvdXJjZVJvb3QpO3QuZmlsZT1lLl9maWxlO3QuX19nZW5lcmF0ZWRNYXBwaW5ncz1lLl9tYXBwaW5ncy50b0FycmF5KCkuc2xpY2UoKTt0Ll9fb3JpZ2luYWxNYXBwaW5ncz1lLl9tYXBwaW5ncy50b0FycmF5KCkuc2xpY2UoKS5zb3J0KG4uY29tcGFyZUJ5T3JpZ2luYWxQb3NpdGlvbnMpO3JldHVybiB0fTthLnByb3RvdHlwZS5fdmVyc2lvbj0zO09iamVjdC5kZWZpbmVQcm9wZXJ0eShhLnByb3RvdHlwZSxcInNvdXJjZXNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NvdXJjZXMudG9BcnJheSgpLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5zb3VyY2VSb290IT1udWxsP24uam9pbih0aGlzLnNvdXJjZVJvb3QsZSk6ZX0sdGhpcyl9fSk7YS5wcm90b3R5cGUuX3BhcnNlTWFwcGluZ3M9ZnVuY3Rpb24gZihlLHQpe3ZhciB1PTE7dmFyIHI9MDt2YXIgaT0wO3ZhciBzPTA7dmFyIGE9MDt2YXIgbD0wO3ZhciBmPWU7dmFyIGM9e307dmFyIHA7d2hpbGUoZi5sZW5ndGg+MCl7aWYoZi5jaGFyQXQoMCk9PT1cIjtcIil7dSsrO2Y9Zi5zbGljZSgxKTtyPTB9ZWxzZSBpZihmLmNoYXJBdCgwKT09PVwiLFwiKXtmPWYuc2xpY2UoMSl9ZWxzZXtwPXt9O3AuZ2VuZXJhdGVkTGluZT11O28uZGVjb2RlKGYsYyk7cC5nZW5lcmF0ZWRDb2x1bW49citjLnZhbHVlO3I9cC5nZW5lcmF0ZWRDb2x1bW47Zj1jLnJlc3Q7aWYoZi5sZW5ndGg+MCYmIXRoaXMuX25leHRDaGFySXNNYXBwaW5nU2VwYXJhdG9yKGYpKXtvLmRlY29kZShmLGMpO3Auc291cmNlPXRoaXMuX3NvdXJjZXMuYXQoYStjLnZhbHVlKTthKz1jLnZhbHVlO2Y9Yy5yZXN0O2lmKGYubGVuZ3RoPT09MHx8dGhpcy5fbmV4dENoYXJJc01hcHBpbmdTZXBhcmF0b3IoZikpe3Rocm93IG5ldyBFcnJvcihcIkZvdW5kIGEgc291cmNlLCBidXQgbm8gbGluZSBhbmQgY29sdW1uXCIpfW8uZGVjb2RlKGYsYyk7cC5vcmlnaW5hbExpbmU9aStjLnZhbHVlO2k9cC5vcmlnaW5hbExpbmU7cC5vcmlnaW5hbExpbmUrPTE7Zj1jLnJlc3Q7aWYoZi5sZW5ndGg9PT0wfHx0aGlzLl9uZXh0Q2hhcklzTWFwcGluZ1NlcGFyYXRvcihmKSl7dGhyb3cgbmV3IEVycm9yKFwiRm91bmQgYSBzb3VyY2UgYW5kIGxpbmUsIGJ1dCBubyBjb2x1bW5cIil9by5kZWNvZGUoZixjKTtwLm9yaWdpbmFsQ29sdW1uPXMrYy52YWx1ZTtzPXAub3JpZ2luYWxDb2x1bW47Zj1jLnJlc3Q7aWYoZi5sZW5ndGg+MCYmIXRoaXMuX25leHRDaGFySXNNYXBwaW5nU2VwYXJhdG9yKGYpKXtvLmRlY29kZShmLGMpO3AubmFtZT10aGlzLl9uYW1lcy5hdChsK2MudmFsdWUpO2wrPWMudmFsdWU7Zj1jLnJlc3R9fXRoaXMuX19nZW5lcmF0ZWRNYXBwaW5ncy5wdXNoKHApO2lmKHR5cGVvZiBwLm9yaWdpbmFsTGluZT09PVwibnVtYmVyXCIpe3RoaXMuX19vcmlnaW5hbE1hcHBpbmdzLnB1c2gocCl9fX10aGlzLl9fZ2VuZXJhdGVkTWFwcGluZ3Muc29ydChuLmNvbXBhcmVCeUdlbmVyYXRlZFBvc2l0aW9ucyk7dGhpcy5fX29yaWdpbmFsTWFwcGluZ3Muc29ydChuLmNvbXBhcmVCeU9yaWdpbmFsUG9zaXRpb25zKX07YS5wcm90b3R5cGUuX2ZpbmRNYXBwaW5nPWZ1bmN0aW9uIGMoZSx0LHUsbixpKXtpZihlW3VdPD0wKXt0aHJvdyBuZXcgVHlwZUVycm9yKFwiTGluZSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byAxLCBnb3QgXCIrZVt1XSl9aWYoZVtuXTwwKXt0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ29sdW1uIG11c3QgYmUgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIDAsIGdvdCBcIitlW25dKX1yZXR1cm4gci5zZWFyY2goZSx0LGkpfTthLnByb3RvdHlwZS5jb21wdXRlQ29sdW1uU3BhbnM9ZnVuY3Rpb24gcCgpe2Zvcih2YXIgZT0wO2U8dGhpcy5fZ2VuZXJhdGVkTWFwcGluZ3MubGVuZ3RoOysrZSl7dmFyIHQ9dGhpcy5fZ2VuZXJhdGVkTWFwcGluZ3NbZV07aWYoZSsxPHRoaXMuX2dlbmVyYXRlZE1hcHBpbmdzLmxlbmd0aCl7dmFyIHU9dGhpcy5fZ2VuZXJhdGVkTWFwcGluZ3NbZSsxXTtpZih0LmdlbmVyYXRlZExpbmU9PT11LmdlbmVyYXRlZExpbmUpe3QubGFzdEdlbmVyYXRlZENvbHVtbj11LmdlbmVyYXRlZENvbHVtbi0xO2NvbnRpbnVlfX10Lmxhc3RHZW5lcmF0ZWRDb2x1bW49SW5maW5pdHl9fTthLnByb3RvdHlwZS5vcmlnaW5hbFBvc2l0aW9uRm9yPWZ1bmN0aW9uIEQoZSl7dmFyIHQ9e2dlbmVyYXRlZExpbmU6bi5nZXRBcmcoZSxcImxpbmVcIiksZ2VuZXJhdGVkQ29sdW1uOm4uZ2V0QXJnKGUsXCJjb2x1bW5cIil9O3ZhciB1PXRoaXMuX2ZpbmRNYXBwaW5nKHQsdGhpcy5fZ2VuZXJhdGVkTWFwcGluZ3MsXCJnZW5lcmF0ZWRMaW5lXCIsXCJnZW5lcmF0ZWRDb2x1bW5cIixuLmNvbXBhcmVCeUdlbmVyYXRlZFBvc2l0aW9ucyk7aWYodT49MCl7dmFyIHI9dGhpcy5fZ2VuZXJhdGVkTWFwcGluZ3NbdV07aWYoci5nZW5lcmF0ZWRMaW5lPT09dC5nZW5lcmF0ZWRMaW5lKXt2YXIgaT1uLmdldEFyZyhyLFwic291cmNlXCIsbnVsbCk7aWYoaSE9bnVsbCYmdGhpcy5zb3VyY2VSb290IT1udWxsKXtpPW4uam9pbih0aGlzLnNvdXJjZVJvb3QsaSl9cmV0dXJue3NvdXJjZTppLGxpbmU6bi5nZXRBcmcocixcIm9yaWdpbmFsTGluZVwiLG51bGwpLGNvbHVtbjpuLmdldEFyZyhyLFwib3JpZ2luYWxDb2x1bW5cIixudWxsKSxuYW1lOm4uZ2V0QXJnKHIsXCJuYW1lXCIsbnVsbCl9fX1yZXR1cm57c291cmNlOm51bGwsbGluZTpudWxsLGNvbHVtbjpudWxsLG5hbWU6bnVsbH19O2EucHJvdG90eXBlLnNvdXJjZUNvbnRlbnRGb3I9ZnVuY3Rpb24gaChlLHQpe2lmKCF0aGlzLnNvdXJjZXNDb250ZW50KXtyZXR1cm4gbnVsbH1pZih0aGlzLnNvdXJjZVJvb3QhPW51bGwpe2U9bi5yZWxhdGl2ZSh0aGlzLnNvdXJjZVJvb3QsZSl9aWYodGhpcy5fc291cmNlcy5oYXMoZSkpe3JldHVybiB0aGlzLnNvdXJjZXNDb250ZW50W3RoaXMuX3NvdXJjZXMuaW5kZXhPZihlKV19dmFyIHU7aWYodGhpcy5zb3VyY2VSb290IT1udWxsJiYodT1uLnVybFBhcnNlKHRoaXMuc291cmNlUm9vdCkpKXt2YXIgcj1lLnJlcGxhY2UoL15maWxlOlxcL1xcLy8sXCJcIik7aWYodS5zY2hlbWU9PVwiZmlsZVwiJiZ0aGlzLl9zb3VyY2VzLmhhcyhyKSl7cmV0dXJuIHRoaXMuc291cmNlc0NvbnRlbnRbdGhpcy5fc291cmNlcy5pbmRleE9mKHIpXX1pZigoIXUucGF0aHx8dS5wYXRoPT1cIi9cIikmJnRoaXMuX3NvdXJjZXMuaGFzKFwiL1wiK2UpKXtyZXR1cm4gdGhpcy5zb3VyY2VzQ29udGVudFt0aGlzLl9zb3VyY2VzLmluZGV4T2YoXCIvXCIrZSldfX1pZih0KXtyZXR1cm4gbnVsbH1lbHNle3Rocm93IG5ldyBFcnJvcignXCInK2UrJ1wiIGlzIG5vdCBpbiB0aGUgU291cmNlTWFwLicpfX07YS5wcm90b3R5cGUuZ2VuZXJhdGVkUG9zaXRpb25Gb3I9ZnVuY3Rpb24gbShlKXt2YXIgdD17c291cmNlOm4uZ2V0QXJnKGUsXCJzb3VyY2VcIiksb3JpZ2luYWxMaW5lOm4uZ2V0QXJnKGUsXCJsaW5lXCIpLG9yaWdpbmFsQ29sdW1uOm4uZ2V0QXJnKGUsXCJjb2x1bW5cIil9O2lmKHRoaXMuc291cmNlUm9vdCE9bnVsbCl7dC5zb3VyY2U9bi5yZWxhdGl2ZSh0aGlzLnNvdXJjZVJvb3QsdC5zb3VyY2UpfXZhciB1PXRoaXMuX2ZpbmRNYXBwaW5nKHQsdGhpcy5fb3JpZ2luYWxNYXBwaW5ncyxcIm9yaWdpbmFsTGluZVwiLFwib3JpZ2luYWxDb2x1bW5cIixuLmNvbXBhcmVCeU9yaWdpbmFsUG9zaXRpb25zKTtpZih1Pj0wKXt2YXIgcj10aGlzLl9vcmlnaW5hbE1hcHBpbmdzW3VdO3JldHVybntsaW5lOm4uZ2V0QXJnKHIsXCJnZW5lcmF0ZWRMaW5lXCIsbnVsbCksY29sdW1uOm4uZ2V0QXJnKHIsXCJnZW5lcmF0ZWRDb2x1bW5cIixudWxsKSxsYXN0Q29sdW1uOm4uZ2V0QXJnKHIsXCJsYXN0R2VuZXJhdGVkQ29sdW1uXCIsbnVsbCl9fXJldHVybntsaW5lOm51bGwsY29sdW1uOm51bGwsbGFzdENvbHVtbjpudWxsfX07dC5CYXNpY1NvdXJjZU1hcENvbnN1bWVyPWF9KX0se1wiLi9hcnJheS1zZXRcIjozNSxcIi4vYmFzZTY0LXZscVwiOjM2LFwiLi9iaW5hcnktc2VhcmNoXCI6MzksXCIuL3NvdXJjZS1tYXAtY29uc3VtZXJcIjo0MixcIi4vdXRpbFwiOjQ1LGFtZGVmaW5lOjQ2fV0sMzk6W2Z1bmN0aW9uKGUsdCx1KXtpZih0eXBlb2YgbiE9PVwiZnVuY3Rpb25cIil7dmFyIG49ZShcImFtZGVmaW5lXCIpKHQsZSl9bihmdW5jdGlvbihlLHQsdSl7ZnVuY3Rpb24gbihlLHQsdSxyLGkpe3ZhciBvPU1hdGguZmxvb3IoKHQtZSkvMikrZTt2YXIgcz1pKHUscltvXSx0cnVlKTtpZihzPT09MCl7cmV0dXJuIG99ZWxzZSBpZihzPjApe2lmKHQtbz4xKXtyZXR1cm4gbihvLHQsdSxyLGkpfXJldHVybiBvfWVsc2V7aWYoby1lPjEpe3JldHVybiBuKGUsbyx1LHIsaSl9cmV0dXJuIGU8MD8tMTplfX10LnNlYXJjaD1mdW5jdGlvbiByKGUsdCx1KXtpZih0Lmxlbmd0aD09PTApe3JldHVybi0xfXJldHVybiBuKC0xLHQubGVuZ3RoLGUsdCx1KX19KX0se2FtZGVmaW5lOjQ2fV0sNDA6W2Z1bmN0aW9uKGUsdCx1KXtpZih0eXBlb2YgbiE9PVwiZnVuY3Rpb25cIil7dmFyIG49ZShcImFtZGVmaW5lXCIpKHQsZSl9bihmdW5jdGlvbihlLHQsdSl7dmFyIG49ZShcIi4vdXRpbFwiKTt2YXIgcj1lKFwiLi9iaW5hcnktc2VhcmNoXCIpO3ZhciBpPWUoXCIuL3NvdXJjZS1tYXAtY29uc3VtZXJcIikuU291cmNlTWFwQ29uc3VtZXI7dmFyIG89ZShcIi4vYmFzaWMtc291cmNlLW1hcC1jb25zdW1lclwiKS5CYXNpY1NvdXJjZU1hcENvbnN1bWVyO2Z1bmN0aW9uIHMoZSl7dmFyIHQ9ZTtpZih0eXBlb2YgZT09PVwic3RyaW5nXCIpe3Q9SlNPTi5wYXJzZShlLnJlcGxhY2UoL15cXClcXF1cXH0nLyxcIlwiKSl9dmFyIHU9bi5nZXRBcmcodCxcInZlcnNpb25cIik7dmFyIHI9bi5nZXRBcmcodCxcInNlY3Rpb25zXCIpO2lmKHUhPXRoaXMuX3ZlcnNpb24pe3Rocm93IG5ldyBFcnJvcihcIlVuc3VwcG9ydGVkIHZlcnNpb246IFwiK3UpfXZhciBvPXtsaW5lOi0xLGNvbHVtbjowfTt0aGlzLl9zZWN0aW9ucz1yLm1hcChmdW5jdGlvbihlKXtpZihlLnVybCl7dGhyb3cgbmV3IEVycm9yKFwiU3VwcG9ydCBmb3IgdXJsIGZpZWxkIGluIHNlY3Rpb25zIG5vdCBpbXBsZW1lbnRlZC5cIil9dmFyIHQ9bi5nZXRBcmcoZSxcIm9mZnNldFwiKTt2YXIgdT1uLmdldEFyZyh0LFwibGluZVwiKTt2YXIgcj1uLmdldEFyZyh0LFwiY29sdW1uXCIpO2lmKHU8by5saW5lfHx1PT09by5saW5lJiZyPG8uY29sdW1uKXt0aHJvdyBuZXcgRXJyb3IoXCJTZWN0aW9uIG9mZnNldHMgbXVzdCBiZSBvcmRlcmVkIGFuZCBub24tb3ZlcmxhcHBpbmcuXCIpfW89dDtyZXR1cm57Z2VuZXJhdGVkT2Zmc2V0OntnZW5lcmF0ZWRMaW5lOnUrMSxnZW5lcmF0ZWRDb2x1bW46cisxfSxjb25zdW1lcjpuZXcgaShuLmdldEFyZyhlLFwibWFwXCIpKX19KX1zLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGkucHJvdG90eXBlKTtzLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1pO3MucHJvdG90eXBlLl92ZXJzaW9uPTM7T2JqZWN0LmRlZmluZVByb3BlcnR5KHMucHJvdG90eXBlLFwic291cmNlc1wiLHtnZXQ6ZnVuY3Rpb24oKXt2YXIgZT1bXTtmb3IodmFyIHQ9MDt0PHRoaXMuX3NlY3Rpb25zLmxlbmd0aDt0Kyspe2Zvcih2YXIgdT0wO3U8dGhpcy5fc2VjdGlvbnNbdF0uY29uc3VtZXIuc291cmNlcy5sZW5ndGg7dSsrKXtlLnB1c2godGhpcy5fc2VjdGlvbnNbdF0uY29uc3VtZXIuc291cmNlc1t1XSl9fXJldHVybiBlfX0pO3MucHJvdG90eXBlLm9yaWdpbmFsUG9zaXRpb25Gb3I9ZnVuY3Rpb24gYShlKXt2YXIgdD17Z2VuZXJhdGVkTGluZTpuLmdldEFyZyhlLFwibGluZVwiKSxnZW5lcmF0ZWRDb2x1bW46bi5nZXRBcmcoZSxcImNvbHVtblwiKX07dmFyIHU9ci5zZWFyY2godCx0aGlzLl9zZWN0aW9ucyxmdW5jdGlvbihlLHQpe3ZhciB1PWUuZ2VuZXJhdGVkTGluZS10LmdlbmVyYXRlZE9mZnNldC5nZW5lcmF0ZWRMaW5lO2lmKHUpe3JldHVybiB1fXJldHVybiBlLmdlbmVyYXRlZENvbHVtbi10LmdlbmVyYXRlZE9mZnNldC5nZW5lcmF0ZWRDb2x1bW59KTt2YXIgaT10aGlzLl9zZWN0aW9uc1t1XTtpZighaSl7cmV0dXJue3NvdXJjZTpudWxsLGxpbmU6bnVsbCxjb2x1bW46bnVsbCxuYW1lOm51bGx9fXJldHVybiBpLmNvbnN1bWVyLm9yaWdpbmFsUG9zaXRpb25Gb3Ioe2xpbmU6dC5nZW5lcmF0ZWRMaW5lLShpLmdlbmVyYXRlZE9mZnNldC5nZW5lcmF0ZWRMaW5lLTEpLGNvbHVtbjp0LmdlbmVyYXRlZENvbHVtbi0oaS5nZW5lcmF0ZWRPZmZzZXQuZ2VuZXJhdGVkTGluZT09PXQuZ2VuZXJhdGVkTGluZT9pLmdlbmVyYXRlZE9mZnNldC5nZW5lcmF0ZWRDb2x1bW4tMTowKX0pfTtzLnByb3RvdHlwZS5zb3VyY2VDb250ZW50Rm9yPWZ1bmN0aW9uIGwoZSx0KXtmb3IodmFyIHU9MDt1PHRoaXMuX3NlY3Rpb25zLmxlbmd0aDt1Kyspe3ZhciBuPXRoaXMuX3NlY3Rpb25zW3VdO3ZhciByPW4uY29uc3VtZXIuc291cmNlQ29udGVudEZvcihlLHRydWUpO2lmKHIpe3JldHVybiByfX1pZih0KXtyZXR1cm4gbnVsbH1lbHNle3Rocm93IG5ldyBFcnJvcignXCInK2UrJ1wiIGlzIG5vdCBpbiB0aGUgU291cmNlTWFwLicpfX07cy5wcm90b3R5cGUuZ2VuZXJhdGVkUG9zaXRpb25Gb3I9ZnVuY3Rpb24gZihlKXtmb3IodmFyIHQ9MDt0PHRoaXMuX3NlY3Rpb25zLmxlbmd0aDt0Kyspe3ZhciB1PXRoaXMuX3NlY3Rpb25zW3RdO2lmKHUuY29uc3VtZXIuc291cmNlcy5pbmRleE9mKG4uZ2V0QXJnKGUsXCJzb3VyY2VcIikpPT09LTEpe2NvbnRpbnVlfXZhciByPXUuY29uc3VtZXIuZ2VuZXJhdGVkUG9zaXRpb25Gb3IoZSk7aWYocil7dmFyIGk9e2xpbmU6ci5saW5lKyh1LmdlbmVyYXRlZE9mZnNldC5nZW5lcmF0ZWRMaW5lLTEpLGNvbHVtbjpyLmNvbHVtbisodS5nZW5lcmF0ZWRPZmZzZXQuZ2VuZXJhdGVkTGluZT09PXIubGluZT91LmdlbmVyYXRlZE9mZnNldC5nZW5lcmF0ZWRDb2x1bW4tMTowKX07cmV0dXJuIGl9fXJldHVybntsaW5lOm51bGwsY29sdW1uOm51bGx9fTtzLnByb3RvdHlwZS5fcGFyc2VNYXBwaW5ncz1mdW5jdGlvbiBjKGUsdCl7dGhpcy5fX2dlbmVyYXRlZE1hcHBpbmdzPVtdO3RoaXMuX19vcmlnaW5hbE1hcHBpbmdzPVtdO2Zvcih2YXIgdT0wO3U8dGhpcy5fc2VjdGlvbnMubGVuZ3RoO3UrKyl7dmFyIHI9dGhpcy5fc2VjdGlvbnNbdV07dmFyIGk9ci5jb25zdW1lci5fZ2VuZXJhdGVkTWFwcGluZ3M7Zm9yKHZhciBvPTA7bzxpLmxlbmd0aDtvKyspe3ZhciBzPWlbdV07dmFyIGE9cy5zb3VyY2U7dmFyIGw9ci5jb25zdW1lci5zb3VyY2VSb290O2lmKGEhPW51bGwmJmwhPW51bGwpe2E9bi5qb2luKGwsYSl9dmFyIGY9e3NvdXJjZTphLGdlbmVyYXRlZExpbmU6cy5nZW5lcmF0ZWRMaW5lKyhyLmdlbmVyYXRlZE9mZnNldC5nZW5lcmF0ZWRMaW5lLTEpLGdlbmVyYXRlZENvbHVtbjpzLmNvbHVtbisoci5nZW5lcmF0ZWRPZmZzZXQuZ2VuZXJhdGVkTGluZT09PXMuZ2VuZXJhdGVkTGluZSk/ci5nZW5lcmF0ZWRPZmZzZXQuZ2VuZXJhdGVkQ29sdW1uLTE6MCxvcmlnaW5hbExpbmU6cy5vcmlnaW5hbExpbmUsb3JpZ2luYWxDb2x1bW46cy5vcmlnaW5hbENvbHVtbixuYW1lOnMubmFtZX07dGhpcy5fX2dlbmVyYXRlZE1hcHBpbmdzLnB1c2goZik7aWYodHlwZW9mIGYub3JpZ2luYWxMaW5lPT09XCJudW1iZXJcIil7dGhpcy5fX29yaWdpbmFsTWFwcGluZ3MucHVzaChmKX19fXRoaXMuX19nZW5lcmF0ZWRNYXBwaW5ncy5zb3J0KG4uY29tcGFyZUJ5R2VuZXJhdGVkUG9zaXRpb25zKTt0aGlzLl9fb3JpZ2luYWxNYXBwaW5ncy5zb3J0KG4uY29tcGFyZUJ5T3JpZ2luYWxQb3NpdGlvbnMpfTt0LkluZGV4ZWRTb3VyY2VNYXBDb25zdW1lcj1zfSl9LHtcIi4vYmFzaWMtc291cmNlLW1hcC1jb25zdW1lclwiOjM4LFwiLi9iaW5hcnktc2VhcmNoXCI6MzksXCIuL3NvdXJjZS1tYXAtY29uc3VtZXJcIjo0MixcIi4vdXRpbFwiOjQ1LGFtZGVmaW5lOjQ2fV0sNDE6W2Z1bmN0aW9uKGUsdCx1KXtpZih0eXBlb2YgbiE9PVwiZnVuY3Rpb25cIil7dmFyIG49ZShcImFtZGVmaW5lXCIpKHQsZSl9bihmdW5jdGlvbihlLHQsdSl7dmFyIG49ZShcIi4vdXRpbFwiKTtmdW5jdGlvbiByKGUsdCl7dmFyIHU9ZS5nZW5lcmF0ZWRMaW5lO3ZhciByPXQuZ2VuZXJhdGVkTGluZTt2YXIgaT1lLmdlbmVyYXRlZENvbHVtbjt2YXIgbz10LmdlbmVyYXRlZENvbHVtbjtyZXR1cm4gcj51fHxyPT11JiZvPj1pfHxuLmNvbXBhcmVCeUdlbmVyYXRlZFBvc2l0aW9ucyhlLHQpPD0wfWZ1bmN0aW9uIGkoKXt0aGlzLl9hcnJheT1bXTt0aGlzLl9zb3J0ZWQ9dHJ1ZTt0aGlzLl9sYXN0PXtnZW5lcmF0ZWRMaW5lOi0xLGdlbmVyYXRlZENvbHVtbjowfX1pLnByb3RvdHlwZS51bnNvcnRlZEZvckVhY2g9ZnVuY3Rpb24gbyhlLHQpe3RoaXMuX2FycmF5LmZvckVhY2goZSx0KX07aS5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uIHMoZSl7dmFyIHQ7aWYocih0aGlzLl9sYXN0LGUpKXt0aGlzLl9sYXN0PWU7dGhpcy5fYXJyYXkucHVzaChlKX1lbHNle3RoaXMuX3NvcnRlZD1mYWxzZTt0aGlzLl9hcnJheS5wdXNoKGUpfX07aS5wcm90b3R5cGUudG9BcnJheT1mdW5jdGlvbiBhKCl7aWYoIXRoaXMuX3NvcnRlZCl7dGhpcy5fYXJyYXkuc29ydChuLmNvbXBhcmVCeUdlbmVyYXRlZFBvc2l0aW9ucyk7dGhpcy5fc29ydGVkPXRydWV9cmV0dXJuIHRoaXMuX2FycmF5fTt0Lk1hcHBpbmdMaXN0PWl9KX0se1wiLi91dGlsXCI6NDUsYW1kZWZpbmU6NDZ9XSw0MjpbZnVuY3Rpb24oZSx0LHUpe2lmKHR5cGVvZiBuIT09XCJmdW5jdGlvblwiKXt2YXIgbj1lKFwiYW1kZWZpbmVcIikodCxlKX1uKGZ1bmN0aW9uKGUsdCx1KXt2YXIgbj1lKFwiLi91dGlsXCIpO2Z1bmN0aW9uIHIodCl7dmFyIHU9dDtpZih0eXBlb2YgdD09PVwic3RyaW5nXCIpe3U9SlNPTi5wYXJzZSh0LnJlcGxhY2UoL15cXClcXF1cXH0nLyxcIlwiKSl9aWYodS5zZWN0aW9ucyE9bnVsbCl7dmFyIG49ZShcIi4vaW5kZXhlZC1zb3VyY2UtbWFwLWNvbnN1bWVyXCIpO3JldHVybiBuZXcgbi5JbmRleGVkU291cmNlTWFwQ29uc3VtZXIodSl9ZWxzZXt2YXIgcj1lKFwiLi9iYXNpYy1zb3VyY2UtbWFwLWNvbnN1bWVyXCIpO3JldHVybiBuZXcgci5CYXNpY1NvdXJjZU1hcENvbnN1bWVyKHUpfX1yLmZyb21Tb3VyY2VNYXA9ZnVuY3Rpb24odCl7dmFyIHU9ZShcIi4vYmFzaWMtc291cmNlLW1hcC1jb25zdW1lclwiKTtyZXR1cm4gdS5CYXNpY1NvdXJjZU1hcENvbnN1bWVyLmZyb21Tb3VyY2VNYXAodCl9O3IucHJvdG90eXBlLl92ZXJzaW9uPTM7ci5wcm90b3R5cGUuX19nZW5lcmF0ZWRNYXBwaW5ncz1udWxsO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLnByb3RvdHlwZSxcIl9nZW5lcmF0ZWRNYXBwaW5nc1wiLHtnZXQ6ZnVuY3Rpb24oKXtpZighdGhpcy5fX2dlbmVyYXRlZE1hcHBpbmdzKXt0aGlzLl9fZ2VuZXJhdGVkTWFwcGluZ3M9W107dGhpcy5fX29yaWdpbmFsTWFwcGluZ3M9W107dGhpcy5fcGFyc2VNYXBwaW5ncyh0aGlzLl9tYXBwaW5ncyx0aGlzLnNvdXJjZVJvb3QpfXJldHVybiB0aGlzLl9fZ2VuZXJhdGVkTWFwcGluZ3N9fSk7ci5wcm90b3R5cGUuX19vcmlnaW5hbE1hcHBpbmdzPW51bGw7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIucHJvdG90eXBlLFwiX29yaWdpbmFsTWFwcGluZ3NcIix7Z2V0OmZ1bmN0aW9uKCl7aWYoIXRoaXMuX19vcmlnaW5hbE1hcHBpbmdzKXt0aGlzLl9fZ2VuZXJhdGVkTWFwcGluZ3M9W107dGhpcy5fX29yaWdpbmFsTWFwcGluZ3M9W107dGhpcy5fcGFyc2VNYXBwaW5ncyh0aGlzLl9tYXBwaW5ncyx0aGlzLnNvdXJjZVJvb3QpfXJldHVybiB0aGlzLl9fb3JpZ2luYWxNYXBwaW5nc319KTtyLnByb3RvdHlwZS5fbmV4dENoYXJJc01hcHBpbmdTZXBhcmF0b3I9ZnVuY3Rpb24gaShlKXt2YXIgdD1lLmNoYXJBdCgwKTtyZXR1cm4gdD09PVwiO1wifHx0PT09XCIsXCJ9O3IucHJvdG90eXBlLl9wYXJzZU1hcHBpbmdzPWZ1bmN0aW9uIG8oZSx0KXt0aHJvdyBuZXcgRXJyb3IoXCJTdWJjbGFzc2VzIG11c3QgaW1wbGVtZW50IF9wYXJzZU1hcHBpbmdzXCIpfTtyLkdFTkVSQVRFRF9PUkRFUj0xO3IuT1JJR0lOQUxfT1JERVI9MjtyLnByb3RvdHlwZS5lYWNoTWFwcGluZz1mdW5jdGlvbiBzKGUsdCx1KXt2YXIgaT10fHxudWxsO3ZhciBvPXV8fHIuR0VORVJBVEVEX09SREVSO3ZhciBzO3N3aXRjaChvKXtjYXNlIHIuR0VORVJBVEVEX09SREVSOnM9dGhpcy5fZ2VuZXJhdGVkTWFwcGluZ3M7YnJlYWs7Y2FzZSByLk9SSUdJTkFMX09SREVSOnM9dGhpcy5fb3JpZ2luYWxNYXBwaW5nczticmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcihcIlVua25vd24gb3JkZXIgb2YgaXRlcmF0aW9uLlwiKX12YXIgYT10aGlzLnNvdXJjZVJvb3Q7cy5tYXAoZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zb3VyY2U7aWYodCE9bnVsbCYmYSE9bnVsbCl7dD1uLmpvaW4oYSx0KX1yZXR1cm57c291cmNlOnQsZ2VuZXJhdGVkTGluZTplLmdlbmVyYXRlZExpbmUsZ2VuZXJhdGVkQ29sdW1uOmUuZ2VuZXJhdGVkQ29sdW1uLG9yaWdpbmFsTGluZTplLm9yaWdpbmFsTGluZSxvcmlnaW5hbENvbHVtbjplLm9yaWdpbmFsQ29sdW1uLG5hbWU6ZS5uYW1lfX0pLmZvckVhY2goZSxpKX07ci5wcm90b3R5cGUuYWxsR2VuZXJhdGVkUG9zaXRpb25zRm9yPWZ1bmN0aW9uIGEoZSl7dmFyIHQ9e3NvdXJjZTpuLmdldEFyZyhlLFwic291cmNlXCIpLG9yaWdpbmFsTGluZTpuLmdldEFyZyhlLFwibGluZVwiKSxvcmlnaW5hbENvbHVtbjpJbmZpbml0eX07aWYodGhpcy5zb3VyY2VSb290IT1udWxsKXt0LnNvdXJjZT1uLnJlbGF0aXZlKHRoaXMuc291cmNlUm9vdCx0LnNvdXJjZSl9dmFyIHU9W107dmFyIHI9dGhpcy5fZmluZE1hcHBpbmcodCx0aGlzLl9vcmlnaW5hbE1hcHBpbmdzLFwib3JpZ2luYWxMaW5lXCIsXCJvcmlnaW5hbENvbHVtblwiLG4uY29tcGFyZUJ5T3JpZ2luYWxQb3NpdGlvbnMpO2lmKHI+PTApe3ZhciBpPXRoaXMuX29yaWdpbmFsTWFwcGluZ3Nbcl07d2hpbGUoaSYmaS5vcmlnaW5hbExpbmU9PT10Lm9yaWdpbmFsTGluZSl7dS5wdXNoKHtsaW5lOm4uZ2V0QXJnKGksXCJnZW5lcmF0ZWRMaW5lXCIsbnVsbCksY29sdW1uOm4uZ2V0QXJnKGksXCJnZW5lcmF0ZWRDb2x1bW5cIixudWxsKSxsYXN0Q29sdW1uOm4uZ2V0QXJnKGksXCJsYXN0R2VuZXJhdGVkQ29sdW1uXCIsbnVsbCl9KTtpPXRoaXMuX29yaWdpbmFsTWFwcGluZ3NbLS1yXX19cmV0dXJuIHUucmV2ZXJzZSgpfTt0LlNvdXJjZU1hcENvbnN1bWVyPXJ9KX0se1wiLi9iYXNpYy1zb3VyY2UtbWFwLWNvbnN1bWVyXCI6MzgsXCIuL2luZGV4ZWQtc291cmNlLW1hcC1jb25zdW1lclwiOjQwLFwiLi91dGlsXCI6NDUsYW1kZWZpbmU6NDZ9XSw0MzpbZnVuY3Rpb24oZSx0LHUpe2lmKHR5cGVvZiBuIT09XCJmdW5jdGlvblwiKXt2YXIgbj1lKFwiYW1kZWZpbmVcIikodCxlKX1uKGZ1bmN0aW9uKGUsdCx1KXt2YXIgbj1lKFwiLi9iYXNlNjQtdmxxXCIpO3ZhciByPWUoXCIuL3V0aWxcIik7XG52YXIgaT1lKFwiLi9hcnJheS1zZXRcIikuQXJyYXlTZXQ7dmFyIG89ZShcIi4vbWFwcGluZy1saXN0XCIpLk1hcHBpbmdMaXN0O2Z1bmN0aW9uIHMoZSl7aWYoIWUpe2U9e319dGhpcy5fZmlsZT1yLmdldEFyZyhlLFwiZmlsZVwiLG51bGwpO3RoaXMuX3NvdXJjZVJvb3Q9ci5nZXRBcmcoZSxcInNvdXJjZVJvb3RcIixudWxsKTt0aGlzLl9za2lwVmFsaWRhdGlvbj1yLmdldEFyZyhlLFwic2tpcFZhbGlkYXRpb25cIixmYWxzZSk7dGhpcy5fc291cmNlcz1uZXcgaTt0aGlzLl9uYW1lcz1uZXcgaTt0aGlzLl9tYXBwaW5ncz1uZXcgbzt0aGlzLl9zb3VyY2VzQ29udGVudHM9bnVsbH1zLnByb3RvdHlwZS5fdmVyc2lvbj0zO3MuZnJvbVNvdXJjZU1hcD1mdW5jdGlvbiBhKGUpe3ZhciB0PWUuc291cmNlUm9vdDt2YXIgdT1uZXcgcyh7ZmlsZTplLmZpbGUsc291cmNlUm9vdDp0fSk7ZS5lYWNoTWFwcGluZyhmdW5jdGlvbihlKXt2YXIgbj17Z2VuZXJhdGVkOntsaW5lOmUuZ2VuZXJhdGVkTGluZSxjb2x1bW46ZS5nZW5lcmF0ZWRDb2x1bW59fTtpZihlLnNvdXJjZSE9bnVsbCl7bi5zb3VyY2U9ZS5zb3VyY2U7aWYodCE9bnVsbCl7bi5zb3VyY2U9ci5yZWxhdGl2ZSh0LG4uc291cmNlKX1uLm9yaWdpbmFsPXtsaW5lOmUub3JpZ2luYWxMaW5lLGNvbHVtbjplLm9yaWdpbmFsQ29sdW1ufTtpZihlLm5hbWUhPW51bGwpe24ubmFtZT1lLm5hbWV9fXUuYWRkTWFwcGluZyhuKX0pO2Uuc291cmNlcy5mb3JFYWNoKGZ1bmN0aW9uKHQpe3ZhciBuPWUuc291cmNlQ29udGVudEZvcih0KTtpZihuIT1udWxsKXt1LnNldFNvdXJjZUNvbnRlbnQodCxuKX19KTtyZXR1cm4gdX07cy5wcm90b3R5cGUuYWRkTWFwcGluZz1mdW5jdGlvbiBsKGUpe3ZhciB0PXIuZ2V0QXJnKGUsXCJnZW5lcmF0ZWRcIik7dmFyIHU9ci5nZXRBcmcoZSxcIm9yaWdpbmFsXCIsbnVsbCk7dmFyIG49ci5nZXRBcmcoZSxcInNvdXJjZVwiLG51bGwpO3ZhciBpPXIuZ2V0QXJnKGUsXCJuYW1lXCIsbnVsbCk7aWYoIXRoaXMuX3NraXBWYWxpZGF0aW9uKXt0aGlzLl92YWxpZGF0ZU1hcHBpbmcodCx1LG4saSl9aWYobiE9bnVsbCYmIXRoaXMuX3NvdXJjZXMuaGFzKG4pKXt0aGlzLl9zb3VyY2VzLmFkZChuKX1pZihpIT1udWxsJiYhdGhpcy5fbmFtZXMuaGFzKGkpKXt0aGlzLl9uYW1lcy5hZGQoaSl9dGhpcy5fbWFwcGluZ3MuYWRkKHtnZW5lcmF0ZWRMaW5lOnQubGluZSxnZW5lcmF0ZWRDb2x1bW46dC5jb2x1bW4sb3JpZ2luYWxMaW5lOnUhPW51bGwmJnUubGluZSxvcmlnaW5hbENvbHVtbjp1IT1udWxsJiZ1LmNvbHVtbixzb3VyY2U6bixuYW1lOml9KX07cy5wcm90b3R5cGUuc2V0U291cmNlQ29udGVudD1mdW5jdGlvbiBmKGUsdCl7dmFyIHU9ZTtpZih0aGlzLl9zb3VyY2VSb290IT1udWxsKXt1PXIucmVsYXRpdmUodGhpcy5fc291cmNlUm9vdCx1KX1pZih0IT1udWxsKXtpZighdGhpcy5fc291cmNlc0NvbnRlbnRzKXt0aGlzLl9zb3VyY2VzQ29udGVudHM9e319dGhpcy5fc291cmNlc0NvbnRlbnRzW3IudG9TZXRTdHJpbmcodSldPXR9ZWxzZSBpZih0aGlzLl9zb3VyY2VzQ29udGVudHMpe2RlbGV0ZSB0aGlzLl9zb3VyY2VzQ29udGVudHNbci50b1NldFN0cmluZyh1KV07aWYoT2JqZWN0LmtleXModGhpcy5fc291cmNlc0NvbnRlbnRzKS5sZW5ndGg9PT0wKXt0aGlzLl9zb3VyY2VzQ29udGVudHM9bnVsbH19fTtzLnByb3RvdHlwZS5hcHBseVNvdXJjZU1hcD1mdW5jdGlvbiBjKGUsdCx1KXt2YXIgbj10O2lmKHQ9PW51bGwpe2lmKGUuZmlsZT09bnVsbCl7dGhyb3cgbmV3IEVycm9yKFwiU291cmNlTWFwR2VuZXJhdG9yLnByb3RvdHlwZS5hcHBseVNvdXJjZU1hcCByZXF1aXJlcyBlaXRoZXIgYW4gZXhwbGljaXQgc291cmNlIGZpbGUsIFwiKydvciB0aGUgc291cmNlIG1hcFxcJ3MgXCJmaWxlXCIgcHJvcGVydHkuIEJvdGggd2VyZSBvbWl0dGVkLicpfW49ZS5maWxlfXZhciBvPXRoaXMuX3NvdXJjZVJvb3Q7aWYobyE9bnVsbCl7bj1yLnJlbGF0aXZlKG8sbil9dmFyIHM9bmV3IGk7dmFyIGE9bmV3IGk7dGhpcy5fbWFwcGluZ3MudW5zb3J0ZWRGb3JFYWNoKGZ1bmN0aW9uKHQpe2lmKHQuc291cmNlPT09biYmdC5vcmlnaW5hbExpbmUhPW51bGwpe3ZhciBpPWUub3JpZ2luYWxQb3NpdGlvbkZvcih7bGluZTp0Lm9yaWdpbmFsTGluZSxjb2x1bW46dC5vcmlnaW5hbENvbHVtbn0pO2lmKGkuc291cmNlIT1udWxsKXt0LnNvdXJjZT1pLnNvdXJjZTtpZih1IT1udWxsKXt0LnNvdXJjZT1yLmpvaW4odSx0LnNvdXJjZSl9aWYobyE9bnVsbCl7dC5zb3VyY2U9ci5yZWxhdGl2ZShvLHQuc291cmNlKX10Lm9yaWdpbmFsTGluZT1pLmxpbmU7dC5vcmlnaW5hbENvbHVtbj1pLmNvbHVtbjtpZihpLm5hbWUhPW51bGwpe3QubmFtZT1pLm5hbWV9fX12YXIgbD10LnNvdXJjZTtpZihsIT1udWxsJiYhcy5oYXMobCkpe3MuYWRkKGwpfXZhciBmPXQubmFtZTtpZihmIT1udWxsJiYhYS5oYXMoZikpe2EuYWRkKGYpfX0sdGhpcyk7dGhpcy5fc291cmNlcz1zO3RoaXMuX25hbWVzPWE7ZS5zb3VyY2VzLmZvckVhY2goZnVuY3Rpb24odCl7dmFyIG49ZS5zb3VyY2VDb250ZW50Rm9yKHQpO2lmKG4hPW51bGwpe2lmKHUhPW51bGwpe3Q9ci5qb2luKHUsdCl9aWYobyE9bnVsbCl7dD1yLnJlbGF0aXZlKG8sdCl9dGhpcy5zZXRTb3VyY2VDb250ZW50KHQsbil9fSx0aGlzKX07cy5wcm90b3R5cGUuX3ZhbGlkYXRlTWFwcGluZz1mdW5jdGlvbiBwKGUsdCx1LG4pe2lmKGUmJlwibGluZVwiaW4gZSYmXCJjb2x1bW5cImluIGUmJmUubGluZT4wJiZlLmNvbHVtbj49MCYmIXQmJiF1JiYhbil7cmV0dXJufWVsc2UgaWYoZSYmXCJsaW5lXCJpbiBlJiZcImNvbHVtblwiaW4gZSYmdCYmXCJsaW5lXCJpbiB0JiZcImNvbHVtblwiaW4gdCYmZS5saW5lPjAmJmUuY29sdW1uPj0wJiZ0LmxpbmU+MCYmdC5jb2x1bW4+PTAmJnUpe3JldHVybn1lbHNle3Rocm93IG5ldyBFcnJvcihcIkludmFsaWQgbWFwcGluZzogXCIrSlNPTi5zdHJpbmdpZnkoe2dlbmVyYXRlZDplLHNvdXJjZTp1LG9yaWdpbmFsOnQsbmFtZTpufSkpfX07cy5wcm90b3R5cGUuX3NlcmlhbGl6ZU1hcHBpbmdzPWZ1bmN0aW9uIEQoKXt2YXIgZT0wO3ZhciB0PTE7dmFyIHU9MDt2YXIgaT0wO3ZhciBvPTA7dmFyIHM9MDt2YXIgYT1cIlwiO3ZhciBsO3ZhciBmPXRoaXMuX21hcHBpbmdzLnRvQXJyYXkoKTtmb3IodmFyIGM9MCxwPWYubGVuZ3RoO2M8cDtjKyspe2w9ZltjXTtpZihsLmdlbmVyYXRlZExpbmUhPT10KXtlPTA7d2hpbGUobC5nZW5lcmF0ZWRMaW5lIT09dCl7YSs9XCI7XCI7dCsrfX1lbHNle2lmKGM+MCl7aWYoIXIuY29tcGFyZUJ5R2VuZXJhdGVkUG9zaXRpb25zKGwsZltjLTFdKSl7Y29udGludWV9YSs9XCIsXCJ9fWErPW4uZW5jb2RlKGwuZ2VuZXJhdGVkQ29sdW1uLWUpO2U9bC5nZW5lcmF0ZWRDb2x1bW47aWYobC5zb3VyY2UhPW51bGwpe2ErPW4uZW5jb2RlKHRoaXMuX3NvdXJjZXMuaW5kZXhPZihsLnNvdXJjZSktcyk7cz10aGlzLl9zb3VyY2VzLmluZGV4T2YobC5zb3VyY2UpO2ErPW4uZW5jb2RlKGwub3JpZ2luYWxMaW5lLTEtaSk7aT1sLm9yaWdpbmFsTGluZS0xO2ErPW4uZW5jb2RlKGwub3JpZ2luYWxDb2x1bW4tdSk7dT1sLm9yaWdpbmFsQ29sdW1uO2lmKGwubmFtZSE9bnVsbCl7YSs9bi5lbmNvZGUodGhpcy5fbmFtZXMuaW5kZXhPZihsLm5hbWUpLW8pO289dGhpcy5fbmFtZXMuaW5kZXhPZihsLm5hbWUpfX19cmV0dXJuIGF9O3MucHJvdG90eXBlLl9nZW5lcmF0ZVNvdXJjZXNDb250ZW50PWZ1bmN0aW9uIGgoZSx0KXtyZXR1cm4gZS5tYXAoZnVuY3Rpb24oZSl7aWYoIXRoaXMuX3NvdXJjZXNDb250ZW50cyl7cmV0dXJuIG51bGx9aWYodCE9bnVsbCl7ZT1yLnJlbGF0aXZlKHQsZSl9dmFyIHU9ci50b1NldFN0cmluZyhlKTtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHRoaXMuX3NvdXJjZXNDb250ZW50cyx1KT90aGlzLl9zb3VyY2VzQ29udGVudHNbdV06bnVsbH0sdGhpcyl9O3MucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbiBtKCl7dmFyIGU9e3ZlcnNpb246dGhpcy5fdmVyc2lvbixzb3VyY2VzOnRoaXMuX3NvdXJjZXMudG9BcnJheSgpLG5hbWVzOnRoaXMuX25hbWVzLnRvQXJyYXkoKSxtYXBwaW5nczp0aGlzLl9zZXJpYWxpemVNYXBwaW5ncygpfTtpZih0aGlzLl9maWxlIT1udWxsKXtlLmZpbGU9dGhpcy5fZmlsZX1pZih0aGlzLl9zb3VyY2VSb290IT1udWxsKXtlLnNvdXJjZVJvb3Q9dGhpcy5fc291cmNlUm9vdH1pZih0aGlzLl9zb3VyY2VzQ29udGVudHMpe2Uuc291cmNlc0NvbnRlbnQ9dGhpcy5fZ2VuZXJhdGVTb3VyY2VzQ29udGVudChlLnNvdXJjZXMsZS5zb3VyY2VSb290KX1yZXR1cm4gZX07cy5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24gZCgpe3JldHVybiBKU09OLnN0cmluZ2lmeSh0aGlzKX07dC5Tb3VyY2VNYXBHZW5lcmF0b3I9c30pfSx7XCIuL2FycmF5LXNldFwiOjM1LFwiLi9iYXNlNjQtdmxxXCI6MzYsXCIuL21hcHBpbmctbGlzdFwiOjQxLFwiLi91dGlsXCI6NDUsYW1kZWZpbmU6NDZ9XSw0NDpbZnVuY3Rpb24oZSx0LHUpe2lmKHR5cGVvZiBuIT09XCJmdW5jdGlvblwiKXt2YXIgbj1lKFwiYW1kZWZpbmVcIikodCxlKX1uKGZ1bmN0aW9uKGUsdCx1KXt2YXIgbj1lKFwiLi9zb3VyY2UtbWFwLWdlbmVyYXRvclwiKS5Tb3VyY2VNYXBHZW5lcmF0b3I7dmFyIHI9ZShcIi4vdXRpbFwiKTt2YXIgaT0vKFxccj9cXG4pLzt2YXIgbz0xMDt2YXIgcz1cIiQkJGlzU291cmNlTm9kZSQkJFwiO2Z1bmN0aW9uIGEoZSx0LHUsbixyKXt0aGlzLmNoaWxkcmVuPVtdO3RoaXMuc291cmNlQ29udGVudHM9e307dGhpcy5saW5lPWU9PW51bGw/bnVsbDplO3RoaXMuY29sdW1uPXQ9PW51bGw/bnVsbDp0O3RoaXMuc291cmNlPXU9PW51bGw/bnVsbDp1O3RoaXMubmFtZT1yPT1udWxsP251bGw6cjt0aGlzW3NdPXRydWU7aWYobiE9bnVsbCl0aGlzLmFkZChuKX1hLmZyb21TdHJpbmdXaXRoU291cmNlTWFwPWZ1bmN0aW9uIGwoZSx0LHUpe3ZhciBuPW5ldyBhO3ZhciBvPWUuc3BsaXQoaSk7dmFyIHM9ZnVuY3Rpb24oKXt2YXIgZT1vLnNoaWZ0KCk7dmFyIHQ9by5zaGlmdCgpfHxcIlwiO3JldHVybiBlK3R9O3ZhciBsPTEsZj0wO3ZhciBjPW51bGw7dC5lYWNoTWFwcGluZyhmdW5jdGlvbihlKXtpZihjIT09bnVsbCl7aWYobDxlLmdlbmVyYXRlZExpbmUpe3ZhciB0PVwiXCI7cChjLHMoKSk7bCsrO2Y9MH1lbHNle3ZhciB1PW9bMF07dmFyIHQ9dS5zdWJzdHIoMCxlLmdlbmVyYXRlZENvbHVtbi1mKTtvWzBdPXUuc3Vic3RyKGUuZ2VuZXJhdGVkQ29sdW1uLWYpO2Y9ZS5nZW5lcmF0ZWRDb2x1bW47cChjLHQpO2M9ZTtyZXR1cm59fXdoaWxlKGw8ZS5nZW5lcmF0ZWRMaW5lKXtuLmFkZChzKCkpO2wrK31pZihmPGUuZ2VuZXJhdGVkQ29sdW1uKXt2YXIgdT1vWzBdO24uYWRkKHUuc3Vic3RyKDAsZS5nZW5lcmF0ZWRDb2x1bW4pKTtvWzBdPXUuc3Vic3RyKGUuZ2VuZXJhdGVkQ29sdW1uKTtmPWUuZ2VuZXJhdGVkQ29sdW1ufWM9ZX0sdGhpcyk7aWYoby5sZW5ndGg+MCl7aWYoYyl7cChjLHMoKSl9bi5hZGQoby5qb2luKFwiXCIpKX10LnNvdXJjZXMuZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgaT10LnNvdXJjZUNvbnRlbnRGb3IoZSk7aWYoaSE9bnVsbCl7aWYodSE9bnVsbCl7ZT1yLmpvaW4odSxlKX1uLnNldFNvdXJjZUNvbnRlbnQoZSxpKX19KTtyZXR1cm4gbjtmdW5jdGlvbiBwKGUsdCl7aWYoZT09PW51bGx8fGUuc291cmNlPT09dW5kZWZpbmVkKXtuLmFkZCh0KX1lbHNle3ZhciBpPXU/ci5qb2luKHUsZS5zb3VyY2UpOmUuc291cmNlO24uYWRkKG5ldyBhKGUub3JpZ2luYWxMaW5lLGUub3JpZ2luYWxDb2x1bW4saSx0LGUubmFtZSkpfX19O2EucHJvdG90eXBlLmFkZD1mdW5jdGlvbiBmKGUpe2lmKEFycmF5LmlzQXJyYXkoZSkpe2UuZm9yRWFjaChmdW5jdGlvbihlKXt0aGlzLmFkZChlKX0sdGhpcyl9ZWxzZSBpZihlW3NdfHx0eXBlb2YgZT09PVwic3RyaW5nXCIpe2lmKGUpe3RoaXMuY2hpbGRyZW4ucHVzaChlKX19ZWxzZXt0aHJvdyBuZXcgVHlwZUVycm9yKFwiRXhwZWN0ZWQgYSBTb3VyY2VOb2RlLCBzdHJpbmcsIG9yIGFuIGFycmF5IG9mIFNvdXJjZU5vZGVzIGFuZCBzdHJpbmdzLiBHb3QgXCIrZSl9cmV0dXJuIHRoaXN9O2EucHJvdG90eXBlLnByZXBlbmQ9ZnVuY3Rpb24gYyhlKXtpZihBcnJheS5pc0FycmF5KGUpKXtmb3IodmFyIHQ9ZS5sZW5ndGgtMTt0Pj0wO3QtLSl7dGhpcy5wcmVwZW5kKGVbdF0pfX1lbHNlIGlmKGVbc118fHR5cGVvZiBlPT09XCJzdHJpbmdcIil7dGhpcy5jaGlsZHJlbi51bnNoaWZ0KGUpfWVsc2V7dGhyb3cgbmV3IFR5cGVFcnJvcihcIkV4cGVjdGVkIGEgU291cmNlTm9kZSwgc3RyaW5nLCBvciBhbiBhcnJheSBvZiBTb3VyY2VOb2RlcyBhbmQgc3RyaW5ncy4gR290IFwiK2UpfXJldHVybiB0aGlzfTthLnByb3RvdHlwZS53YWxrPWZ1bmN0aW9uIHAoZSl7dmFyIHQ7Zm9yKHZhciB1PTAsbj10aGlzLmNoaWxkcmVuLmxlbmd0aDt1PG47dSsrKXt0PXRoaXMuY2hpbGRyZW5bdV07aWYodFtzXSl7dC53YWxrKGUpfWVsc2V7aWYodCE9PVwiXCIpe2UodCx7c291cmNlOnRoaXMuc291cmNlLGxpbmU6dGhpcy5saW5lLGNvbHVtbjp0aGlzLmNvbHVtbixuYW1lOnRoaXMubmFtZX0pfX19fTthLnByb3RvdHlwZS5qb2luPWZ1bmN0aW9uIEQoZSl7dmFyIHQ7dmFyIHU7dmFyIG49dGhpcy5jaGlsZHJlbi5sZW5ndGg7aWYobj4wKXt0PVtdO2Zvcih1PTA7dTxuLTE7dSsrKXt0LnB1c2godGhpcy5jaGlsZHJlblt1XSk7dC5wdXNoKGUpfXQucHVzaCh0aGlzLmNoaWxkcmVuW3VdKTt0aGlzLmNoaWxkcmVuPXR9cmV0dXJuIHRoaXN9O2EucHJvdG90eXBlLnJlcGxhY2VSaWdodD1mdW5jdGlvbiBoKGUsdCl7dmFyIHU9dGhpcy5jaGlsZHJlblt0aGlzLmNoaWxkcmVuLmxlbmd0aC0xXTtpZih1W3NdKXt1LnJlcGxhY2VSaWdodChlLHQpfWVsc2UgaWYodHlwZW9mIHU9PT1cInN0cmluZ1wiKXt0aGlzLmNoaWxkcmVuW3RoaXMuY2hpbGRyZW4ubGVuZ3RoLTFdPXUucmVwbGFjZShlLHQpfWVsc2V7dGhpcy5jaGlsZHJlbi5wdXNoKFwiXCIucmVwbGFjZShlLHQpKX1yZXR1cm4gdGhpc307YS5wcm90b3R5cGUuc2V0U291cmNlQ29udGVudD1mdW5jdGlvbiBtKGUsdCl7dGhpcy5zb3VyY2VDb250ZW50c1tyLnRvU2V0U3RyaW5nKGUpXT10fTthLnByb3RvdHlwZS53YWxrU291cmNlQ29udGVudHM9ZnVuY3Rpb24gZChlKXtmb3IodmFyIHQ9MCx1PXRoaXMuY2hpbGRyZW4ubGVuZ3RoO3Q8dTt0Kyspe2lmKHRoaXMuY2hpbGRyZW5bdF1bc10pe3RoaXMuY2hpbGRyZW5bdF0ud2Fsa1NvdXJjZUNvbnRlbnRzKGUpfX12YXIgbj1PYmplY3Qua2V5cyh0aGlzLnNvdXJjZUNvbnRlbnRzKTtmb3IodmFyIHQ9MCx1PW4ubGVuZ3RoO3Q8dTt0Kyspe2Uoci5mcm9tU2V0U3RyaW5nKG5bdF0pLHRoaXMuc291cmNlQ29udGVudHNbblt0XV0pfX07YS5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24gQSgpe3ZhciBlPVwiXCI7dGhpcy53YWxrKGZ1bmN0aW9uKHQpe2UrPXR9KTtyZXR1cm4gZX07YS5wcm90b3R5cGUudG9TdHJpbmdXaXRoU291cmNlTWFwPWZ1bmN0aW9uIEMoZSl7dmFyIHQ9e2NvZGU6XCJcIixsaW5lOjEsY29sdW1uOjB9O3ZhciB1PW5ldyBuKGUpO3ZhciByPWZhbHNlO3ZhciBpPW51bGw7dmFyIHM9bnVsbDt2YXIgYT1udWxsO3ZhciBsPW51bGw7dGhpcy53YWxrKGZ1bmN0aW9uKGUsbil7dC5jb2RlKz1lO2lmKG4uc291cmNlIT09bnVsbCYmbi5saW5lIT09bnVsbCYmbi5jb2x1bW4hPT1udWxsKXtpZihpIT09bi5zb3VyY2V8fHMhPT1uLmxpbmV8fGEhPT1uLmNvbHVtbnx8bCE9PW4ubmFtZSl7dS5hZGRNYXBwaW5nKHtzb3VyY2U6bi5zb3VyY2Usb3JpZ2luYWw6e2xpbmU6bi5saW5lLGNvbHVtbjpuLmNvbHVtbn0sZ2VuZXJhdGVkOntsaW5lOnQubGluZSxjb2x1bW46dC5jb2x1bW59LG5hbWU6bi5uYW1lfSl9aT1uLnNvdXJjZTtzPW4ubGluZTthPW4uY29sdW1uO2w9bi5uYW1lO3I9dHJ1ZX1lbHNlIGlmKHIpe3UuYWRkTWFwcGluZyh7Z2VuZXJhdGVkOntsaW5lOnQubGluZSxjb2x1bW46dC5jb2x1bW59fSk7aT1udWxsO3I9ZmFsc2V9Zm9yKHZhciBmPTAsYz1lLmxlbmd0aDtmPGM7ZisrKXtpZihlLmNoYXJDb2RlQXQoZik9PT1vKXt0LmxpbmUrKzt0LmNvbHVtbj0wO2lmKGYrMT09PWMpe2k9bnVsbDtyPWZhbHNlfWVsc2UgaWYocil7dS5hZGRNYXBwaW5nKHtzb3VyY2U6bi5zb3VyY2Usb3JpZ2luYWw6e2xpbmU6bi5saW5lLGNvbHVtbjpuLmNvbHVtbn0sZ2VuZXJhdGVkOntsaW5lOnQubGluZSxjb2x1bW46dC5jb2x1bW59LG5hbWU6bi5uYW1lfSl9fWVsc2V7dC5jb2x1bW4rK319fSk7dGhpcy53YWxrU291cmNlQ29udGVudHMoZnVuY3Rpb24oZSx0KXt1LnNldFNvdXJjZUNvbnRlbnQoZSx0KX0pO3JldHVybntjb2RlOnQuY29kZSxtYXA6dX19O3QuU291cmNlTm9kZT1hfSl9LHtcIi4vc291cmNlLW1hcC1nZW5lcmF0b3JcIjo0MyxcIi4vdXRpbFwiOjQ1LGFtZGVmaW5lOjQ2fV0sNDU6W2Z1bmN0aW9uKGUsdCx1KXtpZih0eXBlb2YgbiE9PVwiZnVuY3Rpb25cIil7dmFyIG49ZShcImFtZGVmaW5lXCIpKHQsZSl9bihmdW5jdGlvbihlLHQsdSl7ZnVuY3Rpb24gbihlLHQsdSl7aWYodCBpbiBlKXtyZXR1cm4gZVt0XX1lbHNlIGlmKGFyZ3VtZW50cy5sZW5ndGg9PT0zKXtyZXR1cm4gdX1lbHNle3Rocm93IG5ldyBFcnJvcignXCInK3QrJ1wiIGlzIGEgcmVxdWlyZWQgYXJndW1lbnQuJyl9fXQuZ2V0QXJnPW47dmFyIHI9L14oPzooW1xcdytcXC0uXSspOik/XFwvXFwvKD86KFxcdys6XFx3KylAKT8oW1xcdy5dKikoPzo6KFxcZCspKT8oXFxTKikkLzt2YXIgaT0vXmRhdGE6LitcXCwuKyQvO2Z1bmN0aW9uIG8oZSl7dmFyIHQ9ZS5tYXRjaChyKTtpZighdCl7cmV0dXJuIG51bGx9cmV0dXJue3NjaGVtZTp0WzFdLGF1dGg6dFsyXSxob3N0OnRbM10scG9ydDp0WzRdLHBhdGg6dFs1XX19dC51cmxQYXJzZT1vO2Z1bmN0aW9uIHMoZSl7dmFyIHQ9XCJcIjtpZihlLnNjaGVtZSl7dCs9ZS5zY2hlbWUrXCI6XCJ9dCs9XCIvL1wiO2lmKGUuYXV0aCl7dCs9ZS5hdXRoK1wiQFwifWlmKGUuaG9zdCl7dCs9ZS5ob3N0fWlmKGUucG9ydCl7dCs9XCI6XCIrZS5wb3J0fWlmKGUucGF0aCl7dCs9ZS5wYXRofXJldHVybiB0fXQudXJsR2VuZXJhdGU9cztmdW5jdGlvbiBhKGUpe3ZhciB0PWU7dmFyIHU9byhlKTtpZih1KXtpZighdS5wYXRoKXtyZXR1cm4gZX10PXUucGF0aH12YXIgbj10LmNoYXJBdCgwKT09PVwiL1wiO3ZhciByPXQuc3BsaXQoL1xcLysvKTtmb3IodmFyIGksYT0wLGw9ci5sZW5ndGgtMTtsPj0wO2wtLSl7aT1yW2xdO2lmKGk9PT1cIi5cIil7ci5zcGxpY2UobCwxKX1lbHNlIGlmKGk9PT1cIi4uXCIpe2ErK31lbHNlIGlmKGE+MCl7aWYoaT09PVwiXCIpe3Iuc3BsaWNlKGwrMSxhKTthPTB9ZWxzZXtyLnNwbGljZShsLDIpO2EtLX19fXQ9ci5qb2luKFwiL1wiKTtpZih0PT09XCJcIil7dD1uP1wiL1wiOlwiLlwifWlmKHUpe3UucGF0aD10O3JldHVybiBzKHUpfXJldHVybiB0fXQubm9ybWFsaXplPWE7ZnVuY3Rpb24gbChlLHQpe2lmKGU9PT1cIlwiKXtlPVwiLlwifWlmKHQ9PT1cIlwiKXt0PVwiLlwifXZhciB1PW8odCk7dmFyIG49byhlKTtpZihuKXtlPW4ucGF0aHx8XCIvXCJ9aWYodSYmIXUuc2NoZW1lKXtpZihuKXt1LnNjaGVtZT1uLnNjaGVtZX1yZXR1cm4gcyh1KX1pZih1fHx0Lm1hdGNoKGkpKXtyZXR1cm4gdH1pZihuJiYhbi5ob3N0JiYhbi5wYXRoKXtuLmhvc3Q9dDtyZXR1cm4gcyhuKX12YXIgcj10LmNoYXJBdCgwKT09PVwiL1wiP3Q6YShlLnJlcGxhY2UoL1xcLyskLyxcIlwiKStcIi9cIit0KTtpZihuKXtuLnBhdGg9cjtyZXR1cm4gcyhuKX1yZXR1cm4gcn10LmpvaW49bDtmdW5jdGlvbiBmKGUsdCl7aWYoZT09PVwiXCIpe2U9XCIuXCJ9ZT1lLnJlcGxhY2UoL1xcLyQvLFwiXCIpO3ZhciB1PW8oZSk7aWYodC5jaGFyQXQoMCk9PVwiL1wiJiZ1JiZ1LnBhdGg9PVwiL1wiKXtyZXR1cm4gdC5zbGljZSgxKX1yZXR1cm4gdC5pbmRleE9mKGUrXCIvXCIpPT09MD90LnN1YnN0cihlLmxlbmd0aCsxKTp0fXQucmVsYXRpdmU9ZjtmdW5jdGlvbiBjKGUpe3JldHVyblwiJFwiK2V9dC50b1NldFN0cmluZz1jO2Z1bmN0aW9uIHAoZSl7cmV0dXJuIGUuc3Vic3RyKDEpfXQuZnJvbVNldFN0cmluZz1wO2Z1bmN0aW9uIEQoZSx0KXt2YXIgdT1lfHxcIlwiO3ZhciBuPXR8fFwiXCI7cmV0dXJuKHU+biktKHU8bil9ZnVuY3Rpb24gaChlLHQsdSl7dmFyIG47bj1EKGUuc291cmNlLHQuc291cmNlKTtpZihuKXtyZXR1cm4gbn1uPWUub3JpZ2luYWxMaW5lLXQub3JpZ2luYWxMaW5lO2lmKG4pe3JldHVybiBufW49ZS5vcmlnaW5hbENvbHVtbi10Lm9yaWdpbmFsQ29sdW1uO2lmKG58fHUpe3JldHVybiBufW49RChlLm5hbWUsdC5uYW1lKTtpZihuKXtyZXR1cm4gbn1uPWUuZ2VuZXJhdGVkTGluZS10LmdlbmVyYXRlZExpbmU7aWYobil7cmV0dXJuIG59cmV0dXJuIGUuZ2VuZXJhdGVkQ29sdW1uLXQuZ2VuZXJhdGVkQ29sdW1ufXQuY29tcGFyZUJ5T3JpZ2luYWxQb3NpdGlvbnM9aDtmdW5jdGlvbiBtKGUsdCx1KXt2YXIgbjtuPWUuZ2VuZXJhdGVkTGluZS10LmdlbmVyYXRlZExpbmU7aWYobil7cmV0dXJuIG59bj1lLmdlbmVyYXRlZENvbHVtbi10LmdlbmVyYXRlZENvbHVtbjtpZihufHx1KXtyZXR1cm4gbn1uPUQoZS5zb3VyY2UsdC5zb3VyY2UpO2lmKG4pe3JldHVybiBufW49ZS5vcmlnaW5hbExpbmUtdC5vcmlnaW5hbExpbmU7aWYobil7cmV0dXJuIG59bj1lLm9yaWdpbmFsQ29sdW1uLXQub3JpZ2luYWxDb2x1bW47aWYobil7cmV0dXJuIG59cmV0dXJuIEQoZS5uYW1lLHQubmFtZSl9dC5jb21wYXJlQnlHZW5lcmF0ZWRQb3NpdGlvbnM9bX0pfSx7YW1kZWZpbmU6NDZ9XSw0NjpbZnVuY3Rpb24oZSx0LHUpeyhmdW5jdGlvbih1LG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHIodCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgaT17fSxvPXt9LHM9ZmFsc2UsYT1lKFwicGF0aFwiKSxsLGY7ZnVuY3Rpb24gYyhlKXt2YXIgdCx1O2Zvcih0PTA7ZVt0XTt0Kz0xKXt1PWVbdF07aWYodT09PVwiLlwiKXtlLnNwbGljZSh0LDEpO3QtPTF9ZWxzZSBpZih1PT09XCIuLlwiKXtpZih0PT09MSYmKGVbMl09PT1cIi4uXCJ8fGVbMF09PT1cIi4uXCIpKXticmVha31lbHNlIGlmKHQ+MCl7ZS5zcGxpY2UodC0xLDIpO3QtPTJ9fX19ZnVuY3Rpb24gcChlLHQpe3ZhciB1O2lmKGUmJmUuY2hhckF0KDApPT09XCIuXCIpe2lmKHQpe3U9dC5zcGxpdChcIi9cIik7dT11LnNsaWNlKDAsdS5sZW5ndGgtMSk7dT11LmNvbmNhdChlLnNwbGl0KFwiL1wiKSk7Yyh1KTtlPXUuam9pbihcIi9cIil9fXJldHVybiBlfWZ1bmN0aW9uIEQoZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiBwKHQsZSl9fWZ1bmN0aW9uIGgoZSl7ZnVuY3Rpb24gdCh0KXtvW2VdPXR9dC5mcm9tVGV4dD1mdW5jdGlvbihlLHQpe3Rocm93IG5ldyBFcnJvcihcImFtZGVmaW5lIGRvZXMgbm90IGltcGxlbWVudCBsb2FkLmZyb21UZXh0XCIpfTtyZXR1cm4gdH1sPWZ1bmN0aW9uKGUsdCxuLHIpe2Z1bmN0aW9uIGkoaSxvKXtpZih0eXBlb2YgaT09PVwic3RyaW5nXCIpe3JldHVybiBmKGUsdCxuLGkscil9ZWxzZXtpPWkubWFwKGZ1bmN0aW9uKHUpe3JldHVybiBmKGUsdCxuLHUscil9KTtpZihvKXt1Lm5leHRUaWNrKGZ1bmN0aW9uKCl7by5hcHBseShudWxsLGkpfSl9fX1pLnRvVXJsPWZ1bmN0aW9uKGUpe2lmKGUuaW5kZXhPZihcIi5cIik9PT0wKXtyZXR1cm4gcChlLGEuZGlybmFtZShuLmZpbGVuYW1lKSl9ZWxzZXtyZXR1cm4gZX19O3JldHVybiBpfTtyPXJ8fGZ1bmN0aW9uIEEoKXtyZXR1cm4gdC5yZXF1aXJlLmFwcGx5KHQsYXJndW1lbnRzKX07ZnVuY3Rpb24gbShlLHUsaSl7dmFyIGEsZixjLHA7aWYoZSl7Zj1vW2VdPXt9O2M9e2lkOmUsdXJpOm4sZXhwb3J0czpmfTthPWwocixmLGMsZSl9ZWxzZXtpZihzKXt0aHJvdyBuZXcgRXJyb3IoXCJhbWRlZmluZSB3aXRoIG5vIG1vZHVsZSBJRCBjYW5ub3QgYmUgY2FsbGVkIG1vcmUgdGhhbiBvbmNlIHBlciBmaWxlLlwiKX1zPXRydWU7Zj10LmV4cG9ydHM7Yz10O2E9bChyLGYsYyx0LmlkKX1pZih1KXt1PXUubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBhKGUpfSl9aWYodHlwZW9mIGk9PT1cImZ1bmN0aW9uXCIpe3A9aS5hcHBseShjLmV4cG9ydHMsdSl9ZWxzZXtwPWl9aWYocCE9PXVuZGVmaW5lZCl7Yy5leHBvcnRzPXA7aWYoZSl7b1tlXT1jLmV4cG9ydHN9fX1mPWZ1bmN0aW9uKGUsdCx1LG4scil7dmFyIHM9bi5pbmRleE9mKFwiIVwiKSxhPW4sYyxkO2lmKHM9PT0tMSl7bj1wKG4scik7aWYobj09PVwicmVxdWlyZVwiKXtyZXR1cm4gbChlLHQsdSxyKX1lbHNlIGlmKG49PT1cImV4cG9ydHNcIil7cmV0dXJuIHR9ZWxzZSBpZihuPT09XCJtb2R1bGVcIil7cmV0dXJuIHV9ZWxzZSBpZihvLmhhc093blByb3BlcnR5KG4pKXtyZXR1cm4gb1tuXX1lbHNlIGlmKGlbbl0pe20uYXBwbHkobnVsbCxpW25dKTtyZXR1cm4gb1tuXX1lbHNle2lmKGUpe3JldHVybiBlKGEpfWVsc2V7dGhyb3cgbmV3IEVycm9yKFwiTm8gbW9kdWxlIHdpdGggSUQ6IFwiK24pfX19ZWxzZXtjPW4uc3Vic3RyaW5nKDAscyk7bj1uLnN1YnN0cmluZyhzKzEsbi5sZW5ndGgpO2Q9ZihlLHQsdSxjLHIpO2lmKGQubm9ybWFsaXplKXtuPWQubm9ybWFsaXplKG4sRChyKSl9ZWxzZXtuPXAobixyKX1pZihvW25dKXtyZXR1cm4gb1tuXX1lbHNle2QubG9hZChuLGwoZSx0LHUsciksaChuKSx7fSk7cmV0dXJuIG9bbl19fX07ZnVuY3Rpb24gZChlLHQsdSl7aWYoQXJyYXkuaXNBcnJheShlKSl7dT10O3Q9ZTtlPXVuZGVmaW5lZH1lbHNlIGlmKHR5cGVvZiBlIT09XCJzdHJpbmdcIil7dT1lO2U9dD11bmRlZmluZWR9aWYodCYmIUFycmF5LmlzQXJyYXkodCkpe3U9dDt0PXVuZGVmaW5lZH1pZighdCl7dD1bXCJyZXF1aXJlXCIsXCJleHBvcnRzXCIsXCJtb2R1bGVcIl19aWYoZSl7aVtlXT1bZSx0LHVdfWVsc2V7bShlLHQsdSl9fWQucmVxdWlyZT1mdW5jdGlvbihlKXtpZihvW2VdKXtyZXR1cm4gb1tlXX1pZihpW2VdKXttLmFwcGx5KG51bGwsaVtlXSk7cmV0dXJuIG9bZV19fTtkLmFtZD17fTtyZXR1cm4gZH10LmV4cG9ydHM9cn0pLmNhbGwodGhpcyxlKFwiX3Byb2Nlc3NcIiksXCIvbm9kZV9tb2R1bGVzL2VzY29kZWdlbi9ub2RlX21vZHVsZXMvc291cmNlLW1hcC9ub2RlX21vZHVsZXMvYW1kZWZpbmUvYW1kZWZpbmUuanNcIil9LHtfcHJvY2VzczoyNixwYXRoOjI1fV0sNDc6W2Z1bmN0aW9uKGUsdCx1KXt0LmV4cG9ydHM9e25hbWU6XCJlc2NvZGVnZW5cIixkZXNjcmlwdGlvbjpcIkVDTUFTY3JpcHQgY29kZSBnZW5lcmF0b3JcIixob21lcGFnZTpcImh0dHA6Ly9naXRodWIuY29tL2VzdG9vbHMvZXNjb2RlZ2VuXCIsbWFpbjpcImVzY29kZWdlbi5qc1wiLGJpbjp7ZXNnZW5lcmF0ZTpcIi4vYmluL2VzZ2VuZXJhdGUuanNcIixlc2NvZGVnZW46XCIuL2Jpbi9lc2NvZGVnZW4uanNcIn0sZmlsZXM6W1wiTElDRU5TRS5CU0RcIixcIkxJQ0VOU0Uuc291cmNlLW1hcFwiLFwiUkVBRE1FLm1kXCIsXCJiaW5cIixcImVzY29kZWdlbi5qc1wiLFwicGFja2FnZS5qc29uXCJdLHZlcnNpb246XCIxLjcuMFwiLGVuZ2luZXM6e25vZGU6XCI+PTAuMTAuMFwifSxtYWludGFpbmVyczpbe25hbWU6XCJjb25zdGVsbGF0aW9uXCIsZW1haWw6XCJ1dGF0YW5lLnRlYUBnbWFpbC5jb21cIn0se25hbWU6XCJtaWNoYWVsZmljYXJyYVwiLGVtYWlsOlwibnBtQG1pY2hhZWwuZmljYXJyYS5tZVwifV0scmVwb3NpdG9yeTp7dHlwZTpcImdpdFwiLHVybDpcImdpdCtzc2g6Ly9naXRAZ2l0aHViLmNvbS9lc3Rvb2xzL2VzY29kZWdlbi5naXRcIn0sZGVwZW5kZW5jaWVzOntlc3RyYXZlcnNlOlwiXjEuOS4xXCIsZXN1dGlsczpcIl4yLjAuMlwiLGVzcHJpbWE6XCJeMS4yLjJcIixvcHRpb25hdG9yOlwiXjAuNS4wXCIsXCJzb3VyY2UtbWFwXCI6XCJ+MC4yLjBcIn0sb3B0aW9uYWxEZXBlbmRlbmNpZXM6e1wic291cmNlLW1hcFwiOlwifjAuMi4wXCJ9LGRldkRlcGVuZGVuY2llczp7XCJhY29ybi02dG81XCI6XCJeMC4xMS4xLTI1XCIsYmx1ZWJpcmQ6XCJeMi4zLjExXCIsXCJib3dlci1yZWdpc3RyeS1jbGllbnRcIjpcIl4wLjIuMVwiLGNoYWk6XCJeMS4xMC4wXCIsXCJjb21tb25qcy1ldmVyeXdoZXJlXCI6XCJeMC45LjdcIixcImVzcHJpbWEtbW96XCI6XCIxLjAuMC1kZXYtaGFybW9ueS1tb3pcIixndWxwOlwiXjMuOC4xMFwiLFwiZ3VscC1lc2xpbnRcIjpcIl4wLjIuMFwiLFwiZ3VscC1tb2NoYVwiOlwiXjIuMC4wXCIsc2VtdmVyOlwiXjQuMS4wXCJ9LGxpY2Vuc2U6XCJCU0QtMi1DbGF1c2VcIixzY3JpcHRzOnt0ZXN0OlwiZ3VscCB0cmF2aXNcIixcInVuaXQtdGVzdFwiOlwiZ3VscCB0ZXN0XCIsbGludDpcImd1bHAgbGludFwiLHJlbGVhc2U6XCJub2RlIHRvb2xzL3JlbGVhc2UuanNcIixcImJ1aWxkLW1pblwiOlwiY2pzaWZ5IC1tYSBwYXRoOiB0b29scy9lbnRyeS1wb2ludC5qcyA+IGVzY29kZWdlbi5icm93c2VyLm1pbi5qc1wiLGJ1aWxkOlwiY2pzaWZ5IC1hIHBhdGg6IHRvb2xzL2VudHJ5LXBvaW50LmpzID4gZXNjb2RlZ2VuLmJyb3dzZXIuanNcIn0sZ2l0SGVhZDpcIjVkYWJiYzU0NDFiMzk2ZmViZDBhZmI5MjUyYTlhZmRmYTcwNTE2NTdcIixidWdzOnt1cmw6XCJodHRwczovL2dpdGh1Yi5jb20vZXN0b29scy9lc2NvZGVnZW4vaXNzdWVzXCJ9LF9pZDpcImVzY29kZWdlbkAxLjcuMFwiLF9zaGFzdW06XCI0ZTI5OWQ4Y2MzMzA4N2I3ZjI5YzE5ZTJiOWU4NDM2MmFiZTM1NDUzXCIsX2Zyb206XCJlc2NvZGVnZW5APj0xLjYuMCA8Mi4wLjBcIixfbnBtVmVyc2lvbjpcIjIuMTEuM1wiLF9ub2RlVmVyc2lvbjpcIjAuMTIuN1wiLF9ucG1Vc2VyOntuYW1lOlwibWljaGFlbGZpY2FycmFcIixlbWFpbDpcIm5wbUBtaWNoYWVsLmZpY2FycmEubWVcIn0sZGlzdDp7c2hhc3VtOlwiNGUyOTlkOGNjMzMwODdiN2YyOWMxOWUyYjllODQzNjJhYmUzNTQ1M1wiLHRhcmJhbGw6XCJodHRwOi8vcmVnaXN0cnkubnBtanMub3JnL2VzY29kZWdlbi8tL2VzY29kZWdlbi0xLjcuMC50Z3pcIn0sZGlyZWN0b3JpZXM6e30sX3Jlc29sdmVkOlwiaHR0cHM6Ly9yZWdpc3RyeS5ucG1qcy5vcmcvZXNjb2RlZ2VuLy0vZXNjb2RlZ2VuLTEuNy4wLnRnelwiLHJlYWRtZTpcIkVSUk9SOiBObyBSRUFETUUgZGF0YSBmb3VuZCFcIn19LHt9XSw0ODpbZnVuY3Rpb24odCx1LG4peyhmdW5jdGlvbih0LHUpe1widXNlIHN0cmljdFwiO2lmKHR5cGVvZiBlPT09XCJmdW5jdGlvblwiJiZlLmFtZCl7ZShbXCJleHBvcnRzXCJdLHUpfWVsc2UgaWYodHlwZW9mIG4hPT1cInVuZGVmaW5lZFwiKXt1KG4pfWVsc2V7dSh0LmVzcHJpbWE9e30pfX0pKHRoaXMsZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIHQsdSxuLHIsaSxvLHMsYSxsLGYsYyxwLEQsaCxtLGQsQSxDLEUsRixnLHksQix2LGIsUyx4O3Q9e0Jvb2xlYW5MaXRlcmFsOjEsRU9GOjIsSWRlbnRpZmllcjozLEtleXdvcmQ6NCxOdWxsTGl0ZXJhbDo1LE51bWVyaWNMaXRlcmFsOjYsUHVuY3R1YXRvcjo3LFN0cmluZ0xpdGVyYWw6OCxSZWd1bGFyRXhwcmVzc2lvbjo5LFRlbXBsYXRlOjEwfTt1PXt9O3VbdC5Cb29sZWFuTGl0ZXJhbF09XCJCb29sZWFuXCI7dVt0LkVPRl09XCI8ZW5kPlwiO3VbdC5JZGVudGlmaWVyXT1cIklkZW50aWZpZXJcIjt1W3QuS2V5d29yZF09XCJLZXl3b3JkXCI7dVt0Lk51bGxMaXRlcmFsXT1cIk51bGxcIjt1W3QuTnVtZXJpY0xpdGVyYWxdPVwiTnVtZXJpY1wiO3VbdC5QdW5jdHVhdG9yXT1cIlB1bmN0dWF0b3JcIjt1W3QuU3RyaW5nTGl0ZXJhbF09XCJTdHJpbmdcIjt1W3QuUmVndWxhckV4cHJlc3Npb25dPVwiUmVndWxhckV4cHJlc3Npb25cIjt1W3QuVGVtcGxhdGVdPVwiVGVtcGxhdGVcIjtuPVtcIihcIixcIntcIixcIltcIixcImluXCIsXCJ0eXBlb2ZcIixcImluc3RhbmNlb2ZcIixcIm5ld1wiLFwicmV0dXJuXCIsXCJjYXNlXCIsXCJkZWxldGVcIixcInRocm93XCIsXCJ2b2lkXCIsXCI9XCIsXCIrPVwiLFwiLT1cIixcIio9XCIsXCIvPVwiLFwiJT1cIixcIjw8PVwiLFwiPj49XCIsXCI+Pj49XCIsXCImPVwiLFwifD1cIixcIl49XCIsXCIsXCIsXCIrXCIsXCItXCIsXCIqXCIsXCIvXCIsXCIlXCIsXCIrK1wiLFwiLS1cIixcIjw8XCIsXCI+PlwiLFwiPj4+XCIsXCImXCIsXCJ8XCIsXCJeXCIsXCIhXCIsXCJ+XCIsXCImJlwiLFwifHxcIixcIj9cIixcIjpcIixcIj09PVwiLFwiPT1cIixcIj49XCIsXCI8PVwiLFwiPFwiLFwiPlwiLFwiIT1cIixcIiE9PVwiXTtyPXtBc3NpZ25tZW50RXhwcmVzc2lvbjpcIkFzc2lnbm1lbnRFeHByZXNzaW9uXCIsQXNzaWdubWVudFBhdHRlcm46XCJBc3NpZ25tZW50UGF0dGVyblwiLEFycmF5RXhwcmVzc2lvbjpcIkFycmF5RXhwcmVzc2lvblwiLEFycmF5UGF0dGVybjpcIkFycmF5UGF0dGVyblwiLEFycm93RnVuY3Rpb25FeHByZXNzaW9uOlwiQXJyb3dGdW5jdGlvbkV4cHJlc3Npb25cIixCbG9ja1N0YXRlbWVudDpcIkJsb2NrU3RhdGVtZW50XCIsQmluYXJ5RXhwcmVzc2lvbjpcIkJpbmFyeUV4cHJlc3Npb25cIixCcmVha1N0YXRlbWVudDpcIkJyZWFrU3RhdGVtZW50XCIsQ2FsbEV4cHJlc3Npb246XCJDYWxsRXhwcmVzc2lvblwiLENhdGNoQ2xhdXNlOlwiQ2F0Y2hDbGF1c2VcIixDbGFzc0JvZHk6XCJDbGFzc0JvZHlcIixDbGFzc0RlY2xhcmF0aW9uOlwiQ2xhc3NEZWNsYXJhdGlvblwiLENsYXNzRXhwcmVzc2lvbjpcIkNsYXNzRXhwcmVzc2lvblwiLENvbmRpdGlvbmFsRXhwcmVzc2lvbjpcIkNvbmRpdGlvbmFsRXhwcmVzc2lvblwiLENvbnRpbnVlU3RhdGVtZW50OlwiQ29udGludWVTdGF0ZW1lbnRcIixEb1doaWxlU3RhdGVtZW50OlwiRG9XaGlsZVN0YXRlbWVudFwiLERlYnVnZ2VyU3RhdGVtZW50OlwiRGVidWdnZXJTdGF0ZW1lbnRcIixFbXB0eVN0YXRlbWVudDpcIkVtcHR5U3RhdGVtZW50XCIsRXhwb3J0QWxsRGVjbGFyYXRpb246XCJFeHBvcnRBbGxEZWNsYXJhdGlvblwiLEV4cG9ydERlZmF1bHREZWNsYXJhdGlvbjpcIkV4cG9ydERlZmF1bHREZWNsYXJhdGlvblwiLEV4cG9ydE5hbWVkRGVjbGFyYXRpb246XCJFeHBvcnROYW1lZERlY2xhcmF0aW9uXCIsRXhwb3J0U3BlY2lmaWVyOlwiRXhwb3J0U3BlY2lmaWVyXCIsRXhwcmVzc2lvblN0YXRlbWVudDpcIkV4cHJlc3Npb25TdGF0ZW1lbnRcIixGb3JTdGF0ZW1lbnQ6XCJGb3JTdGF0ZW1lbnRcIixGb3JPZlN0YXRlbWVudDpcIkZvck9mU3RhdGVtZW50XCIsRm9ySW5TdGF0ZW1lbnQ6XCJGb3JJblN0YXRlbWVudFwiLEZ1bmN0aW9uRGVjbGFyYXRpb246XCJGdW5jdGlvbkRlY2xhcmF0aW9uXCIsRnVuY3Rpb25FeHByZXNzaW9uOlwiRnVuY3Rpb25FeHByZXNzaW9uXCIsSWRlbnRpZmllcjpcIklkZW50aWZpZXJcIixJZlN0YXRlbWVudDpcIklmU3RhdGVtZW50XCIsSW1wb3J0RGVjbGFyYXRpb246XCJJbXBvcnREZWNsYXJhdGlvblwiLEltcG9ydERlZmF1bHRTcGVjaWZpZXI6XCJJbXBvcnREZWZhdWx0U3BlY2lmaWVyXCIsSW1wb3J0TmFtZXNwYWNlU3BlY2lmaWVyOlwiSW1wb3J0TmFtZXNwYWNlU3BlY2lmaWVyXCIsSW1wb3J0U3BlY2lmaWVyOlwiSW1wb3J0U3BlY2lmaWVyXCIsTGl0ZXJhbDpcIkxpdGVyYWxcIixMYWJlbGVkU3RhdGVtZW50OlwiTGFiZWxlZFN0YXRlbWVudFwiLExvZ2ljYWxFeHByZXNzaW9uOlwiTG9naWNhbEV4cHJlc3Npb25cIixNZW1iZXJFeHByZXNzaW9uOlwiTWVtYmVyRXhwcmVzc2lvblwiLE1ldGFQcm9wZXJ0eTpcIk1ldGFQcm9wZXJ0eVwiLE1ldGhvZERlZmluaXRpb246XCJNZXRob2REZWZpbml0aW9uXCIsTmV3RXhwcmVzc2lvbjpcIk5ld0V4cHJlc3Npb25cIixPYmplY3RFeHByZXNzaW9uOlwiT2JqZWN0RXhwcmVzc2lvblwiLE9iamVjdFBhdHRlcm46XCJPYmplY3RQYXR0ZXJuXCIsUHJvZ3JhbTpcIlByb2dyYW1cIixQcm9wZXJ0eTpcIlByb3BlcnR5XCIsUmVzdEVsZW1lbnQ6XCJSZXN0RWxlbWVudFwiLFJldHVyblN0YXRlbWVudDpcIlJldHVyblN0YXRlbWVudFwiLFNlcXVlbmNlRXhwcmVzc2lvbjpcIlNlcXVlbmNlRXhwcmVzc2lvblwiLFNwcmVhZEVsZW1lbnQ6XCJTcHJlYWRFbGVtZW50XCIsU3VwZXI6XCJTdXBlclwiLFN3aXRjaENhc2U6XCJTd2l0Y2hDYXNlXCIsU3dpdGNoU3RhdGVtZW50OlwiU3dpdGNoU3RhdGVtZW50XCIsVGFnZ2VkVGVtcGxhdGVFeHByZXNzaW9uOlwiVGFnZ2VkVGVtcGxhdGVFeHByZXNzaW9uXCIsVGVtcGxhdGVFbGVtZW50OlwiVGVtcGxhdGVFbGVtZW50XCIsVGVtcGxhdGVMaXRlcmFsOlwiVGVtcGxhdGVMaXRlcmFsXCIsVGhpc0V4cHJlc3Npb246XCJUaGlzRXhwcmVzc2lvblwiLFRocm93U3RhdGVtZW50OlwiVGhyb3dTdGF0ZW1lbnRcIixUcnlTdGF0ZW1lbnQ6XCJUcnlTdGF0ZW1lbnRcIixVbmFyeUV4cHJlc3Npb246XCJVbmFyeUV4cHJlc3Npb25cIixVcGRhdGVFeHByZXNzaW9uOlwiVXBkYXRlRXhwcmVzc2lvblwiLFZhcmlhYmxlRGVjbGFyYXRpb246XCJWYXJpYWJsZURlY2xhcmF0aW9uXCIsVmFyaWFibGVEZWNsYXJhdG9yOlwiVmFyaWFibGVEZWNsYXJhdG9yXCIsV2hpbGVTdGF0ZW1lbnQ6XCJXaGlsZVN0YXRlbWVudFwiLFdpdGhTdGF0ZW1lbnQ6XCJXaXRoU3RhdGVtZW50XCIsWWllbGRFeHByZXNzaW9uOlwiWWllbGRFeHByZXNzaW9uXCJ9O2k9e0Fycm93UGFyYW1ldGVyUGxhY2VIb2xkZXI6XCJBcnJvd1BhcmFtZXRlclBsYWNlSG9sZGVyXCJ9O289e1VuZXhwZWN0ZWRUb2tlbjpcIlVuZXhwZWN0ZWQgdG9rZW4gJTBcIixVbmV4cGVjdGVkTnVtYmVyOlwiVW5leHBlY3RlZCBudW1iZXJcIixVbmV4cGVjdGVkU3RyaW5nOlwiVW5leHBlY3RlZCBzdHJpbmdcIixVbmV4cGVjdGVkSWRlbnRpZmllcjpcIlVuZXhwZWN0ZWQgaWRlbnRpZmllclwiLFVuZXhwZWN0ZWRSZXNlcnZlZDpcIlVuZXhwZWN0ZWQgcmVzZXJ2ZWQgd29yZFwiLFVuZXhwZWN0ZWRUZW1wbGF0ZTpcIlVuZXhwZWN0ZWQgcXVhc2kgJTBcIixVbmV4cGVjdGVkRU9TOlwiVW5leHBlY3RlZCBlbmQgb2YgaW5wdXRcIixOZXdsaW5lQWZ0ZXJUaHJvdzpcIklsbGVnYWwgbmV3bGluZSBhZnRlciB0aHJvd1wiLEludmFsaWRSZWdFeHA6XCJJbnZhbGlkIHJlZ3VsYXIgZXhwcmVzc2lvblwiLFVudGVybWluYXRlZFJlZ0V4cDpcIkludmFsaWQgcmVndWxhciBleHByZXNzaW9uOiBtaXNzaW5nIC9cIixJbnZhbGlkTEhTSW5Bc3NpZ25tZW50OlwiSW52YWxpZCBsZWZ0LWhhbmQgc2lkZSBpbiBhc3NpZ25tZW50XCIsSW52YWxpZExIU0luRm9ySW46XCJJbnZhbGlkIGxlZnQtaGFuZCBzaWRlIGluIGZvci1pblwiLEludmFsaWRMSFNJbkZvckxvb3A6XCJJbnZhbGlkIGxlZnQtaGFuZCBzaWRlIGluIGZvci1sb29wXCIsTXVsdGlwbGVEZWZhdWx0c0luU3dpdGNoOlwiTW9yZSB0aGFuIG9uZSBkZWZhdWx0IGNsYXVzZSBpbiBzd2l0Y2ggc3RhdGVtZW50XCIsTm9DYXRjaE9yRmluYWxseTpcIk1pc3NpbmcgY2F0Y2ggb3IgZmluYWxseSBhZnRlciB0cnlcIixVbmtub3duTGFiZWw6XCJVbmRlZmluZWQgbGFiZWwgJyUwJ1wiLFJlZGVjbGFyYXRpb246XCIlMCAnJTEnIGhhcyBhbHJlYWR5IGJlZW4gZGVjbGFyZWRcIixJbGxlZ2FsQ29udGludWU6XCJJbGxlZ2FsIGNvbnRpbnVlIHN0YXRlbWVudFwiLElsbGVnYWxCcmVhazpcIklsbGVnYWwgYnJlYWsgc3RhdGVtZW50XCIsSWxsZWdhbFJldHVybjpcIklsbGVnYWwgcmV0dXJuIHN0YXRlbWVudFwiLFN0cmljdE1vZGVXaXRoOlwiU3RyaWN0IG1vZGUgY29kZSBtYXkgbm90IGluY2x1ZGUgYSB3aXRoIHN0YXRlbWVudFwiLFN0cmljdENhdGNoVmFyaWFibGU6XCJDYXRjaCB2YXJpYWJsZSBtYXkgbm90IGJlIGV2YWwgb3IgYXJndW1lbnRzIGluIHN0cmljdCBtb2RlXCIsU3RyaWN0VmFyTmFtZTpcIlZhcmlhYmxlIG5hbWUgbWF5IG5vdCBiZSBldmFsIG9yIGFyZ3VtZW50cyBpbiBzdHJpY3QgbW9kZVwiLFN0cmljdFBhcmFtTmFtZTpcIlBhcmFtZXRlciBuYW1lIGV2YWwgb3IgYXJndW1lbnRzIGlzIG5vdCBhbGxvd2VkIGluIHN0cmljdCBtb2RlXCIsU3RyaWN0UGFyYW1EdXBlOlwiU3RyaWN0IG1vZGUgZnVuY3Rpb24gbWF5IG5vdCBoYXZlIGR1cGxpY2F0ZSBwYXJhbWV0ZXIgbmFtZXNcIixTdHJpY3RGdW5jdGlvbk5hbWU6XCJGdW5jdGlvbiBuYW1lIG1heSBub3QgYmUgZXZhbCBvciBhcmd1bWVudHMgaW4gc3RyaWN0IG1vZGVcIixTdHJpY3RPY3RhbExpdGVyYWw6XCJPY3RhbCBsaXRlcmFscyBhcmUgbm90IGFsbG93ZWQgaW4gc3RyaWN0IG1vZGUuXCIsU3RyaWN0RGVsZXRlOlwiRGVsZXRlIG9mIGFuIHVucXVhbGlmaWVkIGlkZW50aWZpZXIgaW4gc3RyaWN0IG1vZGUuXCIsU3RyaWN0TEhTQXNzaWdubWVudDpcIkFzc2lnbm1lbnQgdG8gZXZhbCBvciBhcmd1bWVudHMgaXMgbm90IGFsbG93ZWQgaW4gc3RyaWN0IG1vZGVcIixTdHJpY3RMSFNQb3N0Zml4OlwiUG9zdGZpeCBpbmNyZW1lbnQvZGVjcmVtZW50IG1heSBub3QgaGF2ZSBldmFsIG9yIGFyZ3VtZW50cyBvcGVyYW5kIGluIHN0cmljdCBtb2RlXCIsU3RyaWN0TEhTUHJlZml4OlwiUHJlZml4IGluY3JlbWVudC9kZWNyZW1lbnQgbWF5IG5vdCBoYXZlIGV2YWwgb3IgYXJndW1lbnRzIG9wZXJhbmQgaW4gc3RyaWN0IG1vZGVcIixTdHJpY3RSZXNlcnZlZFdvcmQ6XCJVc2Ugb2YgZnV0dXJlIHJlc2VydmVkIHdvcmQgaW4gc3RyaWN0IG1vZGVcIixUZW1wbGF0ZU9jdGFsTGl0ZXJhbDpcIk9jdGFsIGxpdGVyYWxzIGFyZSBub3QgYWxsb3dlZCBpbiB0ZW1wbGF0ZSBzdHJpbmdzLlwiLFBhcmFtZXRlckFmdGVyUmVzdFBhcmFtZXRlcjpcIlJlc3QgcGFyYW1ldGVyIG11c3QgYmUgbGFzdCBmb3JtYWwgcGFyYW1ldGVyXCIsRGVmYXVsdFJlc3RQYXJhbWV0ZXI6XCJVbmV4cGVjdGVkIHRva2VuID1cIixPYmplY3RQYXR0ZXJuQXNSZXN0UGFyYW1ldGVyOlwiVW5leHBlY3RlZCB0b2tlbiB7XCIsRHVwbGljYXRlUHJvdG9Qcm9wZXJ0eTpcIkR1cGxpY2F0ZSBfX3Byb3RvX18gZmllbGRzIGFyZSBub3QgYWxsb3dlZCBpbiBvYmplY3QgbGl0ZXJhbHNcIixDb25zdHJ1Y3RvclNwZWNpYWxNZXRob2Q6XCJDbGFzcyBjb25zdHJ1Y3RvciBtYXkgbm90IGJlIGFuIGFjY2Vzc29yXCIsRHVwbGljYXRlQ29uc3RydWN0b3I6XCJBIGNsYXNzIG1heSBvbmx5IGhhdmUgb25lIGNvbnN0cnVjdG9yXCIsU3RhdGljUHJvdG90eXBlOlwiQ2xhc3NlcyBtYXkgbm90IGhhdmUgc3RhdGljIHByb3BlcnR5IG5hbWVkIHByb3RvdHlwZVwiLE1pc3NpbmdGcm9tQ2xhdXNlOlwiVW5leHBlY3RlZCB0b2tlblwiLE5vQXNBZnRlckltcG9ydE5hbWVzcGFjZTpcIlVuZXhwZWN0ZWQgdG9rZW5cIixJbnZhbGlkTW9kdWxlU3BlY2lmaWVyOlwiVW5leHBlY3RlZCB0b2tlblwiLElsbGVnYWxJbXBvcnREZWNsYXJhdGlvbjpcIlVuZXhwZWN0ZWQgdG9rZW5cIixJbGxlZ2FsRXhwb3J0RGVjbGFyYXRpb246XCJVbmV4cGVjdGVkIHRva2VuXCIsRHVwbGljYXRlQmluZGluZzpcIkR1cGxpY2F0ZSBiaW5kaW5nICUwXCJ9O3M9e05vbkFzY2lpSWRlbnRpZmllclN0YXJ0Oi9bXFx4QUFcXHhCNVxceEJBXFx4QzAtXFx4RDZcXHhEOC1cXHhGNlxceEY4LVxcdTAyQzFcXHUwMkM2LVxcdTAyRDFcXHUwMkUwLVxcdTAyRTRcXHUwMkVDXFx1MDJFRVxcdTAzNzAtXFx1MDM3NFxcdTAzNzZcXHUwMzc3XFx1MDM3QS1cXHUwMzdEXFx1MDM3RlxcdTAzODZcXHUwMzg4LVxcdTAzOEFcXHUwMzhDXFx1MDM4RS1cXHUwM0ExXFx1MDNBMy1cXHUwM0Y1XFx1MDNGNy1cXHUwNDgxXFx1MDQ4QS1cXHUwNTJGXFx1MDUzMS1cXHUwNTU2XFx1MDU1OVxcdTA1NjEtXFx1MDU4N1xcdTA1RDAtXFx1MDVFQVxcdTA1RjAtXFx1MDVGMlxcdTA2MjAtXFx1MDY0QVxcdTA2NkVcXHUwNjZGXFx1MDY3MS1cXHUwNkQzXFx1MDZENVxcdTA2RTVcXHUwNkU2XFx1MDZFRVxcdTA2RUZcXHUwNkZBLVxcdTA2RkNcXHUwNkZGXFx1MDcxMFxcdTA3MTItXFx1MDcyRlxcdTA3NEQtXFx1MDdBNVxcdTA3QjFcXHUwN0NBLVxcdTA3RUFcXHUwN0Y0XFx1MDdGNVxcdTA3RkFcXHUwODAwLVxcdTA4MTVcXHUwODFBXFx1MDgyNFxcdTA4MjhcXHUwODQwLVxcdTA4NThcXHUwOEEwLVxcdTA4QjJcXHUwOTA0LVxcdTA5MzlcXHUwOTNEXFx1MDk1MFxcdTA5NTgtXFx1MDk2MVxcdTA5NzEtXFx1MDk4MFxcdTA5ODUtXFx1MDk4Q1xcdTA5OEZcXHUwOTkwXFx1MDk5My1cXHUwOUE4XFx1MDlBQS1cXHUwOUIwXFx1MDlCMlxcdTA5QjYtXFx1MDlCOVxcdTA5QkRcXHUwOUNFXFx1MDlEQ1xcdTA5RERcXHUwOURGLVxcdTA5RTFcXHUwOUYwXFx1MDlGMVxcdTBBMDUtXFx1MEEwQVxcdTBBMEZcXHUwQTEwXFx1MEExMy1cXHUwQTI4XFx1MEEyQS1cXHUwQTMwXFx1MEEzMlxcdTBBMzNcXHUwQTM1XFx1MEEzNlxcdTBBMzhcXHUwQTM5XFx1MEE1OS1cXHUwQTVDXFx1MEE1RVxcdTBBNzItXFx1MEE3NFxcdTBBODUtXFx1MEE4RFxcdTBBOEYtXFx1MEE5MVxcdTBBOTMtXFx1MEFBOFxcdTBBQUEtXFx1MEFCMFxcdTBBQjJcXHUwQUIzXFx1MEFCNS1cXHUwQUI5XFx1MEFCRFxcdTBBRDBcXHUwQUUwXFx1MEFFMVxcdTBCMDUtXFx1MEIwQ1xcdTBCMEZcXHUwQjEwXFx1MEIxMy1cXHUwQjI4XFx1MEIyQS1cXHUwQjMwXFx1MEIzMlxcdTBCMzNcXHUwQjM1LVxcdTBCMzlcXHUwQjNEXFx1MEI1Q1xcdTBCNURcXHUwQjVGLVxcdTBCNjFcXHUwQjcxXFx1MEI4M1xcdTBCODUtXFx1MEI4QVxcdTBCOEUtXFx1MEI5MFxcdTBCOTItXFx1MEI5NVxcdTBCOTlcXHUwQjlBXFx1MEI5Q1xcdTBCOUVcXHUwQjlGXFx1MEJBM1xcdTBCQTRcXHUwQkE4LVxcdTBCQUFcXHUwQkFFLVxcdTBCQjlcXHUwQkQwXFx1MEMwNS1cXHUwQzBDXFx1MEMwRS1cXHUwQzEwXFx1MEMxMi1cXHUwQzI4XFx1MEMyQS1cXHUwQzM5XFx1MEMzRFxcdTBDNThcXHUwQzU5XFx1MEM2MFxcdTBDNjFcXHUwQzg1LVxcdTBDOENcXHUwQzhFLVxcdTBDOTBcXHUwQzkyLVxcdTBDQThcXHUwQ0FBLVxcdTBDQjNcXHUwQ0I1LVxcdTBDQjlcXHUwQ0JEXFx1MENERVxcdTBDRTBcXHUwQ0UxXFx1MENGMVxcdTBDRjJcXHUwRDA1LVxcdTBEMENcXHUwRDBFLVxcdTBEMTBcXHUwRDEyLVxcdTBEM0FcXHUwRDNEXFx1MEQ0RVxcdTBENjBcXHUwRDYxXFx1MEQ3QS1cXHUwRDdGXFx1MEQ4NS1cXHUwRDk2XFx1MEQ5QS1cXHUwREIxXFx1MERCMy1cXHUwREJCXFx1MERCRFxcdTBEQzAtXFx1MERDNlxcdTBFMDEtXFx1MEUzMFxcdTBFMzJcXHUwRTMzXFx1MEU0MC1cXHUwRTQ2XFx1MEU4MVxcdTBFODJcXHUwRTg0XFx1MEU4N1xcdTBFODhcXHUwRThBXFx1MEU4RFxcdTBFOTQtXFx1MEU5N1xcdTBFOTktXFx1MEU5RlxcdTBFQTEtXFx1MEVBM1xcdTBFQTVcXHUwRUE3XFx1MEVBQVxcdTBFQUJcXHUwRUFELVxcdTBFQjBcXHUwRUIyXFx1MEVCM1xcdTBFQkRcXHUwRUMwLVxcdTBFQzRcXHUwRUM2XFx1MEVEQy1cXHUwRURGXFx1MEYwMFxcdTBGNDAtXFx1MEY0N1xcdTBGNDktXFx1MEY2Q1xcdTBGODgtXFx1MEY4Q1xcdTEwMDAtXFx1MTAyQVxcdTEwM0ZcXHUxMDUwLVxcdTEwNTVcXHUxMDVBLVxcdTEwNURcXHUxMDYxXFx1MTA2NVxcdTEwNjZcXHUxMDZFLVxcdTEwNzBcXHUxMDc1LVxcdTEwODFcXHUxMDhFXFx1MTBBMC1cXHUxMEM1XFx1MTBDN1xcdTEwQ0RcXHUxMEQwLVxcdTEwRkFcXHUxMEZDLVxcdTEyNDhcXHUxMjRBLVxcdTEyNERcXHUxMjUwLVxcdTEyNTZcXHUxMjU4XFx1MTI1QS1cXHUxMjVEXFx1MTI2MC1cXHUxMjg4XFx1MTI4QS1cXHUxMjhEXFx1MTI5MC1cXHUxMkIwXFx1MTJCMi1cXHUxMkI1XFx1MTJCOC1cXHUxMkJFXFx1MTJDMFxcdTEyQzItXFx1MTJDNVxcdTEyQzgtXFx1MTJENlxcdTEyRDgtXFx1MTMxMFxcdTEzMTItXFx1MTMxNVxcdTEzMTgtXFx1MTM1QVxcdTEzODAtXFx1MTM4RlxcdTEzQTAtXFx1MTNGNFxcdTE0MDEtXFx1MTY2Q1xcdTE2NkYtXFx1MTY3RlxcdTE2ODEtXFx1MTY5QVxcdTE2QTAtXFx1MTZFQVxcdTE2RUUtXFx1MTZGOFxcdTE3MDAtXFx1MTcwQ1xcdTE3MEUtXFx1MTcxMVxcdTE3MjAtXFx1MTczMVxcdTE3NDAtXFx1MTc1MVxcdTE3NjAtXFx1MTc2Q1xcdTE3NkUtXFx1MTc3MFxcdTE3ODAtXFx1MTdCM1xcdTE3RDdcXHUxN0RDXFx1MTgyMC1cXHUxODc3XFx1MTg4MC1cXHUxOEE4XFx1MThBQVxcdTE4QjAtXFx1MThGNVxcdTE5MDAtXFx1MTkxRVxcdTE5NTAtXFx1MTk2RFxcdTE5NzAtXFx1MTk3NFxcdTE5ODAtXFx1MTlBQlxcdTE5QzEtXFx1MTlDN1xcdTFBMDAtXFx1MUExNlxcdTFBMjAtXFx1MUE1NFxcdTFBQTdcXHUxQjA1LVxcdTFCMzNcXHUxQjQ1LVxcdTFCNEJcXHUxQjgzLVxcdTFCQTBcXHUxQkFFXFx1MUJBRlxcdTFCQkEtXFx1MUJFNVxcdTFDMDAtXFx1MUMyM1xcdTFDNEQtXFx1MUM0RlxcdTFDNUEtXFx1MUM3RFxcdTFDRTktXFx1MUNFQ1xcdTFDRUUtXFx1MUNGMVxcdTFDRjVcXHUxQ0Y2XFx1MUQwMC1cXHUxREJGXFx1MUUwMC1cXHUxRjE1XFx1MUYxOC1cXHUxRjFEXFx1MUYyMC1cXHUxRjQ1XFx1MUY0OC1cXHUxRjREXFx1MUY1MC1cXHUxRjU3XFx1MUY1OVxcdTFGNUJcXHUxRjVEXFx1MUY1Ri1cXHUxRjdEXFx1MUY4MC1cXHUxRkI0XFx1MUZCNi1cXHUxRkJDXFx1MUZCRVxcdTFGQzItXFx1MUZDNFxcdTFGQzYtXFx1MUZDQ1xcdTFGRDAtXFx1MUZEM1xcdTFGRDYtXFx1MUZEQlxcdTFGRTAtXFx1MUZFQ1xcdTFGRjItXFx1MUZGNFxcdTFGRjYtXFx1MUZGQ1xcdTIwNzFcXHUyMDdGXFx1MjA5MC1cXHUyMDlDXFx1MjEwMlxcdTIxMDdcXHUyMTBBLVxcdTIxMTNcXHUyMTE1XFx1MjExOC1cXHUyMTFEXFx1MjEyNFxcdTIxMjZcXHUyMTI4XFx1MjEyQS1cXHUyMTM5XFx1MjEzQy1cXHUyMTNGXFx1MjE0NS1cXHUyMTQ5XFx1MjE0RVxcdTIxNjAtXFx1MjE4OFxcdTJDMDAtXFx1MkMyRVxcdTJDMzAtXFx1MkM1RVxcdTJDNjAtXFx1MkNFNFxcdTJDRUItXFx1MkNFRVxcdTJDRjJcXHUyQ0YzXFx1MkQwMC1cXHUyRDI1XFx1MkQyN1xcdTJEMkRcXHUyRDMwLVxcdTJENjdcXHUyRDZGXFx1MkQ4MC1cXHUyRDk2XFx1MkRBMC1cXHUyREE2XFx1MkRBOC1cXHUyREFFXFx1MkRCMC1cXHUyREI2XFx1MkRCOC1cXHUyREJFXFx1MkRDMC1cXHUyREM2XFx1MkRDOC1cXHUyRENFXFx1MkREMC1cXHUyREQ2XFx1MkREOC1cXHUyRERFXFx1MzAwNS1cXHUzMDA3XFx1MzAyMS1cXHUzMDI5XFx1MzAzMS1cXHUzMDM1XFx1MzAzOC1cXHUzMDNDXFx1MzA0MS1cXHUzMDk2XFx1MzA5Qi1cXHUzMDlGXFx1MzBBMS1cXHUzMEZBXFx1MzBGQy1cXHUzMEZGXFx1MzEwNS1cXHUzMTJEXFx1MzEzMS1cXHUzMThFXFx1MzFBMC1cXHUzMUJBXFx1MzFGMC1cXHUzMUZGXFx1MzQwMC1cXHU0REI1XFx1NEUwMC1cXHU5RkNDXFx1QTAwMC1cXHVBNDhDXFx1QTREMC1cXHVBNEZEXFx1QTUwMC1cXHVBNjBDXFx1QTYxMC1cXHVBNjFGXFx1QTYyQVxcdUE2MkJcXHVBNjQwLVxcdUE2NkVcXHVBNjdGLVxcdUE2OURcXHVBNkEwLVxcdUE2RUZcXHVBNzE3LVxcdUE3MUZcXHVBNzIyLVxcdUE3ODhcXHVBNzhCLVxcdUE3OEVcXHVBNzkwLVxcdUE3QURcXHVBN0IwXFx1QTdCMVxcdUE3RjctXFx1QTgwMVxcdUE4MDMtXFx1QTgwNVxcdUE4MDctXFx1QTgwQVxcdUE4MEMtXFx1QTgyMlxcdUE4NDAtXFx1QTg3M1xcdUE4ODItXFx1QThCM1xcdUE4RjItXFx1QThGN1xcdUE4RkJcXHVBOTBBLVxcdUE5MjVcXHVBOTMwLVxcdUE5NDZcXHVBOTYwLVxcdUE5N0NcXHVBOTg0LVxcdUE5QjJcXHVBOUNGXFx1QTlFMC1cXHVBOUU0XFx1QTlFNi1cXHVBOUVGXFx1QTlGQS1cXHVBOUZFXFx1QUEwMC1cXHVBQTI4XFx1QUE0MC1cXHVBQTQyXFx1QUE0NC1cXHVBQTRCXFx1QUE2MC1cXHVBQTc2XFx1QUE3QVxcdUFBN0UtXFx1QUFBRlxcdUFBQjFcXHVBQUI1XFx1QUFCNlxcdUFBQjktXFx1QUFCRFxcdUFBQzBcXHVBQUMyXFx1QUFEQi1cXHVBQUREXFx1QUFFMC1cXHVBQUVBXFx1QUFGMi1cXHVBQUY0XFx1QUIwMS1cXHVBQjA2XFx1QUIwOS1cXHVBQjBFXFx1QUIxMS1cXHVBQjE2XFx1QUIyMC1cXHVBQjI2XFx1QUIyOC1cXHVBQjJFXFx1QUIzMC1cXHVBQjVBXFx1QUI1Qy1cXHVBQjVGXFx1QUI2NFxcdUFCNjVcXHVBQkMwLVxcdUFCRTJcXHVBQzAwLVxcdUQ3QTNcXHVEN0IwLVxcdUQ3QzZcXHVEN0NCLVxcdUQ3RkJcXHVGOTAwLVxcdUZBNkRcXHVGQTcwLVxcdUZBRDlcXHVGQjAwLVxcdUZCMDZcXHVGQjEzLVxcdUZCMTdcXHVGQjFEXFx1RkIxRi1cXHVGQjI4XFx1RkIyQS1cXHVGQjM2XFx1RkIzOC1cXHVGQjNDXFx1RkIzRVxcdUZCNDBcXHVGQjQxXFx1RkI0M1xcdUZCNDRcXHVGQjQ2LVxcdUZCQjFcXHVGQkQzLVxcdUZEM0RcXHVGRDUwLVxcdUZEOEZcXHVGRDkyLVxcdUZEQzdcXHVGREYwLVxcdUZERkJcXHVGRTcwLVxcdUZFNzRcXHVGRTc2LVxcdUZFRkNcXHVGRjIxLVxcdUZGM0FcXHVGRjQxLVxcdUZGNUFcXHVGRjY2LVxcdUZGQkVcXHVGRkMyLVxcdUZGQzdcXHVGRkNBLVxcdUZGQ0ZcXHVGRkQyLVxcdUZGRDdcXHVGRkRBLVxcdUZGRENdfFxcdUQ4MDBbXFx1REMwMC1cXHVEQzBCXFx1REMwRC1cXHVEQzI2XFx1REMyOC1cXHVEQzNBXFx1REMzQ1xcdURDM0RcXHVEQzNGLVxcdURDNERcXHVEQzUwLVxcdURDNURcXHVEQzgwLVxcdURDRkFcXHVERDQwLVxcdURENzRcXHVERTgwLVxcdURFOUNcXHVERUEwLVxcdURFRDBcXHVERjAwLVxcdURGMUZcXHVERjMwLVxcdURGNEFcXHVERjUwLVxcdURGNzVcXHVERjgwLVxcdURGOURcXHVERkEwLVxcdURGQzNcXHVERkM4LVxcdURGQ0ZcXHVERkQxLVxcdURGRDVdfFxcdUQ4MDFbXFx1REMwMC1cXHVEQzlEXFx1REQwMC1cXHVERDI3XFx1REQzMC1cXHVERDYzXFx1REUwMC1cXHVERjM2XFx1REY0MC1cXHVERjU1XFx1REY2MC1cXHVERjY3XXxcXHVEODAyW1xcdURDMDAtXFx1REMwNVxcdURDMDhcXHVEQzBBLVxcdURDMzVcXHVEQzM3XFx1REMzOFxcdURDM0NcXHVEQzNGLVxcdURDNTVcXHVEQzYwLVxcdURDNzZcXHVEQzgwLVxcdURDOUVcXHVERDAwLVxcdUREMTVcXHVERDIwLVxcdUREMzlcXHVERDgwLVxcdUREQjdcXHVEREJFXFx1RERCRlxcdURFMDBcXHVERTEwLVxcdURFMTNcXHVERTE1LVxcdURFMTdcXHVERTE5LVxcdURFMzNcXHVERTYwLVxcdURFN0NcXHVERTgwLVxcdURFOUNcXHVERUMwLVxcdURFQzdcXHVERUM5LVxcdURFRTRcXHVERjAwLVxcdURGMzVcXHVERjQwLVxcdURGNTVcXHVERjYwLVxcdURGNzJcXHVERjgwLVxcdURGOTFdfFxcdUQ4MDNbXFx1REMwMC1cXHVEQzQ4XXxcXHVEODA0W1xcdURDMDMtXFx1REMzN1xcdURDODMtXFx1RENBRlxcdURDRDAtXFx1RENFOFxcdUREMDMtXFx1REQyNlxcdURENTAtXFx1REQ3MlxcdURENzZcXHVERDgzLVxcdUREQjJcXHVEREMxLVxcdUREQzRcXHVERERBXFx1REUwMC1cXHVERTExXFx1REUxMy1cXHVERTJCXFx1REVCMC1cXHVERURFXFx1REYwNS1cXHVERjBDXFx1REYwRlxcdURGMTBcXHVERjEzLVxcdURGMjhcXHVERjJBLVxcdURGMzBcXHVERjMyXFx1REYzM1xcdURGMzUtXFx1REYzOVxcdURGM0RcXHVERjVELVxcdURGNjFdfFxcdUQ4MDVbXFx1REM4MC1cXHVEQ0FGXFx1RENDNFxcdURDQzVcXHVEQ0M3XFx1REQ4MC1cXHVEREFFXFx1REUwMC1cXHVERTJGXFx1REU0NFxcdURFODAtXFx1REVBQV18XFx1RDgwNltcXHVEQ0EwLVxcdURDREZcXHVEQ0ZGXFx1REVDMC1cXHVERUY4XXxcXHVEODA4W1xcdURDMDAtXFx1REY5OF18XFx1RDgwOVtcXHVEQzAwLVxcdURDNkVdfFtcXHVEODBDXFx1RDg0MC1cXHVEODY4XFx1RDg2QS1cXHVEODZDXVtcXHVEQzAwLVxcdURGRkZdfFxcdUQ4MERbXFx1REMwMC1cXHVEQzJFXXxcXHVEODFBW1xcdURDMDAtXFx1REUzOFxcdURFNDAtXFx1REU1RVxcdURFRDAtXFx1REVFRFxcdURGMDAtXFx1REYyRlxcdURGNDAtXFx1REY0M1xcdURGNjMtXFx1REY3N1xcdURGN0QtXFx1REY4Rl18XFx1RDgxQltcXHVERjAwLVxcdURGNDRcXHVERjUwXFx1REY5My1cXHVERjlGXXxcXHVEODJDW1xcdURDMDBcXHVEQzAxXXxcXHVEODJGW1xcdURDMDAtXFx1REM2QVxcdURDNzAtXFx1REM3Q1xcdURDODAtXFx1REM4OFxcdURDOTAtXFx1REM5OV18XFx1RDgzNVtcXHVEQzAwLVxcdURDNTRcXHVEQzU2LVxcdURDOUNcXHVEQzlFXFx1REM5RlxcdURDQTJcXHVEQ0E1XFx1RENBNlxcdURDQTktXFx1RENBQ1xcdURDQUUtXFx1RENCOVxcdURDQkJcXHVEQ0JELVxcdURDQzNcXHVEQ0M1LVxcdUREMDVcXHVERDA3LVxcdUREMEFcXHVERDBELVxcdUREMTRcXHVERDE2LVxcdUREMUNcXHVERDFFLVxcdUREMzlcXHVERDNCLVxcdUREM0VcXHVERDQwLVxcdURENDRcXHVERDQ2XFx1REQ0QS1cXHVERDUwXFx1REQ1Mi1cXHVERUE1XFx1REVBOC1cXHVERUMwXFx1REVDMi1cXHVERURBXFx1REVEQy1cXHVERUZBXFx1REVGQy1cXHVERjE0XFx1REYxNi1cXHVERjM0XFx1REYzNi1cXHVERjRFXFx1REY1MC1cXHVERjZFXFx1REY3MC1cXHVERjg4XFx1REY4QS1cXHVERkE4XFx1REZBQS1cXHVERkMyXFx1REZDNC1cXHVERkNCXXxcXHVEODNBW1xcdURDMDAtXFx1RENDNF18XFx1RDgzQltcXHVERTAwLVxcdURFMDNcXHVERTA1LVxcdURFMUZcXHVERTIxXFx1REUyMlxcdURFMjRcXHVERTI3XFx1REUyOS1cXHVERTMyXFx1REUzNC1cXHVERTM3XFx1REUzOVxcdURFM0JcXHVERTQyXFx1REU0N1xcdURFNDlcXHVERTRCXFx1REU0RC1cXHVERTRGXFx1REU1MVxcdURFNTJcXHVERTU0XFx1REU1N1xcdURFNTlcXHVERTVCXFx1REU1RFxcdURFNUZcXHVERTYxXFx1REU2MlxcdURFNjRcXHVERTY3LVxcdURFNkFcXHVERTZDLVxcdURFNzJcXHVERTc0LVxcdURFNzdcXHVERTc5LVxcdURFN0NcXHVERTdFXFx1REU4MC1cXHVERTg5XFx1REU4Qi1cXHVERTlCXFx1REVBMS1cXHVERUEzXFx1REVBNS1cXHVERUE5XFx1REVBQi1cXHVERUJCXXxcXHVEODY5W1xcdURDMDAtXFx1REVENlxcdURGMDAtXFx1REZGRl18XFx1RDg2RFtcXHVEQzAwLVxcdURGMzRcXHVERjQwLVxcdURGRkZdfFxcdUQ4NkVbXFx1REMwMC1cXHVEQzFEXXxcXHVEODdFW1xcdURDMDAtXFx1REUxRF0vLE5vbkFzY2lpSWRlbnRpZmllclBhcnQ6L1tcXHhBQVxceEI1XFx4QjdcXHhCQVxceEMwLVxceEQ2XFx4RDgtXFx4RjZcXHhGOC1cXHUwMkMxXFx1MDJDNi1cXHUwMkQxXFx1MDJFMC1cXHUwMkU0XFx1MDJFQ1xcdTAyRUVcXHUwMzAwLVxcdTAzNzRcXHUwMzc2XFx1MDM3N1xcdTAzN0EtXFx1MDM3RFxcdTAzN0ZcXHUwMzg2LVxcdTAzOEFcXHUwMzhDXFx1MDM4RS1cXHUwM0ExXFx1MDNBMy1cXHUwM0Y1XFx1MDNGNy1cXHUwNDgxXFx1MDQ4My1cXHUwNDg3XFx1MDQ4QS1cXHUwNTJGXFx1MDUzMS1cXHUwNTU2XFx1MDU1OVxcdTA1NjEtXFx1MDU4N1xcdTA1OTEtXFx1MDVCRFxcdTA1QkZcXHUwNUMxXFx1MDVDMlxcdTA1QzRcXHUwNUM1XFx1MDVDN1xcdTA1RDAtXFx1MDVFQVxcdTA1RjAtXFx1MDVGMlxcdTA2MTAtXFx1MDYxQVxcdTA2MjAtXFx1MDY2OVxcdTA2NkUtXFx1MDZEM1xcdTA2RDUtXFx1MDZEQ1xcdTA2REYtXFx1MDZFOFxcdTA2RUEtXFx1MDZGQ1xcdTA2RkZcXHUwNzEwLVxcdTA3NEFcXHUwNzRELVxcdTA3QjFcXHUwN0MwLVxcdTA3RjVcXHUwN0ZBXFx1MDgwMC1cXHUwODJEXFx1MDg0MC1cXHUwODVCXFx1MDhBMC1cXHUwOEIyXFx1MDhFNC1cXHUwOTYzXFx1MDk2Ni1cXHUwOTZGXFx1MDk3MS1cXHUwOTgzXFx1MDk4NS1cXHUwOThDXFx1MDk4RlxcdTA5OTBcXHUwOTkzLVxcdTA5QThcXHUwOUFBLVxcdTA5QjBcXHUwOUIyXFx1MDlCNi1cXHUwOUI5XFx1MDlCQy1cXHUwOUM0XFx1MDlDN1xcdTA5QzhcXHUwOUNCLVxcdTA5Q0VcXHUwOUQ3XFx1MDlEQ1xcdTA5RERcXHUwOURGLVxcdTA5RTNcXHUwOUU2LVxcdTA5RjFcXHUwQTAxLVxcdTBBMDNcXHUwQTA1LVxcdTBBMEFcXHUwQTBGXFx1MEExMFxcdTBBMTMtXFx1MEEyOFxcdTBBMkEtXFx1MEEzMFxcdTBBMzJcXHUwQTMzXFx1MEEzNVxcdTBBMzZcXHUwQTM4XFx1MEEzOVxcdTBBM0NcXHUwQTNFLVxcdTBBNDJcXHUwQTQ3XFx1MEE0OFxcdTBBNEItXFx1MEE0RFxcdTBBNTFcXHUwQTU5LVxcdTBBNUNcXHUwQTVFXFx1MEE2Ni1cXHUwQTc1XFx1MEE4MS1cXHUwQTgzXFx1MEE4NS1cXHUwQThEXFx1MEE4Ri1cXHUwQTkxXFx1MEE5My1cXHUwQUE4XFx1MEFBQS1cXHUwQUIwXFx1MEFCMlxcdTBBQjNcXHUwQUI1LVxcdTBBQjlcXHUwQUJDLVxcdTBBQzVcXHUwQUM3LVxcdTBBQzlcXHUwQUNCLVxcdTBBQ0RcXHUwQUQwXFx1MEFFMC1cXHUwQUUzXFx1MEFFNi1cXHUwQUVGXFx1MEIwMS1cXHUwQjAzXFx1MEIwNS1cXHUwQjBDXFx1MEIwRlxcdTBCMTBcXHUwQjEzLVxcdTBCMjhcXHUwQjJBLVxcdTBCMzBcXHUwQjMyXFx1MEIzM1xcdTBCMzUtXFx1MEIzOVxcdTBCM0MtXFx1MEI0NFxcdTBCNDdcXHUwQjQ4XFx1MEI0Qi1cXHUwQjREXFx1MEI1NlxcdTBCNTdcXHUwQjVDXFx1MEI1RFxcdTBCNUYtXFx1MEI2M1xcdTBCNjYtXFx1MEI2RlxcdTBCNzFcXHUwQjgyXFx1MEI4M1xcdTBCODUtXFx1MEI4QVxcdTBCOEUtXFx1MEI5MFxcdTBCOTItXFx1MEI5NVxcdTBCOTlcXHUwQjlBXFx1MEI5Q1xcdTBCOUVcXHUwQjlGXFx1MEJBM1xcdTBCQTRcXHUwQkE4LVxcdTBCQUFcXHUwQkFFLVxcdTBCQjlcXHUwQkJFLVxcdTBCQzJcXHUwQkM2LVxcdTBCQzhcXHUwQkNBLVxcdTBCQ0RcXHUwQkQwXFx1MEJEN1xcdTBCRTYtXFx1MEJFRlxcdTBDMDAtXFx1MEMwM1xcdTBDMDUtXFx1MEMwQ1xcdTBDMEUtXFx1MEMxMFxcdTBDMTItXFx1MEMyOFxcdTBDMkEtXFx1MEMzOVxcdTBDM0QtXFx1MEM0NFxcdTBDNDYtXFx1MEM0OFxcdTBDNEEtXFx1MEM0RFxcdTBDNTVcXHUwQzU2XFx1MEM1OFxcdTBDNTlcXHUwQzYwLVxcdTBDNjNcXHUwQzY2LVxcdTBDNkZcXHUwQzgxLVxcdTBDODNcXHUwQzg1LVxcdTBDOENcXHUwQzhFLVxcdTBDOTBcXHUwQzkyLVxcdTBDQThcXHUwQ0FBLVxcdTBDQjNcXHUwQ0I1LVxcdTBDQjlcXHUwQ0JDLVxcdTBDQzRcXHUwQ0M2LVxcdTBDQzhcXHUwQ0NBLVxcdTBDQ0RcXHUwQ0Q1XFx1MENENlxcdTBDREVcXHUwQ0UwLVxcdTBDRTNcXHUwQ0U2LVxcdTBDRUZcXHUwQ0YxXFx1MENGMlxcdTBEMDEtXFx1MEQwM1xcdTBEMDUtXFx1MEQwQ1xcdTBEMEUtXFx1MEQxMFxcdTBEMTItXFx1MEQzQVxcdTBEM0QtXFx1MEQ0NFxcdTBENDYtXFx1MEQ0OFxcdTBENEEtXFx1MEQ0RVxcdTBENTdcXHUwRDYwLVxcdTBENjNcXHUwRDY2LVxcdTBENkZcXHUwRDdBLVxcdTBEN0ZcXHUwRDgyXFx1MEQ4M1xcdTBEODUtXFx1MEQ5NlxcdTBEOUEtXFx1MERCMVxcdTBEQjMtXFx1MERCQlxcdTBEQkRcXHUwREMwLVxcdTBEQzZcXHUwRENBXFx1MERDRi1cXHUwREQ0XFx1MERENlxcdTBERDgtXFx1MERERlxcdTBERTYtXFx1MERFRlxcdTBERjJcXHUwREYzXFx1MEUwMS1cXHUwRTNBXFx1MEU0MC1cXHUwRTRFXFx1MEU1MC1cXHUwRTU5XFx1MEU4MVxcdTBFODJcXHUwRTg0XFx1MEU4N1xcdTBFODhcXHUwRThBXFx1MEU4RFxcdTBFOTQtXFx1MEU5N1xcdTBFOTktXFx1MEU5RlxcdTBFQTEtXFx1MEVBM1xcdTBFQTVcXHUwRUE3XFx1MEVBQVxcdTBFQUJcXHUwRUFELVxcdTBFQjlcXHUwRUJCLVxcdTBFQkRcXHUwRUMwLVxcdTBFQzRcXHUwRUM2XFx1MEVDOC1cXHUwRUNEXFx1MEVEMC1cXHUwRUQ5XFx1MEVEQy1cXHUwRURGXFx1MEYwMFxcdTBGMThcXHUwRjE5XFx1MEYyMC1cXHUwRjI5XFx1MEYzNVxcdTBGMzdcXHUwRjM5XFx1MEYzRS1cXHUwRjQ3XFx1MEY0OS1cXHUwRjZDXFx1MEY3MS1cXHUwRjg0XFx1MEY4Ni1cXHUwRjk3XFx1MEY5OS1cXHUwRkJDXFx1MEZDNlxcdTEwMDAtXFx1MTA0OVxcdTEwNTAtXFx1MTA5RFxcdTEwQTAtXFx1MTBDNVxcdTEwQzdcXHUxMENEXFx1MTBEMC1cXHUxMEZBXFx1MTBGQy1cXHUxMjQ4XFx1MTI0QS1cXHUxMjREXFx1MTI1MC1cXHUxMjU2XFx1MTI1OFxcdTEyNUEtXFx1MTI1RFxcdTEyNjAtXFx1MTI4OFxcdTEyOEEtXFx1MTI4RFxcdTEyOTAtXFx1MTJCMFxcdTEyQjItXFx1MTJCNVxcdTEyQjgtXFx1MTJCRVxcdTEyQzBcXHUxMkMyLVxcdTEyQzVcXHUxMkM4LVxcdTEyRDZcXHUxMkQ4LVxcdTEzMTBcXHUxMzEyLVxcdTEzMTVcXHUxMzE4LVxcdTEzNUFcXHUxMzVELVxcdTEzNUZcXHUxMzY5LVxcdTEzNzFcXHUxMzgwLVxcdTEzOEZcXHUxM0EwLVxcdTEzRjRcXHUxNDAxLVxcdTE2NkNcXHUxNjZGLVxcdTE2N0ZcXHUxNjgxLVxcdTE2OUFcXHUxNkEwLVxcdTE2RUFcXHUxNkVFLVxcdTE2RjhcXHUxNzAwLVxcdTE3MENcXHUxNzBFLVxcdTE3MTRcXHUxNzIwLVxcdTE3MzRcXHUxNzQwLVxcdTE3NTNcXHUxNzYwLVxcdTE3NkNcXHUxNzZFLVxcdTE3NzBcXHUxNzcyXFx1MTc3M1xcdTE3ODAtXFx1MTdEM1xcdTE3RDdcXHUxN0RDXFx1MTdERFxcdTE3RTAtXFx1MTdFOVxcdTE4MEItXFx1MTgwRFxcdTE4MTAtXFx1MTgxOVxcdTE4MjAtXFx1MTg3N1xcdTE4ODAtXFx1MThBQVxcdTE4QjAtXFx1MThGNVxcdTE5MDAtXFx1MTkxRVxcdTE5MjAtXFx1MTkyQlxcdTE5MzAtXFx1MTkzQlxcdTE5NDYtXFx1MTk2RFxcdTE5NzAtXFx1MTk3NFxcdTE5ODAtXFx1MTlBQlxcdTE5QjAtXFx1MTlDOVxcdTE5RDAtXFx1MTlEQVxcdTFBMDAtXFx1MUExQlxcdTFBMjAtXFx1MUE1RVxcdTFBNjAtXFx1MUE3Q1xcdTFBN0YtXFx1MUE4OVxcdTFBOTAtXFx1MUE5OVxcdTFBQTdcXHUxQUIwLVxcdTFBQkRcXHUxQjAwLVxcdTFCNEJcXHUxQjUwLVxcdTFCNTlcXHUxQjZCLVxcdTFCNzNcXHUxQjgwLVxcdTFCRjNcXHUxQzAwLVxcdTFDMzdcXHUxQzQwLVxcdTFDNDlcXHUxQzRELVxcdTFDN0RcXHUxQ0QwLVxcdTFDRDJcXHUxQ0Q0LVxcdTFDRjZcXHUxQ0Y4XFx1MUNGOVxcdTFEMDAtXFx1MURGNVxcdTFERkMtXFx1MUYxNVxcdTFGMTgtXFx1MUYxRFxcdTFGMjAtXFx1MUY0NVxcdTFGNDgtXFx1MUY0RFxcdTFGNTAtXFx1MUY1N1xcdTFGNTlcXHUxRjVCXFx1MUY1RFxcdTFGNUYtXFx1MUY3RFxcdTFGODAtXFx1MUZCNFxcdTFGQjYtXFx1MUZCQ1xcdTFGQkVcXHUxRkMyLVxcdTFGQzRcXHUxRkM2LVxcdTFGQ0NcXHUxRkQwLVxcdTFGRDNcXHUxRkQ2LVxcdTFGREJcXHUxRkUwLVxcdTFGRUNcXHUxRkYyLVxcdTFGRjRcXHUxRkY2LVxcdTFGRkNcXHUyMDBDXFx1MjAwRFxcdTIwM0ZcXHUyMDQwXFx1MjA1NFxcdTIwNzFcXHUyMDdGXFx1MjA5MC1cXHUyMDlDXFx1MjBEMC1cXHUyMERDXFx1MjBFMVxcdTIwRTUtXFx1MjBGMFxcdTIxMDJcXHUyMTA3XFx1MjEwQS1cXHUyMTEzXFx1MjExNVxcdTIxMTgtXFx1MjExRFxcdTIxMjRcXHUyMTI2XFx1MjEyOFxcdTIxMkEtXFx1MjEzOVxcdTIxM0MtXFx1MjEzRlxcdTIxNDUtXFx1MjE0OVxcdTIxNEVcXHUyMTYwLVxcdTIxODhcXHUyQzAwLVxcdTJDMkVcXHUyQzMwLVxcdTJDNUVcXHUyQzYwLVxcdTJDRTRcXHUyQ0VCLVxcdTJDRjNcXHUyRDAwLVxcdTJEMjVcXHUyRDI3XFx1MkQyRFxcdTJEMzAtXFx1MkQ2N1xcdTJENkZcXHUyRDdGLVxcdTJEOTZcXHUyREEwLVxcdTJEQTZcXHUyREE4LVxcdTJEQUVcXHUyREIwLVxcdTJEQjZcXHUyREI4LVxcdTJEQkVcXHUyREMwLVxcdTJEQzZcXHUyREM4LVxcdTJEQ0VcXHUyREQwLVxcdTJERDZcXHUyREQ4LVxcdTJEREVcXHUyREUwLVxcdTJERkZcXHUzMDA1LVxcdTMwMDdcXHUzMDIxLVxcdTMwMkZcXHUzMDMxLVxcdTMwMzVcXHUzMDM4LVxcdTMwM0NcXHUzMDQxLVxcdTMwOTZcXHUzMDk5LVxcdTMwOUZcXHUzMEExLVxcdTMwRkFcXHUzMEZDLVxcdTMwRkZcXHUzMTA1LVxcdTMxMkRcXHUzMTMxLVxcdTMxOEVcXHUzMUEwLVxcdTMxQkFcXHUzMUYwLVxcdTMxRkZcXHUzNDAwLVxcdTREQjVcXHU0RTAwLVxcdTlGQ0NcXHVBMDAwLVxcdUE0OENcXHVBNEQwLVxcdUE0RkRcXHVBNTAwLVxcdUE2MENcXHVBNjEwLVxcdUE2MkJcXHVBNjQwLVxcdUE2NkZcXHVBNjc0LVxcdUE2N0RcXHVBNjdGLVxcdUE2OURcXHVBNjlGLVxcdUE2RjFcXHVBNzE3LVxcdUE3MUZcXHVBNzIyLVxcdUE3ODhcXHVBNzhCLVxcdUE3OEVcXHVBNzkwLVxcdUE3QURcXHVBN0IwXFx1QTdCMVxcdUE3RjctXFx1QTgyN1xcdUE4NDAtXFx1QTg3M1xcdUE4ODAtXFx1QThDNFxcdUE4RDAtXFx1QThEOVxcdUE4RTAtXFx1QThGN1xcdUE4RkJcXHVBOTAwLVxcdUE5MkRcXHVBOTMwLVxcdUE5NTNcXHVBOTYwLVxcdUE5N0NcXHVBOTgwLVxcdUE5QzBcXHVBOUNGLVxcdUE5RDlcXHVBOUUwLVxcdUE5RkVcXHVBQTAwLVxcdUFBMzZcXHVBQTQwLVxcdUFBNERcXHVBQTUwLVxcdUFBNTlcXHVBQTYwLVxcdUFBNzZcXHVBQTdBLVxcdUFBQzJcXHVBQURCLVxcdUFBRERcXHVBQUUwLVxcdUFBRUZcXHVBQUYyLVxcdUFBRjZcXHVBQjAxLVxcdUFCMDZcXHVBQjA5LVxcdUFCMEVcXHVBQjExLVxcdUFCMTZcXHVBQjIwLVxcdUFCMjZcXHVBQjI4LVxcdUFCMkVcXHVBQjMwLVxcdUFCNUFcXHVBQjVDLVxcdUFCNUZcXHVBQjY0XFx1QUI2NVxcdUFCQzAtXFx1QUJFQVxcdUFCRUNcXHVBQkVEXFx1QUJGMC1cXHVBQkY5XFx1QUMwMC1cXHVEN0EzXFx1RDdCMC1cXHVEN0M2XFx1RDdDQi1cXHVEN0ZCXFx1RjkwMC1cXHVGQTZEXFx1RkE3MC1cXHVGQUQ5XFx1RkIwMC1cXHVGQjA2XFx1RkIxMy1cXHVGQjE3XFx1RkIxRC1cXHVGQjI4XFx1RkIyQS1cXHVGQjM2XFx1RkIzOC1cXHVGQjNDXFx1RkIzRVxcdUZCNDBcXHVGQjQxXFx1RkI0M1xcdUZCNDRcXHVGQjQ2LVxcdUZCQjFcXHVGQkQzLVxcdUZEM0RcXHVGRDUwLVxcdUZEOEZcXHVGRDkyLVxcdUZEQzdcXHVGREYwLVxcdUZERkJcXHVGRTAwLVxcdUZFMEZcXHVGRTIwLVxcdUZFMkRcXHVGRTMzXFx1RkUzNFxcdUZFNEQtXFx1RkU0RlxcdUZFNzAtXFx1RkU3NFxcdUZFNzYtXFx1RkVGQ1xcdUZGMTAtXFx1RkYxOVxcdUZGMjEtXFx1RkYzQVxcdUZGM0ZcXHVGRjQxLVxcdUZGNUFcXHVGRjY2LVxcdUZGQkVcXHVGRkMyLVxcdUZGQzdcXHVGRkNBLVxcdUZGQ0ZcXHVGRkQyLVxcdUZGRDdcXHVGRkRBLVxcdUZGRENdfFxcdUQ4MDBbXFx1REMwMC1cXHVEQzBCXFx1REMwRC1cXHVEQzI2XFx1REMyOC1cXHVEQzNBXFx1REMzQ1xcdURDM0RcXHVEQzNGLVxcdURDNERcXHVEQzUwLVxcdURDNURcXHVEQzgwLVxcdURDRkFcXHVERDQwLVxcdURENzRcXHVEREZEXFx1REU4MC1cXHVERTlDXFx1REVBMC1cXHVERUQwXFx1REVFMFxcdURGMDAtXFx1REYxRlxcdURGMzAtXFx1REY0QVxcdURGNTAtXFx1REY3QVxcdURGODAtXFx1REY5RFxcdURGQTAtXFx1REZDM1xcdURGQzgtXFx1REZDRlxcdURGRDEtXFx1REZENV18XFx1RDgwMVtcXHVEQzAwLVxcdURDOURcXHVEQ0EwLVxcdURDQTlcXHVERDAwLVxcdUREMjdcXHVERDMwLVxcdURENjNcXHVERTAwLVxcdURGMzZcXHVERjQwLVxcdURGNTVcXHVERjYwLVxcdURGNjddfFxcdUQ4MDJbXFx1REMwMC1cXHVEQzA1XFx1REMwOFxcdURDMEEtXFx1REMzNVxcdURDMzdcXHVEQzM4XFx1REMzQ1xcdURDM0YtXFx1REM1NVxcdURDNjAtXFx1REM3NlxcdURDODAtXFx1REM5RVxcdUREMDAtXFx1REQxNVxcdUREMjAtXFx1REQzOVxcdUREODAtXFx1RERCN1xcdUREQkVcXHVEREJGXFx1REUwMC1cXHVERTAzXFx1REUwNVxcdURFMDZcXHVERTBDLVxcdURFMTNcXHVERTE1LVxcdURFMTdcXHVERTE5LVxcdURFMzNcXHVERTM4LVxcdURFM0FcXHVERTNGXFx1REU2MC1cXHVERTdDXFx1REU4MC1cXHVERTlDXFx1REVDMC1cXHVERUM3XFx1REVDOS1cXHVERUU2XFx1REYwMC1cXHVERjM1XFx1REY0MC1cXHVERjU1XFx1REY2MC1cXHVERjcyXFx1REY4MC1cXHVERjkxXXxcXHVEODAzW1xcdURDMDAtXFx1REM0OF18XFx1RDgwNFtcXHVEQzAwLVxcdURDNDZcXHVEQzY2LVxcdURDNkZcXHVEQzdGLVxcdURDQkFcXHVEQ0QwLVxcdURDRThcXHVEQ0YwLVxcdURDRjlcXHVERDAwLVxcdUREMzRcXHVERDM2LVxcdUREM0ZcXHVERDUwLVxcdURENzNcXHVERDc2XFx1REQ4MC1cXHVEREM0XFx1REREMC1cXHVERERBXFx1REUwMC1cXHVERTExXFx1REUxMy1cXHVERTM3XFx1REVCMC1cXHVERUVBXFx1REVGMC1cXHVERUY5XFx1REYwMS1cXHVERjAzXFx1REYwNS1cXHVERjBDXFx1REYwRlxcdURGMTBcXHVERjEzLVxcdURGMjhcXHVERjJBLVxcdURGMzBcXHVERjMyXFx1REYzM1xcdURGMzUtXFx1REYzOVxcdURGM0MtXFx1REY0NFxcdURGNDdcXHVERjQ4XFx1REY0Qi1cXHVERjREXFx1REY1N1xcdURGNUQtXFx1REY2M1xcdURGNjYtXFx1REY2Q1xcdURGNzAtXFx1REY3NF18XFx1RDgwNVtcXHVEQzgwLVxcdURDQzVcXHVEQ0M3XFx1RENEMC1cXHVEQ0Q5XFx1REQ4MC1cXHVEREI1XFx1RERCOC1cXHVEREMwXFx1REUwMC1cXHVERTQwXFx1REU0NFxcdURFNTAtXFx1REU1OVxcdURFODAtXFx1REVCN1xcdURFQzAtXFx1REVDOV18XFx1RDgwNltcXHVEQ0EwLVxcdURDRTlcXHVEQ0ZGXFx1REVDMC1cXHVERUY4XXxcXHVEODA4W1xcdURDMDAtXFx1REY5OF18XFx1RDgwOVtcXHVEQzAwLVxcdURDNkVdfFtcXHVEODBDXFx1RDg0MC1cXHVEODY4XFx1RDg2QS1cXHVEODZDXVtcXHVEQzAwLVxcdURGRkZdfFxcdUQ4MERbXFx1REMwMC1cXHVEQzJFXXxcXHVEODFBW1xcdURDMDAtXFx1REUzOFxcdURFNDAtXFx1REU1RVxcdURFNjAtXFx1REU2OVxcdURFRDAtXFx1REVFRFxcdURFRjAtXFx1REVGNFxcdURGMDAtXFx1REYzNlxcdURGNDAtXFx1REY0M1xcdURGNTAtXFx1REY1OVxcdURGNjMtXFx1REY3N1xcdURGN0QtXFx1REY4Rl18XFx1RDgxQltcXHVERjAwLVxcdURGNDRcXHVERjUwLVxcdURGN0VcXHVERjhGLVxcdURGOUZdfFxcdUQ4MkNbXFx1REMwMFxcdURDMDFdfFxcdUQ4MkZbXFx1REMwMC1cXHVEQzZBXFx1REM3MC1cXHVEQzdDXFx1REM4MC1cXHVEQzg4XFx1REM5MC1cXHVEQzk5XFx1REM5RFxcdURDOUVdfFxcdUQ4MzRbXFx1REQ2NS1cXHVERDY5XFx1REQ2RC1cXHVERDcyXFx1REQ3Qi1cXHVERDgyXFx1REQ4NS1cXHVERDhCXFx1RERBQS1cXHVEREFEXFx1REU0Mi1cXHVERTQ0XXxcXHVEODM1W1xcdURDMDAtXFx1REM1NFxcdURDNTYtXFx1REM5Q1xcdURDOUVcXHVEQzlGXFx1RENBMlxcdURDQTVcXHVEQ0E2XFx1RENBOS1cXHVEQ0FDXFx1RENBRS1cXHVEQ0I5XFx1RENCQlxcdURDQkQtXFx1RENDM1xcdURDQzUtXFx1REQwNVxcdUREMDctXFx1REQwQVxcdUREMEQtXFx1REQxNFxcdUREMTYtXFx1REQxQ1xcdUREMUUtXFx1REQzOVxcdUREM0ItXFx1REQzRVxcdURENDAtXFx1REQ0NFxcdURENDZcXHVERDRBLVxcdURENTBcXHVERDUyLVxcdURFQTVcXHVERUE4LVxcdURFQzBcXHVERUMyLVxcdURFREFcXHVERURDLVxcdURFRkFcXHVERUZDLVxcdURGMTRcXHVERjE2LVxcdURGMzRcXHVERjM2LVxcdURGNEVcXHVERjUwLVxcdURGNkVcXHVERjcwLVxcdURGODhcXHVERjhBLVxcdURGQThcXHVERkFBLVxcdURGQzJcXHVERkM0LVxcdURGQ0JcXHVERkNFLVxcdURGRkZdfFxcdUQ4M0FbXFx1REMwMC1cXHVEQ0M0XFx1RENEMC1cXHVEQ0Q2XXxcXHVEODNCW1xcdURFMDAtXFx1REUwM1xcdURFMDUtXFx1REUxRlxcdURFMjFcXHVERTIyXFx1REUyNFxcdURFMjdcXHVERTI5LVxcdURFMzJcXHVERTM0LVxcdURFMzdcXHVERTM5XFx1REUzQlxcdURFNDJcXHVERTQ3XFx1REU0OVxcdURFNEJcXHVERTRELVxcdURFNEZcXHVERTUxXFx1REU1MlxcdURFNTRcXHVERTU3XFx1REU1OVxcdURFNUJcXHVERTVEXFx1REU1RlxcdURFNjFcXHVERTYyXFx1REU2NFxcdURFNjctXFx1REU2QVxcdURFNkMtXFx1REU3MlxcdURFNzQtXFx1REU3N1xcdURFNzktXFx1REU3Q1xcdURFN0VcXHVERTgwLVxcdURFODlcXHVERThCLVxcdURFOUJcXHVERUExLVxcdURFQTNcXHVERUE1LVxcdURFQTlcXHVERUFCLVxcdURFQkJdfFxcdUQ4NjlbXFx1REMwMC1cXHVERUQ2XFx1REYwMC1cXHVERkZGXXxcXHVEODZEW1xcdURDMDAtXFx1REYzNFxcdURGNDAtXFx1REZGRl18XFx1RDg2RVtcXHVEQzAwLVxcdURDMURdfFxcdUQ4N0VbXFx1REMwMC1cXHVERTFEXXxcXHVEQjQwW1xcdUREMDAtXFx1RERFRl0vXG59O2Z1bmN0aW9uIHcoZSx0KXtpZighZSl7dGhyb3cgbmV3IEVycm9yKFwiQVNTRVJUOiBcIit0KX19ZnVuY3Rpb24gXyhlKXtyZXR1cm4gZT49NDgmJmU8PTU3fWZ1bmN0aW9uIGsoZSl7cmV0dXJuXCIwMTIzNDU2Nzg5YWJjZGVmQUJDREVGXCIuaW5kZXhPZihlKT49MH1mdW5jdGlvbiBJKGUpe3JldHVyblwiMDEyMzQ1NjdcIi5pbmRleE9mKGUpPj0wfWZ1bmN0aW9uIFAoZSl7dmFyIHQ9ZSE9PVwiMFwiLHU9XCIwMTIzNDU2N1wiLmluZGV4T2YoZSk7aWYoZjxnJiZJKGFbZl0pKXt0PXRydWU7dT11KjgrXCIwMTIzNDU2N1wiLmluZGV4T2YoYVtmKytdKTtpZihcIjAxMjNcIi5pbmRleE9mKGUpPj0wJiZmPGcmJkkoYVtmXSkpe3U9dSo4K1wiMDEyMzQ1NjdcIi5pbmRleE9mKGFbZisrXSl9fXJldHVybntjb2RlOnUsb2N0YWw6dH19ZnVuY3Rpb24gTChlKXtyZXR1cm4gZT09PTMyfHxlPT09OXx8ZT09PTExfHxlPT09MTJ8fGU9PT0xNjB8fGU+PTU3NjAmJls1NzYwLDYxNTgsODE5Miw4MTkzLDgxOTQsODE5NSw4MTk2LDgxOTcsODE5OCw4MTk5LDgyMDAsODIwMSw4MjAyLDgyMzksODI4NywxMjI4OCw2NTI3OV0uaW5kZXhPZihlKT49MH1mdW5jdGlvbiBPKGUpe3JldHVybiBlPT09MTB8fGU9PT0xM3x8ZT09PTgyMzJ8fGU9PT04MjMzfWZ1bmN0aW9uIGooZSl7cmV0dXJuIGU8NjU1MzY/U3RyaW5nLmZyb21DaGFyQ29kZShlKTpTdHJpbmcuZnJvbUNoYXJDb2RlKDU1Mjk2KyhlLTY1NTM2Pj4xMCkpK1N0cmluZy5mcm9tQ2hhckNvZGUoNTYzMjArKGUtNjU1MzYmMTAyMykpfWZ1bmN0aW9uIE0oZSl7cmV0dXJuIGU9PT0zNnx8ZT09PTk1fHxlPj02NSYmZTw9OTB8fGU+PTk3JiZlPD0xMjJ8fGU9PT05Mnx8ZT49MTI4JiZzLk5vbkFzY2lpSWRlbnRpZmllclN0YXJ0LnRlc3QoaihlKSl9ZnVuY3Rpb24gUihlKXtyZXR1cm4gZT09PTM2fHxlPT09OTV8fGU+PTY1JiZlPD05MHx8ZT49OTcmJmU8PTEyMnx8ZT49NDgmJmU8PTU3fHxlPT09OTJ8fGU+PTEyOCYmcy5Ob25Bc2NpaUlkZW50aWZpZXJQYXJ0LnRlc3QoaihlKSl9ZnVuY3Rpb24gVChlKXtzd2l0Y2goZSl7Y2FzZVwiZW51bVwiOmNhc2VcImV4cG9ydFwiOmNhc2VcImltcG9ydFwiOmNhc2VcInN1cGVyXCI6cmV0dXJuIHRydWU7ZGVmYXVsdDpyZXR1cm4gZmFsc2V9fWZ1bmN0aW9uIE4oZSl7c3dpdGNoKGUpe2Nhc2VcImltcGxlbWVudHNcIjpjYXNlXCJpbnRlcmZhY2VcIjpjYXNlXCJwYWNrYWdlXCI6Y2FzZVwicHJpdmF0ZVwiOmNhc2VcInByb3RlY3RlZFwiOmNhc2VcInB1YmxpY1wiOmNhc2VcInN0YXRpY1wiOmNhc2VcInlpZWxkXCI6Y2FzZVwibGV0XCI6cmV0dXJuIHRydWU7ZGVmYXVsdDpyZXR1cm4gZmFsc2V9fWZ1bmN0aW9uIHEoZSl7cmV0dXJuIGU9PT1cImV2YWxcInx8ZT09PVwiYXJndW1lbnRzXCJ9ZnVuY3Rpb24gVShlKXtzd2l0Y2goZS5sZW5ndGgpe2Nhc2UgMjpyZXR1cm4gZT09PVwiaWZcInx8ZT09PVwiaW5cInx8ZT09PVwiZG9cIjtjYXNlIDM6cmV0dXJuIGU9PT1cInZhclwifHxlPT09XCJmb3JcInx8ZT09PVwibmV3XCJ8fGU9PT1cInRyeVwifHxlPT09XCJsZXRcIjtjYXNlIDQ6cmV0dXJuIGU9PT1cInRoaXNcInx8ZT09PVwiZWxzZVwifHxlPT09XCJjYXNlXCJ8fGU9PT1cInZvaWRcInx8ZT09PVwid2l0aFwifHxlPT09XCJlbnVtXCI7Y2FzZSA1OnJldHVybiBlPT09XCJ3aGlsZVwifHxlPT09XCJicmVha1wifHxlPT09XCJjYXRjaFwifHxlPT09XCJ0aHJvd1wifHxlPT09XCJjb25zdFwifHxlPT09XCJ5aWVsZFwifHxlPT09XCJjbGFzc1wifHxlPT09XCJzdXBlclwiO2Nhc2UgNjpyZXR1cm4gZT09PVwicmV0dXJuXCJ8fGU9PT1cInR5cGVvZlwifHxlPT09XCJkZWxldGVcInx8ZT09PVwic3dpdGNoXCJ8fGU9PT1cImV4cG9ydFwifHxlPT09XCJpbXBvcnRcIjtjYXNlIDc6cmV0dXJuIGU9PT1cImRlZmF1bHRcInx8ZT09PVwiZmluYWxseVwifHxlPT09XCJleHRlbmRzXCI7Y2FzZSA4OnJldHVybiBlPT09XCJmdW5jdGlvblwifHxlPT09XCJjb250aW51ZVwifHxlPT09XCJkZWJ1Z2dlclwiO2Nhc2UgMTA6cmV0dXJuIGU9PT1cImluc3RhbmNlb2ZcIjtkZWZhdWx0OnJldHVybiBmYWxzZX19ZnVuY3Rpb24geihlLHQsdSxuLHIpe3ZhciBpO3codHlwZW9mIHU9PT1cIm51bWJlclwiLFwiQ29tbWVudCBtdXN0IGhhdmUgdmFsaWQgcG9zaXRpb25cIik7Qi5sYXN0Q29tbWVudFN0YXJ0PXU7aT17dHlwZTplLHZhbHVlOnR9O2lmKHYucmFuZ2Upe2kucmFuZ2U9W3Usbl19aWYodi5sb2Mpe2kubG9jPXJ9di5jb21tZW50cy5wdXNoKGkpO2lmKHYuYXR0YWNoQ29tbWVudCl7di5sZWFkaW5nQ29tbWVudHMucHVzaChpKTt2LnRyYWlsaW5nQ29tbWVudHMucHVzaChpKX19ZnVuY3Rpb24gVyhlKXt2YXIgdCx1LG4scjt0PWYtZTt1PXtzdGFydDp7bGluZTpjLGNvbHVtbjpmLXAtZX19O3doaWxlKGY8Zyl7bj1hLmNoYXJDb2RlQXQoZik7KytmO2lmKE8obikpe0Q9dHJ1ZTtpZih2LmNvbW1lbnRzKXtyPWEuc2xpY2UodCtlLGYtMSk7dS5lbmQ9e2xpbmU6Yyxjb2x1bW46Zi1wLTF9O3ooXCJMaW5lXCIscix0LGYtMSx1KX1pZihuPT09MTMmJmEuY2hhckNvZGVBdChmKT09PTEwKXsrK2Z9KytjO3A9ZjtyZXR1cm59fWlmKHYuY29tbWVudHMpe3I9YS5zbGljZSh0K2UsZik7dS5lbmQ9e2xpbmU6Yyxjb2x1bW46Zi1wfTt6KFwiTGluZVwiLHIsdCxmLHUpfX1mdW5jdGlvbiBWKCl7dmFyIGUsdCx1LG47aWYodi5jb21tZW50cyl7ZT1mLTI7dD17c3RhcnQ6e2xpbmU6Yyxjb2x1bW46Zi1wLTJ9fX13aGlsZShmPGcpe3U9YS5jaGFyQ29kZUF0KGYpO2lmKE8odSkpe2lmKHU9PT0xMyYmYS5jaGFyQ29kZUF0KGYrMSk9PT0xMCl7KytmfUQ9dHJ1ZTsrK2M7KytmO3A9Zn1lbHNlIGlmKHU9PT00Mil7aWYoYS5jaGFyQ29kZUF0KGYrMSk9PT00Nyl7KytmOysrZjtpZih2LmNvbW1lbnRzKXtuPWEuc2xpY2UoZSsyLGYtMik7dC5lbmQ9e2xpbmU6Yyxjb2x1bW46Zi1wfTt6KFwiQmxvY2tcIixuLGUsZix0KX1yZXR1cm59KytmfWVsc2V7KytmfX1pZih2LmNvbW1lbnRzKXt0LmVuZD17bGluZTpjLGNvbHVtbjpmLXB9O249YS5zbGljZShlKzIsZik7eihcIkJsb2NrXCIsbixlLGYsdCl9X2UoKX1mdW5jdGlvbiBZKCl7dmFyIGUsdDtEPWZhbHNlO3Q9Zj09PTA7d2hpbGUoZjxnKXtlPWEuY2hhckNvZGVBdChmKTtpZihMKGUpKXsrK2Z9ZWxzZSBpZihPKGUpKXtEPXRydWU7KytmO2lmKGU9PT0xMyYmYS5jaGFyQ29kZUF0KGYpPT09MTApeysrZn0rK2M7cD1mO3Q9dHJ1ZX1lbHNlIGlmKGU9PT00Nyl7ZT1hLmNoYXJDb2RlQXQoZisxKTtpZihlPT09NDcpeysrZjsrK2Y7VygyKTt0PXRydWV9ZWxzZSBpZihlPT09NDIpeysrZjsrK2Y7VigpfWVsc2V7YnJlYWt9fWVsc2UgaWYodCYmZT09PTQ1KXtpZihhLmNoYXJDb2RlQXQoZisxKT09PTQ1JiZhLmNoYXJDb2RlQXQoZisyKT09PTYyKXtmKz0zO1coMyl9ZWxzZXticmVha319ZWxzZSBpZihlPT09NjApe2lmKGEuc2xpY2UoZisxLGYrNCk9PT1cIiEtLVwiKXsrK2Y7KytmOysrZjsrK2Y7Vyg0KX1lbHNle2JyZWFrfX1lbHNle2JyZWFrfX19ZnVuY3Rpb24gRyhlKXt2YXIgdCx1LG4scj0wO3U9ZT09PVwidVwiPzQ6Mjtmb3IodD0wO3Q8dTsrK3Qpe2lmKGY8ZyYmayhhW2ZdKSl7bj1hW2YrK107cj1yKjE2K1wiMDEyMzQ1Njc4OWFiY2RlZlwiLmluZGV4T2Yobi50b0xvd2VyQ2FzZSgpKX1lbHNle3JldHVyblwiXCJ9fXJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKHIpfWZ1bmN0aW9uIEsoKXt2YXIgZSx0O2U9YVtmXTt0PTA7aWYoZT09PVwifVwiKXt3ZSgpfXdoaWxlKGY8Zyl7ZT1hW2YrK107aWYoIWsoZSkpe2JyZWFrfXQ9dCoxNitcIjAxMjM0NTY3ODlhYmNkZWZcIi5pbmRleE9mKGUudG9Mb3dlckNhc2UoKSl9aWYodD4xMTE0MTExfHxlIT09XCJ9XCIpe3dlKCl9cmV0dXJuIGoodCl9ZnVuY3Rpb24gJChlKXt2YXIgdCx1LG47dD1hLmNoYXJDb2RlQXQoZSk7aWYodD49NTUyOTYmJnQ8PTU2MzE5KXtuPWEuY2hhckNvZGVBdChlKzEpO2lmKG4+PTU2MzIwJiZuPD01NzM0Myl7dT10O3Q9KHUtNTUyOTYpKjEwMjQrbi01NjMyMCs2NTUzNn19cmV0dXJuIHR9ZnVuY3Rpb24gSCgpe3ZhciBlLHQsdTtlPSQoZik7dT1qKGUpO2YrPXUubGVuZ3RoO2lmKGU9PT05Mil7aWYoYS5jaGFyQ29kZUF0KGYpIT09MTE3KXt3ZSgpfSsrZjtpZihhW2ZdPT09XCJ7XCIpeysrZjt0PUsoKX1lbHNle3Q9RyhcInVcIik7ZT10LmNoYXJDb2RlQXQoMCk7aWYoIXR8fHQ9PT1cIlxcXFxcInx8IU0oZSkpe3dlKCl9fXU9dH13aGlsZShmPGcpe2U9JChmKTtpZighUihlKSl7YnJlYWt9dD1qKGUpO3UrPXQ7Zis9dC5sZW5ndGg7aWYoZT09PTkyKXt1PXUuc3Vic3RyKDAsdS5sZW5ndGgtMSk7aWYoYS5jaGFyQ29kZUF0KGYpIT09MTE3KXt3ZSgpfSsrZjtpZihhW2ZdPT09XCJ7XCIpeysrZjt0PUsoKX1lbHNle3Q9RyhcInVcIik7ZT10LmNoYXJDb2RlQXQoMCk7aWYoIXR8fHQ9PT1cIlxcXFxcInx8IVIoZSkpe3dlKCl9fXUrPXR9fXJldHVybiB1fWZ1bmN0aW9uIEooKXt2YXIgZSx0O2U9ZisrO3doaWxlKGY8Zyl7dD1hLmNoYXJDb2RlQXQoZik7aWYodD09PTkyKXtmPWU7cmV0dXJuIEgoKX1lbHNlIGlmKHQ+PTU1Mjk2JiZ0PDU3MzQzKXtmPWU7cmV0dXJuIEgoKX1pZihSKHQpKXsrK2Z9ZWxzZXticmVha319cmV0dXJuIGEuc2xpY2UoZSxmKX1mdW5jdGlvbiBYKCl7dmFyIGUsdSxuO2U9Zjt1PWEuY2hhckNvZGVBdChmKT09PTkyP0goKTpKKCk7aWYodS5sZW5ndGg9PT0xKXtuPXQuSWRlbnRpZmllcn1lbHNlIGlmKFUodSkpe249dC5LZXl3b3JkfWVsc2UgaWYodT09PVwibnVsbFwiKXtuPXQuTnVsbExpdGVyYWx9ZWxzZSBpZih1PT09XCJ0cnVlXCJ8fHU9PT1cImZhbHNlXCIpe249dC5Cb29sZWFuTGl0ZXJhbH1lbHNle249dC5JZGVudGlmaWVyfXJldHVybnt0eXBlOm4sdmFsdWU6dSxsaW5lTnVtYmVyOmMsbGluZVN0YXJ0OnAsc3RhcnQ6ZSxlbmQ6Zn19ZnVuY3Rpb24gWigpe3ZhciBlLHU7ZT17dHlwZTp0LlB1bmN0dWF0b3IsdmFsdWU6XCJcIixsaW5lTnVtYmVyOmMsbGluZVN0YXJ0OnAsc3RhcnQ6ZixlbmQ6Zn07dT1hW2ZdO3N3aXRjaCh1KXtjYXNlXCIoXCI6aWYodi50b2tlbml6ZSl7di5vcGVuUGFyZW5Ub2tlbj12LnRva2Vucy5sZW5ndGh9KytmO2JyZWFrO2Nhc2VcIntcIjppZih2LnRva2VuaXplKXt2Lm9wZW5DdXJseVRva2VuPXYudG9rZW5zLmxlbmd0aH1CLmN1cmx5U3RhY2sucHVzaChcIntcIik7KytmO2JyZWFrO2Nhc2VcIi5cIjorK2Y7aWYoYVtmXT09PVwiLlwiJiZhW2YrMV09PT1cIi5cIil7Zis9Mjt1PVwiLi4uXCJ9YnJlYWs7Y2FzZVwifVwiOisrZjtCLmN1cmx5U3RhY2sucG9wKCk7YnJlYWs7Y2FzZVwiKVwiOmNhc2VcIjtcIjpjYXNlXCIsXCI6Y2FzZVwiW1wiOmNhc2VcIl1cIjpjYXNlXCI6XCI6Y2FzZVwiP1wiOmNhc2VcIn5cIjorK2Y7YnJlYWs7ZGVmYXVsdDp1PWEuc3Vic3RyKGYsNCk7aWYodT09PVwiPj4+PVwiKXtmKz00fWVsc2V7dT11LnN1YnN0cigwLDMpO2lmKHU9PT1cIj09PVwifHx1PT09XCIhPT1cInx8dT09PVwiPj4+XCJ8fHU9PT1cIjw8PVwifHx1PT09XCI+Pj1cIil7Zis9M31lbHNle3U9dS5zdWJzdHIoMCwyKTtpZih1PT09XCImJlwifHx1PT09XCJ8fFwifHx1PT09XCI9PVwifHx1PT09XCIhPVwifHx1PT09XCIrPVwifHx1PT09XCItPVwifHx1PT09XCIqPVwifHx1PT09XCIvPVwifHx1PT09XCIrK1wifHx1PT09XCItLVwifHx1PT09XCI8PFwifHx1PT09XCI+PlwifHx1PT09XCImPVwifHx1PT09XCJ8PVwifHx1PT09XCJePVwifHx1PT09XCIlPVwifHx1PT09XCI8PVwifHx1PT09XCI+PVwifHx1PT09XCI9PlwiKXtmKz0yfWVsc2V7dT1hW2ZdO2lmKFwiPD49ISstKiUmfF4vXCIuaW5kZXhPZih1KT49MCl7KytmfX19fX1pZihmPT09ZS5zdGFydCl7d2UoKX1lLmVuZD1mO2UudmFsdWU9dTtyZXR1cm4gZX1mdW5jdGlvbiBRKGUpe3ZhciB1PVwiXCI7d2hpbGUoZjxnKXtpZighayhhW2ZdKSl7YnJlYWt9dSs9YVtmKytdfWlmKHUubGVuZ3RoPT09MCl7d2UoKX1pZihNKGEuY2hhckNvZGVBdChmKSkpe3dlKCl9cmV0dXJue3R5cGU6dC5OdW1lcmljTGl0ZXJhbCx2YWx1ZTpwYXJzZUludChcIjB4XCIrdSwxNiksbGluZU51bWJlcjpjLGxpbmVTdGFydDpwLHN0YXJ0OmUsZW5kOmZ9fWZ1bmN0aW9uIGVlKGUpe3ZhciB1LG47bj1cIlwiO3doaWxlKGY8Zyl7dT1hW2ZdO2lmKHUhPT1cIjBcIiYmdSE9PVwiMVwiKXticmVha31uKz1hW2YrK119aWYobi5sZW5ndGg9PT0wKXt3ZSgpfWlmKGY8Zyl7dT1hLmNoYXJDb2RlQXQoZik7aWYoTSh1KXx8Xyh1KSl7d2UoKX19cmV0dXJue3R5cGU6dC5OdW1lcmljTGl0ZXJhbCx2YWx1ZTpwYXJzZUludChuLDIpLGxpbmVOdW1iZXI6YyxsaW5lU3RhcnQ6cCxzdGFydDplLGVuZDpmfX1mdW5jdGlvbiB0ZShlLHUpe3ZhciBuLHI7aWYoSShlKSl7cj10cnVlO249XCIwXCIrYVtmKytdfWVsc2V7cj1mYWxzZTsrK2Y7bj1cIlwifXdoaWxlKGY8Zyl7aWYoIUkoYVtmXSkpe2JyZWFrfW4rPWFbZisrXX1pZighciYmbi5sZW5ndGg9PT0wKXt3ZSgpfWlmKE0oYS5jaGFyQ29kZUF0KGYpKXx8XyhhLmNoYXJDb2RlQXQoZikpKXt3ZSgpfXJldHVybnt0eXBlOnQuTnVtZXJpY0xpdGVyYWwsdmFsdWU6cGFyc2VJbnQobiw4KSxvY3RhbDpyLGxpbmVOdW1iZXI6YyxsaW5lU3RhcnQ6cCxzdGFydDp1LGVuZDpmfX1mdW5jdGlvbiB1ZSgpe3ZhciBlLHQ7Zm9yKGU9ZisxO2U8ZzsrK2Upe3Q9YVtlXTtpZih0PT09XCI4XCJ8fHQ9PT1cIjlcIil7cmV0dXJuIGZhbHNlfWlmKCFJKHQpKXtyZXR1cm4gdHJ1ZX19cmV0dXJuIHRydWV9ZnVuY3Rpb24gbmUoKXt2YXIgZSx1LG47bj1hW2ZdO3coXyhuLmNoYXJDb2RlQXQoMCkpfHxuPT09XCIuXCIsXCJOdW1lcmljIGxpdGVyYWwgbXVzdCBzdGFydCB3aXRoIGEgZGVjaW1hbCBkaWdpdCBvciBhIGRlY2ltYWwgcG9pbnRcIik7dT1mO2U9XCJcIjtpZihuIT09XCIuXCIpe2U9YVtmKytdO249YVtmXTtpZihlPT09XCIwXCIpe2lmKG49PT1cInhcInx8bj09PVwiWFwiKXsrK2Y7cmV0dXJuIFEodSl9aWYobj09PVwiYlwifHxuPT09XCJCXCIpeysrZjtyZXR1cm4gZWUodSl9aWYobj09PVwib1wifHxuPT09XCJPXCIpe3JldHVybiB0ZShuLHUpfWlmKEkobikpe2lmKHVlKCkpe3JldHVybiB0ZShuLHUpfX19d2hpbGUoXyhhLmNoYXJDb2RlQXQoZikpKXtlKz1hW2YrK119bj1hW2ZdfWlmKG49PT1cIi5cIil7ZSs9YVtmKytdO3doaWxlKF8oYS5jaGFyQ29kZUF0KGYpKSl7ZSs9YVtmKytdfW49YVtmXX1pZihuPT09XCJlXCJ8fG49PT1cIkVcIil7ZSs9YVtmKytdO249YVtmXTtpZihuPT09XCIrXCJ8fG49PT1cIi1cIil7ZSs9YVtmKytdfWlmKF8oYS5jaGFyQ29kZUF0KGYpKSl7d2hpbGUoXyhhLmNoYXJDb2RlQXQoZikpKXtlKz1hW2YrK119fWVsc2V7d2UoKX19aWYoTShhLmNoYXJDb2RlQXQoZikpKXt3ZSgpfXJldHVybnt0eXBlOnQuTnVtZXJpY0xpdGVyYWwsdmFsdWU6cGFyc2VGbG9hdChlKSxsaW5lTnVtYmVyOmMsbGluZVN0YXJ0OnAsc3RhcnQ6dSxlbmQ6Zn19ZnVuY3Rpb24gcmUoKXt2YXIgZT1cIlwiLHUsbixyLGksbyxzPWZhbHNlO3U9YVtmXTt3KHU9PT1cIidcInx8dT09PSdcIicsXCJTdHJpbmcgbGl0ZXJhbCBtdXN0IHN0YXJ0cyB3aXRoIGEgcXVvdGVcIik7bj1mOysrZjt3aGlsZShmPGcpe3I9YVtmKytdO2lmKHI9PT11KXt1PVwiXCI7YnJlYWt9ZWxzZSBpZihyPT09XCJcXFxcXCIpe3I9YVtmKytdO2lmKCFyfHwhTyhyLmNoYXJDb2RlQXQoMCkpKXtzd2l0Y2gocil7Y2FzZVwidVwiOmNhc2VcInhcIjppZihhW2ZdPT09XCJ7XCIpeysrZjtlKz1LKCl9ZWxzZXtpPUcocik7aWYoIWkpe3Rocm93IHdlKCl9ZSs9aX1icmVhaztjYXNlXCJuXCI6ZSs9XCJcXG5cIjticmVhaztjYXNlXCJyXCI6ZSs9XCJcXHJcIjticmVhaztjYXNlXCJ0XCI6ZSs9XCJcdFwiO2JyZWFrO2Nhc2VcImJcIjplKz1cIlxcYlwiO2JyZWFrO2Nhc2VcImZcIjplKz1cIlxcZlwiO2JyZWFrO2Nhc2VcInZcIjplKz1cIlx1MDAwYlwiO2JyZWFrO2Nhc2VcIjhcIjpjYXNlXCI5XCI6ZSs9cjtfZSgpO2JyZWFrO2RlZmF1bHQ6aWYoSShyKSl7bz1QKHIpO3M9by5vY3RhbHx8cztlKz1TdHJpbmcuZnJvbUNoYXJDb2RlKG8uY29kZSl9ZWxzZXtlKz1yfWJyZWFrfX1lbHNleysrYztpZihyPT09XCJcXHJcIiYmYVtmXT09PVwiXFxuXCIpeysrZn1wPWZ9fWVsc2UgaWYoTyhyLmNoYXJDb2RlQXQoMCkpKXticmVha31lbHNle2UrPXJ9fWlmKHUhPT1cIlwiKXt3ZSgpfXJldHVybnt0eXBlOnQuU3RyaW5nTGl0ZXJhbCx2YWx1ZTplLG9jdGFsOnMsbGluZU51bWJlcjpDLGxpbmVTdGFydDpFLHN0YXJ0Om4sZW5kOmZ9fWZ1bmN0aW9uIGllKCl7dmFyIGU9XCJcIix1LG4scixpLHMsbCxELGg7aT1mYWxzZTtsPWZhbHNlO249ZjtzPWFbZl09PT1cImBcIjtyPTI7KytmO3doaWxlKGY8Zyl7dT1hW2YrK107aWYodT09PVwiYFwiKXtyPTE7bD10cnVlO2k9dHJ1ZTticmVha31lbHNlIGlmKHU9PT1cIiRcIil7aWYoYVtmXT09PVwie1wiKXtCLmN1cmx5U3RhY2sucHVzaChcIiR7XCIpOysrZjtpPXRydWU7YnJlYWt9ZSs9dX1lbHNlIGlmKHU9PT1cIlxcXFxcIil7dT1hW2YrK107aWYoIU8odS5jaGFyQ29kZUF0KDApKSl7c3dpdGNoKHUpe2Nhc2VcIm5cIjplKz1cIlxcblwiO2JyZWFrO2Nhc2VcInJcIjplKz1cIlxcclwiO2JyZWFrO2Nhc2VcInRcIjplKz1cIlx0XCI7YnJlYWs7Y2FzZVwidVwiOmNhc2VcInhcIjppZihhW2ZdPT09XCJ7XCIpeysrZjtlKz1LKCl9ZWxzZXtEPWY7aD1HKHUpO2lmKGgpe2UrPWh9ZWxzZXtmPUQ7ZSs9dX19YnJlYWs7Y2FzZVwiYlwiOmUrPVwiXFxiXCI7YnJlYWs7Y2FzZVwiZlwiOmUrPVwiXFxmXCI7YnJlYWs7Y2FzZVwidlwiOmUrPVwiXHUwMDBiXCI7YnJlYWs7ZGVmYXVsdDppZih1PT09XCIwXCIpe2lmKF8oYS5jaGFyQ29kZUF0KGYpKSl7YmUoby5UZW1wbGF0ZU9jdGFsTGl0ZXJhbCl9ZSs9XCJcXHgwMFwifWVsc2UgaWYoSSh1KSl7YmUoby5UZW1wbGF0ZU9jdGFsTGl0ZXJhbCl9ZWxzZXtlKz11fWJyZWFrfX1lbHNleysrYztpZih1PT09XCJcXHJcIiYmYVtmXT09PVwiXFxuXCIpeysrZn1wPWZ9fWVsc2UgaWYoTyh1LmNoYXJDb2RlQXQoMCkpKXsrK2M7aWYodT09PVwiXFxyXCImJmFbZl09PT1cIlxcblwiKXsrK2Z9cD1mO2UrPVwiXFxuXCJ9ZWxzZXtlKz11fX1pZighaSl7d2UoKX1pZighcyl7Qi5jdXJseVN0YWNrLnBvcCgpfXJldHVybnt0eXBlOnQuVGVtcGxhdGUsdmFsdWU6e2Nvb2tlZDplLHJhdzphLnNsaWNlKG4rMSxmLXIpfSxoZWFkOnMsdGFpbDpsLGxpbmVOdW1iZXI6YyxsaW5lU3RhcnQ6cCxzdGFydDpuLGVuZDpmfX1mdW5jdGlvbiBvZShlLHQpe3ZhciB1PVwi77+/XCIsbj1lO2lmKHQuaW5kZXhPZihcInVcIik+PTApe249bi5yZXBsYWNlKC9cXFxcdVxceyhbMC05YS1mQS1GXSspXFx9fFxcXFx1KFthLWZBLUYwLTldezR9KS9nLGZ1bmN0aW9uKGUsdCxuKXt2YXIgcj1wYXJzZUludCh0fHxuLDE2KTtpZihyPjExMTQxMTEpe3dlKG51bGwsby5JbnZhbGlkUmVnRXhwKX1pZihyPD02NTUzNSl7cmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUocil9cmV0dXJuIHV9KS5yZXBsYWNlKC9bXFx1RDgwMC1cXHVEQkZGXVtcXHVEQzAwLVxcdURGRkZdL2csdSl9dHJ5e1JlZ0V4cChuKX1jYXRjaChyKXt3ZShudWxsLG8uSW52YWxpZFJlZ0V4cCl9dHJ5e3JldHVybiBuZXcgUmVnRXhwKGUsdCl9Y2F0Y2goaSl7cmV0dXJuIG51bGx9fWZ1bmN0aW9uIHNlKCl7dmFyIGUsdCx1LG4scjtlPWFbZl07dyhlPT09XCIvXCIsXCJSZWd1bGFyIGV4cHJlc3Npb24gbGl0ZXJhbCBtdXN0IHN0YXJ0IHdpdGggYSBzbGFzaFwiKTt0PWFbZisrXTt1PWZhbHNlO249ZmFsc2U7d2hpbGUoZjxnKXtlPWFbZisrXTt0Kz1lO2lmKGU9PT1cIlxcXFxcIil7ZT1hW2YrK107aWYoTyhlLmNoYXJDb2RlQXQoMCkpKXt3ZShudWxsLG8uVW50ZXJtaW5hdGVkUmVnRXhwKX10Kz1lfWVsc2UgaWYoTyhlLmNoYXJDb2RlQXQoMCkpKXt3ZShudWxsLG8uVW50ZXJtaW5hdGVkUmVnRXhwKX1lbHNlIGlmKHUpe2lmKGU9PT1cIl1cIil7dT1mYWxzZX19ZWxzZXtpZihlPT09XCIvXCIpe249dHJ1ZTticmVha31lbHNlIGlmKGU9PT1cIltcIil7dT10cnVlfX19aWYoIW4pe3dlKG51bGwsby5VbnRlcm1pbmF0ZWRSZWdFeHApfXI9dC5zdWJzdHIoMSx0Lmxlbmd0aC0yKTtyZXR1cm57dmFsdWU6cixsaXRlcmFsOnR9fWZ1bmN0aW9uIGFlKCl7dmFyIGUsdCx1LG47dD1cIlwiO3U9XCJcIjt3aGlsZShmPGcpe2U9YVtmXTtpZighUihlLmNoYXJDb2RlQXQoMCkpKXticmVha30rK2Y7aWYoZT09PVwiXFxcXFwiJiZmPGcpe2U9YVtmXTtpZihlPT09XCJ1XCIpeysrZjtuPWY7ZT1HKFwidVwiKTtpZihlKXt1Kz1lO2Zvcih0Kz1cIlxcXFx1XCI7bjxmOysrbil7dCs9YVtuXX19ZWxzZXtmPW47dSs9XCJ1XCI7dCs9XCJcXFxcdVwifV9lKCl9ZWxzZXt0Kz1cIlxcXFxcIjtfZSgpfX1lbHNle3UrPWU7dCs9ZX19cmV0dXJue3ZhbHVlOnUsbGl0ZXJhbDp0fX1mdW5jdGlvbiBsZSgpe3ZhciBlLHUsbixyO0Y9dHJ1ZTt5PW51bGw7WSgpO2U9Zjt1PXNlKCk7bj1hZSgpO3I9b2UodS52YWx1ZSxuLnZhbHVlKTtGPWZhbHNlO2lmKHYudG9rZW5pemUpe3JldHVybnt0eXBlOnQuUmVndWxhckV4cHJlc3Npb24sdmFsdWU6cixyZWdleDp7cGF0dGVybjp1LnZhbHVlLGZsYWdzOm4udmFsdWV9LGxpbmVOdW1iZXI6YyxsaW5lU3RhcnQ6cCxzdGFydDplLGVuZDpmfX1yZXR1cm57bGl0ZXJhbDp1LmxpdGVyYWwrbi5saXRlcmFsLHZhbHVlOnIscmVnZXg6e3BhdHRlcm46dS52YWx1ZSxmbGFnczpuLnZhbHVlfSxzdGFydDplLGVuZDpmfX1mdW5jdGlvbiBmZSgpe3ZhciBlLHQsdSxuO1koKTtlPWY7dD17c3RhcnQ6e2xpbmU6Yyxjb2x1bW46Zi1wfX07dT1sZSgpO3QuZW5kPXtsaW5lOmMsY29sdW1uOmYtcH07aWYoIXYudG9rZW5pemUpe2lmKHYudG9rZW5zLmxlbmd0aD4wKXtuPXYudG9rZW5zW3YudG9rZW5zLmxlbmd0aC0xXTtpZihuLnJhbmdlWzBdPT09ZSYmbi50eXBlPT09XCJQdW5jdHVhdG9yXCIpe2lmKG4udmFsdWU9PT1cIi9cInx8bi52YWx1ZT09PVwiLz1cIil7di50b2tlbnMucG9wKCl9fX12LnRva2Vucy5wdXNoKHt0eXBlOlwiUmVndWxhckV4cHJlc3Npb25cIix2YWx1ZTp1LmxpdGVyYWwscmVnZXg6dS5yZWdleCxyYW5nZTpbZSxmXSxsb2M6dH0pfXJldHVybiB1fWZ1bmN0aW9uIGNlKGUpe3JldHVybiBlLnR5cGU9PT10LklkZW50aWZpZXJ8fGUudHlwZT09PXQuS2V5d29yZHx8ZS50eXBlPT09dC5Cb29sZWFuTGl0ZXJhbHx8ZS50eXBlPT09dC5OdWxsTGl0ZXJhbH1mdW5jdGlvbiBwZSgpe3ZhciBlLHQ7ZT12LnRva2Vuc1t2LnRva2Vucy5sZW5ndGgtMV07aWYoIWUpe3JldHVybiBmZSgpfWlmKGUudHlwZT09PVwiUHVuY3R1YXRvclwiKXtpZihlLnZhbHVlPT09XCJdXCIpe3JldHVybiBaKCl9aWYoZS52YWx1ZT09PVwiKVwiKXt0PXYudG9rZW5zW3Yub3BlblBhcmVuVG9rZW4tMV07aWYodCYmdC50eXBlPT09XCJLZXl3b3JkXCImJih0LnZhbHVlPT09XCJpZlwifHx0LnZhbHVlPT09XCJ3aGlsZVwifHx0LnZhbHVlPT09XCJmb3JcInx8dC52YWx1ZT09PVwid2l0aFwiKSl7cmV0dXJuIGZlKCl9cmV0dXJuIFooKX1pZihlLnZhbHVlPT09XCJ9XCIpe2lmKHYudG9rZW5zW3Yub3BlbkN1cmx5VG9rZW4tM10mJnYudG9rZW5zW3Yub3BlbkN1cmx5VG9rZW4tM10udHlwZT09PVwiS2V5d29yZFwiKXt0PXYudG9rZW5zW3Yub3BlbkN1cmx5VG9rZW4tNF07aWYoIXQpe3JldHVybiBaKCl9fWVsc2UgaWYodi50b2tlbnNbdi5vcGVuQ3VybHlUb2tlbi00XSYmdi50b2tlbnNbdi5vcGVuQ3VybHlUb2tlbi00XS50eXBlPT09XCJLZXl3b3JkXCIpe3Q9di50b2tlbnNbdi5vcGVuQ3VybHlUb2tlbi01XTtpZighdCl7cmV0dXJuIGZlKCl9fWVsc2V7cmV0dXJuIFooKX1pZihuLmluZGV4T2YodC52YWx1ZSk+PTApe3JldHVybiBaKCl9cmV0dXJuIGZlKCl9cmV0dXJuIGZlKCl9aWYoZS50eXBlPT09XCJLZXl3b3JkXCImJmUudmFsdWUhPT1cInRoaXNcIil7cmV0dXJuIGZlKCl9cmV0dXJuIFooKX1mdW5jdGlvbiBEZSgpe3ZhciBlLHU7aWYoZj49Zyl7cmV0dXJue3R5cGU6dC5FT0YsbGluZU51bWJlcjpjLGxpbmVTdGFydDpwLHN0YXJ0OmYsZW5kOmZ9fWU9YS5jaGFyQ29kZUF0KGYpO2lmKE0oZSkpe3U9WCgpO2lmKGwmJk4odS52YWx1ZSkpe3UudHlwZT10LktleXdvcmR9cmV0dXJuIHV9aWYoZT09PTQwfHxlPT09NDF8fGU9PT01OSl7cmV0dXJuIFooKX1pZihlPT09Mzl8fGU9PT0zNCl7cmV0dXJuIHJlKCl9aWYoZT09PTQ2KXtpZihfKGEuY2hhckNvZGVBdChmKzEpKSl7cmV0dXJuIG5lKCl9cmV0dXJuIFooKX1pZihfKGUpKXtyZXR1cm4gbmUoKX1pZih2LnRva2VuaXplJiZlPT09NDcpe3JldHVybiBwZSgpfWlmKGU9PT05Nnx8ZT09PTEyNSYmQi5jdXJseVN0YWNrW0IuY3VybHlTdGFjay5sZW5ndGgtMV09PT1cIiR7XCIpe3JldHVybiBpZSgpfWlmKGU+PTU1Mjk2JiZlPDU3MzQzKXtlPSQoZik7aWYoTShlKSl7cmV0dXJuIFgoKX19cmV0dXJuIFooKX1mdW5jdGlvbiBoZSgpe3ZhciBlLG4scixpO2U9e3N0YXJ0OntsaW5lOmMsY29sdW1uOmYtcH19O249RGUoKTtlLmVuZD17bGluZTpjLGNvbHVtbjpmLXB9O2lmKG4udHlwZSE9PXQuRU9GKXtyPWEuc2xpY2Uobi5zdGFydCxuLmVuZCk7aT17dHlwZTp1W24udHlwZV0sdmFsdWU6cixyYW5nZTpbbi5zdGFydCxuLmVuZF0sbG9jOmV9O2lmKG4ucmVnZXgpe2kucmVnZXg9e3BhdHRlcm46bi5yZWdleC5wYXR0ZXJuLGZsYWdzOm4ucmVnZXguZmxhZ3N9fXYudG9rZW5zLnB1c2goaSl9cmV0dXJuIG59ZnVuY3Rpb24gbWUoKXt2YXIgZTtGPXRydWU7aD1mO209YztkPXA7WSgpO2U9eTtBPWY7Qz1jO0U9cDt5PXR5cGVvZiB2LnRva2VucyE9PVwidW5kZWZpbmVkXCI/aGUoKTpEZSgpO0Y9ZmFsc2U7cmV0dXJuIGV9ZnVuY3Rpb24gZGUoKXtGPXRydWU7WSgpO2g9ZjttPWM7ZD1wO0E9ZjtDPWM7RT1wO3k9dHlwZW9mIHYudG9rZW5zIT09XCJ1bmRlZmluZWRcIj9oZSgpOkRlKCk7Rj1mYWxzZX1mdW5jdGlvbiBBZSgpe3RoaXMubGluZT1DO3RoaXMuY29sdW1uPUEtRX1mdW5jdGlvbiBDZSgpe3RoaXMuc3RhcnQ9bmV3IEFlO3RoaXMuZW5kPW51bGx9ZnVuY3Rpb24gRWUoZSl7dGhpcy5zdGFydD17bGluZTplLmxpbmVOdW1iZXIsY29sdW1uOmUuc3RhcnQtZS5saW5lU3RhcnR9O3RoaXMuZW5kPW51bGx9ZnVuY3Rpb24gRmUoKXtpZih2LnJhbmdlKXt0aGlzLnJhbmdlPVtBLDBdfWlmKHYubG9jKXt0aGlzLmxvYz1uZXcgQ2V9fWZ1bmN0aW9uIGdlKGUpe2lmKHYucmFuZ2Upe3RoaXMucmFuZ2U9W2Uuc3RhcnQsMF19aWYodi5sb2Mpe3RoaXMubG9jPW5ldyBFZShlKX19Z2UucHJvdG90eXBlPUZlLnByb3RvdHlwZT17cHJvY2Vzc0NvbW1lbnQ6ZnVuY3Rpb24oKXt2YXIgZSx0LHUsbj12LmJvdHRvbVJpZ2h0U3RhY2ssaSxvLHM9bltuLmxlbmd0aC0xXTtpZih0aGlzLnR5cGU9PT1yLlByb2dyYW0pe2lmKHRoaXMuYm9keS5sZW5ndGg+MCl7cmV0dXJufX1pZih2LnRyYWlsaW5nQ29tbWVudHMubGVuZ3RoPjApe3U9W107Zm9yKGk9di50cmFpbGluZ0NvbW1lbnRzLmxlbmd0aC0xO2k+PTA7LS1pKXtvPXYudHJhaWxpbmdDb21tZW50c1tpXTtpZihvLnJhbmdlWzBdPj10aGlzLnJhbmdlWzFdKXt1LnVuc2hpZnQobyk7di50cmFpbGluZ0NvbW1lbnRzLnNwbGljZShpLDEpfX12LnRyYWlsaW5nQ29tbWVudHM9W119ZWxzZXtpZihzJiZzLnRyYWlsaW5nQ29tbWVudHMmJnMudHJhaWxpbmdDb21tZW50c1swXS5yYW5nZVswXT49dGhpcy5yYW5nZVsxXSl7dT1zLnRyYWlsaW5nQ29tbWVudHM7ZGVsZXRlIHMudHJhaWxpbmdDb21tZW50c319d2hpbGUocyYmcy5yYW5nZVswXT49dGhpcy5yYW5nZVswXSl7ZT1uLnBvcCgpO3M9bltuLmxlbmd0aC0xXX1pZihlKXtpZihlLmxlYWRpbmdDb21tZW50cyl7dD1bXTtmb3IoaT1lLmxlYWRpbmdDb21tZW50cy5sZW5ndGgtMTtpPj0wOy0taSl7bz1lLmxlYWRpbmdDb21tZW50c1tpXTtpZihvLnJhbmdlWzFdPD10aGlzLnJhbmdlWzBdKXt0LnVuc2hpZnQobyk7ZS5sZWFkaW5nQ29tbWVudHMuc3BsaWNlKGksMSl9fWlmKCFlLmxlYWRpbmdDb21tZW50cy5sZW5ndGgpe2UubGVhZGluZ0NvbW1lbnRzPXVuZGVmaW5lZH19fWVsc2UgaWYodi5sZWFkaW5nQ29tbWVudHMubGVuZ3RoPjApe3Q9W107Zm9yKGk9di5sZWFkaW5nQ29tbWVudHMubGVuZ3RoLTE7aT49MDstLWkpe289di5sZWFkaW5nQ29tbWVudHNbaV07aWYoby5yYW5nZVsxXTw9dGhpcy5yYW5nZVswXSl7dC51bnNoaWZ0KG8pO3YubGVhZGluZ0NvbW1lbnRzLnNwbGljZShpLDEpfX19aWYodCYmdC5sZW5ndGg+MCl7dGhpcy5sZWFkaW5nQ29tbWVudHM9dH1pZih1JiZ1Lmxlbmd0aD4wKXt0aGlzLnRyYWlsaW5nQ29tbWVudHM9dX1uLnB1c2godGhpcyl9LGZpbmlzaDpmdW5jdGlvbigpe2lmKHYucmFuZ2Upe3RoaXMucmFuZ2VbMV09aH1pZih2LmxvYyl7dGhpcy5sb2MuZW5kPXtsaW5lOm0sY29sdW1uOmgtZH07aWYodi5zb3VyY2Upe3RoaXMubG9jLnNvdXJjZT12LnNvdXJjZX19aWYodi5hdHRhY2hDb21tZW50KXt0aGlzLnByb2Nlc3NDb21tZW50KCl9fSxmaW5pc2hBcnJheUV4cHJlc3Npb246ZnVuY3Rpb24oZSl7dGhpcy50eXBlPXIuQXJyYXlFeHByZXNzaW9uO3RoaXMuZWxlbWVudHM9ZTt0aGlzLmZpbmlzaCgpO3JldHVybiB0aGlzfSxmaW5pc2hBcnJheVBhdHRlcm46ZnVuY3Rpb24oZSl7dGhpcy50eXBlPXIuQXJyYXlQYXR0ZXJuO3RoaXMuZWxlbWVudHM9ZTt0aGlzLmZpbmlzaCgpO3JldHVybiB0aGlzfSxmaW5pc2hBcnJvd0Z1bmN0aW9uRXhwcmVzc2lvbjpmdW5jdGlvbihlLHQsdSxuKXt0aGlzLnR5cGU9ci5BcnJvd0Z1bmN0aW9uRXhwcmVzc2lvbjt0aGlzLmlkPW51bGw7dGhpcy5wYXJhbXM9ZTt0aGlzLmRlZmF1bHRzPXQ7dGhpcy5ib2R5PXU7dGhpcy5nZW5lcmF0b3I9ZmFsc2U7dGhpcy5leHByZXNzaW9uPW47dGhpcy5maW5pc2goKTtyZXR1cm4gdGhpc30sZmluaXNoQXNzaWdubWVudEV4cHJlc3Npb246ZnVuY3Rpb24oZSx0LHUpe3RoaXMudHlwZT1yLkFzc2lnbm1lbnRFeHByZXNzaW9uO3RoaXMub3BlcmF0b3I9ZTt0aGlzLmxlZnQ9dDt0aGlzLnJpZ2h0PXU7dGhpcy5maW5pc2goKTtyZXR1cm4gdGhpc30sZmluaXNoQXNzaWdubWVudFBhdHRlcm46ZnVuY3Rpb24oZSx0KXt0aGlzLnR5cGU9ci5Bc3NpZ25tZW50UGF0dGVybjt0aGlzLmxlZnQ9ZTt0aGlzLnJpZ2h0PXQ7dGhpcy5maW5pc2goKTtyZXR1cm4gdGhpc30sZmluaXNoQmluYXJ5RXhwcmVzc2lvbjpmdW5jdGlvbihlLHQsdSl7dGhpcy50eXBlPWU9PT1cInx8XCJ8fGU9PT1cIiYmXCI/ci5Mb2dpY2FsRXhwcmVzc2lvbjpyLkJpbmFyeUV4cHJlc3Npb247dGhpcy5vcGVyYXRvcj1lO3RoaXMubGVmdD10O3RoaXMucmlnaHQ9dTt0aGlzLmZpbmlzaCgpO3JldHVybiB0aGlzfSxmaW5pc2hCbG9ja1N0YXRlbWVudDpmdW5jdGlvbihlKXt0aGlzLnR5cGU9ci5CbG9ja1N0YXRlbWVudDt0aGlzLmJvZHk9ZTt0aGlzLmZpbmlzaCgpO3JldHVybiB0aGlzfSxmaW5pc2hCcmVha1N0YXRlbWVudDpmdW5jdGlvbihlKXt0aGlzLnR5cGU9ci5CcmVha1N0YXRlbWVudDt0aGlzLmxhYmVsPWU7dGhpcy5maW5pc2goKTtyZXR1cm4gdGhpc30sZmluaXNoQ2FsbEV4cHJlc3Npb246ZnVuY3Rpb24oZSx0KXt0aGlzLnR5cGU9ci5DYWxsRXhwcmVzc2lvbjt0aGlzLmNhbGxlZT1lO3RoaXMuYXJndW1lbnRzPXQ7dGhpcy5maW5pc2goKTtyZXR1cm4gdGhpc30sZmluaXNoQ2F0Y2hDbGF1c2U6ZnVuY3Rpb24oZSx0KXt0aGlzLnR5cGU9ci5DYXRjaENsYXVzZTt0aGlzLnBhcmFtPWU7dGhpcy5ib2R5PXQ7dGhpcy5maW5pc2goKTtyZXR1cm4gdGhpc30sZmluaXNoQ2xhc3NCb2R5OmZ1bmN0aW9uKGUpe3RoaXMudHlwZT1yLkNsYXNzQm9keTt0aGlzLmJvZHk9ZTt0aGlzLmZpbmlzaCgpO3JldHVybiB0aGlzfSxmaW5pc2hDbGFzc0RlY2xhcmF0aW9uOmZ1bmN0aW9uKGUsdCx1KXt0aGlzLnR5cGU9ci5DbGFzc0RlY2xhcmF0aW9uO3RoaXMuaWQ9ZTt0aGlzLnN1cGVyQ2xhc3M9dDt0aGlzLmJvZHk9dTt0aGlzLmZpbmlzaCgpO3JldHVybiB0aGlzfSxmaW5pc2hDbGFzc0V4cHJlc3Npb246ZnVuY3Rpb24oZSx0LHUpe3RoaXMudHlwZT1yLkNsYXNzRXhwcmVzc2lvbjt0aGlzLmlkPWU7dGhpcy5zdXBlckNsYXNzPXQ7dGhpcy5ib2R5PXU7dGhpcy5maW5pc2goKTtyZXR1cm4gdGhpc30sZmluaXNoQ29uZGl0aW9uYWxFeHByZXNzaW9uOmZ1bmN0aW9uKGUsdCx1KXt0aGlzLnR5cGU9ci5Db25kaXRpb25hbEV4cHJlc3Npb247dGhpcy50ZXN0PWU7dGhpcy5jb25zZXF1ZW50PXQ7dGhpcy5hbHRlcm5hdGU9dTt0aGlzLmZpbmlzaCgpO3JldHVybiB0aGlzfSxmaW5pc2hDb250aW51ZVN0YXRlbWVudDpmdW5jdGlvbihlKXt0aGlzLnR5cGU9ci5Db250aW51ZVN0YXRlbWVudDt0aGlzLmxhYmVsPWU7dGhpcy5maW5pc2goKTtyZXR1cm4gdGhpc30sZmluaXNoRGVidWdnZXJTdGF0ZW1lbnQ6ZnVuY3Rpb24oKXt0aGlzLnR5cGU9ci5EZWJ1Z2dlclN0YXRlbWVudDt0aGlzLmZpbmlzaCgpO3JldHVybiB0aGlzfSxmaW5pc2hEb1doaWxlU3RhdGVtZW50OmZ1bmN0aW9uKGUsdCl7dGhpcy50eXBlPXIuRG9XaGlsZVN0YXRlbWVudDt0aGlzLmJvZHk9ZTt0aGlzLnRlc3Q9dDt0aGlzLmZpbmlzaCgpO3JldHVybiB0aGlzfSxmaW5pc2hFbXB0eVN0YXRlbWVudDpmdW5jdGlvbigpe3RoaXMudHlwZT1yLkVtcHR5U3RhdGVtZW50O3RoaXMuZmluaXNoKCk7cmV0dXJuIHRoaXN9LGZpbmlzaEV4cHJlc3Npb25TdGF0ZW1lbnQ6ZnVuY3Rpb24oZSl7dGhpcy50eXBlPXIuRXhwcmVzc2lvblN0YXRlbWVudDt0aGlzLmV4cHJlc3Npb249ZTt0aGlzLmZpbmlzaCgpO3JldHVybiB0aGlzfSxmaW5pc2hGb3JTdGF0ZW1lbnQ6ZnVuY3Rpb24oZSx0LHUsbil7dGhpcy50eXBlPXIuRm9yU3RhdGVtZW50O3RoaXMuaW5pdD1lO3RoaXMudGVzdD10O3RoaXMudXBkYXRlPXU7dGhpcy5ib2R5PW47dGhpcy5maW5pc2goKTtyZXR1cm4gdGhpc30sZmluaXNoRm9yT2ZTdGF0ZW1lbnQ6ZnVuY3Rpb24oZSx0LHUpe3RoaXMudHlwZT1yLkZvck9mU3RhdGVtZW50O3RoaXMubGVmdD1lO3RoaXMucmlnaHQ9dDt0aGlzLmJvZHk9dTt0aGlzLmZpbmlzaCgpO3JldHVybiB0aGlzfSxmaW5pc2hGb3JJblN0YXRlbWVudDpmdW5jdGlvbihlLHQsdSl7dGhpcy50eXBlPXIuRm9ySW5TdGF0ZW1lbnQ7dGhpcy5sZWZ0PWU7dGhpcy5yaWdodD10O3RoaXMuYm9keT11O3RoaXMuZWFjaD1mYWxzZTt0aGlzLmZpbmlzaCgpO3JldHVybiB0aGlzfSxmaW5pc2hGdW5jdGlvbkRlY2xhcmF0aW9uOmZ1bmN0aW9uKGUsdCx1LG4saSl7dGhpcy50eXBlPXIuRnVuY3Rpb25EZWNsYXJhdGlvbjt0aGlzLmlkPWU7dGhpcy5wYXJhbXM9dDt0aGlzLmRlZmF1bHRzPXU7dGhpcy5ib2R5PW47dGhpcy5nZW5lcmF0b3I9aTt0aGlzLmV4cHJlc3Npb249ZmFsc2U7dGhpcy5maW5pc2goKTtyZXR1cm4gdGhpc30sZmluaXNoRnVuY3Rpb25FeHByZXNzaW9uOmZ1bmN0aW9uKGUsdCx1LG4saSl7dGhpcy50eXBlPXIuRnVuY3Rpb25FeHByZXNzaW9uO3RoaXMuaWQ9ZTt0aGlzLnBhcmFtcz10O3RoaXMuZGVmYXVsdHM9dTt0aGlzLmJvZHk9bjt0aGlzLmdlbmVyYXRvcj1pO3RoaXMuZXhwcmVzc2lvbj1mYWxzZTt0aGlzLmZpbmlzaCgpO3JldHVybiB0aGlzfSxmaW5pc2hJZGVudGlmaWVyOmZ1bmN0aW9uKGUpe3RoaXMudHlwZT1yLklkZW50aWZpZXI7dGhpcy5uYW1lPWU7dGhpcy5maW5pc2goKTtyZXR1cm4gdGhpc30sZmluaXNoSWZTdGF0ZW1lbnQ6ZnVuY3Rpb24oZSx0LHUpe3RoaXMudHlwZT1yLklmU3RhdGVtZW50O3RoaXMudGVzdD1lO3RoaXMuY29uc2VxdWVudD10O3RoaXMuYWx0ZXJuYXRlPXU7dGhpcy5maW5pc2goKTtyZXR1cm4gdGhpc30sZmluaXNoTGFiZWxlZFN0YXRlbWVudDpmdW5jdGlvbihlLHQpe3RoaXMudHlwZT1yLkxhYmVsZWRTdGF0ZW1lbnQ7dGhpcy5sYWJlbD1lO3RoaXMuYm9keT10O3RoaXMuZmluaXNoKCk7cmV0dXJuIHRoaXN9LGZpbmlzaExpdGVyYWw6ZnVuY3Rpb24oZSl7dGhpcy50eXBlPXIuTGl0ZXJhbDt0aGlzLnZhbHVlPWUudmFsdWU7dGhpcy5yYXc9YS5zbGljZShlLnN0YXJ0LGUuZW5kKTtpZihlLnJlZ2V4KXt0aGlzLnJlZ2V4PWUucmVnZXh9dGhpcy5maW5pc2goKTtyZXR1cm4gdGhpc30sZmluaXNoTWVtYmVyRXhwcmVzc2lvbjpmdW5jdGlvbihlLHQsdSl7dGhpcy50eXBlPXIuTWVtYmVyRXhwcmVzc2lvbjt0aGlzLmNvbXB1dGVkPWU9PT1cIltcIjt0aGlzLm9iamVjdD10O3RoaXMucHJvcGVydHk9dTt0aGlzLmZpbmlzaCgpO3JldHVybiB0aGlzfSxmaW5pc2hNZXRhUHJvcGVydHk6ZnVuY3Rpb24oZSx0KXt0aGlzLnR5cGU9ci5NZXRhUHJvcGVydHk7dGhpcy5tZXRhPWU7dGhpcy5wcm9wZXJ0eT10O3RoaXMuZmluaXNoKCk7cmV0dXJuIHRoaXN9LGZpbmlzaE5ld0V4cHJlc3Npb246ZnVuY3Rpb24oZSx0KXt0aGlzLnR5cGU9ci5OZXdFeHByZXNzaW9uO3RoaXMuY2FsbGVlPWU7dGhpcy5hcmd1bWVudHM9dDt0aGlzLmZpbmlzaCgpO3JldHVybiB0aGlzfSxmaW5pc2hPYmplY3RFeHByZXNzaW9uOmZ1bmN0aW9uKGUpe3RoaXMudHlwZT1yLk9iamVjdEV4cHJlc3Npb247dGhpcy5wcm9wZXJ0aWVzPWU7dGhpcy5maW5pc2goKTtyZXR1cm4gdGhpc30sZmluaXNoT2JqZWN0UGF0dGVybjpmdW5jdGlvbihlKXt0aGlzLnR5cGU9ci5PYmplY3RQYXR0ZXJuO3RoaXMucHJvcGVydGllcz1lO3RoaXMuZmluaXNoKCk7cmV0dXJuIHRoaXN9LGZpbmlzaFBvc3RmaXhFeHByZXNzaW9uOmZ1bmN0aW9uKGUsdCl7dGhpcy50eXBlPXIuVXBkYXRlRXhwcmVzc2lvbjt0aGlzLm9wZXJhdG9yPWU7dGhpcy5hcmd1bWVudD10O3RoaXMucHJlZml4PWZhbHNlO3RoaXMuZmluaXNoKCk7cmV0dXJuIHRoaXN9LGZpbmlzaFByb2dyYW06ZnVuY3Rpb24oZSx0KXt0aGlzLnR5cGU9ci5Qcm9ncmFtO3RoaXMuYm9keT1lO3RoaXMuc291cmNlVHlwZT10O3RoaXMuZmluaXNoKCk7cmV0dXJuIHRoaXN9LGZpbmlzaFByb3BlcnR5OmZ1bmN0aW9uKGUsdCx1LG4saSxvKXt0aGlzLnR5cGU9ci5Qcm9wZXJ0eTt0aGlzLmtleT10O3RoaXMuY29tcHV0ZWQ9dTt0aGlzLnZhbHVlPW47dGhpcy5raW5kPWU7dGhpcy5tZXRob2Q9aTt0aGlzLnNob3J0aGFuZD1vO3RoaXMuZmluaXNoKCk7cmV0dXJuIHRoaXN9LGZpbmlzaFJlc3RFbGVtZW50OmZ1bmN0aW9uKGUpe3RoaXMudHlwZT1yLlJlc3RFbGVtZW50O3RoaXMuYXJndW1lbnQ9ZTt0aGlzLmZpbmlzaCgpO3JldHVybiB0aGlzfSxmaW5pc2hSZXR1cm5TdGF0ZW1lbnQ6ZnVuY3Rpb24oZSl7dGhpcy50eXBlPXIuUmV0dXJuU3RhdGVtZW50O3RoaXMuYXJndW1lbnQ9ZTt0aGlzLmZpbmlzaCgpO3JldHVybiB0aGlzfSxmaW5pc2hTZXF1ZW5jZUV4cHJlc3Npb246ZnVuY3Rpb24oZSl7dGhpcy50eXBlPXIuU2VxdWVuY2VFeHByZXNzaW9uO3RoaXMuZXhwcmVzc2lvbnM9ZTt0aGlzLmZpbmlzaCgpO3JldHVybiB0aGlzfSxmaW5pc2hTcHJlYWRFbGVtZW50OmZ1bmN0aW9uKGUpe3RoaXMudHlwZT1yLlNwcmVhZEVsZW1lbnQ7dGhpcy5hcmd1bWVudD1lO3RoaXMuZmluaXNoKCk7cmV0dXJuIHRoaXN9LGZpbmlzaFN3aXRjaENhc2U6ZnVuY3Rpb24oZSx0KXt0aGlzLnR5cGU9ci5Td2l0Y2hDYXNlO3RoaXMudGVzdD1lO3RoaXMuY29uc2VxdWVudD10O3RoaXMuZmluaXNoKCk7cmV0dXJuIHRoaXN9LGZpbmlzaFN1cGVyOmZ1bmN0aW9uKCl7dGhpcy50eXBlPXIuU3VwZXI7dGhpcy5maW5pc2goKTtyZXR1cm4gdGhpc30sZmluaXNoU3dpdGNoU3RhdGVtZW50OmZ1bmN0aW9uKGUsdCl7dGhpcy50eXBlPXIuU3dpdGNoU3RhdGVtZW50O3RoaXMuZGlzY3JpbWluYW50PWU7dGhpcy5jYXNlcz10O3RoaXMuZmluaXNoKCk7cmV0dXJuIHRoaXN9LGZpbmlzaFRhZ2dlZFRlbXBsYXRlRXhwcmVzc2lvbjpmdW5jdGlvbihlLHQpe3RoaXMudHlwZT1yLlRhZ2dlZFRlbXBsYXRlRXhwcmVzc2lvbjt0aGlzLnRhZz1lO3RoaXMucXVhc2k9dDt0aGlzLmZpbmlzaCgpO3JldHVybiB0aGlzfSxmaW5pc2hUZW1wbGF0ZUVsZW1lbnQ6ZnVuY3Rpb24oZSx0KXt0aGlzLnR5cGU9ci5UZW1wbGF0ZUVsZW1lbnQ7dGhpcy52YWx1ZT1lO3RoaXMudGFpbD10O3RoaXMuZmluaXNoKCk7cmV0dXJuIHRoaXN9LGZpbmlzaFRlbXBsYXRlTGl0ZXJhbDpmdW5jdGlvbihlLHQpe3RoaXMudHlwZT1yLlRlbXBsYXRlTGl0ZXJhbDt0aGlzLnF1YXNpcz1lO3RoaXMuZXhwcmVzc2lvbnM9dDt0aGlzLmZpbmlzaCgpO3JldHVybiB0aGlzfSxmaW5pc2hUaGlzRXhwcmVzc2lvbjpmdW5jdGlvbigpe3RoaXMudHlwZT1yLlRoaXNFeHByZXNzaW9uO3RoaXMuZmluaXNoKCk7cmV0dXJuIHRoaXN9LGZpbmlzaFRocm93U3RhdGVtZW50OmZ1bmN0aW9uKGUpe3RoaXMudHlwZT1yLlRocm93U3RhdGVtZW50O3RoaXMuYXJndW1lbnQ9ZTt0aGlzLmZpbmlzaCgpO3JldHVybiB0aGlzfSxmaW5pc2hUcnlTdGF0ZW1lbnQ6ZnVuY3Rpb24oZSx0LHUpe3RoaXMudHlwZT1yLlRyeVN0YXRlbWVudDt0aGlzLmJsb2NrPWU7dGhpcy5ndWFyZGVkSGFuZGxlcnM9W107dGhpcy5oYW5kbGVycz10P1t0XTpbXTt0aGlzLmhhbmRsZXI9dDt0aGlzLmZpbmFsaXplcj11O3RoaXMuZmluaXNoKCk7cmV0dXJuIHRoaXN9LGZpbmlzaFVuYXJ5RXhwcmVzc2lvbjpmdW5jdGlvbihlLHQpe3RoaXMudHlwZT1lPT09XCIrK1wifHxlPT09XCItLVwiP3IuVXBkYXRlRXhwcmVzc2lvbjpyLlVuYXJ5RXhwcmVzc2lvbjt0aGlzLm9wZXJhdG9yPWU7dGhpcy5hcmd1bWVudD10O3RoaXMucHJlZml4PXRydWU7dGhpcy5maW5pc2goKTtyZXR1cm4gdGhpc30sZmluaXNoVmFyaWFibGVEZWNsYXJhdGlvbjpmdW5jdGlvbihlKXt0aGlzLnR5cGU9ci5WYXJpYWJsZURlY2xhcmF0aW9uO3RoaXMuZGVjbGFyYXRpb25zPWU7dGhpcy5raW5kPVwidmFyXCI7dGhpcy5maW5pc2goKTtyZXR1cm4gdGhpc30sZmluaXNoTGV4aWNhbERlY2xhcmF0aW9uOmZ1bmN0aW9uKGUsdCl7dGhpcy50eXBlPXIuVmFyaWFibGVEZWNsYXJhdGlvbjt0aGlzLmRlY2xhcmF0aW9ucz1lO3RoaXMua2luZD10O3RoaXMuZmluaXNoKCk7cmV0dXJuIHRoaXN9LGZpbmlzaFZhcmlhYmxlRGVjbGFyYXRvcjpmdW5jdGlvbihlLHQpe3RoaXMudHlwZT1yLlZhcmlhYmxlRGVjbGFyYXRvcjt0aGlzLmlkPWU7dGhpcy5pbml0PXQ7dGhpcy5maW5pc2goKTtyZXR1cm4gdGhpc30sZmluaXNoV2hpbGVTdGF0ZW1lbnQ6ZnVuY3Rpb24oZSx0KXt0aGlzLnR5cGU9ci5XaGlsZVN0YXRlbWVudDt0aGlzLnRlc3Q9ZTt0aGlzLmJvZHk9dDt0aGlzLmZpbmlzaCgpO3JldHVybiB0aGlzfSxmaW5pc2hXaXRoU3RhdGVtZW50OmZ1bmN0aW9uKGUsdCl7dGhpcy50eXBlPXIuV2l0aFN0YXRlbWVudDt0aGlzLm9iamVjdD1lO3RoaXMuYm9keT10O3RoaXMuZmluaXNoKCk7cmV0dXJuIHRoaXN9LGZpbmlzaEV4cG9ydFNwZWNpZmllcjpmdW5jdGlvbihlLHQpe3RoaXMudHlwZT1yLkV4cG9ydFNwZWNpZmllcjt0aGlzLmV4cG9ydGVkPXR8fGU7dGhpcy5sb2NhbD1lO3RoaXMuZmluaXNoKCk7cmV0dXJuIHRoaXN9LGZpbmlzaEltcG9ydERlZmF1bHRTcGVjaWZpZXI6ZnVuY3Rpb24oZSl7dGhpcy50eXBlPXIuSW1wb3J0RGVmYXVsdFNwZWNpZmllcjt0aGlzLmxvY2FsPWU7dGhpcy5maW5pc2goKTtyZXR1cm4gdGhpc30sZmluaXNoSW1wb3J0TmFtZXNwYWNlU3BlY2lmaWVyOmZ1bmN0aW9uKGUpe3RoaXMudHlwZT1yLkltcG9ydE5hbWVzcGFjZVNwZWNpZmllcjt0aGlzLmxvY2FsPWU7dGhpcy5maW5pc2goKTtyZXR1cm4gdGhpc30sZmluaXNoRXhwb3J0TmFtZWREZWNsYXJhdGlvbjpmdW5jdGlvbihlLHQsdSl7dGhpcy50eXBlPXIuRXhwb3J0TmFtZWREZWNsYXJhdGlvbjt0aGlzLmRlY2xhcmF0aW9uPWU7dGhpcy5zcGVjaWZpZXJzPXQ7dGhpcy5zb3VyY2U9dTt0aGlzLmZpbmlzaCgpO3JldHVybiB0aGlzfSxmaW5pc2hFeHBvcnREZWZhdWx0RGVjbGFyYXRpb246ZnVuY3Rpb24oZSl7dGhpcy50eXBlPXIuRXhwb3J0RGVmYXVsdERlY2xhcmF0aW9uO3RoaXMuZGVjbGFyYXRpb249ZTt0aGlzLmZpbmlzaCgpO3JldHVybiB0aGlzfSxmaW5pc2hFeHBvcnRBbGxEZWNsYXJhdGlvbjpmdW5jdGlvbihlKXt0aGlzLnR5cGU9ci5FeHBvcnRBbGxEZWNsYXJhdGlvbjt0aGlzLnNvdXJjZT1lO3RoaXMuZmluaXNoKCk7cmV0dXJuIHRoaXN9LGZpbmlzaEltcG9ydFNwZWNpZmllcjpmdW5jdGlvbihlLHQpe3RoaXMudHlwZT1yLkltcG9ydFNwZWNpZmllcjt0aGlzLmxvY2FsPWV8fHQ7dGhpcy5pbXBvcnRlZD10O3RoaXMuZmluaXNoKCk7cmV0dXJuIHRoaXN9LGZpbmlzaEltcG9ydERlY2xhcmF0aW9uOmZ1bmN0aW9uKGUsdCl7dGhpcy50eXBlPXIuSW1wb3J0RGVjbGFyYXRpb247dGhpcy5zcGVjaWZpZXJzPWU7dGhpcy5zb3VyY2U9dDt0aGlzLmZpbmlzaCgpO3JldHVybiB0aGlzfSxmaW5pc2hZaWVsZEV4cHJlc3Npb246ZnVuY3Rpb24oZSx0KXt0aGlzLnR5cGU9ci5ZaWVsZEV4cHJlc3Npb247dGhpcy5hcmd1bWVudD1lO3RoaXMuZGVsZWdhdGU9dDt0aGlzLmZpbmlzaCgpO3JldHVybiB0aGlzfX07ZnVuY3Rpb24geWUoZSl7dmFyIHQsdTtmb3IodD0wO3Q8di5lcnJvcnMubGVuZ3RoO3QrKyl7dT12LmVycm9yc1t0XTtpZih1LmluZGV4PT09ZS5pbmRleCYmdS5tZXNzYWdlPT09ZS5tZXNzYWdlKXtyZXR1cm59fXYuZXJyb3JzLnB1c2goZSl9ZnVuY3Rpb24gQmUoZSx0KXt2YXIgdT1uZXcgRXJyb3IoZSk7dHJ5e3Rocm93IHV9Y2F0Y2gobil7aWYoT2JqZWN0LmNyZWF0ZSYmT2JqZWN0LmRlZmluZVByb3BlcnR5KXt1PU9iamVjdC5jcmVhdGUobik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHUsXCJjb2x1bW5cIix7dmFsdWU6dH0pfX1maW5hbGx5e3JldHVybiB1fX1mdW5jdGlvbiB2ZShlLHQsdSl7dmFyIG4scixpO249XCJMaW5lIFwiK2UrXCI6IFwiK3U7cj10LShGP3A6ZCkrMTtpPUJlKG4scik7aS5saW5lTnVtYmVyPWU7aS5kZXNjcmlwdGlvbj11O2kuaW5kZXg9dDtyZXR1cm4gaX1mdW5jdGlvbiBiZShlKXt2YXIgdCx1O3Q9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpO3U9ZS5yZXBsYWNlKC8lKFxcZCkvZyxmdW5jdGlvbihlLHUpe3codTx0Lmxlbmd0aCxcIk1lc3NhZ2UgcmVmZXJlbmNlIG11c3QgYmUgaW4gcmFuZ2VcIik7cmV0dXJuIHRbdV19KTt0aHJvdyB2ZShtLGgsdSl9ZnVuY3Rpb24gU2UoZSl7dmFyIHQsdSxuO3Q9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpO3U9ZS5yZXBsYWNlKC8lKFxcZCkvZyxmdW5jdGlvbihlLHUpe3codTx0Lmxlbmd0aCxcIk1lc3NhZ2UgcmVmZXJlbmNlIG11c3QgYmUgaW4gcmFuZ2VcIik7cmV0dXJuIHRbdV19KTtuPXZlKGMsaCx1KTtpZih2LmVycm9ycyl7eWUobil9ZWxzZXt0aHJvdyBufX1mdW5jdGlvbiB4ZShlLHUpe3ZhciBuLHI9dXx8by5VbmV4cGVjdGVkVG9rZW47aWYoZSl7aWYoIXUpe3I9ZS50eXBlPT09dC5FT0Y/by5VbmV4cGVjdGVkRU9TOmUudHlwZT09PXQuSWRlbnRpZmllcj9vLlVuZXhwZWN0ZWRJZGVudGlmaWVyOmUudHlwZT09PXQuTnVtZXJpY0xpdGVyYWw/by5VbmV4cGVjdGVkTnVtYmVyOmUudHlwZT09PXQuU3RyaW5nTGl0ZXJhbD9vLlVuZXhwZWN0ZWRTdHJpbmc6ZS50eXBlPT09dC5UZW1wbGF0ZT9vLlVuZXhwZWN0ZWRUZW1wbGF0ZTpvLlVuZXhwZWN0ZWRUb2tlbjtpZihlLnR5cGU9PT10LktleXdvcmQpe2lmKFQoZS52YWx1ZSkpe3I9by5VbmV4cGVjdGVkUmVzZXJ2ZWR9ZWxzZSBpZihsJiZOKGUudmFsdWUpKXtyPW8uU3RyaWN0UmVzZXJ2ZWRXb3JkfX19bj1lLnR5cGU9PT10LlRlbXBsYXRlP2UudmFsdWUucmF3OmUudmFsdWV9ZWxzZXtuPVwiSUxMRUdBTFwifXI9ci5yZXBsYWNlKFwiJTBcIixuKTtyZXR1cm4gZSYmdHlwZW9mIGUubGluZU51bWJlcj09PVwibnVtYmVyXCI/dmUoZS5saW5lTnVtYmVyLGUuc3RhcnQscik6dmUoRj9jOm0sRj9mOmgscil9ZnVuY3Rpb24gd2UoZSx0KXt0aHJvdyB4ZShlLHQpfWZ1bmN0aW9uIF9lKGUsdCl7dmFyIHU9eGUoZSx0KTtpZih2LmVycm9ycyl7eWUodSl9ZWxzZXt0aHJvdyB1fX1mdW5jdGlvbiBrZShlKXt2YXIgdT1tZSgpO2lmKHUudHlwZSE9PXQuUHVuY3R1YXRvcnx8dS52YWx1ZSE9PWUpe3dlKHUpfX1mdW5jdGlvbiBJZSgpe3ZhciBlO2lmKHYuZXJyb3JzKXtlPXk7aWYoZS50eXBlPT09dC5QdW5jdHVhdG9yJiZlLnZhbHVlPT09XCIsXCIpe21lKCl9ZWxzZSBpZihlLnR5cGU9PT10LlB1bmN0dWF0b3ImJmUudmFsdWU9PT1cIjtcIil7bWUoKTtfZShlKX1lbHNle19lKGUsby5VbmV4cGVjdGVkVG9rZW4pfX1lbHNle2tlKFwiLFwiKX19ZnVuY3Rpb24gUGUoZSl7dmFyIHU9bWUoKTtpZih1LnR5cGUhPT10LktleXdvcmR8fHUudmFsdWUhPT1lKXt3ZSh1KX19ZnVuY3Rpb24gTGUoZSl7cmV0dXJuIHkudHlwZT09PXQuUHVuY3R1YXRvciYmeS52YWx1ZT09PWV9ZnVuY3Rpb24gT2UoZSl7cmV0dXJuIHkudHlwZT09PXQuS2V5d29yZCYmeS52YWx1ZT09PWV9ZnVuY3Rpb24gamUoZSl7cmV0dXJuIHkudHlwZT09PXQuSWRlbnRpZmllciYmeS52YWx1ZT09PWV9ZnVuY3Rpb24gTWUoKXt2YXIgZTtpZih5LnR5cGUhPT10LlB1bmN0dWF0b3Ipe3JldHVybiBmYWxzZX1lPXkudmFsdWU7cmV0dXJuIGU9PT1cIj1cInx8ZT09PVwiKj1cInx8ZT09PVwiLz1cInx8ZT09PVwiJT1cInx8ZT09PVwiKz1cInx8ZT09PVwiLT1cInx8ZT09PVwiPDw9XCJ8fGU9PT1cIj4+PVwifHxlPT09XCI+Pj49XCJ8fGU9PT1cIiY9XCJ8fGU9PT1cIl49XCJ8fGU9PT1cInw9XCJ9ZnVuY3Rpb24gUmUoKXtpZihhLmNoYXJDb2RlQXQoQSk9PT01OXx8TGUoXCI7XCIpKXttZSgpO3JldHVybn1pZihEKXtyZXR1cm59aD1BO209QztkPUU7aWYoeS50eXBlIT09dC5FT0YmJiFMZShcIn1cIikpe3dlKHkpfX1mdW5jdGlvbiBUZShlKXt2YXIgdD1iLHU9UyxuPXgscjtiPXRydWU7Uz10cnVlO3g9bnVsbDtyPWUoKTtpZih4IT09bnVsbCl7d2UoeCl9Yj10O1M9dTt4PW47cmV0dXJuIHJ9ZnVuY3Rpb24gTmUoZSl7dmFyIHQ9Yix1PVMsbj14LHI7Yj10cnVlO1M9dHJ1ZTt4PW51bGw7cj1lKCk7Yj1iJiZ0O1M9UyYmdTt4PW58fHg7cmV0dXJuIHJ9ZnVuY3Rpb24gcWUoZSx0KXt2YXIgdT1uZXcgRmUsbj1bXSxyLGk7a2UoXCJbXCIpO3doaWxlKCFMZShcIl1cIikpe2lmKExlKFwiLFwiKSl7bWUoKTtuLnB1c2gobnVsbCl9ZWxzZXtpZihMZShcIi4uLlwiKSl7aT1uZXcgRmU7bWUoKTtlLnB1c2goeSk7cj1TdChlLHQpO24ucHVzaChpLmZpbmlzaFJlc3RFbGVtZW50KHIpKTticmVha31lbHNle24ucHVzaChWZShlLHQpKX1pZighTGUoXCJdXCIpKXtrZShcIixcIil9fX1rZShcIl1cIik7cmV0dXJuIHUuZmluaXNoQXJyYXlQYXR0ZXJuKG4pfWZ1bmN0aW9uIFVlKGUsdSl7dmFyIG49bmV3IEZlLHIsaSxvPUxlKFwiW1wiKSxzO2lmKHkudHlwZT09PXQuSWRlbnRpZmllcil7aT15O3I9U3QoKTtpZihMZShcIj1cIikpe2UucHVzaChpKTttZSgpO3M9Z3QoKTtyZXR1cm4gbi5maW5pc2hQcm9wZXJ0eShcImluaXRcIixyLGZhbHNlLG5ldyBnZShpKS5maW5pc2hBc3NpZ25tZW50UGF0dGVybihyLHMpLGZhbHNlLGZhbHNlKX1lbHNlIGlmKCFMZShcIjpcIikpe2UucHVzaChpKTtyZXR1cm4gbi5maW5pc2hQcm9wZXJ0eShcImluaXRcIixyLGZhbHNlLHIsZmFsc2UsdHJ1ZSl9fWVsc2V7cj0kZShlLHUpfWtlKFwiOlwiKTtzPVZlKGUsdSk7cmV0dXJuIG4uZmluaXNoUHJvcGVydHkoXCJpbml0XCIscixvLHMsZmFsc2UsZmFsc2UpfWZ1bmN0aW9uIHplKGUsdCl7dmFyIHU9bmV3IEZlLG49W107a2UoXCJ7XCIpO3doaWxlKCFMZShcIn1cIikpe24ucHVzaChVZShlLHQpKTtpZighTGUoXCJ9XCIpKXtrZShcIixcIil9fW1lKCk7cmV0dXJuIHUuZmluaXNoT2JqZWN0UGF0dGVybihuKX1mdW5jdGlvbiBXZShlLHQpe2lmKExlKFwiW1wiKSl7cmV0dXJuIHFlKGUsdCl9ZWxzZSBpZihMZShcIntcIikpe3JldHVybiB6ZShlLHQpfWUucHVzaCh5KTtyZXR1cm4gU3QodCl9ZnVuY3Rpb24gVmUoZSx0KXt2YXIgdT15LG4scixpO249V2UoZSx0KTtpZihMZShcIj1cIikpe21lKCk7cj1CLmFsbG93WWllbGQ7Qi5hbGxvd1lpZWxkPXRydWU7aT1UZShndCk7Qi5hbGxvd1lpZWxkPXI7bj1uZXcgZ2UodSkuZmluaXNoQXNzaWdubWVudFBhdHRlcm4obixpKX1yZXR1cm4gbn1mdW5jdGlvbiBZZSgpe3ZhciBlPVtdLHQ9bmV3IEZlLHU7a2UoXCJbXCIpO3doaWxlKCFMZShcIl1cIikpe2lmKExlKFwiLFwiKSl7bWUoKTtlLnB1c2gobnVsbCl9ZWxzZSBpZihMZShcIi4uLlwiKSl7dT1uZXcgRmU7bWUoKTt1LmZpbmlzaFNwcmVhZEVsZW1lbnQoTmUoZ3QpKTtpZighTGUoXCJdXCIpKXtTPWI9ZmFsc2U7a2UoXCIsXCIpfWUucHVzaCh1KX1lbHNle2UucHVzaChOZShndCkpO2lmKCFMZShcIl1cIikpe2tlKFwiLFwiKX19fW1lKCk7cmV0dXJuIHQuZmluaXNoQXJyYXlFeHByZXNzaW9uKGUpfWZ1bmN0aW9uIEdlKGUsdCx1KXt2YXIgbixyO1M9Yj1mYWxzZTtuPWw7cj1UZShYdCk7aWYobCYmdC5maXJzdFJlc3RyaWN0ZWQpe19lKHQuZmlyc3RSZXN0cmljdGVkLHQubWVzc2FnZSl9aWYobCYmdC5zdHJpY3RlZCl7X2UodC5zdHJpY3RlZCx0Lm1lc3NhZ2UpfWw9bjtyZXR1cm4gZS5maW5pc2hGdW5jdGlvbkV4cHJlc3Npb24obnVsbCx0LnBhcmFtcyx0LmRlZmF1bHRzLHIsdSl9ZnVuY3Rpb24gS2UoKXt2YXIgZSx0LHU9bmV3IEZlLG49Qi5hbGxvd1lpZWxkO0IuYWxsb3dZaWVsZD1mYWxzZTtlPWV1KCk7Qi5hbGxvd1lpZWxkPW47Qi5hbGxvd1lpZWxkPWZhbHNlO3Q9R2UodSxlLGZhbHNlKTtCLmFsbG93WWllbGQ9bjtyZXR1cm4gdH1mdW5jdGlvbiAkZSgpe3ZhciBlLHU9bmV3IEZlLG47ZT1tZSgpO3N3aXRjaChlLnR5cGUpe2Nhc2UgdC5TdHJpbmdMaXRlcmFsOmNhc2UgdC5OdW1lcmljTGl0ZXJhbDppZihsJiZlLm9jdGFsKXtfZShlLG8uU3RyaWN0T2N0YWxMaXRlcmFsKX1yZXR1cm4gdS5maW5pc2hMaXRlcmFsKGUpO2Nhc2UgdC5JZGVudGlmaWVyOmNhc2UgdC5Cb29sZWFuTGl0ZXJhbDpjYXNlIHQuTnVsbExpdGVyYWw6Y2FzZSB0LktleXdvcmQ6cmV0dXJuIHUuZmluaXNoSWRlbnRpZmllcihlLnZhbHVlKTtjYXNlIHQuUHVuY3R1YXRvcjppZihlLnZhbHVlPT09XCJbXCIpe249VGUoZ3QpO2tlKFwiXVwiKTtyZXR1cm4gbn1icmVha313ZShlKX1mdW5jdGlvbiBIZSgpe3N3aXRjaCh5LnR5cGUpe2Nhc2UgdC5JZGVudGlmaWVyOmNhc2UgdC5TdHJpbmdMaXRlcmFsOmNhc2UgdC5Cb29sZWFuTGl0ZXJhbDpjYXNlIHQuTnVsbExpdGVyYWw6Y2FzZSB0Lk51bWVyaWNMaXRlcmFsOmNhc2UgdC5LZXl3b3JkOnJldHVybiB0cnVlO2Nhc2UgdC5QdW5jdHVhdG9yOnJldHVybiB5LnZhbHVlPT09XCJbXCJ9cmV0dXJuIGZhbHNlfWZ1bmN0aW9uIEplKGUsdSxuLHIpe3ZhciBpLG8scyxhLGw9Qi5hbGxvd1lpZWxkO2lmKGUudHlwZT09PXQuSWRlbnRpZmllcil7aWYoZS52YWx1ZT09PVwiZ2V0XCImJkhlKCkpe249TGUoXCJbXCIpO3U9JGUoKTtzPW5ldyBGZTtrZShcIihcIik7a2UoXCIpXCIpO0IuYWxsb3dZaWVsZD1mYWxzZTtpPUdlKHMse3BhcmFtczpbXSxkZWZhdWx0czpbXSxzdHJpY3RlZDpudWxsLGZpcnN0UmVzdHJpY3RlZDpudWxsLG1lc3NhZ2U6bnVsbH0sZmFsc2UpO0IuYWxsb3dZaWVsZD1sO3JldHVybiByLmZpbmlzaFByb3BlcnR5KFwiZ2V0XCIsdSxuLGksZmFsc2UsZmFsc2UpfWVsc2UgaWYoZS52YWx1ZT09PVwic2V0XCImJkhlKCkpe249TGUoXCJbXCIpO3U9JGUoKTtzPW5ldyBGZTtrZShcIihcIik7bz17cGFyYW1zOltdLGRlZmF1bHRDb3VudDowLGRlZmF1bHRzOltdLGZpcnN0UmVzdHJpY3RlZDpudWxsLHBhcmFtU2V0Ont9fTtpZihMZShcIilcIikpe19lKHkpfWVsc2V7Qi5hbGxvd1lpZWxkPWZhbHNlO1F0KG8pO0IuYWxsb3dZaWVsZD1sO2lmKG8uZGVmYXVsdENvdW50PT09MCl7by5kZWZhdWx0cz1bXX19a2UoXCIpXCIpO0IuYWxsb3dZaWVsZD1mYWxzZTtpPUdlKHMsbyxmYWxzZSk7Qi5hbGxvd1lpZWxkPWw7cmV0dXJuIHIuZmluaXNoUHJvcGVydHkoXCJzZXRcIix1LG4saSxmYWxzZSxmYWxzZSl9fWVsc2UgaWYoZS50eXBlPT09dC5QdW5jdHVhdG9yJiZlLnZhbHVlPT09XCIqXCImJkhlKCkpe249TGUoXCJbXCIpO3U9JGUoKTtzPW5ldyBGZTtCLmFsbG93WWllbGQ9dHJ1ZTthPWV1KCk7Qi5hbGxvd1lpZWxkPWw7Qi5hbGxvd1lpZWxkPWZhbHNlO2k9R2UocyxhLHRydWUpO0IuYWxsb3dZaWVsZD1sO3JldHVybiByLmZpbmlzaFByb3BlcnR5KFwiaW5pdFwiLHUsbixpLHRydWUsZmFsc2UpfWlmKHUmJkxlKFwiKFwiKSl7aT1LZSgpO3JldHVybiByLmZpbmlzaFByb3BlcnR5KFwiaW5pdFwiLHUsbixpLHRydWUsZmFsc2UpfXJldHVybiBudWxsfWZ1bmN0aW9uIFhlKGUpe3ZhciB1PXksbj1uZXcgRmUsaSxzLGEsbCxmO2k9TGUoXCJbXCIpO2lmKExlKFwiKlwiKSl7bWUoKX1lbHNle3M9JGUoKX1hPUplKHUscyxpLG4pO2lmKGEpe3JldHVybiBhfWlmKCFzKXt3ZSh5KX1pZighaSl7bD1zLnR5cGU9PT1yLklkZW50aWZpZXImJnMubmFtZT09PVwiX19wcm90b19fXCJ8fHMudHlwZT09PXIuTGl0ZXJhbCYmcy52YWx1ZT09PVwiX19wcm90b19fXCI7aWYoZS52YWx1ZSYmbCl7U2Uoby5EdXBsaWNhdGVQcm90b1Byb3BlcnR5KX1lLnZhbHVlfD1sfWlmKExlKFwiOlwiKSl7bWUoKTtmPU5lKGd0KTtyZXR1cm4gbi5maW5pc2hQcm9wZXJ0eShcImluaXRcIixzLGksZixmYWxzZSxmYWxzZSl9aWYodS50eXBlPT09dC5JZGVudGlmaWVyKXtpZihMZShcIj1cIikpe3g9eTttZSgpO2Y9VGUoZ3QpO3JldHVybiBuLmZpbmlzaFByb3BlcnR5KFwiaW5pdFwiLHMsaSxuZXcgZ2UodSkuZmluaXNoQXNzaWdubWVudFBhdHRlcm4ocyxmKSxmYWxzZSx0cnVlKX1yZXR1cm4gbi5maW5pc2hQcm9wZXJ0eShcImluaXRcIixzLGkscyxmYWxzZSx0cnVlKX13ZSh5KX1mdW5jdGlvbiBaZSgpe3ZhciBlPVtdLHQ9e3ZhbHVlOmZhbHNlfSx1PW5ldyBGZTtrZShcIntcIik7d2hpbGUoIUxlKFwifVwiKSl7ZS5wdXNoKFhlKHQpKTtpZighTGUoXCJ9XCIpKXtJZSgpfX1rZShcIn1cIik7cmV0dXJuIHUuZmluaXNoT2JqZWN0RXhwcmVzc2lvbihlKX1mdW5jdGlvbiBRZShlKXt2YXIgdDtzd2l0Y2goZS50eXBlKXtjYXNlIHIuSWRlbnRpZmllcjpjYXNlIHIuTWVtYmVyRXhwcmVzc2lvbjpjYXNlIHIuUmVzdEVsZW1lbnQ6Y2FzZSByLkFzc2lnbm1lbnRQYXR0ZXJuOmJyZWFrO2Nhc2Ugci5TcHJlYWRFbGVtZW50OmUudHlwZT1yLlJlc3RFbGVtZW50O1FlKGUuYXJndW1lbnQpO2JyZWFrO2Nhc2Ugci5BcnJheUV4cHJlc3Npb246ZS50eXBlPXIuQXJyYXlQYXR0ZXJuO2Zvcih0PTA7dDxlLmVsZW1lbnRzLmxlbmd0aDt0Kyspe2lmKGUuZWxlbWVudHNbdF0hPT1udWxsKXtRZShlLmVsZW1lbnRzW3RdKX19YnJlYWs7Y2FzZSByLk9iamVjdEV4cHJlc3Npb246ZS50eXBlPXIuT2JqZWN0UGF0dGVybjtmb3IodD0wO3Q8ZS5wcm9wZXJ0aWVzLmxlbmd0aDt0Kyspe1FlKGUucHJvcGVydGllc1t0XS52YWx1ZSl9YnJlYWs7Y2FzZSByLkFzc2lnbm1lbnRFeHByZXNzaW9uOmUudHlwZT1yLkFzc2lnbm1lbnRQYXR0ZXJuO1FlKGUubGVmdCk7YnJlYWs7ZGVmYXVsdDpicmVha319ZnVuY3Rpb24gZXQoZSl7dmFyIHUsbjtpZih5LnR5cGUhPT10LlRlbXBsYXRlfHxlLmhlYWQmJiF5LmhlYWQpe3dlKCl9dT1uZXcgRmU7bj1tZSgpO3JldHVybiB1LmZpbmlzaFRlbXBsYXRlRWxlbWVudCh7cmF3Om4udmFsdWUucmF3LGNvb2tlZDpuLnZhbHVlLmNvb2tlZH0sbi50YWlsKX1mdW5jdGlvbiB0dCgpe3ZhciBlLHQsdSxuPW5ldyBGZTtlPWV0KHtoZWFkOnRydWV9KTt0PVtlXTt1PVtdO3doaWxlKCFlLnRhaWwpe3UucHVzaCh5dCgpKTtlPWV0KHtoZWFkOmZhbHNlfSk7dC5wdXNoKGUpfXJldHVybiBuLmZpbmlzaFRlbXBsYXRlTGl0ZXJhbCh0LHUpfWZ1bmN0aW9uIHV0KCl7dmFyIGUsdCx1LG4sbz1bXTtrZShcIihcIik7aWYoTGUoXCIpXCIpKXttZSgpO2lmKCFMZShcIj0+XCIpKXtrZShcIj0+XCIpfXJldHVybnt0eXBlOmkuQXJyb3dQYXJhbWV0ZXJQbGFjZUhvbGRlcixwYXJhbXM6W10scmF3UGFyYW1zOltdfX11PXk7aWYoTGUoXCIuLi5cIikpe2U9THQobyk7a2UoXCIpXCIpO2lmKCFMZShcIj0+XCIpKXtrZShcIj0+XCIpfXJldHVybnt0eXBlOmkuQXJyb3dQYXJhbWV0ZXJQbGFjZUhvbGRlcixwYXJhbXM6W2VdfX1iPXRydWU7ZT1OZShndCk7aWYoTGUoXCIsXCIpKXtTPWZhbHNlO3Q9W2VdO3doaWxlKEE8Zyl7aWYoIUxlKFwiLFwiKSl7YnJlYWt9bWUoKTtpZihMZShcIi4uLlwiKSl7aWYoIWIpe3dlKHkpfXQucHVzaChMdChvKSk7a2UoXCIpXCIpO2lmKCFMZShcIj0+XCIpKXtrZShcIj0+XCIpfWI9ZmFsc2U7Zm9yKG49MDtuPHQubGVuZ3RoO24rKyl7UWUodFtuXSl9cmV0dXJue3R5cGU6aS5BcnJvd1BhcmFtZXRlclBsYWNlSG9sZGVyLHBhcmFtczp0fX10LnB1c2goTmUoZ3QpKX1lPW5ldyBnZSh1KS5maW5pc2hTZXF1ZW5jZUV4cHJlc3Npb24odCl9a2UoXCIpXCIpO2lmKExlKFwiPT5cIikpe2lmKGUudHlwZT09PXIuSWRlbnRpZmllciYmZS5uYW1lPT09XCJ5aWVsZFwiKXtyZXR1cm57dHlwZTppLkFycm93UGFyYW1ldGVyUGxhY2VIb2xkZXIscGFyYW1zOltlXX19aWYoIWIpe3dlKHkpfWlmKGUudHlwZT09PXIuU2VxdWVuY2VFeHByZXNzaW9uKXtmb3Iobj0wO248ZS5leHByZXNzaW9ucy5sZW5ndGg7bisrKXtRZShlLmV4cHJlc3Npb25zW25dKX19ZWxzZXtRZShlKX1lPXt0eXBlOmkuQXJyb3dQYXJhbWV0ZXJQbGFjZUhvbGRlcixwYXJhbXM6ZS50eXBlPT09ci5TZXF1ZW5jZUV4cHJlc3Npb24/ZS5leHByZXNzaW9uczpbZV19fWI9ZmFsc2U7cmV0dXJuIGV9ZnVuY3Rpb24gbnQoKXt2YXIgZSx1LG4scjtpZihMZShcIihcIikpe2I9ZmFsc2U7cmV0dXJuIE5lKHV0KX1pZihMZShcIltcIikpe3JldHVybiBOZShZZSl9aWYoTGUoXCJ7XCIpKXtyZXR1cm4gTmUoWmUpfWU9eS50eXBlO3I9bmV3IEZlO2lmKGU9PT10LklkZW50aWZpZXIpe2lmKEIuc291cmNlVHlwZT09PVwibW9kdWxlXCImJnkudmFsdWU9PT1cImF3YWl0XCIpe19lKHkpfW49ci5maW5pc2hJZGVudGlmaWVyKG1lKCkudmFsdWUpfWVsc2UgaWYoZT09PXQuU3RyaW5nTGl0ZXJhbHx8ZT09PXQuTnVtZXJpY0xpdGVyYWwpe1M9Yj1mYWxzZTtpZihsJiZ5Lm9jdGFsKXtfZSh5LG8uU3RyaWN0T2N0YWxMaXRlcmFsKX1uPXIuZmluaXNoTGl0ZXJhbChtZSgpKX1lbHNlIGlmKGU9PT10LktleXdvcmQpe2lmKCFsJiZCLmFsbG93WWllbGQmJk9lKFwieWllbGRcIikpe3JldHVybiBpdCgpfVM9Yj1mYWxzZTtpZihPZShcImZ1bmN0aW9uXCIpKXtyZXR1cm4gdXUoKX1pZihPZShcInRoaXNcIikpe21lKCk7cmV0dXJuIHIuZmluaXNoVGhpc0V4cHJlc3Npb24oKX1pZihPZShcImNsYXNzXCIpKXtyZXR1cm4gaXUoKX13ZShtZSgpKX1lbHNlIGlmKGU9PT10LkJvb2xlYW5MaXRlcmFsKXtTPWI9ZmFsc2U7dT1tZSgpO3UudmFsdWU9dS52YWx1ZT09PVwidHJ1ZVwiO249ci5maW5pc2hMaXRlcmFsKHUpfWVsc2UgaWYoZT09PXQuTnVsbExpdGVyYWwpe1M9Yj1mYWxzZTt1PW1lKCk7dS52YWx1ZT1udWxsO249ci5maW5pc2hMaXRlcmFsKHUpfWVsc2UgaWYoTGUoXCIvXCIpfHxMZShcIi89XCIpKXtTPWI9ZmFsc2U7Zj1BO2lmKHR5cGVvZiB2LnRva2VucyE9PVwidW5kZWZpbmVkXCIpe3U9ZmUoKX1lbHNle3U9bGUoKX1tZSgpO249ci5maW5pc2hMaXRlcmFsKHUpfWVsc2UgaWYoZT09PXQuVGVtcGxhdGUpe249dHQoKX1lbHNle3dlKG1lKCkpfXJldHVybiBufWZ1bmN0aW9uIHJ0KCl7dmFyIGU9W10sdDtrZShcIihcIik7aWYoIUxlKFwiKVwiKSl7d2hpbGUoQTxnKXtpZihMZShcIi4uLlwiKSl7dD1uZXcgRmU7bWUoKTt0LmZpbmlzaFNwcmVhZEVsZW1lbnQoVGUoZ3QpKX1lbHNle3Q9VGUoZ3QpfWUucHVzaCh0KTtpZihMZShcIilcIikpe2JyZWFrfUllKCl9fWtlKFwiKVwiKTtyZXR1cm4gZX1mdW5jdGlvbiBpdCgpe3ZhciBlLHQ9bmV3IEZlO2U9bWUoKTtpZighY2UoZSkpe3dlKGUpfXJldHVybiB0LmZpbmlzaElkZW50aWZpZXIoZS52YWx1ZSl9ZnVuY3Rpb24gb3QoKXtrZShcIi5cIik7cmV0dXJuIGl0KCl9ZnVuY3Rpb24gc3QoKXt2YXIgZTtrZShcIltcIik7ZT1UZSh5dCk7a2UoXCJdXCIpO3JldHVybiBlfWZ1bmN0aW9uIGF0KCl7dmFyIGUsdSxuPW5ldyBGZTtQZShcIm5ld1wiKTtpZihMZShcIi5cIikpe21lKCk7aWYoeS50eXBlPT09dC5JZGVudGlmaWVyJiZ5LnZhbHVlPT09XCJ0YXJnZXRcIil7aWYoQi5pbkZ1bmN0aW9uQm9keSl7bWUoKTtyZXR1cm4gbi5maW5pc2hNZXRhUHJvcGVydHkoXCJuZXdcIixcInRhcmdldFwiKX19d2UoeSl9ZT1UZShmdCk7dT1MZShcIihcIik/cnQoKTpbXTtTPWI9ZmFsc2U7cmV0dXJuIG4uZmluaXNoTmV3RXhwcmVzc2lvbihlLHUpfWZ1bmN0aW9uIGx0KCl7dmFyIGUsdSxuLHIsaSxvPUIuYWxsb3dJbjtpPXk7Qi5hbGxvd0luPXRydWU7aWYoT2UoXCJzdXBlclwiKSYmQi5pbkZ1bmN0aW9uQm9keSl7dT1uZXcgRmU7bWUoKTt1PXUuZmluaXNoU3VwZXIoKTtpZighTGUoXCIoXCIpJiYhTGUoXCIuXCIpJiYhTGUoXCJbXCIpKXt3ZSh5KX19ZWxzZXt1PU5lKE9lKFwibmV3XCIpP2F0Om50KX1mb3IoOzspe2lmKExlKFwiLlwiKSl7Yj1mYWxzZTtTPXRydWU7cj1vdCgpO3U9bmV3IGdlKGkpLmZpbmlzaE1lbWJlckV4cHJlc3Npb24oXCIuXCIsdSxyKX1lbHNlIGlmKExlKFwiKFwiKSl7Yj1mYWxzZTtTPWZhbHNlO249cnQoKTt1PW5ldyBnZShpKS5maW5pc2hDYWxsRXhwcmVzc2lvbih1LG4pO1xufWVsc2UgaWYoTGUoXCJbXCIpKXtiPWZhbHNlO1M9dHJ1ZTtyPXN0KCk7dT1uZXcgZ2UoaSkuZmluaXNoTWVtYmVyRXhwcmVzc2lvbihcIltcIix1LHIpfWVsc2UgaWYoeS50eXBlPT09dC5UZW1wbGF0ZSYmeS5oZWFkKXtlPXR0KCk7dT1uZXcgZ2UoaSkuZmluaXNoVGFnZ2VkVGVtcGxhdGVFeHByZXNzaW9uKHUsZSl9ZWxzZXticmVha319Qi5hbGxvd0luPW87cmV0dXJuIHV9ZnVuY3Rpb24gZnQoKXt2YXIgZSx1LG4scjt3KEIuYWxsb3dJbixcImNhbGxlZSBvZiBuZXcgZXhwcmVzc2lvbiBhbHdheXMgYWxsb3cgaW4ga2V5d29yZC5cIik7cj15O2lmKE9lKFwic3VwZXJcIikmJkIuaW5GdW5jdGlvbkJvZHkpe3U9bmV3IEZlO21lKCk7dT11LmZpbmlzaFN1cGVyKCk7aWYoIUxlKFwiW1wiKSYmIUxlKFwiLlwiKSl7d2UoeSl9fWVsc2V7dT1OZShPZShcIm5ld1wiKT9hdDpudCl9Zm9yKDs7KXtpZihMZShcIltcIikpe2I9ZmFsc2U7Uz10cnVlO249c3QoKTt1PW5ldyBnZShyKS5maW5pc2hNZW1iZXJFeHByZXNzaW9uKFwiW1wiLHUsbil9ZWxzZSBpZihMZShcIi5cIikpe2I9ZmFsc2U7Uz10cnVlO249b3QoKTt1PW5ldyBnZShyKS5maW5pc2hNZW1iZXJFeHByZXNzaW9uKFwiLlwiLHUsbil9ZWxzZSBpZih5LnR5cGU9PT10LlRlbXBsYXRlJiZ5LmhlYWQpe2U9dHQoKTt1PW5ldyBnZShyKS5maW5pc2hUYWdnZWRUZW1wbGF0ZUV4cHJlc3Npb24odSxlKX1lbHNle2JyZWFrfX1yZXR1cm4gdX1mdW5jdGlvbiBjdCgpe3ZhciBlLHUsbj15O2U9TmUobHQpO2lmKCFEJiZ5LnR5cGU9PT10LlB1bmN0dWF0b3Ipe2lmKExlKFwiKytcIil8fExlKFwiLS1cIikpe2lmKGwmJmUudHlwZT09PXIuSWRlbnRpZmllciYmcShlLm5hbWUpKXtTZShvLlN0cmljdExIU1Bvc3RmaXgpfWlmKCFTKXtTZShvLkludmFsaWRMSFNJbkFzc2lnbm1lbnQpfVM9Yj1mYWxzZTt1PW1lKCk7ZT1uZXcgZ2UobikuZmluaXNoUG9zdGZpeEV4cHJlc3Npb24odS52YWx1ZSxlKX19cmV0dXJuIGV9ZnVuY3Rpb24gcHQoKXt2YXIgZSx1LG47aWYoeS50eXBlIT09dC5QdW5jdHVhdG9yJiZ5LnR5cGUhPT10LktleXdvcmQpe3U9Y3QoKX1lbHNlIGlmKExlKFwiKytcIil8fExlKFwiLS1cIikpe249eTtlPW1lKCk7dT1OZShwdCk7aWYobCYmdS50eXBlPT09ci5JZGVudGlmaWVyJiZxKHUubmFtZSkpe1NlKG8uU3RyaWN0TEhTUHJlZml4KX1pZighUyl7U2Uoby5JbnZhbGlkTEhTSW5Bc3NpZ25tZW50KX11PW5ldyBnZShuKS5maW5pc2hVbmFyeUV4cHJlc3Npb24oZS52YWx1ZSx1KTtTPWI9ZmFsc2V9ZWxzZSBpZihMZShcIitcIil8fExlKFwiLVwiKXx8TGUoXCJ+XCIpfHxMZShcIiFcIikpe249eTtlPW1lKCk7dT1OZShwdCk7dT1uZXcgZ2UobikuZmluaXNoVW5hcnlFeHByZXNzaW9uKGUudmFsdWUsdSk7Uz1iPWZhbHNlfWVsc2UgaWYoT2UoXCJkZWxldGVcIil8fE9lKFwidm9pZFwiKXx8T2UoXCJ0eXBlb2ZcIikpe249eTtlPW1lKCk7dT1OZShwdCk7dT1uZXcgZ2UobikuZmluaXNoVW5hcnlFeHByZXNzaW9uKGUudmFsdWUsdSk7aWYobCYmdS5vcGVyYXRvcj09PVwiZGVsZXRlXCImJnUuYXJndW1lbnQudHlwZT09PXIuSWRlbnRpZmllcil7U2Uoby5TdHJpY3REZWxldGUpfVM9Yj1mYWxzZX1lbHNle3U9Y3QoKX1yZXR1cm4gdX1mdW5jdGlvbiBEdChlLHUpe3ZhciBuPTA7aWYoZS50eXBlIT09dC5QdW5jdHVhdG9yJiZlLnR5cGUhPT10LktleXdvcmQpe3JldHVybiAwfXN3aXRjaChlLnZhbHVlKXtjYXNlXCJ8fFwiOm49MTticmVhaztjYXNlXCImJlwiOm49MjticmVhaztjYXNlXCJ8XCI6bj0zO2JyZWFrO2Nhc2VcIl5cIjpuPTQ7YnJlYWs7Y2FzZVwiJlwiOm49NTticmVhaztjYXNlXCI9PVwiOmNhc2VcIiE9XCI6Y2FzZVwiPT09XCI6Y2FzZVwiIT09XCI6bj02O2JyZWFrO2Nhc2VcIjxcIjpjYXNlXCI+XCI6Y2FzZVwiPD1cIjpjYXNlXCI+PVwiOmNhc2VcImluc3RhbmNlb2ZcIjpuPTc7YnJlYWs7Y2FzZVwiaW5cIjpuPXU/NzowO2JyZWFrO2Nhc2VcIjw8XCI6Y2FzZVwiPj5cIjpjYXNlXCI+Pj5cIjpuPTg7YnJlYWs7Y2FzZVwiK1wiOmNhc2VcIi1cIjpuPTk7YnJlYWs7Y2FzZVwiKlwiOmNhc2VcIi9cIjpjYXNlXCIlXCI6bj0xMTticmVhaztkZWZhdWx0OmJyZWFrfXJldHVybiBufWZ1bmN0aW9uIGh0KCl7dmFyIGUsdCx1LG4scixpLG8scyxhLGw7ZT15O2E9TmUocHQpO249eTtyPUR0KG4sQi5hbGxvd0luKTtpZihyPT09MCl7cmV0dXJuIGF9Uz1iPWZhbHNlO24ucHJlYz1yO21lKCk7dD1bZSx5XTtvPVRlKHB0KTtpPVthLG4sb107d2hpbGUoKHI9RHQoeSxCLmFsbG93SW4pKT4wKXt3aGlsZShpLmxlbmd0aD4yJiZyPD1pW2kubGVuZ3RoLTJdLnByZWMpe289aS5wb3AoKTtzPWkucG9wKCkudmFsdWU7YT1pLnBvcCgpO3QucG9wKCk7dT1uZXcgZ2UodFt0Lmxlbmd0aC0xXSkuZmluaXNoQmluYXJ5RXhwcmVzc2lvbihzLGEsbyk7aS5wdXNoKHUpfW49bWUoKTtuLnByZWM9cjtpLnB1c2gobik7dC5wdXNoKHkpO3U9VGUocHQpO2kucHVzaCh1KX1sPWkubGVuZ3RoLTE7dT1pW2xdO3QucG9wKCk7d2hpbGUobD4xKXt1PW5ldyBnZSh0LnBvcCgpKS5maW5pc2hCaW5hcnlFeHByZXNzaW9uKGlbbC0xXS52YWx1ZSxpW2wtMl0sdSk7bC09Mn1yZXR1cm4gdX1mdW5jdGlvbiBtdCgpe3ZhciBlLHQsdSxuLHI7cj15O2U9TmUoaHQpO2lmKExlKFwiP1wiKSl7bWUoKTt0PUIuYWxsb3dJbjtCLmFsbG93SW49dHJ1ZTt1PVRlKGd0KTtCLmFsbG93SW49dDtrZShcIjpcIik7bj1UZShndCk7ZT1uZXcgZ2UocikuZmluaXNoQ29uZGl0aW9uYWxFeHByZXNzaW9uKGUsdSxuKTtTPWI9ZmFsc2V9cmV0dXJuIGV9ZnVuY3Rpb24gZHQoKXtpZihMZShcIntcIikpe3JldHVybiBYdCgpfXJldHVybiBUZShndCl9ZnVuY3Rpb24gQXQoZSx0KXt2YXIgdTtzd2l0Y2godC50eXBlKXtjYXNlIHIuSWRlbnRpZmllcjpadChlLHQsdC5uYW1lKTticmVhaztjYXNlIHIuUmVzdEVsZW1lbnQ6QXQoZSx0LmFyZ3VtZW50KTticmVhaztjYXNlIHIuQXNzaWdubWVudFBhdHRlcm46QXQoZSx0LmxlZnQpO2JyZWFrO2Nhc2Ugci5BcnJheVBhdHRlcm46Zm9yKHU9MDt1PHQuZWxlbWVudHMubGVuZ3RoO3UrKyl7aWYodC5lbGVtZW50c1t1XSE9PW51bGwpe0F0KGUsdC5lbGVtZW50c1t1XSl9fWJyZWFrO2Nhc2Ugci5ZaWVsZEV4cHJlc3Npb246YnJlYWs7ZGVmYXVsdDp3KHQudHlwZT09PXIuT2JqZWN0UGF0dGVybixcIkludmFsaWQgdHlwZVwiKTtmb3IodT0wO3U8dC5wcm9wZXJ0aWVzLmxlbmd0aDt1Kyspe0F0KGUsdC5wcm9wZXJ0aWVzW3VdLnZhbHVlKX1icmVha319ZnVuY3Rpb24gQ3QoZSl7dmFyIHQsdSxuLHMsYSxmLGMscDthPVtdO2Y9MDtzPVtlXTtzd2l0Y2goZS50eXBlKXtjYXNlIHIuSWRlbnRpZmllcjpicmVhaztjYXNlIGkuQXJyb3dQYXJhbWV0ZXJQbGFjZUhvbGRlcjpzPWUucGFyYW1zO2JyZWFrO2RlZmF1bHQ6cmV0dXJuIG51bGx9Yz17cGFyYW1TZXQ6e319O2Zvcih0PTAsdT1zLmxlbmd0aDt0PHU7dCs9MSl7bj1zW3RdO3N3aXRjaChuLnR5cGUpe2Nhc2Ugci5Bc3NpZ25tZW50UGF0dGVybjpzW3RdPW4ubGVmdDtpZihuLnJpZ2h0LnR5cGU9PT1yLllpZWxkRXhwcmVzc2lvbil7aWYobi5yaWdodC5hcmd1bWVudCl7d2UoeSl9bi5yaWdodC50eXBlPXIuSWRlbnRpZmllcjtuLnJpZ2h0Lm5hbWU9XCJ5aWVsZFwiO2RlbGV0ZSBuLnJpZ2h0LmFyZ3VtZW50O2RlbGV0ZSBuLnJpZ2h0LmRlbGVnYXRlfWEucHVzaChuLnJpZ2h0KTsrK2Y7QXQoYyxuLmxlZnQpO2JyZWFrO2RlZmF1bHQ6QXQoYyxuKTtzW3RdPW47YS5wdXNoKG51bGwpO2JyZWFrfX1pZihsfHwhQi5hbGxvd1lpZWxkKXtmb3IodD0wLHU9cy5sZW5ndGg7dDx1O3QrPTEpe249c1t0XTtpZihuLnR5cGU9PT1yLllpZWxkRXhwcmVzc2lvbil7d2UoeSl9fX1pZihjLm1lc3NhZ2U9PT1vLlN0cmljdFBhcmFtRHVwZSl7cD1sP2Muc3RyaWN0ZWQ6Yy5maXJzdFJlc3RyaWN0ZWQ7d2UocCxjLm1lc3NhZ2UpfWlmKGY9PT0wKXthPVtdfXJldHVybntwYXJhbXM6cyxkZWZhdWx0czphLHN0cmljdGVkOmMuc3RyaWN0ZWQsZmlyc3RSZXN0cmljdGVkOmMuZmlyc3RSZXN0cmljdGVkLG1lc3NhZ2U6Yy5tZXNzYWdlfX1mdW5jdGlvbiBFdChlLHQpe3ZhciB1LG4saTtpZihEKXtfZSh5KX1rZShcIj0+XCIpO3U9bDtuPUIuYWxsb3dZaWVsZDtCLmFsbG93WWllbGQ9dHJ1ZTtpPWR0KCk7aWYobCYmZS5maXJzdFJlc3RyaWN0ZWQpe3dlKGUuZmlyc3RSZXN0cmljdGVkLGUubWVzc2FnZSl9aWYobCYmZS5zdHJpY3RlZCl7X2UoZS5zdHJpY3RlZCxlLm1lc3NhZ2UpfWw9dTtCLmFsbG93WWllbGQ9bjtyZXR1cm4gdC5maW5pc2hBcnJvd0Z1bmN0aW9uRXhwcmVzc2lvbihlLnBhcmFtcyxlLmRlZmF1bHRzLGksaS50eXBlIT09ci5CbG9ja1N0YXRlbWVudCl9ZnVuY3Rpb24gRnQoKXt2YXIgZSx1LG4scjtlPW51bGw7dT1uZXcgRmU7UGUoXCJ5aWVsZFwiKTtpZighRCl7cj1CLmFsbG93WWllbGQ7Qi5hbGxvd1lpZWxkPWZhbHNlO249TGUoXCIqXCIpO2lmKG4pe21lKCk7ZT1ndCgpfWVsc2V7aWYoIUxlKFwiO1wiKSYmIUxlKFwifVwiKSYmIUxlKFwiKVwiKSYmeS50eXBlIT09dC5FT0Ype2U9Z3QoKX19Qi5hbGxvd1lpZWxkPXJ9cmV0dXJuIHUuZmluaXNoWWllbGRFeHByZXNzaW9uKGUsbil9ZnVuY3Rpb24gZ3QoKXt2YXIgZSx0LHUsbixzO3M9eTtlPXk7aWYoIUIuYWxsb3dZaWVsZCYmT2UoXCJ5aWVsZFwiKSl7cmV0dXJuIEZ0KCl9dD1tdCgpO2lmKHQudHlwZT09PWkuQXJyb3dQYXJhbWV0ZXJQbGFjZUhvbGRlcnx8TGUoXCI9PlwiKSl7Uz1iPWZhbHNlO249Q3QodCk7aWYobil7eD1udWxsO3JldHVybiBFdChuLG5ldyBnZShzKSl9cmV0dXJuIHR9aWYoTWUoKSl7aWYoIVMpe1NlKG8uSW52YWxpZExIU0luQXNzaWdubWVudCl9aWYobCYmdC50eXBlPT09ci5JZGVudGlmaWVyKXtpZihxKHQubmFtZSkpe19lKGUsby5TdHJpY3RMSFNBc3NpZ25tZW50KX1pZihOKHQubmFtZSkpe19lKGUsby5TdHJpY3RSZXNlcnZlZFdvcmQpfX1pZighTGUoXCI9XCIpKXtTPWI9ZmFsc2V9ZWxzZXtRZSh0KX1lPW1lKCk7dT1UZShndCk7dD1uZXcgZ2UocykuZmluaXNoQXNzaWdubWVudEV4cHJlc3Npb24oZS52YWx1ZSx0LHUpO3g9bnVsbH1yZXR1cm4gdH1mdW5jdGlvbiB5dCgpe3ZhciBlLHQ9eSx1O2U9VGUoZ3QpO2lmKExlKFwiLFwiKSl7dT1bZV07d2hpbGUoQTxnKXtpZighTGUoXCIsXCIpKXticmVha31tZSgpO3UucHVzaChUZShndCkpfWU9bmV3IGdlKHQpLmZpbmlzaFNlcXVlbmNlRXhwcmVzc2lvbih1KX1yZXR1cm4gZX1mdW5jdGlvbiBCdCgpe2lmKHkudHlwZT09PXQuS2V5d29yZCl7c3dpdGNoKHkudmFsdWUpe2Nhc2VcImV4cG9ydFwiOmlmKEIuc291cmNlVHlwZSE9PVwibW9kdWxlXCIpe19lKHksby5JbGxlZ2FsRXhwb3J0RGVjbGFyYXRpb24pfXJldHVybiBjdSgpO2Nhc2VcImltcG9ydFwiOmlmKEIuc291cmNlVHlwZSE9PVwibW9kdWxlXCIpe19lKHksby5JbGxlZ2FsSW1wb3J0RGVjbGFyYXRpb24pfXJldHVybiBkdSgpO2Nhc2VcImNvbnN0XCI6Y2FzZVwibGV0XCI6cmV0dXJuIFB0KHtpbkZvcjpmYWxzZX0pO2Nhc2VcImZ1bmN0aW9uXCI6cmV0dXJuIHR1KG5ldyBGZSk7Y2FzZVwiY2xhc3NcIjpyZXR1cm4gcnUoKX19cmV0dXJuIEp0KCl9ZnVuY3Rpb24gdnQoKXt2YXIgZT1bXTt3aGlsZShBPGcpe2lmKExlKFwifVwiKSl7YnJlYWt9ZS5wdXNoKEJ0KCkpfXJldHVybiBlfWZ1bmN0aW9uIGJ0KCl7dmFyIGUsdD1uZXcgRmU7a2UoXCJ7XCIpO2U9dnQoKTtrZShcIn1cIik7cmV0dXJuIHQuZmluaXNoQmxvY2tTdGF0ZW1lbnQoZSl9ZnVuY3Rpb24gU3QoZSl7dmFyIHUsbj1uZXcgRmU7dT1tZSgpO2lmKHUudHlwZT09PXQuS2V5d29yZCYmdS52YWx1ZT09PVwieWllbGRcIil7aWYobCl7X2UodSxvLlN0cmljdFJlc2VydmVkV29yZCl9aWYoIUIuYWxsb3dZaWVsZCl7d2UodSl9fWVsc2UgaWYodS50eXBlIT09dC5JZGVudGlmaWVyKXtpZihsJiZ1LnR5cGU9PT10LktleXdvcmQmJk4odS52YWx1ZSkpe19lKHUsby5TdHJpY3RSZXNlcnZlZFdvcmQpfWVsc2V7aWYobHx8dS52YWx1ZSE9PVwibGV0XCJ8fGUhPT1cInZhclwiKXt3ZSh1KX19fWVsc2UgaWYoQi5zb3VyY2VUeXBlPT09XCJtb2R1bGVcIiYmdS50eXBlPT09dC5JZGVudGlmaWVyJiZ1LnZhbHVlPT09XCJhd2FpdFwiKXtfZSh1KX1yZXR1cm4gbi5maW5pc2hJZGVudGlmaWVyKHUudmFsdWUpfWZ1bmN0aW9uIHh0KGUpe3ZhciB0PW51bGwsdSxuPW5ldyBGZSxpPVtdO3U9V2UoaSxcInZhclwiKTtpZihsJiZxKHUubmFtZSkpe1NlKG8uU3RyaWN0VmFyTmFtZSl9aWYoTGUoXCI9XCIpKXttZSgpO3Q9VGUoZ3QpfWVsc2UgaWYodS50eXBlIT09ci5JZGVudGlmaWVyJiYhZS5pbkZvcil7a2UoXCI9XCIpfXJldHVybiBuLmZpbmlzaFZhcmlhYmxlRGVjbGFyYXRvcih1LHQpfWZ1bmN0aW9uIHd0KGUpe3ZhciB0PVtdO2Rve3QucHVzaCh4dCh7aW5Gb3I6ZS5pbkZvcn0pKTtpZighTGUoXCIsXCIpKXticmVha31tZSgpfXdoaWxlKEE8Zyk7cmV0dXJuIHR9ZnVuY3Rpb24gX3QoZSl7dmFyIHQ7UGUoXCJ2YXJcIik7dD13dCh7aW5Gb3I6ZmFsc2V9KTtSZSgpO3JldHVybiBlLmZpbmlzaFZhcmlhYmxlRGVjbGFyYXRpb24odCl9ZnVuY3Rpb24ga3QoZSx0KXt2YXIgdT1udWxsLG4saT1uZXcgRmUscz1bXTtuPVdlKHMsZSk7aWYobCYmbi50eXBlPT09ci5JZGVudGlmaWVyJiZxKG4ubmFtZSkpe1NlKG8uU3RyaWN0VmFyTmFtZSl9aWYoZT09PVwiY29uc3RcIil7aWYoIU9lKFwiaW5cIikmJiFqZShcIm9mXCIpKXtrZShcIj1cIik7dT1UZShndCl9fWVsc2UgaWYoIXQuaW5Gb3ImJm4udHlwZSE9PXIuSWRlbnRpZmllcnx8TGUoXCI9XCIpKXtrZShcIj1cIik7dT1UZShndCl9cmV0dXJuIGkuZmluaXNoVmFyaWFibGVEZWNsYXJhdG9yKG4sdSl9ZnVuY3Rpb24gSXQoZSx0KXt2YXIgdT1bXTtkb3t1LnB1c2goa3QoZSx0KSk7aWYoIUxlKFwiLFwiKSl7YnJlYWt9bWUoKX13aGlsZShBPGcpO3JldHVybiB1fWZ1bmN0aW9uIFB0KGUpe3ZhciB0LHUsbj1uZXcgRmU7dD1tZSgpLnZhbHVlO3codD09PVwibGV0XCJ8fHQ9PT1cImNvbnN0XCIsXCJMZXhpY2FsIGRlY2xhcmF0aW9uIG11c3QgYmUgZWl0aGVyIGxldCBvciBjb25zdFwiKTt1PUl0KHQsZSk7UmUoKTtyZXR1cm4gbi5maW5pc2hMZXhpY2FsRGVjbGFyYXRpb24odSx0KX1mdW5jdGlvbiBMdChlKXt2YXIgdCx1PW5ldyBGZTttZSgpO2lmKExlKFwie1wiKSl7YmUoby5PYmplY3RQYXR0ZXJuQXNSZXN0UGFyYW1ldGVyKX1lLnB1c2goeSk7dD1TdCgpO2lmKExlKFwiPVwiKSl7YmUoby5EZWZhdWx0UmVzdFBhcmFtZXRlcil9aWYoIUxlKFwiKVwiKSl7YmUoby5QYXJhbWV0ZXJBZnRlclJlc3RQYXJhbWV0ZXIpfXJldHVybiB1LmZpbmlzaFJlc3RFbGVtZW50KHQpfWZ1bmN0aW9uIE90KGUpe2tlKFwiO1wiKTtyZXR1cm4gZS5maW5pc2hFbXB0eVN0YXRlbWVudCgpfWZ1bmN0aW9uIGp0KGUpe3ZhciB0PXl0KCk7UmUoKTtyZXR1cm4gZS5maW5pc2hFeHByZXNzaW9uU3RhdGVtZW50KHQpfWZ1bmN0aW9uIE10KGUpe3ZhciB0LHUsbjtQZShcImlmXCIpO2tlKFwiKFwiKTt0PXl0KCk7a2UoXCIpXCIpO3U9SnQoKTtpZihPZShcImVsc2VcIikpe21lKCk7bj1KdCgpfWVsc2V7bj1udWxsfXJldHVybiBlLmZpbmlzaElmU3RhdGVtZW50KHQsdSxuKX1mdW5jdGlvbiBSdChlKXt2YXIgdCx1LG47UGUoXCJkb1wiKTtuPUIuaW5JdGVyYXRpb247Qi5pbkl0ZXJhdGlvbj10cnVlO3Q9SnQoKTtCLmluSXRlcmF0aW9uPW47UGUoXCJ3aGlsZVwiKTtrZShcIihcIik7dT15dCgpO2tlKFwiKVwiKTtpZihMZShcIjtcIikpe21lKCl9cmV0dXJuIGUuZmluaXNoRG9XaGlsZVN0YXRlbWVudCh0LHUpfWZ1bmN0aW9uIFR0KGUpe3ZhciB0LHUsbjtQZShcIndoaWxlXCIpO2tlKFwiKFwiKTt0PXl0KCk7a2UoXCIpXCIpO249Qi5pbkl0ZXJhdGlvbjtCLmluSXRlcmF0aW9uPXRydWU7dT1KdCgpO0IuaW5JdGVyYXRpb249bjtyZXR1cm4gZS5maW5pc2hXaGlsZVN0YXRlbWVudCh0LHUpfWZ1bmN0aW9uIE50KGUpe3ZhciB0LHUsbixyLGkscyxhLGwsZixjLHAsRCxoPUIuYWxsb3dJbjt0PWk9cz1udWxsO3U9dHJ1ZTtQZShcImZvclwiKTtrZShcIihcIik7aWYoTGUoXCI7XCIpKXttZSgpfWVsc2V7aWYoT2UoXCJ2YXJcIikpe3Q9bmV3IEZlO21lKCk7Qi5hbGxvd0luPWZhbHNlO2M9d3Qoe2luRm9yOnRydWV9KTtCLmFsbG93SW49aDtpZihjLmxlbmd0aD09PTEmJk9lKFwiaW5cIikpe3Q9dC5maW5pc2hWYXJpYWJsZURlY2xhcmF0aW9uKGMpO21lKCk7YT10O2w9eXQoKTt0PW51bGx9ZWxzZSBpZihjLmxlbmd0aD09PTEmJmNbMF0uaW5pdD09PW51bGwmJmplKFwib2ZcIikpe3Q9dC5maW5pc2hWYXJpYWJsZURlY2xhcmF0aW9uKGMpO21lKCk7YT10O2w9Z3QoKTt0PW51bGw7dT1mYWxzZX1lbHNle3Q9dC5maW5pc2hWYXJpYWJsZURlY2xhcmF0aW9uKGMpO2tlKFwiO1wiKX19ZWxzZSBpZihPZShcImNvbnN0XCIpfHxPZShcImxldFwiKSl7dD1uZXcgRmU7Zj1tZSgpLnZhbHVlO0IuYWxsb3dJbj1mYWxzZTtjPUl0KGYse2luRm9yOnRydWV9KTtCLmFsbG93SW49aDtpZihjLmxlbmd0aD09PTEmJmNbMF0uaW5pdD09PW51bGwmJk9lKFwiaW5cIikpe3Q9dC5maW5pc2hMZXhpY2FsRGVjbGFyYXRpb24oYyxmKTttZSgpO2E9dDtsPXl0KCk7dD1udWxsfWVsc2UgaWYoYy5sZW5ndGg9PT0xJiZjWzBdLmluaXQ9PT1udWxsJiZqZShcIm9mXCIpKXt0PXQuZmluaXNoTGV4aWNhbERlY2xhcmF0aW9uKGMsZik7bWUoKTthPXQ7bD1ndCgpO3Q9bnVsbDt1PWZhbHNlfWVsc2V7UmUoKTt0PXQuZmluaXNoTGV4aWNhbERlY2xhcmF0aW9uKGMsZil9fWVsc2V7cj15O0IuYWxsb3dJbj1mYWxzZTt0PU5lKGd0KTtCLmFsbG93SW49aDtpZihPZShcImluXCIpKXtpZighUyl7U2Uoby5JbnZhbGlkTEhTSW5Gb3JJbil9bWUoKTtRZSh0KTthPXQ7bD15dCgpO3Q9bnVsbH1lbHNlIGlmKGplKFwib2ZcIikpe2lmKCFTKXtTZShvLkludmFsaWRMSFNJbkZvckxvb3ApfW1lKCk7UWUodCk7YT10O2w9Z3QoKTt0PW51bGw7dT1mYWxzZX1lbHNle2lmKExlKFwiLFwiKSl7bj1bdF07d2hpbGUoTGUoXCIsXCIpKXttZSgpO24ucHVzaChUZShndCkpfXQ9bmV3IGdlKHIpLmZpbmlzaFNlcXVlbmNlRXhwcmVzc2lvbihuKX1rZShcIjtcIil9fX1pZih0eXBlb2YgYT09PVwidW5kZWZpbmVkXCIpe2lmKCFMZShcIjtcIikpe2k9eXQoKX1rZShcIjtcIik7aWYoIUxlKFwiKVwiKSl7cz15dCgpfX1rZShcIilcIik7RD1CLmluSXRlcmF0aW9uO0IuaW5JdGVyYXRpb249dHJ1ZTtwPVRlKEp0KTtCLmluSXRlcmF0aW9uPUQ7cmV0dXJuIHR5cGVvZiBhPT09XCJ1bmRlZmluZWRcIj9lLmZpbmlzaEZvclN0YXRlbWVudCh0LGkscyxwKTp1P2UuZmluaXNoRm9ySW5TdGF0ZW1lbnQoYSxsLHApOmUuZmluaXNoRm9yT2ZTdGF0ZW1lbnQoYSxsLHApfWZ1bmN0aW9uIHF0KGUpe3ZhciB1PW51bGwsbjtQZShcImNvbnRpbnVlXCIpO2lmKGEuY2hhckNvZGVBdChBKT09PTU5KXttZSgpO2lmKCFCLmluSXRlcmF0aW9uKXtiZShvLklsbGVnYWxDb250aW51ZSl9cmV0dXJuIGUuZmluaXNoQ29udGludWVTdGF0ZW1lbnQobnVsbCl9aWYoRCl7aWYoIUIuaW5JdGVyYXRpb24pe2JlKG8uSWxsZWdhbENvbnRpbnVlKX1yZXR1cm4gZS5maW5pc2hDb250aW51ZVN0YXRlbWVudChudWxsKX1pZih5LnR5cGU9PT10LklkZW50aWZpZXIpe3U9U3QoKTtuPVwiJFwiK3UubmFtZTtpZighT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKEIubGFiZWxTZXQsbikpe2JlKG8uVW5rbm93bkxhYmVsLHUubmFtZSl9fVJlKCk7aWYodT09PW51bGwmJiFCLmluSXRlcmF0aW9uKXtiZShvLklsbGVnYWxDb250aW51ZSl9cmV0dXJuIGUuZmluaXNoQ29udGludWVTdGF0ZW1lbnQodSl9ZnVuY3Rpb24gVXQoZSl7dmFyIHU9bnVsbCxuO1BlKFwiYnJlYWtcIik7aWYoYS5jaGFyQ29kZUF0KGgpPT09NTkpe21lKCk7aWYoIShCLmluSXRlcmF0aW9ufHxCLmluU3dpdGNoKSl7YmUoby5JbGxlZ2FsQnJlYWspfXJldHVybiBlLmZpbmlzaEJyZWFrU3RhdGVtZW50KG51bGwpfWlmKEQpe2lmKCEoQi5pbkl0ZXJhdGlvbnx8Qi5pblN3aXRjaCkpe2JlKG8uSWxsZWdhbEJyZWFrKX1yZXR1cm4gZS5maW5pc2hCcmVha1N0YXRlbWVudChudWxsKX1pZih5LnR5cGU9PT10LklkZW50aWZpZXIpe3U9U3QoKTtuPVwiJFwiK3UubmFtZTtpZighT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKEIubGFiZWxTZXQsbikpe2JlKG8uVW5rbm93bkxhYmVsLHUubmFtZSl9fVJlKCk7aWYodT09PW51bGwmJiEoQi5pbkl0ZXJhdGlvbnx8Qi5pblN3aXRjaCkpe2JlKG8uSWxsZWdhbEJyZWFrKX1yZXR1cm4gZS5maW5pc2hCcmVha1N0YXRlbWVudCh1KX1mdW5jdGlvbiB6dChlKXt2YXIgdT1udWxsO1BlKFwicmV0dXJuXCIpO2lmKCFCLmluRnVuY3Rpb25Cb2R5KXtTZShvLklsbGVnYWxSZXR1cm4pfWlmKGEuY2hhckNvZGVBdChoKT09PTMyKXtpZihNKGEuY2hhckNvZGVBdChoKzEpKSl7dT15dCgpO1JlKCk7cmV0dXJuIGUuZmluaXNoUmV0dXJuU3RhdGVtZW50KHUpfX1pZihEKXtyZXR1cm4gZS5maW5pc2hSZXR1cm5TdGF0ZW1lbnQobnVsbCl9aWYoIUxlKFwiO1wiKSl7aWYoIUxlKFwifVwiKSYmeS50eXBlIT09dC5FT0Ype3U9eXQoKX19UmUoKTtyZXR1cm4gZS5maW5pc2hSZXR1cm5TdGF0ZW1lbnQodSl9ZnVuY3Rpb24gV3QoZSl7dmFyIHQsdTtpZihsKXtTZShvLlN0cmljdE1vZGVXaXRoKX1QZShcIndpdGhcIik7a2UoXCIoXCIpO3Q9eXQoKTtrZShcIilcIik7dT1KdCgpO3JldHVybiBlLmZpbmlzaFdpdGhTdGF0ZW1lbnQodCx1KX1mdW5jdGlvbiBWdCgpe3ZhciBlLHQ9W10sdSxuPW5ldyBGZTtpZihPZShcImRlZmF1bHRcIikpe21lKCk7ZT1udWxsfWVsc2V7UGUoXCJjYXNlXCIpO2U9eXQoKX1rZShcIjpcIik7d2hpbGUoQTxnKXtpZihMZShcIn1cIil8fE9lKFwiZGVmYXVsdFwiKXx8T2UoXCJjYXNlXCIpKXticmVha311PUJ0KCk7dC5wdXNoKHUpfXJldHVybiBuLmZpbmlzaFN3aXRjaENhc2UoZSx0KX1mdW5jdGlvbiBZdChlKXt2YXIgdCx1LG4scixpO1BlKFwic3dpdGNoXCIpO2tlKFwiKFwiKTt0PXl0KCk7a2UoXCIpXCIpO2tlKFwie1wiKTt1PVtdO2lmKExlKFwifVwiKSl7bWUoKTtyZXR1cm4gZS5maW5pc2hTd2l0Y2hTdGF0ZW1lbnQodCx1KX1yPUIuaW5Td2l0Y2g7Qi5pblN3aXRjaD10cnVlO2k9ZmFsc2U7d2hpbGUoQTxnKXtpZihMZShcIn1cIikpe2JyZWFrfW49VnQoKTtpZihuLnRlc3Q9PT1udWxsKXtpZihpKXtiZShvLk11bHRpcGxlRGVmYXVsdHNJblN3aXRjaCl9aT10cnVlfXUucHVzaChuKX1CLmluU3dpdGNoPXI7a2UoXCJ9XCIpO3JldHVybiBlLmZpbmlzaFN3aXRjaFN0YXRlbWVudCh0LHUpfWZ1bmN0aW9uIEd0KGUpe3ZhciB0O1BlKFwidGhyb3dcIik7aWYoRCl7YmUoby5OZXdsaW5lQWZ0ZXJUaHJvdyl9dD15dCgpO1JlKCk7cmV0dXJuIGUuZmluaXNoVGhyb3dTdGF0ZW1lbnQodCl9ZnVuY3Rpb24gS3QoKXt2YXIgZSx0PVtdLHU9e30sbixyLGkscz1uZXcgRmU7UGUoXCJjYXRjaFwiKTtrZShcIihcIik7aWYoTGUoXCIpXCIpKXt3ZSh5KX1lPVdlKHQpO2ZvcihyPTA7cjx0Lmxlbmd0aDtyKyspe249XCIkXCIrdFtyXS52YWx1ZTtpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodSxuKSl7U2Uoby5EdXBsaWNhdGVCaW5kaW5nLHRbcl0udmFsdWUpfXVbbl09dHJ1ZX1pZihsJiZxKGUubmFtZSkpe1NlKG8uU3RyaWN0Q2F0Y2hWYXJpYWJsZSl9a2UoXCIpXCIpO2k9YnQoKTtyZXR1cm4gcy5maW5pc2hDYXRjaENsYXVzZShlLGkpfWZ1bmN0aW9uICR0KGUpe3ZhciB0LHU9bnVsbCxuPW51bGw7UGUoXCJ0cnlcIik7dD1idCgpO2lmKE9lKFwiY2F0Y2hcIikpe3U9S3QoKX1pZihPZShcImZpbmFsbHlcIikpe21lKCk7bj1idCgpfWlmKCF1JiYhbil7YmUoby5Ob0NhdGNoT3JGaW5hbGx5KX1yZXR1cm4gZS5maW5pc2hUcnlTdGF0ZW1lbnQodCx1LG4pfWZ1bmN0aW9uIEh0KGUpe1BlKFwiZGVidWdnZXJcIik7UmUoKTtyZXR1cm4gZS5maW5pc2hEZWJ1Z2dlclN0YXRlbWVudCgpfWZ1bmN0aW9uIEp0KCl7dmFyIGU9eS50eXBlLHUsbixpLHM7aWYoZT09PXQuRU9GKXt3ZSh5KX1pZihlPT09dC5QdW5jdHVhdG9yJiZ5LnZhbHVlPT09XCJ7XCIpe3JldHVybiBidCgpfVM9Yj10cnVlO3M9bmV3IEZlO2lmKGU9PT10LlB1bmN0dWF0b3Ipe3N3aXRjaCh5LnZhbHVlKXtjYXNlXCI7XCI6cmV0dXJuIE90KHMpO2Nhc2VcIihcIjpyZXR1cm4ganQocyk7ZGVmYXVsdDpicmVha319ZWxzZSBpZihlPT09dC5LZXl3b3JkKXtzd2l0Y2goeS52YWx1ZSl7Y2FzZVwiYnJlYWtcIjpyZXR1cm4gVXQocyk7Y2FzZVwiY29udGludWVcIjpyZXR1cm4gcXQocyk7Y2FzZVwiZGVidWdnZXJcIjpyZXR1cm4gSHQocyk7Y2FzZVwiZG9cIjpyZXR1cm4gUnQocyk7Y2FzZVwiZm9yXCI6cmV0dXJuIE50KHMpO2Nhc2VcImZ1bmN0aW9uXCI6cmV0dXJuIHR1KHMpO2Nhc2VcImlmXCI6cmV0dXJuIE10KHMpO2Nhc2VcInJldHVyblwiOnJldHVybiB6dChzKTtjYXNlXCJzd2l0Y2hcIjpyZXR1cm4gWXQocyk7Y2FzZVwidGhyb3dcIjpyZXR1cm4gR3Qocyk7Y2FzZVwidHJ5XCI6cmV0dXJuICR0KHMpO2Nhc2VcInZhclwiOnJldHVybiBfdChzKTtjYXNlXCJ3aGlsZVwiOnJldHVybiBUdChzKTtjYXNlXCJ3aXRoXCI6cmV0dXJuIFd0KHMpO2RlZmF1bHQ6YnJlYWt9fXU9eXQoKTtpZih1LnR5cGU9PT1yLklkZW50aWZpZXImJkxlKFwiOlwiKSl7bWUoKTtpPVwiJFwiK3UubmFtZTtpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoQi5sYWJlbFNldCxpKSl7YmUoby5SZWRlY2xhcmF0aW9uLFwiTGFiZWxcIix1Lm5hbWUpfUIubGFiZWxTZXRbaV09dHJ1ZTtuPUp0KCk7ZGVsZXRlIEIubGFiZWxTZXRbaV07cmV0dXJuIHMuZmluaXNoTGFiZWxlZFN0YXRlbWVudCh1LG4pfVJlKCk7cmV0dXJuIHMuZmluaXNoRXhwcmVzc2lvblN0YXRlbWVudCh1KX1mdW5jdGlvbiBYdCgpe3ZhciBlLHU9W10sbixpLHMsZixjLHAsRCxoLG09bmV3IEZlO2tlKFwie1wiKTt3aGlsZShBPGcpe2lmKHkudHlwZSE9PXQuU3RyaW5nTGl0ZXJhbCl7YnJlYWt9bj15O2U9QnQoKTt1LnB1c2goZSk7aWYoZS5leHByZXNzaW9uLnR5cGUhPT1yLkxpdGVyYWwpe2JyZWFrfWk9YS5zbGljZShuLnN0YXJ0KzEsbi5lbmQtMSk7aWYoaT09PVwidXNlIHN0cmljdFwiKXtsPXRydWU7aWYocyl7X2UocyxvLlN0cmljdE9jdGFsTGl0ZXJhbCl9fWVsc2V7aWYoIXMmJm4ub2N0YWwpe3M9bn19fWY9Qi5sYWJlbFNldDtjPUIuaW5JdGVyYXRpb247cD1CLmluU3dpdGNoO0Q9Qi5pbkZ1bmN0aW9uQm9keTtoPUIucGFyZW50aGVzaXplZENvdW50O0IubGFiZWxTZXQ9e307Qi5pbkl0ZXJhdGlvbj1mYWxzZTtCLmluU3dpdGNoPWZhbHNlO0IuaW5GdW5jdGlvbkJvZHk9dHJ1ZTtCLnBhcmVudGhlc2l6ZWRDb3VudD0wO3doaWxlKEE8Zyl7aWYoTGUoXCJ9XCIpKXticmVha311LnB1c2goQnQoKSl9a2UoXCJ9XCIpO0IubGFiZWxTZXQ9ZjtCLmluSXRlcmF0aW9uPWM7Qi5pblN3aXRjaD1wO0IuaW5GdW5jdGlvbkJvZHk9RDtCLnBhcmVudGhlc2l6ZWRDb3VudD1oO3JldHVybiBtLmZpbmlzaEJsb2NrU3RhdGVtZW50KHUpfWZ1bmN0aW9uIFp0KGUsdCx1KXt2YXIgbj1cIiRcIit1O2lmKGwpe2lmKHEodSkpe2Uuc3RyaWN0ZWQ9dDtlLm1lc3NhZ2U9by5TdHJpY3RQYXJhbU5hbWV9aWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUucGFyYW1TZXQsbikpe2Uuc3RyaWN0ZWQ9dDtlLm1lc3NhZ2U9by5TdHJpY3RQYXJhbUR1cGV9fWVsc2UgaWYoIWUuZmlyc3RSZXN0cmljdGVkKXtpZihxKHUpKXtlLmZpcnN0UmVzdHJpY3RlZD10O2UubWVzc2FnZT1vLlN0cmljdFBhcmFtTmFtZX1lbHNlIGlmKE4odSkpe2UuZmlyc3RSZXN0cmljdGVkPXQ7ZS5tZXNzYWdlPW8uU3RyaWN0UmVzZXJ2ZWRXb3JkfWVsc2UgaWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUucGFyYW1TZXQsbikpe2Uuc3RyaWN0ZWQ9dDtlLm1lc3NhZ2U9by5TdHJpY3RQYXJhbUR1cGV9fWUucGFyYW1TZXRbbl09dHJ1ZX1mdW5jdGlvbiBRdChlKXt2YXIgdCx1LG49W10saSxvO3Q9eTtpZih0LnZhbHVlPT09XCIuLi5cIil7dT1MdChuKTtadChlLHUuYXJndW1lbnQsdS5hcmd1bWVudC5uYW1lKTtlLnBhcmFtcy5wdXNoKHUpO2UuZGVmYXVsdHMucHVzaChudWxsKTtyZXR1cm4gZmFsc2V9dT1WZShuKTtmb3IoaT0wO2k8bi5sZW5ndGg7aSsrKXtadChlLG5baV0sbltpXS52YWx1ZSl9aWYodS50eXBlPT09ci5Bc3NpZ25tZW50UGF0dGVybil7bz11LnJpZ2h0O3U9dS5sZWZ0OysrZS5kZWZhdWx0Q291bnR9ZS5wYXJhbXMucHVzaCh1KTtlLmRlZmF1bHRzLnB1c2gobyk7cmV0dXJuIUxlKFwiKVwiKX1mdW5jdGlvbiBldShlKXt2YXIgdDt0PXtwYXJhbXM6W10sZGVmYXVsdENvdW50OjAsZGVmYXVsdHM6W10sZmlyc3RSZXN0cmljdGVkOmV9O2tlKFwiKFwiKTtpZighTGUoXCIpXCIpKXt0LnBhcmFtU2V0PXt9O3doaWxlKEE8Zyl7aWYoIVF0KHQpKXticmVha31rZShcIixcIil9fWtlKFwiKVwiKTtpZih0LmRlZmF1bHRDb3VudD09PTApe3QuZGVmYXVsdHM9W119cmV0dXJue3BhcmFtczp0LnBhcmFtcyxkZWZhdWx0czp0LmRlZmF1bHRzLHN0cmljdGVkOnQuc3RyaWN0ZWQsZmlyc3RSZXN0cmljdGVkOnQuZmlyc3RSZXN0cmljdGVkLG1lc3NhZ2U6dC5tZXNzYWdlfX1mdW5jdGlvbiB0dShlLHQpe3ZhciB1PW51bGwsbj1bXSxyPVtdLGkscyxhLGYsYyxwLEQsaCxtO209Qi5hbGxvd1lpZWxkO1BlKFwiZnVuY3Rpb25cIik7aD1MZShcIipcIik7aWYoaCl7bWUoKX1pZighdHx8IUxlKFwiKFwiKSl7cz15O3U9U3QoKTtpZihsKXtpZihxKHMudmFsdWUpKXtfZShzLG8uU3RyaWN0RnVuY3Rpb25OYW1lKX19ZWxzZXtpZihxKHMudmFsdWUpKXtjPXM7cD1vLlN0cmljdEZ1bmN0aW9uTmFtZX1lbHNlIGlmKE4ocy52YWx1ZSkpe2M9cztwPW8uU3RyaWN0UmVzZXJ2ZWRXb3JkfX19Qi5hbGxvd1lpZWxkPSFoO2Y9ZXUoYyk7bj1mLnBhcmFtcztyPWYuZGVmYXVsdHM7YT1mLnN0cmljdGVkO2M9Zi5maXJzdFJlc3RyaWN0ZWQ7aWYoZi5tZXNzYWdlKXtwPWYubWVzc2FnZX1EPWw7aT1YdCgpO2lmKGwmJmMpe3dlKGMscCl9aWYobCYmYSl7X2UoYSxwKX1sPUQ7Qi5hbGxvd1lpZWxkPW07cmV0dXJuIGUuZmluaXNoRnVuY3Rpb25EZWNsYXJhdGlvbih1LG4scixpLGgpfWZ1bmN0aW9uIHV1KCl7dmFyIGUsdD1udWxsLHUsbixyLGkscz1bXSxhPVtdLGYsYyxwPW5ldyBGZSxELGg7aD1CLmFsbG93WWllbGQ7UGUoXCJmdW5jdGlvblwiKTtEPUxlKFwiKlwiKTtpZihEKXttZSgpfUIuYWxsb3dZaWVsZD0hRDtpZighTGUoXCIoXCIpKXtlPXk7dD0hbCYmIUQmJk9lKFwieWllbGRcIik/aXQoKTpTdCgpO2lmKGwpe2lmKHEoZS52YWx1ZSkpe19lKGUsby5TdHJpY3RGdW5jdGlvbk5hbWUpfX1lbHNle2lmKHEoZS52YWx1ZSkpe249ZTtyPW8uU3RyaWN0RnVuY3Rpb25OYW1lfWVsc2UgaWYoTihlLnZhbHVlKSl7bj1lO3I9by5TdHJpY3RSZXNlcnZlZFdvcmR9fX1pPWV1KG4pO3M9aS5wYXJhbXM7YT1pLmRlZmF1bHRzO3U9aS5zdHJpY3RlZDtuPWkuZmlyc3RSZXN0cmljdGVkO2lmKGkubWVzc2FnZSl7cj1pLm1lc3NhZ2V9Yz1sO2Y9WHQoKTtpZihsJiZuKXt3ZShuLHIpfWlmKGwmJnUpe19lKHUscil9bD1jO0IuYWxsb3dZaWVsZD1oO3JldHVybiBwLmZpbmlzaEZ1bmN0aW9uRXhwcmVzc2lvbih0LHMsYSxmLEQpfWZ1bmN0aW9uIG51KCl7dmFyIGUsdCx1LG49ZmFsc2UsaSxzLGEsbDtlPW5ldyBGZTtrZShcIntcIik7aT1bXTt3aGlsZSghTGUoXCJ9XCIpKXtpZihMZShcIjtcIikpe21lKCl9ZWxzZXtzPW5ldyBGZTt0PXk7dT1mYWxzZTthPUxlKFwiW1wiKTtpZihMZShcIipcIikpe21lKCl9ZWxzZXtsPSRlKCk7aWYobC5uYW1lPT09XCJzdGF0aWNcIiYmKEhlKCl8fExlKFwiKlwiKSkpe3Q9eTt1PXRydWU7YT1MZShcIltcIik7aWYoTGUoXCIqXCIpKXttZSgpfWVsc2V7bD0kZSgpfX19cz1KZSh0LGwsYSxzKTtpZihzKXtzW1wic3RhdGljXCJdPXU7aWYocy5raW5kPT09XCJpbml0XCIpe3Mua2luZD1cIm1ldGhvZFwifWlmKCF1KXtpZighcy5jb21wdXRlZCYmKHMua2V5Lm5hbWV8fHMua2V5LnZhbHVlLnRvU3RyaW5nKCkpPT09XCJjb25zdHJ1Y3RvclwiKXtpZihzLmtpbmQhPT1cIm1ldGhvZFwifHwhcy5tZXRob2R8fHMudmFsdWUuZ2VuZXJhdG9yKXt3ZSh0LG8uQ29uc3RydWN0b3JTcGVjaWFsTWV0aG9kKX1pZihuKXt3ZSh0LG8uRHVwbGljYXRlQ29uc3RydWN0b3IpfWVsc2V7bj10cnVlfXMua2luZD1cImNvbnN0cnVjdG9yXCJ9fWVsc2V7aWYoIXMuY29tcHV0ZWQmJihzLmtleS5uYW1lfHxzLmtleS52YWx1ZS50b1N0cmluZygpKT09PVwicHJvdG90eXBlXCIpe3dlKHQsby5TdGF0aWNQcm90b3R5cGUpfX1zLnR5cGU9ci5NZXRob2REZWZpbml0aW9uO2RlbGV0ZSBzLm1ldGhvZDtkZWxldGUgcy5zaG9ydGhhbmQ7aS5wdXNoKHMpfWVsc2V7d2UoeSl9fX1tZSgpO3JldHVybiBlLmZpbmlzaENsYXNzQm9keShpKX1mdW5jdGlvbiBydShlKXt2YXIgdT1udWxsLG49bnVsbCxyPW5ldyBGZSxpLG89bDtsPXRydWU7UGUoXCJjbGFzc1wiKTtpZighZXx8eS50eXBlPT09dC5JZGVudGlmaWVyKXt1PVN0KCl9aWYoT2UoXCJleHRlbmRzXCIpKXttZSgpO249VGUobHQpfWk9bnUoKTtsPW87cmV0dXJuIHIuZmluaXNoQ2xhc3NEZWNsYXJhdGlvbih1LG4saSl9ZnVuY3Rpb24gaXUoKXt2YXIgZT1udWxsLHU9bnVsbCxuPW5ldyBGZSxyLGk9bDtsPXRydWU7UGUoXCJjbGFzc1wiKTtpZih5LnR5cGU9PT10LklkZW50aWZpZXIpe2U9U3QoKX1pZihPZShcImV4dGVuZHNcIikpe21lKCk7dT1UZShsdCl9cj1udSgpO2w9aTtyZXR1cm4gbi5maW5pc2hDbGFzc0V4cHJlc3Npb24oZSx1LHIpfWZ1bmN0aW9uIG91KCl7dmFyIGU9bmV3IEZlO2lmKHkudHlwZSE9PXQuU3RyaW5nTGl0ZXJhbCl7YmUoby5JbnZhbGlkTW9kdWxlU3BlY2lmaWVyKX1yZXR1cm4gZS5maW5pc2hMaXRlcmFsKG1lKCkpfWZ1bmN0aW9uIHN1KCl7dmFyIGUsdCx1PW5ldyBGZSxuO2lmKE9lKFwiZGVmYXVsdFwiKSl7bj1uZXcgRmU7bWUoKTt0PW4uZmluaXNoSWRlbnRpZmllcihcImRlZmF1bHRcIil9ZWxzZXt0PVN0KCl9aWYoamUoXCJhc1wiKSl7bWUoKTtlPWl0KCl9cmV0dXJuIHUuZmluaXNoRXhwb3J0U3BlY2lmaWVyKHQsZSl9ZnVuY3Rpb24gYXUoZSl7dmFyIHU9bnVsbCxuLHI9bnVsbCxpPVtdO2lmKHkudHlwZT09PXQuS2V5d29yZCl7c3dpdGNoKHkudmFsdWUpe2Nhc2VcImxldFwiOmNhc2VcImNvbnN0XCI6Y2FzZVwidmFyXCI6Y2FzZVwiY2xhc3NcIjpjYXNlXCJmdW5jdGlvblwiOnU9QnQoKTtyZXR1cm4gZS5maW5pc2hFeHBvcnROYW1lZERlY2xhcmF0aW9uKHUsaSxudWxsKX19a2UoXCJ7XCIpO3doaWxlKCFMZShcIn1cIikpe249bnx8T2UoXCJkZWZhdWx0XCIpO2kucHVzaChzdSgpKTtpZighTGUoXCJ9XCIpKXtrZShcIixcIik7aWYoTGUoXCJ9XCIpKXticmVha319fWtlKFwifVwiKTtpZihqZShcImZyb21cIikpe21lKCk7cj1vdSgpO1JlKCl9ZWxzZSBpZihuKXtiZSh5LnZhbHVlP28uVW5leHBlY3RlZFRva2VuOm8uTWlzc2luZ0Zyb21DbGF1c2UseS52YWx1ZSl9ZWxzZXtSZSgpfXJldHVybiBlLmZpbmlzaEV4cG9ydE5hbWVkRGVjbGFyYXRpb24odSxpLHIpfWZ1bmN0aW9uIGx1KGUpe3ZhciB0PW51bGwsdT1udWxsO1BlKFwiZGVmYXVsdFwiKTtpZihPZShcImZ1bmN0aW9uXCIpKXt0PXR1KG5ldyBGZSx0cnVlKTtyZXR1cm4gZS5maW5pc2hFeHBvcnREZWZhdWx0RGVjbGFyYXRpb24odCl9aWYoT2UoXCJjbGFzc1wiKSl7dD1ydSh0cnVlKTtyZXR1cm4gZS5maW5pc2hFeHBvcnREZWZhdWx0RGVjbGFyYXRpb24odCl9aWYoamUoXCJmcm9tXCIpKXtiZShvLlVuZXhwZWN0ZWRUb2tlbix5LnZhbHVlKX1pZihMZShcIntcIikpe3U9WmUoKX1lbHNlIGlmKExlKFwiW1wiKSl7dT1ZZSgpfWVsc2V7dT1ndCgpfVJlKCk7cmV0dXJuIGUuZmluaXNoRXhwb3J0RGVmYXVsdERlY2xhcmF0aW9uKHUpfWZ1bmN0aW9uIGZ1KGUpe3ZhciB0O2tlKFwiKlwiKTtpZighamUoXCJmcm9tXCIpKXtiZSh5LnZhbHVlP28uVW5leHBlY3RlZFRva2VuOm8uTWlzc2luZ0Zyb21DbGF1c2UseS52YWx1ZSl9bWUoKTt0PW91KCk7UmUoKTtyZXR1cm4gZS5maW5pc2hFeHBvcnRBbGxEZWNsYXJhdGlvbih0KX1mdW5jdGlvbiBjdSgpe3ZhciBlPW5ldyBGZTtpZihCLmluRnVuY3Rpb25Cb2R5KXtiZShvLklsbGVnYWxFeHBvcnREZWNsYXJhdGlvbil9UGUoXCJleHBvcnRcIik7aWYoT2UoXCJkZWZhdWx0XCIpKXtyZXR1cm4gbHUoZSl9aWYoTGUoXCIqXCIpKXtyZXR1cm4gZnUoZSl9cmV0dXJuIGF1KGUpfWZ1bmN0aW9uIHB1KCl7dmFyIGUsdCx1PW5ldyBGZTt0PWl0KCk7aWYoamUoXCJhc1wiKSl7bWUoKTtlPVN0KCl9cmV0dXJuIHUuZmluaXNoSW1wb3J0U3BlY2lmaWVyKGUsdCl9ZnVuY3Rpb24gRHUoKXt2YXIgZT1bXTtrZShcIntcIik7d2hpbGUoIUxlKFwifVwiKSl7ZS5wdXNoKHB1KCkpO2lmKCFMZShcIn1cIikpe2tlKFwiLFwiKTtpZihMZShcIn1cIikpe2JyZWFrfX19a2UoXCJ9XCIpO3JldHVybiBlfWZ1bmN0aW9uIGh1KCl7dmFyIGUsdD1uZXcgRmU7ZT1pdCgpO3JldHVybiB0LmZpbmlzaEltcG9ydERlZmF1bHRTcGVjaWZpZXIoZSl9ZnVuY3Rpb24gbXUoKXt2YXIgZSx0PW5ldyBGZTtrZShcIipcIik7aWYoIWplKFwiYXNcIikpe2JlKG8uTm9Bc0FmdGVySW1wb3J0TmFtZXNwYWNlKX1tZSgpO2U9aXQoKTtyZXR1cm4gdC5maW5pc2hJbXBvcnROYW1lc3BhY2VTcGVjaWZpZXIoZSl9ZnVuY3Rpb24gZHUoKXt2YXIgZT1bXSx1LG49bmV3IEZlO2lmKEIuaW5GdW5jdGlvbkJvZHkpe2JlKG8uSWxsZWdhbEltcG9ydERlY2xhcmF0aW9uKX1QZShcImltcG9ydFwiKTtpZih5LnR5cGU9PT10LlN0cmluZ0xpdGVyYWwpe3U9b3UoKX1lbHNle2lmKExlKFwie1wiKSl7ZT1lLmNvbmNhdChEdSgpKX1lbHNlIGlmKExlKFwiKlwiKSl7ZS5wdXNoKG11KCkpfWVsc2UgaWYoY2UoeSkmJiFPZShcImRlZmF1bHRcIikpe2UucHVzaChodSgpKTtpZihMZShcIixcIikpe21lKCk7aWYoTGUoXCIqXCIpKXtlLnB1c2gobXUoKSl9ZWxzZSBpZihMZShcIntcIikpe2U9ZS5jb25jYXQoRHUoKSl9ZWxzZXt3ZSh5KX19fWVsc2V7d2UobWUoKSl9aWYoIWplKFwiZnJvbVwiKSl7YmUoeS52YWx1ZT9vLlVuZXhwZWN0ZWRUb2tlbjpvLk1pc3NpbmdGcm9tQ2xhdXNlLHkudmFsdWUpfW1lKCk7dT1vdSgpfVJlKCk7cmV0dXJuIG4uZmluaXNoSW1wb3J0RGVjbGFyYXRpb24oZSx1KX1mdW5jdGlvbiBBdSgpe3ZhciBlLHU9W10sbixpLHM7d2hpbGUoQTxnKXtuPXk7aWYobi50eXBlIT09dC5TdHJpbmdMaXRlcmFsKXticmVha31lPUJ0KCk7dS5wdXNoKGUpO2lmKGUuZXhwcmVzc2lvbi50eXBlIT09ci5MaXRlcmFsKXticmVha31pPWEuc2xpY2Uobi5zdGFydCsxLG4uZW5kLTEpO2lmKGk9PT1cInVzZSBzdHJpY3RcIil7bD10cnVlO2lmKHMpe19lKHMsby5TdHJpY3RPY3RhbExpdGVyYWwpfX1lbHNle2lmKCFzJiZuLm9jdGFsKXtzPW59fX13aGlsZShBPGcpe2U9QnQoKTtpZih0eXBlb2YgZT09PVwidW5kZWZpbmVkXCIpe2JyZWFrfXUucHVzaChlKX1yZXR1cm4gdX1mdW5jdGlvbiBDdSgpe3ZhciBlLHQ7ZGUoKTt0PW5ldyBGZTtlPUF1KCk7cmV0dXJuIHQuZmluaXNoUHJvZ3JhbShlLEIuc291cmNlVHlwZSl9ZnVuY3Rpb24gRXUoKXt2YXIgZSx0LHUsbj1bXTtmb3IoZT0wO2U8di50b2tlbnMubGVuZ3RoOysrZSl7dD12LnRva2Vuc1tlXTt1PXt0eXBlOnQudHlwZSx2YWx1ZTp0LnZhbHVlfTtpZih0LnJlZ2V4KXt1LnJlZ2V4PXtwYXR0ZXJuOnQucmVnZXgucGF0dGVybixmbGFnczp0LnJlZ2V4LmZsYWdzfX1pZih2LnJhbmdlKXt1LnJhbmdlPXQucmFuZ2V9aWYodi5sb2Mpe3UubG9jPXQubG9jfW4ucHVzaCh1KX12LnRva2Vucz1ufWZ1bmN0aW9uIEZ1KGUsdSl7dmFyIG4scjtuPVN0cmluZztpZih0eXBlb2YgZSE9PVwic3RyaW5nXCImJiEoZSBpbnN0YW5jZW9mIFN0cmluZykpe2U9bihlKX1hPWU7Zj0wO2M9YS5sZW5ndGg+MD8xOjA7cD0wO0E9ZjtDPWM7RT1wO2c9YS5sZW5ndGg7eT1udWxsO0I9e2FsbG93SW46dHJ1ZSxhbGxvd1lpZWxkOnRydWUsbGFiZWxTZXQ6e30saW5GdW5jdGlvbkJvZHk6ZmFsc2UsaW5JdGVyYXRpb246ZmFsc2UsaW5Td2l0Y2g6ZmFsc2UsbGFzdENvbW1lbnRTdGFydDotMSxjdXJseVN0YWNrOltdfTt2PXt9O3U9dXx8e307dS50b2tlbnM9dHJ1ZTt2LnRva2Vucz1bXTt2LnRva2VuaXplPXRydWU7di5vcGVuUGFyZW5Ub2tlbj0tMTt2Lm9wZW5DdXJseVRva2VuPS0xO3YucmFuZ2U9dHlwZW9mIHUucmFuZ2U9PT1cImJvb2xlYW5cIiYmdS5yYW5nZTt2LmxvYz10eXBlb2YgdS5sb2M9PT1cImJvb2xlYW5cIiYmdS5sb2M7aWYodHlwZW9mIHUuY29tbWVudD09PVwiYm9vbGVhblwiJiZ1LmNvbW1lbnQpe3YuY29tbWVudHM9W119aWYodHlwZW9mIHUudG9sZXJhbnQ9PT1cImJvb2xlYW5cIiYmdS50b2xlcmFudCl7di5lcnJvcnM9W119dHJ5e2RlKCk7aWYoeS50eXBlPT09dC5FT0Ype3JldHVybiB2LnRva2Vuc31tZSgpO3doaWxlKHkudHlwZSE9PXQuRU9GKXt0cnl7bWUoKX1jYXRjaChpKXtpZih2LmVycm9ycyl7eWUoaSk7YnJlYWt9ZWxzZXt0aHJvdyBpfX19RXUoKTtyPXYudG9rZW5zO2lmKHR5cGVvZiB2LmNvbW1lbnRzIT09XCJ1bmRlZmluZWRcIil7ci5jb21tZW50cz12LmNvbW1lbnRzfWlmKHR5cGVvZiB2LmVycm9ycyE9PVwidW5kZWZpbmVkXCIpe3IuZXJyb3JzPXYuZXJyb3JzfX1jYXRjaChvKXt0aHJvdyBvfWZpbmFsbHl7dj17fX1yZXR1cm4gcn1mdW5jdGlvbiBndShlLHQpe3ZhciB1LG47bj1TdHJpbmc7aWYodHlwZW9mIGUhPT1cInN0cmluZ1wiJiYhKGUgaW5zdGFuY2VvZiBTdHJpbmcpKXtlPW4oZSl9YT1lO2Y9MDtjPWEubGVuZ3RoPjA/MTowO3A9MDtBPWY7Qz1jO0U9cDtnPWEubGVuZ3RoO3k9bnVsbDtCPXthbGxvd0luOnRydWUsYWxsb3dZaWVsZDp0cnVlLGxhYmVsU2V0Ont9LGluRnVuY3Rpb25Cb2R5OmZhbHNlLGluSXRlcmF0aW9uOmZhbHNlLGluU3dpdGNoOmZhbHNlLGxhc3RDb21tZW50U3RhcnQ6LTEsY3VybHlTdGFjazpbXSxzb3VyY2VUeXBlOlwic2NyaXB0XCJ9O2w9ZmFsc2U7dj17fTtpZih0eXBlb2YgdCE9PVwidW5kZWZpbmVkXCIpe3YucmFuZ2U9dHlwZW9mIHQucmFuZ2U9PT1cImJvb2xlYW5cIiYmdC5yYW5nZTt2LmxvYz10eXBlb2YgdC5sb2M9PT1cImJvb2xlYW5cIiYmdC5sb2M7di5hdHRhY2hDb21tZW50PXR5cGVvZiB0LmF0dGFjaENvbW1lbnQ9PT1cImJvb2xlYW5cIiYmdC5hdHRhY2hDb21tZW50O2lmKHYubG9jJiZ0LnNvdXJjZSE9PW51bGwmJnQuc291cmNlIT09dW5kZWZpbmVkKXt2LnNvdXJjZT1uKHQuc291cmNlKX1pZih0eXBlb2YgdC50b2tlbnM9PT1cImJvb2xlYW5cIiYmdC50b2tlbnMpe3YudG9rZW5zPVtdfWlmKHR5cGVvZiB0LmNvbW1lbnQ9PT1cImJvb2xlYW5cIiYmdC5jb21tZW50KXt2LmNvbW1lbnRzPVtdfWlmKHR5cGVvZiB0LnRvbGVyYW50PT09XCJib29sZWFuXCImJnQudG9sZXJhbnQpe3YuZXJyb3JzPVtdfWlmKHYuYXR0YWNoQ29tbWVudCl7di5yYW5nZT10cnVlO3YuY29tbWVudHM9W107di5ib3R0b21SaWdodFN0YWNrPVtdO3YudHJhaWxpbmdDb21tZW50cz1bXTt2LmxlYWRpbmdDb21tZW50cz1bXX1pZih0LnNvdXJjZVR5cGU9PT1cIm1vZHVsZVwiKXtCLnNvdXJjZVR5cGU9dC5zb3VyY2VUeXBlO2w9dHJ1ZX19dHJ5e3U9Q3UoKTtpZih0eXBlb2Ygdi5jb21tZW50cyE9PVwidW5kZWZpbmVkXCIpe3UuY29tbWVudHM9di5jb21tZW50c31pZih0eXBlb2Ygdi50b2tlbnMhPT1cInVuZGVmaW5lZFwiKXtFdSgpO3UudG9rZW5zPXYudG9rZW5zfWlmKHR5cGVvZiB2LmVycm9ycyE9PVwidW5kZWZpbmVkXCIpe3UuZXJyb3JzPXYuZXJyb3JzfX1jYXRjaChyKXt0aHJvdyByfWZpbmFsbHl7dj17fX1yZXR1cm4gdX1lLnZlcnNpb249XCIyLjYuMFwiO2UudG9rZW5pemU9RnU7ZS5wYXJzZT1ndTtlLlN5bnRheD1mdW5jdGlvbigpe3ZhciBlLHQ9e307aWYodHlwZW9mIE9iamVjdC5jcmVhdGU9PT1cImZ1bmN0aW9uXCIpe3Q9T2JqZWN0LmNyZWF0ZShudWxsKX1mb3IoZSBpbiByKXtpZihyLmhhc093blByb3BlcnR5KGUpKXt0W2VdPXJbZV19fWlmKHR5cGVvZiBPYmplY3QuZnJlZXplPT09XCJmdW5jdGlvblwiKXtPYmplY3QuZnJlZXplKHQpfXJldHVybiB0fSgpfSl9LHt9XSw0OTpbZnVuY3Rpb24odCx1LG4peyhmdW5jdGlvbih0LHUpe1widXNlIHN0cmljdFwiO2lmKHR5cGVvZiBlPT09XCJmdW5jdGlvblwiJiZlLmFtZCl7ZShbXCJleHBvcnRzXCJdLHUpfWVsc2UgaWYodHlwZW9mIG4hPT1cInVuZGVmaW5lZFwiKXt1KG4pfWVsc2V7dSh0LmVzdHJhdmVyc2U9e30pfX0pKHRoaXMsZnVuY3Rpb24gcihlKXtcInVzZSBzdHJpY3RcIjt2YXIgdCx1LG4saSxvLHMsYSxsLGY7ZnVuY3Rpb24gYygpe311PUFycmF5LmlzQXJyYXk7aWYoIXUpe3U9ZnVuY3Rpb24gUyhlKXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpPT09XCJbb2JqZWN0IEFycmF5XVwifX1mdW5jdGlvbiBwKGUpe3ZhciB0PXt9LHUsbjtmb3IodSBpbiBlKXtpZihlLmhhc093blByb3BlcnR5KHUpKXtuPWVbdV07aWYodHlwZW9mIG49PT1cIm9iamVjdFwiJiZuIT09bnVsbCl7dFt1XT1wKG4pfWVsc2V7dFt1XT1ufX19cmV0dXJuIHR9ZnVuY3Rpb24gRChlKXt2YXIgdD17fSx1O2Zvcih1IGluIGUpe2lmKGUuaGFzT3duUHJvcGVydHkodSkpe3RbdV09ZVt1XX19cmV0dXJuIHR9YyhEKTtmdW5jdGlvbiBoKGUsdCl7dmFyIHUsbixyLGk7bj1lLmxlbmd0aDtyPTA7d2hpbGUobil7dT1uPj4+MTtpPXIrdTtpZih0KGVbaV0pKXtuPXV9ZWxzZXtyPWkrMTtuLT11KzF9fXJldHVybiByfWZ1bmN0aW9uIG0oZSx0KXt2YXIgdSxuLHIsaTtuPWUubGVuZ3RoO3I9MDt3aGlsZShuKXt1PW4+Pj4xO2k9cit1O2lmKHQoZVtpXSkpe3I9aSsxO24tPXUrMX1lbHNle249dX19cmV0dXJuIHJ9YyhtKTtvPU9iamVjdC5jcmVhdGV8fGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe31yZXR1cm4gZnVuY3Rpb24odCl7ZS5wcm90b3R5cGU9dDtyZXR1cm4gbmV3IGV9fSgpO3M9T2JqZWN0LmtleXN8fGZ1bmN0aW9uKGUpe3ZhciB0PVtdLHU7Zm9yKHUgaW4gZSl7dC5wdXNoKHUpfXJldHVybiB0fTtmdW5jdGlvbiBkKGUsdCl7dmFyIHU9cyh0KSxuLHIsaTtmb3Iocj0wLGk9dS5sZW5ndGg7cjxpO3IrPTEpe249dVtyXTtlW25dPXRbbl19cmV0dXJuIGV9dD17QXNzaWdubWVudEV4cHJlc3Npb246XCJBc3NpZ25tZW50RXhwcmVzc2lvblwiLEFycmF5RXhwcmVzc2lvbjpcIkFycmF5RXhwcmVzc2lvblwiLEFycmF5UGF0dGVybjpcIkFycmF5UGF0dGVyblwiLEFycm93RnVuY3Rpb25FeHByZXNzaW9uOlwiQXJyb3dGdW5jdGlvbkV4cHJlc3Npb25cIixBd2FpdEV4cHJlc3Npb246XCJBd2FpdEV4cHJlc3Npb25cIixCbG9ja1N0YXRlbWVudDpcIkJsb2NrU3RhdGVtZW50XCIsQmluYXJ5RXhwcmVzc2lvbjpcIkJpbmFyeUV4cHJlc3Npb25cIixCcmVha1N0YXRlbWVudDpcIkJyZWFrU3RhdGVtZW50XCIsQ2FsbEV4cHJlc3Npb246XCJDYWxsRXhwcmVzc2lvblwiLENhdGNoQ2xhdXNlOlwiQ2F0Y2hDbGF1c2VcIixDbGFzc0JvZHk6XCJDbGFzc0JvZHlcIixDbGFzc0RlY2xhcmF0aW9uOlwiQ2xhc3NEZWNsYXJhdGlvblwiLENsYXNzRXhwcmVzc2lvbjpcIkNsYXNzRXhwcmVzc2lvblwiLENvbXByZWhlbnNpb25CbG9jazpcIkNvbXByZWhlbnNpb25CbG9ja1wiLENvbXByZWhlbnNpb25FeHByZXNzaW9uOlwiQ29tcHJlaGVuc2lvbkV4cHJlc3Npb25cIixDb25kaXRpb25hbEV4cHJlc3Npb246XCJDb25kaXRpb25hbEV4cHJlc3Npb25cIixDb250aW51ZVN0YXRlbWVudDpcIkNvbnRpbnVlU3RhdGVtZW50XCIsRGVidWdnZXJTdGF0ZW1lbnQ6XCJEZWJ1Z2dlclN0YXRlbWVudFwiLERpcmVjdGl2ZVN0YXRlbWVudDpcIkRpcmVjdGl2ZVN0YXRlbWVudFwiLERvV2hpbGVTdGF0ZW1lbnQ6XCJEb1doaWxlU3RhdGVtZW50XCIsRW1wdHlTdGF0ZW1lbnQ6XCJFbXB0eVN0YXRlbWVudFwiLEV4cG9ydEJhdGNoU3BlY2lmaWVyOlwiRXhwb3J0QmF0Y2hTcGVjaWZpZXJcIixFeHBvcnREZWNsYXJhdGlvbjpcIkV4cG9ydERlY2xhcmF0aW9uXCIsRXhwb3J0U3BlY2lmaWVyOlwiRXhwb3J0U3BlY2lmaWVyXCIsRXhwcmVzc2lvblN0YXRlbWVudDpcIkV4cHJlc3Npb25TdGF0ZW1lbnRcIixGb3JTdGF0ZW1lbnQ6XCJGb3JTdGF0ZW1lbnRcIixGb3JJblN0YXRlbWVudDpcIkZvckluU3RhdGVtZW50XCIsRm9yT2ZTdGF0ZW1lbnQ6XCJGb3JPZlN0YXRlbWVudFwiLEZ1bmN0aW9uRGVjbGFyYXRpb246XCJGdW5jdGlvbkRlY2xhcmF0aW9uXCIsRnVuY3Rpb25FeHByZXNzaW9uOlwiRnVuY3Rpb25FeHByZXNzaW9uXCIsR2VuZXJhdG9yRXhwcmVzc2lvbjpcIkdlbmVyYXRvckV4cHJlc3Npb25cIixJZGVudGlmaWVyOlwiSWRlbnRpZmllclwiLElmU3RhdGVtZW50OlwiSWZTdGF0ZW1lbnRcIixJbXBvcnREZWNsYXJhdGlvbjpcIkltcG9ydERlY2xhcmF0aW9uXCIsSW1wb3J0RGVmYXVsdFNwZWNpZmllcjpcIkltcG9ydERlZmF1bHRTcGVjaWZpZXJcIixJbXBvcnROYW1lc3BhY2VTcGVjaWZpZXI6XCJJbXBvcnROYW1lc3BhY2VTcGVjaWZpZXJcIixJbXBvcnRTcGVjaWZpZXI6XCJJbXBvcnRTcGVjaWZpZXJcIixMaXRlcmFsOlwiTGl0ZXJhbFwiLExhYmVsZWRTdGF0ZW1lbnQ6XCJMYWJlbGVkU3RhdGVtZW50XCIsTG9naWNhbEV4cHJlc3Npb246XCJMb2dpY2FsRXhwcmVzc2lvblwiLE1lbWJlckV4cHJlc3Npb246XCJNZW1iZXJFeHByZXNzaW9uXCIsTWV0aG9kRGVmaW5pdGlvbjpcIk1ldGhvZERlZmluaXRpb25cIixNb2R1bGVTcGVjaWZpZXI6XCJNb2R1bGVTcGVjaWZpZXJcIixOZXdFeHByZXNzaW9uOlwiTmV3RXhwcmVzc2lvblwiLE9iamVjdEV4cHJlc3Npb246XCJPYmplY3RFeHByZXNzaW9uXCIsT2JqZWN0UGF0dGVybjpcIk9iamVjdFBhdHRlcm5cIixQcm9ncmFtOlwiUHJvZ3JhbVwiLFByb3BlcnR5OlwiUHJvcGVydHlcIixSZXR1cm5TdGF0ZW1lbnQ6XCJSZXR1cm5TdGF0ZW1lbnRcIixTZXF1ZW5jZUV4cHJlc3Npb246XCJTZXF1ZW5jZUV4cHJlc3Npb25cIixTcHJlYWRFbGVtZW50OlwiU3ByZWFkRWxlbWVudFwiLFN3aXRjaFN0YXRlbWVudDpcIlN3aXRjaFN0YXRlbWVudFwiLFN3aXRjaENhc2U6XCJTd2l0Y2hDYXNlXCIsVGFnZ2VkVGVtcGxhdGVFeHByZXNzaW9uOlwiVGFnZ2VkVGVtcGxhdGVFeHByZXNzaW9uXCIsVGVtcGxhdGVFbGVtZW50OlwiVGVtcGxhdGVFbGVtZW50XCIsVGVtcGxhdGVMaXRlcmFsOlwiVGVtcGxhdGVMaXRlcmFsXCIsVGhpc0V4cHJlc3Npb246XCJUaGlzRXhwcmVzc2lvblwiLFRocm93U3RhdGVtZW50OlwiVGhyb3dTdGF0ZW1lbnRcIixUcnlTdGF0ZW1lbnQ6XCJUcnlTdGF0ZW1lbnRcIixVbmFyeUV4cHJlc3Npb246XCJVbmFyeUV4cHJlc3Npb25cIixVcGRhdGVFeHByZXNzaW9uOlwiVXBkYXRlRXhwcmVzc2lvblwiLFZhcmlhYmxlRGVjbGFyYXRpb246XCJWYXJpYWJsZURlY2xhcmF0aW9uXCIsVmFyaWFibGVEZWNsYXJhdG9yOlwiVmFyaWFibGVEZWNsYXJhdG9yXCIsV2hpbGVTdGF0ZW1lbnQ6XCJXaGlsZVN0YXRlbWVudFwiLFdpdGhTdGF0ZW1lbnQ6XCJXaXRoU3RhdGVtZW50XCIsWWllbGRFeHByZXNzaW9uOlwiWWllbGRFeHByZXNzaW9uXCJ9O2k9e0Fzc2lnbm1lbnRFeHByZXNzaW9uOltcImxlZnRcIixcInJpZ2h0XCJdLEFycmF5RXhwcmVzc2lvbjpbXCJlbGVtZW50c1wiXSxBcnJheVBhdHRlcm46W1wiZWxlbWVudHNcIl0sQXJyb3dGdW5jdGlvbkV4cHJlc3Npb246W1wicGFyYW1zXCIsXCJkZWZhdWx0c1wiLFwicmVzdFwiLFwiYm9keVwiXSxBd2FpdEV4cHJlc3Npb246W1wiYXJndW1lbnRcIl0sQmxvY2tTdGF0ZW1lbnQ6W1wiYm9keVwiXSxCaW5hcnlFeHByZXNzaW9uOltcImxlZnRcIixcInJpZ2h0XCJdLEJyZWFrU3RhdGVtZW50OltcImxhYmVsXCJdLENhbGxFeHByZXNzaW9uOltcImNhbGxlZVwiLFwiYXJndW1lbnRzXCJdLENhdGNoQ2xhdXNlOltcInBhcmFtXCIsXCJib2R5XCJdLENsYXNzQm9keTpbXCJib2R5XCJdLENsYXNzRGVjbGFyYXRpb246W1wiaWRcIixcImJvZHlcIixcInN1cGVyQ2xhc3NcIl0sQ2xhc3NFeHByZXNzaW9uOltcImlkXCIsXCJib2R5XCIsXCJzdXBlckNsYXNzXCJdLENvbXByZWhlbnNpb25CbG9jazpbXCJsZWZ0XCIsXCJyaWdodFwiXSxDb21wcmVoZW5zaW9uRXhwcmVzc2lvbjpbXCJibG9ja3NcIixcImZpbHRlclwiLFwiYm9keVwiXSxDb25kaXRpb25hbEV4cHJlc3Npb246W1widGVzdFwiLFwiY29uc2VxdWVudFwiLFwiYWx0ZXJuYXRlXCJdLENvbnRpbnVlU3RhdGVtZW50OltcImxhYmVsXCJdLERlYnVnZ2VyU3RhdGVtZW50OltdLERpcmVjdGl2ZVN0YXRlbWVudDpbXSxEb1doaWxlU3RhdGVtZW50OltcImJvZHlcIixcInRlc3RcIl0sRW1wdHlTdGF0ZW1lbnQ6W10sRXhwb3J0QmF0Y2hTcGVjaWZpZXI6W10sRXhwb3J0RGVjbGFyYXRpb246W1wiZGVjbGFyYXRpb25cIixcInNwZWNpZmllcnNcIixcInNvdXJjZVwiXSxFeHBvcnRTcGVjaWZpZXI6W1wiaWRcIixcIm5hbWVcIl0sRXhwcmVzc2lvblN0YXRlbWVudDpbXCJleHByZXNzaW9uXCJdLEZvclN0YXRlbWVudDpbXCJpbml0XCIsXCJ0ZXN0XCIsXCJ1cGRhdGVcIixcImJvZHlcIl0sRm9ySW5TdGF0ZW1lbnQ6W1wibGVmdFwiLFwicmlnaHRcIixcImJvZHlcIl0sRm9yT2ZTdGF0ZW1lbnQ6W1wibGVmdFwiLFwicmlnaHRcIixcImJvZHlcIl0sRnVuY3Rpb25EZWNsYXJhdGlvbjpbXCJpZFwiLFwicGFyYW1zXCIsXCJkZWZhdWx0c1wiLFwicmVzdFwiLFwiYm9keVwiXSxGdW5jdGlvbkV4cHJlc3Npb246W1wiaWRcIixcInBhcmFtc1wiLFwiZGVmYXVsdHNcIixcInJlc3RcIixcImJvZHlcIl0sR2VuZXJhdG9yRXhwcmVzc2lvbjpbXCJibG9ja3NcIixcImZpbHRlclwiLFwiYm9keVwiXSxJZGVudGlmaWVyOltdLElmU3RhdGVtZW50OltcInRlc3RcIixcImNvbnNlcXVlbnRcIixcImFsdGVybmF0ZVwiXSxJbXBvcnREZWNsYXJhdGlvbjpbXCJzcGVjaWZpZXJzXCIsXCJzb3VyY2VcIl0sSW1wb3J0RGVmYXVsdFNwZWNpZmllcjpbXCJpZFwiXSxJbXBvcnROYW1lc3BhY2VTcGVjaWZpZXI6W1wiaWRcIl0sSW1wb3J0U3BlY2lmaWVyOltcImlkXCIsXCJuYW1lXCJdLExpdGVyYWw6W10sTGFiZWxlZFN0YXRlbWVudDpbXCJsYWJlbFwiLFwiYm9keVwiXSxMb2dpY2FsRXhwcmVzc2lvbjpbXCJsZWZ0XCIsXCJyaWdodFwiXSxNZW1iZXJFeHByZXNzaW9uOltcIm9iamVjdFwiLFwicHJvcGVydHlcIl0sTWV0aG9kRGVmaW5pdGlvbjpbXCJrZXlcIixcInZhbHVlXCJdLE1vZHVsZVNwZWNpZmllcjpbXSxOZXdFeHByZXNzaW9uOltcImNhbGxlZVwiLFwiYXJndW1lbnRzXCJdLE9iamVjdEV4cHJlc3Npb246W1wicHJvcGVydGllc1wiXSxPYmplY3RQYXR0ZXJuOltcInByb3BlcnRpZXNcIl0sUHJvZ3JhbTpbXCJib2R5XCJdLFByb3BlcnR5OltcImtleVwiLFwidmFsdWVcIl0sUmV0dXJuU3RhdGVtZW50OltcImFyZ3VtZW50XCJdLFNlcXVlbmNlRXhwcmVzc2lvbjpbXCJleHByZXNzaW9uc1wiXSxTcHJlYWRFbGVtZW50OltcImFyZ3VtZW50XCJdLFN3aXRjaFN0YXRlbWVudDpbXCJkaXNjcmltaW5hbnRcIixcImNhc2VzXCJdLFN3aXRjaENhc2U6W1widGVzdFwiLFwiY29uc2VxdWVudFwiXSxUYWdnZWRUZW1wbGF0ZUV4cHJlc3Npb246W1widGFnXCIsXCJxdWFzaVwiXSxUZW1wbGF0ZUVsZW1lbnQ6W10sVGVtcGxhdGVMaXRlcmFsOltcInF1YXNpc1wiLFwiZXhwcmVzc2lvbnNcIl0sVGhpc0V4cHJlc3Npb246W10sVGhyb3dTdGF0ZW1lbnQ6W1wiYXJndW1lbnRcIl0sVHJ5U3RhdGVtZW50OltcImJsb2NrXCIsXCJoYW5kbGVyc1wiLFwiaGFuZGxlclwiLFwiZ3VhcmRlZEhhbmRsZXJzXCIsXCJmaW5hbGl6ZXJcIl0sVW5hcnlFeHByZXNzaW9uOltcImFyZ3VtZW50XCJdLFVwZGF0ZUV4cHJlc3Npb246W1wiYXJndW1lbnRcIl0sVmFyaWFibGVEZWNsYXJhdGlvbjpbXCJkZWNsYXJhdGlvbnNcIl0sVmFyaWFibGVEZWNsYXJhdG9yOltcImlkXCIsXCJpbml0XCJdLFdoaWxlU3RhdGVtZW50OltcInRlc3RcIixcImJvZHlcIl0sV2l0aFN0YXRlbWVudDpbXCJvYmplY3RcIixcImJvZHlcIl0sWWllbGRFeHByZXNzaW9uOltcImFyZ3VtZW50XCJdfTthPXt9O2w9e307Zj17fTtuPXtCcmVhazphLFNraXA6bCxSZW1vdmU6Zn07ZnVuY3Rpb24gQShlLHQpe3RoaXMucGFyZW50PWU7dGhpcy5rZXk9dH1BLnByb3RvdHlwZS5yZXBsYWNlPWZ1bmN0aW9uIHgoZSl7dGhpcy5wYXJlbnRbdGhpcy5rZXldPWV9O0EucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbiB3KCl7aWYodSh0aGlzLnBhcmVudCkpe3RoaXMucGFyZW50LnNwbGljZSh0aGlzLmtleSwxKTtyZXR1cm4gdHJ1ZX1lbHNle3RoaXMucmVwbGFjZShudWxsKTtyZXR1cm4gZmFsc2V9fTtmdW5jdGlvbiBDKGUsdCx1LG4pe3RoaXMubm9kZT1lO3RoaXMucGF0aD10O3RoaXMud3JhcD11O3RoaXMucmVmPW59ZnVuY3Rpb24gRSgpe31FLnByb3RvdHlwZS5wYXRoPWZ1bmN0aW9uIF8oKXt2YXIgZSx0LG4scixpLG87ZnVuY3Rpb24gcyhlLHQpe2lmKHUodCkpe2ZvcihuPTAscj10Lmxlbmd0aDtuPHI7KytuKXtlLnB1c2godFtuXSl9fWVsc2V7ZS5wdXNoKHQpfX1pZighdGhpcy5fX2N1cnJlbnQucGF0aCl7cmV0dXJuIG51bGx9aT1bXTtmb3IoZT0yLHQ9dGhpcy5fX2xlYXZlbGlzdC5sZW5ndGg7ZTx0OysrZSl7bz10aGlzLl9fbGVhdmVsaXN0W2VdO3MoaSxvLnBhdGgpfXMoaSx0aGlzLl9fY3VycmVudC5wYXRoKTtyZXR1cm4gaX07RS5wcm90b3R5cGUudHlwZT1mdW5jdGlvbigpe3ZhciBlPXRoaXMuY3VycmVudCgpO3JldHVybiBlLnR5cGV8fHRoaXMuX19jdXJyZW50LndyYXB9O0UucHJvdG90eXBlLnBhcmVudHM9ZnVuY3Rpb24gaygpe3ZhciBlLHQsdTt1PVtdO2ZvcihlPTEsdD10aGlzLl9fbGVhdmVsaXN0Lmxlbmd0aDtlPHQ7KytlKXt1LnB1c2godGhpcy5fX2xlYXZlbGlzdFtlXS5ub2RlKX1yZXR1cm4gdX07RS5wcm90b3R5cGUuY3VycmVudD1mdW5jdGlvbiBJKCl7cmV0dXJuIHRoaXMuX19jdXJyZW50Lm5vZGV9O0UucHJvdG90eXBlLl9fZXhlY3V0ZT1mdW5jdGlvbiBQKGUsdCl7dmFyIHUsbjtuPXVuZGVmaW5lZDt1PXRoaXMuX19jdXJyZW50O3RoaXMuX19jdXJyZW50PXQ7dGhpcy5fX3N0YXRlPW51bGw7aWYoZSl7bj1lLmNhbGwodGhpcyx0Lm5vZGUsdGhpcy5fX2xlYXZlbGlzdFt0aGlzLl9fbGVhdmVsaXN0Lmxlbmd0aC0xXS5ub2RlKX10aGlzLl9fY3VycmVudD11O3JldHVybiBufTtFLnByb3RvdHlwZS5ub3RpZnk9ZnVuY3Rpb24gTChlKXt0aGlzLl9fc3RhdGU9ZX07RS5wcm90b3R5cGUuc2tpcD1mdW5jdGlvbigpe3RoaXMubm90aWZ5KGwpfTtFLnByb3RvdHlwZVtcImJyZWFrXCJdPWZ1bmN0aW9uKCl7dGhpcy5ub3RpZnkoYSl9O0UucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbigpe3RoaXMubm90aWZ5KGYpfTtFLnByb3RvdHlwZS5fX2luaXRpYWxpemU9ZnVuY3Rpb24oZSx0KXt0aGlzLnZpc2l0b3I9dDt0aGlzLnJvb3Q9ZTt0aGlzLl9fd29ya2xpc3Q9W107dGhpcy5fX2xlYXZlbGlzdD1bXTt0aGlzLl9fY3VycmVudD1udWxsO3RoaXMuX19zdGF0ZT1udWxsO3RoaXMuX19mYWxsYmFjaz10LmZhbGxiYWNrPT09XCJpdGVyYXRpb25cIjt0aGlzLl9fa2V5cz1pO2lmKHQua2V5cyl7dGhpcy5fX2tleXM9ZChvKHRoaXMuX19rZXlzKSx0LmtleXMpfX07ZnVuY3Rpb24gRihlKXtpZihlPT1udWxsKXtyZXR1cm4gZmFsc2V9cmV0dXJuIHR5cGVvZiBlPT09XCJvYmplY3RcIiYmdHlwZW9mIGUudHlwZT09PVwic3RyaW5nXCJ9ZnVuY3Rpb24gZyhlLHUpe3JldHVybihlPT09dC5PYmplY3RFeHByZXNzaW9ufHxlPT09dC5PYmplY3RQYXR0ZXJuKSYmXCJwcm9wZXJ0aWVzXCI9PT11fUUucHJvdG90eXBlLnRyYXZlcnNlPWZ1bmN0aW9uIE8oZSx0KXt2YXIgbixyLGksbyxmLGMscCxELGgsbSxkLEE7dGhpcy5fX2luaXRpYWxpemUoZSx0KTtBPXt9O249dGhpcy5fX3dvcmtsaXN0O3I9dGhpcy5fX2xlYXZlbGlzdDtuLnB1c2gobmV3IEMoZSxudWxsLG51bGwsbnVsbCkpO3IucHVzaChuZXcgQyhudWxsLG51bGwsbnVsbCxudWxsKSk7d2hpbGUobi5sZW5ndGgpe2k9bi5wb3AoKTtpZihpPT09QSl7aT1yLnBvcCgpO2M9dGhpcy5fX2V4ZWN1dGUodC5sZWF2ZSxpKTtpZih0aGlzLl9fc3RhdGU9PT1hfHxjPT09YSl7cmV0dXJufWNvbnRpbnVlfWlmKGkubm9kZSl7Yz10aGlzLl9fZXhlY3V0ZSh0LmVudGVyLGkpO2lmKHRoaXMuX19zdGF0ZT09PWF8fGM9PT1hKXtyZXR1cm59bi5wdXNoKEEpO3IucHVzaChpKTtpZih0aGlzLl9fc3RhdGU9PT1sfHxjPT09bCl7Y29udGludWV9bz1pLm5vZGU7Zj1pLndyYXB8fG8udHlwZTttPXRoaXMuX19rZXlzW2ZdO2lmKCFtKXtpZih0aGlzLl9fZmFsbGJhY2spe209cyhvKX1lbHNle3Rocm93IG5ldyBFcnJvcihcIlVua25vd24gbm9kZSB0eXBlIFwiK2YrXCIuXCIpfX1EPW0ubGVuZ3RoO3doaWxlKChELT0xKT49MCl7cD1tW0RdO2Q9b1twXTtpZighZCl7Y29udGludWV9aWYodShkKSl7aD1kLmxlbmd0aDt3aGlsZSgoaC09MSk+PTApe2lmKCFkW2hdKXtjb250aW51ZX1pZihnKGYsbVtEXSkpe2k9bmV3IEMoZFtoXSxbcCxoXSxcIlByb3BlcnR5XCIsbnVsbCl9ZWxzZSBpZihGKGRbaF0pKXtpPW5ldyBDKGRbaF0sW3AsaF0sbnVsbCxudWxsKX1lbHNle2NvbnRpbnVlfW4ucHVzaChpKX19ZWxzZSBpZihGKGQpKXtuLnB1c2gobmV3IEMoZCxwLG51bGwsbnVsbCkpfX19fX07RS5wcm90b3R5cGUucmVwbGFjZT1mdW5jdGlvbiBqKGUsdCl7ZnVuY3Rpb24gbihlKXt2YXIgdCx1LG4saTtpZihlLnJlZi5yZW1vdmUoKSl7dT1lLnJlZi5rZXk7aT1lLnJlZi5wYXJlbnQ7dD1yLmxlbmd0aDt3aGlsZSh0LS0pe249clt0XTtpZihuLnJlZiYmbi5yZWYucGFyZW50PT09aSl7aWYobi5yZWYua2V5PHUpe2JyZWFrfS0tbi5yZWYua2V5fX19fXZhciByLGksbyxjLHAsRCxoLG0sZCxFLHksQix2O3RoaXMuX19pbml0aWFsaXplKGUsdCk7eT17fTtyPXRoaXMuX193b3JrbGlzdDtpPXRoaXMuX19sZWF2ZWxpc3Q7Qj17cm9vdDplfTtEPW5ldyBDKGUsbnVsbCxudWxsLG5ldyBBKEIsXCJyb290XCIpKTtyLnB1c2goRCk7aS5wdXNoKEQpO3doaWxlKHIubGVuZ3RoKXtEPXIucG9wKCk7aWYoRD09PXkpe0Q9aS5wb3AoKTtwPXRoaXMuX19leGVjdXRlKHQubGVhdmUsRCk7aWYocCE9PXVuZGVmaW5lZCYmcCE9PWEmJnAhPT1sJiZwIT09Zil7RC5yZWYucmVwbGFjZShwKX1pZih0aGlzLl9fc3RhdGU9PT1mfHxwPT09Zil7bihEKX1pZih0aGlzLl9fc3RhdGU9PT1hfHxwPT09YSl7cmV0dXJuIEIucm9vdH1jb250aW51ZX1wPXRoaXMuX19leGVjdXRlKHQuZW50ZXIsRCk7aWYocCE9PXVuZGVmaW5lZCYmcCE9PWEmJnAhPT1sJiZwIT09Zil7RC5yZWYucmVwbGFjZShwKTtELm5vZGU9cH1pZih0aGlzLl9fc3RhdGU9PT1mfHxwPT09Zil7bihEKTtELm5vZGU9bnVsbH1pZih0aGlzLl9fc3RhdGU9PT1hfHxwPT09YSl7cmV0dXJuIEIucm9vdH1vPUQubm9kZTtpZighbyl7Y29udGludWV9ci5wdXNoKHkpO2kucHVzaChEKTtpZih0aGlzLl9fc3RhdGU9PT1sfHxwPT09bCl7Y29udGludWV9Yz1ELndyYXB8fG8udHlwZTtkPXRoaXMuX19rZXlzW2NdO2lmKCFkKXtpZih0aGlzLl9fZmFsbGJhY2spe2Q9cyhvKX1lbHNle3Rocm93IG5ldyBFcnJvcihcIlVua25vd24gbm9kZSB0eXBlIFwiK2MrXCIuXCIpfX1oPWQubGVuZ3RoO3doaWxlKChoLT0xKT49MCl7dj1kW2hdO0U9b1t2XTtpZighRSl7Y29udGludWV9aWYodShFKSl7bT1FLmxlbmd0aDt3aGlsZSgobS09MSk+PTApe2lmKCFFW21dKXtjb250aW51ZX1pZihnKGMsZFtoXSkpe0Q9bmV3IEMoRVttXSxbdixtXSxcIlByb3BlcnR5XCIsbmV3IEEoRSxtKSl9ZWxzZSBpZihGKEVbbV0pKXtEPW5ldyBDKEVbbV0sW3YsbV0sbnVsbCxuZXcgQShFLG0pKX1lbHNle2NvbnRpbnVlfXIucHVzaChEKX19ZWxzZSBpZihGKEUpKXtyLnB1c2gobmV3IEMoRSx2LG51bGwsbmV3IEEobyx2KSkpfX19cmV0dXJuIEIucm9vdH07ZnVuY3Rpb24geShlLHQpe3ZhciB1PW5ldyBFO3JldHVybiB1LnRyYXZlcnNlKGUsdCl9ZnVuY3Rpb24gQihlLHQpe3ZhciB1PW5ldyBFO3JldHVybiB1LnJlcGxhY2UoZSx0KX1mdW5jdGlvbiB2KGUsdCl7dmFyIHU7dT1oKHQsZnVuY3Rpb24gbih0KXtyZXR1cm4gdC5yYW5nZVswXT5lLnJhbmdlWzBdfSk7ZS5leHRlbmRlZFJhbmdlPVtlLnJhbmdlWzBdLGUucmFuZ2VbMV1dO2lmKHUhPT10Lmxlbmd0aCl7ZS5leHRlbmRlZFJhbmdlWzFdPXRbdV0ucmFuZ2VbMF19dS09MTtpZih1Pj0wKXtlLmV4dGVuZGVkUmFuZ2VbMF09dFt1XS5yYW5nZVsxXX1yZXR1cm4gZX1mdW5jdGlvbiBiKGUsdCx1KXt2YXIgcj1bXSxpLG8scyxhO2lmKCFlLnJhbmdlKXt0aHJvdyBuZXcgRXJyb3IoXCJhdHRhY2hDb21tZW50cyBuZWVkcyByYW5nZSBpbmZvcm1hdGlvblwiKX1pZighdS5sZW5ndGgpe2lmKHQubGVuZ3RoKXtmb3Iocz0wLG89dC5sZW5ndGg7czxvO3MrPTEpe2k9cCh0W3NdKTtpLmV4dGVuZGVkUmFuZ2U9WzAsZS5yYW5nZVswXV07ci5wdXNoKGkpfWUubGVhZGluZ0NvbW1lbnRzPXJ9cmV0dXJuIGV9Zm9yKHM9MCxvPXQubGVuZ3RoO3M8bztzKz0xKXtyLnB1c2godihwKHRbc10pLHUpKX1hPTA7eShlLHtlbnRlcjpmdW5jdGlvbihlKXt2YXIgdDt3aGlsZShhPHIubGVuZ3RoKXt0PXJbYV07aWYodC5leHRlbmRlZFJhbmdlWzFdPmUucmFuZ2VbMF0pe2JyZWFrfWlmKHQuZXh0ZW5kZWRSYW5nZVsxXT09PWUucmFuZ2VbMF0pe2lmKCFlLmxlYWRpbmdDb21tZW50cyl7ZS5sZWFkaW5nQ29tbWVudHM9W119ZS5sZWFkaW5nQ29tbWVudHMucHVzaCh0KTtcbnIuc3BsaWNlKGEsMSl9ZWxzZXthKz0xfX1pZihhPT09ci5sZW5ndGgpe3JldHVybiBuLkJyZWFrfWlmKHJbYV0uZXh0ZW5kZWRSYW5nZVswXT5lLnJhbmdlWzFdKXtyZXR1cm4gbi5Ta2lwfX19KTthPTA7eShlLHtsZWF2ZTpmdW5jdGlvbihlKXt2YXIgdDt3aGlsZShhPHIubGVuZ3RoKXt0PXJbYV07aWYoZS5yYW5nZVsxXTx0LmV4dGVuZGVkUmFuZ2VbMF0pe2JyZWFrfWlmKGUucmFuZ2VbMV09PT10LmV4dGVuZGVkUmFuZ2VbMF0pe2lmKCFlLnRyYWlsaW5nQ29tbWVudHMpe2UudHJhaWxpbmdDb21tZW50cz1bXX1lLnRyYWlsaW5nQ29tbWVudHMucHVzaCh0KTtyLnNwbGljZShhLDEpfWVsc2V7YSs9MX19aWYoYT09PXIubGVuZ3RoKXtyZXR1cm4gbi5CcmVha31pZihyW2FdLmV4dGVuZGVkUmFuZ2VbMF0+ZS5yYW5nZVsxXSl7cmV0dXJuIG4uU2tpcH19fSk7cmV0dXJuIGV9ZS52ZXJzaW9uPVwiMS44LjEtZGV2XCI7ZS5TeW50YXg9dDtlLnRyYXZlcnNlPXk7ZS5yZXBsYWNlPUI7ZS5hdHRhY2hDb21tZW50cz1iO2UuVmlzaXRvcktleXM9aTtlLlZpc2l0b3JPcHRpb249bjtlLkNvbnRyb2xsZXI9RTtlLmNsb25lRW52aXJvbm1lbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gcih7fSl9O3JldHVybiBlfSl9LHt9XSw1MDpbZnVuY3Rpb24oZSx0LHUpe2FyZ3VtZW50c1s0XVszNF1bMF0uYXBwbHkodSxhcmd1bWVudHMpfSx7XCIuL3NvdXJjZS1tYXAvc291cmNlLW1hcC1jb25zdW1lclwiOjU2LFwiLi9zb3VyY2UtbWFwL3NvdXJjZS1tYXAtZ2VuZXJhdG9yXCI6NTcsXCIuL3NvdXJjZS1tYXAvc291cmNlLW5vZGVcIjo1OCxcIi9Vc2Vycy9yc2MvUHJvamVjdHMvcnN0YWNydXovanMyY29mZmVlL25vZGVfbW9kdWxlcy9lc2NvZGVnZW4vbm9kZV9tb2R1bGVzL3NvdXJjZS1tYXAvbGliL3NvdXJjZS1tYXAuanNcIjozNH1dLDUxOltmdW5jdGlvbihlLHQsdSl7YXJndW1lbnRzWzRdWzM1XVswXS5hcHBseSh1LGFyZ3VtZW50cyl9LHtcIi4vdXRpbFwiOjU5LFwiL1VzZXJzL3JzYy9Qcm9qZWN0cy9yc3RhY3J1ei9qczJjb2ZmZWUvbm9kZV9tb2R1bGVzL2VzY29kZWdlbi9ub2RlX21vZHVsZXMvc291cmNlLW1hcC9saWIvc291cmNlLW1hcC9hcnJheS1zZXQuanNcIjozNSxhbWRlZmluZTo2MH1dLDUyOltmdW5jdGlvbihlLHQsdSl7YXJndW1lbnRzWzRdWzM2XVswXS5hcHBseSh1LGFyZ3VtZW50cyl9LHtcIi4vYmFzZTY0XCI6NTMsXCIvVXNlcnMvcnNjL1Byb2plY3RzL3JzdGFjcnV6L2pzMmNvZmZlZS9ub2RlX21vZHVsZXMvZXNjb2RlZ2VuL25vZGVfbW9kdWxlcy9zb3VyY2UtbWFwL2xpYi9zb3VyY2UtbWFwL2Jhc2U2NC12bHEuanNcIjozNixhbWRlZmluZTo2MH1dLDUzOltmdW5jdGlvbihlLHQsdSl7YXJndW1lbnRzWzRdWzM3XVswXS5hcHBseSh1LGFyZ3VtZW50cyl9LHtcIi9Vc2Vycy9yc2MvUHJvamVjdHMvcnN0YWNydXovanMyY29mZmVlL25vZGVfbW9kdWxlcy9lc2NvZGVnZW4vbm9kZV9tb2R1bGVzL3NvdXJjZS1tYXAvbGliL3NvdXJjZS1tYXAvYmFzZTY0LmpzXCI6MzcsYW1kZWZpbmU6NjB9XSw1NDpbZnVuY3Rpb24oZSx0LHUpe2FyZ3VtZW50c1s0XVszOV1bMF0uYXBwbHkodSxhcmd1bWVudHMpfSx7XCIvVXNlcnMvcnNjL1Byb2plY3RzL3JzdGFjcnV6L2pzMmNvZmZlZS9ub2RlX21vZHVsZXMvZXNjb2RlZ2VuL25vZGVfbW9kdWxlcy9zb3VyY2UtbWFwL2xpYi9zb3VyY2UtbWFwL2JpbmFyeS1zZWFyY2guanNcIjozOSxhbWRlZmluZTo2MH1dLDU1OltmdW5jdGlvbihlLHQsdSl7YXJndW1lbnRzWzRdWzQxXVswXS5hcHBseSh1LGFyZ3VtZW50cyl9LHtcIi4vdXRpbFwiOjU5LFwiL1VzZXJzL3JzYy9Qcm9qZWN0cy9yc3RhY3J1ei9qczJjb2ZmZWUvbm9kZV9tb2R1bGVzL2VzY29kZWdlbi9ub2RlX21vZHVsZXMvc291cmNlLW1hcC9saWIvc291cmNlLW1hcC9tYXBwaW5nLWxpc3QuanNcIjo0MSxhbWRlZmluZTo2MH1dLDU2OltmdW5jdGlvbihlLHQsdSl7aWYodHlwZW9mIG4hPT1cImZ1bmN0aW9uXCIpe3ZhciBuPWUoXCJhbWRlZmluZVwiKSh0LGUpfW4oZnVuY3Rpb24oZSx0LHUpe3ZhciBuPWUoXCIuL3V0aWxcIik7dmFyIHI9ZShcIi4vYmluYXJ5LXNlYXJjaFwiKTt2YXIgaT1lKFwiLi9hcnJheS1zZXRcIikuQXJyYXlTZXQ7dmFyIG89ZShcIi4vYmFzZTY0LXZscVwiKTtmdW5jdGlvbiBzKGUpe3ZhciB0PWU7aWYodHlwZW9mIGU9PT1cInN0cmluZ1wiKXt0PUpTT04ucGFyc2UoZS5yZXBsYWNlKC9eXFwpXFxdXFx9Jy8sXCJcIikpfXZhciB1PW4uZ2V0QXJnKHQsXCJ2ZXJzaW9uXCIpO3ZhciByPW4uZ2V0QXJnKHQsXCJzb3VyY2VzXCIpO3ZhciBvPW4uZ2V0QXJnKHQsXCJuYW1lc1wiLFtdKTt2YXIgcz1uLmdldEFyZyh0LFwic291cmNlUm9vdFwiLG51bGwpO3ZhciBhPW4uZ2V0QXJnKHQsXCJzb3VyY2VzQ29udGVudFwiLG51bGwpO3ZhciBsPW4uZ2V0QXJnKHQsXCJtYXBwaW5nc1wiKTt2YXIgZj1uLmdldEFyZyh0LFwiZmlsZVwiLG51bGwpO2lmKHUhPXRoaXMuX3ZlcnNpb24pe3Rocm93IG5ldyBFcnJvcihcIlVuc3VwcG9ydGVkIHZlcnNpb246IFwiK3UpfXI9ci5tYXAobi5ub3JtYWxpemUpO3RoaXMuX25hbWVzPWkuZnJvbUFycmF5KG8sdHJ1ZSk7dGhpcy5fc291cmNlcz1pLmZyb21BcnJheShyLHRydWUpO3RoaXMuc291cmNlUm9vdD1zO3RoaXMuc291cmNlc0NvbnRlbnQ9YTt0aGlzLl9tYXBwaW5ncz1sO3RoaXMuZmlsZT1mfXMuZnJvbVNvdXJjZU1hcD1mdW5jdGlvbiBhKGUpe3ZhciB0PU9iamVjdC5jcmVhdGUocy5wcm90b3R5cGUpO3QuX25hbWVzPWkuZnJvbUFycmF5KGUuX25hbWVzLnRvQXJyYXkoKSx0cnVlKTt0Ll9zb3VyY2VzPWkuZnJvbUFycmF5KGUuX3NvdXJjZXMudG9BcnJheSgpLHRydWUpO3Quc291cmNlUm9vdD1lLl9zb3VyY2VSb290O3Quc291cmNlc0NvbnRlbnQ9ZS5fZ2VuZXJhdGVTb3VyY2VzQ29udGVudCh0Ll9zb3VyY2VzLnRvQXJyYXkoKSx0LnNvdXJjZVJvb3QpO3QuZmlsZT1lLl9maWxlO3QuX19nZW5lcmF0ZWRNYXBwaW5ncz1lLl9tYXBwaW5ncy50b0FycmF5KCkuc2xpY2UoKTt0Ll9fb3JpZ2luYWxNYXBwaW5ncz1lLl9tYXBwaW5ncy50b0FycmF5KCkuc2xpY2UoKS5zb3J0KG4uY29tcGFyZUJ5T3JpZ2luYWxQb3NpdGlvbnMpO3JldHVybiB0fTtzLnByb3RvdHlwZS5fdmVyc2lvbj0zO09iamVjdC5kZWZpbmVQcm9wZXJ0eShzLnByb3RvdHlwZSxcInNvdXJjZXNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NvdXJjZXMudG9BcnJheSgpLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5zb3VyY2VSb290IT1udWxsP24uam9pbih0aGlzLnNvdXJjZVJvb3QsZSk6ZX0sdGhpcyl9fSk7cy5wcm90b3R5cGUuX19nZW5lcmF0ZWRNYXBwaW5ncz1udWxsO09iamVjdC5kZWZpbmVQcm9wZXJ0eShzLnByb3RvdHlwZSxcIl9nZW5lcmF0ZWRNYXBwaW5nc1wiLHtnZXQ6ZnVuY3Rpb24oKXtpZighdGhpcy5fX2dlbmVyYXRlZE1hcHBpbmdzKXt0aGlzLl9fZ2VuZXJhdGVkTWFwcGluZ3M9W107dGhpcy5fX29yaWdpbmFsTWFwcGluZ3M9W107dGhpcy5fcGFyc2VNYXBwaW5ncyh0aGlzLl9tYXBwaW5ncyx0aGlzLnNvdXJjZVJvb3QpfXJldHVybiB0aGlzLl9fZ2VuZXJhdGVkTWFwcGluZ3N9fSk7cy5wcm90b3R5cGUuX19vcmlnaW5hbE1hcHBpbmdzPW51bGw7T2JqZWN0LmRlZmluZVByb3BlcnR5KHMucHJvdG90eXBlLFwiX29yaWdpbmFsTWFwcGluZ3NcIix7Z2V0OmZ1bmN0aW9uKCl7aWYoIXRoaXMuX19vcmlnaW5hbE1hcHBpbmdzKXt0aGlzLl9fZ2VuZXJhdGVkTWFwcGluZ3M9W107dGhpcy5fX29yaWdpbmFsTWFwcGluZ3M9W107dGhpcy5fcGFyc2VNYXBwaW5ncyh0aGlzLl9tYXBwaW5ncyx0aGlzLnNvdXJjZVJvb3QpfXJldHVybiB0aGlzLl9fb3JpZ2luYWxNYXBwaW5nc319KTtzLnByb3RvdHlwZS5fbmV4dENoYXJJc01hcHBpbmdTZXBhcmF0b3I9ZnVuY3Rpb24gbChlKXt2YXIgdD1lLmNoYXJBdCgwKTtyZXR1cm4gdD09PVwiO1wifHx0PT09XCIsXCJ9O3MucHJvdG90eXBlLl9wYXJzZU1hcHBpbmdzPWZ1bmN0aW9uIGYoZSx0KXt2YXIgdT0xO3ZhciByPTA7dmFyIGk9MDt2YXIgcz0wO3ZhciBhPTA7dmFyIGw9MDt2YXIgZj1lO3ZhciBjPXt9O3ZhciBwO3doaWxlKGYubGVuZ3RoPjApe2lmKGYuY2hhckF0KDApPT09XCI7XCIpe3UrKztmPWYuc2xpY2UoMSk7cj0wfWVsc2UgaWYoZi5jaGFyQXQoMCk9PT1cIixcIil7Zj1mLnNsaWNlKDEpfWVsc2V7cD17fTtwLmdlbmVyYXRlZExpbmU9dTtvLmRlY29kZShmLGMpO3AuZ2VuZXJhdGVkQ29sdW1uPXIrYy52YWx1ZTtyPXAuZ2VuZXJhdGVkQ29sdW1uO2Y9Yy5yZXN0O2lmKGYubGVuZ3RoPjAmJiF0aGlzLl9uZXh0Q2hhcklzTWFwcGluZ1NlcGFyYXRvcihmKSl7by5kZWNvZGUoZixjKTtwLnNvdXJjZT10aGlzLl9zb3VyY2VzLmF0KGErYy52YWx1ZSk7YSs9Yy52YWx1ZTtmPWMucmVzdDtpZihmLmxlbmd0aD09PTB8fHRoaXMuX25leHRDaGFySXNNYXBwaW5nU2VwYXJhdG9yKGYpKXt0aHJvdyBuZXcgRXJyb3IoXCJGb3VuZCBhIHNvdXJjZSwgYnV0IG5vIGxpbmUgYW5kIGNvbHVtblwiKX1vLmRlY29kZShmLGMpO3Aub3JpZ2luYWxMaW5lPWkrYy52YWx1ZTtpPXAub3JpZ2luYWxMaW5lO3Aub3JpZ2luYWxMaW5lKz0xO2Y9Yy5yZXN0O2lmKGYubGVuZ3RoPT09MHx8dGhpcy5fbmV4dENoYXJJc01hcHBpbmdTZXBhcmF0b3IoZikpe3Rocm93IG5ldyBFcnJvcihcIkZvdW5kIGEgc291cmNlIGFuZCBsaW5lLCBidXQgbm8gY29sdW1uXCIpfW8uZGVjb2RlKGYsYyk7cC5vcmlnaW5hbENvbHVtbj1zK2MudmFsdWU7cz1wLm9yaWdpbmFsQ29sdW1uO2Y9Yy5yZXN0O2lmKGYubGVuZ3RoPjAmJiF0aGlzLl9uZXh0Q2hhcklzTWFwcGluZ1NlcGFyYXRvcihmKSl7by5kZWNvZGUoZixjKTtwLm5hbWU9dGhpcy5fbmFtZXMuYXQobCtjLnZhbHVlKTtsKz1jLnZhbHVlO2Y9Yy5yZXN0fX10aGlzLl9fZ2VuZXJhdGVkTWFwcGluZ3MucHVzaChwKTtpZih0eXBlb2YgcC5vcmlnaW5hbExpbmU9PT1cIm51bWJlclwiKXt0aGlzLl9fb3JpZ2luYWxNYXBwaW5ncy5wdXNoKHApfX19dGhpcy5fX2dlbmVyYXRlZE1hcHBpbmdzLnNvcnQobi5jb21wYXJlQnlHZW5lcmF0ZWRQb3NpdGlvbnMpO3RoaXMuX19vcmlnaW5hbE1hcHBpbmdzLnNvcnQobi5jb21wYXJlQnlPcmlnaW5hbFBvc2l0aW9ucyl9O3MucHJvdG90eXBlLl9maW5kTWFwcGluZz1mdW5jdGlvbiBjKGUsdCx1LG4saSl7aWYoZVt1XTw9MCl7dGhyb3cgbmV3IFR5cGVFcnJvcihcIkxpbmUgbXVzdCBiZSBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gMSwgZ290IFwiK2VbdV0pfWlmKGVbbl08MCl7dGhyb3cgbmV3IFR5cGVFcnJvcihcIkNvbHVtbiBtdXN0IGJlIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byAwLCBnb3QgXCIrZVtuXSl9cmV0dXJuIHIuc2VhcmNoKGUsdCxpKX07cy5wcm90b3R5cGUuY29tcHV0ZUNvbHVtblNwYW5zPWZ1bmN0aW9uIHAoKXtmb3IodmFyIGU9MDtlPHRoaXMuX2dlbmVyYXRlZE1hcHBpbmdzLmxlbmd0aDsrK2Upe3ZhciB0PXRoaXMuX2dlbmVyYXRlZE1hcHBpbmdzW2VdO2lmKGUrMTx0aGlzLl9nZW5lcmF0ZWRNYXBwaW5ncy5sZW5ndGgpe3ZhciB1PXRoaXMuX2dlbmVyYXRlZE1hcHBpbmdzW2UrMV07aWYodC5nZW5lcmF0ZWRMaW5lPT09dS5nZW5lcmF0ZWRMaW5lKXt0Lmxhc3RHZW5lcmF0ZWRDb2x1bW49dS5nZW5lcmF0ZWRDb2x1bW4tMTtjb250aW51ZX19dC5sYXN0R2VuZXJhdGVkQ29sdW1uPUluZmluaXR5fX07cy5wcm90b3R5cGUub3JpZ2luYWxQb3NpdGlvbkZvcj1mdW5jdGlvbiBEKGUpe3ZhciB0PXtnZW5lcmF0ZWRMaW5lOm4uZ2V0QXJnKGUsXCJsaW5lXCIpLGdlbmVyYXRlZENvbHVtbjpuLmdldEFyZyhlLFwiY29sdW1uXCIpfTt2YXIgdT10aGlzLl9maW5kTWFwcGluZyh0LHRoaXMuX2dlbmVyYXRlZE1hcHBpbmdzLFwiZ2VuZXJhdGVkTGluZVwiLFwiZ2VuZXJhdGVkQ29sdW1uXCIsbi5jb21wYXJlQnlHZW5lcmF0ZWRQb3NpdGlvbnMpO2lmKHU+PTApe3ZhciByPXRoaXMuX2dlbmVyYXRlZE1hcHBpbmdzW3VdO2lmKHIuZ2VuZXJhdGVkTGluZT09PXQuZ2VuZXJhdGVkTGluZSl7dmFyIGk9bi5nZXRBcmcocixcInNvdXJjZVwiLG51bGwpO2lmKGkhPW51bGwmJnRoaXMuc291cmNlUm9vdCE9bnVsbCl7aT1uLmpvaW4odGhpcy5zb3VyY2VSb290LGkpfXJldHVybntzb3VyY2U6aSxsaW5lOm4uZ2V0QXJnKHIsXCJvcmlnaW5hbExpbmVcIixudWxsKSxjb2x1bW46bi5nZXRBcmcocixcIm9yaWdpbmFsQ29sdW1uXCIsbnVsbCksbmFtZTpuLmdldEFyZyhyLFwibmFtZVwiLG51bGwpfX19cmV0dXJue3NvdXJjZTpudWxsLGxpbmU6bnVsbCxjb2x1bW46bnVsbCxuYW1lOm51bGx9fTtzLnByb3RvdHlwZS5zb3VyY2VDb250ZW50Rm9yPWZ1bmN0aW9uIGgoZSl7aWYoIXRoaXMuc291cmNlc0NvbnRlbnQpe3JldHVybiBudWxsfWlmKHRoaXMuc291cmNlUm9vdCE9bnVsbCl7ZT1uLnJlbGF0aXZlKHRoaXMuc291cmNlUm9vdCxlKX1pZih0aGlzLl9zb3VyY2VzLmhhcyhlKSl7cmV0dXJuIHRoaXMuc291cmNlc0NvbnRlbnRbdGhpcy5fc291cmNlcy5pbmRleE9mKGUpXX12YXIgdDtpZih0aGlzLnNvdXJjZVJvb3QhPW51bGwmJih0PW4udXJsUGFyc2UodGhpcy5zb3VyY2VSb290KSkpe3ZhciB1PWUucmVwbGFjZSgvXmZpbGU6XFwvXFwvLyxcIlwiKTtpZih0LnNjaGVtZT09XCJmaWxlXCImJnRoaXMuX3NvdXJjZXMuaGFzKHUpKXtyZXR1cm4gdGhpcy5zb3VyY2VzQ29udGVudFt0aGlzLl9zb3VyY2VzLmluZGV4T2YodSldfWlmKCghdC5wYXRofHx0LnBhdGg9PVwiL1wiKSYmdGhpcy5fc291cmNlcy5oYXMoXCIvXCIrZSkpe3JldHVybiB0aGlzLnNvdXJjZXNDb250ZW50W3RoaXMuX3NvdXJjZXMuaW5kZXhPZihcIi9cIitlKV19fXRocm93IG5ldyBFcnJvcignXCInK2UrJ1wiIGlzIG5vdCBpbiB0aGUgU291cmNlTWFwLicpfTtzLnByb3RvdHlwZS5nZW5lcmF0ZWRQb3NpdGlvbkZvcj1mdW5jdGlvbiBtKGUpe3ZhciB0PXtzb3VyY2U6bi5nZXRBcmcoZSxcInNvdXJjZVwiKSxvcmlnaW5hbExpbmU6bi5nZXRBcmcoZSxcImxpbmVcIiksb3JpZ2luYWxDb2x1bW46bi5nZXRBcmcoZSxcImNvbHVtblwiKX07aWYodGhpcy5zb3VyY2VSb290IT1udWxsKXt0LnNvdXJjZT1uLnJlbGF0aXZlKHRoaXMuc291cmNlUm9vdCx0LnNvdXJjZSl9dmFyIHU9dGhpcy5fZmluZE1hcHBpbmcodCx0aGlzLl9vcmlnaW5hbE1hcHBpbmdzLFwib3JpZ2luYWxMaW5lXCIsXCJvcmlnaW5hbENvbHVtblwiLG4uY29tcGFyZUJ5T3JpZ2luYWxQb3NpdGlvbnMpO2lmKHU+PTApe3ZhciByPXRoaXMuX29yaWdpbmFsTWFwcGluZ3NbdV07cmV0dXJue2xpbmU6bi5nZXRBcmcocixcImdlbmVyYXRlZExpbmVcIixudWxsKSxjb2x1bW46bi5nZXRBcmcocixcImdlbmVyYXRlZENvbHVtblwiLG51bGwpLGxhc3RDb2x1bW46bi5nZXRBcmcocixcImxhc3RHZW5lcmF0ZWRDb2x1bW5cIixudWxsKX19cmV0dXJue2xpbmU6bnVsbCxjb2x1bW46bnVsbCxsYXN0Q29sdW1uOm51bGx9fTtzLnByb3RvdHlwZS5hbGxHZW5lcmF0ZWRQb3NpdGlvbnNGb3I9ZnVuY3Rpb24gZChlKXt2YXIgdD17c291cmNlOm4uZ2V0QXJnKGUsXCJzb3VyY2VcIiksb3JpZ2luYWxMaW5lOm4uZ2V0QXJnKGUsXCJsaW5lXCIpLG9yaWdpbmFsQ29sdW1uOkluZmluaXR5fTtpZih0aGlzLnNvdXJjZVJvb3QhPW51bGwpe3Quc291cmNlPW4ucmVsYXRpdmUodGhpcy5zb3VyY2VSb290LHQuc291cmNlKX12YXIgdT1bXTt2YXIgcj10aGlzLl9maW5kTWFwcGluZyh0LHRoaXMuX29yaWdpbmFsTWFwcGluZ3MsXCJvcmlnaW5hbExpbmVcIixcIm9yaWdpbmFsQ29sdW1uXCIsbi5jb21wYXJlQnlPcmlnaW5hbFBvc2l0aW9ucyk7aWYocj49MCl7dmFyIGk9dGhpcy5fb3JpZ2luYWxNYXBwaW5nc1tyXTt3aGlsZShpJiZpLm9yaWdpbmFsTGluZT09PXQub3JpZ2luYWxMaW5lKXt1LnB1c2goe2xpbmU6bi5nZXRBcmcoaSxcImdlbmVyYXRlZExpbmVcIixudWxsKSxjb2x1bW46bi5nZXRBcmcoaSxcImdlbmVyYXRlZENvbHVtblwiLG51bGwpLGxhc3RDb2x1bW46bi5nZXRBcmcoaSxcImxhc3RHZW5lcmF0ZWRDb2x1bW5cIixudWxsKX0pO2k9dGhpcy5fb3JpZ2luYWxNYXBwaW5nc1stLXJdfX1yZXR1cm4gdS5yZXZlcnNlKCl9O3MuR0VORVJBVEVEX09SREVSPTE7cy5PUklHSU5BTF9PUkRFUj0yO3MucHJvdG90eXBlLmVhY2hNYXBwaW5nPWZ1bmN0aW9uIEEoZSx0LHUpe3ZhciByPXR8fG51bGw7dmFyIGk9dXx8cy5HRU5FUkFURURfT1JERVI7dmFyIG87c3dpdGNoKGkpe2Nhc2Ugcy5HRU5FUkFURURfT1JERVI6bz10aGlzLl9nZW5lcmF0ZWRNYXBwaW5nczticmVhaztjYXNlIHMuT1JJR0lOQUxfT1JERVI6bz10aGlzLl9vcmlnaW5hbE1hcHBpbmdzO2JyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKFwiVW5rbm93biBvcmRlciBvZiBpdGVyYXRpb24uXCIpfXZhciBhPXRoaXMuc291cmNlUm9vdDtvLm1hcChmdW5jdGlvbihlKXt2YXIgdD1lLnNvdXJjZTtpZih0IT1udWxsJiZhIT1udWxsKXt0PW4uam9pbihhLHQpfXJldHVybntzb3VyY2U6dCxnZW5lcmF0ZWRMaW5lOmUuZ2VuZXJhdGVkTGluZSxnZW5lcmF0ZWRDb2x1bW46ZS5nZW5lcmF0ZWRDb2x1bW4sb3JpZ2luYWxMaW5lOmUub3JpZ2luYWxMaW5lLG9yaWdpbmFsQ29sdW1uOmUub3JpZ2luYWxDb2x1bW4sbmFtZTplLm5hbWV9fSkuZm9yRWFjaChlLHIpfTt0LlNvdXJjZU1hcENvbnN1bWVyPXN9KX0se1wiLi9hcnJheS1zZXRcIjo1MSxcIi4vYmFzZTY0LXZscVwiOjUyLFwiLi9iaW5hcnktc2VhcmNoXCI6NTQsXCIuL3V0aWxcIjo1OSxhbWRlZmluZTo2MH1dLDU3OltmdW5jdGlvbihlLHQsdSl7YXJndW1lbnRzWzRdWzQzXVswXS5hcHBseSh1LGFyZ3VtZW50cyl9LHtcIi4vYXJyYXktc2V0XCI6NTEsXCIuL2Jhc2U2NC12bHFcIjo1MixcIi4vbWFwcGluZy1saXN0XCI6NTUsXCIuL3V0aWxcIjo1OSxcIi9Vc2Vycy9yc2MvUHJvamVjdHMvcnN0YWNydXovanMyY29mZmVlL25vZGVfbW9kdWxlcy9lc2NvZGVnZW4vbm9kZV9tb2R1bGVzL3NvdXJjZS1tYXAvbGliL3NvdXJjZS1tYXAvc291cmNlLW1hcC1nZW5lcmF0b3IuanNcIjo0MyxhbWRlZmluZTo2MH1dLDU4OltmdW5jdGlvbihlLHQsdSl7YXJndW1lbnRzWzRdWzQ0XVswXS5hcHBseSh1LGFyZ3VtZW50cyl9LHtcIi4vc291cmNlLW1hcC1nZW5lcmF0b3JcIjo1NyxcIi4vdXRpbFwiOjU5LFwiL1VzZXJzL3JzYy9Qcm9qZWN0cy9yc3RhY3J1ei9qczJjb2ZmZWUvbm9kZV9tb2R1bGVzL2VzY29kZWdlbi9ub2RlX21vZHVsZXMvc291cmNlLW1hcC9saWIvc291cmNlLW1hcC9zb3VyY2Utbm9kZS5qc1wiOjQ0LGFtZGVmaW5lOjYwfV0sNTk6W2Z1bmN0aW9uKGUsdCx1KXthcmd1bWVudHNbNF1bNDVdWzBdLmFwcGx5KHUsYXJndW1lbnRzKX0se1wiL1VzZXJzL3JzYy9Qcm9qZWN0cy9yc3RhY3J1ei9qczJjb2ZmZWUvbm9kZV9tb2R1bGVzL2VzY29kZWdlbi9ub2RlX21vZHVsZXMvc291cmNlLW1hcC9saWIvc291cmNlLW1hcC91dGlsLmpzXCI6NDUsYW1kZWZpbmU6NjB9XSw2MDpbZnVuY3Rpb24oZSx0LHUpeyhmdW5jdGlvbih1LG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHIodCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgaT17fSxvPXt9LHM9ZmFsc2UsYT1lKFwicGF0aFwiKSxsLGY7ZnVuY3Rpb24gYyhlKXt2YXIgdCx1O2Zvcih0PTA7ZVt0XTt0Kz0xKXt1PWVbdF07aWYodT09PVwiLlwiKXtlLnNwbGljZSh0LDEpO3QtPTF9ZWxzZSBpZih1PT09XCIuLlwiKXtpZih0PT09MSYmKGVbMl09PT1cIi4uXCJ8fGVbMF09PT1cIi4uXCIpKXticmVha31lbHNlIGlmKHQ+MCl7ZS5zcGxpY2UodC0xLDIpO3QtPTJ9fX19ZnVuY3Rpb24gcChlLHQpe3ZhciB1O2lmKGUmJmUuY2hhckF0KDApPT09XCIuXCIpe2lmKHQpe3U9dC5zcGxpdChcIi9cIik7dT11LnNsaWNlKDAsdS5sZW5ndGgtMSk7dT11LmNvbmNhdChlLnNwbGl0KFwiL1wiKSk7Yyh1KTtlPXUuam9pbihcIi9cIil9fXJldHVybiBlfWZ1bmN0aW9uIEQoZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiBwKHQsZSl9fWZ1bmN0aW9uIGgoZSl7ZnVuY3Rpb24gdCh0KXtvW2VdPXR9dC5mcm9tVGV4dD1mdW5jdGlvbihlLHQpe3Rocm93IG5ldyBFcnJvcihcImFtZGVmaW5lIGRvZXMgbm90IGltcGxlbWVudCBsb2FkLmZyb21UZXh0XCIpfTtyZXR1cm4gdH1sPWZ1bmN0aW9uKGUsdCxuLHIpe2Z1bmN0aW9uIGkoaSxvKXtpZih0eXBlb2YgaT09PVwic3RyaW5nXCIpe3JldHVybiBmKGUsdCxuLGkscil9ZWxzZXtpPWkubWFwKGZ1bmN0aW9uKHUpe3JldHVybiBmKGUsdCxuLHUscil9KTtpZihvKXt1Lm5leHRUaWNrKGZ1bmN0aW9uKCl7by5hcHBseShudWxsLGkpfSl9fX1pLnRvVXJsPWZ1bmN0aW9uKGUpe2lmKGUuaW5kZXhPZihcIi5cIik9PT0wKXtyZXR1cm4gcChlLGEuZGlybmFtZShuLmZpbGVuYW1lKSl9ZWxzZXtyZXR1cm4gZX19O3JldHVybiBpfTtyPXJ8fGZ1bmN0aW9uIEEoKXtyZXR1cm4gdC5yZXF1aXJlLmFwcGx5KHQsYXJndW1lbnRzKX07ZnVuY3Rpb24gbShlLHUsaSl7dmFyIGEsZixjLHA7aWYoZSl7Zj1vW2VdPXt9O2M9e2lkOmUsdXJpOm4sZXhwb3J0czpmfTthPWwocixmLGMsZSl9ZWxzZXtpZihzKXt0aHJvdyBuZXcgRXJyb3IoXCJhbWRlZmluZSB3aXRoIG5vIG1vZHVsZSBJRCBjYW5ub3QgYmUgY2FsbGVkIG1vcmUgdGhhbiBvbmNlIHBlciBmaWxlLlwiKX1zPXRydWU7Zj10LmV4cG9ydHM7Yz10O2E9bChyLGYsYyx0LmlkKX1pZih1KXt1PXUubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBhKGUpfSl9aWYodHlwZW9mIGk9PT1cImZ1bmN0aW9uXCIpe3A9aS5hcHBseShjLmV4cG9ydHMsdSl9ZWxzZXtwPWl9aWYocCE9PXVuZGVmaW5lZCl7Yy5leHBvcnRzPXA7aWYoZSl7b1tlXT1jLmV4cG9ydHN9fX1mPWZ1bmN0aW9uKGUsdCx1LG4scil7dmFyIHM9bi5pbmRleE9mKFwiIVwiKSxhPW4sYyxkO2lmKHM9PT0tMSl7bj1wKG4scik7aWYobj09PVwicmVxdWlyZVwiKXtyZXR1cm4gbChlLHQsdSxyKX1lbHNlIGlmKG49PT1cImV4cG9ydHNcIil7cmV0dXJuIHR9ZWxzZSBpZihuPT09XCJtb2R1bGVcIil7cmV0dXJuIHV9ZWxzZSBpZihvLmhhc093blByb3BlcnR5KG4pKXtyZXR1cm4gb1tuXX1lbHNlIGlmKGlbbl0pe20uYXBwbHkobnVsbCxpW25dKTtyZXR1cm4gb1tuXX1lbHNle2lmKGUpe3JldHVybiBlKGEpfWVsc2V7dGhyb3cgbmV3IEVycm9yKFwiTm8gbW9kdWxlIHdpdGggSUQ6IFwiK24pfX19ZWxzZXtjPW4uc3Vic3RyaW5nKDAscyk7bj1uLnN1YnN0cmluZyhzKzEsbi5sZW5ndGgpO2Q9ZihlLHQsdSxjLHIpO2lmKGQubm9ybWFsaXplKXtuPWQubm9ybWFsaXplKG4sRChyKSl9ZWxzZXtuPXAobixyKX1pZihvW25dKXtyZXR1cm4gb1tuXX1lbHNle2QubG9hZChuLGwoZSx0LHUsciksaChuKSx7fSk7cmV0dXJuIG9bbl19fX07ZnVuY3Rpb24gZChlLHQsdSl7aWYoQXJyYXkuaXNBcnJheShlKSl7dT10O3Q9ZTtlPXVuZGVmaW5lZH1lbHNlIGlmKHR5cGVvZiBlIT09XCJzdHJpbmdcIil7dT1lO2U9dD11bmRlZmluZWR9aWYodCYmIUFycmF5LmlzQXJyYXkodCkpe3U9dDt0PXVuZGVmaW5lZH1pZighdCl7dD1bXCJyZXF1aXJlXCIsXCJleHBvcnRzXCIsXCJtb2R1bGVcIl19aWYoZSl7aVtlXT1bZSx0LHVdfWVsc2V7bShlLHQsdSl9fWQucmVxdWlyZT1mdW5jdGlvbihlKXtpZihvW2VdKXtyZXR1cm4gb1tlXX1pZihpW2VdKXttLmFwcGx5KG51bGwsaVtlXSk7cmV0dXJuIG9bZV19fTtkLmFtZD17fTtyZXR1cm4gZH10LmV4cG9ydHM9cn0pLmNhbGwodGhpcyxlKFwiX3Byb2Nlc3NcIiksXCIvbm9kZV9tb2R1bGVzL3NvdXJjZS1tYXAvbm9kZV9tb2R1bGVzL2FtZGVmaW5lL2FtZGVmaW5lLmpzXCIpfSx7X3Byb2Nlc3M6MjYscGF0aDoyNX1dLDYxOltmdW5jdGlvbihlLHQsdSl7dC5leHBvcnRzPXtuYW1lOlwianMyY29mZmVlXCIsdmVyc2lvbjpcIjIuMi4wXCIsZGVzY3JpcHRpb246XCJKYXZhU2NyaXB0IHRvIENvZmZlZVNjcmlwdCBjb21waWxlclwiLGhvbWVwYWdlOlwiaHR0cDovL2pzMi5jb2ZmZWVcIixtYWluOlwiZGlzdC9qczJjb2ZmZWUuanNcIixrZXl3b3JkczpbXCJqYXZhc2NyaXB0XCIsXCJjb2ZmZWVzY3JpcHRcIixcImxhbmd1YWdlXCIsXCJjb21waWxlclwiXSxzY3JpcHRzOnt0ZXN0OlwibW9jaGFcIixhdXRvdGVzdDpcIm1vY2hhIC1SIG1pbiAtYiAtLXdhdGNoXCIscHJlcHVibGlzaDpcIm1vY2hhID4vZGV2L251bGwgJiYgbWFrZSAtQiBkaXN0XCJ9LGF1dGhvcjpcIlJpY28gU3RhLiBDcnV6IDxoaUByaWNvc3RhY3J1ei5jb20+XCIsbGljZW5zZTpcIk1JVFwiLGJ1Z3M6e3VybDpcImh0dHBzOi8vZ2l0aHViLmNvbS9qczJjb2ZmZWUvanMyY29mZmVlL2lzc3Vlc1wifSxyZXBvc2l0b3J5Ont0eXBlOlwiZ2l0XCIsdXJsOlwiaHR0cHM6Ly9naXRodWIuY29tL2pzMmNvZmZlZS9qczJjb2ZmZWUuZ2l0XCJ9LGJyb3dzZXI6XCJqczJjb2ZmZWUuY29mZmVlXCIsYmluOntqczJjb2ZmZWU6XCIuL2Jpbi9qczJjb2ZmZWVcIn0sZGVwZW5kZW5jaWVzOntlc2NvZGVnZW46XCJeMS42LjBcIixlc3ByaW1hOlwiXjIuNS4wXCIsZXN0cmF2ZXJzZTpcIl40LjEuMVwiLG1pbmltaXN0OlwiXjEuMS4wXCIsXCJyZWFkLWlucHV0XCI6XCJeMC4zLjFcIixcInNvdXJjZS1tYXBcIjpcIl4wLjUuMlwifSxkZXZEZXBlbmRlbmNpZXM6e2Jyb3dzZXJpZnk6XCIxMy4wLjBcIixjaGFpOlwiXjMuNC4wXCIsXCJjb2ZmZWUtc2NyaXB0XCI6XCJeMS44LjBcIixjb2ZmZWVpZnk6XCJeMi4wLjFcIixjb2ZmZWVsaW50OlwiXjEuNi4wXCIsZ2xvYjpcIl43LjAuMFwiLFwianMteWFtbFwiOlwiXjMuMi4xXCIsbW9jaGE6XCJeMi4xLjBcIixcIm1vY2hhLWNsZWFuXCI6XCJeMS4wLjBcIixcInVnbGlmeS1qc1wiOlwiXjIuNC4xNlwiLHVuZGVyc2NvcmU6XCJeMS43LjBcIn19fSx7fV19LHt9LFsxXSkoMSl9KTtcbiIsIi8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG4vLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG4vLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcbi8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcbi8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcbi8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcbi8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncbi8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcbi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cbi8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG4vLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG4vLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXG4vLyByZXNvbHZlcyAuIGFuZCAuLiBlbGVtZW50cyBpbiBhIHBhdGggYXJyYXkgd2l0aCBkaXJlY3RvcnkgbmFtZXMgdGhlcmVcbi8vIG11c3QgYmUgbm8gc2xhc2hlcywgZW1wdHkgZWxlbWVudHMsIG9yIGRldmljZSBuYW1lcyAoYzpcXCkgaW4gdGhlIGFycmF5XG4vLyAoc28gYWxzbyBubyBsZWFkaW5nIGFuZCB0cmFpbGluZyBzbGFzaGVzIC0gaXQgZG9lcyBub3QgZGlzdGluZ3Vpc2hcbi8vIHJlbGF0aXZlIGFuZCBhYnNvbHV0ZSBwYXRocylcbmZ1bmN0aW9uIG5vcm1hbGl6ZUFycmF5KHBhcnRzLCBhbGxvd0Fib3ZlUm9vdCkge1xuICAvLyBpZiB0aGUgcGF0aCB0cmllcyB0byBnbyBhYm92ZSB0aGUgcm9vdCwgYHVwYCBlbmRzIHVwID4gMFxuICB2YXIgdXAgPSAwO1xuICBmb3IgKHZhciBpID0gcGFydHMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICB2YXIgbGFzdCA9IHBhcnRzW2ldO1xuICAgIGlmIChsYXN0ID09PSAnLicpIHtcbiAgICAgIHBhcnRzLnNwbGljZShpLCAxKTtcbiAgICB9IGVsc2UgaWYgKGxhc3QgPT09ICcuLicpIHtcbiAgICAgIHBhcnRzLnNwbGljZShpLCAxKTtcbiAgICAgIHVwKys7XG4gICAgfSBlbHNlIGlmICh1cCkge1xuICAgICAgcGFydHMuc3BsaWNlKGksIDEpO1xuICAgICAgdXAtLTtcbiAgICB9XG4gIH1cblxuICAvLyBpZiB0aGUgcGF0aCBpcyBhbGxvd2VkIHRvIGdvIGFib3ZlIHRoZSByb290LCByZXN0b3JlIGxlYWRpbmcgLi5zXG4gIGlmIChhbGxvd0Fib3ZlUm9vdCkge1xuICAgIGZvciAoOyB1cC0tOyB1cCkge1xuICAgICAgcGFydHMudW5zaGlmdCgnLi4nKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gcGFydHM7XG59XG5cbi8vIFNwbGl0IGEgZmlsZW5hbWUgaW50byBbcm9vdCwgZGlyLCBiYXNlbmFtZSwgZXh0XSwgdW5peCB2ZXJzaW9uXG4vLyAncm9vdCcgaXMganVzdCBhIHNsYXNoLCBvciBub3RoaW5nLlxudmFyIHNwbGl0UGF0aFJlID1cbiAgICAvXihcXC8/fCkoW1xcc1xcU10qPykoKD86XFwuezEsMn18W15cXC9dKz98KShcXC5bXi5cXC9dKnwpKSg/OltcXC9dKikkLztcbnZhciBzcGxpdFBhdGggPSBmdW5jdGlvbihmaWxlbmFtZSkge1xuICByZXR1cm4gc3BsaXRQYXRoUmUuZXhlYyhmaWxlbmFtZSkuc2xpY2UoMSk7XG59O1xuXG4vLyBwYXRoLnJlc29sdmUoW2Zyb20gLi4uXSwgdG8pXG4vLyBwb3NpeCB2ZXJzaW9uXG5leHBvcnRzLnJlc29sdmUgPSBmdW5jdGlvbigpIHtcbiAgdmFyIHJlc29sdmVkUGF0aCA9ICcnLFxuICAgICAgcmVzb2x2ZWRBYnNvbHV0ZSA9IGZhbHNlO1xuXG4gIGZvciAodmFyIGkgPSBhcmd1bWVudHMubGVuZ3RoIC0gMTsgaSA+PSAtMSAmJiAhcmVzb2x2ZWRBYnNvbHV0ZTsgaS0tKSB7XG4gICAgdmFyIHBhdGggPSAoaSA+PSAwKSA/IGFyZ3VtZW50c1tpXSA6IHByb2Nlc3MuY3dkKCk7XG5cbiAgICAvLyBTa2lwIGVtcHR5IGFuZCBpbnZhbGlkIGVudHJpZXNcbiAgICBpZiAodHlwZW9mIHBhdGggIT09ICdzdHJpbmcnKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcmd1bWVudHMgdG8gcGF0aC5yZXNvbHZlIG11c3QgYmUgc3RyaW5ncycpO1xuICAgIH0gZWxzZSBpZiAoIXBhdGgpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIHJlc29sdmVkUGF0aCA9IHBhdGggKyAnLycgKyByZXNvbHZlZFBhdGg7XG4gICAgcmVzb2x2ZWRBYnNvbHV0ZSA9IHBhdGguY2hhckF0KDApID09PSAnLyc7XG4gIH1cblxuICAvLyBBdCB0aGlzIHBvaW50IHRoZSBwYXRoIHNob3VsZCBiZSByZXNvbHZlZCB0byBhIGZ1bGwgYWJzb2x1dGUgcGF0aCwgYnV0XG4gIC8vIGhhbmRsZSByZWxhdGl2ZSBwYXRocyB0byBiZSBzYWZlIChtaWdodCBoYXBwZW4gd2hlbiBwcm9jZXNzLmN3ZCgpIGZhaWxzKVxuXG4gIC8vIE5vcm1hbGl6ZSB0aGUgcGF0aFxuICByZXNvbHZlZFBhdGggPSBub3JtYWxpemVBcnJheShmaWx0ZXIocmVzb2x2ZWRQYXRoLnNwbGl0KCcvJyksIGZ1bmN0aW9uKHApIHtcbiAgICByZXR1cm4gISFwO1xuICB9KSwgIXJlc29sdmVkQWJzb2x1dGUpLmpvaW4oJy8nKTtcblxuICByZXR1cm4gKChyZXNvbHZlZEFic29sdXRlID8gJy8nIDogJycpICsgcmVzb2x2ZWRQYXRoKSB8fCAnLic7XG59O1xuXG4vLyBwYXRoLm5vcm1hbGl6ZShwYXRoKVxuLy8gcG9zaXggdmVyc2lvblxuZXhwb3J0cy5ub3JtYWxpemUgPSBmdW5jdGlvbihwYXRoKSB7XG4gIHZhciBpc0Fic29sdXRlID0gZXhwb3J0cy5pc0Fic29sdXRlKHBhdGgpLFxuICAgICAgdHJhaWxpbmdTbGFzaCA9IHN1YnN0cihwYXRoLCAtMSkgPT09ICcvJztcblxuICAvLyBOb3JtYWxpemUgdGhlIHBhdGhcbiAgcGF0aCA9IG5vcm1hbGl6ZUFycmF5KGZpbHRlcihwYXRoLnNwbGl0KCcvJyksIGZ1bmN0aW9uKHApIHtcbiAgICByZXR1cm4gISFwO1xuICB9KSwgIWlzQWJzb2x1dGUpLmpvaW4oJy8nKTtcblxuICBpZiAoIXBhdGggJiYgIWlzQWJzb2x1dGUpIHtcbiAgICBwYXRoID0gJy4nO1xuICB9XG4gIGlmIChwYXRoICYmIHRyYWlsaW5nU2xhc2gpIHtcbiAgICBwYXRoICs9ICcvJztcbiAgfVxuXG4gIHJldHVybiAoaXNBYnNvbHV0ZSA/ICcvJyA6ICcnKSArIHBhdGg7XG59O1xuXG4vLyBwb3NpeCB2ZXJzaW9uXG5leHBvcnRzLmlzQWJzb2x1dGUgPSBmdW5jdGlvbihwYXRoKSB7XG4gIHJldHVybiBwYXRoLmNoYXJBdCgwKSA9PT0gJy8nO1xufTtcblxuLy8gcG9zaXggdmVyc2lvblxuZXhwb3J0cy5qb2luID0gZnVuY3Rpb24oKSB7XG4gIHZhciBwYXRocyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMCk7XG4gIHJldHVybiBleHBvcnRzLm5vcm1hbGl6ZShmaWx0ZXIocGF0aHMsIGZ1bmN0aW9uKHAsIGluZGV4KSB7XG4gICAgaWYgKHR5cGVvZiBwICE9PSAnc3RyaW5nJykge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnRzIHRvIHBhdGguam9pbiBtdXN0IGJlIHN0cmluZ3MnKTtcbiAgICB9XG4gICAgcmV0dXJuIHA7XG4gIH0pLmpvaW4oJy8nKSk7XG59O1xuXG5cbi8vIHBhdGgucmVsYXRpdmUoZnJvbSwgdG8pXG4vLyBwb3NpeCB2ZXJzaW9uXG5leHBvcnRzLnJlbGF0aXZlID0gZnVuY3Rpb24oZnJvbSwgdG8pIHtcbiAgZnJvbSA9IGV4cG9ydHMucmVzb2x2ZShmcm9tKS5zdWJzdHIoMSk7XG4gIHRvID0gZXhwb3J0cy5yZXNvbHZlKHRvKS5zdWJzdHIoMSk7XG5cbiAgZnVuY3Rpb24gdHJpbShhcnIpIHtcbiAgICB2YXIgc3RhcnQgPSAwO1xuICAgIGZvciAoOyBzdGFydCA8IGFyci5sZW5ndGg7IHN0YXJ0KyspIHtcbiAgICAgIGlmIChhcnJbc3RhcnRdICE9PSAnJykgYnJlYWs7XG4gICAgfVxuXG4gICAgdmFyIGVuZCA9IGFyci5sZW5ndGggLSAxO1xuICAgIGZvciAoOyBlbmQgPj0gMDsgZW5kLS0pIHtcbiAgICAgIGlmIChhcnJbZW5kXSAhPT0gJycpIGJyZWFrO1xuICAgIH1cblxuICAgIGlmIChzdGFydCA+IGVuZCkgcmV0dXJuIFtdO1xuICAgIHJldHVybiBhcnIuc2xpY2Uoc3RhcnQsIGVuZCAtIHN0YXJ0ICsgMSk7XG4gIH1cblxuICB2YXIgZnJvbVBhcnRzID0gdHJpbShmcm9tLnNwbGl0KCcvJykpO1xuICB2YXIgdG9QYXJ0cyA9IHRyaW0odG8uc3BsaXQoJy8nKSk7XG5cbiAgdmFyIGxlbmd0aCA9IE1hdGgubWluKGZyb21QYXJ0cy5sZW5ndGgsIHRvUGFydHMubGVuZ3RoKTtcbiAgdmFyIHNhbWVQYXJ0c0xlbmd0aCA9IGxlbmd0aDtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgIGlmIChmcm9tUGFydHNbaV0gIT09IHRvUGFydHNbaV0pIHtcbiAgICAgIHNhbWVQYXJ0c0xlbmd0aCA9IGk7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICB2YXIgb3V0cHV0UGFydHMgPSBbXTtcbiAgZm9yICh2YXIgaSA9IHNhbWVQYXJ0c0xlbmd0aDsgaSA8IGZyb21QYXJ0cy5sZW5ndGg7IGkrKykge1xuICAgIG91dHB1dFBhcnRzLnB1c2goJy4uJyk7XG4gIH1cblxuICBvdXRwdXRQYXJ0cyA9IG91dHB1dFBhcnRzLmNvbmNhdCh0b1BhcnRzLnNsaWNlKHNhbWVQYXJ0c0xlbmd0aCkpO1xuXG4gIHJldHVybiBvdXRwdXRQYXJ0cy5qb2luKCcvJyk7XG59O1xuXG5leHBvcnRzLnNlcCA9ICcvJztcbmV4cG9ydHMuZGVsaW1pdGVyID0gJzonO1xuXG5leHBvcnRzLmRpcm5hbWUgPSBmdW5jdGlvbihwYXRoKSB7XG4gIHZhciByZXN1bHQgPSBzcGxpdFBhdGgocGF0aCksXG4gICAgICByb290ID0gcmVzdWx0WzBdLFxuICAgICAgZGlyID0gcmVzdWx0WzFdO1xuXG4gIGlmICghcm9vdCAmJiAhZGlyKSB7XG4gICAgLy8gTm8gZGlybmFtZSB3aGF0c29ldmVyXG4gICAgcmV0dXJuICcuJztcbiAgfVxuXG4gIGlmIChkaXIpIHtcbiAgICAvLyBJdCBoYXMgYSBkaXJuYW1lLCBzdHJpcCB0cmFpbGluZyBzbGFzaFxuICAgIGRpciA9IGRpci5zdWJzdHIoMCwgZGlyLmxlbmd0aCAtIDEpO1xuICB9XG5cbiAgcmV0dXJuIHJvb3QgKyBkaXI7XG59O1xuXG5cbmV4cG9ydHMuYmFzZW5hbWUgPSBmdW5jdGlvbihwYXRoLCBleHQpIHtcbiAgdmFyIGYgPSBzcGxpdFBhdGgocGF0aClbMl07XG4gIC8vIFRPRE86IG1ha2UgdGhpcyBjb21wYXJpc29uIGNhc2UtaW5zZW5zaXRpdmUgb24gd2luZG93cz9cbiAgaWYgKGV4dCAmJiBmLnN1YnN0cigtMSAqIGV4dC5sZW5ndGgpID09PSBleHQpIHtcbiAgICBmID0gZi5zdWJzdHIoMCwgZi5sZW5ndGggLSBleHQubGVuZ3RoKTtcbiAgfVxuICByZXR1cm4gZjtcbn07XG5cblxuZXhwb3J0cy5leHRuYW1lID0gZnVuY3Rpb24ocGF0aCkge1xuICByZXR1cm4gc3BsaXRQYXRoKHBhdGgpWzNdO1xufTtcblxuZnVuY3Rpb24gZmlsdGVyICh4cywgZikge1xuICAgIGlmICh4cy5maWx0ZXIpIHJldHVybiB4cy5maWx0ZXIoZik7XG4gICAgdmFyIHJlcyA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgeHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGYoeHNbaV0sIGksIHhzKSkgcmVzLnB1c2goeHNbaV0pO1xuICAgIH1cbiAgICByZXR1cm4gcmVzO1xufVxuXG4vLyBTdHJpbmcucHJvdG90eXBlLnN1YnN0ciAtIG5lZ2F0aXZlIGluZGV4IGRvbid0IHdvcmsgaW4gSUU4XG52YXIgc3Vic3RyID0gJ2FiJy5zdWJzdHIoLTEpID09PSAnYidcbiAgICA/IGZ1bmN0aW9uIChzdHIsIHN0YXJ0LCBsZW4pIHsgcmV0dXJuIHN0ci5zdWJzdHIoc3RhcnQsIGxlbikgfVxuICAgIDogZnVuY3Rpb24gKHN0ciwgc3RhcnQsIGxlbikge1xuICAgICAgICBpZiAoc3RhcnQgPCAwKSBzdGFydCA9IHN0ci5sZW5ndGggKyBzdGFydDtcbiAgICAgICAgcmV0dXJuIHN0ci5zdWJzdHIoc3RhcnQsIGxlbik7XG4gICAgfVxuO1xuIiwiLy8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG5cbnZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcbnZhciBxdWV1ZSA9IFtdO1xudmFyIGRyYWluaW5nID0gZmFsc2U7XG52YXIgY3VycmVudFF1ZXVlO1xudmFyIHF1ZXVlSW5kZXggPSAtMTtcblxuZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkge1xuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgfVxuICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgZHJhaW5RdWV1ZSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHtcbiAgICBpZiAoZHJhaW5pbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgdGltZW91dCA9IHNldFRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcbiAgICBkcmFpbmluZyA9IHRydWU7XG5cbiAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIHdoaWxlKGxlbikge1xuICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTtcbiAgICAgICAgcXVldWUgPSBbXTtcbiAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRRdWV1ZSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB9XG4gICAgY3VycmVudFF1ZXVlID0gbnVsbDtcbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbn1cblxucHJvY2Vzcy5uZXh0VGljayA9IGZ1bmN0aW9uIChmdW4pIHtcbiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG4gICAgICAgIHNldFRpbWVvdXQoZHJhaW5RdWV1ZSwgMCk7XG4gICAgfVxufTtcblxuLy8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG4gICAgdGhpcy5mdW4gPSBmdW47XG4gICAgdGhpcy5hcnJheSA9IGFycmF5O1xufVxuSXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xufTtcbnByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7XG5wcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xucHJvY2Vzcy5lbnYgPSB7fTtcbnByb2Nlc3MuYXJndiA9IFtdO1xucHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5wcm9jZXNzLnZlcnNpb25zID0ge307XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG5wcm9jZXNzLm9uID0gbm9vcDtcbnByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5vbmNlID0gbm9vcDtcbnByb2Nlc3Mub2ZmID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xucHJvY2Vzcy5lbWl0ID0gbm9vcDtcblxucHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xuXG5wcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9O1xucHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcbnByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG4iLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vbGliL3NwaW5lJyk7IiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjEwLjBcbihmdW5jdGlvbigpIHtcbiAgdmFyIFNwaW5lO1xuXG4gIFNwaW5lID0gdGhpcy5TcGluZSB8fCByZXF1aXJlKCdzcGluZScpO1xuXG4gIFNwaW5lLk1vZGVsLkxvY2FsID0ge1xuICAgIGV4dGVuZGVkOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBlLCBlcnJvciwgdGVzdExvY2FsU3RvcmFnZTtcbiAgICAgIHRlc3RMb2NhbFN0b3JhZ2UgPSAnc3BpbmUnICsgbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgICB0cnkge1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSh0ZXN0TG9jYWxTdG9yYWdlLCB0ZXN0TG9jYWxTdG9yYWdlKTtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0odGVzdExvY2FsU3RvcmFnZSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBlID0gZXJyb3I7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHRoaXMuY2hhbmdlKHRoaXMuc2F2ZUxvY2FsKTtcbiAgICAgIHJldHVybiB0aGlzLmZldGNoKHRoaXMubG9hZExvY2FsKTtcbiAgICB9LFxuICAgIHNhdmVMb2NhbDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcmVzdWx0O1xuICAgICAgcmVzdWx0ID0gSlNPTi5zdHJpbmdpZnkodGhpcyk7XG4gICAgICByZXR1cm4gbG9jYWxTdG9yYWdlW3RoaXMuY2xhc3NOYW1lXSA9IHJlc3VsdDtcbiAgICB9LFxuICAgIGxvYWRMb2NhbDogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgdmFyIHJlc3VsdDtcbiAgICAgIGlmIChvcHRpb25zID09IG51bGwpIHtcbiAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgfVxuICAgICAgaWYgKCFvcHRpb25zLmhhc093blByb3BlcnR5KCdjbGVhcicpKSB7XG4gICAgICAgIG9wdGlvbnMuY2xlYXIgPSB0cnVlO1xuICAgICAgfVxuICAgICAgcmVzdWx0ID0gbG9jYWxTdG9yYWdlW3RoaXMuY2xhc3NOYW1lXTtcbiAgICAgIHJldHVybiB0aGlzLnJlZnJlc2gocmVzdWx0IHx8IFtdLCBvcHRpb25zKTtcbiAgICB9XG4gIH07XG5cbiAgaWYgKHR5cGVvZiBtb2R1bGUgIT09IFwidW5kZWZpbmVkXCIgJiYgbW9kdWxlICE9PSBudWxsKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBTcGluZS5Nb2RlbC5Mb2NhbDtcbiAgfVxuXG59KS5jYWxsKHRoaXMpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1sb2NhbC5qcy5tYXBcbiIsIi8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS4xMC4wXG4oZnVuY3Rpb24oKSB7XG4gIHZhciAkLCBTcGluZSxcbiAgICBleHRlbmQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gICAgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LFxuICAgIHNsaWNlID0gW10uc2xpY2UsXG4gICAgYmluZCA9IGZ1bmN0aW9uKGZuLCBtZSl7IHJldHVybiBmdW5jdGlvbigpeyByZXR1cm4gZm4uYXBwbHkobWUsIGFyZ3VtZW50cyk7IH07IH07XG5cbiAgU3BpbmUgPSB0aGlzLlNwaW5lIHx8IHJlcXVpcmUoJ3NwaW5lJyk7XG5cbiAgJCA9IFNwaW5lLiQ7XG5cbiAgU3BpbmUuTWFuYWdlciA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gICAgZXh0ZW5kKE1hbmFnZXIsIHN1cGVyQ2xhc3MpO1xuXG4gICAgTWFuYWdlci5pbmNsdWRlKFNwaW5lLkV2ZW50cyk7XG5cbiAgICBmdW5jdGlvbiBNYW5hZ2VyKCkge1xuICAgICAgdGhpcy5jb250cm9sbGVycyA9IFtdO1xuICAgICAgdGhpcy5iaW5kKCdjaGFuZ2UnLCB0aGlzLmNoYW5nZSk7XG4gICAgICB0aGlzLmFkZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cblxuICAgIE1hbmFnZXIucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGNvbnQsIGNvbnRyb2xsZXJzLCBpLCBsZW4sIHJlc3VsdHM7XG4gICAgICBjb250cm9sbGVycyA9IDEgPD0gYXJndW1lbnRzLmxlbmd0aCA/IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKSA6IFtdO1xuICAgICAgcmVzdWx0cyA9IFtdO1xuICAgICAgZm9yIChpID0gMCwgbGVuID0gY29udHJvbGxlcnMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgY29udCA9IGNvbnRyb2xsZXJzW2ldO1xuICAgICAgICByZXN1bHRzLnB1c2godGhpcy5hZGRPbmUoY29udCkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgfTtcblxuICAgIE1hbmFnZXIucHJvdG90eXBlLmFkZE9uZSA9IGZ1bmN0aW9uKGNvbnRyb2xsZXIpIHtcbiAgICAgIGNvbnRyb2xsZXIuYmluZCgnYWN0aXZlJywgKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICB2YXIgYXJncztcbiAgICAgICAgICBhcmdzID0gMSA8PSBhcmd1bWVudHMubGVuZ3RoID8gc2xpY2UuY2FsbChhcmd1bWVudHMsIDApIDogW107XG4gICAgICAgICAgcmV0dXJuIF90aGlzLnRyaWdnZXIuYXBwbHkoX3RoaXMsIFsnY2hhbmdlJywgY29udHJvbGxlcl0uY29uY2F0KHNsaWNlLmNhbGwoYXJncykpKTtcbiAgICAgICAgfTtcbiAgICAgIH0pKHRoaXMpKTtcbiAgICAgIGNvbnRyb2xsZXIuYmluZCgncmVsZWFzZScsIChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIGM7XG4gICAgICAgICAgcmV0dXJuIF90aGlzLmNvbnRyb2xsZXJzID0gKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGksIGxlbiwgcmVmLCByZXN1bHRzO1xuICAgICAgICAgICAgcmVmID0gdGhpcy5jb250cm9sbGVycztcbiAgICAgICAgICAgIHJlc3VsdHMgPSBbXTtcbiAgICAgICAgICAgIGZvciAoaSA9IDAsIGxlbiA9IHJlZi5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICBjID0gcmVmW2ldO1xuICAgICAgICAgICAgICBpZiAoYyAhPT0gY29udHJvbGxlcikge1xuICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaChjKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgICAgICAgfSkuY2FsbChfdGhpcyk7XG4gICAgICAgIH07XG4gICAgICB9KSh0aGlzKSk7XG4gICAgICByZXR1cm4gdGhpcy5jb250cm9sbGVycy5wdXNoKGNvbnRyb2xsZXIpO1xuICAgIH07XG5cbiAgICBNYW5hZ2VyLnByb3RvdHlwZS5kZWFjdGl2YXRlID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy50cmlnZ2VyLmFwcGx5KHRoaXMsIFsnY2hhbmdlJywgZmFsc2VdLmNvbmNhdChzbGljZS5jYWxsKGFyZ3VtZW50cykpKTtcbiAgICB9O1xuXG4gICAgTWFuYWdlci5wcm90b3R5cGUuY2hhbmdlID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgYXJncywgY29udCwgY3VycmVudCwgaSwgbGVuLCByZWY7XG4gICAgICBjdXJyZW50ID0gYXJndW1lbnRzWzBdLCBhcmdzID0gMiA8PSBhcmd1bWVudHMubGVuZ3RoID8gc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpIDogW107XG4gICAgICByZWYgPSB0aGlzLmNvbnRyb2xsZXJzO1xuICAgICAgZm9yIChpID0gMCwgbGVuID0gcmVmLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGNvbnQgPSByZWZbaV07XG4gICAgICAgIGlmIChjb250ICE9PSBjdXJyZW50KSB7XG4gICAgICAgICAgY29udC5kZWFjdGl2YXRlLmFwcGx5KGNvbnQsIGFyZ3MpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoY3VycmVudCkge1xuICAgICAgICByZXR1cm4gY3VycmVudC5hY3RpdmF0ZS5hcHBseShjdXJyZW50LCBhcmdzKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIE1hbmFnZXI7XG5cbiAgfSkoU3BpbmUuTW9kdWxlKTtcblxuICBTcGluZS5Db250cm9sbGVyLmluY2x1ZGUoe1xuICAgIGFjdGl2ZTogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgYXJncztcbiAgICAgIGFyZ3MgPSAxIDw9IGFyZ3VtZW50cy5sZW5ndGggPyBzbGljZS5jYWxsKGFyZ3VtZW50cywgMCkgOiBbXTtcbiAgICAgIGlmICh0eXBlb2YgYXJnc1swXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aGlzLmJpbmQoJ2FjdGl2ZScsIGFyZ3NbMF0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYXJncy51bnNoaWZ0KCdhY3RpdmUnKTtcbiAgICAgICAgdGhpcy50cmlnZ2VyLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcbiAgICBpc0FjdGl2ZTogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5lbC5oYXNDbGFzcygnYWN0aXZlJyk7XG4gICAgfSxcbiAgICBhY3RpdmF0ZTogZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLmVsLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG4gICAgZGVhY3RpdmF0ZTogZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLmVsLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgfSk7XG5cbiAgU3BpbmUuU3RhY2sgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICAgIGV4dGVuZChTdGFjaywgc3VwZXJDbGFzcyk7XG5cbiAgICBTdGFjay5wcm90b3R5cGUuY29udHJvbGxlcnMgPSB7fTtcblxuICAgIFN0YWNrLnByb3RvdHlwZS5yb3V0ZXMgPSB7fTtcblxuICAgIFN0YWNrLnByb3RvdHlwZS5jbGFzc05hbWUgPSAnc3BpbmUgc3RhY2snO1xuXG4gICAgZnVuY3Rpb24gU3RhY2soKSB7XG4gICAgICB0aGlzLnJlbGVhc2UgPSBiaW5kKHRoaXMucmVsZWFzZSwgdGhpcyk7XG4gICAgICB2YXIgZm4sIGtleSwgcmVmLCByZWYxLCByZWYyLCB2YWx1ZTtcbiAgICAgIFN0YWNrLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgdGhpcy5tYW5hZ2VyID0gbmV3IFNwaW5lLk1hbmFnZXI7XG4gICAgICB0aGlzLnJvdXRlciA9IChyZWYgPSBTcGluZS5Sb3V0ZSkgIT0gbnVsbCA/IHJlZi5jcmVhdGUoKSA6IHZvaWQgMDtcbiAgICAgIHJlZjEgPSB0aGlzLmNvbnRyb2xsZXJzO1xuICAgICAgZm9yIChrZXkgaW4gcmVmMSkge1xuICAgICAgICB2YWx1ZSA9IHJlZjFba2V5XTtcbiAgICAgICAgaWYgKHRoaXNba2V5XSAhPSBudWxsKSB7XG4gICAgICAgICAgdGhyb3cgRXJyb3IoXCInQFwiICsga2V5ICsgXCInIGFscmVhZHkgYXNzaWduZWRcIik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpc1trZXldID0gbmV3IHZhbHVlKHtcbiAgICAgICAgICBzdGFjazogdGhpc1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5hZGQodGhpc1trZXldKTtcbiAgICAgIH1cbiAgICAgIHJlZjIgPSB0aGlzLnJvdXRlcztcbiAgICAgIGZuID0gKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbihrZXksIHZhbHVlKSB7XG4gICAgICAgICAgdmFyIGNhbGxiYWNrO1xuICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrID0gdmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNhbGxiYWNrIHx8IChjYWxsYmFjayA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHJlZjM7XG4gICAgICAgICAgICByZXR1cm4gKHJlZjMgPSBfdGhpc1t2YWx1ZV0pLmFjdGl2ZS5hcHBseShyZWYzLCBhcmd1bWVudHMpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybiBfdGhpcy5yb3V0ZShrZXksIGNhbGxiYWNrKTtcbiAgICAgICAgfTtcbiAgICAgIH0pKHRoaXMpO1xuICAgICAgZm9yIChrZXkgaW4gcmVmMikge1xuICAgICAgICB2YWx1ZSA9IHJlZjJba2V5XTtcbiAgICAgICAgZm4oa2V5LCB2YWx1ZSk7XG4gICAgICB9XG4gICAgICBpZiAodGhpc1tcImRlZmF1bHRcIl0pIHtcbiAgICAgICAgdGhpc1t0aGlzW1wiZGVmYXVsdFwiXV0uYWN0aXZlKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgU3RhY2sucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uKGNvbnRyb2xsZXIpIHtcbiAgICAgIHRoaXMubWFuYWdlci5hZGQoY29udHJvbGxlcik7XG4gICAgICByZXR1cm4gdGhpcy5hcHBlbmQoY29udHJvbGxlcik7XG4gICAgfTtcblxuICAgIFN0YWNrLnByb3RvdHlwZS5yZWxlYXNlID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcmVmO1xuICAgICAgaWYgKChyZWYgPSB0aGlzLnJvdXRlcikgIT0gbnVsbCkge1xuICAgICAgICByZWYuZGVzdHJveSgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFN0YWNrLl9fc3VwZXJfXy5yZWxlYXNlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfTtcblxuICAgIHJldHVybiBTdGFjaztcblxuICB9KShTcGluZS5Db250cm9sbGVyKTtcblxuICBpZiAodHlwZW9mIG1vZHVsZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBtb2R1bGUgIT09IG51bGwpIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IFNwaW5lLk1hbmFnZXI7XG4gIH1cblxuICBpZiAodHlwZW9mIG1vZHVsZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBtb2R1bGUgIT09IG51bGwpIHtcbiAgICBtb2R1bGUuZXhwb3J0cy5TdGFjayA9IFNwaW5lLlN0YWNrO1xuICB9XG5cbn0pLmNhbGwodGhpcyk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1hbmFnZXIuanMubWFwXG4iLCIvLyBHZW5lcmF0ZWQgYnkgQ29mZmVlU2NyaXB0IDEuMTAuMFxuKGZ1bmN0aW9uKCkge1xuICB2YXIgJCwgUGF0aCwgUm91dGUsIFNwaW5lLCBlc2NhcGVSZWdFeHAsIGhhc2hTdHJpcCwgbmFtZWRQYXJhbSwgc3BsYXRQYXJhbSxcbiAgICBleHRlbmQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gICAgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LFxuICAgIHNsaWNlID0gW10uc2xpY2U7XG5cbiAgU3BpbmUgPSB0aGlzLlNwaW5lIHx8IHJlcXVpcmUoJ3NwaW5lJyk7XG5cbiAgJCA9IFNwaW5lLiQ7XG5cbiAgaGFzaFN0cmlwID0gL14jKi87XG5cbiAgbmFtZWRQYXJhbSA9IC86KFtcXHdcXGRdKykvZztcblxuICBzcGxhdFBhcmFtID0gL1xcKihbXFx3XFxkXSspL2c7XG5cbiAgZXNjYXBlUmVnRXhwID0gL1stW1xcXXt9KCkrPy4sXFxcXF4kfCNcXHNdL2c7XG5cbiAgUGF0aCA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gICAgZXh0ZW5kKFBhdGgsIHN1cGVyQ2xhc3MpO1xuXG4gICAgZnVuY3Rpb24gUGF0aChwYXRoLCBjYWxsYmFjaykge1xuICAgICAgdmFyIG1hdGNoO1xuICAgICAgdGhpcy5uYW1lcyA9IFtdO1xuICAgICAgdGhpcy5wYXRoID0gcGF0aDtcbiAgICAgIHRoaXMuY2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgICAgIGlmICh0eXBlb2YgcGF0aCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgbmFtZWRQYXJhbS5sYXN0SW5kZXggPSAwO1xuICAgICAgICB3aGlsZSAoKG1hdGNoID0gbmFtZWRQYXJhbS5leGVjKHBhdGgpKSAhPT0gbnVsbCkge1xuICAgICAgICAgIHRoaXMubmFtZXMucHVzaChtYXRjaFsxXSk7XG4gICAgICAgIH1cbiAgICAgICAgc3BsYXRQYXJhbS5sYXN0SW5kZXggPSAwO1xuICAgICAgICB3aGlsZSAoKG1hdGNoID0gc3BsYXRQYXJhbS5leGVjKHBhdGgpKSAhPT0gbnVsbCkge1xuICAgICAgICAgIHRoaXMubmFtZXMucHVzaChtYXRjaFsxXSk7XG4gICAgICAgIH1cbiAgICAgICAgcGF0aCA9IHBhdGgucmVwbGFjZShlc2NhcGVSZWdFeHAsICdcXFxcJCYnKS5yZXBsYWNlKG5hbWVkUGFyYW0sICcoW15cXC9dKiknKS5yZXBsYWNlKHNwbGF0UGFyYW0sICcoLio/KScpO1xuICAgICAgICB0aGlzLnJvdXRlID0gbmV3IFJlZ0V4cChcIl5cIiArIHBhdGggKyBcIiRcIik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnJvdXRlID0gcGF0aDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBQYXRoLnByb3RvdHlwZS5tYXRjaCA9IGZ1bmN0aW9uKHBhdGgsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBpLCBqLCBsZW4sIG1hdGNoLCBwYXJhbSwgcGFyYW1zO1xuICAgICAgaWYgKG9wdGlvbnMgPT0gbnVsbCkge1xuICAgICAgICBvcHRpb25zID0ge307XG4gICAgICB9XG4gICAgICBpZiAoIShtYXRjaCA9IHRoaXMucm91dGUuZXhlYyhwYXRoKSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgb3B0aW9ucy5tYXRjaCA9IG1hdGNoO1xuICAgICAgcGFyYW1zID0gbWF0Y2guc2xpY2UoMSk7XG4gICAgICBpZiAodGhpcy5uYW1lcy5sZW5ndGgpIHtcbiAgICAgICAgZm9yIChpID0gaiA9IDAsIGxlbiA9IHBhcmFtcy5sZW5ndGg7IGogPCBsZW47IGkgPSArK2opIHtcbiAgICAgICAgICBwYXJhbSA9IHBhcmFtc1tpXTtcbiAgICAgICAgICBvcHRpb25zW3RoaXMubmFtZXNbaV1dID0gcGFyYW07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFJvdXRlLnRyaWdnZXIoJ2JlZm9yZScsIHRoaXMpO1xuICAgICAgcmV0dXJuIHRoaXMuY2FsbGJhY2suY2FsbChudWxsLCBvcHRpb25zKSAhPT0gZmFsc2U7XG4gICAgfTtcblxuICAgIHJldHVybiBQYXRoO1xuXG4gIH0pKFNwaW5lLk1vZHVsZSk7XG5cbiAgUm91dGUgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICAgIHZhciByZWY7XG5cbiAgICBleHRlbmQoUm91dGUsIHN1cGVyQ2xhc3MpO1xuXG4gICAgUm91dGUuZXh0ZW5kKFNwaW5lLkV2ZW50cyk7XG5cbiAgICBSb3V0ZS5oaXN0b3J5U3VwcG9ydCA9ICgocmVmID0gd2luZG93Lmhpc3RvcnkpICE9IG51bGwgPyByZWYucHVzaFN0YXRlIDogdm9pZCAwKSAhPSBudWxsO1xuXG4gICAgUm91dGUub3B0aW9ucyA9IHtcbiAgICAgIHRyaWdnZXI6IHRydWUsXG4gICAgICBoaXN0b3J5OiBmYWxzZSxcbiAgICAgIHNoaW06IGZhbHNlLFxuICAgICAgcmVwbGFjZTogZmFsc2UsXG4gICAgICByZWRpcmVjdDogZmFsc2VcbiAgICB9O1xuXG4gICAgUm91dGUucm91dGVycyA9IFtdO1xuXG4gICAgUm91dGUuc2V0dXAgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICBpZiAob3B0aW9ucyA9PSBudWxsKSB7XG4gICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgIH1cbiAgICAgIHRoaXMub3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCB0aGlzLm9wdGlvbnMsIG9wdGlvbnMpO1xuICAgICAgaWYgKHRoaXMub3B0aW9ucy5oaXN0b3J5KSB7XG4gICAgICAgIHRoaXMuaGlzdG9yeSA9IHRoaXMuaGlzdG9yeVN1cHBvcnQgJiYgdGhpcy5vcHRpb25zLmhpc3Rvcnk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5vcHRpb25zLnNoaW0pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuaGlzdG9yeSkge1xuICAgICAgICAkKHdpbmRvdykuYmluZCgncG9wc3RhdGUnLCB0aGlzLmNoYW5nZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkKHdpbmRvdykuYmluZCgnaGFzaGNoYW5nZScsIHRoaXMuY2hhbmdlKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLmNoYW5nZSgpO1xuICAgIH07XG5cbiAgICBSb3V0ZS51bmJpbmQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciB1bmJpbmRSZXN1bHQ7XG4gICAgICB1bmJpbmRSZXN1bHQgPSBTcGluZS5FdmVudHMudW5iaW5kLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcmV0dXJuIHVuYmluZFJlc3VsdDtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuc2hpbSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5oaXN0b3J5KSB7XG4gICAgICAgIHJldHVybiAkKHdpbmRvdykudW5iaW5kKCdwb3BzdGF0ZScsIHRoaXMuY2hhbmdlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAkKHdpbmRvdykudW5iaW5kKCdoYXNoY2hhbmdlJywgdGhpcy5jaGFuZ2UpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBSb3V0ZS5uYXZpZ2F0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGFyZ3MsIGxhc3RBcmcsIG9wdGlvbnMsIHBhdGgsIHJvdXRlcztcbiAgICAgIGFyZ3MgPSAxIDw9IGFyZ3VtZW50cy5sZW5ndGggPyBzbGljZS5jYWxsKGFyZ3VtZW50cywgMCkgOiBbXTtcbiAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgIGxhc3RBcmcgPSBhcmdzW2FyZ3MubGVuZ3RoIC0gMV07XG4gICAgICBpZiAodHlwZW9mIGxhc3RBcmcgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIG9wdGlvbnMgPSBhcmdzLnBvcCgpO1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgbGFzdEFyZyA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgIG9wdGlvbnMudHJpZ2dlciA9IGFyZ3MucG9wKCk7XG4gICAgICB9XG4gICAgICBvcHRpb25zID0gJC5leHRlbmQoe30sIHRoaXMub3B0aW9ucywgb3B0aW9ucyk7XG4gICAgICBwYXRoID0gYXJncy5qb2luKCcvJyk7XG4gICAgICBpZiAodGhpcy5wYXRoID09PSBwYXRoKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHRoaXMucGF0aCA9IHBhdGg7XG4gICAgICBpZiAob3B0aW9ucy50cmlnZ2VyKSB7XG4gICAgICAgIHRoaXMudHJpZ2dlcignbmF2aWdhdGUnLCB0aGlzLnBhdGgpO1xuICAgICAgICByb3V0ZXMgPSB0aGlzLm1hdGNoUm91dGVzKHRoaXMucGF0aCwgb3B0aW9ucyk7XG4gICAgICAgIGlmICghcm91dGVzLmxlbmd0aCkge1xuICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5yZWRpcmVjdCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgcmV0dXJuIG9wdGlvbnMucmVkaXJlY3QuYXBwbHkodGhpcywgW3RoaXMucGF0aCwgb3B0aW9uc10pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5yZWRpcmVjdCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICB0aGlzLnJlZGlyZWN0KHRoaXMucGF0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAob3B0aW9ucy5zaGltKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLmhpc3RvcnkgJiYgb3B0aW9ucy5yZXBsYWNlKSB7XG4gICAgICAgIHJldHVybiBoaXN0b3J5LnJlcGxhY2VTdGF0ZSh7fSwgZG9jdW1lbnQudGl0bGUsIHRoaXMucGF0aCk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuaGlzdG9yeSkge1xuICAgICAgICByZXR1cm4gaGlzdG9yeS5wdXNoU3RhdGUoe30sIGRvY3VtZW50LnRpdGxlLCB0aGlzLnBhdGgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gdGhpcy5wYXRoO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBSb3V0ZS5jcmVhdGUgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciByb3V0ZXI7XG4gICAgICByb3V0ZXIgPSBuZXcgdGhpcztcbiAgICAgIHRoaXMucm91dGVycy5wdXNoKHJvdXRlcik7XG4gICAgICByZXR1cm4gcm91dGVyO1xuICAgIH07XG5cbiAgICBSb3V0ZS5hZGQgPSBmdW5jdGlvbihwYXRoLCBjYWxsYmFjaykge1xuICAgICAgcmV0dXJuIHRoaXMucm91dGVyLmFkZChwYXRoLCBjYWxsYmFjayk7XG4gICAgfTtcblxuICAgIFJvdXRlLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbihwYXRoLCBjYWxsYmFjaykge1xuICAgICAgdmFyIGtleSwgcmVzdWx0cywgdmFsdWU7XG4gICAgICBpZiAodHlwZW9mIHBhdGggPT09ICdvYmplY3QnICYmICEocGF0aCBpbnN0YW5jZW9mIFJlZ0V4cCkpIHtcbiAgICAgICAgcmVzdWx0cyA9IFtdO1xuICAgICAgICBmb3IgKGtleSBpbiBwYXRoKSB7XG4gICAgICAgICAgdmFsdWUgPSBwYXRoW2tleV07XG4gICAgICAgICAgcmVzdWx0cy5wdXNoKHRoaXMuYWRkKGtleSwgdmFsdWUpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0cztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJvdXRlcy5wdXNoKG5ldyBQYXRoKHBhdGgsIGNhbGxiYWNrKSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIFJvdXRlLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcjtcbiAgICAgIHRoaXMucm91dGVzLmxlbmd0aCA9IDA7XG4gICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci5yb3V0ZXJzID0gKGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgaiwgbGVuLCByZWYxLCByZXN1bHRzO1xuICAgICAgICByZWYxID0gdGhpcy5jb25zdHJ1Y3Rvci5yb3V0ZXJzO1xuICAgICAgICByZXN1bHRzID0gW107XG4gICAgICAgIGZvciAoaiA9IDAsIGxlbiA9IHJlZjEubGVuZ3RoOyBqIDwgbGVuOyBqKyspIHtcbiAgICAgICAgICByID0gcmVmMVtqXTtcbiAgICAgICAgICBpZiAociAhPT0gdGhpcykge1xuICAgICAgICAgICAgcmVzdWx0cy5wdXNoKHIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0cztcbiAgICAgIH0pLmNhbGwodGhpcyk7XG4gICAgfTtcblxuICAgIFJvdXRlLmdldFBhdGggPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBwYXRoO1xuICAgICAgaWYgKHRoaXMuaGlzdG9yeSkge1xuICAgICAgICBwYXRoID0gd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lO1xuICAgICAgICBpZiAocGF0aC5zdWJzdHIoMCwgMSkgIT09ICcvJykge1xuICAgICAgICAgIHBhdGggPSAnLycgKyBwYXRoO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwYXRoID0gd2luZG93LmxvY2F0aW9uLmhhc2g7XG4gICAgICAgIHBhdGggPSBwYXRoLnJlcGxhY2UoaGFzaFN0cmlwLCAnJyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcGF0aDtcbiAgICB9O1xuXG4gICAgUm91dGUuZ2V0SG9zdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbCArIFwiLy9cIiArIHdpbmRvdy5sb2NhdGlvbi5ob3N0O1xuICAgIH07XG5cbiAgICBSb3V0ZS5jaGFuZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBwYXRoO1xuICAgICAgcGF0aCA9IFJvdXRlLmdldFBhdGgoKTtcbiAgICAgIGlmIChwYXRoID09PSBSb3V0ZS5wYXRoKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIFJvdXRlLnBhdGggPSBwYXRoO1xuICAgICAgcmV0dXJuIFJvdXRlLm1hdGNoUm91dGVzKFJvdXRlLnBhdGgpO1xuICAgIH07XG5cbiAgICBSb3V0ZS5tYXRjaFJvdXRlcyA9IGZ1bmN0aW9uKHBhdGgsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBqLCBsZW4sIG1hdGNoLCBtYXRjaGVzLCByZWYxLCByb3V0ZXI7XG4gICAgICBtYXRjaGVzID0gW107XG4gICAgICByZWYxID0gdGhpcy5yb3V0ZXJzLmNvbmNhdChbdGhpcy5yb3V0ZXJdKTtcbiAgICAgIGZvciAoaiA9IDAsIGxlbiA9IHJlZjEubGVuZ3RoOyBqIDwgbGVuOyBqKyspIHtcbiAgICAgICAgcm91dGVyID0gcmVmMVtqXTtcbiAgICAgICAgbWF0Y2ggPSByb3V0ZXIubWF0Y2hSb3V0ZShwYXRoLCBvcHRpb25zKTtcbiAgICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgICAgbWF0Y2hlcy5wdXNoKG1hdGNoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKG1hdGNoZXMubGVuZ3RoKSB7XG4gICAgICAgIHRoaXMudHJpZ2dlcignY2hhbmdlJywgbWF0Y2hlcywgcGF0aCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbWF0Y2hlcztcbiAgICB9O1xuXG4gICAgUm91dGUucmVkaXJlY3QgPSBmdW5jdGlvbihwYXRoKSB7XG4gICAgICByZXR1cm4gd2luZG93LmxvY2F0aW9uID0gcGF0aDtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gUm91dGUoKSB7XG4gICAgICB0aGlzLnJvdXRlcyA9IFtdO1xuICAgIH1cblxuICAgIFJvdXRlLnByb3RvdHlwZS5tYXRjaFJvdXRlID0gZnVuY3Rpb24ocGF0aCwgb3B0aW9ucykge1xuICAgICAgdmFyIGosIGxlbiwgcmVmMSwgcm91dGU7XG4gICAgICByZWYxID0gdGhpcy5yb3V0ZXM7XG4gICAgICBmb3IgKGogPSAwLCBsZW4gPSByZWYxLmxlbmd0aDsgaiA8IGxlbjsgaisrKSB7XG4gICAgICAgIHJvdXRlID0gcmVmMVtqXTtcbiAgICAgICAgaWYgKHJvdXRlLm1hdGNoKHBhdGgsIG9wdGlvbnMpKSB7XG4gICAgICAgICAgcmV0dXJuIHJvdXRlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIFJvdXRlLnByb3RvdHlwZS50cmlnZ2VyID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgYXJncywgcmVmMTtcbiAgICAgIGFyZ3MgPSAxIDw9IGFyZ3VtZW50cy5sZW5ndGggPyBzbGljZS5jYWxsKGFyZ3VtZW50cywgMCkgOiBbXTtcbiAgICAgIGFyZ3Muc3BsaWNlKDEsIDAsIHRoaXMpO1xuICAgICAgcmV0dXJuIChyZWYxID0gdGhpcy5jb25zdHJ1Y3RvcikudHJpZ2dlci5hcHBseShyZWYxLCBhcmdzKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFJvdXRlO1xuXG4gIH0pKFNwaW5lLk1vZHVsZSk7XG5cbiAgUm91dGUucm91dGVyID0gbmV3IFJvdXRlO1xuXG4gIFNwaW5lLkNvbnRyb2xsZXIuaW5jbHVkZSh7XG4gICAgcm91dGU6IGZ1bmN0aW9uKHBhdGgsIGNhbGxiYWNrKSB7XG4gICAgICBpZiAodGhpcy5yb3V0ZXIgaW5zdGFuY2VvZiBTcGluZS5Sb3V0ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5yb3V0ZXIuYWRkKHBhdGgsIHRoaXMucHJveHkoY2FsbGJhY2spKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBTcGluZS5Sb3V0ZS5hZGQocGF0aCwgdGhpcy5wcm94eShjYWxsYmFjaykpO1xuICAgICAgfVxuICAgIH0sXG4gICAgcm91dGVzOiBmdW5jdGlvbihyb3V0ZXMpIHtcbiAgICAgIHZhciBrZXksIHJlc3VsdHMsIHZhbHVlO1xuICAgICAgcmVzdWx0cyA9IFtdO1xuICAgICAgZm9yIChrZXkgaW4gcm91dGVzKSB7XG4gICAgICAgIHZhbHVlID0gcm91dGVzW2tleV07XG4gICAgICAgIHJlc3VsdHMucHVzaCh0aGlzLnJvdXRlKGtleSwgdmFsdWUpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHRzO1xuICAgIH0sXG4gICAgbmF2aWdhdGU6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIFNwaW5lLlJvdXRlLm5hdmlnYXRlLmFwcGx5KFNwaW5lLlJvdXRlLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgfSk7XG5cbiAgUm91dGUuUGF0aCA9IFBhdGg7XG5cbiAgU3BpbmUuUm91dGUgPSBSb3V0ZTtcblxuICBpZiAodHlwZW9mIG1vZHVsZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBtb2R1bGUgIT09IG51bGwpIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IFJvdXRlO1xuICB9XG5cbn0pLmNhbGwodGhpcyk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJvdXRlLmpzLm1hcFxuIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjEwLjBcblxuLypcblNwaW5lLmpzIE1WQyBsaWJyYXJ5XG5SZWxlYXNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2VcbiAqL1xuXG4oZnVuY3Rpb24oKSB7XG4gIHZhciAkLCBDb250cm9sbGVyLCBFdmVudHMsIExvZywgTW9kZWwsIE1vZHVsZSwgU3BpbmUsIGNyZWF0ZU9iamVjdCwgbWFrZUFycmF5LCBtb2R1bGVLZXl3b3JkcyxcbiAgICBzbGljZSA9IFtdLnNsaWNlLFxuICAgIGluZGV4T2YgPSBbXS5pbmRleE9mIHx8IGZ1bmN0aW9uKGl0ZW0pIHsgZm9yICh2YXIgaSA9IDAsIGwgPSB0aGlzLmxlbmd0aDsgaSA8IGw7IGkrKykgeyBpZiAoaSBpbiB0aGlzICYmIHRoaXNbaV0gPT09IGl0ZW0pIHJldHVybiBpOyB9IHJldHVybiAtMTsgfSxcbiAgICBleHRlbmQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gICAgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LFxuICAgIGJpbmQgPSBmdW5jdGlvbihmbiwgbWUpeyByZXR1cm4gZnVuY3Rpb24oKXsgcmV0dXJuIGZuLmFwcGx5KG1lLCBhcmd1bWVudHMpOyB9OyB9O1xuXG4gIEV2ZW50cyA9IHtcbiAgICBiaW5kOiBmdW5jdGlvbihldiwgY2FsbGJhY2spIHtcbiAgICAgIHZhciBiYXNlLCBldnMsIGosIGxlbiwgbmFtZTtcbiAgICAgIGV2cyA9IGV2LnNwbGl0KCcgJyk7XG4gICAgICBpZiAoIXRoaXMuaGFzT3duUHJvcGVydHkoJ19jYWxsYmFja3MnKSkge1xuICAgICAgICB0aGlzLl9jYWxsYmFja3MgfHwgKHRoaXMuX2NhbGxiYWNrcyA9IHt9KTtcbiAgICAgIH1cbiAgICAgIGZvciAoaiA9IDAsIGxlbiA9IGV2cy5sZW5ndGg7IGogPCBsZW47IGorKykge1xuICAgICAgICBuYW1lID0gZXZzW2pdO1xuICAgICAgICAoYmFzZSA9IHRoaXMuX2NhbGxiYWNrcylbbmFtZV0gfHwgKGJhc2VbbmFtZV0gPSBbXSk7XG4gICAgICAgIHRoaXMuX2NhbGxiYWNrc1tuYW1lXS5wdXNoKGNhbGxiYWNrKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG4gICAgb25lOiBmdW5jdGlvbihldiwgY2FsbGJhY2spIHtcbiAgICAgIHZhciBoYW5kbGVyO1xuICAgICAgcmV0dXJuIHRoaXMuYmluZChldiwgaGFuZGxlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLnVuYmluZChldiwgaGFuZGxlcik7XG4gICAgICAgIHJldHVybiBjYWxsYmFjay5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfSk7XG4gICAgfSxcbiAgICB0cmlnZ2VyOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBhcmdzLCBjYWxsYmFjaywgZXYsIGosIGxlbiwgbGlzdCwgcmVmO1xuICAgICAgYXJncyA9IDEgPD0gYXJndW1lbnRzLmxlbmd0aCA/IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKSA6IFtdO1xuICAgICAgZXYgPSBhcmdzLnNoaWZ0KCk7XG4gICAgICBsaXN0ID0gKHJlZiA9IHRoaXMuX2NhbGxiYWNrcykgIT0gbnVsbCA/IHJlZltldl0gOiB2b2lkIDA7XG4gICAgICBpZiAoIWxpc3QpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgZm9yIChqID0gMCwgbGVuID0gbGlzdC5sZW5ndGg7IGogPCBsZW47IGorKykge1xuICAgICAgICBjYWxsYmFjayA9IGxpc3Rbal07XG4gICAgICAgIGlmIChjYWxsYmFjay5hcHBseSh0aGlzLCBhcmdzKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSxcbiAgICBsaXN0ZW5UbzogZnVuY3Rpb24ob2JqLCBldiwgY2FsbGJhY2spIHtcbiAgICAgIG9iai5iaW5kKGV2LCBjYWxsYmFjayk7XG4gICAgICB0aGlzLmxpc3RlbmluZ1RvIHx8ICh0aGlzLmxpc3RlbmluZ1RvID0gW10pO1xuICAgICAgdGhpcy5saXN0ZW5pbmdUby5wdXNoKHtcbiAgICAgICAgb2JqOiBvYmosXG4gICAgICAgIGV2OiBldixcbiAgICAgICAgY2FsbGJhY2s6IGNhbGxiYWNrXG4gICAgICB9KTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG4gICAgbGlzdGVuVG9PbmNlOiBmdW5jdGlvbihvYmosIGV2LCBjYWxsYmFjaykge1xuICAgICAgdmFyIGhhbmRsZXIsIGxpc3RlbmluZ1RvT25jZTtcbiAgICAgIGxpc3RlbmluZ1RvT25jZSA9IHRoaXMubGlzdGVuaW5nVG9PbmNlIHx8ICh0aGlzLmxpc3RlbmluZ1RvT25jZSA9IFtdKTtcbiAgICAgIG9iai5iaW5kKGV2LCBoYW5kbGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBpLCBpZHgsIGosIGxlbiwgbHQ7XG4gICAgICAgIGlkeCA9IC0xO1xuICAgICAgICBmb3IgKGkgPSBqID0gMCwgbGVuID0gbGlzdGVuaW5nVG9PbmNlLmxlbmd0aDsgaiA8IGxlbjsgaSA9ICsraikge1xuICAgICAgICAgIGx0ID0gbGlzdGVuaW5nVG9PbmNlW2ldO1xuICAgICAgICAgIGlmIChsdC5vYmogPT09IG9iaikge1xuICAgICAgICAgICAgaWYgKGx0LmV2ID09PSBldiAmJiBsdC5jYWxsYmFjayA9PT0gaGFuZGxlcikge1xuICAgICAgICAgICAgICBpZHggPSBpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBvYmoudW5iaW5kKGV2LCBoYW5kbGVyKTtcbiAgICAgICAgaWYgKGlkeCAhPT0gLTEpIHtcbiAgICAgICAgICBsaXN0ZW5pbmdUb09uY2Uuc3BsaWNlKGlkeCwgMSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB9KTtcbiAgICAgIGxpc3RlbmluZ1RvT25jZS5wdXNoKHtcbiAgICAgICAgb2JqOiBvYmosXG4gICAgICAgIGV2OiBldixcbiAgICAgICAgY2FsbGJhY2s6IGhhbmRsZXJcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcbiAgICBzdG9wTGlzdGVuaW5nOiBmdW5jdGlvbihvYmosIGV2ZW50cywgY2FsbGJhY2spIHtcbiAgICAgIHZhciBlLCBldiwgZXZ0cywgaWR4LCBqLCBrLCBsLCBsZW4sIGxlbjEsIGxlbjIsIGxlbjMsIGxpc3RlbmluZ1RvLCBsdCwgbSwgbiwgcmVmLCByZWYxLCByZWYyO1xuICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmVmID0gW3RoaXMubGlzdGVuaW5nVG8sIHRoaXMubGlzdGVuaW5nVG9PbmNlXTtcbiAgICAgICAgZm9yIChqID0gMCwgbGVuID0gcmVmLmxlbmd0aDsgaiA8IGxlbjsgaisrKSB7XG4gICAgICAgICAgbGlzdGVuaW5nVG8gPSByZWZbal07XG4gICAgICAgICAgaWYgKCEobGlzdGVuaW5nVG8gIT0gbnVsbCA/IGxpc3RlbmluZ1RvLmxlbmd0aCA6IHZvaWQgMCkpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBmb3IgKGsgPSAwLCBsZW4xID0gbGlzdGVuaW5nVG8ubGVuZ3RoOyBrIDwgbGVuMTsgaysrKSB7XG4gICAgICAgICAgICBsdCA9IGxpc3RlbmluZ1RvW2tdO1xuICAgICAgICAgICAgbHQub2JqLnVuYmluZChsdC5ldiwgbHQuY2FsbGJhY2spO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxpc3RlbmluZ1RvID0gdm9pZCAwO1xuICAgICAgICB0aGlzLmxpc3RlbmluZ1RvT25jZSA9IHZvaWQgMDtcbiAgICAgIH0gZWxzZSBpZiAob2JqKSB7XG4gICAgICAgIGV2ZW50cyA9IGV2ZW50cyA/IGV2ZW50cy5zcGxpdCgnICcpIDogW3ZvaWQgMF07XG4gICAgICAgIHJlZjEgPSBbdGhpcy5saXN0ZW5pbmdUbywgdGhpcy5saXN0ZW5pbmdUb09uY2VdO1xuICAgICAgICBmb3IgKGwgPSAwLCBsZW4yID0gcmVmMS5sZW5ndGg7IGwgPCBsZW4yOyBsKyspIHtcbiAgICAgICAgICBsaXN0ZW5pbmdUbyA9IHJlZjFbbF07XG4gICAgICAgICAgaWYgKCFsaXN0ZW5pbmdUbykge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGZvciAobSA9IDAsIGxlbjMgPSBldmVudHMubGVuZ3RoOyBtIDwgbGVuMzsgbSsrKSB7XG4gICAgICAgICAgICBldiA9IGV2ZW50c1ttXTtcbiAgICAgICAgICAgIGZvciAoaWR4ID0gbiA9IHJlZjIgPSBsaXN0ZW5pbmdUby5sZW5ndGggLSAxOyByZWYyIDw9IDAgPyBuIDw9IDAgOiBuID49IDA7IGlkeCA9IHJlZjIgPD0gMCA/ICsrbiA6IC0tbikge1xuICAgICAgICAgICAgICBsdCA9IGxpc3RlbmluZ1RvW2lkeF07XG4gICAgICAgICAgICAgIGlmIChsdC5vYmogIT09IG9iaikge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChjYWxsYmFjayAmJiBsdC5jYWxsYmFjayAhPT0gY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoKCFldikgfHwgKGV2ID09PSBsdC5ldikpIHtcbiAgICAgICAgICAgICAgICBsdC5vYmoudW5iaW5kKGx0LmV2LCBsdC5jYWxsYmFjayk7XG4gICAgICAgICAgICAgICAgaWYgKGlkeCAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgIGxpc3RlbmluZ1RvLnNwbGljZShpZHgsIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChldikge1xuICAgICAgICAgICAgICAgIGV2dHMgPSBsdC5ldi5zcGxpdCgnICcpO1xuICAgICAgICAgICAgICAgIGlmIChpbmRleE9mLmNhbGwoZXZ0cywgZXYpID49IDApIHtcbiAgICAgICAgICAgICAgICAgIGV2dHMgPSAoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBsZW40LCBwLCByZXN1bHRzO1xuICAgICAgICAgICAgICAgICAgICByZXN1bHRzID0gW107XG4gICAgICAgICAgICAgICAgICAgIGZvciAocCA9IDAsIGxlbjQgPSBldnRzLmxlbmd0aDsgcCA8IGxlbjQ7IHArKykge1xuICAgICAgICAgICAgICAgICAgICAgIGUgPSBldnRzW3BdO1xuICAgICAgICAgICAgICAgICAgICAgIGlmIChlICE9PSBldikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKGUpO1xuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0cztcbiAgICAgICAgICAgICAgICAgIH0pKCk7XG4gICAgICAgICAgICAgICAgICBsdC5ldiA9ICQudHJpbShldnRzLmpvaW4oJyAnKSk7XG4gICAgICAgICAgICAgICAgICBsdC5vYmoudW5iaW5kKGV2LCBsdC5jYWxsYmFjayk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuICAgIHVuYmluZDogZnVuY3Rpb24oZXYsIGNhbGxiYWNrKSB7XG4gICAgICB2YXIgY2IsIGV2cywgaSwgaiwgaywgbGVuLCBsZW4xLCBsaXN0LCBuYW1lLCByZWY7XG4gICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB0aGlzLl9jYWxsYmFja3MgPSB7fTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG4gICAgICBpZiAoIWV2KSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuICAgICAgZXZzID0gZXYuc3BsaXQoJyAnKTtcbiAgICAgIGZvciAoaiA9IDAsIGxlbiA9IGV2cy5sZW5ndGg7IGogPCBsZW47IGorKykge1xuICAgICAgICBuYW1lID0gZXZzW2pdO1xuICAgICAgICBsaXN0ID0gKHJlZiA9IHRoaXMuX2NhbGxiYWNrcykgIT0gbnVsbCA/IHJlZltuYW1lXSA6IHZvaWQgMDtcbiAgICAgICAgaWYgKCFsaXN0KSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFjYWxsYmFjaykge1xuICAgICAgICAgIGRlbGV0ZSB0aGlzLl9jYWxsYmFja3NbbmFtZV07XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChpID0gayA9IDAsIGxlbjEgPSBsaXN0Lmxlbmd0aDsgayA8IGxlbjE7IGkgPSArK2spIHtcbiAgICAgICAgICBjYiA9IGxpc3RbaV07XG4gICAgICAgICAgaWYgKCEoY2IgPT09IGNhbGxiYWNrKSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGxpc3QgPSBsaXN0LnNsaWNlKCk7XG4gICAgICAgICAgbGlzdC5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgdGhpcy5fY2FsbGJhY2tzW25hbWVdID0gbGlzdDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICB9O1xuXG4gIEV2ZW50cy5vbiA9IEV2ZW50cy5iaW5kO1xuXG4gIEV2ZW50cy5vZmYgPSBFdmVudHMudW5iaW5kO1xuXG4gIExvZyA9IHtcbiAgICB0cmFjZTogdHJ1ZSxcbiAgICBsb2dQcmVmaXg6ICcoQXBwKScsXG4gICAgbG9nOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBhcmdzO1xuICAgICAgYXJncyA9IDEgPD0gYXJndW1lbnRzLmxlbmd0aCA/IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKSA6IFtdO1xuICAgICAgaWYgKCF0aGlzLnRyYWNlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmxvZ1ByZWZpeCkge1xuICAgICAgICBhcmdzLnVuc2hpZnQodGhpcy5sb2dQcmVmaXgpO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBjb25zb2xlICE9PSBcInVuZGVmaW5lZFwiICYmIGNvbnNvbGUgIT09IG51bGwpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBjb25zb2xlLmxvZyA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgY29uc29sZS5sb2cuYXBwbHkoY29uc29sZSwgYXJncyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgfTtcblxuICBtb2R1bGVLZXl3b3JkcyA9IFsnaW5jbHVkZWQnLCAnZXh0ZW5kZWQnXTtcblxuICBNb2R1bGUgPSAoZnVuY3Rpb24oKSB7XG4gICAgTW9kdWxlLmluY2x1ZGUgPSBmdW5jdGlvbihvYmopIHtcbiAgICAgIHZhciBrZXksIHJlZiwgdmFsdWU7XG4gICAgICBpZiAoIW9iaikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2luY2x1ZGUob2JqKSByZXF1aXJlcyBvYmonKTtcbiAgICAgIH1cbiAgICAgIGZvciAoa2V5IGluIG9iaikge1xuICAgICAgICB2YWx1ZSA9IG9ialtrZXldO1xuICAgICAgICBpZiAoaW5kZXhPZi5jYWxsKG1vZHVsZUtleXdvcmRzLCBrZXkpIDwgMCkge1xuICAgICAgICAgIHRoaXMucHJvdG90eXBlW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKChyZWYgPSBvYmouaW5jbHVkZWQpICE9IG51bGwpIHtcbiAgICAgICAgcmVmLmFwcGx5KHRoaXMpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIE1vZHVsZS5leHRlbmQgPSBmdW5jdGlvbihvYmopIHtcbiAgICAgIHZhciBrZXksIHJlZiwgdmFsdWU7XG4gICAgICBpZiAoIW9iaikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2V4dGVuZChvYmopIHJlcXVpcmVzIG9iaicpO1xuICAgICAgfVxuICAgICAgZm9yIChrZXkgaW4gb2JqKSB7XG4gICAgICAgIHZhbHVlID0gb2JqW2tleV07XG4gICAgICAgIGlmIChpbmRleE9mLmNhbGwobW9kdWxlS2V5d29yZHMsIGtleSkgPCAwKSB7XG4gICAgICAgICAgdGhpc1trZXldID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICgocmVmID0gb2JqLmV4dGVuZGVkKSAhPSBudWxsKSB7XG4gICAgICAgIHJlZi5hcHBseSh0aGlzKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBNb2R1bGUucHJveHkgPSBmdW5jdGlvbihmdW5jKSB7XG4gICAgICByZXR1cm4gKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gZnVuYy5hcHBseShfdGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgfTtcbiAgICAgIH0pKHRoaXMpO1xuICAgIH07XG5cbiAgICBNb2R1bGUucHJvdG90eXBlLnByb3h5ID0gZnVuY3Rpb24oZnVuYykge1xuICAgICAgcmV0dXJuIChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIGZ1bmMuYXBwbHkoX3RoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIH07XG4gICAgICB9KSh0aGlzKTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gTW9kdWxlKCkge1xuICAgICAgaWYgKHR5cGVvZiB0aGlzLmluaXQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICB0aGlzLmluaXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gTW9kdWxlO1xuXG4gIH0pKCk7XG5cbiAgTW9kZWwgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICAgIGV4dGVuZChNb2RlbCwgc3VwZXJDbGFzcyk7XG5cbiAgICBNb2RlbC5leHRlbmQoRXZlbnRzKTtcblxuICAgIE1vZGVsLmluY2x1ZGUoRXZlbnRzKTtcblxuICAgIE1vZGVsLnJlY29yZHMgPSBbXTtcblxuICAgIE1vZGVsLmlyZWNvcmRzID0ge307XG5cbiAgICBNb2RlbC5hdHRyaWJ1dGVzID0gW107XG5cbiAgICBNb2RlbC5jb25maWd1cmUgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBhdHRyaWJ1dGVzLCBuYW1lO1xuICAgICAgbmFtZSA9IGFyZ3VtZW50c1swXSwgYXR0cmlidXRlcyA9IDIgPD0gYXJndW1lbnRzLmxlbmd0aCA/IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSA6IFtdO1xuICAgICAgdGhpcy5jbGFzc05hbWUgPSBuYW1lO1xuICAgICAgdGhpcy5kZWxldGVBbGwoKTtcbiAgICAgIGlmIChhdHRyaWJ1dGVzLmxlbmd0aCkge1xuICAgICAgICB0aGlzLmF0dHJpYnV0ZXMgPSBhdHRyaWJ1dGVzO1xuICAgICAgfVxuICAgICAgdGhpcy5hdHRyaWJ1dGVzICYmICh0aGlzLmF0dHJpYnV0ZXMgPSBtYWtlQXJyYXkodGhpcy5hdHRyaWJ1dGVzKSk7XG4gICAgICB0aGlzLmF0dHJpYnV0ZXMgfHwgKHRoaXMuYXR0cmlidXRlcyA9IFtdKTtcbiAgICAgIHRoaXMudW5iaW5kKCk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgTW9kZWwudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLmNsYXNzTmFtZSArIFwiKFwiICsgKHRoaXMuYXR0cmlidXRlcy5qb2luKFwiLCBcIikpICsgXCIpXCI7XG4gICAgfTtcblxuICAgIE1vZGVsLmZpbmQgPSBmdW5jdGlvbihpZCwgbm90Rm91bmQpIHtcbiAgICAgIHZhciByZWY7XG4gICAgICBpZiAobm90Rm91bmQgPT0gbnVsbCkge1xuICAgICAgICBub3RGb3VuZCA9IHRoaXMubm90Rm91bmQ7XG4gICAgICB9XG4gICAgICByZXR1cm4gKChyZWYgPSB0aGlzLmlyZWNvcmRzW2lkXSkgIT0gbnVsbCA/IHJlZi5jbG9uZSgpIDogdm9pZCAwKSB8fCAodHlwZW9mIG5vdEZvdW5kID09PSBcImZ1bmN0aW9uXCIgPyBub3RGb3VuZChpZCkgOiB2b2lkIDApO1xuICAgIH07XG5cbiAgICBNb2RlbC5maW5kQWxsID0gZnVuY3Rpb24oaWRzLCBub3RGb3VuZCkge1xuICAgICAgdmFyIGlkLCBqLCBsZW4sIHJlc3VsdHM7XG4gICAgICByZXN1bHRzID0gW107XG4gICAgICBmb3IgKGogPSAwLCBsZW4gPSBpZHMubGVuZ3RoOyBqIDwgbGVuOyBqKyspIHtcbiAgICAgICAgaWQgPSBpZHNbal07XG4gICAgICAgIGlmICh0aGlzLmZpbmQoaWQsIG5vdEZvdW5kKSkge1xuICAgICAgICAgIHJlc3VsdHMucHVzaCh0aGlzLmZpbmQoaWQpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgfTtcblxuICAgIE1vZGVsLm5vdEZvdW5kID0gZnVuY3Rpb24oaWQpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG5cbiAgICBNb2RlbC5leGlzdHMgPSBmdW5jdGlvbihpZCkge1xuICAgICAgcmV0dXJuIEJvb2xlYW4odGhpcy5pcmVjb3Jkc1tpZF0pO1xuICAgIH07XG5cbiAgICBNb2RlbC5hZGRSZWNvcmQgPSBmdW5jdGlvbihyZWNvcmQsIGlkeCkge1xuICAgICAgdmFyIHJvb3Q7XG4gICAgICBpZiAocm9vdCA9IHRoaXMuaXJlY29yZHNbcmVjb3JkLmlkIHx8IHJlY29yZC5jaWRdKSB7XG4gICAgICAgIHJvb3QucmVmcmVzaChyZWNvcmQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVjb3JkLmlkIHx8IChyZWNvcmQuaWQgPSByZWNvcmQuY2lkKTtcbiAgICAgICAgdGhpcy5pcmVjb3Jkc1tyZWNvcmQuaWRdID0gdGhpcy5pcmVjb3Jkc1tyZWNvcmQuY2lkXSA9IHJlY29yZDtcbiAgICAgICAgaWYgKGlkeCAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgdGhpcy5yZWNvcmRzLnNwbGljZShpZHgsIDAsIHJlY29yZCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5yZWNvcmRzLnB1c2gocmVjb3JkKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHJlY29yZDtcbiAgICB9O1xuXG4gICAgTW9kZWwucmVmcmVzaCA9IGZ1bmN0aW9uKHZhbHVlcywgb3B0aW9ucykge1xuICAgICAgdmFyIGosIGxlbiwgcmVjb3JkLCByZWNvcmRzLCByZXN1bHQ7XG4gICAgICBpZiAob3B0aW9ucyA9PSBudWxsKSB7XG4gICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgIH1cbiAgICAgIGlmIChvcHRpb25zLmNsZWFyKSB7XG4gICAgICAgIHRoaXMuZGVsZXRlQWxsKCk7XG4gICAgICB9XG4gICAgICByZWNvcmRzID0gdGhpcy5mcm9tSlNPTih2YWx1ZXMpO1xuICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHJlY29yZHMpKSB7XG4gICAgICAgIHJlY29yZHMgPSBbcmVjb3Jkc107XG4gICAgICB9XG4gICAgICBmb3IgKGogPSAwLCBsZW4gPSByZWNvcmRzLmxlbmd0aDsgaiA8IGxlbjsgaisrKSB7XG4gICAgICAgIHJlY29yZCA9IHJlY29yZHNbal07XG4gICAgICAgIHRoaXMuYWRkUmVjb3JkKHJlY29yZCk7XG4gICAgICB9XG4gICAgICB0aGlzLnNvcnQoKTtcbiAgICAgIHJlc3VsdCA9IHRoaXMuY2xvbmVBcnJheShyZWNvcmRzKTtcbiAgICAgIHRoaXMudHJpZ2dlcigncmVmcmVzaCcsIHJlc3VsdCwgb3B0aW9ucyk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG5cbiAgICBNb2RlbC5zZWxlY3QgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgICAgdmFyIGosIGxlbiwgcmVjb3JkLCByZWYsIHJlc3VsdHM7XG4gICAgICByZWYgPSB0aGlzLnJlY29yZHM7XG4gICAgICByZXN1bHRzID0gW107XG4gICAgICBmb3IgKGogPSAwLCBsZW4gPSByZWYubGVuZ3RoOyBqIDwgbGVuOyBqKyspIHtcbiAgICAgICAgcmVjb3JkID0gcmVmW2pdO1xuICAgICAgICBpZiAoY2FsbGJhY2socmVjb3JkKSkge1xuICAgICAgICAgIHJlc3VsdHMucHVzaChyZWNvcmQuY2xvbmUoKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHRzO1xuICAgIH07XG5cbiAgICBNb2RlbC5maW5kQnlBdHRyaWJ1dGUgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICAgICAgdmFyIGosIGxlbiwgcmVjb3JkLCByZWY7XG4gICAgICByZWYgPSB0aGlzLnJlY29yZHM7XG4gICAgICBmb3IgKGogPSAwLCBsZW4gPSByZWYubGVuZ3RoOyBqIDwgbGVuOyBqKyspIHtcbiAgICAgICAgcmVjb3JkID0gcmVmW2pdO1xuICAgICAgICBpZiAocmVjb3JkW25hbWVdID09PSB2YWx1ZSkge1xuICAgICAgICAgIHJldHVybiByZWNvcmQuY2xvbmUoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcblxuICAgIE1vZGVsLmZpbmRBbGxCeUF0dHJpYnV0ZSA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gICAgICByZXR1cm4gdGhpcy5zZWxlY3QoZnVuY3Rpb24oaXRlbSkge1xuICAgICAgICByZXR1cm4gaXRlbVtuYW1lXSA9PT0gdmFsdWU7XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgTW9kZWwuZWFjaCA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgICB2YXIgaiwgbGVuLCByZWNvcmQsIHJlZiwgcmVzdWx0cztcbiAgICAgIHJlZiA9IHRoaXMucmVjb3JkcztcbiAgICAgIHJlc3VsdHMgPSBbXTtcbiAgICAgIGZvciAoaiA9IDAsIGxlbiA9IHJlZi5sZW5ndGg7IGogPCBsZW47IGorKykge1xuICAgICAgICByZWNvcmQgPSByZWZbal07XG4gICAgICAgIHJlc3VsdHMucHVzaChjYWxsYmFjayhyZWNvcmQuY2xvbmUoKSkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgfTtcblxuICAgIE1vZGVsLmFsbCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMuY2xvbmVBcnJheSh0aGlzLnJlY29yZHMpO1xuICAgIH07XG5cbiAgICBNb2RlbC5zbGljZSA9IGZ1bmN0aW9uKGJlZ2luLCBlbmQpIHtcbiAgICAgIGlmIChiZWdpbiA9PSBudWxsKSB7XG4gICAgICAgIGJlZ2luID0gMDtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLmNsb25lQXJyYXkodGhpcy5yZWNvcmRzLnNsaWNlKGJlZ2luLCBlbmQpKTtcbiAgICB9O1xuXG4gICAgTW9kZWwuZmlyc3QgPSBmdW5jdGlvbihlbmQpIHtcbiAgICAgIHZhciByZWY7XG4gICAgICBpZiAoZW5kID09IG51bGwpIHtcbiAgICAgICAgZW5kID0gMTtcbiAgICAgIH1cbiAgICAgIGlmIChlbmQgPiAxKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNsb25lQXJyYXkodGhpcy5yZWNvcmRzLnNsaWNlKDAsIGVuZCkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIChyZWYgPSB0aGlzLnJlY29yZHNbMF0pICE9IG51bGwgPyByZWYuY2xvbmUoKSA6IHZvaWQgMDtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgTW9kZWwubGFzdCA9IGZ1bmN0aW9uKGJlZ2luKSB7XG4gICAgICB2YXIgcmVmO1xuICAgICAgaWYgKHR5cGVvZiBiZWdpbiA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2xvbmVBcnJheSh0aGlzLnJlY29yZHMuc2xpY2UoLWJlZ2luKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gKHJlZiA9IHRoaXMucmVjb3Jkc1t0aGlzLnJlY29yZHMubGVuZ3RoIC0gMV0pICE9IG51bGwgPyByZWYuY2xvbmUoKSA6IHZvaWQgMDtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgTW9kZWwuY291bnQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLnJlY29yZHMubGVuZ3RoO1xuICAgIH07XG5cbiAgICBNb2RlbC5kZWxldGVBbGwgPSBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMucmVjb3JkcyA9IFtdO1xuICAgICAgcmV0dXJuIHRoaXMuaXJlY29yZHMgPSB7fTtcbiAgICB9O1xuXG4gICAgTW9kZWwuZGVzdHJveUFsbCA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIHZhciBqLCBsZW4sIHJlY29yZCwgcmVmLCByZXN1bHRzO1xuICAgICAgcmVmID0gdGhpcy5yZWNvcmRzO1xuICAgICAgcmVzdWx0cyA9IFtdO1xuICAgICAgZm9yIChqID0gMCwgbGVuID0gcmVmLmxlbmd0aDsgaiA8IGxlbjsgaisrKSB7XG4gICAgICAgIHJlY29yZCA9IHJlZltqXTtcbiAgICAgICAgcmVzdWx0cy5wdXNoKHJlY29yZC5kZXN0cm95KG9wdGlvbnMpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHRzO1xuICAgIH07XG5cbiAgICBNb2RlbC51cGRhdGUgPSBmdW5jdGlvbihpZCwgYXR0cywgb3B0aW9ucykge1xuICAgICAgcmV0dXJuIHRoaXMuZmluZChpZCkudXBkYXRlQXR0cmlidXRlcyhhdHRzLCBvcHRpb25zKTtcbiAgICB9O1xuXG4gICAgTW9kZWwuY3JlYXRlID0gZnVuY3Rpb24oYXR0cywgb3B0aW9ucykge1xuICAgICAgdmFyIHJlY29yZDtcbiAgICAgIHJlY29yZCA9IG5ldyB0aGlzKGF0dHMpO1xuICAgICAgcmV0dXJuIHJlY29yZC5zYXZlKG9wdGlvbnMpO1xuICAgIH07XG5cbiAgICBNb2RlbC5kZXN0cm95ID0gZnVuY3Rpb24oaWQsIG9wdGlvbnMpIHtcbiAgICAgIHZhciByZWY7XG4gICAgICByZXR1cm4gKHJlZiA9IHRoaXMuZmluZChpZCkpICE9IG51bGwgPyByZWYuZGVzdHJveShvcHRpb25zKSA6IHZvaWQgMDtcbiAgICB9O1xuXG4gICAgTW9kZWwuY2hhbmdlID0gZnVuY3Rpb24oY2FsbGJhY2tPclBhcmFtcykge1xuICAgICAgaWYgKHR5cGVvZiBjYWxsYmFja09yUGFyYW1zID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJpbmQoJ2NoYW5nZScsIGNhbGxiYWNrT3JQYXJhbXMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudHJpZ2dlci5hcHBseSh0aGlzLCBbJ2NoYW5nZSddLmNvbmNhdChzbGljZS5jYWxsKGFyZ3VtZW50cykpKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgTW9kZWwuZmV0Y2ggPSBmdW5jdGlvbihjYWxsYmFja09yUGFyYW1zKSB7XG4gICAgICBpZiAodHlwZW9mIGNhbGxiYWNrT3JQYXJhbXMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYmluZCgnZmV0Y2gnLCBjYWxsYmFja09yUGFyYW1zKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRyaWdnZXIuYXBwbHkodGhpcywgWydmZXRjaCddLmNvbmNhdChzbGljZS5jYWxsKGFyZ3VtZW50cykpKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgTW9kZWwudG9KU09OID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5yZWNvcmRzO1xuICAgIH07XG5cbiAgICBNb2RlbC5iZWZvcmVGcm9tSlNPTiA9IGZ1bmN0aW9uKG9iamVjdHMpIHtcbiAgICAgIHJldHVybiBvYmplY3RzO1xuICAgIH07XG5cbiAgICBNb2RlbC5mcm9tSlNPTiA9IGZ1bmN0aW9uKG9iamVjdHMpIHtcbiAgICAgIHZhciBqLCBsZW4sIHJlc3VsdHMsIHZhbHVlO1xuICAgICAgaWYgKCFvYmplY3RzKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2Ygb2JqZWN0cyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgb2JqZWN0cyA9IEpTT04ucGFyc2Uob2JqZWN0cyk7XG4gICAgICB9XG4gICAgICBvYmplY3RzID0gdGhpcy5iZWZvcmVGcm9tSlNPTihvYmplY3RzKTtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KG9iamVjdHMpKSB7XG4gICAgICAgIHJlc3VsdHMgPSBbXTtcbiAgICAgICAgZm9yIChqID0gMCwgbGVuID0gb2JqZWN0cy5sZW5ndGg7IGogPCBsZW47IGorKykge1xuICAgICAgICAgIHZhbHVlID0gb2JqZWN0c1tqXTtcbiAgICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiB0aGlzKSB7XG4gICAgICAgICAgICByZXN1bHRzLnB1c2godmFsdWUpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXN1bHRzLnB1c2gobmV3IHRoaXModmFsdWUpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAob2JqZWN0cyBpbnN0YW5jZW9mIHRoaXMpIHtcbiAgICAgICAgICByZXR1cm4gb2JqZWN0cztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IHRoaXMob2JqZWN0cyk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIE1vZGVsLmZyb21Gb3JtID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcmVmO1xuICAgICAgcmV0dXJuIChyZWYgPSBuZXcgdGhpcykuZnJvbUZvcm0uYXBwbHkocmVmLCBhcmd1bWVudHMpO1xuICAgIH07XG5cbiAgICBNb2RlbC5zb3J0ID0gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAodGhpcy5jb21wYXJhdG9yKSB7XG4gICAgICAgIHRoaXMucmVjb3Jkcy5zb3J0KHRoaXMuY29tcGFyYXRvcik7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgTW9kZWwuY2xvbmVBcnJheSA9IGZ1bmN0aW9uKGFycmF5KSB7XG4gICAgICB2YXIgaiwgbGVuLCByZXN1bHRzLCB2YWx1ZTtcbiAgICAgIHJlc3VsdHMgPSBbXTtcbiAgICAgIGZvciAoaiA9IDAsIGxlbiA9IGFycmF5Lmxlbmd0aDsgaiA8IGxlbjsgaisrKSB7XG4gICAgICAgIHZhbHVlID0gYXJyYXlbal07XG4gICAgICAgIHJlc3VsdHMucHVzaCh2YWx1ZS5jbG9uZSgpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHRzO1xuICAgIH07XG5cbiAgICBNb2RlbC5pZENvdW50ZXIgPSAwO1xuXG4gICAgTW9kZWwudWlkID0gZnVuY3Rpb24ocHJlZml4KSB7XG4gICAgICB2YXIgdWlkO1xuICAgICAgaWYgKHByZWZpeCA9PSBudWxsKSB7XG4gICAgICAgIHByZWZpeCA9ICcnO1xuICAgICAgfVxuICAgICAgdWlkID0gcHJlZml4ICsgdGhpcy5pZENvdW50ZXIrKztcbiAgICAgIGlmICh0aGlzLmV4aXN0cyh1aWQpKSB7XG4gICAgICAgIHVpZCA9IHRoaXMudWlkKHByZWZpeCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdWlkO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBNb2RlbChhdHRzKSB7XG4gICAgICBNb2RlbC5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIGlmICgodGhpcy5jb25zdHJ1Y3Rvci51dWlkICE9IG51bGwpICYmIHR5cGVvZiB0aGlzLmNvbnN0cnVjdG9yLnV1aWQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdGhpcy5jaWQgPSB0aGlzLmNvbnN0cnVjdG9yLnV1aWQoKTtcbiAgICAgICAgaWYgKCF0aGlzLmlkKSB7XG4gICAgICAgICAgdGhpcy5pZCA9IHRoaXMuY2lkO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmNpZCA9IChhdHRzICE9IG51bGwgPyBhdHRzLmNpZCA6IHZvaWQgMCkgfHwgdGhpcy5jb25zdHJ1Y3Rvci51aWQoJ2MtJyk7XG4gICAgICB9XG4gICAgICBpZiAoYXR0cykge1xuICAgICAgICB0aGlzLmxvYWQoYXR0cyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgTW9kZWwucHJvdG90eXBlLmlzTmV3ID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gIXRoaXMuZXhpc3RzKCk7XG4gICAgfTtcblxuICAgIE1vZGVsLnByb3RvdHlwZS5pc1ZhbGlkID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gIXRoaXMudmFsaWRhdGUoKTtcbiAgICB9O1xuXG4gICAgTW9kZWwucHJvdG90eXBlLnZhbGlkYXRlID0gZnVuY3Rpb24oKSB7fTtcblxuICAgIE1vZGVsLnByb3RvdHlwZS5sb2FkID0gZnVuY3Rpb24oYXR0cykge1xuICAgICAgdmFyIGtleSwgdmFsdWU7XG4gICAgICBpZiAoYXR0cy5pZCkge1xuICAgICAgICB0aGlzLmlkID0gYXR0cy5pZDtcbiAgICAgIH1cbiAgICAgIGZvciAoa2V5IGluIGF0dHMpIHtcbiAgICAgICAgdmFsdWUgPSBhdHRzW2tleV07XG4gICAgICAgIGlmIChrZXkgPT09ICdfY2FsbGJhY2tzJykge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgdGhpc1trZXldID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXNba2V5XSh2YWx1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpc1trZXldID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBNb2RlbC5wcm90b3R5cGUuYXR0cmlidXRlcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGosIGtleSwgbGVuLCByZWYsIHJlc3VsdDtcbiAgICAgIHJlc3VsdCA9IHt9O1xuICAgICAgcmVmID0gdGhpcy5jb25zdHJ1Y3Rvci5hdHRyaWJ1dGVzO1xuICAgICAgZm9yIChqID0gMCwgbGVuID0gcmVmLmxlbmd0aDsgaiA8IGxlbjsgaisrKSB7XG4gICAgICAgIGtleSA9IHJlZltqXTtcbiAgICAgICAgaWYgKGtleSBpbiB0aGlzKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiB0aGlzW2tleV0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHJlc3VsdFtrZXldID0gdGhpc1trZXldKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlc3VsdFtrZXldID0gdGhpc1trZXldO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuaWQpIHtcbiAgICAgICAgcmVzdWx0LmlkID0gdGhpcy5pZDtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcblxuICAgIE1vZGVsLnByb3RvdHlwZS5lcWwgPSBmdW5jdGlvbihyZWMpIHtcbiAgICAgIHJldHVybiByZWMgJiYgcmVjLmNvbnN0cnVjdG9yID09PSB0aGlzLmNvbnN0cnVjdG9yICYmICgocmVjLmNpZCA9PT0gdGhpcy5jaWQpIHx8IChyZWMuaWQgJiYgcmVjLmlkID09PSB0aGlzLmlkKSk7XG4gICAgfTtcblxuICAgIE1vZGVsLnByb3RvdHlwZS5zYXZlID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgdmFyIGVycm9yLCByZWNvcmQ7XG4gICAgICBpZiAob3B0aW9ucyA9PSBudWxsKSB7XG4gICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgIH1cbiAgICAgIGlmIChvcHRpb25zLnZhbGlkYXRlICE9PSBmYWxzZSkge1xuICAgICAgICBlcnJvciA9IHRoaXMudmFsaWRhdGUoKTtcbiAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgdGhpcy50cmlnZ2VyKCdlcnJvcicsIHRoaXMsIGVycm9yKTtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRoaXMudHJpZ2dlcignYmVmb3JlU2F2ZScsIHRoaXMsIG9wdGlvbnMpO1xuICAgICAgcmVjb3JkID0gdGhpcy5pc05ldygpID8gdGhpcy5jcmVhdGUob3B0aW9ucykgOiB0aGlzLnVwZGF0ZShvcHRpb25zKTtcbiAgICAgIHRoaXMuc3RyaXBDbG9uZUF0dHJzKCk7XG4gICAgICB0aGlzLnRyaWdnZXIoJ3NhdmUnLCByZWNvcmQsIG9wdGlvbnMpO1xuICAgICAgcmV0dXJuIHJlY29yZDtcbiAgICB9O1xuXG4gICAgTW9kZWwucHJvdG90eXBlLnN0cmlwQ2xvbmVBdHRycyA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGtleSwgdmFsdWU7XG4gICAgICBpZiAodGhpcy5oYXNPd25Qcm9wZXJ0eSgnY2lkJykpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgZm9yIChrZXkgaW4gdGhpcykge1xuICAgICAgICBpZiAoIWhhc1Byb3AuY2FsbCh0aGlzLCBrZXkpKSBjb250aW51ZTtcbiAgICAgICAgdmFsdWUgPSB0aGlzW2tleV07XG4gICAgICAgIGlmIChpbmRleE9mLmNhbGwodGhpcy5jb25zdHJ1Y3Rvci5hdHRyaWJ1dGVzLCBrZXkpID49IDApIHtcbiAgICAgICAgICBkZWxldGUgdGhpc1trZXldO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgTW9kZWwucHJvdG90eXBlLnVwZGF0ZUF0dHJpYnV0ZSA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlLCBvcHRpb25zKSB7XG4gICAgICB2YXIgYXR0cztcbiAgICAgIGF0dHMgPSB7fTtcbiAgICAgIGF0dHNbbmFtZV0gPSB2YWx1ZTtcbiAgICAgIHJldHVybiB0aGlzLnVwZGF0ZUF0dHJpYnV0ZXMoYXR0cywgb3B0aW9ucyk7XG4gICAgfTtcblxuICAgIE1vZGVsLnByb3RvdHlwZS51cGRhdGVBdHRyaWJ1dGVzID0gZnVuY3Rpb24oYXR0cywgb3B0aW9ucykge1xuICAgICAgdGhpcy5sb2FkKGF0dHMpO1xuICAgICAgcmV0dXJuIHRoaXMuc2F2ZShvcHRpb25zKTtcbiAgICB9O1xuXG4gICAgTW9kZWwucHJvdG90eXBlLmNoYW5nZUlEID0gZnVuY3Rpb24oaWQpIHtcbiAgICAgIHZhciByZWNvcmRzO1xuICAgICAgaWYgKGlkID09PSB0aGlzLmlkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHJlY29yZHMgPSB0aGlzLmNvbnN0cnVjdG9yLmlyZWNvcmRzO1xuICAgICAgcmVjb3Jkc1tpZF0gPSByZWNvcmRzW3RoaXMuaWRdO1xuICAgICAgaWYgKHRoaXMuY2lkICE9PSB0aGlzLmlkKSB7XG4gICAgICAgIGRlbGV0ZSByZWNvcmRzW3RoaXMuaWRdO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuaWQgPSBpZDtcbiAgICB9O1xuXG4gICAgTW9kZWwucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIHZhciBpLCBqLCBsZW4sIHJlY29yZCwgcmVjb3JkcztcbiAgICAgIGlmIChvcHRpb25zID09IG51bGwpIHtcbiAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgfVxuICAgICAgcmVjb3JkcyA9IHRoaXMuY29uc3RydWN0b3IucmVjb3Jkcy5zbGljZSgwKTtcbiAgICAgIGZvciAoaSA9IGogPSAwLCBsZW4gPSByZWNvcmRzLmxlbmd0aDsgaiA8IGxlbjsgaSA9ICsraikge1xuICAgICAgICByZWNvcmQgPSByZWNvcmRzW2ldO1xuICAgICAgICBpZiAoISh0aGlzLmVxbChyZWNvcmQpKSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIHJlY29yZHMuc3BsaWNlKGksIDEpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHRoaXMuY29uc3RydWN0b3IucmVjb3JkcyA9IHJlY29yZHM7XG4gICAgICBpZiAob3B0aW9ucy5jbGVhcikge1xuICAgICAgICBkZWxldGUgdGhpcy5jb25zdHJ1Y3Rvci5pcmVjb3Jkc1t0aGlzLmlkXTtcbiAgICAgICAgcmV0dXJuIGRlbGV0ZSB0aGlzLmNvbnN0cnVjdG9yLmlyZWNvcmRzW3RoaXMuY2lkXTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgTW9kZWwucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICBpZiAob3B0aW9ucyA9PSBudWxsKSB7XG4gICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgIH1cbiAgICAgIGlmIChvcHRpb25zLmNsZWFyID09IG51bGwpIHtcbiAgICAgICAgb3B0aW9ucy5jbGVhciA9IHRydWU7XG4gICAgICB9XG4gICAgICB0aGlzLnRyaWdnZXIoJ2JlZm9yZURlc3Ryb3knLCB0aGlzLCBvcHRpb25zKTtcbiAgICAgIHRoaXMucmVtb3ZlKG9wdGlvbnMpO1xuICAgICAgdGhpcy5kZXN0cm95ZWQgPSB0cnVlO1xuICAgICAgdGhpcy50cmlnZ2VyKCdkZXN0cm95JywgdGhpcywgb3B0aW9ucyk7XG4gICAgICB0aGlzLnRyaWdnZXIoJ2NoYW5nZScsIHRoaXMsICdkZXN0cm95Jywgb3B0aW9ucyk7XG4gICAgICBpZiAodGhpcy5saXN0ZW5pbmdUbykge1xuICAgICAgICB0aGlzLnN0b3BMaXN0ZW5pbmcoKTtcbiAgICAgIH1cbiAgICAgIHRoaXMudW5iaW5kKCk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgTW9kZWwucHJvdG90eXBlLmR1cCA9IGZ1bmN0aW9uKG5ld1JlY29yZCkge1xuICAgICAgdmFyIGF0dHMsIHJlY29yZDtcbiAgICAgIGlmIChuZXdSZWNvcmQgPT0gbnVsbCkge1xuICAgICAgICBuZXdSZWNvcmQgPSB0cnVlO1xuICAgICAgfVxuICAgICAgYXR0cyA9IHRoaXMuYXR0cmlidXRlcygpO1xuICAgICAgaWYgKG5ld1JlY29yZCkge1xuICAgICAgICBkZWxldGUgYXR0cy5pZDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGF0dHMuY2lkID0gdGhpcy5jaWQ7XG4gICAgICB9XG4gICAgICByZWNvcmQgPSBuZXcgdGhpcy5jb25zdHJ1Y3RvcihhdHRzKTtcbiAgICAgIGlmICghbmV3UmVjb3JkKSB7XG4gICAgICAgIHRoaXMuX2NhbGxiYWNrcyAmJiAocmVjb3JkLl9jYWxsYmFja3MgPSB0aGlzLl9jYWxsYmFja3MpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlY29yZDtcbiAgICB9O1xuXG4gICAgTW9kZWwucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gY3JlYXRlT2JqZWN0KHRoaXMpO1xuICAgIH07XG5cbiAgICBNb2RlbC5wcm90b3R5cGUucmVsb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgb3JpZ2luYWw7XG4gICAgICBpZiAodGhpcy5pc05ldygpKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuICAgICAgb3JpZ2luYWwgPSB0aGlzLmNvbnN0cnVjdG9yLmZpbmQodGhpcy5pZCk7XG4gICAgICB0aGlzLmxvYWQob3JpZ2luYWwuYXR0cmlidXRlcygpKTtcbiAgICAgIHJldHVybiBvcmlnaW5hbDtcbiAgICB9O1xuXG4gICAgTW9kZWwucHJvdG90eXBlLnJlZnJlc2ggPSBmdW5jdGlvbihhdHRzKSB7XG4gICAgICBhdHRzID0gdGhpcy5jb25zdHJ1Y3Rvci5mcm9tSlNPTihhdHRzKTtcbiAgICAgIGlmIChhdHRzLmlkICYmIHRoaXMuaWQgIT09IGF0dHMuaWQpIHtcbiAgICAgICAgdGhpcy5jaGFuZ2VJRChhdHRzLmlkKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuY29uc3RydWN0b3IuaXJlY29yZHNbdGhpcy5pZF0ubG9hZChhdHRzKTtcbiAgICAgIHRoaXMudHJpZ2dlcigncmVmcmVzaCcsIHRoaXMpO1xuICAgICAgdGhpcy50cmlnZ2VyKCdjaGFuZ2UnLCB0aGlzLCAncmVmcmVzaCcpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIE1vZGVsLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLmF0dHJpYnV0ZXMoKTtcbiAgICB9O1xuXG4gICAgTW9kZWwucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gXCI8XCIgKyB0aGlzLmNvbnN0cnVjdG9yLmNsYXNzTmFtZSArIFwiIChcIiArIChKU09OLnN0cmluZ2lmeSh0aGlzKSkgKyBcIik+XCI7XG4gICAgfTtcblxuICAgIE1vZGVsLnByb3RvdHlwZS5mcm9tRm9ybSA9IGZ1bmN0aW9uKGZvcm0pIHtcbiAgICAgIHZhciBjaGVja2JveCwgaiwgaywga2V5LCBsLCBsZW4sIGxlbjEsIGxlbjIsIG5hbWUsIG5hbWUxLCByZWYsIHJlZjEsIHJlZjIsIHJlc3VsdDtcbiAgICAgIHJlc3VsdCA9IHt9O1xuICAgICAgcmVmID0gJChmb3JtKS5maW5kKCdbdHlwZT1jaGVja2JveF06bm90KFt2YWx1ZV0pJyk7XG4gICAgICBmb3IgKGogPSAwLCBsZW4gPSByZWYubGVuZ3RoOyBqIDwgbGVuOyBqKyspIHtcbiAgICAgICAgY2hlY2tib3ggPSByZWZbal07XG4gICAgICAgIHJlc3VsdFtjaGVja2JveC5uYW1lXSA9ICQoY2hlY2tib3gpLnByb3AoJ2NoZWNrZWQnKTtcbiAgICAgIH1cbiAgICAgIHJlZjEgPSAkKGZvcm0pLmZpbmQoJ1t0eXBlPWNoZWNrYm94XVtuYW1lJD1cIltdXCJdJyk7XG4gICAgICBmb3IgKGsgPSAwLCBsZW4xID0gcmVmMS5sZW5ndGg7IGsgPCBsZW4xOyBrKyspIHtcbiAgICAgICAgY2hlY2tib3ggPSByZWYxW2tdO1xuICAgICAgICBuYW1lID0gY2hlY2tib3gubmFtZS5yZXBsYWNlKC9cXFtcXF0kLywgJycpO1xuICAgICAgICByZXN1bHRbbmFtZV0gfHwgKHJlc3VsdFtuYW1lXSA9IFtdKTtcbiAgICAgICAgaWYgKCQoY2hlY2tib3gpLnByb3AoJ2NoZWNrZWQnKSkge1xuICAgICAgICAgIHJlc3VsdFtuYW1lXS5wdXNoKGNoZWNrYm94LnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmVmMiA9ICQoZm9ybSkuc2VyaWFsaXplQXJyYXkoKTtcbiAgICAgIGZvciAobCA9IDAsIGxlbjIgPSByZWYyLmxlbmd0aDsgbCA8IGxlbjI7IGwrKykge1xuICAgICAgICBrZXkgPSByZWYyW2xdO1xuICAgICAgICByZXN1bHRbbmFtZTEgPSBrZXkubmFtZV0gfHwgKHJlc3VsdFtuYW1lMV0gPSBrZXkudmFsdWUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMubG9hZChyZXN1bHQpO1xuICAgIH07XG5cbiAgICBNb2RlbC5wcm90b3R5cGUuZXhpc3RzID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci5leGlzdHModGhpcy5pZCk7XG4gICAgfTtcblxuICAgIE1vZGVsLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICB2YXIgY2xvbmUsIHJlY29yZHM7XG4gICAgICB0aGlzLnRyaWdnZXIoJ2JlZm9yZVVwZGF0ZScsIHRoaXMsIG9wdGlvbnMpO1xuICAgICAgcmVjb3JkcyA9IHRoaXMuY29uc3RydWN0b3IuaXJlY29yZHM7XG4gICAgICByZWNvcmRzW3RoaXMuaWRdLmxvYWQodGhpcy5hdHRyaWJ1dGVzKCkpO1xuICAgICAgdGhpcy5jb25zdHJ1Y3Rvci5zb3J0KCk7XG4gICAgICBjbG9uZSA9IHJlY29yZHNbdGhpcy5pZF0uY2xvbmUoKTtcbiAgICAgIGNsb25lLnRyaWdnZXIoJ3VwZGF0ZScsIGNsb25lLCBvcHRpb25zKTtcbiAgICAgIGNsb25lLnRyaWdnZXIoJ2NoYW5nZScsIGNsb25lLCAndXBkYXRlJywgb3B0aW9ucyk7XG4gICAgICByZXR1cm4gY2xvbmU7XG4gICAgfTtcblxuICAgIE1vZGVsLnByb3RvdHlwZS5jcmVhdGUgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICB2YXIgY2xvbmUsIHJlY29yZDtcbiAgICAgIHRoaXMudHJpZ2dlcignYmVmb3JlQ3JlYXRlJywgdGhpcywgb3B0aW9ucyk7XG4gICAgICB0aGlzLmlkIHx8ICh0aGlzLmlkID0gdGhpcy5jaWQpO1xuICAgICAgcmVjb3JkID0gdGhpcy5kdXAoZmFsc2UpO1xuICAgICAgdGhpcy5jb25zdHJ1Y3Rvci5hZGRSZWNvcmQocmVjb3JkLCBvcHRpb25zLmlkeCk7XG4gICAgICB0aGlzLmNvbnN0cnVjdG9yLnNvcnQoKTtcbiAgICAgIGNsb25lID0gcmVjb3JkLmNsb25lKCk7XG4gICAgICBjbG9uZS50cmlnZ2VyKCdjcmVhdGUnLCBjbG9uZSwgb3B0aW9ucyk7XG4gICAgICBjbG9uZS50cmlnZ2VyKCdjaGFuZ2UnLCBjbG9uZSwgJ2NyZWF0ZScsIG9wdGlvbnMpO1xuICAgICAgcmV0dXJuIGNsb25lO1xuICAgIH07XG5cbiAgICBNb2RlbC5wcm90b3R5cGUuYmluZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHJlY29yZDtcbiAgICAgIHJlY29yZCA9IHRoaXMuY29uc3RydWN0b3IuaXJlY29yZHNbdGhpcy5pZF0gfHwgdGhpcztcbiAgICAgIHJldHVybiBFdmVudHMuYmluZC5hcHBseShyZWNvcmQsIGFyZ3VtZW50cyk7XG4gICAgfTtcblxuICAgIE1vZGVsLnByb3RvdHlwZS5vbmUgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciByZWNvcmQ7XG4gICAgICByZWNvcmQgPSB0aGlzLmNvbnN0cnVjdG9yLmlyZWNvcmRzW3RoaXMuaWRdIHx8IHRoaXM7XG4gICAgICByZXR1cm4gRXZlbnRzLm9uZS5hcHBseShyZWNvcmQsIGFyZ3VtZW50cyk7XG4gICAgfTtcblxuICAgIE1vZGVsLnByb3RvdHlwZS51bmJpbmQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciByZWNvcmQ7XG4gICAgICByZWNvcmQgPSB0aGlzLmNvbnN0cnVjdG9yLmlyZWNvcmRzW3RoaXMuaWRdIHx8IHRoaXM7XG4gICAgICByZXR1cm4gRXZlbnRzLnVuYmluZC5hcHBseShyZWNvcmQsIGFyZ3VtZW50cyk7XG4gICAgfTtcblxuICAgIE1vZGVsLnByb3RvdHlwZS50cmlnZ2VyID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcmVmO1xuICAgICAgRXZlbnRzLnRyaWdnZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIGlmIChhcmd1bWVudHNbMF0gPT09ICdyZWZyZXNoJykge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiAocmVmID0gdGhpcy5jb25zdHJ1Y3RvcikudHJpZ2dlci5hcHBseShyZWYsIGFyZ3VtZW50cyk7XG4gICAgfTtcblxuICAgIHJldHVybiBNb2RlbDtcblxuICB9KShNb2R1bGUpO1xuXG4gIE1vZGVsLnByb3RvdHlwZS5vbiA9IE1vZGVsLnByb3RvdHlwZS5iaW5kO1xuXG4gIE1vZGVsLnByb3RvdHlwZS5vZmYgPSBNb2RlbC5wcm90b3R5cGUudW5iaW5kO1xuXG4gIENvbnRyb2xsZXIgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICAgIGV4dGVuZChDb250cm9sbGVyLCBzdXBlckNsYXNzKTtcblxuICAgIENvbnRyb2xsZXIuaW5jbHVkZShFdmVudHMpO1xuXG4gICAgQ29udHJvbGxlci5pbmNsdWRlKExvZyk7XG5cbiAgICBDb250cm9sbGVyLnByb3RvdHlwZS5ldmVudFNwbGl0dGVyID0gL14oXFxTKylcXHMqKC4qKSQvO1xuXG4gICAgQ29udHJvbGxlci5wcm90b3R5cGUudGFnID0gJ2Rpdic7XG5cbiAgICBmdW5jdGlvbiBDb250cm9sbGVyKG9wdGlvbnMpIHtcbiAgICAgIHRoaXMucmVsZWFzZSA9IGJpbmQodGhpcy5yZWxlYXNlLCB0aGlzKTtcbiAgICAgIHZhciBjb250ZXh0LCBrZXksIHBhcmVudF9wcm90b3R5cGUsIHJlZiwgdmFsdWU7XG4gICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgcmVmID0gdGhpcy5vcHRpb25zO1xuICAgICAgZm9yIChrZXkgaW4gcmVmKSB7XG4gICAgICAgIHZhbHVlID0gcmVmW2tleV07XG4gICAgICAgIHRoaXNba2V5XSA9IHZhbHVlO1xuICAgICAgfVxuICAgICAgaWYgKCF0aGlzLmVsKSB7XG4gICAgICAgIHRoaXMuZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRoaXMudGFnKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuZWwgPSAkKHRoaXMuZWwpO1xuICAgICAgaWYgKHRoaXMuY2xhc3NOYW1lKSB7XG4gICAgICAgIHRoaXMuZWwuYWRkQ2xhc3ModGhpcy5jbGFzc05hbWUpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuYXR0cmlidXRlcykge1xuICAgICAgICB0aGlzLmVsLmF0dHIodGhpcy5hdHRyaWJ1dGVzKTtcbiAgICAgIH1cbiAgICAgIGlmICghdGhpcy5ldmVudHMpIHtcbiAgICAgICAgdGhpcy5ldmVudHMgPSB0aGlzLmNvbnN0cnVjdG9yLmV2ZW50cztcbiAgICAgIH1cbiAgICAgIGlmICghdGhpcy5lbGVtZW50cykge1xuICAgICAgICB0aGlzLmVsZW1lbnRzID0gdGhpcy5jb25zdHJ1Y3Rvci5lbGVtZW50cztcbiAgICAgIH1cbiAgICAgIGNvbnRleHQgPSB0aGlzO1xuICAgICAgd2hpbGUgKHBhcmVudF9wcm90b3R5cGUgPSBjb250ZXh0LmNvbnN0cnVjdG9yLl9fc3VwZXJfXykge1xuICAgICAgICBpZiAocGFyZW50X3Byb3RvdHlwZS5ldmVudHMpIHtcbiAgICAgICAgICB0aGlzLmV2ZW50cyA9ICQuZXh0ZW5kKHt9LCBwYXJlbnRfcHJvdG90eXBlLmV2ZW50cywgdGhpcy5ldmVudHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJlbnRfcHJvdG90eXBlLmVsZW1lbnRzKSB7XG4gICAgICAgICAgdGhpcy5lbGVtZW50cyA9ICQuZXh0ZW5kKHt9LCBwYXJlbnRfcHJvdG90eXBlLmVsZW1lbnRzLCB0aGlzLmVsZW1lbnRzKTtcbiAgICAgICAgfVxuICAgICAgICBjb250ZXh0ID0gcGFyZW50X3Byb3RvdHlwZTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmV2ZW50cykge1xuICAgICAgICB0aGlzLmRlbGVnYXRlRXZlbnRzKHRoaXMuZXZlbnRzKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmVsZW1lbnRzKSB7XG4gICAgICAgIHRoaXMucmVmcmVzaEVsZW1lbnRzKCk7XG4gICAgICB9XG4gICAgICBDb250cm9sbGVyLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cblxuICAgIENvbnRyb2xsZXIucHJvdG90eXBlLnJlbGVhc2UgPSBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMudHJpZ2dlcigncmVsZWFzZScsIHRoaXMpO1xuICAgICAgdGhpcy5lbC5yZW1vdmUoKTtcbiAgICAgIHRoaXMudW5iaW5kKCk7XG4gICAgICByZXR1cm4gdGhpcy5zdG9wTGlzdGVuaW5nKCk7XG4gICAgfTtcblxuICAgIENvbnRyb2xsZXIucHJvdG90eXBlLiQgPSBmdW5jdGlvbihzZWxlY3Rvcikge1xuICAgICAgcmV0dXJuIHRoaXMuZWwuZmluZChzZWxlY3Rvcik7XG4gICAgfTtcblxuICAgIENvbnRyb2xsZXIucHJvdG90eXBlLmRlbGVnYXRlRXZlbnRzID0gZnVuY3Rpb24oZXZlbnRzKSB7XG4gICAgICB2YXIgZXZlbnROYW1lLCBrZXksIG1hdGNoLCBtZXRob2QsIHJlc3VsdHMsIHNlbGVjdG9yO1xuICAgICAgcmVzdWx0cyA9IFtdO1xuICAgICAgZm9yIChrZXkgaW4gZXZlbnRzKSB7XG4gICAgICAgIG1ldGhvZCA9IGV2ZW50c1trZXldO1xuICAgICAgICBpZiAodHlwZW9mIG1ldGhvZCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIG1ldGhvZCA9IChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKG1ldGhvZCkge1xuICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgbWV0aG9kLmFwcGx5KF90aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9KSh0aGlzKShtZXRob2QpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmICghdGhpc1ttZXRob2RdKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IobWV0aG9kICsgXCIgZG9lc24ndCBleGlzdFwiKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgbWV0aG9kID0gKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24obWV0aG9kKSB7XG4gICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBfdGhpc1ttZXRob2RdLmFwcGx5KF90aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9KSh0aGlzKShtZXRob2QpO1xuICAgICAgICB9XG4gICAgICAgIG1hdGNoID0ga2V5Lm1hdGNoKHRoaXMuZXZlbnRTcGxpdHRlcik7XG4gICAgICAgIGV2ZW50TmFtZSA9IG1hdGNoWzFdO1xuICAgICAgICBzZWxlY3RvciA9IG1hdGNoWzJdO1xuICAgICAgICBpZiAoc2VsZWN0b3IgPT09ICcnKSB7XG4gICAgICAgICAgcmVzdWx0cy5wdXNoKHRoaXMuZWwuYmluZChldmVudE5hbWUsIG1ldGhvZCkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc3VsdHMucHVzaCh0aGlzLmVsLm9uKGV2ZW50TmFtZSwgc2VsZWN0b3IsIG1ldGhvZCkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0cztcbiAgICB9O1xuXG4gICAgQ29udHJvbGxlci5wcm90b3R5cGUucmVmcmVzaEVsZW1lbnRzID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIga2V5LCByZWYsIHJlc3VsdHMsIHZhbHVlO1xuICAgICAgcmVmID0gdGhpcy5lbGVtZW50cztcbiAgICAgIHJlc3VsdHMgPSBbXTtcbiAgICAgIGZvciAoa2V5IGluIHJlZikge1xuICAgICAgICB2YWx1ZSA9IHJlZltrZXldO1xuICAgICAgICByZXN1bHRzLnB1c2godGhpc1t2YWx1ZV0gPSB0aGlzLiQoa2V5KSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0cztcbiAgICB9O1xuXG4gICAgQ29udHJvbGxlci5wcm90b3R5cGUuZGVsYXkgPSBmdW5jdGlvbihmdW5jLCB0aW1lb3V0KSB7XG4gICAgICByZXR1cm4gc2V0VGltZW91dCh0aGlzLnByb3h5KGZ1bmMpLCB0aW1lb3V0IHx8IDApO1xuICAgIH07XG5cbiAgICBDb250cm9sbGVyLnByb3RvdHlwZS5odG1sID0gZnVuY3Rpb24oZWxlbWVudCkge1xuICAgICAgdGhpcy5lbC5odG1sKGVsZW1lbnQuZWwgfHwgZWxlbWVudCk7XG4gICAgICB0aGlzLnJlZnJlc2hFbGVtZW50cygpO1xuICAgICAgcmV0dXJuIHRoaXMuZWw7XG4gICAgfTtcblxuICAgIENvbnRyb2xsZXIucHJvdG90eXBlLmFwcGVuZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGUsIGVsZW1lbnRzLCByZWY7XG4gICAgICBlbGVtZW50cyA9IDEgPD0gYXJndW1lbnRzLmxlbmd0aCA/IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKSA6IFtdO1xuICAgICAgZWxlbWVudHMgPSAoZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBqLCBsZW4sIHJlc3VsdHM7XG4gICAgICAgIHJlc3VsdHMgPSBbXTtcbiAgICAgICAgZm9yIChqID0gMCwgbGVuID0gZWxlbWVudHMubGVuZ3RoOyBqIDwgbGVuOyBqKyspIHtcbiAgICAgICAgICBlID0gZWxlbWVudHNbal07XG4gICAgICAgICAgcmVzdWx0cy5wdXNoKGUuZWwgfHwgZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgICB9KSgpO1xuICAgICAgKHJlZiA9IHRoaXMuZWwpLmFwcGVuZC5hcHBseShyZWYsIGVsZW1lbnRzKTtcbiAgICAgIHRoaXMucmVmcmVzaEVsZW1lbnRzKCk7XG4gICAgICByZXR1cm4gdGhpcy5lbDtcbiAgICB9O1xuXG4gICAgQ29udHJvbGxlci5wcm90b3R5cGUuYXBwZW5kVG8gPSBmdW5jdGlvbihlbGVtZW50KSB7XG4gICAgICB0aGlzLmVsLmFwcGVuZFRvKGVsZW1lbnQuZWwgfHwgZWxlbWVudCk7XG4gICAgICB0aGlzLnJlZnJlc2hFbGVtZW50cygpO1xuICAgICAgcmV0dXJuIHRoaXMuZWw7XG4gICAgfTtcblxuICAgIENvbnRyb2xsZXIucHJvdG90eXBlLnByZXBlbmQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBlLCBlbGVtZW50cywgcmVmO1xuICAgICAgZWxlbWVudHMgPSAxIDw9IGFyZ3VtZW50cy5sZW5ndGggPyBzbGljZS5jYWxsKGFyZ3VtZW50cywgMCkgOiBbXTtcbiAgICAgIGVsZW1lbnRzID0gKGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgaiwgbGVuLCByZXN1bHRzO1xuICAgICAgICByZXN1bHRzID0gW107XG4gICAgICAgIGZvciAoaiA9IDAsIGxlbiA9IGVsZW1lbnRzLmxlbmd0aDsgaiA8IGxlbjsgaisrKSB7XG4gICAgICAgICAgZSA9IGVsZW1lbnRzW2pdO1xuICAgICAgICAgIHJlc3VsdHMucHVzaChlLmVsIHx8IGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHRzO1xuICAgICAgfSkoKTtcbiAgICAgIChyZWYgPSB0aGlzLmVsKS5wcmVwZW5kLmFwcGx5KHJlZiwgZWxlbWVudHMpO1xuICAgICAgdGhpcy5yZWZyZXNoRWxlbWVudHMoKTtcbiAgICAgIHJldHVybiB0aGlzLmVsO1xuICAgIH07XG5cbiAgICBDb250cm9sbGVyLnByb3RvdHlwZS5yZXBsYWNlID0gZnVuY3Rpb24oZWxlbWVudCkge1xuICAgICAgdmFyIHByZXZpb3VzLCByZWYsIHJlZjE7XG4gICAgICBlbGVtZW50ID0gZWxlbWVudC5lbCB8fCBlbGVtZW50O1xuICAgICAgaWYgKHR5cGVvZiBlbGVtZW50ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIGVsZW1lbnQgPSAkLnRyaW0oZWxlbWVudCk7XG4gICAgICB9XG4gICAgICByZWYxID0gW3RoaXMuZWwsICQoKChyZWYgPSAkLnBhcnNlSFRNTChlbGVtZW50KSkgIT0gbnVsbCA/IHJlZlswXSA6IHZvaWQgMCkgfHwgZWxlbWVudCldLCBwcmV2aW91cyA9IHJlZjFbMF0sIHRoaXMuZWwgPSByZWYxWzFdO1xuICAgICAgcHJldmlvdXMucmVwbGFjZVdpdGgodGhpcy5lbCk7XG4gICAgICB0aGlzLmRlbGVnYXRlRXZlbnRzKHRoaXMuZXZlbnRzKTtcbiAgICAgIHRoaXMucmVmcmVzaEVsZW1lbnRzKCk7XG4gICAgICByZXR1cm4gdGhpcy5lbDtcbiAgICB9O1xuXG4gICAgcmV0dXJuIENvbnRyb2xsZXI7XG5cbiAgfSkoTW9kdWxlKTtcblxuICAkID0gKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgd2luZG93ICE9PSBudWxsID8gd2luZG93LmpRdWVyeSA6IHZvaWQgMCkgfHwgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgd2luZG93ICE9PSBudWxsID8gd2luZG93LlplcHRvIDogdm9pZCAwKSB8fCBmdW5jdGlvbihlbGVtZW50KSB7XG4gICAgcmV0dXJuIGVsZW1lbnQ7XG4gIH07XG5cbiAgY3JlYXRlT2JqZWN0ID0gT2JqZWN0LmNyZWF0ZSB8fCBmdW5jdGlvbihvKSB7XG4gICAgdmFyIEZ1bmM7XG4gICAgRnVuYyA9IGZ1bmN0aW9uKCkge307XG4gICAgRnVuYy5wcm90b3R5cGUgPSBvO1xuICAgIHJldHVybiBuZXcgRnVuYygpO1xuICB9O1xuXG4gIG1ha2VBcnJheSA9IGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICByZXR1cm4gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJncywgMCk7XG4gIH07XG5cbiAgU3BpbmUgPSB0aGlzLlNwaW5lID0ge307XG5cbiAgaWYgKHR5cGVvZiBtb2R1bGUgIT09IFwidW5kZWZpbmVkXCIgJiYgbW9kdWxlICE9PSBudWxsKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBTcGluZTtcbiAgfVxuXG4gIFNwaW5lLnZlcnNpb24gPSAnMS42LjInO1xuXG4gIFNwaW5lLiQgPSAkO1xuXG4gIFNwaW5lLkV2ZW50cyA9IEV2ZW50cztcblxuICBTcGluZS5Mb2cgPSBMb2c7XG5cbiAgU3BpbmUuTW9kdWxlID0gTW9kdWxlO1xuXG4gIFNwaW5lLkNvbnRyb2xsZXIgPSBDb250cm9sbGVyO1xuXG4gIFNwaW5lLk1vZGVsID0gTW9kZWw7XG5cbiAgTW9kdWxlLmV4dGVuZC5jYWxsKFNwaW5lLCBFdmVudHMpO1xuXG4gIE1vZHVsZS5jcmVhdGUgPSBNb2R1bGUuc3ViID0gQ29udHJvbGxlci5jcmVhdGUgPSBDb250cm9sbGVyLnN1YiA9IE1vZGVsLnN1YiA9IGZ1bmN0aW9uKGluc3RhbmNlcywgc3RhdGljcykge1xuICAgIHZhciBSZXN1bHQ7XG4gICAgUmVzdWx0ID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgICAgIGV4dGVuZChSZXN1bHQsIHN1cGVyQ2xhc3MpO1xuXG4gICAgICBmdW5jdGlvbiBSZXN1bHQoKSB7XG4gICAgICAgIHJldHVybiBSZXN1bHQuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBSZXN1bHQ7XG5cbiAgICB9KSh0aGlzKTtcbiAgICBpZiAoaW5zdGFuY2VzKSB7XG4gICAgICBSZXN1bHQuaW5jbHVkZShpbnN0YW5jZXMpO1xuICAgIH1cbiAgICBpZiAoc3RhdGljcykge1xuICAgICAgUmVzdWx0LmV4dGVuZChzdGF0aWNzKTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBSZXN1bHQudW5iaW5kID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIFJlc3VsdC51bmJpbmQoKTtcbiAgICB9XG4gICAgcmV0dXJuIFJlc3VsdDtcbiAgfTtcblxuICBNb2RlbC5zZXR1cCA9IGZ1bmN0aW9uKG5hbWUsIGF0dHJpYnV0ZXMpIHtcbiAgICB2YXIgSW5zdGFuY2U7XG4gICAgaWYgKGF0dHJpYnV0ZXMgPT0gbnVsbCkge1xuICAgICAgYXR0cmlidXRlcyA9IFtdO1xuICAgIH1cbiAgICBJbnN0YW5jZSA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gICAgICBleHRlbmQoSW5zdGFuY2UsIHN1cGVyQ2xhc3MpO1xuXG4gICAgICBmdW5jdGlvbiBJbnN0YW5jZSgpIHtcbiAgICAgICAgcmV0dXJuIEluc3RhbmNlLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gSW5zdGFuY2U7XG5cbiAgICB9KSh0aGlzKTtcbiAgICBJbnN0YW5jZS5jb25maWd1cmUuYXBwbHkoSW5zdGFuY2UsIFtuYW1lXS5jb25jYXQoc2xpY2UuY2FsbChhdHRyaWJ1dGVzKSkpO1xuICAgIHJldHVybiBJbnN0YW5jZTtcbiAgfTtcblxuICBTcGluZS5DbGFzcyA9IE1vZHVsZTtcblxufSkuY2FsbCh0aGlzKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3BpbmUuanMubWFwXG4iLCIvLyBzdGF0cy5qcyAtIGh0dHA6Ly9naXRodWIuY29tL21yZG9vYi9zdGF0cy5qc1xudmFyIFN0YXRzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gaChhKXtjLmFwcGVuZENoaWxkKGEuZG9tKTtyZXR1cm4gYX1mdW5jdGlvbiBrKGEpe2Zvcih2YXIgZD0wO2Q8Yy5jaGlsZHJlbi5sZW5ndGg7ZCsrKWMuY2hpbGRyZW5bZF0uc3R5bGUuZGlzcGxheT1kPT09YT9cImJsb2NrXCI6XCJub25lXCI7bD1hfXZhciBsPTAsYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2Muc3R5bGUuY3NzVGV4dD1cInBvc2l0aW9uOmZpeGVkO3RvcDowO2xlZnQ6MDtjdXJzb3I6cG9pbnRlcjtvcGFjaXR5OjAuOTt6LWluZGV4OjEwMDAwXCI7Yy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIixmdW5jdGlvbihhKXthLnByZXZlbnREZWZhdWx0KCk7aygrK2wlYy5jaGlsZHJlbi5sZW5ndGgpfSwhMSk7dmFyIGc9KHBlcmZvcm1hbmNlfHxEYXRlKS5ub3coKSxlPWcsYT0wLHI9aChuZXcgU3RhdHMuUGFuZWwoXCJGUFNcIixcIiMwZmZcIixcIiMwMDJcIikpLGY9aChuZXcgU3RhdHMuUGFuZWwoXCJNU1wiLFwiIzBmMFwiLFwiIzAyMFwiKSk7XG5pZihzZWxmLnBlcmZvcm1hbmNlJiZzZWxmLnBlcmZvcm1hbmNlLm1lbW9yeSl2YXIgdD1oKG5ldyBTdGF0cy5QYW5lbChcIk1CXCIsXCIjZjA4XCIsXCIjMjAxXCIpKTtrKDApO3JldHVybntSRVZJU0lPTjoxNixkb206YyxhZGRQYW5lbDpoLHNob3dQYW5lbDprLGJlZ2luOmZ1bmN0aW9uKCl7Zz0ocGVyZm9ybWFuY2V8fERhdGUpLm5vdygpfSxlbmQ6ZnVuY3Rpb24oKXthKys7dmFyIGM9KHBlcmZvcm1hbmNlfHxEYXRlKS5ub3coKTtmLnVwZGF0ZShjLWcsMjAwKTtpZihjPmUrMUUzJiYoci51cGRhdGUoMUUzKmEvKGMtZSksMTAwKSxlPWMsYT0wLHQpKXt2YXIgZD1wZXJmb3JtYW5jZS5tZW1vcnk7dC51cGRhdGUoZC51c2VkSlNIZWFwU2l6ZS8xMDQ4NTc2LGQuanNIZWFwU2l6ZUxpbWl0LzEwNDg1NzYpfXJldHVybiBjfSx1cGRhdGU6ZnVuY3Rpb24oKXtnPXRoaXMuZW5kKCl9LGRvbUVsZW1lbnQ6YyxzZXRNb2RlOmt9fTtcblN0YXRzLlBhbmVsPWZ1bmN0aW9uKGgsayxsKXt2YXIgYz1JbmZpbml0eSxnPTAsZT1NYXRoLnJvdW5kLGE9ZSh3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpb3x8MSkscj04MCphLGY9NDgqYSx0PTMqYSx1PTIqYSxkPTMqYSxtPTE1KmEsbj03NCphLHA9MzAqYSxxPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7cS53aWR0aD1yO3EuaGVpZ2h0PWY7cS5zdHlsZS5jc3NUZXh0PVwid2lkdGg6ODBweDtoZWlnaHQ6NDhweFwiO3ZhciBiPXEuZ2V0Q29udGV4dChcIjJkXCIpO2IuZm9udD1cImJvbGQgXCIrOSphK1wicHggSGVsdmV0aWNhLEFyaWFsLHNhbnMtc2VyaWZcIjtiLnRleHRCYXNlbGluZT1cInRvcFwiO2IuZmlsbFN0eWxlPWw7Yi5maWxsUmVjdCgwLDAscixmKTtiLmZpbGxTdHlsZT1rO2IuZmlsbFRleHQoaCx0LHUpO2IuZmlsbFJlY3QoZCxtLG4scCk7Yi5maWxsU3R5bGU9bDtiLmdsb2JhbEFscGhhPS45O2IuZmlsbFJlY3QoZCxtLG4scCk7cmV0dXJue2RvbTpxLHVwZGF0ZTpmdW5jdGlvbihmLFxudil7Yz1NYXRoLm1pbihjLGYpO2c9TWF0aC5tYXgoZyxmKTtiLmZpbGxTdHlsZT1sO2IuZ2xvYmFsQWxwaGE9MTtiLmZpbGxSZWN0KDAsMCxyLG0pO2IuZmlsbFN0eWxlPWs7Yi5maWxsVGV4dChlKGYpK1wiIFwiK2grXCIgKFwiK2UoYykrXCItXCIrZShnKStcIilcIix0LHUpO2IuZHJhd0ltYWdlKHEsZCthLG0sbi1hLHAsZCxtLG4tYSxwKTtiLmZpbGxSZWN0KGQrbi1hLG0sYSxwKTtiLmZpbGxTdHlsZT1sO2IuZ2xvYmFsQWxwaGE9Ljk7Yi5maWxsUmVjdChkK24tYSxtLGEsZSgoMS1mL3YpKnApKX19fTtcIm9iamVjdFwiPT09dHlwZW9mIG1vZHVsZSYmKG1vZHVsZS5leHBvcnRzPVN0YXRzKTtcbiIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaXNCdWZmZXIoYXJnKSB7XG4gIHJldHVybiBhcmcgJiYgdHlwZW9mIGFyZyA9PT0gJ29iamVjdCdcbiAgICAmJiB0eXBlb2YgYXJnLmNvcHkgPT09ICdmdW5jdGlvbidcbiAgICAmJiB0eXBlb2YgYXJnLmZpbGwgPT09ICdmdW5jdGlvbidcbiAgICAmJiB0eXBlb2YgYXJnLnJlYWRVSW50OCA9PT0gJ2Z1bmN0aW9uJztcbn0iLCIvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxudmFyIGZvcm1hdFJlZ0V4cCA9IC8lW3NkaiVdL2c7XG5leHBvcnRzLmZvcm1hdCA9IGZ1bmN0aW9uKGYpIHtcbiAgaWYgKCFpc1N0cmluZyhmKSkge1xuICAgIHZhciBvYmplY3RzID0gW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIG9iamVjdHMucHVzaChpbnNwZWN0KGFyZ3VtZW50c1tpXSkpO1xuICAgIH1cbiAgICByZXR1cm4gb2JqZWN0cy5qb2luKCcgJyk7XG4gIH1cblxuICB2YXIgaSA9IDE7XG4gIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICB2YXIgbGVuID0gYXJncy5sZW5ndGg7XG4gIHZhciBzdHIgPSBTdHJpbmcoZikucmVwbGFjZShmb3JtYXRSZWdFeHAsIGZ1bmN0aW9uKHgpIHtcbiAgICBpZiAoeCA9PT0gJyUlJykgcmV0dXJuICclJztcbiAgICBpZiAoaSA+PSBsZW4pIHJldHVybiB4O1xuICAgIHN3aXRjaCAoeCkge1xuICAgICAgY2FzZSAnJXMnOiByZXR1cm4gU3RyaW5nKGFyZ3NbaSsrXSk7XG4gICAgICBjYXNlICclZCc6IHJldHVybiBOdW1iZXIoYXJnc1tpKytdKTtcbiAgICAgIGNhc2UgJyVqJzpcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoYXJnc1tpKytdKTtcbiAgICAgICAgfSBjYXRjaCAoXykge1xuICAgICAgICAgIHJldHVybiAnW0NpcmN1bGFyXSc7XG4gICAgICAgIH1cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiB4O1xuICAgIH1cbiAgfSk7XG4gIGZvciAodmFyIHggPSBhcmdzW2ldOyBpIDwgbGVuOyB4ID0gYXJnc1srK2ldKSB7XG4gICAgaWYgKGlzTnVsbCh4KSB8fCAhaXNPYmplY3QoeCkpIHtcbiAgICAgIHN0ciArPSAnICcgKyB4O1xuICAgIH0gZWxzZSB7XG4gICAgICBzdHIgKz0gJyAnICsgaW5zcGVjdCh4KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHN0cjtcbn07XG5cblxuLy8gTWFyayB0aGF0IGEgbWV0aG9kIHNob3VsZCBub3QgYmUgdXNlZC5cbi8vIFJldHVybnMgYSBtb2RpZmllZCBmdW5jdGlvbiB3aGljaCB3YXJucyBvbmNlIGJ5IGRlZmF1bHQuXG4vLyBJZiAtLW5vLWRlcHJlY2F0aW9uIGlzIHNldCwgdGhlbiBpdCBpcyBhIG5vLW9wLlxuZXhwb3J0cy5kZXByZWNhdGUgPSBmdW5jdGlvbihmbiwgbXNnKSB7XG4gIC8vIEFsbG93IGZvciBkZXByZWNhdGluZyB0aGluZ3MgaW4gdGhlIHByb2Nlc3Mgb2Ygc3RhcnRpbmcgdXAuXG4gIGlmIChpc1VuZGVmaW5lZChnbG9iYWwucHJvY2VzcykpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gZXhwb3J0cy5kZXByZWNhdGUoZm4sIG1zZykuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9O1xuICB9XG5cbiAgaWYgKHByb2Nlc3Mubm9EZXByZWNhdGlvbiA9PT0gdHJ1ZSkge1xuICAgIHJldHVybiBmbjtcbiAgfVxuXG4gIHZhciB3YXJuZWQgPSBmYWxzZTtcbiAgZnVuY3Rpb24gZGVwcmVjYXRlZCgpIHtcbiAgICBpZiAoIXdhcm5lZCkge1xuICAgICAgaWYgKHByb2Nlc3MudGhyb3dEZXByZWNhdGlvbikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IobXNnKTtcbiAgICAgIH0gZWxzZSBpZiAocHJvY2Vzcy50cmFjZURlcHJlY2F0aW9uKSB7XG4gICAgICAgIGNvbnNvbGUudHJhY2UobXNnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IobXNnKTtcbiAgICAgIH1cbiAgICAgIHdhcm5lZCA9IHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgcmV0dXJuIGRlcHJlY2F0ZWQ7XG59O1xuXG5cbnZhciBkZWJ1Z3MgPSB7fTtcbnZhciBkZWJ1Z0Vudmlyb247XG5leHBvcnRzLmRlYnVnbG9nID0gZnVuY3Rpb24oc2V0KSB7XG4gIGlmIChpc1VuZGVmaW5lZChkZWJ1Z0Vudmlyb24pKVxuICAgIGRlYnVnRW52aXJvbiA9IHByb2Nlc3MuZW52Lk5PREVfREVCVUcgfHwgJyc7XG4gIHNldCA9IHNldC50b1VwcGVyQ2FzZSgpO1xuICBpZiAoIWRlYnVnc1tzZXRdKSB7XG4gICAgaWYgKG5ldyBSZWdFeHAoJ1xcXFxiJyArIHNldCArICdcXFxcYicsICdpJykudGVzdChkZWJ1Z0Vudmlyb24pKSB7XG4gICAgICB2YXIgcGlkID0gcHJvY2Vzcy5waWQ7XG4gICAgICBkZWJ1Z3Nbc2V0XSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgbXNnID0gZXhwb3J0cy5mb3JtYXQuYXBwbHkoZXhwb3J0cywgYXJndW1lbnRzKTtcbiAgICAgICAgY29uc29sZS5lcnJvcignJXMgJWQ6ICVzJywgc2V0LCBwaWQsIG1zZyk7XG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICBkZWJ1Z3Nbc2V0XSA9IGZ1bmN0aW9uKCkge307XG4gICAgfVxuICB9XG4gIHJldHVybiBkZWJ1Z3Nbc2V0XTtcbn07XG5cblxuLyoqXG4gKiBFY2hvcyB0aGUgdmFsdWUgb2YgYSB2YWx1ZS4gVHJ5cyB0byBwcmludCB0aGUgdmFsdWUgb3V0XG4gKiBpbiB0aGUgYmVzdCB3YXkgcG9zc2libGUgZ2l2ZW4gdGhlIGRpZmZlcmVudCB0eXBlcy5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqIFRoZSBvYmplY3QgdG8gcHJpbnQgb3V0LlxuICogQHBhcmFtIHtPYmplY3R9IG9wdHMgT3B0aW9uYWwgb3B0aW9ucyBvYmplY3QgdGhhdCBhbHRlcnMgdGhlIG91dHB1dC5cbiAqL1xuLyogbGVnYWN5OiBvYmosIHNob3dIaWRkZW4sIGRlcHRoLCBjb2xvcnMqL1xuZnVuY3Rpb24gaW5zcGVjdChvYmosIG9wdHMpIHtcbiAgLy8gZGVmYXVsdCBvcHRpb25zXG4gIHZhciBjdHggPSB7XG4gICAgc2VlbjogW10sXG4gICAgc3R5bGl6ZTogc3R5bGl6ZU5vQ29sb3JcbiAgfTtcbiAgLy8gbGVnYWN5Li4uXG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID49IDMpIGN0eC5kZXB0aCA9IGFyZ3VtZW50c1syXTtcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPj0gNCkgY3R4LmNvbG9ycyA9IGFyZ3VtZW50c1szXTtcbiAgaWYgKGlzQm9vbGVhbihvcHRzKSkge1xuICAgIC8vIGxlZ2FjeS4uLlxuICAgIGN0eC5zaG93SGlkZGVuID0gb3B0cztcbiAgfSBlbHNlIGlmIChvcHRzKSB7XG4gICAgLy8gZ290IGFuIFwib3B0aW9uc1wiIG9iamVjdFxuICAgIGV4cG9ydHMuX2V4dGVuZChjdHgsIG9wdHMpO1xuICB9XG4gIC8vIHNldCBkZWZhdWx0IG9wdGlvbnNcbiAgaWYgKGlzVW5kZWZpbmVkKGN0eC5zaG93SGlkZGVuKSkgY3R4LnNob3dIaWRkZW4gPSBmYWxzZTtcbiAgaWYgKGlzVW5kZWZpbmVkKGN0eC5kZXB0aCkpIGN0eC5kZXB0aCA9IDI7XG4gIGlmIChpc1VuZGVmaW5lZChjdHguY29sb3JzKSkgY3R4LmNvbG9ycyA9IGZhbHNlO1xuICBpZiAoaXNVbmRlZmluZWQoY3R4LmN1c3RvbUluc3BlY3QpKSBjdHguY3VzdG9tSW5zcGVjdCA9IHRydWU7XG4gIGlmIChjdHguY29sb3JzKSBjdHguc3R5bGl6ZSA9IHN0eWxpemVXaXRoQ29sb3I7XG4gIHJldHVybiBmb3JtYXRWYWx1ZShjdHgsIG9iaiwgY3R4LmRlcHRoKTtcbn1cbmV4cG9ydHMuaW5zcGVjdCA9IGluc3BlY3Q7XG5cblxuLy8gaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9BTlNJX2VzY2FwZV9jb2RlI2dyYXBoaWNzXG5pbnNwZWN0LmNvbG9ycyA9IHtcbiAgJ2JvbGQnIDogWzEsIDIyXSxcbiAgJ2l0YWxpYycgOiBbMywgMjNdLFxuICAndW5kZXJsaW5lJyA6IFs0LCAyNF0sXG4gICdpbnZlcnNlJyA6IFs3LCAyN10sXG4gICd3aGl0ZScgOiBbMzcsIDM5XSxcbiAgJ2dyZXknIDogWzkwLCAzOV0sXG4gICdibGFjaycgOiBbMzAsIDM5XSxcbiAgJ2JsdWUnIDogWzM0LCAzOV0sXG4gICdjeWFuJyA6IFszNiwgMzldLFxuICAnZ3JlZW4nIDogWzMyLCAzOV0sXG4gICdtYWdlbnRhJyA6IFszNSwgMzldLFxuICAncmVkJyA6IFszMSwgMzldLFxuICAneWVsbG93JyA6IFszMywgMzldXG59O1xuXG4vLyBEb24ndCB1c2UgJ2JsdWUnIG5vdCB2aXNpYmxlIG9uIGNtZC5leGVcbmluc3BlY3Quc3R5bGVzID0ge1xuICAnc3BlY2lhbCc6ICdjeWFuJyxcbiAgJ251bWJlcic6ICd5ZWxsb3cnLFxuICAnYm9vbGVhbic6ICd5ZWxsb3cnLFxuICAndW5kZWZpbmVkJzogJ2dyZXknLFxuICAnbnVsbCc6ICdib2xkJyxcbiAgJ3N0cmluZyc6ICdncmVlbicsXG4gICdkYXRlJzogJ21hZ2VudGEnLFxuICAvLyBcIm5hbWVcIjogaW50ZW50aW9uYWxseSBub3Qgc3R5bGluZ1xuICAncmVnZXhwJzogJ3JlZCdcbn07XG5cblxuZnVuY3Rpb24gc3R5bGl6ZVdpdGhDb2xvcihzdHIsIHN0eWxlVHlwZSkge1xuICB2YXIgc3R5bGUgPSBpbnNwZWN0LnN0eWxlc1tzdHlsZVR5cGVdO1xuXG4gIGlmIChzdHlsZSkge1xuICAgIHJldHVybiAnXFx1MDAxYlsnICsgaW5zcGVjdC5jb2xvcnNbc3R5bGVdWzBdICsgJ20nICsgc3RyICtcbiAgICAgICAgICAgJ1xcdTAwMWJbJyArIGluc3BlY3QuY29sb3JzW3N0eWxlXVsxXSArICdtJztcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gc3RyO1xuICB9XG59XG5cblxuZnVuY3Rpb24gc3R5bGl6ZU5vQ29sb3Ioc3RyLCBzdHlsZVR5cGUpIHtcbiAgcmV0dXJuIHN0cjtcbn1cblxuXG5mdW5jdGlvbiBhcnJheVRvSGFzaChhcnJheSkge1xuICB2YXIgaGFzaCA9IHt9O1xuXG4gIGFycmF5LmZvckVhY2goZnVuY3Rpb24odmFsLCBpZHgpIHtcbiAgICBoYXNoW3ZhbF0gPSB0cnVlO1xuICB9KTtcblxuICByZXR1cm4gaGFzaDtcbn1cblxuXG5mdW5jdGlvbiBmb3JtYXRWYWx1ZShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMpIHtcbiAgLy8gUHJvdmlkZSBhIGhvb2sgZm9yIHVzZXItc3BlY2lmaWVkIGluc3BlY3QgZnVuY3Rpb25zLlxuICAvLyBDaGVjayB0aGF0IHZhbHVlIGlzIGFuIG9iamVjdCB3aXRoIGFuIGluc3BlY3QgZnVuY3Rpb24gb24gaXRcbiAgaWYgKGN0eC5jdXN0b21JbnNwZWN0ICYmXG4gICAgICB2YWx1ZSAmJlxuICAgICAgaXNGdW5jdGlvbih2YWx1ZS5pbnNwZWN0KSAmJlxuICAgICAgLy8gRmlsdGVyIG91dCB0aGUgdXRpbCBtb2R1bGUsIGl0J3MgaW5zcGVjdCBmdW5jdGlvbiBpcyBzcGVjaWFsXG4gICAgICB2YWx1ZS5pbnNwZWN0ICE9PSBleHBvcnRzLmluc3BlY3QgJiZcbiAgICAgIC8vIEFsc28gZmlsdGVyIG91dCBhbnkgcHJvdG90eXBlIG9iamVjdHMgdXNpbmcgdGhlIGNpcmN1bGFyIGNoZWNrLlxuICAgICAgISh2YWx1ZS5jb25zdHJ1Y3RvciAmJiB2YWx1ZS5jb25zdHJ1Y3Rvci5wcm90b3R5cGUgPT09IHZhbHVlKSkge1xuICAgIHZhciByZXQgPSB2YWx1ZS5pbnNwZWN0KHJlY3Vyc2VUaW1lcywgY3R4KTtcbiAgICBpZiAoIWlzU3RyaW5nKHJldCkpIHtcbiAgICAgIHJldCA9IGZvcm1hdFZhbHVlKGN0eCwgcmV0LCByZWN1cnNlVGltZXMpO1xuICAgIH1cbiAgICByZXR1cm4gcmV0O1xuICB9XG5cbiAgLy8gUHJpbWl0aXZlIHR5cGVzIGNhbm5vdCBoYXZlIHByb3BlcnRpZXNcbiAgdmFyIHByaW1pdGl2ZSA9IGZvcm1hdFByaW1pdGl2ZShjdHgsIHZhbHVlKTtcbiAgaWYgKHByaW1pdGl2ZSkge1xuICAgIHJldHVybiBwcmltaXRpdmU7XG4gIH1cblxuICAvLyBMb29rIHVwIHRoZSBrZXlzIG9mIHRoZSBvYmplY3QuXG4gIHZhciBrZXlzID0gT2JqZWN0LmtleXModmFsdWUpO1xuICB2YXIgdmlzaWJsZUtleXMgPSBhcnJheVRvSGFzaChrZXlzKTtcblxuICBpZiAoY3R4LnNob3dIaWRkZW4pIHtcbiAgICBrZXlzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModmFsdWUpO1xuICB9XG5cbiAgLy8gSUUgZG9lc24ndCBtYWtlIGVycm9yIGZpZWxkcyBub24tZW51bWVyYWJsZVxuICAvLyBodHRwOi8vbXNkbi5taWNyb3NvZnQuY29tL2VuLXVzL2xpYnJhcnkvaWUvZHd3NTJzYnQodj12cy45NCkuYXNweFxuICBpZiAoaXNFcnJvcih2YWx1ZSlcbiAgICAgICYmIChrZXlzLmluZGV4T2YoJ21lc3NhZ2UnKSA+PSAwIHx8IGtleXMuaW5kZXhPZignZGVzY3JpcHRpb24nKSA+PSAwKSkge1xuICAgIHJldHVybiBmb3JtYXRFcnJvcih2YWx1ZSk7XG4gIH1cblxuICAvLyBTb21lIHR5cGUgb2Ygb2JqZWN0IHdpdGhvdXQgcHJvcGVydGllcyBjYW4gYmUgc2hvcnRjdXR0ZWQuXG4gIGlmIChrZXlzLmxlbmd0aCA9PT0gMCkge1xuICAgIGlmIChpc0Z1bmN0aW9uKHZhbHVlKSkge1xuICAgICAgdmFyIG5hbWUgPSB2YWx1ZS5uYW1lID8gJzogJyArIHZhbHVlLm5hbWUgOiAnJztcbiAgICAgIHJldHVybiBjdHguc3R5bGl6ZSgnW0Z1bmN0aW9uJyArIG5hbWUgKyAnXScsICdzcGVjaWFsJyk7XG4gICAgfVxuICAgIGlmIChpc1JlZ0V4cCh2YWx1ZSkpIHtcbiAgICAgIHJldHVybiBjdHguc3R5bGl6ZShSZWdFeHAucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpLCAncmVnZXhwJyk7XG4gICAgfVxuICAgIGlmIChpc0RhdGUodmFsdWUpKSB7XG4gICAgICByZXR1cm4gY3R4LnN0eWxpemUoRGF0ZS5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSksICdkYXRlJyk7XG4gICAgfVxuICAgIGlmIChpc0Vycm9yKHZhbHVlKSkge1xuICAgICAgcmV0dXJuIGZvcm1hdEVycm9yKHZhbHVlKTtcbiAgICB9XG4gIH1cblxuICB2YXIgYmFzZSA9ICcnLCBhcnJheSA9IGZhbHNlLCBicmFjZXMgPSBbJ3snLCAnfSddO1xuXG4gIC8vIE1ha2UgQXJyYXkgc2F5IHRoYXQgdGhleSBhcmUgQXJyYXlcbiAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG4gICAgYXJyYXkgPSB0cnVlO1xuICAgIGJyYWNlcyA9IFsnWycsICddJ107XG4gIH1cblxuICAvLyBNYWtlIGZ1bmN0aW9ucyBzYXkgdGhhdCB0aGV5IGFyZSBmdW5jdGlvbnNcbiAgaWYgKGlzRnVuY3Rpb24odmFsdWUpKSB7XG4gICAgdmFyIG4gPSB2YWx1ZS5uYW1lID8gJzogJyArIHZhbHVlLm5hbWUgOiAnJztcbiAgICBiYXNlID0gJyBbRnVuY3Rpb24nICsgbiArICddJztcbiAgfVxuXG4gIC8vIE1ha2UgUmVnRXhwcyBzYXkgdGhhdCB0aGV5IGFyZSBSZWdFeHBzXG4gIGlmIChpc1JlZ0V4cCh2YWx1ZSkpIHtcbiAgICBiYXNlID0gJyAnICsgUmVnRXhwLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKTtcbiAgfVxuXG4gIC8vIE1ha2UgZGF0ZXMgd2l0aCBwcm9wZXJ0aWVzIGZpcnN0IHNheSB0aGUgZGF0ZVxuICBpZiAoaXNEYXRlKHZhbHVlKSkge1xuICAgIGJhc2UgPSAnICcgKyBEYXRlLnByb3RvdHlwZS50b1VUQ1N0cmluZy5jYWxsKHZhbHVlKTtcbiAgfVxuXG4gIC8vIE1ha2UgZXJyb3Igd2l0aCBtZXNzYWdlIGZpcnN0IHNheSB0aGUgZXJyb3JcbiAgaWYgKGlzRXJyb3IodmFsdWUpKSB7XG4gICAgYmFzZSA9ICcgJyArIGZvcm1hdEVycm9yKHZhbHVlKTtcbiAgfVxuXG4gIGlmIChrZXlzLmxlbmd0aCA9PT0gMCAmJiAoIWFycmF5IHx8IHZhbHVlLmxlbmd0aCA9PSAwKSkge1xuICAgIHJldHVybiBicmFjZXNbMF0gKyBiYXNlICsgYnJhY2VzWzFdO1xuICB9XG5cbiAgaWYgKHJlY3Vyc2VUaW1lcyA8IDApIHtcbiAgICBpZiAoaXNSZWdFeHAodmFsdWUpKSB7XG4gICAgICByZXR1cm4gY3R4LnN0eWxpemUoUmVnRXhwLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKSwgJ3JlZ2V4cCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gY3R4LnN0eWxpemUoJ1tPYmplY3RdJywgJ3NwZWNpYWwnKTtcbiAgICB9XG4gIH1cblxuICBjdHguc2Vlbi5wdXNoKHZhbHVlKTtcblxuICB2YXIgb3V0cHV0O1xuICBpZiAoYXJyYXkpIHtcbiAgICBvdXRwdXQgPSBmb3JtYXRBcnJheShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLCBrZXlzKTtcbiAgfSBlbHNlIHtcbiAgICBvdXRwdXQgPSBrZXlzLm1hcChmdW5jdGlvbihrZXkpIHtcbiAgICAgIHJldHVybiBmb3JtYXRQcm9wZXJ0eShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLCBrZXksIGFycmF5KTtcbiAgICB9KTtcbiAgfVxuXG4gIGN0eC5zZWVuLnBvcCgpO1xuXG4gIHJldHVybiByZWR1Y2VUb1NpbmdsZVN0cmluZyhvdXRwdXQsIGJhc2UsIGJyYWNlcyk7XG59XG5cblxuZnVuY3Rpb24gZm9ybWF0UHJpbWl0aXZlKGN0eCwgdmFsdWUpIHtcbiAgaWYgKGlzVW5kZWZpbmVkKHZhbHVlKSlcbiAgICByZXR1cm4gY3R4LnN0eWxpemUoJ3VuZGVmaW5lZCcsICd1bmRlZmluZWQnKTtcbiAgaWYgKGlzU3RyaW5nKHZhbHVlKSkge1xuICAgIHZhciBzaW1wbGUgPSAnXFwnJyArIEpTT04uc3RyaW5naWZ5KHZhbHVlKS5yZXBsYWNlKC9eXCJ8XCIkL2csICcnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoLycvZywgXCJcXFxcJ1wiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcXFxcIi9nLCAnXCInKSArICdcXCcnO1xuICAgIHJldHVybiBjdHguc3R5bGl6ZShzaW1wbGUsICdzdHJpbmcnKTtcbiAgfVxuICBpZiAoaXNOdW1iZXIodmFsdWUpKVxuICAgIHJldHVybiBjdHguc3R5bGl6ZSgnJyArIHZhbHVlLCAnbnVtYmVyJyk7XG4gIGlmIChpc0Jvb2xlYW4odmFsdWUpKVxuICAgIHJldHVybiBjdHguc3R5bGl6ZSgnJyArIHZhbHVlLCAnYm9vbGVhbicpO1xuICAvLyBGb3Igc29tZSByZWFzb24gdHlwZW9mIG51bGwgaXMgXCJvYmplY3RcIiwgc28gc3BlY2lhbCBjYXNlIGhlcmUuXG4gIGlmIChpc051bGwodmFsdWUpKVxuICAgIHJldHVybiBjdHguc3R5bGl6ZSgnbnVsbCcsICdudWxsJyk7XG59XG5cblxuZnVuY3Rpb24gZm9ybWF0RXJyb3IodmFsdWUpIHtcbiAgcmV0dXJuICdbJyArIEVycm9yLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKSArICddJztcbn1cblxuXG5mdW5jdGlvbiBmb3JtYXRBcnJheShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLCBrZXlzKSB7XG4gIHZhciBvdXRwdXQgPSBbXTtcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSB2YWx1ZS5sZW5ndGg7IGkgPCBsOyArK2kpIHtcbiAgICBpZiAoaGFzT3duUHJvcGVydHkodmFsdWUsIFN0cmluZyhpKSkpIHtcbiAgICAgIG91dHB1dC5wdXNoKGZvcm1hdFByb3BlcnR5KGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcywgdmlzaWJsZUtleXMsXG4gICAgICAgICAgU3RyaW5nKGkpLCB0cnVlKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG91dHB1dC5wdXNoKCcnKTtcbiAgICB9XG4gIH1cbiAga2V5cy5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuICAgIGlmICgha2V5Lm1hdGNoKC9eXFxkKyQvKSkge1xuICAgICAgb3V0cHV0LnB1c2goZm9ybWF0UHJvcGVydHkoY3R4LCB2YWx1ZSwgcmVjdXJzZVRpbWVzLCB2aXNpYmxlS2V5cyxcbiAgICAgICAgICBrZXksIHRydWUpKTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gb3V0cHV0O1xufVxuXG5cbmZ1bmN0aW9uIGZvcm1hdFByb3BlcnR5KGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcywgdmlzaWJsZUtleXMsIGtleSwgYXJyYXkpIHtcbiAgdmFyIG5hbWUsIHN0ciwgZGVzYztcbiAgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodmFsdWUsIGtleSkgfHwgeyB2YWx1ZTogdmFsdWVba2V5XSB9O1xuICBpZiAoZGVzYy5nZXQpIHtcbiAgICBpZiAoZGVzYy5zZXQpIHtcbiAgICAgIHN0ciA9IGN0eC5zdHlsaXplKCdbR2V0dGVyL1NldHRlcl0nLCAnc3BlY2lhbCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdHIgPSBjdHguc3R5bGl6ZSgnW0dldHRlcl0nLCAnc3BlY2lhbCcpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBpZiAoZGVzYy5zZXQpIHtcbiAgICAgIHN0ciA9IGN0eC5zdHlsaXplKCdbU2V0dGVyXScsICdzcGVjaWFsJyk7XG4gICAgfVxuICB9XG4gIGlmICghaGFzT3duUHJvcGVydHkodmlzaWJsZUtleXMsIGtleSkpIHtcbiAgICBuYW1lID0gJ1snICsga2V5ICsgJ10nO1xuICB9XG4gIGlmICghc3RyKSB7XG4gICAgaWYgKGN0eC5zZWVuLmluZGV4T2YoZGVzYy52YWx1ZSkgPCAwKSB7XG4gICAgICBpZiAoaXNOdWxsKHJlY3Vyc2VUaW1lcykpIHtcbiAgICAgICAgc3RyID0gZm9ybWF0VmFsdWUoY3R4LCBkZXNjLnZhbHVlLCBudWxsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0ciA9IGZvcm1hdFZhbHVlKGN0eCwgZGVzYy52YWx1ZSwgcmVjdXJzZVRpbWVzIC0gMSk7XG4gICAgICB9XG4gICAgICBpZiAoc3RyLmluZGV4T2YoJ1xcbicpID4gLTEpIHtcbiAgICAgICAgaWYgKGFycmF5KSB7XG4gICAgICAgICAgc3RyID0gc3RyLnNwbGl0KCdcXG4nKS5tYXAoZnVuY3Rpb24obGluZSkge1xuICAgICAgICAgICAgcmV0dXJuICcgICcgKyBsaW5lO1xuICAgICAgICAgIH0pLmpvaW4oJ1xcbicpLnN1YnN0cigyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzdHIgPSAnXFxuJyArIHN0ci5zcGxpdCgnXFxuJykubWFwKGZ1bmN0aW9uKGxpbmUpIHtcbiAgICAgICAgICAgIHJldHVybiAnICAgJyArIGxpbmU7XG4gICAgICAgICAgfSkuam9pbignXFxuJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgc3RyID0gY3R4LnN0eWxpemUoJ1tDaXJjdWxhcl0nLCAnc3BlY2lhbCcpO1xuICAgIH1cbiAgfVxuICBpZiAoaXNVbmRlZmluZWQobmFtZSkpIHtcbiAgICBpZiAoYXJyYXkgJiYga2V5Lm1hdGNoKC9eXFxkKyQvKSkge1xuICAgICAgcmV0dXJuIHN0cjtcbiAgICB9XG4gICAgbmFtZSA9IEpTT04uc3RyaW5naWZ5KCcnICsga2V5KTtcbiAgICBpZiAobmFtZS5tYXRjaCgvXlwiKFthLXpBLVpfXVthLXpBLVpfMC05XSopXCIkLykpIHtcbiAgICAgIG5hbWUgPSBuYW1lLnN1YnN0cigxLCBuYW1lLmxlbmd0aCAtIDIpO1xuICAgICAgbmFtZSA9IGN0eC5zdHlsaXplKG5hbWUsICduYW1lJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5hbWUgPSBuYW1lLnJlcGxhY2UoLycvZywgXCJcXFxcJ1wiKVxuICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXFxcXFwiL2csICdcIicpXG4gICAgICAgICAgICAgICAgIC5yZXBsYWNlKC8oXlwifFwiJCkvZywgXCInXCIpO1xuICAgICAgbmFtZSA9IGN0eC5zdHlsaXplKG5hbWUsICdzdHJpbmcnKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbmFtZSArICc6ICcgKyBzdHI7XG59XG5cblxuZnVuY3Rpb24gcmVkdWNlVG9TaW5nbGVTdHJpbmcob3V0cHV0LCBiYXNlLCBicmFjZXMpIHtcbiAgdmFyIG51bUxpbmVzRXN0ID0gMDtcbiAgdmFyIGxlbmd0aCA9IG91dHB1dC5yZWR1Y2UoZnVuY3Rpb24ocHJldiwgY3VyKSB7XG4gICAgbnVtTGluZXNFc3QrKztcbiAgICBpZiAoY3VyLmluZGV4T2YoJ1xcbicpID49IDApIG51bUxpbmVzRXN0Kys7XG4gICAgcmV0dXJuIHByZXYgKyBjdXIucmVwbGFjZSgvXFx1MDAxYlxcW1xcZFxcZD9tL2csICcnKS5sZW5ndGggKyAxO1xuICB9LCAwKTtcblxuICBpZiAobGVuZ3RoID4gNjApIHtcbiAgICByZXR1cm4gYnJhY2VzWzBdICtcbiAgICAgICAgICAgKGJhc2UgPT09ICcnID8gJycgOiBiYXNlICsgJ1xcbiAnKSArXG4gICAgICAgICAgICcgJyArXG4gICAgICAgICAgIG91dHB1dC5qb2luKCcsXFxuICAnKSArXG4gICAgICAgICAgICcgJyArXG4gICAgICAgICAgIGJyYWNlc1sxXTtcbiAgfVxuXG4gIHJldHVybiBicmFjZXNbMF0gKyBiYXNlICsgJyAnICsgb3V0cHV0LmpvaW4oJywgJykgKyAnICcgKyBicmFjZXNbMV07XG59XG5cblxuLy8gTk9URTogVGhlc2UgdHlwZSBjaGVja2luZyBmdW5jdGlvbnMgaW50ZW50aW9uYWxseSBkb24ndCB1c2UgYGluc3RhbmNlb2ZgXG4vLyBiZWNhdXNlIGl0IGlzIGZyYWdpbGUgYW5kIGNhbiBiZSBlYXNpbHkgZmFrZWQgd2l0aCBgT2JqZWN0LmNyZWF0ZSgpYC5cbmZ1bmN0aW9uIGlzQXJyYXkoYXIpIHtcbiAgcmV0dXJuIEFycmF5LmlzQXJyYXkoYXIpO1xufVxuZXhwb3J0cy5pc0FycmF5ID0gaXNBcnJheTtcblxuZnVuY3Rpb24gaXNCb29sZWFuKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ2Jvb2xlYW4nO1xufVxuZXhwb3J0cy5pc0Jvb2xlYW4gPSBpc0Jvb2xlYW47XG5cbmZ1bmN0aW9uIGlzTnVsbChhcmcpIHtcbiAgcmV0dXJuIGFyZyA9PT0gbnVsbDtcbn1cbmV4cG9ydHMuaXNOdWxsID0gaXNOdWxsO1xuXG5mdW5jdGlvbiBpc051bGxPclVuZGVmaW5lZChhcmcpIHtcbiAgcmV0dXJuIGFyZyA9PSBudWxsO1xufVxuZXhwb3J0cy5pc051bGxPclVuZGVmaW5lZCA9IGlzTnVsbE9yVW5kZWZpbmVkO1xuXG5mdW5jdGlvbiBpc051bWJlcihhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdudW1iZXInO1xufVxuZXhwb3J0cy5pc051bWJlciA9IGlzTnVtYmVyO1xuXG5mdW5jdGlvbiBpc1N0cmluZyhhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdzdHJpbmcnO1xufVxuZXhwb3J0cy5pc1N0cmluZyA9IGlzU3RyaW5nO1xuXG5mdW5jdGlvbiBpc1N5bWJvbChhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdzeW1ib2wnO1xufVxuZXhwb3J0cy5pc1N5bWJvbCA9IGlzU3ltYm9sO1xuXG5mdW5jdGlvbiBpc1VuZGVmaW5lZChhcmcpIHtcbiAgcmV0dXJuIGFyZyA9PT0gdm9pZCAwO1xufVxuZXhwb3J0cy5pc1VuZGVmaW5lZCA9IGlzVW5kZWZpbmVkO1xuXG5mdW5jdGlvbiBpc1JlZ0V4cChyZSkge1xuICByZXR1cm4gaXNPYmplY3QocmUpICYmIG9iamVjdFRvU3RyaW5nKHJlKSA9PT0gJ1tvYmplY3QgUmVnRXhwXSc7XG59XG5leHBvcnRzLmlzUmVnRXhwID0gaXNSZWdFeHA7XG5cbmZ1bmN0aW9uIGlzT2JqZWN0KGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ29iamVjdCcgJiYgYXJnICE9PSBudWxsO1xufVxuZXhwb3J0cy5pc09iamVjdCA9IGlzT2JqZWN0O1xuXG5mdW5jdGlvbiBpc0RhdGUoZCkge1xuICByZXR1cm4gaXNPYmplY3QoZCkgJiYgb2JqZWN0VG9TdHJpbmcoZCkgPT09ICdbb2JqZWN0IERhdGVdJztcbn1cbmV4cG9ydHMuaXNEYXRlID0gaXNEYXRlO1xuXG5mdW5jdGlvbiBpc0Vycm9yKGUpIHtcbiAgcmV0dXJuIGlzT2JqZWN0KGUpICYmXG4gICAgICAob2JqZWN0VG9TdHJpbmcoZSkgPT09ICdbb2JqZWN0IEVycm9yXScgfHwgZSBpbnN0YW5jZW9mIEVycm9yKTtcbn1cbmV4cG9ydHMuaXNFcnJvciA9IGlzRXJyb3I7XG5cbmZ1bmN0aW9uIGlzRnVuY3Rpb24oYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnZnVuY3Rpb24nO1xufVxuZXhwb3J0cy5pc0Z1bmN0aW9uID0gaXNGdW5jdGlvbjtcblxuZnVuY3Rpb24gaXNQcmltaXRpdmUoYXJnKSB7XG4gIHJldHVybiBhcmcgPT09IG51bGwgfHxcbiAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdib29sZWFuJyB8fFxuICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ251bWJlcicgfHxcbiAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdzdHJpbmcnIHx8XG4gICAgICAgICB0eXBlb2YgYXJnID09PSAnc3ltYm9sJyB8fCAgLy8gRVM2IHN5bWJvbFxuICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ3VuZGVmaW5lZCc7XG59XG5leHBvcnRzLmlzUHJpbWl0aXZlID0gaXNQcmltaXRpdmU7XG5cbmV4cG9ydHMuaXNCdWZmZXIgPSByZXF1aXJlKCcuL3N1cHBvcnQvaXNCdWZmZXInKTtcblxuZnVuY3Rpb24gb2JqZWN0VG9TdHJpbmcobykge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pO1xufVxuXG5cbmZ1bmN0aW9uIHBhZChuKSB7XG4gIHJldHVybiBuIDwgMTAgPyAnMCcgKyBuLnRvU3RyaW5nKDEwKSA6IG4udG9TdHJpbmcoMTApO1xufVxuXG5cbnZhciBtb250aHMgPSBbJ0phbicsICdGZWInLCAnTWFyJywgJ0FwcicsICdNYXknLCAnSnVuJywgJ0p1bCcsICdBdWcnLCAnU2VwJyxcbiAgICAgICAgICAgICAgJ09jdCcsICdOb3YnLCAnRGVjJ107XG5cbi8vIDI2IEZlYiAxNjoxOTozNFxuZnVuY3Rpb24gdGltZXN0YW1wKCkge1xuICB2YXIgZCA9IG5ldyBEYXRlKCk7XG4gIHZhciB0aW1lID0gW3BhZChkLmdldEhvdXJzKCkpLFxuICAgICAgICAgICAgICBwYWQoZC5nZXRNaW51dGVzKCkpLFxuICAgICAgICAgICAgICBwYWQoZC5nZXRTZWNvbmRzKCkpXS5qb2luKCc6Jyk7XG4gIHJldHVybiBbZC5nZXREYXRlKCksIG1vbnRoc1tkLmdldE1vbnRoKCldLCB0aW1lXS5qb2luKCcgJyk7XG59XG5cblxuLy8gbG9nIGlzIGp1c3QgYSB0aGluIHdyYXBwZXIgdG8gY29uc29sZS5sb2cgdGhhdCBwcmVwZW5kcyBhIHRpbWVzdGFtcFxuZXhwb3J0cy5sb2cgPSBmdW5jdGlvbigpIHtcbiAgY29uc29sZS5sb2coJyVzIC0gJXMnLCB0aW1lc3RhbXAoKSwgZXhwb3J0cy5mb3JtYXQuYXBwbHkoZXhwb3J0cywgYXJndW1lbnRzKSk7XG59O1xuXG5cbi8qKlxuICogSW5oZXJpdCB0aGUgcHJvdG90eXBlIG1ldGhvZHMgZnJvbSBvbmUgY29uc3RydWN0b3IgaW50byBhbm90aGVyLlxuICpcbiAqIFRoZSBGdW5jdGlvbi5wcm90b3R5cGUuaW5oZXJpdHMgZnJvbSBsYW5nLmpzIHJld3JpdHRlbiBhcyBhIHN0YW5kYWxvbmVcbiAqIGZ1bmN0aW9uIChub3Qgb24gRnVuY3Rpb24ucHJvdG90eXBlKS4gTk9URTogSWYgdGhpcyBmaWxlIGlzIHRvIGJlIGxvYWRlZFxuICogZHVyaW5nIGJvb3RzdHJhcHBpbmcgdGhpcyBmdW5jdGlvbiBuZWVkcyB0byBiZSByZXdyaXR0ZW4gdXNpbmcgc29tZSBuYXRpdmVcbiAqIGZ1bmN0aW9ucyBhcyBwcm90b3R5cGUgc2V0dXAgdXNpbmcgbm9ybWFsIEphdmFTY3JpcHQgZG9lcyBub3Qgd29yayBhc1xuICogZXhwZWN0ZWQgZHVyaW5nIGJvb3RzdHJhcHBpbmcgKHNlZSBtaXJyb3IuanMgaW4gcjExNDkwMykuXG4gKlxuICogQHBhcmFtIHtmdW5jdGlvbn0gY3RvciBDb25zdHJ1Y3RvciBmdW5jdGlvbiB3aGljaCBuZWVkcyB0byBpbmhlcml0IHRoZVxuICogICAgIHByb3RvdHlwZS5cbiAqIEBwYXJhbSB7ZnVuY3Rpb259IHN1cGVyQ3RvciBDb25zdHJ1Y3RvciBmdW5jdGlvbiB0byBpbmhlcml0IHByb3RvdHlwZSBmcm9tLlxuICovXG5leHBvcnRzLmluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKTtcblxuZXhwb3J0cy5fZXh0ZW5kID0gZnVuY3Rpb24ob3JpZ2luLCBhZGQpIHtcbiAgLy8gRG9uJ3QgZG8gYW55dGhpbmcgaWYgYWRkIGlzbid0IGFuIG9iamVjdFxuICBpZiAoIWFkZCB8fCAhaXNPYmplY3QoYWRkKSkgcmV0dXJuIG9yaWdpbjtcblxuICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGFkZCk7XG4gIHZhciBpID0ga2V5cy5sZW5ndGg7XG4gIHdoaWxlIChpLS0pIHtcbiAgICBvcmlnaW5ba2V5c1tpXV0gPSBhZGRba2V5c1tpXV07XG4gIH1cbiAgcmV0dXJuIG9yaWdpbjtcbn07XG5cbmZ1bmN0aW9uIGhhc093blByb3BlcnR5KG9iaiwgcHJvcCkge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCk7XG59XG4iLCJ2YXIgaW5kZXhPZiA9IHJlcXVpcmUoJ2luZGV4b2YnKTtcblxudmFyIE9iamVjdF9rZXlzID0gZnVuY3Rpb24gKG9iaikge1xuICAgIGlmIChPYmplY3Qua2V5cykgcmV0dXJuIE9iamVjdC5rZXlzKG9iailcbiAgICBlbHNlIHtcbiAgICAgICAgdmFyIHJlcyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSByZXMucHVzaChrZXkpXG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfVxufTtcblxudmFyIGZvckVhY2ggPSBmdW5jdGlvbiAoeHMsIGZuKSB7XG4gICAgaWYgKHhzLmZvckVhY2gpIHJldHVybiB4cy5mb3JFYWNoKGZuKVxuICAgIGVsc2UgZm9yICh2YXIgaSA9IDA7IGkgPCB4cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBmbih4c1tpXSwgaSwgeHMpO1xuICAgIH1cbn07XG5cbnZhciBkZWZpbmVQcm9wID0gKGZ1bmN0aW9uKCkge1xuICAgIHRyeSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSwgJ18nLCB7fSk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbihvYmosIG5hbWUsIHZhbHVlKSB7XG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBuYW1lLCB7XG4gICAgICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfTtcbiAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKG9iaiwgbmFtZSwgdmFsdWUpIHtcbiAgICAgICAgICAgIG9ialtuYW1lXSA9IHZhbHVlO1xuICAgICAgICB9O1xuICAgIH1cbn0oKSk7XG5cbnZhciBnbG9iYWxzID0gWydBcnJheScsICdCb29sZWFuJywgJ0RhdGUnLCAnRXJyb3InLCAnRXZhbEVycm9yJywgJ0Z1bmN0aW9uJyxcbidJbmZpbml0eScsICdKU09OJywgJ01hdGgnLCAnTmFOJywgJ051bWJlcicsICdPYmplY3QnLCAnUmFuZ2VFcnJvcicsXG4nUmVmZXJlbmNlRXJyb3InLCAnUmVnRXhwJywgJ1N0cmluZycsICdTeW50YXhFcnJvcicsICdUeXBlRXJyb3InLCAnVVJJRXJyb3InLFxuJ2RlY29kZVVSSScsICdkZWNvZGVVUklDb21wb25lbnQnLCAnZW5jb2RlVVJJJywgJ2VuY29kZVVSSUNvbXBvbmVudCcsICdlc2NhcGUnLFxuJ2V2YWwnLCAnaXNGaW5pdGUnLCAnaXNOYU4nLCAncGFyc2VGbG9hdCcsICdwYXJzZUludCcsICd1bmRlZmluZWQnLCAndW5lc2NhcGUnXTtcblxuZnVuY3Rpb24gQ29udGV4dCgpIHt9XG5Db250ZXh0LnByb3RvdHlwZSA9IHt9O1xuXG52YXIgU2NyaXB0ID0gZXhwb3J0cy5TY3JpcHQgPSBmdW5jdGlvbiBOb2RlU2NyaXB0IChjb2RlKSB7XG4gICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFNjcmlwdCkpIHJldHVybiBuZXcgU2NyaXB0KGNvZGUpO1xuICAgIHRoaXMuY29kZSA9IGNvZGU7XG59O1xuXG5TY3JpcHQucHJvdG90eXBlLnJ1bkluQ29udGV4dCA9IGZ1bmN0aW9uIChjb250ZXh0KSB7XG4gICAgaWYgKCEoY29udGV4dCBpbnN0YW5jZW9mIENvbnRleHQpKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJuZWVkcyBhICdjb250ZXh0JyBhcmd1bWVudC5cIik7XG4gICAgfVxuICAgIFxuICAgIHZhciBpZnJhbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpZnJhbWUnKTtcbiAgICBpZiAoIWlmcmFtZS5zdHlsZSkgaWZyYW1lLnN0eWxlID0ge307XG4gICAgaWZyYW1lLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgXG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChpZnJhbWUpO1xuICAgIFxuICAgIHZhciB3aW4gPSBpZnJhbWUuY29udGVudFdpbmRvdztcbiAgICB2YXIgd0V2YWwgPSB3aW4uZXZhbCwgd0V4ZWNTY3JpcHQgPSB3aW4uZXhlY1NjcmlwdDtcblxuICAgIGlmICghd0V2YWwgJiYgd0V4ZWNTY3JpcHQpIHtcbiAgICAgICAgLy8gd2luLmV2YWwoKSBtYWdpY2FsbHkgYXBwZWFycyB3aGVuIHRoaXMgaXMgY2FsbGVkIGluIElFOlxuICAgICAgICB3RXhlY1NjcmlwdC5jYWxsKHdpbiwgJ251bGwnKTtcbiAgICAgICAgd0V2YWwgPSB3aW4uZXZhbDtcbiAgICB9XG4gICAgXG4gICAgZm9yRWFjaChPYmplY3Rfa2V5cyhjb250ZXh0KSwgZnVuY3Rpb24gKGtleSkge1xuICAgICAgICB3aW5ba2V5XSA9IGNvbnRleHRba2V5XTtcbiAgICB9KTtcbiAgICBmb3JFYWNoKGdsb2JhbHMsIGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgaWYgKGNvbnRleHRba2V5XSkge1xuICAgICAgICAgICAgd2luW2tleV0gPSBjb250ZXh0W2tleV07XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICB2YXIgd2luS2V5cyA9IE9iamVjdF9rZXlzKHdpbik7XG5cbiAgICB2YXIgcmVzID0gd0V2YWwuY2FsbCh3aW4sIHRoaXMuY29kZSk7XG4gICAgXG4gICAgZm9yRWFjaChPYmplY3Rfa2V5cyh3aW4pLCBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIC8vIEF2b2lkIGNvcHlpbmcgY2lyY3VsYXIgb2JqZWN0cyBsaWtlIGB0b3BgIGFuZCBgd2luZG93YCBieSBvbmx5XG4gICAgICAgIC8vIHVwZGF0aW5nIGV4aXN0aW5nIGNvbnRleHQgcHJvcGVydGllcyBvciBuZXcgcHJvcGVydGllcyBpbiB0aGUgYHdpbmBcbiAgICAgICAgLy8gdGhhdCB3YXMgb25seSBpbnRyb2R1Y2VkIGFmdGVyIHRoZSBldmFsLlxuICAgICAgICBpZiAoa2V5IGluIGNvbnRleHQgfHwgaW5kZXhPZih3aW5LZXlzLCBrZXkpID09PSAtMSkge1xuICAgICAgICAgICAgY29udGV4dFtrZXldID0gd2luW2tleV07XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIGZvckVhY2goZ2xvYmFscywgZnVuY3Rpb24gKGtleSkge1xuICAgICAgICBpZiAoIShrZXkgaW4gY29udGV4dCkpIHtcbiAgICAgICAgICAgIGRlZmluZVByb3AoY29udGV4dCwga2V5LCB3aW5ba2V5XSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGlmcmFtZSk7XG4gICAgXG4gICAgcmV0dXJuIHJlcztcbn07XG5cblNjcmlwdC5wcm90b3R5cGUucnVuSW5UaGlzQ29udGV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gZXZhbCh0aGlzLmNvZGUpOyAvLyBtYXliZS4uLlxufTtcblxuU2NyaXB0LnByb3RvdHlwZS5ydW5Jbk5ld0NvbnRleHQgPSBmdW5jdGlvbiAoY29udGV4dCkge1xuICAgIHZhciBjdHggPSBTY3JpcHQuY3JlYXRlQ29udGV4dChjb250ZXh0KTtcbiAgICB2YXIgcmVzID0gdGhpcy5ydW5JbkNvbnRleHQoY3R4KTtcblxuICAgIGZvckVhY2goT2JqZWN0X2tleXMoY3R4KSwgZnVuY3Rpb24gKGtleSkge1xuICAgICAgICBjb250ZXh0W2tleV0gPSBjdHhba2V5XTtcbiAgICB9KTtcblxuICAgIHJldHVybiByZXM7XG59O1xuXG5mb3JFYWNoKE9iamVjdF9rZXlzKFNjcmlwdC5wcm90b3R5cGUpLCBmdW5jdGlvbiAobmFtZSkge1xuICAgIGV4cG9ydHNbbmFtZV0gPSBTY3JpcHRbbmFtZV0gPSBmdW5jdGlvbiAoY29kZSkge1xuICAgICAgICB2YXIgcyA9IFNjcmlwdChjb2RlKTtcbiAgICAgICAgcmV0dXJuIHNbbmFtZV0uYXBwbHkocywgW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpKTtcbiAgICB9O1xufSk7XG5cbmV4cG9ydHMuY3JlYXRlU2NyaXB0ID0gZnVuY3Rpb24gKGNvZGUpIHtcbiAgICByZXR1cm4gZXhwb3J0cy5TY3JpcHQoY29kZSk7XG59O1xuXG5leHBvcnRzLmNyZWF0ZUNvbnRleHQgPSBTY3JpcHQuY3JlYXRlQ29udGV4dCA9IGZ1bmN0aW9uIChjb250ZXh0KSB7XG4gICAgdmFyIGNvcHkgPSBuZXcgQ29udGV4dCgpO1xuICAgIGlmKHR5cGVvZiBjb250ZXh0ID09PSAnb2JqZWN0Jykge1xuICAgICAgICBmb3JFYWNoKE9iamVjdF9rZXlzKGNvbnRleHQpLCBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICBjb3B5W2tleV0gPSBjb250ZXh0W2tleV07XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gY29weTtcbn07XG4iXX0=
